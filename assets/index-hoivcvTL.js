const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-D7ROQSAy.js","assets/Button-9eR8SiQT.js","assets/clock-BCv6gmpA.js","assets/wallet-ClbG_ouh.js","assets/users-DPKeWpQ7.js","assets/bell-CCz_zMvu.js","assets/ForgotPasswordPage-BfUTEB1Y.js","assets/Input-DaVeZHjk.js","assets/MenuPage-DuIpnhWJ.js","assets/star-BUIo-gao.js","assets/sparkles-Db9JqNUm.js","assets/ProductCardSkeleton-BgY1cdG8.js","assets/search-BicICMdH.js","assets/arrow-up-down-COJ27CAu.js","assets/CheckoutPage-CNFXKACC.js","assets/banknote-DIqZZdiH.js","assets/mockAvailableRewards-2NOuBi-T.js","assets/shopping-bag-Bd4UBuTm.js","assets/coffee-ynXiYka4.js","assets/message-square-CQmPlm4-.js","assets/QueuePage-49Kc57TJ.js","assets/DigitalReceipt-CedNdiYu.js","assets/thumbs-up-fA7tnlVM.js","assets/award-Cfva4ZL3.js","assets/RewardsPage-BadUfRpx.js","assets/history-CT8W-_ro.js","assets/format-BoV-TgZi.js","assets/en-US-wfBU2YNu.js","assets/calendar-D_Pl8fbq.js","assets/leaf-BTc4qHcz.js","assets/ProfilePage-DjvHtO2l.js","assets/save-BhJLQt-k.js","assets/chevron-right-C6bR9qri.js","assets/StarRating-B2mGYaQ1.js","assets/settings-DlP1nL2B.js","assets/square-pen-DYtwsNCj.js","assets/FlavorProfilePage-CfuoY_zF.js","assets/zap-9Zg6d9Hm.js","assets/PolarChart-xoR5ODBI.js","assets/AboutPage-DxCcrUPW.js","assets/ContactPage-Cy_W5si2.js","assets/Textarea-D17Ixho2.js","assets/FAQPage-BD1e7PLr.js","assets/TermsPage-CEAWymQp.js","assets/file-text-B_KEMIjR.js","assets/credit-card-BXlyckke.js","assets/PrivacyPolicyPage-C83Mqfxo.js","assets/CookiePolicyPage-Bd_kNRVz.js","assets/chart-column-B-Gmdz_B.js","assets/DrinkLabPage-DZIbL42-.js","assets/snowflake-RyptCNSs.js","assets/AdminLayout-CBurZu5U.js","assets/ConfirmLogoutModal-COKYMkq1.js","assets/package-C1YW808m.js","assets/AdminDashboardPage-CGwsy3a5.js","assets/SalesOverview-Cv5D5zWz.js","assets/activity-C_OB0AnI.js","assets/AdminQueuePage-Di47r_8k.js","assets/inventoryDeduction-BHKIcWK7.js","assets/AdminInventoryPage-CyEHPHb7.js","assets/apple-D_6xm1ZI.js","assets/AdminProductsPage-HHgpCfEm.js","assets/AdminAnalyticsPage-9AP56oUq.js","assets/AdminFeedbackPage-D6OLXDaw.js","assets/funnel-CG95gBKf.js","assets/AdminSettingsPage-DGlY2dI-.js","assets/store-BBxmZl0p.js","assets/AdminOrdersHistoryPage-Dv0miUY-.js","assets/AdminUsersPage-C5EMWIni.js","assets/EmployeeLayout-B7A1nz3e.js","assets/POSDashboard-SgeTHlT3.js","assets/POSPage-DVdfMxzV.js"])))=>i.map(i=>d[i]);
function T4(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Jy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ow(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var JC={exports:{}},vg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x4=Symbol.for("react.transitional.element"),E4=Symbol.for("react.fragment");function ZC(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:x4,type:t,key:i,ref:e!==void 0?e:null,props:n}}vg.Fragment=E4;vg.jsx=ZC;vg.jsxs=ZC;JC.exports=vg;var _=JC.exports,eP={exports:{}},ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vw=Symbol.for("react.transitional.element"),S4=Symbol.for("react.portal"),I4=Symbol.for("react.fragment"),A4=Symbol.for("react.strict_mode"),R4=Symbol.for("react.profiler"),C4=Symbol.for("react.consumer"),P4=Symbol.for("react.context"),N4=Symbol.for("react.forward_ref"),D4=Symbol.for("react.suspense"),k4=Symbol.for("react.memo"),tP=Symbol.for("react.lazy"),M4=Symbol.for("react.activity"),p1=Symbol.iterator;function O4(t){return t===null||typeof t!="object"?null:(t=p1&&t[p1]||t["@@iterator"],typeof t=="function"?t:null)}var nP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iP=Object.assign,rP={};function Dc(t,e,n){this.props=t,this.context=e,this.refs=rP,this.updater=n||nP}Dc.prototype.isReactComponent={};Dc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Dc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sP(){}sP.prototype=Dc.prototype;function Lw(t,e,n){this.props=t,this.context=e,this.refs=rP,this.updater=n||nP}var Uw=Lw.prototype=new sP;Uw.constructor=Lw;iP(Uw,Dc.prototype);Uw.isPureReactComponent=!0;var g1=Array.isArray;function S0(){}var Je={H:null,A:null,T:null,S:null},aP=Object.prototype.hasOwnProperty;function jw(t,e,n){var i=n.ref;return{$$typeof:Vw,type:t,key:e,ref:i!==void 0?i:null,props:n}}function V4(t,e){return jw(t.type,e,t.props)}function zw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vw}function L4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var y1=/\/+/g;function Zy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?L4(""+t.key):e.toString(36)}function U4(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(S0,S0):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function ll(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Vw:case S4:a=!0;break;case tP:return a=t._init,ll(a(t._payload),e,n,i,r)}}if(a)return r=r(t),a=i===""?"."+Zy(t,0):i,g1(r)?(n="",a!=null&&(n=a.replace(y1,"$&/")+"/"),ll(r,e,n,"",function(c){return c})):r!=null&&(zw(r)&&(r=V4(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(y1,"$&/")+"/")+a)),e.push(r)),1;a=0;var o=i===""?".":i+":";if(g1(t))for(var l=0;l<t.length;l++)i=t[l],s=o+Zy(i,l),a+=ll(i,e,n,s,r);else if(l=O4(t),typeof l=="function")for(t=l.call(t),l=0;!(i=t.next()).done;)i=i.value,s=o+Zy(i,l++),a+=ll(i,e,n,s,r);else if(s==="object"){if(typeof t.then=="function")return ll(U4(t),e,n,i,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function Vf(t,e,n){if(t==null)return t;var i=[],r=0;return ll(t,i,"","",function(s){return e.call(n,s,r++)}),i}function j4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var v1=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},z4={map:Vf,forEach:function(t,e,n){Vf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vf(t,function(){e++}),e},toArray:function(t){return Vf(t,function(e){return e})||[]},only:function(t){if(!zw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Activity=M4;ue.Children=z4;ue.Component=Dc;ue.Fragment=I4;ue.Profiler=R4;ue.PureComponent=Lw;ue.StrictMode=A4;ue.Suspense=D4;ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Je;ue.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Je.H.useMemoCache(t)}};ue.cache=function(t){return function(){return t.apply(null,arguments)}};ue.cacheSignal=function(){return null};ue.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=iP({},t.props),r=t.key;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)!aP.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(i[s]=e[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];i.children=a}return jw(t.type,r,i)};ue.createContext=function(t){return t={$$typeof:P4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:C4,_context:t},t};ue.createElement=function(t,e,n){var i,r={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)aP.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return jw(t,s,r)};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:N4,render:t}};ue.isValidElement=zw;ue.lazy=function(t){return{$$typeof:tP,_payload:{_status:-1,_result:t},_init:j4}};ue.memo=function(t,e){return{$$typeof:k4,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=Je.T,n={};Je.T=n;try{var i=t(),r=Je.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(S0,v1)}catch(s){v1(s)}finally{e!==null&&n.types!==null&&(e.types=n.types),Je.T=e}};ue.unstable_useCacheRefresh=function(){return Je.H.useCacheRefresh()};ue.use=function(t){return Je.H.use(t)};ue.useActionState=function(t,e,n){return Je.H.useActionState(t,e,n)};ue.useCallback=function(t,e){return Je.H.useCallback(t,e)};ue.useContext=function(t){return Je.H.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t,e){return Je.H.useDeferredValue(t,e)};ue.useEffect=function(t,e){return Je.H.useEffect(t,e)};ue.useEffectEvent=function(t){return Je.H.useEffectEvent(t)};ue.useId=function(){return Je.H.useId()};ue.useImperativeHandle=function(t,e,n){return Je.H.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Je.H.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Je.H.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Je.H.useMemo(t,e)};ue.useOptimistic=function(t,e){return Je.H.useOptimistic(t,e)};ue.useReducer=function(t,e,n){return Je.H.useReducer(t,e,n)};ue.useRef=function(t){return Je.H.useRef(t)};ue.useState=function(t){return Je.H.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Je.H.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Je.H.useTransition()};ue.version="19.2.0";eP.exports=ue;var M=eP.exports;const Xn=Ow(M),wne=T4({__proto__:null,default:Xn},[M]);var oP={exports:{}},_g={},lP={exports:{}},cP={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,F){var $=L.length;L.push(F);e:for(;0<$;){var Q=$-1>>>1,te=L[Q];if(0<r(te,F))L[Q]=F,L[$]=te,$=Q;else break e}}function n(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var F=L[0],$=L.pop();if($!==F){L[0]=$;e:for(var Q=0,te=L.length,ce=te>>>1;Q<ce;){var Z=2*(Q+1)-1,ae=L[Z],Me=Z+1,ot=L[Me];if(0>r(ae,$))Me<te&&0>r(ot,ae)?(L[Q]=ot,L[Me]=$,Q=Me):(L[Q]=ae,L[Z]=$,Q=Z);else if(Me<te&&0>r(ot,$))L[Q]=ot,L[Me]=$,Q=Me;else break e}}return F}function r(L,F){var $=L.sortIndex-F.sortIndex;return $!==0?$:L.id-F.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;function R(L){for(var F=n(c);F!==null;){if(F.callback===null)i(c);else if(F.startTime<=L)i(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function S(L){if(g=!1,R(L),!p)if(n(l)!==null)p=!0,C||(C=!0,k());else{var F=n(c);F!==null&&z(S,F.startTime-L)}}var C=!1,x=-1,T=5,A=-1;function I(){return v?!0:!(t.unstable_now()-A<T)}function P(){if(v=!1,C){var L=t.unstable_now();A=L;var F=!0;try{e:{p=!1,g&&(g=!1,w(x),x=-1),h=!0;var $=f;try{t:{for(R(L),d=n(l);d!==null&&!(d.expirationTime>L&&I());){var Q=d.callback;if(typeof Q=="function"){d.callback=null,f=d.priorityLevel;var te=Q(d.expirationTime<=L);if(L=t.unstable_now(),typeof te=="function"){d.callback=te,R(L),F=!0;break t}d===n(l)&&i(l),R(L)}else i(l);d=n(l)}if(d!==null)F=!0;else{var ce=n(c);ce!==null&&z(S,ce.startTime-L),F=!1}}break e}finally{d=null,f=$,h=!1}F=void 0}}finally{F?k():C=!1}}}var k;if(typeof b=="function")k=function(){b(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,V=D.port2;D.port1.onmessage=P,k=function(){V.postMessage(null)}}else k=function(){y(P,0)};function z(L,F){x=y(function(){L(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(L){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var $=f;f=F;try{return L()}finally{f=$}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(L,F){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var $=f;f=L;try{return F()}finally{f=$}},t.unstable_scheduleCallback=function(L,F,$){var Q=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?Q+$:Q):$=Q,L){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=$+te,L={id:u++,callback:F,priorityLevel:L,startTime:$,expirationTime:te,sortIndex:-1},$>Q?(L.sortIndex=$,e(c,L),n(l)===null&&L===n(c)&&(g?(w(x),x=-1):g=!0,z(S,$-Q))):(L.sortIndex=te,e(l,L),p||h||(p=!0,C||(C=!0,k()))),L},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(L){var F=f;return function(){var $=f;f=F;try{return L.apply(this,arguments)}finally{f=$}}}})(cP);lP.exports=cP;var B4=lP.exports,uP={exports:{}},In={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F4=M;function hP(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ms(){}var Tn={d:{f:ms,r:function(){throw Error(hP(522))},D:ms,C:ms,L:ms,m:ms,X:ms,S:ms,M:ms},p:0,findDOMNode:null},q4=Symbol.for("react.portal");function H4(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q4,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var nh=F4.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function wg(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}In.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Tn;In.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(hP(299));return H4(t,e,null,n)};In.flushSync=function(t){var e=nh.T,n=Tn.p;try{if(nh.T=null,Tn.p=2,t)return t()}finally{nh.T=e,Tn.p=n,Tn.d.f()}};In.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Tn.d.C(t,e))};In.prefetchDNS=function(t){typeof t=="string"&&Tn.d.D(t)};In.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=wg(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Tn.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&Tn.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};In.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=wg(e.as,e.crossOrigin);Tn.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Tn.d.M(t)};In.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=wg(n,e.crossOrigin);Tn.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};In.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=wg(e.as,e.crossOrigin);Tn.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Tn.d.m(t)};In.requestFormReset=function(t){Tn.d.r(t)};In.unstable_batchedUpdates=function(t,e){return t(e)};In.useFormState=function(t,e,n){return nh.H.useFormState(t,e,n)};In.useFormStatus=function(){return nh.H.useHostTransitionStatus()};In.version="19.2.0";function dP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dP)}catch(t){console.error(t)}}dP(),uP.exports=In;var fP=uP.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ot=B4,mP=M,$4=fP;function H(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function pP(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nd(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yP(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function _1(t){if(Nd(t)!==t)throw Error(H(188))}function G4(t){var e=t.alternate;if(!e){if(e=Nd(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return _1(r),t;if(s===i)return _1(r),e;s=s.sibling}throw Error(H(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===n){a=!0,n=r,i=s;break}if(o===i){a=!0,i=r,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,i=r;break}if(o===i){a=!0,i=s,n=r;break}o=o.sibling}if(!a)throw Error(H(189))}}if(n.alternate!==i)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function vP(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=vP(t),e!==null)return e;t=t.sibling}return null}var et=Object.assign,K4=Symbol.for("react.element"),Lf=Symbol.for("react.transitional.element"),ju=Symbol.for("react.portal"),gl=Symbol.for("react.fragment"),_P=Symbol.for("react.strict_mode"),I0=Symbol.for("react.profiler"),wP=Symbol.for("react.consumer"),Ir=Symbol.for("react.context"),Bw=Symbol.for("react.forward_ref"),A0=Symbol.for("react.suspense"),R0=Symbol.for("react.suspense_list"),Fw=Symbol.for("react.memo"),Ts=Symbol.for("react.lazy"),C0=Symbol.for("react.activity"),W4=Symbol.for("react.memo_cache_sentinel"),w1=Symbol.iterator;function wu(t){return t===null||typeof t!="object"?null:(t=w1&&t[w1]||t["@@iterator"],typeof t=="function"?t:null)}var Q4=Symbol.for("react.client.reference");function P0(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Q4?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gl:return"Fragment";case I0:return"Profiler";case _P:return"StrictMode";case A0:return"Suspense";case R0:return"SuspenseList";case C0:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ju:return"Portal";case Ir:return t.displayName||"Context";case wP:return(t._context.displayName||"Context")+".Consumer";case Bw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fw:return e=t.displayName||null,e!==null?e:P0(t.type)||"Memo";case Ts:e=t._payload,t=t._init;try{return P0(t(e))}catch{}}return null}var zu=Array.isArray,oe=mP.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ne=$4.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,no={pending:!1,data:null,method:null,action:null},N0=[],yl=-1;function mr(t){return{current:t}}function Gt(t){0>yl||(t.current=N0[yl],N0[yl]=null,yl--)}function He(t,e){yl++,N0[yl]=t.current,t.current=e}var rr=mr(null),Bh=mr(null),Us=mr(null),ip=mr(null);function rp(t,e){switch(He(Us,e),He(Bh,t),He(rr,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?IS(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=IS(e),t=zN(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Gt(rr),He(rr,t)}function Ql(){Gt(rr),Gt(Bh),Gt(Us)}function D0(t){t.memoizedState!==null&&He(ip,t);var e=rr.current,n=zN(e,t.type);e!==n&&(He(Bh,t),He(rr,n))}function sp(t){Bh.current===t&&(Gt(rr),Gt(Bh)),ip.current===t&&(Gt(ip),Jh._currentValue=no)}var ev,b1;function Va(t){if(ev===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ev=e&&e[1]||"",b1=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ev+t+b1}var tv=!1;function nv(t,e){if(!t||tv)return"";tv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(h){var f=h}Reflect.construct(t,[],d)}else{try{d.call()}catch(h){f=h}t.call(d.prototype)}}else{try{throw Error()}catch(h){f=h}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(h){if(h&&f&&typeof h.stack=="string")return[h.stack,f.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split(`
`),c=o.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==c[r]){var u=`
`+l[i].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=i&&0<=r);break}}}finally{tv=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Va(n):""}function Y4(t,e){switch(t.tag){case 26:case 27:case 5:return Va(t.type);case 16:return Va("Lazy");case 13:return t.child!==e&&e!==null?Va("Suspense Fallback"):Va("Suspense");case 19:return Va("SuspenseList");case 0:case 15:return nv(t.type,!1);case 11:return nv(t.type.render,!1);case 1:return nv(t.type,!0);case 31:return Va("Activity");default:return""}}function T1(t){try{var e="",n=null;do e+=Y4(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var k0=Object.prototype.hasOwnProperty,qw=Ot.unstable_scheduleCallback,iv=Ot.unstable_cancelCallback,X4=Ot.unstable_shouldYield,J4=Ot.unstable_requestPaint,Jn=Ot.unstable_now,Z4=Ot.unstable_getCurrentPriorityLevel,bP=Ot.unstable_ImmediatePriority,TP=Ot.unstable_UserBlockingPriority,ap=Ot.unstable_NormalPriority,eU=Ot.unstable_LowPriority,xP=Ot.unstable_IdlePriority,tU=Ot.log,nU=Ot.unstable_setDisableYieldValue,Dd=null,Zn=null;function Ps(t){if(typeof tU=="function"&&nU(t),Zn&&typeof Zn.setStrictMode=="function")try{Zn.setStrictMode(Dd,t)}catch{}}var ei=Math.clz32?Math.clz32:sU,iU=Math.log,rU=Math.LN2;function sU(t){return t>>>=0,t===0?32:31-(iU(t)/rU|0)|0}var Uf=256,jf=262144,zf=4194304;function La(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function bg(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=i&134217727;return o!==0?(i=o&~s,i!==0?r=La(i):(a&=o,a!==0?r=La(a):n||(n=o&~t,n!==0&&(r=La(n))))):(o=i&~s,o!==0?r=La(o):a!==0?r=La(a):n||(n=i&~t,n!==0&&(r=La(n)))),r===0?0:e!==0&&e!==r&&!(e&s)&&(s=r&-r,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:r}function kd(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function aU(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EP(){var t=zf;return zf<<=1,!(zf&62914560)&&(zf=4194304),t}function rv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Md(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function oU(t,e,n,i,r,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,c=t.hiddenUpdates;for(n=a&~n;0<n;){var u=31-ei(n),d=1<<u;o[u]=0,l[u]=-1;var f=c[u];if(f!==null)for(c[u]=null,u=0;u<f.length;u++){var h=f[u];h!==null&&(h.lane&=-536870913)}n&=~d}i!==0&&SP(t,i,0),s!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=s&~(a&~e))}function SP(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-ei(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function IP(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ei(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function AP(t,e){var n=e&-e;return n=n&42?1:Hw(n),n&(t.suspendedLanes|e)?0:n}function Hw(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function $w(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function RP(){var t=Ne.p;return t!==0?t:(t=window.event,t===void 0?32:XN(t.type))}function x1(t,e){var n=Ne.p;try{return Ne.p=t,e()}finally{Ne.p=n}}var ga=Math.random().toString(36).slice(2),Zt="__reactFiber$"+ga,Ln="__reactProps$"+ga,kc="__reactContainer$"+ga,M0="__reactEvents$"+ga,lU="__reactListeners$"+ga,cU="__reactHandles$"+ga,E1="__reactResources$"+ga,Od="__reactMarker$"+ga;function Gw(t){delete t[Zt],delete t[Ln],delete t[M0],delete t[lU],delete t[cU]}function vl(t){var e=t[Zt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[kc]||n[Zt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=NS(t);t!==null;){if(n=t[Zt])return n;t=NS(t)}return e}t=n,n=t.parentNode}return null}function Mc(t){if(t=t[Zt]||t[kc]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Bu(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(H(33))}function Ol(t){var e=t[E1];return e||(e=t[E1]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Ht(t){t[Od]=!0}var CP=new Set,PP={};function No(t,e){Yl(t,e),Yl(t+"Capture",e)}function Yl(t,e){for(PP[t]=e,t=0;t<e.length;t++)CP.add(e[t])}var uU=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),S1={},I1={};function hU(t){return k0.call(I1,t)?!0:k0.call(S1,t)?!1:uU.test(t)?I1[t]=!0:(S1[t]=!0,!1)}function vm(t,e,n){if(hU(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Bf(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function vr(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function fi(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function NP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dU(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function O0(t){if(!t._valueTracker){var e=NP(t)?"checked":"value";t._valueTracker=dU(t,e,""+t[e])}}function DP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=NP(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function op(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var fU=/[\n"\\]/g;function gi(t){return t.replace(fU,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function V0(t,e,n,i,r,s,a,o){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+fi(e)):t.value!==""+fi(e)&&(t.value=""+fi(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?L0(t,a,fi(e)):n!=null?L0(t,a,fi(n)):i!=null&&t.removeAttribute("value"),r==null&&s!=null&&(t.defaultChecked=!!s),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+fi(o):t.removeAttribute("name")}function kP(t,e,n,i,r,s,a,o){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){O0(t);return}n=n!=null?""+fi(n):"",e=e!=null?""+fi(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=o?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),O0(t)}function L0(t,e,n){e==="number"&&op(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Vl(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+fi(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function MP(t,e,n){if(e!=null&&(e=""+fi(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+fi(n):""}function OP(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(H(92));if(zu(i)){if(1<i.length)throw Error(H(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=fi(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),O0(t)}function Xl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var mU=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function A1(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||mU.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function VP(t,e,n){if(e!=null&&typeof e!="object")throw Error(H(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&A1(t,r,i)}else for(var s in e)e.hasOwnProperty(s)&&A1(t,s,e[s])}function Kw(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pU=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gU=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _m(t){return gU.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ar(){}var U0=null;function Ww(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _l=null,Ll=null;function R1(t){var e=Mc(t);if(e&&(t=e.stateNode)){var n=t[Ln]||null;e:switch(t=e.stateNode,e.type){case"input":if(V0(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gi(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[Ln]||null;if(!r)throw Error(H(90));V0(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&DP(i)}break e;case"textarea":MP(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Vl(t,!!n.multiple,e,!1)}}}var sv=!1;function LP(t,e,n){if(sv)return t(e,n);sv=!0;try{var i=t(e);return i}finally{if(sv=!1,(_l!==null||Ll!==null)&&(kg(),_l&&(e=_l,t=Ll,Ll=_l=null,R1(e),t)))for(e=0;e<t.length;e++)R1(t[e])}}function Fh(t,e){var n=t.stateNode;if(n===null)return null;var i=n[Ln]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),j0=!1;if(jr)try{var bu={};Object.defineProperty(bu,"passive",{get:function(){j0=!0}}),window.addEventListener("test",bu,bu),window.removeEventListener("test",bu,bu)}catch{j0=!1}var Ns=null,Qw=null,wm=null;function UP(){if(wm)return wm;var t,e=Qw,n=e.length,i,r="value"in Ns?Ns.value:Ns.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return wm=r.slice(t,1<i?1-i:void 0)}function bm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ff(){return!0}function C1(){return!1}function zn(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ff:C1,this.isPropagationStopped=C1,this}return et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ff)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ff)},persist:function(){},isPersistent:Ff}),e}var Do={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tg=zn(Do),Vd=et({},Do,{view:0,detail:0}),yU=zn(Vd),av,ov,Tu,xg=et({},Vd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tu&&(Tu&&t.type==="mousemove"?(av=t.screenX-Tu.screenX,ov=t.screenY-Tu.screenY):ov=av=0,Tu=t),av)},movementY:function(t){return"movementY"in t?t.movementY:ov}}),P1=zn(xg),vU=et({},xg,{dataTransfer:0}),_U=zn(vU),wU=et({},Vd,{relatedTarget:0}),lv=zn(wU),bU=et({},Do,{animationName:0,elapsedTime:0,pseudoElement:0}),TU=zn(bU),xU=et({},Do,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),EU=zn(xU),SU=et({},Do,{data:0}),N1=zn(SU),IU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CU(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=RU[t])?!!e[t]:!1}function Yw(){return CU}var PU=et({},Vd,{key:function(t){if(t.key){var e=IU[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?AU[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yw,charCode:function(t){return t.type==="keypress"?bm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NU=zn(PU),DU=et({},xg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D1=zn(DU),kU=et({},Vd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yw}),MU=zn(kU),OU=et({},Do,{propertyName:0,elapsedTime:0,pseudoElement:0}),VU=zn(OU),LU=et({},xg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),UU=zn(LU),jU=et({},Do,{newState:0,oldState:0}),zU=zn(jU),BU=[9,13,27,32],Xw=jr&&"CompositionEvent"in window,ih=null;jr&&"documentMode"in document&&(ih=document.documentMode);var FU=jr&&"TextEvent"in window&&!ih,jP=jr&&(!Xw||ih&&8<ih&&11>=ih),k1=" ",M1=!1;function zP(t,e){switch(t){case"keyup":return BU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wl=!1;function qU(t,e){switch(t){case"compositionend":return BP(e);case"keypress":return e.which!==32?null:(M1=!0,k1);case"textInput":return t=e.data,t===k1&&M1?null:t;default:return null}}function HU(t,e){if(wl)return t==="compositionend"||!Xw&&zP(t,e)?(t=UP(),wm=Qw=Ns=null,wl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jP&&e.locale!=="ko"?null:e.data;default:return null}}var $U={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function O1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$U[t.type]:e==="textarea"}function FP(t,e,n,i){_l?Ll?Ll.push(i):Ll=[i]:_l=i,e=Sp(e,"onChange"),0<e.length&&(n=new Tg("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var rh=null,qh=null;function GU(t){LN(t,0)}function Eg(t){var e=Bu(t);if(DP(e))return t}function V1(t,e){if(t==="change")return e}var qP=!1;if(jr){var cv;if(jr){var uv="oninput"in document;if(!uv){var L1=document.createElement("div");L1.setAttribute("oninput","return;"),uv=typeof L1.oninput=="function"}cv=uv}else cv=!1;qP=cv&&(!document.documentMode||9<document.documentMode)}function U1(){rh&&(rh.detachEvent("onpropertychange",HP),qh=rh=null)}function HP(t){if(t.propertyName==="value"&&Eg(qh)){var e=[];FP(e,qh,t,Ww(t)),LP(GU,e)}}function KU(t,e,n){t==="focusin"?(U1(),rh=e,qh=n,rh.attachEvent("onpropertychange",HP)):t==="focusout"&&U1()}function WU(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Eg(qh)}function QU(t,e){if(t==="click")return Eg(e)}function YU(t,e){if(t==="input"||t==="change")return Eg(e)}function XU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ri=typeof Object.is=="function"?Object.is:XU;function Hh(t,e){if(ri(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!k0.call(e,r)||!ri(t[r],e[r]))return!1}return!0}function j1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function z1(t,e){var n=j1(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=j1(n)}}function $P(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$P(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function GP(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=op(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=op(t.document)}return e}function Jw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var JU=jr&&"documentMode"in document&&11>=document.documentMode,bl=null,z0=null,sh=null,B0=!1;function B1(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;B0||bl==null||bl!==op(i)||(i=bl,"selectionStart"in i&&Jw(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),sh&&Hh(sh,i)||(sh=i,i=Sp(z0,"onSelect"),0<i.length&&(e=new Tg("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=bl)))}function ka(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Tl={animationend:ka("Animation","AnimationEnd"),animationiteration:ka("Animation","AnimationIteration"),animationstart:ka("Animation","AnimationStart"),transitionrun:ka("Transition","TransitionRun"),transitionstart:ka("Transition","TransitionStart"),transitioncancel:ka("Transition","TransitionCancel"),transitionend:ka("Transition","TransitionEnd")},hv={},KP={};jr&&(KP=document.createElement("div").style,"AnimationEvent"in window||(delete Tl.animationend.animation,delete Tl.animationiteration.animation,delete Tl.animationstart.animation),"TransitionEvent"in window||delete Tl.transitionend.transition);function ko(t){if(hv[t])return hv[t];if(!Tl[t])return t;var e=Tl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in KP)return hv[t]=e[n];return t}var WP=ko("animationend"),QP=ko("animationiteration"),YP=ko("animationstart"),ZU=ko("transitionrun"),e6=ko("transitionstart"),t6=ko("transitioncancel"),XP=ko("transitionend"),JP=new Map,F0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");F0.push("scrollEnd");function ji(t,e){JP.set(t,e),No(e,[t])}var lp=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},di=[],xl=0,Zw=0;function Sg(){for(var t=xl,e=Zw=xl=0;e<t;){var n=di[e];di[e++]=null;var i=di[e];di[e++]=null;var r=di[e];di[e++]=null;var s=di[e];if(di[e++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&ZP(n,r,s)}}function Ig(t,e,n,i){di[xl++]=t,di[xl++]=e,di[xl++]=n,di[xl++]=i,Zw|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function eb(t,e,n,i){return Ig(t,e,n,i),cp(t)}function Mo(t,e){return Ig(t,null,null,e),cp(t)}function ZP(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(r=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,r&&e!==null&&(r=31-ei(n),t=s.hiddenUpdates,i=t[r],i===null?t[r]=[e]:i.push(e),e.lane=n|536870912),s):null}function cp(t){if(50<mh)throw mh=0,c_=null,Error(H(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var El={};function n6(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(t,e,n,i){return new n6(t,e,n,i)}function tb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Nr(t,e){var n=t.alternate;return n===null?(n=Wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function e2(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Tm(t,e,n,i,r,s){var a=0;if(i=t,typeof t=="function")tb(t)&&(a=1);else if(typeof t=="string")a=o3(t,n,rr.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C0:return t=Wn(31,n,e,r),t.elementType=C0,t.lanes=s,t;case gl:return io(n.children,r,s,e);case _P:a=8,r|=24;break;case I0:return t=Wn(12,n,e,r|2),t.elementType=I0,t.lanes=s,t;case A0:return t=Wn(13,n,e,r),t.elementType=A0,t.lanes=s,t;case R0:return t=Wn(19,n,e,r),t.elementType=R0,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ir:a=10;break e;case wP:a=9;break e;case Bw:a=11;break e;case Fw:a=14;break e;case Ts:a=16,i=null;break e}a=29,n=Error(H(130,t===null?"null":typeof t,"")),i=null}return e=Wn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function io(t,e,n,i){return t=Wn(7,t,i,e),t.lanes=n,t}function dv(t,e,n){return t=Wn(6,t,null,e),t.lanes=n,t}function t2(t){var e=Wn(18,null,null,0);return e.stateNode=t,e}function fv(t,e,n){return e=Wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var F1=new WeakMap;function yi(t,e){if(typeof t=="object"&&t!==null){var n=F1.get(t);return n!==void 0?n:(e={value:t,source:e,stack:T1(e)},F1.set(t,e),e)}return{value:t,source:e,stack:T1(e)}}var Sl=[],Il=0,up=null,$h=0,mi=[],pi=0,Js=null,Xi=1,Ji="";function xr(t,e){Sl[Il++]=$h,Sl[Il++]=up,up=t,$h=e}function n2(t,e,n){mi[pi++]=Xi,mi[pi++]=Ji,mi[pi++]=Js,Js=t;var i=Xi;t=Ji;var r=32-ei(i)-1;i&=~(1<<r),n+=1;var s=32-ei(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Xi=1<<32-ei(e)+r|n<<r|i,Ji=s+t}else Xi=1<<s|n<<r|i,Ji=t}function nb(t){t.return!==null&&(xr(t,1),n2(t,1,0))}function ib(t){for(;t===up;)up=Sl[--Il],Sl[Il]=null,$h=Sl[--Il],Sl[Il]=null;for(;t===Js;)Js=mi[--pi],mi[pi]=null,Ji=mi[--pi],mi[pi]=null,Xi=mi[--pi],mi[pi]=null}function i2(t,e){mi[pi++]=Xi,mi[pi++]=Ji,mi[pi++]=Js,Xi=e.id,Ji=e.overflow,Js=t}var en=null,Ye=null,Ee=!1,js=null,vi=!1,q0=Error(H(519));function Zs(t){var e=Error(H(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gh(yi(e,t)),q0}function q1(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Zt]=t,e[Ln]=i,n){case"dialog":_e("cancel",e),_e("close",e);break;case"iframe":case"object":case"embed":_e("load",e);break;case"video":case"audio":for(n=0;n<Yh.length;n++)_e(Yh[n],e);break;case"source":_e("error",e);break;case"img":case"image":case"link":_e("error",e),_e("load",e);break;case"details":_e("toggle",e);break;case"input":_e("invalid",e),kP(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":_e("invalid",e);break;case"textarea":_e("invalid",e),OP(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||jN(e.textContent,n)?(i.popover!=null&&(_e("beforetoggle",e),_e("toggle",e)),i.onScroll!=null&&_e("scroll",e),i.onScrollEnd!=null&&_e("scrollend",e),i.onClick!=null&&(e.onclick=Ar),e=!0):e=!1,e||Zs(t,!0)}function H1(t){for(en=t.return;en;)switch(en.tag){case 5:case 31:case 13:vi=!1;return;case 27:case 3:vi=!0;return;default:en=en.return}}function Jo(t){if(t!==en)return!1;if(!Ee)return H1(t),Ee=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||m_(t.type,t.memoizedProps)),n=!n),n&&Ye&&Zs(t),H1(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));Ye=PS(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));Ye=PS(t)}else e===27?(e=Ye,ya(t.type)?(t=v_,v_=null,Ye=t):Ye=e):Ye=en?xi(t.stateNode.nextSibling):null;return!0}function fo(){Ye=en=null,Ee=!1}function mv(){var t=js;return t!==null&&(Nn===null?Nn=t:Nn.push.apply(Nn,t),js=null),t}function Gh(t){js===null?js=[t]:js.push(t)}var H0=mr(null),Oo=null,Rr=null;function Ss(t,e,n){He(H0,e._currentValue),e._currentValue=n}function Dr(t){t._currentValue=H0.current,Gt(H0)}function $0(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function G0(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;e:for(;s!==null;){var o=s;s=r;for(var l=0;l<e.length;l++)if(o.context===e[l]){s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),$0(s.return,n,t),i||(a=null);break e}s=o.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(H(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),$0(a,n,t),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function Oc(t,e,n,i){t=null;for(var r=e,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(H(387));if(a=a.memoizedProps,a!==null){var o=r.type;ri(r.pendingProps.value,a.value)||(t!==null?t.push(o):t=[o])}}else if(r===ip.current){if(a=r.alternate,a===null)throw Error(H(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(Jh):t=[Jh])}r=r.return}t!==null&&G0(e,t,n,i),e.flags|=262144}function hp(t){for(t=t.firstContext;t!==null;){if(!ri(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function mo(t){Oo=t,Rr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function nn(t){return r2(Oo,t)}function qf(t,e){return Oo===null&&mo(t),r2(t,e)}function r2(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Rr===null){if(t===null)throw Error(H(308));Rr=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Rr=Rr.next=e;return n}var i6=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},r6=Ot.unstable_scheduleCallback,s6=Ot.unstable_NormalPriority,Ct={$$typeof:Ir,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rb(){return{controller:new i6,data:new Map,refCount:0}}function Ld(t){t.refCount--,t.refCount===0&&r6(s6,function(){t.controller.abort()})}var ah=null,K0=0,Jl=0,Ul=null;function a6(t,e){if(ah===null){var n=ah=[];K0=0,Jl=Cb(),Ul={status:"pending",value:void 0,then:function(i){n.push(i)}}}return K0++,e.then($1,$1),e}function $1(){if(--K0===0&&ah!==null){Ul!==null&&(Ul.status="fulfilled");var t=ah;ah=null,Jl=0,Ul=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function o6(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var G1=oe.S;oe.S=function(t,e){vN=Jn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&a6(t,e),G1!==null&&G1(t,e)};var ro=mr(null);function sb(){var t=ro.current;return t!==null?t:Fe.pooledCache}function xm(t,e){e===null?He(ro,ro.current):He(ro,e.pool)}function s2(){var t=sb();return t===null?null:{parent:Ct._currentValue,pool:t}}var Vc=Error(H(460)),ab=Error(H(474)),Ag=Error(H(542)),dp={then:function(){}};function K1(t){return t=t.status,t==="fulfilled"||t==="rejected"}function a2(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Ar,Ar),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Q1(t),t;default:if(typeof e.status=="string")e.then(Ar,Ar);else{if(t=Fe,t!==null&&100<t.shellSuspendCounter)throw Error(H(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Q1(t),t}throw so=e,Vc}}function Ua(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(so=n,Vc):n}}var so=null;function W1(){if(so===null)throw Error(H(459));var t=so;return so=null,t}function Q1(t){if(t===Vc||t===Ag)throw Error(H(483))}var jl=null,Kh=0;function Hf(t){var e=Kh;return Kh+=1,jl===null&&(jl=[]),a2(jl,t,e)}function xu(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function $f(t,e){throw e.$$typeof===K4?Error(H(525)):(t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function o2(t){function e(y,w){if(t){var b=y.deletions;b===null?(y.deletions=[w],y.flags|=16):b.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function i(y){for(var w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function r(y,w){return y=Nr(y,w),y.index=0,y.sibling=null,y}function s(y,w,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<w?(y.flags|=67108866,w):b):(y.flags|=67108866,w)):(y.flags|=1048576,w)}function a(y){return t&&y.alternate===null&&(y.flags|=67108866),y}function o(y,w,b,R){return w===null||w.tag!==6?(w=dv(b,y.mode,R),w.return=y,w):(w=r(w,b),w.return=y,w)}function l(y,w,b,R){var S=b.type;return S===gl?u(y,w,b.props.children,R,b.key):w!==null&&(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ts&&Ua(S)===w.type)?(w=r(w,b.props),xu(w,b),w.return=y,w):(w=Tm(b.type,b.key,b.props,null,y.mode,R),xu(w,b),w.return=y,w)}function c(y,w,b,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=fv(b,y.mode,R),w.return=y,w):(w=r(w,b.children||[]),w.return=y,w)}function u(y,w,b,R,S){return w===null||w.tag!==7?(w=io(b,y.mode,R,S),w.return=y,w):(w=r(w,b),w.return=y,w)}function d(y,w,b){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return w=dv(""+w,y.mode,b),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Lf:return b=Tm(w.type,w.key,w.props,null,y.mode,b),xu(b,w),b.return=y,b;case ju:return w=fv(w,y.mode,b),w.return=y,w;case Ts:return w=Ua(w),d(y,w,b)}if(zu(w)||wu(w))return w=io(w,y.mode,b,null),w.return=y,w;if(typeof w.then=="function")return d(y,Hf(w),b);if(w.$$typeof===Ir)return d(y,qf(y,w),b);$f(y,w)}return null}function f(y,w,b,R){var S=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return S!==null?null:o(y,w,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Lf:return b.key===S?l(y,w,b,R):null;case ju:return b.key===S?c(y,w,b,R):null;case Ts:return b=Ua(b),f(y,w,b,R)}if(zu(b)||wu(b))return S!==null?null:u(y,w,b,R,null);if(typeof b.then=="function")return f(y,w,Hf(b),R);if(b.$$typeof===Ir)return f(y,w,qf(y,b),R);$f(y,b)}return null}function h(y,w,b,R,S){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return y=y.get(b)||null,o(w,y,""+R,S);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Lf:return y=y.get(R.key===null?b:R.key)||null,l(w,y,R,S);case ju:return y=y.get(R.key===null?b:R.key)||null,c(w,y,R,S);case Ts:return R=Ua(R),h(y,w,b,R,S)}if(zu(R)||wu(R))return y=y.get(b)||null,u(w,y,R,S,null);if(typeof R.then=="function")return h(y,w,b,Hf(R),S);if(R.$$typeof===Ir)return h(y,w,b,qf(w,R),S);$f(w,R)}return null}function p(y,w,b,R){for(var S=null,C=null,x=w,T=w=0,A=null;x!==null&&T<b.length;T++){x.index>T?(A=x,x=null):A=x.sibling;var I=f(y,x,b[T],R);if(I===null){x===null&&(x=A);break}t&&x&&I.alternate===null&&e(y,x),w=s(I,w,T),C===null?S=I:C.sibling=I,C=I,x=A}if(T===b.length)return n(y,x),Ee&&xr(y,T),S;if(x===null){for(;T<b.length;T++)x=d(y,b[T],R),x!==null&&(w=s(x,w,T),C===null?S=x:C.sibling=x,C=x);return Ee&&xr(y,T),S}for(x=i(x);T<b.length;T++)A=h(x,y,T,b[T],R),A!==null&&(t&&A.alternate!==null&&x.delete(A.key===null?T:A.key),w=s(A,w,T),C===null?S=A:C.sibling=A,C=A);return t&&x.forEach(function(P){return e(y,P)}),Ee&&xr(y,T),S}function g(y,w,b,R){if(b==null)throw Error(H(151));for(var S=null,C=null,x=w,T=w=0,A=null,I=b.next();x!==null&&!I.done;T++,I=b.next()){x.index>T?(A=x,x=null):A=x.sibling;var P=f(y,x,I.value,R);if(P===null){x===null&&(x=A);break}t&&x&&P.alternate===null&&e(y,x),w=s(P,w,T),C===null?S=P:C.sibling=P,C=P,x=A}if(I.done)return n(y,x),Ee&&xr(y,T),S;if(x===null){for(;!I.done;T++,I=b.next())I=d(y,I.value,R),I!==null&&(w=s(I,w,T),C===null?S=I:C.sibling=I,C=I);return Ee&&xr(y,T),S}for(x=i(x);!I.done;T++,I=b.next())I=h(x,y,T,I.value,R),I!==null&&(t&&I.alternate!==null&&x.delete(I.key===null?T:I.key),w=s(I,w,T),C===null?S=I:C.sibling=I,C=I);return t&&x.forEach(function(k){return e(y,k)}),Ee&&xr(y,T),S}function v(y,w,b,R){if(typeof b=="object"&&b!==null&&b.type===gl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Lf:e:{for(var S=b.key;w!==null;){if(w.key===S){if(S=b.type,S===gl){if(w.tag===7){n(y,w.sibling),R=r(w,b.props.children),R.return=y,y=R;break e}}else if(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ts&&Ua(S)===w.type){n(y,w.sibling),R=r(w,b.props),xu(R,b),R.return=y,y=R;break e}n(y,w);break}else e(y,w);w=w.sibling}b.type===gl?(R=io(b.props.children,y.mode,R,b.key),R.return=y,y=R):(R=Tm(b.type,b.key,b.props,null,y.mode,R),xu(R,b),R.return=y,y=R)}return a(y);case ju:e:{for(S=b.key;w!==null;){if(w.key===S)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(y,w.sibling),R=r(w,b.children||[]),R.return=y,y=R;break e}else{n(y,w);break}else e(y,w);w=w.sibling}R=fv(b,y.mode,R),R.return=y,y=R}return a(y);case Ts:return b=Ua(b),v(y,w,b,R)}if(zu(b))return p(y,w,b,R);if(wu(b)){if(S=wu(b),typeof S!="function")throw Error(H(150));return b=S.call(b),g(y,w,b,R)}if(typeof b.then=="function")return v(y,w,Hf(b),R);if(b.$$typeof===Ir)return v(y,w,qf(y,b),R);$f(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,w!==null&&w.tag===6?(n(y,w.sibling),R=r(w,b),R.return=y,y=R):(n(y,w),R=dv(b,y.mode,R),R.return=y,y=R),a(y)):n(y,w)}return function(y,w,b,R){try{Kh=0;var S=v(y,w,b,R);return jl=null,S}catch(x){if(x===Vc||x===Ag)throw x;var C=Wn(29,x,null,y.mode);return C.lanes=R,C.return=y,C}finally{}}}var po=o2(!0),l2=o2(!1),xs=!1;function ob(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function W0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function zs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Bs(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Pe&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=cp(t),ZP(t,null,n),e}return Ig(t,i,e,n),cp(t)}function oh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,IP(t,n)}}function pv(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Q0=!1;function lh(){if(Q0){var t=Ul;if(t!==null)throw t}}function ch(t,e,n,i){Q0=!1;var r=t.updateQueue;xs=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;a=0,u=c=l=null,o=s;do{var f=o.lane&-536870913,h=f!==o.lane;if(h?(Te&f)===f:(i&f)===f){f!==0&&f===Jl&&(Q0=!0),u!==null&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=t,g=o;f=e;var v=n;switch(g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(v,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(v,d,f):p,f==null)break e;d=et({},d,f);break e;case 2:xs=!0}}f=o.callback,f!==null&&(t.flags|=64,h&&(t.flags|=8192),h=r.callbacks,h===null?r.callbacks=[f]:h.push(f))}else h={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,a|=f;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;h=o,o=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,s===null&&(r.shared.lanes=0),ta|=a,t.lanes=a,t.memoizedState=d}}function c2(t,e){if(typeof t!="function")throw Error(H(191,t));t.call(e)}function u2(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)c2(n[t],e)}var Zl=mr(null),fp=mr(0);function Y1(t,e){t=qr,He(fp,t),He(Zl,e),qr=t|e.baseLanes}function Y0(){He(fp,qr),He(Zl,Zl.current)}function lb(){qr=fp.current,Gt(Zl),Gt(fp)}var si=mr(null),Ti=null;function Is(t){var e=t.alternate;He(wt,wt.current&1),He(si,t),Ti===null&&(e===null||Zl.current!==null||e.memoizedState!==null)&&(Ti=t)}function X0(t){He(wt,wt.current),He(si,t),Ti===null&&(Ti=t)}function h2(t){t.tag===22?(He(wt,wt.current),He(si,t),Ti===null&&(Ti=t)):As()}function As(){He(wt,wt.current),He(si,si.current)}function Gn(t){Gt(si),Ti===t&&(Ti=null),Gt(wt)}var wt=mr(0);function mp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||g_(n)||y_(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zr=0,he=null,ze=null,At=null,pp=!1,zl=!1,go=!1,gp=0,Wh=0,Bl=null,l6=0;function ft(){throw Error(H(321))}function cb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ri(t[n],e[n]))return!1;return!0}function ub(t,e,n,i,r,s){return zr=s,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,oe.H=t===null||t.memoizedState===null?F2:bb,go=!1,s=n(i,r),go=!1,zl&&(s=f2(e,n,i,r)),d2(t),s}function d2(t){oe.H=Qh;var e=ze!==null&&ze.next!==null;if(zr=0,At=ze=he=null,pp=!1,Wh=0,Bl=null,e)throw Error(H(300));t===null||Pt||(t=t.dependencies,t!==null&&hp(t)&&(Pt=!0))}function f2(t,e,n,i){he=t;var r=0;do{if(zl&&(Bl=null),Wh=0,zl=!1,25<=r)throw Error(H(301));if(r+=1,At=ze=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}oe.H=q2,s=e(n,i)}while(zl);return s}function c6(){var t=oe.H,e=t.useState()[0];return e=typeof e.then=="function"?Ud(e):e,t=t.useState()[0],(ze!==null?ze.memoizedState:null)!==t&&(he.flags|=1024),e}function hb(){var t=gp!==0;return gp=0,t}function db(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function fb(t){if(pp){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}pp=!1}zr=0,At=ze=he=null,zl=!1,Wh=gp=0,Bl=null}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?he.memoizedState=At=t:At=At.next=t,At}function Tt(){if(ze===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=At===null?he.memoizedState:At.next;if(e!==null)At=e,ze=t;else{if(t===null)throw he.alternate===null?Error(H(467)):Error(H(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},At===null?he.memoizedState=At=t:At=At.next=t}return At}function Rg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ud(t){var e=Wh;return Wh+=1,Bl===null&&(Bl=[]),t=a2(Bl,t,e),e=he,(At===null?e.memoizedState:At.next)===null&&(e=e.alternate,oe.H=e===null||e.memoizedState===null?F2:bb),t}function Cg(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ud(t);if(t.$$typeof===Ir)return nn(t)}throw Error(H(438,String(t)))}function mb(t){var e=null,n=he.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=he.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Rg(),he.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=W4;return e.index++,n}function Br(t,e){return typeof e=="function"?e(t):e}function Em(t){var e=Tt();return pb(e,ze,t)}function pb(t,e,n){var i=t.queue;if(i===null)throw Error(H(311));i.lastRenderedReducer=n;var r=t.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}e.baseQueue=r=s,i.pending=null}if(s=t.baseState,r===null)t.memoizedState=s;else{e=r.next;var o=a=null,l=null,c=e,u=!1;do{var d=c.lane&-536870913;if(d!==c.lane?(Te&d)===d:(zr&d)===d){var f=c.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===Jl&&(u=!0);else if((zr&f)===f){c=c.next,f===Jl&&(u=!0);continue}else d={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=d,a=s):l=l.next=d,he.lanes|=f,ta|=f;d=c.action,go&&n(s,d),s=c.hasEagerState?c.eagerState:n(s,d)}else f={lane:d,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=f,a=s):l=l.next=f,he.lanes|=d,ta|=d;c=c.next}while(c!==null&&c!==e);if(l===null?a=s:l.next=o,!ri(s,t.memoizedState)&&(Pt=!0,u&&(n=Ul,n!==null)))throw n;t.memoizedState=s,t.baseState=a,t.baseQueue=l,i.lastRenderedState=s}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function gv(t){var e=Tt(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);ri(s,e.memoizedState)||(Pt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function m2(t,e,n){var i=he,r=Tt(),s=Ee;if(s){if(n===void 0)throw Error(H(407));n=n()}else n=e();var a=!ri((ze||r).memoizedState,n);if(a&&(r.memoizedState=n,Pt=!0),r=r.queue,gb(y2.bind(null,i,r,t),[t]),r.getSnapshot!==e||a||At!==null&&At.memoizedState.tag&1){if(i.flags|=2048,ec(9,{destroy:void 0},g2.bind(null,i,r,n,e),null),Fe===null)throw Error(H(349));s||zr&127||p2(i,e,n)}return n}function p2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=he.updateQueue,e===null?(e=Rg(),he.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function g2(t,e,n,i){e.value=n,e.getSnapshot=i,v2(e)&&_2(t)}function y2(t,e,n){return n(function(){v2(e)&&_2(t)})}function v2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ri(t,n)}catch{return!0}}function _2(t){var e=Mo(t,2);e!==null&&Vn(e,t,2)}function J0(t){var e=vn();if(typeof t=="function"){var n=t;if(t=n(),go){Ps(!0);try{n()}finally{Ps(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:t},e}function w2(t,e,n,i){return t.baseState=n,pb(t,ze,typeof i=="function"?i:Br)}function u6(t,e,n,i,r){if(Ng(t))throw Error(H(485));if(t=e.action,t!==null){var s={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};oe.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,b2(e,s)):(s.next=n.next,e.pending=n.next=s)}}function b2(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var s=oe.T,a={};oe.T=a;try{var o=n(r,i),l=oe.S;l!==null&&l(a,o),X1(t,e,o)}catch(c){Z0(t,e,c)}finally{s!==null&&a.types!==null&&(s.types=a.types),oe.T=s}}else try{s=n(r,i),X1(t,e,s)}catch(c){Z0(t,e,c)}}function X1(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){J1(t,e,i)},function(i){return Z0(t,e,i)}):J1(t,e,n)}function J1(t,e,n){e.status="fulfilled",e.value=n,T2(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,b2(t,n)))}function Z0(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,T2(e),e=e.next;while(e!==i)}t.action=null}function T2(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function x2(t,e){return e}function Z1(t,e){if(Ee){var n=Fe.formState;if(n!==null){e:{var i=he;if(Ee){if(Ye){t:{for(var r=Ye,s=vi;r.nodeType!==8;){if(!s){r=null;break t}if(r=xi(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Ye=xi(r.nextSibling),i=r.data==="F!";break e}}Zs(i)}i=!1}i&&(e=n[0])}}return n=vn(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:x2,lastRenderedState:e},n.queue=i,n=j2.bind(null,he,i),i.dispatch=n,i=J0(!1),s=wb.bind(null,he,!1,i.queue),i=vn(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=u6.bind(null,he,r,s,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function eS(t){var e=Tt();return E2(e,ze,t)}function E2(t,e,n){if(e=pb(t,e,x2)[0],t=Em(Br)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=Ud(e)}catch(a){throw a===Vc?Ag:a}else i=e;e=Tt();var r=e.queue,s=r.dispatch;return n!==e.memoizedState&&(he.flags|=2048,ec(9,{destroy:void 0},h6.bind(null,r,n),null)),[i,s,t]}function h6(t,e){t.action=e}function tS(t){var e=Tt(),n=ze;if(n!==null)return E2(e,n,t);Tt(),e=e.memoizedState,n=Tt();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function ec(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=he.updateQueue,e===null&&(e=Rg(),he.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function S2(){return Tt().memoizedState}function Sm(t,e,n,i){var r=vn();he.flags|=t,r.memoizedState=ec(1|e,{destroy:void 0},n,i===void 0?null:i)}function Pg(t,e,n,i){var r=Tt();i=i===void 0?null:i;var s=r.memoizedState.inst;ze!==null&&i!==null&&cb(i,ze.memoizedState.deps)?r.memoizedState=ec(e,s,n,i):(he.flags|=t,r.memoizedState=ec(1|e,s,n,i))}function nS(t,e){Sm(8390656,8,t,e)}function gb(t,e){Pg(2048,8,t,e)}function d6(t){he.flags|=4;var e=he.updateQueue;if(e===null)e=Rg(),he.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function I2(t){var e=Tt().memoizedState;return d6({ref:e,nextImpl:t}),function(){if(Pe&2)throw Error(H(440));return e.impl.apply(void 0,arguments)}}function A2(t,e){return Pg(4,2,t,e)}function R2(t,e){return Pg(4,4,t,e)}function C2(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function P2(t,e,n){n=n!=null?n.concat([t]):null,Pg(4,4,C2.bind(null,e,t),n)}function yb(){}function N2(t,e){var n=Tt();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&cb(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function D2(t,e){var n=Tt();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&cb(e,i[1]))return i[0];if(i=t(),go){Ps(!0);try{t()}finally{Ps(!1)}}return n.memoizedState=[i,e],i}function vb(t,e,n){return n===void 0||zr&1073741824&&!(Te&261930)?t.memoizedState=e:(t.memoizedState=n,t=wN(),he.lanes|=t,ta|=t,n)}function k2(t,e,n,i){return ri(n,e)?n:Zl.current!==null?(t=vb(t,n,i),ri(t,e)||(Pt=!0),t):!(zr&42)||zr&1073741824&&!(Te&261930)?(Pt=!0,t.memoizedState=n):(t=wN(),he.lanes|=t,ta|=t,e)}function M2(t,e,n,i,r){var s=Ne.p;Ne.p=s!==0&&8>s?s:8;var a=oe.T,o={};oe.T=o,wb(t,!1,e,n);try{var l=r(),c=oe.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=o6(l,i);uh(t,e,u,ti(t))}else uh(t,e,i,ti(t))}catch(d){uh(t,e,{then:function(){},status:"rejected",reason:d},ti())}finally{Ne.p=s,a!==null&&o.types!==null&&(a.types=o.types),oe.T=a}}function f6(){}function e_(t,e,n,i){if(t.tag!==5)throw Error(H(476));var r=O2(t).queue;M2(t,r,e,no,n===null?f6:function(){return V2(t),n(i)})}function O2(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:no,baseState:no,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:no},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function V2(t){var e=O2(t);e.next===null&&(e=t.alternate.memoizedState),uh(t,e.next.queue,{},ti())}function _b(){return nn(Jh)}function L2(){return Tt().memoizedState}function U2(){return Tt().memoizedState}function m6(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=ti();t=zs(n);var i=Bs(e,t,n);i!==null&&(Vn(i,e,n),oh(i,e,n)),e={cache:rb()},t.payload=e;return}e=e.return}}function p6(t,e,n){var i=ti();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ng(t)?z2(e,n):(n=eb(t,e,n,i),n!==null&&(Vn(n,t,i),B2(n,e,i)))}function j2(t,e,n){var i=ti();uh(t,e,n,i)}function uh(t,e,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ng(t))z2(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,ri(o,a))return Ig(t,e,r,0),Fe===null&&Sg(),!1}catch{}finally{}if(n=eb(t,e,r,i),n!==null)return Vn(n,t,i),B2(n,e,i),!0}return!1}function wb(t,e,n,i){if(i={lane:2,revertLane:Cb(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Ng(t)){if(e)throw Error(H(479))}else e=eb(t,n,i,2),e!==null&&Vn(e,t,2)}function Ng(t){var e=t.alternate;return t===he||e!==null&&e===he}function z2(t,e){zl=pp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function B2(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,IP(t,n)}}var Qh={readContext:nn,use:Cg,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft};Qh.useEffectEvent=ft;var F2={readContext:nn,use:Cg,useCallback:function(t,e){return vn().memoizedState=[t,e===void 0?null:e],t},useContext:nn,useEffect:nS,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Sm(4194308,4,C2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sm(4194308,4,t,e)},useInsertionEffect:function(t,e){Sm(4,2,t,e)},useMemo:function(t,e){var n=vn();e=e===void 0?null:e;var i=t();if(go){Ps(!0);try{t()}finally{Ps(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=vn();if(n!==void 0){var r=n(e);if(go){Ps(!0);try{n(e)}finally{Ps(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=p6.bind(null,he,t),[i.memoizedState,t]},useRef:function(t){var e=vn();return t={current:t},e.memoizedState=t},useState:function(t){t=J0(t);var e=t.queue,n=j2.bind(null,he,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:yb,useDeferredValue:function(t,e){var n=vn();return vb(n,t,e)},useTransition:function(){var t=J0(!1);return t=M2.bind(null,he,t.queue,!0,!1),vn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=he,r=vn();if(Ee){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),Fe===null)throw Error(H(349));Te&127||p2(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,nS(y2.bind(null,i,s,t),[t]),i.flags|=2048,ec(9,{destroy:void 0},g2.bind(null,i,s,n,e),null),n},useId:function(){var t=vn(),e=Fe.identifierPrefix;if(Ee){var n=Ji,i=Xi;n=(i&~(1<<32-ei(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=gp++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=l6++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:_b,useFormState:Z1,useActionState:Z1,useOptimistic:function(t){var e=vn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=wb.bind(null,he,!0,n),n.dispatch=e,[t,e]},useMemoCache:mb,useCacheRefresh:function(){return vn().memoizedState=m6.bind(null,he)},useEffectEvent:function(t){var e=vn(),n={impl:t};return e.memoizedState=n,function(){if(Pe&2)throw Error(H(440));return n.impl.apply(void 0,arguments)}}},bb={readContext:nn,use:Cg,useCallback:N2,useContext:nn,useEffect:gb,useImperativeHandle:P2,useInsertionEffect:A2,useLayoutEffect:R2,useMemo:D2,useReducer:Em,useRef:S2,useState:function(){return Em(Br)},useDebugValue:yb,useDeferredValue:function(t,e){var n=Tt();return k2(n,ze.memoizedState,t,e)},useTransition:function(){var t=Em(Br)[0],e=Tt().memoizedState;return[typeof t=="boolean"?t:Ud(t),e]},useSyncExternalStore:m2,useId:L2,useHostTransitionStatus:_b,useFormState:eS,useActionState:eS,useOptimistic:function(t,e){var n=Tt();return w2(n,ze,t,e)},useMemoCache:mb,useCacheRefresh:U2};bb.useEffectEvent=I2;var q2={readContext:nn,use:Cg,useCallback:N2,useContext:nn,useEffect:gb,useImperativeHandle:P2,useInsertionEffect:A2,useLayoutEffect:R2,useMemo:D2,useReducer:gv,useRef:S2,useState:function(){return gv(Br)},useDebugValue:yb,useDeferredValue:function(t,e){var n=Tt();return ze===null?vb(n,t,e):k2(n,ze.memoizedState,t,e)},useTransition:function(){var t=gv(Br)[0],e=Tt().memoizedState;return[typeof t=="boolean"?t:Ud(t),e]},useSyncExternalStore:m2,useId:L2,useHostTransitionStatus:_b,useFormState:tS,useActionState:tS,useOptimistic:function(t,e){var n=Tt();return ze!==null?w2(n,ze,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:mb,useCacheRefresh:U2};q2.useEffectEvent=I2;function yv(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var t_={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ti(),r=zs(i);r.payload=e,n!=null&&(r.callback=n),e=Bs(t,r,i),e!==null&&(Vn(e,t,i),oh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ti(),r=zs(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Bs(t,r,i),e!==null&&(Vn(e,t,i),oh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ti(),i=zs(n);i.tag=2,e!=null&&(i.callback=e),e=Bs(t,i,n),e!==null&&(Vn(e,t,n),oh(e,t,n))}};function iS(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!Hh(n,i)||!Hh(r,s):!0}function rS(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&t_.enqueueReplaceState(e,e.state,null)}function yo(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=et({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function H2(t){lp(t)}function $2(t){console.error(t)}function G2(t){lp(t)}function yp(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function sS(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function n_(t,e,n){return n=zs(n),n.tag=3,n.payload={element:null},n.callback=function(){yp(t,e)},n}function K2(t){return t=zs(t),t.tag=3,t}function W2(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;t.payload=function(){return r(s)},t.callback=function(){sS(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){sS(e,n,i),typeof r!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function g6(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&Oc(e,n,r,!0),n=si.current,n!==null){switch(n.tag){case 31:case 13:return Ti===null?Tp():n.alternate===null&&pt===0&&(pt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===dp?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Rv(t,i,r)),!1;case 22:return n.flags|=65536,i===dp?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Rv(t,i,r)),!1}throw Error(H(435,n.tag))}return Rv(t,i,r),Tp(),!1}if(Ee)return e=si.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==q0&&(t=Error(H(422),{cause:i}),Gh(yi(t,n)))):(i!==q0&&(e=Error(H(423),{cause:i}),Gh(yi(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=yi(i,n),r=n_(t.stateNode,i,r),pv(t,r),pt!==4&&(pt=2)),!1;var s=Error(H(520),{cause:i});if(s=yi(s,n),fh===null?fh=[s]:fh.push(s),pt!==4&&(pt=2),e===null)return!0;i=yi(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=n_(n.stateNode,i,t),pv(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Fs===null||!Fs.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=K2(r),W2(r,t,n,i),pv(n,r),!1}n=n.return}while(n!==null);return!1}var Tb=Error(H(461)),Pt=!1;function Xt(t,e,n,i){e.child=t===null?l2(e,null,n,i):po(e,t.child,n,i)}function aS(t,e,n,i,r){n=n.render;var s=e.ref;if("ref"in i){var a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}else a=i;return mo(e),i=ub(t,e,n,a,s,r),o=hb(),t!==null&&!Pt?(db(t,e,r),Fr(t,e,r)):(Ee&&o&&nb(e),e.flags|=1,Xt(t,e,i,r),e.child)}function oS(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!tb(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,Q2(t,e,s,i,r)):(t=Tm(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!xb(t,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Hh,n(a,i)&&t.ref===e.ref)return Fr(t,e,r)}return e.flags|=1,t=Nr(s,i),t.ref=e.ref,t.return=e,e.child=t}function Q2(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Hh(s,i)&&t.ref===e.ref)if(Pt=!1,e.pendingProps=i=s,xb(t,r))t.flags&131072&&(Pt=!0);else return e.lanes=t.lanes,Fr(t,e,r)}return i_(t,e,n,i,r)}function Y2(t,e,n,i){var r=i.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(s=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~s}else i=0,e.child=null;return lS(t,e,s,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&xm(e,s!==null?s.cachePool:null),s!==null?Y1(e,s):Y0(),h2(e);else return i=e.lanes=536870912,lS(t,e,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(xm(e,s.cachePool),Y1(e,s),As(),e.memoizedState=null):(t!==null&&xm(e,null),Y0(),As());return Xt(t,e,r,n),e.child}function Fu(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function lS(t,e,n,i,r){var s=sb();return s=s===null?null:{parent:Ct._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&xm(e,null),Y0(),h2(e),t!==null&&Oc(t,e,i,!0),e.childLanes=r,null}function Im(t,e){return e=vp({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function cS(t,e,n){return po(e,t.child,null,n),t=Im(e,e.pendingProps),t.flags|=2,Gn(e),e.memoizedState=null,t}function y6(t,e,n){var i=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(Ee){if(i.mode==="hidden")return t=Im(e,i),e.lanes=536870912,Fu(null,t);if(X0(e),(t=Ye)?(t=FN(t,vi),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Js!==null?{id:Xi,overflow:Ji}:null,retryLane:536870912,hydrationErrors:null},n=t2(t),n.return=e,e.child=n,en=e,Ye=null)):t=null,t===null)throw Zs(e);return e.lanes=536870912,null}return Im(e,i)}var s=t.memoizedState;if(s!==null){var a=s.dehydrated;if(X0(e),r)if(e.flags&256)e.flags&=-257,e=cS(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(H(558));else if(Pt||Oc(t,e,n,!1),r=(n&t.childLanes)!==0,Pt||r){if(i=Fe,i!==null&&(a=AP(i,n),a!==0&&a!==s.retryLane))throw s.retryLane=a,Mo(t,a),Vn(i,t,a),Tb;Tp(),e=cS(t,e,n)}else t=s.treeContext,Ye=xi(a.nextSibling),en=e,Ee=!0,js=null,vi=!1,t!==null&&i2(e,t),e=Im(e,i),e.flags|=4096;return e}return t=Nr(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Am(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(H(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function i_(t,e,n,i,r){return mo(e),n=ub(t,e,n,i,void 0,r),i=hb(),t!==null&&!Pt?(db(t,e,r),Fr(t,e,r)):(Ee&&i&&nb(e),e.flags|=1,Xt(t,e,n,r),e.child)}function uS(t,e,n,i,r,s){return mo(e),e.updateQueue=null,n=f2(e,i,n,r),d2(t),i=hb(),t!==null&&!Pt?(db(t,e,s),Fr(t,e,s)):(Ee&&i&&nb(e),e.flags|=1,Xt(t,e,n,s),e.child)}function hS(t,e,n,i,r){if(mo(e),e.stateNode===null){var s=El,a=n.contextType;typeof a=="object"&&a!==null&&(s=nn(a)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=t_,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},ob(e),a=n.contextType,s.context=typeof a=="object"&&a!==null?nn(a):El,s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(yv(e,n,a,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&t_.enqueueReplaceState(s,s.state,null),ch(e,i,s,r),lh(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var o=e.memoizedProps,l=yo(n,o);s.props=l;var c=s.context,u=n.contextType;a=El,typeof u=="object"&&u!==null&&(a=nn(u));var d=n.getDerivedStateFromProps;u=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,u||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o||c!==a)&&rS(e,s,i,a),xs=!1;var f=e.memoizedState;s.state=f,ch(e,i,s,r),lh(),c=e.memoizedState,o||f!==c||xs?(typeof d=="function"&&(yv(e,n,d,i),c=e.memoizedState),(l=xs||iS(e,n,l,i,f,c,a))?(u||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),s.props=i,s.state=c,s.context=a,i=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,W0(t,e),a=e.memoizedProps,u=yo(n,a),s.props=u,d=e.pendingProps,f=s.context,c=n.contextType,l=El,typeof c=="object"&&c!==null&&(l=nn(c)),o=n.getDerivedStateFromProps,(c=typeof o=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&rS(e,s,i,l),xs=!1,f=e.memoizedState,s.state=f,ch(e,i,s,r),lh();var h=e.memoizedState;a!==d||f!==h||xs||t!==null&&t.dependencies!==null&&hp(t.dependencies)?(typeof o=="function"&&(yv(e,n,o,i),h=e.memoizedState),(u=xs||iS(e,n,u,i,f,h,l)||t!==null&&t.dependencies!==null&&hp(t.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,h,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,h,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=h),s.props=i,s.state=h,s.context=l,i=u):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,Am(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=po(e,t.child,null,r),e.child=po(e,null,n,r)):Xt(t,e,n,r),e.memoizedState=s.state,t=e.child):t=Fr(t,e,r),t}function dS(t,e,n,i){return fo(),e.flags|=256,Xt(t,e,n,i),e.child}var vv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _v(t){return{baseLanes:t,cachePool:s2()}}function wv(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Qn),t}function X2(t,e,n){var i=e.pendingProps,r=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(wt.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(Ee){if(r?Is(e):As(),(t=Ye)?(t=FN(t,vi),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Js!==null?{id:Xi,overflow:Ji}:null,retryLane:536870912,hydrationErrors:null},n=t2(t),n.return=e,e.child=n,en=e,Ye=null)):t=null,t===null)throw Zs(e);return y_(t)?e.lanes=32:e.lanes=536870912,null}var o=i.children;return i=i.fallback,r?(As(),r=e.mode,o=vp({mode:"hidden",children:o},r),i=io(i,r,n,null),o.return=e,i.return=e,o.sibling=i,e.child=o,i=e.child,i.memoizedState=_v(n),i.childLanes=wv(t,a,n),e.memoizedState=vv,Fu(null,i)):(Is(e),r_(e,o))}var l=t.memoizedState;if(l!==null&&(o=l.dehydrated,o!==null)){if(s)e.flags&256?(Is(e),e.flags&=-257,e=bv(t,e,n)):e.memoizedState!==null?(As(),e.child=t.child,e.flags|=128,e=null):(As(),o=i.fallback,r=e.mode,i=vp({mode:"visible",children:i.children},r),o=io(o,r,n,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,po(e,t.child,null,n),i=e.child,i.memoizedState=_v(n),i.childLanes=wv(t,a,n),e.memoizedState=vv,e=Fu(null,i));else if(Is(e),y_(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var c=a.dgst;a=c,i=Error(H(419)),i.stack="",i.digest=a,Gh({value:i,source:null,stack:null}),e=bv(t,e,n)}else if(Pt||Oc(t,e,n,!1),a=(n&t.childLanes)!==0,Pt||a){if(a=Fe,a!==null&&(i=AP(a,n),i!==0&&i!==l.retryLane))throw l.retryLane=i,Mo(t,i),Vn(a,t,i),Tb;g_(o)||Tp(),e=bv(t,e,n)}else g_(o)?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,Ye=xi(o.nextSibling),en=e,Ee=!0,js=null,vi=!1,t!==null&&i2(e,t),e=r_(e,i.children),e.flags|=4096);return e}return r?(As(),o=i.fallback,r=e.mode,l=t.child,c=l.sibling,i=Nr(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,c!==null?o=Nr(c,o):(o=io(o,r,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,Fu(null,i),i=e.child,o=t.child.memoizedState,o===null?o=_v(n):(r=o.cachePool,r!==null?(l=Ct._currentValue,r=r.parent!==l?{parent:l,pool:l}:r):r=s2(),o={baseLanes:o.baseLanes|n,cachePool:r}),i.memoizedState=o,i.childLanes=wv(t,a,n),e.memoizedState=vv,Fu(t.child,i)):(Is(e),n=t.child,t=n.sibling,n=Nr(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function r_(t,e){return e=vp({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function vp(t,e){return t=Wn(22,t,null,e),t.lanes=0,t}function bv(t,e,n){return po(e,t.child,null,n),t=r_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fS(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),$0(t.return,e,n)}function Tv(t,e,n,i,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r,a.treeForkCount=s)}function J2(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;i=i.children;var a=wt.current,o=(a&2)!==0;if(o?(a=a&1|2,e.flags|=128):a&=1,He(wt,a),Xt(t,e,i,n),i=Ee?$h:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fS(t,n,e);else if(t.tag===19)fS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&mp(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Tv(e,!1,r,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&mp(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Tv(e,!0,n,null,s,i);break;case"together":Tv(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function Fr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ta|=e.lanes,!(n&e.childLanes))if(t!==null){if(Oc(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=Nr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Nr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xb(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&hp(t)))}function v6(t,e,n){switch(e.tag){case 3:rp(e,e.stateNode.containerInfo),Ss(e,Ct,t.memoizedState.cache),fo();break;case 27:case 5:D0(e);break;case 4:rp(e,e.stateNode.containerInfo);break;case 10:Ss(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,X0(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(Is(e),e.flags|=128,null):n&e.child.childLanes?X2(t,e,n):(Is(e),t=Fr(t,e,n),t!==null?t.sibling:null);Is(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(Oc(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return J2(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),He(wt,wt.current),i)break;return null;case 22:return e.lanes=0,Y2(t,e,n,e.pendingProps);case 24:Ss(e,Ct,t.memoizedState.cache)}return Fr(t,e,n)}function Z2(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Pt=!0;else{if(!xb(t,n)&&!(e.flags&128))return Pt=!1,v6(t,e,n);Pt=!!(t.flags&131072)}else Pt=!1,Ee&&e.flags&1048576&&n2(e,$h,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=Ua(e.elementType),e.type=t,typeof t=="function")tb(t)?(i=yo(t,i),e.tag=1,e=hS(null,e,t,i,n)):(e.tag=0,e=i_(null,e,t,i,n));else{if(t!=null){var r=t.$$typeof;if(r===Bw){e.tag=11,e=aS(null,e,t,i,n);break e}else if(r===Fw){e.tag=14,e=oS(null,e,t,i,n);break e}}throw e=P0(t)||t,Error(H(306,e,""))}}return e;case 0:return i_(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=yo(i,e.pendingProps),hS(t,e,i,r,n);case 3:e:{if(rp(e,e.stateNode.containerInfo),t===null)throw Error(H(387));i=e.pendingProps;var s=e.memoizedState;r=s.element,W0(t,e),ch(e,i,null,n);var a=e.memoizedState;if(i=a.cache,Ss(e,Ct,i),i!==s.cache&&G0(e,[Ct],n,!0),lh(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=dS(t,e,i,n);break e}else if(i!==r){r=yi(Error(H(424)),e),Gh(r),e=dS(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ye=xi(t.firstChild),en=e,Ee=!0,js=null,vi=!0,n=l2(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(fo(),i===r){e=Fr(t,e,n);break e}Xt(t,e,i,n)}e=e.child}return e;case 26:return Am(t,e),t===null?(n=kS(e.type,null,e.pendingProps,null))?e.memoizedState=n:Ee||(n=e.type,t=e.pendingProps,i=Ip(Us.current).createElement(n),i[Zt]=e,i[Ln]=t,rn(i,n,t),Ht(i),e.stateNode=i):e.memoizedState=kS(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return D0(e),t===null&&Ee&&(i=e.stateNode=qN(e.type,e.pendingProps,Us.current),en=e,vi=!0,r=Ye,ya(e.type)?(v_=r,Ye=xi(i.firstChild)):Ye=r),Xt(t,e,e.pendingProps.children,n),Am(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Ee&&((r=i=Ye)&&(i=W6(i,e.type,e.pendingProps,vi),i!==null?(e.stateNode=i,en=e,Ye=xi(i.firstChild),vi=!1,r=!0):r=!1),r||Zs(e)),D0(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,i=s.children,m_(r,s)?i=null:a!==null&&m_(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=ub(t,e,c6,null,null,n),Jh._currentValue=r),Am(t,e),Xt(t,e,i,n),e.child;case 6:return t===null&&Ee&&((t=n=Ye)&&(n=Q6(n,e.pendingProps,vi),n!==null?(e.stateNode=n,en=e,Ye=null,t=!0):t=!1),t||Zs(e)),null;case 13:return X2(t,e,n);case 4:return rp(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=po(e,null,i,n):Xt(t,e,i,n),e.child;case 11:return aS(t,e,e.type,e.pendingProps,n);case 7:return Xt(t,e,e.pendingProps,n),e.child;case 8:return Xt(t,e,e.pendingProps.children,n),e.child;case 12:return Xt(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,Ss(e,e.type,i.value),Xt(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,mo(e),r=nn(r),i=i(r),e.flags|=1,Xt(t,e,i,n),e.child;case 14:return oS(t,e,e.type,e.pendingProps,n);case 15:return Q2(t,e,e.type,e.pendingProps,n);case 19:return J2(t,e,n);case 31:return y6(t,e,n);case 22:return Y2(t,e,n,e.pendingProps);case 24:return mo(e),i=nn(Ct),t===null?(r=sb(),r===null&&(r=Fe,s=rb(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),e.memoizedState={parent:i,cache:r},ob(e),Ss(e,Ct,r)):(t.lanes&n&&(W0(t,e),ch(e,null,null,n),lh()),r=t.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),Ss(e,Ct,i)):(i=s.cache,Ss(e,Ct,i),i!==r.cache&&G0(e,[Ct],n,!0))),Xt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(H(156,e.tag))}function _r(t){t.flags|=4}function xv(t,e,n,i,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(xN())t.flags|=8192;else throw so=dp,ab}else t.flags&=-16777217}function mS(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!GN(e))if(xN())t.flags|=8192;else throw so=dp,ab}function Gf(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?EP():536870912,t.lanes|=e,tc|=e)}function Eu(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function We(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function _6(t,e,n){var i=e.pendingProps;switch(ib(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(e),null;case 1:return We(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Dr(Ct),Ql(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Jo(e)?_r(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mv())),We(e),null;case 26:var r=e.type,s=e.memoizedState;return t===null?(_r(e),s!==null?(We(e),mS(e,s)):(We(e),xv(e,r,null,i,n))):s?s!==t.memoizedState?(_r(e),We(e),mS(e,s)):(We(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&_r(e),We(e),xv(e,r,t,i,n)),null;case 27:if(sp(e),n=Us.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&_r(e);else{if(!i){if(e.stateNode===null)throw Error(H(166));return We(e),null}t=rr.current,Jo(e)?q1(e):(t=qN(r,i,n),e.stateNode=t,_r(e))}return We(e),null;case 5:if(sp(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&_r(e);else{if(!i){if(e.stateNode===null)throw Error(H(166));return We(e),null}if(s=rr.current,Jo(e))q1(e);else{var a=Ip(Us.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":s=a.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?a.createElement("select",{is:i.is}):a.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?a.createElement(r,{is:i.is}):a.createElement(r)}}s[Zt]=e,s[Ln]=i;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=s;e:switch(rn(s,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&_r(e)}}return We(e),xv(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&_r(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(H(166));if(t=Us.current,Jo(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=en,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[Zt]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||jN(t.nodeValue,n)),t||Zs(e,!0)}else t=Ip(t).createTextNode(i),t[Zt]=e,e.stateNode=t}return We(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=Jo(e),n!==null){if(t===null){if(!i)throw Error(H(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(557));t[Zt]=e}else fo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;We(e),t=!1}else n=mv(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Gn(e),e):(Gn(e),null);if(e.flags&128)throw Error(H(558))}return We(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=Jo(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(H(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(H(317));r[Zt]=e}else fo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;We(e),r=!1}else r=mv(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(Gn(e),e):(Gn(e),null)}return Gn(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Gf(e,e.updateQueue),We(e),null);case 4:return Ql(),t===null&&Pb(e.stateNode.containerInfo),We(e),null;case 10:return Dr(e.type),We(e),null;case 19:if(Gt(wt),i=e.memoizedState,i===null)return We(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)Eu(i,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=mp(t),s!==null){for(e.flags|=128,Eu(i,!1),t=s.updateQueue,e.updateQueue=t,Gf(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)e2(n,t),n=n.sibling;return He(wt,wt.current&1|2),Ee&&xr(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&Jn()>wp&&(e.flags|=128,r=!0,Eu(i,!1),e.lanes=4194304)}else{if(!r)if(t=mp(s),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,Gf(e,t),Eu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Ee)return We(e),null}else 2*Jn()-i.renderingStartTime>wp&&n!==536870912&&(e.flags|=128,r=!0,Eu(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Jn(),t.sibling=null,n=wt.current,He(wt,r?n&1|2:n&1),Ee&&xr(e,i.treeForkCount),t):(We(e),null);case 22:case 23:return Gn(e),lb(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(We(e),e.subtreeFlags&6&&(e.flags|=8192)):We(e),n=e.updateQueue,n!==null&&Gf(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&Gt(ro),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Dr(Ct),We(e),null;case 25:return null;case 30:return null}throw Error(H(156,e.tag))}function w6(t,e){switch(ib(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Dr(Ct),Ql(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return sp(e),null;case 31:if(e.memoizedState!==null){if(Gn(e),e.alternate===null)throw Error(H(340));fo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Gn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));fo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Gt(wt),null;case 4:return Ql(),null;case 10:return Dr(e.type),null;case 22:case 23:return Gn(e),lb(),t!==null&&Gt(ro),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Dr(Ct),null;case 25:return null;default:return null}}function eN(t,e){switch(ib(e),e.tag){case 3:Dr(Ct),Ql();break;case 26:case 27:case 5:sp(e);break;case 4:Ql();break;case 31:e.memoizedState!==null&&Gn(e);break;case 13:Gn(e);break;case 19:Gt(wt);break;case 10:Dr(e.type);break;case 22:case 23:Gn(e),lb(),t!==null&&Gt(ro);break;case 24:Dr(Ct)}}function jd(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(o){Ve(e,e.return,o)}}function ea(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&t)===t){var a=i.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,r=e;var l=n,c=o;try{c()}catch(u){Ve(r,l,u)}}}i=i.next}while(i!==s)}}catch(u){Ve(e,e.return,u)}}function tN(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{u2(e,n)}catch(i){Ve(t,t.return,i)}}}function nN(t,e,n){n.props=yo(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Ve(t,e,i)}}function hh(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(r){Ve(t,e,r)}}function Zi(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Ve(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Ve(t,e,r)}else n.current=null}function iN(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Ve(t,t.return,r)}}function Ev(t,e,n){try{var i=t.stateNode;F6(i,t.type,n,e),i[Ln]=e}catch(r){Ve(t,t.return,r)}}function rN(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ya(t.type)||t.tag===4}function Sv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rN(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ya(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function s_(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ar));else if(i!==4&&(i===27&&ya(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(s_(t,e,n),t=t.sibling;t!==null;)s_(t,e,n),t=t.sibling}function _p(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&ya(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(_p(t,e,n),t=t.sibling;t!==null;)_p(t,e,n),t=t.sibling}function sN(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);rn(e,i,n),e[Zt]=t,e[Ln]=n}catch(s){Ve(t,t.return,s)}}var Er=!1,Rt=!1,Iv=!1,pS=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function b6(t,e){if(t=t.containerInfo,d_=Pp,t=GP(t),Jw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||r!==0&&d.nodeType!==3||(o=a+r),d!==s||i!==0&&d.nodeType!==3||(l=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===r&&(o=a),f===s&&++u===i&&(l=a),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(f_={focusedElem:t,selectionRange:n},Pp=!1,Ft=e;Ft!==null;)if(e=Ft,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ft=t;else for(;Ft!==null;){switch(e=Ft,s=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var p=yo(n.type,r);t=i.getSnapshotBeforeUpdate(p,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(g){Ve(n,n.return,g)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)p_(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":p_(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(H(163))}if(t=e.sibling,t!==null){t.return=e.return,Ft=t;break}Ft=e.return}}function aN(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:br(t,n),i&4&&jd(5,n);break;case 1:if(br(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Ve(n,n.return,a)}else{var r=yo(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Ve(n,n.return,a)}}i&64&&tN(n),i&512&&hh(n,n.return);break;case 3:if(br(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{u2(t,e)}catch(a){Ve(n,n.return,a)}}break;case 27:e===null&&i&4&&sN(n);case 26:case 5:br(t,n),e===null&&i&4&&iN(n),i&512&&hh(n,n.return);break;case 12:br(t,n);break;case 31:br(t,n),i&4&&cN(t,n);break;case 13:br(t,n),i&4&&uN(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=P6.bind(null,n),Y6(t,n))));break;case 22:if(i=n.memoizedState!==null||Er,!i){e=e!==null&&e.memoizedState!==null||Rt,r=Er;var s=Rt;Er=i,(Rt=e)&&!s?Tr(t,n,(n.subtreeFlags&8772)!==0):br(t,n),Er=r,Rt=s}break;case 30:break;default:br(t,n)}}function oN(t){var e=t.alternate;e!==null&&(t.alternate=null,oN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Gw(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var nt=null,Pn=!1;function wr(t,e,n){for(n=n.child;n!==null;)lN(t,e,n),n=n.sibling}function lN(t,e,n){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(Dd,n)}catch{}switch(n.tag){case 26:Rt||Zi(n,e),wr(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Rt||Zi(n,e);var i=nt,r=Pn;ya(n.type)&&(nt=n.stateNode,Pn=!1),wr(t,e,n),ph(n.stateNode),nt=i,Pn=r;break;case 5:Rt||Zi(n,e);case 6:if(i=nt,r=Pn,nt=null,wr(t,e,n),nt=i,Pn=r,nt!==null)if(Pn)try{(nt.nodeType===9?nt.body:nt.nodeName==="HTML"?nt.ownerDocument.body:nt).removeChild(n.stateNode)}catch(s){Ve(n,e,s)}else try{nt.removeChild(n.stateNode)}catch(s){Ve(n,e,s)}break;case 18:nt!==null&&(Pn?(t=nt,RS(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),sc(t)):RS(nt,n.stateNode));break;case 4:i=nt,r=Pn,nt=n.stateNode.containerInfo,Pn=!0,wr(t,e,n),nt=i,Pn=r;break;case 0:case 11:case 14:case 15:ea(2,n,e),Rt||ea(4,n,e),wr(t,e,n);break;case 1:Rt||(Zi(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&nN(n,e,i)),wr(t,e,n);break;case 21:wr(t,e,n);break;case 22:Rt=(i=Rt)||n.memoizedState!==null,wr(t,e,n),Rt=i;break;default:wr(t,e,n)}}function cN(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{sc(t)}catch(n){Ve(e,e.return,n)}}}function uN(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{sc(t)}catch(n){Ve(e,e.return,n)}}function T6(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new pS),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new pS),e;default:throw Error(H(435,t.tag))}}function Kf(t,e){var n=T6(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var r=N6.bind(null,t,i);i.then(r,r)}})}function Rn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(ya(o.type)){nt=o.stateNode,Pn=!1;break e}break;case 5:nt=o.stateNode,Pn=!1;break e;case 3:case 4:nt=o.stateNode.containerInfo,Pn=!0;break e}o=o.return}if(nt===null)throw Error(H(160));lN(s,a,r),nt=null,Pn=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)hN(e,t),e=e.sibling}var ki=null;function hN(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Rn(e,t),Cn(t),i&4&&(ea(3,t,t.return),jd(3,t),ea(5,t,t.return));break;case 1:Rn(e,t),Cn(t),i&512&&(Rt||n===null||Zi(n,n.return)),i&64&&Er&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=ki;if(Rn(e,t),Cn(t),i&512&&(Rt||n===null||Zi(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[Od]||s[Zt]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),rn(s,i,n),s[Zt]=t,Ht(s),i=s;break e;case"link":var a=OS("link","href",r).get(i+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(s=a[o],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}s=r.createElement(i),rn(s,i,n),r.head.appendChild(s);break;case"meta":if(a=OS("meta","content",r).get(i+(n.content||""))){for(o=0;o<a.length;o++)if(s=a[o],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}s=r.createElement(i),rn(s,i,n),r.head.appendChild(s);break;default:throw Error(H(468,i))}s[Zt]=t,Ht(s),i=s}t.stateNode=i}else VS(r,t.type,t.stateNode);else t.stateNode=MS(r,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?VS(r,t.type,t.stateNode):MS(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&Ev(t,t.memoizedProps,n.memoizedProps)}break;case 27:Rn(e,t),Cn(t),i&512&&(Rt||n===null||Zi(n,n.return)),n!==null&&i&4&&Ev(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Rn(e,t),Cn(t),i&512&&(Rt||n===null||Zi(n,n.return)),t.flags&32){r=t.stateNode;try{Xl(r,"")}catch(p){Ve(t,t.return,p)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,Ev(t,r,n!==null?n.memoizedProps:r)),i&1024&&(Iv=!0);break;case 6:if(Rn(e,t),Cn(t),i&4){if(t.stateNode===null)throw Error(H(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(p){Ve(t,t.return,p)}}break;case 3:if(Pm=null,r=ki,ki=Ap(e.containerInfo),Rn(e,t),ki=r,Cn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{sc(e.containerInfo)}catch(p){Ve(t,t.return,p)}Iv&&(Iv=!1,dN(t));break;case 4:i=ki,ki=Ap(t.stateNode.containerInfo),Rn(e,t),Cn(t),ki=i;break;case 12:Rn(e,t),Cn(t);break;case 31:Rn(e,t),Cn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Kf(t,i)));break;case 13:Rn(e,t),Cn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Dg=Jn()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Kf(t,i)));break;case 22:r=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=Er,u=Rt;if(Er=c||r,Rt=u||l,Rn(e,t),Rt=u,Er=c,Cn(t),i&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||l||Er||Rt||ja(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(s=l.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=l.stateNode;var d=l.memoizedProps.style,f=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(p){Ve(l,l.return,p)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=r?"":l.memoizedProps}catch(p){Ve(l,l.return,p)}}}else if(e.tag===18){if(n===null){l=e;try{var h=l.stateNode;r?CS(h,!0):CS(l.stateNode,!1)}catch(p){Ve(l,l.return,p)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Kf(t,n))));break;case 19:Rn(e,t),Cn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Kf(t,i)));break;case 30:break;case 21:break;default:Rn(e,t),Cn(t)}}function Cn(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(rN(i)){n=i;break}i=i.return}if(n==null)throw Error(H(160));switch(n.tag){case 27:var r=n.stateNode,s=Sv(t);_p(t,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(Xl(a,""),n.flags&=-33);var o=Sv(t);_p(t,o,a);break;case 3:case 4:var l=n.stateNode.containerInfo,c=Sv(t);s_(t,c,l);break;default:throw Error(H(161))}}catch(u){Ve(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dN(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;dN(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function br(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)aN(t,e.alternate,e),e=e.sibling}function ja(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:ea(4,e,e.return),ja(e);break;case 1:Zi(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&nN(e,e.return,n),ja(e);break;case 27:ph(e.stateNode);case 26:case 5:Zi(e,e.return),ja(e);break;case 22:e.memoizedState===null&&ja(e);break;case 30:ja(e);break;default:ja(e)}t=t.sibling}}function Tr(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:Tr(r,s,n),jd(4,s);break;case 1:if(Tr(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){Ve(i,i.return,c)}if(i=s,r=i.updateQueue,r!==null){var o=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)c2(l[r],o)}catch(c){Ve(i,i.return,c)}}n&&a&64&&tN(s),hh(s,s.return);break;case 27:sN(s);case 26:case 5:Tr(r,s,n),n&&i===null&&a&4&&iN(s),hh(s,s.return);break;case 12:Tr(r,s,n);break;case 31:Tr(r,s,n),n&&a&4&&cN(r,s);break;case 13:Tr(r,s,n),n&&a&4&&uN(r,s);break;case 22:s.memoizedState===null&&Tr(r,s,n),hh(s,s.return);break;case 30:break;default:Tr(r,s,n)}e=e.sibling}}function Eb(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Ld(n))}function Sb(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Ld(t))}function Ci(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)fN(t,e,n,i),e=e.sibling}function fN(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:Ci(t,e,n,i),r&2048&&jd(9,e);break;case 1:Ci(t,e,n,i);break;case 3:Ci(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Ld(t)));break;case 12:if(r&2048){Ci(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,o=s.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){Ve(e,e.return,l)}}else Ci(t,e,n,i);break;case 31:Ci(t,e,n,i);break;case 13:Ci(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?Ci(t,e,n,i):dh(t,e):s._visibility&2?Ci(t,e,n,i):(s._visibility|=2,cl(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),r&2048&&Eb(a,e);break;case 24:Ci(t,e,n,i),r&2048&&Sb(e.alternate,e);break;default:Ci(t,e,n,i)}}function cl(t,e,n,i,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,a=e,o=n,l=i,c=a.flags;switch(a.tag){case 0:case 11:case 15:cl(s,a,o,l,r),jd(8,a);break;case 23:break;case 22:var u=a.stateNode;a.memoizedState!==null?u._visibility&2?cl(s,a,o,l,r):dh(s,a):(u._visibility|=2,cl(s,a,o,l,r)),r&&c&2048&&Eb(a.alternate,a);break;case 24:cl(s,a,o,l,r),r&&c&2048&&Sb(a.alternate,a);break;default:cl(s,a,o,l,r)}e=e.sibling}}function dh(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:dh(n,i),r&2048&&Eb(i.alternate,i);break;case 24:dh(n,i),r&2048&&Sb(i.alternate,i);break;default:dh(n,i)}e=e.sibling}}var qu=8192;function Zo(t,e,n){if(t.subtreeFlags&qu)for(t=t.child;t!==null;)mN(t,e,n),t=t.sibling}function mN(t,e,n){switch(t.tag){case 26:Zo(t,e,n),t.flags&qu&&t.memoizedState!==null&&l3(n,ki,t.memoizedState,t.memoizedProps);break;case 5:Zo(t,e,n);break;case 3:case 4:var i=ki;ki=Ap(t.stateNode.containerInfo),Zo(t,e,n),ki=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=qu,qu=16777216,Zo(t,e,n),qu=i):Zo(t,e,n));break;default:Zo(t,e,n)}}function pN(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Su(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Ft=i,yN(i,t)}pN(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)gN(t),t=t.sibling}function gN(t){switch(t.tag){case 0:case 11:case 15:Su(t),t.flags&2048&&ea(9,t,t.return);break;case 3:Su(t);break;case 12:Su(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Rm(t)):Su(t);break;default:Su(t)}}function Rm(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Ft=i,yN(i,t)}pN(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:ea(8,e,e.return),Rm(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Rm(e));break;default:Rm(e)}t=t.sibling}}function yN(t,e){for(;Ft!==null;){var n=Ft;switch(n.tag){case 0:case 11:case 15:ea(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Ld(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Ft=i;else e:for(n=t;Ft!==null;){i=Ft;var r=i.sibling,s=i.return;if(oN(i),i===n){Ft=null;break e}if(r!==null){r.return=s,Ft=r;break e}Ft=s}}}var x6={getCacheForType:function(t){var e=nn(Ct),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return nn(Ct).controller.signal}},E6=typeof WeakMap=="function"?WeakMap:Map,Pe=0,Fe=null,we=null,Te=0,Oe=0,Hn=null,Ds=!1,Lc=!1,Ib=!1,qr=0,pt=0,ta=0,ao=0,Ab=0,Qn=0,tc=0,fh=null,Nn=null,a_=!1,Dg=0,vN=0,wp=1/0,bp=null,Fs=null,kt=0,qs=null,nc=null,kr=0,o_=0,l_=null,_N=null,mh=0,c_=null;function ti(){return Pe&2&&Te!==0?Te&-Te:oe.T!==null?Cb():RP()}function wN(){if(Qn===0)if(!(Te&536870912)||Ee){var t=jf;jf<<=1,!(jf&3932160)&&(jf=262144),Qn=t}else Qn=536870912;return t=si.current,t!==null&&(t.flags|=32),Qn}function Vn(t,e,n){(t===Fe&&(Oe===2||Oe===9)||t.cancelPendingCommit!==null)&&(ic(t,0),ks(t,Te,Qn,!1)),Md(t,n),(!(Pe&2)||t!==Fe)&&(t===Fe&&(!(Pe&2)&&(ao|=n),pt===4&&ks(t,Te,Qn,!1)),pr(t))}function bN(t,e,n){if(Pe&6)throw Error(H(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||kd(t,e),r=i?A6(t,e):Av(t,e,!0),s=i;do{if(r===0){Lc&&!i&&ks(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!S6(n)){r=Av(t,e,!1),s=!1;continue}if(r===2){if(s=e,t.errorRecoveryDisabledLanes&s)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=t;r=fh;var l=o.current.memoizedState.isDehydrated;if(l&&(ic(o,a).flags|=256),a=Av(o,a,!1),a!==2){if(Ib&&!l){o.errorRecoveryDisabledLanes|=s,ao|=s,r=4;break e}s=Nn,Nn=r,s!==null&&(Nn===null?Nn=s:Nn.push.apply(Nn,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){ic(t,0),ks(t,e,0,!0);break}e:{switch(i=t,s=r,s){case 0:case 1:throw Error(H(345));case 4:if((e&4194048)!==e)break;case 6:ks(i,e,Qn,!Ds);break e;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(H(329))}if((e&62914560)===e&&(r=Dg+300-Jn(),10<r)){if(ks(i,e,Qn,!Ds),bg(i,0,!0)!==0)break e;kr=e,i.timeoutHandle=BN(gS.bind(null,i,n,Nn,bp,a_,e,Qn,ao,tc,Ds,s,"Throttled",-0,0),r);break e}gS(i,n,Nn,bp,a_,e,Qn,ao,tc,Ds,s,null,-0,0)}}break}while(!0);pr(t)}function gS(t,e,n,i,r,s,a,o,l,c,u,d,f,h){if(t.timeoutHandle=-1,d=e.subtreeFlags,d&8192||(d&16785408)===16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ar},mN(e,s,d);var p=(s&62914560)===s?Dg-Jn():(s&4194048)===s?vN-Jn():0;if(p=c3(d,p),p!==null){kr=s,t.cancelPendingCommit=p(vS.bind(null,t,e,s,n,i,r,a,o,l,u,d,null,f,h)),ks(t,s,a,!c);return}}vS(t,e,s,n,i,r,a,o,l)}function S6(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ri(s(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ks(t,e,n,i){e&=~Ab,e&=~ao,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var s=31-ei(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&SP(t,n,e)}function kg(){return Pe&6?!0:(zd(0),!1)}function Rb(){if(we!==null){if(Oe===0)var t=we.return;else t=we,Rr=Oo=null,fb(t),jl=null,Kh=0,t=we;for(;t!==null;)eN(t.alternate,t),t=t.return;we=null}}function ic(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,$6(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),kr=0,Rb(),Fe=t,we=n=Nr(t.current,null),Te=e,Oe=0,Hn=null,Ds=!1,Lc=kd(t,e),Ib=!1,tc=Qn=Ab=ao=ta=pt=0,Nn=fh=null,a_=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-ei(i),s=1<<r;e|=t[r],i&=~s}return qr=e,Sg(),n}function TN(t,e){he=null,oe.H=Qh,e===Vc||e===Ag?(e=W1(),Oe=3):e===ab?(e=W1(),Oe=4):Oe=e===Tb?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Hn=e,we===null&&(pt=1,yp(t,yi(e,t.current)))}function xN(){var t=si.current;return t===null?!0:(Te&4194048)===Te?Ti===null:(Te&62914560)===Te||Te&536870912?t===Ti:!1}function EN(){var t=oe.H;return oe.H=Qh,t===null?Qh:t}function SN(){var t=oe.A;return oe.A=x6,t}function Tp(){pt=4,Ds||(Te&4194048)!==Te&&si.current!==null||(Lc=!0),!(ta&134217727)&&!(ao&134217727)||Fe===null||ks(Fe,Te,Qn,!1)}function Av(t,e,n){var i=Pe;Pe|=2;var r=EN(),s=SN();(Fe!==t||Te!==e)&&(bp=null,ic(t,e)),e=!1;var a=pt;e:do try{if(Oe!==0&&we!==null){var o=we,l=Hn;switch(Oe){case 8:Rb(),a=6;break e;case 3:case 2:case 9:case 6:si.current===null&&(e=!0);var c=Oe;if(Oe=0,Hn=null,Al(t,o,l,c),n&&Lc){a=0;break e}break;default:c=Oe,Oe=0,Hn=null,Al(t,o,l,c)}}I6(),a=pt;break}catch(u){TN(t,u)}while(!0);return e&&t.shellSuspendCounter++,Rr=Oo=null,Pe=i,oe.H=r,oe.A=s,we===null&&(Fe=null,Te=0,Sg()),a}function I6(){for(;we!==null;)IN(we)}function A6(t,e){var n=Pe;Pe|=2;var i=EN(),r=SN();Fe!==t||Te!==e?(bp=null,wp=Jn()+500,ic(t,e)):Lc=kd(t,e);e:do try{if(Oe!==0&&we!==null){e=we;var s=Hn;t:switch(Oe){case 1:Oe=0,Hn=null,Al(t,e,s,1);break;case 2:case 9:if(K1(s)){Oe=0,Hn=null,yS(e);break}e=function(){Oe!==2&&Oe!==9||Fe!==t||(Oe=7),pr(t)},s.then(e,e);break e;case 3:Oe=7;break e;case 4:Oe=5;break e;case 7:K1(s)?(Oe=0,Hn=null,yS(e)):(Oe=0,Hn=null,Al(t,e,s,7));break;case 5:var a=null;switch(we.tag){case 26:a=we.memoizedState;case 5:case 27:var o=we;if(a?GN(a):o.stateNode.complete){Oe=0,Hn=null;var l=o.sibling;if(l!==null)we=l;else{var c=o.return;c!==null?(we=c,Mg(c)):we=null}break t}}Oe=0,Hn=null,Al(t,e,s,5);break;case 6:Oe=0,Hn=null,Al(t,e,s,6);break;case 8:Rb(),pt=6;break e;default:throw Error(H(462))}}R6();break}catch(u){TN(t,u)}while(!0);return Rr=Oo=null,oe.H=i,oe.A=r,Pe=n,we!==null?0:(Fe=null,Te=0,Sg(),pt)}function R6(){for(;we!==null&&!X4();)IN(we)}function IN(t){var e=Z2(t.alternate,t,qr);t.memoizedProps=t.pendingProps,e===null?Mg(t):we=e}function yS(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=uS(n,e,e.pendingProps,e.type,void 0,Te);break;case 11:e=uS(n,e,e.pendingProps,e.type.render,e.ref,Te);break;case 5:fb(e);default:eN(n,e),e=we=e2(e,qr),e=Z2(n,e,qr)}t.memoizedProps=t.pendingProps,e===null?Mg(t):we=e}function Al(t,e,n,i){Rr=Oo=null,fb(e),jl=null,Kh=0;var r=e.return;try{if(g6(t,r,e,n,Te)){pt=1,yp(t,yi(n,t.current)),we=null;return}}catch(s){if(r!==null)throw we=r,s;pt=1,yp(t,yi(n,t.current)),we=null;return}e.flags&32768?(Ee||i===1?t=!0:Lc||Te&536870912?t=!1:(Ds=t=!0,(i===2||i===9||i===3||i===6)&&(i=si.current,i!==null&&i.tag===13&&(i.flags|=16384))),AN(e,t)):Mg(e)}function Mg(t){var e=t;do{if(e.flags&32768){AN(e,Ds);return}t=e.return;var n=_6(e.alternate,e,qr);if(n!==null){we=n;return}if(e=e.sibling,e!==null){we=e;return}we=e=t}while(e!==null);pt===0&&(pt=5)}function AN(t,e){do{var n=w6(t.alternate,t);if(n!==null){n.flags&=32767,we=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){we=t;return}we=t=n}while(t!==null);pt=6,we=null}function vS(t,e,n,i,r,s,a,o,l){t.cancelPendingCommit=null;do Og();while(kt!==0);if(Pe&6)throw Error(H(327));if(e!==null){if(e===t.current)throw Error(H(177));if(s=e.lanes|e.childLanes,s|=Zw,oU(t,n,s,a,o,l),t===Fe&&(we=Fe=null,Te=0),nc=e,qs=t,kr=n,o_=s,l_=r,_N=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,D6(ap,function(){return DN(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=oe.T,oe.T=null,r=Ne.p,Ne.p=2,a=Pe,Pe|=4;try{b6(t,e,n)}finally{Pe=a,Ne.p=r,oe.T=i}}kt=1,RN(),CN(),PN()}}function RN(){if(kt===1){kt=0;var t=qs,e=nc,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=oe.T,oe.T=null;var i=Ne.p;Ne.p=2;var r=Pe;Pe|=4;try{hN(e,t);var s=f_,a=GP(t.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&$P(o.ownerDocument.documentElement,o)){if(l!==null&&Jw(o)){var c=l.start,u=l.end;if(u===void 0&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var h=f.getSelection(),p=o.textContent.length,g=Math.min(l.start,p),v=l.end===void 0?g:Math.min(l.end,p);!h.extend&&g>v&&(a=v,v=g,g=a);var y=z1(o,g),w=z1(o,v);if(y&&w&&(h.rangeCount!==1||h.anchorNode!==y.node||h.anchorOffset!==y.offset||h.focusNode!==w.node||h.focusOffset!==w.offset)){var b=d.createRange();b.setStart(y.node,y.offset),h.removeAllRanges(),g>v?(h.addRange(b),h.extend(w.node,w.offset)):(b.setEnd(w.node,w.offset),h.addRange(b))}}}}for(d=[],h=o;h=h.parentNode;)h.nodeType===1&&d.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var R=d[o];R.element.scrollLeft=R.left,R.element.scrollTop=R.top}}Pp=!!d_,f_=d_=null}finally{Pe=r,Ne.p=i,oe.T=n}}t.current=e,kt=2}}function CN(){if(kt===2){kt=0;var t=qs,e=nc,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=oe.T,oe.T=null;var i=Ne.p;Ne.p=2;var r=Pe;Pe|=4;try{aN(t,e.alternate,e)}finally{Pe=r,Ne.p=i,oe.T=n}}kt=3}}function PN(){if(kt===4||kt===3){kt=0,J4();var t=qs,e=nc,n=kr,i=_N;e.subtreeFlags&10256||e.flags&10256?kt=5:(kt=0,nc=qs=null,NN(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(Fs=null),$w(n),e=e.stateNode,Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(Dd,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=oe.T,r=Ne.p,Ne.p=2,oe.T=null;try{for(var s=t.onRecoverableError,a=0;a<i.length;a++){var o=i[a];s(o.value,{componentStack:o.stack})}}finally{oe.T=e,Ne.p=r}}kr&3&&Og(),pr(t),r=t.pendingLanes,n&261930&&r&42?t===c_?mh++:(mh=0,c_=t):mh=0,zd(0)}}function NN(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Ld(e)))}function Og(){return RN(),CN(),PN(),DN()}function DN(){if(kt!==5)return!1;var t=qs,e=o_;o_=0;var n=$w(kr),i=oe.T,r=Ne.p;try{Ne.p=32>n?32:n,oe.T=null,n=l_,l_=null;var s=qs,a=kr;if(kt=0,nc=qs=null,kr=0,Pe&6)throw Error(H(331));var o=Pe;if(Pe|=4,gN(s.current),fN(s,s.current,a,n),Pe=o,zd(0,!1),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(Dd,s)}catch{}return!0}finally{Ne.p=r,oe.T=i,NN(t,e)}}function _S(t,e,n){e=yi(n,e),e=n_(t.stateNode,e,2),t=Bs(t,e,2),t!==null&&(Md(t,2),pr(t))}function Ve(t,e,n){if(t.tag===3)_S(t,t,n);else for(;e!==null;){if(e.tag===3){_S(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Fs===null||!Fs.has(i))){t=yi(n,t),n=K2(2),i=Bs(e,n,2),i!==null&&(W2(n,i,e,t),Md(i,2),pr(i));break}}e=e.return}}function Rv(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new E6;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(Ib=!0,r.add(n),t=C6.bind(null,t,e,n),e.then(t,t))}function C6(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Fe===t&&(Te&n)===n&&(pt===4||pt===3&&(Te&62914560)===Te&&300>Jn()-Dg?!(Pe&2)&&ic(t,0):Ab|=n,tc===Te&&(tc=0)),pr(t)}function kN(t,e){e===0&&(e=EP()),t=Mo(t,e),t!==null&&(Md(t,e),pr(t))}function P6(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),kN(t,n)}function N6(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(H(314))}i!==null&&i.delete(e),kN(t,n)}function D6(t,e){return qw(t,e)}var xp=null,ul=null,u_=!1,Ep=!1,Cv=!1,Ms=0;function pr(t){t!==ul&&t.next===null&&(ul===null?xp=ul=t:ul=ul.next=t),Ep=!0,u_||(u_=!0,M6())}function zd(t,e){if(!Cv&&Ep){Cv=!0;do for(var n=!1,i=xp;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,o=i.pingedLanes;s=(1<<31-ei(42|t)+1)-1,s&=r&~(a&~o),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,wS(i,s))}else s=Te,s=bg(i,i===Fe?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||kd(i,s)||(n=!0,wS(i,s));i=i.next}while(n);Cv=!1}}function k6(){MN()}function MN(){Ep=u_=!1;var t=0;Ms!==0&&H6()&&(t=Ms);for(var e=Jn(),n=null,i=xp;i!==null;){var r=i.next,s=ON(i,e);s===0?(i.next=null,n===null?xp=r:n.next=r,r===null&&(ul=n)):(n=i,(t!==0||s&3)&&(Ep=!0)),i=r}kt!==0&&kt!==5||zd(t),Ms!==0&&(Ms=0)}function ON(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var a=31-ei(s),o=1<<a,l=r[a];l===-1?(!(o&n)||o&i)&&(r[a]=aU(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}if(e=Fe,n=Te,n=bg(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(Oe===2||Oe===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&iv(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||kd(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&iv(i),$w(n)){case 2:case 8:n=TP;break;case 32:n=ap;break;case 268435456:n=xP;break;default:n=ap}return i=VN.bind(null,t),n=qw(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&iv(i),t.callbackPriority=2,t.callbackNode=null,2}function VN(t,e){if(kt!==0&&kt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Og()&&t.callbackNode!==n)return null;var i=Te;return i=bg(t,t===Fe?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(bN(t,i,e),ON(t,Jn()),t.callbackNode!=null&&t.callbackNode===n?VN.bind(null,t):null)}function wS(t,e){if(Og())return null;bN(t,e,!0)}function M6(){G6(function(){Pe&6?qw(bP,k6):MN()})}function Cb(){if(Ms===0){var t=Jl;t===0&&(t=Uf,Uf<<=1,!(Uf&261888)&&(Uf=256)),Ms=t}return Ms}function bS(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:_m(""+t)}function TS(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function O6(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var s=bS((r[Ln]||null).action),a=i.submitter;a&&(e=(e=a[Ln]||null)?bS(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var o=new Tg("action","action",null,i,r);t.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Ms!==0){var l=a?TS(r,a):new FormData(r);e_(n,{pending:!0,data:l,method:r.method,action:s},null,l)}}else typeof s=="function"&&(o.preventDefault(),l=a?TS(r,a):new FormData(r),e_(n,{pending:!0,data:l,method:r.method,action:s},s,l))},currentTarget:r}]})}}for(var Pv=0;Pv<F0.length;Pv++){var Nv=F0[Pv],V6=Nv.toLowerCase(),L6=Nv[0].toUpperCase()+Nv.slice(1);ji(V6,"on"+L6)}ji(WP,"onAnimationEnd");ji(QP,"onAnimationIteration");ji(YP,"onAnimationStart");ji("dblclick","onDoubleClick");ji("focusin","onFocus");ji("focusout","onBlur");ji(ZU,"onTransitionRun");ji(e6,"onTransitionStart");ji(t6,"onTransitionCancel");ji(XP,"onTransitionEnd");Yl("onMouseEnter",["mouseout","mouseover"]);Yl("onMouseLeave",["mouseout","mouseover"]);Yl("onPointerEnter",["pointerout","pointerover"]);Yl("onPointerLeave",["pointerout","pointerover"]);No("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));No("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));No("onBeforeInput",["compositionend","keypress","textInput","paste"]);No("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));No("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));No("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yh));function LN(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(u){lp(u)}r.currentTarget=null,s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(u){lp(u)}r.currentTarget=null,s=l}}}}function _e(t,e){var n=e[M0];n===void 0&&(n=e[M0]=new Set);var i=t+"__bubble";n.has(i)||(UN(e,t,2,!1),n.add(i))}function Dv(t,e,n){var i=0;e&&(i|=4),UN(n,t,i,e)}var Wf="_reactListening"+Math.random().toString(36).slice(2);function Pb(t){if(!t[Wf]){t[Wf]=!0,CP.forEach(function(n){n!=="selectionchange"&&(U6.has(n)||Dv(n,!1,t),Dv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wf]||(e[Wf]=!0,Dv("selectionchange",!1,e))}}function UN(t,e,n,i){switch(XN(e)){case 2:var r=d3;break;case 8:r=f3;break;default:r=Mb}n=r.bind(null,e,n,t),r=void 0,!j0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function kv(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;o!==null;){if(a=vl(o),a===null)return;if(l=a.tag,l===5||l===6||l===26||l===27){i=s=a;continue e}o=o.parentNode}}i=i.return}LP(function(){var c=s,u=Ww(n),d=[];e:{var f=JP.get(t);if(f!==void 0){var h=Tg,p=t;switch(t){case"keypress":if(bm(n)===0)break e;case"keydown":case"keyup":h=NU;break;case"focusin":p="focus",h=lv;break;case"focusout":p="blur",h=lv;break;case"beforeblur":case"afterblur":h=lv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=P1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=_U;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=MU;break;case WP:case QP:case YP:h=TU;break;case XP:h=VU;break;case"scroll":case"scrollend":h=yU;break;case"wheel":h=UU;break;case"copy":case"cut":case"paste":h=EU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=D1;break;case"toggle":case"beforetoggle":h=zU}var g=(e&4)!==0,v=!g&&(t==="scroll"||t==="scrollend"),y=g?f!==null?f+"Capture":null:f;g=[];for(var w=c,b;w!==null;){var R=w;if(b=R.stateNode,R=R.tag,R!==5&&R!==26&&R!==27||b===null||y===null||(R=Fh(w,y),R!=null&&g.push(Xh(w,R,b))),v)break;w=w.return}0<g.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==U0&&(p=n.relatedTarget||n.fromElement)&&(vl(p)||p[kc]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?vl(p):null,p!==null&&(v=Nd(p),g=p.tag,p!==v||g!==5&&g!==27&&g!==6)&&(p=null)):(h=null,p=c),h!==p)){if(g=P1,R="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=D1,R="onPointerLeave",y="onPointerEnter",w="pointer"),v=h==null?f:Bu(h),b=p==null?f:Bu(p),f=new g(R,w+"leave",h,n,u),f.target=v,f.relatedTarget=b,R=null,vl(u)===c&&(g=new g(y,w+"enter",p,n,u),g.target=b,g.relatedTarget=v,R=g),v=R,h&&p)t:{for(g=j6,y=h,w=p,b=0,R=y;R;R=g(R))b++;R=0;for(var S=w;S;S=g(S))R++;for(;0<b-R;)y=g(y),b--;for(;0<R-b;)w=g(w),R--;for(;b--;){if(y===w||w!==null&&y===w.alternate){g=y;break t}y=g(y),w=g(w)}g=null}else g=null;h!==null&&xS(d,f,h,g,!1),p!==null&&v!==null&&xS(d,v,p,g,!0)}}e:{if(f=c?Bu(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var C=V1;else if(O1(f))if(qP)C=YU;else{C=WU;var x=KU}else h=f.nodeName,!h||h.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?c&&Kw(c.elementType)&&(C=V1):C=QU;if(C&&(C=C(t,c))){FP(d,C,n,u);break e}x&&x(t,f,c),t==="focusout"&&c&&f.type==="number"&&c.memoizedProps.value!=null&&L0(f,"number",f.value)}switch(x=c?Bu(c):window,t){case"focusin":(O1(x)||x.contentEditable==="true")&&(bl=x,z0=c,sh=null);break;case"focusout":sh=z0=bl=null;break;case"mousedown":B0=!0;break;case"contextmenu":case"mouseup":case"dragend":B0=!1,B1(d,n,u);break;case"selectionchange":if(JU)break;case"keydown":case"keyup":B1(d,n,u)}var T;if(Xw)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else wl?zP(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(jP&&n.locale!=="ko"&&(wl||A!=="onCompositionStart"?A==="onCompositionEnd"&&wl&&(T=UP()):(Ns=u,Qw="value"in Ns?Ns.value:Ns.textContent,wl=!0)),x=Sp(c,A),0<x.length&&(A=new N1(A,t,null,n,u),d.push({event:A,listeners:x}),T?A.data=T:(T=BP(n),T!==null&&(A.data=T)))),(T=FU?qU(t,n):HU(t,n))&&(A=Sp(c,"onBeforeInput"),0<A.length&&(x=new N1("onBeforeInput","beforeinput",null,n,u),d.push({event:x,listeners:A}),x.data=T)),O6(d,t,c,n,u)}LN(d,e)})}function Xh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sp(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=Fh(t,n),r!=null&&i.unshift(Xh(t,r,s)),r=Fh(t,e),r!=null&&i.push(Xh(t,r,s))),t.tag===3)return i;t=t.return}return[]}function j6(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function xS(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===i)break;o!==5&&o!==26&&o!==27||c===null||(l=c,r?(c=Fh(n,s),c!=null&&a.unshift(Xh(n,c,l))):r||(c=Fh(n,s),c!=null&&a.push(Xh(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var z6=/\r\n?/g,B6=/\u0000|\uFFFD/g;function ES(t){return(typeof t=="string"?t:""+t).replace(z6,`
`).replace(B6,"")}function jN(t,e){return e=ES(e),ES(t)===e}function je(t,e,n,i,r,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Xl(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Xl(t,""+i);break;case"className":Bf(t,"class",i);break;case"tabIndex":Bf(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Bf(t,n,i);break;case"style":VP(t,i,s);break;case"data":if(e!=="object"){Bf(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=_m(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&je(t,e,"name",r.name,r,null),je(t,e,"formEncType",r.formEncType,r,null),je(t,e,"formMethod",r.formMethod,r,null),je(t,e,"formTarget",r.formTarget,r,null)):(je(t,e,"encType",r.encType,r,null),je(t,e,"method",r.method,r,null),je(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=_m(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=Ar);break;case"onScroll":i!=null&&_e("scroll",t);break;case"onScrollEnd":i!=null&&_e("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(H(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(H(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=_m(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":_e("beforetoggle",t),_e("toggle",t),vm(t,"popover",i);break;case"xlinkActuate":vr(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":vr(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":vr(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":vr(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":vr(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":vr(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":vr(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":vr(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":vr(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":vm(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=pU.get(n)||n,vm(t,n,i))}}function h_(t,e,n,i,r,s){switch(n){case"style":VP(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(H(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(H(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Xl(t,i):(typeof i=="number"||typeof i=="bigint")&&Xl(t,""+i);break;case"onScroll":i!=null&&_e("scroll",t);break;case"onScrollEnd":i!=null&&_e("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Ar);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!PP.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),s=t[Ln]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):vm(t,n,i)}}}function rn(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_e("error",t),_e("load",t);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(H(137,e));default:je(t,e,s,a,n,null)}}r&&je(t,e,"srcSet",n.srcSet,n,null),i&&je(t,e,"src",n.src,n,null);return;case"input":_e("invalid",t);var o=s=a=r=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var u=n[i];if(u!=null)switch(i){case"name":r=u;break;case"type":a=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":s=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(H(137,e));break;default:je(t,e,i,u,n,null)}}kP(t,s,o,l,c,a,r,!1);return;case"select":_e("invalid",t),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],o!=null))switch(r){case"value":s=o;break;case"defaultValue":a=o;break;case"multiple":i=o;default:je(t,e,r,o,n,null)}e=s,n=a,t.multiple=!!i,e!=null?Vl(t,!!i,e,!1):n!=null&&Vl(t,!!i,n,!0);return;case"textarea":_e("invalid",t),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":i=o;break;case"defaultValue":r=o;break;case"children":s=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(H(91));break;default:je(t,e,a,o,n,null)}OP(t,i,r,s);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:je(t,e,l,i,n,null)}return;case"dialog":_e("beforetoggle",t),_e("toggle",t),_e("cancel",t),_e("close",t);break;case"iframe":case"object":_e("load",t);break;case"video":case"audio":for(i=0;i<Yh.length;i++)_e(Yh[i],t);break;case"image":_e("error",t),_e("load",t);break;case"details":_e("toggle",t);break;case"embed":case"source":case"link":_e("error",t),_e("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(H(137,e));default:je(t,e,c,i,n,null)}return;default:if(Kw(e)){for(u in n)n.hasOwnProperty(u)&&(i=n[u],i!==void 0&&h_(t,e,u,i,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(i=n[o],i!=null&&je(t,e,o,i,n,null))}function F6(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,o=null,l=null,c=null,u=null;for(h in n){var d=n[h];if(n.hasOwnProperty(h)&&d!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":l=d;default:i.hasOwnProperty(h)||je(t,e,h,null,i,d)}}for(var f in i){var h=i[f];if(d=n[f],i.hasOwnProperty(f)&&(h!=null||d!=null))switch(f){case"type":s=h;break;case"name":r=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":a=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(H(137,e));break;default:h!==d&&je(t,e,f,h,i,d)}}V0(t,a,o,l,c,u,s,r);return;case"select":h=a=o=f=null;for(s in n)if(l=n[s],n.hasOwnProperty(s)&&l!=null)switch(s){case"value":break;case"multiple":h=l;default:i.hasOwnProperty(s)||je(t,e,s,null,i,l)}for(r in i)if(s=i[r],l=n[r],i.hasOwnProperty(r)&&(s!=null||l!=null))switch(r){case"value":f=s;break;case"defaultValue":o=s;break;case"multiple":a=s;default:s!==l&&je(t,e,r,s,i,l)}e=o,n=a,i=h,f!=null?Vl(t,!!n,f,!1):!!i!=!!n&&(e!=null?Vl(t,!!n,e,!0):Vl(t,!!n,n?[]:"",!1));return;case"textarea":h=f=null;for(o in n)if(r=n[o],n.hasOwnProperty(o)&&r!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:je(t,e,o,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":f=r;break;case"defaultValue":h=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(H(91));break;default:r!==s&&je(t,e,a,r,i,s)}MP(t,f,h);return;case"option":for(var p in n)if(f=n[p],n.hasOwnProperty(p)&&f!=null&&!i.hasOwnProperty(p))switch(p){case"selected":t.selected=!1;break;default:je(t,e,p,null,i,f)}for(l in i)if(f=i[l],h=n[l],i.hasOwnProperty(l)&&f!==h&&(f!=null||h!=null))switch(l){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:je(t,e,l,f,i,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&f!=null&&!i.hasOwnProperty(g)&&je(t,e,g,null,i,f);for(c in i)if(f=i[c],h=n[c],i.hasOwnProperty(c)&&f!==h&&(f!=null||h!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(H(137,e));break;default:je(t,e,c,f,i,h)}return;default:if(Kw(e)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&f!==void 0&&!i.hasOwnProperty(v)&&h_(t,e,v,void 0,i,f);for(u in i)f=i[u],h=n[u],!i.hasOwnProperty(u)||f===h||f===void 0&&h===void 0||h_(t,e,u,f,i,h);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&f!=null&&!i.hasOwnProperty(y)&&je(t,e,y,null,i,f);for(d in i)f=i[d],h=n[d],!i.hasOwnProperty(d)||f===h||f==null&&h==null||je(t,e,d,f,i,h)}function SS(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function q6(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],s=r.transferSize,a=r.initiatorType,o=r.duration;if(s&&o&&SS(a)){for(a=0,o=r.responseEnd,i+=1;i<n.length;i++){var l=n[i],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&SS(d)&&(l=l.responseEnd,a+=u*(l<o?1:(o-c)/(l-c)))}if(--i,e+=8*(s+a)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var d_=null,f_=null;function Ip(t){return t.nodeType===9?t:t.ownerDocument}function IS(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zN(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function m_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mv=null;function H6(){var t=window.event;return t&&t.type==="popstate"?t===Mv?!1:(Mv=t,!0):(Mv=null,!1)}var BN=typeof setTimeout=="function"?setTimeout:void 0,$6=typeof clearTimeout=="function"?clearTimeout:void 0,AS=typeof Promise=="function"?Promise:void 0,G6=typeof queueMicrotask=="function"?queueMicrotask:typeof AS<"u"?function(t){return AS.resolve(null).then(t).catch(K6)}:BN;function K6(t){setTimeout(function(){throw t})}function ya(t){return t==="head"}function RS(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(r),sc(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")ph(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,ph(n);for(var s=n.firstChild;s;){var a=s.nextSibling,o=s.nodeName;s[Od]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=a}}else n==="body"&&ph(t.ownerDocument.body);n=r}while(n);sc(e)}function CS(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function p_(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":p_(n),Gw(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function W6(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[Od])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=xi(t.nextSibling),t===null)break}return null}function Q6(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=xi(t.nextSibling),t===null))return null;return t}function FN(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=xi(t.nextSibling),t===null))return null;return t}function g_(t){return t.data==="$?"||t.data==="$~"}function y_(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Y6(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function xi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var v_=null;function PS(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return xi(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function NS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function qN(t,e,n){switch(e=Ip(n),t){case"html":if(t=e.documentElement,!t)throw Error(H(452));return t;case"head":if(t=e.head,!t)throw Error(H(453));return t;case"body":if(t=e.body,!t)throw Error(H(454));return t;default:throw Error(H(451))}}function ph(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Gw(t)}var Si=new Map,DS=new Set;function Ap(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Xr=Ne.d;Ne.d={f:X6,r:J6,D:Z6,C:e3,L:t3,m:n3,X:r3,S:i3,M:s3};function X6(){var t=Xr.f(),e=kg();return t||e}function J6(t){var e=Mc(t);e!==null&&e.tag===5&&e.type==="form"?V2(e):Xr.r(t)}var Uc=typeof document>"u"?null:document;function HN(t,e,n){var i=Uc;if(i&&typeof e=="string"&&e){var r=gi(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),DS.has(r)||(DS.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),rn(e,"link",t),Ht(e),i.head.appendChild(e)))}}function Z6(t){Xr.D(t),HN("dns-prefetch",t,null)}function e3(t,e){Xr.C(t,e),HN("preconnect",t,e)}function t3(t,e,n){Xr.L(t,e,n);var i=Uc;if(i&&t&&e){var r='link[rel="preload"][as="'+gi(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+gi(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+gi(n.imageSizes)+'"]')):r+='[href="'+gi(t)+'"]';var s=r;switch(e){case"style":s=rc(t);break;case"script":s=jc(t)}Si.has(s)||(t=et({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Si.set(s,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(Bd(s))||e==="script"&&i.querySelector(Fd(s))||(e=i.createElement("link"),rn(e,"link",t),Ht(e),i.head.appendChild(e)))}}function n3(t,e){Xr.m(t,e);var n=Uc;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+gi(i)+'"][href="'+gi(t)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=jc(t)}if(!Si.has(s)&&(t=et({rel:"modulepreload",href:t},e),Si.set(s,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Fd(s)))return}i=n.createElement("link"),rn(i,"link",t),Ht(i),n.head.appendChild(i)}}}function i3(t,e,n){Xr.S(t,e,n);var i=Uc;if(i&&t){var r=Ol(i).hoistableStyles,s=rc(t);e=e||"default";var a=r.get(s);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(Bd(s)))o.loading=5;else{t=et({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Si.get(s))&&Nb(t,n);var l=a=i.createElement("link");Ht(l),rn(l,"link",t),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Cm(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(s,a)}}}function r3(t,e){Xr.X(t,e);var n=Uc;if(n&&t){var i=Ol(n).hoistableScripts,r=jc(t),s=i.get(r);s||(s=n.querySelector(Fd(r)),s||(t=et({src:t,async:!0},e),(e=Si.get(r))&&Db(t,e),s=n.createElement("script"),Ht(s),rn(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function s3(t,e){Xr.M(t,e);var n=Uc;if(n&&t){var i=Ol(n).hoistableScripts,r=jc(t),s=i.get(r);s||(s=n.querySelector(Fd(r)),s||(t=et({src:t,async:!0,type:"module"},e),(e=Si.get(r))&&Db(t,e),s=n.createElement("script"),Ht(s),rn(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function kS(t,e,n,i){var r=(r=Us.current)?Ap(r):null;if(!r)throw Error(H(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=rc(n.href),n=Ol(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=rc(n.href);var s=Ol(r).hoistableStyles,a=s.get(t);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,a),(s=r.querySelector(Bd(t)))&&!s._p&&(a.instance=s,a.state.loading=5),Si.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Si.set(t,n),s||a3(r,t,n,a.state))),e&&i===null)throw Error(H(528,""));return a}if(e&&i!==null)throw Error(H(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=jc(n),n=Ol(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(H(444,t))}}function rc(t){return'href="'+gi(t)+'"'}function Bd(t){return'link[rel="stylesheet"]['+t+"]"}function $N(t){return et({},t,{"data-precedence":t.precedence,precedence:null})}function a3(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),rn(e,"link",n),Ht(e),t.head.appendChild(e))}function jc(t){return'[src="'+gi(t)+'"]'}function Fd(t){return"script[async]"+t}function MS(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+gi(n.href)+'"]');if(i)return e.instance=i,Ht(i),i;var r=et({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),Ht(i),rn(i,"style",r),Cm(i,n.precedence,t),e.instance=i;case"stylesheet":r=rc(n.href);var s=t.querySelector(Bd(r));if(s)return e.state.loading|=4,e.instance=s,Ht(s),s;i=$N(n),(r=Si.get(r))&&Nb(i,r),s=(t.ownerDocument||t).createElement("link"),Ht(s);var a=s;return a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),rn(s,"link",i),e.state.loading|=4,Cm(s,n.precedence,t),e.instance=s;case"script":return s=jc(n.src),(r=t.querySelector(Fd(s)))?(e.instance=r,Ht(r),r):(i=n,(r=Si.get(s))&&(i=et({},n),Db(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),Ht(r),rn(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(H(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Cm(i,n.precedence,t));return e.instance}function Cm(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===e)s=o;else if(s!==r)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Nb(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Db(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Pm=null;function OS(t,e,n){if(Pm===null){var i=new Map,r=Pm=new Map;r.set(n,i)}else r=Pm,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var s=n[r];if(!(s[Od]||s[Zt]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=t+a;var o=i.get(a);o?o.push(s):i.set(a,[s])}}return i}function VS(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function o3(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function GN(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function l3(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=rc(i.href),s=e.querySelector(Bd(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Rp.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=s,Ht(s);return}s=e.ownerDocument||e,i=$N(i),(r=Si.get(r))&&Nb(i,r),s=s.createElement("link"),Ht(s);var a=s;a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),rn(s,"link",i),n.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=Rp.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Ov=0;function c3(t,e){return t.stylesheets&&t.count===0&&Nm(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&Nm(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&Ov===0&&(Ov=62500*q6());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Nm(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>Ov?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function Rp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Cp=null;function Nm(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Cp=new Map,e.forEach(u3,t),Cp=null,Rp.call(t))}function u3(t,e){if(!(e.state.loading&4)){var n=Cp.get(t);if(n)var i=n.get(null);else{n=new Map,Cp.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=e.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=Rp.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var Jh={$$typeof:Ir,Provider:null,Consumer:null,_currentValue:no,_currentValue2:no,_threadCount:0};function h3(t,e,n,i,r,s,a,o,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rv(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rv(0),this.hiddenUpdates=rv(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function KN(t,e,n,i,r,s,a,o,l,c,u,d){return t=new h3(t,e,n,a,l,c,u,d,o),e=1,s===!0&&(e|=24),s=Wn(3,null,null,e),t.current=s,s.stateNode=t,e=rb(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},ob(s),t}function WN(t){return t?(t=El,t):El}function QN(t,e,n,i,r,s){r=WN(r),i.context===null?i.context=r:i.pendingContext=r,i=zs(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Bs(t,i,e),n!==null&&(Vn(n,t,e),oh(n,t,e))}function LS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kb(t,e){LS(t,e),(t=t.alternate)&&LS(t,e)}function YN(t){if(t.tag===13||t.tag===31){var e=Mo(t,67108864);e!==null&&Vn(e,t,67108864),kb(t,67108864)}}function US(t){if(t.tag===13||t.tag===31){var e=ti();e=Hw(e);var n=Mo(t,e);n!==null&&Vn(n,t,e),kb(t,e)}}var Pp=!0;function d3(t,e,n,i){var r=oe.T;oe.T=null;var s=Ne.p;try{Ne.p=2,Mb(t,e,n,i)}finally{Ne.p=s,oe.T=r}}function f3(t,e,n,i){var r=oe.T;oe.T=null;var s=Ne.p;try{Ne.p=8,Mb(t,e,n,i)}finally{Ne.p=s,oe.T=r}}function Mb(t,e,n,i){if(Pp){var r=__(i);if(r===null)kv(t,e,i,Np,n),jS(t,i);else if(p3(r,t,e,n,i))i.stopPropagation();else if(jS(t,i),e&4&&-1<m3.indexOf(t)){for(;r!==null;){var s=Mc(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=La(s.pendingLanes);if(a!==0){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-ei(a);o.entanglements[1]|=l,a&=~l}pr(s),!(Pe&6)&&(wp=Jn()+500,zd(0))}}break;case 31:case 13:o=Mo(s,2),o!==null&&Vn(o,s,2),kg(),kb(s,2)}if(s=__(i),s===null&&kv(t,e,i,Np,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else kv(t,e,i,null,n)}}function __(t){return t=Ww(t),Ob(t)}var Np=null;function Ob(t){if(Np=null,t=vl(t),t!==null){var e=Nd(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=gP(e),t!==null)return t;t=null}else if(n===31){if(t=yP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Np=t,null}function XN(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Z4()){case bP:return 2;case TP:return 8;case ap:case eU:return 32;case xP:return 268435456;default:return 32}default:return 32}}var w_=!1,Hs=null,$s=null,Gs=null,Zh=new Map,ed=new Map,Rs=[],m3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jS(t,e){switch(t){case"focusin":case"focusout":Hs=null;break;case"dragenter":case"dragleave":$s=null;break;case"mouseover":case"mouseout":Gs=null;break;case"pointerover":case"pointerout":Zh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ed.delete(e.pointerId)}}function Iu(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Mc(e),e!==null&&YN(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function p3(t,e,n,i,r){switch(e){case"focusin":return Hs=Iu(Hs,t,e,n,i,r),!0;case"dragenter":return $s=Iu($s,t,e,n,i,r),!0;case"mouseover":return Gs=Iu(Gs,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Zh.set(s,Iu(Zh.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ed.set(s,Iu(ed.get(s)||null,t,e,n,i,r)),!0}return!1}function JN(t){var e=vl(t.target);if(e!==null){var n=Nd(e);if(n!==null){if(e=n.tag,e===13){if(e=gP(n),e!==null){t.blockedOn=e,x1(t.priority,function(){US(n)});return}}else if(e===31){if(e=yP(n),e!==null){t.blockedOn=e,x1(t.priority,function(){US(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Dm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=__(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);U0=i,n.target.dispatchEvent(i),U0=null}else return e=Mc(n),e!==null&&YN(e),t.blockedOn=n,!1;e.shift()}return!0}function zS(t,e,n){Dm(t)&&n.delete(e)}function g3(){w_=!1,Hs!==null&&Dm(Hs)&&(Hs=null),$s!==null&&Dm($s)&&($s=null),Gs!==null&&Dm(Gs)&&(Gs=null),Zh.forEach(zS),ed.forEach(zS)}function Qf(t,e){t.blockedOn===e&&(t.blockedOn=null,w_||(w_=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,g3)))}var Yf=null;function BS(t){Yf!==t&&(Yf=t,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,function(){Yf===t&&(Yf=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(Ob(i||n)===null)continue;break}var s=Mc(n);s!==null&&(t.splice(e,3),e-=3,e_(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function sc(t){function e(l){return Qf(l,t)}Hs!==null&&Qf(Hs,t),$s!==null&&Qf($s,t),Gs!==null&&Qf(Gs,t),Zh.forEach(e),ed.forEach(e);for(var n=0;n<Rs.length;n++){var i=Rs[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<Rs.length&&(n=Rs[0],n.blockedOn===null);)JN(n),n.blockedOn===null&&Rs.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Ln]||null;if(typeof s=="function")a||BS(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Ln]||null)o=a.formAction;else if(Ob(r)!==null)continue}else o=a.action;typeof o=="function"?n[i+1]=o:(n.splice(i,3),i-=3),BS(n)}}}function ZN(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(a){return r=a})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function Vb(t){this._internalRoot=t}Vg.prototype.render=Vb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));var n=e.current,i=ti();QN(n,i,t,e,null,null)};Vg.prototype.unmount=Vb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;QN(t.current,2,null,t,null,null),kg(),e[kc]=null}};function Vg(t){this._internalRoot=t}Vg.prototype.unstable_scheduleHydration=function(t){if(t){var e=RP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rs.length&&e!==0&&e<Rs[n].priority;n++);Rs.splice(n,0,t),n===0&&JN(t)}};var FS=mP.version;if(FS!=="19.2.0")throw Error(H(527,FS,"19.2.0"));Ne.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=G4(e),t=t!==null?vP(t):null,t=t===null?null:t.stateNode,t};var y3={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:oe,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xf.isDisabled&&Xf.supportsFiber)try{Dd=Xf.inject(y3),Zn=Xf}catch{}}_g.createRoot=function(t,e){if(!pP(t))throw Error(H(299));var n=!1,i="",r=H2,s=$2,a=G2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=KN(t,1,!1,null,null,n,i,null,r,s,a,ZN),t[kc]=e.current,Pb(t),new Vb(e)};_g.hydrateRoot=function(t,e,n){if(!pP(t))throw Error(H(299));var i=!1,r="",s=H2,a=$2,o=G2,l=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(l=n.formState)),e=KN(t,1,!0,e,n??null,i,r,l,s,a,o,ZN),e.context=WN(null),n=e.current,i=ti(),i=Hw(i),r=zs(i),r.callback=null,Bs(n,r,i),n=i,e.current.lanes=n,Md(e,n),pr(e),t[kc]=e.current,Pb(t),new Vg(e)};_g.version="19.2.0";function eD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eD)}catch(t){console.error(t)}}eD(),oP.exports=_g;var v3=oP.exports;const _3=Ow(v3),w3="modulepreload",b3=function(t){return"/RushCoffee-Capstone/"+t},qS={},ke=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=b3(l),l in qS)return;qS[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":w3,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var HS="popstate";function T3(t={}){function e(r,s){let{pathname:a="/",search:o="",hash:l=""}=Vo(r.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),b_("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){let a=r.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let l=r.location.href,c=l.indexOf("#");o=c===-1?l:l.slice(0,c)}return o+"#"+(typeof s=="string"?s:td(s))}function i(r,s){Un(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return E3(e,n,i,t)}function at(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Un(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function x3(){return Math.random().toString(36).substring(2,10)}function $S(t,e){return{usr:t.state,key:t.key,idx:e}}function b_(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Vo(e):e,state:n,key:e&&e.key||i||x3()}}function td({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Vo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function E3(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o="POP",l=null,c=u();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function u(){return(a.state||{idx:null}).idx}function d(){o="POP";let v=u(),y=v==null?null:v-c;c=v,l&&l({action:o,location:g.location,delta:y})}function f(v,y){o="PUSH";let w=b_(g.location,v,y);n&&n(w,v),c=u()+1;let b=$S(w,c),R=g.createHref(w);try{a.pushState(b,"",R)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;r.location.assign(R)}s&&l&&l({action:o,location:g.location,delta:1})}function h(v,y){o="REPLACE";let w=b_(g.location,v,y);n&&n(w,v),c=u();let b=$S(w,c),R=g.createHref(w);a.replaceState(b,"",R),s&&l&&l({action:o,location:g.location,delta:0})}function p(v){return S3(v)}let g={get action(){return o},get location(){return t(r,a)},listen(v){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(HS,d),l=v,()=>{r.removeEventListener(HS,d),l=null}},createHref(v){return e(r,v)},createURL:p,encodeLocation(v){let y=p(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:h,go(v){return a.go(v)}};return g}function S3(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),at(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:td(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function tD(t,e,n="/"){return I3(t,e,n,!1)}function I3(t,e,n,i){let r=typeof e=="string"?Vo(e):e,s=Hr(r.pathname||"/",n);if(s==null)return null;let a=nD(t);A3(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=U3(s);o=V3(a[l],c,i)}return o}function nD(t,e=[],n=[],i="",r=!1){let s=(a,o,l=r,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(i)&&l)return;at(u.relativePath.startsWith(i),`Absolute route path "${u.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(i.length)}let d=Mr([i,u.relativePath]),f=n.concat(u);a.children&&a.children.length>0&&(at(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),nD(a.children,e,f,d,l)),!(a.path==null&&!a.index)&&e.push({path:d,score:M3(d,a.index),routesMeta:f})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of iD(a.path))s(a,o,!0,c)}),e}function iD(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=iD(i.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),r&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function A3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:O3(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var R3=/^:[\w-]+$/,C3=3,P3=2,N3=1,D3=10,k3=-2,GS=t=>t==="*";function M3(t,e){let n=t.split("/"),i=n.length;return n.some(GS)&&(i+=k3),e&&(i+=P3),n.filter(r=>!GS(r)).reduce((r,s)=>r+(R3.test(s)?C3:s===""?N3:D3),i)}function O3(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function V3(t,e,n=!1){let{routesMeta:i}=t,r={},s="/",a=[];for(let o=0;o<i.length;++o){let l=i[o],c=o===i.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=Dp({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!i[i.length-1].route.index&&(d=Dp({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(r,d.params),a.push({params:r,pathname:Mr([s,d.pathname]),pathnameBase:q3(Mr([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Mr([s,d.pathnameBase]))}return a}function Dp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=L3(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((c,{paramName:u,isOptional:d},f)=>{if(u==="*"){let p=o[f]||"";a=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const h=o[f];return d&&!h?c[u]=void 0:c[u]=(h||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function L3(t,e=!1,n=!0){Un(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(i.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function U3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Un(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Hr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var j3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,z3=t=>j3.test(t);function B3(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Vo(t):t,s;if(n)if(z3(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Un(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?s=KS(n.substring(1),"/"):s=KS(n,e)}else s=e;return{pathname:s,search:H3(i),hash:$3(r)}}function KS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Vv(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function F3(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Lb(t){let e=F3(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Ub(t,e,n,i=!1){let r;typeof t=="string"?r=Vo(t):(r={...t},at(!r.pathname||!r.pathname.includes("?"),Vv("?","pathname","search",r)),at(!r.pathname||!r.pathname.includes("#"),Vv("#","pathname","hash",r)),at(!r.search||!r.search.includes("#"),Vv("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=n;else{let d=e.length-1;if(!i&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}o=d>=0?e[d]:"/"}let l=B3(r,o),c=a&&a!=="/"&&a.endsWith("/"),u=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Mr=t=>t.join("/").replace(/\/\/+/g,"/"),q3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),H3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function G3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rD=["POST","PUT","PATCH","DELETE"];new Set(rD);var K3=["GET",...rD];new Set(K3);var zc=M.createContext(null);zc.displayName="DataRouter";var Lg=M.createContext(null);Lg.displayName="DataRouterState";M.createContext(!1);var sD=M.createContext({isTransitioning:!1});sD.displayName="ViewTransition";var W3=M.createContext(new Map);W3.displayName="Fetchers";var Q3=M.createContext(null);Q3.displayName="Await";var zi=M.createContext(null);zi.displayName="Navigation";var qd=M.createContext(null);qd.displayName="Location";var Bi=M.createContext({outlet:null,matches:[],isDataRoute:!1});Bi.displayName="Route";var jb=M.createContext(null);jb.displayName="RouteError";function Y3(t,{relative:e}={}){at(Bc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=M.useContext(zi),{hash:r,pathname:s,search:a}=Hd(t,{relative:e}),o=s;return n!=="/"&&(o=s==="/"?n:Mr([n,s])),i.createHref({pathname:o,search:a,hash:r})}function Bc(){return M.useContext(qd)!=null}function Ai(){return at(Bc(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(qd).location}var aD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function oD(t){M.useContext(zi).static||M.useLayoutEffect(t)}function Lo(){let{isDataRoute:t}=M.useContext(Bi);return t?hj():X3()}function X3(){at(Bc(),"useNavigate() may be used only in the context of a <Router> component.");let t=M.useContext(zc),{basename:e,navigator:n}=M.useContext(zi),{matches:i}=M.useContext(Bi),{pathname:r}=Ai(),s=JSON.stringify(Lb(i)),a=M.useRef(!1);return oD(()=>{a.current=!0}),M.useCallback((l,c={})=>{if(Un(a.current,aD),!a.current)return;if(typeof l=="number"){n.go(l);return}let u=Ub(l,JSON.parse(s),r,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Mr([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,s,r,t])}var J3=M.createContext(null);function Z3(t){let e=M.useContext(Bi).outlet;return M.useMemo(()=>e&&M.createElement(J3.Provider,{value:t},e),[e,t])}function Hd(t,{relative:e}={}){let{matches:n}=M.useContext(Bi),{pathname:i}=Ai(),r=JSON.stringify(Lb(n));return M.useMemo(()=>Ub(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function ej(t,e){return lD(t,e)}function lD(t,e,n,i,r){var w;at(Bc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=M.useContext(zi),{matches:a}=M.useContext(Bi),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let b=d&&d.path||"";cD(c,!d||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let f=Ai(),h;if(e){let b=typeof e=="string"?Vo(e):e;at(u==="/"||((w=b.pathname)==null?void 0:w.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${b.pathname}" was given in the \`location\` prop.`),h=b}else h=f;let p=h.pathname||"/",g=p;if(u!=="/"){let b=u.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=tD(t,{pathname:g});Un(d||v!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Un(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=sj(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Mr([u,s.encodeLocation?s.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:Mr([u,s.encodeLocation?s.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),a,n,i,r);return e&&y?M.createElement(qd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},y):y}function tj(){let t=uj(),e=G3(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:s},"ErrorBoundary")," or"," ",M.createElement("code",{style:s},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:r},n):null,a)}var nj=M.createElement(tj,null),ij=class extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?M.createElement(Bi.Provider,{value:this.props.routeContext},M.createElement(jb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rj({routeContext:t,match:e,children:n}){let i=M.useContext(zc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Bi.Provider,{value:t},n)}function sj(t,e=[],n=null,i=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n==null?void 0:n.errors;if(a!=null){let u=s.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);at(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let o=!1,l=-1;if(n)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let c=n&&i?(u,d)=>{var f,h;i(u,{location:n.location,params:((h=(f=n.matches)==null?void 0:f[0])==null?void 0:h.params)??{},errorInfo:d})}:void 0;return s.reduceRight((u,d,f)=>{let h,p=!1,g=null,v=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||nj,o&&(l<0&&f===0?(cD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,v=null):l===f&&(p=!0,v=d.route.hydrateFallbackElement||null)));let y=e.concat(s.slice(0,f+1)),w=()=>{let b;return h?b=g:p?b=v:d.route.Component?b=M.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,M.createElement(rj,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?M.createElement(ij,{location:n.location,revalidation:n.revalidation,component:g,error:h,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0},onError:c}):w()},null)}function zb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aj(t){let e=M.useContext(zc);return at(e,zb(t)),e}function oj(t){let e=M.useContext(Lg);return at(e,zb(t)),e}function lj(t){let e=M.useContext(Bi);return at(e,zb(t)),e}function Bb(t){let e=lj(t),n=e.matches[e.matches.length-1];return at(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function cj(){return Bb("useRouteId")}function uj(){var i;let t=M.useContext(jb),e=oj("useRouteError"),n=Bb("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function hj(){let{router:t}=aj("useNavigate"),e=Bb("useNavigate"),n=M.useRef(!1);return oD(()=>{n.current=!0}),M.useCallback(async(r,s={})=>{Un(n.current,aD),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...s}))},[t,e])}var WS={};function cD(t,e,n){!e&&!WS[t]&&(WS[t]=!0,Un(!1,n))}M.memo(dj);function dj({routes:t,future:e,state:n,unstable_onError:i}){return lD(t,void 0,n,i,e)}function fj({to:t,replace:e,state:n,relative:i}){at(Bc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=M.useContext(zi);Un(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=M.useContext(Bi),{pathname:a}=Ai(),o=Lo(),l=Ub(t,Lb(s),a,i==="path"),c=JSON.stringify(l);return M.useEffect(()=>{o(JSON.parse(c),{replace:e,state:n,relative:i})},[o,c,i,e,n]),null}function QS(t){return Z3(t.context)}function ve(t){at(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mj({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:s=!1}){at(!Bc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=M.useMemo(()=>({basename:a,navigator:r,static:s,future:{}}),[a,r,s]);typeof n=="string"&&(n=Vo(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:f="default"}=n,h=M.useMemo(()=>{let p=Hr(l,a);return p==null?null:{location:{pathname:p,search:c,hash:u,state:d,key:f},navigationType:i}},[a,l,c,u,d,f,i]);return Un(h!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:M.createElement(zi.Provider,{value:o},M.createElement(qd.Provider,{children:e,value:h}))}function pj({children:t,location:e}){return ej(T_(t),e)}function T_(t,e=[]){let n=[];return M.Children.forEach(t,(i,r)=>{if(!M.isValidElement(i))return;let s=[...e,r];if(i.type===M.Fragment){n.push.apply(n,T_(i.props.children,s));return}at(i.type===ve,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),at(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=T_(i.props.children,s)),n.push(a)}),n}var km="get",Mm="application/x-www-form-urlencoded";function Ug(t){return t!=null&&typeof t.tagName=="string"}function gj(t){return Ug(t)&&t.tagName.toLowerCase()==="button"}function yj(t){return Ug(t)&&t.tagName.toLowerCase()==="form"}function vj(t){return Ug(t)&&t.tagName.toLowerCase()==="input"}function _j(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function wj(t,e){return t.button===0&&(!e||e==="_self")&&!_j(t)}function x_(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(r=>[n,r]):[[n,i]])},[]))}function bj(t,e){let n=x_(t);return e&&e.forEach((i,r)=>{n.has(r)||e.getAll(r).forEach(s=>{n.append(r,s)})}),n}var Jf=null;function Tj(){if(Jf===null)try{new FormData(document.createElement("form"),0),Jf=!1}catch{Jf=!0}return Jf}var xj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lv(t){return t!=null&&!xj.has(t)?(Un(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Mm}"`),null):t}function Ej(t,e){let n,i,r,s,a;if(yj(t)){let o=t.getAttribute("action");i=o?Hr(o,e):null,n=t.getAttribute("method")||km,r=Lv(t.getAttribute("enctype"))||Mm,s=new FormData(t)}else if(gj(t)||vj(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(i=l?Hr(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||km,r=Lv(t.getAttribute("formenctype"))||Lv(o.getAttribute("enctype"))||Mm,s=new FormData(o,t),!Tj()){let{name:c,type:u,value:d}=t;if(u==="image"){let f=c?`${c}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else c&&s.append(c,d)}}else{if(Ug(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=km,i=null,r=Mm,a=t}return s&&r==="text/plain"&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Fb(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Sj(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Hr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function Ij(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Aj(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Rj(t,e,n){let i=await Promise.all(t.map(async r=>{let s=e.routes[r.route.id];if(s){let a=await Ij(s,n);return a.links?a.links():[]}return[]}));return Dj(i.flat(1).filter(Aj).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function YS(t,e,n,i,r,s){let a=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,o=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?e.filter((l,c)=>{var d;let u=i.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Cj(t,e,{includeHydrateFallback:n}={}){return Pj(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function Pj(t){return[...new Set(t)]}function Nj(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function Dj(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let s=JSON.stringify(Nj(r));return n.has(s)||(n.add(s),i.push({key:s,link:r})),i},[])}function uD(){let t=M.useContext(zc);return Fb(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function kj(){let t=M.useContext(Lg);return Fb(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var qb=M.createContext(void 0);qb.displayName="FrameworkContext";function hD(){let t=M.useContext(qb);return Fb(t,"You must render this element inside a <HydratedRouter> element"),t}function Mj(t,e){let n=M.useContext(qb),[i,r]=M.useState(!1),[s,a]=M.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=e,f=M.useRef(null);M.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let g=y=>{y.forEach(w=>{a(w.isIntersecting)})},v=new IntersectionObserver(g,{threshold:.5});return f.current&&v.observe(f.current),()=>{v.disconnect()}}},[t]),M.useEffect(()=>{if(i){let g=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(g)}}},[i]);let h=()=>{r(!0)},p=()=>{r(!1),a(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:Au(o,h),onBlur:Au(l,p),onMouseEnter:Au(c,h),onMouseLeave:Au(u,p),onTouchStart:Au(d,h)}]:[!1,f,{}]}function Au(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Oj({page:t,...e}){let{router:n}=uD(),i=M.useMemo(()=>tD(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?M.createElement(Lj,{page:t,matches:i,...e}):null}function Vj(t){let{manifest:e,routeModules:n}=hD(),[i,r]=M.useState([]);return M.useEffect(()=>{let s=!1;return Rj(t,e,n).then(a=>{s||r(a)}),()=>{s=!0}},[t,e,n]),i}function Lj({page:t,matches:e,...n}){let i=Ai(),{manifest:r,routeModules:s}=hD(),{basename:a}=uD(),{loaderData:o,matches:l}=kj(),c=M.useMemo(()=>YS(t,e,l,r,i,"data"),[t,e,l,r,i]),u=M.useMemo(()=>YS(t,e,l,r,i,"assets"),[t,e,l,r,i]),d=M.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let p=new Set,g=!1;if(e.forEach(y=>{var b;let w=r.routes[y.route.id];!w||!w.hasLoader||(!c.some(R=>R.route.id===y.route.id)&&y.route.id in o&&((b=s[y.route.id])!=null&&b.shouldRevalidate)||w.hasClientLoader?g=!0:p.add(y.route.id))}),p.size===0)return[];let v=Sj(t,a,"data");return g&&p.size>0&&v.searchParams.set("_routes",e.filter(y=>p.has(y.route.id)).map(y=>y.route.id).join(",")),[v.pathname+v.search]},[a,o,i,r,c,e,t,s]),f=M.useMemo(()=>Cj(u,r),[u,r]),h=Vj(u);return M.createElement(M.Fragment,null,d.map(p=>M.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),f.map(p=>M.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),h.map(({key:p,link:g})=>M.createElement("link",{key:p,nonce:n.nonce,...g})))}function Uj(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var dD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{dD&&(window.__reactRouterVersion="7.9.6")}catch{}function jj({basename:t,children:e,window:n}){let i=M.useRef();i.current==null&&(i.current=T3({window:n,v5Compat:!0}));let r=i.current,[s,a]=M.useState({action:r.action,location:r.location}),o=M.useCallback(l=>{M.startTransition(()=>a(l))},[a]);return M.useLayoutEffect(()=>r.listen(o),[r,o]),M.createElement(mj,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:r})}var fD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hi=M.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:d,...f},h){let{basename:p}=M.useContext(zi),g=typeof c=="string"&&fD.test(c),v,y=!1;if(typeof c=="string"&&g&&(v=c,dD))try{let A=new URL(window.location.href),I=c.startsWith("//")?new URL(A.protocol+c):new URL(c),P=Hr(I.pathname,p);I.origin===A.origin&&P!=null?c=P+I.search+I.hash:y=!0}catch{Un(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=Y3(c,{relative:r}),[b,R,S]=Mj(i,f),C=Fj(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:r,viewTransition:d});function x(A){e&&e(A),A.defaultPrevented||C(A)}let T=M.createElement("a",{...f,...S,href:v||w,onClick:y||s?e:x,ref:Uj(h,R),target:l,"data-discover":!g&&n==="render"?"true":void 0});return b&&!g?M.createElement(M.Fragment,null,T,M.createElement(Oj,{page:w})):T});hi.displayName="Link";var Pi=M.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:s,to:a,viewTransition:o,children:l,...c},u){let d=Hd(a,{relative:c.relative}),f=Ai(),h=M.useContext(Lg),{navigator:p,basename:g}=M.useContext(zi),v=h!=null&&Wj(d)&&o===!0,y=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,w=f.pathname,b=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(w=w.toLowerCase(),b=b?b.toLowerCase():null,y=y.toLowerCase()),b&&g&&(b=Hr(b,g)||b);const R=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let S=w===y||!r&&w.startsWith(y)&&w.charAt(R)==="/",C=b!=null&&(b===y||!r&&b.startsWith(y)&&b.charAt(y.length)==="/"),x={isActive:S,isPending:C,isTransitioning:v},T=S?e:void 0,A;typeof i=="function"?A=i(x):A=[i,S?"active":null,C?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let I=typeof s=="function"?s(x):s;return M.createElement(hi,{...c,"aria-current":T,className:A,ref:u,style:I,to:a,viewTransition:o},typeof l=="function"?l(x):l)});Pi.displayName="NavLink";var zj=M.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:s,method:a=km,action:o,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...f},h)=>{let p=Gj(),g=Kj(o,{relative:c}),v=a.toLowerCase()==="get"?"get":"post",y=typeof o=="string"&&fD.test(o),w=b=>{if(l&&l(b),b.defaultPrevented)return;b.preventDefault();let R=b.nativeEvent.submitter,S=(R==null?void 0:R.getAttribute("formmethod"))||a;p(R||b.currentTarget,{fetcherKey:e,method:S,navigate:n,replace:r,state:s,relative:c,preventScrollReset:u,viewTransition:d})};return M.createElement("form",{ref:h,method:v,action:g,onSubmit:i?l:w,...f,"data-discover":!y&&t==="render"?"true":void 0})});zj.displayName="Form";function Bj(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mD(t){let e=M.useContext(zc);return at(e,Bj(t)),e}function Fj(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:s,viewTransition:a}={}){let o=Lo(),l=Ai(),c=Hd(t,{relative:s});return M.useCallback(u=>{if(wj(u,e)){u.preventDefault();let d=n!==void 0?n:td(l)===td(c);o(t,{replace:d,state:i,preventScrollReset:r,relative:s,viewTransition:a})}},[l,o,c,n,i,e,t,r,s,a])}function qj(t){Un(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=M.useRef(x_(t)),n=M.useRef(!1),i=Ai(),r=M.useMemo(()=>bj(i.search,n.current?null:e.current),[i.search]),s=Lo(),a=M.useCallback((o,l)=>{const c=x_(typeof o=="function"?o(new URLSearchParams(r)):o);n.current=!0,s("?"+c,l)},[s,r]);return[r,a]}var Hj=0,$j=()=>`__${String(++Hj)}__`;function Gj(){let{router:t}=mD("useSubmit"),{basename:e}=M.useContext(zi),n=cj();return M.useCallback(async(i,r={})=>{let{action:s,method:a,encType:o,formData:l,body:c}=Ej(i,e);if(r.navigate===!1){let u=r.fetcherKey||$j();await t.fetch(u,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,flushSync:r.flushSync})}else await t.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function Kj(t,{relative:e}={}){let{basename:n}=M.useContext(zi),i=M.useContext(Bi);at(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...Hd(t||".",{relative:e})},a=Ai();if(t==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(u=>u==="")){o.delete("index"),l.filter(d=>d).forEach(d=>o.append("index",d));let u=o.toString();s.search=u?`?${u}`:""}}return(!t||t===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Mr([n,s.pathname])),td(s)}function Wj(t,{relative:e}={}){let n=M.useContext(sD);at(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=mD("useViewTransitionState"),r=Hd(t,{relative:e});if(!n.isTransitioning)return!1;let s=Hr(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Hr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Dp(r.pathname,a)!=null||Dp(r.pathname,s)!=null}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Yj=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),XS=t=>{const e=Yj(t);return e.charAt(0).toUpperCase()+e.slice(1)},pD=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),Xj=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:a,...o},l)=>M.createElement("svg",{ref:l,...Jj,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:pD("lucide",r),...!s&&!Xj(o)&&{"aria-hidden":"true"},...o},[...a.map(([c,u])=>M.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=(t,e)=>{const n=M.forwardRef(({className:i,...r},s)=>M.createElement(Zj,{ref:s,iconNode:e,className:pD(`lucide-${Qj(XS(t))}`,`lucide-${t}`,i),...r}));return n.displayName=XS(t),n};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],gD=ye("arrow-left",e9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],n9=ye("arrow-right",t9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],JS=ye("check",i9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],s9=ye("chevron-down",r9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],gh=ye("circle-alert",a9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Hb=ye("circle-check-big",o9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],c9=ye("circle-check",l9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],h9=ye("circle-x",u9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]],ZS=ye("dices",d9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],m9=ye("external-link",f9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],yD=ye("eye-off",p9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vD=ye("eye",g9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],v9=ye("facebook",y9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],_D=ye("gift",_9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],wD=ye("info",w9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],T9=ye("instagram",b9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],_i=ye("loader-circle",x9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],E_=ye("lock",E9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],eI=ye("log-out",S9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],nd=ye("mail",I9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],R9=ye("map-pin",A9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],P9=ye("menu",C9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],tI=ye("message-circle",N9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],k9=ye("minimize-2",D9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=[["path",{d:"M5 12h14",key:"1ays0h"}]],S_=ye("minus",M9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O9=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],$b=ye("phone",O9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],bD=ye("plus",V9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],U9=ye("refresh-cw",L9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],z9=ye("send",j9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B9=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],F9=ye("share-2",B9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],H9=ye("shield-alert",q9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],G9=ye("shield-check",$9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Zf=ye("shield",K9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W9=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Q9=ye("shopping-cart",W9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],X9=ye("trash-2",Y9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Z9=ye("trending-up",J9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],tz=ye("triangle-alert",ez);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],I_=ye("user",nz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],na=ye("x",iz),rz=()=>{};var nI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},sz=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],o=t[n++],l=((r&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},xD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,o=a?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,u=s>>2,d=(s&3)<<4|o>>4;let f=(o&15)<<2|c>>6,h=c&63;l||(h=64,a||(f=64)),i.push(n[u],n[d],n[f],n[h])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sz(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||o==null||c==null||d==null)throw new az;const f=s<<2|o>>4;if(i.push(f),c!==64){const h=o<<4&240|c>>2;if(i.push(h),d!==64){const p=c<<6&192|d;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class az extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oz=function(t){const e=TD(t);return xD.encodeByteArray(e,!0)},kp=function(t){return oz(t).replace(/\./g,"")},jg=function(t){try{return xD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Mp(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!lz(n)||(t[n]=Mp(t[n],e[n]));return t}function lz(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cz=()=>Gb().__FIREBASE_DEFAULTS__,uz=()=>{if(typeof process>"u"||typeof nI>"u")return;const t=nI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hz=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jg(t[1]);return e&&JSON.parse(e)},Kb=()=>{try{return rz()||cz()||uz()||hz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Wb=()=>{var t;return(t=Kb())==null?void 0:t.config},ED=t=>{var e;return(e=Kb())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Qb(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[kp(JSON.stringify(n)),kp(JSON.stringify(a)),""].join(".")}const yh={};function fz(){const t={prod:[],emulator:[]};for(const e of Object.keys(yh))yh[e]?t.emulator.push(e):t.prod.push(e);return t}function mz(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let iI=!1;function Yb(t,e){if(typeof window>"u"||typeof document>"u"||!gr(window.location.host)||yh[t]===e||yh[t]||iI)return;yh[t]=e;function n(f){return`__firebase__banner__${f}`}const i="__firebase__banner",s=fz().prod.length>0;function a(){const f=document.getElementById(i);f&&f.remove()}function o(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{iI=!0,a()},f}function u(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=mz(i),h=n("text"),p=document.getElementById(h)||document.createElement("span"),g=n("learnmore"),v=document.getElementById(g)||document.createElement("a"),y=n("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const b=f.element;o(b),u(v,g);const R=c();l(w,y),b.append(w,p,v,R),document.body.appendChild(b)}s?(p.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ID(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ae())}function zg(){var e;const t=(e=Kb())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pz(){return typeof window<"u"||AD()}function AD(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function RD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Xb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Bg(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CD(){const t=Ae();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PD(){return!zg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ND(){return!zg()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function id(){try{return typeof indexedDB=="object"}catch{return!1}}function gz(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yz="FirebaseError";class Kt extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=yz,Object.setPrototypeOf(this,Kt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yr.prototype.create)}}class yr{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?vz(s,i):"Error",o=`${this.serviceName}: ${a} (${r}).`;return new Kt(r,o,i)}}function vz(t,e){return t.replace(_z,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const _z=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function wz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ia(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(sI(s)&&sI(a)){if(!ia(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function sI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Rl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Hu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Jb(t,e){const n=new bz(t,e);return n.subscribe.bind(n)}class bz{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Tz(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Uv),r.error===void 0&&(r.error=Uv),r.complete===void 0&&(r.complete=Uv);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tz(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Uv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t){return t&&t._delegate?t._delegate:t}class jn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new dz;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Sz(e))try{this.getOrInitializeService({instanceIdentifier:za})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=za){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=za){return this.instances.has(e)}getOptions(e=za){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);i===o&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Ez(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=za){return this.component?this.component.multipleInstances?e:za:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ez(t){return t===za?void 0:t}function Sz(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xz(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=[];var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const kD={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},Iz=ge.INFO,Az={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},Rz=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=Az[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $d{constructor(e){this.name=e,this._logLevel=Iz,this._logHandler=Rz,this._userLogHandler=null,Zb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}function Cz(t){Zb.forEach(e=>{e.setLogLevel(t)})}function Pz(t,e){for(const n of Zb){let i=null;e&&e.level&&(i=kD[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,s,...a)=>{const o=a.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(i??r.logLevel)&&t({level:ge[s].toLowerCase(),message:o,args:a,type:r.name})}}}const Nz=(t,e)=>e.some(n=>t instanceof n);let aI,oI;function Dz(){return aI||(aI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kz(){return oI||(oI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MD=new WeakMap,A_=new WeakMap,OD=new WeakMap,jv=new WeakMap,eT=new WeakMap;function Mz(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Ks(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&MD.set(n,t)}).catch(()=>{}),eT.set(e,t),e}function Oz(t){if(A_.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});A_.set(t,e)}let R_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return A_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ks(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Vz(t){R_=t(R_)}function Lz(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(zv(this),e,...n);return OD.set(i,e.sort?e.sort():[e]),Ks(i)}:kz().includes(t)?function(...e){return t.apply(zv(this),e),Ks(MD.get(this))}:function(...e){return Ks(t.apply(zv(this),e))}}function Uz(t){return typeof t=="function"?Lz(t):(t instanceof IDBTransaction&&Oz(t),Nz(t,Dz())?new Proxy(t,R_):t)}function Ks(t){if(t instanceof IDBRequest)return Mz(t);if(jv.has(t))return jv.get(t);const e=Uz(t);return e!==t&&(jv.set(t,e),eT.set(e,t)),e}const zv=t=>eT.get(t);function jz(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),o=Ks(a);return i&&a.addEventListener("upgradeneeded",l=>{i(Ks(a.result),l.oldVersion,l.newVersion,Ks(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const zz=["get","getKey","getAll","getAllKeys","count"],Bz=["put","add","delete","clear"],Bv=new Map;function lI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Bv.get(e))return Bv.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=Bz.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||zz.includes(n)))return;const s=async function(a,...o){const l=this.transaction(a,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),r&&l.done]))[0]};return Bv.set(e,s),s}Vz(t=>({...t,get:(e,n,i)=>lI(e,n)||t.get(e,n,i),has:(e,n)=>!!lI(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qz(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function qz(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Op="@firebase/app",C_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new $d("@firebase/app"),Hz="@firebase/app-compat",$z="@firebase/analytics-compat",Gz="@firebase/analytics",Kz="@firebase/app-check-compat",Wz="@firebase/app-check",Qz="@firebase/auth",Yz="@firebase/auth-compat",Xz="@firebase/database",Jz="@firebase/data-connect",Zz="@firebase/database-compat",eB="@firebase/functions",tB="@firebase/functions-compat",nB="@firebase/installations",iB="@firebase/installations-compat",rB="@firebase/messaging",sB="@firebase/messaging-compat",aB="@firebase/performance",oB="@firebase/performance-compat",lB="@firebase/remote-config",cB="@firebase/remote-config-compat",uB="@firebase/storage",hB="@firebase/storage-compat",dB="@firebase/firestore",fB="@firebase/ai",mB="@firebase/firestore-compat",pB="firebase",gB="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="[DEFAULT]",yB={[Op]:"fire-core",[Hz]:"fire-core-compat",[Gz]:"fire-analytics",[$z]:"fire-analytics-compat",[Wz]:"fire-app-check",[Kz]:"fire-app-check-compat",[Qz]:"fire-auth",[Yz]:"fire-auth-compat",[Xz]:"fire-rtdb",[Jz]:"fire-data-connect",[Zz]:"fire-rtdb-compat",[eB]:"fire-fn",[tB]:"fire-fn-compat",[nB]:"fire-iid",[iB]:"fire-iid-compat",[rB]:"fire-fcm",[sB]:"fire-fcm-compat",[aB]:"fire-perf",[oB]:"fire-perf-compat",[lB]:"fire-rc",[cB]:"fire-rc-compat",[uB]:"fire-gcs",[hB]:"fire-gcs-compat",[dB]:"fire-fst",[mB]:"fire-fst-compat",[fB]:"fire-vertex","fire-js":"fire-js",[pB]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=new Map,ac=new Map,oc=new Map;function rd(t,e){try{t.container.addComponent(e)}catch(n){$r.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function VD(t,e){t.container.addOrOverwriteComponent(e)}function Li(t){const e=t.name;if(oc.has(e))return $r.debug(`There were multiple attempts to register component ${e}.`),!1;oc.set(e,t);for(const n of sa.values())rd(n,t);for(const n of ac.values())rd(n,t);return!0}function LD(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vB(t,e,n=ra){LD(t,e).clearInstance(n)}function tT(t){return t.options!==void 0}function UD(t){return tT(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function Ce(t){return t==null?!1:t.settings!==void 0}function _B(){oc.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ni=new yr("app","Firebase",wB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jD=class{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new jn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ni.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t,e){const n=jg(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const r=JSON.parse(n).exp*1e3,s=new Date().getTime();r-s<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class bB extends jD{constructor(e,n,i,r){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,a={name:i,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,a,r);else{const o=e;super(o.options,a,r)}this._serverConfig={automaticDataCollectionEnabled:s,...n},this._serverConfig.authIdToken&&cI(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&cI(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,xn(Op,C_,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){iT(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ni.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=gB;function nT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:ra,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw ni.create("bad-app-name",{appName:String(r)});if(n||(n=Wb()),!n)throw ni.create("no-options");const s=sa.get(r);if(s){if(ia(n,s.options)&&ia(i,s.config))return s;throw ni.create("duplicate-app",{appName:r})}const a=new DD(r);for(const l of oc.values())a.addComponent(l);const o=new jD(n,i,a);return sa.set(r,o),o}function TB(t,e={}){if(pz()&&!AD())throw ni.create("invalid-server-app-environment");let n,i=e||{};if(t&&(tT(t)?n=t.options:UD(t)?i=t:n=t),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),n||(n=Wb()),!n)throw ni.create("no-options");const r={...i,...n};r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=u=>[...u].reduce((d,f)=>Math.imul(31,d)+f.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw ni.create("finalization-registry-not-supported",{});const a=""+s(JSON.stringify(r)),o=ac.get(a);if(o)return o.incRefCount(i.releaseOnDeref),o;const l=new DD(a);for(const u of oc.values())l.addComponent(u);const c=new bB(n,i,a,l);return ac.set(a,c),c}function xB(t=ra){const e=sa.get(t);if(!e&&t===ra&&Wb())return nT();if(!e)throw ni.create("no-app",{appName:t});return e}function EB(){return Array.from(sa.values())}async function iT(t){let e=!1;const n=t.name;sa.has(n)?(e=!0,sa.delete(n)):ac.has(n)&&t.decRefCount()<=0&&(ac.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(i=>i.delete())),t.isDeleted=!0)}function xn(t,e,n){let i=yB[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=e.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$r.warn(a.join(" "));return}Li(new jn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function zD(t,e){if(t!==null&&typeof t!="function")throw ni.create("invalid-log-argument");Pz(t,e)}function BD(t){Cz(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB="firebase-heartbeat-database",IB=1,sd="firebase-heartbeat-store";let Fv=null;function FD(){return Fv||(Fv=jz(SB,IB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sd)}catch(n){console.warn(n)}}}}).catch(t=>{throw ni.create("idb-open",{originalErrorMessage:t.message})})),Fv}async function AB(t){try{const n=(await FD()).transaction(sd),i=await n.objectStore(sd).get(qD(t));return await n.done,i}catch(e){if(e instanceof Kt)$r.warn(e.message);else{const n=ni.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$r.warn(n.message)}}}async function uI(t,e){try{const i=(await FD()).transaction(sd,"readwrite");await i.objectStore(sd).put(e,qD(t)),await i.done}catch(n){if(n instanceof Kt)$r.warn(n.message);else{const i=ni.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$r.warn(i.message)}}}function qD(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB=1024,CB=30;class PB{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DB(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=hI();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>CB){const a=kB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){$r.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=hI(),{heartbeatsToSend:i,unsentEntries:r}=NB(this._heartbeatsCache.heartbeats),s=kp(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return $r.warn(n),""}}}function hI(){return new Date().toISOString().substring(0,10)}function NB(t,e=RB){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),dI(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),dI(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class DB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return id()?gz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AB(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return uI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return uI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function dI(t){return kp(JSON.stringify({version:2,heartbeats:t})).length}function kB(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MB(t){Li(new jn("platform-logger",e=>new Fz(e),"PRIVATE")),Li(new jn("heartbeat",e=>new PB(e),"PRIVATE")),xn(Op,C_,t),xn(Op,C_,"esm2020"),xn("fire-js","")}MB("");const OB=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Kt,SDK_VERSION:Ri,_DEFAULT_ENTRY_NAME:ra,_addComponent:rd,_addOrOverwriteComponent:VD,_apps:sa,_clearComponents:_B,_components:oc,_getProvider:LD,_isFirebaseApp:tT,_isFirebaseServerApp:Ce,_isFirebaseServerAppSettings:UD,_registerComponent:Li,_removeServiceInstance:vB,_serverApps:ac,deleteApp:iT,getApp:xB,getApps:EB,initializeApp:nT,initializeServerApp:TB,onLog:zD,registerVersion:xn,setLogLevel:BD},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(e,n){this._delegate=e,this.firebase=n,rd(e,new jn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),iT(this._delegate)))}_getService(e,n=ra){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())==null?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=ra){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){rd(this._delegate,e)}_addOrOverwriteComponent(e){VD(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LB={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},fI=new yr("app-compat","Firebase",LB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UB(t){const e={},n={__esModule:!0,initializeApp:s,app:r,registerVersion:xn,setLogLevel:BD,onLog:zD,apps:null,SDK_VERSION:Ri,INTERNAL:{registerComponent:o,removeApp:i,useAsService:l,modularAPIs:OB}};n.default=n,Object.defineProperty(n,"apps",{get:a});function i(c){delete e[c]}function r(c){if(c=c||ra,!rI(e,c))throw fI.create("no-app",{appName:c});return e[c]}r.App=t;function s(c,u={}){const d=nT(c,u);if(rI(e,d.name))return e[d.name];const f=new t(d,n);return e[d.name]=f,f}function a(){return Object.keys(e).map(c=>e[c])}function o(c){const u=c.name,d=u.replace("-compat","");if(Li(c)&&c.type==="PUBLIC"){const f=(h=r())=>{if(typeof h[d]!="function")throw fI.create("invalid-app-argument",{appName:u});return h[d]()};c.serviceProps!==void 0&&Mp(f,c.serviceProps),n[d]=f,t.prototype[d]=function(...h){return this._getService.bind(this,u).apply(this,c.multipleInstances?h:[])}}return c.type==="PUBLIC"?n[d]:null}function l(c,u){return u==="serverAuth"?null:u}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(){const t=UB(VB);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:HD,extendNamespace:e,createSubscribe:Jb,ErrorFactory:yr,deepExtend:Mp};function e(n){Mp(t,n)}return t}const jB=HD();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=new $d("@firebase/app-compat"),zB="@firebase/app-compat",BB="0.5.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FB(t){xn(zB,BB,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=Gb();if(t.firebase!==void 0){mI.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&mI.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const $t=jB;FB();var qB="firebase",HB="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$t.registerVersion(qB,HB,"app-compat");const Ru={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},el={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $B(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function $D(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GB=$B,KB=$D,GD=new yr("auth","Firebase",$D());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp=new $d("@firebase/auth");function WB(t,...e){Vp.logLevel<=ge.WARN&&Vp.warn(`Auth (${Ri}): ${t}`,...e)}function Om(t,...e){Vp.logLevel<=ge.ERROR&&Vp.error(`Auth (${Ri}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t,...e){throw sT(t,...e)}function Mt(t,...e){return sT(t,...e)}function rT(t,e,n){const i={...KB(),[e]:n};return new yr("auth","Firebase",i).create(e,{appName:t.name})}function Wt(t){return rT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fc(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&an(t,"argument-error"),rT(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function sT(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return GD.create(t,...e)}function W(t,e,...n){if(!t)throw sT(e,...n)}function er(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Om(e),new Error(e)}function Ui(t,e){t||er(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function aT(){return pI()==="http:"||pI()==="https:"}function pI(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aT()||Xb()||"connection"in navigator)?navigator.onLine:!0}function YB(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gd=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ui(n>e,"Short delay should be less than long delay!"),this.isMobile=ID()||Bg()}get(){return QB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t,e){Ui(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KD=class{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZB=new Gd(3e4,6e4);function yt(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function vt(t,e,n,i,r={}){return WD(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const o=va({key:t.config.apiKey,...a}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return RD()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&gr(t.emulatorConfig.host)&&(c.credentials="include"),KD.fetch()(await QD(t,t.config.apiHost,n,o),c)})}async function WD(t,e,n){t._canInitEmulator=!1;const i={...XB,...e};try{const r=new tF(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw $u(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw $u(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw $u(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw $u(t,"user-disabled",a);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw rT(t,u,c);an(t,u)}}catch(r){if(r instanceof Kt)throw r;an(t,"network-request-failed",{message:String(r)})}}async function Jr(t,e,n,i,r={}){const s=await vt(t,e,n,i,r);return"mfaPendingCredential"in s&&an(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function QD(t,e,n,i){const r=`${e}${n}?${i}`,s=t,a=s.config.emulator?oT(t.config,r):`${t.config.apiScheme}://${r}`;return JB.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function eF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}let tF=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Mt(this.auth,"network-request-failed")),ZB.get())})}};function $u(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Mt(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(t){return t!==void 0&&t.getResponse!==void 0}function yI(t){return t!==void 0&&t.enterprise!==void 0}class YD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return eF(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nF(t){return(await vt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function XD(t,e){return vt(t,"GET","/v2/recaptchaConfig",yt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iF(t,e){return vt(t,"POST","/v1/accounts:delete",e)}async function rF(t,e){return vt(t,"POST","/v1/accounts:update",e)}async function Lp(t,e){return vt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sF(t,e=!1){const n=ne(t),i=await n.getIdToken(e),r=Fg(i);W(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:vh(qv(r.auth_time)),issuedAtTime:vh(qv(r.iat)),expirationTime:vh(qv(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function qv(t){return Number(t)*1e3}function Fg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Om("JWT malformed, contained fewer than 3 sections"),null;try{const r=jg(n);return r?JSON.parse(r):(Om("Failed to decode base64 JWT payload"),null)}catch(r){return Om("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function vI(t){const e=Fg(t);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gr(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Kt&&aF(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function aF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oF=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P_=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vh(this.lastLoginAt),this.creationTime=vh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function od(t){var d;const e=t.auth,n=await t.getIdToken(),i=await Gr(t,Lp(e,{idToken:n}));W(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const s=(d=r.providerUserInfo)!=null&&d.length?JD(r.providerUserInfo):[],a=cF(t.providerData,s),o=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),c=o?l:!1,u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new P_(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(t,u)}async function lF(t){const e=ne(t);await od(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cF(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function JD(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uF(t,e){const n=await WD(t,{},async()=>{const i=va({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=await QD(t,r,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:i};return t.emulatorConfig&&gr(t.emulatorConfig.host)&&(l.credentials="include"),KD.fetch()(a,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hF(t,e){return vt(t,"POST","/v2/accounts:revokeToken",yt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hv=class N_{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){W(e.length!==0,"internal-error");const n=vI(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await uF(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new N_;return i&&(W(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(W(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(W(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new N_,this.toJSON())}_performRefresh(){return er("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(t,e){W(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}let Cl=class Gu{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new oF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new P_(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Gr(this,this.stsTokenManager.getToken(this.auth,e));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sF(this,e)}reload(){return lF(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gu({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await od(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ce(this.auth.app))return Promise.reject(Wt(this.auth));const e=await this.getIdToken();return await Gr(this,iF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:h,providerData:p,stsTokenManager:g}=n;W(d&&g,e,"internal-error");const v=Hv.fromJSON(this.name,g);W(typeof d=="string",e,"internal-error"),ps(i,e.name),ps(r,e.name),W(typeof f=="boolean",e,"internal-error"),W(typeof h=="boolean",e,"internal-error"),ps(s,e.name),ps(a,e.name),ps(o,e.name),ps(l,e.name),ps(c,e.name),ps(u,e.name);const y=new Gu({uid:d,auth:e,email:r,emailVerified:f,displayName:i,isAnonymous:h,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:v,createdAt:c,lastLoginAt:u});return p&&Array.isArray(p)&&(y.providerData=p.map(w=>({...w}))),l&&(y._redirectEventId=l),y}static async _fromIdTokenResponse(e,n,i=!1){const r=new Hv;r.updateFromServerResponse(n);const s=new Gu({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await od(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];W(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?JD(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),o=new Hv;o.updateFromIdToken(i);const l=new Gu({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new P_(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=new Map;function Yn(t){Ui(t instanceof Function,"Expected a class definition");let e=_I.get(t);return e?(Ui(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_I.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZD=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}};ZD.type="NONE";const lc=ZD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(t,e,n){return`firebase:${t}:${e}:${n}`}let wI=class Vm{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=oo(this.userKey,r.apiKey,s),this.fullPersistenceKey=oo("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Lp(this.auth,{idToken:e}).catch(()=>{});return n?Cl._fromGetAccountInfoResponse(this.auth,n,e):null}return Cl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Vm(Yn(lc),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||Yn(lc);const a=oo(i,e.config.apiKey,e.name);let o=null;for(const c of n)try{const u=await c._get(a);if(u){let d;if(typeof u=="string"){const f=await Lp(e,{idToken:u}).catch(()=>{});if(!f)break;d=await Cl._fromGetAccountInfoResponse(e,f,u)}else d=Cl._fromJSON(e,u);c!==s&&(o=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Vm(s,e,i):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new Vm(s,e,i))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ik(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ek(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rk(e))return"Blackberry";if(sk(e))return"Webos";if(tk(e))return"Safari";if((e.includes("chrome/")||nk(e))&&!e.includes("edge/"))return"Chrome";if(Kd(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function ek(t=Ae()){return/firefox\//i.test(t)}function tk(t=Ae()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nk(t=Ae()){return/crios\//i.test(t)}function ik(t=Ae()){return/iemobile/i.test(t)}function Kd(t=Ae()){return/android/i.test(t)}function rk(t=Ae()){return/blackberry/i.test(t)}function sk(t=Ae()){return/webos/i.test(t)}function Wd(t=Ae()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dF(t=Ae()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function fF(t=Ae()){var e;return Wd(t)&&!!((e=window.navigator)!=null&&e.standalone)}function mF(){return CD()&&document.documentMode===10}function ak(t=Ae()){return Wd(t)||Kd(t)||sk(t)||rk(t)||/windows phone/i.test(t)||ik(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(t,e=[]){let n;switch(t){case"Browser":n=bI(Ae());break;case"Worker":n=`${bI(Ae())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ri}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pF=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gF(t,e={}){return vt(t,"GET","/v2/passwordPolicy",yt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF=6;let vF=class{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??yF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _F=class{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new TI(this),this.idTokenSubscription=new TI(this),this.beforeStateQueue=new pF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yn(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await wI.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Lp(this,{idToken:e}),i=await Cl._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Ce(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await od(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ce(this.app))return Promise.reject(Wt(this));const n=e?ne(e):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ce(this.app)?Promise.reject(Wt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ce(this.app)?Promise.reject(Wt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gF(this),n=new vF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yr("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await hF(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yn(e)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=await wI.create(this,[Yn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ok(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(Ce(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&WB(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}};function ut(t){return ne(t)}let TI=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Jb(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wF(t){Qd=t}function lT(t){return Qd.loadJS(t)}function bF(){return Qd.recaptchaV2Script}function TF(){return Qd.recaptchaEnterpriseScript}function xF(){return Qd.gapiScript}function lk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF=500,SF=6e4,em=1e12;class IF{constructor(e){this.auth=e,this.counter=em,this._widgets=new Map}render(e,n){const i=this.counter;return this._widgets.set(i,new CF(e,this.auth.name,n||{})),this.counter++,i}reset(e){var i;const n=e||em;(i=this._widgets.get(n))==null||i.delete(),this._widgets.delete(n)}getResponse(e){var i;const n=e||em;return((i=this._widgets.get(n))==null?void 0:i.getResponse())||""}async execute(e){var i;const n=e||em;return(i=this._widgets.get(n))==null||i.execute(),""}}class AF{constructor(){this.enterprise=new RF}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class RF{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class CF{constructor(e,n,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;W(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=PF(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},SF)},EF))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function PF(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const NF="recaptcha-enterprise",_h="NO_RECAPTCHA";class ck{constructor(e){this.type=NF,this.auth=ut(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{XD(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new YD(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function r(s,a,o){const l=window.grecaptcha;yI(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{a(c)}).catch(()=>{a(_h)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new AF().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{i(this.auth).then(o=>{if(!n&&yI(window.grecaptcha))r(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=TF();l.length!==0&&(l+=o),lT(l).then(()=>{r(o,s,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function Cu(t,e,n,i=!1,r=!1){const s=new ck(t);let a;if(r)a=_h;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,c=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return i?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ws(t,e,n,i,r){var s,a;if(r==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Cu(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Cu(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(o)});else if(r==="PHONE_PROVIDER")if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("PHONE_PROVIDER")){const o=await Cu(t,e,n);return i(t,o).catch(async l=>{var c;if(((c=t._getRecaptchaConfig())==null?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const u=await Cu(t,e,n,!1,!0);return i(t,u)}return Promise.reject(l)})}else{const o=await Cu(t,e,n,!1,!0);return i(t,o)}else return Promise.reject(r+" provider is not supported.")}async function DF(t){const e=ut(t),n=await XD(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new YD(n);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new ck(e).verify()}function kF(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Yn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function MF(t,e,n){const i=ut(t);W(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),s=uk(e),{host:a,port:o}=OF(e),l=o===null?"":`:${o}`,c={url:`${s}//${a}${l}/`},u=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){W(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),W(ia(c,i.config.emulator)&&ia(u,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=u,i.settings.appVerificationDisabledForTesting=!0,gr(a)?(Qb(`${s}//${a}${l}`),Yb("Auth",!0)):r||VF()}function uk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function OF(t){const e=uk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:xI(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:xI(a)}}}function xI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function VF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return er("not implemented")}_getIdTokenResponse(e){return er("not implemented")}_linkToIdToken(e,n){return er("not implemented")}_getReauthenticationResolver(e){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hk(t,e){return vt(t,"POST","/v1/accounts:resetPassword",yt(t,e))}async function LF(t,e){return vt(t,"POST","/v1/accounts:update",e)}async function UF(t,e){return vt(t,"POST","/v1/accounts:signUp",e)}async function jF(t,e){return vt(t,"POST","/v1/accounts:update",yt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zF(t,e){return Jr(t,"POST","/v1/accounts:signInWithPassword",yt(t,e))}async function qg(t,e){return vt(t,"POST","/v1/accounts:sendOobCode",yt(t,e))}async function BF(t,e){return qg(t,e)}async function FF(t,e){return qg(t,e)}async function qF(t,e){return qg(t,e)}async function HF(t,e){return qg(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $F(t,e){return Jr(t,"POST","/v1/accounts:signInWithEmailLink",yt(t,e))}async function GF(t,e){return Jr(t,"POST","/v1/accounts:signInWithEmailLink",yt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld extends qc{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new ld(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new ld(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ws(e,n,"signInWithPassword",zF,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return $F(e,{email:this._email,oobCode:this._password});default:an(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ws(e,i,"signUpPassword",UF,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return GF(e,{idToken:n,email:this._email,oobCode:this._password});default:an(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Or(t,e){return Jr(t,"POST","/v1/accounts:signInWithIdp",yt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF="http://localhost";class hr extends qc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):an("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new hr(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Or(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Or(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Or(e,n)}buildRequest(){const e={requestUri:KF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=va(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(t,e){return vt(t,"POST","/v1/accounts:sendVerificationCode",yt(t,e))}async function WF(t,e){return Jr(t,"POST","/v1/accounts:signInWithPhoneNumber",yt(t,e))}async function QF(t,e){const n=await Jr(t,"POST","/v1/accounts:signInWithPhoneNumber",yt(t,e));if(n.temporaryProof)throw $u(t,"account-exists-with-different-credential",n);return n}const YF={USER_NOT_FOUND:"user-not-found"};async function XF(t,e){const n={...e,operation:"REAUTH"};return Jr(t,"POST","/v1/accounts:signInWithPhoneNumber",yt(t,n),YF)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends qc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new lo({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new lo({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return WF(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return QF(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return XF(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s}=e;return!i&&!n&&!r&&!s?null:new lo({verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ZF(t){const e=Rl(Hu(t)).link,n=e?Rl(Hu(e)).deep_link_id:null,i=Rl(Hu(t)).deep_link_id;return(i?Rl(Hu(i)).link:null)||i||n||e||t}class Hg{constructor(e){const n=Rl(Hu(e)),i=n.apiKey??null,r=n.oobCode??null,s=JF(n.mode??null);W(i&&r&&s,"argument-error"),this.apiKey=i,this.operation=s,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=ZF(e);try{return new Hg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){this.providerId=_a.PROVIDER_ID}static credential(e,n){return ld._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Hg.parseLink(n);return W(i,"argument-error"),ld._fromEmailAndCode(e,i.code,i.tenantId)}}_a.PROVIDER_ID="password";_a.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_a.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc extends Zr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Fl extends Hc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return W("providerId"in n&&"signInMethod"in n,"argument-error"),hr._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return W(e.idToken||e.accessToken,"argument-error"),hr._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Fl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Fl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:s,nonce:a,providerId:o}=e;if(!i&&!r&&!n&&!s||!o)return null;try{return new Fl(o)._credential({idToken:n,accessToken:i,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends Hc{constructor(){super("facebook.com")}static credential(e){return hr._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gi.credential(e.oauthAccessToken)}catch{return null}}}Gi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Hc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hr._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ki.credential(n,i)}catch{return null}}}Ki.GOOGLE_SIGN_IN_METHOD="google.com";Ki.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends Hc{constructor(){super("github.com")}static credential(e){return hr._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.GITHUB_SIGN_IN_METHOD="github.com";Wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e8="http://localhost";class cc extends qc{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Or(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Or(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Or(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,pendingToken:s}=n;return!i||!r||!s||i!==r?null:new cc(i,s)}static _create(e,n){return new cc(e,n)}buildRequest(){return{requestUri:e8,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8="saml.";class Up extends Zr{constructor(e){W(e.startsWith(t8),"argument-error"),super(e)}static credentialFromResult(e){return Up.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Up.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=cc.fromJSON(e);return W(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:i}=e;if(!n||!i)return null;try{return cc._create(i,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Hc{constructor(){super("twitter.com")}static credential(e,n){return hr._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Qi.credential(n,i)}catch{return null}}}Qi.TWITTER_SIGN_IN_METHOD="twitter.com";Qi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(t,e){return Jr(t,"POST","/v1/accounts:signUp",yt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Cl._fromIdTokenResponse(e,i,r),a=SI(i);return new Ii({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=SI(i);return new Ii({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function SI(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n8(t){var r;if(Ce(t.app))return Promise.reject(Wt(t));const e=ut(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new Ii({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await dk(e,{returnSecureToken:!0}),i=await Ii._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp extends Kt{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,jp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new jp(e,n,i,r)}}function fk(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?jp._fromErrorAndOperation(t,s,e,i):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i8(t,e){const n=ne(t);await $g(!0,n,e);const{providerUserInfo:i}=await rF(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),r=mk(i||[]);return n.providerData=n.providerData.filter(s=>r.has(s.providerId)),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function cT(t,e,n=!1){const i=await Gr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ii._forOperation(t,"link",i)}async function $g(t,e,n){await od(e);const i=mk(e.providerData),r=t===!1?"provider-already-linked":"no-such-provider";W(i.has(n)===t,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pk(t,e,n=!1){const{auth:i}=t;if(Ce(i.app))return Promise.reject(Wt(i));const r="reauthenticate";try{const s=await Gr(t,fk(i,r,e,t),n);W(s.idToken,i,"internal-error");const a=Fg(s.idToken);W(a,i,"internal-error");const{sub:o}=a;return W(t.uid===o,i,"user-mismatch"),Ii._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&an(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk(t,e,n=!1){if(Ce(t.app))return Promise.reject(Wt(t));const i="signIn",r=await fk(t,i,e),s=await Ii._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function Gg(t,e){return gk(ut(t),e)}async function yk(t,e){const n=ne(t);return await $g(!1,n,e.providerId),cT(n,e)}async function vk(t,e){return pk(ne(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r8(t,e){return Jr(t,"POST","/v1/accounts:signInWithCustomToken",yt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s8(t,e){if(Ce(t.app))return Promise.reject(Wt(t));const n=ut(t),i=await r8(n,{token:e,returnSecureToken:!0}),r=await Ii._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?uT._fromServerResponse(e,n):"totpInfo"in n?hT._fromServerResponse(e,n):an(e,"internal-error")}}class uT extends Yd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new uT(n)}}class hT extends Yd{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new hT(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t,e,n){var i;W(((i=n.url)==null?void 0:i.length)>0,t,"invalid-continue-uri"),W(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),W(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(W(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(W(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dT(t){const e=ut(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function a8(t,e,n){const i=ut(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Kg(i,r,n),await Ws(i,r,"getOobCode",FF,"EMAIL_PASSWORD_PROVIDER")}async function o8(t,e,n){await hk(ne(t),{oobCode:e,newPassword:n}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&dT(t),i})}async function l8(t,e){await jF(ne(t),{oobCode:e})}async function _k(t,e){const n=ne(t),i=await hk(n,{oobCode:e}),r=i.requestType;switch(W(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":W(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":W(i.mfaInfo,n,"internal-error");default:W(i.email,n,"internal-error")}let s=null;return i.mfaInfo&&(s=Yd._fromServerResponse(ut(n),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:s},operation:r}}async function c8(t,e){const{data:n}=await _k(ne(t),e);return n.email}async function u8(t,e,n){if(Ce(t.app))return Promise.reject(Wt(t));const i=ut(t),a=await Ws(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dk,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&dT(t),l}),o=await Ii._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(o.user),o}function h8(t,e,n){return Ce(t.app)?Promise.reject(Wt(t)):Gg(ne(t),_a.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&dT(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d8(t,e,n){const i=ut(t),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(a,o){W(o.handleCodeInApp,i,"argument-error"),o&&Kg(i,a,o)}s(r,n),await Ws(i,r,"getOobCode",qF,"EMAIL_PASSWORD_PROVIDER")}function f8(t,e){const n=Hg.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function m8(t,e,n){if(Ce(t.app))return Promise.reject(Wt(t));const i=ne(t),r=_a.credentialWithLink(e,n||ad());return W(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Gg(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p8(t,e){return vt(t,"POST","/v1/accounts:createAuthUri",yt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g8(t,e){const n=aT()?ad():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:r}=await p8(ne(t),i);return r||[]}async function y8(t,e){const n=ne(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Kg(n.auth,r,e);const{email:s}=await BF(n.auth,r);s!==t.email&&await t.reload()}async function v8(t,e,n){const i=ne(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Kg(i.auth,s,n);const{email:a}=await HF(i.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _8(t,e){return vt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w8(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=ne(t),s={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Gr(i,_8(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find(({providerId:l})=>l==="password");o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function b8(t,e){const n=ne(t);return Ce(n.auth.app)?Promise.reject(Wt(n.auth)):wk(n,e,null)}function T8(t,e){return wk(ne(t),null,e)}async function wk(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const a=await Gr(t,LF(i,s));await t._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x8(t){var r,s;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},i=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const a=(s=(r=Fg(t.idToken))==null?void 0:r.firebase)==null?void 0:s.sign_in_provider;if(a){const o=a!=="anonymous"&&a!=="custom"?a:null;return new ql(i,o)}}if(!e)return null;switch(e){case"facebook.com":return new E8(i,n);case"github.com":return new S8(i,n);case"google.com":return new I8(i,n);case"twitter.com":return new A8(i,n,t.screenName||null);case"custom":case"anonymous":return new ql(i,null);default:return new ql(i,e,n)}}class ql{constructor(e,n,i={}){this.isNewUser=e,this.providerId=n,this.profile=i}}class bk extends ql{constructor(e,n,i,r){super(e,n,i),this.username=r}}class E8 extends ql{constructor(e,n){super(e,"facebook.com",n)}}class S8 extends bk{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class I8 extends ql{constructor(e,n){super(e,"google.com",n)}}class A8 extends bk{constructor(e,n,i){super(e,"twitter.com",n,i)}}function R8(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:x8(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n,i){this.type=e,this.credential=n,this.user=i}static _fromIdtoken(e,n){return new Ya("enroll",e,n)}static _fromMfaPendingCredential(e){return new Ya("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,i;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return Ya._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((i=e.multiFactorSession)!=null&&i.idToken)return Ya._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n,i){this.session=e,this.hints=n,this.signInResolver=i}static _fromError(e,n){const i=ut(e),r=n.customData._serverResponse,s=(r.mfaInfo||[]).map(o=>Yd._fromServerResponse(i,o));W(r.mfaPendingCredential,i,"internal-error");const a=Ya._fromMfaPendingCredential(r.mfaPendingCredential);return new fT(a,s,async o=>{const l=await o._process(i,a);delete r.mfaInfo,delete r.mfaPendingCredential;const c={...r,idToken:l.idToken,refreshToken:l.refreshToken};switch(n.operationType){case"signIn":const u=await Ii._fromIdTokenResponse(i,n.operationType,c);return await i._updateCurrentUser(u.user),u;case"reauthenticate":return W(n.user,i,"internal-error"),Ii._forOperation(n.user,n.operationType,c);default:an(i,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function C8(t,e){var r;const n=ne(t),i=e;return W(e.customData.operationType,n,"argument-error"),W((r=i.customData._serverResponse)==null?void 0:r.mfaPendingCredential,n,"argument-error"),fT._fromError(n,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t,e){return vt(t,"POST","/v2/accounts/mfaEnrollment:start",yt(t,e))}function P8(t,e){return vt(t,"POST","/v2/accounts/mfaEnrollment:finalize",yt(t,e))}function N8(t,e){return vt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",yt(t,e))}class mT{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(i=>Yd._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new mT(e)}async getSession(){return Ya._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const i=e,r=await this.getSession(),s=await Gr(this.user,i._process(this.user.auth,r,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const r=await Gr(this.user,N8(this.user.auth,{idToken:i,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(r),await this.user.reload()}catch(r){throw r}}}const $v=new WeakMap;function D8(t){const e=ne(t);return $v.has(e)||$v.set(e,mT._fromUser(e)),$v.get(e)}const zp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zp,"1"),this.storage.removeItem(zp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8=1e3,M8=10;class xk extends Tk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ak(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);mF()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,M8):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},k8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}xk.type="LOCAL";const pT=xk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek extends Tk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ek.type="SESSION";const vo=Ek;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Wg(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const o=Array.from(a).map(async c=>c(n.origin,s)),l=await O8(o);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const c=Xd("",20);r.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(){return window}function L8(t){It().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(){return typeof It().WorkerGlobalScope<"u"&&typeof It().importScripts=="function"}async function U8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function j8(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function z8(){return gT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk="firebaseLocalStorageDb",B8=1,Bp="firebaseLocalStorage",Ik="fbase_key";class Jd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qg(t,e){return t.transaction([Bp],e?"readwrite":"readonly").objectStore(Bp)}function F8(){const t=indexedDB.deleteDatabase(Sk);return new Jd(t).toPromise()}function D_(){const t=indexedDB.open(Sk,B8);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Bp,{keyPath:Ik})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Bp)?e(i):(i.close(),await F8(),e(await D_()))})})}async function AI(t,e,n){const i=Qg(t,!0).put({[Ik]:e,value:n});return new Jd(i).toPromise()}async function q8(t,e){const n=Qg(t,!1).get(e),i=await new Jd(n).toPromise();return i===void 0?null:i.value}function RI(t,e){const n=Qg(t,!0).delete(e);return new Jd(n).toPromise()}const H8=800,$8=3;class Ak{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await D_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>$8)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wg._getInstance(z8()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await U8(),!this.activeServiceWorker)return;this.sender=new V8(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||j8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await D_();return await AI(e,zp,"1"),await RI(e,zp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>AI(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>q8(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>RI(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Qg(r,!1).getAll();return new Jd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),H8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ak.type="LOCAL";const cd=Ak;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t,e){return vt(t,"POST","/v2/accounts/mfaSignIn:start",yt(t,e))}function G8(t,e){return vt(t,"POST","/v2/accounts/mfaSignIn:finalize",yt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=lk("rcb"),K8=new Gd(3e4,6e4);class W8{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=It().grecaptcha)!=null&&e.render)}load(e,n=""){return W(Q8(n),e,"argument-error"),this.shouldResolveImmediately(n)&&gI(It().grecaptcha)?Promise.resolve(It().grecaptcha):new Promise((i,r)=>{const s=It().setTimeout(()=>{r(Mt(e,"network-request-failed"))},K8.get());It()[Gv]=()=>{It().clearTimeout(s),delete It()[Gv];const o=It().grecaptcha;if(!o||!gI(o)){r(Mt(e,"internal-error"));return}const l=o.render;o.render=(c,u)=>{const d=l(c,u);return this.counter++,d},this.hostLanguage=n,i(o)};const a=`${bF()}?${va({onload:Gv,render:"explicit",hl:n})}`;lT(a).catch(()=>{clearTimeout(s),r(Mt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=It().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Q8(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class Y8{async load(e){return new IF(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh="recaptcha",X8={theme:"light",type:"image"};let J8=class{constructor(e,n,i={...X8}){this.parameters=i,this.type=wh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ut(e),this.isInvisible=this.parameters.size==="invisible",W(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof n=="string"?document.getElementById(n):n;W(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Y8:new W8,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),i=n.getResponse(e);return i||new Promise(r=>{const s=a=>{a&&(this.tokenChangeListeners.delete(s),r(a))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){W(!this.parameters.sitekey,this.auth,"argument-error"),W(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),W(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(i=>i(n)),typeof e=="function")e(n);else if(typeof e=="string"){const i=It()[e];typeof i=="function"&&i(n)}}}assertNotDestroyed(){W(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){W(aT()&&!gT(),this.auth,"internal-error"),await Z8(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await nF(this.auth);W(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return W(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function Z8(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=lo._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function e7(t,e,n){if(Ce(t.app))return Promise.reject(Wt(t));const i=ut(t),r=await Yg(i,e,ne(n));return new yT(r,s=>Gg(i,s))}async function t7(t,e,n){const i=ne(t);await $g(!1,i,"phone");const r=await Yg(i.auth,e,ne(n));return new yT(r,s=>yk(i,s))}async function n7(t,e,n){const i=ne(t);if(Ce(i.auth.app))return Promise.reject(Wt(i.auth));const r=await Yg(i.auth,e,ne(n));return new yT(r,s=>vk(i,s))}async function Yg(t,e,n){var i;if(!t._getRecaptchaConfig())try{await DF(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const s=r.session;if("phoneNumber"in r){W(s.type==="enroll",t,"internal-error");const a={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Ws(t,a,"mfaSmsEnrollment",async(u,d)=>{if(d.phoneEnrollmentInfo.captchaResponse===_h){W((n==null?void 0:n.type)===wh,u,"argument-error");const f=await Kv(u,d,n);return II(u,f)}return II(u,d)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).phoneSessionInfo.sessionInfo}else{W(s.type==="signin",t,"internal-error");const a=((i=r.multiFactorHint)==null?void 0:i.uid)||r.multiFactorUid;W(a,t,"missing-multi-factor-info");const o={mfaPendingCredential:s.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Ws(t,o,"mfaSmsSignIn",async(d,f)=>{if(f.phoneSignInInfo.captchaResponse===_h){W((n==null?void 0:n.type)===wh,d,"argument-error");const h=await Kv(d,f,n);return CI(d,h)}return CI(d,f)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Ws(t,s,"sendVerificationCode",async(c,u)=>{if(u.captchaResponse===_h){W((n==null?void 0:n.type)===wh,c,"argument-error");const d=await Kv(c,u,n);return EI(c,d)}return EI(c,u)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{n==null||n._reset()}}async function i7(t,e){const n=ne(t);if(Ce(n.auth.app))return Promise.reject(Wt(n.auth));await cT(n,e)}async function Kv(t,e,n){W(n.type===wh,t,"argument-error");const i=await n.verify();W(typeof i=="string",t,"argument-error");const r={...e};if("phoneEnrollmentInfo"in r){const s=r.phoneEnrollmentInfo.phoneNumber,a=r.phoneEnrollmentInfo.captchaResponse,o=r.phoneEnrollmentInfo.clientType,l=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:i,captchaResponse:a,clientType:o,recaptchaVersion:l}}),r}else if("phoneSignInInfo"in r){const s=r.phoneSignInInfo.captchaResponse,a=r.phoneSignInInfo.clientType,o=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:s,clientType:a,recaptchaVersion:o}}),r}else return Object.assign(r,{recaptchaToken:i}),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _o=class Lm{constructor(e){this.providerId=Lm.PROVIDER_ID,this.auth=ut(e)}verifyPhoneNumber(e,n){return Yg(this.auth,e,ne(n))}static credential(e,n){return lo._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Lm.credentialFromTaggedObject(n)}static credentialFromError(e){return Lm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?lo._fromTokenResponse(n,i):null}};_o.PROVIDER_ID="phone";_o.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(t,e){return e?Yn(e):(W(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT extends qc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Or(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Or(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Or(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function r7(t){return gk(t.auth,new vT(t),t.bypassAuthState)}function s7(t){const{auth:e,user:n}=t;return W(n,e,"internal-error"),pk(n,new vT(t),t.bypassAuthState)}async function a7(t){const{auth:e,user:n}=t;return W(n,e,"internal-error"),cT(n,new vT(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return r7;case"linkViaPopup":case"linkViaRedirect":return a7;case"reauthViaPopup":case"reauthViaRedirect":return s7;default:an(this.auth,"internal-error")}}resolve(e){Ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o7=new Gd(2e3,1e4);async function l7(t,e,n){if(Ce(t.app))return Promise.reject(Mt(t,"operation-not-supported-in-this-environment"));const i=ut(t);Fc(t,e,Zr);const r=Uo(i,n);return new Cr(i,"signInViaPopup",e,r).executeNotNull()}async function c7(t,e,n){const i=ne(t);if(Ce(i.auth.app))return Promise.reject(Mt(i.auth,"operation-not-supported-in-this-environment"));Fc(i.auth,e,Zr);const r=Uo(i.auth,n);return new Cr(i.auth,"reauthViaPopup",e,r,i).executeNotNull()}async function u7(t,e,n){const i=ne(t);Fc(i.auth,e,Zr);const r=Uo(i.auth,n);return new Cr(i.auth,"linkViaPopup",e,r,i).executeNotNull()}class Cr extends Rk{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Cr.currentPopupAction&&Cr.currentPopupAction.cancel(),Cr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return W(e,this.auth,"internal-error"),e}async onExecution(){Ui(this.filter.length===1,"Popup operations only handle one event");const e=Xd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Mt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Mt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Cr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,o7.get())};e()}}Cr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7="pendingRedirect",bh=new Map;class d7 extends Rk{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=bh.get(this.auth._key());if(!e){try{const i=await f7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}bh.set(this.auth._key(),e)}return this.bypassAuthState||bh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function f7(t,e){const n=Pk(e),i=Ck(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}async function _T(t,e){return Ck(t)._set(Pk(e),"true")}function m7(){bh.clear()}function wT(t,e){bh.set(t._key(),e)}function Ck(t){return Yn(t._redirectPersistence)}function Pk(t){return oo(h7,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p7(t,e,n){return g7(t,e,n)}async function g7(t,e,n){if(Ce(t.app))return Promise.reject(Wt(t));const i=ut(t);Fc(t,e,Zr),await i._initializationPromise;const r=Uo(i,n);return await _T(r,i),r._openRedirect(i,e,"signInViaRedirect")}function y7(t,e,n){return v7(t,e,n)}async function v7(t,e,n){const i=ne(t);if(Fc(i.auth,e,Zr),Ce(i.auth.app))return Promise.reject(Wt(i.auth));await i.auth._initializationPromise;const r=Uo(i.auth,n);await _T(r,i.auth);const s=await Nk(i);return r._openRedirect(i.auth,e,"reauthViaRedirect",s)}function _7(t,e,n){return w7(t,e,n)}async function w7(t,e,n){const i=ne(t);Fc(i.auth,e,Zr),await i.auth._initializationPromise;const r=Uo(i.auth,n);await $g(!1,i,e.providerId),await _T(r,i.auth);const s=await Nk(i);return r._openRedirect(i.auth,e,"linkViaRedirect",s)}async function b7(t,e){return await ut(t)._initializationPromise,Xg(t,e,!1)}async function Xg(t,e,n=!1){if(Ce(t.app))return Promise.reject(Wt(t));const i=ut(t),r=Uo(i,e),a=await new d7(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}async function Nk(t){const e=Xd(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7=10*60*1e3;class Dk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!x7(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!kk(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Mt(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=T7&&this.cachedEventUids.clear(),this.cachedEventUids.has(PI(e))}saveEventToCache(e){this.cachedEventUids.add(PI(e)),this.lastProcessedEventTime=Date.now()}}function PI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function x7(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mk(t,e={}){return vt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S7=/^https?/;async function I7(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Mk(t);for(const n of e)try{if(A7(n))return}catch{}an(t,"unauthorized-domain")}function A7(t){const e=ad(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!S7.test(n))return!1;if(E7.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R7=new Gd(3e4,6e4);function NI(){const t=It().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function C7(t){return new Promise((e,n)=>{var r,s,a;function i(){NI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{NI(),n(Mt(t,"network-request-failed"))},timeout:R7.get()})}if((s=(r=It().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=It().gapi)!=null&&a.load)i();else{const o=lk("iframefcb");return It()[o]=()=>{gapi.load?i():n(Mt(t,"network-request-failed"))},lT(`${xF()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw Um=null,e})}let Um=null;function P7(t){return Um=Um||C7(t),Um}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N7=new Gd(5e3,15e3),D7="__/auth/iframe",k7="emulator/auth/iframe",M7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V7(t){const e=t.config;W(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?oT(e,k7):`https://${t.config.authDomain}/${D7}`,i={apiKey:e.apiKey,appName:t.name,v:Ri},r=O7.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${va(i).slice(1)}`}async function L7(t){const e=await P7(t),n=It().gapi;return W(n,t,"internal-error"),e.open({where:document.body,url:V7(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:M7,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Mt(t,"network-request-failed"),o=It().setTimeout(()=>{s(a)},N7.get());function l(){It().clearTimeout(o),r(i)}i.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j7=500,z7=600,B7="_blank",F7="http://localhost";class DI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function q7(t,e,n,i=j7,r=z7){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const l={...U7,width:i.toString(),height:r.toString(),top:s,left:a},c=Ae().toLowerCase();n&&(o=nk(c)?B7:n),ek(c)&&(e=e||F7,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[h,p])=>`${f}${h}=${p},`,"");if(fF(c)&&o!=="_self")return H7(e||"",o),new DI(null);const d=window.open(e||"",o,u);W(d,t,"popup-blocked");try{d.focus()}catch{}return new DI(d)}function H7(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7="__/auth/handler",G7="emulator/auth/handler",K7=encodeURIComponent("fac");async function k_(t,e,n,i,r,s){W(t.config.authDomain,t,"auth-domain-config-required"),W(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ri,eventId:r};if(e instanceof Zr){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",wz(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(s||{}))a[u]=d}if(e instanceof Hc){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(a.scopes=u.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await t._getAppCheckToken(),c=l?`#${K7}=${encodeURIComponent(l)}`:"";return`${W7(t)}?${va(o).slice(1)}${c}`}function W7({config:t}){return t.emulator?oT(t,G7):`https://${t.authDomain}/${$7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="webStorageSupport";class Q7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vo,this._completeRedirectFn=Xg,this._overrideRedirectResult=wT}async _openPopup(e,n,i,r){var a;Ui((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await k_(e,n,i,ad(),r);return q7(e,s,Xd())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await k_(e,n,i,ad(),r);return L8(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Ui(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await L7(e),i=new Dk(e);return n.register("authEvent",r=>(W(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wv,{type:Wv},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[Wv];s!==void 0&&n(!!s),an(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=I7(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ak()||tk()||Wd()}}const Y7=Q7;class X7{constructor(e){this.factorId=e}_process(e,n,i){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,i);case"signin":return this._finalizeSignIn(e,n.credential);default:return er("unexpected MultiFactorSessionType")}}}class bT extends X7{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new bT(e)}_finalizeEnroll(e,n,i){return P8(e,{idToken:n,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return G8(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Ok{constructor(){}static assertion(e){return bT._fromCredential(e)}}Ok.FACTOR_ID="phone";var kI="@firebase/auth",MI="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J7=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z7(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eq(t){Li(new jn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=i.options;W(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ok(t)},c=new _F(i,r,s,l);return kF(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Li(new jn("auth-internal",e=>{const n=ut(e.getProvider("auth").getImmediate());return(i=>new J7(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xn(kI,MI,Z7(t)),xn(kI,MI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tq=5*60;ED("authIdTokenMaxAge");function nq(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}wF({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Mt("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",nq().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eq("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iq=2e3;async function rq(t,e,n){const{BuildInfo:i}=wo();Ui(e.sessionId,"AuthEvent did not contain a session ID");const r=await cq(e.sessionId),s={};return Wd()?s.ibi=i.packageName:Kd()?s.apn=i.packageName:an(t,"operation-not-supported-in-this-environment"),i.displayName&&(s.appDisplayName=i.displayName),s.sessionId=r,k_(t,n,e.type,void 0,e.eventId??void 0,s)}async function sq(t){const{BuildInfo:e}=wo(),n={};Wd()?n.iosBundleId=e.packageName:Kd()?n.androidPackageName=e.packageName:an(t,"operation-not-supported-in-this-environment"),await Mk(t,n)}function aq(t){const{cordova:e}=wo();return new Promise(n=>{e.plugins.browsertab.isAvailable(i=>{let r=null;i?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,dF()?"_blank":"_system","location=yes"),n(r)})})}async function oq(t,e,n){const{cordova:i}=wo();let r=()=>{};try{await new Promise((s,a)=>{let o=null;function l(){var f;s();const d=(f=i.plugins.browsertab)==null?void 0:f.close;typeof d=="function"&&d(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){o||(o=window.setTimeout(()=>{a(Mt(t,"redirect-cancelled-by-user"))},iq))}function u(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),Kd()&&document.addEventListener("visibilitychange",u,!1),r=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),o&&window.clearTimeout(o)}})}finally{r()}}function lq(t){var n,i,r,s,a,o,l,c,u,d;const e=wo();W(typeof((n=e==null?void 0:e.universalLinks)==null?void 0:n.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),W(typeof((i=e==null?void 0:e.BuildInfo)==null?void 0:i.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),W(typeof((a=(s=(r=e==null?void 0:e.cordova)==null?void 0:r.plugins)==null?void 0:s.browsertab)==null?void 0:a.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),W(typeof((c=(l=(o=e==null?void 0:e.cordova)==null?void 0:o.plugins)==null?void 0:l.browsertab)==null?void 0:c.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),W(typeof((d=(u=e==null?void 0:e.cordova)==null?void 0:u.InAppBrowser)==null?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function cq(t){const e=uq(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(r=>r.toString(16).padStart(2,"0")).join("")}function uq(t){if(Ui(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hq=20;class dq extends Dk{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function fq(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:gq(),postBody:null,tenantId:t.tenantId,error:Mt(t,"no-auth-event")}}function mq(t,e){return M_()._set(O_(t),e)}async function OI(t){const e=await M_()._get(O_(t));return e&&await M_()._remove(O_(t)),e}function pq(t,e){var i,r;const n=vq(e);if(n.includes("/__/auth/callback")){const s=jm(n),a=s.firebaseError?yq(decodeURIComponent(s.firebaseError)):null,o=(r=(i=a==null?void 0:a.code)==null?void 0:i.split("auth/"))==null?void 0:r[1],l=o?Mt(o):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:n,postBody:null}}return null}function gq(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<hq;n++){const i=Math.floor(Math.random()*e.length);t.push(e.charAt(i))}return t.join("")}function M_(){return Yn(pT)}function O_(t){return oo("authEvent",t.config.apiKey,t.name)}function yq(t){try{return JSON.parse(t)}catch{return null}}function vq(t){const e=jm(t),n=e.link?decodeURIComponent(e.link):void 0,i=jm(n).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return jm(r).link||r||i||n||t}function jm(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Rl(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _q=500;class wq{constructor(){this._redirectPersistence=vo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Xg,this._overrideRedirectResult=wT}async _initialize(e){const n=e._key();let i=this.eventManagers.get(n);return i||(i=new dq(e),this.eventManagers.set(n,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){an(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,i,r){lq(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),m7(),await this._originValidation(e);const a=fq(e,i,r);await mq(e,a);const o=await rq(e,a,n),l=await aq(o);return oq(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sq(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:i,handleOpenURL:r,BuildInfo:s}=wo(),a=setTimeout(async()=>{await OI(e),n.onEvent(VI())},_q),o=async u=>{clearTimeout(a);const d=await OI(e);let f=null;d&&(u!=null&&u.url)&&(f=pq(d,u.url)),n.onEvent(f||VI())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,o);const l=r,c=`${s.packageName.toLowerCase()}://`;wo().handleOpenURL=async u=>{if(u.toLowerCase().startsWith(c)&&o({url:u}),typeof l=="function")try{l(u)}catch(d){console.error(d)}}}}const bq=wq;function VI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Mt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tq(t,e){ut(t)._logFramework(e)}var xq="@firebase/auth-compat",Eq="0.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sq=1e3;function Th(){var t;return((t=self==null?void 0:self.location)==null?void 0:t.protocol)||null}function Iq(){return Th()==="http:"||Th()==="https:"}function Vk(t=Ae()){return!!((Th()==="file:"||Th()==="ionic:"||Th()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Aq(){return Bg()||zg()}function Rq(){return CD()&&(document==null?void 0:document.documentMode)===11}function Cq(t=Ae()){return/Edge\/\d+/.test(t)}function Pq(t=Ae()){return Rq()||Cq(t)}function Lk(){try{const t=self.localStorage,e=Xd();if(t)return t.setItem(e,"1"),t.removeItem(e),Pq()?id():!0}catch{return TT()&&id()}return!1}function TT(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qv(){return(Iq()||Xb()||Vk())&&!Aq()&&Lk()&&!TT()}function Uk(){return Vk()&&typeof document<"u"}async function Nq(){return Uk()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},Sq);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function Dq(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn={LOCAL:"local",NONE:"none",SESSION:"session"},Pu=W,jk="persistence";function kq(t,e){if(Pu(Object.values(Kn).includes(e),t,"invalid-persistence-type"),Bg()){Pu(e!==Kn.SESSION,t,"unsupported-persistence-type");return}if(zg()){Pu(e===Kn.NONE,t,"unsupported-persistence-type");return}if(TT()){Pu(e===Kn.NONE||e===Kn.LOCAL&&id(),t,"unsupported-persistence-type");return}Pu(e===Kn.NONE||Lk(),t,"unsupported-persistence-type")}async function V_(t){await t._initializationPromise;const e=zk(),n=oo(jk,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistenceType())}function Mq(t,e){const n=zk();if(!n)return[];const i=oo(jk,t,e);switch(n.getItem(i)){case Kn.NONE:return[lc];case Kn.LOCAL:return[cd,vo];case Kn.SESSION:return[vo];default:return[]}}function zk(){var t;try{return((t=Dq())==null?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oq=W;class Os{constructor(){this.browserResolver=Yn(Y7),this.cordovaResolver=Yn(bq),this.underlyingResolver=null,this._redirectPersistence=vo,this._completeRedirectFn=Xg,this._overrideRedirectResult=wT}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,i,r)}async _openRedirect(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,i,r)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Uk()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Oq(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await Nq();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t){return t.unwrap()}function Vq(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lq(t){return Fk(t)}function Uq(t,e){var i;const n=(i=e.customData)==null?void 0:i._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const r=e;r.resolver=new jq(t,C8(t,e))}else if(n){const r=Fk(e),s=e;r&&(s.credential=r,s.tenantId=n.tenantId||void 0,s.email=n.email||void 0,s.phoneNumber=n.phoneNumber||void 0)}}function Fk(t){const{_tokenResponse:e}=t instanceof Kt?t.customData:t;if(!e)return null;if(!(t instanceof Kt)&&"temporaryProof"in e&&"phoneNumber"in e)return _o.credentialFromResult(t);const n=e.providerId;if(!n||n===Ru.PASSWORD)return null;let i;switch(n){case Ru.GOOGLE:i=Ki;break;case Ru.FACEBOOK:i=Gi;break;case Ru.GITHUB:i=Wi;break;case Ru.TWITTER:i=Qi;break;default:const{oauthIdToken:r,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:o,nonce:l}=e;return!s&&!a&&!r&&!o?null:o?n.startsWith("saml.")?cc._create(n,o):hr._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:r,accessToken:s}):new Fl(n).credential({idToken:r,accessToken:s,rawNonce:l})}return t instanceof Kt?i.credentialFromError(t):i.credentialFromResult(t)}function Dn(t,e){return e.catch(n=>{throw n instanceof Kt&&Uq(t,n),n}).then(n=>{const i=n.operationType,r=n.user;return{operationType:i,credential:Lq(n),additionalUserInfo:R8(n),user:Jg.getOrCreate(r)}})}async function L_(t,e){const n=await e;return{verificationId:n.verificationId,confirm:i=>Dn(t,n.confirm(i))}}class jq{constructor(e,n){this.resolver=n,this.auth=Vq(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Dn(Bk(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jg=class Ku{constructor(e){this._delegate=e,this.multiFactor=D8(e)}static getOrCreate(e){return Ku.USER_MAP.has(e)||Ku.USER_MAP.set(e,new Ku(e)),Ku.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Dn(this.auth,yk(this._delegate,e))}async linkWithPhoneNumber(e,n){return L_(this.auth,t7(this._delegate,e,n))}async linkWithPopup(e){return Dn(this.auth,u7(this._delegate,e,Os))}async linkWithRedirect(e){return await V_(ut(this.auth)),_7(this._delegate,e,Os)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Dn(this.auth,vk(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return L_(this.auth,n7(this._delegate,e,n))}reauthenticateWithPopup(e){return Dn(this.auth,c7(this._delegate,e,Os))}async reauthenticateWithRedirect(e){return await V_(ut(this.auth)),y7(this._delegate,e,Os)}sendEmailVerification(e){return y8(this._delegate,e)}async unlink(e){return await i8(this._delegate,e),this}updateEmail(e){return b8(this._delegate,e)}updatePassword(e){return T8(this._delegate,e)}updatePhoneNumber(e){return i7(this._delegate,e)}updateProfile(e){return w8(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return v8(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Jg.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=W;class U_{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;Nu(i,"invalid-api-key",{appName:e.name}),Nu(i,"invalid-api-key",{appName:e.name});const r=typeof window<"u"?Os:void 0;this._delegate=n.initialize({options:{persistence:zq(i,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(GB),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Jg.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){MF(this._delegate,e,n)}applyActionCode(e){return l8(this._delegate,e)}checkActionCode(e){return _k(this._delegate,e)}confirmPasswordReset(e,n){return o8(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Dn(this._delegate,u8(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return g8(this._delegate,e)}isSignInWithEmailLink(e){return f8(this._delegate,e)}async getRedirectResult(){Nu(Qv(),this._delegate,"operation-not-supported-in-this-environment");const e=await b7(this._delegate,Os);return e?Dn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){Tq(this._delegate,e)}onAuthStateChanged(e,n,i){const{next:r,error:s,complete:a}=LI(e,n,i);return this._delegate.onAuthStateChanged(r,s,a)}onIdTokenChanged(e,n,i){const{next:r,error:s,complete:a}=LI(e,n,i);return this._delegate.onIdTokenChanged(r,s,a)}sendSignInLinkToEmail(e,n){return d8(this._delegate,e,n)}sendPasswordResetEmail(e,n){return a8(this._delegate,e,n||void 0)}async setPersistence(e){kq(this._delegate,e);let n;switch(e){case Kn.SESSION:n=vo;break;case Kn.LOCAL:n=await Yn(cd)._isAvailable()?cd:pT;break;case Kn.NONE:n=lc;break;default:return an("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Dn(this._delegate,n8(this._delegate))}signInWithCredential(e){return Dn(this._delegate,Gg(this._delegate,e))}signInWithCustomToken(e){return Dn(this._delegate,s8(this._delegate,e))}signInWithEmailAndPassword(e,n){return Dn(this._delegate,h8(this._delegate,e,n))}signInWithEmailLink(e,n){return Dn(this._delegate,m8(this._delegate,e,n))}signInWithPhoneNumber(e,n){return L_(this._delegate,e7(this._delegate,e,n))}async signInWithPopup(e){return Nu(Qv(),this._delegate,"operation-not-supported-in-this-environment"),Dn(this._delegate,l7(this._delegate,e,Os))}async signInWithRedirect(e){return Nu(Qv(),this._delegate,"operation-not-supported-in-this-environment"),await V_(this._delegate),p7(this._delegate,e,Os)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return c8(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}U_.Persistence=Kn;function LI(t,e,n){let i=t;typeof t!="function"&&({next:i,error:e,complete:n}=t);const r=i;return{next:a=>r(a&&Jg.getOrCreate(a)),error:e,complete:n}}function zq(t,e){const n=Mq(t,e);if(typeof self<"u"&&!n.includes(cd)&&n.push(cd),typeof window<"u")for(const i of[pT,vo])n.includes(i)||n.push(i);return n.includes(lc)||n.push(lc),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{static credential(e,n){return _o.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new _o(Bk($t.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}xT.PHONE_SIGN_IN_METHOD=_o.PHONE_SIGN_IN_METHOD;xT.PROVIDER_ID=_o.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bq=W;class Fq{constructor(e,n,i=$t.app()){var r;Bq((r=i.options)==null?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new J8(i.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qq="auth-compat";function Hq(t){t.INTERNAL.registerComponent(new jn(qq,e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new U_(n,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:el.EMAIL_SIGNIN,PASSWORD_RESET:el.PASSWORD_RESET,RECOVER_EMAIL:el.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:el.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:el.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:el.VERIFY_EMAIL}},EmailAuthProvider:_a,FacebookAuthProvider:Gi,GithubAuthProvider:Wi,GoogleAuthProvider:Ki,OAuthProvider:Fl,SAMLAuthProvider:Up,PhoneAuthProvider:xT,PhoneMultiFactorGenerator:Ok,RecaptchaVerifier:Fq,TwitterAuthProvider:Qi,Auth:U_,AuthCredential:qc,Error:Kt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(xq,Eq)}Hq($t);var UI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qs,qk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,T){function A(){}A.prototype=T.prototype,x.F=T.prototype,x.prototype=new A,x.prototype.constructor=x,x.D=function(I,P,k){for(var D=Array(arguments.length-2),V=2;V<arguments.length;V++)D[V-2]=arguments[V];return T.prototype[P].apply(I,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(x,T,A){A||(A=0);const I=Array(16);if(typeof T=="string")for(var P=0;P<16;++P)I[P]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(P=0;P<16;++P)I[P]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=x.g[0],A=x.g[1],P=x.g[2];let k=x.g[3],D;D=T+(k^A&(P^k))+I[0]+3614090360&4294967295,T=A+(D<<7&4294967295|D>>>25),D=k+(P^T&(A^P))+I[1]+3905402710&4294967295,k=T+(D<<12&4294967295|D>>>20),D=P+(A^k&(T^A))+I[2]+606105819&4294967295,P=k+(D<<17&4294967295|D>>>15),D=A+(T^P&(k^T))+I[3]+3250441966&4294967295,A=P+(D<<22&4294967295|D>>>10),D=T+(k^A&(P^k))+I[4]+4118548399&4294967295,T=A+(D<<7&4294967295|D>>>25),D=k+(P^T&(A^P))+I[5]+1200080426&4294967295,k=T+(D<<12&4294967295|D>>>20),D=P+(A^k&(T^A))+I[6]+2821735955&4294967295,P=k+(D<<17&4294967295|D>>>15),D=A+(T^P&(k^T))+I[7]+4249261313&4294967295,A=P+(D<<22&4294967295|D>>>10),D=T+(k^A&(P^k))+I[8]+1770035416&4294967295,T=A+(D<<7&4294967295|D>>>25),D=k+(P^T&(A^P))+I[9]+2336552879&4294967295,k=T+(D<<12&4294967295|D>>>20),D=P+(A^k&(T^A))+I[10]+4294925233&4294967295,P=k+(D<<17&4294967295|D>>>15),D=A+(T^P&(k^T))+I[11]+2304563134&4294967295,A=P+(D<<22&4294967295|D>>>10),D=T+(k^A&(P^k))+I[12]+1804603682&4294967295,T=A+(D<<7&4294967295|D>>>25),D=k+(P^T&(A^P))+I[13]+4254626195&4294967295,k=T+(D<<12&4294967295|D>>>20),D=P+(A^k&(T^A))+I[14]+2792965006&4294967295,P=k+(D<<17&4294967295|D>>>15),D=A+(T^P&(k^T))+I[15]+1236535329&4294967295,A=P+(D<<22&4294967295|D>>>10),D=T+(P^k&(A^P))+I[1]+4129170786&4294967295,T=A+(D<<5&4294967295|D>>>27),D=k+(A^P&(T^A))+I[6]+3225465664&4294967295,k=T+(D<<9&4294967295|D>>>23),D=P+(T^A&(k^T))+I[11]+643717713&4294967295,P=k+(D<<14&4294967295|D>>>18),D=A+(k^T&(P^k))+I[0]+3921069994&4294967295,A=P+(D<<20&4294967295|D>>>12),D=T+(P^k&(A^P))+I[5]+3593408605&4294967295,T=A+(D<<5&4294967295|D>>>27),D=k+(A^P&(T^A))+I[10]+38016083&4294967295,k=T+(D<<9&4294967295|D>>>23),D=P+(T^A&(k^T))+I[15]+3634488961&4294967295,P=k+(D<<14&4294967295|D>>>18),D=A+(k^T&(P^k))+I[4]+3889429448&4294967295,A=P+(D<<20&4294967295|D>>>12),D=T+(P^k&(A^P))+I[9]+568446438&4294967295,T=A+(D<<5&4294967295|D>>>27),D=k+(A^P&(T^A))+I[14]+3275163606&4294967295,k=T+(D<<9&4294967295|D>>>23),D=P+(T^A&(k^T))+I[3]+4107603335&4294967295,P=k+(D<<14&4294967295|D>>>18),D=A+(k^T&(P^k))+I[8]+1163531501&4294967295,A=P+(D<<20&4294967295|D>>>12),D=T+(P^k&(A^P))+I[13]+2850285829&4294967295,T=A+(D<<5&4294967295|D>>>27),D=k+(A^P&(T^A))+I[2]+4243563512&4294967295,k=T+(D<<9&4294967295|D>>>23),D=P+(T^A&(k^T))+I[7]+1735328473&4294967295,P=k+(D<<14&4294967295|D>>>18),D=A+(k^T&(P^k))+I[12]+2368359562&4294967295,A=P+(D<<20&4294967295|D>>>12),D=T+(A^P^k)+I[5]+4294588738&4294967295,T=A+(D<<4&4294967295|D>>>28),D=k+(T^A^P)+I[8]+2272392833&4294967295,k=T+(D<<11&4294967295|D>>>21),D=P+(k^T^A)+I[11]+1839030562&4294967295,P=k+(D<<16&4294967295|D>>>16),D=A+(P^k^T)+I[14]+4259657740&4294967295,A=P+(D<<23&4294967295|D>>>9),D=T+(A^P^k)+I[1]+2763975236&4294967295,T=A+(D<<4&4294967295|D>>>28),D=k+(T^A^P)+I[4]+1272893353&4294967295,k=T+(D<<11&4294967295|D>>>21),D=P+(k^T^A)+I[7]+4139469664&4294967295,P=k+(D<<16&4294967295|D>>>16),D=A+(P^k^T)+I[10]+3200236656&4294967295,A=P+(D<<23&4294967295|D>>>9),D=T+(A^P^k)+I[13]+681279174&4294967295,T=A+(D<<4&4294967295|D>>>28),D=k+(T^A^P)+I[0]+3936430074&4294967295,k=T+(D<<11&4294967295|D>>>21),D=P+(k^T^A)+I[3]+3572445317&4294967295,P=k+(D<<16&4294967295|D>>>16),D=A+(P^k^T)+I[6]+76029189&4294967295,A=P+(D<<23&4294967295|D>>>9),D=T+(A^P^k)+I[9]+3654602809&4294967295,T=A+(D<<4&4294967295|D>>>28),D=k+(T^A^P)+I[12]+3873151461&4294967295,k=T+(D<<11&4294967295|D>>>21),D=P+(k^T^A)+I[15]+530742520&4294967295,P=k+(D<<16&4294967295|D>>>16),D=A+(P^k^T)+I[2]+3299628645&4294967295,A=P+(D<<23&4294967295|D>>>9),D=T+(P^(A|~k))+I[0]+4096336452&4294967295,T=A+(D<<6&4294967295|D>>>26),D=k+(A^(T|~P))+I[7]+1126891415&4294967295,k=T+(D<<10&4294967295|D>>>22),D=P+(T^(k|~A))+I[14]+2878612391&4294967295,P=k+(D<<15&4294967295|D>>>17),D=A+(k^(P|~T))+I[5]+4237533241&4294967295,A=P+(D<<21&4294967295|D>>>11),D=T+(P^(A|~k))+I[12]+1700485571&4294967295,T=A+(D<<6&4294967295|D>>>26),D=k+(A^(T|~P))+I[3]+2399980690&4294967295,k=T+(D<<10&4294967295|D>>>22),D=P+(T^(k|~A))+I[10]+4293915773&4294967295,P=k+(D<<15&4294967295|D>>>17),D=A+(k^(P|~T))+I[1]+2240044497&4294967295,A=P+(D<<21&4294967295|D>>>11),D=T+(P^(A|~k))+I[8]+1873313359&4294967295,T=A+(D<<6&4294967295|D>>>26),D=k+(A^(T|~P))+I[15]+4264355552&4294967295,k=T+(D<<10&4294967295|D>>>22),D=P+(T^(k|~A))+I[6]+2734768916&4294967295,P=k+(D<<15&4294967295|D>>>17),D=A+(k^(P|~T))+I[13]+1309151649&4294967295,A=P+(D<<21&4294967295|D>>>11),D=T+(P^(A|~k))+I[4]+4149444226&4294967295,T=A+(D<<6&4294967295|D>>>26),D=k+(A^(T|~P))+I[11]+3174756917&4294967295,k=T+(D<<10&4294967295|D>>>22),D=P+(T^(k|~A))+I[2]+718787259&4294967295,P=k+(D<<15&4294967295|D>>>17),D=A+(k^(P|~T))+I[9]+3951481745&4294967295,x.g[0]=x.g[0]+T&4294967295,x.g[1]=x.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,x.g[2]=x.g[2]+P&4294967295,x.g[3]=x.g[3]+k&4294967295}i.prototype.v=function(x,T){T===void 0&&(T=x.length);const A=T-this.blockSize,I=this.C;let P=this.h,k=0;for(;k<T;){if(P==0)for(;k<=A;)r(this,x,k),k+=this.blockSize;if(typeof x=="string"){for(;k<T;)if(I[P++]=x.charCodeAt(k++),P==this.blockSize){r(this,I),P=0;break}}else for(;k<T;)if(I[P++]=x[k++],P==this.blockSize){r(this,I),P=0;break}}this.h=P,this.o+=T},i.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var T=1;T<x.length-8;++T)x[T]=0;T=this.o*8;for(var A=x.length-8;A<x.length;++A)x[A]=T&255,T/=256;for(this.v(x),x=Array(16),T=0,A=0;A<4;++A)for(let I=0;I<32;I+=8)x[T++]=this.g[A]>>>I&255;return x};function s(x,T){var A=o;return Object.prototype.hasOwnProperty.call(A,x)?A[x]:A[x]=T(x)}function a(x,T){this.h=T;const A=[];let I=!0;for(let P=x.length-1;P>=0;P--){const k=x[P]|0;I&&k==T||(A[P]=k,I=!1)}this.g=A}var o={};function l(x){return-128<=x&&x<128?s(x,function(T){return new a([T|0],T<0?-1:0)}):new a([x|0],x<0?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return d;if(x<0)return v(c(-x));const T=[];let A=1;for(let I=0;x>=A;I++)T[I]=x/A|0,A*=4294967296;return new a(T,0)}function u(x,T){if(x.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(x.charAt(0)=="-")return v(u(x.substring(1),T));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=c(Math.pow(T,8));let I=d;for(let k=0;k<x.length;k+=8){var P=Math.min(8,x.length-k);const D=parseInt(x.substring(k,k+P),T);P<8?(P=c(Math.pow(T,P)),I=I.j(P).add(c(D))):(I=I.j(A),I=I.add(c(D)))}return I}var d=l(0),f=l(1),h=l(16777216);t=a.prototype,t.m=function(){if(g(this))return-v(this).m();let x=0,T=1;for(let A=0;A<this.g.length;A++){const I=this.i(A);x+=(I>=0?I:4294967296+I)*T,T*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(p(this))return"0";if(g(this))return"-"+v(this).toString(x);const T=c(Math.pow(x,6));var A=this;let I="";for(;;){const P=R(A,T).g;A=y(A,P.j(T));let k=((A.g.length>0?A.g[0]:A.h)>>>0).toString(x);if(A=P,p(A))return k+I;for(;k.length<6;)k="0"+k;I=k+I}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function p(x){if(x.h!=0)return!1;for(let T=0;T<x.g.length;T++)if(x.g[T]!=0)return!1;return!0}function g(x){return x.h==-1}t.l=function(x){return x=y(this,x),g(x)?-1:p(x)?0:1};function v(x){const T=x.g.length,A=[];for(let I=0;I<T;I++)A[I]=~x.g[I];return new a(A,~x.h).add(f)}t.abs=function(){return g(this)?v(this):this},t.add=function(x){const T=Math.max(this.g.length,x.g.length),A=[];let I=0;for(let P=0;P<=T;P++){let k=I+(this.i(P)&65535)+(x.i(P)&65535),D=(k>>>16)+(this.i(P)>>>16)+(x.i(P)>>>16);I=D>>>16,k&=65535,D&=65535,A[P]=D<<16|k}return new a(A,A[A.length-1]&-2147483648?-1:0)};function y(x,T){return x.add(v(T))}t.j=function(x){if(p(this)||p(x))return d;if(g(this))return g(x)?v(this).j(v(x)):v(v(this).j(x));if(g(x))return v(this.j(v(x)));if(this.l(h)<0&&x.l(h)<0)return c(this.m()*x.m());const T=this.g.length+x.g.length,A=[];for(var I=0;I<2*T;I++)A[I]=0;for(I=0;I<this.g.length;I++)for(let P=0;P<x.g.length;P++){const k=this.i(I)>>>16,D=this.i(I)&65535,V=x.i(P)>>>16,z=x.i(P)&65535;A[2*I+2*P]+=D*z,w(A,2*I+2*P),A[2*I+2*P+1]+=k*z,w(A,2*I+2*P+1),A[2*I+2*P+1]+=D*V,w(A,2*I+2*P+1),A[2*I+2*P+2]+=k*V,w(A,2*I+2*P+2)}for(x=0;x<T;x++)A[x]=A[2*x+1]<<16|A[2*x];for(x=T;x<2*T;x++)A[x]=0;return new a(A,0)};function w(x,T){for(;(x[T]&65535)!=x[T];)x[T+1]+=x[T]>>>16,x[T]&=65535,T++}function b(x,T){this.g=x,this.h=T}function R(x,T){if(p(T))throw Error("division by zero");if(p(x))return new b(d,d);if(g(x))return T=R(v(x),T),new b(v(T.g),v(T.h));if(g(T))return T=R(x,v(T)),new b(v(T.g),T.h);if(x.g.length>30){if(g(x)||g(T))throw Error("slowDivide_ only works with positive integers.");for(var A=f,I=T;I.l(x)<=0;)A=S(A),I=S(I);var P=C(A,1),k=C(I,1);for(I=C(I,2),A=C(A,2);!p(I);){var D=k.add(I);D.l(x)<=0&&(P=P.add(A),k=D),I=C(I,1),A=C(A,1)}return T=y(x,P.j(T)),new b(P,T)}for(P=d;x.l(T)>=0;){for(A=Math.max(1,Math.floor(x.m()/T.m())),I=Math.ceil(Math.log(A)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),k=c(A),D=k.j(T);g(D)||D.l(x)>0;)A-=I,k=c(A),D=k.j(T);p(k)&&(k=f),P=P.add(k),x=y(x,D)}return new b(P,x)}t.B=function(x){return R(this,x).h},t.and=function(x){const T=Math.max(this.g.length,x.g.length),A=[];for(let I=0;I<T;I++)A[I]=this.i(I)&x.i(I);return new a(A,this.h&x.h)},t.or=function(x){const T=Math.max(this.g.length,x.g.length),A=[];for(let I=0;I<T;I++)A[I]=this.i(I)|x.i(I);return new a(A,this.h|x.h)},t.xor=function(x){const T=Math.max(this.g.length,x.g.length),A=[];for(let I=0;I<T;I++)A[I]=this.i(I)^x.i(I);return new a(A,this.h^x.h)};function S(x){const T=x.g.length+1,A=[];for(let I=0;I<T;I++)A[I]=x.i(I)<<1|x.i(I-1)>>>31;return new a(A,x.h)}function C(x,T){const A=T>>5;T%=32;const I=x.g.length-A,P=[];for(let k=0;k<I;k++)P[k]=T>0?x.i(k+A)>>>T|x.i(k+A+1)<<32-T:x.i(k+A);return new a(P,x.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,qk=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,Qs=a}).apply(typeof UI<"u"?UI:typeof self<"u"?self:typeof window<"u"?window:{});var tm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hk,Wu,$k,zm,j_,Gk,Kk,Wk;(function(){var t,e=Object.defineProperty;function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof tm=="object"&&tm];for(var E=0;E<m.length;++E){var N=m[E];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var i=n(this);function r(m,E){if(E)e:{var N=i;m=m.split(".");for(var O=0;O<m.length-1;O++){var j=m[O];if(!(j in N))break e;N=N[j]}m=m[m.length-1],O=N[m],E=E(O),E!=O&&E!=null&&e(N,m,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(E){var N=[],O;for(O in E)Object.prototype.hasOwnProperty.call(E,O)&&N.push([O,E[O]]);return N}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function o(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function l(m,E,N){return m.call.apply(m.bind,arguments)}function c(m,E,N){return c=l,c.apply(null,arguments)}function u(m,E){var N=Array.prototype.slice.call(arguments,1);return function(){var O=N.slice();return O.push.apply(O,arguments),m.apply(this,O)}}function d(m,E){function N(){}N.prototype=E.prototype,m.Z=E.prototype,m.prototype=new N,m.prototype.constructor=m,m.Ob=function(O,j,q){for(var X=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)X[fe-2]=arguments[fe];return E.prototype[j].apply(O,X)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function h(m){const E=m.length;if(E>0){const N=Array(E);for(let O=0;O<E;O++)N[O]=m[O];return N}return[]}function p(m,E){for(let O=1;O<arguments.length;O++){const j=arguments[O];var N=typeof j;if(N=N!="object"?N:j?Array.isArray(j)?"array":N:"null",N=="array"||N=="object"&&typeof j.length=="number"){N=m.length||0;const q=j.length||0;m.length=N+q;for(let X=0;X<q;X++)m[N+X]=j[X]}else m.push(j)}}class g{constructor(E,N){this.i=E,this.j=N,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function v(m){a.setTimeout(()=>{throw m},0)}function y(){var m=x;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class w{constructor(){this.h=this.g=null}add(E,N){const O=b.get();O.set(E,N),this.h?this.h.next=O:this.g=O,this.h=O}}var b=new g(()=>new R,m=>m.reset());class R{constructor(){this.next=this.g=this.h=null}set(E,N){this.h=E,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let S,C=!1,x=new w,T=()=>{const m=Promise.resolve(void 0);S=()=>{m.then(A)}};function A(){for(var m;m=y();){try{m.h.call(m.g)}catch(N){v(N)}var E=b;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}C=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const N=()=>{};a.addEventListener("test",N,E),a.removeEventListener("test",N,E)}catch{}return m}();function D(m){return/^[\s\xa0]*$/.test(m)}function V(m,E){P.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}d(V,P),V.prototype.init=function(m,E){const N=this.type=m.type,O=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(N=="mouseover"?E=m.fromElement:N=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&V.Z.h.call(this)},V.prototype.h=function(){V.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var z="closure_listenable_"+(Math.random()*1e6|0),L=0;function F(m,E,N,O,j){this.listener=m,this.proxy=null,this.src=E,this.type=N,this.capture=!!O,this.ha=j,this.key=++L,this.da=this.fa=!1}function $(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Q(m,E,N){for(const O in m)E.call(N,m[O],O,m)}function te(m,E){for(const N in m)E.call(void 0,m[N],N,m)}function ce(m){const E={};for(const N in m)E[N]=m[N];return E}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(m,E){let N,O;for(let j=1;j<arguments.length;j++){O=arguments[j];for(N in O)m[N]=O[N];for(let q=0;q<Z.length;q++)N=Z[q],Object.prototype.hasOwnProperty.call(O,N)&&(m[N]=O[N])}}function Me(m){this.src=m,this.g={},this.h=0}Me.prototype.add=function(m,E,N,O,j){const q=m.toString();m=this.g[q],m||(m=this.g[q]=[],this.h++);const X=pe(m,E,O,j);return X>-1?(E=m[X],N||(E.fa=!1)):(E=new F(E,this.src,q,!!O,j),E.fa=N,m.push(E)),E};function ot(m,E){const N=E.type;if(N in m.g){var O=m.g[N],j=Array.prototype.indexOf.call(O,E,void 0),q;(q=j>=0)&&Array.prototype.splice.call(O,j,1),q&&($(E),m.g[N].length==0&&(delete m.g[N],m.h--))}}function pe(m,E,N,O){for(let j=0;j<m.length;++j){const q=m[j];if(!q.da&&q.listener==E&&q.capture==!!N&&q.ha==O)return j}return-1}var Lt="closure_lm_"+(Math.random()*1e6|0),lt={};function Bn(m,E,N,O,j){if(Array.isArray(E)){for(let q=0;q<E.length;q++)Bn(m,E[q],N,O,j);return null}return N=Go(N),m&&m[z]?m.J(E,N,o(O)?!!O.capture:!1,j):An(m,E,N,!1,O,j)}function An(m,E,N,O,j,q){if(!E)throw Error("Invalid event type");const X=o(j)?!!j.capture:!!j;let fe=Ho(m);if(fe||(m[Lt]=fe=new Me(m)),N=fe.add(E,N,O,X,q),N.proxy)return N;if(O=li(),N.proxy=O,O.src=m,O.listener=N,m.addEventListener)k||(j=X),j===void 0&&(j=!1),m.addEventListener(E.toString(),O,j);else if(m.attachEvent)m.attachEvent(bf(E.toString()),O);else if(m.addListener&&m.removeListener)m.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return N}function li(){function m(N){return E.call(m.src,m.listener,N)}const E=Oy;return m}function Qt(m,E,N,O,j){if(Array.isArray(E))for(var q=0;q<E.length;q++)Qt(m,E[q],N,O,j);else O=o(O)?!!O.capture:!!O,N=Go(N),m&&m[z]?(m=m.i,q=String(E).toString(),q in m.g&&(E=m.g[q],N=pe(E,N,O,j),N>-1&&($(E[N]),Array.prototype.splice.call(E,N,1),E.length==0&&(delete m.g[q],m.h--)))):m&&(m=Ho(m))&&(E=m.g[E.toString()],m=-1,E&&(m=pe(E,N,O,j)),(N=m>-1?E[m]:null)&&nu(N))}function nu(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[z])ot(E.i,m);else{var N=m.type,O=m.proxy;E.removeEventListener?E.removeEventListener(N,O,m.capture):E.detachEvent?E.detachEvent(bf(N),O):E.addListener&&E.removeListener&&E.removeListener(O),(N=Ho(E))?(ot(N,m),N.h==0&&(N.src=null,E[Lt]=null)):$(m)}}}function bf(m){return m in lt?lt[m]:lt[m]="on"+m}function Oy(m,E){if(m.da)m=!0;else{E=new V(E,this);const N=m.listener,O=m.ha||m.src;m.fa&&nu(m),m=N.call(O,E)}return m}function Ho(m){return m=m[Lt],m instanceof Me?m:null}var $o="__closure_events_fn_"+(Math.random()*1e9>>>0);function Go(m){return typeof m=="function"?m:(m[$o]||(m[$o]=function(E){return m.handleEvent(E)}),m[$o])}function qe(){I.call(this),this.i=new Me(this),this.M=this,this.G=null}d(qe,I),qe.prototype[z]=!0,qe.prototype.removeEventListener=function(m,E,N,O){Qt(this,m,E,N,O)};function Ut(m,E){var N,O=m.G;if(O)for(N=[];O;O=O.G)N.push(O);if(m=m.M,O=E.type||E,typeof E=="string")E=new P(E,m);else if(E instanceof P)E.target=E.target||m;else{var j=E;E=new P(O,m),ae(E,j)}j=!0;let q,X;if(N)for(X=N.length-1;X>=0;X--)q=E.g=N[X],j=as(q,O,!0,E)&&j;if(q=E.g=m,j=as(q,O,!0,E)&&j,j=as(q,O,!1,E)&&j,N)for(X=0;X<N.length;X++)q=E.g=N[X],j=as(q,O,!1,E)&&j}qe.prototype.N=function(){if(qe.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const N=m.g[E];for(let O=0;O<N.length;O++)$(N[O]);delete m.g[E],m.h--}}this.G=null},qe.prototype.J=function(m,E,N,O){return this.i.add(String(m),E,!1,N,O)},qe.prototype.K=function(m,E,N,O){return this.i.add(String(m),E,!0,N,O)};function as(m,E,N,O){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let j=!0;for(let q=0;q<E.length;++q){const X=E[q];if(X&&!X.da&&X.capture==N){const fe=X.listener,Dt=X.ha||X.src;X.fa&&ot(m.i,X),j=fe.call(Dt,O)!==!1&&j}}return j&&!O.defaultPrevented}function Tf(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=c(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:a.setTimeout(m,E||0)}function iu(m){m.g=Tf(()=>{m.g=null,m.i&&(m.i=!1,iu(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class xf extends I{constructor(E,N){super(),this.m=E,this.l=N,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:iu(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function os(m){I.call(this),this.h=m,this.g={}}d(os,I);var Aa=[];function Ef(m){Q(m.g,function(E,N){this.g.hasOwnProperty(N)&&nu(E)},m),m.g={}}os.prototype.N=function(){os.Z.N.call(this),Ef(this)},os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ru=a.JSON.stringify,Ko=a.JSON.parse,Wo=class{stringify(m){return a.JSON.stringify(m,void 0)}parse(m){return a.JSON.parse(m,void 0)}};function EE(){}function SE(){}var su={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vy(){P.call(this,"d")}d(Vy,P);function Ly(){P.call(this,"c")}d(Ly,P);var Ra={},IE=null;function Sf(){return IE=IE||new qe}Ra.Ia="serverreachability";function AE(m){P.call(this,Ra.Ia,m)}d(AE,P);function au(m){const E=Sf();Ut(E,new AE(E))}Ra.STAT_EVENT="statevent";function RE(m,E){P.call(this,Ra.STAT_EVENT,m),this.stat=E}d(RE,P);function gn(m){const E=Sf();Ut(E,new RE(E,m))}Ra.Ja="timingevent";function CE(m,E){P.call(this,Ra.Ja,m),this.size=E}d(CE,P);function ou(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){m()},E)}function lu(){this.g=!0}lu.prototype.ua=function(){this.g=!1};function e4(m,E,N,O,j,q){m.info(function(){if(m.g)if(q){var X="",fe=q.split("&");for(let Be=0;Be<fe.length;Be++){var Dt=fe[Be].split("=");if(Dt.length>1){const jt=Dt[0];Dt=Dt[1];const qi=jt.split("_");X=qi.length>=2&&qi[1]=="type"?X+(jt+"="+Dt+"&"):X+(jt+"=redacted&")}}}else X=null;else X=q;return"XMLHTTP REQ ("+O+") [attempt "+j+"]: "+E+`
`+N+`
`+X})}function t4(m,E,N,O,j,q,X){m.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+j+"]: "+E+`
`+N+`
`+q+" "+X})}function Qo(m,E,N,O){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+i4(m,N)+(O?" "+O:"")})}function n4(m,E){m.info(function(){return"TIMEOUT: "+E})}lu.prototype.info=function(){};function i4(m,E){if(!m.g)return E;if(!E)return null;try{const q=JSON.parse(E);if(q){for(m=0;m<q.length;m++)if(Array.isArray(q[m])){var N=q[m];if(!(N.length<2)){var O=N[1];if(Array.isArray(O)&&!(O.length<1)){var j=O[0];if(j!="noop"&&j!="stop"&&j!="close")for(let X=1;X<O.length;X++)O[X]=""}}}}return ru(q)}catch{return E}}var If={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},PE={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},NE;function Uy(){}d(Uy,EE),Uy.prototype.g=function(){return new XMLHttpRequest},NE=new Uy;function cu(m){return encodeURIComponent(String(m))}function r4(m){var E=1;m=m.split(":");const N=[];for(;E>0&&m.length;)N.push(m.shift()),E--;return m.length&&N.push(m.join(":")),N}function ls(m,E,N,O){this.j=m,this.i=E,this.l=N,this.S=O||1,this.V=new os(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new DE}function DE(){this.i=null,this.g="",this.h=!1}var kE={},jy={};function zy(m,E,N){m.M=1,m.A=Rf(Fi(E)),m.u=N,m.R=!0,ME(m,null)}function ME(m,E){m.F=Date.now(),Af(m),m.B=Fi(m.A);var N=m.B,O=m.S;Array.isArray(O)||(O=[String(O)]),KE(N.i,"t",O),m.C=0,N=m.j.L,m.h=new DE,m.g=h1(m.j,N?E:null,!m.u),m.P>0&&(m.O=new xf(c(m.Y,m,m.g),m.P)),E=m.V,N=m.g,O=m.ba;var j="readystatechange";Array.isArray(j)||(j&&(Aa[0]=j.toString()),j=Aa);for(let q=0;q<j.length;q++){const X=Bn(N,j[q],O||E.handleEvent,!1,E.h||E);if(!X)break;E.g[X.key]=X}E=m.J?ce(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),au(),e4(m.i,m.v,m.B,m.l,m.S,m.u)}ls.prototype.ba=function(m){m=m.target;const E=this.O;E&&hs(m)==3?E.j():this.Y(m)},ls.prototype.Y=function(m){try{if(m==this.g)e:{const fe=hs(this.g),Dt=this.g.ya(),Be=this.g.ca();if(!(fe<3)&&(fe!=3||this.g&&(this.h.h||this.g.la()||e1(this.g)))){this.K||fe!=4||Dt==7||(Dt==8||Be<=0?au(3):au(2)),By(this);var E=this.g.ca();this.X=E;var N=s4(this);if(this.o=E==200,t4(this.i,this.v,this.B,this.l,this.S,fe,E),this.o){if(this.U&&!this.L){t:{if(this.g){var O,j=this.g;if((O=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(O)){var q=O;break t}}q=null}if(m=q)Qo(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fy(this,m);else{this.o=!1,this.m=3,gn(12),Ca(this),uu(this);break e}}if(this.R){m=!0;let jt;for(;!this.K&&this.C<N.length;)if(jt=a4(this,N),jt==jy){fe==4&&(this.m=4,gn(14),m=!1),Qo(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==kE){this.m=4,gn(15),Qo(this.i,this.l,N,"[Invalid Chunk]"),m=!1;break}else Qo(this.i,this.l,jt,null),Fy(this,jt);if(OE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),fe!=4||N.length!=0||this.h.h||(this.m=1,gn(16),m=!1),this.o=this.o&&m,!m)Qo(this.i,this.l,N,"[Invalid Chunked Response]"),Ca(this),uu(this);else if(N.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),Yy(X),X.P=!0,gn(11))}}else Qo(this.i,this.l,N,null),Fy(this,N);fe==4&&Ca(this),this.o&&!this.K&&(fe==4?o1(this.j,this):(this.o=!1,Af(this)))}else w4(this.g),E==400&&N.indexOf("Unknown SID")>0?(this.m=3,gn(12)):(this.m=0,gn(13)),Ca(this),uu(this)}}}catch{}finally{}};function s4(m){if(!OE(m))return m.g.la();const E=e1(m.g);if(E==="")return"";let N="";const O=E.length,j=hs(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Ca(m),uu(m),"";m.h.i=new a.TextDecoder}for(let q=0;q<O;q++)m.h.h=!0,N+=m.h.i.decode(E[q],{stream:!(j&&q==O-1)});return E.length=0,m.h.g+=N,m.C=0,m.h.g}function OE(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function a4(m,E){var N=m.C,O=E.indexOf(`
`,N);return O==-1?jy:(N=Number(E.substring(N,O)),isNaN(N)?kE:(O+=1,O+N>E.length?jy:(E=E.slice(O,O+N),m.C=O+N,E)))}ls.prototype.cancel=function(){this.K=!0,Ca(this)};function Af(m){m.T=Date.now()+m.H,VE(m,m.H)}function VE(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=ou(c(m.aa,m),E)}function By(m){m.D&&(a.clearTimeout(m.D),m.D=null)}ls.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(n4(this.i,this.B),this.M!=2&&(au(),gn(17)),Ca(this),this.m=2,uu(this)):VE(this,this.T-m)};function uu(m){m.j.I==0||m.K||o1(m.j,m)}function Ca(m){By(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,Ef(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function Fy(m,E){try{var N=m.j;if(N.I!=0&&(N.g==m||qy(N.h,m))){if(!m.L&&qy(N.h,m)&&N.I==3){try{var O=N.Ba.g.parse(E)}catch{O=null}if(Array.isArray(O)&&O.length==3){var j=O;if(j[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<m.F)kf(N),Nf(N);else break e;Qy(N),gn(18)}}else N.xa=j[1],0<N.xa-N.K&&j[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=ou(c(N.Va,N),6e3));jE(N.h)<=1&&N.ta&&(N.ta=void 0)}else Na(N,11)}else if((m.L||N.g==m)&&kf(N),!D(E))for(j=N.Ba.g.parse(E),E=0;E<j.length;E++){let Be=j[E];const jt=Be[0];if(!(jt<=N.K))if(N.K=jt,Be=Be[1],N.I==2)if(Be[0]=="c"){N.M=Be[1],N.ba=Be[2];const qi=Be[3];qi!=null&&(N.ka=qi,N.j.info("VER="+N.ka));const Da=Be[4];Da!=null&&(N.za=Da,N.j.info("SVER="+N.za));const ds=Be[5];ds!=null&&typeof ds=="number"&&ds>0&&(O=1.5*ds,N.O=O,N.j.info("backChannelRequestTimeoutMs_="+O)),O=N;const fs=m.g;if(fs){const Of=fs.g?fs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Of){var q=O.h;q.g||Of.indexOf("spdy")==-1&&Of.indexOf("quic")==-1&&Of.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Hy(q,q.h),q.h=null))}if(O.G){const Xy=fs.g?fs.g.getResponseHeader("X-HTTP-Session-Id"):null;Xy&&(O.wa=Xy,Ke(O.J,O.G,Xy))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-m.F,N.j.info("Handshake RTT: "+N.T+"ms")),O=N;var X=m;if(O.na=u1(O,O.L?O.ba:null,O.W),X.L){zE(O.h,X);var fe=X,Dt=O.O;Dt&&(fe.H=Dt),fe.D&&(By(fe),Af(fe)),O.g=X}else s1(O);N.i.length>0&&Df(N)}else Be[0]!="stop"&&Be[0]!="close"||Na(N,7);else N.I==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Na(N,7):Wy(N):Be[0]!="noop"&&N.l&&N.l.qa(Be),N.A=0)}}au(4)}catch{}}var o4=class{constructor(m,E){this.g=m,this.map=E}};function LE(m){this.l=m||10,a.PerformanceNavigationTiming?(m=a.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function UE(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function jE(m){return m.h?1:m.g?m.g.size:0}function qy(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function Hy(m,E){m.g?m.g.add(E):m.h=E}function zE(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}LE.prototype.cancel=function(){if(this.i=BE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function BE(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const N of m.g.values())E=E.concat(N.G);return E}return h(m.i)}var FE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function l4(m,E){if(m){m=m.split("&");for(let N=0;N<m.length;N++){const O=m[N].indexOf("=");let j,q=null;O>=0?(j=m[N].substring(0,O),q=m[N].substring(O+1)):j=m[N],E(j,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function cs(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof cs?(this.l=m.l,hu(this,m.j),this.o=m.o,this.g=m.g,du(this,m.u),this.h=m.h,$y(this,WE(m.i)),this.m=m.m):m&&(E=String(m).match(FE))?(this.l=!1,hu(this,E[1]||"",!0),this.o=fu(E[2]||""),this.g=fu(E[3]||"",!0),du(this,E[4]),this.h=fu(E[5]||"",!0),$y(this,E[6]||"",!0),this.m=fu(E[7]||"")):(this.l=!1,this.i=new pu(null,this.l))}cs.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(mu(E,qE,!0),":");var N=this.g;return(N||E=="file")&&(m.push("//"),(E=this.o)&&m.push(mu(E,qE,!0),"@"),m.push(cu(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&m.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&m.push("/"),m.push(mu(N,N.charAt(0)=="/"?h4:u4,!0))),(N=this.i.toString())&&m.push("?",N),(N=this.m)&&m.push("#",mu(N,f4)),m.join("")},cs.prototype.resolve=function(m){const E=Fi(this);let N=!!m.j;N?hu(E,m.j):N=!!m.o,N?E.o=m.o:N=!!m.g,N?E.g=m.g:N=m.u!=null;var O=m.h;if(N)du(E,m.u);else if(N=!!m.h){if(O.charAt(0)!="/")if(this.g&&!this.h)O="/"+O;else{var j=E.h.lastIndexOf("/");j!=-1&&(O=E.h.slice(0,j+1)+O)}if(j=O,j==".."||j==".")O="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){O=j.lastIndexOf("/",0)==0,j=j.split("/");const q=[];for(let X=0;X<j.length;){const fe=j[X++];fe=="."?O&&X==j.length&&q.push(""):fe==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),O&&X==j.length&&q.push("")):(q.push(fe),O=!0)}O=q.join("/")}else O=j}return N?E.h=O:N=m.i.toString()!=="",N?$y(E,WE(m.i)):N=!!m.m,N&&(E.m=m.m),E};function Fi(m){return new cs(m)}function hu(m,E,N){m.j=N?fu(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function du(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function $y(m,E,N){E instanceof pu?(m.i=E,m4(m.i,m.l)):(N||(E=mu(E,d4)),m.i=new pu(E,m.l))}function Ke(m,E,N){m.i.set(E,N)}function Rf(m){return Ke(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function fu(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function mu(m,E,N){return typeof m=="string"?(m=encodeURI(m).replace(E,c4),N&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function c4(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var qE=/[#\/\?@]/g,u4=/[#\?:]/g,h4=/[#\?]/g,d4=/[#\?@]/g,f4=/#/g;function pu(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function Pa(m){m.g||(m.g=new Map,m.h=0,m.i&&l4(m.i,function(E,N){m.add(decodeURIComponent(E.replace(/\+/g," ")),N)}))}t=pu.prototype,t.add=function(m,E){Pa(this),this.i=null,m=Yo(this,m);let N=this.g.get(m);return N||this.g.set(m,N=[]),N.push(E),this.h+=1,this};function HE(m,E){Pa(m),E=Yo(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function $E(m,E){return Pa(m),E=Yo(m,E),m.g.has(E)}t.forEach=function(m,E){Pa(this),this.g.forEach(function(N,O){N.forEach(function(j){m.call(E,j,O,this)},this)},this)};function GE(m,E){Pa(m);let N=[];if(typeof E=="string")$E(m,E)&&(N=N.concat(m.g.get(Yo(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)N=N.concat(m[E]);return N}t.set=function(m,E){return Pa(this),this.i=null,m=Yo(this,m),$E(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},t.get=function(m,E){return m?(m=GE(this,m),m.length>0?String(m[0]):E):E};function KE(m,E,N){HE(m,E),N.length>0&&(m.i=null,m.g.set(Yo(m,E),h(N)),m.h+=N.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let O=0;O<E.length;O++){var N=E[O];const j=cu(N);N=GE(this,N);for(let q=0;q<N.length;q++){let X=j;N[q]!==""&&(X+="="+cu(N[q])),m.push(X)}}return this.i=m.join("&")};function WE(m){const E=new pu;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function Yo(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function m4(m,E){E&&!m.j&&(Pa(m),m.i=null,m.g.forEach(function(N,O){const j=O.toLowerCase();O!=j&&(HE(this,O),KE(this,j,N))},m)),m.j=E}function p4(m,E){const N=new lu;if(a.Image){const O=new Image;O.onload=u(us,N,"TestLoadImage: loaded",!0,E,O),O.onerror=u(us,N,"TestLoadImage: error",!1,E,O),O.onabort=u(us,N,"TestLoadImage: abort",!1,E,O),O.ontimeout=u(us,N,"TestLoadImage: timeout",!1,E,O),a.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=m}else E(!1)}function g4(m,E){const N=new lu,O=new AbortController,j=setTimeout(()=>{O.abort(),us(N,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:O.signal}).then(q=>{clearTimeout(j),q.ok?us(N,"TestPingServer: ok",!0,E):us(N,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(j),us(N,"TestPingServer: error",!1,E)})}function us(m,E,N,O,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),O(N)}catch{}}function y4(){this.g=new Wo}function Gy(m){this.i=m.Sb||null,this.h=m.ab||!1}d(Gy,EE),Gy.prototype.g=function(){return new Cf(this.i,this.h)};function Cf(m,E){qe.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Cf,qe),t=Cf.prototype,t.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,yu(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||a).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gu(this)),this.readyState=0},t.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,yu(this)),this.g&&(this.readyState=3,yu(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;QE(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function QE(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}t.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?gu(this):yu(this),this.readyState==3&&QE(this)}},t.Oa=function(m){this.g&&(this.response=this.responseText=m,gu(this))},t.Na=function(m){this.g&&(this.response=m,gu(this))},t.ga=function(){this.g&&gu(this)};function gu(m){m.readyState=4,m.l=null,m.j=null,m.B=null,yu(m)}t.setRequestHeader=function(m,E){this.A.append(m,E)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var N=E.next();!N.done;)N=N.value,m.push(N[0]+": "+N[1]),N=E.next();return m.join(`\r
`)};function yu(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Cf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function YE(m){let E="";return Q(m,function(N,O){E+=O,E+=":",E+=N,E+=`\r
`}),E}function Ky(m,E,N){e:{for(O in N){var O=!1;break e}O=!0}O||(N=YE(N),typeof m=="string"?N!=null&&cu(N):Ke(m,E,N))}function dt(m){qe.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(dt,qe);var v4=/^https?$/i,_4=["POST","PUT"];t=dt.prototype,t.Fa=function(m){this.H=m},t.ea=function(m,E,N,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():NE.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(q){XE(this,q);return}if(m=N||"",N=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var j in O)N.set(j,O[j]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const q of O.keys())N.set(q,O.get(q));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(N.keys()).find(q=>q.toLowerCase()=="content-type"),j=a.FormData&&m instanceof a.FormData,!(Array.prototype.indexOf.call(_4,E,void 0)>=0)||O||j||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,X]of N)this.g.setRequestHeader(q,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(q){XE(this,q)}};function XE(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,JE(m),Pf(m)}function JE(m){m.A||(m.A=!0,Ut(m,"complete"),Ut(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Ut(this,"complete"),Ut(this,"abort"),Pf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pf(this,!0)),dt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ZE(this):this.Xa())},t.Xa=function(){ZE(this)};function ZE(m){if(m.h&&typeof s<"u"){if(m.v&&hs(m)==4)setTimeout(m.Ca.bind(m),0);else if(Ut(m,"readystatechange"),hs(m)==4){m.h=!1;try{const q=m.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var N;if(!(N=E)){var O;if(O=q===0){let X=String(m.D).match(FE)[1]||null;!X&&a.self&&a.self.location&&(X=a.self.location.protocol.slice(0,-1)),O=!v4.test(X?X.toLowerCase():"")}N=O}if(N)Ut(m,"complete"),Ut(m,"success");else{m.o=6;try{var j=hs(m)>2?m.g.statusText:""}catch{j=""}m.l=j+" ["+m.ca()+"]",JE(m)}}finally{Pf(m)}}}}function Pf(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const N=m.g;m.g=null,E||Ut(m,"ready");try{N.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function hs(m){return m.g?m.g.readyState:0}t.ca=function(){try{return hs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),Ko(E)}};function e1(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function w4(m){const E={};m=(m.g&&hs(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<m.length;O++){if(D(m[O]))continue;var N=r4(m[O]);const j=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const q=E[j]||[];E[j]=q,q.push(N)}te(E,function(O){return O.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function vu(m,E,N){return N&&N.internalChannelParams&&N.internalChannelParams[m]||E}function t1(m){this.za=0,this.i=[],this.j=new lu,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=vu("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=vu("baseRetryDelayMs",5e3,m),this.Za=vu("retryDelaySeedMs",1e4,m),this.Ta=vu("forwardChannelMaxRetries",2,m),this.va=vu("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new LE(m&&m.concurrentRequestLimit),this.Ba=new y4,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=t1.prototype,t.ka=8,t.I=1,t.connect=function(m,E,N,O){gn(0),this.W=m,this.H=E||{},N&&O!==void 0&&(this.H.OSID=N,this.H.OAID=O),this.F=this.X,this.J=u1(this,null,this.W),Df(this)};function Wy(m){if(n1(m),m.I==3){var E=m.V++,N=Fi(m.J);if(Ke(N,"SID",m.M),Ke(N,"RID",E),Ke(N,"TYPE","terminate"),_u(m,N),E=new ls(m,m.j,E),E.M=2,E.A=Rf(Fi(N)),N=!1,a.navigator&&a.navigator.sendBeacon)try{N=a.navigator.sendBeacon(E.A.toString(),"")}catch{}!N&&a.Image&&(new Image().src=E.A,N=!0),N||(E.g=h1(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Af(E)}c1(m)}function Nf(m){m.g&&(Yy(m),m.g.cancel(),m.g=null)}function n1(m){Nf(m),m.v&&(a.clearTimeout(m.v),m.v=null),kf(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&a.clearTimeout(m.m),m.m=null)}function Df(m){if(!UE(m.h)&&!m.m){m.m=!0;var E=m.Ea;S||T(),C||(S(),C=!0),x.add(E,m),m.D=0}}function b4(m,E){return jE(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=ou(c(m.Ea,m,E),l1(m,m.D)),m.D++,!0)}t.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const j=new ls(this,this.j,m);let q=this.o;if(this.U&&(q?(q=ce(q),ae(q,this.U)):q=this.U),this.u!==null||this.R||(j.J=q,q=null),this.S)e:{for(var E=0,N=0;N<this.i.length;N++){t:{var O=this.i[N];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(E+=O,E>4096){E=N;break e}if(E===4096||N===this.i.length-1){E=N+1;break e}}E=1e3}else E=1e3;E=r1(this,j,E),N=Fi(this.J),Ke(N,"RID",m),Ke(N,"CVER",22),this.G&&Ke(N,"X-HTTP-Session-Id",this.G),_u(this,N),q&&(this.R?E="headers="+cu(YE(q))+"&"+E:this.u&&Ky(N,this.u,q)),Hy(this.h,j),this.Ra&&Ke(N,"TYPE","init"),this.S?(Ke(N,"$req",E),Ke(N,"SID","null"),j.U=!0,zy(j,N,null)):zy(j,N,E),this.I=2}}else this.I==3&&(m?i1(this,m):this.i.length==0||UE(this.h)||i1(this))};function i1(m,E){var N;E?N=E.l:N=m.V++;const O=Fi(m.J);Ke(O,"SID",m.M),Ke(O,"RID",N),Ke(O,"AID",m.K),_u(m,O),m.u&&m.o&&Ky(O,m.u,m.o),N=new ls(m,m.j,N,m.D+1),m.u===null&&(N.J=m.o),E&&(m.i=E.G.concat(m.i)),E=r1(m,N,1e3),N.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Hy(m.h,N),zy(N,O,E)}function _u(m,E){m.H&&Q(m.H,function(N,O){Ke(E,O,N)}),m.l&&Q({},function(N,O){Ke(E,O,N)})}function r1(m,E,N){N=Math.min(m.i.length,N);const O=m.l?c(m.l.Ka,m.l,m):null;e:{var j=m.i;let fe=-1;for(;;){const Dt=["count="+N];fe==-1?N>0?(fe=j[0].g,Dt.push("ofs="+fe)):fe=0:Dt.push("ofs="+fe);let Be=!0;for(let jt=0;jt<N;jt++){var q=j[jt].g;const qi=j[jt].map;if(q-=fe,q<0)fe=Math.max(0,j[jt].g-100),Be=!1;else try{q="req"+q+"_"||"";try{var X=qi instanceof Map?qi:Object.entries(qi);for(const[Da,ds]of X){let fs=ds;o(ds)&&(fs=ru(ds)),Dt.push(q+Da+"="+encodeURIComponent(fs))}}catch(Da){throw Dt.push(q+"type="+encodeURIComponent("_badmap")),Da}}catch{O&&O(qi)}}if(Be){X=Dt.join("&");break e}}X=void 0}return m=m.i.splice(0,N),E.G=m,X}function s1(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;S||T(),C||(S(),C=!0),x.add(E,m),m.A=0}}function Qy(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=ou(c(m.Da,m),l1(m,m.A)),m.A++,!0)}t.Da=function(){if(this.v=null,a1(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=ou(c(this.Wa,this),m)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,gn(10),Nf(this),a1(this))};function Yy(m){m.B!=null&&(a.clearTimeout(m.B),m.B=null)}function a1(m){m.g=new ls(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=Fi(m.na);Ke(E,"RID","rpc"),Ke(E,"SID",m.M),Ke(E,"AID",m.K),Ke(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&Ke(E,"TO",m.ia),Ke(E,"TYPE","xmlhttp"),_u(m,E),m.u&&m.o&&Ky(E,m.u,m.o),m.O&&(m.g.H=m.O);var N=m.g;m=m.ba,N.M=1,N.A=Rf(Fi(E)),N.u=null,N.R=!0,ME(N,m)}t.Va=function(){this.C!=null&&(this.C=null,Nf(this),Qy(this),gn(19))};function kf(m){m.C!=null&&(a.clearTimeout(m.C),m.C=null)}function o1(m,E){var N=null;if(m.g==E){kf(m),Yy(m),m.g=null;var O=2}else if(qy(m.h,E))N=E.G,zE(m.h,E),O=1;else return;if(m.I!=0){if(E.o)if(O==1){N=E.u?E.u.length:0,E=Date.now()-E.F;var j=m.D;O=Sf(),Ut(O,new CE(O,N)),Df(m)}else s1(m);else if(j=E.m,j==3||j==0&&E.X>0||!(O==1&&b4(m,E)||O==2&&Qy(m)))switch(N&&N.length>0&&(E=m.h,E.i=E.i.concat(N)),j){case 1:Na(m,5);break;case 4:Na(m,10);break;case 3:Na(m,6);break;default:Na(m,2)}}}function l1(m,E){let N=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(N*=2),N*E}function Na(m,E){if(m.j.info("Error code "+E),E==2){var N=c(m.bb,m),O=m.Ua;const j=!O;O=new cs(O||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||hu(O,"https"),Rf(O),j?p4(O.toString(),N):g4(O.toString(),N)}else gn(2);m.I=0,m.l&&m.l.pa(E),c1(m),n1(m)}t.bb=function(m){m?(this.j.info("Successfully pinged google.com"),gn(2)):(this.j.info("Failed to ping google.com"),gn(1))};function c1(m){if(m.I=0,m.ja=[],m.l){const E=BE(m.h);(E.length!=0||m.i.length!=0)&&(p(m.ja,E),p(m.ja,m.i),m.h.i.length=0,h(m.i),m.i.length=0),m.l.oa()}}function u1(m,E,N){var O=N instanceof cs?Fi(N):new cs(N);if(O.g!="")E&&(O.g=E+"."+O.g),du(O,O.u);else{var j=a.location;O=j.protocol,E=E?E+"."+j.hostname:j.hostname,j=+j.port;const q=new cs(null);O&&hu(q,O),E&&(q.g=E),j&&du(q,j),N&&(q.h=N),O=q}return N=m.G,E=m.wa,N&&E&&Ke(O,N,E),Ke(O,"VER",m.ka),_u(m,O),O}function h1(m,E,N){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new dt(new Gy({ab:N})):new dt(m.ma),E.Fa(m.L),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function d1(){}t=d1.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Mf(){}Mf.prototype.g=function(m,E){return new Fn(m,E)};function Fn(m,E){qe.call(this),this.g=new t1(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!D(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!D(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new Xo(this)}d(Fn,qe),Fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){Wy(this.g)},Fn.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var N={};N.__data__=m,m=N}else this.v&&(N={},N.__data__=ru(m),m=N);E.i.push(new o4(E.Ya++,m)),E.I==3&&Df(E)},Fn.prototype.N=function(){this.g.l=null,delete this.j,Wy(this.g),delete this.g,Fn.Z.N.call(this)};function f1(m){Vy.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const N in E){m=N;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}d(f1,Vy);function m1(){Ly.call(this),this.status=1}d(m1,Ly);function Xo(m){this.g=m}d(Xo,d1),Xo.prototype.ra=function(){Ut(this.g,"a")},Xo.prototype.qa=function(m){Ut(this.g,new f1(m))},Xo.prototype.pa=function(m){Ut(this.g,new m1)},Xo.prototype.oa=function(){Ut(this.g,"b")},Mf.prototype.createWebChannel=Mf.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,Wk=function(){return new Mf},Kk=function(){return Sf()},Gk=Ra,j_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},If.NO_ERROR=0,If.TIMEOUT=8,If.HTTP_ERROR=6,zm=If,PE.COMPLETE="complete",$k=PE,SE.EventType=su,su.OPEN="a",su.CLOSE="b",su.ERROR="c",su.MESSAGE="d",qe.prototype.listen=qe.prototype.J,Wu=SE,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,Hk=dt}).apply(typeof tm<"u"?tm:typeof self<"u"?self:typeof window<"u"?window:{});const jI="@firebase/firestore",zI="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new $d("@firebase/firestore");function hl(){return aa.logLevel}function $q(t){aa.setLogLevel(t)}function K(t,...e){if(aa.logLevel<=ge.DEBUG){const n=e.map(ET);aa.debug(`Firestore (${$c}): ${t}`,...n)}}function bt(t,...e){if(aa.logLevel<=ge.ERROR){const n=e.map(ET);aa.error(`Firestore (${$c}): ${t}`,...n)}}function dr(t,...e){if(aa.logLevel<=ge.WARN){const n=e.map(ET);aa.warn(`Firestore (${$c}): ${t}`,...n)}}function ET(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Qk(t,i,n)}function Qk(t,e,n){let i=`FIRESTORE (${$c}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw bt(i),new Error(i)}function ie(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||Qk(e,r,i)}function Gq(t,e){t||ee(57014,e)}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Kt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qt.UNAUTHENTICATED))}shutdown(){}}class Wq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Qq{constructor(e){this.t=e,this.currentUser=qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ie(this.o===void 0,42304);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new sn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new sn,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},o=l=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new sn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ie(typeof i.accessToken=="string",31837,{l:i}),new Yk(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ie(e===null||typeof e=="string",2055,{h:e}),new qt(e)}}class Yq{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Xq{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new Yq(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class BI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Jq{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ce(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ie(this.o===void 0,3512);const i=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,K("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new BI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ie(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new BI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zq(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=Zq(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}}function le(t,e){return t<e?-1:t>e?1:0}function z_(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),s=e.charAt(i);if(r!==s)return Yv(r)===Yv(s)?le(r,s):Yv(r)?1:-1}return le(t.length,e.length)}const eH=55296,tH=57343;function Yv(t){const e=t.charCodeAt(0);return e>=eH&&e<=tH}function uc(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function Xk(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="__name__";class Hi{constructor(e,n,i){n===void 0?n=0:n>e.length&&ee(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&ee(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Hi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Hi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=Hi.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return le(e.length,n.length)}static compareSegments(e,n){const i=Hi.isNumericId(e),r=Hi.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Hi.extractNumericId(e).compare(Hi.extractNumericId(n)):z_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qs.fromString(e.substring(4,e.length-2))}}class be extends Hi{construct(e,n,i){return new be(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new G(B.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new be(n)}static emptyPath(){return new be([])}}const nH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends Hi{construct(e,n,i){return new rt(e,n,i)}static isValidIdentifier(e){return nH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===FI}static keyField(){return new rt([FI])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new G(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const o=e[r];if(o==="\\"){if(r+1===e.length)throw new G(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else o==="`"?(a=!a,r++):o!=="."||a?(i+=o,r++):(s(),r++)}if(s(),a)throw new G(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(be.fromString(e))}static fromName(e){return new Y(be.fromString(e).popFirst(5))}static empty(){return new Y(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new be(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t,e,n){if(!n)throw new G(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Jk(t,e,n,i){if(e===!0&&i===!0)throw new G(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qI(t){if(!Y.isDocumentKey(t))throw new G(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function HI(t){if(Y.isDocumentKey(t))throw new G(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Zk(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Zg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee(12329,{type:typeof t})}function Ie(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zg(t);throw new G(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function eM(t,e){if(e<=0)throw new G(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Zd(t,e){if(!Zk(t))throw new G(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new G(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=-62135596800,GI=1e6;class De{static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*GI);return new De(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<$I)throw new G(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GI}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:De._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zd(e,De._jsonSchema))return new De(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$I;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}De._jsonSchemaVersion="firestore/timestamp/1.0",De._jsonSchema={type:Nt("string",De._jsonSchemaVersion),seconds:Nt("number"),nanoseconds:Nt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new De(0,0))}static max(){return new re(new De(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=-1;class Fp{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}}function B_(t){return t.fields.find(e=>e.kind===2)}function Ba(t){return t.fields.filter(e=>e.kind!==2)}Fp.UNKNOWN_ID=-1;class Bm{constructor(e,n){this.fieldPath=e,this.kind=n}}class ud{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ud(0,ai.min())}}function tM(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=re.fromTimestamp(i===1e9?new De(n+1,0):new De(n,i));return new ai(r,Y.empty(),e)}function nM(t){return new ai(t.readTime,t.key,hc)}class ai{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ai(re.min(),Y.empty(),hc)}static max(){return new ai(re.max(),Y.empty(),hc)}}function AT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wa(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==iM)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,i)=>{n(e)})}static reject(e){return new U((n,i)=>{i(e)})}static waitFor(e){return new U((n,i)=>{let r=0,s=0,a=!1;e.forEach(o=>{++r,o.next(()=>{++s,a&&s===r&&n()},l=>i(l))}),a=!0,s===r&&n()})}static or(e){let n=U.resolve(!1);for(const i of e)n=n.next(r=>r?U.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new U((i,r)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{a[c]=u,++o,o===s&&i(a)},u=>r(u))}})}static doWhile(e,n){return new U((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="SimpleDb";class ey{static open(e,n,i,r){try{return new ey(n,e.transaction(r,i))}catch(s){throw new xh(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new sn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new xh(e,n.error)):this.S.resolve()},this.transaction.onerror=i=>{const r=RT(i.target.error);this.S.reject(new xh(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(K($n,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new rH(n)}}class sr{static delete(e){return K($n,"Removing database:",e),$a(Gb().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!id())return!1;if(sr.F())return!0;const e=Ae(),n=sr.M(e),i=0<n&&n<10,r=sM(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,n,i){this.name=e,this.version=n,this.N=i,this.B=null,sr.M(Ae())===12.2&&bt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(K($n,"Opening database:",this.name),this.db=await new Promise((n,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{const a=s.target.result;n(a)},r.onblocked=()=>{i(new xh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{const a=s.target.error;a.name==="VersionError"?i(new G(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?i(new G(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):i(new xh(e,a))},r.onupgradeneeded=s=>{K($n,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,r.transaction,s.oldVersion,this.version).next(()=>{K($n,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,r){const s=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=ey.open(this.db,e,s?"readonly":"readwrite",i),l=r(o).next(c=>(o.C(),c)).catch(c=>(o.abort(c),U.reject(c))).toPromise();return l.catch(()=>{}),await o.D,l}catch(o){const l=o,c=l.name!=="FirebaseError"&&a<3;if(K($n,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function sM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class iH{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return $a(this.U.delete())}}class xh extends G{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ba(t){return t.name==="IndexedDbTransactionError"}class rH{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(K($n,"PUT",this.store.name,e,n),i=this.store.put(n,e)):(K($n,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),$a(i)}add(e){return K($n,"ADD",this.store.name,e,e),$a(this.store.add(e))}get(e){return $a(this.store.get(e)).next(n=>(n===void 0&&(n=null),K($n,"GET",this.store.name,e,n),n))}delete(e){return K($n,"DELETE",this.store.name,e),$a(this.store.delete(e))}count(){return K($n,"COUNT",this.store.name),$a(this.store.count())}J(e,n){const i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const s=r.getAll(i.range);return new U((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}})}{const s=this.cursor(i),a=[];return this.H(s,(o,l)=>{a.push(l)}).next(()=>a)}}Y(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new U((r,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{r(a.target.result)}})}Z(e,n){K($n,"DELETE ALL",this.store.name);const i=this.options(e,n);i.X=!1;const r=this.cursor(i);return this.H(r,(s,a,o)=>o.delete())}ee(e,n){let i;n?i=e:(i={},n=e);const r=this.cursor(i);return this.H(r,n)}te(e){const n=this.cursor({});return new U((i,r)=>{n.onerror=s=>{const a=RT(s.target.error);r(a)},n.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():i()}):i()}})}H(e,n){const i=[];return new U((r,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void r();const l=new iH(o),c=n(o.primaryKey,o.value,l);if(c instanceof U){const u=c.catch(d=>(l.done(),U.reject(d)));i.push(u)}l.isDone?r():l.G===null?o.continue():o.continue(l.G)}}).next(()=>U.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function $a(t){return new U((e,n)=>{t.onsuccess=i=>{const r=i.target.result;e(r)},t.onerror=i=>{const r=RT(i.target.error);n(r)}})}let KI=!1;function RT(t){const e=sr.M(Ae());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new G("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return KI||(KI=!0,setTimeout(()=>{throw i},0)),i}}return t}const Eh="IndexBackfiller";class sH{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){K(Eh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();K(Eh,`Documents written: ${n}`)}catch(n){ba(n)?K(Eh,"Ignoring IndexedDB error during index backfill: ",n):await wa(n)}await this.re(6e4)})}}class aH{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const i=new Set;let r=n,s=!0;return U.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!i.has(a))return K(Eh,`Processing collection: ${a}`),this.oe(e,a,r).next(o=>{r-=o,i.add(a)});s=!1})).next(()=>n-r)}oe(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this._e(r,s)).next(o=>(K(Eh,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>a.size)}))}_e(e,n){let i=e;return n.changes.forEach((r,s)=>{const a=nM(s);AT(a,i)>0&&(i=a)}),new ai(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}kn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=-1;function ef(t){return t==null}function hd(t){return t===0&&1/t==-1/0}function aM(t){return typeof t=="number"&&Number.isInteger(t)&&!hd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="";function mn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=WI(e)),e=oH(t.get(n),e);return WI(e)}function oH(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case qp:n+="";break;default:n+=s}}return n}function WI(t){return t+qp+""}function tr(t){const e=t.length;if(ie(e>=2,64408,{path:t}),e===2)return ie(t.charAt(0)===qp&&t.charAt(1)==="",56145,{path:t}),be.emptyPath();const n=e-2,i=[];let r="";for(let s=0;s<e;){const a=t.indexOf(qp,s);switch((a<0||a>n)&&ee(50515,{path:t}),t.charAt(a+1)){case"":const o=t.substring(s,a);let l;r.length===0?l=o:(r+=o,l=r,r=""),i.push(l);break;case"":r+=t.substring(s,a),r+="\0";break;case"":r+=t.substring(s,a+1);break;default:ee(61167,{path:t})}s=a+2}return new be(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa="remoteDocuments",tf="owner",tl="owner",dd="mutationQueues",lH="userId",Mi="mutations",QI="batchId",Xa="userMutationsIndex",YI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t,e){return[t,mn(e)]}function oM(t,e,n){return[t,mn(e),n]}const cH={},dc="documentMutations",Hp="remoteDocumentsV14",uH=["prefixPath","collectionGroup","readTime","documentId"],qm="documentKeyIndex",hH=["prefixPath","collectionGroup","documentId"],lM="collectionGroupIndex",dH=["collectionGroup","readTime","prefixPath","documentId"],fd="remoteDocumentGlobal",F_="remoteDocumentGlobalKey",fc="targets",cM="queryTargetsIndex",fH=["canonicalId","targetId"],mc="targetDocuments",mH=["targetId","path"],CT="documentTargetsIndex",pH=["path","targetId"],$p="targetGlobalKey",co="targetGlobal",md="collectionParents",gH=["collectionId","parent"],pc="clientMetadata",yH="clientId",ty="bundles",vH="bundleId",ny="namedQueries",_H="name",PT="indexConfiguration",wH="indexId",q_="collectionGroupIndex",bH="collectionGroup",Sh="indexState",TH=["indexId","uid"],uM="sequenceNumberIndex",xH=["uid","sequenceNumber"],Ih="indexEntries",EH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hM="documentKeyIndex",SH=["indexId","uid","orderedDocumentKey"],iy="documentOverlays",IH=["userId","collectionPath","documentId"],H_="collectionPathOverlayIndex",AH=["userId","collectionPath","largestBatchId"],dM="collectionGroupOverlayIndex",RH=["userId","collectionGroup","largestBatchId"],NT="globals",CH="name",fM=[dd,Mi,dc,Fa,fc,tf,co,mc,pc,fd,md,ty,ny],PH=[...fM,iy],mM=[dd,Mi,dc,Hp,fc,tf,co,mc,pc,fd,md,ty,ny,iy],pM=mM,DT=[...pM,PT,Sh,Ih],NH=DT,gM=[...DT,NT],DH=gM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_ extends rM{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Vt(t,e){const n=J(t);return sr.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ta(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.comparator=e,this.root=n||Jt.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nm(this.root,e,this.comparator,!1)}getReverseIterator(){return new nm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nm(this.root,e,this.comparator,!0)}}class nm{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??Jt.RED,this.left=r??Jt.EMPTY,this.right=s??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new Jt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Jt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ee(27949);return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw ee(57766)}get value(){throw ee(16141)}get color(){throw ee(16727)}get left(){throw ee(29726)}get right(){throw ee(36894)}copy(e,n,i,r,s){return this}insert(e,n,i){return new Jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new JI(this.data.getIterator())}getIteratorFrom(e){return new JI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Ue)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ue(this.comparator);return n.data=e,n}}class JI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function nl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new Mn([])}unionWith(e){let n=new Ue(rt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Mn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uc(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kH(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new vM("Invalid base64 string: "+s):s}}(e);return new gt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gt.EMPTY_BYTE_STRING=new gt("");const MH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(t){if(ie(!!t,39018),typeof t=="string"){let e=0;const n=MH.exec(t);if(ie(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:it(t.seconds),nanos:it(t.nanos)}}function it(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wr(t){return typeof t=="string"?gt.fromBase64String(t):gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M="server_timestamp",wM="__type__",bM="__previous_value__",TM="__local_write_time__";function ry(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[wM])==null?void 0:i.stringValue)===_M}function sy(t){const e=t.mapValue.fields[bM];return ry(e)?sy(e):e}function pd(t){const e=Kr(t.mapValue.fields[TM].timestampValue);return new De(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OH{constructor(e,n,i,r,s,a,o,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const G_="(default)";class oa{constructor(e,n){this.projectId=e,this.database=n||G_}static empty(){return new oa("","")}get isDefaultDatabase(){return this.database===G_}isEqual(e){return e instanceof oa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="__type__",xM="__max__",Vs={mapValue:{fields:{__type__:{stringValue:xM}}}},MT="__vector__",gc="value",Hm={nullValue:"NULL_VALUE"};function la(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ry(t)?4:EM(t)?9007199254740991:ay(t)?10:11:ee(28295,{value:t})}function fr(t,e){if(t===e)return!0;const n=la(t);if(n!==la(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return pd(t).isEqual(pd(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Kr(r.timestampValue),o=Kr(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Wr(r.bytesValue).isEqual(Wr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return it(r.geoPointValue.latitude)===it(s.geoPointValue.latitude)&&it(r.geoPointValue.longitude)===it(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return it(r.integerValue)===it(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=it(r.doubleValue),o=it(s.doubleValue);return a===o?hd(a)===hd(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return uc(t.arrayValue.values||[],e.arrayValue.values||[],fr);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},o=s.mapValue.fields||{};if(XI(a)!==XI(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!fr(a[l],o[l])))return!1;return!0}(t,e);default:return ee(52216,{left:t})}}function gd(t,e){return(t.values||[]).find(n=>fr(n,e))!==void 0}function ca(t,e){if(t===e)return 0;const n=la(t),i=la(e);if(n!==i)return le(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=it(s.integerValue||s.doubleValue),l=it(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return ZI(t.timestampValue,e.timestampValue);case 4:return ZI(pd(t),pd(e));case 5:return z_(t.stringValue,e.stringValue);case 6:return function(s,a){const o=Wr(s),l=Wr(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const u=le(o[c],l[c]);if(u!==0)return u}return le(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=le(it(s.latitude),it(a.latitude));return o!==0?o:le(it(s.longitude),it(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return eA(t.arrayValue,e.arrayValue);case 10:return function(s,a){var f,h,p,g;const o=s.fields||{},l=a.fields||{},c=(f=o[gc])==null?void 0:f.arrayValue,u=(h=l[gc])==null?void 0:h.arrayValue,d=le(((p=c==null?void 0:c.values)==null?void 0:p.length)||0,((g=u==null?void 0:u.values)==null?void 0:g.length)||0);return d!==0?d:eA(c,u)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Vs.mapValue&&a===Vs.mapValue)return 0;if(s===Vs.mapValue)return 1;if(a===Vs.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=z_(l[d],u[d]);if(f!==0)return f;const h=ca(o[l[d]],c[u[d]]);if(h!==0)return h}return le(l.length,u.length)}(t.mapValue,e.mapValue);default:throw ee(23264,{he:n})}}function ZI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=Kr(t),i=Kr(e),r=le(n.seconds,i.seconds);return r!==0?r:le(n.nanos,i.nanos)}function eA(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=ca(n[r],i[r]);if(s)return s}return le(n.length,i.length)}function yc(t){return K_(t)}function K_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Kr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=K_(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${K_(n.fields[a])}`;return r+"}"}(t.mapValue):ee(61005,{value:t})}function $m(t){switch(la(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sy(t);return e?16+$m(e):16;case 5:return 2*t.stringValue.length;case 6:return Wr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+$m(s),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return Ta(i.fields,(s,a)=>{r+=s.length+$m(a)}),r}(t.mapValue);default:throw ee(13486,{value:t})}}function bo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function W_(t){return!!t&&"integerValue"in t}function yd(t){return!!t&&"arrayValue"in t}function tA(t){return!!t&&"nullValue"in t}function nA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gm(t){return!!t&&"mapValue"in t}function ay(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[kT])==null?void 0:i.stringValue)===MT}function Ah(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ta(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Ah(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ah(t.arrayValue.values[n]);return e}return{...t}}function EM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===xM}const SM={mapValue:{fields:{[kT]:{stringValue:MT},[gc]:{arrayValue:{}}}}};function VH(t){return"nullValue"in t?Hm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?bo(oa.empty(),Y.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?ay(t)?SM:{mapValue:{}}:ee(35942,{value:t})}function LH(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?bo(oa.empty(),Y.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?SM:"mapValue"in t?ay(t)?{mapValue:{}}:Vs:ee(61959,{value:t})}function iA(t,e){const n=ca(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function rA(t,e){const n=ca(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Gm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ah(n)}setAll(e){let n=rt.emptyPath(),i={},r=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=o.popLast()}a?i[o.lastSegment()]=Ah(a):r.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Gm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Gm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Ta(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new tn(Ah(this.value))}}function IM(t){const e=[];return Ta(t.fields,(n,i)=>{const r=new rt([n]);if(Gm(i)){const s=IM(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new Mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n,i,r,s,a,o){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Xe(e,0,re.min(),re.min(),re.min(),tn.empty(),0)}static newFoundDocument(e,n,i,r){return new Xe(e,1,n,re.min(),i,r,0)}static newNoDocument(e,n){return new Xe(e,2,n,re.min(),re.min(),tn.empty(),0)}static newUnknownDocument(e,n){return new Xe(e,3,n,re.min(),re.min(),tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n){this.position=e,this.inclusive=n}}function sA(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=Y.comparator(Y.fromName(a.referenceValue),n.key):i=ca(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function aA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n="asc"){this.field=e,this.dir=n}}function UH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{}class xe extends AM{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new jH(e,n,i):n==="array-contains"?new FH(e,i):n==="in"?new kM(e,i):n==="not-in"?new qH(e,i):n==="array-contains-any"?new HH(e,i):new xe(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new zH(e,i):new BH(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ca(n,this.value)):n!==null&&la(this.value)===la(n)&&this.matchesComparison(ca(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Le extends AM{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Le(e,n)}matches(e){return vc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function vc(t){return t.op==="and"}function Q_(t){return t.op==="or"}function OT(t){return RM(t)&&vc(t)}function RM(t){for(const e of t.filters)if(e instanceof Le)return!1;return!0}function Y_(t){if(t instanceof xe)return t.field.canonicalString()+t.op.toString()+yc(t.value);if(OT(t))return t.filters.map(e=>Y_(e)).join(",");{const e=t.filters.map(n=>Y_(n)).join(",");return`${t.op}(${e})`}}function CM(t,e){return t instanceof xe?function(i,r){return r instanceof xe&&i.op===r.op&&i.field.isEqual(r.field)&&fr(i.value,r.value)}(t,e):t instanceof Le?function(i,r){return r instanceof Le&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,o)=>s&&CM(a,r.filters[o]),!0):!1}(t,e):void ee(19439)}function PM(t,e){const n=t.filters.concat(e);return Le.create(n,t.op)}function NM(t){return t instanceof xe?function(n){return`${n.field.canonicalString()} ${n.op} ${yc(n.value)}`}(t):t instanceof Le?function(n){return n.op.toString()+" {"+n.getFilters().map(NM).join(" ,")+"}"}(t):"Filter"}class jH extends xe{constructor(e,n,i){super(e,n,i),this.key=Y.fromName(i.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class zH extends xe{constructor(e,n){super(e,"in",n),this.keys=DM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class BH extends xe{constructor(e,n){super(e,"not-in",n),this.keys=DM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function DM(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>Y.fromName(i.referenceValue))}class FH extends xe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return yd(n)&&gd(n.arrayValue,this.value)}}class kM extends xe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&gd(this.value.arrayValue,n)}}class qH extends xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(gd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!gd(this.value.arrayValue,n)}}class HH extends xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!yd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>gd(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $H{constructor(e,n=null,i=[],r=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function X_(t,e=null,n=[],i=[],r=null,s=null,a=null){return new $H(t,e,n,i,r,s,a)}function To(t){const e=J(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Y_(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),ef(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>yc(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>yc(i)).join(",")),e.Te=n}return e.Te}function nf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!UH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!CM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!aA(t.startAt,e.startAt)&&aA(t.endAt,e.endAt)}function Gp(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Kp(t,e){return t.filters.filter(n=>n instanceof xe&&n.field.isEqual(e))}function oA(t,e,n){let i=Hm,r=!0;for(const s of Kp(t,e)){let a=Hm,o=!0;switch(s.op){case"<":case"<=":a=VH(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=Hm}iA({value:i,inclusive:r},{value:a,inclusive:o})<0&&(i=a,r=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];iA({value:i,inclusive:r},{value:a,inclusive:n.inclusive})<0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}function lA(t,e,n){let i=Vs,r=!0;for(const s of Kp(t,e)){let a=Vs,o=!0;switch(s.op){case">=":case">":a=LH(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=Vs}rA({value:i,inclusive:r},{value:a,inclusive:o})>0&&(i=a,r=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];rA({value:i,inclusive:r},{value:a,inclusive:n.inclusive})>0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n=null,i=[],r=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function MM(t,e,n,i,r,s,a,o){return new es(t,e,n,i,r,s,a,o)}function Gc(t){return new es(t)}function cA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function VT(t){return t.collectionGroup!==null}function Hl(t){const e=J(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Ue(rt.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new vd(s,i))}),n.has(rt.keyField().canonicalString())||e.Ie.push(new vd(rt.keyField(),i))}return e.Ie}function En(t){const e=J(t);return e.Ee||(e.Ee=GH(e,Hl(t))),e.Ee}function GH(t,e){if(t.limitType==="F")return X_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new vd(r.field,s)});const n=t.endAt?new ua(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ua(t.startAt.position,t.startAt.inclusive):null;return X_(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function J_(t,e){const n=t.filters.concat([e]);return new es(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Wp(t,e,n){return new es(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rf(t,e){return nf(En(t),En(e))&&t.limitType===e.limitType}function OM(t){return`${To(En(t))}|lt:${t.limitType}`}function dl(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>NM(r)).join(", ")}]`),ef(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>yc(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>yc(r)).join(",")),`Target(${i})`}(En(t))}; limitType=${t.limitType})`}function sf(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Y.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Hl(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,o,l){const c=sA(a,o,l);return a.inclusive?c<=0:c<0}(i.startAt,Hl(i),r)||i.endAt&&!function(a,o,l){const c=sA(a,o,l);return a.inclusive?c>=0:c>0}(i.endAt,Hl(i),r))}(t,e)}function VM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function LM(t){return(e,n)=>{let i=!1;for(const r of Hl(t)){const s=KH(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function KH(t,e,n){const i=t.field.isKeyField()?Y.comparator(e.key,n.key):function(s,a,o){const l=a.data.field(s),c=o.data.field(s);return l!==null&&c!==null?ca(l,c):ee(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ee(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ta(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return yM(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WH=new Ge(Y.comparator);function On(){return WH}const UM=new Ge(Y.comparator);function Qu(...t){let e=UM;for(const n of t)e=e.insert(n.key,n);return e}function jM(t){let e=UM;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function nr(){return Rh()}function zM(){return Rh()}function Rh(){return new ts(t=>t.toString(),(t,e)=>t.isEqual(e))}const QH=new Ge(Y.comparator),YH=new Ue(Y.comparator);function de(...t){let e=YH;for(const n of t)e=e.add(n);return e}const XH=new Ue(le);function LT(){return XH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hd(e)?"-0":e}}function BM(t){return{integerValue:""+t}}function FM(t,e){return aM(e)?BM(e):UT(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this._=void 0}}function JH(t,e,n){return t instanceof _c?function(r,s){const a={fields:{[wM]:{stringValue:_M},[TM]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&ry(s)&&(s=sy(s)),s&&(a.fields[bM]=s),{mapValue:a}}(n,e):t instanceof xo?HM(t,e):t instanceof Eo?$M(t,e):function(r,s){const a=qM(r,s),o=uA(a)+uA(r.Ae);return W_(a)&&W_(r.Ae)?BM(o):UT(r.serializer,o)}(t,e)}function ZH(t,e,n){return t instanceof xo?HM(t,e):t instanceof Eo?$M(t,e):n}function qM(t,e){return t instanceof wc?function(i){return W_(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class _c extends oy{}class xo extends oy{constructor(e){super(),this.elements=e}}function HM(t,e){const n=GM(e);for(const i of t.elements)n.some(r=>fr(r,i))||n.push(i);return{arrayValue:{values:n}}}class Eo extends oy{constructor(e){super(),this.elements=e}}function $M(t,e){let n=GM(e);for(const i of t.elements)n=n.filter(r=>!fr(r,i));return{arrayValue:{values:n}}}class wc extends oy{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function uA(t){return it(t.integerValue||t.doubleValue)}function GM(t){return yd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,n){this.field=e,this.transform=n}}function e$(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof xo&&r instanceof xo||i instanceof Eo&&r instanceof Eo?uc(i.elements,r.elements,fr):i instanceof wc&&r instanceof wc?fr(i.Ae,r.Ae):i instanceof _c&&r instanceof _c}(t.transform,e.transform)}class t${constructor(e,n){this.version=e,this.transformResults=n}}class st{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new st}static exists(e){return new st(void 0,e)}static updateTime(e){return new st(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Km(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ly{}function KM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wc(t.key,st.none()):new Kc(t.key,t.data,st.none());{const n=t.data,i=tn.empty();let r=new Ue(rt.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new ns(t.key,i,new Mn(r.toArray()),st.none())}}function n$(t,e,n){t instanceof Kc?function(r,s,a){const o=r.value.clone(),l=dA(r.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof ns?function(r,s,a){if(!Km(r.precondition,s))return void s.convertToUnknownDocument(a.version);const o=dA(r.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(WM(r)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Ch(t,e,n,i){return t instanceof Kc?function(s,a,o,l){if(!Km(s.precondition,a))return o;const c=s.value.clone(),u=fA(s.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof ns?function(s,a,o,l){if(!Km(s.precondition,a))return o;const c=fA(s.fieldTransforms,l,a),u=a.data;return u.setAll(WM(s)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,a,o){return Km(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function i$(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=qM(i.transform,r||null);s!=null&&(n===null&&(n=tn.empty()),n.set(i.field,s))}return n||null}function hA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&uc(i,r,(s,a)=>e$(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Kc extends ly{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ns extends ly{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function WM(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function dA(t,e,n){const i=new Map;ie(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,o=e.data.field(s.field);i.set(s.field,ZH(a,o,n[r]))}return i}function fA(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,JH(s,a,e))}return i}class Wc extends ly{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jT extends ly{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&n$(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ch(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ch(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=zM();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(r.key)?null:o;const l=KM(a,o);l!==null&&i.set(r.key,l),a.isValidDocument()||a.convertToNoDocument(re.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&uc(this.mutations,e.mutations,(n,i)=>hA(n,i))&&uc(this.baseMutations,e.baseMutations,(n,i)=>hA(n,i))}}class BT{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){ie(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return QH}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new BT(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,Se;function QM(t){switch(t){case B.OK:return ee(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return ee(15467,{code:t})}}function YM(t){if(t===void 0)return bt("GRPC error has no .code"),B.UNKNOWN;switch(t){case St.OK:return B.OK;case St.CANCELLED:return B.CANCELLED;case St.UNKNOWN:return B.UNKNOWN;case St.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case St.INTERNAL:return B.INTERNAL;case St.UNAVAILABLE:return B.UNAVAILABLE;case St.UNAUTHENTICATED:return B.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case St.NOT_FOUND:return B.NOT_FOUND;case St.ALREADY_EXISTS:return B.ALREADY_EXISTS;case St.PERMISSION_DENIED:return B.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case St.ABORTED:return B.ABORTED;case St.OUT_OF_RANGE:return B.OUT_OF_RANGE;case St.UNIMPLEMENTED:return B.UNIMPLEMENTED;case St.DATA_LOSS:return B.DATA_LOSS;default:return ee(39323,{code:t})}}(Se=St||(St={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s$=new Qs([4294967295,4294967295],0);function mA(t){const e=XM().encode(t),n=new qk;return n.update(e),new Uint8Array(n.digest())}function pA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qs([n,i],0),new Qs([r,s],0)]}class qT{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Yu(`Invalid padding: ${n}`);if(i<0)throw new Yu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Yu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Yu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Qs.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(Qs.fromNumber(i)));return r.compare(s$)===1&&(r=new Qs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=mA(e),[i,r]=pA(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new qT(s,r,n);return i.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const n=mA(e),[i,r]=pA(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Yu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,lf.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new of(re.min(),r,new Ge(le),On(),de())}}class lf{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new lf(i,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class JM{constructor(e,n){this.targetId=e,this.Ce=n}}class ZM{constructor(e,n,i=gt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class gA{constructor(){this.ve=0,this.Fe=yA(),this.Me=gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=de(),n=de(),i=de();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ee(38017,{changeType:s})}}),new lf(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=yA()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ie(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class a${constructor(e){this.Ge=e,this.ze=new Map,this.je=On(),this.Je=im(),this.He=im(),this.Ye=new Ge(le)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:ee(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const s=r.target;if(Gp(s))if(i===0){const a=new Y(s.path);this.et(n,a,Xe.newNoDocument(a,re.min()))}else ie(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,o;try{a=Wr(i).toUint8Array()}catch(l){if(l instanceof vM)return dr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new qT(a,r,s)}catch(l){return dr(l instanceof Yu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(n,s,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&Gp(o.target)){const l=new Y(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,Xe.newNoDocument(l,e))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=de();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const r=new of(e,n,this.Ye,this.je,i);return this.je=On(),this.Je=im(),this.He=im(),this.Ye=new Ge(le),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new gA,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ue(le),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ue(le),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gA),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function im(){return new Ge(Y.comparator)}function yA(){return new Ge(Y.comparator)}const o$={asc:"ASCENDING",desc:"DESCENDING"},l$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},c$={and:"AND",or:"OR"};class u${constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Z_(t,e){return t.useProto3Json||ef(e)?e:{value:e}}function bc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eO(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function h$(t,e){return bc(t,e.toTimestamp())}function xt(t){return ie(!!t,49232),re.fromTimestamp(function(n){const i=Kr(n);return new De(i.seconds,i.nanos)}(t))}function HT(t,e){return ew(t,e).canonicalString()}function ew(t,e){const n=function(r){return new be(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function tO(t){const e=be.fromString(t);return ie(hO(e),10190,{key:e.toString()}),e}function _d(t,e){return HT(t.databaseId,e.path)}function ar(t,e){const n=tO(e);if(n.get(1)!==t.databaseId.projectId)throw new G(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(rO(n))}function nO(t,e){return HT(t.databaseId,e)}function iO(t){const e=tO(t);return e.length===4?be.emptyPath():rO(e)}function tw(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rO(t){return ie(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function vA(t,e,n){return{name:_d(t,e),fields:n.value.mapValue.fields}}function sO(t,e,n){const i=ar(t,e.name),r=xt(e.updateTime),s=e.createTime?xt(e.createTime):re.min(),a=new tn({mapValue:{fields:e.fields}}),o=Xe.newFoundDocument(i,r,s,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function d$(t,e){return"found"in e?function(i,r){ie(!!r.found,43571),r.found.name,r.found.updateTime;const s=ar(i,r.found.name),a=xt(r.found.updateTime),o=r.found.createTime?xt(r.found.createTime):re.min(),l=new tn({mapValue:{fields:r.found.fields}});return Xe.newFoundDocument(s,a,o,l)}(t,e):"missing"in e?function(i,r){ie(!!r.missing,3894),ie(!!r.readTime,22933);const s=ar(i,r.missing),a=xt(r.readTime);return Xe.newNoDocument(s,a)}(t,e):ee(7234,{result:e})}function f$(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ee(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(ie(u===void 0||typeof u=="string",58123),gt.fromBase64String(u||"")):(ie(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),gt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?B.UNKNOWN:YM(c.code);return new G(u,c.message||"")}(a);n=new ZM(i,r,s,o||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=ar(t,i.document.name),s=xt(i.document.updateTime),a=i.document.createTime?xt(i.document.createTime):re.min(),o=new tn({mapValue:{fields:i.document.fields}}),l=Xe.newFoundDocument(r,s,a,o),c=i.targetIds||[],u=i.removedTargetIds||[];n=new Wm(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=ar(t,i.document),s=i.readTime?xt(i.readTime):re.min(),a=Xe.newNoDocument(r,s),o=i.removedTargetIds||[];n=new Wm([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=ar(t,i.document),s=i.removedTargetIds||[];n=new Wm([],s,r,null)}else{if(!("filter"in e))return ee(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new r$(r,s),o=i.targetId;n=new JM(o,a)}}return n}function wd(t,e){let n;if(e instanceof Kc)n={update:vA(t,e.key,e.value)};else if(e instanceof Wc)n={delete:_d(t,e.key)};else if(e instanceof ns)n={update:vA(t,e.key,e.data),updateMask:_$(e.fieldMask)};else{if(!(e instanceof jT))return ee(16599,{Vt:e.type});n={verify:_d(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const o=a.transform;if(o instanceof _c)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof xo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Eo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof wc)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw ee(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:h$(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ee(27497)}(t,e.precondition)),n}function nw(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?st.updateTime(xt(s.updateTime)):s.exists!==void 0?st.exists(s.exists):st.none()}(e.currentDocument):st.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(a,o){let l=null;if("setToServerValue"in o)ie(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new _c;else if("appendMissingElements"in o){const u=o.appendMissingElements.values||[];l=new xo(u)}else if("removeAllFromArray"in o){const u=o.removeAllFromArray.values||[];l=new Eo(u)}else"increment"in o?l=new wc(a,o.increment):ee(16584,{proto:o});const c=rt.fromServerFormat(o.fieldPath);return new af(c,l)}(t,r)):[];if(e.update){e.update.name;const r=ar(t,e.update.name),s=new tn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(l){const c=l.fieldPaths||[];return new Mn(c.map(u=>rt.fromServerFormat(u)))}(e.updateMask);return new ns(r,s,a,n,i)}return new Kc(r,s,n,i)}if(e.delete){const r=ar(t,e.delete);return new Wc(r,n)}if(e.verify){const r=ar(t,e.verify);return new jT(r,n)}return ee(1463,{proto:e})}function m$(t,e){return t&&t.length>0?(ie(e!==void 0,14353),t.map(n=>function(r,s){let a=r.updateTime?xt(r.updateTime):xt(s);return a.isEqual(re.min())&&(a=xt(s)),new t$(a,r.transformResults||[])}(n,e))):[]}function aO(t,e){return{documents:[nO(t,e.path)]}}function oO(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=nO(t,r);const s=function(c){if(c.length!==0)return uO(Le.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:fl(f.field),direction:g$(f.dir)}}(u))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Z_(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:r}}function lO(t){let e=iO(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ie(i===1,65062);const u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){const f=cO(d);return f instanceof Le&&OT(f)?f.getFilters():[f]}(n.where));let a=[];n.orderBy&&(a=function(d){return d.map(f=>function(p){return new vd(ml(p.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(d){let f;return f=typeof d=="object"?d.value:d,ef(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,h=d.values||[];return new ua(h,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,h=d.values||[];return new ua(h,f)}(n.endAt)),MM(e,r,a,s,o,"F",l,c)}function p$(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cO(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ml(n.unaryFilter.field);return xe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ml(n.unaryFilter.field);return xe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ml(n.unaryFilter.field);return xe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ml(n.unaryFilter.field);return xe.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ee(61313);default:return ee(60726)}}(t):t.fieldFilter!==void 0?function(n){return xe.create(ml(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ee(58110);default:return ee(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Le.create(n.compositeFilter.filters.map(i=>cO(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ee(1026)}}(n.compositeFilter.op))}(t):ee(30097,{filter:t})}function g$(t){return o$[t]}function y$(t){return l$[t]}function v$(t){return c$[t]}function fl(t){return{fieldPath:t.canonicalString()}}function ml(t){return rt.fromServerFormat(t.fieldPath)}function uO(t){return t instanceof xe?function(n){if(n.op==="=="){if(nA(n.value))return{unaryFilter:{field:fl(n.field),op:"IS_NAN"}};if(tA(n.value))return{unaryFilter:{field:fl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nA(n.value))return{unaryFilter:{field:fl(n.field),op:"IS_NOT_NAN"}};if(tA(n.value))return{unaryFilter:{field:fl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fl(n.field),op:y$(n.op),value:n.value}}}(t):t instanceof Le?function(n){const i=n.getFilters().map(r=>uO(r));return i.length===1?i[0]:{compositeFilter:{op:v$(n.op),filters:i}}}(t):ee(54877,{filter:t})}function _$(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n,i,r,s=re.min(),a=re.min(),o=gt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Pr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.yt=e}}function w$(t,e){let n;if(e.document)n=sO(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Y.fromSegments(e.noDocument.path),r=Io(e.noDocument.readTime);n=Xe.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ee(56709);{const i=Y.fromSegments(e.unknownDocument.path),r=Io(e.unknownDocument.version);n=Xe.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){const s=new De(r[0],r[1]);return re.fromTimestamp(s)}(e.readTime)),n}function _A(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Qp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,a){return{name:_d(s,a.key),fields:a.data.value.mapValue.fields,updateTime:bc(s,a.version.toTimestamp()),createTime:bc(s,a.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:So(e.version)};else{if(!e.isUnknownDocument())return ee(57904,{document:e});i.unknownDocument={path:n.path.toArray(),version:So(e.version)}}return i}function Qp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function So(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Io(t){const e=new De(t.seconds,t.nanoseconds);return re.fromTimestamp(e)}function Ga(t,e){const n=(e.baseMutations||[]).map(s=>nw(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const i=e.mutations.map(s=>nw(t.yt,s)),r=De.fromMillis(e.localWriteTimeMs);return new zT(e.batchId,r,n,i)}function Xu(t){const e=Io(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Io(t.lastLimboFreeSnapshotVersion):re.min();let i;return i=function(s){return s.documents!==void 0}(t.query)?function(s){const a=s.documents.length;return ie(a===1,1966,{count:a}),En(Gc(iO(s.documents[0])))}(t.query):function(s){return En(lO(s))}(t.query),new Pr(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,gt.fromBase64String(t.resumeToken))}function fO(t,e){const n=So(e.snapshotVersion),i=So(e.lastLimboFreeSnapshotVersion);let r;r=Gp(e.target)?aO(t.yt,e.target):oO(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:To(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function $T(t){const e=lO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Wp(e,e.limit,"L"):e}function Xv(t,e){return new FT(e.largestBatchId,nw(t.yt,e.overlayMutation))}function wA(t,e){const n=e.path.lastSegment();return[t,mn(e.path.popLast()),n]}function bA(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:So(i.readTime),documentKey:mn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${getBundleMetadata(e,n){return TA(e).get(n).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:Io(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,n){return TA(e).put(function(r){return{bundleId:r.id,createTime:So(xt(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return xA(e).get(n).next(i=>{if(i)return function(s){return{name:s.name,query:$T(s.bundledQuery),readTime:Io(s.readTime)}}(i)})}saveNamedQuery(e,n){return xA(e).put(function(r){return{name:r.name,readTime:So(xt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function TA(t){return Vt(t,ty)}function xA(t){return Vt(t,ny)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const i=n.uid||"";return new cy(e,i)}getOverlay(e,n){return Du(e).get(wA(this.userId,n)).next(i=>i?Xv(this.serializer,i):null)}getOverlays(e,n){const i=nr();return U.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){const r=[];return i.forEach((s,a)=>{const o=new FT(n,a);r.push(this.St(e,o))}),U.waitFor(r)}removeOverlaysForBatchId(e,n,i){const r=new Set;n.forEach(a=>r.add(mn(a.getCollectionPath())));const s=[];return r.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);s.push(Du(e).Z(H_,o))}),U.waitFor(s)}getOverlaysForCollection(e,n,i){const r=nr(),s=mn(n),a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Du(e).J(H_,a).next(o=>{for(const l of o){const c=Xv(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,n,i,r){const s=nr();let a;const o=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Du(e).ee({index:dM,range:o},(l,c,u)=>{const d=Xv(this.serializer,c);s.size()<r||d.largestBatchId===a?(s.set(d.getKey(),d),a=d.largestBatchId):u.done()}).next(()=>s)}St(e,n){return Du(e).put(function(r,s,a){const[o,l,c]=wA(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:wd(r.yt,a.mutation)}}(this.serializer,this.userId,n))}}function Du(t){return Vt(t,iy)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${bt(e){return Vt(e,NT)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const i=n==null?void 0:n.value;return i?gt.fromUint8Array(i):gt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(it(e.integerValue));else if("doubleValue"in e){const i=it(e.doubleValue);isNaN(i)?this.Ft(n,13):(this.Ft(n,15),hd(i)?n.Mt(0):n.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(n,20),typeof i=="string"&&(i=Kr(i)),n.xt(`${i.seconds||""}`),n.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Wr(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(n,45),n.Mt(i.latitude||0),n.Mt(i.longitude||0)}else"mapValue"in e?EM(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):ay(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):ee(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const i=e.fields||{};this.Ft(n,55);for(const r of Object.keys(i))this.Ot(r,n),this.Ct(i[r],n)}kt(e,n){var a,o;const i=e.fields||{};this.Ft(n,53);const r=gc,s=((o=(a=i[r].arrayValue)==null?void 0:a.values)==null?void 0:o.length)||0;this.Ft(n,15),n.Mt(it(s)),this.Ot(r,n),this.Ct(i[r],n)}Qt(e,n){const i=e.values||[];this.Ft(n,50);for(const r of i)this.Ct(r,n)}Lt(e,n){this.Ft(n,37),Y.fromName(e).path.forEach(i=>{this.Ft(n,60),this.Ut(i,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Ka.Kt=new Ka;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=255;function x$(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function EA(t){const e=64-function(i){let r=0;for(let s=0;s<8;++s){const a=x$(255&i[s]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}class E${constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Gt(i.value),i=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Jt(i.value),i=n.next();this.Ht()}Yt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const r=n.codePointAt(0);this.Gt(240|r>>>18),this.Gt(128|63&r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r)}}this.zt()}Zt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const r=n.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Ht()}Xt(e){const n=this.en(e),i=EA(n);this.tn(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}nn(e){const n=this.en(e),i=EA(n);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}rn(){this.sn(il),this.sn(255)}_n(){this.an(il),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),i=!!(128&n[0]);n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===il?(this.sn(il),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===il?(this.an(il),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class S${constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class I${constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class ku{constructor(){this.cn=new E$,this.ln=new S$(this.cn),this.hn=new I$(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n,i,r){this.Tn=e,this.In=n,this.En=i,this.dn=r}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.dn,0),n!==e?i.set([0],this.dn.length):++i[i.length-1],new Wa(this.Tn,this.In,this.En,i)}Rn(e,n,i){return{indexId:this.Tn,uid:e,arrayValue:Qm(this.En),directionalValue:Qm(this.dn),orderedDocumentKey:Qm(n),documentKey:i.path.toArray()}}Vn(e,n,i){const r=this.Rn(e,n,i);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function gs(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=SA(t.En,e.En),n!==0?n:(n=SA(t.dn,e.dn),n!==0?n:Y.comparator(t.In,e.In)))}function SA(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}function Qm(t){return ND()?function(n){let i="";for(let r=0;r<n.length;r++)i+=String.fromCharCode(n[r]);return i}(t):t}function IA(t){return typeof t!="string"?t:function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(t)}class AA{constructor(e){this.mn=new Ue((n,i)=>rt.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const i=n;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(ie(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=B_(e);if(n!==void 0&&!this.wn(n))return!1;const i=Ba(e);let r=new Set,s=0,a=0;for(;s<i.length&&this.wn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!r.has(o.field.canonicalString())){const l=i[s];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++s}for(;s<i.length;++s){const o=i[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new Ue(rt.comparator);const n=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new Bm(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new Bm(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new Bm(i.field,i.dir==="asc"?0:1)));return new Fp(Fp.UNKNOWN_ID,this.collectionId,n,ud.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(t){var n,i;if(ie(t instanceof xe||t instanceof Le,20012),t instanceof xe){if(t instanceof kM){const r=((i=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:i.map(s=>xe.create(t.field,"==",s)))||[];return Le.create(r,"or")}return t}const e=t.filters.map(r=>mO(r));return Le.create(e,t.op)}function A$(t){if(t.getFilters().length===0)return[];const e=sw(mO(t));return ie(pO(e),7391),iw(e)||rw(e)?[e]:e.getFilters()}function iw(t){return t instanceof xe}function rw(t){return t instanceof Le&&OT(t)}function pO(t){return iw(t)||rw(t)||function(n){if(n instanceof Le&&Q_(n)){for(const i of n.getFilters())if(!iw(i)&&!rw(i))return!1;return!0}return!1}(t)}function sw(t){if(ie(t instanceof xe||t instanceof Le,34018),t instanceof xe)return t;if(t.filters.length===1)return sw(t.filters[0]);const e=t.filters.map(i=>sw(i));let n=Le.create(e,t.op);return n=Yp(n),pO(n)?n:(ie(n instanceof Le,64498),ie(vc(n),40251),ie(n.filters.length>1,57927),n.filters.reduce((i,r)=>GT(i,r)))}function GT(t,e){let n;return ie(t instanceof xe||t instanceof Le,38388),ie(e instanceof xe||e instanceof Le,25473),n=t instanceof xe?e instanceof xe?function(r,s){return Le.create([r,s],"and")}(t,e):RA(t,e):e instanceof xe?RA(e,t):function(r,s){if(ie(r.filters.length>0&&s.filters.length>0,48005),vc(r)&&vc(s))return PM(r,s.getFilters());const a=Q_(r)?r:s,o=Q_(r)?s:r,l=a.filters.map(c=>GT(c,o));return Le.create(l,"or")}(t,e),Yp(n)}function RA(t,e){if(vc(e))return PM(e,t.getFilters());{const n=e.filters.map(i=>GT(t,i));return Le.create(n,"or")}}function Yp(t){if(ie(t instanceof xe||t instanceof Le,11850),t instanceof xe)return t;const e=t.getFilters();if(e.length===1)return Yp(e[0]);if(RM(t))return t;const n=e.map(r=>Yp(r)),i=[];return n.forEach(r=>{r instanceof xe?i.push(r):r instanceof Le&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Le.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(){this.Cn=new KT}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(ai.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(ai.min())}updateCollectionGroup(e,n,i){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class KT{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ue(be.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ue(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="IndexedDbIndexManager",rm=new Uint8Array(0);class C${constructor(e,n){this.databaseId=n,this.vn=new KT,this.Fn=new ts(i=>To(i),(i,r)=>nf(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:i,parent:mn(r)};return PA(e).put(s)}return U.resolve()}getCollectionParents(e,n){const i=[],r=IDBKeyRange.bound([n,""],[Xk(n),""],!1,!0);return PA(e).J(r).next(s=>{for(const a of s){if(a.collectionId!==n)break;i.push(tr(a.parent))}return i})}addFieldIndex(e,n){const i=Mu(e),r=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete r.indexId;const s=i.add(r);if(n.indexState){const a=sl(e);return s.next(o=>{a.put(bA(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const i=Mu(e),r=sl(e),s=rl(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Mu(e),i=rl(e),r=sl(e);return n.Z().next(()=>i.Z()).next(()=>r.Z())}createTargetIndexes(e,n){return U.forEach(this.Mn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){const s=new AA(i).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const i=rl(e);let r=!0;const s=new Map;return U.forEach(this.Mn(n),a=>this.xn(e,a).next(o=>{r&&(r=!!o),s.set(a,o)})).next(()=>{if(r){let a=de();const o=[];return U.forEach(s,(l,c)=>{K(CA,`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(l)} to execute ${To(n)}`);const u=function(b,R){const S=B_(R);if(S===void 0)return null;for(const C of Kp(b,S.fieldPath))switch(C.op){case"array-contains-any":return C.value.arrayValue.values||[];case"array-contains":return[C.value]}return null}(c,l),d=function(b,R){const S=new Map;for(const C of Ba(R))for(const x of Kp(b,C.fieldPath))switch(x.op){case"==":case"in":S.set(C.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return S.set(C.fieldPath.canonicalString(),x.value),Array.from(S.values())}return null}(c,l),f=function(b,R){const S=[];let C=!0;for(const x of Ba(R)){const T=x.kind===0?oA(b,x.fieldPath,b.startAt):lA(b,x.fieldPath,b.startAt);S.push(T.value),C&&(C=T.inclusive)}return new ua(S,C)}(c,l),h=function(b,R){const S=[];let C=!0;for(const x of Ba(R)){const T=x.kind===0?lA(b,x.fieldPath,b.endAt):oA(b,x.fieldPath,b.endAt);S.push(T.value),C&&(C=T.inclusive)}return new ua(S,C)}(c,l),p=this.On(l,c,f),g=this.On(l,c,h),v=this.Nn(l,c,d),y=this.Bn(l.indexId,u,p,f.inclusive,g,h.inclusive,v);return U.forEach(y,w=>i.Y(w,n.limit).next(b=>{b.forEach(R=>{const S=Y.fromSegments(R.documentKey);a.has(S)||(a=a.add(S),o.push(S))})}))}).next(()=>o)}return U.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=A$(Le.create(e.filters,"and")).map(i=>X_(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,i,r,s,a,o){const l=(n!=null?n.length:1)*Math.max(i.length,s.length),c=l/(n!=null?n.length:1),u=[];for(let d=0;d<l;++d){const f=n?this.Ln(n[d/c]):rm,h=this.kn(e,f,i[d%c],r),p=this.qn(e,f,s[d%c],a),g=o.map(v=>this.kn(e,f,v,!0));u.push(...this.createRange(h,p,g))}return u}kn(e,n,i,r){const s=new Wa(e,Y.empty(),n,i);return r?s:s.An()}qn(e,n,i,r){const s=new Wa(e,Y.empty(),n,i);return r?s.An():s}xn(e,n){const i=new AA(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let a=null;for(const o of s)i.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,n){let i=2;const r=this.Mn(n);return U.forEach(r,s=>this.xn(e,s).next(a=>{a?i!==0&&a.fields.length<function(l){let c=new Ue(rt.comparator),u=!1;for(const d of l.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?u=!0:c=c.add(f.field));for(const d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(u?1:0)}(s)&&(i=1):i=0})).next(()=>function(a){return a.limit!==null}(n)&&r.length>1&&i===2?1:i)}Qn(e,n){const i=new ku;for(const r of Ba(e)){const s=n.data.field(r.fieldPath);if(s==null)return null;const a=i.Pn(r.kind);Ka.Kt.Dt(s,a)}return i.un()}Ln(e){const n=new ku;return Ka.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const i=new ku;return Ka.Kt.Dt(bo(this.databaseId,n),i.Pn(function(s){const a=Ba(s);return a.length===0?0:a[a.length-1].kind}(e))),i.un()}Nn(e,n,i){if(i===null)return[];let r=[];r.push(new ku);let s=0;for(const a of Ba(e)){const o=i[s++];for(const l of r)if(this.Un(n,a.fieldPath)&&yd(o))r=this.Kn(r,a,o);else{const c=l.Pn(a.kind);Ka.Kt.Dt(o,c)}}return this.Wn(r)}On(e,n,i){return this.Nn(e,n,i.position)}Wn(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].un();return n}Kn(e,n,i){const r=[...e],s=[];for(const a of i.arrayValue.values||[])for(const o of r){const l=new ku;l.seed(o.un()),Ka.Kt.Dt(a,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(i=>i instanceof xe&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){const i=Mu(e),r=sl(e);return(n?i.J(q_,IDBKeyRange.bound(n,n)):i.J()).next(s=>{const a=[];return U.forEach(s,o=>r.get([o.indexId,this.uid]).next(l=>{a.push(function(u,d){const f=d?new ud(d.sequenceNumber,new ai(Io(d.readTime),new Y(tr(d.documentKey)),d.largestBatchId)):ud.empty(),h=u.fields.map(([p,g])=>new Bm(rt.fromServerFormat(p),g));return new Fp(u.indexId,u.collectionGroup,h,f)}(o,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:le(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){const r=Mu(e),s=sl(e);return this.Gn(e).next(a=>r.J(q_,IDBKeyRange.bound(n,n)).next(o=>U.forEach(o,l=>s.put(bA(l.indexId,this.uid,a,i)))))}updateIndexEntries(e,n){const i=new Map;return U.forEach(n,(r,s)=>{const a=i.get(r.collectionGroup);return(a?U.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(o=>(i.set(r.collectionGroup,o),U.forEach(o,l=>this.zn(e,r,l).next(c=>{const u=this.jn(s,l);return c.isEqual(u)?U.resolve():this.Jn(e,s,l,c,u)}))))})}Hn(e,n,i,r){return rl(e).put(r.Rn(this.uid,this.$n(i,n.key),n.key))}Yn(e,n,i,r){return rl(e).delete(r.Vn(this.uid,this.$n(i,n.key),n.key))}zn(e,n,i){const r=rl(e);let s=new Ue(gs);return r.ee({index:hM,range:IDBKeyRange.only([i.indexId,this.uid,Qm(this.$n(i,n))])},(a,o)=>{s=s.add(new Wa(i.indexId,n,IA(o.arrayValue),IA(o.directionalValue)))}).next(()=>s)}jn(e,n){let i=new Ue(gs);const r=this.Qn(n,e);if(r==null)return i;const s=B_(n);if(s!=null){const a=e.data.field(s.fieldPath);if(yd(a))for(const o of a.arrayValue.values||[])i=i.add(new Wa(n.indexId,e.key,this.Ln(o),r))}else i=i.add(new Wa(n.indexId,e.key,rm,r));return i}Jn(e,n,i,r,s){K(CA,"Updating index entries for document '%s'",n.key);const a=[];return function(l,c,u,d,f){const h=l.getIterator(),p=c.getIterator();let g=nl(h),v=nl(p);for(;g||v;){let y=!1,w=!1;if(g&&v){const b=u(g,v);b<0?w=!0:b>0&&(y=!0)}else g!=null?w=!0:y=!0;y?(d(v),v=nl(p)):w?(f(g),g=nl(h)):(g=nl(h),v=nl(p))}}(r,s,gs,o=>{a.push(this.Hn(e,n,i,o))},o=>{a.push(this.Yn(e,n,i,o))}),U.waitFor(a)}Gn(e){let n=1;return sl(e).ee({index:uM,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((a,o)=>gs(a,o)).filter((a,o,l)=>!o||gs(a,l[o-1])!==0);const r=[];r.push(e);for(const a of i){const o=gs(a,e),l=gs(a,n);if(o===0)r[0]=e.An();else if(o>0&&l<0)r.push(a),r.push(a.An());else if(l>0)break}r.push(n);const s=[];for(let a=0;a<r.length;a+=2){if(this.Zn(r[a],r[a+1]))return[];const o=r[a].Vn(this.uid,rm,Y.empty()),l=r[a+1].Vn(this.uid,rm,Y.empty());s.push(IDBKeyRange.bound(o,l))}return s}Zn(e,n){return gs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(NA)}getMinOffset(e,n){return U.mapArray(this.Mn(n),i=>this.xn(e,i).next(r=>r||ee(44426))).next(NA)}}function PA(t){return Vt(t,md)}function rl(t){return Vt(t,Ih)}function Mu(t){return Vt(t,PT)}function sl(t){return Vt(t,Sh)}function NA(t){ie(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const r=t[i].indexState.offset;AT(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new ai(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gO=41943040;class un{static withCacheSize(e){return new un(e,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(t,e,n){const i=t.store(Mi),r=t.store(dc),s=[],a=IDBKeyRange.only(n.batchId);let o=0;const l=i.ee({range:a},(u,d,f)=>(o++,f.delete()));s.push(l.next(()=>{ie(o===1,47070,{batchId:n.batchId})}));const c=[];for(const u of n.mutations){const d=oM(e,u.key.path,n.batchId);s.push(r.delete(d)),c.push(u.key)}return U.waitFor(s).next(()=>c)}function Xp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ee(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(gO,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);class uy{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Xn={}}static wt(e,n,i,r){ie(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new uy(s,n,i,r)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ys(e).ee({index:Xa,range:i},(r,s,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,i,r){const s=pl(e),a=ys(e);return a.add({}).next(o=>{ie(typeof o=="number",49019);const l=new zT(o,n,i,r),c=function(h,p,g){const v=g.baseMutations.map(w=>wd(h.yt,w)),y=g.mutations.map(w=>wd(h.yt,w));return{userId:p,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:v,mutations:y}}(this.serializer,this.userId,l),u=[];let d=new Ue((f,h)=>le(f.canonicalString(),h.canonicalString()));for(const f of r){const h=oM(this.userId,f.key.path,o);d=d.add(f.key.path.popLast()),u.push(a.put(c)),u.push(s.put(h,cH))}return d.forEach(f=>{u.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[o]=l.keys()}),U.waitFor(u).next(()=>l)})}lookupMutationBatch(e,n){return ys(e).get(n).next(i=>i?(ie(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:n}),Ga(this.serializer,i)):null)}er(e,n){return this.Xn[n]?U.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){const r=i.keys();return this.Xn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return ys(e).ee({index:Xa,range:r},(a,o,l)=>{o.userId===this.userId&&(ie(o.batchId>=i,47524,{tr:i}),s=Ga(this.serializer,o)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Ys;return ys(e).ee({index:Xa,range:n,reverse:!0},(r,s,a)=>{i=s.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ys],[this.userId,Number.POSITIVE_INFINITY]);return ys(e).J(Xa,n).next(i=>i.map(r=>Ga(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=Fm(this.userId,n.path),r=IDBKeyRange.lowerBound(i),s=[];return pl(e).ee({range:r},(a,o,l)=>{const[c,u,d]=a,f=tr(u);if(c===this.userId&&n.path.isEqual(f))return ys(e).get(d).next(h=>{if(!h)throw ee(61480,{nr:a,batchId:d});ie(h.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:h.userId,batchId:d}),s.push(Ga(this.serializer,h))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ue(le);const r=[];return n.forEach(s=>{const a=Fm(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=pl(e).ee({range:o},(c,u,d)=>{const[f,h,p]=c,g=tr(h);f===this.userId&&s.path.isEqual(g)?i=i.add(p):d.done()});r.push(l)}),U.waitFor(r).next(()=>this.rr(e,i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1,s=Fm(this.userId,i),a=IDBKeyRange.lowerBound(s);let o=new Ue(le);return pl(e).ee({range:a},(l,c,u)=>{const[d,f,h]=l,p=tr(f);d===this.userId&&i.isPrefixOf(p)?p.length===r&&(o=o.add(h)):u.done()}).next(()=>this.rr(e,o))}rr(e,n){const i=[],r=[];return n.forEach(s=>{r.push(ys(e).get(s).next(a=>{if(a===null)throw ee(35274,{batchId:s});ie(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),i.push(Ga(this.serializer,a))}))}),U.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return yO(e.le,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),U.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return U.resolve();const i=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),r=[];return pl(e).ee({range:i},(s,a,o)=>{if(s[0]===this.userId){const l=tr(s[1]);r.push(l)}else o.done()}).next(()=>{ie(r.length===0,56720,{sr:r.map(s=>s.canonicalString())})})})}containsKey(e,n){return vO(e,this.userId,n)}_r(e){return _O(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ys,lastStreamToken:""})}}function vO(t,e,n){const i=Fm(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let a=!1;return pl(t).ee({range:s,X:!0},(o,l,c)=>{const[u,d,f]=o;u===e&&d===r&&(a=!0),c.done()}).next(()=>a)}function ys(t){return Vt(t,Mi)}function pl(t){return Vt(t,dc)}function _O(t){return Vt(t,dd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ao(0)}static cr(){return new Ao(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const i=new Ao(n.highestTargetId);return n.highestTargetId=i.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>re.fromTimestamp(new De(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.lr(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.hr(e,r)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(i=>(i.targetCount+=1,this.Tr(n,i),this.hr(e,i))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>al(e).delete(n.targetId)).next(()=>this.lr(e)).next(i=>(ie(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i)))}removeTargets(e,n,i){let r=0;const s=[];return al(e).ee((a,o)=>{const l=Xu(o);l.sequenceNumber<=n&&i.get(l.targetId)===null&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>U.waitFor(s)).next(()=>r)}forEachTarget(e,n){return al(e).ee((i,r)=>{const s=Xu(r);n(s)})}lr(e){return kA(e).get($p).next(n=>(ie(n!==null,2888),n))}hr(e,n){return kA(e).put($p,n)}Pr(e,n){return al(e).put(fO(this.serializer,n))}Tr(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const i=To(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return al(e).ee({range:r,index:cM},(a,o,l)=>{const c=Xu(o);nf(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,i){const r=[],s=Cs(e);return n.forEach(a=>{const o=mn(a.path);r.push(s.put({targetId:i,path:o})),r.push(this.referenceDelegate.addReference(e,i,a))}),U.waitFor(r)}removeMatchingKeys(e,n,i){const r=Cs(e);return U.forEach(n,s=>{const a=mn(s.path);return U.waitFor([r.delete([i,a]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,n){const i=Cs(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),r=Cs(e);let s=de();return r.ee({range:i,X:!0},(a,o,l)=>{const c=tr(a[1]),u=new Y(c);s=s.add(u)}).next(()=>s)}containsKey(e,n){const i=mn(n.path),r=IDBKeyRange.bound([i],[Xk(i)],!1,!0);let s=0;return Cs(e).ee({index:CT,X:!0,range:r},([a,o],l,c)=>{a!==0&&(s++,c.done())}).next(()=>s>0)}At(e,n){return al(e).get(n).next(i=>i?Xu(i):null)}}function al(t){return Vt(t,fc)}function kA(t){return Vt(t,co)}function Cs(t){return Vt(t,mc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="LruGarbageCollector",N$=1048576;function OA([t,e],[n,i]){const r=le(t,n);return r===0?le(e,i):r}class D${constructor(e){this.Ir=e,this.buffer=new Ue(OA),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();OA(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class wO{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){K(MA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ba(n)?K(MA,"Ignoring IndexedDB error during garbage collection: ",n):await wa(n)}await this.Vr(3e5)})}}class k${constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return U.resolve(kn.ce);const i=new D$(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(DA)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DA):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,s,a,o,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,a=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,o=Date.now(),this.removeTargets(e,i,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(c=Date.now(),hl()<=ge.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-u}ms
	Determined least recently used ${r} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}function bO(t,e){return new k$(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(e,n){this.db=e,this.garbageCollector=bO(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(i,r)=>n(r))}addReference(e,n,i){return sm(e,i)}removeReference(e,n,i){return sm(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return sm(e,n)}br(e,n){return function(r,s){let a=!1;return _O(r).te(o=>vO(r,o,s).next(l=>(l&&(a=!0),U.resolve(!l)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Sr(e,(a,o)=>{if(o<=n){const l=this.br(e,a).next(c=>{if(!c)return s++,i.getEntry(e,a).next(()=>(i.removeEntry(a,re.min()),Cs(e).delete(function(d){return[0,mn(d.path)]}(a))))});r.push(l)}}).next(()=>U.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return sm(e,n)}Sr(e,n){const i=Cs(e);let r,s=kn.ce;return i.ee({index:CT},([a,o],{path:l,sequenceNumber:c})=>{a===0?(s!==kn.ce&&n(new Y(tr(r)),s),s=c,r=l):s=kn.ce}).next(()=>{s!==kn.ce&&n(new Y(tr(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function sm(t,e){return Cs(t).put(function(i,r){return{targetId:0,path:mn(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.changes=new ts(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?U.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return Ma(e).put(i)}removeEntry(e,n,i){return Ma(e).delete(function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Qp(a),o[o.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.Dr(e,i)))}getEntry(e,n){let i=Xe.newInvalidDocument(n);return Ma(e).ee({index:qm,range:IDBKeyRange.only(Ou(n))},(r,s)=>{i=this.Cr(n,s)}).next(()=>i)}vr(e,n){let i={size:0,document:Xe.newInvalidDocument(n)};return Ma(e).ee({index:qm,range:IDBKeyRange.only(Ou(n))},(r,s)=>{i={document:this.Cr(n,s),size:Xp(s)}}).next(()=>i)}getEntries(e,n){let i=On();return this.Fr(e,n,(r,s)=>{const a=this.Cr(r,s);i=i.insert(r,a)}).next(()=>i)}Mr(e,n){let i=On(),r=new Ge(Y.comparator);return this.Fr(e,n,(s,a)=>{const o=this.Cr(s,a);i=i.insert(s,o),r=r.insert(s,Xp(a))}).next(()=>({documents:i,Or:r}))}Fr(e,n,i){if(n.isEmpty())return U.resolve();let r=new Ue(UA);n.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(Ou(r.first()),Ou(r.last())),a=r.getIterator();let o=a.getNext();return Ma(e).ee({index:qm,range:s},(l,c,u)=>{const d=Y.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&UA(o,d)<0;)i(o,null),o=a.getNext();o&&o.isEqual(d)&&(i(o,c),o=a.hasNext()?a.getNext():null),o?u.j(Ou(o)):u.done()}).next(()=>{for(;o;)i(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,s){const a=n.path,o=[a.popLast().toArray(),a.lastSegment(),Qp(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ma(e).J(IDBKeyRange.bound(o,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let u=On();for(const d of c){const f=this.Cr(Y.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(sf(n,f)||r.has(f.key))&&(u=u.insert(f.key,f))}return u})}getAllFromCollectionGroup(e,n,i,r){let s=On();const a=LA(n,i),o=LA(n,ai.max());return Ma(e).ee({index:lM,range:IDBKeyRange.bound(a,o,!0)},(l,c,u)=>{const d=this.Cr(Y.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===r&&u.done()}).next(()=>s)}newChangeBuffer(e){return new V$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return VA(e).get(F_).next(n=>(ie(!!n,20021),n))}Dr(e,n){return VA(e).put(F_,n)}Cr(e,n){if(n){const i=w$(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(re.min())))return i}return Xe.newInvalidDocument(e)}}function xO(t){return new O$(t)}class V$ extends TO{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new ts(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const n=[];let i=0,r=new Ue((s,a)=>le(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const l=_A(this.Nr.serializer,a);r=r.add(s.path.popLast());const c=Xp(l);i+=c-o.size,n.push(this.Nr.addEntry(e,s,l))}else if(i-=o.size,this.trackRemovals){const l=_A(this.Nr.serializer,a.convertToNoDocument(re.min()));n.push(this.Nr.addEntry(e,s,l))}}),r.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,i)),U.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(i=>(this.Br.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:i,Or:r})=>(r.forEach((s,a)=>{this.Br.set(s,{size:a,readTime:i.get(s).readTime})}),i))}}function VA(t){return Vt(t,fd)}function Ma(t){return Vt(t,Hp)}function Ou(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function LA(t,e){const n=e.documentKey.path.toArray();return[t,Qp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function UA(t,e){const n=t.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=le(n[s],i[s]),r)return r;return r=le(n.length,i.length),r||(r=le(n[n.length-2],i[i.length-2]),r||le(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Ch(i.mutation,r,Mn.empty(),De.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,de()).next(()=>i))}getLocalViewOfDocuments(e,n,i=de()){const r=nr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=Qu();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=nr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,de()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,i,r){let s=On();const a=Rh(),o=function(){return Rh()}();return n.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof ns)?s=s.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),Ch(u.mutation,c,u.mutation.getFieldMask(),De.now())):a.set(c.key,Mn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>a.set(c,u)),n.forEach((c,u)=>o.set(c,new L$(u,a.get(c)??null))),o))}recalculateAndSaveOverlays(e,n){const i=Rh();let r=new Ge((a,o)=>a-o),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=i.get(l)||Mn.empty();u=o.applyToLocalView(c,u),i.set(l,u);const d=(r.get(o.batchId)||de()).add(l);r=r.insert(o.batchId,d)})}).next(()=>{const a=[],o=r.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,d=zM();u.forEach(f=>{if(!s.has(f)){const h=KM(n.get(f),i.get(f));h!==null&&d.set(f,h),s=s.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return U.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return Y.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):VT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):U.resolve(nr());let o=hc,l=s;return a.next(c=>U.forEach(c,(u,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(u)?U.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,de())).next(u=>({batchId:o,changes:jM(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(i=>{let r=Qu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=Qu();return this.indexManager.getCollectionParents(e,s).next(o=>U.forEach(o,l=>{const c=function(d,f){return new es(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(u=>{u.forEach((d,f)=>{a=a.insert(d,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(a=>{s.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,Xe.newInvalidDocument(u)))});let o=Qu();return a.forEach((l,c)=>{const u=s.get(l);u!==void 0&&Ch(u.mutation,c,Mn.empty(),De.now()),sf(n,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:xt(r.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:$T(r.bundledQuery),readTime:xt(r.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(){this.overlays=new Ge(Y.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const i=nr();return U.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.St(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),U.resolve()}getOverlaysForCollection(e,n,i){const r=nr(),s=n.length+1,a=new Y(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return U.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Ge((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=s.get(c.largestBatchId);u===null&&(u=nr(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=nr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=r)););return U.resolve(o)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new FT(n,i));let s=this.qr.get(n);s===void 0&&(s=de(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(){this.Qr=new Ue(Bt.$r),this.Ur=new Ue(Bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Bt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new Bt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new Y(new be([])),i=new Bt(n,e),r=new Bt(n,e+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Y(new be([])),i=new Bt(n,e),r=new Bt(n,e+1);let s=de();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Bt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Bt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Y.comparator(e.key,n.key)||le(e.Yr,n.Yr)}static Kr(e,n){return le(e.Yr,n.Yr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ue(Bt.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new zT(s,n,i,r);this.mutationQueue.push(a);for(const o of r)this.Zr=this.Zr.add(new Bt(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return U.resolve(a)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Ys:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Bt(n,0),r=new Bt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const o=this.Xr(a.Yr);s.push(o)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ue(le);return n.forEach(r=>{const s=new Bt(r,0),a=new Bt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{i=i.add(o.Yr)})}),U.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;Y.isDocumentKey(s)||(s=s.child(""));const a=new Bt(new Y(s),0);let o=new Ue(le);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(o=o.add(l.Yr)),!0)},a),U.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ie(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return U.forEach(n.mutations,r=>{const s=new Bt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new Bt(n,0),r=this.Zr.firstAfterOrEqual(i);return U.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(e){this.ri=e,this.docs=function(){return new Ge(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return U.resolve(i?i.document.mutableCopy():Xe.newInvalidDocument(n))}getEntries(e,n){let i=On();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Xe.newInvalidDocument(r))}),U.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=On();const a=n.path,o=new Y(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||AT(nM(u),i)<=0||(r.has(u.key)||sf(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,i,r){ee(9500)}ii(e,n){return U.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new q$(this)}getSize(e){return U.resolve(this.size)}}class q$ extends TO{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${constructor(e){this.persistence=e,this.si=new ts(n=>To(n),nf),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.oi=0,this._i=new WT,this.targetCount=0,this.ai=Ao.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ao(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=n&&i.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),U.waitFor(s).next(()=>r)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return U.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),U.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return U.resolve(i)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,n){this.ui={},this.overlays={},this.ci=new kn(0),this.li=!1,this.li=!0,this.hi=new z$,this.referenceDelegate=e(this),this.Pi=new H$(this),this.indexManager=new R$,this.remoteDocumentCache=function(r){return new F$(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new dO(n),this.Ii=new U$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new j$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new B$(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){K("MemoryPersistence","Starting transaction:",e);const r=new $$(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(e,n){return U.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class $$ extends rM{constructor(e){super(),this.currentSequenceNumber=e}}class hy{constructor(e){this.persistence=e,this.Ri=new WT,this.Vi=null}static mi(e){return new hy(e)}get fi(){if(this.Vi)return this.Vi;throw ee(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),U.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,i=>{const r=Y.fromPath(i);return this.gi(e,r).next(s=>{s||n.removeEntry(r,re.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Jp{constructor(e,n){this.persistence=e,this.pi=new ts(i=>mn(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=bO(this,n)}static mi(e,n){return new Jp(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return U.forEach(this.pi,(i,r)=>this.br(e,i,r).next(s=>s?U.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(o=>{o||(i++,s.removeEntry(a,re.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),U.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$m(e.data.value)),n}br(e,n,i){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return U.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G${constructor(e){this.serializer=e}k(e,n,i,r){const s=new ey("createOrUpgrade",n);i<1&&r>=1&&(function(l){l.createObjectStore(tf)}(e),function(l){l.createObjectStore(dd,{keyPath:lH}),l.createObjectStore(Mi,{keyPath:QI,autoIncrement:!0}).createIndex(Xa,YI,{unique:!0}),l.createObjectStore(dc)}(e),jA(e),function(l){l.createObjectStore(Fa)}(e));let a=U.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore(mc),l.deleteObjectStore(fc),l.deleteObjectStore(co)}(e),jA(e)),a=a.next(()=>function(l){const c=l.store(co),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:re.min().toTimestamp(),targetCount:0};return c.put($p,u)}(s))),i<4&&r>=4&&(i!==0&&(a=a.next(()=>function(l,c){return c.store(Mi).J().next(d=>{l.deleteObjectStore(Mi),l.createObjectStore(Mi,{keyPath:QI,autoIncrement:!0}).createIndex(Xa,YI,{unique:!0});const f=c.store(Mi),h=d.map(p=>f.put(p));return U.waitFor(h)})}(e,s))),a=a.next(()=>{(function(l){l.createObjectStore(pc,{keyPath:yH})})(e)})),i<5&&r>=5&&(a=a.next(()=>this.yi(s))),i<6&&r>=6&&(a=a.next(()=>(function(l){l.createObjectStore(fd)}(e),this.wi(s)))),i<7&&r>=7&&(a=a.next(()=>this.Si(s))),i<8&&r>=8&&(a=a.next(()=>this.bi(e,s))),i<9&&r>=9&&(a=a.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(a=a.next(()=>this.Di(s))),i<11&&r>=11&&(a=a.next(()=>{(function(l){l.createObjectStore(ty,{keyPath:vH})})(e),function(l){l.createObjectStore(ny,{keyPath:_H})}(e)})),i<12&&r>=12&&(a=a.next(()=>{(function(l){const c=l.createObjectStore(iy,{keyPath:IH});c.createIndex(H_,AH,{unique:!1}),c.createIndex(dM,RH,{unique:!1})})(e)})),i<13&&r>=13&&(a=a.next(()=>function(l){const c=l.createObjectStore(Hp,{keyPath:uH});c.createIndex(qm,hH),c.createIndex(lM,dH)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(Fa))),i<14&&r>=14&&(a=a.next(()=>this.Fi(e,s))),i<15&&r>=15&&(a=a.next(()=>function(l){l.createObjectStore(PT,{keyPath:wH,autoIncrement:!0}).createIndex(q_,bH,{unique:!1}),l.createObjectStore(Sh,{keyPath:TH}).createIndex(uM,xH,{unique:!1}),l.createObjectStore(Ih,{keyPath:EH}).createIndex(hM,SH,{unique:!1})}(e))),i<16&&r>=16&&(a=a.next(()=>{n.objectStore(Sh).clear()}).next(()=>{n.objectStore(Ih).clear()})),i<17&&r>=17&&(a=a.next(()=>{(function(l){l.createObjectStore(NT,{keyPath:CH})})(e)})),i<18&&r>=18&&ND()&&(a=a.next(()=>{n.objectStore(Sh).clear()}).next(()=>{n.objectStore(Ih).clear()})),a}wi(e){let n=0;return e.store(Fa).ee((i,r)=>{n+=Xp(r)}).next(()=>{const i={byteSize:n};return e.store(fd).put(F_,i)})}yi(e){const n=e.store(dd),i=e.store(Mi);return n.J().next(r=>U.forEach(r,s=>{const a=IDBKeyRange.bound([s.userId,Ys],[s.userId,s.lastAcknowledgedBatchId]);return i.J(Xa,a).next(o=>U.forEach(o,l=>{ie(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=Ga(this.serializer,l);return yO(e,s.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(mc),i=e.store(Fa);return e.store(co).get($p).next(r=>{const s=[];return i.ee((a,o)=>{const l=new be(a),c=function(d){return[0,mn(d)]}(l);s.push(n.get(c).next(u=>u?U.resolve():(d=>n.put({targetId:0,path:mn(d),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>U.waitFor(s))})}bi(e,n){e.createObjectStore(md,{keyPath:gH});const i=n.store(md),r=new KT,s=a=>{if(r.add(a)){const o=a.lastSegment(),l=a.popLast();return i.put({collectionId:o,parent:mn(l)})}};return n.store(Fa).ee({X:!0},(a,o)=>{const l=new be(a);return s(l.popLast())}).next(()=>n.store(dc).ee({X:!0},([a,o,l],c)=>{const u=tr(o);return s(u.popLast())}))}Di(e){const n=e.store(fc);return n.ee((i,r)=>{const s=Xu(r),a=fO(this.serializer,s);return n.put(a)})}Ci(e,n){const i=n.store(Fa),r=[];return i.ee((s,a)=>{const o=n.store(Hp),l=function(d){return d.document?new Y(be.fromString(d.document.name).popFirst(5)):d.noDocument?Y.fromSegments(d.noDocument.path):d.unknownDocument?Y.fromSegments(d.unknownDocument.path):ee(36783)}(a).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(o.put(c))}).next(()=>U.waitFor(r))}Fi(e,n){const i=n.store(Mi),r=xO(this.serializer),s=new QT(hy.mi,this.serializer.yt);return i.J().next(a=>{const o=new Map;return a.forEach(l=>{let c=o.get(l.userId)??de();Ga(this.serializer,l).keys().forEach(u=>c=c.add(u)),o.set(l.userId,c)}),U.forEach(o,(l,c)=>{const u=new qt(c),d=cy.wt(this.serializer,u),f=s.getIndexManager(u),h=uy.wt(u,this.serializer,f,s.referenceDelegate);return new EO(r,h,d,f).recalculateAndSaveOverlaysForDocumentKeys(new $_(n,kn.ce),l).next()})})}}function jA(t){t.createObjectStore(mc,{keyPath:mH}).createIndex(CT,pH,{unique:!0}),t.createObjectStore(fc,{keyPath:"targetId"}).createIndex(cM,fH,{unique:!0}),t.createObjectStore(co)}const vs="IndexedDbPersistence",Jv=18e5,Zv=5e3,e0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",SO="main";class YT{constructor(e,n,i,r,s,a,o,l,c,u,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.Mi=s,this.window=a,this.document=o,this.xi=c,this.Oi=u,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!YT.v())throw new G(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new M$(this,r),this.$i=n+SO,this.serializer=new dO(l),this.Ui=new sr(this.$i,this.Ni,new G$(this.serializer)),this.hi=new T$,this.Pi=new P$(this.referenceDelegate,this.serializer),this.remoteDocumentCache=xO(this.serializer),this.Ii=new b$,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,u===!1&&bt(vs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new G(B.FAILED_PRECONDITION,e0);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new kn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>am(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(ba(e))return K(vs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return K(vs,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Vu(e).get(tl).next(n=>U.resolve(this.es(n)))}ts(e){return am(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Jv)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=Vt(n,pc);return i.J().next(r=>{const s=this.ss(r,Jv),a=r.filter(o=>s.indexOf(o)===-1);return U.forEach(a,o=>i.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?U.resolve(!0):Vu(e).get(tl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Zv)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new G(B.FAILED_PRECONDITION,e0);return!1}}return!(!this.networkEnabled||!this.inForeground)||am(e).J().next(i=>this.ss(i,Zv).find(r=>{if(this.clientId!==r.clientId){const s=!this.networkEnabled&&r.networkEnabled,a=!this.inForeground&&r.inForeground,o=this.networkEnabled===r.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&K(vs,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[tf,pc],e=>{const n=new $_(e,kn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(i=>this.rs(i.updateTimeMs,n)&&!this.us(i.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>am(e).J().next(n=>this.ss(n,Jv).map(i=>i.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return uy.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new C$(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return cy.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,i){K(vs,"Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?DH:l===17?gM:l===16?NH:l===15?DT:l===14?pM:l===13?mM:l===12?PH:l===11?fM:void ee(60245)}(this.Ni);let a;return this.Ui.runTransaction(e,r,s,o=>(a=new $_(o,this.ci?this.ci.next():kn.ce),n==="readwrite-primary"?this.Hi(a).next(l=>!!l||this.Yi(a)).next(l=>{if(!l)throw bt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new G(B.FAILED_PRECONDITION,iM);return i(a)}).next(l=>this.Xi(a).next(()=>l)):this.Is(a).next(()=>i(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Is(e){return Vu(e).get(tl).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Zv)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new G(B.FAILED_PRECONDITION,e0)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vu(e).put(tl,n)}static v(){return sr.v()}Zi(e){const n=Vu(e);return n.get(tl).next(i=>this.es(i)?(K(vs,"Releasing primary lease."),n.delete(tl)):U.resolve())}rs(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(bt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;PD()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const i=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return K(vs,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return bt(vs,"Failed to get zombied client id.",i),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){bt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vu(t){return Vt(t,tf)}function am(t){return Vt(t,pc)}function XT(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=de(),r=de();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new JT(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return PD()?8:sM(Ae())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.ys(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new K$;return this.Ss(e,n,a).next(o=>{if(s.result=o,this.Vs)return this.bs(e,n,a,o.size)})}).next(()=>s.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(hl()<=ge.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",dl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(hl()<=ge.DEBUG&&K("QueryEngine","Query:",dl(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(hl()<=ge.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",dl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(n))):U.resolve())}ys(e,n){if(cA(n))return U.resolve(null);let i=En(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Wp(n,null,"F"),i=En(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=de(...s);return this.ps.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Ds(n,o);return this.Cs(n,c,a,l.readTime)?this.ys(e,Wp(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,i,r){return cA(n)||r.isEqual(re.min())?U.resolve(null):this.ps.getDocuments(e,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?U.resolve(null):(hl()<=ge.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),dl(n)),this.vs(e,a,n,tM(r,hc)).next(o=>o))})}Ds(e,n){let i=new Ue(LM(e));return n.forEach((r,s)=>{sf(e,s)&&(i=i.add(s))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,n,i){return hl()<=ge.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",dl(n)),this.ps.getDocumentsMatchingQuery(e,n,ai.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="LocalStore",W$=3e8;class Q${constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Ge(le),this.xs=new ts(s=>To(s),nf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function AO(t,e,n,i){return new Q$(t,e,n,i)}async function RO(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],o=[];let l=de();for(const c of r){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({Ls:c,removedBatchIds:a,addedBatchIds:o}))})})}function Y$(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,c,u){const d=c.batch,f=d.keys();let h=U.resolve();return f.forEach(p=>{h=h.next(()=>u.getEntry(l,p)).next(g=>{const v=c.docVersions.get(p);ie(v!==null,48541),g.version.compareTo(v)<0&&(d.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),u.addEntry(g)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let l=de();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function CO(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function X$(t,e){const n=J(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const o=[];e.targetChanges.forEach((u,d)=>{const f=r.get(d);if(!f)return;o.push(n.Pi.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,u.addedDocuments,d)));let h=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?h=h.withResumeToken(gt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):u.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(u.resumeToken,i)),r=r.insert(d,h),function(g,v,y){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=W$?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,h,u)&&o.push(n.Pi.updateTargetData(s,h))});let l=On(),c=de();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),o.push(PO(s,a,e.documentUpdates).next(u=>{l=u.ks,c=u.qs})),!i.isEqual(re.min())){const u=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));o.push(u)}return U.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ms=r,s))}function PO(t,e,n){let i=de(),r=de();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=On();return n.forEach((o,l)=>{const c=s.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(o)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):K(ZT,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{ks:a,qs:r}})}function J$(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Ys),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Tc(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(s=>s?(r=s,U.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Pr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function xc(t,e,n){const i=J(t),r=i.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!ba(a))throw a;K(ZT,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function Zp(t,e,n){const i=J(t);let r=re.min(),s=de();return i.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const d=J(l),f=d.xs.get(u);return f!==void 0?U.resolve(d.Ms.get(f)):d.Pi.getTargetData(c,u)}(i,a,En(e)).next(o=>{if(o)return r=o.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:re.min(),n?s:de())).next(o=>(kO(i,VM(e),o),{documents:o,Qs:s})))}function NO(t,e){const n=J(t),i=J(n.Pi),r=n.Ms.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",s=>i.At(s,e).next(a=>a?a.target:null))}function DO(t,e){const n=J(t),i=n.Os.get(e)||re.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.Ns.getAllFromCollectionGroup(r,e,tM(i,hc),Number.MAX_SAFE_INTEGER)).then(r=>(kO(n,e,r),r))}function kO(t,e,n){let i=t.Os.get(e)||re.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.Os.set(e,i)}async function Z$(t,e,n,i){const r=J(t);let s=de(),a=On();for(const c of n){const u=e.$s(c.metadata.name);c.document&&(s=s.add(u));const d=e.Us(c);d.setReadTime(e.Ks(c.metadata.readTime)),a=a.insert(u,d)}const o=r.Ns.newChangeBuffer({trackRemovals:!0}),l=await Tc(r,function(u){return En(Gc(be.fromString(`__bundle__/docs/${u}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>PO(c,o,a).next(u=>(o.apply(c),u)).next(u=>r.Pi.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Pi.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,u.ks,u.qs)).next(()=>u.ks)))}async function eG(t,e,n=de()){const i=await Tc(t,En($T(e.bundledQuery))),r=J(t);return r.persistence.runTransaction("Save named query","readwrite",s=>{const a=xt(e.readTime);if(i.snapshotVersion.compareTo(a)>=0)return r.Ii.saveNamedQuery(s,e);const o=i.withResumeToken(gt.EMPTY_BYTE_STRING,a);return r.Ms=r.Ms.insert(o.targetId,o),r.Pi.updateTargetData(s,o).next(()=>r.Pi.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Pi.addMatchingKeys(s,n,i.targetId)).next(()=>r.Ii.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO="firestore_clients";function zA(t,e){return`${MO}_${t}_${e}`}const OO="firestore_mutations";function BA(t,e,n){let i=`${OO}_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const VO="firestore_targets";function t0(t,e){return`${VO}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i="SharedClientState";class eg{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Ws(e,n,i){const r=JSON.parse(i);let s,a=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(s=new G(r.error.code,r.error.message))),a?new eg(e,n,r.state,s):(bt($i,`Failed to parse mutation state for ID '${n}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ph{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Ws(e,n){const i=JSON.parse(n);let r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new G(i.error.code,i.error.message))),s?new Ph(e,i.state,r):(bt($i,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tg{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const i=JSON.parse(n);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=LT();for(let a=0;r&&a<i.activeTargetIds.length;++a)r=aM(i.activeTargetIds[a]),s=s.add(i.activeTargetIds[a]);return r?new tg(e,s):(bt($i,`Failed to parse client data for instance '${e}': ${n}`),null)}}class ex{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new ex(n.clientId,n.onlineState):(bt($i,`Failed to parse online state: ${e}`),null)}}class aw{constructor(){this.activeTargetIds=LT()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class n0{constructor(e,n,i,r,s){this.window=e,this.Mi=n,this.persistenceKey=i,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ge(le),this.started=!1,this.Xs=[];const a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=zA(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new aw),this.ro=new RegExp(`^${MO}_${a}_([^_]*)$`),this.io=new RegExp(`^${OO}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${VO}_${a}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const r=this.getItem(zA(this.persistenceKey,i));if(r){const s=tg.Ws(i,r);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const i=this.uo(n);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,i){this.ho(e,n,i),this.Po(e)}addLocalQueryTarget(e,n=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(t0(this.persistenceKey,e));if(r){const s=Ph.Ws(e,r);s&&(i=s.state)}}return n&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(t0(this.persistenceKey,e))}updateQueryState(e,n,i){this.Io(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Po(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return K($i,"READ",e,n),n}setItem(e,n){K($i,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){K($i,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(K($i,"EVENT",n.key,n.newValue),n.key===this.eo)return void bt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const i=this.Ro(n.key);return this.Vo(i,null)}{const i=this.mo(n.key,n.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(n.key)){if(n.newValue!==null){const i=this.fo(n.key,n.newValue);if(i)return this.po(i)}}else if(this.so.test(n.key)){if(n.newValue!==null){const i=this.yo(n.key,n.newValue);if(i)return this.wo(i)}}else if(n.key===this.oo){if(n.newValue!==null){const i=this.uo(n.newValue);if(i)return this.co(i)}}else if(n.key===this.no){const i=function(s){let a=kn.ce;if(s!=null)try{const o=JSON.parse(s);ie(typeof o=="number",30636,{So:s}),a=o}catch(o){bt($i,"Failed to read sequence number from WebStorage",o)}return a}(n.newValue);i!==kn.ce&&this.sequenceNumberHandler(i)}else if(n.key===this._o){const i=this.bo(n.newValue);await Promise.all(i.map(r=>this.syncEngine.Do(r)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,i){const r=new eg(this.currentUser,e,n,i),s=BA(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Gs())}Po(e){const n=BA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,i){const r=t0(this.persistenceKey,e),s=new Ph(e,n,i);this.setItem(r,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const i=this.Ro(e);return tg.Ws(i,n)}fo(e,n){const i=this.io.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return eg.Ws(new qt(s),r,n)}yo(e,n){const i=this.so.exec(e),r=Number(i[1]);return Ph.Ws(r,n)}uo(e){return ex.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);K($i,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const i=n?this.Zs.insert(e,n):this.Zs.remove(e),r=this.lo(this.Zs),s=this.lo(i),a=[],o=[];return s.forEach(l=>{r.has(l)||a.push(l)}),r.forEach(l=>{s.has(l)||o.push(l)}),this.syncEngine.Fo(a,o).then(()=>{this.Zs=i})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=LT();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}}class LO{constructor(){this.Mo=new aw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new aw,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tG{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="ConnectivityMonitor";class qA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){K(FA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){K(FA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let om=null;function ow(){return om===null?om=function(){return 268435456+Math.round(2147483648*Math.random())}():om++,"0x"+om.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="RestConnection",nG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iG{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===G_?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,s){const a=ow(),o=this.zo(e,n.toUriEncodedString());K(i0,`Sending RPC '${e}' ${a}:`,o,i);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,s);const{host:c}=new URL(o),u=gr(c);return this.Jo(e,o,l,i,u).then(d=>(K(i0,`Received RPC '${e}' ${a}: `,d),d),d=>{throw dr(i0,`RPC '${e}' ${a} failed with error: `,d,"url: ",o,"request:",i),d})}Ho(e,n,i,r,s,a){return this.Go(e,n,i,r,s)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$c}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}zo(e,n){const i=nG[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rG{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class sG extends iG{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,s){const a=ow();return new Promise((o,l)=>{const c=new Hk;c.setWithCredentials(!0),c.listenOnce($k.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case zm.NO_ERROR:const d=c.getResponseJson();K(on,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case zm.TIMEOUT:K(on,`RPC '${e}' ${a} timed out`),l(new G(B.DEADLINE_EXCEEDED,"Request time out"));break;case zm.HTTP_ERROR:const f=c.getStatus();if(K(on,`RPC '${e}' ${a} failed with status:`,f,"response text:",c.getResponseText()),f>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h==null?void 0:h.error;if(p&&p.status&&p.message){const g=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(w)>=0?w:B.UNKNOWN}(p.status);l(new G(g,p.message))}else l(new G(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new G(B.UNAVAILABLE,"Connection failed."));break;default:ee(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{K(on,`RPC '${e}' ${a} completed.`)}});const u=JSON.stringify(r);K(on,`RPC '${e}' ${a} sending request:`,r),c.send(n,"POST",u,i,15)})}T_(e,n,i){const r=ow(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Wk(),o=Kk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const u=s.join("");K(on,`Creating RPC '${e}' stream ${r}: ${u}`,l);const d=a.createWebChannel(u,l);this.I_(d);let f=!1,h=!1;const p=new rG({Yo:v=>{h?K(on,`Not sending because RPC '${e}' stream ${r} is closed:`,v):(f||(K(on,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),K(on,`RPC '${e}' stream ${r} sending:`,v),d.send(v))},Zo:()=>d.close()}),g=(v,y,w)=>{v.listen(y,b=>{try{w(b)}catch(R){setTimeout(()=>{throw R},0)}})};return g(d,Wu.EventType.OPEN,()=>{h||(K(on,`RPC '${e}' stream ${r} transport opened.`),p.o_())}),g(d,Wu.EventType.CLOSE,()=>{h||(h=!0,K(on,`RPC '${e}' stream ${r} transport closed`),p.a_(),this.E_(d))}),g(d,Wu.EventType.ERROR,v=>{h||(h=!0,dr(on,`RPC '${e}' stream ${r} transport errored. Name:`,v.name,"Message:",v.message),p.a_(new G(B.UNAVAILABLE,"The operation could not be completed")))}),g(d,Wu.EventType.MESSAGE,v=>{var y;if(!h){const w=v.data[0];ie(!!w,16349);const b=w,R=(b==null?void 0:b.error)||((y=b[0])==null?void 0:y.error);if(R){K(on,`RPC '${e}' stream ${r} received error:`,R);const S=R.status;let C=function(A){const I=St[A];if(I!==void 0)return YM(I)}(S),x=R.message;C===void 0&&(C=B.INTERNAL,x="Unknown error status: "+S+" with message "+R.message),h=!0,p.a_(new G(C,x)),d.close()}else K(on,`RPC '${e}' stream ${r} received:`,w),p.u_(w)}}),g(o,Gk.STAT_EVENT,v=>{v.stat===j_.PROXY?K(on,`RPC '${e}' stream ${r} detected buffering proxy`):v.stat===j_.NOPROXY&&K(on,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(){return typeof window<"u"?window:null}function Ym(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(t){return new u$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&K("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="PersistentStream";class jO{constructor(e,n,i,r,s,a,o,l){this.Mi=e,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tx(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(bt(n.toString()),bt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new G(B.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return K(HA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(K(HA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aG extends jO{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=f$(this.serializer,e),i=function(s){if(!("targetChange"in s))return re.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?re.min():a.readTime?xt(a.readTime):re.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=tw(this.serializer),n.addTarget=function(s,a){let o;const l=a.target;if(o=Gp(l)?{documents:aO(s,l)}:{query:oO(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=eO(s,a.resumeToken);const c=Z_(s,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(re.min())>0){o.readTime=bc(s,a.snapshotVersion.toTimestamp());const c=Z_(s,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const i=p$(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=tw(this.serializer),n.removeTarget=e,this.q_(n)}}class oG extends jO{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=m$(e.writeResults,e.commitTime),i=xt(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=tw(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>wd(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lG{}class cG extends lG{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new G(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,ew(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(B.UNKNOWN,s.toString())})}Ho(e,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(e,ew(n,i),r,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G(B.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class uG{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bt(n),this.aa=!1):K("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro="RemoteStore";class hG{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{xa(this)&&(K(Ro,"Restarting streams for network reachability change."),await async function(l){const c=J(l);c.Ea.add(4),await Qc(c),c.Ra.set("Unknown"),c.Ea.delete(4),await uf(c)}(this))})}),this.Ra=new uG(i,r)}}async function uf(t){if(xa(t))for(const e of t.da)await e(!0)}async function Qc(t){for(const e of t.da)await e(!1)}function dy(t,e){const n=J(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),rx(n)?ix(n):Xc(n).O_()&&nx(n,e))}function Ec(t,e){const n=J(t),i=Xc(n);n.Ia.delete(e),i.O_()&&zO(n,e),n.Ia.size===0&&(i.O_()?i.L_():xa(n)&&n.Ra.set("Unknown"))}function nx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xc(t).Y_(e)}function zO(t,e){t.Va.Ue(e),Xc(t).Z_(e)}function ix(t){t.Va=new a$({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Xc(t).start(),t.Ra.ua()}function rx(t){return xa(t)&&!Xc(t).x_()&&t.Ia.size>0}function xa(t){return J(t).Ea.size===0}function BO(t){t.Va=void 0}async function dG(t){t.Ra.set("Online")}async function fG(t){t.Ia.forEach((e,n)=>{nx(t,e)})}async function mG(t,e){BO(t),rx(t)?(t.Ra.ha(e),ix(t)):t.Ra.set("Unknown")}async function pG(t,e,n){if(t.Ra.set("Online"),e instanceof ZM&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const o of s.targetIds)r.Ia.has(o)&&(await r.remoteSyncer.rejectListen(o,a),r.Ia.delete(o),r.Va.removeTarget(o))}(t,e)}catch(i){K(Ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ng(t,i)}else if(e instanceof Wm?t.Va.Ze(e):e instanceof JM?t.Va.st(e):t.Va.tt(e),!n.isEqual(re.min()))try{const i=await CO(t.localStore);n.compareTo(i)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.Ia.get(c);u&&s.Ia.set(c,u.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const u=s.Ia.get(l);if(!u)return;s.Ia.set(l,u.withResumeToken(gt.EMPTY_BYTE_STRING,u.snapshotVersion)),zO(s,l);const d=new Pr(u.target,l,c,u.sequenceNumber);nx(s,d)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(i){K(Ro,"Failed to raise snapshot:",i),await ng(t,i)}}async function ng(t,e,n){if(!ba(e))throw e;t.Ea.add(1),await Qc(t),t.Ra.set("Offline"),n||(n=()=>CO(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K(Ro,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await uf(t)})}function FO(t,e){return e().catch(n=>ng(t,n,e))}async function Yc(t){const e=J(t),n=ha(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ys;for(;gG(e);)try{const r=await J$(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,yG(e,r)}catch(r){await ng(e,r)}qO(e)&&HO(e)}function gG(t){return xa(t)&&t.Ta.length<10}function yG(t,e){t.Ta.push(e);const n=ha(t);n.O_()&&n.X_&&n.ea(e.mutations)}function qO(t){return xa(t)&&!ha(t).x_()&&t.Ta.length>0}function HO(t){ha(t).start()}async function vG(t){ha(t).ra()}async function _G(t){const e=ha(t);for(const n of t.Ta)e.ea(n.mutations)}async function wG(t,e,n){const i=t.Ta.shift(),r=BT.from(i,e,n);await FO(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Yc(t)}async function bG(t,e){e&&ha(t).X_&&await async function(i,r){if(function(a){return QM(a)&&a!==B.ABORTED}(r.code)){const s=i.Ta.shift();ha(i).B_(),await FO(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Yc(i)}}(t,e),qO(t)&&HO(t)}async function $A(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),K(Ro,"RemoteStore received new credentials");const i=xa(n);n.Ea.add(3),await Qc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await uf(n)}async function lw(t,e){const n=J(t);e?(n.Ea.delete(2),await uf(n)):e||(n.Ea.add(2),await Qc(n),n.Ra.set("Unknown"))}function Xc(t){return t.ma||(t.ma=function(n,i,r){const s=J(n);return s.sa(),new aG(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:dG.bind(null,t),t_:fG.bind(null,t),r_:mG.bind(null,t),H_:pG.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),rx(t)?ix(t):t.Ra.set("Unknown")):(await t.ma.stop(),BO(t))})),t.ma}function ha(t){return t.fa||(t.fa=function(n,i,r){const s=J(n);return s.sa(),new oG(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:vG.bind(null,t),r_:bG.bind(null,t),ta:_G.bind(null,t),na:wG.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Yc(t)):(await t.fa.stop(),t.Ta.length>0&&(K(Ro,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,o=new sx(e,n,a,r,s);return o.start(i),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jc(t,e){if(bt("AsyncQueue",`${e}: ${t}`),ba(t))return new G(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{static emptySet(e){return new $l(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Y.comparator(n.key,i.key):(n,i)=>Y.comparator(n.key,i.key),this.keyedMap=Qu(),this.sortedSet=new Ge(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $l)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new $l;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.ga=new Ge(Y.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ee(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Sc{constructor(e,n,i,r,s,a,o,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new Sc(e,n,$l.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TG{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class xG{constructor(){this.queries=KA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=J(n),s=r.queries;r.queries=KA(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(i)})})(this,new G(B.ABORTED,"Firestore shutting down"))}}function KA(){return new ts(t=>OM(t),rf)}async function ax(t,e){const n=J(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.ba()&&e.Da()&&(i=2):(s=new TG,i=e.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const o=Jc(a,`Initialization of query '${dl(e.query)}' failed`);return void e.onError(o)}n.queries.set(r,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&lx(n)}async function ox(t,e){const n=J(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=e.Da()?0:1:!s.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function EG(t,e){const n=J(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const o of a.Sa)o.Fa(r)&&(i=!0);a.wa=r}}i&&lx(n)}function SG(t,e,n){const i=J(t),r=i.queries.get(e);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(e)}function lx(t){t.Ca.forEach(e=>{e.next()})}var cw,WA;(WA=cw||(cw={})).Ma="default",WA.Cache="cache";class cx{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Sc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Sc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cw.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IG{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.serializer=e}$s(e){return ar(this.serializer,e)}Us(e){return e.metadata.exists?sO(this.serializer,e.document,!1):Xe.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return xt(e)}}class AG{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=$O(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const i=be.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,i=new QA(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.$s(r.metadata.name);for(const a of r.metadata.queries){const o=(n.get(a)||de()).add(s);n.set(a,o)}}return n}async ja(e){const n=await Z$(e,new QA(this.serializer),this.Wa,this.Ua.id),i=this.za(this.documents);for(const r of this.Ka)await eG(e,r,i.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function $O(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.key=e}}class KO{constructor(e){this.key=e}}class WO{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=de(),this.mutatedKeys=de(),this.eu=LM(e),this.tu=new $l(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new GA,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,o=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{const f=r.get(u),h=sf(this.query,d)?d:null,p=!!f&&this.mutatedKeys.has(f.key),g=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let v=!1;f&&h?f.data.isEqual(h.data)?p!==g&&(i.track({type:3,doc:h}),v=!0):this.su(f,h)||(i.track({type:2,doc:h}),v=!0,(l&&this.eu(h,l)>0||c&&this.eu(h,c)<0)&&(o=!0)):!f&&h?(i.track({type:0,doc:h}),v=!0):f&&!h&&(i.track({type:1,doc:f}),v=!0,(l||c)&&(o=!0)),v&&(h?(a=a.add(h),s=g?s.add(u):s.delete(u)):(a=a.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{tu:a,iu:i,Cs:o,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((u,d)=>function(h,p){const g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee(20277,{Rt:v})}};return g(h)-g(p)}(u.type,d.type)||this.eu(u.doc,d.doc)),this.ou(i),r=r??!1;const o=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,c=l!==this.Za;return this.Za=l,a.length!==0||c?{snapshot:new Sc(this.query,e.tu,s,a,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new GA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=de(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new KO(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new GO(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=de();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Sc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ea="SyncEngine";class RG{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class CG{constructor(e){this.key=e,this.hu=!1}}class PG{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ts(o=>OM(o),rf),this.Iu=new Map,this.Eu=new Set,this.du=new Ge(Y.comparator),this.Au=new Map,this.Ru=new WT,this.Vu={},this.mu=new Map,this.fu=Ao.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function NG(t,e,n=!0){const i=fy(t);let r;const s=i.Tu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await QO(i,e,n,!0),r}async function DG(t,e){const n=fy(t);await QO(n,e,!0,!1)}async function QO(t,e,n,i){const r=await Tc(t.localStore,En(e)),s=r.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return i&&(o=await ux(t,e,s,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&dy(t.remoteStore,r),o}async function ux(t,e,n,i,r){t.pu=(d,f,h)=>async function(g,v,y,w){let b=v.view.ru(y);b.Cs&&(b=await Zp(g.localStore,v.query,!1).then(({documents:x})=>v.view.ru(x,b)));const R=w&&w.targetChanges.get(v.targetId),S=w&&w.targetMismatches.get(v.targetId)!=null,C=v.view.applyChanges(b,g.isPrimaryClient,R,S);return uw(g,v.targetId,C.au),C.snapshot}(t,d,f,h);const s=await Zp(t.localStore,e,!0),a=new WO(e,s.Qs),o=a.ru(s.documents),l=lf.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=a.applyChanges(o,t.isPrimaryClient,l);uw(t,n,c.au);const u=new RG(e,n,a);return t.Tu.set(e,u),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function kG(t,e,n){const i=J(t),r=i.Tu.get(e),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!rf(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await xc(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Ec(i.remoteStore,r.targetId),Ic(i,r.targetId)}).catch(wa)):(Ic(i,r.targetId),await xc(i.localStore,r.targetId,!0))}async function MG(t,e){const n=J(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ec(n.remoteStore,i.targetId))}async function OG(t,e,n){const i=mx(t);try{const r=await function(a,o){const l=J(a),c=De.now(),u=o.reduce((h,p)=>h.add(p.key),de());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=On(),g=de();return l.Ns.getEntries(h,u).next(v=>{p=v,p.forEach((y,w)=>{w.isValidDocument()||(g=g.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(h,p)).next(v=>{d=v;const y=[];for(const w of o){const b=i$(w,d.get(w.key).overlayedDocument);b!=null&&y.push(new ns(w.key,b,IM(b.value.mapValue),st.exists(!0)))}return l.mutationQueue.addMutationBatch(h,c,y,o)}).next(v=>{f=v;const y=v.applyToLocalDocumentSet(d,g);return l.documentOverlayCache.saveOverlays(h,v.batchId,y)})}).then(()=>({batchId:f.batchId,changes:jM(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,o,l){let c=a.Vu[a.currentUser.toKey()];c||(c=new Ge(le)),c=c.insert(o,l),a.Vu[a.currentUser.toKey()]=c}(i,r.batchId,n),await is(i,r.changes),await Yc(i.remoteStore)}catch(r){const s=Jc(r,"Failed to persist write");n.reject(s)}}async function YO(t,e){const n=J(t);try{const i=await X$(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(ie(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?ie(a.hu,14607):r.removedDocuments.size>0&&(ie(a.hu,42227),a.hu=!1))}),await is(n,i,e)}catch(i){await wa(i)}}function YA(t,e,n){const i=J(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const o=a.view.va(e);o.snapshot&&r.push(o.snapshot)}),function(a,o){const l=J(a);l.onlineState=o;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.Sa)f.va(o)&&(c=!0)}),c&&lx(l)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function VG(t,e,n){const i=J(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),s=r&&r.key;if(s){let a=new Ge(Y.comparator);a=a.insert(s,Xe.newNoDocument(s,re.min()));const o=de().add(s),l=new of(re.min(),new Map,new Ge(le),a,o);await YO(i,l),i.du=i.du.remove(s),i.Au.delete(e),fx(i)}else await xc(i.localStore,e,!1).then(()=>Ic(i,e,n)).catch(wa)}async function LG(t,e){const n=J(t),i=e.batch.batchId;try{const r=await Y$(n.localStore,e);dx(n,i,null),hx(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await is(n,r)}catch(r){await wa(r)}}async function UG(t,e,n){const i=J(t);try{const r=await function(a,o){const l=J(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,o).next(d=>(ie(d!==null,37113),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,e);dx(i,e,n),hx(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await is(i,r)}catch(r){await wa(r)}}async function jG(t,e){const n=J(t);xa(n.remoteStore)||K(Ea,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(a){const o=J(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>o.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(i===Ys)return void e.resolve();const r=n.mu.get(i)||[];r.push(e),n.mu.set(i,r)}catch(i){const r=Jc(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function hx(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function dx(t,e,n){const i=J(t);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Ic(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||XO(t,i)})}function XO(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ec(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),fx(t))}function uw(t,e,n){for(const i of n)i instanceof GO?(t.Ru.addReference(i.key,e),zG(t,i)):i instanceof KO?(K(Ea,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||XO(t,i.key)):ee(19791,{wu:i})}function zG(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(K(Ea,"New document in limbo: "+n),t.Eu.add(i),fx(t))}function fx(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Y(be.fromString(e)),i=t.fu.next();t.Au.set(i,new CG(n)),t.du=t.du.insert(n,i),dy(t.remoteStore,new Pr(En(Gc(n.path)),i,"TargetPurposeLimboResolution",kn.ce))}}async function is(t,e,n){const i=J(t),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((o,l)=>{a.push(i.pu(l,e,n).then(c=>{var u;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=JT.As(l.targetId,c);s.push(d)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(l,c){const u=J(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>U.forEach(c,f=>U.forEach(f.Es,h=>u.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>U.forEach(f.ds,h=>u.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!ba(d))throw d;K(ZT,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const h=u.Ms.get(f),p=h.snapshotVersion,g=h.withLastLimboFreeSnapshotVersion(p);u.Ms=u.Ms.insert(f,g)}}}(i.localStore,s))}async function BG(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){K(Ea,"User change. New user:",e.toKey());const i=await RO(n.localStore,e);n.currentUser=e,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new G(B.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await is(n,i.Ls)}}function FG(t,e){const n=J(t),i=n.Au.get(e);if(i&&i.hu)return de().add(i.key);{let r=de();const s=n.Iu.get(e);if(!s)return r;for(const a of s){const o=n.Tu.get(a);r=r.unionWith(o.view.nu)}return r}}async function qG(t,e){const n=J(t),i=await Zp(n.localStore,e.query,!0),r=e.view.cu(i);return n.isPrimaryClient&&uw(n,e.targetId,r.au),r}async function HG(t,e){const n=J(t);return DO(n.localStore,e).then(i=>is(n,i))}async function $G(t,e,n,i){const r=J(t),s=await function(o,l){const c=J(o),u=J(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.er(d,l).next(f=>f?c.localDocuments.getDocuments(d,f):U.resolve(null)))}(r.localStore,e);s!==null?(n==="pending"?await Yc(r.remoteStore):n==="acknowledged"||n==="rejected"?(dx(r,e,i||null),hx(r,e),function(o,l){J(J(o).mutationQueue).ir(l)}(r.localStore,e)):ee(6720,"Unknown batchState",{Su:n}),await is(r,s)):K(Ea,"Cannot apply mutation batch with id: "+e)}async function GG(t,e){const n=J(t);if(fy(n),mx(n),e===!0&&n.gu!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),r=await XA(n,i.toArray());n.gu=!0,await lw(n.remoteStore,!0);for(const s of r)dy(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const i=[];let r=Promise.resolve();n.Iu.forEach((s,a)=>{n.sharedClientState.isLocalQueryTarget(a)?i.push(a):r=r.then(()=>(Ic(n,a),xc(n.localStore,a,!0))),Ec(n.remoteStore,a)}),await r,await XA(n,i),function(a){const o=J(a);o.Au.forEach((l,c)=>{Ec(o.remoteStore,c)}),o.Ru.Jr(),o.Au=new Map,o.du=new Ge(Y.comparator)}(n),n.gu=!1,await lw(n.remoteStore,!1)}}async function XA(t,e,n){const i=J(t),r=[],s=[];for(const a of e){let o;const l=i.Iu.get(a);if(l&&l.length!==0){o=await Tc(i.localStore,En(l[0]));for(const c of l){const u=i.Tu.get(c),d=await qG(i,u);d.snapshot&&s.push(d.snapshot)}}else{const c=await NO(i.localStore,a);o=await Tc(i.localStore,c),await ux(i,JO(c),a,!1,o.resumeToken)}r.push(o)}return i.Pu.H_(s),r}function JO(t){return MM(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function KG(t){return function(n){return J(J(n).persistence).Ts()}(J(t).localStore)}async function WG(t,e,n,i){const r=J(t);if(r.gu)return void K(Ea,"Ignoring unexpected query state notification.");const s=r.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const a=await DO(r.localStore,VM(s[0])),o=of.createSynthesizedRemoteEventForCurrentChange(e,n==="current",gt.EMPTY_BYTE_STRING);await is(r,a,o);break}case"rejected":await xc(r.localStore,e,!0),Ic(r,e,i);break;default:ee(64155,n)}}async function QG(t,e,n){const i=fy(t);if(i.gu){for(const r of e){if(i.Iu.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){K(Ea,"Adding an already active target "+r);continue}const s=await NO(i.localStore,r),a=await Tc(i.localStore,s);await ux(i,JO(s),a.targetId,!1,a.resumeToken),dy(i.remoteStore,a)}for(const r of n)i.Iu.has(r)&&await xc(i.localStore,r,!1).then(()=>{Ec(i.remoteStore,r),Ic(i,r)}).catch(wa)}}function fy(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VG.bind(null,e),e.Pu.H_=EG.bind(null,e.eventManager),e.Pu.yu=SG.bind(null,e.eventManager),e}function mx(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UG.bind(null,e),e}function YG(t,e,n){const i=J(t);(async function(s,a,o){try{const l=await a.getMetadata();if(await function(h,p){const g=J(h),v=xt(p.createTime);return g.persistence.runTransaction("hasNewerBundle","readonly",y=>g.Ii.getBundleMetadata(y,p.id)).then(y=>!!y&&y.createTime.compareTo(v)>=0)}(s.localStore,l))return await a.close(),o._completeWith(function(h){return{taskState:"Success",documentsLoaded:h.totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}}(l)),Promise.resolve(new Set);o._updateProgress($O(l));const c=new AG(l,a.serializer);let u=await a.bu();for(;u;){const f=await c.Ga(u);f&&o._updateProgress(f),u=await a.bu()}const d=await c.ja(s.localStore);return await is(s,d.Ha,void 0),await function(h,p){const g=J(h);return g.persistence.runTransaction("Save bundle","readwrite",v=>g.Ii.saveBundleMetadata(v,p))}(s.localStore,l),o._completeWith(d.progress),Promise.resolve(d.Ja)}catch(l){return dr(Ea,`Loading bundle failed with ${l}`),o._failWith(l),Promise.resolve(new Set)}})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}class bd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return AO(this.persistence,new IO,e.initialUser,this.serializer)}Cu(e){return new QT(hy.mi,this.serializer)}Du(e){return new LO}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bd.provider={build:()=>new bd};class XG extends bd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ie(this.persistence.referenceDelegate instanceof Jp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new wO(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new QT(i=>Jp.mi(i,n),this.serializer)}}class ZO extends bd{constructor(e,n,i){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await mx(this.xu.syncEngine),await Yc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return AO(this.persistence,new IO,e.initialUser,this.serializer)}Fu(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new wO(i,e.asyncQueue,n)}Mu(e,n){const i=new aH(n,this.persistence);return new sH(e.asyncQueue,i)}Cu(e){const n=XT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new YT(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,UO(),Ym(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new LO}}class JG extends ZO{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof n0&&(this.sharedClientState.syncEngine={Co:$G.bind(null,n),vo:WG.bind(null,n),Fo:QG.bind(null,n),Ts:KG.bind(null,n),Do:HG.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async i=>{await GG(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}Du(e){const n=UO();if(!n0.v(n))throw new G(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=XT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new n0(n,e.asyncQueue,i,e.clientId,e.initialUser)}}class Td{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>YA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=BG.bind(null,this.syncEngine),await lw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xG}()}createDatastore(e){const n=cf(e.databaseInfo.databaseId),i=function(s){return new sG(s)}(e.databaseInfo);return function(s,a,o,l){return new cG(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,a,o){return new hG(i,r,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>YA(this.syncEngine,n,0),function(){return qA.v()?new qA:new tG}())}createSyncEngine(e,n){return function(r,s,a,o,l,c,u){const d=new PG(r,s,a,o,l,c);return u&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=J(r);K(Ro,"RemoteStore shutting down."),s.Ea.add(5),await Qc(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Td.provider={build:()=>new Td};function JA(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):bt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZG{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new sn,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(i=>{i&&i.$a()?this.metadata.resolve(i.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Qa)}`))},i=>this.metadata.reject(i))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),i=Number(n);isNaN(i)&&this.Qu(`length string (${n}) is not valid number`);const r=await this.$u(i);return new IG(JSON.parse(r),e.length+i)}Uu(){return this.buffer.findIndex(e=>e===123)}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new G(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const a=J(r),o={documents:s.map(d=>_d(a.serializer,d))},l=await a.Ho("BatchGetDocuments",a.serializer.databaseId,be.emptyPath(),o,s.length),c=new Map;l.forEach(d=>{const f=d$(a.serializer,d);c.set(f.key.toString(),f)});const u=[];return s.forEach(d=>{const f=c.get(d.toString());ie(!!f,55234,{key:d}),u.push(f)}),u}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=Y.fromPath(i);this.mutations.push(new jT(r,this.precondition(r)))}),await async function(i,r){const s=J(i),a={writes:r.map(o=>wd(s.serializer,o))};await s.Go("Commit",s.serializer.databaseId,be.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ee(50498,{Gu:e.constructor.name});n=re.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new G(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(re.min())?st.exists(!1):st.updateTime(n):st.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(re.min()))throw new G(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return st.updateTime(n)}return st.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tK{constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.zu=i.maxAttempts,this.M_=new tx(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new eK(this.datastore),n=this.Hu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Yu(r)}))}).catch(i=>{this.Yu(i)})})}Hu(e){try{const n=this.updateFunction(e);return!ef(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!QM(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="FirestoreClient";class nK{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=qt.UNAUTHENTICATED,this.clientId=ST.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{K(da,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(K(da,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Jc(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function r0(t,e){t.asyncQueue.verifyOperationInProgress(),K(da,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await RO(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ZA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await px(t);K(da,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>$A(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>$A(e.remoteStore,r)),t._onlineComponents=e}async function px(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(da,"Using user provided OfflineComponentProvider");try{await r0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===B.FAILED_PRECONDITION||r.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;dr("Error using user provided cache. Falling back to memory cache: "+n),await r0(t,new bd)}}else K(da,"Using default OfflineComponentProvider"),await r0(t,new XG(void 0));return t._offlineComponents}async function py(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(da,"Using user provided OnlineComponentProvider"),await ZA(t,t._uninitializedComponentsProvider._online)):(K(da,"Using default OnlineComponentProvider"),await ZA(t,new Td))),t._onlineComponents}function eV(t){return px(t).then(e=>e.persistence)}function gx(t){return px(t).then(e=>e.localStore)}function tV(t){return py(t).then(e=>e.remoteStore)}function yx(t){return py(t).then(e=>e.syncEngine)}function iK(t){return py(t).then(e=>e.datastore)}async function Ac(t){const e=await py(t),n=e.eventManager;return n.onListen=NG.bind(null,e.syncEngine),n.onUnlisten=kG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=DG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=MG.bind(null,e.syncEngine),n}function rK(t){return t.asyncQueue.enqueue(async()=>{const e=await eV(t),n=await tV(t);return e.setNetworkEnabled(!0),function(r){const s=J(r);return s.Ea.delete(0),uf(s)}(n)})}function sK(t){return t.asyncQueue.enqueue(async()=>{const e=await eV(t),n=await tV(t);return e.setNetworkEnabled(!1),async function(r){const s=J(r);s.Ea.add(0),await Qc(s),s.Ra.set("Offline")}(n)})}function aK(t,e){const n=new sn;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const o=await function(c,u){const d=J(c);return d.persistence.runTransaction("read document","readonly",f=>d.localDocuments.getDocument(f,u))}(r,s);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new G(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const l=Jc(o,`Failed to get document '${s} from cache`);a.reject(l)}}(await gx(t),e,n)),n.promise}function nV(t,e,n={}){const i=new sn;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const u=new my({next:f=>{u.Nu(),a.enqueueAndForget(()=>ox(s,d));const h=f.docs.has(o);!h&&f.fromCache?c.reject(new G(B.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&l&&l.source==="server"?c.reject(new G(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new cx(Gc(o.path),u,{includeMetadataChanges:!0,qa:!0});return ax(s,d)}(await Ac(t),t.asyncQueue,e,n,i)),i.promise}function oK(t,e){const n=new sn;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const o=await Zp(r,s,!0),l=new WO(s,o.Qs),c=l.ru(o.documents),u=l.applyChanges(c,!1);a.resolve(u.snapshot)}catch(o){const l=Jc(o,`Failed to execute query '${s} against cache`);a.reject(l)}}(await gx(t),e,n)),n.promise}function iV(t,e,n={}){const i=new sn;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const u=new my({next:f=>{u.Nu(),a.enqueueAndForget(()=>ox(s,d)),f.fromCache&&l.source==="server"?c.reject(new G(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new cx(o,u,{includeMetadataChanges:!0,qa:!0});return ax(s,d)}(await Ac(t),t.asyncQueue,e,n,i)),i.promise}function lK(t,e){const n=new my(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,s){J(r).Ca.add(s),s.next()}(await Ac(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(r,s){J(r).Ca.delete(s)}(await Ac(t),n))}}function cK(t,e,n,i){const r=function(a,o){let l;return l=typeof a=="string"?XM().encode(a):a,function(u,d){return new ZG(u,d)}(function(u,d){if(u instanceof Uint8Array)return JA(u,d);if(u instanceof ArrayBuffer)return JA(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),o)}(n,cf(e));t.asyncQueue.enqueueAndForget(async()=>{YG(await yx(t),r,i)})}function uK(t,e){return t.asyncQueue.enqueue(async()=>function(i,r){const s=J(i);return s.persistence.runTransaction("Get named query","readonly",a=>s.Ii.getNamedQuery(a,r))}(await gx(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rV(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV="firestore.googleapis.com",tR=!0;class nR{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sV,this.ssl=tR}else this.host=e.host,this.ssl=e.ssl??tR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<N$)throw new G(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Jk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rV(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hf{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nR({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nR(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Kq;switch(i.type){case"firstParty":return new Xq(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new G(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=eR.get(n);i&&(K("ComponentProvider","Removing Datastore"),eR.delete(n),i.terminate())}(this),Promise.resolve()}}function hK(t,e,n,i={}){var c;t=Ie(t,hf);const r=gr(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;r&&(Qb(`https://${o}`),Yb("Firestore",!0)),s.host!==sV&&s.host!==o&&dr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:r,emulatorOptions:i};if(!ia(l,a)&&(t._setSettings(l),i.mockUserToken)){let u,d;if(typeof i.mockUserToken=="string")u=i.mockUserToken,d=qt.MOCK_USER;else{u=SD(i.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new G(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new qt(f)}t._authCredentials=new Wq(new Yk(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sn=class aV{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new aV(this.firestore,e,this._query)}},$e=class Ju{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ju(this.firestore,e,this._key)}toJSON(){return{type:Ju._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Zd(n,Ju._jsonSchema))return new Ju(e,i||null,new Y(be.fromString(n.referencePath)))}};$e._jsonSchemaVersion="firestore/documentReference/1.0",$e._jsonSchema={type:Nt("string",$e._jsonSchemaVersion),referencePath:Nt("string")};let Xs=class oV extends Sn{constructor(e,n,i){super(e,n,Gc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new Y(e))}withConverter(e){return new oV(this.firestore,e,this._path)}};function lV(t,e,...n){if(t=ne(t),IT("collection","path",e),t instanceof hf){const i=be.fromString(e,...n);return HI(i),new Xs(t,null,i)}{if(!(t instanceof $e||t instanceof Xs))throw new G(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(be.fromString(e,...n));return HI(i),new Xs(t.firestore,null,i)}}function dK(t,e){if(t=Ie(t,hf),IT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new G(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Sn(t,null,function(i){return new es(be.emptyPath(),i)}(e))}function ig(t,e,...n){if(t=ne(t),arguments.length===1&&(e=ST.newId()),IT("doc","path",e),t instanceof hf){const i=be.fromString(e,...n);return qI(i),new $e(t,null,new Y(i))}{if(!(t instanceof $e||t instanceof Xs))throw new G(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(be.fromString(e,...n));return qI(i),new $e(t.firestore,t instanceof Xs?t.converter:null,new Y(i))}}function cV(t,e){return t=ne(t),e=ne(e),(t instanceof $e||t instanceof Xs)&&(e instanceof $e||e instanceof Xs)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function uV(t,e){return t=ne(t),e=ne(e),t instanceof Sn&&e instanceof Sn&&t.firestore===e.firestore&&rf(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="AsyncQueue";class rR{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tx(this,"async_queue_retry"),this._c=()=>{const i=Ym();i&&K(iR,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Ym();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ym();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new sn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ba(e))throw e;K(iR,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,bt("INTERNAL UNHANDLED ERROR: ",sR(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=sx.createAndSchedule(this,e,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&ee(47125,{Pc:sR(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function sR(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class fK{constructor(){this._progressObserver={},this._taskCompletionResolver=new sn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mK=-1;let Et=class extends hf{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new rR,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rR(e),this._firestoreClient=void 0,await e}}};function pn(t){if(t._terminated)throw new G(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||hV(t),t._firestoreClient}function hV(t){var i,r,s;const e=t._freezeSettings(),n=function(o,l,c,u){return new OH(o,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,rV(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new nK(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}function pK(t,e){dr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return dV(t,Td.provider,{build:i=>new ZO(i,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function gK(t){dr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();dV(t,Td.provider,{build:n=>new JG(n,e.cacheSizeBytes)})}function dV(t,e,n){if((t=Ie(t,Et))._firestoreClient||t._terminated)throw new G(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new G(B.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},hV(t)}function yK(t){if(t._initialized&&!t._terminated)throw new G(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new sn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(i){if(!sr.v())return Promise.resolve();const r=i+SO;await sr.delete(r)}(XT(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function vK(t){return function(n){const i=new sn;return n.asyncQueue.enqueueAndForget(async()=>jG(await yx(n),i)),i.promise}(pn(t=Ie(t,Et)))}function _K(t){return rK(pn(t=Ie(t,Et)))}function wK(t){return sK(pn(t=Ie(t,Et)))}function bK(t,e){const n=pn(t=Ie(t,Et)),i=new fK;return cK(n,t._databaseId,e,i),i}function TK(t,e){return uK(pn(t=Ie(t,Et)),e).then(n=>n?new Sn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hn(gt.fromBase64String(e))}catch(n){throw new G(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new hn(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zd(e,hn._jsonSchema))return hn.fromBase64String(e.bytes)}}hn._jsonSchemaVersion="firestore/bytes/1.0",hn._jsonSchema={type:Nt("string",hn._jsonSchemaVersion),bytes:Nt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fa=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jo=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Oi._jsonSchemaVersion}}static fromJSON(e){if(Zd(e,Oi._jsonSchema))return new Oi(e.latitude,e.longitude)}}Oi._jsonSchemaVersion="firestore/geoPoint/1.0",Oi._jsonSchema={type:Nt("string",Oi._jsonSchemaVersion),latitude:Nt("number"),longitude:Nt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:or._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zd(e,or._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new or(e.vectorValues);throw new G(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}or._jsonSchemaVersion="firestore/vectorValue/1.0",or._jsonSchema={type:Nt("string",or._jsonSchemaVersion),vectorValues:Nt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xK=/^__.*__$/;class EK{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kc(e,this.data,n,this.fieldTransforms)}}class fV{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mV(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee(40011,{Ac:t})}}class gy{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new gy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return rg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mV(this.Ac)&&xK.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class SK{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||cf(e)}Cc(e,n,i,r=!1){return new gy({Ac:e,methodName:n,Dc:i,path:rt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zo(t){const e=t._freezeSettings(),n=cf(t._databaseId);return new SK(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yy(t,e,n,i,r,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,n,r);Ex("Data must be an object, but it was:",a,i);const o=yV(i,a);let l,c;if(s.merge)l=new Mn(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const f=dw(e,d,n);if(!a.contains(f))throw new G(B.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);_V(u,f)||u.push(f)}l=new Mn(u),c=a.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=a.fieldTransforms;return new EK(new tn(o),l,c)}class df extends jo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof df}}function pV(t,e,n){return new gy({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class vx extends jo{_toFieldTransform(e){return new af(e.path,new _c)}isEqual(e){return e instanceof vx}}class _x extends jo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=pV(this,e,!0),i=this.vc.map(s=>Bo(s,n)),r=new xo(i);return new af(e.path,r)}isEqual(e){return e instanceof _x&&ia(this.vc,e.vc)}}class wx extends jo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=pV(this,e,!0),i=this.vc.map(s=>Bo(s,n)),r=new Eo(i);return new af(e.path,r)}isEqual(e){return e instanceof wx&&ia(this.vc,e.vc)}}class bx extends jo{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new wc(e.serializer,FM(e.serializer,this.Fc));return new af(e.path,n)}isEqual(e){return e instanceof bx&&this.Fc===e.Fc}}function Tx(t,e,n,i){const r=t.Cc(1,e,n);Ex("Data must be an object, but it was:",r,i);const s=[],a=tn.empty();Ta(i,(l,c)=>{const u=Sx(e,l,n);c=ne(c);const d=r.yc(u);if(c instanceof df)s.push(u);else{const f=Bo(c,d);f!=null&&(s.push(u),a.set(u,f))}});const o=new Mn(s);return new fV(a,o,r.fieldTransforms)}function xx(t,e,n,i,r,s){const a=t.Cc(1,e,n),o=[dw(e,i,n)],l=[r];if(s.length%2!=0)throw new G(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)o.push(dw(e,s[f])),l.push(s[f+1]);const c=[],u=tn.empty();for(let f=o.length-1;f>=0;--f)if(!_V(c,o[f])){const h=o[f];let p=l[f];p=ne(p);const g=a.yc(h);if(p instanceof df)c.push(h);else{const v=Bo(p,g);v!=null&&(c.push(h),u.set(h,v))}}const d=new Mn(c);return new fV(u,d,a.fieldTransforms)}function gV(t,e,n,i=!1){return Bo(n,t.Cc(i?4:3,e))}function Bo(t,e){if(vV(t=ne(t)))return Ex("Unsupported field value:",e,t),yV(t,e);if(t instanceof jo)return function(i,r){if(!mV(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const o of i){let l=Bo(o,r.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=ne(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return FM(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=De.fromDate(i);return{timestampValue:bc(r.serializer,s)}}if(i instanceof De){const s=new De(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:bc(r.serializer,s)}}if(i instanceof Oi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof hn)return{bytesValue:eO(r.serializer,i._byteString)};if(i instanceof $e){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:HT(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof or)return function(a,o){return{mapValue:{fields:{[kT]:{stringValue:MT},[gc]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.Sc("VectorValues must only contain numeric values.");return UT(o.serializer,c)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${Zg(i)}`)}(t,e)}function yV(t,e){const n={};return yM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ta(t,(i,r)=>{const s=Bo(r,e.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function vV(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof De||t instanceof Oi||t instanceof hn||t instanceof $e||t instanceof jo||t instanceof or)}function Ex(t,e,n){if(!vV(n)||!Zk(n)){const i=Zg(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function dw(t,e,n){if((e=ne(e))instanceof fa)return e._internalPath;if(typeof e=="string")return Sx(t,e);throw rg("Field path arguments must be of type string or ",t,!1,void 0,n)}const IK=new RegExp("[~\\*/\\[\\]]");function Sx(t,e,n){if(e.search(IK)>=0)throw rg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fa(...e.split("."))._internalPath}catch{throw rg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rg(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${i}`),a&&(l+=` in document ${r}`),l+=")"),new G(B.INVALID_ARGUMENT,o+t+l)}function _V(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AK extends xd{data(){return super.data()}}function vy(t,e){return typeof e=="string"?Sx(t,e):e instanceof fa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ix{}class ff extends Ix{}function _s(t,e,...n){let i=[];e instanceof Ix&&i.push(e),i=i.concat(n),function(s){const a=s.filter(l=>l instanceof Ax).length,o=s.filter(l=>l instanceof _y).length;if(a>1||a>0&&o>0)throw new G(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class _y extends ff{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new _y(e,n,i)}_apply(e){const n=this._parse(e);return TV(e._query,n),new Sn(e.firestore,e.converter,J_(e._query,n))}_parse(e){const n=zo(e.firestore);return function(s,a,o,l,c,u,d){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new G(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){oR(d,u);const p=[];for(const g of d)p.push(aR(l,s,g));f={arrayValue:{values:p}}}else f=aR(l,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||oR(d,u),f=gV(o,a,d,u==="in"||u==="not-in");return xe.create(c,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function RK(t,e,n){const i=e,r=vy("where",t);return _y._create(r,i,n)}class Ax extends Ix{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ax(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Le.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let a=r;const o=s.getFlattenedFilters();for(const l of o)TV(a,l),a=J_(a,l)}(e._query,n),new Sn(e.firestore,e.converter,J_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Rx extends ff{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Rx(e,n)}_apply(e){const n=function(r,s,a){if(r.startAt!==null)throw new G(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new G(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vd(s,a)}(e._query,this._field,this._direction);return new Sn(e.firestore,e.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new es(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function CK(t,e="asc"){const n=e,i=vy("orderBy",t);return Rx._create(i,n)}class wy extends ff{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new wy(e,n,i)}_apply(e){return new Sn(e.firestore,e.converter,Wp(e._query,this._limit,this._limitType))}}function PK(t){return eM("limit",t),wy._create("limit",t,"F")}function NK(t){return eM("limitToLast",t),wy._create("limitToLast",t,"L")}class by extends ff{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new by(e,n,i)}_apply(e){const n=bV(e,this.type,this._docOrFields,this._inclusive);return new Sn(e.firestore,e.converter,function(r,s){return new es(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,n))}}function DK(...t){return by._create("startAt",t,!0)}function kK(...t){return by._create("startAfter",t,!1)}class Ty extends ff{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Ty(e,n,i)}_apply(e){const n=bV(e,this.type,this._docOrFields,this._inclusive);return new Sn(e.firestore,e.converter,function(r,s){return new es(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,n))}}function MK(...t){return Ty._create("endBefore",t,!1)}function OK(...t){return Ty._create("endAt",t,!0)}function bV(t,e,n,i){if(n[0]=ne(n[0]),n[0]instanceof xd)return function(s,a,o,l,c){if(!l)throw new G(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const d of Hl(s))if(d.field.isKeyField())u.push(bo(a,l.key));else{const f=l.data.field(d.field);if(ry(f))throw new G(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const h=d.field.canonicalString();throw new G(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${h}' (used as the orderBy) does not exist.`)}u.push(f)}return new ua(u,c)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=zo(t.firestore);return function(a,o,l,c,u,d){const f=a.explicitOrderBy;if(u.length>f.length)throw new G(B.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const h=[];for(let p=0;p<u.length;p++){const g=u[p];if(f[p].field.isKeyField()){if(typeof g!="string")throw new G(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof g}`);if(!VT(a)&&g.indexOf("/")!==-1)throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${g}' contains a slash.`);const v=a.path.child(be.fromString(g));if(!Y.isDocumentKey(v))throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const y=new Y(v);h.push(bo(o,y))}else{const v=gV(l,c,g);h.push(v)}}return new ua(h,d)}(t._query,t.firestore._databaseId,r,e,n,i)}}function aR(t,e,n){if(typeof(n=ne(n))=="string"){if(n==="")throw new G(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VT(e)&&n.indexOf("/")!==-1)throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(be.fromString(n));if(!Y.isDocumentKey(i))throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return bo(t,new Y(i))}if(n instanceof $e)return bo(t,n._key);throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zg(n)}.`)}function oR(t,e){if(!Array.isArray(t)||t.length===0)throw new G(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TV(t,e){const n=function(r,s){for(const a of r)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Cx{convertValue(e,n="none"){switch(la(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ta(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var i,r,s;const n=(s=(r=(i=e.fields)==null?void 0:i[gc].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>it(a.doubleValue));return new or(n)}convertGeoPoint(e){return new Oi(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=sy(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(pd(e));default:return null}}convertTimestamp(e){const n=Kr(e);return new De(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=be.fromString(e);ie(hO(i),9688,{name:e});const r=new oa(i.get(1),i.get(3)),s=new Y(i.popFirst(5));return r.isEqual(n)||bt(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class VK extends Cx{constructor(e){super(),this.firestore=e}convertBytes(e){return new hn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}class Ja{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Ei=class xV extends xd{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(vy("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=xV._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Ei._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ei._jsonSchema={type:Nt("string",Ei._jsonSchemaVersion),bundleSource:Nt("string","DocumentSnapshot"),bundleName:Nt("string"),bundle:Nt("string")};let Nh=class extends Ei{data(e={}){return super.data(e)}},Vi=class EV{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ja(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Nh(this._firestore,this._userDataWriter,i.key,i,new Ja(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(o=>{const l=new Nh(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ja(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new Nh(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ja(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:LK(o.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=EV._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ST.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function LK(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee(61501,{type:t})}}function SV(t,e){return t instanceof Ei&&e instanceof Ei?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Vi&&e instanceof Vi&&t._firestore===e._firestore&&uV(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UK(t){t=Ie(t,$e);const e=Ie(t.firestore,Et);return nV(pn(e),t._key).then(n=>Px(e,t,n))}Vi._jsonSchemaVersion="firestore/querySnapshot/1.0",Vi._jsonSchema={type:Nt("string",Vi._jsonSchemaVersion),bundleSource:Nt("string","QuerySnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class Fo extends Cx{constructor(e){super(),this.firestore=e}convertBytes(e){return new hn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}function jK(t){t=Ie(t,$e);const e=Ie(t.firestore,Et),n=pn(e),i=new Fo(e);return aK(n,t._key).then(r=>new Ei(e,i,t._key,r,new Ja(r!==null&&r.hasLocalMutations,!0),t.converter))}function zK(t){t=Ie(t,$e);const e=Ie(t.firestore,Et);return nV(pn(e),t._key,{source:"server"}).then(n=>Px(e,t,n))}function BK(t){t=Ie(t,Sn);const e=Ie(t.firestore,Et),n=pn(e),i=new Fo(e);return wV(t._query),iV(n,t._query).then(r=>new Vi(e,i,t,r))}function FK(t){t=Ie(t,Sn);const e=Ie(t.firestore,Et),n=pn(e),i=new Fo(e);return oK(n,t._query).then(r=>new Vi(e,i,t,r))}function qK(t){t=Ie(t,Sn);const e=Ie(t.firestore,Et),n=pn(e),i=new Fo(e);return iV(n,t._query,{source:"server"}).then(r=>new Vi(e,i,t,r))}function lR(t,e,n){t=Ie(t,$e);const i=Ie(t.firestore,Et),r=xy(t.converter,e,n);return mf(i,[yy(zo(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,st.none())])}function cR(t,e,n,...i){t=Ie(t,$e);const r=Ie(t.firestore,Et),s=zo(r);let a;return a=typeof(e=ne(e))=="string"||e instanceof fa?xx(s,"updateDoc",t._key,e,n,i):Tx(s,"updateDoc",t._key,e),mf(r,[a.toMutation(t._key,st.exists(!0))])}function HK(t){return mf(Ie(t.firestore,Et),[new Wc(t._key,st.none())])}function $K(t,e){const n=Ie(t.firestore,Et),i=ig(t),r=xy(t.converter,e);return mf(n,[yy(zo(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,st.exists(!1))]).then(()=>i)}function IV(t,...e){var l,c,u;t=ne(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||hw(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(hw(e[i])){const d=e[i];e[i]=(l=d.next)==null?void 0:l.bind(d),e[i+1]=(c=d.error)==null?void 0:c.bind(d),e[i+2]=(u=d.complete)==null?void 0:u.bind(d)}let s,a,o;if(t instanceof $e)a=Ie(t.firestore,Et),o=Gc(t._key.path),s={next:d=>{e[i]&&e[i](Px(a,t,d))},error:e[i+1],complete:e[i+2]};else{const d=Ie(t,Sn);a=Ie(d.firestore,Et),o=d._query;const f=new Fo(a);s={next:h=>{e[i]&&e[i](new Vi(a,f,d,h))},error:e[i+1],complete:e[i+2]},wV(t._query)}return function(f,h,p,g){const v=new my(g),y=new cx(h,v,p);return f.asyncQueue.enqueueAndForget(async()=>ax(await Ac(f),y)),()=>{v.Nu(),f.asyncQueue.enqueueAndForget(async()=>ox(await Ac(f),y))}}(pn(a),o,r,s)}function GK(t,e){return lK(pn(t=Ie(t,Et)),hw(e)?e:{next:e})}function mf(t,e){return function(i,r){const s=new sn;return i.asyncQueue.enqueueAndForget(async()=>OG(await yx(i),r,s)),s.promise}(pn(t),e)}function Px(t,e,n){const i=n.docs.get(e._key),r=new Fo(t);return new Ei(t,r,e._key,i,new Ja(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KK={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WK=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=zo(e)}set(e,n,i){this._verifyNotCommitted();const r=Ls(e,this._firestore),s=xy(r.converter,n,i),a=yy(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,st.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=Ls(e,this._firestore);let a;return a=typeof(n=ne(n))=="string"||n instanceof fa?xx(this._dataReader,"WriteBatch.update",s._key,n,i,r):Tx(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,st.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ls(e,this._firestore);return this._mutations=this._mutations.concat(new Wc(n._key,st.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ls(t,e){if((t=ne(t)).firestore!==e)throw new G(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QK{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=zo(e)}get(e){const n=Ls(e,this._firestore),i=new VK(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return ee(24041);const s=r[0];if(s.isFoundDocument())return new xd(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new xd(this._firestore,i,n._key,null,n.converter);throw ee(18433,{doc:s})})}set(e,n,i){const r=Ls(e,this._firestore),s=xy(r.converter,n,i),a=yy(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,a),this}update(e,n,i,...r){const s=Ls(e,this._firestore);let a;return a=typeof(n=ne(n))=="string"||n instanceof fa?xx(this._dataReader,"Transaction.update",s._key,n,i,r):Tx(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(e){const n=Ls(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YK=class extends QK{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ls(e,this._firestore),i=new Fo(this._firestore);return super.get(e).then(r=>new Ei(this._firestore,i,n._key,r._document,new Ja(!1,!1),n.converter))}};function XK(t,e,n){t=Ie(t,Et);const i={...KK,...n};return function(s){if(s.maxAttempts<1)throw new G(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,o){const l=new sn;return s.asyncQueue.enqueueAndForget(async()=>{const c=await iK(s);new tK(s.asyncQueue,c,o,a,l).ju()}),l.promise}(pn(t),r=>e(new YK(t,r)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JK(){return new df("deleteField")}function ZK(){return new vx("serverTimestamp")}function eW(...t){return new _x("arrayUnion",t)}function tW(...t){return new wx("arrayRemove",t)}function nW(t){return new bx("increment",t)}(function(e,n=!0){(function(r){$c=r})(Ri),Li(new jn("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),o=new Et(new Qq(i.getProvider("auth-internal")),new Jq(a,i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oa(c.options.projectId,u)}(a,r),a);return s={useFetchStreams:n,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),xn(jI,zI,e),xn(jI,zI,"esm2020")})();const iW="@firebase/firestore-compat",rW="0.4.2";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new G("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(){if(typeof Uint8Array>"u")throw new G("unimplemented","Uint8Arrays are not available in this environment.")}function hR(){if(!kH())throw new G("unimplemented","Blobs are unavailable in Firestore in this environment.")}let AV=class fw{constructor(e){this._delegate=e}static fromBase64String(e){return hR(),new fw(hn.fromBase64String(e))}static fromUint8Array(e){return uR(),new fw(hn.fromUint8Array(e))}toBase64(){return hR(),this._delegate.toBase64()}toUint8Array(){return uR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(t){return sW(t,["next","error","complete"])}function sW(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{enableIndexedDbPersistence(e,n){return pK(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return gK(e._delegate)}clearIndexedDbPersistence(e){return yK(e._delegate)}}class RV{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof oa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&dr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){hK(this._delegate,e,n,i)}enableNetwork(){return _K(this._delegate)}disableNetwork(){return wK(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,Jk("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return vK(this._delegate)}onSnapshotsInSync(e){return GK(this._delegate,e)}get app(){if(!this._appCompat)throw new G("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Rc(this,lV(this._delegate,e))}catch(n){throw wn(n,"collection()","Firestore.collection()")}}doc(e){try{return new wi(this,ig(this._delegate,e))}catch(n){throw wn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _n(this,dK(this._delegate,e))}catch(n){throw wn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return XK(this._delegate,n=>e(new CV(this,n)))}batch(){return pn(this._delegate),new PV(new WK(this._delegate,e=>mf(this._delegate,e)))}loadBundle(e){return bK(this._delegate,e)}namedQuery(e){return TK(this._delegate,e).then(n=>n?new _n(this,n):null)}}class Ey extends Cx{constructor(e){super(),this.firestore=e}convertBytes(e){return new AV(new hn(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return wi.forKey(n,this.firestore,null)}}function oW(t){$q(t)}class CV{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Ey(e)}get(e){const n=Za(e);return this._delegate.get(n).then(i=>new Ed(this._firestore,new Ei(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){const r=Za(e);return i?(Nx("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=Za(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=Za(e);return this._delegate.delete(n),this}}class PV{constructor(e){this._delegate=e}set(e,n,i){const r=Za(e);return i?(Nx("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=Za(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=Za(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Co{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){const i=new Nh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Sd(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const i=Co.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(n);return s||(s=new Co(e,new Ey(e),n),r.set(n,s)),s}}Co.INSTANCES=new WeakMap;class wi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ey(e)}static forPath(e,n,i){if(e.length%2!==0)throw new G("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new wi(n,new $e(n._delegate,i,new Y(e)))}static forKey(e,n,i){return new wi(n,new $e(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Rc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Rc(this.firestore,lV(this._delegate,e))}catch(n){throw wn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ne(e),e instanceof $e?cV(this._delegate,e):!1}set(e,n){n=Nx("DocumentReference.set",n);try{return n?lR(this._delegate,e,n):lR(this._delegate,e)}catch(i){throw wn(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?cR(this._delegate,e):cR(this._delegate,e,n,...i)}catch(r){throw wn(r,"updateDoc()","DocumentReference.update()")}}delete(){return HK(this._delegate)}onSnapshot(...e){const n=NV(e),i=DV(e,r=>new Ed(this.firestore,new Ei(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return IV(this._delegate,n,i)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=jK(this._delegate):(e==null?void 0:e.source)==="server"?n=zK(this._delegate):n=UK(this._delegate),n.then(i=>new Ed(this.firestore,new Ei(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new wi(this.firestore,e?this._delegate.withConverter(Co.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function wn(t,e,n){return t.message=t.message.replace(e,n),t}function NV(t){for(const e of t)if(typeof e=="object"&&!mw(e))return e;return{}}function DV(t,e){var i,r;let n;return mw(t[0])?n=t[0]:mw(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:s=>{n.next&&n.next(e(s))},error:(i=n.error)==null?void 0:i.bind(n),complete:(r=n.complete)==null?void 0:r.bind(n)}}class Ed{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new wi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return SV(this._delegate,e._delegate)}}class Sd extends Ed{data(e){const n=this._delegate.data(e);return this._delegate._converter||Gq(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class _n{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ey(e)}where(e,n,i){try{return new _n(this.firestore,_s(this._delegate,RK(e,n,i)))}catch(r){throw wn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new _n(this.firestore,_s(this._delegate,CK(e,n)))}catch(i){throw wn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new _n(this.firestore,_s(this._delegate,PK(e)))}catch(n){throw wn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new _n(this.firestore,_s(this._delegate,NK(e)))}catch(n){throw wn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new _n(this.firestore,_s(this._delegate,DK(...e)))}catch(n){throw wn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new _n(this.firestore,_s(this._delegate,kK(...e)))}catch(n){throw wn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new _n(this.firestore,_s(this._delegate,MK(...e)))}catch(n){throw wn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new _n(this.firestore,_s(this._delegate,OK(...e)))}catch(n){throw wn(n,"endAt()","Query.endAt()")}}isEqual(e){return uV(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=FK(this._delegate):(e==null?void 0:e.source)==="server"?n=qK(this._delegate):n=BK(this._delegate),n.then(i=>new pw(this.firestore,new Vi(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const n=NV(e),i=DV(e,r=>new pw(this.firestore,new Vi(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return IV(this._delegate,n,i)}withConverter(e){return new _n(this.firestore,e?this._delegate.withConverter(Co.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class lW{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Sd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class pw{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new _n(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Sd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new lW(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new Sd(this._firestore,i))})}isEqual(e){return SV(this._delegate,e._delegate)}}class Rc extends _n{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new wi(this.firestore,e):null}doc(e){try{return e===void 0?new wi(this.firestore,ig(this._delegate)):new wi(this.firestore,ig(this._delegate,e))}catch(n){throw wn(n,"doc()","CollectionReference.doc()")}}add(e){return $K(this._delegate,e).then(n=>new wi(this.firestore,n))}isEqual(e){return cV(this._delegate,e._delegate)}withConverter(e){return new Rc(this.firestore,e?this._delegate.withConverter(Co.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Za(t){return Ie(t,$e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(...e){this._delegate=new fa(...e)}static documentId(){return new Dx(rt.keyField().canonicalString())}isEqual(e){return e=ne(e),e instanceof fa?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{static serverTimestamp(){const e=ZK();return e._methodName="FieldValue.serverTimestamp",new Qa(e)}static delete(){const e=JK();return e._methodName="FieldValue.delete",new Qa(e)}static arrayUnion(...e){const n=eW(...e);return n._methodName="FieldValue.arrayUnion",new Qa(n)}static arrayRemove(...e){const n=tW(...e);return n._methodName="FieldValue.arrayRemove",new Qa(n)}static increment(e){const n=nW(e);return n._methodName="FieldValue.increment",new Qa(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cW={Firestore:RV,GeoPoint:Oi,Timestamp:De,Blob:AV,Transaction:CV,WriteBatch:PV,DocumentReference:wi,DocumentSnapshot:Ed,Query:_n,QueryDocumentSnapshot:Sd,QuerySnapshot:pw,CollectionReference:Rc,FieldPath:Dx,FieldValue:Qa,setLogLevel:oW,CACHE_SIZE_UNLIMITED:mK};function uW(t,e){t.INTERNAL.registerComponent(new jn("firestore-compat",n=>{const i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps({...cW}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hW(t){uW(t,(e,n)=>new RV(e,n,new aW)),t.registerVersion(iW,rW)}hW($t);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV="firebasestorage.googleapis.com",MV="storageBucket",dW=2*60*1e3,fW=10*60*1e3,mW=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht extends Kt{constructor(e,n,i=0){super(s0(e),`Firebase Storage: ${n} (${s0(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ht.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return s0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var tt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(tt||(tt={}));function s0(t){return"storage/"+t}function kx(){const t="An unknown error occurred, please check the error payload for server response.";return new ht(tt.UNKNOWN,t)}function pW(t){return new ht(tt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function gW(t){return new ht(tt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function yW(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ht(tt.UNAUTHENTICATED,t)}function vW(){return new ht(tt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function _W(t){return new ht(tt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function OV(){return new ht(tt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function VV(){return new ht(tt.CANCELED,"User canceled the upload/download.")}function wW(t){return new ht(tt.INVALID_URL,"Invalid URL '"+t+"'.")}function bW(t){return new ht(tt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function TW(){return new ht(tt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+MV+"' property when initializing the app?")}function LV(){return new ht(tt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function xW(){return new ht(tt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function EW(){return new ht(tt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function SW(t){return new ht(tt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Gl(t){return new ht(tt.INVALID_ARGUMENT,t)}function UV(){return new ht(tt.APP_DELETED,"The Firebase app was deleted.")}function jV(t){return new ht(tt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Dh(t,e){return new ht(tt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Lu(t){throw new ht(tt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=dn.makeFromUrl(e,n)}catch{return new dn(e,"")}if(i.path==="")return i;throw bW(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+r+a,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${u}/b/${r}/o${f}`,"i"),p={bucket:1,path:3},g=n===kV?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",y=new RegExp(`^https?://${g}/${r}/${v}`,"i"),b=[{regex:o,indices:l,postModify:s},{regex:h,indices:p,postModify:c},{regex:y,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<b.length;R++){const S=b[R],C=S.regex.exec(e);if(C){const x=C[S.indices.bucket];let T=C[S.indices.path];T||(T=""),i=new dn(x,T),S.postModify(i);break}}if(i==null)throw wW(e);return i}}class IW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AW(t,e,n){let i=1,r=null,s=null,a=!1,o=0;function l(){return o===2}let c=!1;function u(...v){c||(c=!0,e.apply(null,v))}function d(v){r=setTimeout(()=>{r=null,t(h,l())},v)}function f(){s&&clearTimeout(s)}function h(v,...y){if(c){f();return}if(v){f(),u.call(null,v,...y);return}if(l()||a){f(),u.call(null,v,...y);return}i<64&&(i*=2);let b;o===1?(o=2,b=0):b=(i+Math.random())*1e3,d(b)}let p=!1;function g(v){p||(p=!0,f(),!c&&(r!==null?(v||(o=2),clearTimeout(r),d(0)):v||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,g(!0)},n),g}function RW(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CW(t){return t!==void 0}function PW(t){return typeof t=="function"}function NW(t){return typeof t=="object"&&!Array.isArray(t)}function Sy(t){return typeof t=="string"||t instanceof String}function dR(t){return Mx()&&t instanceof Blob}function Mx(){return typeof Blob<"u"}function gw(t,e,n,i){if(i<e)throw Gl(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Gl(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function zV(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var uo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(uo||(uo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DW{constructor(e,n,i,r,s,a,o,l,c,u,d,f=!0,h=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,g)=>{this.resolve_=p,this.reject_=g,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new lm(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===uo.NO_ERROR,l=s.getStatus();if(!o||BV(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===uo.ABORT;i(!1,new lm(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new lm(c,s))})},n=(i,r)=>{const s=this.resolve_,a=this.reject_,o=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());CW(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=kx();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(r.canceled){const l=this.appDelete_?UV():VV();a(l)}else{const l=OV();a(l)}};this.canceled_?n(!1,new lm(!1,null,!0)):this.backoffId_=AW(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&RW(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class lm{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function kW(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function MW(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function OW(t,e){e&&(t["X-Firebase-GMPID"]=e)}function VW(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function LW(t,e,n,i,r,s,a=!0,o=!1){const l=zV(t.urlParams),c=t.url+l,u=Object.assign({},t.headers);return OW(u,e),kW(u,n),MW(u,s),VW(u,i),new DW(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UW(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function jW(...t){const e=UW();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(Mx())return new Blob(t);throw new ht(tt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function zW(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BW(t){if(typeof atob>"u")throw SW("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class a0{constructor(e,n){this.data=e,this.contentType=n||null}}function FV(t,e){switch(t){case bi.RAW:return new a0(qV(e));case bi.BASE64:case bi.BASE64URL:return new a0(HV(t,e));case bi.DATA_URL:return new a0(qW(e),HW(e))}throw kx()}function qV(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=i,a=t.charCodeAt(++n);i=65536|(s&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function FW(t){let e;try{e=decodeURIComponent(t)}catch{throw Dh(bi.DATA_URL,"Malformed data URL.")}return qV(e)}function HV(t,e){switch(t){case bi.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw Dh(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case bi.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw Dh(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=BW(e)}catch(r){throw r.message.includes("polyfill")?r:Dh(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class $V{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Dh(bi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=$W(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function qW(t){const e=new $V(t);return e.base64?HV(bi.BASE64,e.rest):FW(e.rest)}function HW(t){return new $V(t).contentType}function $W(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n){let i=0,r="";dR(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(dR(this.data_)){const i=this.data_,r=zW(i,e,n);return r===null?null:new Sr(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Sr(i,!0)}}static getBlob(...e){if(Mx()){const n=e.map(i=>i instanceof Sr?i.data_:i);return new Sr(jW.apply(null,n))}else{const n=e.map(a=>Sy(a)?FV(bi.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)r[s++]=a[o]}),new Sr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t){let e;try{e=JSON.parse(t)}catch{return null}return NW(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GW(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function KW(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function GV(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WW(t,e){return e}class yn{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||WW}}let cm=null;function QW(t){return!Sy(t)||t.length<2?t:GV(t)}function Iy(){if(cm)return cm;const t=[];t.push(new yn("bucket")),t.push(new yn("generation")),t.push(new yn("metageneration")),t.push(new yn("name","fullPath",!0));function e(s,a){return QW(a)}const n=new yn("name");n.xform=e,t.push(n);function i(s,a){return a!==void 0?Number(a):a}const r=new yn("size");return r.xform=i,t.push(r),t.push(new yn("timeCreated")),t.push(new yn("updated")),t.push(new yn("md5Hash",null,!0)),t.push(new yn("cacheControl",null,!0)),t.push(new yn("contentDisposition",null,!0)),t.push(new yn("contentEncoding",null,!0)),t.push(new yn("contentLanguage",null,!0)),t.push(new yn("contentType",null,!0)),t.push(new yn("metadata","customMetadata",!0)),cm=t,cm}function YW(t,e){function n(){const i=t.bucket,r=t.fullPath,s=new dn(i,r);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function XW(t,e,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const a=n[s];i[a.local]=a.xform(i,e[a.server])}return YW(i,t),i}function KV(t,e,n){const i=Ox(e);return i===null?null:XW(t,i,n)}function JW(t,e,n,i){const r=Ox(e);if(r===null||!Sy(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,d=t.fullPath,f="/b/"+a(u)+"/o/"+a(d),h=Sa(f,n,i),p=zV({alt:"media",token:c});return h+p})[0]}function Vx(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="prefixes",mR="items";function ZW(t,e,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[fR])for(const r of n[fR]){const s=r.replace(/\/$/,""),a=t._makeStorageReference(new dn(e,s));i.prefixes.push(a)}if(n[mR])for(const r of n[mR]){const s=t._makeStorageReference(new dn(e,r.name));i.items.push(s)}return i}function eQ(t,e,n){const i=Ox(n);return i===null?null:ZW(t,e,i)}class rs{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t){if(!t)throw kx()}function Ay(t,e){function n(i,r){const s=KV(t,r,e);return lr(s!==null),s}return n}function tQ(t,e){function n(i,r){const s=eQ(t,e,r);return lr(s!==null),s}return n}function nQ(t,e){function n(i,r){const s=KV(t,r,e);return lr(s!==null),JW(s,r,t.host,t._protocol)}return n}function Zc(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=vW():r=yW():n.getStatus()===402?r=gW(t.bucket):n.getStatus()===403?r=_W(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function Ry(t){const e=Zc(t);function n(i,r){let s=e(i,r);return i.getStatus()===404&&(s=pW(t.path)),s.serverResponse=r.serverResponse,s}return n}function WV(t,e,n){const i=e.fullServerUrl(),r=Sa(i,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new rs(r,s,Ay(t,n),a);return o.errorHandler=Ry(e),o}function iQ(t,e,n,i,r){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n.length>0&&(s.delimiter=n),i&&(s.pageToken=i),r&&(s.maxResults=r);const a=e.bucketOnlyServerUrl(),o=Sa(a,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,u=new rs(o,l,tQ(t,e.bucket),c);return u.urlParams=s,u.errorHandler=Zc(e),u}function rQ(t,e,n){const i=e.fullServerUrl(),r=Sa(i,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new rs(r,s,nQ(t,n),a);return o.errorHandler=Ry(e),o}function sQ(t,e,n,i){const r=e.fullServerUrl(),s=Sa(r,t.host,t._protocol),a="PATCH",o=Vx(n,i),l={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,u=new rs(s,a,Ay(t,i),c);return u.headers=l,u.body=o,u.errorHandler=Ry(e),u}function aQ(t,e){const n=e.fullServerUrl(),i=Sa(n,t.host,t._protocol),r="DELETE",s=t.maxOperationRetryTime;function a(l,c){}const o=new rs(i,r,a,s);return o.successCodes=[200,204],o.errorHandler=Ry(e),o}function oQ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function QV(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=oQ(null,e)),i}function lQ(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let b="";for(let R=0;R<2;R++)b=b+Math.random().toString().slice(2);return b}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=QV(e,i,r),u=Vx(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",h=Sr.getBlob(d,i,f);if(h===null)throw LV();const p={name:c.fullPath},g=Sa(s,t.host,t._protocol),v="POST",y=t.maxUploadRetryTime,w=new rs(g,v,Ay(t,n),y);return w.urlParams=p,w.headers=a,w.body=h.uploadData(),w.errorHandler=Zc(e),w}class sg{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}}function Lx(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{lr(!1)}return lr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function cQ(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),a=QV(e,i,r),o={name:a.fullPath},l=Sa(s,t.host,t._protocol),c="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},d=Vx(a,n),f=t.maxUploadRetryTime;function h(g){Lx(g);let v;try{v=g.getResponseHeader("X-Goog-Upload-URL")}catch{lr(!1)}return lr(Sy(v)),v}const p=new rs(l,c,h,f);return p.urlParams=o,p.headers=u,p.body=d,p.errorHandler=Zc(e),p}function uQ(t,e,n,i){const r={"X-Goog-Upload-Command":"query"};function s(c){const u=Lx(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{lr(!1)}d||lr(!1);const f=Number(d);return lr(!isNaN(f)),new sg(f,i.size(),u==="final")}const a="POST",o=t.maxUploadRetryTime,l=new rs(n,a,s,o);return l.headers=r,l.errorHandler=Zc(e),l}const pR=256*1024;function hQ(t,e,n,i,r,s,a,o){const l=new sg(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw xW();const c=l.total-l.current;let u=c;r>0&&(u=Math.min(u,r));const d=l.current,f=d+u;let h="";u===0?h="finalize":c===u?h="upload, finalize":h="upload";const p={"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":`${l.current}`},g=i.slice(d,f);if(g===null)throw LV();function v(R,S){const C=Lx(R,["active","final"]),x=l.current+u,T=i.size();let A;return C==="final"?A=Ay(e,s)(R,S):A=null,new sg(x,T,C==="final",A)}const y="POST",w=e.maxUploadRetryTime,b=new rs(n,y,v,w);return b.headers=p,b.body=g.uploadData(),b.progressCallback=o||null,b.errorHandler=Zc(t),b}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dQ={STATE_CHANGED:"state_changed"},bn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function o0(t){switch(t){case"running":case"pausing":case"canceling":return bn.RUNNING;case"paused":return bn.PAUSED;case"success":return bn.SUCCESS;case"canceled":return bn.CANCELED;case"error":return bn.ERROR;default:return bn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fQ{constructor(e,n,i){if(PW(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class mQ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=uo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=uo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=uo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,s){if(this.sent_)throw Lu("cannot .send() more than once");if(gr(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Lu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Lu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Lu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Lu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class pQ extends mQ{initXhr(){this.xhr_.responseType="text"}}function Yi(){return new pQ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=Iy(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(tt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(BV(r.status,[]))if(s)r=OV();else{this.sleepTime=Math.max(this.sleepTime*2,mW),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(tt.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const i=cQ(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Yi,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,i)=>{const r=uQ(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,Yi,n,i);this._request=s,s.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=pR*this._chunkMultiplier,n=new sg(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let a;try{a=hQ(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const o=this._ref.storage._makeRequest(a,Yi,r,s,!1);this._request=o,o.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){pR*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const i=WV(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Yi,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const i=lQ(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Yi,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=VV(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=o0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){const s=new fQ(n||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(o0(this._state)){case bn.SUCCESS:ol(this._resolve.bind(null,this.snapshot))();break;case bn.CANCELED:case bn.ERROR:const n=this._reject;ol(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(o0(this._state)){case bn.RUNNING:case bn.PAUSED:e.next&&ol(e.next.bind(e,this.snapshot))();break;case bn.SUCCESS:e.complete&&ol(e.complete.bind(e))();break;case bn.CANCELED:case bn.ERROR:e.error&&ol(e.error.bind(e,this._error))();break;default:e.error&&ol(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n){this._service=e,n instanceof dn?this._location=n:this._location=dn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Po(e,n)}get root(){const e=new dn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return GV(this._location.path)}get storage(){return this._service}get parent(){const e=GW(this._location.path);if(e===null)return null;const n=new dn(this._location.bucket,e);return new Po(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw jV(e)}}function gQ(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new YV(t,new Sr(e),n)}function yQ(t){const e={prefixes:[],items:[]};return XV(t,e).then(()=>e)}async function XV(t,e,n){const r=await JV(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&await XV(t,e,r.nextPageToken)}function JV(t,e){e!=null&&typeof e.maxResults=="number"&&gw("options.maxResults",1,1e3,e.maxResults);const n=e||{},i=iQ(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(i,Yi)}function vQ(t){t._throwIfRoot("getMetadata");const e=WV(t.storage,t._location,Iy());return t.storage.makeRequestWithTokens(e,Yi)}function _Q(t,e){t._throwIfRoot("updateMetadata");const n=sQ(t.storage,t._location,e,Iy());return t.storage.makeRequestWithTokens(n,Yi)}function wQ(t){t._throwIfRoot("getDownloadURL");const e=rQ(t.storage,t._location,Iy());return t.storage.makeRequestWithTokens(e,Yi).then(n=>{if(n===null)throw EW();return n})}function bQ(t){t._throwIfRoot("deleteObject");const e=aQ(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Yi)}function ZV(t,e){const n=KW(t._location.path,e),i=new dn(t._location.bucket,n);return new Po(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TQ(t){return/^[A-Za-z]+:\/\//.test(t)}function xQ(t,e){return new Po(t,e)}function eL(t,e){if(t instanceof Ux){const n=t;if(n._bucket==null)throw TW();const i=new Po(n,n._bucket);return e!=null?eL(i,e):i}else return e!==void 0?ZV(t,e):t}function EQ(t,e){if(e&&TQ(e)){if(t instanceof Ux)return xQ(t,e);throw Gl("To use ref(service, url), the first argument must be a Storage instance.")}else return eL(t,e)}function gR(t,e){const n=e==null?void 0:e[MV];return n==null?null:dn.makeFromBucketSpec(n,t)}function SQ(t,e,n,i={}){t.host=`${e}:${n}`;const r=gr(e);r&&(Qb(`https://${t.host}/b`),Yb("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:s}=i;s&&(t._overrideAuthToken=typeof s=="string"?s:SD(s,t.app.options.projectId))}class Ux{constructor(e,n,i,r,s,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=kV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=dW,this._maxUploadRetryTime=fW,this._requests=new Set,r!=null?this._bucket=dn.makeFromBucketSpec(r,this._host):this._bucket=gR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=dn.makeFromBucketSpec(this._url,e):this._bucket=gR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ce(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Po(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new IW(UV());{const a=LW(e,this._appId,i,r,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const yR="@firebase/storage",vR="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IQ="storage";function AQ(t,e,n){return t=ne(t),gQ(t,e,n)}function RQ(t){return t=ne(t),vQ(t)}function CQ(t,e){return t=ne(t),_Q(t,e)}function PQ(t,e){return t=ne(t),JV(t,e)}function NQ(t){return t=ne(t),yQ(t)}function DQ(t){return t=ne(t),wQ(t)}function kQ(t){return t=ne(t),bQ(t)}function _R(t,e){return t=ne(t),EQ(t,e)}function MQ(t,e){return ZV(t,e)}function OQ(t,e,n,i={}){SQ(t,e,n,i)}function VQ(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Ux(n,i,r,e,Ri)}function LQ(){Li(new jn(IQ,VQ,"PUBLIC").setMultipleInstances(!0)),xn(yR,vR,""),xn(yR,vR,"esm2020")}LQ();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n,i){this._delegate=e,this.task=n,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new um(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(i=>{if(e)return e(new um(i,this,this._ref))},n)}on(e,n,i,r){let s;return n&&(typeof n=="function"?s=a=>n(new um(a,this,this._ref)):s={next:n.next?a=>n.next(new um(a,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}}class bR{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Vr(e,this._service))}get items(){return this._delegate.items.map(e=>new Vr(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=MQ(this._delegate,e);return new Vr(n,this.storage)}get root(){return new Vr(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Vr(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new wR(AQ(this._delegate,e,n),this)}putString(e,n=bi.RAW,i){this._throwIfRoot("putString");const r=FV(n,e),s={...i};return s.contentType==null&&r.contentType!=null&&(s.contentType=r.contentType),new wR(new YV(this._delegate,new Sr(r.data,!0),s),this)}listAll(){return NQ(this._delegate).then(e=>new bR(e,this.storage))}list(e){return PQ(this._delegate,e||void 0).then(n=>new bR(n,this.storage))}getMetadata(){return RQ(this._delegate)}updateMetadata(e){return CQ(this._delegate,e)}getDownloadURL(){return DQ(this._delegate)}delete(){return this._throwIfRoot("delete"),kQ(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw jV(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(TR(e))throw Gl("ref() expected a child path but got a URL, use refFromURL instead.");return new Vr(_R(this._delegate,e),this)}refFromURL(e){if(!TR(e))throw Gl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{dn.makeFromUrl(e,this._delegate.host)}catch{throw Gl("refFromUrl() expected a valid full URL but got an invalid one.")}return new Vr(_R(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,i={}){OQ(this._delegate,e,n,i)}}function TR(t){return/^[A-Za-z]+:\/\//.test(t)}const UQ="@firebase/storage-compat",jQ="0.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zQ="storage-compat";function BQ(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("storage").getImmediate({identifier:e});return new tL(n,i)}function FQ(t){const e={TaskState:bn,TaskEvent:dQ,StringFormat:bi,Storage:tL,Reference:Vr};t.INTERNAL.registerComponent(new jn(zQ,BQ,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(UQ,jQ)}FQ($t);const qQ={apiKey:"AIzaSyDzEay5fGB-2r5_V9UXOO8cOv-nJdHwDRg",authDomain:"rush-coffee.firebaseapp.com",projectId:"rush-coffee",storageBucket:"rush-coffee.appspot.com",messagingSenderId:"423413538635",appId:"1:423413538635:web:ded0369f50c3a9086bd2ce"};$t.apps.length||$t.initializeApp(qQ);const cn=$t.auth(),Qe=$t.firestore(),Bne=$t.storage(),nL=M.createContext(void 0),ss=()=>{const t=M.useContext(nL);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},l0=async t=>{var r,s,a;const e=Qe.collection("users").doc(t),n=await e.get();if(!n.exists){console.log(`Creating missing Firestore profile for user: ${t}`);const o=cn.currentUser;if(!o)throw new Error("User not authenticated");const l=((r=o.displayName)==null?void 0:r.split(" "))||["User",""],c=l[0],u=l.slice(1).join(" ")||"",d={email:o.email||"",displayName:o.displayName||`${c} ${u}`,firstName:c,lastName:u,phone:o.phoneNumber||"",photoURL:o.photoURL||void 0,createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:0,lifetimePoints:0,loyaltyPoints:0,tier:"bronze",rewardsHistory:[],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await e.set(d);const h=(await e.get()).data();return{uid:t,email:h.email,displayName:h.displayName,firstName:h.firstName||"User",lastName:h.lastName||"",phone:h.phone||"",photoURL:h.photoURL,createdAt:((s=h.createdAt)==null?void 0:s.toDate())||new Date,role:h.role,totalOrders:h.totalOrders??0,totalSpent:h.totalSpent??0,currentPoints:h.currentPoints??0,lifetimePoints:h.lifetimePoints??0,loyaltyPoints:h.loyaltyPoints??0,tier:h.tier||"bronze",rewardsHistory:(h.rewardsHistory||[]).map(p=>({...p,date:p.date&&typeof p.date.toDate=="function"?p.date.toDate():p.date})).sort((p,g)=>{const v=p.date instanceof Date?p.date:new Date(p.date);return(g.date instanceof Date?g.date:new Date(g.date)).getTime()-v.getTime()}),preferences:h.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}}}const i=n.data();return{uid:t,email:i.email,displayName:i.displayName||`${i.firstName} ${i.lastName}`,firstName:i.firstName||"User",lastName:i.lastName||"",phone:i.phone||"",photoURL:i.photoURL,createdAt:((a=i.createdAt)==null?void 0:a.toDate())||new Date,role:i.role,totalOrders:i.totalOrders??0,totalSpent:i.totalSpent??0,currentPoints:i.currentPoints??0,lifetimePoints:i.lifetimePoints??0,loyaltyPoints:i.loyaltyPoints??0,tier:i.tier||"bronze",rewardsHistory:(i.rewardsHistory||[]).map(o=>({...o,date:o.date&&typeof o.date.toDate=="function"?o.date.toDate():o.date})).sort((o,l)=>{const c=o.date instanceof Date?o.date:new Date(o.date);return(l.date instanceof Date?l.date:new Date(l.date)).getTime()-c.getTime()}),preferences:i.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}}},HQ=({children:t})=>{const[e,n]=M.useState(null),[i,r]=M.useState(!0);M.useEffect(()=>{let y;const w=cn.onAuthStateChanged(async b=>{y&&y(),b?y=Qe.collection("users").doc(b.uid).onSnapshot(S=>{var C;if(S.exists){const x=S.data(),T={uid:b.uid,email:b.email,firstName:x.firstName||"User",lastName:x.lastName||"",phone:x.phone||"",photoURL:x.photoURL,createdAt:((C=x.createdAt)==null?void 0:C.toDate())||new Date,role:x.role,totalOrders:x.totalOrders??0,totalSpent:x.totalSpent??0,currentPoints:x.currentPoints??0,lifetimePoints:x.lifetimePoints??0,tier:x.tier||"bronze",rewardsHistory:(x.rewardsHistory||[]).map(A=>({...A,date:A.date&&typeof A.date.toDate=="function"?A.date.toDate():A.date})).sort((A,I)=>{const P=A.date instanceof Date?A.date:new Date(A.date);return(I.date instanceof Date?I.date:new Date(I.date)).getTime()-P.getTime()}),preferences:x.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}};n(T)}else{const x={uid:b.uid,email:b.email,firstName:"User",lastName:"",createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:0,lifetimePoints:0,tier:"bronze",rewardsHistory:[],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}};n(x)}r(!1)},S=>{console.error("Error listening to user document:",S),r(!1)}):(n(null),r(!1))});return()=>{w(),y&&y()}},[]);const v={currentUser:e,loading:i,register:async(y,w,b,R,S)=>{const x=(await cn.createUserWithEmailAndPassword(y,w)).user,T={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},A={firstName:b,lastName:R,phone:S||"",createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[T],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};return await Qe.collection("users").doc(x.uid).set(A),l0(x.uid)},login:async(y,w,b)=>{var S;if(y==="test@test.com"&&w==="123456"){const C="test-user-id";return sessionStorage.setItem(`dev_verification_code_${C}`,"123456"),sessionStorage.setItem("requires2FA","true"),{needsVerification:!0,userId:C,email:y,role:"customer"}}const R=b?$t.auth.Auth.Persistence.LOCAL:$t.auth.Auth.Persistence.SESSION;await cn.setPersistence(R),sessionStorage.setItem("requires2FA","true");try{const x=(await cn.signInWithEmailAndPassword(y,w)).user.uid,T=Math.floor(1e5+Math.random()*9e5).toString(),A=new Date(Date.now()+10*60*1e3);try{await Qe.collection("emailVerifications").doc(x).set({code:T,email:y,createdAt:new Date,expiresAt:A,verified:!1})}catch{sessionStorage.setItem(`dev_verification_code_${x}`,T)}console.log(` Verification code for ${y}: ${T}`);let I;try{I=(S=(await Qe.collection("users").doc(x).get()).data())==null?void 0:S.role}catch{I="customer"}return{needsVerification:!0,userId:x,email:y,role:I}}catch(C){throw sessionStorage.removeItem("requires2FA"),C}},logout:async()=>{await cn.signOut()},sendPasswordReset:async y=>{await cn.sendPasswordResetEmail(y)},signInWithGoogle:async()=>{var S;const y=new $t.auth.GoogleAuthProvider;y.setCustomParameters({prompt:"select_account"});const w=await cn.signInWithPopup(y),b=w.user,R=w.additionalUserInfo;if(R!=null&&R.isNewUser){const C=((S=b.displayName)==null?void 0:S.split(" "))||["New","User"],x=C[0],T=C.slice(1).join(" ")||"",A={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},I={firstName:x,lastName:T,photoURL:b.photoURL||void 0,createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[A],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await Qe.collection("users").doc(b.uid).set(I)}return l0(b.uid)},signInWithFacebook:async()=>{var S;const y=new $t.auth.FacebookAuthProvider,w=await cn.signInWithPopup(y),b=w.user,R=w.additionalUserInfo;if(R!=null&&R.isNewUser){const C=((S=b.displayName)==null?void 0:S.split(" "))||["New","User"],x=C[0],T=C.slice(1).join(" ")||"",A={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},I={firstName:x,lastName:T,photoURL:b.photoURL||void 0,createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[A],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await Qe.collection("users").doc(b.uid).set(I)}return l0(b.uid)},updateUserProfile:async y=>{e&&await Qe.collection("users").doc(e.uid).update(y)},updateUserPhoto:async y=>{e&&await Qe.collection("users").doc(e.uid).update({photoURL:y})},sendEmailVerificationCode:async(y,w)=>{const b=Math.floor(1e5+Math.random()*9e5).toString(),R=new Date(Date.now()+10*60*1e3);try{await Qe.collection("emailVerifications").doc(y).set({code:b,email:w,createdAt:new Date,expiresAt:R})}catch{sessionStorage.setItem(`dev_verification_code_${y}`,b)}console.log(` Verification code for ${w}: ${b}`)},verifyEmailCode:async(y,w)=>{try{const R=Qe.collection("emailVerifications").doc(y),S=await R.get();if(S.exists){const C=S.data();if(C){const x=new Date,T=C.expiresAt.toDate();if(x>T)return!1;if(C.code===w)return await R.update({verified:!0}),!0}}}catch{}return sessionStorage.getItem(`dev_verification_code_${y}`)===w},updateUserPassword:async(y,w)=>{const b=cn.currentUser;if(!b||!b.email)throw new Error("No user logged in");const R=$t.auth.EmailAuthProvider.credential(b.email,y);await b.reauthenticateWithCredential(R),await b.updatePassword(w)}};return _.jsx(nL.Provider,{value:v,children:!i&&t})},me=t=>`/RushCoffee-Capstone/${t}`,hm=[{id:"cb-01",name:"Spanish Latte",description:"A creamy and sweet latte with a Spanish twist, featuring condensed milk for a rich flavor.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:me("coffee-based/spanish-latte.png"),available:!0,stock:99,popular:!0,displayOrder:1,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"condensed-milk",quantity:30}]},{id:"cb-02",name:"Rush Coffee Blend",description:"Our signature house blend, perfectly balanced for a smooth and satisfying coffee experience.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:89}],imageUrl:me("coffee-based/rush-coffee-blend.png"),available:!0,stock:99,popular:!0,displayOrder:2,aliases:["rush coffee","house blend"],recipe:[{ingredientId:"coffee-beans",quantity:18},{ingredientId:"hot-water",quantity:200}]},{id:"cb-03",name:"Caramel Chocolate Mocha",description:"A decadent mix of rich chocolate, espresso, and creamy caramel for the ultimate treat.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:me("coffee-based/caramel-chocolate-mocha.jpg"),available:!0,stock:99,popular:!0,displayOrder:3,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"chocolate-sauce",quantity:20},{ingredientId:"caramel-sauce",quantity:15}]},{id:"cb-04",name:"Dark Chocolate Mocha",description:"A bold and intense mocha experience with premium dark chocolate and strong espresso.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:me("coffee-based/dark-chocolate-mocha.jpg"),available:!0,stock:99,displayOrder:4,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"chocolate-sauce",quantity:25}]},{id:"cb-05",name:"Mocha Latte",description:"A classic blend of smooth espresso, rich chocolate sauce, and steamed milk.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:me("coffee-based/mocha-latte.jpg"),available:!0,stock:99,displayOrder:5,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"chocolate-sauce",quantity:20}]},{id:"cb-06",name:"Americano",description:"Bold espresso shots topped with hot water to create a light layer of crema.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:me("coffee-based/americano.jpg"),available:!0,stock:99,displayOrder:6,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"hot-water",quantity:220}]},{id:"cb-07",name:"Biscoff Latte",description:"An indulgent latte infused with the irresistible flavor of caramelized Biscoff cookies.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:199}],imageUrl:me("coffee-based/biscoff-latte.jpg"),available:!0,stock:99,displayOrder:7,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:170},{ingredientId:"biscoff-spread",quantity:30}]},{id:"cb-08",name:"Reeses Latte",description:"The perfect combination of peanut butter, chocolate, and espresso. A candy lover's dream.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:me("coffee-based/reeses-latte.jpg"),available:!0,stock:99,displayOrder:8,aliases:["reese","reese's","reeses"],recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:160},{ingredientId:"chocolate-sauce",quantity:15},{ingredientId:"peanut-butter",quantity:20}]},{id:"cb-09",name:"Brown Sugar Latte",description:"A comforting latte sweetened with rich, molasses-like brown sugar syrup.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:79}],imageUrl:me("coffee-based/brown-sugar-latte.jpg"),available:!0,stock:99,displayOrder:9,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"brown-sugar-syrup",quantity:25}]},{id:"cb-10",name:"Iced Latte",description:"A simple classic. Chilled espresso with cold milk served over ice.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:69}],imageUrl:me("coffee-based/iced-latte.jpg"),available:!0,stock:99,displayOrder:10,aliases:["ice latte","ice coffee","iced coffee","iced latte"],recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"ice-cubes",quantity:100}]},{id:"cb-11",name:"Orange Latte",description:"A unique and refreshing latte with a zesty hint of natural orange flavor.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:89}],imageUrl:me("coffee-based/orange-latte.jpg"),available:!0,stock:99,displayOrder:11,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:170},{ingredientId:"orange-syrup",quantity:20}]},{id:"cb-12",name:"Coffee Jelly",description:"A delightful iced coffee drink with chewy, coffee-flavored jelly cubes.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:99}],imageUrl:me("coffee-based/coffee-jelly.jpg"),available:!0,stock:99,displayOrder:12,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"coffee-jelly",quantity:80},{ingredientId:"ice-cubes",quantity:80}]},{id:"nc-01",name:"Red Velvet",description:"A sweet and creamy drink inspired by the classic red velvet cake, with hints of cocoa and vanilla.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:me("non-coffee/red-velvet.jpg"),available:!0,stock:99,displayOrder:13,recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"red-velvet-powder",quantity:25},{ingredientId:"chocolate-sauce",quantity:10},{ingredientId:"vanilla-syrup",quantity:15}]},{id:"nc-02",name:"Red Velvet Matcha Latte",description:"A beautiful and delicious blend of earthy matcha and sweet red velvet flavors.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:me("non-coffee/red-velvet-matcha-latte.jpg"),available:!0,stock:99,displayOrder:14,recipe:[{ingredientId:"milk",quantity:180},{ingredientId:"matcha-powder",quantity:5},{ingredientId:"red-velvet-powder",quantity:15},{ingredientId:"vanilla-syrup",quantity:10}]},{id:"nc-03",name:"Milky Choco",description:"A rich and comforting chocolate drink made with high-quality cocoa and fresh milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:me("non-coffee/milky-choco.jpg"),available:!0,stock:99,displayOrder:15,recipe:[{ingredientId:"milk",quantity:220},{ingredientId:"chocolate-sauce",quantity:30}]},{id:"nc-04",name:"Strawberry Milk",description:"A refreshing and creamy drink made with real strawberries and fresh milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:me("non-coffee/strawberry-milk.jpg"),available:!0,stock:99,displayOrder:16,recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"strawberry-puree",quantity:50}]},{id:"nc-05",name:"Biscoff Milky",description:"A non-coffee treat blending the sweet, caramelized taste of Biscoff with creamy milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:me("non-coffee/biscoff-milky.jpg"),available:!0,stock:99,displayOrder:17,recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"biscoff-spread",quantity:35}]},{id:"nc-06",name:"Oreo Latte",description:"A fun and delicious drink packed with the classic cookies and cream flavor of Oreos.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:me("non-coffee/oreo-latte.jpg"),available:!0,stock:99,displayOrder:18,recipe:[{ingredientId:"milk",quantity:180},{ingredientId:"oreo-crumbs",quantity:40},{ingredientId:"chocolate-sauce",quantity:15}]},{id:"ms-01",name:"Matcha Latte",description:"Premium Japanese matcha green tea with steamed milk, a perfect balance of earthy and creamy.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:89}],imageUrl:me("matcha-series/matcha-latte.jpg"),available:!0,stock:99,popular:!0,displayOrder:19,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:200}]},{id:"ms-02",name:"Strawberry Matcha",description:"A delightful pairing of sweet strawberry puree and high-quality matcha green tea.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:109}],imageUrl:me("matcha-series/strawberry-matcha.jpg"),available:!0,stock:99,displayOrder:20,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"strawberry-puree",quantity:40}]},{id:"ms-03",name:"Matcha Cream Cheese",description:"Earthy matcha topped with a rich, savory, and slightly sweet cream cheese foam.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:109}],imageUrl:me("matcha-series/matcha-cream-cheese.jpg"),available:!0,stock:99,displayOrder:21,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"cream-cheese",quantity:30}]},{id:"ms-04",name:"Matcha Oreo",description:"A creative blend of matcha and crushed Oreo cookies for a unique texture and flavor.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:me("matcha-series/matcha-oreo.jpg"),available:!0,stock:99,displayOrder:22,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"oreo-crumbs",quantity:35}]},{id:"rf-01",name:"Flamangooverload Shake",description:"An explosive mix of flamingo and mango for an overload of fruity goodness.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:me("refreshments/flamangooverload.jpg"),available:!0,stock:99,displayOrder:23,aliases:["flamingo","flamango","overload"],recipe:[{ingredientId:"mango-puree",quantity:100},{ingredientId:"strawberry-puree",quantity:50},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-02",name:"Mangoberry Shake",description:"A delightful blend of sweet mangoes and tangy berries, perfectly refreshing.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:me("refreshments/mangoberry.jpg"),available:!0,stock:99,displayOrder:24,aliases:["mango berry"],recipe:[{ingredientId:"mango-puree",quantity:80},{ingredientId:"mixed-berries",quantity:50},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-03",name:"Mango Caramel Shake",description:"Creamy mango shake drizzled with rich, buttery caramel sauce.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:me("refreshments/mango-caramel.jpg"),available:!0,stock:99,displayOrder:25,recipe:[{ingredientId:"mango-puree",quantity:100},{ingredientId:"caramel-sauce",quantity:20},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-04",name:"Blueberry Shake",description:"A classic fruit shake made with sweet and juicy blueberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:me("refreshments/blueberry-shake.jpg"),available:!0,stock:99,displayOrder:26,recipe:[{ingredientId:"blueberry-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-05",name:"Strawberry Shake",description:"A creamy and delicious shake made with ripe, sweet strawberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:me("refreshments/strawberry-shake.jpg"),available:!0,stock:99,displayOrder:27,recipe:[{ingredientId:"strawberry-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-06",name:"Green Apple Shake",description:"A tart and refreshing shake with the crisp taste of green apples.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:me("refreshments/green-apple-shake.jpg"),available:!0,stock:99,displayOrder:28,recipe:[{ingredientId:"green-apple-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-07",name:"Blueberry Soda Pop",description:"Fizzy and fun, this soda pop is bursting with sweet blueberry flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:me("refreshments/blueberry-soda.jpg"),available:!0,stock:99,displayOrder:29,aliases:["blueberry soda"],recipe:[{ingredientId:"blueberry-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-08",name:"Strawberry Soda Pop",description:"A refreshing soda pop with the sweet taste of summer strawberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:me("refreshments/strawberry-soda.jpg"),available:!0,stock:99,displayOrder:30,aliases:["strawberry soda"],recipe:[{ingredientId:"strawberry-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-09",name:"Green Apple Soda Pop",description:"A crisp and bubbly soda with a tangy green apple twist.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:me("refreshments/green-apple-soda.jpg"),available:!0,stock:99,displayOrder:31,aliases:["green apple soda"],recipe:[{ingredientId:"green-apple-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-10",name:"Lemon Soda Pop",description:"A zesty and invigorating soda pop with a classic lemon flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:me("refreshments/lemon-soda.jpg"),available:!0,stock:99,displayOrder:32,aliases:["lemon soda"],recipe:[{ingredientId:"lemon-juice",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-11",name:"Lychee Soda Pop",description:"An exotic and fragrant soda pop with the sweet, floral taste of lychee.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:me("refreshments/lychee-soda.jpg"),available:!0,stock:99,displayOrder:33,aliases:["lychee soda"],recipe:[{ingredientId:"lychee-syrup",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-12",name:"Mango Soda Pop",description:"A tropical and bubbly soda bursting with sweet mango flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:me("refreshments/mango-soda.jpg"),available:!0,stock:99,displayOrder:34,aliases:["mango soda"],recipe:[{ingredientId:"mango-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"ml-01",name:"Breaded Bacon",description:"Crispy breaded bacon served with creamy white sauce and golden fries.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:119},{name:"Combo Meal",size:"w/ Fries & Drink",price:139}],imageUrl:me("menu/ala-carte-breaded-bacon-with-white-sauce and fries.jpg"),comboImageUrl:me("menu/combo-meals-breaded-bacon-with-white-sauce,-fries-and-a-drink.jpg"),available:!0,stock:99,popular:!0,displayOrder:35,aliases:["bacon"],recipe:[{ingredientId:"bacon-strips",quantity:.15},{ingredientId:"bread-crumbs",quantity:50},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:100},{ingredientId:"takeout-pack",quantity:1}]},{id:"ml-02",name:"Breaded Porkchop",description:"A juicy breaded porkchop fried to perfection, served with white sauce and fries.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:129},{name:"Combo Meal",size:"w/ Fries & Drink",price:149}],imageUrl:me("menu/ala-carte-breaded-porkchop-with-white-sauce-and-fries.jpg"),comboImageUrl:me("menu/combo-meals-breaded-porkchop-with-white-sauce-and-fries-w-drink.jpg"),available:!0,stock:99,popular:!0,displayOrder:36,aliases:["porkchop","pork chop"],recipe:[{ingredientId:"porkchop",quantity:.2},{ingredientId:"bread-crumbs",quantity:60},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:120},{ingredientId:"takeout-pack",quantity:1}]},{id:"ml-03",name:"Breaded Chicken",description:"Tender breaded chicken fillet with a side of fries and our signature white sauce.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:119},{name:"Combo Meal",size:"w/ Fries & Drink",price:139}],imageUrl:me("menu/ala-carte-chicken-with-white-sauce-and-fries.jpg"),comboImageUrl:me("menu/combo-meals-breaded-chicken-with-white-sauce,-fries-and-a-drink.jpg"),available:!0,stock:99,displayOrder:37,aliases:["chicken","chicken fillet"],recipe:[{ingredientId:"chicken-fillet",quantity:.2},{ingredientId:"bread-crumbs",quantity:55},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:110},{ingredientId:"takeout-pack",quantity:1}]}],iL=M.createContext(void 0),$Q=()=>{const t=M.useContext(iL);if(!t)throw new Error("useProduct must be used within a ProductProvider");return t},GQ=({children:t})=>{const[e,n]=M.useState([]),[i,r]=M.useState(!0),[s,a]=M.useState(null),o=M.useCallback(async()=>{r(!0),a(null);try{const f=Qe.collection("products"),h=f.orderBy("displayOrder","asc"),p=await h.get();if(p.empty){console.log("Products collection is empty. Seeding products with specific IDs...");const w=Qe.batch();hm.forEach(S=>{const{id:C,...x}=S,T=f.doc(C);w.set(T,x)}),await w.commit(),console.log(`Successfully seeded ${hm.length} products to Firestore!`);const R=(await h.get()).docs.map(S=>({id:S.id,...S.data()}));n(R);return}const g=p.docs.map(w=>({id:w.id,...w.data()}));n(g);const v=Qe.batch();let y=!1;hm.forEach(w=>{const b=g.find(R=>R.id===w.id);if(b){const R=JSON.stringify(b.recipe||[]),S=JSON.stringify(w.recipe||[]);if(R!==S){const C=f.doc(w.id);v.update(C,{recipe:w.recipe}),y=!0,console.log(`Syncing recipe for ${w.name}`)}}}),y&&(await v.commit(),console.log(" Recipes synced from code to Firestore"))}catch(f){f.code==="permission-denied"?console.info("Firestore permission denied. This is expected if security rules are not yet configured or if you are offline. Falling back to mock data for demonstration."):console.warn("Error fetching products from Firestore. Falling back to mock data.",f),n(hm),a(null)}finally{r(!1)}},[]);M.useEffect(()=>{o()},[o]);const d={products:e,isLoading:i,error:s,addProduct:async f=>{try{await Qe.collection("products").add(f),await o()}catch(h){throw console.error("Error adding product: ",h),new Error("Failed to add product.")}},updateProduct:async(f,h)=>{try{await Qe.collection("products").doc(f).update(h),await o()}catch(p){throw console.error("Error updating product: ",p),new Error("Failed to update product.")}},deleteProduct:async f=>{try{await Qe.collection("products").doc(f).delete(),await o()}catch(h){throw console.error("Error deleting product: ",h),new Error("Failed to delete product.")}}};return _.jsx(iL.Provider,{value:d,children:t})},rL=M.createContext(void 0),sL=()=>{const t=M.useContext(rL);if(t===void 0)throw new Error("useCart must be used within a CartProvider");return t},KQ=({children:t})=>{const[e,n]=M.useState([]),[i,r]=M.useState(!1),[s,a]=M.useState(null),[o,l]=M.useState(!0),[c,u]=M.useState([]),{currentUser:d}=ss(),{products:f,isLoading:h}=$Q();M.useEffect(()=>{if(s){const D=setTimeout(()=>a(null),4e3);return()=>clearTimeout(D)}},[s]);const p=M.useCallback(D=>{a(D)},[]);M.useEffect(()=>{d?(async()=>{var V;if(!(!d||h)){l(!0);try{const L=await Qe.collection("users").doc(d.uid).get();if(L.exists){const $=(((V=L.data())==null?void 0:V.cart)||[]).map(Q=>{const te=f.find(Me=>Me.id===Q.productId);if(!te)return null;const ce=te.sizes.find(Me=>Me.name===Q.sizeName);if(!ce)return null;const Z=Q.customizations?JSON.stringify(Q.customizations):"";return{id:`${te.id}-${ce.name}-${Z}`,product:te,selectedSize:ce,quantity:Q.quantity,customizations:Q.customizations}}).filter(Q=>Q!==null);n($)}}catch(z){console.error("Error fetching cart from Firestore:",z),p("Couldn't load your cart.")}finally{l(!1)}}})():(n([]),l(!1))},[d,f,h,p]);const g=M.useCallback(async D=>{if(d)try{const V=Qe.collection("users").doc(d.uid),z=D.map(L=>{const F={};return L.customizations&&(L.customizations.sugarLevel!==void 0&&(F.sugarLevel=L.customizations.sugarLevel),L.customizations.iceLevel!==void 0&&(F.iceLevel=L.customizations.iceLevel),L.customizations.toppings!==void 0&&(F.toppings=L.customizations.toppings)),{productId:L.product.id,sizeName:L.selectedSize.name,quantity:L.quantity,...Object.keys(F).length>0&&{customizations:F}}});await V.set({cart:z},{merge:!0})}catch(V){console.error("Error updating Firestore cart:",V),p("Error saving your cart.")}},[d,p]),v=M.useMemo(()=>e.reduce((D,V)=>D+V.quantity,0),[e]),y=()=>r(!0),w=()=>r(!1),b=(D,V,z,L=1)=>{const F=z?JSON.stringify(z):"",$=`${D.id}-${V.name}-${F}`;let Q;e.find(ce=>ce.id===$)?Q=e.map(ce=>ce.id===$?{...ce,quantity:Math.min(ce.quantity+L,D.stock)}:ce):Q=[...e,{id:$,product:D,selectedSize:V,quantity:Math.min(L,D.stock),customizations:z}],n(Q),g(Q),p(`${D.name} (${V.name}) added to cart!`),y()},R=D=>{if(!D||D.length===0)return;let V=[...e],z=0;D.forEach(L=>{const F=L.customizations?JSON.stringify(L.customizations):"",$=`${L.product.id}-${L.selectedSize.name}-${F}`,Q=V.findIndex(te=>te.id===$);if(Q>-1){const te=V[Q],ce=te.quantity+L.quantity;V[Q]={...te,quantity:Math.min(ce,L.product.stock)}}else V.push({id:$,product:L.product,selectedSize:L.selectedSize,quantity:Math.min(L.quantity,L.product.stock),customizations:L.customizations});z+=L.quantity}),n(V),g(V),p(`${z} item(s) added to your cart!`),y()},S=(D,V)=>{let z;V<1?z=e.filter(L=>L.id!==D):z=e.map(L=>L.id===D?{...L,quantity:Math.min(V,L.product.stock)}:L),n(z),g(z)},C=D=>{const V=e.find(L=>L.id===D),z=e.filter(L=>L.id!==D);n(z),g(z),V&&p(`${V.product.name} (${V.selectedSize.name}) removed from cart.`)},x=(D,V,z,L,F=1)=>{const $=e.filter(ae=>ae.id!==D),Q=L?JSON.stringify(L):"",te=`${V.id}-${z.name}-${Q}`,ce=$.find(ae=>ae.id===te);let Z;ce?Z=$.map(ae=>ae.id===te?{...ae,quantity:Math.min(ae.quantity+F,V.stock)}:ae):Z=[...$,{id:te,product:V,selectedSize:z,quantity:Math.min(F,V.stock),customizations:L}],n(Z),g(Z),p(`${V.name} (${z.name}) updated!`)},T=()=>{n([]),u([]),g([])},A=D=>{u(V=>V.includes(D)?V.filter(z=>z!==D):[...V,D])},I=()=>{u(e.map(D=>D.id))},P=()=>{u([])};M.useEffect(()=>{const D=e.map(V=>V.id);u(V=>{const z=V.filter(F=>D.includes(F)),L=D.filter(F=>!V.includes(F));return[...z,...L]})},[e]);const k={cartItems:e,isCartOpen:i,toastMessage:s,totalCartItems:v,isCartLoading:o,selectedItemIds:c,addToCart:b,addMultipleToCart:R,updateQuantity:S,updateCartItem:x,removeFromCart:C,openCart:y,closeCart:w,showToast:p,toggleItemSelection:A,selectAllItems:I,deselectAllItems:P,clearCart:T};return _.jsx(rL.Provider,{value:k,children:t})},Qr=({className:t,...e})=>_.jsxs("svg",{viewBox:"0 0 241 175",xmlns:"http://www.w3.org/2000/svg",className:t,fill:"currentColor",...e,children:[_.jsx("path",{d:"M153.092 78.5C178.275 50.84 210.393 19.4076 222.5 17.5C234.607 15.5924 239.5 30 239.5 30C239.5 30 244.137 46.596 236.388 72.8253C228.64 99.0547 199 128.5 199 128.5C199 128.5 177.5 152.5 147.5 167C147.5 167 114.686 183.001 104.889 169.159C95.0912 155.316 127.909 106.16 153.092 78.5Z"}),_.jsx("path",{d:"M8.99445 86.0801C8.99445 86.0801 -16.2682 31.1886 17.8826 14.4198C33.7618 9.56756 76 55.675 76 64.5C76 70 63.7899 86.337 59 101.5C54.887 114.52 55.557 134.266 52.0896 135.774C48.0468 137.533 37.3644 137.835 8.99445 86.0801Z"}),_.jsx("path",{d:"M47 12.5C41.0274 7.52362 41.5502 -7.59339e-06 52.5 0C63.4498 7.5934e-06 69.3348 2.24286 82.0884 7.45282C95.3718 12.8792 105.888 16.4103 109.463 23.875C111.5 32.5 107.979 33.026 103.5 38.5C99.0205 43.9741 96 44.1666 91 43.5C83.5342 42.5047 52.9726 17.4764 47 12.5Z"}),_.jsx("path",{d:"M200.048 20.8891C212.988 11.4339 207.491 2.52815 200.048 2.97405C192.604 3.41995 127.379 9.72972 89.5542 67.6673C85.4261 73.9905 72.4385 95.2439 69.1452 112.455C65.6022 130.971 65.8681 149.097 73.6272 157.74C81.0528 166.012 88.1891 164.145 92.2823 156.482C96.4277 148.721 97.4982 135.065 100.004 127.882C104.983 113.605 104.907 116.382 109.393 106.379C114.278 95.4879 120.938 86.2377 126.993 78.4363C154.543 42.9442 190.775 27.6646 200.048 20.8891Z"})]}),WQ=({children:t,className:e="",hover:n=!1,variant:i="default",padding:r="md",clickable:s=!1,onClick:a})=>{const o="rounded-2xl transition-all duration-300 ease-out",l={default:"border border-gray-100 bg-white/80 backdrop-blur-sm shadow-lg",elevated:"bg-white shadow-xl border-0",outlined:"border-2 border-primary-200 bg-white",glass:"bg-white/70 backdrop-blur-md border border-white/20 shadow-xl"},c={none:"",sm:"p-4",md:"p-6",lg:"p-8"},u=n?"hover:shadow-2xl hover:-translate-y-1 hover:scale-[1.02]":"",d=s?"cursor-pointer active:scale-[0.98]":"";return _.jsx("div",{className:`${o} ${l[i]} ${c[r]} ${u} ${d} ${e}`,onClick:s?a:void 0,role:s?"button":void 0,tabIndex:s?0:void 0,children:t})},jx=({isOpen:t,onClose:e,title:n,children:i,footer:r,size:s="md",hideHeader:a=!1,hideCloseButton:o=!1,className:l=""})=>{const[c,u]=M.useState(!1);if(M.useEffect(()=>{const f=h=>{h.key==="Escape"&&e()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[e]),M.useEffect(()=>{window.getComputedStyle(document.body).overflow;const f=document.getElementById("admin-main-content");return t?(document.body.style.overflow="hidden",f&&(window.getComputedStyle(f).overflow,f.style.overflow="hidden")):(document.body.style.overflow="",f&&(f.style.overflow="")),()=>{document.body.style.overflow="",f&&(f.style.overflow="")}},[t]),M.useEffect(()=>{if(t){u(!0);const f=setTimeout(()=>{u(!1)},1e3);return()=>clearTimeout(f)}},[t,s,i]),!t)return null;const d={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-2xl"};return typeof document<"u"?fP.createPortal(_.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm animate-fade-in",role:"dialog","aria-modal":"true","aria-labelledby":n?"modal-title":void 0,onClick:e,children:_.jsx("div",{className:`relative w-full transform transition-all ${d[s]} ${l} max-h-[90vh] flex flex-col animate-scale-in`,onClick:f=>f.stopPropagation(),children:_.jsxs(WQ,{variant:"elevated",className:"rounded-3xl p-0 shadow-2xl flex flex-col max-h-full overflow-hidden bg-white",children:[!o&&_.jsx("button",{onClick:e,className:"absolute right-6 top-6 z-10 rounded-full p-2 text-gray-400 transition-all hover:bg-gray-100 hover:text-gray-600 active:scale-95","aria-label":"Close modal",children:_.jsx(na,{className:"h-6 w-6"})}),!a&&n&&_.jsx("div",{className:"px-8 pt-8 pb-2 flex-shrink-0",children:_.jsx("h3",{id:"modal-title",className:"text-2xl font-bold text-gray-900",children:n})}),_.jsx("div",{className:`${a&&!n?"p-6 pb-10":"px-6 py-6 pb-10"} overflow-y-auto custom-scrollbar ${c?"scrollbar-flash":""} flex-1`,children:i}),r&&_.jsx("div",{className:"flex justify-end gap-3 px-6 pb-2 pt-2 flex-shrink-0",children:r})]})})}),document.body):null},QQ=()=>_.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),_.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),_.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),_.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),YQ=()=>_.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"#1877F2",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),XQ=({onForgotPassword:t,onRegister:e,onSuccess:n,onVerificationNeeded:i})=>{const[r,s]=M.useState(""),[a,o]=M.useState(""),[l,c]=M.useState(!1),[u,d]=M.useState(!1),[f,h]=M.useState(!1),[p,g]=M.useState(!1),[v,y]=M.useState(!1),[w,b]=M.useState(null),{login:R,signInWithGoogle:S,signInWithFacebook:C}=ss(),x=async I=>{if(I.preventDefault(),!r||!a){b("Please fill in all fields");return}h(!0),b(null),console.log(" LoginForm submitting:",{email:r,password:a,rememberMe:l});try{const P=await R(r,a,l);sessionStorage.removeItem("requires2FA"),n(P.role)}catch(P){console.error("Login error:",P),P.code==="auth/invalid-credential"||P.code==="auth/user-not-found"||P.code==="auth/wrong-password"?b("Incorrect email or password."):b("Failed to login. Please try again.")}finally{h(!1)}},T=async()=>{g(!0),b(null);try{const I=await S();n(I.role)}catch(I){console.error("Google Sign-In Error:",I),I.code==="auth/popup-closed-by-user"?b("Sign-in cancelled."):I.code==="auth/popup-blocked"?b("Pop-up blocked. Please allow pop-ups for this site."):I.code==="auth/operation-not-allowed"?b("Google Sign-In is not enabled in Firebase Console."):b(I.message||"Failed to sign in with Google")}finally{g(!1)}},A=async()=>{y(!0),b(null);try{const I=await C();n(I.role)}catch(I){console.error("Facebook Sign-In Error:",I),I.code==="auth/popup-closed-by-user"?b("Sign-in cancelled."):I.code==="auth/popup-blocked"?b("Pop-up blocked. Please allow pop-ups for this site."):I.code==="auth/operation-not-allowed"?b("Facebook Sign-In is not enabled in Firebase Console."):I.code==="auth/account-exists-with-different-credential"?b("An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."):b(I.message||"Failed to sign in with Facebook")}finally{y(!1)}};return _.jsxs("div",{className:"w-full max-w-md mx-auto",children:[_.jsxs("div",{className:"text-center mb-8",children:[_.jsx(Qr,{className:"mx-auto h-16 w-16 text-primary-600 mb-4"}),_.jsx("h2",{className:"font-display text-4xl font-bold text-gray-900",children:"Rush Coffee"})]}),_.jsxs("form",{onSubmit:x,className:"space-y-4",children:[w&&_.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-800 border border-red-200",children:[_.jsx(gh,{className:"h-5 w-5 flex-shrink-0"}),_.jsx("span",{children:w})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),_.jsxs("div",{className:"relative",children:[_.jsx(nd,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),_.jsx("input",{type:"email",value:r,onChange:I=>s(I.target.value),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"name@example.com"})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),_.jsxs("div",{className:"relative",children:[_.jsx(E_,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),_.jsx("input",{type:u?"text":"password",value:a,onChange:I=>o(I.target.value),className:"w-full pl-12 pr-12 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter your password"}),_.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:u?_.jsx(yD,{className:"h-5 w-5"}):_.jsx(vD,{className:"h-5 w-5"})})]})]}),_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("label",{className:"flex items-center cursor-pointer",children:[_.jsx("input",{type:"checkbox",checked:l,onChange:I=>c(I.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),_.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Remember me"})]}),_.jsx("button",{type:"button",onClick:()=>t(r),className:"text-sm text-primary-600 hover:text-primary-700 font-medium transition-colors",children:"Forgot your password?"})]}),_.jsx("button",{type:"submit",disabled:f,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3.5 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:f?_.jsxs("span",{className:"flex items-center justify-center gap-2",children:[_.jsx(_i,{className:"h-5 w-5 animate-spin"}),"Logging in..."]}):"Login"}),_.jsxs("div",{className:"relative my-6",children:[_.jsx("div",{className:"absolute inset-0 flex items-center",children:_.jsx("div",{className:"w-full border-t border-gray-200"})}),_.jsx("div",{className:"relative flex justify-center text-sm",children:_.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or continue with"})})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[_.jsxs("button",{type:"button",onClick:T,disabled:p||v,className:"flex items-center justify-center gap-2 border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 py-3.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[p?_.jsx(_i,{className:"h-5 w-5 animate-spin"}):_.jsx(QQ,{}),_.jsx("span",{className:"font-semibold text-gray-700",children:"Google"})]}),_.jsxs("button",{type:"button",onClick:A,disabled:p||v,className:"flex items-center justify-center gap-2 border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 py-3.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[v?_.jsx(_i,{className:"h-5 w-5 animate-spin"}):_.jsx(YQ,{}),_.jsx("span",{className:"font-semibold text-gray-700",children:"Facebook"})]})]}),_.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Don't have an account?"," ",_.jsx("button",{type:"button",onClick:e,className:"text-primary-600 font-semibold hover:text-primary-700 transition-colors",children:"Sign up"})]})]})]})},aL=M.createContext(void 0),JQ=()=>{const t=M.useContext(aL);return t||{executeRecaptcha:async()=>"mock-token"}},ZQ=({children:t})=>{const e=async()=>(console.log("ReCaptcha executed (mock)"),"mock-recaptcha-token");return _.jsx(aL.Provider,{value:{executeRecaptcha:e},children:t})};function oL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eY=oL,lL=new yr("auth","Firebase",oL());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag=new $d("@firebase/auth");function tY(t,...e){ag.logLevel<=ge.WARN&&ag.warn(`Auth (${Ri}): ${t}`,...e)}function Xm(t,...e){ag.logLevel<=ge.ERROR&&ag.error(`Auth (${Ri}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t,...e){throw zx(t,...e)}function cL(t,...e){return zx(t,...e)}function uL(t,e,n){const i={...eY(),[e]:n};return new yr("auth","Firebase",i).create(e,{appName:t.name})}function Jm(t){return uL(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zx(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return lL.create(t,...e)}function Re(t,e,...n){if(!t)throw zx(e,...n)}function kh(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xm(e),new Error(e)}function og(t,e){t||kh(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nY(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function hL(){return ER()==="http:"||ER()==="https:"}function ER(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iY(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hL()||Xb()||"connection"in navigator)?navigator.onLine:!0}function rY(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n){this.shortDelay=e,this.longDelay=n,og(n>e,"Short delay should be less than long delay!"),this.isMobile=ID()||Bg()}get(){return iY()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sY(t,e){og(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oY=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lY=new pf(3e4,6e4);function Bx(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function gf(t,e,n,i,r={}){return fL(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const o=va({key:t.config.apiKey,...a}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return RD()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&gr(t.emulatorConfig.host)&&(c.credentials="include"),dL.fetch()(await mL(t,t.config.apiHost,n,o),c)})}async function fL(t,e,n){t._canInitEmulator=!1;const i={...aY,...e};try{const r=new cY(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw dm(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw dm(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw dm(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw dm(t,"user-disabled",a);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw uL(t,u,c);xR(t,u)}}catch(r){if(r instanceof Kt)throw r;xR(t,"network-request-failed",{message:String(r)})}}async function mL(t,e,n,i){const r=`${e}${n}?${i}`,s=t,a=s.config.emulator?sY(t.config,r):`${t.config.apiScheme}://${r}`;return oY.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class cY{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(cL(this.auth,"network-request-failed")),lY.get())})}}function dm(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=cL(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uY(t,e){return gf(t,"POST","/v1/accounts:delete",e)}async function lg(t,e){return gf(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hY(t,e=!1){const n=ne(t),i=await n.getIdToken(e),r=pL(i);Re(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Mh(c0(r.auth_time)),issuedAtTime:Mh(c0(r.iat)),expirationTime:Mh(c0(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function c0(t){return Number(t)*1e3}function pL(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Xm("JWT malformed, contained fewer than 3 sections"),null;try{const r=jg(n);return r?JSON.parse(r):(Xm("Failed to decode base64 JWT payload"),null)}catch(r){return Xm("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function SR(t){const e=pL(t);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yw(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Kt&&dY(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function dY({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fY{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mh(this.lastLoginAt),this.creationTime=Mh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cg(t){var d;const e=t.auth,n=await t.getIdToken(),i=await yw(t,lg(e,{idToken:n}));Re(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const s=(d=r.providerUserInfo)!=null&&d.length?gL(r.providerUserInfo):[],a=pY(t.providerData,s),o=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),c=o?l:!1,u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new vw(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(t,u)}async function mY(t){const e=ne(t);await cg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pY(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function gL(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gY(t,e){const n=await fL(t,{},async()=>{const i=va({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=await mL(t,r,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:i};return t.emulatorConfig&&gr(t.emulatorConfig.host)&&(l.credentials="include"),dL.fetch()(a,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yY(t,e){return gf(t,"POST","/v2/accounts:revokeToken",Bx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):SR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=SR(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await gY(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new Kl;return i&&(Re(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(Re(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(Re(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kl,this.toJSON())}_performRefresh(){return kh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(t,e){Re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ir{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new fY(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new vw(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await yw(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hY(this,e)}reload(){return mY(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ir({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await cg(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ce(this.auth.app))return Promise.reject(Jm(this.auth));const e=await this.getIdToken();return await yw(this,uY(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:h,providerData:p,stsTokenManager:g}=n;Re(d&&g,e,"internal-error");const v=Kl.fromJSON(this.name,g);Re(typeof d=="string",e,"internal-error"),ws(i,e.name),ws(r,e.name),Re(typeof f=="boolean",e,"internal-error"),Re(typeof h=="boolean",e,"internal-error"),ws(s,e.name),ws(a,e.name),ws(o,e.name),ws(l,e.name),ws(c,e.name),ws(u,e.name);const y=new ir({uid:d,auth:e,email:r,emailVerified:f,displayName:i,isAnonymous:h,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:v,createdAt:c,lastLoginAt:u});return p&&Array.isArray(p)&&(y.providerData=p.map(w=>({...w}))),l&&(y._redirectEventId=l),y}static async _fromIdTokenResponse(e,n,i=!1){const r=new Kl;r.updateFromServerResponse(n);const s=new ir({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await cg(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Re(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?gL(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),o=new Kl;o.updateFromIdToken(i);const l=new ir({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new vw(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=new Map;function eo(t){og(t instanceof Function,"Expected a class definition");let e=IR.get(t);return e?(og(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,IR.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yL.type="NONE";const AR=yL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t,e,n){return`firebase:${t}:${e}:${n}`}class Wl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=u0(this.userKey,r.apiKey,s),this.fullPersistenceKey=u0("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await lg(this.auth,{idToken:e}).catch(()=>{});return n?ir._fromGetAccountInfoResponse(this.auth,n,e):null}return ir._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Wl(eo(AR),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||eo(AR);const a=u0(i,e.config.apiKey,e.name);let o=null;for(const c of n)try{const u=await c._get(a);if(u){let d;if(typeof u=="string"){const f=await lg(e,{idToken:u}).catch(()=>{});if(!f)break;d=await ir._fromGetAccountInfoResponse(e,f,u)}else d=ir._fromJSON(e,u);c!==s&&(o=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Wl(s,e,i):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new Wl(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bY(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vY(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xY(e))return"Blackberry";if(EY(e))return"Webos";if(_Y(e))return"Safari";if((e.includes("chrome/")||wY(e))&&!e.includes("edge/"))return"Chrome";if(TY(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function vY(t=Ae()){return/firefox\//i.test(t)}function _Y(t=Ae()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wY(t=Ae()){return/crios\//i.test(t)}function bY(t=Ae()){return/iemobile/i.test(t)}function TY(t=Ae()){return/android/i.test(t)}function xY(t=Ae()){return/blackberry/i.test(t)}function EY(t=Ae()){return/webos/i.test(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(t,e=[]){let n;switch(t){case"Browser":n=RR(Ae());break;case"Worker":n=`${RR(Ae())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ri}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SY{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IY(t,e={}){return gf(t,"GET","/v2/passwordPolicy",Bx(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AY=6;class RY{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??AY,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CY{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new CR(this),this.idTokenSubscription=new CR(this),this.beforeStateQueue=new SY(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=eo(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Wl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await lg(this,{idToken:e}),i=await ir._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Ce(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await cg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rY()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ce(this.app))return Promise.reject(Jm(this));const n=e?ne(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ce(this.app)?Promise.reject(Jm(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ce(this.app)?Promise.reject(Jm(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(eo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IY(this),n=new RY(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yr("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await yY(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&eo(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await Wl.create(this,[eo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(Ce(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&tY(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function PY(t){return ne(t)}class CR{constructor(e){this.auth=e,this.observer=null,this.addObserver=Jb(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function NY(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(eo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DY(t,e){return gf(t,"POST","/v1/accounts:createAuthUri",Bx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kY(t,e){const n=hL()?nY():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:r}=await DY(ne(t),i);return r||[]}new pf(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new pf(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new pf(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new pf(5e3,15e3);var PR="@firebase/auth",NR="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MY{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OY(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VY(t){Li(new jn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=i.options;Re(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vL(t)},c=new CY(i,r,s,l);return NY(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Li(new jn("auth-internal",e=>{const n=PY(e.getProvider("auth").getImmediate());return(i=>new MY(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xn(PR,NR,OY(t)),xn(PR,NR,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LY=5*60;ED("authIdTokenMaxAge");VY("Browser");const UY=({onLogin:t,onSuccess:e,onVerificationNeeded:n})=>{const[i,r]=M.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),[s,a]=M.useState(!1),[o,l]=M.useState(!1),[c,u]=M.useState(null),[d,f]=M.useState(!1),[h,p]=M.useState(!1),[g,v]=M.useState("idle"),[y,w]=M.useState({score:0,label:"",color:"bg-gray-200"}),[b,R]=M.useState({email:"",password:"",phone:""}),{register:S}=ss(),{executeRecaptcha:C}=JQ();Xn.useEffect(()=>{window.debugRegister=S},[S]),Xn.useEffect(()=>{const P=setTimeout(async()=>{if(!i.email||!i.email.includes("@")){v("idle");return}v("checking");try{(await kY(cn,i.email)).length>0?(v("taken"),R(D=>({...D,email:"This email is already in use."}))):(v("available"),R(D=>({...D,email:""})))}catch(k){console.error("Error checking email:",k),v("idle")}},500);return()=>clearTimeout(P)},[i.email]);const x=I=>{let P=0;return I?(I.length>=6&&P++,I.length>=10&&P++,/[A-Z]/.test(I)&&P++,/[0-9]/.test(I)&&P++,/[^A-Za-z0-9]/.test(I)&&P++,P<=2?{score:P,label:"Weak",color:"bg-red-500"}:P<=4?{score:P,label:"Good",color:"bg-yellow-500"}:{score:P,label:"Strong",color:"bg-green-500"}):{score:0,label:"",color:"bg-gray-200"}},T=I=>{const P=I.target.value;r({...i,password:P}),w(x(P)),b.password&&R(k=>({...k,password:""}))};Xn.useEffect(()=>{if(!d)return;let I,P;return I=setInterval(async()=>{if(cn.currentUser)try{await cn.currentUser.reload();const D=["admin@rushcoffee.ph","sa@gmail.com"];(cn.currentUser.emailVerified||D.includes(cn.currentUser.email||""))&&(p(!0),clearInterval(I),clearTimeout(P),setTimeout(()=>{window.location.href="#/menu"},1e3))}catch(D){console.error("Error checking verification:",D)}},3e3),P=setTimeout(()=>{clearInterval(I)},6e5),()=>{clearInterval(I),clearTimeout(P)}},[d]);const A=async I=>{try{if(u(""),l(!0),i.password!==i.confirmPassword){R(z=>({...z,password:"Passwords do not match"})),l(!1);return}if(!i.email.endsWith("@gmail.com")){R(z=>({...z,email:"Please use a valid @gmail.com address"})),l(!1);return}if(g==="taken"){R(z=>({...z,email:"This email is already registered."})),l(!1);return}if(i.phone&&!/^(09|\+639)\d{9}$/.test(i.phone)){R(L=>({...L,phone:"Please enter a valid PH phone number (e.g., 09xxxxxxxxx)."})),l(!1);return}const P=await C();console.log("ReCaptcha token:",P);const k=i.email.trim();console.log(`Attempting registration with email: '${k}'`);const D=await S(k,i.password,i.firstName,i.lastName,i.phone),V=cn.currentUser;V&&(await V.sendEmailVerification(),console.log(" Verification email sent to:",k)),u(""),l(!1),f(!0)}catch(P){console.error("Registration error:",P);let k="Failed to create account. Please try again.",D=!1;P.code==="auth/email-already-in-use"?(R(V=>({...V,email:"This email is already registered. Please login or use a different email."})),D=!0):P.code==="auth/invalid-email"?(R(V=>({...V,email:"Please enter a valid email address."})),D=!0):P.code==="auth/weak-password"?(R(V=>({...V,password:"Password is too weak. Please use at least 6 characters."})),D=!0):P.code==="auth/missing-password"?(R(V=>({...V,password:"Please enter a password."})),D=!0):P.message&&(k=P.message.replace("Firebase: ","").replace(/\(auth\/.*\)\.?/,"").trim()),D||u(k),l(!1)}};return d?h?_.jsxs("div",{className:"w-full max-w-md mx-auto text-center py-8",children:[_.jsx("div",{className:"mb-6 flex justify-center",children:_.jsx("div",{className:"rounded-full bg-green-100 p-4 animate-pulse",children:_.jsx(c9,{className:"h-12 w-12 text-green-600"})})}),_.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Email Verified!"}),_.jsx("p",{className:"text-gray-600 mb-6",children:"Taking you to the menu..."}),_.jsx("div",{className:"flex justify-center",children:_.jsx(_i,{className:"h-8 w-8 animate-spin text-primary-600"})})]}):_.jsxs("div",{className:"w-full max-w-md mx-auto text-center py-8",children:[_.jsx("div",{className:"mb-6 flex justify-center",children:_.jsx("div",{className:"rounded-full bg-blue-100 p-4 animate-bounce-slow",children:_.jsx(nd,{className:"h-12 w-12 text-blue-600"})})}),_.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Check your email"}),_.jsxs("p",{className:"text-gray-600 mb-6",children:["We've sent a verification link to ",_.jsx("span",{className:"font-semibold text-gray-900",children:i.email})]}),_.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-5 mb-6",children:[_.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[_.jsx(_i,{className:"h-5 w-5 animate-spin text-blue-600"}),_.jsx("h4",{className:"font-semibold text-blue-900",children:"Waiting for verification..."})]}),_.jsx("p",{className:"text-sm text-blue-800",children:"Click the link in your email and we'll automatically log you in!"})]}),_.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4 mb-8 text-left",children:[_.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[_.jsx(gh,{className:"h-4 w-4 text-gray-600"}),"Next Steps:"]}),_.jsxs("ol",{className:"list-decimal list-inside text-sm text-gray-700 space-y-1.5 ml-1",children:[_.jsx("li",{children:"Check your email inbox (and spam folder)"}),_.jsx("li",{children:"Click the verification link"}),_.jsx("li",{children:"Close the verification tab and return here"}),_.jsx("li",{children:"You'll be automatically logged in!"})]})]}),_.jsxs("p",{className:"text-sm text-gray-500",children:["Didn't receive the email? ",_.jsx("button",{className:"text-primary-600 font-medium hover:underline",children:"Resend"})]})]}):_.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[_.jsxs("div",{className:"text-center mb-6",children:[_.jsx(Qr,{className:"mx-auto h-16 w-16 text-primary-600 mb-4"}),_.jsx("h2",{className:"font-display text-4xl font-bold text-gray-900",children:"Join Rush Coffee"}),_.jsxs("p",{className:"mt-2 text-gray-600 flex items-center justify-center gap-1",children:["Start skipping the line today ",_.jsx("span",{children:""})]})]}),_.jsxs("div",{onKeyDown:I=>I.key==="Enter"&&A(),className:"space-y-4",children:[c&&_.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-800 border border-red-200",children:[_.jsx(gh,{className:"h-5 w-5 flex-shrink-0"}),_.jsx("span",{children:c})]}),_.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),_.jsxs("div",{className:"relative",children:[_.jsx(I_,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),_.jsx("input",{type:"text",required:!0,value:i.firstName,onChange:I=>r({...i,firstName:I.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter first name"})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),_.jsxs("div",{className:"relative",children:[_.jsx(I_,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),_.jsx("input",{type:"text",required:!0,value:i.lastName,onChange:I=>r({...i,lastName:I.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter last name"})]})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),_.jsxs("div",{className:"relative",children:[_.jsx(nd,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),_.jsx("input",{type:"email",required:!0,value:i.email,onChange:I=>{const P=I.target.value;r({...i,email:P}),b.email&&R(k=>({...k,email:""})),P&&P.endsWith("@gmail.com")},className:`w-full pl-12 pr-4 py-3.5 bg-primary-50 border ${b.email?"border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-primary-500"} rounded-xl focus:outline-none focus:ring-2 focus:bg-white transition-all placeholder:text-gray-400`,placeholder:"name@gmail.com"}),g==="checking"&&_.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:_.jsx(_i,{className:"h-4 w-4 animate-spin text-gray-400"})})]}),b.email&&_.jsxs("p",{className:"text-xs text-red-600 mt-1 ml-1 flex items-center gap-1",children:[_.jsx(gh,{className:"h-3 w-3"}),b.email]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number (Optional)"}),_.jsxs("div",{className:"relative",children:[_.jsx($b,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),_.jsx("input",{type:"tel",name:"phone",autoComplete:"off",value:i.phone,onChange:I=>{r({...i,phone:I.target.value}),b.phone&&R(P=>({...P,phone:""}))},className:`w-full pl-12 pr-4 py-3.5 bg-primary-50 border ${b.phone?"border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-primary-500"} rounded-xl focus:outline-none focus:ring-2 focus:bg-white transition-all placeholder:text-gray-400`,placeholder:"09xxxxxxxxx"})]}),b.phone&&_.jsx("p",{className:"text-xs text-red-600 mt-1 ml-1",children:b.phone})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),_.jsxs("div",{className:"relative",children:[_.jsx(E_,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),_.jsx("input",{type:s?"text":"password",name:"password",autoComplete:"new-password",required:!0,value:i.password,onChange:T,className:`w-full pl-12 pr-12 py-3.5 bg-primary-50 border ${b.password?"border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-primary-500"} rounded-xl focus:outline-none focus:ring-2 focus:bg-white transition-all placeholder:text-gray-400`,placeholder:"Create a password"}),_.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:s?_.jsx(yD,{className:"h-5 w-5"}):_.jsx(vD,{className:"h-5 w-5"})})]}),b.password&&_.jsx("p",{className:"text-xs text-red-600 mt-1 ml-1",children:b.password}),i.password&&_.jsxs("div",{className:"mt-2",children:[_.jsx("div",{className:"flex justify-between items-center mb-1",children:_.jsx("span",{className:`text-xs font-medium ${y.color.replace("bg-","text-")}`,children:y.label})}),_.jsx("div",{className:"h-1.5 w-full bg-gray-200 rounded-full overflow-hidden",children:_.jsx("div",{className:`h-full ${y.color} transition-all duration-300`,style:{width:`${y.score/5*100}%`}})})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),_.jsxs("div",{className:"relative",children:[_.jsx(E_,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),_.jsx("input",{type:s?"text":"password",name:"confirmPassword",autoComplete:"new-password",required:!0,value:i.confirmPassword,onChange:I=>r({...i,confirmPassword:I.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Confirm your password"})]})]}),_.jsx("button",{type:"button",onClick:()=>A(),disabled:o,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3.5 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:o?_.jsxs("span",{className:"flex items-center justify-center gap-2",children:[_.jsx(_i,{className:"h-5 w-5 animate-spin"}),"Creating account..."]}):"Create Account"}),_.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Already have an account?"," ",_.jsx("button",{type:"button",onClick:t,className:"text-primary-600 font-semibold hover:text-primary-700 transition-colors",children:"Login"})]})]})]})},jY=({onBack:t,initialEmail:e=""})=>{const[n,i]=M.useState(e),[r,s]=M.useState(!1),[a,o]=M.useState(null),[l,c]=M.useState(null),{sendPasswordReset:u}=ss(),d=async f=>{if(f.preventDefault(),!n){c("Email is required");return}s(!0),c(null),o(null),console.log("Attempting to send password reset email to:",n);try{await u(n),console.log("Password reset email sent successfully"),o("Password reset link sent! Please check your email.")}catch(h){console.error("Password reset error:",h),h.code==="auth/user-not-found"?c("No account found with this email address."):h.code==="auth/invalid-email"?c("Please enter a valid email address."):c(h.message||"Failed to send reset link")}finally{s(!1)}};return _.jsxs("form",{onSubmit:d,className:"space-y-4",children:[_.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter your email address and we'll send you a link to reset your password."}),l&&_.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-800",children:[_.jsx(gh,{className:"h-5 w-5 flex-shrink-0"}),_.jsx("span",{children:l})]}),a&&_.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-green-50 p-3 text-sm text-green-800",children:[_.jsx(Hb,{className:"h-5 w-5 flex-shrink-0"}),_.jsx("span",{children:a})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email address"}),_.jsxs("div",{className:"relative",children:[_.jsx(nd,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),_.jsx("input",{type:"email",value:n,onChange:f=>i(f.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"admin@rushcoffee.ph"})]})]}),_.jsx("button",{type:"submit",disabled:r||!!a,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3 rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?_.jsxs("span",{className:"flex items-center justify-center gap-2",children:[_.jsx(_i,{className:"h-5 w-5 animate-spin"}),"Sending Link..."]}):a?"Link Sent":"Send Reset Link"}),_.jsxs("button",{type:"button",onClick:t,className:"w-full flex items-center justify-center gap-2 text-gray-600 hover:text-gray-900 font-medium py-2 transition-colors",children:[_.jsx(gD,{className:"h-4 w-4"}),"Back to Login"]})]})},zY=({isOpen:t,onClose:e,initialView:n="login",onVerificationNeeded:i,onAuthSuccess:r})=>{const[s,a]=Xn.useState(n),[o,l]=Xn.useState("");return Xn.useEffect(()=>{t&&(a(n),l(""))},[t,n]),_.jsxs(jx,{isOpen:t,onClose:e,hideHeader:!0,size:s==="register"?"xl":"md",children:[s==="login"&&_.jsx(XQ,{onForgotPassword:c=>{l(c),a("forgot-password")},onRegister:()=>a("register"),onSuccess:c=>r(c),onVerificationNeeded:(c,u,d)=>i==null?void 0:i(c,u,d)},"login"),s==="register"&&_.jsx(UY,{onLogin:()=>a("login"),onSuccess:()=>r(),onVerificationNeeded:(c,u,d)=>i==null?void 0:i(c,u,d)},"register"),s==="forgot-password"&&_.jsx(jY,{initialEmail:o,onBack:()=>a("login")},"forgot-password")]})},BY=({email:t,onVerify:e,onBack:n,onResend:i})=>{const[r,s]=M.useState(["","","","","",""]),[a,o]=M.useState(!1),[l,c]=M.useState(null),[u,d]=M.useState(30),f=M.useRef([]);M.useEffect(()=>{if(u>0){const w=setTimeout(()=>d(u-1),1e3);return()=>clearTimeout(w)}},[u]);const h=(w,b)=>{var S;if(b.length>1)return;const R=[...r];R[w]=b,s(R),b&&w<5&&((S=f.current[w+1])==null||S.focus())},p=(w,b)=>{var R;b.key==="Backspace"&&!r[w]&&w>0&&((R=f.current[w-1])==null||R.focus())},g=w=>{var S;w.preventDefault();const b=w.clipboardData.getData("text").slice(0,6).split(""),R=[...r];b.forEach((C,x)=>{x<6&&(R[x]=C)}),s(R),b.length===6&&((S=f.current[5])==null||S.focus())},v=async w=>{w.preventDefault();const b=r.join("");if(b.length!==6){c("Please enter the complete 6-digit code");return}o(!0),c(null);try{await e(b)}catch(R){c(R.message||"Verification failed"),o(!1)}},y=async()=>{u>0||(await i(),d(30))};return _.jsxs("form",{onSubmit:v,className:"space-y-8",children:[_.jsxs("div",{className:"text-center",children:[_.jsx(Qr,{className:"mx-auto h-16 w-16 text-primary-600 mb-4"}),_.jsx("h2",{className:"font-display text-3xl font-bold text-gray-900 mb-2",children:"Verify Your Email"}),_.jsx("p",{className:"text-gray-600 mb-2",children:"We've sent a verification code to"}),_.jsx("p",{className:"text-lg font-bold text-primary-700",children:t})]}),_.jsx("div",{className:"flex justify-center gap-3",children:r.map((w,b)=>_.jsx("input",{ref:R=>f.current[b]=R,type:"text",maxLength:1,value:w,onChange:R=>h(b,R.target.value),onKeyDown:R=>p(b,R),onPaste:g,className:"w-12 h-14 sm:w-14 sm:h-16 text-center text-2xl font-bold bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all placeholder:text-gray-300",placeholder:""},b))}),l&&_.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100",children:[_.jsx(G9,{className:"h-4 w-4"}),_.jsx("span",{children:l})]}),_.jsx("button",{type:"submit",disabled:a||r.join("").length!==6,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-4 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:a?_.jsxs("span",{className:"flex items-center justify-center gap-2",children:[_.jsx(_i,{className:"h-5 w-5 animate-spin"}),"Verifying..."]}):"Verify Account"}),_.jsxs("div",{className:"flex items-center justify-between text-sm pt-2",children:[_.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-2 text-gray-500 hover:text-gray-900 font-medium transition-colors group",children:[_.jsx(gD,{className:"h-4 w-4 transition-transform group-hover:-translate-x-1"}),"Back to Login"]}),_.jsxs("button",{type:"button",onClick:y,disabled:u>0,className:`flex items-center gap-2 font-medium transition-colors ${u>0?"text-gray-400 cursor-not-allowed":"text-primary-600 hover:text-primary-700"}`,children:[_.jsx(U9,{className:`h-4 w-4 ${u>0?"animate-spin":""}`}),u>0?`Resend in ${u}s`:"Resend Code"]})]})]})},FY=({isOpen:t,onClose:e,email:n,userId:i,onSuccess:r,onBackToLogin:s,onResend:a})=>{const{verifyEmailCode:o}=ss(),l=async()=>{a?await a():(console.log("Resending code for user",i),await new Promise(u=>setTimeout(u,1e3)))},c=async u=>{if(!i)throw new Error("User ID is missing. Cannot verify.");if(await o(i,u))r();else throw new Error("Invalid verification code. Please check the console or try again.")};return _.jsx(jx,{isOpen:t,onClose:e,hideHeader:!0,size:"md",children:_.jsx(BY,{email:n,onVerify:c,onBack:s||e,onResend:l})})},Fx=M.createContext({});function qx(t){const e=M.useRef(null);return e.current===null&&(e.current=t()),e.current}const Cy=M.createContext(null),Hx=M.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class qY extends M.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function HY({children:t,isPresent:e}){const n=M.useId(),i=M.useRef(null),r=M.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=M.useContext(Hx);return M.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:c}=r.current;if(e||!i.current||!a||!o)return;i.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),_.jsx(qY,{isPresent:e,childRef:i,sizeRef:r,children:M.cloneElement(t,{ref:i})})}const $Y=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:a})=>{const o=qx(GY),l=M.useId(),c=M.useCallback(d=>{o.set(d,!0);for(const f of o.values())if(!f)return;i&&i()},[o,i]),u=M.useMemo(()=>({id:l,initial:e,isPresent:n,custom:r,onExitComplete:c,register:d=>(o.set(d,!1),()=>o.delete(d))}),s?[Math.random(),c]:[n,c]);return M.useMemo(()=>{o.forEach((d,f)=>o.set(f,!1))},[n]),M.useEffect(()=>{!n&&!o.size&&i&&i()},[n]),a==="popLayout"&&(t=_.jsx(HY,{isPresent:n,children:t})),_.jsx(Cy.Provider,{value:u,children:t})};function GY(){return new Map}function _L(t=!0){const e=M.useContext(Cy);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,s=M.useId();M.useEffect(()=>{t&&r(s)},[t]);const a=M.useCallback(()=>t&&i&&i(s),[s,i,t]);return!n&&i?[!1,a]:[!0]}const fm=t=>t.key||"";function DR(t){const e=[];return M.Children.forEach(t,n=>{M.isValidElement(n)&&e.push(n)}),e}const $x=typeof window<"u",wL=$x?M.useLayoutEffect:M.useEffect,ug=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:a=!1})=>{const[o,l]=_L(a),c=M.useMemo(()=>DR(t),[t]),u=a&&!o?[]:c.map(fm),d=M.useRef(!0),f=M.useRef(c),h=qx(()=>new Map),[p,g]=M.useState(c),[v,y]=M.useState(c);wL(()=>{d.current=!1,f.current=c;for(let R=0;R<v.length;R++){const S=fm(v[R]);u.includes(S)?h.delete(S):h.get(S)!==!0&&h.set(S,!1)}},[v,u.length,u.join("-")]);const w=[];if(c!==p){let R=[...c];for(let S=0;S<v.length;S++){const C=v[S],x=fm(C);u.includes(x)||(R.splice(S,0,C),w.push(C))}s==="wait"&&w.length&&(R=w),y(DR(R)),g(c);return}const{forceRender:b}=M.useContext(Fx);return _.jsx(_.Fragment,{children:v.map(R=>{const S=fm(R),C=a&&!o?!1:c===v||u.includes(S),x=()=>{if(h.has(S))h.set(S,!0);else return;let T=!0;h.forEach(A=>{A||(T=!1)}),T&&(b==null||b(),y(f.current),a&&(l==null||l()),i&&i())};return _.jsx($Y,{isPresent:C,initial:!d.current||n?void 0:!1,custom:C?void 0:e,presenceAffectsLayout:r,mode:s,onExitComplete:C?void 0:x,children:R},S)})})},ii=t=>t;let bL=ii;function Gx(t){let e;return()=>(e===void 0&&(e=t()),e)}const Cc=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},Lr=t=>t*1e3,Ur=t=>t/1e3,KY={useManualTiming:!1};function WY(t){let e=new Set,n=new Set,i=!1,r=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(c){s.has(c)&&(l.schedule(c),t()),c(a)}const l={schedule:(c,u=!1,d=!1)=>{const h=d&&i?e:n;return u&&s.add(c),h.has(c)||h.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(a=c,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(o),e.clear(),i=!1,r&&(r=!1,l.process(c))}};return l}const mm=["read","resolveKeyframes","update","preRender","render","postRender"],QY=40;function TL(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=mm.reduce((y,w)=>(y[w]=WY(s),y),{}),{read:o,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:f}=a,h=()=>{const y=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(y-r.timestamp,QY),1),r.timestamp=y,r.isProcessing=!0,o.process(r),l.process(r),c.process(r),u.process(r),d.process(r),f.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(h))},p=()=>{n=!0,i=!0,r.isProcessing||t(h)};return{schedule:mm.reduce((y,w)=>{const b=a[w];return y[w]=(R,S=!1,C=!1)=>(n||p(),b.schedule(R,S,C)),y},{}),cancel:y=>{for(let w=0;w<mm.length;w++)a[mm[w]].cancel(y)},state:r,steps:a}}const{schedule:Ze,cancel:ma,state:Yt,steps:h0}=TL(typeof requestAnimationFrame<"u"?requestAnimationFrame:ii,!0),xL=M.createContext({strict:!1}),kR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Pc={};for(const t in kR)Pc[t]={isEnabled:e=>kR[t].some(n=>!!e[n])};function YY(t){for(const e in t)Pc[e]={...Pc[e],...t[e]}}const XY=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function hg(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||XY.has(t)}let EL=t=>!hg(t);function JY(t){t&&(EL=e=>e.startsWith("on")?!hg(e):t(e))}try{JY(require("@emotion/is-prop-valid").default)}catch{}function ZY(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(EL(r)||n===!0&&hg(r)||!e&&!hg(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function eX(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const Py=M.createContext({});function Id(t){return typeof t=="string"||Array.isArray(t)}function Ny(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Kx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Wx=["initial",...Kx];function Dy(t){return Ny(t.animate)||Wx.some(e=>Id(t[e]))}function SL(t){return!!(Dy(t)||t.variants)}function tX(t,e){if(Dy(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Id(n)?n:void 0,animate:Id(i)?i:void 0}}return t.inherit!==!1?e:{}}function nX(t){const{initial:e,animate:n}=tX(t,M.useContext(Py));return M.useMemo(()=>({initial:e,animate:n}),[MR(e),MR(n)])}function MR(t){return Array.isArray(t)?t.join(" "):t}const iX=Symbol.for("motionComponentSymbol");function Pl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function rX(t,e,n){return M.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Pl(n)&&(n.current=i))},[e])}const Qx=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),sX="framerAppearId",IL="data-"+Qx(sX),{schedule:Yx}=TL(queueMicrotask,!1),AL=M.createContext({});function aX(t,e,n,i,r){var s,a;const{visualElement:o}=M.useContext(Py),l=M.useContext(xL),c=M.useContext(Cy),u=M.useContext(Hx).reducedMotion,d=M.useRef(null);i=i||l.renderer,!d.current&&i&&(d.current=i(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=d.current,h=M.useContext(AL);f&&!f.projection&&r&&(f.type==="html"||f.type==="svg")&&oX(d.current,n,r,h);const p=M.useRef(!1);M.useInsertionEffect(()=>{f&&p.current&&f.update(n,c)});const g=n[IL],v=M.useRef(!!g&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,g))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,g)));return wL(()=>{f&&(p.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),Yx.render(f.render),v.current&&f.animationState&&f.animationState.animateChanges())}),M.useEffect(()=>{f&&(!v.current&&f.animationState&&f.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,g)}),v.current=!1))}),f}function oX(t,e,n,i){const{layoutId:r,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:RL(t.parent)),t.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!a||o&&Pl(o),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function RL(t){if(t)return t.options.allowProjection!==!1?t.projection:RL(t.parent)}function lX({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var s,a;t&&YY(t);function o(c,u){let d;const f={...M.useContext(Hx),...c,layoutId:cX(c)},{isStatic:h}=f,p=nX(c),g=i(c,h);if(!h&&$x){uX();const v=hX(f);d=v.MeasureLayout,p.visualElement=aX(r,g,f,e,v.ProjectionNode)}return _.jsxs(Py.Provider,{value:p,children:[d&&p.visualElement?_.jsx(d,{visualElement:p.visualElement,...f}):null,n(r,c,rX(g,p.visualElement,u),g,h,p.visualElement)]})}o.displayName=`motion.${typeof r=="string"?r:`create(${(a=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&a!==void 0?a:""})`}`;const l=M.forwardRef(o);return l[iX]=r,l}function cX({layoutId:t}){const e=M.useContext(Fx).id;return e&&t!==void 0?e+"-"+t:t}function uX(t,e){M.useContext(xL).strict}function hX(t){const{drag:e,layout:n}=Pc;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const dX=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Xx(t){return typeof t!="string"||t.includes("-")?!1:!!(dX.indexOf(t)>-1||/[A-Z]/u.test(t))}function OR(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function Jx(t,e,n,i){if(typeof e=="function"){const[r,s]=OR(i);e=e(n!==void 0?n:t.custom,r,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,s]=OR(i);e=e(n!==void 0?n:t.custom,r,s)}return e}const _w=t=>Array.isArray(t),fX=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),mX=t=>_w(t)?t[t.length-1]||0:t,fn=t=>!!(t&&t.getVelocity);function Zm(t){const e=fn(t)?t.get():t;return fX(e)?e.toValue():e}function pX({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,s){const a={latestValues:gX(i,r,s,t),renderState:e()};return n&&(a.onMount=o=>n({props:i,current:o,...a}),a.onUpdate=o=>n(o)),a}const CL=t=>(e,n)=>{const i=M.useContext(Py),r=M.useContext(Cy),s=()=>pX(t,e,i,r);return n?s():qx(s)};function gX(t,e,n,i){const r={},s=i(t,{});for(const f in s)r[f]=Zm(s[f]);let{initial:a,animate:o}=t;const l=Dy(t),c=SL(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let u=n?n.initial===!1:!1;u=u||a===!1;const d=u?o:a;if(d&&typeof d!="boolean"&&!Ny(d)){const f=Array.isArray(d)?d:[d];for(let h=0;h<f.length;h++){const p=Jx(t,f[h]);if(p){const{transitionEnd:g,transition:v,...y}=p;for(const w in y){let b=y[w];if(Array.isArray(b)){const R=u?b.length-1:0;b=b[R]}b!==null&&(r[w]=b)}for(const w in g)r[w]=g[w]}}}return r}const eu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],qo=new Set(eu),PL=t=>e=>typeof e=="string"&&e.startsWith(t),NL=PL("--"),yX=PL("var(--"),Zx=t=>yX(t)?vX.test(t.split("/*")[0].trim()):!1,vX=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,DL=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Yr=(t,e,n)=>n>e?e:n<t?t:n,tu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ad={...tu,transform:t=>Yr(0,1,t)},pm={...tu,default:1},yf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),bs=yf("deg"),cr=yf("%"),se=yf("px"),_X=yf("vh"),wX=yf("vw"),VR={...cr,parse:t=>cr.parse(t)/100,transform:t=>cr.transform(t*100)},bX={borderWidth:se,borderTopWidth:se,borderRightWidth:se,borderBottomWidth:se,borderLeftWidth:se,borderRadius:se,radius:se,borderTopLeftRadius:se,borderTopRightRadius:se,borderBottomRightRadius:se,borderBottomLeftRadius:se,width:se,maxWidth:se,height:se,maxHeight:se,top:se,right:se,bottom:se,left:se,padding:se,paddingTop:se,paddingRight:se,paddingBottom:se,paddingLeft:se,margin:se,marginTop:se,marginRight:se,marginBottom:se,marginLeft:se,backgroundPositionX:se,backgroundPositionY:se},TX={rotate:bs,rotateX:bs,rotateY:bs,rotateZ:bs,scale:pm,scaleX:pm,scaleY:pm,scaleZ:pm,skew:bs,skewX:bs,skewY:bs,distance:se,translateX:se,translateY:se,translateZ:se,x:se,y:se,z:se,perspective:se,transformPerspective:se,opacity:Ad,originX:VR,originY:VR,originZ:se},LR={...tu,transform:Math.round},eE={...bX,...TX,zIndex:LR,size:se,fillOpacity:Ad,strokeOpacity:Ad,numOctaves:LR},xX={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},EX=eu.length;function SX(t,e,n){let i="",r=!0;for(let s=0;s<EX;s++){const a=eu[s],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=DL(o,eE[a]);if(!l){r=!1;const u=xX[a]||a;i+=`${u}(${c}) `}n&&(e[a]=c)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function tE(t,e,n){const{style:i,vars:r,transformOrigin:s}=t;let a=!1,o=!1;for(const l in e){const c=e[l];if(qo.has(l)){a=!0;continue}else if(NL(l)){r[l]=c;continue}else{const u=DL(c,eE[l]);l.startsWith("origin")?(o=!0,s[l]=u):i[l]=u}}if(e.transform||(a||n?i.transform=SX(e,t.transform,n):i.transform&&(i.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;i.transformOrigin=`${l} ${c} ${u}`}}const IX={offset:"stroke-dashoffset",array:"stroke-dasharray"},AX={offset:"strokeDashoffset",array:"strokeDasharray"};function RX(t,e,n=1,i=0,r=!0){t.pathLength=1;const s=r?IX:AX;t[s.offset]=se.transform(-i);const a=se.transform(e),o=se.transform(n);t[s.array]=`${a} ${o}`}function UR(t,e,n){return typeof t=="string"?t:se.transform(e+n*t)}function CX(t,e,n){const i=UR(e,t.x,t.width),r=UR(n,t.y,t.height);return`${i} ${r}`}function nE(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},u,d){if(tE(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:h,dimensions:p}=t;f.transform&&(p&&(h.transform=f.transform),delete f.transform),p&&(r!==void 0||s!==void 0||h.transform)&&(h.transformOrigin=CX(p,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),i!==void 0&&(f.scale=i),a!==void 0&&RX(f,a,o,l,!1)}const iE=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),kL=()=>({...iE(),attrs:{}}),rE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function ML(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const s in n)t.style.setProperty(s,n[s])}const OL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function VL(t,e,n,i){ML(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(OL.has(r)?r:Qx(r),e.attrs[r])}const dg={};function PX(t){Object.assign(dg,t)}function LL(t,{layout:e,layoutId:n}){return qo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!dg[t]||t==="opacity")}function sE(t,e,n){var i;const{style:r}=t,s={};for(const a in r)(fn(r[a])||e.style&&fn(e.style[a])||LL(a,t)||((i=n==null?void 0:n.getValue(a))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[a]=r[a]);return s}function UL(t,e,n){const i=sE(t,e,n);for(const r in t)if(fn(t[r])||fn(e[r])){const s=eu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=t[r]}return i}function NX(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const jR=["x","y","width","height","cx","cy","r"],DX={useVisualState:CL({scrapeMotionValuesFromProps:UL,createRenderState:kL,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let s=!!t.drag;if(!s){for(const o in r)if(qo.has(o)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let o=0;o<jR.length;o++){const l=jR[o];t[l]!==e[l]&&(a=!0)}a&&Ze.read(()=>{NX(n,i),Ze.render(()=>{nE(i,r,rE(n.tagName),t.transformTemplate),VL(n,i)})})}})},kX={useVisualState:CL({scrapeMotionValuesFromProps:sE,createRenderState:iE})};function jL(t,e,n){for(const i in e)!fn(e[i])&&!LL(i,n)&&(t[i]=e[i])}function MX({transformTemplate:t},e){return M.useMemo(()=>{const n=iE();return tE(n,e,t),Object.assign({},n.vars,n.style)},[e])}function OX(t,e){const n=t.style||{},i={};return jL(i,n,t),Object.assign(i,MX(t,e)),i}function VX(t,e){const n={},i=OX(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function LX(t,e,n,i){const r=M.useMemo(()=>{const s=kL();return nE(s,e,rE(i),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};jL(s,t.style,t),r.style={...s,...r.style}}return r}function UX(t=!1){return(n,i,r,{latestValues:s},a)=>{const l=(Xx(n)?LX:VX)(i,s,a,n),c=ZY(i,typeof n=="string",t),u=n!==M.Fragment?{...c,...l,ref:r}:{},{children:d}=i,f=M.useMemo(()=>fn(d)?d.get():d,[d]);return M.createElement(n,{...u,children:f})}}function jX(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...Xx(i)?DX:kX,preloadedFeatures:t,useRender:UX(r),createVisualElement:e,Component:i};return lX(a)}}function zL(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function ky(t,e,n){const i=t.getProps();return Jx(i,e,n!==void 0?n:i.custom,t)}const zX=Gx(()=>window.ScrollTimeline!==void 0);class BX{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(zX()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class FX extends BX{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function aE(t,e){return t?t[e]||t.default||t:void 0}const ww=2e4;function BL(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<ww;)e+=n,i=t.next(e);return e>=ww?1/0:e}function oE(t){return typeof t=="function"}function zR(t,e){t.timeline=e,t.onfinish=null}const lE=t=>Array.isArray(t)&&typeof t[0]=="number",qX={linearEasing:void 0};function HX(t,e){const n=Gx(t);return()=>{var i;return(i=qX[e])!==null&&i!==void 0?i:n()}}const fg=HX(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),FL=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let s=0;s<r;s++)i+=t(Cc(0,r-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function qL(t){return!!(typeof t=="function"&&fg()||!t||typeof t=="string"&&(t in bw||fg())||lE(t)||Array.isArray(t)&&t.every(qL))}const Zu=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,bw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zu([0,.65,.55,1]),circOut:Zu([.55,0,1,.45]),backIn:Zu([.31,.01,.66,-.59]),backOut:Zu([.33,1.53,.69,.99])};function HL(t,e){if(t)return typeof t=="function"&&fg()?FL(t,e):lE(t)?Zu(t):Array.isArray(t)?t.map(n=>HL(n,e)||bw.easeOut):bw[t]}const Ni={x:!1,y:!1};function $L(){return Ni.x||Ni.y}function $X(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const s=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function GL(t,e){const n=$X(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function BR(t){return e=>{e.pointerType==="touch"||$L()||t(e)}}function GX(t,e,n={}){const[i,r,s]=GL(t,n),a=BR(o=>{const{target:l}=o,c=e(o);if(typeof c!="function"||!l)return;const u=BR(d=>{c(d),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,r)});return i.forEach(o=>{o.addEventListener("pointerenter",a,r)}),s}const KL=(t,e)=>e?t===e?!0:KL(t,e.parentElement):!1,cE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,KX=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function WX(t){return KX.has(t.tagName)||t.tabIndex!==-1}const eh=new WeakSet;function FR(t){return e=>{e.key==="Enter"&&t(e)}}function d0(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const QX=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=FR(()=>{if(eh.has(n))return;d0(n,"down");const r=FR(()=>{d0(n,"up")}),s=()=>d0(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function qR(t){return cE(t)&&!$L()}function YX(t,e,n={}){const[i,r,s]=GL(t,n),a=o=>{const l=o.currentTarget;if(!qR(o)||eh.has(l))return;eh.add(l);const c=e(o),u=(h,p)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!qR(h)||!eh.has(l))&&(eh.delete(l),typeof c=="function"&&c(h,{success:p}))},d=h=>{u(h,n.useGlobalTarget||KL(l,h.target))},f=h=>{u(h,!1)};window.addEventListener("pointerup",d,r),window.addEventListener("pointercancel",f,r)};return i.forEach(o=>{!WX(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,r),o.addEventListener("focus",c=>QX(c,r),r)}),s}function XX(t){return t==="x"||t==="y"?Ni[t]?null:(Ni[t]=!0,()=>{Ni[t]=!1}):Ni.x||Ni.y?null:(Ni.x=Ni.y=!0,()=>{Ni.x=Ni.y=!1})}const WL=new Set(["width","height","top","left","right","bottom",...eu]);let ep;function JX(){ep=void 0}const ur={now:()=>(ep===void 0&&ur.set(Yt.isProcessing||KY.useManualTiming?Yt.timestamp:performance.now()),ep),set:t=>{ep=t,queueMicrotask(JX)}};function uE(t,e){t.indexOf(e)===-1&&t.push(e)}function hE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class dE{constructor(){this.subscriptions=[]}add(e){return uE(this.subscriptions,e),()=>hE(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let s=0;s<r;s++){const a=this.subscriptions[s];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function QL(t,e){return e?t*(1e3/e):0}const HR=30,ZX=t=>!isNaN(parseFloat(t));class eJ{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=ur.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ur.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=ZX(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new dE);const i=this.events[e].add(n);return e==="change"?()=>{i(),Ze.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ur.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>HR)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,HR);return QL(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Rd(t,e){return new eJ(t,e)}function tJ(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Rd(n))}function nJ(t,e){const n=ky(t,e);let{transitionEnd:i={},transition:r={},...s}=n||{};s={...s,...i};for(const a in s){const o=mX(s[a]);tJ(t,a,o)}}function iJ(t){return!!(fn(t)&&t.add)}function Tw(t,e){const n=t.getValue("willChange");if(iJ(n))return n.add(e)}function YL(t){return t.props[IL]}const XL=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,rJ=1e-7,sJ=12;function aJ(t,e,n,i,r){let s,a,o=0;do a=e+(n-e)/2,s=XL(a,i,r)-t,s>0?n=a:e=a;while(Math.abs(s)>rJ&&++o<sJ);return a}function vf(t,e,n,i){if(t===e&&n===i)return ii;const r=s=>aJ(s,0,1,t,n);return s=>s===0||s===1?s:XL(r(s),e,i)}const JL=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,ZL=t=>e=>1-t(1-e),e5=vf(.33,1.53,.69,.99),fE=ZL(e5),t5=JL(fE),n5=t=>(t*=2)<1?.5*fE(t):.5*(2-Math.pow(2,-10*(t-1))),mE=t=>1-Math.sin(Math.acos(t)),i5=ZL(mE),r5=JL(mE),s5=t=>/^0[^.\s]+$/u.test(t);function oJ(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||s5(t):!0}const Oh=t=>Math.round(t*1e5)/1e5,pE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function lJ(t){return t==null}const cJ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,gE=(t,e)=>n=>!!(typeof n=="string"&&cJ.test(n)&&n.startsWith(t)||e&&!lJ(n)&&Object.prototype.hasOwnProperty.call(n,e)),a5=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,s,a,o]=i.match(pE);return{[t]:parseFloat(r),[e]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},uJ=t=>Yr(0,255,t),f0={...tu,transform:t=>Math.round(uJ(t))},to={test:gE("rgb","red"),parse:a5("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+f0.transform(t)+", "+f0.transform(e)+", "+f0.transform(n)+", "+Oh(Ad.transform(i))+")"};function hJ(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const xw={test:gE("#"),parse:hJ,transform:to.transform},Nl={test:gE("hsl","hue"),parse:a5("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+cr.transform(Oh(e))+", "+cr.transform(Oh(n))+", "+Oh(Ad.transform(i))+")"},ln={test:t=>to.test(t)||xw.test(t)||Nl.test(t),parse:t=>to.test(t)?to.parse(t):Nl.test(t)?Nl.parse(t):xw.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?to.transform(t):Nl.transform(t)},dJ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function fJ(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(pE))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(dJ))===null||n===void 0?void 0:n.length)||0)>0}const o5="number",l5="color",mJ="var",pJ="var(",$R="${}",gJ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Cd(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let s=0;const o=e.replace(gJ,l=>(ln.test(l)?(i.color.push(s),r.push(l5),n.push(ln.parse(l))):l.startsWith(pJ)?(i.var.push(s),r.push(mJ),n.push(l)):(i.number.push(s),r.push(o5),n.push(parseFloat(l))),++s,$R)).split($R);return{values:n,split:o,indexes:i,types:r}}function c5(t){return Cd(t).values}function u5(t){const{split:e,types:n}=Cd(t),i=e.length;return r=>{let s="";for(let a=0;a<i;a++)if(s+=e[a],r[a]!==void 0){const o=n[a];o===o5?s+=Oh(r[a]):o===l5?s+=ln.transform(r[a]):s+=r[a]}return s}}const yJ=t=>typeof t=="number"?0:t;function vJ(t){const e=c5(t);return u5(t)(e.map(yJ))}const pa={test:fJ,parse:c5,createTransformer:u5,getAnimatableNone:vJ},_J=new Set(["brightness","contrast","saturate","opacity"]);function wJ(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(pE)||[];if(!i)return t;const r=n.replace(i,"");let s=_J.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+r+")"}const bJ=/\b([a-z-]*)\(.*?\)/gu,Ew={...pa,getAnimatableNone:t=>{const e=t.match(bJ);return e?e.map(wJ).join(" "):t}},TJ={...eE,color:ln,backgroundColor:ln,outlineColor:ln,fill:ln,stroke:ln,borderColor:ln,borderTopColor:ln,borderRightColor:ln,borderBottomColor:ln,borderLeftColor:ln,filter:Ew,WebkitFilter:Ew},yE=t=>TJ[t];function h5(t,e){let n=yE(t);return n!==Ew&&(n=pa),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const xJ=new Set(["auto","none","0"]);function EJ(t,e,n){let i=0,r;for(;i<t.length&&!r;){const s=t[i];typeof s=="string"&&!xJ.has(s)&&Cd(s).values.length&&(r=t[i]),i++}if(r&&n)for(const s of e)t[s]=h5(n,r)}const GR=t=>t===tu||t===se,KR=(t,e)=>parseFloat(t.split(", ")[e]),WR=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return KR(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?KR(s[1],t):0}},SJ=new Set(["x","y","z"]),IJ=eu.filter(t=>!SJ.has(t));function AJ(t){const e=[];return IJ.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const Nc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:WR(4,13),y:WR(5,14)};Nc.translateX=Nc.x;Nc.translateY=Nc.y;const ho=new Set;let Sw=!1,Iw=!1;function d5(){if(Iw){const t=Array.from(ho).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=AJ(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([s,a])=>{var o;(o=i.getValue(s))===null||o===void 0||o.set(a)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Iw=!1,Sw=!1,ho.forEach(t=>t.complete()),ho.clear()}function f5(){ho.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Iw=!0)})}function RJ(){f5(),d5()}class vE{constructor(e,n,i,r,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ho.add(this),Sw||(Sw=!0,Ze.read(f5),Ze.resolveKeyframes(d5))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=r==null?void 0:r.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&n){const l=i.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),r&&a===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ho.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ho.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const m5=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),CJ=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function PJ(t){const e=CJ.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function p5(t,e,n=1){const[i,r]=PJ(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const a=s.trim();return m5(a)?parseFloat(a):a}return Zx(r)?p5(r,e,n+1):r}const g5=t=>e=>e.test(t),NJ={test:t=>t==="auto",parse:t=>t},y5=[tu,se,cr,bs,wX,_X,NJ],QR=t=>y5.find(g5(t));class v5 extends vE{constructor(e,n,i,r,s){super(e,n,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Zx(c))){const u=p5(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!WL.has(i)||e.length!==2)return;const[r,s]=e,a=QR(r),o=QR(s);if(a!==o)if(GR(a)&&GR(o))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)oJ(e[r])&&i.push(r);i.length&&EJ(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Nc[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const s=n.getValue(i);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=Nc[i](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const YR=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(pa.test(t)||t==="0")&&!t.startsWith("url("));function DJ(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function kJ(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=YR(r,e),o=YR(s,e);return!a||!o?!1:DJ(t)||(n==="spring"||oE(n))&&i}const MJ=t=>t!==null;function My(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(MJ),s=e&&n!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const OJ=40;class _5{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ur.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>OJ?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&RJ(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=ur.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:c}=this.options;if(!c&&!kJ(e,i,r,s))if(a)this.options.duration=0;else{l&&l(My(e,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ct=(t,e,n)=>t+(e-t)*n;function m0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function VJ({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,s=0,a=0;if(!e)r=s=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;r=m0(l,o,t+1/3),s=m0(l,o,t),a=m0(l,o,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:i}}function mg(t,e){return n=>n>0?e:t}const p0=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},LJ=[xw,to,Nl],UJ=t=>LJ.find(e=>e.test(t));function XR(t){const e=UJ(t);if(!e)return!1;let n=e.parse(t);return e===Nl&&(n=VJ(n)),n}const JR=(t,e)=>{const n=XR(t),i=XR(e);if(!n||!i)return mg(t,e);const r={...n};return s=>(r.red=p0(n.red,i.red,s),r.green=p0(n.green,i.green,s),r.blue=p0(n.blue,i.blue,s),r.alpha=ct(n.alpha,i.alpha,s),to.transform(r))},jJ=(t,e)=>n=>e(t(n)),_f=(...t)=>t.reduce(jJ),Aw=new Set(["none","hidden"]);function zJ(t,e){return Aw.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function BJ(t,e){return n=>ct(t,e,n)}function _E(t){return typeof t=="number"?BJ:typeof t=="string"?Zx(t)?mg:ln.test(t)?JR:HJ:Array.isArray(t)?w5:typeof t=="object"?ln.test(t)?JR:FJ:mg}function w5(t,e){const n=[...t],i=n.length,r=t.map((s,a)=>_E(s)(s,e[a]));return s=>{for(let a=0;a<i;a++)n[a]=r[a](s);return n}}function FJ(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=_E(t[r])(t[r],e[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}}function qJ(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][r[a]],l=(n=t.values[o])!==null&&n!==void 0?n:0;i[s]=l,r[a]++}return i}const HJ=(t,e)=>{const n=pa.createTransformer(e),i=Cd(t),r=Cd(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Aw.has(t)&&!r.values.length||Aw.has(e)&&!i.values.length?zJ(t,e):_f(w5(qJ(i,r),r.values),n):mg(t,e)};function b5(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ct(t,e,n):_E(t)(t,e)}const $J=5;function T5(t,e,n){const i=Math.max(e-$J,0);return QL(n-t(i),e-i)}const mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},g0=.001;function GJ({duration:t=mt.duration,bounce:e=mt.bounce,velocity:n=mt.velocity,mass:i=mt.mass}){let r,s,a=1-e;a=Yr(mt.minDamping,mt.maxDamping,a),t=Yr(mt.minDuration,mt.maxDuration,Ur(t)),a<1?(r=c=>{const u=c*a,d=u*t,f=u-n,h=Rw(c,a),p=Math.exp(-d);return g0-f/h*p},s=c=>{const d=c*a*t,f=d*n+n,h=Math.pow(a,2)*Math.pow(c,2)*t,p=Math.exp(-d),g=Rw(Math.pow(c,2),a);return(-r(c)+g0>0?-1:1)*((f-h)*p)/g}):(r=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-g0+u*d},s=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const o=5/t,l=WJ(r,s,o);if(t=Lr(t),isNaN(l))return{stiffness:mt.stiffness,damping:mt.damping,duration:t};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:a*2*Math.sqrt(i*c),duration:t}}}const KJ=12;function WJ(t,e,n){let i=n;for(let r=1;r<KJ;r++)i=i-t(i)/e(i);return i}function Rw(t,e){return t*Math.sqrt(1-e*e)}const QJ=["duration","bounce"],YJ=["stiffness","damping","mass"];function ZR(t,e){return e.some(n=>t[n]!==void 0)}function XJ(t){let e={velocity:mt.velocity,stiffness:mt.stiffness,damping:mt.damping,mass:mt.mass,isResolvedFromDuration:!1,...t};if(!ZR(t,YJ)&&ZR(t,QJ))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,s=2*Yr(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:mt.mass,stiffness:r,damping:s}}else{const n=GJ(t);e={...e,...n,mass:mt.mass},e.isResolvedFromDuration=!0}return e}function x5(t=mt.visualDuration,e=mt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:h}=XJ({...n,velocity:-Ur(n.velocity||0)}),p=f||0,g=c/(2*Math.sqrt(l*u)),v=a-s,y=Ur(Math.sqrt(l/u)),w=Math.abs(v)<5;i||(i=w?mt.restSpeed.granular:mt.restSpeed.default),r||(r=w?mt.restDelta.granular:mt.restDelta.default);let b;if(g<1){const S=Rw(y,g);b=C=>{const x=Math.exp(-g*y*C);return a-x*((p+g*y*v)/S*Math.sin(S*C)+v*Math.cos(S*C))}}else if(g===1)b=S=>a-Math.exp(-y*S)*(v+(p+y*v)*S);else{const S=y*Math.sqrt(g*g-1);b=C=>{const x=Math.exp(-g*y*C),T=Math.min(S*C,300);return a-x*((p+g*y*v)*Math.sinh(T)+S*v*Math.cosh(T))/S}}const R={calculatedDuration:h&&d||null,next:S=>{const C=b(S);if(h)o.done=S>=d;else{let x=0;g<1&&(x=S===0?Lr(p):T5(b,S,C));const T=Math.abs(x)<=i,A=Math.abs(a-C)<=r;o.done=T&&A}return o.value=o.done?a:C,o},toString:()=>{const S=Math.min(BL(R),ww),C=FL(x=>R.next(S*x).value,S,30);return S+"ms "+C}};return R}function eC({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],f={done:!1,value:d},h=T=>o!==void 0&&T<o||l!==void 0&&T>l,p=T=>o===void 0?l:l===void 0||Math.abs(o-T)<Math.abs(l-T)?o:l;let g=n*e;const v=d+g,y=a===void 0?v:a(v);y!==v&&(g=y-d);const w=T=>-g*Math.exp(-T/i),b=T=>y+w(T),R=T=>{const A=w(T),I=b(T);f.done=Math.abs(A)<=c,f.value=f.done?y:I};let S,C;const x=T=>{h(f.value)&&(S=T,C=x5({keyframes:[f.value,p(f.value)],velocity:T5(b,T,f.value),damping:r,stiffness:s,restDelta:c,restSpeed:u}))};return x(0),{calculatedDuration:null,next:T=>{let A=!1;return!C&&S===void 0&&(A=!0,R(T),x(T)),S!==void 0&&T>=S?C.next(T-S):(!A&&R(T),f)}}}const JJ=vf(.42,0,1,1),ZJ=vf(0,0,.58,1),E5=vf(.42,0,.58,1),eZ=t=>Array.isArray(t)&&typeof t[0]!="number",tZ={linear:ii,easeIn:JJ,easeInOut:E5,easeOut:ZJ,circIn:mE,circInOut:r5,circOut:i5,backIn:fE,backInOut:t5,backOut:e5,anticipate:n5},tC=t=>{if(lE(t)){bL(t.length===4);const[e,n,i,r]=t;return vf(e,n,i,r)}else if(typeof t=="string")return tZ[t];return t};function nZ(t,e,n){const i=[],r=n||b5,s=t.length-1;for(let a=0;a<s;a++){let o=r(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||ii:e;o=_f(l,o)}i.push(o)}return i}function iZ(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const s=t.length;if(bL(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=nZ(e,i,r),l=o.length,c=u=>{if(a&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const f=Cc(t[d],t[d+1],u);return o[d](f)};return n?u=>c(Yr(t[0],t[s-1],u)):c}function rZ(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Cc(0,e,i);t.push(ct(n,1,r))}}function sZ(t){const e=[0];return rZ(e,t.length-1),e}function aZ(t,e){return t.map(n=>n*e)}function oZ(t,e){return t.map(()=>e||E5).splice(0,t.length-1)}function pg({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=eZ(i)?i.map(tC):tC(i),s={done:!1,value:e[0]},a=aZ(n&&n.length===e.length?n:sZ(e),t),o=iZ(a,e,{ease:Array.isArray(r)?r:oZ(e,r)});return{calculatedDuration:t,next:l=>(s.value=o(l),s.done=l>=t,s)}}const lZ=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ze.update(e,!0),stop:()=>ma(e),now:()=>Yt.isProcessing?Yt.timestamp:ur.now()}},cZ={decay:eC,inertia:eC,tween:pg,keyframes:pg,spring:x5},uZ=t=>t/100;class wE extends _5{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:i,element:r,keyframes:s}=this.options,a=(r==null?void 0:r.KeyframeResolver)||vE,o=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new a(s,o,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:a=0}=this.options,o=oE(n)?n:cZ[n]||pg;let l,c;o!==pg&&typeof e[0]!="number"&&(l=_f(uZ,b5(e[0],e[1])),e=[0,100]);const u=o({...this.options,keyframes:e});s==="mirror"&&(c=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=BL(u));const{calculatedDuration:d}=u,f=d+r,h=f*(i+1)-r;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:h}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=i;if(this.startTime===null)return s.next(0);const{delay:f,repeat:h,repeatType:p,repeatDelay:g,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-f*(this.speed>=0?1:-1),w=this.speed>=0?y<0:y>u;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let b=this.currentTime,R=s;if(h){const T=Math.min(this.currentTime,u)/d;let A=Math.floor(T),I=T%1;!I&&T>=1&&(I=1),I===1&&A--,A=Math.min(A,h+1),!!(A%2)&&(p==="reverse"?(I=1-I,g&&(I-=g/d)):p==="mirror"&&(R=a)),b=Yr(0,1,I)*d}const S=w?{done:!1,value:l[0]}:R.next(b);o&&(S.value=o(S.value));let{done:C}=S;!w&&c!==null&&(C=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const x=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return x&&r!==void 0&&(S.value=My(l,this.options,r)),v&&v(S.value),x&&this.finish(),S}get duration(){const{resolved:e}=this;return e?Ur(e.calculatedDuration):0}get time(){return Ur(this.currentTime)}set time(e){e=Lr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ur(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=lZ,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const hZ=new Set(["opacity","clipPath","filter","transform"]);function dZ(t,e,n,{delay:i=0,duration:r=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=HL(o,r);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:i,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const fZ=Gx(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),gg=10,mZ=2e4;function pZ(t){return oE(t.type)||t.type==="spring"||!qL(t.ease)}function gZ(t,e){const n=new wE({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let s=0;for(;!i.done&&s<mZ;)i=n.sample(s),r.push(i.value),s+=gg;return{times:void 0,keyframes:r,duration:s-gg,ease:"linear"}}const S5={anticipate:n5,backInOut:t5,circInOut:r5};function yZ(t){return t in S5}class nC extends _5{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new v5(s,(a,o)=>this.onKeyframesResolved(a,o),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:s,type:a,motionValue:o,name:l,startTime:c}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&fg()&&yZ(s)&&(s=S5[s]),pZ(this.options)){const{onComplete:d,onUpdate:f,motionValue:h,element:p,...g}=this.options,v=gZ(e,g);e=v.keyframes,e.length===1&&(e[1]=e[0]),i=v.duration,r=v.times,s=v.ease,a="keyframes"}const u=dZ(o.owner.current,l,e,{...this.options,duration:i,times:r,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(zR(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:d}=this.options;o.set(My(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:i,times:r,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Ur(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Ur(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=Lr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return ii;const{animation:i}=n;zR(i,e)}return ii}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:s,ease:a,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:d,element:f,...h}=this.options,p=new wE({...h,keyframes:i,duration:r,type:s,ease:a,times:o,isGenerator:!0}),g=Lr(this.time);c.setWithVelocity(p.sample(g-gg).value,p.sample(g).value,gg)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:s,damping:a,type:o}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return fZ()&&i&&hZ.has(i)&&!l&&!c&&!r&&s!=="mirror"&&a!==0&&o!=="inertia"}}const vZ={type:"spring",stiffness:500,damping:25,restSpeed:10},_Z=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),wZ={type:"keyframes",duration:.8},bZ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},TZ=(t,{keyframes:e})=>e.length>2?wZ:qo.has(t)?t.startsWith("scale")?_Z(e[1]):vZ:bZ;function xZ({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const bE=(t,e,n,i={},r,s)=>a=>{const o=aE(i,t)||{},l=o.delay||i.delay||0;let{elapsed:c=0}=i;c=c-Lr(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:f=>{e.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:s?void 0:r};xZ(o)||(u={...u,...TZ(t,u)}),u.duration&&(u.duration=Lr(u.duration)),u.repeatDelay&&(u.repeatDelay=Lr(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const f=My(u.keyframes,o);if(f!==void 0)return Ze.update(()=>{u.onUpdate(f),u.onComplete()}),new FX([])}return!s&&nC.supports(u)?new nC(u):new wE(u)};function EZ({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function I5(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var s;let{transition:a=t.getDefaultTransition(),transitionEnd:o,...l}=e;i&&(a=i);const c=[],u=r&&t.animationState&&t.animationState.getState()[r];for(const d in l){const f=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),h=l[d];if(h===void 0||u&&EZ(u,d))continue;const p={delay:n,...aE(a||{},d)};let g=!1;if(window.MotionHandoffAnimation){const y=YL(t);if(y){const w=window.MotionHandoffAnimation(y,d,Ze);w!==null&&(p.startTime=w,g=!0)}}Tw(t,d),f.start(bE(d,f,h,t.shouldReduceMotion&&WL.has(d)?{type:!1}:p,t,g));const v=f.animation;v&&c.push(v)}return o&&Promise.all(c).then(()=>{Ze.update(()=>{o&&nJ(t,o)})}),c}function Cw(t,e,n={}){var i;const r=ky(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(I5(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=s;return SZ(t,e,u+c,d,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>u())}else return Promise.all([a(),o(n.delay)])}function SZ(t,e,n=0,i=0,r=1,s){const a=[],o=(t.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>o-c*i;return Array.from(t.variantChildren).sort(IZ).forEach((c,u)=>{c.notify("AnimationStart",e),a.push(Cw(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(a)}function IZ(t,e){return t.sortNodePosition(e)}function AZ(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>Cw(t,s,n));i=Promise.all(r)}else if(typeof e=="string")i=Cw(t,e,n);else{const r=typeof e=="function"?ky(t,e,n.custom):e;i=Promise.all(I5(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const RZ=Wx.length;function A5(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?A5(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<RZ;n++){const i=Wx[n],r=t.props[i];(Id(r)||r===!1)&&(e[i]=r)}return e}const CZ=[...Kx].reverse(),PZ=Kx.length;function NZ(t){return e=>Promise.all(e.map(({animation:n,options:i})=>AZ(t,n,i)))}function DZ(t){let e=NZ(t),n=iC(),i=!0;const r=l=>(c,u)=>{var d;const f=ky(t,u,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:h,transitionEnd:p,...g}=f;c={...c,...g,...p}}return c};function s(l){e=l(t)}function a(l){const{props:c}=t,u=A5(t.parent)||{},d=[],f=new Set;let h={},p=1/0;for(let v=0;v<PZ;v++){const y=CZ[v],w=n[y],b=c[y]!==void 0?c[y]:u[y],R=Id(b),S=y===l?w.isActive:null;S===!1&&(p=v);let C=b===u[y]&&b!==c[y]&&R;if(C&&i&&t.manuallyAnimateOnMount&&(C=!1),w.protectedKeys={...h},!w.isActive&&S===null||!b&&!w.prevProp||Ny(b)||typeof b=="boolean")continue;const x=kZ(w.prevProp,b);let T=x||y===l&&w.isActive&&!C&&R||v>p&&R,A=!1;const I=Array.isArray(b)?b:[b];let P=I.reduce(r(y),{});S===!1&&(P={});const{prevResolvedValues:k={}}=w,D={...k,...P},V=F=>{T=!0,f.has(F)&&(A=!0,f.delete(F)),w.needsAnimating[F]=!0;const $=t.getValue(F);$&&($.liveStyle=!1)};for(const F in D){const $=P[F],Q=k[F];if(h.hasOwnProperty(F))continue;let te=!1;_w($)&&_w(Q)?te=!zL($,Q):te=$!==Q,te?$!=null?V(F):f.add(F):$!==void 0&&f.has(F)?V(F):w.protectedKeys[F]=!0}w.prevProp=b,w.prevResolvedValues=P,w.isActive&&(h={...h,...P}),i&&t.blockInitialAnimation&&(T=!1),T&&(!(C&&x)||A)&&d.push(...I.map(F=>({animation:F,options:{type:y}})))}if(f.size){const v={};f.forEach(y=>{const w=t.getBaseTarget(y),b=t.getValue(y);b&&(b.liveStyle=!0),v[y]=w??null}),d.push({animation:v})}let g=!!d.length;return i&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(g=!1),i=!1,g?e(d):Promise.resolve()}function o(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(f=>{var h;return(h=f.animationState)===null||h===void 0?void 0:h.setActive(l,c)}),n[l].isActive=c;const d=a(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=iC(),i=!0}}}function kZ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!zL(e,t):!1}function Oa(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function iC(){return{animate:Oa(!0),whileInView:Oa(),whileHover:Oa(),whileTap:Oa(),whileDrag:Oa(),whileFocus:Oa(),exit:Oa()}}class Ia{constructor(e){this.isMounted=!1,this.node=e}update(){}}class MZ extends Ia{constructor(e){super(e),e.animationState||(e.animationState=DZ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ny(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let OZ=0;class VZ extends Ia{constructor(){super(...arguments),this.id=OZ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const LZ={animation:{Feature:MZ},exit:{Feature:VZ}};function Pd(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function wf(t){return{point:{x:t.pageX,y:t.pageY}}}const UZ=t=>e=>cE(e)&&t(e,wf(e));function Vh(t,e,n,i){return Pd(t,e,UZ(n),i)}const rC=(t,e)=>Math.abs(t-e);function jZ(t,e){const n=rC(t.x,e.x),i=rC(t.y,e.y);return Math.sqrt(n**2+i**2)}class R5{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=v0(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,h=jZ(d.offset,{x:0,y:0})>=3;if(!f&&!h)return;const{point:p}=d,{timestamp:g}=Yt;this.history.push({...p,timestamp:g});const{onStart:v,onMove:y}=this.handlers;f||(v&&v(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=y0(f,this.transformPagePoint),Ze.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=v0(d.type==="pointercancel"?this.lastMoveEventInfo:y0(f,this.transformPagePoint),this.history);this.startEvent&&h&&h(d,v),p&&p(d,v)},!cE(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=wf(e),o=y0(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=Yt;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,v0(o,this.history)),this.removeListeners=_f(Vh(this.contextWindow,"pointermove",this.handlePointerMove),Vh(this.contextWindow,"pointerup",this.handlePointerUp),Vh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ma(this.updatePoint)}}function y0(t,e){return e?{point:e(t.point)}:t}function sC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function v0({point:t},e){return{point:t,delta:sC(t,C5(e)),offset:sC(t,zZ(e)),velocity:BZ(e,.1)}}function zZ(t){return t[0]}function C5(t){return t[t.length-1]}function BZ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=C5(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Lr(e)));)n--;if(!i)return{x:0,y:0};const s=Ur(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const a={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const P5=1e-4,FZ=1-P5,qZ=1+P5,N5=.01,HZ=0-N5,$Z=0+N5;function oi(t){return t.max-t.min}function GZ(t,e,n){return Math.abs(t-e)<=n}function aC(t,e,n,i=.5){t.origin=i,t.originPoint=ct(e.min,e.max,t.origin),t.scale=oi(n)/oi(e),t.translate=ct(n.min,n.max,t.origin)-t.originPoint,(t.scale>=FZ&&t.scale<=qZ||isNaN(t.scale))&&(t.scale=1),(t.translate>=HZ&&t.translate<=$Z||isNaN(t.translate))&&(t.translate=0)}function Lh(t,e,n,i){aC(t.x,e.x,n.x,i?i.originX:void 0),aC(t.y,e.y,n.y,i?i.originY:void 0)}function oC(t,e,n){t.min=n.min+e.min,t.max=t.min+oi(e)}function KZ(t,e,n){oC(t.x,e.x,n.x),oC(t.y,e.y,n.y)}function lC(t,e,n){t.min=e.min-n.min,t.max=t.min+oi(e)}function Uh(t,e,n){lC(t.x,e.x,n.x),lC(t.y,e.y,n.y)}function WZ(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?ct(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?ct(n,t,i.max):Math.min(t,n)),t}function cC(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function QZ(t,{top:e,left:n,bottom:i,right:r}){return{x:cC(t.x,n,r),y:cC(t.y,e,i)}}function uC(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function YZ(t,e){return{x:uC(t.x,e.x),y:uC(t.y,e.y)}}function XZ(t,e){let n=.5;const i=oi(t),r=oi(e);return r>i?n=Cc(e.min,e.max-i,t.min):i>r&&(n=Cc(t.min,t.max-r,e.min)),Yr(0,1,n)}function JZ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Pw=.35;function ZZ(t=Pw){return t===!1?t=0:t===!0&&(t=Pw),{x:hC(t,"left","right"),y:hC(t,"top","bottom")}}function hC(t,e,n){return{min:dC(t,e),max:dC(t,n)}}function dC(t,e){return typeof t=="number"?t:t[e]||0}const fC=()=>({translate:0,scale:1,origin:0,originPoint:0}),Dl=()=>({x:fC(),y:fC()}),mC=()=>({min:0,max:0}),_t=()=>({x:mC(),y:mC()});function ui(t){return[t("x"),t("y")]}function D5({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function eee({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function tee(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function _0(t){return t===void 0||t===1}function Nw({scale:t,scaleX:e,scaleY:n}){return!_0(t)||!_0(e)||!_0(n)}function qa(t){return Nw(t)||k5(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function k5(t){return pC(t.x)||pC(t.y)}function pC(t){return t&&t!=="0%"}function yg(t,e,n){const i=t-n,r=e*i;return n+r}function gC(t,e,n,i,r){return r!==void 0&&(t=yg(t,r,i)),yg(t,n,i)+e}function Dw(t,e=0,n=1,i,r){t.min=gC(t.min,e,n,i,r),t.max=gC(t.max,e,n,i,r)}function M5(t,{x:e,y:n}){Dw(t.x,e.translate,e.scale,e.originPoint),Dw(t.y,n.translate,n.scale,n.originPoint)}const yC=.999999999999,vC=1.0000000000001;function nee(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let s,a;for(let o=0;o<r;o++){s=n[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ml(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,M5(t,a)),i&&qa(s.latestValues)&&Ml(t,s.latestValues))}e.x<vC&&e.x>yC&&(e.x=1),e.y<vC&&e.y>yC&&(e.y=1)}function kl(t,e){t.min=t.min+e,t.max=t.max+e}function _C(t,e,n,i,r=.5){const s=ct(t.min,t.max,r);Dw(t,e,n,s,i)}function Ml(t,e){_C(t.x,e.x,e.scaleX,e.scale,e.originX),_C(t.y,e.y,e.scaleY,e.scale,e.originY)}function O5(t,e){return D5(tee(t.getBoundingClientRect(),e))}function iee(t,e,n){const i=O5(t,n),{scroll:r}=e;return r&&(kl(i.x,r.offset.x),kl(i.y,r.offset.y)),i}const V5=({current:t})=>t?t.ownerDocument.defaultView:null,ree=new WeakMap;class see{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_t(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(wf(u).point)},s=(u,d)=>{const{drag:f,dragPropagation:h,onDragStart:p}=this.getProps();if(f&&!h&&(this.openDragLock&&this.openDragLock(),this.openDragLock=XX(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ui(v=>{let y=this.getAxisMotionValue(v).get()||0;if(cr.test(y)){const{projection:w}=this.visualElement;if(w&&w.layout){const b=w.layout.layoutBox[v];b&&(y=oi(b)*(parseFloat(y)/100))}}this.originPoint[v]=y}),p&&Ze.postRender(()=>p(u,d)),Tw(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},a=(u,d)=>{const{dragPropagation:f,dragDirectionLock:h,onDirectionLock:p,onDrag:g}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:v}=d;if(h&&this.currentDirection===null){this.currentDirection=aee(v),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",d.point,v),this.updateAxis("y",d.point,v),this.visualElement.render(),g&&g(u,d)},o=(u,d)=>this.stop(u,d),l=()=>ui(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new R5(e,{onSessionStart:r,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:V5(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Ze.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!gm(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=WZ(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Pl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=QZ(r.layoutBox,n):this.constraints=!1,this.elastic=ZZ(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ui(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=JZ(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Pl(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=iee(i,r.root,this.visualElement.getTransformPagePoint());let a=YZ(r.layout.layoutBox,s);if(n){const o=n(eee(a));this.hasMutatedConstraints=!!o,o&&(a=D5(o))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=ui(u=>{if(!gm(u,n,this.currentDirection))return;let d=l&&l[u]||{};a&&(d={min:0,max:0});const f=r?200:1e6,h=r?40:1e7,p={type:"inertia",velocity:i?e[u]:0,bounceStiffness:f,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,p)});return Promise.all(c).then(o)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return Tw(this.visualElement,e),i.start(bE(e,i,0,n,this.visualElement,!1))}stopAnimation(){ui(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ui(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){ui(n=>{const{drag:i}=this.getProps();if(!gm(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:o}=r.layout.layoutBox[n];s.set(e[n]-ct(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Pl(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};ui(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();r[a]=XZ({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),ui(a=>{if(!gm(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(ct(l,c,r[a]))})}addListeners(){if(!this.visualElement.current)return;ree.set(this.visualElement,this);const e=this.visualElement.current,n=Vh(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Pl(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Ze.read(i);const a=Pd(window,"resize",()=>this.scalePositionWithinConstraints()),o=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(ui(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:a=Pw,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function gm(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function aee(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class oee extends Ia{constructor(e){super(e),this.removeGroupControls=ii,this.removeListeners=ii,this.controls=new see(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ii}unmount(){this.removeGroupControls(),this.removeListeners()}}const wC=t=>(e,n)=>{t&&Ze.postRender(()=>t(e,n))};class lee extends Ia{constructor(){super(...arguments),this.removePointerDownListener=ii}onPointerDown(e){this.session=new R5(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:V5(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:wC(e),onStart:wC(n),onMove:i,onEnd:(s,a)=>{delete this.session,r&&Ze.postRender(()=>r(s,a))}}}mount(){this.removePointerDownListener=Vh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const tp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function bC(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Uu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(se.test(t))t=parseFloat(t);else return t;const n=bC(t,e.target.x),i=bC(t,e.target.y);return`${n}% ${i}%`}},cee={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=pa.parse(t);if(r.length>5)return i;const s=pa.createTransformer(t),a=typeof r[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;r[0+a]/=o,r[1+a]/=l;const c=ct(o,l,.5);return typeof r[2+a]=="number"&&(r[2+a]/=c),typeof r[3+a]=="number"&&(r[3+a]/=c),s(r)}};class uee extends M.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;PX(hee),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),tp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,a=i.projection;return a&&(a.isPresent=s,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Ze.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Yx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function L5(t){const[e,n]=_L(),i=M.useContext(Fx);return _.jsx(uee,{...t,layoutGroup:i,switchLayoutGroup:M.useContext(AL),isPresent:e,safeToRemove:n})}const hee={borderRadius:{...Uu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Uu,borderTopRightRadius:Uu,borderBottomLeftRadius:Uu,borderBottomRightRadius:Uu,boxShadow:cee};function dee(t,e,n){const i=fn(t)?t:Rd(t);return i.start(bE("",i,e,n)),i.animation}function fee(t){return t instanceof SVGElement&&t.tagName!=="svg"}const mee=(t,e)=>t.depth-e.depth;class pee{constructor(){this.children=[],this.isDirty=!1}add(e){uE(this.children,e),this.isDirty=!0}remove(e){hE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(mee),this.isDirty=!1,this.children.forEach(e)}}function gee(t,e){const n=ur.now(),i=({timestamp:r})=>{const s=r-n;s>=e&&(ma(i),t(s-e))};return Ze.read(i,!0),()=>ma(i)}const U5=["TopLeft","TopRight","BottomLeft","BottomRight"],yee=U5.length,TC=t=>typeof t=="string"?parseFloat(t):t,xC=t=>typeof t=="number"||se.test(t);function vee(t,e,n,i,r,s){r?(t.opacity=ct(0,n.opacity!==void 0?n.opacity:1,_ee(i)),t.opacityExit=ct(e.opacity!==void 0?e.opacity:1,0,wee(i))):s&&(t.opacity=ct(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<yee;a++){const o=`border${U5[a]}Radius`;let l=EC(e,o),c=EC(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||xC(l)===xC(c)?(t[o]=Math.max(ct(TC(l),TC(c),i),0),(cr.test(c)||cr.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||n.rotate)&&(t.rotate=ct(e.rotate||0,n.rotate||0,i))}function EC(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const _ee=j5(0,.5,i5),wee=j5(.5,.95,ii);function j5(t,e,n){return i=>i<t?0:i>e?1:n(Cc(t,e,i))}function SC(t,e){t.min=e.min,t.max=e.max}function ci(t,e){SC(t.x,e.x),SC(t.y,e.y)}function IC(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function AC(t,e,n,i,r){return t-=e,t=yg(t,1/n,i),r!==void 0&&(t=yg(t,1/r,i)),t}function bee(t,e=0,n=1,i=.5,r,s=t,a=t){if(cr.test(e)&&(e=parseFloat(e),e=ct(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=ct(s.min,s.max,i);t===s&&(o-=e),t.min=AC(t.min,e,n,o,r),t.max=AC(t.max,e,n,o,r)}function RC(t,e,[n,i,r],s,a){bee(t,e[n],e[i],e[r],e.scale,s,a)}const Tee=["x","scaleX","originX"],xee=["y","scaleY","originY"];function CC(t,e,n,i){RC(t.x,e,Tee,n?n.x:void 0,i?i.x:void 0),RC(t.y,e,xee,n?n.y:void 0,i?i.y:void 0)}function PC(t){return t.translate===0&&t.scale===1}function z5(t){return PC(t.x)&&PC(t.y)}function NC(t,e){return t.min===e.min&&t.max===e.max}function Eee(t,e){return NC(t.x,e.x)&&NC(t.y,e.y)}function DC(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function B5(t,e){return DC(t.x,e.x)&&DC(t.y,e.y)}function kC(t){return oi(t.x)/oi(t.y)}function MC(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class See{constructor(){this.members=[]}add(e){uE(this.members,e),e.scheduleRender()}remove(e){if(hE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Iee(t,e,n){let i="";const r=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((r||s||a)&&(i=`translate3d(${r}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:f,skewX:h,skewY:p}=n;c&&(i=`perspective(${c}px) ${i}`),u&&(i+=`rotate(${u}deg) `),d&&(i+=`rotateX(${d}deg) `),f&&(i+=`rotateY(${f}deg) `),h&&(i+=`skewX(${h}deg) `),p&&(i+=`skewY(${p}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(i+=`scale(${o}, ${l})`),i||"none"}const Ha={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},th=typeof window<"u"&&window.MotionDebug!==void 0,w0=["","X","Y","Z"],Aee={visibility:"hidden"},OC=1e3;let Ree=0;function b0(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function F5(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=YL(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ze,!(r||s))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&F5(i)}function q5({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},o=e==null?void 0:e()){this.id=Ree++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,th&&(Ha.totalNodes=Ha.resolvedTargetDeltas=Ha.recalculatedProjection=0),this.nodes.forEach(Nee),this.nodes.forEach(Vee),this.nodes.forEach(Lee),this.nodes.forEach(Dee),th&&window.MotionDebug.record(Ha)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new pee)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new dE),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=fee(a),this.instance=a;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=gee(f,250),tp.hasAnimatedSinceResize&&(tp.hasAnimatedSinceResize=!1,this.nodes.forEach(LC))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||Fee,{onLayoutAnimationStart:v,onLayoutAnimationComplete:y}=u.getProps(),w=!this.targetLayout||!B5(this.targetLayout,p)||h,b=!f&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||f&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,b);const R={...aE(g,"layout"),onPlay:v,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else f||LC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ma(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Uee),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&F5(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(VC);return}this.isUpdating||this.nodes.forEach(Mee),this.isUpdating=!1,this.nodes.forEach(Oee),this.nodes.forEach(Cee),this.nodes.forEach(Pee),this.clearAllSnapshots();const o=ur.now();Yt.delta=Yr(0,1e3/60,o-Yt.timestamp),Yt.timestamp=o,Yt.isProcessing=!0,h0.update.process(Yt),h0.preRender.process(Yt),h0.render.process(Yt),Yt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Yx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(kee),this.sharedNodes.forEach(jee)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ze.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ze.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=_t(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!z5(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;a&&(o||qa(this.latestValues)||u)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),qee(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return _t();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(Hee))){const{scroll:u}=this.root;u&&(kl(l.x,u.offset.x),kl(l.y,u.offset.y))}return l}removeElementScroll(a){var o;const l=_t();if(ci(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&ci(l,a),kl(l.x,d.offset.x),kl(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=_t();ci(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Ml(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),qa(u.latestValues)&&Ml(l,u.latestValues)}return qa(this.latestValues)&&Ml(l,this.latestValues),l}removeTransform(a){const o=_t();ci(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!qa(c.latestValues))continue;Nw(c.latestValues)&&c.updateSnapshot();const u=_t(),d=c.measurePageBox();ci(u,d),CC(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return qa(this.latestValues)&&CC(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Yt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Yt.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_t(),this.relativeTargetOrigin=_t(),Uh(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),ci(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=_t(),this.targetWithTransforms=_t()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),KZ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ci(this.target,this.layout.layoutBox),M5(this.target,this.targetDelta)):ci(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_t(),this.relativeTargetOrigin=_t(),Uh(this.relativeTargetOrigin,this.target,h.target),ci(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}th&&Ha.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Nw(this.parent.latestValues)||k5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Yt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;ci(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;nee(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=_t());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(IC(this.prevProjectionDelta.x,this.projectionDelta.x),IC(this.prevProjectionDelta.y,this.projectionDelta.y)),Lh(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!MC(this.projectionDelta.x,this.prevProjectionDelta.x)||!MC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),th&&Ha.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Dl(),this.projectionDelta=Dl(),this.projectionDeltaWithTransform=Dl()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=Dl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=_t(),h=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=h!==p,v=this.getStack(),y=!v||v.members.length<=1,w=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(Bee));this.animationProgress=0;let b;this.mixTargetDelta=R=>{const S=R/1e3;UC(d.x,a.x,S),UC(d.y,a.y,S),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Uh(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),zee(this.relativeTarget,this.relativeTargetOrigin,f,S),b&&Eee(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=_t()),ci(b,this.relativeTarget)),g&&(this.animationValues=u,vee(u,c,this.latestValues,S,w,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ma(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ze.update(()=>{tp.hasAnimatedSinceResize=!0,this.currentAnimation=dee(0,OC,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(OC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:u}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&H5(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||_t();const d=oi(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const f=oi(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}ci(o,l),Ml(o,u),Lh(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new See),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&b0("z",a,c,this.animationValues);for(let u=0;u<w0.length;u++)b0(`rotate${w0[u]}`,a,c,this.animationValues),b0(`skew${w0[u]}`,a,c,this.animationValues);a.render();for(const u in c)a.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Aee;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Zm(a==null?void 0:a.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Zm(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!qa(this.latestValues)&&(g.transform=u?u({},""):"none",this.hasProjected=!1),g}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=Iee(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:h,y:p}=this.projectionDelta;c.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in dg){if(f[g]===void 0)continue;const{correct:v,applyTo:y}=dg[g],w=c.transform==="none"?f[g]:v(f[g],d);if(y){const b=y.length;for(let R=0;R<b;R++)c[y[R]]=w}else c[g]=w}return this.options.layoutId&&(c.pointerEvents=d===this?Zm(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(VC),this.root.sharedNodes.clear()}}}function Cee(t){t.updateLayout()}function Pee(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:s}=t.options,a=n.source!==t.layout.source;s==="size"?ui(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],h=oi(f);f.min=i[d].min,f.max=f.min+h}):H5(s,n.layoutBox,i)&&ui(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],h=oi(i[d]);f.max=f.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+h)});const o=Dl();Lh(o,i,n.layoutBox);const l=Dl();a?Lh(l,t.applyTransform(r,!0),n.measuredBox):Lh(l,i,n.layoutBox);const c=!z5(o);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const p=_t();Uh(p,n.layoutBox,f.layoutBox);const g=_t();Uh(g,i,h.layoutBox),B5(p,g)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=p,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function Nee(t){th&&Ha.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Dee(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function kee(t){t.clearSnapshot()}function VC(t){t.clearMeasurements()}function Mee(t){t.isLayoutDirty=!1}function Oee(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function LC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Vee(t){t.resolveTargetDelta()}function Lee(t){t.calcProjection()}function Uee(t){t.resetSkewAndRotation()}function jee(t){t.removeLeadSnapshot()}function UC(t,e,n){t.translate=ct(e.translate,0,n),t.scale=ct(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function jC(t,e,n,i){t.min=ct(e.min,n.min,i),t.max=ct(e.max,n.max,i)}function zee(t,e,n,i){jC(t.x,e.x,n.x,i),jC(t.y,e.y,n.y,i)}function Bee(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Fee={duration:.45,ease:[.4,0,.1,1]},zC=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),BC=zC("applewebkit/")&&!zC("chrome/")?Math.round:ii;function FC(t){t.min=BC(t.min),t.max=BC(t.max)}function qee(t){FC(t.x),FC(t.y)}function H5(t,e,n){return t==="position"||t==="preserve-aspect"&&!GZ(kC(e),kC(n),.2)}function Hee(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const $ee=q5({attachResizeListener:(t,e)=>Pd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),T0={current:void 0},$5=q5({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!T0.current){const t=new $ee({});t.mount(window),t.setOptions({layoutScroll:!0}),T0.current=t}return T0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Gee={pan:{Feature:lee},drag:{Feature:oee,ProjectionNode:$5,MeasureLayout:L5}};function qC(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,s=i[r];s&&Ze.postRender(()=>s(e,wf(e)))}class Kee extends Ia{mount(){const{current:e}=this.node;e&&(this.unmount=GX(e,n=>(qC(this.node,n,"Start"),i=>qC(this.node,i,"End"))))}unmount(){}}class Wee extends Ia{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=_f(Pd(this.node.current,"focus",()=>this.onFocus()),Pd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function HC(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),s=i[r];s&&Ze.postRender(()=>s(e,wf(e)))}class Qee extends Ia{mount(){const{current:e}=this.node;e&&(this.unmount=YX(e,n=>(HC(this.node,n,"Start"),(i,{success:r})=>HC(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const kw=new WeakMap,x0=new WeakMap,Yee=t=>{const e=kw.get(t.target);e&&e(t)},Xee=t=>{t.forEach(Yee)};function Jee({root:t,...e}){const n=t||document;x0.has(n)||x0.set(n,{});const i=x0.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(Xee,{root:t,...e})),i[r]}function Zee(t,e,n){const i=Jee(e);return kw.set(t,n),i.observe(t),()=>{kw.delete(t),i.unobserve(t)}}const ete={some:0,all:1};class tte extends Ia{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:ete[r]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return Zee(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(nte(e,n))&&this.startObserver()}unmount(){}}function nte({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const ite={inView:{Feature:tte},tap:{Feature:Qee},focus:{Feature:Wee},hover:{Feature:Kee}},rte={layout:{ProjectionNode:$5,MeasureLayout:L5}},Mw={current:null},G5={current:!1};function ste(){if(G5.current=!0,!!$x)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Mw.current=t.matches;t.addListener(e),e()}else Mw.current=!1}const ate=[...y5,ln,pa],ote=t=>ate.find(g5(t)),$C=new WeakMap;function lte(t,e,n){for(const i in e){const r=e[i],s=n[i];if(fn(r))t.addValue(i,r);else if(fn(s))t.addValue(i,Rd(r,{owner:t}));else if(s!==r)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(i);t.addValue(i,Rd(a!==void 0?a:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const GC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class cte{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=vE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=ur.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Ze.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=a;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=Dy(n),this.isVariantNode=SL(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in f){const p=f[h];l[h]!==void 0&&fn(p)&&p.set(l[h],!1)}}mount(e){this.current=e,$C.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),G5.current||ste(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Mw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){$C.delete(this.current),this.projection&&this.projection.unmount(),ma(this.notifyUpdate),ma(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=qo.has(e),r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ze.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Pc){const n=Pc[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):_t()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<GC.length;i++){const r=GC[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,a=e[s];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=lte(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Rd(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(m5(r)||s5(r))?r=parseFloat(r):!ote(r)&&pa.test(n)&&(r=h5(e,n)),this.setBaseTarget(e,fn(r)?r.get():r)),fn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const a=Jx(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(r=a[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!fn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new dE),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class K5 extends cte{constructor(){super(...arguments),this.KeyframeResolver=v5}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function ute(t){return window.getComputedStyle(t)}class hte extends K5{constructor(){super(...arguments),this.type="html",this.renderInstance=ML}readValueFromInstance(e,n){if(qo.has(n)){const i=yE(n);return i&&i.default||0}else{const i=ute(e),r=(NL(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return O5(e,n)}build(e,n,i){tE(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return sE(e,n,i)}}class dte extends K5{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=_t}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(qo.has(n)){const i=yE(n);return i&&i.default||0}return n=OL.has(n)?n:Qx(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return UL(e,n,i)}build(e,n,i){nE(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){VL(e,n,i,r)}mount(e){this.isSVGTag=rE(e.tagName),super.mount(e)}}const fte=(t,e)=>Xx(t)?new dte(e):new hte(e,{allowProjection:t!==M.Fragment}),mte=jX({...LZ,...ite,...Gee,...rte},fte),Di=eX(mte);var W5={exports:{}};/*!
 * matter-js 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(t,e){(function(i,r){t.exports=r()})(Jy,function(){return function(n){var i={};function r(s){if(i[s])return i[s].exports;var a=i[s]={i:s,l:!1,exports:{}};return n[s].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=n,r.c=i,r.d=function(s,a,o){r.o(s,a)||Object.defineProperty(s,a,{enumerable:!0,get:o})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,a){if(a&1&&(s=r(s)),a&8||a&4&&typeof s=="object"&&s&&s.__esModule)return s;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:s}),a&2&&typeof s!="string")for(var l in s)r.d(o,l,(function(c){return s[c]}).bind(null,l));return o},r.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(a,"a",a),a},r.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},r.p="",r(r.s=20)}([function(n,i){var r={};n.exports=r,function(){r._baseDelta=1e3/60,r._nextId=0,r._seed=0,r._nowStartTime=+new Date,r._warnedOnce={},r._decomp=null,r.extend=function(a,o){var l,c;typeof o=="boolean"?(l=2,c=o):(l=1,c=!0);for(var u=l;u<arguments.length;u++){var d=arguments[u];if(d)for(var f in d)c&&d[f]&&d[f].constructor===Object&&(!a[f]||a[f].constructor===Object)?(a[f]=a[f]||{},r.extend(a[f],c,d[f])):a[f]=d[f]}return a},r.clone=function(a,o){return r.extend({},o,a)},r.keys=function(a){if(Object.keys)return Object.keys(a);var o=[];for(var l in a)o.push(l);return o},r.values=function(a){var o=[];if(Object.keys){for(var l=Object.keys(a),c=0;c<l.length;c++)o.push(a[l[c]]);return o}for(var u in a)o.push(a[u]);return o},r.get=function(a,o,l,c){o=o.split(".").slice(l,c);for(var u=0;u<o.length;u+=1)a=a[o[u]];return a},r.set=function(a,o,l,c,u){var d=o.split(".").slice(c,u);return r.get(a,o,0,-1)[d[d.length-1]]=l,l},r.shuffle=function(a){for(var o=a.length-1;o>0;o--){var l=Math.floor(r.random()*(o+1)),c=a[o];a[o]=a[l],a[l]=c}return a},r.choose=function(a){return a[Math.floor(r.random()*a.length)]},r.isElement=function(a){return typeof HTMLElement<"u"?a instanceof HTMLElement:!!(a&&a.nodeType&&a.nodeName)},r.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"},r.isFunction=function(a){return typeof a=="function"},r.isPlainObject=function(a){return typeof a=="object"&&a.constructor===Object},r.isString=function(a){return toString.call(a)==="[object String]"},r.clamp=function(a,o,l){return a<o?o:a>l?l:a},r.sign=function(a){return a<0?-1:1},r.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-r._nowStartTime},r.random=function(a,o){return a=typeof a<"u"?a:0,o=typeof o<"u"?o:1,a+s()*(o-a)};var s=function(){return r._seed=(r._seed*9301+49297)%233280,r._seed/233280};r.colorToNumber=function(a){return a=a.replace("#",""),a.length==3&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)),parseInt(a,16)},r.logLevel=1,r.log=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.info=function(){console&&r.logLevel>0&&r.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warn=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warnOnce=function(){var a=Array.prototype.slice.call(arguments).join(" ");r._warnedOnce[a]||(r.warn(a),r._warnedOnce[a]=!0)},r.deprecated=function(a,o,l){a[o]=r.chain(function(){r.warnOnce(" deprecated ",l)},a[o])},r.nextId=function(){return r._nextId++},r.indexOf=function(a,o){if(a.indexOf)return a.indexOf(o);for(var l=0;l<a.length;l++)if(a[l]===o)return l;return-1},r.map=function(a,o){if(a.map)return a.map(o);for(var l=[],c=0;c<a.length;c+=1)l.push(o(a[c]));return l},r.topologicalSort=function(a){var o=[],l=[],c=[];for(var u in a)!l[u]&&!c[u]&&r._topologicalSort(u,l,c,a,o);return o},r._topologicalSort=function(a,o,l,c,u){var d=c[a]||[];l[a]=!0;for(var f=0;f<d.length;f+=1){var h=d[f];l[h]||o[h]||r._topologicalSort(h,o,l,c,u)}l[a]=!1,o[a]=!0,u.push(a)},r.chain=function(){for(var a=[],o=0;o<arguments.length;o+=1){var l=arguments[o];l._chained?a.push.apply(a,l._chained):a.push(l)}var c=function(){for(var u,d=new Array(arguments.length),f=0,h=arguments.length;f<h;f++)d[f]=arguments[f];for(f=0;f<a.length;f+=1){var p=a[f].apply(u,d);typeof p<"u"&&(u=p)}return u};return c._chained=a,c},r.chainPathBefore=function(a,o,l){return r.set(a,o,r.chain(l,r.get(a,o)))},r.chainPathAfter=function(a,o,l){return r.set(a,o,r.chain(r.get(a,o),l))},r.setDecomp=function(a){r._decomp=a},r.getDecomp=function(){var a=r._decomp;try{!a&&typeof window<"u"&&(a=window.decomp),!a&&typeof Jy<"u"&&(a=Jy.decomp)}catch{a=null}return a}}()},function(n,i){var r={};n.exports=r,function(){r.create=function(s){var a={min:{x:0,y:0},max:{x:0,y:0}};return s&&r.update(a,s),a},r.update=function(s,a,o){s.min.x=1/0,s.max.x=-1/0,s.min.y=1/0,s.max.y=-1/0;for(var l=0;l<a.length;l++){var c=a[l];c.x>s.max.x&&(s.max.x=c.x),c.x<s.min.x&&(s.min.x=c.x),c.y>s.max.y&&(s.max.y=c.y),c.y<s.min.y&&(s.min.y=c.y)}o&&(o.x>0?s.max.x+=o.x:s.min.x+=o.x,o.y>0?s.max.y+=o.y:s.min.y+=o.y)},r.contains=function(s,a){return a.x>=s.min.x&&a.x<=s.max.x&&a.y>=s.min.y&&a.y<=s.max.y},r.overlaps=function(s,a){return s.min.x<=a.max.x&&s.max.x>=a.min.x&&s.max.y>=a.min.y&&s.min.y<=a.max.y},r.translate=function(s,a){s.min.x+=a.x,s.max.x+=a.x,s.min.y+=a.y,s.max.y+=a.y},r.shift=function(s,a){var o=s.max.x-s.min.x,l=s.max.y-s.min.y;s.min.x=a.x,s.max.x=a.x+o,s.min.y=a.y,s.max.y=a.y+l}}()},function(n,i){var r={};n.exports=r,function(){r.create=function(s,a){return{x:s||0,y:a||0}},r.clone=function(s){return{x:s.x,y:s.y}},r.magnitude=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},r.magnitudeSquared=function(s){return s.x*s.x+s.y*s.y},r.rotate=function(s,a,o){var l=Math.cos(a),c=Math.sin(a);o||(o={});var u=s.x*l-s.y*c;return o.y=s.x*c+s.y*l,o.x=u,o},r.rotateAbout=function(s,a,o,l){var c=Math.cos(a),u=Math.sin(a);l||(l={});var d=o.x+((s.x-o.x)*c-(s.y-o.y)*u);return l.y=o.y+((s.x-o.x)*u+(s.y-o.y)*c),l.x=d,l},r.normalise=function(s){var a=r.magnitude(s);return a===0?{x:0,y:0}:{x:s.x/a,y:s.y/a}},r.dot=function(s,a){return s.x*a.x+s.y*a.y},r.cross=function(s,a){return s.x*a.y-s.y*a.x},r.cross3=function(s,a,o){return(a.x-s.x)*(o.y-s.y)-(a.y-s.y)*(o.x-s.x)},r.add=function(s,a,o){return o||(o={}),o.x=s.x+a.x,o.y=s.y+a.y,o},r.sub=function(s,a,o){return o||(o={}),o.x=s.x-a.x,o.y=s.y-a.y,o},r.mult=function(s,a){return{x:s.x*a,y:s.y*a}},r.div=function(s,a){return{x:s.x/a,y:s.y/a}},r.perp=function(s,a){return a=a===!0?-1:1,{x:a*-s.y,y:a*s.x}},r.neg=function(s){return{x:-s.x,y:-s.y}},r.angle=function(s,a){return Math.atan2(a.y-s.y,a.x-s.x)},r._temp=[r.create(),r.create(),r.create(),r.create(),r.create(),r.create()]}()},function(n,i,r){var s={};n.exports=s;var a=r(2),o=r(0);(function(){s.create=function(l,c){for(var u=[],d=0;d<l.length;d++){var f=l[d],h={x:f.x,y:f.y,index:d,body:c,isInternal:!1};u.push(h)}return u},s.fromPath=function(l,c){var u=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,d=[];return l.replace(u,function(f,h,p){d.push({x:parseFloat(h),y:parseFloat(p)})}),s.create(d,c)},s.centre=function(l){for(var c=s.area(l,!0),u={x:0,y:0},d,f,h,p=0;p<l.length;p++)h=(p+1)%l.length,d=a.cross(l[p],l[h]),f=a.mult(a.add(l[p],l[h]),d),u=a.add(u,f);return a.div(u,6*c)},s.mean=function(l){for(var c={x:0,y:0},u=0;u<l.length;u++)c.x+=l[u].x,c.y+=l[u].y;return a.div(c,l.length)},s.area=function(l,c){for(var u=0,d=l.length-1,f=0;f<l.length;f++)u+=(l[d].x-l[f].x)*(l[d].y+l[f].y),d=f;return c?u/2:Math.abs(u)/2},s.inertia=function(l,c){for(var u=0,d=0,f=l,h,p,g=0;g<f.length;g++)p=(g+1)%f.length,h=Math.abs(a.cross(f[p],f[g])),u+=h*(a.dot(f[p],f[p])+a.dot(f[p],f[g])+a.dot(f[g],f[g])),d+=h;return c/6*(u/d)},s.translate=function(l,c,u){u=typeof u<"u"?u:1;var d=l.length,f=c.x*u,h=c.y*u,p;for(p=0;p<d;p++)l[p].x+=f,l[p].y+=h;return l},s.rotate=function(l,c,u){if(c!==0){var d=Math.cos(c),f=Math.sin(c),h=u.x,p=u.y,g=l.length,v,y,w,b;for(b=0;b<g;b++)v=l[b],y=v.x-h,w=v.y-p,v.x=h+(y*d-w*f),v.y=p+(y*f+w*d);return l}},s.contains=function(l,c){for(var u=c.x,d=c.y,f=l.length,h=l[f-1],p,g=0;g<f;g++){if(p=l[g],(u-h.x)*(p.y-h.y)+(d-h.y)*(h.x-p.x)>0)return!1;h=p}return!0},s.scale=function(l,c,u,d){if(c===1&&u===1)return l;d=d||s.centre(l);for(var f,h,p=0;p<l.length;p++)f=l[p],h=a.sub(f,d),l[p].x=d.x+h.x*c,l[p].y=d.y+h.y*u;return l},s.chamfer=function(l,c,u,d,f){typeof c=="number"?c=[c]:c=c||[8],u=typeof u<"u"?u:-1,d=d||2,f=f||14;for(var h=[],p=0;p<l.length;p++){var g=l[p-1>=0?p-1:l.length-1],v=l[p],y=l[(p+1)%l.length],w=c[p<c.length?p:c.length-1];if(w===0){h.push(v);continue}var b=a.normalise({x:v.y-g.y,y:g.x-v.x}),R=a.normalise({x:y.y-v.y,y:v.x-y.x}),S=Math.sqrt(2*Math.pow(w,2)),C=a.mult(o.clone(b),w),x=a.normalise(a.mult(a.add(b,R),.5)),T=a.sub(v,a.mult(x,S)),A=u;u===-1&&(A=Math.pow(w,.32)*1.75),A=o.clamp(A,d,f),A%2===1&&(A+=1);for(var I=Math.acos(a.dot(b,R)),P=I/A,k=0;k<A;k++)h.push(a.add(a.rotate(C,P*k),T))}return h},s.clockwiseSort=function(l){var c=s.mean(l);return l.sort(function(u,d){return a.angle(c,u)-a.angle(c,d)}),l},s.isConvex=function(l){var c=0,u=l.length,d,f,h,p;if(u<3)return null;for(d=0;d<u;d++)if(f=(d+1)%u,h=(d+2)%u,p=(l[f].x-l[d].x)*(l[h].y-l[f].y),p-=(l[f].y-l[d].y)*(l[h].x-l[f].x),p<0?c|=1:p>0&&(c|=2),c===3)return!1;return c!==0?!0:null},s.hull=function(l){var c=[],u=[],d,f;for(l=l.slice(0),l.sort(function(h,p){var g=h.x-p.x;return g!==0?g:h.y-p.y}),f=0;f<l.length;f+=1){for(d=l[f];u.length>=2&&a.cross3(u[u.length-2],u[u.length-1],d)<=0;)u.pop();u.push(d)}for(f=l.length-1;f>=0;f-=1){for(d=l[f];c.length>=2&&a.cross3(c[c.length-2],c[c.length-1],d)<=0;)c.pop();c.push(d)}return c.pop(),u.pop(),c.concat(u)}})()},function(n,i,r){var s={};n.exports=s;var a=r(3),o=r(2),l=r(7),c=r(0),u=r(1),d=r(11);(function(){s._timeCorrection=!0,s._inertiaScale=4,s._nextCollidingGroupId=1,s._nextNonCollidingGroupId=-1,s._nextCategory=1,s._baseDelta=1e3/60,s.create=function(h){var p={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:a.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},g=c.extend(p,h);return f(g,h),g},s.nextGroup=function(h){return h?s._nextNonCollidingGroupId--:s._nextCollidingGroupId++},s.nextCategory=function(){return s._nextCategory=s._nextCategory<<1,s._nextCategory};var f=function(h,p){p=p||{},s.set(h,{bounds:h.bounds||u.create(h.vertices),positionPrev:h.positionPrev||o.clone(h.position),anglePrev:h.anglePrev||h.angle,vertices:h.vertices,parts:h.parts||[h],isStatic:h.isStatic,isSleeping:h.isSleeping,parent:h.parent||h}),a.rotate(h.vertices,h.angle,h.position),d.rotate(h.axes,h.angle),u.update(h.bounds,h.vertices,h.velocity),s.set(h,{axes:p.axes||h.axes,area:p.area||h.area,mass:p.mass||h.mass,inertia:p.inertia||h.inertia});var g=h.isStatic?"#14151f":c.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),v=h.isStatic?"#555":"#ccc",y=h.isStatic&&h.render.fillStyle===null?1:0;h.render.fillStyle=h.render.fillStyle||g,h.render.strokeStyle=h.render.strokeStyle||v,h.render.lineWidth=h.render.lineWidth||y,h.render.sprite.xOffset+=-(h.bounds.min.x-h.position.x)/(h.bounds.max.x-h.bounds.min.x),h.render.sprite.yOffset+=-(h.bounds.min.y-h.position.y)/(h.bounds.max.y-h.bounds.min.y)};s.set=function(h,p,g){var v;typeof p=="string"&&(v=p,p={},p[v]=g);for(v in p)if(Object.prototype.hasOwnProperty.call(p,v))switch(g=p[v],v){case"isStatic":s.setStatic(h,g);break;case"isSleeping":l.set(h,g);break;case"mass":s.setMass(h,g);break;case"density":s.setDensity(h,g);break;case"inertia":s.setInertia(h,g);break;case"vertices":s.setVertices(h,g);break;case"position":s.setPosition(h,g);break;case"angle":s.setAngle(h,g);break;case"velocity":s.setVelocity(h,g);break;case"angularVelocity":s.setAngularVelocity(h,g);break;case"speed":s.setSpeed(h,g);break;case"angularSpeed":s.setAngularSpeed(h,g);break;case"parts":s.setParts(h,g);break;case"centre":s.setCentre(h,g);break;default:h[v]=g}},s.setStatic=function(h,p){for(var g=0;g<h.parts.length;g++){var v=h.parts[g];p?(v.isStatic||(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia}),v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null),v.isStatic=p}},s.setMass=function(h,p){var g=h.inertia/(h.mass/6);h.inertia=g*(p/6),h.inverseInertia=1/h.inertia,h.mass=p,h.inverseMass=1/h.mass,h.density=h.mass/h.area},s.setDensity=function(h,p){s.setMass(h,p*h.area),h.density=p},s.setInertia=function(h,p){h.inertia=p,h.inverseInertia=1/h.inertia},s.setVertices=function(h,p){p[0].body===h?h.vertices=p:h.vertices=a.create(p,h),h.axes=d.fromVertices(h.vertices),h.area=a.area(h.vertices),s.setMass(h,h.density*h.area);var g=a.centre(h.vertices);a.translate(h.vertices,g,-1),s.setInertia(h,s._inertiaScale*a.inertia(h.vertices,h.mass)),a.translate(h.vertices,h.position),u.update(h.bounds,h.vertices,h.velocity)},s.setParts=function(h,p,g){var v;for(p=p.slice(0),h.parts.length=0,h.parts.push(h),h.parent=h,v=0;v<p.length;v++){var y=p[v];y!==h&&(y.parent=h,h.parts.push(y))}if(h.parts.length!==1){if(g=typeof g<"u"?g:!0,g){var w=[];for(v=0;v<p.length;v++)w=w.concat(p[v].vertices);a.clockwiseSort(w);var b=a.hull(w),R=a.centre(b);s.setVertices(h,b),a.translate(h.vertices,R)}var S=s._totalProperties(h);h.area=S.area,h.parent=h,h.position.x=S.centre.x,h.position.y=S.centre.y,h.positionPrev.x=S.centre.x,h.positionPrev.y=S.centre.y,s.setMass(h,S.mass),s.setInertia(h,S.inertia),s.setPosition(h,S.centre)}},s.setCentre=function(h,p,g){g?(h.positionPrev.x+=p.x,h.positionPrev.y+=p.y,h.position.x+=p.x,h.position.y+=p.y):(h.positionPrev.x=p.x-(h.position.x-h.positionPrev.x),h.positionPrev.y=p.y-(h.position.y-h.positionPrev.y),h.position.x=p.x,h.position.y=p.y)},s.setPosition=function(h,p,g){var v=o.sub(p,h.position);g?(h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.velocity.x=v.x,h.velocity.y=v.y,h.speed=o.magnitude(v)):(h.positionPrev.x+=v.x,h.positionPrev.y+=v.y);for(var y=0;y<h.parts.length;y++){var w=h.parts[y];w.position.x+=v.x,w.position.y+=v.y,a.translate(w.vertices,v),u.update(w.bounds,w.vertices,h.velocity)}},s.setAngle=function(h,p,g){var v=p-h.angle;g?(h.anglePrev=h.angle,h.angularVelocity=v,h.angularSpeed=Math.abs(v)):h.anglePrev+=v;for(var y=0;y<h.parts.length;y++){var w=h.parts[y];w.angle+=v,a.rotate(w.vertices,v,h.position),d.rotate(w.axes,v),u.update(w.bounds,w.vertices,h.velocity),y>0&&o.rotateAbout(w.position,v,h.position,w.position)}},s.setVelocity=function(h,p){var g=h.deltaTime/s._baseDelta;h.positionPrev.x=h.position.x-p.x*g,h.positionPrev.y=h.position.y-p.y*g,h.velocity.x=(h.position.x-h.positionPrev.x)/g,h.velocity.y=(h.position.y-h.positionPrev.y)/g,h.speed=o.magnitude(h.velocity)},s.getVelocity=function(h){var p=s._baseDelta/h.deltaTime;return{x:(h.position.x-h.positionPrev.x)*p,y:(h.position.y-h.positionPrev.y)*p}},s.getSpeed=function(h){return o.magnitude(s.getVelocity(h))},s.setSpeed=function(h,p){s.setVelocity(h,o.mult(o.normalise(s.getVelocity(h)),p))},s.setAngularVelocity=function(h,p){var g=h.deltaTime/s._baseDelta;h.anglePrev=h.angle-p*g,h.angularVelocity=(h.angle-h.anglePrev)/g,h.angularSpeed=Math.abs(h.angularVelocity)},s.getAngularVelocity=function(h){return(h.angle-h.anglePrev)*s._baseDelta/h.deltaTime},s.getAngularSpeed=function(h){return Math.abs(s.getAngularVelocity(h))},s.setAngularSpeed=function(h,p){s.setAngularVelocity(h,c.sign(s.getAngularVelocity(h))*p)},s.translate=function(h,p,g){s.setPosition(h,o.add(h.position,p),g)},s.rotate=function(h,p,g,v){if(!g)s.setAngle(h,h.angle+p,v);else{var y=Math.cos(p),w=Math.sin(p),b=h.position.x-g.x,R=h.position.y-g.y;s.setPosition(h,{x:g.x+(b*y-R*w),y:g.y+(b*w+R*y)},v),s.setAngle(h,h.angle+p,v)}},s.scale=function(h,p,g,v){var y=0,w=0;v=v||h.position;for(var b=0;b<h.parts.length;b++){var R=h.parts[b];a.scale(R.vertices,p,g,v),R.axes=d.fromVertices(R.vertices),R.area=a.area(R.vertices),s.setMass(R,h.density*R.area),a.translate(R.vertices,{x:-R.position.x,y:-R.position.y}),s.setInertia(R,s._inertiaScale*a.inertia(R.vertices,R.mass)),a.translate(R.vertices,{x:R.position.x,y:R.position.y}),b>0&&(y+=R.area,w+=R.inertia),R.position.x=v.x+(R.position.x-v.x)*p,R.position.y=v.y+(R.position.y-v.y)*g,u.update(R.bounds,R.vertices,h.velocity)}h.parts.length>1&&(h.area=y,h.isStatic||(s.setMass(h,h.density*y),s.setInertia(h,w))),h.circleRadius&&(p===g?h.circleRadius*=p:h.circleRadius=null)},s.update=function(h,p){p=(typeof p<"u"?p:1e3/60)*h.timeScale;var g=p*p,v=s._timeCorrection?p/(h.deltaTime||p):1,y=1-h.frictionAir*(p/c._baseDelta),w=(h.position.x-h.positionPrev.x)*v,b=(h.position.y-h.positionPrev.y)*v;h.velocity.x=w*y+h.force.x/h.mass*g,h.velocity.y=b*y+h.force.y/h.mass*g,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.position.x+=h.velocity.x,h.position.y+=h.velocity.y,h.deltaTime=p,h.angularVelocity=(h.angle-h.anglePrev)*y*v+h.torque/h.inertia*g,h.anglePrev=h.angle,h.angle+=h.angularVelocity;for(var R=0;R<h.parts.length;R++){var S=h.parts[R];a.translate(S.vertices,h.velocity),R>0&&(S.position.x+=h.velocity.x,S.position.y+=h.velocity.y),h.angularVelocity!==0&&(a.rotate(S.vertices,h.angularVelocity,h.position),d.rotate(S.axes,h.angularVelocity),R>0&&o.rotateAbout(S.position,h.angularVelocity,h.position,S.position)),u.update(S.bounds,S.vertices,h.velocity)}},s.updateVelocities=function(h){var p=s._baseDelta/h.deltaTime,g=h.velocity;g.x=(h.position.x-h.positionPrev.x)*p,g.y=(h.position.y-h.positionPrev.y)*p,h.speed=Math.sqrt(g.x*g.x+g.y*g.y),h.angularVelocity=(h.angle-h.anglePrev)*p,h.angularSpeed=Math.abs(h.angularVelocity)},s.applyForce=function(h,p,g){var v={x:p.x-h.position.x,y:p.y-h.position.y};h.force.x+=g.x,h.force.y+=g.y,h.torque+=v.x*g.y-v.y*g.x},s._totalProperties=function(h){for(var p={mass:0,area:0,inertia:0,centre:{x:0,y:0}},g=h.parts.length===1?0:1;g<h.parts.length;g++){var v=h.parts[g],y=v.mass!==1/0?v.mass:1;p.mass+=y,p.area+=v.area,p.inertia+=v.inertia,p.centre=o.add(p.centre,o.mult(v.position,y))}return p.centre=o.div(p.centre,p.mass),p}})()},function(n,i,r){var s={};n.exports=s;var a=r(0);(function(){s.on=function(o,l,c){for(var u=l.split(" "),d,f=0;f<u.length;f++)d=u[f],o.events=o.events||{},o.events[d]=o.events[d]||[],o.events[d].push(c);return c},s.off=function(o,l,c){if(!l){o.events={};return}typeof l=="function"&&(c=l,l=a.keys(o.events).join(" "));for(var u=l.split(" "),d=0;d<u.length;d++){var f=o.events[u[d]],h=[];if(c&&f)for(var p=0;p<f.length;p++)f[p]!==c&&h.push(f[p]);o.events[u[d]]=h}},s.trigger=function(o,l,c){var u,d,f,h,p=o.events;if(p&&a.keys(p).length>0){c||(c={}),u=l.split(" ");for(var g=0;g<u.length;g++)if(d=u[g],f=p[d],f){h=a.clone(c,!1),h.name=d,h.source=o;for(var v=0;v<f.length;v++)f[v].apply(o,[h])}}}})()},function(n,i,r){var s={};n.exports=s;var a=r(5),o=r(0),l=r(1),c=r(4);(function(){s.create=function(u){return o.extend({id:o.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},u)},s.setModified=function(u,d,f,h){if(u.isModified=d,d&&u.cache&&(u.cache.allBodies=null,u.cache.allConstraints=null,u.cache.allComposites=null),f&&u.parent&&s.setModified(u.parent,d,f,h),h)for(var p=0;p<u.composites.length;p++){var g=u.composites[p];s.setModified(g,d,f,h)}},s.add=function(u,d){var f=[].concat(d);a.trigger(u,"beforeAdd",{object:d});for(var h=0;h<f.length;h++){var p=f[h];switch(p.type){case"body":if(p.parent!==p){o.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}s.addBody(u,p);break;case"constraint":s.addConstraint(u,p);break;case"composite":s.addComposite(u,p);break;case"mouseConstraint":s.addConstraint(u,p.constraint);break}}return a.trigger(u,"afterAdd",{object:d}),u},s.remove=function(u,d,f){var h=[].concat(d);a.trigger(u,"beforeRemove",{object:d});for(var p=0;p<h.length;p++){var g=h[p];switch(g.type){case"body":s.removeBody(u,g,f);break;case"constraint":s.removeConstraint(u,g,f);break;case"composite":s.removeComposite(u,g,f);break;case"mouseConstraint":s.removeConstraint(u,g.constraint);break}}return a.trigger(u,"afterRemove",{object:d}),u},s.addComposite=function(u,d){return u.composites.push(d),d.parent=u,s.setModified(u,!0,!0,!1),u},s.removeComposite=function(u,d,f){var h=o.indexOf(u.composites,d);if(h!==-1){var p=s.allBodies(d);s.removeCompositeAt(u,h);for(var g=0;g<p.length;g++)p[g].sleepCounter=0}if(f)for(var g=0;g<u.composites.length;g++)s.removeComposite(u.composites[g],d,!0);return u},s.removeCompositeAt=function(u,d){return u.composites.splice(d,1),s.setModified(u,!0,!0,!1),u},s.addBody=function(u,d){return u.bodies.push(d),s.setModified(u,!0,!0,!1),u},s.removeBody=function(u,d,f){var h=o.indexOf(u.bodies,d);if(h!==-1&&(s.removeBodyAt(u,h),d.sleepCounter=0),f)for(var p=0;p<u.composites.length;p++)s.removeBody(u.composites[p],d,!0);return u},s.removeBodyAt=function(u,d){return u.bodies.splice(d,1),s.setModified(u,!0,!0,!1),u},s.addConstraint=function(u,d){return u.constraints.push(d),s.setModified(u,!0,!0,!1),u},s.removeConstraint=function(u,d,f){var h=o.indexOf(u.constraints,d);if(h!==-1&&s.removeConstraintAt(u,h),f)for(var p=0;p<u.composites.length;p++)s.removeConstraint(u.composites[p],d,!0);return u},s.removeConstraintAt=function(u,d){return u.constraints.splice(d,1),s.setModified(u,!0,!0,!1),u},s.clear=function(u,d,f){if(f)for(var h=0;h<u.composites.length;h++)s.clear(u.composites[h],d,!0);return d?u.bodies=u.bodies.filter(function(p){return p.isStatic}):u.bodies.length=0,u.constraints.length=0,u.composites.length=0,s.setModified(u,!0,!0,!1),u},s.allBodies=function(u){if(u.cache&&u.cache.allBodies)return u.cache.allBodies;for(var d=[].concat(u.bodies),f=0;f<u.composites.length;f++)d=d.concat(s.allBodies(u.composites[f]));return u.cache&&(u.cache.allBodies=d),d},s.allConstraints=function(u){if(u.cache&&u.cache.allConstraints)return u.cache.allConstraints;for(var d=[].concat(u.constraints),f=0;f<u.composites.length;f++)d=d.concat(s.allConstraints(u.composites[f]));return u.cache&&(u.cache.allConstraints=d),d},s.allComposites=function(u){if(u.cache&&u.cache.allComposites)return u.cache.allComposites;for(var d=[].concat(u.composites),f=0;f<u.composites.length;f++)d=d.concat(s.allComposites(u.composites[f]));return u.cache&&(u.cache.allComposites=d),d},s.get=function(u,d,f){var h,p;switch(f){case"body":h=s.allBodies(u);break;case"constraint":h=s.allConstraints(u);break;case"composite":h=s.allComposites(u).concat(u);break}return h?(p=h.filter(function(g){return g.id.toString()===d.toString()}),p.length===0?null:p[0]):null},s.move=function(u,d,f){return s.remove(u,d),s.add(f,d),u},s.rebase=function(u){for(var d=s.allBodies(u).concat(s.allConstraints(u)).concat(s.allComposites(u)),f=0;f<d.length;f++)d[f].id=o.nextId();return u},s.translate=function(u,d,f){for(var h=f?s.allBodies(u):u.bodies,p=0;p<h.length;p++)c.translate(h[p],d);return u},s.rotate=function(u,d,f,h){for(var p=Math.cos(d),g=Math.sin(d),v=h?s.allBodies(u):u.bodies,y=0;y<v.length;y++){var w=v[y],b=w.position.x-f.x,R=w.position.y-f.y;c.setPosition(w,{x:f.x+(b*p-R*g),y:f.y+(b*g+R*p)}),c.rotate(w,d)}return u},s.scale=function(u,d,f,h,p){for(var g=p?s.allBodies(u):u.bodies,v=0;v<g.length;v++){var y=g[v],w=y.position.x-h.x,b=y.position.y-h.y;c.setPosition(y,{x:h.x+w*d,y:h.y+b*f}),c.scale(y,d,f)}return u},s.bounds=function(u){for(var d=s.allBodies(u),f=[],h=0;h<d.length;h+=1){var p=d[h];f.push(p.bounds.min,p.bounds.max)}return l.create(f)}})()},function(n,i,r){var s={};n.exports=s;var a=r(4),o=r(5),l=r(0);(function(){s._motionWakeThreshold=.18,s._motionSleepThreshold=.08,s._minBias=.9,s.update=function(c,u){for(var d=u/l._baseDelta,f=s._motionSleepThreshold,h=0;h<c.length;h++){var p=c[h],g=a.getSpeed(p),v=a.getAngularSpeed(p),y=g*g+v*v;if(p.force.x!==0||p.force.y!==0){s.set(p,!1);continue}var w=Math.min(p.motion,y),b=Math.max(p.motion,y);p.motion=s._minBias*w+(1-s._minBias)*b,p.sleepThreshold>0&&p.motion<f?(p.sleepCounter+=1,p.sleepCounter>=p.sleepThreshold/d&&s.set(p,!0)):p.sleepCounter>0&&(p.sleepCounter-=1)}},s.afterCollisions=function(c){for(var u=s._motionSleepThreshold,d=0;d<c.length;d++){var f=c[d];if(f.isActive){var h=f.collision,p=h.bodyA.parent,g=h.bodyB.parent;if(!(p.isSleeping&&g.isSleeping||p.isStatic||g.isStatic)&&(p.isSleeping||g.isSleeping)){var v=p.isSleeping&&!p.isStatic?p:g,y=v===p?g:p;!v.isStatic&&y.motion>u&&s.set(v,!1)}}}},s.set=function(c,u){var d=c.isSleeping;u?(c.isSleeping=!0,c.sleepCounter=c.sleepThreshold,c.positionImpulse.x=0,c.positionImpulse.y=0,c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.anglePrev=c.angle,c.speed=0,c.angularSpeed=0,c.motion=0,d||o.trigger(c,"sleepStart")):(c.isSleeping=!1,c.sleepCounter=0,d&&o.trigger(c,"sleepEnd"))}})()},function(n,i,r){var s={};n.exports=s;var a=r(3),o=r(9);(function(){var l=[],c={overlap:0,axis:null},u={overlap:0,axis:null};s.create=function(d,f){return{pair:null,collided:!1,bodyA:d,bodyB:f,parentA:d.parent,parentB:f.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},s.collides=function(d,f,h){if(s._overlapAxes(c,d.vertices,f.vertices,d.axes),c.overlap<=0||(s._overlapAxes(u,f.vertices,d.vertices,f.axes),u.overlap<=0))return null;var p=h&&h.table[o.id(d,f)],g;p?g=p.collision:(g=s.create(d,f),g.collided=!0,g.bodyA=d.id<f.id?d:f,g.bodyB=d.id<f.id?f:d,g.parentA=g.bodyA.parent,g.parentB=g.bodyB.parent),d=g.bodyA,f=g.bodyB;var v;c.overlap<u.overlap?v=c:v=u;var y=g.normal,w=g.tangent,b=g.penetration,R=g.supports,S=v.overlap,C=v.axis,x=C.x,T=C.y,A=f.position.x-d.position.x,I=f.position.y-d.position.y;x*A+T*I>=0&&(x=-x,T=-T),y.x=x,y.y=T,w.x=-T,w.y=x,b.x=x*S,b.y=T*S,g.depth=S;var P=s._findSupports(d,f,y,1),k=0;if(a.contains(d.vertices,P[0])&&(R[k++]=P[0]),a.contains(d.vertices,P[1])&&(R[k++]=P[1]),k<2){var D=s._findSupports(f,d,y,-1);a.contains(f.vertices,D[0])&&(R[k++]=D[0]),k<2&&a.contains(f.vertices,D[1])&&(R[k++]=D[1])}return k===0&&(R[k++]=P[0]),g.supportCount=k,g},s._overlapAxes=function(d,f,h,p){var g=f.length,v=h.length,y=f[0].x,w=f[0].y,b=h[0].x,R=h[0].y,S=p.length,C=Number.MAX_VALUE,x=0,T,A,I,P,k,D;for(k=0;k<S;k++){var V=p[k],z=V.x,L=V.y,F=y*z+w*L,$=b*z+R*L,Q=F,te=$;for(D=1;D<g;D+=1)P=f[D].x*z+f[D].y*L,P>Q?Q=P:P<F&&(F=P);for(D=1;D<v;D+=1)P=h[D].x*z+h[D].y*L,P>te?te=P:P<$&&($=P);if(A=Q-$,I=te-F,T=A<I?A:I,T<C&&(C=T,x=k,T<=0))break}d.axis=p[x],d.overlap=C},s._findSupports=function(d,f,h,p){var g=f.vertices,v=g.length,y=d.position.x,w=d.position.y,b=h.x*p,R=h.y*p,S=g[0],C=S,x=b*(y-C.x)+R*(w-C.y),T,A,I;for(I=1;I<v;I+=1)C=g[I],A=b*(y-C.x)+R*(w-C.y),A<x&&(x=A,S=C);return T=g[(v+S.index-1)%v],x=b*(y-T.x)+R*(w-T.y),C=g[(S.index+1)%v],b*(y-C.x)+R*(w-C.y)<x?(l[0]=S,l[1]=C,l):(l[0]=S,l[1]=T,l)}})()},function(n,i,r){var s={};n.exports=s;var a=r(16);(function(){s.create=function(o,l){var c=o.bodyA,u=o.bodyB,d={id:s.id(c,u),bodyA:c,bodyB:u,collision:o,contacts:[a.create(),a.create()],contactCount:0,separation:0,isActive:!0,isSensor:c.isSensor||u.isSensor,timeCreated:l,timeUpdated:l,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return s.update(d,o,l),d},s.update=function(o,l,c){var u=l.supports,d=l.supportCount,f=o.contacts,h=l.parentA,p=l.parentB;o.isActive=!0,o.timeUpdated=c,o.collision=l,o.separation=l.depth,o.inverseMass=h.inverseMass+p.inverseMass,o.friction=h.friction<p.friction?h.friction:p.friction,o.frictionStatic=h.frictionStatic>p.frictionStatic?h.frictionStatic:p.frictionStatic,o.restitution=h.restitution>p.restitution?h.restitution:p.restitution,o.slop=h.slop>p.slop?h.slop:p.slop,o.contactCount=d,l.pair=o;var g=u[0],v=f[0],y=u[1],w=f[1];(w.vertex===g||v.vertex===y)&&(f[1]=v,f[0]=v=w,w=f[1]),v.vertex=g,w.vertex=y},s.setActive=function(o,l,c){l?(o.isActive=!0,o.timeUpdated=c):(o.isActive=!1,o.contactCount=0)},s.id=function(o,l){return o.id<l.id?o.id.toString(36)+":"+l.id.toString(36):l.id.toString(36)+":"+o.id.toString(36)}})()},function(n,i,r){var s={};n.exports=s;var a=r(3),o=r(2),l=r(7),c=r(1),u=r(11),d=r(0);(function(){s._warming=.4,s._torqueDampen=1,s._minLength=1e-6,s.create=function(f){var h=f;h.bodyA&&!h.pointA&&(h.pointA={x:0,y:0}),h.bodyB&&!h.pointB&&(h.pointB={x:0,y:0});var p=h.bodyA?o.add(h.bodyA.position,h.pointA):h.pointA,g=h.bodyB?o.add(h.bodyB.position,h.pointB):h.pointB,v=o.magnitude(o.sub(p,g));h.length=typeof h.length<"u"?h.length:v,h.id=h.id||d.nextId(),h.label=h.label||"Constraint",h.type="constraint",h.stiffness=h.stiffness||(h.length>0?1:.7),h.damping=h.damping||0,h.angularStiffness=h.angularStiffness||0,h.angleA=h.bodyA?h.bodyA.angle:h.angleA,h.angleB=h.bodyB?h.bodyB.angle:h.angleB,h.plugin={};var y={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return h.length===0&&h.stiffness>.1?(y.type="pin",y.anchors=!1):h.stiffness<.9&&(y.type="spring"),h.render=d.extend(y,h.render),h},s.preSolveAll=function(f){for(var h=0;h<f.length;h+=1){var p=f[h],g=p.constraintImpulse;p.isStatic||g.x===0&&g.y===0&&g.angle===0||(p.position.x+=g.x,p.position.y+=g.y,p.angle+=g.angle)}},s.solveAll=function(f,h){for(var p=d.clamp(h/d._baseDelta,0,1),g=0;g<f.length;g+=1){var v=f[g],y=!v.bodyA||v.bodyA&&v.bodyA.isStatic,w=!v.bodyB||v.bodyB&&v.bodyB.isStatic;(y||w)&&s.solve(f[g],p)}for(g=0;g<f.length;g+=1)v=f[g],y=!v.bodyA||v.bodyA&&v.bodyA.isStatic,w=!v.bodyB||v.bodyB&&v.bodyB.isStatic,!y&&!w&&s.solve(f[g],p)},s.solve=function(f,h){var p=f.bodyA,g=f.bodyB,v=f.pointA,y=f.pointB;if(!(!p&&!g)){p&&!p.isStatic&&(o.rotate(v,p.angle-f.angleA,v),f.angleA=p.angle),g&&!g.isStatic&&(o.rotate(y,g.angle-f.angleB,y),f.angleB=g.angle);var w=v,b=y;if(p&&(w=o.add(p.position,v)),g&&(b=o.add(g.position,y)),!(!w||!b)){var R=o.sub(w,b),S=o.magnitude(R);S<s._minLength&&(S=s._minLength);var C=(S-f.length)/S,x=f.stiffness>=1||f.length===0,T=x?f.stiffness*h:f.stiffness*h*h,A=f.damping*h,I=o.mult(R,C*T),P=(p?p.inverseMass:0)+(g?g.inverseMass:0),k=(p?p.inverseInertia:0)+(g?g.inverseInertia:0),D=P+k,V,z,L,F,$;if(A>0){var Q=o.create();L=o.div(R,S),$=o.sub(g&&o.sub(g.position,g.positionPrev)||Q,p&&o.sub(p.position,p.positionPrev)||Q),F=o.dot(L,$)}p&&!p.isStatic&&(z=p.inverseMass/P,p.constraintImpulse.x-=I.x*z,p.constraintImpulse.y-=I.y*z,p.position.x-=I.x*z,p.position.y-=I.y*z,A>0&&(p.positionPrev.x-=A*L.x*F*z,p.positionPrev.y-=A*L.y*F*z),V=o.cross(v,I)/D*s._torqueDampen*p.inverseInertia*(1-f.angularStiffness),p.constraintImpulse.angle-=V,p.angle-=V),g&&!g.isStatic&&(z=g.inverseMass/P,g.constraintImpulse.x+=I.x*z,g.constraintImpulse.y+=I.y*z,g.position.x+=I.x*z,g.position.y+=I.y*z,A>0&&(g.positionPrev.x+=A*L.x*F*z,g.positionPrev.y+=A*L.y*F*z),V=o.cross(y,I)/D*s._torqueDampen*g.inverseInertia*(1-f.angularStiffness),g.constraintImpulse.angle+=V,g.angle+=V)}}},s.postSolveAll=function(f){for(var h=0;h<f.length;h++){var p=f[h],g=p.constraintImpulse;if(!(p.isStatic||g.x===0&&g.y===0&&g.angle===0)){l.set(p,!1);for(var v=0;v<p.parts.length;v++){var y=p.parts[v];a.translate(y.vertices,g),v>0&&(y.position.x+=g.x,y.position.y+=g.y),g.angle!==0&&(a.rotate(y.vertices,g.angle,p.position),u.rotate(y.axes,g.angle),v>0&&o.rotateAbout(y.position,g.angle,p.position,y.position)),c.update(y.bounds,y.vertices,p.velocity)}g.angle*=s._warming,g.x*=s._warming,g.y*=s._warming}}},s.pointAWorld=function(f){return{x:(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),y:(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0)}},s.pointBWorld=function(f){return{x:(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),y:(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0)}},s.currentLength=function(f){var h=(f.bodyA?f.bodyA.position.x:0)+(f.pointA?f.pointA.x:0),p=(f.bodyA?f.bodyA.position.y:0)+(f.pointA?f.pointA.y:0),g=(f.bodyB?f.bodyB.position.x:0)+(f.pointB?f.pointB.x:0),v=(f.bodyB?f.bodyB.position.y:0)+(f.pointB?f.pointB.y:0),y=h-g,w=p-v;return Math.sqrt(y*y+w*w)}})()},function(n,i,r){var s={};n.exports=s;var a=r(2),o=r(0);(function(){s.fromVertices=function(l){for(var c={},u=0;u<l.length;u++){var d=(u+1)%l.length,f=a.normalise({x:l[d].y-l[u].y,y:l[u].x-l[d].x}),h=f.y===0?1/0:f.x/f.y;h=h.toFixed(3).toString(),c[h]=f}return o.values(c)},s.rotate=function(l,c){if(c!==0)for(var u=Math.cos(c),d=Math.sin(c),f=0;f<l.length;f++){var h=l[f],p;p=h.x*u-h.y*d,h.y=h.x*d+h.y*u,h.x=p}}})()},function(n,i,r){var s={};n.exports=s;var a=r(3),o=r(0),l=r(4),c=r(1),u=r(2);(function(){s.rectangle=function(d,f,h,p,g){g=g||{};var v={label:"Rectangle Body",position:{x:d,y:f},vertices:a.fromPath("L 0 0 L "+h+" 0 L "+h+" "+p+" L 0 "+p)};if(g.chamfer){var y=g.chamfer;v.vertices=a.chamfer(v.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete g.chamfer}return l.create(o.extend({},v,g))},s.trapezoid=function(d,f,h,p,g,v){v=v||{},g>=1&&o.warn("Bodies.trapezoid: slope parameter must be < 1."),g*=.5;var y=(1-g*2)*h,w=h*g,b=w+y,R=b+w,S;g<.5?S="L 0 0 L "+w+" "+-p+" L "+b+" "+-p+" L "+R+" 0":S="L 0 0 L "+b+" "+-p+" L "+R+" 0";var C={label:"Trapezoid Body",position:{x:d,y:f},vertices:a.fromPath(S)};if(v.chamfer){var x=v.chamfer;C.vertices=a.chamfer(C.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete v.chamfer}return l.create(o.extend({},C,v))},s.circle=function(d,f,h,p,g){p=p||{};var v={label:"Circle Body",circleRadius:h};g=g||25;var y=Math.ceil(Math.max(10,Math.min(g,h)));return y%2===1&&(y+=1),s.polygon(d,f,y,h,o.extend({},v,p))},s.polygon=function(d,f,h,p,g){if(g=g||{},h<3)return s.circle(d,f,p,g);for(var v=2*Math.PI/h,y="",w=v*.5,b=0;b<h;b+=1){var R=w+b*v,S=Math.cos(R)*p,C=Math.sin(R)*p;y+="L "+S.toFixed(3)+" "+C.toFixed(3)+" "}var x={label:"Polygon Body",position:{x:d,y:f},vertices:a.fromPath(y)};if(g.chamfer){var T=g.chamfer;x.vertices=a.chamfer(x.vertices,T.radius,T.quality,T.qualityMin,T.qualityMax),delete g.chamfer}return l.create(o.extend({},x,g))},s.fromVertices=function(d,f,h,p,g,v,y,w){var b=o.getDecomp(),R,S,C,x,T,A,I,P,k,D,V;for(R=!!(b&&b.quickDecomp),p=p||{},C=[],g=typeof g<"u"?g:!1,v=typeof v<"u"?v:.01,y=typeof y<"u"?y:10,w=typeof w<"u"?w:.01,o.isArray(h[0])||(h=[h]),D=0;D<h.length;D+=1)if(A=h[D],x=a.isConvex(A),T=!x,T&&!R&&o.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),x||!R)x?A=a.clockwiseSort(A):A=a.hull(A),C.push({position:{x:d,y:f},vertices:A});else{var z=A.map(function(pe){return[pe.x,pe.y]});b.makeCCW(z),v!==!1&&b.removeCollinearPoints(z,v),w!==!1&&b.removeDuplicatePoints&&b.removeDuplicatePoints(z,w);var L=b.quickDecomp(z);for(I=0;I<L.length;I++){var F=L[I],$=F.map(function(pe){return{x:pe[0],y:pe[1]}});y>0&&a.area($)<y||C.push({position:a.centre($),vertices:$})}}for(I=0;I<C.length;I++)C[I]=l.create(o.extend(C[I],p));if(g){var Q=5;for(I=0;I<C.length;I++){var te=C[I];for(P=I+1;P<C.length;P++){var ce=C[P];if(c.overlaps(te.bounds,ce.bounds)){var Z=te.vertices,ae=ce.vertices;for(k=0;k<te.vertices.length;k++)for(V=0;V<ce.vertices.length;V++){var Me=u.magnitudeSquared(u.sub(Z[(k+1)%Z.length],ae[V])),ot=u.magnitudeSquared(u.sub(Z[k],ae[(V+1)%ae.length]));Me<Q&&ot<Q&&(Z[k].isInternal=!0,ae[V].isInternal=!0)}}}}}return C.length>1?(S=l.create(o.extend({parts:C.slice(0)},p)),l.setPosition(S,{x:d,y:f}),S):C[0]}})()},function(n,i,r){var s={};n.exports=s;var a=r(0),o=r(8);(function(){s.create=function(l){var c={bodies:[],collisions:[],pairs:null};return a.extend(c,l)},s.setBodies=function(l,c){l.bodies=c.slice(0)},s.clear=function(l){l.bodies=[],l.collisions=[]},s.collisions=function(l){var c=l.pairs,u=l.bodies,d=u.length,f=s.canCollide,h=o.collides,p=l.collisions,g=0,v,y;for(u.sort(s._compareBoundsX),v=0;v<d;v++){var w=u[v],b=w.bounds,R=w.bounds.max.x,S=w.bounds.max.y,C=w.bounds.min.y,x=w.isStatic||w.isSleeping,T=w.parts.length,A=T===1;for(y=v+1;y<d;y++){var I=u[y],P=I.bounds;if(P.min.x>R)break;if(!(S<P.min.y||C>P.max.y)&&!(x&&(I.isStatic||I.isSleeping))&&f(w.collisionFilter,I.collisionFilter)){var k=I.parts.length;if(A&&k===1){var D=h(w,I,c);D&&(p[g++]=D)}else for(var V=T>1?1:0,z=k>1?1:0,L=V;L<T;L++)for(var F=w.parts[L],b=F.bounds,$=z;$<k;$++){var Q=I.parts[$],P=Q.bounds;if(!(b.min.x>P.max.x||b.max.x<P.min.x||b.max.y<P.min.y||b.min.y>P.max.y)){var D=h(F,Q,c);D&&(p[g++]=D)}}}}}return p.length!==g&&(p.length=g),p},s.canCollide=function(l,c){return l.group===c.group&&l.group!==0?l.group>0:(l.mask&c.category)!==0&&(c.mask&l.category)!==0},s._compareBoundsX=function(l,c){return l.bounds.min.x-c.bounds.min.x}})()},function(n,i,r){var s={};n.exports=s;var a=r(0);(function(){s.create=function(o){var l={};return o||a.log("Mouse.create: element was undefined, defaulting to document.body","warn"),l.element=o||document.body,l.absolute={x:0,y:0},l.position={x:0,y:0},l.mousedownPosition={x:0,y:0},l.mouseupPosition={x:0,y:0},l.offset={x:0,y:0},l.scale={x:1,y:1},l.wheelDelta=0,l.button=-1,l.pixelRatio=parseInt(l.element.getAttribute("data-pixel-ratio"),10)||1,l.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},l.mousemove=function(c){var u=s._getRelativeMousePosition(c,l.element,l.pixelRatio),d=c.changedTouches;d&&(l.button=0,c.preventDefault()),l.absolute.x=u.x,l.absolute.y=u.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.sourceEvents.mousemove=c},l.mousedown=function(c){var u=s._getRelativeMousePosition(c,l.element,l.pixelRatio),d=c.changedTouches;d?(l.button=0,c.preventDefault()):l.button=c.button,l.absolute.x=u.x,l.absolute.y=u.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.mousedownPosition.x=l.position.x,l.mousedownPosition.y=l.position.y,l.sourceEvents.mousedown=c},l.mouseup=function(c){var u=s._getRelativeMousePosition(c,l.element,l.pixelRatio),d=c.changedTouches;d&&c.preventDefault(),l.button=-1,l.absolute.x=u.x,l.absolute.y=u.y,l.position.x=l.absolute.x*l.scale.x+l.offset.x,l.position.y=l.absolute.y*l.scale.y+l.offset.y,l.mouseupPosition.x=l.position.x,l.mouseupPosition.y=l.position.y,l.sourceEvents.mouseup=c},l.mousewheel=function(c){l.wheelDelta=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail)),c.preventDefault(),l.sourceEvents.mousewheel=c},s.setElement(l,l.element),l},s.setElement=function(o,l){o.element=l,l.addEventListener("mousemove",o.mousemove,{passive:!0}),l.addEventListener("mousedown",o.mousedown,{passive:!0}),l.addEventListener("mouseup",o.mouseup,{passive:!0}),l.addEventListener("wheel",o.mousewheel,{passive:!1}),l.addEventListener("touchmove",o.mousemove,{passive:!1}),l.addEventListener("touchstart",o.mousedown,{passive:!1}),l.addEventListener("touchend",o.mouseup,{passive:!1})},s.clearSourceEvents=function(o){o.sourceEvents.mousemove=null,o.sourceEvents.mousedown=null,o.sourceEvents.mouseup=null,o.sourceEvents.mousewheel=null,o.wheelDelta=0},s.setOffset=function(o,l){o.offset.x=l.x,o.offset.y=l.y,o.position.x=o.absolute.x*o.scale.x+o.offset.x,o.position.y=o.absolute.y*o.scale.y+o.offset.y},s.setScale=function(o,l){o.scale.x=l.x,o.scale.y=l.y,o.position.x=o.absolute.x*o.scale.x+o.offset.x,o.position.y=o.absolute.y*o.scale.y+o.offset.y},s._getRelativeMousePosition=function(o,l,c){var u=l.getBoundingClientRect(),d=document.documentElement||document.body.parentNode||document.body,f=window.pageXOffset!==void 0?window.pageXOffset:d.scrollLeft,h=window.pageYOffset!==void 0?window.pageYOffset:d.scrollTop,p=o.changedTouches,g,v;return p?(g=p[0].pageX-u.left-f,v=p[0].pageY-u.top-h):(g=o.pageX-u.left-f,v=o.pageY-u.top-h),{x:g/(l.clientWidth/(l.width||l.clientWidth)*c),y:v/(l.clientHeight/(l.height||l.clientHeight)*c)}}})()},function(n,i,r){var s={};n.exports=s;var a=r(0);(function(){s._registry={},s.register=function(o){if(s.isPlugin(o)||a.warn("Plugin.register:",s.toString(o),"does not implement all required fields."),o.name in s._registry){var l=s._registry[o.name],c=s.versionParse(o.version).number,u=s.versionParse(l.version).number;c>u?(a.warn("Plugin.register:",s.toString(l),"was upgraded to",s.toString(o)),s._registry[o.name]=o):c<u?a.warn("Plugin.register:",s.toString(l),"can not be downgraded to",s.toString(o)):o!==l&&a.warn("Plugin.register:",s.toString(o),"is already registered to different plugin object")}else s._registry[o.name]=o;return o},s.resolve=function(o){return s._registry[s.dependencyParse(o).name]},s.toString=function(o){return typeof o=="string"?o:(o.name||"anonymous")+"@"+(o.version||o.range||"0.0.0")},s.isPlugin=function(o){return o&&o.name&&o.version&&o.install},s.isUsed=function(o,l){return o.used.indexOf(l)>-1},s.isFor=function(o,l){var c=o.for&&s.dependencyParse(o.for);return!o.for||l.name===c.name&&s.versionSatisfies(l.version,c.range)},s.use=function(o,l){if(o.uses=(o.uses||[]).concat(l||[]),o.uses.length===0){a.warn("Plugin.use:",s.toString(o),"does not specify any dependencies to install.");return}for(var c=s.dependencies(o),u=a.topologicalSort(c),d=[],f=0;f<u.length;f+=1)if(u[f]!==o.name){var h=s.resolve(u[f]);if(!h){d.push(" "+u[f]);continue}s.isUsed(o,h.name)||(s.isFor(h,o)||(a.warn("Plugin.use:",s.toString(h),"is for",h.for,"but installed on",s.toString(o)+"."),h._warned=!0),h.install?h.install(o):(a.warn("Plugin.use:",s.toString(h),"does not specify an install function."),h._warned=!0),h._warned?(d.push(" "+s.toString(h)),delete h._warned):d.push(" "+s.toString(h)),o.used.push(h.name))}d.length>0&&a.info(d.join("  "))},s.dependencies=function(o,l){var c=s.dependencyParse(o),u=c.name;if(l=l||{},!(u in l)){o=s.resolve(o)||o,l[u]=a.map(o.uses||[],function(f){s.isPlugin(f)&&s.register(f);var h=s.dependencyParse(f),p=s.resolve(f);return p&&!s.versionSatisfies(p.version,h.range)?(a.warn("Plugin.dependencies:",s.toString(p),"does not satisfy",s.toString(h),"used by",s.toString(c)+"."),p._warned=!0,o._warned=!0):p||(a.warn("Plugin.dependencies:",s.toString(f),"used by",s.toString(c),"could not be resolved."),o._warned=!0),h.name});for(var d=0;d<l[u].length;d+=1)s.dependencies(l[u][d],l);return l}},s.dependencyParse=function(o){if(a.isString(o)){var l=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return l.test(o)||a.warn("Plugin.dependencyParse:",o,"is not a valid dependency string."),{name:o.split("@")[0],range:o.split("@")[1]||"*"}}return{name:o.name,range:o.range||o.version}},s.versionParse=function(o){var l=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;l.test(o)||a.warn("Plugin.versionParse:",o,"is not a valid version or range.");var c=l.exec(o),u=Number(c[4]),d=Number(c[5]),f=Number(c[6]);return{isRange:!!(c[1]||c[2]),version:c[3],range:o,operator:c[1]||c[2]||"",major:u,minor:d,patch:f,parts:[u,d,f],prerelease:c[7],number:u*1e8+d*1e4+f}},s.versionSatisfies=function(o,l){l=l||"*";var c=s.versionParse(l),u=s.versionParse(o);if(c.isRange){if(c.operator==="*"||o==="*")return!0;if(c.operator===">")return u.number>c.number;if(c.operator===">=")return u.number>=c.number;if(c.operator==="~")return u.major===c.major&&u.minor===c.minor&&u.patch>=c.patch;if(c.operator==="^")return c.major>0?u.major===c.major&&u.number>=c.number:c.minor>0?u.minor===c.minor&&u.patch>=c.patch:u.patch===c.patch}return o===l||o==="*"}})()},function(n,i){var r={};n.exports=r,function(){r.create=function(s){return{vertex:s,normalImpulse:0,tangentImpulse:0}}}()},function(n,i,r){var s={};n.exports=s;var a=r(7),o=r(18),l=r(13),c=r(19),u=r(5),d=r(6),f=r(10),h=r(0),p=r(4);(function(){s._deltaMax=1e3/60,s.create=function(g){g=g||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},y=h.extend(v,g);return y.world=g.world||d.create({label:"World"}),y.pairs=g.pairs||c.create(),y.detector=g.detector||l.create(),y.detector.pairs=y.pairs,y.grid={buckets:[]},y.world.gravity=y.gravity,y.broadphase=y.grid,y.metrics={},y},s.update=function(g,v){var y=h.now(),w=g.world,b=g.detector,R=g.pairs,S=g.timing,C=S.timestamp,x;v>s._deltaMax&&h.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",s._deltaMax.toFixed(3),"ms."),v=typeof v<"u"?v:h._baseDelta,v*=S.timeScale,S.timestamp+=v,S.lastDelta=v;var T={timestamp:S.timestamp,delta:v};u.trigger(g,"beforeUpdate",T);var A=d.allBodies(w),I=d.allConstraints(w);for(w.isModified&&(l.setBodies(b,A),d.setModified(w,!1,!1,!0)),g.enableSleeping&&a.update(A,v),s._bodiesApplyGravity(A,g.gravity),v>0&&s._bodiesUpdate(A,v),u.trigger(g,"beforeSolve",T),f.preSolveAll(A),x=0;x<g.constraintIterations;x++)f.solveAll(I,v);f.postSolveAll(A);var P=l.collisions(b);c.update(R,P,C),g.enableSleeping&&a.afterCollisions(R.list),R.collisionStart.length>0&&u.trigger(g,"collisionStart",{pairs:R.collisionStart,timestamp:S.timestamp,delta:v});var k=h.clamp(20/g.positionIterations,0,1);for(o.preSolvePosition(R.list),x=0;x<g.positionIterations;x++)o.solvePosition(R.list,v,k);for(o.postSolvePosition(A),f.preSolveAll(A),x=0;x<g.constraintIterations;x++)f.solveAll(I,v);for(f.postSolveAll(A),o.preSolveVelocity(R.list),x=0;x<g.velocityIterations;x++)o.solveVelocity(R.list,v);return s._bodiesUpdateVelocities(A),R.collisionActive.length>0&&u.trigger(g,"collisionActive",{pairs:R.collisionActive,timestamp:S.timestamp,delta:v}),R.collisionEnd.length>0&&u.trigger(g,"collisionEnd",{pairs:R.collisionEnd,timestamp:S.timestamp,delta:v}),s._bodiesClearForces(A),u.trigger(g,"afterUpdate",T),g.timing.lastElapsed=h.now()-y,g},s.merge=function(g,v){if(h.extend(g,v),v.world){g.world=v.world,s.clear(g);for(var y=d.allBodies(g.world),w=0;w<y.length;w++){var b=y[w];a.set(b,!1),b.id=h.nextId()}}},s.clear=function(g){c.clear(g.pairs),l.clear(g.detector)},s._bodiesClearForces=function(g){for(var v=g.length,y=0;y<v;y++){var w=g[y];w.force.x=0,w.force.y=0,w.torque=0}},s._bodiesApplyGravity=function(g,v){var y=typeof v.scale<"u"?v.scale:.001,w=g.length;if(!(v.x===0&&v.y===0||y===0))for(var b=0;b<w;b++){var R=g[b];R.isStatic||R.isSleeping||(R.force.y+=R.mass*v.y*y,R.force.x+=R.mass*v.x*y)}},s._bodiesUpdate=function(g,v){for(var y=g.length,w=0;w<y;w++){var b=g[w];b.isStatic||b.isSleeping||p.update(b,v)}},s._bodiesUpdateVelocities=function(g){for(var v=g.length,y=0;y<v;y++)p.updateVelocities(g[y])}})()},function(n,i,r){var s={};n.exports=s;var a=r(3),o=r(0),l=r(1);(function(){s._restingThresh=2,s._restingThreshTangent=Math.sqrt(6),s._positionDampen=.9,s._positionWarming=.8,s._frictionNormalMultiplier=5,s._frictionMaxStatic=Number.MAX_VALUE,s.preSolvePosition=function(c){var u,d,f,h=c.length;for(u=0;u<h;u++)d=c[u],d.isActive&&(f=d.contactCount,d.collision.parentA.totalContacts+=f,d.collision.parentB.totalContacts+=f)},s.solvePosition=function(c,u,d){var f,h,p,g,v,y,w,b,R=s._positionDampen*(d||1),S=o.clamp(u/o._baseDelta,0,1),C=c.length;for(f=0;f<C;f++)h=c[f],!(!h.isActive||h.isSensor)&&(p=h.collision,g=p.parentA,v=p.parentB,y=p.normal,h.separation=p.depth+y.x*(v.positionImpulse.x-g.positionImpulse.x)+y.y*(v.positionImpulse.y-g.positionImpulse.y));for(f=0;f<C;f++)h=c[f],!(!h.isActive||h.isSensor)&&(p=h.collision,g=p.parentA,v=p.parentB,y=p.normal,b=h.separation-h.slop*S,(g.isStatic||v.isStatic)&&(b*=2),g.isStatic||g.isSleeping||(w=R/g.totalContacts,g.positionImpulse.x+=y.x*b*w,g.positionImpulse.y+=y.y*b*w),v.isStatic||v.isSleeping||(w=R/v.totalContacts,v.positionImpulse.x-=y.x*b*w,v.positionImpulse.y-=y.y*b*w))},s.postSolvePosition=function(c){for(var u=s._positionWarming,d=c.length,f=a.translate,h=l.update,p=0;p<d;p++){var g=c[p],v=g.positionImpulse,y=v.x,w=v.y,b=g.velocity;if(g.totalContacts=0,y!==0||w!==0){for(var R=0;R<g.parts.length;R++){var S=g.parts[R];f(S.vertices,v),h(S.bounds,S.vertices,b),S.position.x+=y,S.position.y+=w}g.positionPrev.x+=y,g.positionPrev.y+=w,y*b.x+w*b.y<0?(v.x=0,v.y=0):(v.x*=u,v.y*=u)}}},s.preSolveVelocity=function(c){var u=c.length,d,f;for(d=0;d<u;d++){var h=c[d];if(!(!h.isActive||h.isSensor)){var p=h.contacts,g=h.contactCount,v=h.collision,y=v.parentA,w=v.parentB,b=v.normal,R=v.tangent;for(f=0;f<g;f++){var S=p[f],C=S.vertex,x=S.normalImpulse,T=S.tangentImpulse;if(x!==0||T!==0){var A=b.x*x+R.x*T,I=b.y*x+R.y*T;y.isStatic||y.isSleeping||(y.positionPrev.x+=A*y.inverseMass,y.positionPrev.y+=I*y.inverseMass,y.anglePrev+=y.inverseInertia*((C.x-y.position.x)*I-(C.y-y.position.y)*A)),w.isStatic||w.isSleeping||(w.positionPrev.x-=A*w.inverseMass,w.positionPrev.y-=I*w.inverseMass,w.anglePrev-=w.inverseInertia*((C.x-w.position.x)*I-(C.y-w.position.y)*A))}}}}},s.solveVelocity=function(c,u){var d=u/o._baseDelta,f=d*d,h=f*d,p=-s._restingThresh*d,g=s._restingThreshTangent,v=s._frictionNormalMultiplier*d,y=s._frictionMaxStatic,w=c.length,b,R,S,C;for(S=0;S<w;S++){var x=c[S];if(!(!x.isActive||x.isSensor)){var T=x.collision,A=T.parentA,I=T.parentB,P=T.normal.x,k=T.normal.y,D=T.tangent.x,V=T.tangent.y,z=x.inverseMass,L=x.friction*x.frictionStatic*v,F=x.contacts,$=x.contactCount,Q=1/$,te=A.position.x-A.positionPrev.x,ce=A.position.y-A.positionPrev.y,Z=A.angle-A.anglePrev,ae=I.position.x-I.positionPrev.x,Me=I.position.y-I.positionPrev.y,ot=I.angle-I.anglePrev;for(C=0;C<$;C++){var pe=F[C],Lt=pe.vertex,lt=Lt.x-A.position.x,Bn=Lt.y-A.position.y,An=Lt.x-I.position.x,li=Lt.y-I.position.y,Qt=te-Bn*Z,nu=ce+lt*Z,bf=ae-li*ot,Oy=Me+An*ot,Ho=Qt-bf,$o=nu-Oy,Go=P*Ho+k*$o,qe=D*Ho+V*$o,Ut=x.separation+Go,as=Math.min(Ut,1);as=Ut<0?0:as;var Tf=as*L;qe<-Tf||qe>Tf?(R=qe>0?qe:-qe,b=x.friction*(qe>0?1:-1)*h,b<-R?b=-R:b>R&&(b=R)):(b=qe,R=y);var iu=lt*k-Bn*P,xf=An*k-li*P,os=Q/(z+A.inverseInertia*iu*iu+I.inverseInertia*xf*xf),Aa=(1+x.restitution)*Go*os;if(b*=os,Go<p)pe.normalImpulse=0;else{var Ef=pe.normalImpulse;pe.normalImpulse+=Aa,pe.normalImpulse>0&&(pe.normalImpulse=0),Aa=pe.normalImpulse-Ef}if(qe<-g||qe>g)pe.tangentImpulse=0;else{var ru=pe.tangentImpulse;pe.tangentImpulse+=b,pe.tangentImpulse<-R&&(pe.tangentImpulse=-R),pe.tangentImpulse>R&&(pe.tangentImpulse=R),b=pe.tangentImpulse-ru}var Ko=P*Aa+D*b,Wo=k*Aa+V*b;A.isStatic||A.isSleeping||(A.positionPrev.x+=Ko*A.inverseMass,A.positionPrev.y+=Wo*A.inverseMass,A.anglePrev+=(lt*Wo-Bn*Ko)*A.inverseInertia),I.isStatic||I.isSleeping||(I.positionPrev.x-=Ko*I.inverseMass,I.positionPrev.y-=Wo*I.inverseMass,I.anglePrev-=(An*Wo-li*Ko)*I.inverseInertia)}}}}})()},function(n,i,r){var s={};n.exports=s;var a=r(9),o=r(0);(function(){s.create=function(l){return o.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},l)},s.update=function(l,c,u){var d=a.update,f=a.create,h=a.setActive,p=l.table,g=l.list,v=g.length,y=v,w=l.collisionStart,b=l.collisionEnd,R=l.collisionActive,S=c.length,C=0,x=0,T=0,A,I,P;for(P=0;P<S;P++)A=c[P],I=A.pair,I?(I.isActive&&(R[T++]=I),d(I,A,u)):(I=f(A,u),p[I.id]=I,w[C++]=I,g[y++]=I);for(y=0,v=g.length,P=0;P<v;P++)I=g[P],I.timeUpdated>=u?g[y++]=I:(h(I,!1,u),I.collision.bodyA.sleepCounter>0&&I.collision.bodyB.sleepCounter>0?g[y++]=I:(b[x++]=I,delete p[I.id]));g.length!==y&&(g.length=y),w.length!==C&&(w.length=C),b.length!==x&&(b.length=x),R.length!==T&&(R.length=T)},s.clear=function(l){return l.table={},l.list.length=0,l.collisionStart.length=0,l.collisionActive.length=0,l.collisionEnd.length=0,l}})()},function(n,i,r){var s=n.exports=r(21);s.Axes=r(11),s.Bodies=r(12),s.Body=r(4),s.Bounds=r(1),s.Collision=r(8),s.Common=r(0),s.Composite=r(6),s.Composites=r(22),s.Constraint=r(10),s.Contact=r(16),s.Detector=r(13),s.Engine=r(17),s.Events=r(5),s.Grid=r(23),s.Mouse=r(14),s.MouseConstraint=r(24),s.Pair=r(9),s.Pairs=r(19),s.Plugin=r(15),s.Query=r(25),s.Render=r(26),s.Resolver=r(18),s.Runner=r(27),s.SAT=r(28),s.Sleeping=r(7),s.Svg=r(29),s.Vector=r(2),s.Vertices=r(3),s.World=r(30),s.Engine.run=s.Runner.run,s.Common.deprecated(s.Engine,"run","Engine.run  use Matter.Runner.run(engine) instead")},function(n,i,r){var s={};n.exports=s;var a=r(15),o=r(0);(function(){s.name="matter-js",s.version="0.20.0",s.uses=[],s.used=[],s.use=function(){a.use(s,Array.prototype.slice.call(arguments))},s.before=function(l,c){return l=l.replace(/^Matter./,""),o.chainPathBefore(s,l,c)},s.after=function(l,c){return l=l.replace(/^Matter./,""),o.chainPathAfter(s,l,c)}})()},function(n,i,r){var s={};n.exports=s;var a=r(6),o=r(10),l=r(0),c=r(4),u=r(12),d=l.deprecated;(function(){s.stack=function(f,h,p,g,v,y,w){for(var b=a.create({label:"Stack"}),R=f,S=h,C,x=0,T=0;T<g;T++){for(var A=0,I=0;I<p;I++){var P=w(R,S,I,T,C,x);if(P){var k=P.bounds.max.y-P.bounds.min.y,D=P.bounds.max.x-P.bounds.min.x;k>A&&(A=k),c.translate(P,{x:D*.5,y:k*.5}),R=P.bounds.max.x+v,a.addBody(b,P),C=P,x+=1}else R+=v}S+=A+y,R=f}return b},s.chain=function(f,h,p,g,v,y){for(var w=f.bodies,b=1;b<w.length;b++){var R=w[b-1],S=w[b],C=R.bounds.max.y-R.bounds.min.y,x=R.bounds.max.x-R.bounds.min.x,T=S.bounds.max.y-S.bounds.min.y,A=S.bounds.max.x-S.bounds.min.x,I={bodyA:R,pointA:{x:x*h,y:C*p},bodyB:S,pointB:{x:A*g,y:T*v}},P=l.extend(I,y);a.addConstraint(f,o.create(P))}return f.label+=" Chain",f},s.mesh=function(f,h,p,g,v){var y=f.bodies,w,b,R,S,C;for(w=0;w<p;w++){for(b=1;b<h;b++)R=y[b-1+w*h],S=y[b+w*h],a.addConstraint(f,o.create(l.extend({bodyA:R,bodyB:S},v)));if(w>0)for(b=0;b<h;b++)R=y[b+(w-1)*h],S=y[b+w*h],a.addConstraint(f,o.create(l.extend({bodyA:R,bodyB:S},v))),g&&b>0&&(C=y[b-1+(w-1)*h],a.addConstraint(f,o.create(l.extend({bodyA:C,bodyB:S},v)))),g&&b<h-1&&(C=y[b+1+(w-1)*h],a.addConstraint(f,o.create(l.extend({bodyA:C,bodyB:S},v))))}return f.label+=" Mesh",f},s.pyramid=function(f,h,p,g,v,y,w){return s.stack(f,h,p,g,v,y,function(b,R,S,C,x,T){var A=Math.min(g,Math.ceil(p/2)),I=x?x.bounds.max.x-x.bounds.min.x:0;if(!(C>A)){C=A-C;var P=C,k=p-1-C;if(!(S<P||S>k)){T===1&&c.translate(x,{x:(S+(p%2===1?1:-1))*I,y:0});var D=x?S*I:0;return w(f+D+S*v,R,S,C,x,T)}}})},s.newtonsCradle=function(f,h,p,g,v){for(var y=a.create({label:"Newtons Cradle"}),w=0;w<p;w++){var b=1.9,R=u.circle(f+w*(g*b),h+v,g,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),S=o.create({pointA:{x:f+w*(g*b),y:h},bodyB:R});a.addBody(y,R),a.addConstraint(y,S)}return y},d(s,"newtonsCradle","Composites.newtonsCradle  moved to newtonsCradle example"),s.car=function(f,h,p,g,v){var y=c.nextGroup(!0),w=20,b=-p*.5+w,R=p*.5-w,S=0,C=a.create({label:"Car"}),x=u.rectangle(f,h,p,g,{collisionFilter:{group:y},chamfer:{radius:g*.5},density:2e-4}),T=u.circle(f+b,h+S,v,{collisionFilter:{group:y},friction:.8}),A=u.circle(f+R,h+S,v,{collisionFilter:{group:y},friction:.8}),I=o.create({bodyB:x,pointB:{x:b,y:S},bodyA:T,stiffness:1,length:0}),P=o.create({bodyB:x,pointB:{x:R,y:S},bodyA:A,stiffness:1,length:0});return a.addBody(C,x),a.addBody(C,T),a.addBody(C,A),a.addConstraint(C,I),a.addConstraint(C,P),C},d(s,"car","Composites.car  moved to car example"),s.softBody=function(f,h,p,g,v,y,w,b,R,S){R=l.extend({inertia:1/0},R),S=l.extend({stiffness:.2,render:{type:"line",anchors:!1}},S);var C=s.stack(f,h,p,g,v,y,function(x,T){return u.circle(x,T,b,R)});return s.mesh(C,p,g,w,S),C.label="Soft Body",C},d(s,"softBody","Composites.softBody  moved to softBody and cloth examples")})()},function(n,i,r){var s={};n.exports=s;var a=r(9),o=r(0),l=o.deprecated;(function(){s.create=function(c){var u={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(u,c)},s.update=function(c,u,d,f){var h,p,g,v=d.world,y=c.buckets,w,b,R=!1;for(h=0;h<u.length;h++){var S=u[h];if(!(S.isSleeping&&!f)&&!(v.bounds&&(S.bounds.max.x<v.bounds.min.x||S.bounds.min.x>v.bounds.max.x||S.bounds.max.y<v.bounds.min.y||S.bounds.min.y>v.bounds.max.y))){var C=s._getRegion(c,S);if(!S.region||C.id!==S.region.id||f){(!S.region||f)&&(S.region=C);var x=s._regionUnion(C,S.region);for(p=x.startCol;p<=x.endCol;p++)for(g=x.startRow;g<=x.endRow;g++){b=s._getBucketId(p,g),w=y[b];var T=p>=C.startCol&&p<=C.endCol&&g>=C.startRow&&g<=C.endRow,A=p>=S.region.startCol&&p<=S.region.endCol&&g>=S.region.startRow&&g<=S.region.endRow;!T&&A&&A&&w&&s._bucketRemoveBody(c,w,S),(S.region===C||T&&!A||f)&&(w||(w=s._createBucket(y,b)),s._bucketAddBody(c,w,S))}S.region=C,R=!0}}}R&&(c.pairsList=s._createActivePairsList(c))},l(s,"update","Grid.update  replaced by Matter.Detector"),s.clear=function(c){c.buckets={},c.pairs={},c.pairsList=[]},l(s,"clear","Grid.clear  replaced by Matter.Detector"),s._regionUnion=function(c,u){var d=Math.min(c.startCol,u.startCol),f=Math.max(c.endCol,u.endCol),h=Math.min(c.startRow,u.startRow),p=Math.max(c.endRow,u.endRow);return s._createRegion(d,f,h,p)},s._getRegion=function(c,u){var d=u.bounds,f=Math.floor(d.min.x/c.bucketWidth),h=Math.floor(d.max.x/c.bucketWidth),p=Math.floor(d.min.y/c.bucketHeight),g=Math.floor(d.max.y/c.bucketHeight);return s._createRegion(f,h,p,g)},s._createRegion=function(c,u,d,f){return{id:c+","+u+","+d+","+f,startCol:c,endCol:u,startRow:d,endRow:f}},s._getBucketId=function(c,u){return"C"+c+"R"+u},s._createBucket=function(c,u){var d=c[u]=[];return d},s._bucketAddBody=function(c,u,d){var f=c.pairs,h=a.id,p=u.length,g;for(g=0;g<p;g++){var v=u[g];if(!(d.id===v.id||d.isStatic&&v.isStatic)){var y=h(d,v),w=f[y];w?w[2]+=1:f[y]=[d,v,1]}}u.push(d)},s._bucketRemoveBody=function(c,u,d){var f=c.pairs,h=a.id,p;u.splice(o.indexOf(u,d),1);var g=u.length;for(p=0;p<g;p++){var v=f[h(d,u[p])];v&&(v[2]-=1)}},s._createActivePairsList=function(c){var u,d=c.pairs,f=o.keys(d),h=f.length,p=[],g;for(g=0;g<h;g++)u=d[f[g]],u[2]>0?p.push(u):delete d[f[g]];return p}})()},function(n,i,r){var s={};n.exports=s;var a=r(3),o=r(7),l=r(14),c=r(5),u=r(13),d=r(10),f=r(6),h=r(0),p=r(1);(function(){s.create=function(g,v){var y=(g?g.mouse:null)||(v?v.mouse:null);y||(g&&g.render&&g.render.canvas?y=l.create(g.render.canvas):v&&v.element?y=l.create(v.element):(y=l.create(),h.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var w=d.create({label:"Mouse Constraint",pointA:y.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),b={type:"mouseConstraint",mouse:y,element:null,body:null,constraint:w,collisionFilter:{category:1,mask:4294967295,group:0}},R=h.extend(b,v);return c.on(g,"beforeUpdate",function(){var S=f.allBodies(g.world);s.update(R,S),s._triggerEvents(R)}),R},s.update=function(g,v){var y=g.mouse,w=g.constraint,b=g.body;if(y.button===0){if(w.bodyB)o.set(w.bodyB,!1),w.pointA=y.position;else for(var R=0;R<v.length;R++)if(b=v[R],p.contains(b.bounds,y.position)&&u.canCollide(b.collisionFilter,g.collisionFilter))for(var S=b.parts.length>1?1:0;S<b.parts.length;S++){var C=b.parts[S];if(a.contains(C.vertices,y.position)){w.pointA=y.position,w.bodyB=g.body=b,w.pointB={x:y.position.x-b.position.x,y:y.position.y-b.position.y},w.angleB=b.angle,o.set(b,!1),c.trigger(g,"startdrag",{mouse:y,body:b});break}}}else w.bodyB=g.body=null,w.pointB=null,b&&c.trigger(g,"enddrag",{mouse:y,body:b})},s._triggerEvents=function(g){var v=g.mouse,y=v.sourceEvents;y.mousemove&&c.trigger(g,"mousemove",{mouse:v}),y.mousedown&&c.trigger(g,"mousedown",{mouse:v}),y.mouseup&&c.trigger(g,"mouseup",{mouse:v}),l.clearSourceEvents(v)}})()},function(n,i,r){var s={};n.exports=s;var a=r(2),o=r(8),l=r(1),c=r(12),u=r(3);(function(){s.collides=function(d,f){for(var h=[],p=f.length,g=d.bounds,v=o.collides,y=l.overlaps,w=0;w<p;w++){var b=f[w],R=b.parts.length,S=R===1?0:1;if(y(b.bounds,g))for(var C=S;C<R;C++){var x=b.parts[C];if(y(x.bounds,g)){var T=v(x,d);if(T){h.push(T);break}}}}return h},s.ray=function(d,f,h,p){p=p||1e-100;for(var g=a.angle(f,h),v=a.magnitude(a.sub(f,h)),y=(h.x+f.x)*.5,w=(h.y+f.y)*.5,b=c.rectangle(y,w,v,p,{angle:g}),R=s.collides(b,d),S=0;S<R.length;S+=1){var C=R[S];C.body=C.bodyB=C.bodyA}return R},s.region=function(d,f,h){for(var p=[],g=0;g<d.length;g++){var v=d[g],y=l.overlaps(v.bounds,f);(y&&!h||!y&&h)&&p.push(v)}return p},s.point=function(d,f){for(var h=[],p=0;p<d.length;p++){var g=d[p];if(l.contains(g.bounds,f))for(var v=g.parts.length===1?0:1;v<g.parts.length;v++){var y=g.parts[v];if(l.contains(y.bounds,f)&&u.contains(y.vertices,f)){h.push(g);break}}}return h}})()},function(n,i,r){var s={};n.exports=s;var a=r(4),o=r(0),l=r(6),c=r(1),u=r(5),d=r(2),f=r(14);(function(){var h,p;typeof window<"u"&&(h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(S){window.setTimeout(function(){S(o.now())},1e3/60)},p=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),s._goodFps=30,s._goodDelta=1e3/60,s.create=function(S){var C={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!S.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},x=o.extend(C,S);return x.canvas&&(x.canvas.width=x.options.width||x.canvas.width,x.canvas.height=x.options.height||x.canvas.height),x.mouse=S.mouse,x.engine=S.engine,x.canvas=x.canvas||y(x.options.width,x.options.height),x.context=x.canvas.getContext("2d"),x.textures={},x.bounds=x.bounds||{min:{x:0,y:0},max:{x:x.canvas.width,y:x.canvas.height}},x.controller=s,x.options.showBroadphase=!1,x.options.pixelRatio!==1&&s.setPixelRatio(x,x.options.pixelRatio),o.isElement(x.element)&&x.element.appendChild(x.canvas),x},s.run=function(S){(function C(x){S.frameRequestId=h(C),g(S,x),s.world(S,x),S.context.setTransform(S.options.pixelRatio,0,0,S.options.pixelRatio,0,0),(S.options.showStats||S.options.showDebug)&&s.stats(S,S.context,x),(S.options.showPerformance||S.options.showDebug)&&s.performance(S,S.context,x),S.context.setTransform(1,0,0,1,0,0)})()},s.stop=function(S){p(S.frameRequestId)},s.setPixelRatio=function(S,C){var x=S.options,T=S.canvas;C==="auto"&&(C=w(T)),x.pixelRatio=C,T.setAttribute("data-pixel-ratio",C),T.width=x.width*C,T.height=x.height*C,T.style.width=x.width+"px",T.style.height=x.height+"px"},s.setSize=function(S,C,x){S.options.width=C,S.options.height=x,S.bounds.max.x=S.bounds.min.x+C,S.bounds.max.y=S.bounds.min.y+x,S.options.pixelRatio!==1?s.setPixelRatio(S,S.options.pixelRatio):(S.canvas.width=C,S.canvas.height=x)},s.lookAt=function(S,C,x,T){T=typeof T<"u"?T:!0,C=o.isArray(C)?C:[C],x=x||{x:0,y:0};for(var A={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},I=0;I<C.length;I+=1){var P=C[I],k=P.bounds?P.bounds.min:P.min||P.position||P,D=P.bounds?P.bounds.max:P.max||P.position||P;k&&D&&(k.x<A.min.x&&(A.min.x=k.x),D.x>A.max.x&&(A.max.x=D.x),k.y<A.min.y&&(A.min.y=k.y),D.y>A.max.y&&(A.max.y=D.y))}var V=A.max.x-A.min.x+2*x.x,z=A.max.y-A.min.y+2*x.y,L=S.canvas.height,F=S.canvas.width,$=F/L,Q=V/z,te=1,ce=1;Q>$?ce=Q/$:te=$/Q,S.options.hasBounds=!0,S.bounds.min.x=A.min.x,S.bounds.max.x=A.min.x+V*te,S.bounds.min.y=A.min.y,S.bounds.max.y=A.min.y+z*ce,T&&(S.bounds.min.x+=V*.5-V*te*.5,S.bounds.max.x+=V*.5-V*te*.5,S.bounds.min.y+=z*.5-z*ce*.5,S.bounds.max.y+=z*.5-z*ce*.5),S.bounds.min.x-=x.x,S.bounds.max.x-=x.x,S.bounds.min.y-=x.y,S.bounds.max.y-=x.y,S.mouse&&(f.setScale(S.mouse,{x:(S.bounds.max.x-S.bounds.min.x)/S.canvas.width,y:(S.bounds.max.y-S.bounds.min.y)/S.canvas.height}),f.setOffset(S.mouse,S.bounds.min))},s.startViewTransform=function(S){var C=S.bounds.max.x-S.bounds.min.x,x=S.bounds.max.y-S.bounds.min.y,T=C/S.options.width,A=x/S.options.height;S.context.setTransform(S.options.pixelRatio/T,0,0,S.options.pixelRatio/A,0,0),S.context.translate(-S.bounds.min.x,-S.bounds.min.y)},s.endViewTransform=function(S){S.context.setTransform(S.options.pixelRatio,0,0,S.options.pixelRatio,0,0)},s.world=function(S,C){var x=o.now(),T=S.engine,A=T.world,I=S.canvas,P=S.context,k=S.options,D=S.timing,V=l.allBodies(A),z=l.allConstraints(A),L=k.wireframes?k.wireframeBackground:k.background,F=[],$=[],Q,te={timestamp:T.timing.timestamp};if(u.trigger(S,"beforeRender",te),S.currentBackground!==L&&R(S,L),P.globalCompositeOperation="source-in",P.fillStyle="transparent",P.fillRect(0,0,I.width,I.height),P.globalCompositeOperation="source-over",k.hasBounds){for(Q=0;Q<V.length;Q++){var ce=V[Q];c.overlaps(ce.bounds,S.bounds)&&F.push(ce)}for(Q=0;Q<z.length;Q++){var Z=z[Q],ae=Z.bodyA,Me=Z.bodyB,ot=Z.pointA,pe=Z.pointB;ae&&(ot=d.add(ae.position,Z.pointA)),Me&&(pe=d.add(Me.position,Z.pointB)),!(!ot||!pe)&&(c.contains(S.bounds,ot)||c.contains(S.bounds,pe))&&$.push(Z)}s.startViewTransform(S),S.mouse&&(f.setScale(S.mouse,{x:(S.bounds.max.x-S.bounds.min.x)/S.options.width,y:(S.bounds.max.y-S.bounds.min.y)/S.options.height}),f.setOffset(S.mouse,S.bounds.min))}else $=z,F=V,S.options.pixelRatio!==1&&S.context.setTransform(S.options.pixelRatio,0,0,S.options.pixelRatio,0,0);!k.wireframes||T.enableSleeping&&k.showSleeping?s.bodies(S,F,P):(k.showConvexHulls&&s.bodyConvexHulls(S,F,P),s.bodyWireframes(S,F,P)),k.showBounds&&s.bodyBounds(S,F,P),(k.showAxes||k.showAngleIndicator)&&s.bodyAxes(S,F,P),k.showPositions&&s.bodyPositions(S,F,P),k.showVelocity&&s.bodyVelocity(S,F,P),k.showIds&&s.bodyIds(S,F,P),k.showSeparations&&s.separations(S,T.pairs.list,P),k.showCollisions&&s.collisions(S,T.pairs.list,P),k.showVertexNumbers&&s.vertexNumbers(S,F,P),k.showMousePosition&&s.mousePosition(S,S.mouse,P),s.constraints($,P),k.hasBounds&&s.endViewTransform(S),u.trigger(S,"afterRender",te),D.lastElapsed=o.now()-x},s.stats=function(S,C,x){for(var T=S.engine,A=T.world,I=l.allBodies(A),P=0,k=55,D=44,V=0,z=0,L=0;L<I.length;L+=1)P+=I[L].parts.length;var F={Part:P,Body:I.length,Cons:l.allConstraints(A).length,Comp:l.allComposites(A).length,Pair:T.pairs.list.length};C.fillStyle="#0e0f19",C.fillRect(V,z,k*5.5,D),C.font="12px Arial",C.textBaseline="top",C.textAlign="right";for(var $ in F){var Q=F[$];C.fillStyle="#aaa",C.fillText($,V+k,z+8),C.fillStyle="#eee",C.fillText(Q,V+k,z+26),V+=k}},s.performance=function(S,C){var x=S.engine,T=S.timing,A=T.deltaHistory,I=T.elapsedHistory,P=T.timestampElapsedHistory,k=T.engineDeltaHistory,D=T.engineUpdatesHistory,V=T.engineElapsedHistory,z=x.timing.lastUpdatesPerFrame,L=x.timing.lastDelta,F=v(A),$=v(I),Q=v(k),te=v(D),ce=v(V),Z=v(P),ae=Z/F||0,Me=Math.round(F/L),ot=1e3/F||0,pe=4,Lt=12,lt=60,Bn=34,An=10,li=69;C.fillStyle="#0e0f19",C.fillRect(0,50,Lt*5+lt*6+22,Bn),s.status(C,An,li,lt,pe,A.length,Math.round(ot)+" fps",ot/s._goodFps,function(Qt){return A[Qt]/F-1}),s.status(C,An+Lt+lt,li,lt,pe,k.length,L.toFixed(2)+" dt",s._goodDelta/L,function(Qt){return k[Qt]/Q-1}),s.status(C,An+(Lt+lt)*2,li,lt,pe,D.length,z+" upf",Math.pow(o.clamp(te/Me||1,0,1),4),function(Qt){return D[Qt]/te-1}),s.status(C,An+(Lt+lt)*3,li,lt,pe,V.length,ce.toFixed(2)+" ut",1-z*ce/s._goodFps,function(Qt){return V[Qt]/ce-1}),s.status(C,An+(Lt+lt)*4,li,lt,pe,I.length,$.toFixed(2)+" rt",1-$/s._goodFps,function(Qt){return I[Qt]/$-1}),s.status(C,An+(Lt+lt)*5,li,lt,pe,P.length,ae.toFixed(2)+" x",ae*ae*ae,function(Qt){return(P[Qt]/A[Qt]/ae||0)-1})},s.status=function(S,C,x,T,A,I,P,k,D){S.strokeStyle="#888",S.fillStyle="#444",S.lineWidth=1,S.fillRect(C,x+7,T,1),S.beginPath(),S.moveTo(C,x+7-A*o.clamp(.4*D(0),-2,2));for(var V=0;V<T;V+=1)S.lineTo(C+V,x+7-(V<I?A*o.clamp(.4*D(V),-2,2):0));S.stroke(),S.fillStyle="hsl("+o.clamp(25+95*k,0,120)+",100%,60%)",S.fillRect(C,x-7,4,4),S.font="12px Arial",S.textBaseline="middle",S.textAlign="right",S.fillStyle="#eee",S.fillText(P,C+T,x-5)},s.constraints=function(S,C){for(var x=C,T=0;T<S.length;T++){var A=S[T];if(!(!A.render.visible||!A.pointA||!A.pointB)){var I=A.bodyA,P=A.bodyB,k,D;if(I?k=d.add(I.position,A.pointA):k=A.pointA,A.render.type==="pin")x.beginPath(),x.arc(k.x,k.y,3,0,2*Math.PI),x.closePath();else{if(P?D=d.add(P.position,A.pointB):D=A.pointB,x.beginPath(),x.moveTo(k.x,k.y),A.render.type==="spring")for(var V=d.sub(D,k),z=d.perp(d.normalise(V)),L=Math.ceil(o.clamp(A.length/5,12,20)),F,$=1;$<L;$+=1)F=$%2===0?1:-1,x.lineTo(k.x+V.x*($/L)+z.x*F*4,k.y+V.y*($/L)+z.y*F*4);x.lineTo(D.x,D.y)}A.render.lineWidth&&(x.lineWidth=A.render.lineWidth,x.strokeStyle=A.render.strokeStyle,x.stroke()),A.render.anchors&&(x.fillStyle=A.render.strokeStyle,x.beginPath(),x.arc(k.x,k.y,3,0,2*Math.PI),x.arc(D.x,D.y,3,0,2*Math.PI),x.closePath(),x.fill())}}},s.bodies=function(S,C,x){var T=x;S.engine;var A=S.options,I=A.showInternalEdges||!A.wireframes,P,k,D,V;for(D=0;D<C.length;D++)if(P=C[D],!!P.render.visible){for(V=P.parts.length>1?1:0;V<P.parts.length;V++)if(k=P.parts[V],!!k.render.visible){if(A.showSleeping&&P.isSleeping?T.globalAlpha=.5*k.render.opacity:k.render.opacity!==1&&(T.globalAlpha=k.render.opacity),k.render.sprite&&k.render.sprite.texture&&!A.wireframes){var z=k.render.sprite,L=b(S,z.texture);T.translate(k.position.x,k.position.y),T.rotate(k.angle),T.drawImage(L,L.width*-z.xOffset*z.xScale,L.height*-z.yOffset*z.yScale,L.width*z.xScale,L.height*z.yScale),T.rotate(-k.angle),T.translate(-k.position.x,-k.position.y)}else{if(k.circleRadius)T.beginPath(),T.arc(k.position.x,k.position.y,k.circleRadius,0,2*Math.PI);else{T.beginPath(),T.moveTo(k.vertices[0].x,k.vertices[0].y);for(var F=1;F<k.vertices.length;F++)!k.vertices[F-1].isInternal||I?T.lineTo(k.vertices[F].x,k.vertices[F].y):T.moveTo(k.vertices[F].x,k.vertices[F].y),k.vertices[F].isInternal&&!I&&T.moveTo(k.vertices[(F+1)%k.vertices.length].x,k.vertices[(F+1)%k.vertices.length].y);T.lineTo(k.vertices[0].x,k.vertices[0].y),T.closePath()}A.wireframes?(T.lineWidth=1,T.strokeStyle=S.options.wireframeStrokeStyle,T.stroke()):(T.fillStyle=k.render.fillStyle,k.render.lineWidth&&(T.lineWidth=k.render.lineWidth,T.strokeStyle=k.render.strokeStyle,T.stroke()),T.fill())}T.globalAlpha=1}}},s.bodyWireframes=function(S,C,x){var T=x,A=S.options.showInternalEdges,I,P,k,D,V;for(T.beginPath(),k=0;k<C.length;k++)if(I=C[k],!!I.render.visible)for(V=I.parts.length>1?1:0;V<I.parts.length;V++){for(P=I.parts[V],T.moveTo(P.vertices[0].x,P.vertices[0].y),D=1;D<P.vertices.length;D++)!P.vertices[D-1].isInternal||A?T.lineTo(P.vertices[D].x,P.vertices[D].y):T.moveTo(P.vertices[D].x,P.vertices[D].y),P.vertices[D].isInternal&&!A&&T.moveTo(P.vertices[(D+1)%P.vertices.length].x,P.vertices[(D+1)%P.vertices.length].y);T.lineTo(P.vertices[0].x,P.vertices[0].y)}T.lineWidth=1,T.strokeStyle=S.options.wireframeStrokeStyle,T.stroke()},s.bodyConvexHulls=function(S,C,x){var T=x,A,I,P;for(T.beginPath(),I=0;I<C.length;I++)if(A=C[I],!(!A.render.visible||A.parts.length===1)){for(T.moveTo(A.vertices[0].x,A.vertices[0].y),P=1;P<A.vertices.length;P++)T.lineTo(A.vertices[P].x,A.vertices[P].y);T.lineTo(A.vertices[0].x,A.vertices[0].y)}T.lineWidth=1,T.strokeStyle="rgba(255,255,255,0.2)",T.stroke()},s.vertexNumbers=function(S,C,x){var T=x,A,I,P;for(A=0;A<C.length;A++){var k=C[A].parts;for(P=k.length>1?1:0;P<k.length;P++){var D=k[P];for(I=0;I<D.vertices.length;I++)T.fillStyle="rgba(255,255,255,0.2)",T.fillText(A+"_"+I,D.position.x+(D.vertices[I].x-D.position.x)*.8,D.position.y+(D.vertices[I].y-D.position.y)*.8)}}},s.mousePosition=function(S,C,x){var T=x;T.fillStyle="rgba(255,255,255,0.8)",T.fillText(C.position.x+"  "+C.position.y,C.position.x+5,C.position.y-5)},s.bodyBounds=function(S,C,x){var T=x;S.engine;var A=S.options;T.beginPath();for(var I=0;I<C.length;I++){var P=C[I];if(P.render.visible)for(var k=C[I].parts,D=k.length>1?1:0;D<k.length;D++){var V=k[D];T.rect(V.bounds.min.x,V.bounds.min.y,V.bounds.max.x-V.bounds.min.x,V.bounds.max.y-V.bounds.min.y)}}A.wireframes?T.strokeStyle="rgba(255,255,255,0.08)":T.strokeStyle="rgba(0,0,0,0.1)",T.lineWidth=1,T.stroke()},s.bodyAxes=function(S,C,x){var T=x;S.engine;var A=S.options,I,P,k,D;for(T.beginPath(),P=0;P<C.length;P++){var V=C[P],z=V.parts;if(V.render.visible)if(A.showAxes)for(k=z.length>1?1:0;k<z.length;k++)for(I=z[k],D=0;D<I.axes.length;D++){var L=I.axes[D];T.moveTo(I.position.x,I.position.y),T.lineTo(I.position.x+L.x*20,I.position.y+L.y*20)}else for(k=z.length>1?1:0;k<z.length;k++)for(I=z[k],D=0;D<I.axes.length;D++)T.moveTo(I.position.x,I.position.y),T.lineTo((I.vertices[0].x+I.vertices[I.vertices.length-1].x)/2,(I.vertices[0].y+I.vertices[I.vertices.length-1].y)/2)}A.wireframes?(T.strokeStyle="indianred",T.lineWidth=1):(T.strokeStyle="rgba(255, 255, 255, 0.4)",T.globalCompositeOperation="overlay",T.lineWidth=2),T.stroke(),T.globalCompositeOperation="source-over"},s.bodyPositions=function(S,C,x){var T=x;S.engine;var A=S.options,I,P,k,D;for(T.beginPath(),k=0;k<C.length;k++)if(I=C[k],!!I.render.visible)for(D=0;D<I.parts.length;D++)P=I.parts[D],T.arc(P.position.x,P.position.y,3,0,2*Math.PI,!1),T.closePath();for(A.wireframes?T.fillStyle="indianred":T.fillStyle="rgba(0,0,0,0.5)",T.fill(),T.beginPath(),k=0;k<C.length;k++)I=C[k],I.render.visible&&(T.arc(I.positionPrev.x,I.positionPrev.y,2,0,2*Math.PI,!1),T.closePath());T.fillStyle="rgba(255,165,0,0.8)",T.fill()},s.bodyVelocity=function(S,C,x){var T=x;T.beginPath();for(var A=0;A<C.length;A++){var I=C[A];if(I.render.visible){var P=a.getVelocity(I);T.moveTo(I.position.x,I.position.y),T.lineTo(I.position.x+P.x,I.position.y+P.y)}}T.lineWidth=3,T.strokeStyle="cornflowerblue",T.stroke()},s.bodyIds=function(S,C,x){var T=x,A,I;for(A=0;A<C.length;A++)if(C[A].render.visible){var P=C[A].parts;for(I=P.length>1?1:0;I<P.length;I++){var k=P[I];T.font="12px Arial",T.fillStyle="rgba(255,255,255,0.5)",T.fillText(k.id,k.position.x+10,k.position.y-10)}}},s.collisions=function(S,C,x){var T=x,A=S.options,I,P,k,D;for(T.beginPath(),k=0;k<C.length;k++)if(I=C[k],!!I.isActive)for(P=I.collision,D=0;D<I.contactCount;D++){var V=I.contacts[D],z=V.vertex;T.rect(z.x-1.5,z.y-1.5,3.5,3.5)}for(A.wireframes?T.fillStyle="rgba(255,255,255,0.7)":T.fillStyle="orange",T.fill(),T.beginPath(),k=0;k<C.length;k++)if(I=C[k],!!I.isActive&&(P=I.collision,I.contactCount>0)){var L=I.contacts[0].vertex.x,F=I.contacts[0].vertex.y;I.contactCount===2&&(L=(I.contacts[0].vertex.x+I.contacts[1].vertex.x)/2,F=(I.contacts[0].vertex.y+I.contacts[1].vertex.y)/2),P.bodyB===P.supports[0].body||P.bodyA.isStatic===!0?T.moveTo(L-P.normal.x*8,F-P.normal.y*8):T.moveTo(L+P.normal.x*8,F+P.normal.y*8),T.lineTo(L,F)}A.wireframes?T.strokeStyle="rgba(255,165,0,0.7)":T.strokeStyle="orange",T.lineWidth=1,T.stroke()},s.separations=function(S,C,x){var T=x,A=S.options,I,P,k,D,V;for(T.beginPath(),V=0;V<C.length;V++)if(I=C[V],!!I.isActive){P=I.collision,k=P.bodyA,D=P.bodyB;var z=1;!D.isStatic&&!k.isStatic&&(z=.5),D.isStatic&&(z=0),T.moveTo(D.position.x,D.position.y),T.lineTo(D.position.x-P.penetration.x*z,D.position.y-P.penetration.y*z),z=1,!D.isStatic&&!k.isStatic&&(z=.5),k.isStatic&&(z=0),T.moveTo(k.position.x,k.position.y),T.lineTo(k.position.x+P.penetration.x*z,k.position.y+P.penetration.y*z)}A.wireframes?T.strokeStyle="rgba(255,165,0,0.5)":T.strokeStyle="orange",T.stroke()},s.inspector=function(S,C){S.engine;var x=S.selected,T=S.render,A=T.options,I;if(A.hasBounds){var P=T.bounds.max.x-T.bounds.min.x,k=T.bounds.max.y-T.bounds.min.y,D=P/T.options.width,V=k/T.options.height;C.scale(1/D,1/V),C.translate(-T.bounds.min.x,-T.bounds.min.y)}for(var z=0;z<x.length;z++){var L=x[z].data;switch(C.translate(.5,.5),C.lineWidth=1,C.strokeStyle="rgba(255,165,0,0.9)",C.setLineDash([1,2]),L.type){case"body":I=L.bounds,C.beginPath(),C.rect(Math.floor(I.min.x-3),Math.floor(I.min.y-3),Math.floor(I.max.x-I.min.x+6),Math.floor(I.max.y-I.min.y+6)),C.closePath(),C.stroke();break;case"constraint":var F=L.pointA;L.bodyA&&(F=L.pointB),C.beginPath(),C.arc(F.x,F.y,10,0,2*Math.PI),C.closePath(),C.stroke();break}C.setLineDash([]),C.translate(-.5,-.5)}S.selectStart!==null&&(C.translate(.5,.5),C.lineWidth=1,C.strokeStyle="rgba(255,165,0,0.6)",C.fillStyle="rgba(255,165,0,0.1)",I=S.selectBounds,C.beginPath(),C.rect(Math.floor(I.min.x),Math.floor(I.min.y),Math.floor(I.max.x-I.min.x),Math.floor(I.max.y-I.min.y)),C.closePath(),C.stroke(),C.fill(),C.translate(-.5,-.5)),A.hasBounds&&C.setTransform(1,0,0,1,0,0)};var g=function(S,C){var x=S.engine,T=S.timing,A=T.historySize,I=x.timing.timestamp;T.delta=C-T.lastTime||s._goodDelta,T.lastTime=C,T.timestampElapsed=I-T.lastTimestamp||0,T.lastTimestamp=I,T.deltaHistory.unshift(T.delta),T.deltaHistory.length=Math.min(T.deltaHistory.length,A),T.engineDeltaHistory.unshift(x.timing.lastDelta),T.engineDeltaHistory.length=Math.min(T.engineDeltaHistory.length,A),T.timestampElapsedHistory.unshift(T.timestampElapsed),T.timestampElapsedHistory.length=Math.min(T.timestampElapsedHistory.length,A),T.engineUpdatesHistory.unshift(x.timing.lastUpdatesPerFrame),T.engineUpdatesHistory.length=Math.min(T.engineUpdatesHistory.length,A),T.engineElapsedHistory.unshift(x.timing.lastElapsed),T.engineElapsedHistory.length=Math.min(T.engineElapsedHistory.length,A),T.elapsedHistory.unshift(T.lastElapsed),T.elapsedHistory.length=Math.min(T.elapsedHistory.length,A)},v=function(S){for(var C=0,x=0;x<S.length;x+=1)C+=S[x];return C/S.length||0},y=function(S,C){var x=document.createElement("canvas");return x.width=S,x.height=C,x.oncontextmenu=function(){return!1},x.onselectstart=function(){return!1},x},w=function(S){var C=S.getContext("2d"),x=window.devicePixelRatio||1,T=C.webkitBackingStorePixelRatio||C.mozBackingStorePixelRatio||C.msBackingStorePixelRatio||C.oBackingStorePixelRatio||C.backingStorePixelRatio||1;return x/T},b=function(S,C){var x=S.textures[C];return x||(x=S.textures[C]=new Image,x.src=C,x)},R=function(S,C){var x=C;/(jpg|gif|png)$/.test(C)&&(x="url("+C+")"),S.canvas.style.background=x,S.canvas.style.backgroundSize="contain",S.currentBackground=C}})()},function(n,i,r){var s={};n.exports=s;var a=r(5),o=r(17),l=r(0);(function(){s._maxFrameDelta=1e3/15,s._frameDeltaFallback=1e3/60,s._timeBufferMargin=1.5,s._elapsedNextEstimate=1,s._smoothingLowerBound=.1,s._smoothingUpperBound=.9,s.create=function(u){var d={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},f=l.extend(d,u);return f.fps=0,f},s.run=function(u,d){return u.timeBuffer=s._frameDeltaFallback,function f(h){u.frameRequestId=s._onNextFrame(u,f),h&&u.enabled&&s.tick(u,d,h)}(),u},s.tick=function(u,d,f){var h=l.now(),p=u.delta,g=0,v=f-u.timeLastTick;if((!v||!u.timeLastTick||v>Math.max(s._maxFrameDelta,u.maxFrameTime))&&(v=u.frameDelta||s._frameDeltaFallback),u.frameDeltaSmoothing){u.frameDeltaHistory.push(v),u.frameDeltaHistory=u.frameDeltaHistory.slice(-u.frameDeltaHistorySize);var y=u.frameDeltaHistory.slice(0).sort(),w=u.frameDeltaHistory.slice(y.length*s._smoothingLowerBound,y.length*s._smoothingUpperBound),b=c(w);v=b||v}u.frameDeltaSnapping&&(v=1e3/Math.round(1e3/v)),u.frameDelta=v,u.timeLastTick=f,u.timeBuffer+=u.frameDelta,u.timeBuffer=l.clamp(u.timeBuffer,0,u.frameDelta+p*s._timeBufferMargin),u.lastUpdatesDeferred=0;var R=u.maxUpdates||Math.ceil(u.maxFrameTime/p),S={timestamp:d.timing.timestamp};a.trigger(u,"beforeTick",S),a.trigger(u,"tick",S);for(var C=l.now();p>0&&u.timeBuffer>=p*s._timeBufferMargin;){a.trigger(u,"beforeUpdate",S),o.update(d,p),a.trigger(u,"afterUpdate",S),u.timeBuffer-=p,g+=1;var x=l.now()-h,T=l.now()-C,A=x+s._elapsedNextEstimate*T/g;if(g>=R||A>u.maxFrameTime){u.lastUpdatesDeferred=Math.round(Math.max(0,u.timeBuffer/p-s._timeBufferMargin));break}}d.timing.lastUpdatesPerFrame=g,a.trigger(u,"afterTick",S),u.frameDeltaHistory.length>=100&&(u.lastUpdatesDeferred&&Math.round(u.frameDelta/p)>R?l.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):u.lastUpdatesDeferred&&l.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof u.isFixed<"u"&&l.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(u.deltaMin||u.deltaMax)&&l.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),u.fps!==0&&l.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},s.stop=function(u){s._cancelNextFrame(u)},s._onNextFrame=function(u,d){if(typeof window<"u"&&window.requestAnimationFrame)u.frameRequestId=window.requestAnimationFrame(d);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return u.frameRequestId},s._cancelNextFrame=function(u){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(u.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var c=function(u){for(var d=0,f=u.length,h=0;h<f;h+=1)d+=u[h];return d/f||0}})()},function(n,i,r){var s={};n.exports=s;var a=r(8),o=r(0),l=o.deprecated;(function(){s.collides=function(c,u){return a.collides(c,u)},l(s,"collides","SAT.collides  replaced by Collision.collides")})()},function(n,i,r){var s={};n.exports=s,r(1);var a=r(0);(function(){s.pathToVertices=function(o,l){typeof window<"u"&&!("SVGPathSeg"in window)&&a.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,u,d,f,h,p,g,v,y,w,b=[],R,S,C=0,x=0,T=0;l=l||15;var A=function(P,k,D){var V=D%2===1&&D>1;if(!y||P!=y.x||k!=y.y){y&&V?(R=y.x,S=y.y):(R=0,S=0);var z={x:R+P,y:S+k};(V||!y)&&(y=z),b.push(z),x=R+P,T=S+k}},I=function(P){var k=P.pathSegTypeAsLetter.toUpperCase();if(k!=="Z"){switch(k){case"M":case"L":case"T":case"C":case"S":case"Q":x=P.x,T=P.y;break;case"H":x=P.x;break;case"V":T=P.y;break}A(x,T,P.pathSegType)}};for(s._svgPathToAbsolute(o),d=o.getTotalLength(),p=[],c=0;c<o.pathSegList.numberOfItems;c+=1)p.push(o.pathSegList.getItem(c));for(g=p.concat();C<d;){if(w=o.getPathSegAtLength(C),h=p[w],h!=v){for(;g.length&&g[0]!=h;)I(g.shift());v=h}switch(h.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":f=o.getPointAtLength(C),A(f.x,f.y,0);break}C+=l}for(c=0,u=g.length;c<u;++c)I(g[c]);return b},s._svgPathToAbsolute=function(o){for(var l,c,u,d,f,h,p=o.pathSegList,g=0,v=0,y=p.numberOfItems,w=0;w<y;++w){var b=p.getItem(w),R=b.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(R))"x"in b&&(g=b.x),"y"in b&&(v=b.y);else switch("x1"in b&&(u=g+b.x1),"x2"in b&&(f=g+b.x2),"y1"in b&&(d=v+b.y1),"y2"in b&&(h=v+b.y2),"x"in b&&(g+=b.x),"y"in b&&(v+=b.y),R){case"m":p.replaceItem(o.createSVGPathSegMovetoAbs(g,v),w);break;case"l":p.replaceItem(o.createSVGPathSegLinetoAbs(g,v),w);break;case"h":p.replaceItem(o.createSVGPathSegLinetoHorizontalAbs(g),w);break;case"v":p.replaceItem(o.createSVGPathSegLinetoVerticalAbs(v),w);break;case"c":p.replaceItem(o.createSVGPathSegCurvetoCubicAbs(g,v,u,d,f,h),w);break;case"s":p.replaceItem(o.createSVGPathSegCurvetoCubicSmoothAbs(g,v,f,h),w);break;case"q":p.replaceItem(o.createSVGPathSegCurvetoQuadraticAbs(g,v,u,d),w);break;case"t":p.replaceItem(o.createSVGPathSegCurvetoQuadraticSmoothAbs(g,v),w);break;case"a":p.replaceItem(o.createSVGPathSegArcAbs(g,v,b.r1,b.r2,b.angle,b.largeArcFlag,b.sweepFlag),w);break;case"z":case"Z":g=l,v=c;break}(R=="M"||R=="m")&&(l=g,c=v)}}})()},function(n,i,r){var s={};n.exports=s;var a=r(6);r(0),function(){s.create=a.create,s.add=a.add,s.remove=a.remove,s.clear=a.clear,s.addComposite=a.addComposite,s.addBody=a.addBody,s.addConstraint=a.addConstraint}()}])})})(W5);var pte=W5.exports;const zt=Ow(pte),ym=[{id:"1",label:"5% OFF",value:5,type:"discount",color:"#EF4444"},{id:"2",label:"10% OFF",value:10,type:"discount",color:"#F97316"},{id:"3",label:"20% OFF",value:20,type:"discount",color:"#F59E0B"},{id:"4",label:"50% OFF",value:50,type:"discount",color:"#FBBF24"},{id:"5",label:"FREE!",value:100,type:"discount",color:"#10B981"},{id:"6",label:"50% OFF",value:50,type:"discount",color:"#FBBF24"},{id:"7",label:"20% OFF",value:20,type:"discount",color:"#F59E0B"},{id:"8",label:"10% OFF",value:10,type:"discount",color:"#F97316"},{id:"9",label:"5% OFF",value:5,type:"discount",color:"#EF4444"}],gte=({onPrizeWon:t,isDropping:e})=>{const n=M.useRef(null),i=M.useRef(null),r=M.useRef(null),s=M.useRef(null),a=M.useRef(null),o=M.useRef(null),[l,c]=M.useState(!1),[u,d]=M.useState({width:600,height:500});return M.useEffect(()=>{const f=()=>{if(n.current){const h=n.current.offsetWidth,p=Math.min(h-32,600),g=p*.7;d({width:p,height:g})}};return f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),M.useEffect(()=>{if(!i.current)return;const f=i.current,{width:h,height:p}=u,g=zt.Engine.create({gravity:{x:0,y:1.2}});r.current=g;const v=zt.Render.create({canvas:f,engine:g,options:{width:h,height:p,wireframes:!1,background:"transparent"}});s.current=v;const y=[zt.Bodies.rectangle(h/2,p+25,h,50,{isStatic:!0,render:{fillStyle:"transparent"}}),zt.Bodies.rectangle(-25,p/2,50,p,{isStatic:!0,render:{fillStyle:"transparent"}}),zt.Bodies.rectangle(h+25,p/2,50,p,{isStatic:!0,render:{fillStyle:"transparent"}})],w=[],b=10,R=Math.max(3,h*.0067),S=h*.05,C=h*.055,x=h*.083;for(let D=0;D<b;D++){const V=D+3;for(let z=0;z<V;z++){const L=(V-1)*x,$=(h-L)/2+z*x,Q=S+D*C,te=zt.Bodies.circle($,Q,R,{isStatic:!0,restitution:.8,render:{fillStyle:"#E5E7EB"}});w.push(te)}}const T=h/ym.length,A=p*.15,I=p-A/2,P=ym.map((D,V)=>{const z=T*V+T/2;return zt.Bodies.rectangle(z,I,T-4,A,{isStatic:!0,isSensor:!0,label:`slot-${V}`,render:{fillStyle:D.color,opacity:.8}})});zt.Composite.add(g.world,[...y,...w,...P]);const k=zt.Runner.create();return a.current=k,zt.Runner.run(k,g),zt.Render.run(v),zt.Events.on(g,"collisionStart",D=>{D.pairs.forEach(V=>{var F,$;const{bodyA:z,bodyB:L}=V;if(o.current&&(z===o.current||L===o.current)){const Q=(F=z.label)!=null&&F.startsWith("slot-")?z:L;if(($=Q.label)!=null&&$.startsWith("slot-")&&!l){c(!0);const te=parseInt(Q.label.split("-")[1]),ce=ym[te];setTimeout(()=>{t(ce)},800)}}})}),()=>{s.current&&zt.Render.stop(s.current),a.current&&zt.Runner.stop(a.current),zt.Engine.clear(g)}},[t,l,u]),M.useEffect(()=>{e&&r.current&&(c(!1),o.current&&(zt.Composite.remove(r.current.world,o.current),o.current=null),setTimeout(()=>{if(!r.current)return;const{width:f}=u,h=Math.max(8,f*.017),p=zt.Bodies.circle(f/2+(Math.random()-.5)*(f*.1),30,h,{restitution:.7,friction:.005,density:.04,render:{fillStyle:"#8B5CF6"}});o.current=p,zt.Composite.add(r.current.world,p)},100))},[e,u]),_.jsxs("div",{ref:n,className:"flex flex-col items-center w-full",children:[_.jsx("canvas",{ref:i,width:u.width,height:u.height,className:"rounded-xl bg-gradient-to-b from-slate-50 to-slate-100 shadow-inner w-full max-w-[600px]"}),_.jsx("div",{className:"grid grid-cols-9 w-full max-w-[600px] mt-2 gap-1 px-2",children:ym.map(f=>_.jsx("div",{className:"text-center py-2 rounded-lg font-bold text-xs",style:{backgroundColor:f.color,color:"#fff"},children:f.label},f.id))})]})};var np={linear:function(t,e,n,i){var r=n-e;return r*t/i+e},easeInQuad:function(t,e,n,i){var r=n-e;return r*(t/=i)*t+e},easeOutQuad:function(t,e,n,i){var r=n-e;return-r*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,n,i){var r=n-e;return(t/=i/2)<1?r/2*t*t+e:-r/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){var r=n-e;return r*(t/=i)*t*t+e},easeOutCubic:function(t,e,n,i){var r=n-e;return r*((t=t/i-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,i){var r=n-e;return(t/=i/2)<1?r/2*t*t*t+e:r/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,i){var r=n-e;return r*(t/=i)*t*t*t+e},easeOutQuart:function(t,e,n,i){var r=n-e;return-r*((t=t/i-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,i){var r=n-e;return(t/=i/2)<1?r/2*t*t*t*t+e:-r/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,i){var r=n-e;return r*(t/=i)*t*t*t*t+e},easeOutQuint:function(t,e,n,i){var r=n-e;return r*((t=t/i-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,i){var r=n-e;return(t/=i/2)<1?r/2*t*t*t*t*t+e:r/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,i){var r=n-e;return-r*Math.cos(t/i*(Math.PI/2))+r+e},easeOutSine:function(t,e,n,i){var r=n-e;return r*Math.sin(t/i*(Math.PI/2))+e},easeInOutSine:function(t,e,n,i){var r=n-e;return-r/2*(Math.cos(Math.PI*t/i)-1)+e},easeInExpo:function(t,e,n,i){var r=n-e;return t==0?e:r*Math.pow(2,10*(t/i-1))+e},easeOutExpo:function(t,e,n,i){var r=n-e;return t==i?e+r:r*(-Math.pow(2,-10*t/i)+1)+e},easeInOutExpo:function(t,e,n,i){var r=n-e;return t===0?e:t===i?e+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+e:r/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,i){var r=n-e;return-r*(Math.sqrt(1-(t/=i)*t)-1)+e},easeOutCirc:function(t,e,n,i){var r=n-e;return r*Math.sqrt(1-(t=t/i-1)*t)+e},easeInOutCirc:function(t,e,n,i){var r=n-e;return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+e:r/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,i){var r=n-e,s,a,o;return o=1.70158,a=0,s=r,t===0?e:(t/=i)===1?e+r:(a||(a=i*.3),s<Math.abs(r)?(s=r,o=a/4):o=a/(2*Math.PI)*Math.asin(r/s),-(s*Math.pow(2,10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/a))+e)},easeOutElastic:function(t,e,n,i){var r=n-e,s,a,o;return o=1.70158,a=0,s=r,t===0?e:(t/=i)===1?e+r:(a||(a=i*.3),s<Math.abs(r)?(s=r,o=a/4):o=a/(2*Math.PI)*Math.asin(r/s),s*Math.pow(2,-10*t)*Math.sin((t*i-o)*(2*Math.PI)/a)+r+e)},easeInOutElastic:function(t,e,n,i){var r=n-e,s,a,o;return o=1.70158,a=0,s=r,t===0?e:(t/=i/2)===2?e+r:(a||(a=i*(.3*1.5)),s<Math.abs(r)?(s=r,o=a/4):o=a/(2*Math.PI)*Math.asin(r/s),t<1?-.5*(s*Math.pow(2,10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/a))+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/a)*.5+r+e)},easeInBack:function(t,e,n,i,r){var s=n-e;return r===void 0&&(r=1.70158),s*(t/=i)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,n,i,r){var s=n-e;return r===void 0&&(r=1.70158),s*((t=t/i-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,n,i,r){var s=n-e;return r===void 0&&(r=1.70158),(t/=i/2)<1?s/2*(t*t*(((r*=1.525)+1)*t-r))+e:s/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},easeInBounce:function(t,e,n,i){var r=n-e,s;return s=np.easeOutBounce(i-t,0,r,i),r-s+e},easeOutBounce:function(t,e,n,i){var r=n-e;return(t/=i)<1/2.75?r*(7.5625*t*t)+e:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+e:r*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,i){var r=n-e,s;return t<i/2?(s=np.easeInBounce(t*2,0,r,i),s*.5+e):(s=np.easeOutBounce(t*2-i,0,r,i),s*.5+r*.5+e)}},yte=np;function vte(t){return t*Math.PI/180}function qn(t,e){return t+Math.random()*(e-t)}function _te(t,e){return Math.floor(t+Math.random()*(e-t+1))}var jh;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(jh||(jh={}));var Es;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Es||(Es={}));const wte=1e3/60;class bte{constructor(e,n,i,r){this.getOptions=n;const{colors:s,initialVelocityX:a,initialVelocityY:o}=this.getOptions();this.context=e,this.x=i,this.y=r,this.w=qn(5,20),this.h=qn(5,20),this.radius=qn(5,10),this.vx=typeof a=="number"?qn(-a,a):qn(a.min,a.max),this.vy=typeof o=="number"?qn(-o,0):qn(o.min,o.max),this.shape=_te(0,2),this.angle=vte(qn(0,360)),this.angularSpin=qn(-.2,.2),this.color=s[Math.floor(Math.random()*s.length)],this.rotateY=qn(0,1),this.rotationDirection=qn(0,1)?Es.Positive:Es.Negative}update(e){const{gravity:n,wind:i,friction:r,opacity:s,drawShape:a}=this.getOptions(),o=e/wte;this.x+=this.vx*o,this.y+=this.vy*o,this.vy+=n*o,this.vx+=i*o,this.vx*=r**o,this.vy*=r**o,this.rotateY>=1&&this.rotationDirection===Es.Positive?this.rotationDirection=Es.Negative:this.rotateY<=-1&&this.rotationDirection===Es.Negative&&(this.rotationDirection=Es.Positive);const l=.1*this.rotationDirection*o;if(this.rotateY+=l,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=s,this.context.lineCap="round",this.context.lineWidth=2,a&&typeof a=="function")a.call(this,this.context);else switch(this.shape){case jh.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case jh.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case jh.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class Tte{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=r=>{this.particles.splice(r,1)},this.getParticle=()=>{const r=qn(this.x,this.w+this.x),s=qn(this.y,this.h+this.y);return new bte(this.context,this.getOptions,r,s)},this.animate=r=>{const{canvas:s,context:a,particlesGenerated:o,lastNumberOfPieces:l}=this,{run:c,recycle:u,numberOfPieces:d,debug:f,tweenFunction:h,tweenDuration:p}=this.getOptions();if(!c)return!1;const g=this.particles.length,v=u?g:o;if(v<d){l!==d&&(this.tweenProgress=0,this.tweenFrom=v,this.lastNumberOfPieces=d),this.tweenProgress=Math.min(p,Math.max(0,this.tweenProgress+r));const y=h(this.tweenProgress,this.tweenFrom,d,p),w=Math.round(y-v);for(let b=0;b<w;b++)this.particles.push(this.getParticle());this.particlesGenerated+=w}f&&(a.font="12px sans-serif",a.fillStyle="#333",a.textAlign="right",a.fillText(`Particles: ${g}`,s.width-10,s.height-20));for(let y=this.particles.length-1;y>=0;y--){const w=this.particles[y];w.update(r),(w.y>s.height||w.y<-100||w.x>s.width+100||w.x<-100)&&(u&&v<=d?this.particles[y]=this.getParticle():this.removeParticleAt(y))}return g>0||v<d},this.canvas=e;const i=this.canvas.getContext("2d");if(!i)throw new Error("Could not get canvas context");this.context=i,this.getOptions=n}}const TE={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:yte.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class xte{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=r=>{const s={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...s,...TE,...r},Object.assign(this,r.confettiSource)},this.update=(r=0)=>{const{options:{run:s,onConfettiComplete:a,frameRate:o},canvas:l,context:c}=this,u=Math.min(r-this.lastFrameTime,50);if(o&&u<1e3/o){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=r-(o?u%o:0),s&&(c.fillStyle="white",c.clearRect(0,0,l.width,l.height)),this.generator.animate(u)?this.rafId=requestAnimationFrame(this.update):(a&&typeof a=="function"&&this.generator.particlesGenerated>0&&a.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const i=this.canvas.getContext("2d");if(!i)throw new Error("Could not get canvas context");this.context=i,this.generator=new Tte(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var r,s;const n=(r=this._options)==null?void 0:r.run,i=(s=this._options)==null?void 0:s.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&i===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const Ete=Xn.createRef();class xE extends Xn.Component{constructor(e){super(e),this.canvas=Xn.createRef(),this.canvas=e.canvasRef||Ete}componentDidMount(){if(this.canvas.current){const e=E0(this.props)[0];this.confetti=new xte(this.canvas.current,e)}}componentDidUpdate(){const e=E0(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=E0(this.props),i={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return _.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:i})}}xE.defaultProps={...TE};xE.displayName="ReactConfetti";function E0(t){const e={},n={},i={},r=[...Object.keys(TE),"confettiSource","drawShape","onConfettiComplete","frameRate"],s=["canvasRef"];for(const a in t){const o=t[a];r.includes(a)?e[a]=o:s.includes(a)?s[a]=o:i[a]=o}return[e,i,n]}const Ste=Xn.forwardRef((t,e)=>_.jsx(xE,{canvasRef:e,...t})),Ite=({isOpen:t,onClose:e})=>{const{currentUser:n}=ss(),[i,r]=M.useState(null),[s,a]=M.useState(!1),[o,l]=M.useState(!0),[c,u]=M.useState(!0),[d,f]=M.useState(!1);M.useEffect(()=>{t&&n&&h()},[t,n]);const h=async()=>{if(n){u(!0);try{l(!0)}catch(w){console.error("Error checking drop availability:",w)}finally{u(!1)}}},p=()=>{!o||d||f(!0)},g=async w=>{if(r(w),f(!1),w.value>=50&&(a(!0),setTimeout(()=>a(!1),5e3)),n)try{await Qe.collection("users").doc(n.uid).update({lastDropDate:$t.firestore.FieldValue.serverTimestamp(),activeDiscount:{type:w.type,value:w.value,label:w.label,expiresAt:new Date(Date.now()+24*60*60*1e3)}})}catch(b){console.error("Error saving drop result:",b)}},v=()=>{i&&navigator.share&&navigator.share({title:"I just won at Rush Coffee Plinko!",text:` I just won ${i.label} at Rush Coffee! Drop your ball today!`,url:window.location.origin}).catch(()=>{navigator.clipboard.writeText(` I just won ${i.label} at Rush Coffee!`)})},y=()=>{r(null),a(!1),f(!1),e()};return _.jsx(ug,{children:t&&_.jsxs(Di.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:y,children:[s&&_.jsx(Ste,{recycle:!1,numberOfPieces:500}),_.jsxs(Di.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:w=>w.stopPropagation(),className:"bg-white rounded-3xl max-w-3xl w-full p-8 relative shadow-2xl max-h-[90vh] overflow-y-auto",children:[_.jsx("button",{onClick:y,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors z-10",children:_.jsx(na,{className:"w-6 h-6"})}),_.jsxs("div",{className:"text-center mb-6",children:[_.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-purple-400 to-indigo-500 rounded-full mb-4",children:_.jsx(_D,{className:"w-8 h-8 text-white"})}),_.jsx("h2",{className:"text-3xl font-display font-bold text-gray-900 mb-2",children:i?"Congratulations! ":"Coffee Plinko"}),_.jsx("p",{className:"text-gray-600",children:c?"Checking availability...":o?i?`You won ${i.label}!`:"Drop the ball and win prizes!":"Come back tomorrow for another drop!"})]}),!c&&_.jsxs(_.Fragment,{children:[!i&&o&&_.jsxs("div",{className:"space-y-6",children:[_.jsx(gte,{onPrizeWon:g,isDropping:d}),_.jsx("button",{onClick:p,disabled:d,className:`w-full max-w-md mx-auto block px-8 py-4 rounded-full font-bold text-lg transition-all shadow-lg ${d?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white hover:scale-105"}`,children:d?"DROPPING...":"DROP BALL!"})]}),!i&&!o&&_.jsxs("div",{className:"text-center py-12",children:[_.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:_.jsx(Hb,{className:"w-12 h-12 text-gray-400"})}),_.jsx("p",{className:"text-lg font-semibold text-gray-700 mb-2",children:"You've already played today!"}),_.jsx("p",{className:"text-sm text-gray-500",children:"Check your active discount in the cart or come back tomorrow for another chance."})]}),i&&_.jsxs("div",{className:"text-center",children:[_.jsxs("div",{className:"mb-6 p-8 bg-gradient-to-br from-purple-50 to-indigo-50 rounded-2xl border-2 border-purple-200",children:[_.jsx("div",{className:"text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-indigo-600 mb-2",children:i.label}),_.jsx("p",{className:"text-gray-600",children:i.type==="discount"?"Applied to your next order! Valid for 24 hours.":"Your free upgrade is ready!"})]}),_.jsxs("div",{className:"flex gap-3",children:[_.jsxs("button",{onClick:v,className:"flex-1 px-6 py-3 border-2 border-purple-600 text-purple-600 rounded-full font-bold hover:bg-purple-50 transition-colors flex items-center justify-center gap-2",children:[_.jsx(F9,{className:"w-5 h-5"}),"Share"]}),_.jsx("button",{onClick:y,className:"flex-1 px-6 py-3 bg-purple-600 text-white rounded-full font-bold hover:bg-purple-700 transition-colors",children:"Start Shopping"})]})]})]}),!i&&_.jsx("p",{className:"text-xs text-gray-400 text-center mt-6",children:"TESTING MODE: Unlimited drops enabled. Prizes expire after 24 hours."})]})]})})},Ate=[{href:"/",label:"Home"},{href:"/about",label:"About"},{href:"/menu",label:"Menu"},{href:"/drink-lab",label:"Drink Lab"},{href:"/contact",label:"Contact"}],Rte=[{href:"/menu",label:"Menu"},{href:"/drink-lab",label:"Drink Lab"},{href:"/queue",label:"Queue"},{href:"/rewards",label:"Rewards"}],KC=[{href:"/profile",label:"My Profile",Icon:I_},{href:"/flavor-profile",label:"My Flavor Profile",Icon:Z9},{href:"/rewards",label:"My Rewards",Icon:_D},{href:"/about",label:"About",Icon:wD},{href:"/contact",label:"Contact",Icon:$b}],Cte=()=>{const[t,e]=M.useState(!1),[n,i]=M.useState(!1),r=M.useRef(null),[s,a]=M.useState(!1),[o,l]=M.useState("login"),[c,u]=M.useState(!1),[d,f]=M.useState(""),[h,p]=M.useState(""),[g,v]=M.useState(!1),{currentUser:y,logout:w}=ss(),{totalCartItems:b,openCart:R}=sL(),S=Lo(),C=Ai(),[x]=qj(),T=C.pathname==="/auth/verify-email",A=sessionStorage.getItem("requires2FA")==="true",I=y&&!T&&!A&&!s&&C.pathname!=="/",P=I?Rte:Ate,k=()=>e(!1),D=Z=>{l(Z),a(!0),k()};M.useEffect(()=>{const Z=x.get("auth");Z==="login"?(l("login"),a(!0)):Z==="register"&&(l("register"),a(!0))},[x]);const V=(Z,ae,Me)=>{a(!1),f(Z),p(ae),u(!0)},z=Z=>{a(!1),u(!1),sessionStorage.removeItem("requires2FA");const ae=Z||(y==null?void 0:y.role);S(ae==="admin"?"/admin":ae==="employee"?"/employee":"/menu")},L=()=>{u(!1),sessionStorage.removeItem("requires2FA"),w()},F=()=>{u(!1),sessionStorage.removeItem("requires2FA"),w(),l("login"),a(!0)};M.useEffect(()=>{const Z=ae=>{r.current&&!r.current.contains(ae.target)&&i(!1)};return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[]),M.useEffect(()=>{const Z=()=>{window.innerWidth>=768&&e(!1)};return window.addEventListener("resize",Z),()=>window.removeEventListener("resize",Z)},[]),M.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[t]);const $=async()=>{await w(),k(),i(!1),S("/")},Q=()=>e(!t),te=(Z=!1)=>{var pe,Lt;const ae="rounded-full text-sm font-semibold transition-colors",Me="block w-full text-center py-3 text-base",ot="px-6 py-2";if(I&&y){const lt=`${((pe=y.firstName)==null?void 0:pe.charAt(0))||""}${((Lt=y.lastName)==null?void 0:Lt.charAt(0))||""}`.toUpperCase();return _.jsxs("div",{className:`relative ${Z?"w-full":""}`,ref:r,children:[_.jsx("button",{onClick:()=>i(!n),className:`flex items-center justify-center transition-colors focus:outline-none ${Z?"w-full gap-3 rounded-xl border border-gray-200 p-3 hover:bg-gray-50":`h-10 w-10 rounded-full ${y.photoURL?"ring-2 ring-primary-100":"bg-primary-600 text-white hover:bg-primary-700"} shadow-sm overflow-hidden`}`,"aria-label":"User menu","aria-haspopup":"true","aria-expanded":n,children:Z?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-full ${y.photoURL?"":"bg-primary-600 text-white"} overflow-hidden`,children:y.photoURL?_.jsx("img",{src:y.photoURL,alt:"Profile",className:"h-full w-full object-cover"}):_.jsx("span",{className:"text-sm font-bold",children:lt})}),_.jsxs("div",{className:"flex flex-col items-start",children:[_.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[y.firstName," ",y.lastName]}),_.jsx("span",{className:"text-xs text-gray-500",children:y.email})]}),_.jsx(s9,{className:`ml-auto h-4 w-4 text-gray-400 transition-transform ${n?"rotate-180":""}`})]}):y.photoURL?_.jsx("img",{src:y.photoURL,alt:"Profile",className:"h-full w-full object-cover"}):_.jsx("span",{className:"text-sm font-bold",children:lt})}),n&&!Z&&_.jsx("div",{className:"absolute right-0 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none animate-fade-in-up",children:_.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[_.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[_.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[y.firstName," ",y.lastName]}),_.jsx("p",{className:"text-xs text-gray-500 truncate",children:y.email})]}),KC.map(Bn=>_.jsxs(Pi,{to:Bn.href,onClick:()=>i(!1),className:({isActive:An})=>`flex items-center gap-3 px-4 py-2 text-sm transition-colors hover:bg-gray-100 ${An?"text-primary-600 font-semibold":"text-gray-700"}`,role:"menuitem",children:[_.jsx(Bn.Icon,{className:"h-4 w-4"}),Bn.label]},Bn.label)),(y.role==="employee"||y.role==="admin")&&_.jsxs(_.Fragment,{children:[_.jsx("hr",{className:"my-1"}),_.jsxs(Pi,{to:"/employee",onClick:()=>i(!1),className:"flex items-center gap-3 px-4 py-2 text-sm font-semibold text-blue-700 transition-colors hover:bg-blue-50",role:"menuitem",children:[_.jsx(Zf,{className:"h-4 w-4"}),"Employee Portal"]})]}),y.role==="admin"&&_.jsxs(Pi,{to:"/admin",onClick:()=>i(!1),className:"flex items-center gap-3 px-4 py-2 text-sm font-semibold text-yellow-700 transition-colors hover:bg-yellow-50",role:"menuitem",children:[_.jsx(Zf,{className:"h-4 w-4"}),"Admin Dashboard"]}),_.jsx("hr",{className:"my-1"}),_.jsxs("button",{onClick:$,className:"flex w-full items-center gap-3 px-4 py-2 text-left text-sm text-red-600 transition-colors hover:bg-red-50",role:"menuitem",children:[_.jsx(eI,{className:"h-4 w-4"}),"Logout"]})]})})]})}return _.jsxs("div",{className:`flex items-center ${Z?"flex-col space-y-3":"gap-4"}`,children:[_.jsx("button",{onClick:()=>D("login"),className:`${ae} border border-primary-600 text-primary-600 hover:bg-primary-50 ${Z?Me:ot}`,children:"Login"}),_.jsx("button",{onClick:()=>D("register"),className:`${ae} bg-primary-600 text-white shadow-sm hover:bg-primary-700 ${Z?Me:ot}`,children:"Sign Up"})]})},ce=()=>_.jsxs("button",{onClick:R,className:"relative rounded-full p-2 text-gray-700 transition hover:bg-gray-100","aria-label":`Open cart with ${b} items`,children:[_.jsx(Q9,{className:"h-6 w-6"}),b>0&&_.jsx("span",{className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white","aria-hidden":"true",children:b})]});return _.jsxs(_.Fragment,{children:[_.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-gray-200/80 bg-white/95 shadow-md backdrop-blur-sm",children:_.jsxs("div",{className:"container mx-auto flex h-16 items-center justify-between px-4 sm:h-20 sm:px-6 lg:px-8 md:grid md:grid-cols-3",children:[_.jsxs(Pi,{to:y?"/menu":"/",className:"flex items-center gap-2 flex-shrink-0 md:justify-self-start",children:[_.jsx(Qr,{className:"h-7 w-7 text-primary-600 sm:h-8 sm:w-8"}),_.jsx("span",{className:"text-lg font-bold text-primary-600 whitespace-nowrap sm:text-2xl",children:"Rush Coffee"})]}),_.jsx("nav",{className:"hidden items-center justify-center space-x-8 md:flex md:justify-self-center",children:P.map(Z=>_.jsx(Pi,{to:Z.href,className:({isActive:ae})=>`relative text-sm font-normal uppercase transition-colors hover:text-primary-600 ${ae?"text-primary-600":"text-gray-700"} after:absolute after:bottom-0 after:left-0 after:h-[1px] after:w-full after:origin-center after:transform after:bg-primary-600 after:transition-transform after:duration-300 ${ae?"after:scale-x-100":"after:scale-x-0"} hover:after:scale-x-100`,children:Z.label},Z.label))}),_.jsxs("div",{className:"hidden items-center justify-end gap-4 md:flex md:justify-self-end",children:[te(),I&&_.jsxs(_.Fragment,{children:[_.jsxs("button",{onClick:()=>v(!0),className:"relative flex items-center justify-center h-10 w-10 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white hover:from-yellow-500 hover:to-orange-600 transition-all hover:scale-110 shadow-lg","aria-label":"Coffee Plinko",title:"Drop for rewards!",children:[_.jsx(ZS,{className:"h-5 w-5"}),_.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full animate-pulse"})]}),_.jsx(ce,{})]})]}),_.jsxs("div",{className:"flex items-center justify-end gap-2 md:hidden",children:[I&&_.jsxs(_.Fragment,{children:[_.jsxs("button",{onClick:()=>v(!0),className:"relative flex items-center justify-center h-10 w-10 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500 text-white hover:from-yellow-500 hover:to-orange-600 transition-all hover:scale-110 shadow-lg","aria-label":"Coffee Plinko",children:[_.jsx(ZS,{className:"h-5 w-5"}),_.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full animate-pulse"})]}),_.jsx(ce,{})]}),_.jsx("button",{onClick:Q,className:"rounded-md p-2 text-gray-700 transition hover:bg-gray-100","aria-label":"Toggle menu","aria-expanded":t,children:_.jsx(P9,{className:"h-6 w-6"})})]})]})}),_.jsxs("div",{className:`fixed inset-0 z-[60] md:hidden ${t?"pointer-events-auto":"pointer-events-none"}`,children:[_.jsx("div",{className:`absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ${t?"opacity-100":"opacity-0"}`,onClick:k,"aria-hidden":"true"}),_.jsxs("div",{className:`absolute top-0 right-0 h-full w-4/5 max-w-sm transform bg-white shadow-2xl transition-transform duration-300 ease-out ${t?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"mobile-menu-title",children:[_.jsxs("div",{className:"flex items-center justify-between border-b p-4",children:[_.jsxs(Pi,{to:y?"/menu":"/",className:"flex items-center gap-2",onClick:k,children:[_.jsx(Qr,{className:"h-7 w-7 text-primary-600"}),_.jsx("span",{id:"mobile-menu-title",className:"text-xl font-bold text-primary-600",children:"Rush Coffee"})]}),_.jsx("button",{onClick:k,className:"rounded-full p-2 text-gray-500 transition hover:bg-gray-100 hover:text-gray-700","aria-label":"Close menu",children:_.jsx(na,{className:"h-6 w-6"})})]}),_.jsxs("nav",{className:"flex flex-1 flex-col gap-2 overflow-y-auto p-4",children:[P.map(Z=>_.jsx(Pi,{to:Z.href,onClick:k,className:({isActive:ae})=>`rounded-xl px-4 py-3 text-lg font-medium transition-all ${ae?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:Z.label},Z.label)),I&&_.jsxs("div",{className:"mt-4 border-t pt-4",children:[_.jsx("p",{className:"mb-2 px-4 text-xs font-semibold uppercase tracking-wider text-gray-400",children:"Account"}),KC.map(Z=>_.jsxs(Pi,{to:Z.href,onClick:k,className:({isActive:ae})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${ae?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[_.jsx(Z.Icon,{className:"h-5 w-5"}),Z.label]},Z.label)),(y.role==="employee"||y.role==="admin")&&_.jsxs(Pi,{to:"/employee",onClick:k,className:({isActive:Z})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${Z?"bg-blue-50 text-blue-800":"text-blue-700 hover:bg-blue-50"}`,children:[_.jsx(Zf,{className:"h-5 w-5"}),"Employee Portal"]}),y.role==="admin"&&_.jsxs(Pi,{to:"/admin",onClick:k,className:({isActive:Z})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${Z?"bg-yellow-50 text-yellow-800":"text-yellow-700 hover:bg-yellow-50"}`,children:[_.jsx(Zf,{className:"h-5 w-5"}),"Admin Dashboard"]})]})]}),_.jsx("div",{className:"border-t p-4",children:I?_.jsxs("button",{onClick:$,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-red-50 px-6 py-3 text-base font-semibold text-red-600 transition-colors hover:bg-red-100",children:[_.jsx(eI,{className:"h-5 w-5"}),"Logout"]}):te(!0)})]})]}),_.jsx(zY,{isOpen:s,onClose:()=>a(!1),initialView:o,onVerificationNeeded:V,onAuthSuccess:z}),_.jsx(FY,{isOpen:c,onClose:L,email:d,userId:h,onSuccess:()=>z(),onBackToLogin:F}),_.jsx(Ite,{isOpen:g,onClose:()=>v(!1)})]})},Pte=()=>_.jsxs("footer",{className:"relative bg-[#401a00] text-primary-100",children:[_.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5"}),_.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),_.jsxs("div",{className:"container relative z-10 mx-auto grid grid-cols-2 gap-8 px-6 py-12 md:grid-cols-2 lg:grid-cols-4",children:[_.jsxs("div",{className:"col-span-2 space-y-4 md:col-span-1 lg:col-span-1",children:[_.jsxs(hi,{to:"/",className:"flex items-center gap-2",children:[_.jsx(Qr,{className:"h-8 w-8 text-primary-500"}),_.jsx("span",{className:"font-display text-2xl font-bold text-white",children:"Rush Coffee"})]}),_.jsx("p",{className:"font-medium text-white",children:"Premium coffee, no waiting."}),_.jsx("p",{className:"text-sm leading-relaxed text-primary-200/80",children:"Join the digital queue and get your coffee fix faster than ever. Experience the future of coffee ordering."})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Quick Links"}),_.jsxs("ul",{className:"space-y-3",children:[_.jsx("li",{children:_.jsx(hi,{to:"/",className:"transition-colors hover:text-primary-400 hover:underline",children:"Home"})}),_.jsx("li",{children:_.jsx(hi,{to:"/about",className:"transition-colors hover:text-primary-400 hover:underline",children:"About Us"})}),_.jsx("li",{children:_.jsx(hi,{to:"/menu",className:"transition-colors hover:text-primary-400 hover:underline",children:"Menu"})}),_.jsx("li",{children:_.jsx(hi,{to:"/faq",className:"transition-colors hover:text-primary-400 hover:underline",children:"FAQ"})}),_.jsx("li",{children:_.jsx(hi,{to:"/contact",className:"transition-colors hover:text-primary-400 hover:underline",children:"Contact"})})]})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Legal"}),_.jsxs("ul",{className:"space-y-3",children:[_.jsx("li",{children:_.jsx(hi,{to:"/terms",className:"transition-colors hover:text-primary-400 hover:underline",children:"Terms of Service"})}),_.jsx("li",{children:_.jsx(hi,{to:"/privacy",className:"transition-colors hover:text-primary-400 hover:underline",children:"Privacy Policy"})}),_.jsx("li",{children:_.jsx(hi,{to:"/cookies",className:"transition-colors hover:text-primary-400 hover:underline",children:"Cookie Policy"})})]})]}),_.jsxs("div",{className:"col-span-2 md:col-span-1 lg:col-span-1",children:[_.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Contact & Connect"}),_.jsx("address",{className:"not-italic",children:_.jsxs("ul",{className:"space-y-4",children:[_.jsxs("li",{className:"flex items-start gap-3",children:[_.jsx(R9,{className:"mt-1 h-5 w-5 flex-shrink-0 text-primary-500"}),_.jsx("span",{children:"11 Visayan Ave. St. Galas, Quezon City, Philippines"})]}),_.jsxs("li",{className:"flex items-center gap-3",children:[_.jsx($b,{className:"h-5 w-5 flex-shrink-0 text-primary-500"}),_.jsx("a",{href:"tel:09304641022",className:"transition-colors hover:text-white",children:"0930 464 1022"})]}),_.jsxs("li",{className:"flex items-center gap-3",children:[_.jsx(nd,{className:"h-5 w-5 flex-shrink-0 text-primary-500"}),_.jsx("a",{href:"mailto:hello@rushcoffee.ph",className:"transition-colors hover:text-white",children:"hello@rushcoffee.ph"})]})]})}),_.jsxs("div",{className:"mt-8 flex gap-4",children:[_.jsx("a",{href:"https://www.facebook.com/profile.php?id=61551613276320",target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",className:"rounded-full bg-white/5 p-2 transition-colors hover:bg-primary-600 hover:text-white",children:_.jsx(v9,{className:"h-5 w-5"})}),_.jsx("a",{href:"https://www.instagram.com/Rush_Coffee2023/",target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",className:"rounded-full bg-white/5 p-2 transition-colors hover:bg-primary-600 hover:text-white",children:_.jsx(T9,{className:"h-5 w-5"})})]})]})]}),_.jsx("div",{className:"relative z-10 border-t border-white/10 bg-black/20",children:_.jsxs("div",{className:"container mx-auto flex flex-col items-center justify-between gap-4 px-6 py-6 text-center text-sm text-primary-300 sm:flex-row",children:[_.jsx("p",{children:" 2023 Rush Coffee. All rights reserved."}),_.jsxs("p",{className:"flex items-center gap-1",children:["Made with ",_.jsx("span",{className:"text-red-500",children:""})," and ",_.jsx("span",{className:"text-amber-500",children:""})]})]})})]}),Q5=M.createContext(void 0),Y5=()=>{const t=M.useContext(Q5);if(t===void 0)throw new Error("useNotification must be used within a NotificationProvider");return t},Nte=({children:t})=>{const[e,n]=M.useState({message:"",type:"info",isVisible:!1}),i=M.useCallback((a,o="info")=>{n({message:a,type:o,isVisible:!0}),setTimeout(()=>{n(l=>({...l,isVisible:!1}))},5e3)},[]),r=M.useCallback(()=>{n(a=>({...a,isVisible:!1}))},[]),s={notification:e,showNotification:i,hideNotification:r};return _.jsx(Q5.Provider,{value:s,children:t})},Dte=()=>{const{notification:t,hideNotification:e}=Y5(),n={success:_.jsx(Hb,{className:"h-6 w-6 text-green-500"}),info:_.jsx(wD,{className:"h-6 w-6 text-blue-500"}),warning:_.jsx(tz,{className:"h-6 w-6 text-amber-500"}),error:_.jsx(h9,{className:"h-6 w-6 text-red-500"})},i={success:"bg-white border-green-100",info:"bg-white border-blue-100",warning:"bg-white border-amber-100",error:"bg-white border-red-100"};return _.jsx(ug,{children:t.isVisible&&_.jsxs(Di.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{type:"spring",stiffness:300,damping:30},className:`fixed top-6 left-0 right-0 z-[100] mx-auto flex w-[90%] max-w-md items-center gap-3 rounded-xl border p-4 shadow-xl ${i[t.type]}`,children:[_.jsx("div",{className:"flex-shrink-0",children:n[t.type]}),_.jsx("div",{className:"flex-1",children:_.jsx("p",{className:"font-medium text-gray-900",children:t.message})}),_.jsx("button",{onClick:e,className:"flex-shrink-0 rounded-full p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-500",children:_.jsx(na,{className:"h-4 w-4"})})]})})},X5=M.createContext(void 0),qne=()=>{const t=M.useContext(X5);if(t===void 0)throw new Error("useOrder must be used within an OrderProvider");return t},kte=({children:t})=>{const[e,n]=M.useState(null),[i,r]=M.useState([]),[s,a]=M.useState(!0),{currentUser:o}=ss(),{showNotification:l}=Y5(),c=M.useRef(void 0);M.useEffect(()=>{let f;return o?(a(!0),f=Qe.collection("orders").where("userId","==",o.uid).onSnapshot(g=>{const v=g.docs.map(w=>{var b;return{id:w.id,...w.data(),timestamp:((b=w.data().timestamp)==null?void 0:b.toDate())||new Date}});g.docChanges().forEach(w=>{if(w.type==="modified"){const b=w.doc.data();b.status==="cancelled"&&l(`Your order ${b.orderNumber} has been cancelled. Reason: ${b.cancellationReason||"No reason provided"}`,"error")}}),v.sort((w,b)=>b.timestamp.getTime()-w.timestamp.getTime()),r(v);const y=v.find(w=>w.status!=="completed"&&w.status!=="cancelled")||null;n(y),a(!1)},g=>{console.error("Error listening to order history:",g),a(!1)})):(r([]),n(null),a(!1)),()=>{f&&f()}},[o,l]),M.useEffect(()=>{const f=e==null?void 0:e.status,h=c.current;if(f==="ready"&&h!=="ready"){const p=e==null?void 0:e.orderItems.map(g=>g.productName).join(", ");l(`Your order for ${p} is ready!`,"success")}c.current=f},[e==null?void 0:e.status,e==null?void 0:e.orderItems,l]);const d={activeOrder:e,setActiveOrder:n,orderHistory:i,addOrderToHistory:async f=>{try{const h=await Qe.collection("orders").add({...f,timestamp:$t.firestore.FieldValue.serverTimestamp()}),p={...f,id:h.id,timestamp:new Date};r(g=>[p,...g]),n(p)}catch(h){console.error("Error adding order to Firestore:",h)}},isHistoryLoading:s};return _.jsx(X5.Provider,{value:d,children:t})},Mte=({children:t,className:e="",variant:n="solid",color:i="primary",size:r="md"})=>{const s="inline-flex items-center gap-1.5 rounded-full font-medium",a={xs:"px-2 py-0.5 text-xs",sm:"px-2.5 py-1 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-1.5 text-base"},o={primary:"bg-primary-100 text-primary-800",success:"bg-green-100 text-green-800",warning:"bg-amber-100 text-amber-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800",gray:"bg-gray-100 text-gray-800"},l={primary:"border-2 border-primary-300 text-primary-700 bg-transparent",success:"border-2 border-green-300 text-green-700 bg-transparent",warning:"border-2 border-amber-300 text-amber-700 bg-transparent",error:"border-2 border-red-300 text-red-700 bg-transparent",info:"border-2 border-blue-300 text-blue-700 bg-transparent",gray:"border-2 border-gray-300 text-gray-700 bg-transparent"},c={primary:"bg-primary-500",success:"bg-green-500",warning:"bg-amber-500",error:"bg-red-500",info:"bg-blue-500",gray:"bg-gray-500"},u=n==="outline"?l[i]:o[i];return _.jsxs("span",{className:`${s} ${a[r]} ${u} ${e}`,children:[n==="dot"&&_.jsx("span",{className:`h-2 w-2 rounded-full ${c[i]} animate-pulse`}),t]})},J5=()=>{const[t,e]=M.useState([]),[n,i]=M.useState(!0),[r,s]=M.useState(null);return M.useEffect(()=>{(async()=>{try{i(!0);const l=await Qe.collection("ingredients").where("isTopping","==",!0).get(),c=[];l.forEach(u=>{const d=u.data();d.stock>0&&d.toppingPrice!==void 0&&d.portionSize!==void 0&&c.push({id:u.id,name:d.name,price:d.toppingPrice,stock:d.stock,portionSize:d.portionSize})}),c.sort((u,d)=>u.name.localeCompare(d.name)),e(c),s(null)}catch(o){console.error("Error fetching toppings:",o),s("Failed to load toppings"),e([{id:"pearls",name:"Pearls",price:10,stock:3e3,portionSize:30},{id:"pudding",name:"Pudding",price:15,stock:2e3,portionSize:40},{id:"grass-jelly",name:"Grass Jelly",price:15,stock:2500,portionSize:35}])}finally{i(!1)}})()},[]),{toppings:t,isLoading:n,error:r}},Ote=({cartItems:t,isOpen:e,onClose:n,onUpdateQuantity:i,onRemoveItem:r,onCheckout:s,onEditItem:a,selectedItemIds:o,onToggleItemSelection:l,onSelectAll:c,onDeselectAll:u})=>{const d=Lo(),f=t.reduce((R,S)=>R+S.quantity,0),{toppings:h}=J5(),p=t.length>0&&o.length===t.length,g=o.length>0&&o.length<t.length,v=R=>R?R.reduce((S,C)=>{const x=h.find(T=>T.name===C);return S+((x==null?void 0:x.price)||0)},0):0,y=t.filter(R=>o.includes(R.id)).reduce((R,S)=>{var x;const C=v((x=S.customizations)==null?void 0:x.toppings);return R+(S.selectedSize.price+C)*S.quantity},0),w=()=>{n(),d("/menu")},b=()=>{p?u():c()};return _.jsxs(_.Fragment,{children:[_.jsx("div",{onClick:n,className:`fixed inset-0 z-40 bg-black/50 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"}`,"aria-hidden":"true"}),_.jsx("aside",{className:`fixed top-0 right-0 z-50 h-full w-full transform bg-white shadow-2xl transition-transform duration-300 ease-in-out sm:w-96 md:w-[450px] ${e?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"cart-heading",children:_.jsxs("div",{className:"flex h-full flex-col",children:[_.jsxs("header",{className:"flex items-center justify-between border-b border-gray-200 p-6",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("h2",{id:"cart-heading",className:"font-display text-xl font-bold text-coffee-900",children:"Your Order"}),f>0&&_.jsxs(Mte,{children:[f," ",f===1?"item":"items"]})]}),_.jsx("button",{onClick:n,className:"rounded-md p-2 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-800","aria-label":"Close cart",children:_.jsx(na,{className:"h-6 w-6"})})]}),t.length>0&&_.jsx("div",{className:"border-b border-gray-200 px-6 py-3 bg-gray-50/50 backdrop-blur-sm sticky top-0 z-10",children:_.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group select-none",children:[_.jsxs("div",{className:"relative flex items-center justify-center h-5 w-5",children:[_.jsx("input",{type:"checkbox",checked:p,onChange:b,className:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border-2 border-gray-300 bg-white transition-all checked:border-primary-600 checked:bg-primary-600 hover:border-primary-500 focus:ring-2 focus:ring-primary-500/20"}),_.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 peer-checked:opacity-100 transition-opacity duration-200",children:g&&!p?_.jsx(S_,{className:"h-3.5 w-3.5 text-white",strokeWidth:3}):_.jsx(JS,{className:"h-3.5 w-3.5 text-white",strokeWidth:3})})]}),_.jsx("span",{className:"text-sm font-semibold text-gray-700 group-hover:text-primary-700 transition-colors",children:p?"Deselect All":"Select All"}),o.length>0&&_.jsxs("span",{className:"ml-auto text-xs font-medium text-primary-600 bg-primary-50 px-2 py-1 rounded-full",children:[o.length," selected"]})]})}),t.length===0?_.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-4 p-6 text-center",children:[_.jsx(Qr,{className:"h-24 w-24 text-gray-300 opacity-50"}),_.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Your cart is empty"}),_.jsx("p",{className:"text-gray-500",children:"Looks like you haven't added anything yet."}),_.jsx("button",{onClick:w,className:"mt-4 rounded-full bg-primary-600 px-6 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-primary-700",children:"Start Ordering"})]}):_.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:_.jsx("ul",{className:"space-y-3",children:t.map(R=>{var P;const S=R.selectedSize.name==="Combo Meal",C=S?`${R.product.name} (${R.selectedSize.name})`:R.product.name,x=S&&R.product.comboImageUrl?R.product.comboImageUrl:R.product.imageUrl,T=v((P=R.customizations)==null?void 0:P.toppings),A=R.selectedSize.price+T,I=o.includes(R.id);return _.jsxs("li",{className:`relative flex gap-4 p-5 rounded-xl transition-all ${I?"bg-coffee-50 border-2 border-coffee-200":"bg-gray-50/50 border-2 border-transparent hover:border-gray-200"}`,children:[_.jsx("button",{onClick:()=>r(R.id),className:"absolute top-5 right-5 z-10 rounded-full p-2 text-gray-400 transition-all hover:bg-red-50 hover:text-red-600","aria-label":`Remove ${C} from cart`,children:_.jsx(X9,{className:"h-4 w-4"})}),_.jsxs("div",{className:"pt-1 relative flex items-center justify-center h-5 w-5",children:[_.jsx("input",{type:"checkbox",checked:I,onChange:()=>l(R.id),className:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border-2 border-gray-300 bg-white transition-all checked:border-primary-600 checked:bg-primary-600 hover:border-primary-500 focus:ring-2 focus:ring-primary-500/20"}),_.jsx(JS,{className:"absolute h-3.5 w-3.5 text-white opacity-0 peer-checked:opacity-100 transition-opacity duration-200 pointer-events-none",strokeWidth:3})]}),_.jsx("button",{onClick:()=>a(R),className:"h-20 w-20 flex-shrink-0 overflow-hidden rounded-lg border border-gray-100 shadow-sm hover:border-primary-300 transition-colors cursor-pointer",children:_.jsx("img",{src:x,alt:C,className:"h-full w-full object-cover object-center"})}),_.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[_.jsxs("button",{onClick:()=>a(R),className:"text-left w-full hover:opacity-75 transition-opacity",children:[_.jsx("h4",{className:"font-bold text-gray-900 truncate text-base pr-8",children:C}),_.jsxs("div",{className:"mt-1.5 flex items-center justify-between",children:[_.jsx("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:R.selectedSize.name}),_.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["",R.selectedSize.price.toFixed(2)]})]})]}),R.customizations&&_.jsxs("div",{className:"mt-2 space-y-1.5",children:[(R.customizations.sugarLevel||R.customizations.iceLevel)&&_.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[R.customizations.sugarLevel&&_.jsxs("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:["Sugar: ",R.customizations.sugarLevel]}),R.customizations.iceLevel&&_.jsxs("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:["Ice: ",R.customizations.iceLevel]})]}),R.customizations.toppings&&R.customizations.toppings.length>0&&_.jsx("div",{className:"flex flex-col gap-1.5",children:R.customizations.toppings.map(k=>{const D=h.find(z=>z.name===k),V=(D==null?void 0:D.price)||0;return _.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:k}),_.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["+",V.toFixed(2)]})]},k)})})]}),_.jsxs("div",{className:"mt-auto pt-3 flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center rounded-full border border-gray-200 bg-white shadow-sm",children:[_.jsx("button",{onClick:()=>i(R.id,R.quantity-1),disabled:R.quantity===1,className:"flex h-8 w-8 items-center justify-center rounded-l-full text-gray-500 transition hover:bg-gray-50 hover:text-gray-700 disabled:cursor-not-allowed disabled:opacity-50","aria-label":`Decrease quantity of ${C}`,children:_.jsx(S_,{className:"h-3.5 w-3.5"})}),_.jsx("span",{className:"w-8 text-center text-sm font-semibold text-gray-900","aria-live":"polite",children:R.quantity}),_.jsx("button",{onClick:()=>i(R.id,R.quantity+1),className:"flex h-8 w-8 items-center justify-center rounded-r-full text-gray-500 transition hover:bg-gray-50 hover:text-gray-700","aria-label":`Increase quantity of ${C}`,children:_.jsx(bD,{className:"h-3.5 w-3.5"})})]}),_.jsxs("p",{className:"font-bold text-lg text-gray-900",children:["",(A*R.quantity).toFixed(2)]})]})]})]},R.id)})})}),t.length>0&&_.jsxs("footer",{className:"mt-auto border-t border-gray-200 p-6 bg-gray-50/50",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("span",{className:"text-base font-medium text-gray-600",children:"Subtotal"}),_.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["",y.toFixed(2)]})]}),o.length<t.length&&_.jsx("p",{className:"mt-1 text-xs text-amber-600",children:o.length===0?"Please select items to checkout":`${t.length-o.length} item(s) not selected`}),_.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Taxes and service fee calculated at checkout."}),_.jsx("div",{className:"mt-6",children:_.jsxs("button",{onClick:s,disabled:o.length===0,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-primary-600 px-6 py-3.5 text-base font-bold text-white shadow-lg shadow-primary-600/20 transition-all hover:bg-primary-700 hover:shadow-xl hover:scale-[1.02] active:scale-[0.98] focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-gray-400 disabled:opacity-50 disabled:shadow-none disabled:scale-100",children:["Proceed to Checkout",_.jsx(n9,{className:"h-5 w-5"})]})})]})]})})]})},zh={sugarLevels:[{value:"0%",label:"No Sugar",sugarAmount:0,sugarIngredientId:"brown-sugar-syrup"},{value:"25%",label:"25% Sweet",sugarAmount:5,sugarIngredientId:"brown-sugar-syrup"},{value:"50%",label:"50% Sweet",sugarAmount:10,sugarIngredientId:"brown-sugar-syrup"},{value:"75%",label:"75% Sweet",sugarAmount:15,sugarIngredientId:"brown-sugar-syrup"},{value:"100%",label:"Regular (100%)",sugarAmount:20,sugarIngredientId:"brown-sugar-syrup"}],iceLevels:[{value:"None",label:"No Ice",iceAmount:0,iceIngredientId:"ice-cubes"},{value:"Less",label:"Less Ice",iceAmount:50,iceIngredientId:"ice-cubes"},{value:"Normal",label:"Normal Ice",iceAmount:100,iceIngredientId:"ice-cubes"},{value:"Extra",label:"Extra Ice",iceAmount:150,iceIngredientId:"ice-cubes"}]},Vte=async()=>{try{const t=Qe.collection("settings").doc("customizationOptions");(await t.get()).exists?console.log(" Customization options already exist in Firestore"):(console.log("Seeding customization options to Firestore..."),await t.set(zh),console.log(" Customization options seeded successfully"))}catch(t){throw console.error(" Error seeding customization options:",t),t}},Lte=async()=>{try{const t=Qe.collection("settings").doc("customizationOptions"),e=await t.get();return e.exists?e.data():(await Vte(),(await t.get()).data())}catch(t){return console.error("Error fetching customization options:",t),zh}},Ute=()=>{const[t,e]=M.useState(zh),[n,i]=M.useState(!0),[r,s]=M.useState(null);return M.useEffect(()=>{(async()=>{try{i(!0);const o=await Lte();o&&o.sugarLevels&&o.iceLevels?(e(o),s(null)):e(zh)}catch(o){console.error("Error fetching customization options:",o),s("Failed to load customization options"),e(zh)}finally{i(!1)}})()},[]),{options:t,isLoading:n,error:r}},jte=({product:t,selectedSize:e,isOpen:n,onClose:i,onConfirm:r,onBuyNow:s,initialCustomizations:a,initialQuantity:o=1})=>{const[l,c]=M.useState("100%"),[u,d]=M.useState("Normal"),[f,h]=M.useState("None"),[p,g]=M.useState(1),[v,y]=M.useState(e),{toppings:w,isLoading:b}=J5(),{options:R,isLoading:S}=Ute();Xn.useEffect(()=>{if(n){if(a){c(a.sugarLevel||"100%"),d(a.iceLevel||"Normal");const V=a.toppings&&a.toppings.length>0?a.toppings[0]:"None";h(V)}else c("100%"),d("Normal"),h("None");g(o),y(e)}},[n,a,o,e]);const C=()=>{const V=["Coffee Based","Non-Coffee Based","Matcha Series","Refreshments"].includes(t.category),z={toppings:f!=="None"?[f]:[]};return V&&(z.sugarLevel=l,z.iceLevel=u),z},x=()=>{r(C(),p,P/p,v),i()},T=[{id:"none",name:"None",price:0},...w.map(V=>({id:V.id,name:V.name,price:V.price}))],A=T.find(V=>V.name===f),I=(A==null?void 0:A.price)||0,P=(v.price+I)*p,k=b||S,D=_.jsxs("button",{onClick:x,disabled:k,className:"w-full flex items-center justify-between rounded-xl bg-primary-600 px-6 py-3 text-white font-bold shadow-lg hover:bg-primary-700 hover:shadow-xl hover:scale-[1.01] active:scale-[0.99] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[_.jsx("span",{children:"Add to Order"}),_.jsxs("span",{className:"text-lg tabular-nums",children:["",P.toFixed(2)]})]});return _.jsx(jx,{isOpen:n,onClose:i,hideHeader:!0,hideCloseButton:!0,footer:D,className:"sm:max-w-lg",children:_.jsxs("div",{children:[_.jsxs("div",{className:"-mx-6 -mt-6 mb-2",children:[_.jsxs("div",{className:"bg-[#F5F5F0] w-full h-96 flex items-center justify-center relative overflow-hidden",children:[_.jsx("button",{onClick:i,className:"absolute top-4 right-4 z-10 p-2 rounded-full bg-white/50 hover:bg-white/80 backdrop-blur-sm transition-colors text-gray-600 hover:text-gray-900",children:_.jsx(na,{className:"h-5 w-5"})}),_.jsx("img",{src:t.imageUrl,alt:t.name,className:"h-full w-full object-cover object-center"})]}),_.jsxs("div",{className:"px-6 pt-4",children:[_.jsx("div",{className:"flex items-center justify-between mb-2",children:_.jsx("span",{className:"text-sm font-medium text-coffee-600 tracking-wide uppercase",children:t.category})}),_.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.name}),_.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:t.description})]})]}),k?_.jsx("div",{className:"flex items-center justify-center py-12",children:_.jsx(_i,{className:"h-8 w-8 animate-spin text-coffee-600"})}):_.jsxs("div",{className:"space-y-1",children:[_.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[_.jsx("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center gap-2",children:"Size"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:t.sizes.map(V=>_.jsx("button",{onClick:()=>y(V),className:`flex-1 min-w-[80px] rounded-lg py-2 text-sm font-semibold transition-all border ${v.name===V.name?"bg-primary-600 text-white border-primary-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:border-primary-300 hover:bg-primary-50"}`,children:V.name},V.name))})]}),["Coffee Based","Non-Coffee Based","Matcha Series","Refreshments"].includes(t.category)&&_.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[_.jsx("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center gap-2",children:"Sugar Level"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:R.sugarLevels.map(V=>_.jsx("button",{onClick:()=>c(V.value),className:`flex-1 min-w-[60px] rounded-lg py-2 text-sm font-semibold transition-all border ${l===V.value?"bg-primary-600 text-white border-primary-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:border-primary-300 hover:bg-primary-50"}`,children:V.value},V.value))})]}),["Coffee Based","Non-Coffee Based","Matcha Series","Refreshments"].includes(t.category)&&_.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[_.jsx("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center gap-2",children:"Ice Level"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:R.iceLevels.map(V=>_.jsx("button",{onClick:()=>d(V.value),className:`flex-1 min-w-[60px] rounded-lg py-2 text-sm font-semibold transition-all border ${u===V.value?"bg-primary-600 text-white border-primary-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:border-primary-300 hover:bg-primary-50"}`,children:V.value},V.value))})]}),_.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[_.jsxs("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center justify-between",children:[_.jsx("span",{children:"Toppings"}),_.jsx("span",{className:"text-xs font-normal text-gray-500 normal-case",children:"Select one"})]}),_.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(V=>{const z=f===V.name;return _.jsxs("button",{onClick:()=>h(V.name),className:`
                                                relative px-3 py-2 rounded-lg text-sm font-medium transition-all border flex items-center gap-2
                                                ${z?"bg-primary-50 border-primary-600 text-primary-700 shadow-sm ring-1 ring-primary-600":"bg-white border-gray-200 text-gray-600 hover:border-primary-300 hover:bg-gray-50"}
                                            `,children:[_.jsx("span",{children:V.name}),V.price>0&&_.jsxs("span",{className:`text-xs font-bold ${z?"text-primary-600":"text-gray-400"}`,children:["+",V.price]})]},V.id)})})]}),_.jsxs("div",{className:"flex items-center justify-between py-4 -mx-6 px-6",children:[_.jsx("span",{className:"font-bold text-gray-900",children:"Quantity"}),_.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 rounded-lg p-1 border border-gray-200",children:[_.jsx("button",{onClick:()=>g(Math.max(1,p-1)),className:"h-8 w-8 rounded-md bg-white shadow-sm flex items-center justify-center text-gray-600 hover:text-coffee-600 disabled:opacity-50 transition-colors",disabled:p<=1,children:_.jsx(S_,{className:"h-4 w-4"})}),_.jsx("span",{className:"w-8 text-center font-bold text-gray-900 tabular-nums",children:p}),_.jsx("button",{onClick:()=>g(p+1),className:"h-8 w-8 rounded-md bg-primary-600 shadow-sm flex items-center justify-center text-white hover:bg-primary-700 transition-colors",children:_.jsx(bD,{className:"h-4 w-4"})})]})]})]})]})})},zte=()=>{const{pathname:t}=Ai();return M.useEffect(()=>{window.scrollTo(0,0)},[t]),null},WC=({allowedRoles:t,redirectTo:e})=>{const{currentUser:n,loading:i}=ss(),r=Ai();return i?_.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-gray-50",children:_.jsx(_i,{className:"h-12 w-12 animate-spin text-primary-600"})}):n?!t||t.length===0?_.jsx(QS,{}):n.role&&t.includes(n.role)?_.jsx(QS,{}):_.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gradient-to-br from-red-50 to-orange-50 px-4",children:_.jsxs("div",{className:"max-w-md text-center",children:[_.jsx("div",{className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-red-100",children:_.jsx(H9,{className:"h-10 w-10 text-red-600"})}),_.jsx("h1",{className:"mb-3 font-display text-4xl font-bold text-gray-900",children:"Access Denied"}),_.jsx("p",{className:"mb-6 text-lg text-gray-600",children:"You don't have permission to access this page."}),_.jsxs("p",{className:"mb-8 text-sm text-gray-500",children:["Your role: ",_.jsx("span",{className:"font-semibold capitalize",children:n.role||"customer"}),_.jsx("br",{}),"Required role: ",_.jsx("span",{className:"font-semibold capitalize",children:t.join(" or ")})]}),_.jsx("button",{onClick:()=>window.history.back(),className:"rounded-lg bg-primary-600 px-6 py-3 font-semibold text-white transition-colors hover:bg-primary-700",children:"Go Back"})]})}):_.jsx(fj,{to:e||"/auth/login",state:{from:r},replace:!0})},Bte=()=>_.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-primary-50",children:_.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[_.jsx(Qr,{className:"h-16 w-16 text-primary-600"}),_.jsxs("div",{className:"flex items-center gap-2 text-primary-800",children:[_.jsx(_i,{className:"h-6 w-6 animate-spin"}),_.jsx("span",{className:"font-medium",children:"Brewing your page..."})]})]})}),Fte=()=>{const t=Lo(),[e,n]=M.useState(!1),[i,r]=M.useState(!1),[s,a]=M.useState(""),[o,l]=M.useState(()=>{const C=localStorage.getItem("chat_history");return C?JSON.parse(C,(x,T)=>x==="timestamp"?new Date(T):T):[{id:"1",text:"Hello, welcome to Rush Coffee!  I'm Rush Bot. How can I help you today?",sender:"bot",timestamp:new Date}]}),[c,u]=M.useState(!1),[d,f]=M.useState(!1),[h,p]=M.useState(!0),g=M.useRef(null),v=[{id:2,text:" Store Hours",message:"hours"},{id:4,text:" Location",message:"location"},{id:5,text:" Contact Us",message:"contact"},{id:7,text:" Payment Methods",message:"payment"}],y=()=>{var C;(C=g.current)==null||C.scrollIntoView({behavior:"smooth"})};M.useEffect(()=>{y(),localStorage.setItem("chat_history",JSON.stringify(o))},[o,c]),M.useEffect(()=>{const C=x=>{x.key==="Escape"&&e&&n(!1)};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[e]),M.useEffect(()=>{const C=setTimeout(()=>{f(!0)},2e3);return()=>clearTimeout(C)},[]),M.useEffect(()=>{if(d){const C=setTimeout(()=>{f(!1)},5e3);return()=>clearTimeout(C)}},[d]);const w=()=>{n(!e),f(!1)},b=C=>{const x={id:Date.now().toString(),text:C,sender:"user",timestamp:new Date};l(T=>[...T,x]),u(!0),setTimeout(()=>{const T=R(C),A={id:(Date.now()+1).toString(),text:T.text,sender:"bot",timestamp:new Date,action:T.action};l(I=>[...I,A]),u(!1)},1e3)},R=C=>{const x=C.toLowerCase();return x.includes("hello")||x.includes("hi")||x.includes("hey")?{text:"Hello! Welcome to Rush Coffee. What can I get for you? "}:x.includes("menu")||x.includes("order")||x.includes("drink")||x.includes("food")?{text:"You can explore our delicious menu by clicking the button below. We have Coffee, Non-Coffee, Matcha, and Meals! ",action:{label:" See Menu",path:"/menu"}}:x.includes("hours")||x.includes("open")||x.includes("close")||x.includes("time")?{text:"We are open daily from 7:00 AM to 10:00 PM. See you soon! "}:x.includes("location")||x.includes("where")||x.includes("address")?{text:"We are located at 11 Visayan Ave. St. Galas, Quezon City, Philippines. Come visit us for a fresh brew! "}:x.includes("recommend")||x.includes("best")||x.includes("suggestion")?{text:"I highly recommend our signature Spanish Latte!  It's a customer favorite. If you love matcha, our Dirty Matcha is a must-try!",action:{label:" View Recommendations",path:"/menu"}}:x.includes("contact")||x.includes("call")||x.includes("phone")||x.includes("email")?{text:"You can reach us at 0912-345-6789 or email us at hello@rushcoffee.com. We'd love to hear from you! "}:x.includes("bestseller")||x.includes("best")||x.includes("favorite")||x.includes("popular")?{text:"Our customer favorites are the Spanish Latte, Dirty Matcha, and Caramel Macchiato!  You have to try them!",action:{label:" Order Now",path:"/menu"}}:x.includes("payment")||x.includes("pay")||x.includes("gcash")||x.includes("cash")?{text:"We only accept Over-the-Counter Cash payments at the moment. "}:x.includes("thank")?{text:"You're welcome! Let me know if you need anything else. "}:x.includes("bye")?{text:"Goodbye! Have a wonderful day! "}:{text:"I'm not sure about that, but I'd love to help! You can ask me about our menu, opening hours, or location."}},S=C=>{if(C==null||C.preventDefault(),!s.trim())return;const x={id:Date.now().toString(),text:s,sender:"user",timestamp:new Date};l(T=>[...T,x]),a(""),u(!0),setTimeout(()=>{const T=R(x.text),A={id:(Date.now()+1).toString(),text:T.text,sender:"bot",timestamp:new Date,action:T.action};l(I=>[...I,A]),u(!1)},1e3)};return _.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end pointer-events-none",children:[_.jsxs(ug,{children:[d&&!e&&_.jsx(Di.div,{initial:{opacity:0,y:10,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.9},className:"pointer-events-auto mb-4 mr-2 max-w-[200px] cursor-pointer rounded-2xl rounded-br-none bg-white p-4 shadow-xl dark:bg-gray-800",onClick:w,children:_.jsxs("div",{className:"relative",children:[_.jsx("button",{onClick:C=>{C.stopPropagation(),f(!1)},className:"absolute -right-2 -top-2 rounded-full bg-gray-100 p-1 hover:bg-gray-200 dark:bg-gray-700",children:_.jsx(na,{className:"h-3 w-3 text-gray-500"})}),_.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:"Hello, welcome to Rush Coffee!  I'm Rush Bot."})]})}),e&&_.jsxs(Di.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.2},className:"pointer-events-auto mb-4 flex h-[500px] w-[350px] flex-col overflow-hidden rounded-2xl border border-white/20 bg-white/90 shadow-2xl backdrop-blur-md dark:bg-gray-900/90 sm:w-[380px]",children:[_.jsxs("div",{className:"flex items-center justify-between bg-primary-600 px-4 py-3 text-white",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-white/20",children:_.jsx(tI,{className:"h-5 w-5 text-white"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"font-bold text-sm",children:"Rush Assistant"}),_.jsxs("p",{className:"text-[10px] text-primary-100 flex items-center gap-1",children:[_.jsx("span",{className:"block h-1.5 w-1.5 rounded-full bg-green-400 animate-pulse"}),"Online"]})]})]}),_.jsx("button",{onClick:()=>n(!1),className:"rounded-full p-1 hover:bg-white/20 transition-colors",children:_.jsx(k9,{className:"h-4 w-4"})})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:[o.map(C=>_.jsx("div",{className:`flex ${C.sender==="user"?"justify-end":"justify-start"}`,children:_.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-2 text-sm shadow-sm ${C.sender==="user"?"bg-primary-600 text-white rounded-br-none":"bg-white text-gray-800 border border-gray-100 rounded-bl-none"}`,children:[_.jsx("p",{children:C.text}),C.action&&_.jsxs("button",{onClick:()=>{t(C.action.path),n(!1)},className:"mt-2 flex items-center gap-1 rounded-lg bg-primary-50 px-3 py-1.5 text-xs font-medium text-primary-700 hover:bg-primary-100 transition-colors w-full justify-center border border-primary-100",children:[C.action.label,_.jsx(m9,{className:"h-3 w-3"})]}),_.jsx("p",{className:`mt-1 text-[9px] ${C.sender==="user"?"text-primary-100":"text-gray-400"}`,children:C.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},C.id)),c&&_.jsx("div",{className:"flex justify-start",children:_.jsx("div",{className:"bg-white border border-gray-100 rounded-2xl rounded-bl-none px-4 py-3 shadow-sm",children:_.jsxs("div",{className:"flex gap-1",children:[_.jsx("span",{className:"h-2 w-2 rounded-full bg-gray-400 animate-bounce [animation-delay:-0.3s]"}),_.jsx("span",{className:"h-2 w-2 rounded-full bg-gray-400 animate-bounce [animation-delay:-0.15s]"}),_.jsx("span",{className:"h-2 w-2 rounded-full bg-gray-400 animate-bounce"})]})})}),_.jsx("div",{ref:g})]}),_.jsxs(Di.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"border-t border-gray-100 bg-white p-2",children:[_.jsx("p",{className:"text-[10px] font-semibold text-gray-600 mb-2",children:"Quick Actions"}),_.jsx("div",{className:"flex flex-wrap gap-1.5",children:v.map(C=>_.jsx(Di.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>b(C.message),className:"px-3 py-1.5 text-[10px] font-semibold text-primary-700 bg-white border-2 border-primary-200 rounded-full hover:bg-primary-50 hover:border-primary-400 transition-all duration-200 shadow-sm hover:shadow-md",children:C.text},C.id))})]}),_.jsx("form",{onSubmit:S,className:"border-t-2 border-primary-200 bg-gray-50 p-3 shadow-inner",children:_.jsxs("div",{className:"relative flex items-center gap-2",children:[_.jsx("input",{type:"text",value:s,onChange:C=>a(C.target.value),placeholder:"Type a message...",className:"flex-1 rounded-full border-2 border-primary-200 bg-white px-4 py-2 text-sm focus:border-primary-500 focus:bg-white focus:outline-none focus:ring-2 focus:ring-primary-500/20"}),_.jsx("button",{type:"submit",disabled:!s.trim(),className:"flex h-9 w-9 items-center justify-center rounded-full bg-primary-600 text-white transition-colors hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:_.jsx(z9,{className:"h-4 w-4"})})]})})]})]}),_.jsxs("div",{className:"relative flex items-center justify-center",children:[!e&&_.jsx(Di.div,{initial:{scale:.8,opacity:.5},animate:{scale:1.5,opacity:0},transition:{duration:2,repeat:1/0,ease:"easeOut"},className:"absolute h-14 w-14 rounded-full bg-primary-500/30"}),_.jsx(Di.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:w,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),className:`pointer-events-auto flex h-14 w-14 items-center justify-center rounded-full shadow-xl shadow-primary-600/20 transition-all duration-300 ${e?"bg-gray-800 text-white rotate-90":"bg-gradient-to-br from-primary-600 to-primary-500 text-white hover:shadow-2xl hover:shadow-primary-600/30"}`,children:_.jsx(ug,{mode:"wait",children:e?_.jsx(Di.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:.2},children:_.jsx(na,{className:"h-6 w-6"})},"close"):_.jsx(Di.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.5,opacity:0},transition:{duration:.2},children:_.jsx(tI,{className:"h-7 w-7"})},"chat")})})]})]})},qte=M.lazy(()=>ke(()=>import("./HomePage-D7ROQSAy.js"),__vite__mapDeps([0,1,2,3,4,5]))),Hte=M.lazy(()=>ke(()=>import("./LoginPage-BOmqU_Ro.js"),[])),$te=M.lazy(()=>ke(()=>import("./RegisterPage-DjNmqDR0.js"),[])),Gte=M.lazy(()=>ke(()=>import("./ForgotPasswordPage-BfUTEB1Y.js"),__vite__mapDeps([6,7]))),Kte=M.lazy(()=>ke(()=>import("./MenuPage-DuIpnhWJ.js"),__vite__mapDeps([8,9,10,11,12,13]))),Wte=M.lazy(()=>ke(()=>import("./CheckoutPage-CNFXKACC.js"),__vite__mapDeps([14,1,3,15,16,17,18,19]))),Qte=M.lazy(()=>ke(()=>import("./QueuePage-49Kc57TJ.js"),__vite__mapDeps([20,1,21,5,18,2,9,22,17,23,10]))),Yte=M.lazy(()=>ke(()=>import("./RewardsPage-BadUfRpx.js"),__vite__mapDeps([24,1,23,25,26,27,28,29,11,16,10]))),Xte=M.lazy(()=>ke(()=>import("./ProfilePage-DjvHtO2l.js"),__vite__mapDeps([30,1,18,9,28,26,27,31,17,32,7,5,33,19,22,34,35]))),Jte=M.lazy(()=>ke(()=>import("./FlavorProfilePage-CfuoY_zF.js"),__vite__mapDeps([36,18,9,37,23,38]))),Zte=M.lazy(()=>ke(()=>import("./AboutPage-DxCcrUPW.js"),__vite__mapDeps([39,1,18,37,4,2]))),ene=M.lazy(()=>ke(()=>import("./ContactPage-Cy_W5si2.js"),__vite__mapDeps([40,1,7,41,19]))),tne=M.lazy(()=>ke(()=>import("./FAQPage-BD1e7PLr.js"),__vite__mapDeps([42,1,12]))),nne=M.lazy(()=>ke(()=>import("./TermsPage-CEAWymQp.js"),__vite__mapDeps([43,44,4,45,23]))),ine=M.lazy(()=>ke(()=>import("./PrivacyPolicyPage-C83Mqfxo.js"),__vite__mapDeps([46,5]))),rne=M.lazy(()=>ke(()=>import("./CookiePolicyPage-Bd_kNRVz.js"),__vite__mapDeps([47,34,37,48]))),sne=M.lazy(()=>ke(()=>import("./DrinkLabPage-DZIbL42-.js"),__vite__mapDeps([49,18,50,9]))),ane=M.lazy(()=>ke(()=>import("./AdminLayout-CBurZu5U.js"),__vite__mapDeps([51,52,1,53,18,19,25,4,48,34]))),one=M.lazy(()=>ke(()=>import("./AdminDashboardPage-CGwsy3a5.js"),__vite__mapDeps([54,55,38,53,2,28,13,18,4,48,9,56,37]))),QC=M.lazy(()=>ke(()=>import("./AdminQueuePage-Di47r_8k.js"),__vite__mapDeps([57,21,1,58,2,18,44]))),YC=M.lazy(()=>ke(()=>import("./AdminInventoryPage-CyEHPHb7.js"),__vite__mapDeps([59,31,1,28,53,10,12,50,60,29,18]))),lne=M.lazy(()=>ke(()=>import("./AdminProductsPage-HHgpCfEm.js"),__vite__mapDeps([61,1,31,53,9,12,60,29,50,18,35]))),cne=M.lazy(()=>ke(()=>import("./AdminAnalyticsPage-9AP56oUq.js"),__vite__mapDeps([62,55,38,53,2,28,13,19,9,22]))),une=M.lazy(()=>ke(()=>import("./AdminFeedbackPage-D6OLXDaw.js"),__vite__mapDeps([63,33,27,9,19,1,64]))),hne=M.lazy(()=>ke(()=>import("./AdminSettingsPage-DGlY2dI-.js"),__vite__mapDeps([65,1,7,41,66,2,31]))),XC=M.lazy(()=>ke(()=>import("./AdminOrdersHistoryPage-Dv0miUY-.js"),__vite__mapDeps([67,2,53,45,44,12,28,32,66,15]))),dne=M.lazy(()=>ke(()=>import("./AdminUsersPage-C5EMWIni.js"),__vite__mapDeps([68,4,12,64,13,28]))),fne=M.lazy(()=>ke(()=>import("./EmployeeLayout-B7A1nz3e.js"),__vite__mapDeps([69,52,1,53,25]))),mne=M.lazy(()=>ke(()=>import("./POSDashboard-SgeTHlT3.js"),__vite__mapDeps([70,37,18,56,53,2]))),pne=M.lazy(()=>ke(()=>import("./POSPage-DVdfMxzV.js"),__vite__mapDeps([71,15,45,58,12]))),gne=()=>_.jsxs("div",{className:"flex min-h-screen flex-col",children:[_.jsx(Cte,{}),_.jsx("main",{className:"flex flex-1 items-center justify-center bg-gradient-to-br from-primary-50 to-coffee-50",children:_.jsxs("div",{className:"p-4 text-center",children:[_.jsx(Qr,{className:"mx-auto mb-4 h-16 w-16 text-gray-400 opacity-50"}),_.jsx("h1",{className:"mb-4 font-display text-4xl font-bold text-gray-900",children:"404 - Page Not Found"}),_.jsx("p",{className:"mb-8 text-gray-600",children:"This coffee blend doesn't exist on our menu. Maybe it got lost in the daily grind?"}),_.jsx(hi,{to:"/",className:"font-medium text-primary-600 transition-colors hover:text-primary-700",children:" Back to Home"})]})}),_.jsx(Pte,{})]}),yne=()=>{const{isCartOpen:t,closeCart:e,cartItems:n,updateQuantity:i,updateCartItem:r,removeFromCart:s,toastMessage:a,selectedItemIds:o,toggleItemSelection:l,selectAllItems:c,deselectAllItems:u}=sL(),d=Lo(),[f,h]=M.useState(null),[p,g]=M.useState(!1),v=()=>{e(),d("/checkout")},y=b=>{h(b),g(!0)},w=(b,R,S,C)=>{f&&C&&(r(f.id,f.product,C,b,R),g(!1),h(null))};return _.jsxs(_.Fragment,{children:[_.jsx(zte,{}),_.jsx(Dte,{}),_.jsx(M.Suspense,{fallback:_.jsx(Bte,{}),children:_.jsxs(pj,{children:[_.jsx(ve,{path:"/",element:_.jsx(qte,{})}),_.jsx(ve,{path:"/about",element:_.jsx(Zte,{})}),_.jsx(ve,{path:"/menu",element:_.jsx(Kte,{})}),_.jsx(ve,{path:"/drink-lab",element:_.jsx(sne,{})}),_.jsx(ve,{path:"/contact",element:_.jsx(ene,{})}),_.jsx(ve,{path:"/auth/login",element:_.jsx(Hte,{})}),_.jsx(ve,{path:"/auth/register",element:_.jsx($te,{})}),_.jsx(ve,{path:"/auth/forgot-password",element:_.jsx(Gte,{})}),_.jsx(ve,{path:"/checkout",element:_.jsx(Wte,{})}),_.jsx(ve,{path:"/queue",element:_.jsx(Qte,{})}),_.jsx(ve,{path:"/rewards",element:_.jsx(Yte,{})}),_.jsx(ve,{path:"/profile",element:_.jsx(Xte,{})}),_.jsx(ve,{path:"/flavor-profile",element:_.jsx(Jte,{})}),_.jsx(ve,{path:"/faq",element:_.jsx(tne,{})}),_.jsx(ve,{path:"/terms",element:_.jsx(nne,{})}),_.jsx(ve,{path:"/privacy",element:_.jsx(ine,{})}),_.jsx(ve,{path:"/cookies",element:_.jsx(rne,{})}),_.jsx(ve,{element:_.jsx(WC,{}),children:_.jsxs(ve,{path:"/admin",element:_.jsx(ane,{}),children:[_.jsx(ve,{index:!0,element:_.jsx(one,{})}),_.jsx(ve,{path:"queue",element:_.jsx(QC,{})}),_.jsx(ve,{path:"history",element:_.jsx(XC,{})}),_.jsx(ve,{path:"users",element:_.jsx(dne,{})}),_.jsx(ve,{path:"inventory",element:_.jsx(YC,{})}),_.jsx(ve,{path:"products",element:_.jsx(lne,{})}),_.jsx(ve,{path:"analytics",element:_.jsx(cne,{})}),_.jsx(ve,{path:"feedback",element:_.jsx(une,{})}),_.jsx(ve,{path:"settings",element:_.jsx(hne,{})})]})}),_.jsx(ve,{element:_.jsx(WC,{allowedRoles:["employee","admin"]}),children:_.jsxs(ve,{path:"/employee",element:_.jsx(fne,{}),children:[_.jsx(ve,{index:!0,element:_.jsx(mne,{})}),_.jsx(ve,{path:"pos",element:_.jsx(pne,{})}),_.jsx(ve,{path:"queue",element:_.jsx(QC,{})}),_.jsx(ve,{path:"inventory",element:_.jsx(YC,{})}),_.jsx(ve,{path:"history",element:_.jsx(XC,{})})]})}),_.jsx(ve,{path:"*",element:_.jsx(gne,{})})]})}),_.jsx(Ote,{isOpen:t,onClose:e,cartItems:n,onUpdateQuantity:i,onRemoveItem:s,onCheckout:v,onEditItem:y,selectedItemIds:o,onToggleItemSelection:l,onSelectAll:c,onDeselectAll:u}),f&&_.jsx(jte,{product:f.product,selectedSize:f.selectedSize,isOpen:p,onClose:()=>{g(!1),h(null)},onConfirm:w,initialCustomizations:f.customizations,initialQuantity:f.quantity}),a&&_.jsx("div",{className:"fixed bottom-4 right-4 z-[100] animate-fade-in-up rounded-lg bg-gray-900 px-4 py-3 text-white shadow-lg",children:a}),_.jsx(Fte,{})]})},vne=()=>_.jsx(HQ,{children:_.jsx(ZQ,{children:_.jsx(Nte,{children:_.jsx(GQ,{children:_.jsx(kte,{children:_.jsx(KQ,{children:_.jsx(jj,{children:_.jsx(yne,{})})})})})})})}),Z5=document.getElementById("root");if(!Z5)throw new Error("Could not find root element to mount to");const _ne=_3.createRoot(Z5);_ne.render(_.jsx(Xn.StrictMode,{children:_.jsx(vne,{})}));export{z9 as $,n9 as A,Mte as B,WQ as C,ug as D,s9 as E,Pte as F,_D as G,Cte as H,Ai as I,hm as J,bD as K,hi as L,P9 as M,E_ as N,S_ as O,jte as P,jx as Q,Qr as R,Zf as S,Z9 as T,I_ as U,U9 as V,X9 as W,na as X,tz as Y,yD as Z,vD as _,lV as a,Ow as a0,R9 as a1,v9 as a2,T9 as a3,F9 as a4,c9 as a5,wD as a6,QS as a7,Pi as a8,eI as a9,Q9 as aa,h9 as ab,Xn as ac,Vte as ad,Bne as ae,wne as af,CK as ag,IV as ah,zh as ai,UK as b,ye as c,Qe as d,ig as e,Lo as f,BK as g,gh as h,Hb as i,_ as j,nd as k,_i as l,$Q as m,sL as n,JS as o,Di as p,_s as q,M as r,qne as s,J5 as t,ss as u,gD as v,RK as w,$b as x,$t as y,fP as z};
