import{c as C,r as n,d as I,j as e,i as v,U as w,T as y,k as B,o as Y,x as D,O as Z,z as ee,X as se}from"./index-C5TVgI0f.js";import{U as $}from"./users-B5vRnWVV.js";import{S as te}from"./search-BnlduOYl.js";import{F as ae}from"./funnel-sOIrC7BE.js";import{T as re}from"./trending-up-Dh7hXfYA.js";import{A as le}from"./arrow-up-down-D25_6mm5.js";import{C as ie}from"./calendar-wJRk9yhg.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],k=C("briefcase",ne);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],V=C("copy",oe);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],de=C("ellipsis-vertical",ce);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],xe=C("trending-down",me),F=a=>{switch(a){case"admin":return e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-medium bg-purple-50 text-purple-700 ring-1 ring-inset ring-purple-700/10",children:[e.jsx(y,{className:"w-3.5 h-3.5"})," Admin"]});case"employee":return e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-medium bg-blue-50 text-blue-700 ring-1 ring-inset ring-blue-700/10",children:[e.jsx(k,{className:"w-3.5 h-3.5"})," Employee"]});default:return e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-medium bg-green-50 text-green-700 ring-1 ring-inset ring-green-600/20",children:[e.jsx(w,{className:"w-3.5 h-3.5"})," Customer"]})}},he=a=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(a),ge=({user:a,onClose:S})=>{var h,g;n.useEffect(()=>{const c=window.getComputedStyle(document.body).overflow;document.body.style.overflow="hidden";const o=document.getElementById("admin-main-content");let f="";return o&&(f=window.getComputedStyle(o).overflow,o.style.overflow="hidden"),()=>{document.body.style.overflow=c,o&&(o.style.overflow=f||"auto")}},[]);const x=async c=>{try{await navigator.clipboard.writeText(c)}catch(o){console.error("Failed to copy:",o)}};return a&&typeof document<"u"?ee.createPortal(e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"relative h-32 bg-gradient-to-r from-primary-600 to-primary-800 flex-shrink-0",children:[e.jsx("button",{onClick:S,className:"absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 text-white rounded-full transition-colors backdrop-blur-md z-10",children:e.jsx(se,{className:"w-5 h-5"})}),e.jsx("div",{className:"absolute -bottom-12 left-8",children:e.jsx("div",{className:"w-24 h-24 rounded-full bg-white p-1 shadow-lg",children:e.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white text-2xl font-bold overflow-hidden",children:a.photoURL?e.jsx("img",{src:a.photoURL,alt:a.firstName,className:"w-full h-full object-cover"}):e.jsxs("span",{children:[(h=a.firstName)==null?void 0:h[0],(g=a.lastName)==null?void 0:g[0]]})})})})]}),e.jsxs("div",{className:"pt-16 pb-8 px-8 overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[a.firstName," ",a.lastName]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:a.email}),F(a.role)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider mb-1",children:"Customer Since"}),e.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center justify-end gap-1",children:[e.jsx(ie,{className:"w-4 h-4 text-primary-500"}),he(a.createdAt)]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Total Orders"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.totalOrders})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Total Spent"}),e.jsxs("div",{className:"text-2xl font-bold text-primary-700",children:["₱",a.totalSpent.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Loyalty Points"}),e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:a.loyaltyPoints||0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider border-b border-gray-100 pb-2",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-50 flex items-center justify-center text-blue-600 group-hover:bg-blue-100 transition-colors",children:e.jsx(B,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Email Address"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",title:a.email,children:a.email})]}),e.jsx("button",{onClick:c=>{c.stopPropagation(),x(a.email||"")},className:"p-2 text-gray-400 hover:text-primary-600 transition-colors",children:e.jsx(V,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-50 flex items-center justify-center text-green-600 group-hover:bg-green-100 transition-colors",children:e.jsx(D,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Phone Number"}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.phone||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-50 flex items-center justify-center text-purple-600 group-hover:bg-purple-100 transition-colors",children:e.jsx(y,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"User ID"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 font-mono",children:a.uid})]})]})]})]})]})]})}),document.body):null},we=()=>{const[a,S]=n.useState([]),[x,h]=n.useState(!0),[g,c]=n.useState(""),[o,f]=n.useState("all"),[j,U]=n.useState(null),[N,H]=n.useState("joined"),[E,R]=n.useState("desc"),[J,P]=n.useState(null),[T,O]=n.useState(null),[M,A]=n.useState(null),L=(s,t)=>{O({message:s,type:t}),setTimeout(()=>O(null),3e3)};n.useEffect(()=>{const s=t=>{j&&!t.target.closest(".action-menu")&&U(null)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[j]),n.useEffect(()=>{const s=I.collection("users").onSnapshot(t=>{const r=t.docs.map(i=>{var u;const l=i.data();return{uid:i.id,...l,totalSpent:l.totalSpent??0,totalOrders:l.totalOrders??0,createdAt:((u=l.createdAt)==null?void 0:u.toDate())||new Date}});S(r),h(!1)},t=>{console.error("Error fetching users:",t),h(!1),L("Failed to load users","error")});return()=>s()},[]);const d=[...a].sort((s,t)=>{let r=0;switch(N){case"name":r=`${s.firstName} ${s.lastName}`.localeCompare(`${t.firstName} ${t.lastName}`);break;case"role":r=(s.role||"customer").localeCompare(t.role||"customer");break;case"email":r=(s.email||"").localeCompare(t.email||"");break;case"orders":r=s.totalOrders-t.totalOrders;break;case"spent":r=s.totalSpent-t.totalSpent;break;case"joined":r=s.createdAt.getTime()-t.createdAt.getTime();break}return E==="asc"?r:-r}).filter(s=>{var l,u,_,z;const t=o==="all"||s.role===o,r=g.toLowerCase(),i=(((l=s.firstName)==null?void 0:l.toLowerCase())||"").includes(r)||(((u=s.lastName)==null?void 0:u.toLowerCase())||"").includes(r)||(((_=s.email)==null?void 0:_.toLowerCase())||"").includes(r)||(((z=s.phone)==null?void 0:z.toLowerCase())||"").includes(r);return t&&i}),X=s=>{N===s?R(E==="asc"?"desc":"asc"):(H(s),R("asc"))},q=a.length,G=a.filter(s=>s.role==="customer"||!s.role).length,K=a.filter(s=>s.role==="employee").length,Q=a.filter(s=>s.role==="admin").length,m=async(s,t)=>{try{await I.collection("users").doc(s).update({role:t}),U(null),L(`Role updated to ${t} successfully!`,"success")}catch(r){console.error("Error updating user role:",r),L("Failed to update role","error")}},W=async s=>{try{await navigator.clipboard.writeText(s),P(s),setTimeout(()=>P(null),2e3)}catch(t){console.error("Failed to copy:",t)}},b=({title:s,value:t,icon:r,color:i,trend:l})=>e.jsxs("div",{className:"group bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4 transition-all duration-300 hover:shadow-md hover:-translate-y-0.5 cursor-pointer",children:[e.jsx("div",{className:`p-3 rounded-xl ${i} bg-opacity-10 transition-transform duration-300 group-hover:scale-110`,children:e.jsx(r,{className:`w-6 h-6 ${i.replace("bg-","text-")}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium mb-1",children:s}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:t}),l!==void 0&&e.jsxs("span",{className:`text-xs font-medium flex items-center gap-0.5 ${l>0?"text-green-600":l<0?"text-red-600":"text-gray-400"}`,children:[l>0?e.jsx(re,{className:"w-3 h-3"}):l<0?e.jsx(xe,{className:"w-3 h-3"}):e.jsx(Z,{className:"w-3 h-3"}),l!==0&&`${Math.abs(l)}%`]})]})]})]}),p=({field:s,children:t})=>e.jsxs("button",{onClick:()=>X(s),className:"flex items-center gap-1 hover:text-gray-700 transition-colors group",children:[t,e.jsx(le,{className:`w-3.5 h-3.5 transition-opacity ${N===s?"opacity-100 text-primary-600":"opacity-0 group-hover:opacity-50"}`})]});return e.jsxs("div",{className:"space-y-8 pb-10 max-w-[1600px] mx-auto",children:[T&&e.jsxs("div",{className:`fixed top-4 right-4 z-50 px-4 py-3 rounded-lg shadow-lg flex items-center gap-2 animate-in slide-in-from-top-5 ${T.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[e.jsx(v,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:T.message})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:"User Management"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage access, roles, and view user statistics."})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(b,{title:"Total Users",value:q,icon:$,color:"bg-gray-600",trend:0}),e.jsx(b,{title:"Customers",value:G,icon:w,color:"bg-green-600",trend:12}),e.jsx(b,{title:"Employees",value:K,icon:k,color:"bg-blue-600",trend:0}),e.jsx(b,{title:"Admins",value:Q,icon:y,color:"bg-purple-600",trend:0})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-5 border-b border-gray-100 flex flex-col sm:flex-row gap-4 justify-between bg-gradient-to-r from-gray-50/50 to-white items-center",children:[e.jsxs("div",{className:"relative w-full sm:max-w-md",children:[e.jsx(te,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or phone...",value:g,onChange:s=>c(s.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all shadow-sm"})]}),e.jsx("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:e.jsxs("div",{className:"relative w-full sm:w-48",children:[e.jsxs("select",{value:o,onChange:s=>f(s.target.value),className:"w-full appearance-none bg-white border border-gray-200 text-gray-700 py-2.5 px-4 pr-10 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 cursor-pointer font-medium text-sm shadow-sm",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"customer",children:"Customers"}),e.jsx("option",{value:"employee",children:"Employees"}),e.jsx("option",{value:"admin",children:"Admins"})]}),e.jsx(ae,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})})]}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"sticky top-0 bg-gray-50 z-10 shadow-sm",children:e.jsxs("tr",{className:"border-b border-gray-200 text-xs uppercase tracking-wider text-gray-500 font-semibold",children:[e.jsx("th",{className:"px-6 py-4 w-[25%]",children:e.jsx(p,{field:"name",children:"User Details"})}),e.jsx("th",{className:"px-6 py-4 w-[15%]",children:e.jsx(p,{field:"role",children:"Role"})}),e.jsx("th",{className:"px-6 py-4 w-[25%]",children:e.jsx(p,{field:"email",children:"Contact Info"})}),e.jsx("th",{className:"px-6 py-4 w-[15%]",children:e.jsx(p,{field:"orders",children:"Activity"})}),e.jsx("th",{className:"px-6 py-4 w-[15%]",children:e.jsx(p,{field:"joined",children:"Joined"})}),e.jsx("th",{className:"px-6 py-4 w-[5%] text-right"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:x?Array.from({length:5}).map((s,t)=>e.jsxs("tr",{className:"animate-pulse",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"h-10 w-10 bg-gray-200 rounded-full inline-block mr-3"}),e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded inline-block"})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-6 w-20 bg-gray-200 rounded-full"})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded"})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"h-4 w-16 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 w-12 bg-gray-200 rounded"})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded"})}),e.jsx("td",{className:"px-6 py-4"})]},t)):d.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-16 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"bg-gray-100 p-4 rounded-full mb-4",children:e.jsx($,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No users found"}),e.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your search or filters."})]})})}):d.map(s=>{var t,r;return e.jsxs("tr",{onClick:()=>A(s),className:"group hover:bg-gradient-to-r hover:from-primary-50/30 hover:to-transparent transition-all duration-200 cursor-pointer",children:[e.jsx("td",{className:"px-6 py-4 align-top",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white font-bold shadow-sm overflow-hidden flex-shrink-0 ring-2 ring-white group-hover:ring-primary-200 transition-all",children:s.photoURL?e.jsx("img",{src:s.photoURL,alt:s.firstName,className:"w-full h-full object-cover"}):e.jsxs("span",{className:"text-sm",children:[(t=s.firstName)==null?void 0:t[0],(r=s.lastName)==null?void 0:r[0]]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsxs("div",{className:"text-xs text-gray-400 font-mono mt-1 flex items-center gap-1",children:[e.jsx("span",{className:"bg-gray-100 px-1.5 py-0.5 rounded text-[10px]",children:"ID"}),s.uid.slice(0,8)]})]})]})}),e.jsx("td",{className:"px-6 py-4 align-top pt-5",children:F(s.role)}),e.jsx("td",{className:"px-6 py-4 align-top",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 group-hover:text-gray-900 transition-colors group/email",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-50 flex items-center justify-center flex-shrink-0",children:e.jsx(B,{className:"w-3 h-3 text-gray-400"})}),e.jsx("span",{className:"truncate max-w-[140px]",title:s.email||"",children:s.email}),e.jsx("button",{onClick:i=>{i.stopPropagation(),W(s.email||"")},className:"opacity-0 group-hover/email:opacity-100 transition-opacity p-1 hover:bg-gray-100 rounded",children:J===s.email?e.jsx(Y,{className:"w-3 h-3 text-green-600"}):e.jsx(V,{className:"w-3 h-3 text-gray-400"})})]}),s.phone?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 group-hover:text-gray-900 transition-colors",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-50 flex items-center justify-center flex-shrink-0",children:e.jsx(D,{className:"w-3 h-3 text-gray-400"})}),e.jsx("span",{children:s.phone})]}):e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-50 flex items-center justify-center flex-shrink-0",children:e.jsx(D,{className:"w-3 h-3 text-gray-300"})}),e.jsx("span",{className:"italic text-xs",children:"No phone"})]})]})}),e.jsx("td",{className:"px-6 py-4 align-top",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-medium",children:"Orders"}),e.jsx("span",{className:"font-semibold text-gray-900 bg-gray-100 px-2 py-0.5 rounded-md min-w-[2rem] text-center",children:s.totalOrders})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-medium",children:"Spent"}),e.jsxs("span",{className:"font-medium text-primary-700",children:["₱",s.totalSpent.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-medium",children:"Points"}),e.jsxs("span",{className:"font-medium text-amber-600",children:[s.loyaltyPoints||0," pts"]})]})]})}),e.jsx("td",{className:"px-6 py-4 align-top text-right",children:e.jsxs("div",{className:"p-1.5",children:[e.jsx("div",{className:"px-3 py-2 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Change Role"}),e.jsxs("button",{onClick:()=>m(s.uid,"admin"),className:`w-full text-left px-3 py-2.5 rounded-lg text-sm flex items-center gap-3 transition-colors ${s.role==="admin"?"bg-purple-50 text-purple-700 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${s.role==="admin"?"bg-purple-100":"bg-gray-100"}`,children:e.jsx(y,{className:"w-3.5 h-3.5"})}),"Admin",s.role==="admin"&&e.jsx(v,{className:"w-4 h-4 ml-auto text-purple-600"})]}),e.jsxs("button",{onClick:()=>m(s.uid,"employee"),className:`w-full text-left px-3 py-2.5 rounded-lg text-sm flex items-center gap-3 transition-colors ${s.role==="employee"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${s.role==="employee"?"bg-blue-100":"bg-gray-100"}`,children:e.jsx(k,{className:"w-3.5 h-3.5"})}),"Employee",s.role==="employee"&&e.jsx(v,{className:"w-4 h-4 ml-auto text-blue-600"})]}),e.jsxs("button",{onClick:()=>m(s.uid,"customer"),className:`w-full text-left px-3 py-2.5 rounded-lg text-sm flex items-center gap-3 transition-colors ${!s.role||s.role==="customer"?"bg-green-50 text-green-700 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${!s.role||s.role==="customer"?"bg-green-100":"bg-gray-100"}`,children:e.jsx(w,{className:"w-3.5 h-3.5"})}),"Customer",(!s.role||s.role==="customer")&&e.jsx(v,{className:"w-4 h-4 ml-auto text-green-600"})]})]})})]},s.uid)})})]})}),e.jsx("div",{className:"lg:hidden p-4 space-y-4",children:x?Array.from({length:3}).map((s,t)=>e.jsx("div",{className:"bg-gray-50 p-4 rounded-xl animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 w-24 bg-gray-200 rounded"})]})]})},t)):d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx($,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No users found"})]}):d.map(s=>{var t,r;return e.jsxs("div",{onClick:()=>A(s),className:"bg-white border border-gray-200 p-4 rounded-xl shadow-sm hover:shadow-md transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white font-bold shadow-sm overflow-hidden flex-shrink-0 ring-2 ring-white",children:s.photoURL?e.jsx("img",{src:s.photoURL,alt:s.firstName,className:"w-full h-full object-cover"}):e.jsxs("span",{children:[(t=s.firstName)==null?void 0:t[0],(r=s.lastName)==null?void 0:r[0]]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:s.email}),e.jsx("div",{className:"mt-2",children:F(s.role)})]}),e.jsx("button",{onClick:i=>{i.stopPropagation(),U(j===s.uid?null:s.uid)},className:"p-2 rounded-lg text-gray-400 hover:bg-gray-100",children:e.jsx(de,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-3 border-t border-gray-100",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Orders"}),e.jsx("div",{className:"font-semibold text-gray-900",children:s.totalOrders})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Spent"}),e.jsxs("div",{className:"font-semibold text-primary-700 text-sm",children:["₱",s.totalSpent.toFixed(0)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Points"}),e.jsx("div",{className:"font-semibold text-amber-600",children:s.loyaltyPoints||0})]})]}),j===s.uid&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 space-y-1",onClick:i=>i.stopPropagation(),children:[e.jsxs("button",{onClick:()=>m(s.uid,"admin"),className:"w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"})," Set as Admin"]}),e.jsxs("button",{onClick:()=>m(s.uid,"employee"),className:"w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"})," Set as Employee"]}),e.jsxs("button",{onClick:()=>m(s.uid,"customer"),className:"w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4"})," Set as Customer"]})]})]},s.uid)})}),!x&&d.length>0&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 flex justify-between items-center text-sm text-gray-600 bg-gray-50",children:[e.jsxs("span",{className:"font-medium",children:["Showing ",e.jsx("span",{className:"text-gray-900",children:d.length})," of ",e.jsx("span",{className:"text-gray-900",children:a.length})," users"]}),e.jsx("div",{className:"flex items-center gap-2 text-xs",children:e.jsxs("span",{className:"text-gray-500",children:["Sorted by: ",e.jsx("span",{className:"font-medium text-gray-700",children:N})," (",E,")"]})})]})]}),M&&e.jsx(ge,{user:M,onClose:()=>A(null)})]})};export{we as default};
