const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-ByX4Rzgj.js","assets/Button-BEE4zfFH.js","assets/clock-DGvcyHbi.js","assets/wallet-DSQFoAhs.js","assets/users-CAMVOfMN.js","assets/bell-BdXdp4eO.js","assets/ForgotPasswordPage-D47QwBOf.js","assets/Input-NTBNAWCo.js","assets/MenuPage-Bcnfqlyt.js","assets/star-CB1LsOu5.js","assets/sparkles-CynY7O34.js","assets/ProductCardSkeleton-DmrLd6id.js","assets/search-C1T7_7Cl.js","assets/arrow-up-down-DbARNgqT.js","assets/CheckoutPage-BFJjtABz.js","assets/banknote-CRrkf4J4.js","assets/mockAvailableRewards-2NOuBi-T.js","assets/shopping-bag-xcuTlRLR.js","assets/coffee-D5yyadRx.js","assets/message-square-CMhTfLn8.js","assets/QueuePage-obZkXyXG.js","assets/DigitalReceipt-upIQ4C7z.js","assets/thumbs-up-Co6boD1w.js","assets/award-B_vytm8p.js","assets/RewardsPage-tLkD24tA.js","assets/history-BCdaNJSa.js","assets/format-BoV-TgZi.js","assets/en-US-wfBU2YNu.js","assets/calendar-C0goDmGw.js","assets/leaf-BPLoqjoz.js","assets/ProfilePage-CyB9PyoN.js","assets/save-Cz-BJ21_.js","assets/chevron-right-6O-Z8ujW.js","assets/StarRating-BZ2M0LYc.js","assets/settings-D6WbY0zY.js","assets/square-pen-C0WgKiyp.js","assets/FlavorProfilePage-Db3BMzto.js","assets/PolarChart-BzUTjICE.js","assets/AboutPage-BXnHjKU3.js","assets/ContactPage-CGqBGtbL.js","assets/Textarea-CXEcgdSA.js","assets/FAQPage-qsnW2aqs.js","assets/TermsPage-DVwLQR5w.js","assets/file-text-BZe0WHnv.js","assets/credit-card-B9knIv3i.js","assets/PrivacyPolicyPage-De22rYmm.js","assets/CookiePolicyPage-CEWQfReS.js","assets/chart-column-ukKI66oR.js","assets/DrinkLabPage-PnCSEXgH.js","assets/snowflake-Blhx4_Zz.js","assets/AdminLayout-DJGhbr17.js","assets/ConfirmLogoutModal-BATRuWse.js","assets/package-DpszGnsN.js","assets/AdminDashboardPage-s1QZpuUX.js","assets/SalesOverview-BbcYUu94.js","assets/activity-B5Pi-9PR.js","assets/AdminQueuePage-CV3KKKLj.js","assets/inventoryDeduction-DksUIyhn.js","assets/AdminInventoryPage-DH7Z2mQU.js","assets/apple--0M0kTea.js","assets/AdminProductsPage-Cv2ahy4a.js","assets/AdminAnalyticsPage-BtAOKWnD.js","assets/AdminFeedbackPage-Dpl_lJd9.js","assets/funnel-kwarM83C.js","assets/AdminSettingsPage-BC5HBQBC.js","assets/store-BR_LdXP1.js","assets/AdminOrdersHistoryPage-Bv9TsVms.js","assets/AdminUsersPage-DNdCMhdb.js","assets/EmployeeLayout-Cf2wUzvJ.js","assets/POSDashboard-CVZjeCkx.js","assets/POSPage-QyJblcUk.js"])))=>i.map(i=>d[i]);
function w4(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function BC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qC={exports:{}},ng={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b4=Symbol.for("react.transitional.element"),T4=Symbol.for("react.fragment");function HC(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:b4,type:t,key:i,ref:e!==void 0?e:null,props:n}}ng.Fragment=T4;ng.jsx=HC;ng.jsxs=HC;qC.exports=ng;var m=qC.exports,GC={exports:{}},oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tw=Symbol.for("react.transitional.element"),E4=Symbol.for("react.portal"),x4=Symbol.for("react.fragment"),S4=Symbol.for("react.strict_mode"),I4=Symbol.for("react.profiler"),A4=Symbol.for("react.consumer"),R4=Symbol.for("react.context"),C4=Symbol.for("react.forward_ref"),N4=Symbol.for("react.suspense"),P4=Symbol.for("react.memo"),$C=Symbol.for("react.lazy"),D4=Symbol.for("react.activity"),aS=Symbol.iterator;function k4(t){return t===null||typeof t!="object"?null:(t=aS&&t[aS]||t["@@iterator"],typeof t=="function"?t:null)}var KC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},WC=Object.assign,QC={};function bc(t,e,n){this.props=t,this.context=e,this.refs=QC,this.updater=n||KC}bc.prototype.isReactComponent={};bc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function YC(){}YC.prototype=bc.prototype;function Ew(t,e,n){this.props=t,this.context=e,this.refs=QC,this.updater=n||KC}var xw=Ew.prototype=new YC;xw.constructor=Ew;WC(xw,bc.prototype);xw.isPureReactComponent=!0;var oS=Array.isArray;function dv(){}var Qe={H:null,A:null,T:null,S:null},XC=Object.prototype.hasOwnProperty;function Sw(t,e,n){var i=n.ref;return{$$typeof:Tw,type:t,key:e,ref:i!==void 0?i:null,props:n}}function O4(t,e){return Sw(t.type,e,t.props)}function Iw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tw}function V4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var lS=/\/+/g;function zy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?V4(""+t.key):e.toString(36)}function M4(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(dv,dv):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Xo(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Tw:case E4:a=!0;break;case $C:return a=t._init,Xo(a(t._payload),e,n,i,r)}}if(a)return r=r(t),a=i===""?"."+zy(t,0):i,oS(r)?(n="",a!=null&&(n=a.replace(lS,"$&/")+"/"),Xo(r,e,n,"",function(c){return c})):r!=null&&(Iw(r)&&(r=O4(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(lS,"$&/")+"/")+a)),e.push(r)),1;a=0;var o=i===""?".":i+":";if(oS(t))for(var l=0;l<t.length;l++)i=t[l],s=o+zy(i,l),a+=Xo(i,e,n,s,r);else if(l=k4(t),typeof l=="function")for(t=l.call(t),l=0;!(i=t.next()).done;)i=i.value,s=o+zy(i,l++),a+=Xo(i,e,n,s,r);else if(s==="object"){if(typeof t.then=="function")return Xo(M4(t),e,n,i,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function wf(t,e,n){if(t==null)return t;var i=[],r=0;return Xo(t,i,"","",function(s){return e.call(n,s,r++)}),i}function L4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cS=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},U4={map:wf,forEach:function(t,e,n){wf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wf(t,function(){e++}),e},toArray:function(t){return wf(t,function(e){return e})||[]},only:function(t){if(!Iw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Activity=D4;oe.Children=U4;oe.Component=bc;oe.Fragment=x4;oe.Profiler=I4;oe.PureComponent=Ew;oe.StrictMode=S4;oe.Suspense=N4;oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Qe;oe.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Qe.H.useMemoCache(t)}};oe.cache=function(t){return function(){return t.apply(null,arguments)}};oe.cacheSignal=function(){return null};oe.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=WC({},t.props),r=t.key;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)!XC.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(i[s]=e[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];i.children=a}return Sw(t.type,r,i)};oe.createContext=function(t){return t={$$typeof:R4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:A4,_context:t},t};oe.createElement=function(t,e,n){var i,r={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)XC.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return Sw(t,s,r)};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:C4,render:t}};oe.isValidElement=Iw;oe.lazy=function(t){return{$$typeof:$C,_payload:{_status:-1,_result:t},_init:L4}};oe.memo=function(t,e){return{$$typeof:P4,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Qe.T,n={};Qe.T=n;try{var i=t(),r=Qe.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(dv,cS)}catch(s){cS(s)}finally{e!==null&&n.types!==null&&(e.types=n.types),Qe.T=e}};oe.unstable_useCacheRefresh=function(){return Qe.H.useCacheRefresh()};oe.use=function(t){return Qe.H.use(t)};oe.useActionState=function(t,e,n){return Qe.H.useActionState(t,e,n)};oe.useCallback=function(t,e){return Qe.H.useCallback(t,e)};oe.useContext=function(t){return Qe.H.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t,e){return Qe.H.useDeferredValue(t,e)};oe.useEffect=function(t,e){return Qe.H.useEffect(t,e)};oe.useEffectEvent=function(t){return Qe.H.useEffectEvent(t)};oe.useId=function(){return Qe.H.useId()};oe.useImperativeHandle=function(t,e,n){return Qe.H.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return Qe.H.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return Qe.H.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return Qe.H.useMemo(t,e)};oe.useOptimistic=function(t,e){return Qe.H.useOptimistic(t,e)};oe.useReducer=function(t,e,n){return Qe.H.useReducer(t,e,n)};oe.useRef=function(t){return Qe.H.useRef(t)};oe.useState=function(t){return Qe.H.useState(t)};oe.useSyncExternalStore=function(t,e,n){return Qe.H.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return Qe.H.useTransition()};oe.version="19.2.0";GC.exports=oe;var A=GC.exports;const Hn=BC(A),_ne=w4({__proto__:null,default:Hn},[A]);var JC={exports:{}},ig={},ZC={exports:{}},eN={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Q){var X=z.length;z.push(Q);e:for(;0<X;){var ie=X-1>>>1,le=z[ie];if(0<r(le,Q))z[ie]=Q,z[X]=le,X=ie;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var Q=z[0],X=z.pop();if(X!==Q){z[0]=X;e:for(var ie=0,le=z.length,qe=le>>>1;ie<qe;){var ne=2*(ie+1)-1,Ee=z[ne],bt=ne+1,bi=z[bt];if(0>r(Ee,X))bt<le&&0>r(bi,Ee)?(z[ie]=bi,z[bt]=X,ie=bt):(z[ie]=Ee,z[ne]=X,ie=ne);else if(bt<le&&0>r(bi,X))z[ie]=bi,z[bt]=X,ie=bt;else break e}}return Q}function r(z,Q){var X=z.sortIndex-Q.sortIndex;return X!==0?X:z.id-Q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],h=1,d=null,f=3,g=!1,E=!1,S=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;function I(z){for(var Q=n(c);Q!==null;){if(Q.callback===null)i(c);else if(Q.startTime<=z)i(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(c)}}function k(z){if(S=!1,I(z),!E)if(n(l)!==null)E=!0,O||(O=!0,V());else{var Q=n(c);Q!==null&&ee(k,Q.startTime-z)}}var O=!1,T=-1,x=5,R=-1;function C(){return b?!0:!(t.unstable_now()-R<x)}function P(){if(b=!1,O){var z=t.unstable_now();R=z;var Q=!0;try{e:{E=!1,S&&(S=!1,_(T),T=-1),g=!0;var X=f;try{t:{for(I(z),d=n(l);d!==null&&!(d.expirationTime>z&&C());){var ie=d.callback;if(typeof ie=="function"){d.callback=null,f=d.priorityLevel;var le=ie(d.expirationTime<=z);if(z=t.unstable_now(),typeof le=="function"){d.callback=le,I(z),Q=!0;break t}d===n(l)&&i(l),I(z)}else i(l);d=n(l)}if(d!==null)Q=!0;else{var qe=n(c);qe!==null&&ee(k,qe.startTime-z),Q=!1}}break e}finally{d=null,f=X,g=!1}Q=void 0}}finally{Q?V():O=!1}}}var V;if(typeof v=="function")V=function(){v(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,q=D.port2;D.port1.onmessage=P,V=function(){q.postMessage(null)}}else V=function(){y(P,0)};function ee(z,Q){T=y(function(){z(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var Q=3;break;default:Q=f}var X=f;f=Q;try{return z()}finally{f=X}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(z,Q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=f;f=z;try{return Q()}finally{f=X}},t.unstable_scheduleCallback=function(z,Q,X){var ie=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ie+X:ie):X=ie,z){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=X+le,z={id:h++,callback:Q,priorityLevel:z,startTime:X,expirationTime:le,sortIndex:-1},X>ie?(z.sortIndex=X,e(c,z),n(l)===null&&z===n(c)&&(S?(_(T),T=-1):S=!0,ee(k,X-ie))):(z.sortIndex=le,e(l,z),E||g||(E=!0,O||(O=!0,V()))),z},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(z){var Q=f;return function(){var X=f;f=Q;try{return z.apply(this,arguments)}finally{f=X}}}})(eN);ZC.exports=eN;var j4=ZC.exports,tN={exports:{}},bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z4=A;function nN(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function rs(){}var yn={d:{f:rs,r:function(){throw Error(nN(522))},D:rs,C:rs,L:rs,m:rs,X:rs,S:rs,M:rs},p:0,findDOMNode:null},F4=Symbol.for("react.portal");function B4(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F4,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var qu=z4.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function rg(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=yn;bn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(nN(299));return B4(t,e,null,n)};bn.flushSync=function(t){var e=qu.T,n=yn.p;try{if(qu.T=null,yn.p=2,t)return t()}finally{qu.T=e,yn.p=n,yn.d.f()}};bn.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,yn.d.C(t,e))};bn.prefetchDNS=function(t){typeof t=="string"&&yn.d.D(t)};bn.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=rg(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?yn.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&yn.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};bn.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=rg(e.as,e.crossOrigin);yn.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&yn.d.M(t)};bn.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=rg(n,e.crossOrigin);yn.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};bn.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=rg(e.as,e.crossOrigin);yn.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else yn.d.m(t)};bn.requestFormReset=function(t){yn.d.r(t)};bn.unstable_batchedUpdates=function(t,e){return t(e)};bn.useFormState=function(t,e,n){return qu.H.useFormState(t,e,n)};bn.useFormStatus=function(){return qu.H.useHostTransitionStatus()};bn.version="19.2.0";function iN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iN)}catch(t){console.error(t)}}iN(),tN.exports=bn;var rN=tN.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dt=j4,sN=A,q4=rN;function F(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function aN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _d(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function oN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lN(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function uS(t){if(_d(t)!==t)throw Error(F(188))}function H4(t){var e=t.alternate;if(!e){if(e=_d(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return uS(r),t;if(s===i)return uS(r),e;s=s.sibling}throw Error(F(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===n){a=!0,n=r,i=s;break}if(o===i){a=!0,i=r,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,i=r;break}if(o===i){a=!0,i=s,n=r;break}o=o.sibling}if(!a)throw Error(F(189))}}if(n.alternate!==i)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function cN(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=cN(t),e!==null)return e;t=t.sibling}return null}var Xe=Object.assign,G4=Symbol.for("react.element"),bf=Symbol.for("react.transitional.element"),Iu=Symbol.for("react.portal"),sl=Symbol.for("react.fragment"),uN=Symbol.for("react.strict_mode"),fv=Symbol.for("react.profiler"),hN=Symbol.for("react.consumer"),_r=Symbol.for("react.context"),Aw=Symbol.for("react.forward_ref"),mv=Symbol.for("react.suspense"),pv=Symbol.for("react.suspense_list"),Rw=Symbol.for("react.memo"),ds=Symbol.for("react.lazy"),gv=Symbol.for("react.activity"),$4=Symbol.for("react.memo_cache_sentinel"),hS=Symbol.iterator;function ou(t){return t===null||typeof t!="object"?null:(t=hS&&t[hS]||t["@@iterator"],typeof t=="function"?t:null)}var K4=Symbol.for("react.client.reference");function yv(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===K4?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case sl:return"Fragment";case fv:return"Profiler";case uN:return"StrictMode";case mv:return"Suspense";case pv:return"SuspenseList";case gv:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Iu:return"Portal";case _r:return t.displayName||"Context";case hN:return(t._context.displayName||"Context")+".Consumer";case Aw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rw:return e=t.displayName||null,e!==null?e:yv(t.type)||"Memo";case ds:e=t._payload,t=t._init;try{return yv(t(e))}catch{}}return null}var Au=Array.isArray,se=sN.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce=q4.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$a={pending:!1,data:null,method:null,action:null},_v=[],al=-1;function ar(t){return{current:t}}function zt(t){0>al||(t.current=_v[al],_v[al]=null,al--)}function ze(t,e){al++,_v[al]=t.current,t.current=e}var Yi=ar(null),Rh=ar(null),Rs=ar(null),zm=ar(null);function Fm(t,e){switch(ze(Rs,e),ze(Rh,t),ze(Yi,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?yI(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=yI(e),t=PP(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}zt(Yi),ze(Yi,t)}function Ul(){zt(Yi),zt(Rh),zt(Rs)}function vv(t){t.memoizedState!==null&&ze(zm,t);var e=Yi.current,n=PP(e,t.type);e!==n&&(ze(Rh,t),ze(Yi,n))}function Bm(t){Rh.current===t&&(zt(Yi),zt(Rh)),zm.current===t&&(zt(zm),jh._currentValue=$a)}var Fy,dS;function Ia(t){if(Fy===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fy=e&&e[1]||"",dS=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fy+t+dS}var By=!1;function qy(t,e){if(!t||By)return"";By=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(g){var f=g}Reflect.construct(t,[],d)}else{try{d.call()}catch(g){f=g}t.call(d.prototype)}}else{try{throw Error()}catch(g){f=g}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(g){if(g&&f&&typeof g.stack=="string")return[g.stack,f.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split(`
`),c=o.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==c[r]){var h=`
`+l[i].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=i&&0<=r);break}}}finally{By=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Ia(n):""}function W4(t,e){switch(t.tag){case 26:case 27:case 5:return Ia(t.type);case 16:return Ia("Lazy");case 13:return t.child!==e&&e!==null?Ia("Suspense Fallback"):Ia("Suspense");case 19:return Ia("SuspenseList");case 0:case 15:return qy(t.type,!1);case 11:return qy(t.type.render,!1);case 1:return qy(t.type,!0);case 31:return Ia("Activity");default:return""}}function fS(t){try{var e="",n=null;do e+=W4(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var wv=Object.prototype.hasOwnProperty,Cw=Dt.unstable_scheduleCallback,Hy=Dt.unstable_cancelCallback,Q4=Dt.unstable_shouldYield,Y4=Dt.unstable_requestPaint,Gn=Dt.unstable_now,X4=Dt.unstable_getCurrentPriorityLevel,dN=Dt.unstable_ImmediatePriority,fN=Dt.unstable_UserBlockingPriority,qm=Dt.unstable_NormalPriority,J4=Dt.unstable_LowPriority,mN=Dt.unstable_IdlePriority,Z4=Dt.log,e6=Dt.unstable_setDisableYieldValue,vd=null,$n=null;function ws(t){if(typeof Z4=="function"&&e6(t),$n&&typeof $n.setStrictMode=="function")try{$n.setStrictMode(vd,t)}catch{}}var Kn=Math.clz32?Math.clz32:i6,t6=Math.log,n6=Math.LN2;function i6(t){return t>>>=0,t===0?32:31-(t6(t)/n6|0)|0}var Tf=256,Ef=262144,xf=4194304;function Aa(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function sg(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=i&134217727;return o!==0?(i=o&~s,i!==0?r=Aa(i):(a&=o,a!==0?r=Aa(a):n||(n=o&~t,n!==0&&(r=Aa(n))))):(o=i&~s,o!==0?r=Aa(o):a!==0?r=Aa(a):n||(n=i&~t,n!==0&&(r=Aa(n)))),r===0?0:e!==0&&e!==r&&!(e&s)&&(s=r&-r,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:r}function wd(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function r6(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pN(){var t=xf;return xf<<=1,!(xf&62914560)&&(xf=4194304),t}function Gy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function bd(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function s6(t,e,n,i,r,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,c=t.hiddenUpdates;for(n=a&~n;0<n;){var h=31-Kn(n),d=1<<h;o[h]=0,l[h]=-1;var f=c[h];if(f!==null)for(c[h]=null,h=0;h<f.length;h++){var g=f[h];g!==null&&(g.lane&=-536870913)}n&=~d}i!==0&&gN(t,i,0),s!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=s&~(a&~e))}function gN(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-Kn(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function yN(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Kn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function _N(t,e){var n=e&-e;return n=n&42?1:Nw(n),n&(t.suspendedLanes|e)?0:n}function Nw(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Pw(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function vN(){var t=Ce.p;return t!==0?t:(t=window.event,t===void 0?32:BP(t.type))}function mS(t,e){var n=Ce.p;try{return Ce.p=t,e()}finally{Ce.p=n}}var aa=Math.random().toString(36).slice(2),$t="__reactFiber$"+aa,Pn="__reactProps$"+aa,Tc="__reactContainer$"+aa,bv="__reactEvents$"+aa,a6="__reactListeners$"+aa,o6="__reactHandles$"+aa,pS="__reactResources$"+aa,Td="__reactMarker$"+aa;function Dw(t){delete t[$t],delete t[Pn],delete t[bv],delete t[a6],delete t[o6]}function ol(t){var e=t[$t];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Tc]||n[$t]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=TI(t);t!==null;){if(n=t[$t])return n;t=TI(t)}return e}t=n,n=t.parentNode}return null}function Ec(t){if(t=t[$t]||t[Tc]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Ru(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(F(33))}function xl(t){var e=t[pS];return e||(e=t[pS]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Ut(t){t[Td]=!0}var wN=new Set,bN={};function bo(t,e){jl(t,e),jl(t+"Capture",e)}function jl(t,e){for(bN[t]=e,t=0;t<e.length;t++)wN.add(e[t])}var l6=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gS={},yS={};function c6(t){return wv.call(yS,t)?!0:wv.call(gS,t)?!1:l6.test(t)?yS[t]=!0:(gS[t]=!0,!1)}function tm(t,e,n){if(c6(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Sf(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function ur(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function si(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function TN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function u6(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Tv(t){if(!t._valueTracker){var e=TN(t)?"checked":"value";t._valueTracker=u6(t,e,""+t[e])}}function EN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=TN(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Hm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var h6=/[\n"\\]/g;function li(t){return t.replace(h6,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Ev(t,e,n,i,r,s,a,o){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+si(e)):t.value!==""+si(e)&&(t.value=""+si(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?xv(t,a,si(e)):n!=null?xv(t,a,si(n)):i!=null&&t.removeAttribute("value"),r==null&&s!=null&&(t.defaultChecked=!!s),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+si(o):t.removeAttribute("name")}function xN(t,e,n,i,r,s,a,o){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){Tv(t);return}n=n!=null?""+si(n):"",e=e!=null?""+si(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=o?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),Tv(t)}function xv(t,e,n){e==="number"&&Hm(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Sl(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+si(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function SN(t,e,n){if(e!=null&&(e=""+si(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+si(n):""}function IN(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(F(92));if(Au(i)){if(1<i.length)throw Error(F(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=si(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),Tv(t)}function zl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var d6=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _S(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||d6.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function AN(t,e,n){if(e!=null&&typeof e!="object")throw Error(F(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&_S(t,r,i)}else for(var s in e)e.hasOwnProperty(s)&&_S(t,s,e[s])}function kw(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var f6=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),m6=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nm(t){return m6.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function vr(){}var Sv=null;function Ow(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ll=null,Il=null;function vS(t){var e=Ec(t);if(e&&(t=e.stateNode)){var n=t[Pn]||null;e:switch(t=e.stateNode,e.type){case"input":if(Ev(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+li(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[Pn]||null;if(!r)throw Error(F(90));Ev(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&EN(i)}break e;case"textarea":SN(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Sl(t,!!n.multiple,e,!1)}}}var $y=!1;function RN(t,e,n){if($y)return t(e,n);$y=!0;try{var i=t(e);return i}finally{if($y=!1,(ll!==null||Il!==null)&&(yg(),ll&&(e=ll,t=Il,Il=ll=null,vS(e),t)))for(e=0;e<t.length;e++)vS(t[e])}}function Ch(t,e){var n=t.stateNode;if(n===null)return null;var i=n[Pn]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var Pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Iv=!1;if(Pr)try{var lu={};Object.defineProperty(lu,"passive",{get:function(){Iv=!0}}),window.addEventListener("test",lu,lu),window.removeEventListener("test",lu,lu)}catch{Iv=!1}var bs=null,Vw=null,im=null;function CN(){if(im)return im;var t,e=Vw,n=e.length,i,r="value"in bs?bs.value:bs.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return im=r.slice(t,1<i?1-i:void 0)}function rm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function If(){return!0}function wS(){return!1}function On(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?If:wS,this.isPropagationStopped=wS,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=If)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=If)},persist:function(){},isPersistent:If}),e}var To={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ag=On(To),Ed=Xe({},To,{view:0,detail:0}),p6=On(Ed),Ky,Wy,cu,og=Xe({},Ed,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==cu&&(cu&&t.type==="mousemove"?(Ky=t.screenX-cu.screenX,Wy=t.screenY-cu.screenY):Wy=Ky=0,cu=t),Ky)},movementY:function(t){return"movementY"in t?t.movementY:Wy}}),bS=On(og),g6=Xe({},og,{dataTransfer:0}),y6=On(g6),_6=Xe({},Ed,{relatedTarget:0}),Qy=On(_6),v6=Xe({},To,{animationName:0,elapsedTime:0,pseudoElement:0}),w6=On(v6),b6=Xe({},To,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),T6=On(b6),E6=Xe({},To,{data:0}),TS=On(E6),x6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function A6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=I6[t])?!!e[t]:!1}function Mw(){return A6}var R6=Xe({},Ed,{key:function(t){if(t.key){var e=x6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?S6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mw,charCode:function(t){return t.type==="keypress"?rm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),C6=On(R6),N6=Xe({},og,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ES=On(N6),P6=Xe({},Ed,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mw}),D6=On(P6),k6=Xe({},To,{propertyName:0,elapsedTime:0,pseudoElement:0}),O6=On(k6),V6=Xe({},og,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),M6=On(V6),L6=Xe({},To,{newState:0,oldState:0}),U6=On(L6),j6=[9,13,27,32],Lw=Pr&&"CompositionEvent"in window,Hu=null;Pr&&"documentMode"in document&&(Hu=document.documentMode);var z6=Pr&&"TextEvent"in window&&!Hu,NN=Pr&&(!Lw||Hu&&8<Hu&&11>=Hu),xS=" ",SS=!1;function PN(t,e){switch(t){case"keyup":return j6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cl=!1;function F6(t,e){switch(t){case"compositionend":return DN(e);case"keypress":return e.which!==32?null:(SS=!0,xS);case"textInput":return t=e.data,t===xS&&SS?null:t;default:return null}}function B6(t,e){if(cl)return t==="compositionend"||!Lw&&PN(t,e)?(t=CN(),im=Vw=bs=null,cl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return NN&&e.locale!=="ko"?null:e.data;default:return null}}var q6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function IS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!q6[t.type]:e==="textarea"}function kN(t,e,n,i){ll?Il?Il.push(i):Il=[i]:ll=i,e=lp(e,"onChange"),0<e.length&&(n=new ag("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Gu=null,Nh=null;function H6(t){RP(t,0)}function lg(t){var e=Ru(t);if(EN(e))return t}function AS(t,e){if(t==="change")return e}var ON=!1;if(Pr){var Yy;if(Pr){var Xy="oninput"in document;if(!Xy){var RS=document.createElement("div");RS.setAttribute("oninput","return;"),Xy=typeof RS.oninput=="function"}Yy=Xy}else Yy=!1;ON=Yy&&(!document.documentMode||9<document.documentMode)}function CS(){Gu&&(Gu.detachEvent("onpropertychange",VN),Nh=Gu=null)}function VN(t){if(t.propertyName==="value"&&lg(Nh)){var e=[];kN(e,Nh,t,Ow(t)),RN(H6,e)}}function G6(t,e,n){t==="focusin"?(CS(),Gu=e,Nh=n,Gu.attachEvent("onpropertychange",VN)):t==="focusout"&&CS()}function $6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lg(Nh)}function K6(t,e){if(t==="click")return lg(e)}function W6(t,e){if(t==="input"||t==="change")return lg(e)}function Q6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xn=typeof Object.is=="function"?Object.is:Q6;function Ph(t,e){if(Xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!wv.call(e,r)||!Xn(t[r],e[r]))return!1}return!0}function NS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function PS(t,e){var n=NS(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=NS(n)}}function MN(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?MN(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function LN(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Hm(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Hm(t.document)}return e}function Uw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Y6=Pr&&"documentMode"in document&&11>=document.documentMode,ul=null,Av=null,$u=null,Rv=!1;function DS(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rv||ul==null||ul!==Hm(i)||(i=ul,"selectionStart"in i&&Uw(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),$u&&Ph($u,i)||($u=i,i=lp(Av,"onSelect"),0<i.length&&(e=new ag("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ul)))}function Ea(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var hl={animationend:Ea("Animation","AnimationEnd"),animationiteration:Ea("Animation","AnimationIteration"),animationstart:Ea("Animation","AnimationStart"),transitionrun:Ea("Transition","TransitionRun"),transitionstart:Ea("Transition","TransitionStart"),transitioncancel:Ea("Transition","TransitionCancel"),transitionend:Ea("Transition","TransitionEnd")},Jy={},UN={};Pr&&(UN=document.createElement("div").style,"AnimationEvent"in window||(delete hl.animationend.animation,delete hl.animationiteration.animation,delete hl.animationstart.animation),"TransitionEvent"in window||delete hl.transitionend.transition);function Eo(t){if(Jy[t])return Jy[t];if(!hl[t])return t;var e=hl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in UN)return Jy[t]=e[n];return t}var jN=Eo("animationend"),zN=Eo("animationiteration"),FN=Eo("animationstart"),X6=Eo("transitionrun"),J6=Eo("transitionstart"),Z6=Eo("transitioncancel"),BN=Eo("transitionend"),qN=new Map,Cv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cv.push("scrollEnd");function Pi(t,e){qN.set(t,e),bo(e,[t])}var Gm=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ri=[],dl=0,jw=0;function cg(){for(var t=dl,e=jw=dl=0;e<t;){var n=ri[e];ri[e++]=null;var i=ri[e];ri[e++]=null;var r=ri[e];ri[e++]=null;var s=ri[e];if(ri[e++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&HN(n,r,s)}}function ug(t,e,n,i){ri[dl++]=t,ri[dl++]=e,ri[dl++]=n,ri[dl++]=i,jw|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function zw(t,e,n,i){return ug(t,e,n,i),$m(t)}function xo(t,e){return ug(t,null,null,e),$m(t)}function HN(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(r=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,r&&e!==null&&(r=31-Kn(n),t=s.hiddenUpdates,i=t[r],i===null?t[r]=[e]:i.push(e),e.lane=n|536870912),s):null}function $m(t){if(50<th)throw th=0,Yv=null,Error(F(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var fl={};function eU(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(t,e,n,i){return new eU(t,e,n,i)}function Fw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Er(t,e){var n=t.alternate;return n===null?(n=Fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function GN(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function sm(t,e,n,i,r,s){var a=0;if(i=t,typeof t=="function")Fw(t)&&(a=1);else if(typeof t=="string")a=sj(t,n,Yi.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case gv:return t=Fn(31,n,e,r),t.elementType=gv,t.lanes=s,t;case sl:return Ka(n.children,r,s,e);case uN:a=8,r|=24;break;case fv:return t=Fn(12,n,e,r|2),t.elementType=fv,t.lanes=s,t;case mv:return t=Fn(13,n,e,r),t.elementType=mv,t.lanes=s,t;case pv:return t=Fn(19,n,e,r),t.elementType=pv,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _r:a=10;break e;case hN:a=9;break e;case Aw:a=11;break e;case Rw:a=14;break e;case ds:a=16,i=null;break e}a=29,n=Error(F(130,t===null?"null":typeof t,"")),i=null}return e=Fn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Ka(t,e,n,i){return t=Fn(7,t,i,e),t.lanes=n,t}function Zy(t,e,n){return t=Fn(6,t,null,e),t.lanes=n,t}function $N(t){var e=Fn(18,null,null,0);return e.stateNode=t,e}function e_(t,e,n){return e=Fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var kS=new WeakMap;function ci(t,e){if(typeof t=="object"&&t!==null){var n=kS.get(t);return n!==void 0?n:(e={value:t,source:e,stack:fS(e)},kS.set(t,e),e)}return{value:t,source:e,stack:fS(e)}}var ml=[],pl=0,Km=null,Dh=0,ai=[],oi=0,Bs=null,qi=1,Hi="";function pr(t,e){ml[pl++]=Dh,ml[pl++]=Km,Km=t,Dh=e}function KN(t,e,n){ai[oi++]=qi,ai[oi++]=Hi,ai[oi++]=Bs,Bs=t;var i=qi;t=Hi;var r=32-Kn(i)-1;i&=~(1<<r),n+=1;var s=32-Kn(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,qi=1<<32-Kn(e)+r|n<<r|i,Hi=s+t}else qi=1<<s|n<<r|i,Hi=t}function Bw(t){t.return!==null&&(pr(t,1),KN(t,1,0))}function qw(t){for(;t===Km;)Km=ml[--pl],ml[pl]=null,Dh=ml[--pl],ml[pl]=null;for(;t===Bs;)Bs=ai[--oi],ai[oi]=null,Hi=ai[--oi],ai[oi]=null,qi=ai[--oi],ai[oi]=null}function WN(t,e){ai[oi++]=qi,ai[oi++]=Hi,ai[oi++]=Bs,qi=e.id,Hi=e.overflow,Bs=t}var Kt=null,Ke=null,be=!1,Cs=null,ui=!1,Nv=Error(F(519));function qs(t){var e=Error(F(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kh(ci(e,t)),Nv}function OS(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[$t]=t,e[Pn]=i,n){case"dialog":ge("cancel",e),ge("close",e);break;case"iframe":case"object":case"embed":ge("load",e);break;case"video":case"audio":for(n=0;n<Lh.length;n++)ge(Lh[n],e);break;case"source":ge("error",e);break;case"img":case"image":case"link":ge("error",e),ge("load",e);break;case"details":ge("toggle",e);break;case"input":ge("invalid",e),xN(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":ge("invalid",e);break;case"textarea":ge("invalid",e),IN(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||NP(e.textContent,n)?(i.popover!=null&&(ge("beforetoggle",e),ge("toggle",e)),i.onScroll!=null&&ge("scroll",e),i.onScrollEnd!=null&&ge("scrollend",e),i.onClick!=null&&(e.onclick=vr),e=!0):e=!1,e||qs(t,!0)}function VS(t){for(Kt=t.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:ui=!1;return;case 27:case 3:ui=!0;return;default:Kt=Kt.return}}function zo(t){if(t!==Kt)return!1;if(!be)return VS(t),be=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||t0(t.type,t.memoizedProps)),n=!n),n&&Ke&&qs(t),VS(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));Ke=bI(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));Ke=bI(t)}else e===27?(e=Ke,oa(t.type)?(t=s0,s0=null,Ke=t):Ke=e):Ke=Kt?pi(t.stateNode.nextSibling):null;return!0}function no(){Ke=Kt=null,be=!1}function t_(){var t=Cs;return t!==null&&(Sn===null?Sn=t:Sn.push.apply(Sn,t),Cs=null),t}function kh(t){Cs===null?Cs=[t]:Cs.push(t)}var Pv=ar(null),So=null,wr=null;function ps(t,e,n){ze(Pv,e._currentValue),e._currentValue=n}function xr(t){t._currentValue=Pv.current,zt(Pv)}function Dv(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function kv(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;e:for(;s!==null;){var o=s;s=r;for(var l=0;l<e.length;l++)if(o.context===e[l]){s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Dv(s.return,n,t),i||(a=null);break e}s=o.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(F(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Dv(a,n,t),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function xc(t,e,n,i){t=null;for(var r=e,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(F(387));if(a=a.memoizedProps,a!==null){var o=r.type;Xn(r.pendingProps.value,a.value)||(t!==null?t.push(o):t=[o])}}else if(r===zm.current){if(a=r.alternate,a===null)throw Error(F(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(jh):t=[jh])}r=r.return}t!==null&&kv(e,t,n,i),e.flags|=262144}function Wm(t){for(t=t.firstContext;t!==null;){if(!Xn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function io(t){So=t,wr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qt(t){return QN(So,t)}function Af(t,e){return So===null&&io(t),QN(t,e)}function QN(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},wr===null){if(t===null)throw Error(F(308));wr=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else wr=wr.next=e;return n}var tU=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},nU=Dt.unstable_scheduleCallback,iU=Dt.unstable_NormalPriority,It={$$typeof:_r,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hw(){return{controller:new tU,data:new Map,refCount:0}}function xd(t){t.refCount--,t.refCount===0&&nU(iU,function(){t.controller.abort()})}var Ku=null,Ov=0,Fl=0,Al=null;function rU(t,e){if(Ku===null){var n=Ku=[];Ov=0,Fl=pb(),Al={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Ov++,e.then(MS,MS),e}function MS(){if(--Ov===0&&Ku!==null){Al!==null&&(Al.status="fulfilled");var t=Ku;Ku=null,Fl=0,Al=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function sU(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var LS=se.S;se.S=function(t,e){cP=Gn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&rU(t,e),LS!==null&&LS(t,e)};var Wa=ar(null);function Gw(){var t=Wa.current;return t!==null?t:je.pooledCache}function am(t,e){e===null?ze(Wa,Wa.current):ze(Wa,e.pool)}function YN(){var t=Gw();return t===null?null:{parent:It._currentValue,pool:t}}var Sc=Error(F(460)),$w=Error(F(474)),hg=Error(F(542)),Qm={then:function(){}};function US(t){return t=t.status,t==="fulfilled"||t==="rejected"}function XN(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(vr,vr),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,zS(t),t;default:if(typeof e.status=="string")e.then(vr,vr);else{if(t=je,t!==null&&100<t.shellSuspendCounter)throw Error(F(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,zS(t),t}throw Qa=e,Sc}}function Ra(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Qa=n,Sc):n}}var Qa=null;function jS(){if(Qa===null)throw Error(F(459));var t=Qa;return Qa=null,t}function zS(t){if(t===Sc||t===hg)throw Error(F(483))}var Rl=null,Oh=0;function Rf(t){var e=Oh;return Oh+=1,Rl===null&&(Rl=[]),XN(Rl,t,e)}function uu(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Cf(t,e){throw e.$$typeof===G4?Error(F(525)):(t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function JN(t){function e(y,_){if(t){var v=y.deletions;v===null?(y.deletions=[_],y.flags|=16):v.push(_)}}function n(y,_){if(!t)return null;for(;_!==null;)e(y,_),_=_.sibling;return null}function i(y){for(var _=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function r(y,_){return y=Er(y,_),y.index=0,y.sibling=null,y}function s(y,_,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<_?(y.flags|=67108866,_):v):(y.flags|=67108866,_)):(y.flags|=1048576,_)}function a(y){return t&&y.alternate===null&&(y.flags|=67108866),y}function o(y,_,v,I){return _===null||_.tag!==6?(_=Zy(v,y.mode,I),_.return=y,_):(_=r(_,v),_.return=y,_)}function l(y,_,v,I){var k=v.type;return k===sl?h(y,_,v.props.children,I,v.key):_!==null&&(_.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ds&&Ra(k)===_.type)?(_=r(_,v.props),uu(_,v),_.return=y,_):(_=sm(v.type,v.key,v.props,null,y.mode,I),uu(_,v),_.return=y,_)}function c(y,_,v,I){return _===null||_.tag!==4||_.stateNode.containerInfo!==v.containerInfo||_.stateNode.implementation!==v.implementation?(_=e_(v,y.mode,I),_.return=y,_):(_=r(_,v.children||[]),_.return=y,_)}function h(y,_,v,I,k){return _===null||_.tag!==7?(_=Ka(v,y.mode,I,k),_.return=y,_):(_=r(_,v),_.return=y,_)}function d(y,_,v){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=Zy(""+_,y.mode,v),_.return=y,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case bf:return v=sm(_.type,_.key,_.props,null,y.mode,v),uu(v,_),v.return=y,v;case Iu:return _=e_(_,y.mode,v),_.return=y,_;case ds:return _=Ra(_),d(y,_,v)}if(Au(_)||ou(_))return _=Ka(_,y.mode,v,null),_.return=y,_;if(typeof _.then=="function")return d(y,Rf(_),v);if(_.$$typeof===_r)return d(y,Af(y,_),v);Cf(y,_)}return null}function f(y,_,v,I){var k=_!==null?_.key:null;if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return k!==null?null:o(y,_,""+v,I);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case bf:return v.key===k?l(y,_,v,I):null;case Iu:return v.key===k?c(y,_,v,I):null;case ds:return v=Ra(v),f(y,_,v,I)}if(Au(v)||ou(v))return k!==null?null:h(y,_,v,I,null);if(typeof v.then=="function")return f(y,_,Rf(v),I);if(v.$$typeof===_r)return f(y,_,Af(y,v),I);Cf(y,v)}return null}function g(y,_,v,I,k){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return y=y.get(v)||null,o(_,y,""+I,k);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case bf:return y=y.get(I.key===null?v:I.key)||null,l(_,y,I,k);case Iu:return y=y.get(I.key===null?v:I.key)||null,c(_,y,I,k);case ds:return I=Ra(I),g(y,_,v,I,k)}if(Au(I)||ou(I))return y=y.get(v)||null,h(_,y,I,k,null);if(typeof I.then=="function")return g(y,_,v,Rf(I),k);if(I.$$typeof===_r)return g(y,_,v,Af(_,I),k);Cf(_,I)}return null}function E(y,_,v,I){for(var k=null,O=null,T=_,x=_=0,R=null;T!==null&&x<v.length;x++){T.index>x?(R=T,T=null):R=T.sibling;var C=f(y,T,v[x],I);if(C===null){T===null&&(T=R);break}t&&T&&C.alternate===null&&e(y,T),_=s(C,_,x),O===null?k=C:O.sibling=C,O=C,T=R}if(x===v.length)return n(y,T),be&&pr(y,x),k;if(T===null){for(;x<v.length;x++)T=d(y,v[x],I),T!==null&&(_=s(T,_,x),O===null?k=T:O.sibling=T,O=T);return be&&pr(y,x),k}for(T=i(T);x<v.length;x++)R=g(T,y,x,v[x],I),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?x:R.key),_=s(R,_,x),O===null?k=R:O.sibling=R,O=R);return t&&T.forEach(function(P){return e(y,P)}),be&&pr(y,x),k}function S(y,_,v,I){if(v==null)throw Error(F(151));for(var k=null,O=null,T=_,x=_=0,R=null,C=v.next();T!==null&&!C.done;x++,C=v.next()){T.index>x?(R=T,T=null):R=T.sibling;var P=f(y,T,C.value,I);if(P===null){T===null&&(T=R);break}t&&T&&P.alternate===null&&e(y,T),_=s(P,_,x),O===null?k=P:O.sibling=P,O=P,T=R}if(C.done)return n(y,T),be&&pr(y,x),k;if(T===null){for(;!C.done;x++,C=v.next())C=d(y,C.value,I),C!==null&&(_=s(C,_,x),O===null?k=C:O.sibling=C,O=C);return be&&pr(y,x),k}for(T=i(T);!C.done;x++,C=v.next())C=g(T,y,x,C.value,I),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?x:C.key),_=s(C,_,x),O===null?k=C:O.sibling=C,O=C);return t&&T.forEach(function(V){return e(y,V)}),be&&pr(y,x),k}function b(y,_,v,I){if(typeof v=="object"&&v!==null&&v.type===sl&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case bf:e:{for(var k=v.key;_!==null;){if(_.key===k){if(k=v.type,k===sl){if(_.tag===7){n(y,_.sibling),I=r(_,v.props.children),I.return=y,y=I;break e}}else if(_.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ds&&Ra(k)===_.type){n(y,_.sibling),I=r(_,v.props),uu(I,v),I.return=y,y=I;break e}n(y,_);break}else e(y,_);_=_.sibling}v.type===sl?(I=Ka(v.props.children,y.mode,I,v.key),I.return=y,y=I):(I=sm(v.type,v.key,v.props,null,y.mode,I),uu(I,v),I.return=y,y=I)}return a(y);case Iu:e:{for(k=v.key;_!==null;){if(_.key===k)if(_.tag===4&&_.stateNode.containerInfo===v.containerInfo&&_.stateNode.implementation===v.implementation){n(y,_.sibling),I=r(_,v.children||[]),I.return=y,y=I;break e}else{n(y,_);break}else e(y,_);_=_.sibling}I=e_(v,y.mode,I),I.return=y,y=I}return a(y);case ds:return v=Ra(v),b(y,_,v,I)}if(Au(v))return E(y,_,v,I);if(ou(v)){if(k=ou(v),typeof k!="function")throw Error(F(150));return v=k.call(v),S(y,_,v,I)}if(typeof v.then=="function")return b(y,_,Rf(v),I);if(v.$$typeof===_r)return b(y,_,Af(y,v),I);Cf(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint"?(v=""+v,_!==null&&_.tag===6?(n(y,_.sibling),I=r(_,v),I.return=y,y=I):(n(y,_),I=Zy(v,y.mode,I),I.return=y,y=I),a(y)):n(y,_)}return function(y,_,v,I){try{Oh=0;var k=b(y,_,v,I);return Rl=null,k}catch(T){if(T===Sc||T===hg)throw T;var O=Fn(29,T,null,y.mode);return O.lanes=I,O.return=y,O}finally{}}}var ro=JN(!0),ZN=JN(!1),fs=!1;function Kw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ns(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ps(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Re&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=$m(t),HN(t,null,n),e}return ug(t,i,e,n),$m(t)}function Wu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,yN(t,n)}}function n_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Mv=!1;function Qu(){if(Mv){var t=Al;if(t!==null)throw t}}function Yu(t,e,n,i){Mv=!1;var r=t.updateQueue;fs=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;a=0,h=c=l=null,o=s;do{var f=o.lane&-536870913,g=f!==o.lane;if(g?(ve&f)===f:(i&f)===f){f!==0&&f===Fl&&(Mv=!0),h!==null&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var E=t,S=o;f=e;var b=n;switch(S.tag){case 1:if(E=S.payload,typeof E=="function"){d=E.call(b,d,f);break e}d=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=S.payload,f=typeof E=="function"?E.call(b,d,f):E,f==null)break e;d=Xe({},d,f);break e;case 2:fs=!0}}f=o.callback,f!==null&&(t.flags|=64,g&&(t.flags|=8192),g=r.callbacks,g===null?r.callbacks=[f]:g.push(f))}else g={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,a|=f;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;g=o,o=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(!0);h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,s===null&&(r.shared.lanes=0),Gs|=a,t.lanes=a,t.memoizedState=d}}function e2(t,e){if(typeof t!="function")throw Error(F(191,t));t.call(e)}function t2(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)e2(n[t],e)}var Bl=ar(null),Ym=ar(0);function FS(t,e){t=Vr,ze(Ym,t),ze(Bl,e),Vr=t|e.baseLanes}function Lv(){ze(Ym,Vr),ze(Bl,Bl.current)}function Ww(){Vr=Ym.current,zt(Bl),zt(Ym)}var Jn=ar(null),mi=null;function gs(t){var e=t.alternate;ze(gt,gt.current&1),ze(Jn,t),mi===null&&(e===null||Bl.current!==null||e.memoizedState!==null)&&(mi=t)}function Uv(t){ze(gt,gt.current),ze(Jn,t),mi===null&&(mi=t)}function n2(t){t.tag===22?(ze(gt,gt.current),ze(Jn,t),mi===null&&(mi=t)):ys()}function ys(){ze(gt,gt.current),ze(Jn,Jn.current)}function jn(t){zt(Jn),mi===t&&(mi=null),zt(gt)}var gt=ar(0);function Xm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||i0(n)||r0(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dr=0,ce=null,Le=null,xt=null,Jm=!1,Cl=!1,so=!1,Zm=0,Vh=0,Nl=null,aU=0;function lt(){throw Error(F(321))}function Qw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xn(t[n],e[n]))return!1;return!0}function Yw(t,e,n,i,r,s){return Dr=s,ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,se.H=t===null||t.memoizedState===null?k2:ob,so=!1,s=n(i,r),so=!1,Cl&&(s=r2(e,n,i,r)),i2(t),s}function i2(t){se.H=Mh;var e=Le!==null&&Le.next!==null;if(Dr=0,xt=Le=ce=null,Jm=!1,Vh=0,Nl=null,e)throw Error(F(300));t===null||At||(t=t.dependencies,t!==null&&Wm(t)&&(At=!0))}function r2(t,e,n,i){ce=t;var r=0;do{if(Cl&&(Nl=null),Vh=0,Cl=!1,25<=r)throw Error(F(301));if(r+=1,xt=Le=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}se.H=O2,s=e(n,i)}while(Cl);return s}function oU(){var t=se.H,e=t.useState()[0];return e=typeof e.then=="function"?Sd(e):e,t=t.useState()[0],(Le!==null?Le.memoizedState:null)!==t&&(ce.flags|=1024),e}function Xw(){var t=Zm!==0;return Zm=0,t}function Jw(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Zw(t){if(Jm){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Jm=!1}Dr=0,xt=Le=ce=null,Cl=!1,Vh=Zm=0,Nl=null}function fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?ce.memoizedState=xt=t:xt=xt.next=t,xt}function _t(){if(Le===null){var t=ce.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=xt===null?ce.memoizedState:xt.next;if(e!==null)xt=e,Le=t;else{if(t===null)throw ce.alternate===null?Error(F(467)):Error(F(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},xt===null?ce.memoizedState=xt=t:xt=xt.next=t}return xt}function dg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sd(t){var e=Vh;return Vh+=1,Nl===null&&(Nl=[]),t=XN(Nl,t,e),e=ce,(xt===null?e.memoizedState:xt.next)===null&&(e=e.alternate,se.H=e===null||e.memoizedState===null?k2:ob),t}function fg(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Sd(t);if(t.$$typeof===_r)return Qt(t)}throw Error(F(438,String(t)))}function eb(t){var e=null,n=ce.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=ce.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=dg(),ce.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=$4;return e.index++,n}function kr(t,e){return typeof e=="function"?e(t):e}function om(t){var e=_t();return tb(e,Le,t)}function tb(t,e,n){var i=t.queue;if(i===null)throw Error(F(311));i.lastRenderedReducer=n;var r=t.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}e.baseQueue=r=s,i.pending=null}if(s=t.baseState,r===null)t.memoizedState=s;else{e=r.next;var o=a=null,l=null,c=e,h=!1;do{var d=c.lane&-536870913;if(d!==c.lane?(ve&d)===d:(Dr&d)===d){var f=c.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===Fl&&(h=!0);else if((Dr&f)===f){c=c.next,f===Fl&&(h=!0);continue}else d={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=d,a=s):l=l.next=d,ce.lanes|=f,Gs|=f;d=c.action,so&&n(s,d),s=c.hasEagerState?c.eagerState:n(s,d)}else f={lane:d,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=f,a=s):l=l.next=f,ce.lanes|=d,Gs|=d;c=c.next}while(c!==null&&c!==e);if(l===null?a=s:l.next=o,!Xn(s,t.memoizedState)&&(At=!0,h&&(n=Al,n!==null)))throw n;t.memoizedState=s,t.baseState=a,t.baseQueue=l,i.lastRenderedState=s}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function i_(t){var e=_t(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);Xn(s,e.memoizedState)||(At=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function s2(t,e,n){var i=ce,r=_t(),s=be;if(s){if(n===void 0)throw Error(F(407));n=n()}else n=e();var a=!Xn((Le||r).memoizedState,n);if(a&&(r.memoizedState=n,At=!0),r=r.queue,nb(l2.bind(null,i,r,t),[t]),r.getSnapshot!==e||a||xt!==null&&xt.memoizedState.tag&1){if(i.flags|=2048,ql(9,{destroy:void 0},o2.bind(null,i,r,n,e),null),je===null)throw Error(F(349));s||Dr&127||a2(i,e,n)}return n}function a2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ce.updateQueue,e===null?(e=dg(),ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function o2(t,e,n,i){e.value=n,e.getSnapshot=i,c2(e)&&u2(t)}function l2(t,e,n){return n(function(){c2(e)&&u2(t)})}function c2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xn(t,n)}catch{return!0}}function u2(t){var e=xo(t,2);e!==null&&Nn(e,t,2)}function jv(t){var e=fn();if(typeof t=="function"){var n=t;if(t=n(),so){ws(!0);try{n()}finally{ws(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kr,lastRenderedState:t},e}function h2(t,e,n,i){return t.baseState=n,tb(t,Le,typeof i=="function"?i:kr)}function lU(t,e,n,i,r){if(pg(t))throw Error(F(485));if(t=e.action,t!==null){var s={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};se.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,d2(e,s)):(s.next=n.next,e.pending=n.next=s)}}function d2(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var s=se.T,a={};se.T=a;try{var o=n(r,i),l=se.S;l!==null&&l(a,o),BS(t,e,o)}catch(c){zv(t,e,c)}finally{s!==null&&a.types!==null&&(s.types=a.types),se.T=s}}else try{s=n(r,i),BS(t,e,s)}catch(c){zv(t,e,c)}}function BS(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){qS(t,e,i)},function(i){return zv(t,e,i)}):qS(t,e,n)}function qS(t,e,n){e.status="fulfilled",e.value=n,f2(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,d2(t,n)))}function zv(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,f2(e),e=e.next;while(e!==i)}t.action=null}function f2(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function m2(t,e){return e}function HS(t,e){if(be){var n=je.formState;if(n!==null){e:{var i=ce;if(be){if(Ke){t:{for(var r=Ke,s=ui;r.nodeType!==8;){if(!s){r=null;break t}if(r=pi(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Ke=pi(r.nextSibling),i=r.data==="F!";break e}}qs(i)}i=!1}i&&(e=n[0])}}return n=fn(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m2,lastRenderedState:e},n.queue=i,n=N2.bind(null,ce,i),i.dispatch=n,i=jv(!1),s=ab.bind(null,ce,!1,i.queue),i=fn(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=lU.bind(null,ce,r,s,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function GS(t){var e=_t();return p2(e,Le,t)}function p2(t,e,n){if(e=tb(t,e,m2)[0],t=om(kr)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=Sd(e)}catch(a){throw a===Sc?hg:a}else i=e;e=_t();var r=e.queue,s=r.dispatch;return n!==e.memoizedState&&(ce.flags|=2048,ql(9,{destroy:void 0},cU.bind(null,r,n),null)),[i,s,t]}function cU(t,e){t.action=e}function $S(t){var e=_t(),n=Le;if(n!==null)return p2(e,n,t);_t(),e=e.memoizedState,n=_t();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function ql(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=ce.updateQueue,e===null&&(e=dg(),ce.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function g2(){return _t().memoizedState}function lm(t,e,n,i){var r=fn();ce.flags|=t,r.memoizedState=ql(1|e,{destroy:void 0},n,i===void 0?null:i)}function mg(t,e,n,i){var r=_t();i=i===void 0?null:i;var s=r.memoizedState.inst;Le!==null&&i!==null&&Qw(i,Le.memoizedState.deps)?r.memoizedState=ql(e,s,n,i):(ce.flags|=t,r.memoizedState=ql(1|e,s,n,i))}function KS(t,e){lm(8390656,8,t,e)}function nb(t,e){mg(2048,8,t,e)}function uU(t){ce.flags|=4;var e=ce.updateQueue;if(e===null)e=dg(),ce.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function y2(t){var e=_t().memoizedState;return uU({ref:e,nextImpl:t}),function(){if(Re&2)throw Error(F(440));return e.impl.apply(void 0,arguments)}}function _2(t,e){return mg(4,2,t,e)}function v2(t,e){return mg(4,4,t,e)}function w2(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function b2(t,e,n){n=n!=null?n.concat([t]):null,mg(4,4,w2.bind(null,e,t),n)}function ib(){}function T2(t,e){var n=_t();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&Qw(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function E2(t,e){var n=_t();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&Qw(e,i[1]))return i[0];if(i=t(),so){ws(!0);try{t()}finally{ws(!1)}}return n.memoizedState=[i,e],i}function rb(t,e,n){return n===void 0||Dr&1073741824&&!(ve&261930)?t.memoizedState=e:(t.memoizedState=n,t=hP(),ce.lanes|=t,Gs|=t,n)}function x2(t,e,n,i){return Xn(n,e)?n:Bl.current!==null?(t=rb(t,n,i),Xn(t,e)||(At=!0),t):!(Dr&42)||Dr&1073741824&&!(ve&261930)?(At=!0,t.memoizedState=n):(t=hP(),ce.lanes|=t,Gs|=t,e)}function S2(t,e,n,i,r){var s=Ce.p;Ce.p=s!==0&&8>s?s:8;var a=se.T,o={};se.T=o,ab(t,!1,e,n);try{var l=r(),c=se.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=sU(l,i);Xu(t,e,h,Wn(t))}else Xu(t,e,i,Wn(t))}catch(d){Xu(t,e,{then:function(){},status:"rejected",reason:d},Wn())}finally{Ce.p=s,a!==null&&o.types!==null&&(a.types=o.types),se.T=a}}function hU(){}function Fv(t,e,n,i){if(t.tag!==5)throw Error(F(476));var r=I2(t).queue;S2(t,r,e,$a,n===null?hU:function(){return A2(t),n(i)})}function I2(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:$a,baseState:$a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kr,lastRenderedState:$a},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kr,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function A2(t){var e=I2(t);e.next===null&&(e=t.alternate.memoizedState),Xu(t,e.next.queue,{},Wn())}function sb(){return Qt(jh)}function R2(){return _t().memoizedState}function C2(){return _t().memoizedState}function dU(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Wn();t=Ns(n);var i=Ps(e,t,n);i!==null&&(Nn(i,e,n),Wu(i,e,n)),e={cache:Hw()},t.payload=e;return}e=e.return}}function fU(t,e,n){var i=Wn();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},pg(t)?P2(e,n):(n=zw(t,e,n,i),n!==null&&(Nn(n,t,i),D2(n,e,i)))}function N2(t,e,n){var i=Wn();Xu(t,e,n,i)}function Xu(t,e,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(pg(t))P2(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,Xn(o,a))return ug(t,e,r,0),je===null&&cg(),!1}catch{}finally{}if(n=zw(t,e,r,i),n!==null)return Nn(n,t,i),D2(n,e,i),!0}return!1}function ab(t,e,n,i){if(i={lane:2,revertLane:pb(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},pg(t)){if(e)throw Error(F(479))}else e=zw(t,n,i,2),e!==null&&Nn(e,t,2)}function pg(t){var e=t.alternate;return t===ce||e!==null&&e===ce}function P2(t,e){Cl=Jm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function D2(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,yN(t,n)}}var Mh={readContext:Qt,use:fg,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useLayoutEffect:lt,useInsertionEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useSyncExternalStore:lt,useId:lt,useHostTransitionStatus:lt,useFormState:lt,useActionState:lt,useOptimistic:lt,useMemoCache:lt,useCacheRefresh:lt};Mh.useEffectEvent=lt;var k2={readContext:Qt,use:fg,useCallback:function(t,e){return fn().memoizedState=[t,e===void 0?null:e],t},useContext:Qt,useEffect:KS,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,lm(4194308,4,w2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return lm(4194308,4,t,e)},useInsertionEffect:function(t,e){lm(4,2,t,e)},useMemo:function(t,e){var n=fn();e=e===void 0?null:e;var i=t();if(so){ws(!0);try{t()}finally{ws(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=fn();if(n!==void 0){var r=n(e);if(so){ws(!0);try{n(e)}finally{ws(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=fU.bind(null,ce,t),[i.memoizedState,t]},useRef:function(t){var e=fn();return t={current:t},e.memoizedState=t},useState:function(t){t=jv(t);var e=t.queue,n=N2.bind(null,ce,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:ib,useDeferredValue:function(t,e){var n=fn();return rb(n,t,e)},useTransition:function(){var t=jv(!1);return t=S2.bind(null,ce,t.queue,!0,!1),fn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=ce,r=fn();if(be){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),je===null)throw Error(F(349));ve&127||a2(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,KS(l2.bind(null,i,s,t),[t]),i.flags|=2048,ql(9,{destroy:void 0},o2.bind(null,i,s,n,e),null),n},useId:function(){var t=fn(),e=je.identifierPrefix;if(be){var n=Hi,i=qi;n=(i&~(1<<32-Kn(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Zm++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=aU++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:sb,useFormState:HS,useActionState:HS,useOptimistic:function(t){var e=fn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=ab.bind(null,ce,!0,n),n.dispatch=e,[t,e]},useMemoCache:eb,useCacheRefresh:function(){return fn().memoizedState=dU.bind(null,ce)},useEffectEvent:function(t){var e=fn(),n={impl:t};return e.memoizedState=n,function(){if(Re&2)throw Error(F(440));return n.impl.apply(void 0,arguments)}}},ob={readContext:Qt,use:fg,useCallback:T2,useContext:Qt,useEffect:nb,useImperativeHandle:b2,useInsertionEffect:_2,useLayoutEffect:v2,useMemo:E2,useReducer:om,useRef:g2,useState:function(){return om(kr)},useDebugValue:ib,useDeferredValue:function(t,e){var n=_t();return x2(n,Le.memoizedState,t,e)},useTransition:function(){var t=om(kr)[0],e=_t().memoizedState;return[typeof t=="boolean"?t:Sd(t),e]},useSyncExternalStore:s2,useId:R2,useHostTransitionStatus:sb,useFormState:GS,useActionState:GS,useOptimistic:function(t,e){var n=_t();return h2(n,Le,t,e)},useMemoCache:eb,useCacheRefresh:C2};ob.useEffectEvent=y2;var O2={readContext:Qt,use:fg,useCallback:T2,useContext:Qt,useEffect:nb,useImperativeHandle:b2,useInsertionEffect:_2,useLayoutEffect:v2,useMemo:E2,useReducer:i_,useRef:g2,useState:function(){return i_(kr)},useDebugValue:ib,useDeferredValue:function(t,e){var n=_t();return Le===null?rb(n,t,e):x2(n,Le.memoizedState,t,e)},useTransition:function(){var t=i_(kr)[0],e=_t().memoizedState;return[typeof t=="boolean"?t:Sd(t),e]},useSyncExternalStore:s2,useId:R2,useHostTransitionStatus:sb,useFormState:$S,useActionState:$S,useOptimistic:function(t,e){var n=_t();return Le!==null?h2(n,Le,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:eb,useCacheRefresh:C2};O2.useEffectEvent=y2;function r_(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Bv={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Wn(),r=Ns(i);r.payload=e,n!=null&&(r.callback=n),e=Ps(t,r,i),e!==null&&(Nn(e,t,i),Wu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Wn(),r=Ns(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Ps(t,r,i),e!==null&&(Nn(e,t,i),Wu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Wn(),i=Ns(n);i.tag=2,e!=null&&(i.callback=e),e=Ps(t,i,n),e!==null&&(Nn(e,t,n),Wu(e,t,n))}};function WS(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!Ph(n,i)||!Ph(r,s):!0}function QS(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Bv.enqueueReplaceState(e,e.state,null)}function ao(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Xe({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function V2(t){Gm(t)}function M2(t){console.error(t)}function L2(t){Gm(t)}function ep(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function YS(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function qv(t,e,n){return n=Ns(n),n.tag=3,n.payload={element:null},n.callback=function(){ep(t,e)},n}function U2(t){return t=Ns(t),t.tag=3,t}function j2(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;t.payload=function(){return r(s)},t.callback=function(){YS(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){YS(e,n,i),typeof r!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function mU(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&xc(e,n,r,!0),n=Jn.current,n!==null){switch(n.tag){case 31:case 13:return mi===null?sp():n.alternate===null&&ht===0&&(ht=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Qm?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),p_(t,i,r)),!1;case 22:return n.flags|=65536,i===Qm?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),p_(t,i,r)),!1}throw Error(F(435,n.tag))}return p_(t,i,r),sp(),!1}if(be)return e=Jn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==Nv&&(t=Error(F(422),{cause:i}),kh(ci(t,n)))):(i!==Nv&&(e=Error(F(423),{cause:i}),kh(ci(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=ci(i,n),r=qv(t.stateNode,i,r),n_(t,r),ht!==4&&(ht=2)),!1;var s=Error(F(520),{cause:i});if(s=ci(s,n),eh===null?eh=[s]:eh.push(s),ht!==4&&(ht=2),e===null)return!0;i=ci(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=qv(n.stateNode,i,t),n_(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Ds===null||!Ds.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=U2(r),j2(r,t,n,i),n_(n,r),!1}n=n.return}while(n!==null);return!1}var lb=Error(F(461)),At=!1;function Ht(t,e,n,i){e.child=t===null?ZN(e,null,n,i):ro(e,t.child,n,i)}function XS(t,e,n,i,r){n=n.render;var s=e.ref;if("ref"in i){var a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}else a=i;return io(e),i=Yw(t,e,n,a,s,r),o=Xw(),t!==null&&!At?(Jw(t,e,r),Or(t,e,r)):(be&&o&&Bw(e),e.flags|=1,Ht(t,e,i,r),e.child)}function JS(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Fw(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,z2(t,e,s,i,r)):(t=sm(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!cb(t,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ph,n(a,i)&&t.ref===e.ref)return Or(t,e,r)}return e.flags|=1,t=Er(s,i),t.ref=e.ref,t.return=e,e.child=t}function z2(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Ph(s,i)&&t.ref===e.ref)if(At=!1,e.pendingProps=i=s,cb(t,r))t.flags&131072&&(At=!0);else return e.lanes=t.lanes,Or(t,e,r)}return Hv(t,e,n,i,r)}function F2(t,e,n,i){var r=i.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(s=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~s}else i=0,e.child=null;return ZS(t,e,s,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&am(e,s!==null?s.cachePool:null),s!==null?FS(e,s):Lv(),n2(e);else return i=e.lanes=536870912,ZS(t,e,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(am(e,s.cachePool),FS(e,s),ys(),e.memoizedState=null):(t!==null&&am(e,null),Lv(),ys());return Ht(t,e,r,n),e.child}function Cu(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function ZS(t,e,n,i,r){var s=Gw();return s=s===null?null:{parent:It._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&am(e,null),Lv(),n2(e),t!==null&&xc(t,e,i,!0),e.childLanes=r,null}function cm(t,e){return e=tp({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function eI(t,e,n){return ro(e,t.child,null,n),t=cm(e,e.pendingProps),t.flags|=2,jn(e),e.memoizedState=null,t}function pU(t,e,n){var i=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(be){if(i.mode==="hidden")return t=cm(e,i),e.lanes=536870912,Cu(null,t);if(Uv(e),(t=Ke)?(t=kP(t,ui),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Bs!==null?{id:qi,overflow:Hi}:null,retryLane:536870912,hydrationErrors:null},n=$N(t),n.return=e,e.child=n,Kt=e,Ke=null)):t=null,t===null)throw qs(e);return e.lanes=536870912,null}return cm(e,i)}var s=t.memoizedState;if(s!==null){var a=s.dehydrated;if(Uv(e),r)if(e.flags&256)e.flags&=-257,e=eI(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(F(558));else if(At||xc(t,e,n,!1),r=(n&t.childLanes)!==0,At||r){if(i=je,i!==null&&(a=_N(i,n),a!==0&&a!==s.retryLane))throw s.retryLane=a,xo(t,a),Nn(i,t,a),lb;sp(),e=eI(t,e,n)}else t=s.treeContext,Ke=pi(a.nextSibling),Kt=e,be=!0,Cs=null,ui=!1,t!==null&&WN(e,t),e=cm(e,i),e.flags|=4096;return e}return t=Er(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function um(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(F(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Hv(t,e,n,i,r){return io(e),n=Yw(t,e,n,i,void 0,r),i=Xw(),t!==null&&!At?(Jw(t,e,r),Or(t,e,r)):(be&&i&&Bw(e),e.flags|=1,Ht(t,e,n,r),e.child)}function tI(t,e,n,i,r,s){return io(e),e.updateQueue=null,n=r2(e,i,n,r),i2(t),i=Xw(),t!==null&&!At?(Jw(t,e,s),Or(t,e,s)):(be&&i&&Bw(e),e.flags|=1,Ht(t,e,n,s),e.child)}function nI(t,e,n,i,r){if(io(e),e.stateNode===null){var s=fl,a=n.contextType;typeof a=="object"&&a!==null&&(s=Qt(a)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Bv,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},Kw(e),a=n.contextType,s.context=typeof a=="object"&&a!==null?Qt(a):fl,s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(r_(e,n,a,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&Bv.enqueueReplaceState(s,s.state,null),Yu(e,i,s,r),Qu(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var o=e.memoizedProps,l=ao(n,o);s.props=l;var c=s.context,h=n.contextType;a=fl,typeof h=="object"&&h!==null&&(a=Qt(h));var d=n.getDerivedStateFromProps;h=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o||c!==a)&&QS(e,s,i,a),fs=!1;var f=e.memoizedState;s.state=f,Yu(e,i,s,r),Qu(),c=e.memoizedState,o||f!==c||fs?(typeof d=="function"&&(r_(e,n,d,i),c=e.memoizedState),(l=fs||WS(e,n,l,i,f,c,a))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),s.props=i,s.state=c,s.context=a,i=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Vv(t,e),a=e.memoizedProps,h=ao(n,a),s.props=h,d=e.pendingProps,f=s.context,c=n.contextType,l=fl,typeof c=="object"&&c!==null&&(l=Qt(c)),o=n.getDerivedStateFromProps,(c=typeof o=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&QS(e,s,i,l),fs=!1,f=e.memoizedState,s.state=f,Yu(e,i,s,r),Qu();var g=e.memoizedState;a!==d||f!==g||fs||t!==null&&t.dependencies!==null&&Wm(t.dependencies)?(typeof o=="function"&&(r_(e,n,o,i),g=e.memoizedState),(h=fs||WS(e,n,h,i,f,g,l)||t!==null&&t.dependencies!==null&&Wm(t.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,g,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,g,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),s.props=i,s.state=g,s.context=l,i=h):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,um(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=ro(e,t.child,null,r),e.child=ro(e,null,n,r)):Ht(t,e,n,r),e.memoizedState=s.state,t=e.child):t=Or(t,e,r),t}function iI(t,e,n,i){return no(),e.flags|=256,Ht(t,e,n,i),e.child}var s_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function a_(t){return{baseLanes:t,cachePool:YN()}}function o_(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Bn),t}function B2(t,e,n){var i=e.pendingProps,r=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(gt.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(be){if(r?gs(e):ys(),(t=Ke)?(t=kP(t,ui),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Bs!==null?{id:qi,overflow:Hi}:null,retryLane:536870912,hydrationErrors:null},n=$N(t),n.return=e,e.child=n,Kt=e,Ke=null)):t=null,t===null)throw qs(e);return r0(t)?e.lanes=32:e.lanes=536870912,null}var o=i.children;return i=i.fallback,r?(ys(),r=e.mode,o=tp({mode:"hidden",children:o},r),i=Ka(i,r,n,null),o.return=e,i.return=e,o.sibling=i,e.child=o,i=e.child,i.memoizedState=a_(n),i.childLanes=o_(t,a,n),e.memoizedState=s_,Cu(null,i)):(gs(e),Gv(e,o))}var l=t.memoizedState;if(l!==null&&(o=l.dehydrated,o!==null)){if(s)e.flags&256?(gs(e),e.flags&=-257,e=l_(t,e,n)):e.memoizedState!==null?(ys(),e.child=t.child,e.flags|=128,e=null):(ys(),o=i.fallback,r=e.mode,i=tp({mode:"visible",children:i.children},r),o=Ka(o,r,n,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,ro(e,t.child,null,n),i=e.child,i.memoizedState=a_(n),i.childLanes=o_(t,a,n),e.memoizedState=s_,e=Cu(null,i));else if(gs(e),r0(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var c=a.dgst;a=c,i=Error(F(419)),i.stack="",i.digest=a,kh({value:i,source:null,stack:null}),e=l_(t,e,n)}else if(At||xc(t,e,n,!1),a=(n&t.childLanes)!==0,At||a){if(a=je,a!==null&&(i=_N(a,n),i!==0&&i!==l.retryLane))throw l.retryLane=i,xo(t,i),Nn(a,t,i),lb;i0(o)||sp(),e=l_(t,e,n)}else i0(o)?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,Ke=pi(o.nextSibling),Kt=e,be=!0,Cs=null,ui=!1,t!==null&&WN(e,t),e=Gv(e,i.children),e.flags|=4096);return e}return r?(ys(),o=i.fallback,r=e.mode,l=t.child,c=l.sibling,i=Er(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,c!==null?o=Er(c,o):(o=Ka(o,r,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,Cu(null,i),i=e.child,o=t.child.memoizedState,o===null?o=a_(n):(r=o.cachePool,r!==null?(l=It._currentValue,r=r.parent!==l?{parent:l,pool:l}:r):r=YN(),o={baseLanes:o.baseLanes|n,cachePool:r}),i.memoizedState=o,i.childLanes=o_(t,a,n),e.memoizedState=s_,Cu(t.child,i)):(gs(e),n=t.child,t=n.sibling,n=Er(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function Gv(t,e){return e=tp({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function tp(t,e){return t=Fn(22,t,null,e),t.lanes=0,t}function l_(t,e,n){return ro(e,t.child,null,n),t=Gv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rI(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Dv(t.return,e,n)}function c_(t,e,n,i,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r,a.treeForkCount=s)}function q2(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;i=i.children;var a=gt.current,o=(a&2)!==0;if(o?(a=a&1|2,e.flags|=128):a&=1,ze(gt,a),Ht(t,e,i,n),i=be?Dh:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rI(t,n,e);else if(t.tag===19)rI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Xm(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),c_(e,!1,r,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Xm(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}c_(e,!0,n,null,s,i);break;case"together":c_(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function Or(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gs|=e.lanes,!(n&e.childLanes))if(t!==null){if(xc(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=Er(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Er(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function cb(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Wm(t)))}function gU(t,e,n){switch(e.tag){case 3:Fm(e,e.stateNode.containerInfo),ps(e,It,t.memoizedState.cache),no();break;case 27:case 5:vv(e);break;case 4:Fm(e,e.stateNode.containerInfo);break;case 10:ps(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Uv(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(gs(e),e.flags|=128,null):n&e.child.childLanes?B2(t,e,n):(gs(e),t=Or(t,e,n),t!==null?t.sibling:null);gs(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(xc(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return q2(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ze(gt,gt.current),i)break;return null;case 22:return e.lanes=0,F2(t,e,n,e.pendingProps);case 24:ps(e,It,t.memoizedState.cache)}return Or(t,e,n)}function H2(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)At=!0;else{if(!cb(t,n)&&!(e.flags&128))return At=!1,gU(t,e,n);At=!!(t.flags&131072)}else At=!1,be&&e.flags&1048576&&KN(e,Dh,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=Ra(e.elementType),e.type=t,typeof t=="function")Fw(t)?(i=ao(t,i),e.tag=1,e=nI(null,e,t,i,n)):(e.tag=0,e=Hv(null,e,t,i,n));else{if(t!=null){var r=t.$$typeof;if(r===Aw){e.tag=11,e=XS(null,e,t,i,n);break e}else if(r===Rw){e.tag=14,e=JS(null,e,t,i,n);break e}}throw e=yv(t)||t,Error(F(306,e,""))}}return e;case 0:return Hv(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=ao(i,e.pendingProps),nI(t,e,i,r,n);case 3:e:{if(Fm(e,e.stateNode.containerInfo),t===null)throw Error(F(387));i=e.pendingProps;var s=e.memoizedState;r=s.element,Vv(t,e),Yu(e,i,null,n);var a=e.memoizedState;if(i=a.cache,ps(e,It,i),i!==s.cache&&kv(e,[It],n,!0),Qu(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=iI(t,e,i,n);break e}else if(i!==r){r=ci(Error(F(424)),e),kh(r),e=iI(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ke=pi(t.firstChild),Kt=e,be=!0,Cs=null,ui=!0,n=ZN(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(no(),i===r){e=Or(t,e,n);break e}Ht(t,e,i,n)}e=e.child}return e;case 26:return um(t,e),t===null?(n=xI(e.type,null,e.pendingProps,null))?e.memoizedState=n:be||(n=e.type,t=e.pendingProps,i=cp(Rs.current).createElement(n),i[$t]=e,i[Pn]=t,Yt(i,n,t),Ut(i),e.stateNode=i):e.memoizedState=xI(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return vv(e),t===null&&be&&(i=e.stateNode=OP(e.type,e.pendingProps,Rs.current),Kt=e,ui=!0,r=Ke,oa(e.type)?(s0=r,Ke=pi(i.firstChild)):Ke=r),Ht(t,e,e.pendingProps.children,n),um(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&be&&((r=i=Ke)&&(i=$U(i,e.type,e.pendingProps,ui),i!==null?(e.stateNode=i,Kt=e,Ke=pi(i.firstChild),ui=!1,r=!0):r=!1),r||qs(e)),vv(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,i=s.children,t0(r,s)?i=null:a!==null&&t0(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=Yw(t,e,oU,null,null,n),jh._currentValue=r),um(t,e),Ht(t,e,i,n),e.child;case 6:return t===null&&be&&((t=n=Ke)&&(n=KU(n,e.pendingProps,ui),n!==null?(e.stateNode=n,Kt=e,Ke=null,t=!0):t=!1),t||qs(e)),null;case 13:return B2(t,e,n);case 4:return Fm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ro(e,null,i,n):Ht(t,e,i,n),e.child;case 11:return XS(t,e,e.type,e.pendingProps,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,ps(e,e.type,i.value),Ht(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,io(e),r=Qt(r),i=i(r),e.flags|=1,Ht(t,e,i,n),e.child;case 14:return JS(t,e,e.type,e.pendingProps,n);case 15:return z2(t,e,e.type,e.pendingProps,n);case 19:return q2(t,e,n);case 31:return pU(t,e,n);case 22:return F2(t,e,n,e.pendingProps);case 24:return io(e),i=Qt(It),t===null?(r=Gw(),r===null&&(r=je,s=Hw(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),e.memoizedState={parent:i,cache:r},Kw(e),ps(e,It,r)):(t.lanes&n&&(Vv(t,e),Yu(e,null,null,n),Qu()),r=t.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),ps(e,It,i)):(i=s.cache,ps(e,It,i),i!==r.cache&&kv(e,[It],n,!0))),Ht(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(F(156,e.tag))}function hr(t){t.flags|=4}function u_(t,e,n,i,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(mP())t.flags|=8192;else throw Qa=Qm,$w}else t.flags&=-16777217}function sI(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!LP(e))if(mP())t.flags|=8192;else throw Qa=Qm,$w}function Nf(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?pN():536870912,t.lanes|=e,Hl|=e)}function hu(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ge(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function yU(t,e,n){var i=e.pendingProps;switch(qw(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(e),null;case 1:return Ge(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),xr(It),Ul(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(zo(e)?hr(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,t_())),Ge(e),null;case 26:var r=e.type,s=e.memoizedState;return t===null?(hr(e),s!==null?(Ge(e),sI(e,s)):(Ge(e),u_(e,r,null,i,n))):s?s!==t.memoizedState?(hr(e),Ge(e),sI(e,s)):(Ge(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&hr(e),Ge(e),u_(e,r,t,i,n)),null;case 27:if(Bm(e),n=Rs.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&hr(e);else{if(!i){if(e.stateNode===null)throw Error(F(166));return Ge(e),null}t=Yi.current,zo(e)?OS(e):(t=OP(r,i,n),e.stateNode=t,hr(e))}return Ge(e),null;case 5:if(Bm(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&hr(e);else{if(!i){if(e.stateNode===null)throw Error(F(166));return Ge(e),null}if(s=Yi.current,zo(e))OS(e);else{var a=cp(Rs.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":s=a.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?a.createElement("select",{is:i.is}):a.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?a.createElement(r,{is:i.is}):a.createElement(r)}}s[$t]=e,s[Pn]=i;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=s;e:switch(Yt(s,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&hr(e)}}return Ge(e),u_(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&hr(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(F(166));if(t=Rs.current,zo(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=Kt,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[$t]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||NP(t.nodeValue,n)),t||qs(e,!0)}else t=cp(t).createTextNode(i),t[$t]=e,e.stateNode=t}return Ge(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=zo(e),n!==null){if(t===null){if(!i)throw Error(F(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(557));t[$t]=e}else no(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ge(e),t=!1}else n=t_(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(jn(e),e):(jn(e),null);if(e.flags&128)throw Error(F(558))}return Ge(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=zo(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(F(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(F(317));r[$t]=e}else no(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ge(e),r=!1}else r=t_(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(jn(e),e):(jn(e),null)}return jn(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Nf(e,e.updateQueue),Ge(e),null);case 4:return Ul(),t===null&&gb(e.stateNode.containerInfo),Ge(e),null;case 10:return xr(e.type),Ge(e),null;case 19:if(zt(gt),i=e.memoizedState,i===null)return Ge(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)hu(i,!1);else{if(ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Xm(t),s!==null){for(e.flags|=128,hu(i,!1),t=s.updateQueue,e.updateQueue=t,Nf(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)GN(n,t),n=n.sibling;return ze(gt,gt.current&1|2),be&&pr(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&Gn()>ip&&(e.flags|=128,r=!0,hu(i,!1),e.lanes=4194304)}else{if(!r)if(t=Xm(s),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,Nf(e,t),hu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!be)return Ge(e),null}else 2*Gn()-i.renderingStartTime>ip&&n!==536870912&&(e.flags|=128,r=!0,hu(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Gn(),t.sibling=null,n=gt.current,ze(gt,r?n&1|2:n&1),be&&pr(e,i.treeForkCount),t):(Ge(e),null);case 22:case 23:return jn(e),Ww(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(Ge(e),e.subtreeFlags&6&&(e.flags|=8192)):Ge(e),n=e.updateQueue,n!==null&&Nf(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&zt(Wa),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),xr(It),Ge(e),null;case 25:return null;case 30:return null}throw Error(F(156,e.tag))}function _U(t,e){switch(qw(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xr(It),Ul(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Bm(e),null;case 31:if(e.memoizedState!==null){if(jn(e),e.alternate===null)throw Error(F(340));no()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(jn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));no()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return zt(gt),null;case 4:return Ul(),null;case 10:return xr(e.type),null;case 22:case 23:return jn(e),Ww(),t!==null&&zt(Wa),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return xr(It),null;case 25:return null;default:return null}}function G2(t,e){switch(qw(e),e.tag){case 3:xr(It),Ul();break;case 26:case 27:case 5:Bm(e);break;case 4:Ul();break;case 31:e.memoizedState!==null&&jn(e);break;case 13:jn(e);break;case 19:zt(gt);break;case 10:xr(e.type);break;case 22:case 23:jn(e),Ww(),t!==null&&zt(Wa);break;case 24:xr(It)}}function Id(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(o){ke(e,e.return,o)}}function Hs(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&t)===t){var a=i.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,r=e;var l=n,c=o;try{c()}catch(h){ke(r,l,h)}}}i=i.next}while(i!==s)}}catch(h){ke(e,e.return,h)}}function $2(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{t2(e,n)}catch(i){ke(t,t.return,i)}}}function K2(t,e,n){n.props=ao(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){ke(t,e,i)}}function Ju(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(r){ke(t,e,r)}}function Gi(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){ke(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){ke(t,e,r)}else n.current=null}function W2(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){ke(t,t.return,r)}}function h_(t,e,n){try{var i=t.stateNode;zU(i,t.type,n,e),i[Pn]=e}catch(r){ke(t,t.return,r)}}function Q2(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&oa(t.type)||t.tag===4}function d_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Q2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&oa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $v(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vr));else if(i!==4&&(i===27&&oa(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for($v(t,e,n),t=t.sibling;t!==null;)$v(t,e,n),t=t.sibling}function np(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&oa(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(np(t,e,n),t=t.sibling;t!==null;)np(t,e,n),t=t.sibling}function Y2(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Yt(e,i,n),e[$t]=t,e[Pn]=n}catch(s){ke(t,t.return,s)}}var gr=!1,St=!1,f_=!1,aI=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function vU(t,e){if(t=t.containerInfo,Zv=fp,t=LN(t),Uw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var g;d!==n||r!==0&&d.nodeType!==3||(o=a+r),d!==s||i!==0&&d.nodeType!==3||(l=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++c===r&&(o=a),f===s&&++h===i&&(l=a),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(e0={focusedElem:t,selectionRange:n},fp=!1,Mt=e;Mt!==null;)if(e=Mt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Mt=t;else for(;Mt!==null;){switch(e=Mt,s=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var E=ao(n.type,r);t=i.getSnapshotBeforeUpdate(E,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(S){ke(n,n.return,S)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)n0(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":n0(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(F(163))}if(t=e.sibling,t!==null){t.return=e.return,Mt=t;break}Mt=e.return}}function X2(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:fr(t,n),i&4&&Id(5,n);break;case 1:if(fr(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){ke(n,n.return,a)}else{var r=ao(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){ke(n,n.return,a)}}i&64&&$2(n),i&512&&Ju(n,n.return);break;case 3:if(fr(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{t2(t,e)}catch(a){ke(n,n.return,a)}}break;case 27:e===null&&i&4&&Y2(n);case 26:case 5:fr(t,n),e===null&&i&4&&W2(n),i&512&&Ju(n,n.return);break;case 12:fr(t,n);break;case 31:fr(t,n),i&4&&eP(t,n);break;case 13:fr(t,n),i&4&&tP(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=RU.bind(null,n),WU(t,n))));break;case 22:if(i=n.memoizedState!==null||gr,!i){e=e!==null&&e.memoizedState!==null||St,r=gr;var s=St;gr=i,(St=e)&&!s?mr(t,n,(n.subtreeFlags&8772)!==0):fr(t,n),gr=r,St=s}break;case 30:break;default:fr(t,n)}}function J2(t){var e=t.alternate;e!==null&&(t.alternate=null,J2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Dw(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ze=null,xn=!1;function dr(t,e,n){for(n=n.child;n!==null;)Z2(t,e,n),n=n.sibling}function Z2(t,e,n){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(vd,n)}catch{}switch(n.tag){case 26:St||Gi(n,e),dr(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:St||Gi(n,e);var i=Ze,r=xn;oa(n.type)&&(Ze=n.stateNode,xn=!1),dr(t,e,n),nh(n.stateNode),Ze=i,xn=r;break;case 5:St||Gi(n,e);case 6:if(i=Ze,r=xn,Ze=null,dr(t,e,n),Ze=i,xn=r,Ze!==null)if(xn)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(n.stateNode)}catch(s){ke(n,e,s)}else try{Ze.removeChild(n.stateNode)}catch(s){ke(n,e,s)}break;case 18:Ze!==null&&(xn?(t=Ze,vI(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Wl(t)):vI(Ze,n.stateNode));break;case 4:i=Ze,r=xn,Ze=n.stateNode.containerInfo,xn=!0,dr(t,e,n),Ze=i,xn=r;break;case 0:case 11:case 14:case 15:Hs(2,n,e),St||Hs(4,n,e),dr(t,e,n);break;case 1:St||(Gi(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&K2(n,e,i)),dr(t,e,n);break;case 21:dr(t,e,n);break;case 22:St=(i=St)||n.memoizedState!==null,dr(t,e,n),St=i;break;default:dr(t,e,n)}}function eP(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Wl(t)}catch(n){ke(e,e.return,n)}}}function tP(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Wl(t)}catch(n){ke(e,e.return,n)}}function wU(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new aI),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new aI),e;default:throw Error(F(435,t.tag))}}function Pf(t,e){var n=wU(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var r=CU.bind(null,t,i);i.then(r,r)}})}function Tn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(oa(o.type)){Ze=o.stateNode,xn=!1;break e}break;case 5:Ze=o.stateNode,xn=!1;break e;case 3:case 4:Ze=o.stateNode.containerInfo,xn=!0;break e}o=o.return}if(Ze===null)throw Error(F(160));Z2(s,a,r),Ze=null,xn=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)nP(e,t),e=e.sibling}var Si=null;function nP(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Tn(e,t),En(t),i&4&&(Hs(3,t,t.return),Id(3,t),Hs(5,t,t.return));break;case 1:Tn(e,t),En(t),i&512&&(St||n===null||Gi(n,n.return)),i&64&&gr&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=Si;if(Tn(e,t),En(t),i&512&&(St||n===null||Gi(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[Td]||s[$t]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Yt(s,i,n),s[$t]=t,Ut(s),i=s;break e;case"link":var a=II("link","href",r).get(i+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(s=a[o],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}s=r.createElement(i),Yt(s,i,n),r.head.appendChild(s);break;case"meta":if(a=II("meta","content",r).get(i+(n.content||""))){for(o=0;o<a.length;o++)if(s=a[o],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}s=r.createElement(i),Yt(s,i,n),r.head.appendChild(s);break;default:throw Error(F(468,i))}s[$t]=t,Ut(s),i=s}t.stateNode=i}else AI(r,t.type,t.stateNode);else t.stateNode=SI(r,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?AI(r,t.type,t.stateNode):SI(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&h_(t,t.memoizedProps,n.memoizedProps)}break;case 27:Tn(e,t),En(t),i&512&&(St||n===null||Gi(n,n.return)),n!==null&&i&4&&h_(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Tn(e,t),En(t),i&512&&(St||n===null||Gi(n,n.return)),t.flags&32){r=t.stateNode;try{zl(r,"")}catch(E){ke(t,t.return,E)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,h_(t,r,n!==null?n.memoizedProps:r)),i&1024&&(f_=!0);break;case 6:if(Tn(e,t),En(t),i&4){if(t.stateNode===null)throw Error(F(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(E){ke(t,t.return,E)}}break;case 3:if(fm=null,r=Si,Si=up(e.containerInfo),Tn(e,t),Si=r,En(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Wl(e.containerInfo)}catch(E){ke(t,t.return,E)}f_&&(f_=!1,iP(t));break;case 4:i=Si,Si=up(t.stateNode.containerInfo),Tn(e,t),En(t),Si=i;break;case 12:Tn(e,t),En(t);break;case 31:Tn(e,t),En(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Pf(t,i)));break;case 13:Tn(e,t),En(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(gg=Gn()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Pf(t,i)));break;case 22:r=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=gr,h=St;if(gr=c||r,St=h||l,Tn(e,t),St=h,gr=c,En(t),i&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||l||gr||St||Ca(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(s=l.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=l.stateNode;var d=l.memoizedProps.style,f=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(E){ke(l,l.return,E)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=r?"":l.memoizedProps}catch(E){ke(l,l.return,E)}}}else if(e.tag===18){if(n===null){l=e;try{var g=l.stateNode;r?wI(g,!0):wI(l.stateNode,!1)}catch(E){ke(l,l.return,E)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Pf(t,n))));break;case 19:Tn(e,t),En(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Pf(t,i)));break;case 30:break;case 21:break;default:Tn(e,t),En(t)}}function En(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(Q2(i)){n=i;break}i=i.return}if(n==null)throw Error(F(160));switch(n.tag){case 27:var r=n.stateNode,s=d_(t);np(t,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(zl(a,""),n.flags&=-33);var o=d_(t);np(t,o,a);break;case 3:case 4:var l=n.stateNode.containerInfo,c=d_(t);$v(t,c,l);break;default:throw Error(F(161))}}catch(h){ke(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iP(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;iP(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function fr(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)X2(t,e.alternate,e),e=e.sibling}function Ca(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Hs(4,e,e.return),Ca(e);break;case 1:Gi(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&K2(e,e.return,n),Ca(e);break;case 27:nh(e.stateNode);case 26:case 5:Gi(e,e.return),Ca(e);break;case 22:e.memoizedState===null&&Ca(e);break;case 30:Ca(e);break;default:Ca(e)}t=t.sibling}}function mr(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:mr(r,s,n),Id(4,s);break;case 1:if(mr(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){ke(i,i.return,c)}if(i=s,r=i.updateQueue,r!==null){var o=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)e2(l[r],o)}catch(c){ke(i,i.return,c)}}n&&a&64&&$2(s),Ju(s,s.return);break;case 27:Y2(s);case 26:case 5:mr(r,s,n),n&&i===null&&a&4&&W2(s),Ju(s,s.return);break;case 12:mr(r,s,n);break;case 31:mr(r,s,n),n&&a&4&&eP(r,s);break;case 13:mr(r,s,n),n&&a&4&&tP(r,s);break;case 22:s.memoizedState===null&&mr(r,s,n),Ju(s,s.return);break;case 30:break;default:mr(r,s,n)}e=e.sibling}}function ub(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&xd(n))}function hb(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&xd(t))}function Ti(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)rP(t,e,n,i),e=e.sibling}function rP(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:Ti(t,e,n,i),r&2048&&Id(9,e);break;case 1:Ti(t,e,n,i);break;case 3:Ti(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&xd(t)));break;case 12:if(r&2048){Ti(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,o=s.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){ke(e,e.return,l)}}else Ti(t,e,n,i);break;case 31:Ti(t,e,n,i);break;case 13:Ti(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?Ti(t,e,n,i):Zu(t,e):s._visibility&2?Ti(t,e,n,i):(s._visibility|=2,Jo(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),r&2048&&ub(a,e);break;case 24:Ti(t,e,n,i),r&2048&&hb(e.alternate,e);break;default:Ti(t,e,n,i)}}function Jo(t,e,n,i,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,a=e,o=n,l=i,c=a.flags;switch(a.tag){case 0:case 11:case 15:Jo(s,a,o,l,r),Id(8,a);break;case 23:break;case 22:var h=a.stateNode;a.memoizedState!==null?h._visibility&2?Jo(s,a,o,l,r):Zu(s,a):(h._visibility|=2,Jo(s,a,o,l,r)),r&&c&2048&&ub(a.alternate,a);break;case 24:Jo(s,a,o,l,r),r&&c&2048&&hb(a.alternate,a);break;default:Jo(s,a,o,l,r)}e=e.sibling}}function Zu(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:Zu(n,i),r&2048&&ub(i.alternate,i);break;case 24:Zu(n,i),r&2048&&hb(i.alternate,i);break;default:Zu(n,i)}e=e.sibling}}var Nu=8192;function Fo(t,e,n){if(t.subtreeFlags&Nu)for(t=t.child;t!==null;)sP(t,e,n),t=t.sibling}function sP(t,e,n){switch(t.tag){case 26:Fo(t,e,n),t.flags&Nu&&t.memoizedState!==null&&aj(n,Si,t.memoizedState,t.memoizedProps);break;case 5:Fo(t,e,n);break;case 3:case 4:var i=Si;Si=up(t.stateNode.containerInfo),Fo(t,e,n),Si=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Nu,Nu=16777216,Fo(t,e,n),Nu=i):Fo(t,e,n));break;default:Fo(t,e,n)}}function aP(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function du(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Mt=i,lP(i,t)}aP(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)oP(t),t=t.sibling}function oP(t){switch(t.tag){case 0:case 11:case 15:du(t),t.flags&2048&&Hs(9,t,t.return);break;case 3:du(t);break;case 12:du(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,hm(t)):du(t);break;default:du(t)}}function hm(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Mt=i,lP(i,t)}aP(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Hs(8,e,e.return),hm(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,hm(e));break;default:hm(e)}t=t.sibling}}function lP(t,e){for(;Mt!==null;){var n=Mt;switch(n.tag){case 0:case 11:case 15:Hs(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:xd(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Mt=i;else e:for(n=t;Mt!==null;){i=Mt;var r=i.sibling,s=i.return;if(J2(i),i===n){Mt=null;break e}if(r!==null){r.return=s,Mt=r;break e}Mt=s}}}var bU={getCacheForType:function(t){var e=Qt(It),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Qt(It).controller.signal}},TU=typeof WeakMap=="function"?WeakMap:Map,Re=0,je=null,ye=null,ve=0,De=0,Ln=null,Ts=!1,Ic=!1,db=!1,Vr=0,ht=0,Gs=0,Ya=0,fb=0,Bn=0,Hl=0,eh=null,Sn=null,Kv=!1,gg=0,cP=0,ip=1/0,rp=null,Ds=null,Nt=0,ks=null,Gl=null,Sr=0,Wv=0,Qv=null,uP=null,th=0,Yv=null;function Wn(){return Re&2&&ve!==0?ve&-ve:se.T!==null?pb():vN()}function hP(){if(Bn===0)if(!(ve&536870912)||be){var t=Ef;Ef<<=1,!(Ef&3932160)&&(Ef=262144),Bn=t}else Bn=536870912;return t=Jn.current,t!==null&&(t.flags|=32),Bn}function Nn(t,e,n){(t===je&&(De===2||De===9)||t.cancelPendingCommit!==null)&&($l(t,0),Es(t,ve,Bn,!1)),bd(t,n),(!(Re&2)||t!==je)&&(t===je&&(!(Re&2)&&(Ya|=n),ht===4&&Es(t,ve,Bn,!1)),or(t))}function dP(t,e,n){if(Re&6)throw Error(F(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||wd(t,e),r=i?SU(t,e):m_(t,e,!0),s=i;do{if(r===0){Ic&&!i&&Es(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!EU(n)){r=m_(t,e,!1),s=!1;continue}if(r===2){if(s=e,t.errorRecoveryDisabledLanes&s)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=t;r=eh;var l=o.current.memoizedState.isDehydrated;if(l&&($l(o,a).flags|=256),a=m_(o,a,!1),a!==2){if(db&&!l){o.errorRecoveryDisabledLanes|=s,Ya|=s,r=4;break e}s=Sn,Sn=r,s!==null&&(Sn===null?Sn=s:Sn.push.apply(Sn,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){$l(t,0),Es(t,e,0,!0);break}e:{switch(i=t,s=r,s){case 0:case 1:throw Error(F(345));case 4:if((e&4194048)!==e)break;case 6:Es(i,e,Bn,!Ts);break e;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(F(329))}if((e&62914560)===e&&(r=gg+300-Gn(),10<r)){if(Es(i,e,Bn,!Ts),sg(i,0,!0)!==0)break e;Sr=e,i.timeoutHandle=DP(oI.bind(null,i,n,Sn,rp,Kv,e,Bn,Ya,Hl,Ts,s,"Throttled",-0,0),r);break e}oI(i,n,Sn,rp,Kv,e,Bn,Ya,Hl,Ts,s,null,-0,0)}}break}while(!0);or(t)}function oI(t,e,n,i,r,s,a,o,l,c,h,d,f,g){if(t.timeoutHandle=-1,d=e.subtreeFlags,d&8192||(d&16785408)===16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vr},sP(e,s,d);var E=(s&62914560)===s?gg-Gn():(s&4194048)===s?cP-Gn():0;if(E=oj(d,E),E!==null){Sr=s,t.cancelPendingCommit=E(cI.bind(null,t,e,s,n,i,r,a,o,l,h,d,null,f,g)),Es(t,s,a,!c);return}}cI(t,e,s,n,i,r,a,o,l)}function EU(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Xn(s(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Es(t,e,n,i){e&=~fb,e&=~Ya,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var s=31-Kn(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&gN(t,n,e)}function yg(){return Re&6?!0:(Ad(0),!1)}function mb(){if(ye!==null){if(De===0)var t=ye.return;else t=ye,wr=So=null,Zw(t),Rl=null,Oh=0,t=ye;for(;t!==null;)G2(t.alternate,t),t=t.return;ye=null}}function $l(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,qU(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Sr=0,mb(),je=t,ye=n=Er(t.current,null),ve=e,De=0,Ln=null,Ts=!1,Ic=wd(t,e),db=!1,Hl=Bn=fb=Ya=Gs=ht=0,Sn=eh=null,Kv=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-Kn(i),s=1<<r;e|=t[r],i&=~s}return Vr=e,cg(),n}function fP(t,e){ce=null,se.H=Mh,e===Sc||e===hg?(e=jS(),De=3):e===$w?(e=jS(),De=4):De=e===lb?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Ln=e,ye===null&&(ht=1,ep(t,ci(e,t.current)))}function mP(){var t=Jn.current;return t===null?!0:(ve&4194048)===ve?mi===null:(ve&62914560)===ve||ve&536870912?t===mi:!1}function pP(){var t=se.H;return se.H=Mh,t===null?Mh:t}function gP(){var t=se.A;return se.A=bU,t}function sp(){ht=4,Ts||(ve&4194048)!==ve&&Jn.current!==null||(Ic=!0),!(Gs&134217727)&&!(Ya&134217727)||je===null||Es(je,ve,Bn,!1)}function m_(t,e,n){var i=Re;Re|=2;var r=pP(),s=gP();(je!==t||ve!==e)&&(rp=null,$l(t,e)),e=!1;var a=ht;e:do try{if(De!==0&&ye!==null){var o=ye,l=Ln;switch(De){case 8:mb(),a=6;break e;case 3:case 2:case 9:case 6:Jn.current===null&&(e=!0);var c=De;if(De=0,Ln=null,gl(t,o,l,c),n&&Ic){a=0;break e}break;default:c=De,De=0,Ln=null,gl(t,o,l,c)}}xU(),a=ht;break}catch(h){fP(t,h)}while(!0);return e&&t.shellSuspendCounter++,wr=So=null,Re=i,se.H=r,se.A=s,ye===null&&(je=null,ve=0,cg()),a}function xU(){for(;ye!==null;)yP(ye)}function SU(t,e){var n=Re;Re|=2;var i=pP(),r=gP();je!==t||ve!==e?(rp=null,ip=Gn()+500,$l(t,e)):Ic=wd(t,e);e:do try{if(De!==0&&ye!==null){e=ye;var s=Ln;t:switch(De){case 1:De=0,Ln=null,gl(t,e,s,1);break;case 2:case 9:if(US(s)){De=0,Ln=null,lI(e);break}e=function(){De!==2&&De!==9||je!==t||(De=7),or(t)},s.then(e,e);break e;case 3:De=7;break e;case 4:De=5;break e;case 7:US(s)?(De=0,Ln=null,lI(e)):(De=0,Ln=null,gl(t,e,s,7));break;case 5:var a=null;switch(ye.tag){case 26:a=ye.memoizedState;case 5:case 27:var o=ye;if(a?LP(a):o.stateNode.complete){De=0,Ln=null;var l=o.sibling;if(l!==null)ye=l;else{var c=o.return;c!==null?(ye=c,_g(c)):ye=null}break t}}De=0,Ln=null,gl(t,e,s,5);break;case 6:De=0,Ln=null,gl(t,e,s,6);break;case 8:mb(),ht=6;break e;default:throw Error(F(462))}}IU();break}catch(h){fP(t,h)}while(!0);return wr=So=null,se.H=i,se.A=r,Re=n,ye!==null?0:(je=null,ve=0,cg(),ht)}function IU(){for(;ye!==null&&!Q4();)yP(ye)}function yP(t){var e=H2(t.alternate,t,Vr);t.memoizedProps=t.pendingProps,e===null?_g(t):ye=e}function lI(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=tI(n,e,e.pendingProps,e.type,void 0,ve);break;case 11:e=tI(n,e,e.pendingProps,e.type.render,e.ref,ve);break;case 5:Zw(e);default:G2(n,e),e=ye=GN(e,Vr),e=H2(n,e,Vr)}t.memoizedProps=t.pendingProps,e===null?_g(t):ye=e}function gl(t,e,n,i){wr=So=null,Zw(e),Rl=null,Oh=0;var r=e.return;try{if(mU(t,r,e,n,ve)){ht=1,ep(t,ci(n,t.current)),ye=null;return}}catch(s){if(r!==null)throw ye=r,s;ht=1,ep(t,ci(n,t.current)),ye=null;return}e.flags&32768?(be||i===1?t=!0:Ic||ve&536870912?t=!1:(Ts=t=!0,(i===2||i===9||i===3||i===6)&&(i=Jn.current,i!==null&&i.tag===13&&(i.flags|=16384))),_P(e,t)):_g(e)}function _g(t){var e=t;do{if(e.flags&32768){_P(e,Ts);return}t=e.return;var n=yU(e.alternate,e,Vr);if(n!==null){ye=n;return}if(e=e.sibling,e!==null){ye=e;return}ye=e=t}while(e!==null);ht===0&&(ht=5)}function _P(t,e){do{var n=_U(t.alternate,t);if(n!==null){n.flags&=32767,ye=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ye=t;return}ye=t=n}while(t!==null);ht=6,ye=null}function cI(t,e,n,i,r,s,a,o,l){t.cancelPendingCommit=null;do vg();while(Nt!==0);if(Re&6)throw Error(F(327));if(e!==null){if(e===t.current)throw Error(F(177));if(s=e.lanes|e.childLanes,s|=jw,s6(t,n,s,a,o,l),t===je&&(ye=je=null,ve=0),Gl=e,ks=t,Sr=n,Wv=s,Qv=r,uP=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,NU(qm,function(){return EP(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=se.T,se.T=null,r=Ce.p,Ce.p=2,a=Re,Re|=4;try{vU(t,e,n)}finally{Re=a,Ce.p=r,se.T=i}}Nt=1,vP(),wP(),bP()}}function vP(){if(Nt===1){Nt=0;var t=ks,e=Gl,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=se.T,se.T=null;var i=Ce.p;Ce.p=2;var r=Re;Re|=4;try{nP(e,t);var s=e0,a=LN(t.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&MN(o.ownerDocument.documentElement,o)){if(l!==null&&Uw(o)){var c=l.start,h=l.end;if(h===void 0&&(h=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(h,o.value.length);else{var d=o.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var g=f.getSelection(),E=o.textContent.length,S=Math.min(l.start,E),b=l.end===void 0?S:Math.min(l.end,E);!g.extend&&S>b&&(a=b,b=S,S=a);var y=PS(o,S),_=PS(o,b);if(y&&_&&(g.rangeCount!==1||g.anchorNode!==y.node||g.anchorOffset!==y.offset||g.focusNode!==_.node||g.focusOffset!==_.offset)){var v=d.createRange();v.setStart(y.node,y.offset),g.removeAllRanges(),S>b?(g.addRange(v),g.extend(_.node,_.offset)):(v.setEnd(_.node,_.offset),g.addRange(v))}}}}for(d=[],g=o;g=g.parentNode;)g.nodeType===1&&d.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var I=d[o];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}fp=!!Zv,e0=Zv=null}finally{Re=r,Ce.p=i,se.T=n}}t.current=e,Nt=2}}function wP(){if(Nt===2){Nt=0;var t=ks,e=Gl,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=se.T,se.T=null;var i=Ce.p;Ce.p=2;var r=Re;Re|=4;try{X2(t,e.alternate,e)}finally{Re=r,Ce.p=i,se.T=n}}Nt=3}}function bP(){if(Nt===4||Nt===3){Nt=0,Y4();var t=ks,e=Gl,n=Sr,i=uP;e.subtreeFlags&10256||e.flags&10256?Nt=5:(Nt=0,Gl=ks=null,TP(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(Ds=null),Pw(n),e=e.stateNode,$n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(vd,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=se.T,r=Ce.p,Ce.p=2,se.T=null;try{for(var s=t.onRecoverableError,a=0;a<i.length;a++){var o=i[a];s(o.value,{componentStack:o.stack})}}finally{se.T=e,Ce.p=r}}Sr&3&&vg(),or(t),r=t.pendingLanes,n&261930&&r&42?t===Yv?th++:(th=0,Yv=t):th=0,Ad(0)}}function TP(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,xd(e)))}function vg(){return vP(),wP(),bP(),EP()}function EP(){if(Nt!==5)return!1;var t=ks,e=Wv;Wv=0;var n=Pw(Sr),i=se.T,r=Ce.p;try{Ce.p=32>n?32:n,se.T=null,n=Qv,Qv=null;var s=ks,a=Sr;if(Nt=0,Gl=ks=null,Sr=0,Re&6)throw Error(F(331));var o=Re;if(Re|=4,oP(s.current),rP(s,s.current,a,n),Re=o,Ad(0,!1),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(vd,s)}catch{}return!0}finally{Ce.p=r,se.T=i,TP(t,e)}}function uI(t,e,n){e=ci(n,e),e=qv(t.stateNode,e,2),t=Ps(t,e,2),t!==null&&(bd(t,2),or(t))}function ke(t,e,n){if(t.tag===3)uI(t,t,n);else for(;e!==null;){if(e.tag===3){uI(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ds===null||!Ds.has(i))){t=ci(n,t),n=U2(2),i=Ps(e,n,2),i!==null&&(j2(n,i,e,t),bd(i,2),or(i));break}}e=e.return}}function p_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new TU;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(db=!0,r.add(n),t=AU.bind(null,t,e,n),e.then(t,t))}function AU(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,je===t&&(ve&n)===n&&(ht===4||ht===3&&(ve&62914560)===ve&&300>Gn()-gg?!(Re&2)&&$l(t,0):fb|=n,Hl===ve&&(Hl=0)),or(t)}function xP(t,e){e===0&&(e=pN()),t=xo(t,e),t!==null&&(bd(t,e),or(t))}function RU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xP(t,n)}function CU(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(F(314))}i!==null&&i.delete(e),xP(t,n)}function NU(t,e){return Cw(t,e)}var ap=null,Zo=null,Xv=!1,op=!1,g_=!1,xs=0;function or(t){t!==Zo&&t.next===null&&(Zo===null?ap=Zo=t:Zo=Zo.next=t),op=!0,Xv||(Xv=!0,DU())}function Ad(t,e){if(!g_&&op){g_=!0;do for(var n=!1,i=ap;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,o=i.pingedLanes;s=(1<<31-Kn(42|t)+1)-1,s&=r&~(a&~o),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,hI(i,s))}else s=ve,s=sg(i,i===je?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||wd(i,s)||(n=!0,hI(i,s));i=i.next}while(n);g_=!1}}function PU(){SP()}function SP(){op=Xv=!1;var t=0;xs!==0&&BU()&&(t=xs);for(var e=Gn(),n=null,i=ap;i!==null;){var r=i.next,s=IP(i,e);s===0?(i.next=null,n===null?ap=r:n.next=r,r===null&&(Zo=n)):(n=i,(t!==0||s&3)&&(op=!0)),i=r}Nt!==0&&Nt!==5||Ad(t),xs!==0&&(xs=0)}function IP(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var a=31-Kn(s),o=1<<a,l=r[a];l===-1?(!(o&n)||o&i)&&(r[a]=r6(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}if(e=je,n=ve,n=sg(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(De===2||De===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&Hy(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||wd(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&Hy(i),Pw(n)){case 2:case 8:n=fN;break;case 32:n=qm;break;case 268435456:n=mN;break;default:n=qm}return i=AP.bind(null,t),n=Cw(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&Hy(i),t.callbackPriority=2,t.callbackNode=null,2}function AP(t,e){if(Nt!==0&&Nt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(vg()&&t.callbackNode!==n)return null;var i=ve;return i=sg(t,t===je?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(dP(t,i,e),IP(t,Gn()),t.callbackNode!=null&&t.callbackNode===n?AP.bind(null,t):null)}function hI(t,e){if(vg())return null;dP(t,e,!0)}function DU(){HU(function(){Re&6?Cw(dN,PU):SP()})}function pb(){if(xs===0){var t=Fl;t===0&&(t=Tf,Tf<<=1,!(Tf&261888)&&(Tf=256)),xs=t}return xs}function dI(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:nm(""+t)}function fI(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function kU(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var s=dI((r[Pn]||null).action),a=i.submitter;a&&(e=(e=a[Pn]||null)?dI(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var o=new ag("action","action",null,i,r);t.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(xs!==0){var l=a?fI(r,a):new FormData(r);Fv(n,{pending:!0,data:l,method:r.method,action:s},null,l)}}else typeof s=="function"&&(o.preventDefault(),l=a?fI(r,a):new FormData(r),Fv(n,{pending:!0,data:l,method:r.method,action:s},s,l))},currentTarget:r}]})}}for(var y_=0;y_<Cv.length;y_++){var __=Cv[y_],OU=__.toLowerCase(),VU=__[0].toUpperCase()+__.slice(1);Pi(OU,"on"+VU)}Pi(jN,"onAnimationEnd");Pi(zN,"onAnimationIteration");Pi(FN,"onAnimationStart");Pi("dblclick","onDoubleClick");Pi("focusin","onFocus");Pi("focusout","onBlur");Pi(X6,"onTransitionRun");Pi(J6,"onTransitionStart");Pi(Z6,"onTransitionCancel");Pi(BN,"onTransitionEnd");jl("onMouseEnter",["mouseout","mouseover"]);jl("onMouseLeave",["mouseout","mouseover"]);jl("onPointerEnter",["pointerout","pointerover"]);jl("onPointerLeave",["pointerout","pointerover"]);bo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bo("onBeforeInput",["compositionend","keypress","textInput","paste"]);bo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lh));function RP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(h){Gm(h)}r.currentTarget=null,s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(h){Gm(h)}r.currentTarget=null,s=l}}}}function ge(t,e){var n=e[bv];n===void 0&&(n=e[bv]=new Set);var i=t+"__bubble";n.has(i)||(CP(e,t,2,!1),n.add(i))}function v_(t,e,n){var i=0;e&&(i|=4),CP(n,t,i,e)}var Df="_reactListening"+Math.random().toString(36).slice(2);function gb(t){if(!t[Df]){t[Df]=!0,wN.forEach(function(n){n!=="selectionchange"&&(MU.has(n)||v_(n,!1,t),v_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Df]||(e[Df]=!0,v_("selectionchange",!1,e))}}function CP(t,e,n,i){switch(BP(e)){case 2:var r=uj;break;case 8:r=hj;break;default:r=wb}n=r.bind(null,e,n,t),r=void 0,!Iv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function w_(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;o!==null;){if(a=ol(o),a===null)return;if(l=a.tag,l===5||l===6||l===26||l===27){i=s=a;continue e}o=o.parentNode}}i=i.return}RN(function(){var c=s,h=Ow(n),d=[];e:{var f=qN.get(t);if(f!==void 0){var g=ag,E=t;switch(t){case"keypress":if(rm(n)===0)break e;case"keydown":case"keyup":g=C6;break;case"focusin":E="focus",g=Qy;break;case"focusout":E="blur",g=Qy;break;case"beforeblur":case"afterblur":g=Qy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=bS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=y6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=D6;break;case jN:case zN:case FN:g=w6;break;case BN:g=O6;break;case"scroll":case"scrollend":g=p6;break;case"wheel":g=M6;break;case"copy":case"cut":case"paste":g=T6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=ES;break;case"toggle":case"beforetoggle":g=U6}var S=(e&4)!==0,b=!S&&(t==="scroll"||t==="scrollend"),y=S?f!==null?f+"Capture":null:f;S=[];for(var _=c,v;_!==null;){var I=_;if(v=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||v===null||y===null||(I=Ch(_,y),I!=null&&S.push(Uh(_,I,v))),b)break;_=_.return}0<S.length&&(f=new g(f,E,null,n,h),d.push({event:f,listeners:S}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Sv&&(E=n.relatedTarget||n.fromElement)&&(ol(E)||E[Tc]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(E=n.relatedTarget||n.toElement,g=c,E=E?ol(E):null,E!==null&&(b=_d(E),S=E.tag,E!==b||S!==5&&S!==27&&S!==6)&&(E=null)):(g=null,E=c),g!==E)){if(S=bS,I="onMouseLeave",y="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(S=ES,I="onPointerLeave",y="onPointerEnter",_="pointer"),b=g==null?f:Ru(g),v=E==null?f:Ru(E),f=new S(I,_+"leave",g,n,h),f.target=b,f.relatedTarget=v,I=null,ol(h)===c&&(S=new S(y,_+"enter",E,n,h),S.target=v,S.relatedTarget=b,I=S),b=I,g&&E)t:{for(S=LU,y=g,_=E,v=0,I=y;I;I=S(I))v++;I=0;for(var k=_;k;k=S(k))I++;for(;0<v-I;)y=S(y),v--;for(;0<I-v;)_=S(_),I--;for(;v--;){if(y===_||_!==null&&y===_.alternate){S=y;break t}y=S(y),_=S(_)}S=null}else S=null;g!==null&&mI(d,f,g,S,!1),E!==null&&b!==null&&mI(d,b,E,S,!0)}}e:{if(f=c?Ru(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var O=AS;else if(IS(f))if(ON)O=W6;else{O=$6;var T=G6}else g=f.nodeName,!g||g.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?c&&kw(c.elementType)&&(O=AS):O=K6;if(O&&(O=O(t,c))){kN(d,O,n,h);break e}T&&T(t,f,c),t==="focusout"&&c&&f.type==="number"&&c.memoizedProps.value!=null&&xv(f,"number",f.value)}switch(T=c?Ru(c):window,t){case"focusin":(IS(T)||T.contentEditable==="true")&&(ul=T,Av=c,$u=null);break;case"focusout":$u=Av=ul=null;break;case"mousedown":Rv=!0;break;case"contextmenu":case"mouseup":case"dragend":Rv=!1,DS(d,n,h);break;case"selectionchange":if(Y6)break;case"keydown":case"keyup":DS(d,n,h)}var x;if(Lw)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else cl?PN(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(NN&&n.locale!=="ko"&&(cl||R!=="onCompositionStart"?R==="onCompositionEnd"&&cl&&(x=CN()):(bs=h,Vw="value"in bs?bs.value:bs.textContent,cl=!0)),T=lp(c,R),0<T.length&&(R=new TS(R,t,null,n,h),d.push({event:R,listeners:T}),x?R.data=x:(x=DN(n),x!==null&&(R.data=x)))),(x=z6?F6(t,n):B6(t,n))&&(R=lp(c,"onBeforeInput"),0<R.length&&(T=new TS("onBeforeInput","beforeinput",null,n,h),d.push({event:T,listeners:R}),T.data=x)),kU(d,t,c,n,h)}RP(d,e)})}function Uh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function lp(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=Ch(t,n),r!=null&&i.unshift(Uh(t,r,s)),r=Ch(t,e),r!=null&&i.push(Uh(t,r,s))),t.tag===3)return i;t=t.return}return[]}function LU(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function mI(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===i)break;o!==5&&o!==26&&o!==27||c===null||(l=c,r?(c=Ch(n,s),c!=null&&a.unshift(Uh(n,c,l))):r||(c=Ch(n,s),c!=null&&a.push(Uh(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var UU=/\r\n?/g,jU=/\u0000|\uFFFD/g;function pI(t){return(typeof t=="string"?t:""+t).replace(UU,`
`).replace(jU,"")}function NP(t,e){return e=pI(e),pI(t)===e}function Me(t,e,n,i,r,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||zl(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&zl(t,""+i);break;case"className":Sf(t,"class",i);break;case"tabIndex":Sf(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Sf(t,n,i);break;case"style":AN(t,i,s);break;case"data":if(e!=="object"){Sf(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=nm(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&Me(t,e,"name",r.name,r,null),Me(t,e,"formEncType",r.formEncType,r,null),Me(t,e,"formMethod",r.formMethod,r,null),Me(t,e,"formTarget",r.formTarget,r,null)):(Me(t,e,"encType",r.encType,r,null),Me(t,e,"method",r.method,r,null),Me(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=nm(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=vr);break;case"onScroll":i!=null&&ge("scroll",t);break;case"onScrollEnd":i!=null&&ge("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(F(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(F(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=nm(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":ge("beforetoggle",t),ge("toggle",t),tm(t,"popover",i);break;case"xlinkActuate":ur(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ur(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ur(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ur(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ur(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ur(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ur(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ur(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ur(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":tm(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=f6.get(n)||n,tm(t,n,i))}}function Jv(t,e,n,i,r,s){switch(n){case"style":AN(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(F(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(F(60));t.innerHTML=n}}break;case"children":typeof i=="string"?zl(t,i):(typeof i=="number"||typeof i=="bigint")&&zl(t,""+i);break;case"onScroll":i!=null&&ge("scroll",t);break;case"onScrollEnd":i!=null&&ge("scrollend",t);break;case"onClick":i!=null&&(t.onclick=vr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bN.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),s=t[Pn]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):tm(t,n,i)}}}function Yt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ge("error",t),ge("load",t);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(F(137,e));default:Me(t,e,s,a,n,null)}}r&&Me(t,e,"srcSet",n.srcSet,n,null),i&&Me(t,e,"src",n.src,n,null);return;case"input":ge("invalid",t);var o=s=a=r=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(h!=null)switch(i){case"name":r=h;break;case"type":a=h;break;case"checked":l=h;break;case"defaultChecked":c=h;break;case"value":s=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(F(137,e));break;default:Me(t,e,i,h,n,null)}}xN(t,s,o,l,c,a,r,!1);return;case"select":ge("invalid",t),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],o!=null))switch(r){case"value":s=o;break;case"defaultValue":a=o;break;case"multiple":i=o;default:Me(t,e,r,o,n,null)}e=s,n=a,t.multiple=!!i,e!=null?Sl(t,!!i,e,!1):n!=null&&Sl(t,!!i,n,!0);return;case"textarea":ge("invalid",t),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":i=o;break;case"defaultValue":r=o;break;case"children":s=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(F(91));break;default:Me(t,e,a,o,n,null)}IN(t,i,r,s);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Me(t,e,l,i,n,null)}return;case"dialog":ge("beforetoggle",t),ge("toggle",t),ge("cancel",t),ge("close",t);break;case"iframe":case"object":ge("load",t);break;case"video":case"audio":for(i=0;i<Lh.length;i++)ge(Lh[i],t);break;case"image":ge("error",t),ge("load",t);break;case"details":ge("toggle",t);break;case"embed":case"source":case"link":ge("error",t),ge("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(F(137,e));default:Me(t,e,c,i,n,null)}return;default:if(kw(e)){for(h in n)n.hasOwnProperty(h)&&(i=n[h],i!==void 0&&Jv(t,e,h,i,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(i=n[o],i!=null&&Me(t,e,o,i,n,null))}function zU(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,o=null,l=null,c=null,h=null;for(g in n){var d=n[g];if(n.hasOwnProperty(g)&&d!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":l=d;default:i.hasOwnProperty(g)||Me(t,e,g,null,i,d)}}for(var f in i){var g=i[f];if(d=n[f],i.hasOwnProperty(f)&&(g!=null||d!=null))switch(f){case"type":s=g;break;case"name":r=g;break;case"checked":c=g;break;case"defaultChecked":h=g;break;case"value":a=g;break;case"defaultValue":o=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(F(137,e));break;default:g!==d&&Me(t,e,f,g,i,d)}}Ev(t,a,o,l,c,h,s,r);return;case"select":g=a=o=f=null;for(s in n)if(l=n[s],n.hasOwnProperty(s)&&l!=null)switch(s){case"value":break;case"multiple":g=l;default:i.hasOwnProperty(s)||Me(t,e,s,null,i,l)}for(r in i)if(s=i[r],l=n[r],i.hasOwnProperty(r)&&(s!=null||l!=null))switch(r){case"value":f=s;break;case"defaultValue":o=s;break;case"multiple":a=s;default:s!==l&&Me(t,e,r,s,i,l)}e=o,n=a,i=g,f!=null?Sl(t,!!n,f,!1):!!i!=!!n&&(e!=null?Sl(t,!!n,e,!0):Sl(t,!!n,n?[]:"",!1));return;case"textarea":g=f=null;for(o in n)if(r=n[o],n.hasOwnProperty(o)&&r!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:Me(t,e,o,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":f=r;break;case"defaultValue":g=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(F(91));break;default:r!==s&&Me(t,e,a,r,i,s)}SN(t,f,g);return;case"option":for(var E in n)if(f=n[E],n.hasOwnProperty(E)&&f!=null&&!i.hasOwnProperty(E))switch(E){case"selected":t.selected=!1;break;default:Me(t,e,E,null,i,f)}for(l in i)if(f=i[l],g=n[l],i.hasOwnProperty(l)&&f!==g&&(f!=null||g!=null))switch(l){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Me(t,e,l,f,i,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var S in n)f=n[S],n.hasOwnProperty(S)&&f!=null&&!i.hasOwnProperty(S)&&Me(t,e,S,null,i,f);for(c in i)if(f=i[c],g=n[c],i.hasOwnProperty(c)&&f!==g&&(f!=null||g!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(F(137,e));break;default:Me(t,e,c,f,i,g)}return;default:if(kw(e)){for(var b in n)f=n[b],n.hasOwnProperty(b)&&f!==void 0&&!i.hasOwnProperty(b)&&Jv(t,e,b,void 0,i,f);for(h in i)f=i[h],g=n[h],!i.hasOwnProperty(h)||f===g||f===void 0&&g===void 0||Jv(t,e,h,f,i,g);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&f!=null&&!i.hasOwnProperty(y)&&Me(t,e,y,null,i,f);for(d in i)f=i[d],g=n[d],!i.hasOwnProperty(d)||f===g||f==null&&g==null||Me(t,e,d,f,i,g)}function gI(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function FU(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],s=r.transferSize,a=r.initiatorType,o=r.duration;if(s&&o&&gI(a)){for(a=0,o=r.responseEnd,i+=1;i<n.length;i++){var l=n[i],c=l.startTime;if(c>o)break;var h=l.transferSize,d=l.initiatorType;h&&gI(d)&&(l=l.responseEnd,a+=h*(l<o?1:(o-c)/(l-c)))}if(--i,e+=8*(s+a)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Zv=null,e0=null;function cp(t){return t.nodeType===9?t:t.ownerDocument}function yI(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function PP(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function t0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var b_=null;function BU(){var t=window.event;return t&&t.type==="popstate"?t===b_?!1:(b_=t,!0):(b_=null,!1)}var DP=typeof setTimeout=="function"?setTimeout:void 0,qU=typeof clearTimeout=="function"?clearTimeout:void 0,_I=typeof Promise=="function"?Promise:void 0,HU=typeof queueMicrotask=="function"?queueMicrotask:typeof _I<"u"?function(t){return _I.resolve(null).then(t).catch(GU)}:DP;function GU(t){setTimeout(function(){throw t})}function oa(t){return t==="head"}function vI(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(r),Wl(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")nh(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,nh(n);for(var s=n.firstChild;s;){var a=s.nextSibling,o=s.nodeName;s[Td]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=a}}else n==="body"&&nh(t.ownerDocument.body);n=r}while(n);Wl(e)}function wI(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function n0(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":n0(n),Dw(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function $U(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[Td])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=pi(t.nextSibling),t===null)break}return null}function KU(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=pi(t.nextSibling),t===null))return null;return t}function kP(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=pi(t.nextSibling),t===null))return null;return t}function i0(t){return t.data==="$?"||t.data==="$~"}function r0(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function WU(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function pi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var s0=null;function bI(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return pi(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function TI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function OP(t,e,n){switch(e=cp(n),t){case"html":if(t=e.documentElement,!t)throw Error(F(452));return t;case"head":if(t=e.head,!t)throw Error(F(453));return t;case"body":if(t=e.body,!t)throw Error(F(454));return t;default:throw Error(F(451))}}function nh(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Dw(t)}var yi=new Map,EI=new Set;function up(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var qr=Ce.d;Ce.d={f:QU,r:YU,D:XU,C:JU,L:ZU,m:ej,X:nj,S:tj,M:ij};function QU(){var t=qr.f(),e=yg();return t||e}function YU(t){var e=Ec(t);e!==null&&e.tag===5&&e.type==="form"?A2(e):qr.r(t)}var Ac=typeof document>"u"?null:document;function VP(t,e,n){var i=Ac;if(i&&typeof e=="string"&&e){var r=li(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),EI.has(r)||(EI.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),Yt(e,"link",t),Ut(e),i.head.appendChild(e)))}}function XU(t){qr.D(t),VP("dns-prefetch",t,null)}function JU(t,e){qr.C(t,e),VP("preconnect",t,e)}function ZU(t,e,n){qr.L(t,e,n);var i=Ac;if(i&&t&&e){var r='link[rel="preload"][as="'+li(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+li(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+li(n.imageSizes)+'"]')):r+='[href="'+li(t)+'"]';var s=r;switch(e){case"style":s=Kl(t);break;case"script":s=Rc(t)}yi.has(s)||(t=Xe({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),yi.set(s,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(Rd(s))||e==="script"&&i.querySelector(Cd(s))||(e=i.createElement("link"),Yt(e,"link",t),Ut(e),i.head.appendChild(e)))}}function ej(t,e){qr.m(t,e);var n=Ac;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+li(i)+'"][href="'+li(t)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Rc(t)}if(!yi.has(s)&&(t=Xe({rel:"modulepreload",href:t},e),yi.set(s,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Cd(s)))return}i=n.createElement("link"),Yt(i,"link",t),Ut(i),n.head.appendChild(i)}}}function tj(t,e,n){qr.S(t,e,n);var i=Ac;if(i&&t){var r=xl(i).hoistableStyles,s=Kl(t);e=e||"default";var a=r.get(s);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(Rd(s)))o.loading=5;else{t=Xe({rel:"stylesheet",href:t,"data-precedence":e},n),(n=yi.get(s))&&yb(t,n);var l=a=i.createElement("link");Ut(l),Yt(l,"link",t),l._p=new Promise(function(c,h){l.onload=c,l.onerror=h}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,dm(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(s,a)}}}function nj(t,e){qr.X(t,e);var n=Ac;if(n&&t){var i=xl(n).hoistableScripts,r=Rc(t),s=i.get(r);s||(s=n.querySelector(Cd(r)),s||(t=Xe({src:t,async:!0},e),(e=yi.get(r))&&_b(t,e),s=n.createElement("script"),Ut(s),Yt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function ij(t,e){qr.M(t,e);var n=Ac;if(n&&t){var i=xl(n).hoistableScripts,r=Rc(t),s=i.get(r);s||(s=n.querySelector(Cd(r)),s||(t=Xe({src:t,async:!0,type:"module"},e),(e=yi.get(r))&&_b(t,e),s=n.createElement("script"),Ut(s),Yt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function xI(t,e,n,i){var r=(r=Rs.current)?up(r):null;if(!r)throw Error(F(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Kl(n.href),n=xl(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Kl(n.href);var s=xl(r).hoistableStyles,a=s.get(t);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,a),(s=r.querySelector(Rd(t)))&&!s._p&&(a.instance=s,a.state.loading=5),yi.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},yi.set(t,n),s||rj(r,t,n,a.state))),e&&i===null)throw Error(F(528,""));return a}if(e&&i!==null)throw Error(F(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Rc(n),n=xl(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(F(444,t))}}function Kl(t){return'href="'+li(t)+'"'}function Rd(t){return'link[rel="stylesheet"]['+t+"]"}function MP(t){return Xe({},t,{"data-precedence":t.precedence,precedence:null})}function rj(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),Yt(e,"link",n),Ut(e),t.head.appendChild(e))}function Rc(t){return'[src="'+li(t)+'"]'}function Cd(t){return"script[async]"+t}function SI(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+li(n.href)+'"]');if(i)return e.instance=i,Ut(i),i;var r=Xe({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),Ut(i),Yt(i,"style",r),dm(i,n.precedence,t),e.instance=i;case"stylesheet":r=Kl(n.href);var s=t.querySelector(Rd(r));if(s)return e.state.loading|=4,e.instance=s,Ut(s),s;i=MP(n),(r=yi.get(r))&&yb(i,r),s=(t.ownerDocument||t).createElement("link"),Ut(s);var a=s;return a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Yt(s,"link",i),e.state.loading|=4,dm(s,n.precedence,t),e.instance=s;case"script":return s=Rc(n.src),(r=t.querySelector(Cd(s)))?(e.instance=r,Ut(r),r):(i=n,(r=yi.get(s))&&(i=Xe({},n),_b(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),Ut(r),Yt(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(F(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,dm(i,n.precedence,t));return e.instance}function dm(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===e)s=o;else if(s!==r)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function yb(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function _b(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var fm=null;function II(t,e,n){if(fm===null){var i=new Map,r=fm=new Map;r.set(n,i)}else r=fm,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var s=n[r];if(!(s[Td]||s[$t]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=t+a;var o=i.get(a);o?o.push(s):i.set(a,[s])}}return i}function AI(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function sj(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function LP(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function aj(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=Kl(i.href),s=e.querySelector(Rd(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=hp.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=s,Ut(s);return}s=e.ownerDocument||e,i=MP(i),(r=yi.get(r))&&yb(i,r),s=s.createElement("link"),Ut(s);var a=s;a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Yt(s,"link",i),n.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=hp.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var T_=0;function oj(t,e){return t.stylesheets&&t.count===0&&mm(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&mm(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&T_===0&&(T_=62500*FU());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&mm(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>T_?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function hp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)mm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var dp=null;function mm(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,dp=new Map,e.forEach(lj,t),dp=null,hp.call(t))}function lj(t,e){if(!(e.state.loading&4)){var n=dp.get(t);if(n)var i=n.get(null);else{n=new Map,dp.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=e.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=hp.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var jh={$$typeof:_r,Provider:null,Consumer:null,_currentValue:$a,_currentValue2:$a,_threadCount:0};function cj(t,e,n,i,r,s,a,o,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gy(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gy(0),this.hiddenUpdates=Gy(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function UP(t,e,n,i,r,s,a,o,l,c,h,d){return t=new cj(t,e,n,a,l,c,h,d,o),e=1,s===!0&&(e|=24),s=Fn(3,null,null,e),t.current=s,s.stateNode=t,e=Hw(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},Kw(s),t}function jP(t){return t?(t=fl,t):fl}function zP(t,e,n,i,r,s){r=jP(r),i.context===null?i.context=r:i.pendingContext=r,i=Ns(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Ps(t,i,e),n!==null&&(Nn(n,t,e),Wu(n,t,e))}function RI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vb(t,e){RI(t,e),(t=t.alternate)&&RI(t,e)}function FP(t){if(t.tag===13||t.tag===31){var e=xo(t,67108864);e!==null&&Nn(e,t,67108864),vb(t,67108864)}}function CI(t){if(t.tag===13||t.tag===31){var e=Wn();e=Nw(e);var n=xo(t,e);n!==null&&Nn(n,t,e),vb(t,e)}}var fp=!0;function uj(t,e,n,i){var r=se.T;se.T=null;var s=Ce.p;try{Ce.p=2,wb(t,e,n,i)}finally{Ce.p=s,se.T=r}}function hj(t,e,n,i){var r=se.T;se.T=null;var s=Ce.p;try{Ce.p=8,wb(t,e,n,i)}finally{Ce.p=s,se.T=r}}function wb(t,e,n,i){if(fp){var r=a0(i);if(r===null)w_(t,e,i,mp,n),NI(t,i);else if(fj(r,t,e,n,i))i.stopPropagation();else if(NI(t,i),e&4&&-1<dj.indexOf(t)){for(;r!==null;){var s=Ec(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=Aa(s.pendingLanes);if(a!==0){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-Kn(a);o.entanglements[1]|=l,a&=~l}or(s),!(Re&6)&&(ip=Gn()+500,Ad(0))}}break;case 31:case 13:o=xo(s,2),o!==null&&Nn(o,s,2),yg(),vb(s,2)}if(s=a0(i),s===null&&w_(t,e,i,mp,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else w_(t,e,i,null,n)}}function a0(t){return t=Ow(t),bb(t)}var mp=null;function bb(t){if(mp=null,t=ol(t),t!==null){var e=_d(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=oN(e),t!==null)return t;t=null}else if(n===31){if(t=lN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return mp=t,null}function BP(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(X4()){case dN:return 2;case fN:return 8;case qm:case J4:return 32;case mN:return 268435456;default:return 32}default:return 32}}var o0=!1,Os=null,Vs=null,Ms=null,zh=new Map,Fh=new Map,_s=[],dj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function NI(t,e){switch(t){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":Vs=null;break;case"mouseover":case"mouseout":Ms=null;break;case"pointerover":case"pointerout":zh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fh.delete(e.pointerId)}}function fu(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Ec(e),e!==null&&FP(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function fj(t,e,n,i,r){switch(e){case"focusin":return Os=fu(Os,t,e,n,i,r),!0;case"dragenter":return Vs=fu(Vs,t,e,n,i,r),!0;case"mouseover":return Ms=fu(Ms,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return zh.set(s,fu(zh.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Fh.set(s,fu(Fh.get(s)||null,t,e,n,i,r)),!0}return!1}function qP(t){var e=ol(t.target);if(e!==null){var n=_d(e);if(n!==null){if(e=n.tag,e===13){if(e=oN(n),e!==null){t.blockedOn=e,mS(t.priority,function(){CI(n)});return}}else if(e===31){if(e=lN(n),e!==null){t.blockedOn=e,mS(t.priority,function(){CI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=a0(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Sv=i,n.target.dispatchEvent(i),Sv=null}else return e=Ec(n),e!==null&&FP(e),t.blockedOn=n,!1;e.shift()}return!0}function PI(t,e,n){pm(t)&&n.delete(e)}function mj(){o0=!1,Os!==null&&pm(Os)&&(Os=null),Vs!==null&&pm(Vs)&&(Vs=null),Ms!==null&&pm(Ms)&&(Ms=null),zh.forEach(PI),Fh.forEach(PI)}function kf(t,e){t.blockedOn===e&&(t.blockedOn=null,o0||(o0=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,mj)))}var Of=null;function DI(t){Of!==t&&(Of=t,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,function(){Of===t&&(Of=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(bb(i||n)===null)continue;break}var s=Ec(n);s!==null&&(t.splice(e,3),e-=3,Fv(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Wl(t){function e(l){return kf(l,t)}Os!==null&&kf(Os,t),Vs!==null&&kf(Vs,t),Ms!==null&&kf(Ms,t),zh.forEach(e),Fh.forEach(e);for(var n=0;n<_s.length;n++){var i=_s[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<_s.length&&(n=_s[0],n.blockedOn===null);)qP(n),n.blockedOn===null&&_s.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Pn]||null;if(typeof s=="function")a||DI(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Pn]||null)o=a.formAction;else if(bb(r)!==null)continue}else o=a.action;typeof o=="function"?n[i+1]=o:(n.splice(i,3),i-=3),DI(n)}}}function HP(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(a){return r=a})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function Tb(t){this._internalRoot=t}wg.prototype.render=Tb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));var n=e.current,i=Wn();zP(n,i,t,e,null,null)};wg.prototype.unmount=Tb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zP(t.current,2,null,t,null,null),yg(),e[Tc]=null}};function wg(t){this._internalRoot=t}wg.prototype.unstable_scheduleHydration=function(t){if(t){var e=vN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_s.length&&e!==0&&e<_s[n].priority;n++);_s.splice(n,0,t),n===0&&qP(t)}};var kI=sN.version;if(kI!=="19.2.0")throw Error(F(527,kI,"19.2.0"));Ce.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=H4(e),t=t!==null?cN(t):null,t=t===null?null:t.stateNode,t};var pj={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vf.isDisabled&&Vf.supportsFiber)try{vd=Vf.inject(pj),$n=Vf}catch{}}ig.createRoot=function(t,e){if(!aN(t))throw Error(F(299));var n=!1,i="",r=V2,s=M2,a=L2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=UP(t,1,!1,null,null,n,i,null,r,s,a,HP),t[Tc]=e.current,gb(t),new Tb(e)};ig.hydrateRoot=function(t,e,n){if(!aN(t))throw Error(F(299));var i=!1,r="",s=V2,a=M2,o=L2,l=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(l=n.formState)),e=UP(t,1,!0,e,n??null,i,r,l,s,a,o,HP),e.context=jP(null),n=e.current,i=Wn(),i=Nw(i),r=Ns(i),r.callback=null,Ps(n,r,i),n=i,e.current.lanes=n,bd(e,n),or(e),t[Tc]=e.current,gb(t),new wg(e)};ig.version="19.2.0";function GP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GP)}catch(t){console.error(t)}}GP(),JC.exports=ig;var gj=JC.exports;const yj=BC(gj),_j="modulepreload",vj=function(t){return"/RushCoffee-Capstone/"+t},OI={},Pe=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=vj(l),l in OI)return;OI[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":_j,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((f,g)=>{d.addEventListener("load",f),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var VI="popstate";function wj(t={}){function e(r,s){let{pathname:a="/",search:o="",hash:l=""}=Io(r.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),l0("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){let a=r.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let l=r.location.href,c=l.indexOf("#");o=c===-1?l:l.slice(0,c)}return o+"#"+(typeof s=="string"?s:Bh(s))}function i(r,s){Dn(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return Tj(e,n,i,t)}function it(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Dn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bj(){return Math.random().toString(36).substring(2,10)}function MI(t,e){return{usr:t.state,key:t.key,idx:e}}function l0(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Io(e):e,state:n,key:e&&e.key||i||bj()}}function Bh({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Io(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function Tj(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o="POP",l=null,c=h();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function h(){return(a.state||{idx:null}).idx}function d(){o="POP";let b=h(),y=b==null?null:b-c;c=b,l&&l({action:o,location:S.location,delta:y})}function f(b,y){o="PUSH";let _=l0(S.location,b,y);n&&n(_,b),c=h()+1;let v=MI(_,c),I=S.createHref(_);try{a.pushState(v,"",I)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(I)}s&&l&&l({action:o,location:S.location,delta:1})}function g(b,y){o="REPLACE";let _=l0(S.location,b,y);n&&n(_,b),c=h();let v=MI(_,c),I=S.createHref(_);a.replaceState(v,"",I),s&&l&&l({action:o,location:S.location,delta:0})}function E(b){return Ej(b)}let S={get action(){return o},get location(){return t(r,a)},listen(b){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(VI,d),l=b,()=>{r.removeEventListener(VI,d),l=null}},createHref(b){return e(r,b)},createURL:E,encodeLocation(b){let y=E(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:g,go(b){return a.go(b)}};return S}function Ej(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),it(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Bh(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function $P(t,e,n="/"){return xj(t,e,n,!1)}function xj(t,e,n,i){let r=typeof e=="string"?Io(e):e,s=Mr(r.pathname||"/",n);if(s==null)return null;let a=KP(t);Sj(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=Mj(s);o=Oj(a[l],c,i)}return o}function KP(t,e=[],n=[],i="",r=!1){let s=(a,o,l=r,c)=>{let h={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(i)&&l)return;it(h.relativePath.startsWith(i),`Absolute route path "${h.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(i.length)}let d=Ir([i,h.relativePath]),f=n.concat(h);a.children&&a.children.length>0&&(it(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),KP(a.children,e,f,d,l)),!(a.path==null&&!a.index)&&e.push({path:d,score:Dj(d,a.index),routesMeta:f})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of WP(a.path))s(a,o,!0,c)}),e}function WP(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=WP(i.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),r&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function Sj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kj(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var Ij=/^:[\w-]+$/,Aj=3,Rj=2,Cj=1,Nj=10,Pj=-2,LI=t=>t==="*";function Dj(t,e){let n=t.split("/"),i=n.length;return n.some(LI)&&(i+=Pj),e&&(i+=Rj),n.filter(r=>!LI(r)).reduce((r,s)=>r+(Ij.test(s)?Aj:s===""?Cj:Nj),i)}function kj(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function Oj(t,e,n=!1){let{routesMeta:i}=t,r={},s="/",a=[];for(let o=0;o<i.length;++o){let l=i[o],c=o===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=pp({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d&&c&&n&&!i[i.length-1].route.index&&(d=pp({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(r,d.params),a.push({params:r,pathname:Ir([s,d.pathname]),pathnameBase:Fj(Ir([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Ir([s,d.pathnameBase]))}return a}function pp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=Vj(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((c,{paramName:h,isOptional:d},f)=>{if(h==="*"){let E=o[f]||"";a=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const g=o[f];return d&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function Vj(t,e=!1,n=!0){Dn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(i.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function Mj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Dn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Mr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var Lj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Uj=t=>Lj.test(t);function jj(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Io(t):t,s;if(n)if(Uj(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Dn(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?s=UI(n.substring(1),"/"):s=UI(n,e)}else s=e;return{pathname:s,search:Bj(i),hash:qj(r)}}function UI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function E_(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Eb(t){let e=zj(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function xb(t,e,n,i=!1){let r;typeof t=="string"?r=Io(t):(r={...t},it(!r.pathname||!r.pathname.includes("?"),E_("?","pathname","search",r)),it(!r.pathname||!r.pathname.includes("#"),E_("#","pathname","hash",r)),it(!r.search||!r.search.includes("#"),E_("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=n;else{let d=e.length-1;if(!i&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}o=d>=0?e[d]:"/"}let l=jj(r,o),c=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}var Ir=t=>t.join("/").replace(/\/\/+/g,"/"),Fj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Bj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Hj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var QP=["POST","PUT","PATCH","DELETE"];new Set(QP);var Gj=["GET",...QP];new Set(Gj);var Cc=A.createContext(null);Cc.displayName="DataRouter";var bg=A.createContext(null);bg.displayName="DataRouterState";A.createContext(!1);var YP=A.createContext({isTransitioning:!1});YP.displayName="ViewTransition";var $j=A.createContext(new Map);$j.displayName="Fetchers";var Kj=A.createContext(null);Kj.displayName="Await";var Di=A.createContext(null);Di.displayName="Navigation";var Nd=A.createContext(null);Nd.displayName="Location";var ki=A.createContext({outlet:null,matches:[],isDataRoute:!1});ki.displayName="Route";var Sb=A.createContext(null);Sb.displayName="RouteError";function Wj(t,{relative:e}={}){it(Nc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=A.useContext(Di),{hash:r,pathname:s,search:a}=Pd(t,{relative:e}),o=s;return n!=="/"&&(o=s==="/"?n:Ir([n,s])),i.createHref({pathname:o,search:a,hash:r})}function Nc(){return A.useContext(Nd)!=null}function vi(){return it(Nc(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(Nd).location}var XP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function JP(t){A.useContext(Di).static||A.useLayoutEffect(t)}function Ao(){let{isDataRoute:t}=A.useContext(ki);return t?c3():Qj()}function Qj(){it(Nc(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Cc),{basename:e,navigator:n}=A.useContext(Di),{matches:i}=A.useContext(ki),{pathname:r}=vi(),s=JSON.stringify(Eb(i)),a=A.useRef(!1);return JP(()=>{a.current=!0}),A.useCallback((l,c={})=>{if(Dn(a.current,XP),!a.current)return;if(typeof l=="number"){n.go(l);return}let h=xb(l,JSON.parse(s),r,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ir([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,s,r,t])}var Yj=A.createContext(null);function Xj(t){let e=A.useContext(ki).outlet;return A.useMemo(()=>e&&A.createElement(Yj.Provider,{value:t},e),[e,t])}function Pd(t,{relative:e}={}){let{matches:n}=A.useContext(ki),{pathname:i}=vi(),r=JSON.stringify(Eb(n));return A.useMemo(()=>xb(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function Jj(t,e){return ZP(t,e)}function ZP(t,e,n,i,r){var _;it(Nc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=A.useContext(Di),{matches:a}=A.useContext(ki),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",h=o?o.pathnameBase:"/",d=o&&o.route;{let v=d&&d.path||"";eD(c,!d||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let f=vi(),g;if(e){let v=typeof e=="string"?Io(e):e;it(h==="/"||((_=v.pathname)==null?void 0:_.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${v.pathname}" was given in the \`location\` prop.`),g=v}else g=f;let E=g.pathname||"/",S=E;if(h!=="/"){let v=h.replace(/^\//,"").split("/");S="/"+E.replace(/^\//,"").split("/").slice(v.length).join("/")}let b=$P(t,{pathname:S});Dn(d||b!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Dn(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=i3(b&&b.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Ir([h,s.encodeLocation?s.encodeLocation(v.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?h:Ir([h,s.encodeLocation?s.encodeLocation(v.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathnameBase])})),a,n,i,r);return e&&y?A.createElement(Nd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},y):y}function Zj(){let t=l3(),e=Hj(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:s},"ErrorBoundary")," or"," ",A.createElement("code",{style:s},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:r},n):null,a)}var e3=A.createElement(Zj,null),t3=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?A.createElement(ki.Provider,{value:this.props.routeContext},A.createElement(Sb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function n3({routeContext:t,match:e,children:n}){let i=A.useContext(Cc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(ki.Provider,{value:t},n)}function i3(t,e=[],n=null,i=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n==null?void 0:n.errors;if(a!=null){let h=s.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);it(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let o=!1,l=-1;if(n)for(let h=0;h<s.length;h++){let d=s[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=h),d.route.id){let{loaderData:f,errors:g}=n,E=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||E){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let c=n&&i?(h,d)=>{var f,g;i(h,{location:n.location,params:((g=(f=n.matches)==null?void 0:f[0])==null?void 0:g.params)??{},errorInfo:d})}:void 0;return s.reduceRight((h,d,f)=>{let g,E=!1,S=null,b=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,S=d.route.errorElement||e3,o&&(l<0&&f===0?(eD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,b=null):l===f&&(E=!0,b=d.route.hydrateFallbackElement||null)));let y=e.concat(s.slice(0,f+1)),_=()=>{let v;return g?v=S:E?v=b:d.route.Component?v=A.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=h,A.createElement(n3,{match:d,routeContext:{outlet:h,matches:y,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?A.createElement(t3,{location:n.location,revalidation:n.revalidation,component:S,error:g,children:_(),routeContext:{outlet:null,matches:y,isDataRoute:!0},onError:c}):_()},null)}function Ib(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function r3(t){let e=A.useContext(Cc);return it(e,Ib(t)),e}function s3(t){let e=A.useContext(bg);return it(e,Ib(t)),e}function a3(t){let e=A.useContext(ki);return it(e,Ib(t)),e}function Ab(t){let e=a3(t),n=e.matches[e.matches.length-1];return it(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function o3(){return Ab("useRouteId")}function l3(){var i;let t=A.useContext(Sb),e=s3("useRouteError"),n=Ab("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function c3(){let{router:t}=r3("useNavigate"),e=Ab("useNavigate"),n=A.useRef(!1);return JP(()=>{n.current=!0}),A.useCallback(async(r,s={})=>{Dn(n.current,XP),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...s}))},[t,e])}var jI={};function eD(t,e,n){!e&&!jI[t]&&(jI[t]=!0,Dn(!1,n))}A.memo(u3);function u3({routes:t,future:e,state:n,unstable_onError:i}){return ZP(t,void 0,n,i,e)}function h3({to:t,replace:e,state:n,relative:i}){it(Nc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=A.useContext(Di);Dn(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=A.useContext(ki),{pathname:a}=vi(),o=Ao(),l=xb(t,Eb(s),a,i==="path"),c=JSON.stringify(l);return A.useEffect(()=>{o(JSON.parse(c),{replace:e,state:n,relative:i})},[o,c,i,e,n]),null}function zI(t){return Xj(t.context)}function pe(t){it(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function d3({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:s=!1}){it(!Nc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=A.useMemo(()=>({basename:a,navigator:r,static:s,future:{}}),[a,r,s]);typeof n=="string"&&(n=Io(n));let{pathname:l="/",search:c="",hash:h="",state:d=null,key:f="default"}=n,g=A.useMemo(()=>{let E=Mr(l,a);return E==null?null:{location:{pathname:E,search:c,hash:h,state:d,key:f},navigationType:i}},[a,l,c,h,d,f,i]);return Dn(g!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:A.createElement(Di.Provider,{value:o},A.createElement(Nd.Provider,{children:e,value:g}))}function f3({children:t,location:e}){return Jj(c0(t),e)}function c0(t,e=[]){let n=[];return A.Children.forEach(t,(i,r)=>{if(!A.isValidElement(i))return;let s=[...e,r];if(i.type===A.Fragment){n.push.apply(n,c0(i.props.children,s));return}it(i.type===pe,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),it(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=c0(i.props.children,s)),n.push(a)}),n}var gm="get",ym="application/x-www-form-urlencoded";function Tg(t){return t!=null&&typeof t.tagName=="string"}function m3(t){return Tg(t)&&t.tagName.toLowerCase()==="button"}function p3(t){return Tg(t)&&t.tagName.toLowerCase()==="form"}function g3(t){return Tg(t)&&t.tagName.toLowerCase()==="input"}function y3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _3(t,e){return t.button===0&&(!e||e==="_self")&&!y3(t)}function u0(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(r=>[n,r]):[[n,i]])},[]))}function v3(t,e){let n=u0(t);return e&&e.forEach((i,r)=>{n.has(r)||e.getAll(r).forEach(s=>{n.append(r,s)})}),n}var Mf=null;function w3(){if(Mf===null)try{new FormData(document.createElement("form"),0),Mf=!1}catch{Mf=!0}return Mf}var b3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function x_(t){return t!=null&&!b3.has(t)?(Dn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ym}"`),null):t}function T3(t,e){let n,i,r,s,a;if(p3(t)){let o=t.getAttribute("action");i=o?Mr(o,e):null,n=t.getAttribute("method")||gm,r=x_(t.getAttribute("enctype"))||ym,s=new FormData(t)}else if(m3(t)||g3(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(i=l?Mr(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||gm,r=x_(t.getAttribute("formenctype"))||x_(o.getAttribute("enctype"))||ym,s=new FormData(o,t),!w3()){let{name:c,type:h,value:d}=t;if(h==="image"){let f=c?`${c}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else c&&s.append(c,d)}}else{if(Tg(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=gm,i=null,r=ym,a=t}return s&&r==="text/plain"&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rb(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function E3(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Mr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function x3(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function S3(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function I3(t,e,n){let i=await Promise.all(t.map(async r=>{let s=e.routes[r.route.id];if(s){let a=await x3(s,n);return a.links?a.links():[]}return[]}));return N3(i.flat(1).filter(S3).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function FI(t,e,n,i,r,s){let a=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,o=(l,c)=>{var h;return n[c].pathname!==l.pathname||((h=n[c].route.path)==null?void 0:h.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?e.filter((l,c)=>{var d;let h=i.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function A3(t,e,{includeHydrateFallback:n}={}){return R3(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function R3(t){return[...new Set(t)]}function C3(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function N3(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let s=JSON.stringify(C3(r));return n.has(s)||(n.add(s),i.push({key:s,link:r})),i},[])}function tD(){let t=A.useContext(Cc);return Rb(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function P3(){let t=A.useContext(bg);return Rb(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Cb=A.createContext(void 0);Cb.displayName="FrameworkContext";function nD(){let t=A.useContext(Cb);return Rb(t,"You must render this element inside a <HydratedRouter> element"),t}function D3(t,e){let n=A.useContext(Cb),[i,r]=A.useState(!1),[s,a]=A.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:d}=e,f=A.useRef(null);A.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let S=y=>{y.forEach(_=>{a(_.isIntersecting)})},b=new IntersectionObserver(S,{threshold:.5});return f.current&&b.observe(f.current),()=>{b.disconnect()}}},[t]),A.useEffect(()=>{if(i){let S=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(S)}}},[i]);let g=()=>{r(!0)},E=()=>{r(!1),a(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:mu(o,g),onBlur:mu(l,E),onMouseEnter:mu(c,g),onMouseLeave:mu(h,E),onTouchStart:mu(d,g)}]:[!1,f,{}]}function mu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function k3({page:t,...e}){let{router:n}=tD(),i=A.useMemo(()=>$P(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?A.createElement(V3,{page:t,matches:i,...e}):null}function O3(t){let{manifest:e,routeModules:n}=nD(),[i,r]=A.useState([]);return A.useEffect(()=>{let s=!1;return I3(t,e,n).then(a=>{s||r(a)}),()=>{s=!0}},[t,e,n]),i}function V3({page:t,matches:e,...n}){let i=vi(),{manifest:r,routeModules:s}=nD(),{basename:a}=tD(),{loaderData:o,matches:l}=P3(),c=A.useMemo(()=>FI(t,e,l,r,i,"data"),[t,e,l,r,i]),h=A.useMemo(()=>FI(t,e,l,r,i,"assets"),[t,e,l,r,i]),d=A.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let E=new Set,S=!1;if(e.forEach(y=>{var v;let _=r.routes[y.route.id];!_||!_.hasLoader||(!c.some(I=>I.route.id===y.route.id)&&y.route.id in o&&((v=s[y.route.id])!=null&&v.shouldRevalidate)||_.hasClientLoader?S=!0:E.add(y.route.id))}),E.size===0)return[];let b=E3(t,a,"data");return S&&E.size>0&&b.searchParams.set("_routes",e.filter(y=>E.has(y.route.id)).map(y=>y.route.id).join(",")),[b.pathname+b.search]},[a,o,i,r,c,e,t,s]),f=A.useMemo(()=>A3(h,r),[h,r]),g=O3(h);return A.createElement(A.Fragment,null,d.map(E=>A.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...n})),f.map(E=>A.createElement("link",{key:E,rel:"modulepreload",href:E,...n})),g.map(({key:E,link:S})=>A.createElement("link",{key:E,nonce:n.nonce,...S})))}function M3(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var iD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{iD&&(window.__reactRouterVersion="7.9.6")}catch{}function L3({basename:t,children:e,window:n}){let i=A.useRef();i.current==null&&(i.current=wj({window:n,v5Compat:!0}));let r=i.current,[s,a]=A.useState({action:r.action,location:r.location}),o=A.useCallback(l=>{A.startTransition(()=>a(l))},[a]);return A.useLayoutEffect(()=>r.listen(o),[r,o]),A.createElement(d3,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:r})}var rD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ii=A.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:h,viewTransition:d,...f},g){let{basename:E}=A.useContext(Di),S=typeof c=="string"&&rD.test(c),b,y=!1;if(typeof c=="string"&&S&&(b=c,iD))try{let R=new URL(window.location.href),C=c.startsWith("//")?new URL(R.protocol+c):new URL(c),P=Mr(C.pathname,E);C.origin===R.origin&&P!=null?c=P+C.search+C.hash:y=!0}catch{Dn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=Wj(c,{relative:r}),[v,I,k]=D3(i,f),O=z3(c,{replace:a,state:o,target:l,preventScrollReset:h,relative:r,viewTransition:d});function T(R){e&&e(R),R.defaultPrevented||O(R)}let x=A.createElement("a",{...f,...k,href:b||_,onClick:y||s?e:T,ref:M3(g,I),target:l,"data-discover":!S&&n==="render"?"true":void 0});return v&&!S?A.createElement(A.Fragment,null,x,A.createElement(k3,{page:_})):x});ii.displayName="Link";var Ei=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:s,to:a,viewTransition:o,children:l,...c},h){let d=Pd(a,{relative:c.relative}),f=vi(),g=A.useContext(bg),{navigator:E,basename:S}=A.useContext(Di),b=g!=null&&$3(d)&&o===!0,y=E.encodeLocation?E.encodeLocation(d).pathname:d.pathname,_=f.pathname,v=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(_=_.toLowerCase(),v=v?v.toLowerCase():null,y=y.toLowerCase()),v&&S&&(v=Mr(v,S)||v);const I=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let k=_===y||!r&&_.startsWith(y)&&_.charAt(I)==="/",O=v!=null&&(v===y||!r&&v.startsWith(y)&&v.charAt(y.length)==="/"),T={isActive:k,isPending:O,isTransitioning:b},x=k?e:void 0,R;typeof i=="function"?R=i(T):R=[i,k?"active":null,O?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let C=typeof s=="function"?s(T):s;return A.createElement(ii,{...c,"aria-current":x,className:R,ref:h,style:C,to:a,viewTransition:o},typeof l=="function"?l(T):l)});Ei.displayName="NavLink";var U3=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:s,method:a=gm,action:o,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:d,...f},g)=>{let E=H3(),S=G3(o,{relative:c}),b=a.toLowerCase()==="get"?"get":"post",y=typeof o=="string"&&rD.test(o),_=v=>{if(l&&l(v),v.defaultPrevented)return;v.preventDefault();let I=v.nativeEvent.submitter,k=(I==null?void 0:I.getAttribute("formmethod"))||a;E(I||v.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:r,state:s,relative:c,preventScrollReset:h,viewTransition:d})};return A.createElement("form",{ref:g,method:b,action:S,onSubmit:i?l:_,...f,"data-discover":!y&&t==="render"?"true":void 0})});U3.displayName="Form";function j3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sD(t){let e=A.useContext(Cc);return it(e,j3(t)),e}function z3(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:s,viewTransition:a}={}){let o=Ao(),l=vi(),c=Pd(t,{relative:s});return A.useCallback(h=>{if(_3(h,e)){h.preventDefault();let d=n!==void 0?n:Bh(l)===Bh(c);o(t,{replace:d,state:i,preventScrollReset:r,relative:s,viewTransition:a})}},[l,o,c,n,i,e,t,r,s,a])}function F3(t){Dn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=A.useRef(u0(t)),n=A.useRef(!1),i=vi(),r=A.useMemo(()=>v3(i.search,n.current?null:e.current),[i.search]),s=Ao(),a=A.useCallback((o,l)=>{const c=u0(typeof o=="function"?o(new URLSearchParams(r)):o);n.current=!0,s("?"+c,l)},[s,r]);return[r,a]}var B3=0,q3=()=>`__${String(++B3)}__`;function H3(){let{router:t}=sD("useSubmit"),{basename:e}=A.useContext(Di),n=o3();return A.useCallback(async(i,r={})=>{let{action:s,method:a,encType:o,formData:l,body:c}=T3(i,e);if(r.navigate===!1){let h=r.fetcherKey||q3();await t.fetch(h,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,flushSync:r.flushSync})}else await t.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function G3(t,{relative:e}={}){let{basename:n}=A.useContext(Di),i=A.useContext(ki);it(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...Pd(t||".",{relative:e})},a=vi();if(t==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(h=>h==="")){o.delete("index"),l.filter(d=>d).forEach(d=>o.append("index",d));let h=o.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Ir([n,s.pathname])),Bh(s)}function $3(t,{relative:e}={}){let n=A.useContext(YP);it(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=sD("useViewTransitionState"),r=Pd(t,{relative:e});if(!n.isTransitioning)return!1;let s=Mr(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Mr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return pp(r.pathname,a)!=null||pp(r.pathname,s)!=null}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),W3=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),BI=t=>{const e=W3(t);return e.charAt(0).toUpperCase()+e.slice(1)},aD=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),Q3=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Y3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:a,...o},l)=>A.createElement("svg",{ref:l,...Y3,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:aD("lucide",r),...!s&&!Q3(o)&&{"aria-hidden":"true"},...o},[...a.map(([c,h])=>A.createElement(c,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=(t,e)=>{const n=A.forwardRef(({className:i,...r},s)=>A.createElement(X3,{ref:s,iconNode:e,className:aD(`lucide-${K3(BI(t))}`,`lucide-${t}`,i),...r}));return n.displayName=BI(t),n};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],oD=me("arrow-left",J3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],e9=me("arrow-right",Z3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],qI=me("check",t9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],i9=me("chevron-down",n9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ih=me("circle-alert",r9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],lD=me("circle-check-big",s9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],o9=me("circle-check",a9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],c9=me("circle-x",l9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],h9=me("external-link",u9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],cD=me("eye-off",d9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],uD=me("eye",f9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],p9=me("facebook",m9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],y9=me("gift",g9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],hD=me("info",_9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],w9=me("instagram",v9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],hi=me("loader-circle",b9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],h0=me("lock",T9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],HI=me("log-out",E9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],qh=me("mail",x9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],I9=me("map-pin",S9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],R9=me("menu",A9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],GI=me("message-circle",C9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],P9=me("minimize-2",N9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=[["path",{d:"M5 12h14",key:"1ays0h"}]],d0=me("minus",D9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Nb=me("phone",k9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],dD=me("plus",O9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],M9=me("refresh-cw",V9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],U9=me("send",L9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],z9=me("share-2",j9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],B9=me("shield-alert",F9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],H9=me("shield-check",q9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Lf=me("shield",G9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],K9=me("shopping-cart",$9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W9=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Q9=me("trash-2",W9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],fD=me("trending-up",Y9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X9=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],J9=me("triangle-alert",X9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z9=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],f0=me("user",Z9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$s=me("x",ez);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],gp=me("zap",tz),nz=()=>{};var $I={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},iz=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],o=t[n++],l=((r&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},pD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,o=a?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|o>>4;let f=(o&15)<<2|c>>6,g=c&63;l||(g=64,a||(f=64)),i.push(n[h],n[d],n[f],n[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iz(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||o==null||c==null||d==null)throw new rz;const f=s<<2|o>>4;if(i.push(f),c!==64){const g=o<<4&240|c>>2;if(i.push(g),d!==64){const E=c<<6&192|d;i.push(E)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rz extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sz=function(t){const e=mD(t);return pD.encodeByteArray(e,!0)},yp=function(t){return sz(t).replace(/\./g,"")},Eg=function(t){try{return pD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _p(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!az(n)||(t[n]=_p(t[n],e[n]));return t}function az(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oz=()=>Pb().__FIREBASE_DEFAULTS__,lz=()=>{if(typeof process>"u"||typeof $I>"u")return;const t=$I.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cz=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Eg(t[1]);return e&&JSON.parse(e)},Db=()=>{try{return nz()||oz()||lz()||cz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kb=()=>{var t;return(t=Db())==null?void 0:t.config},gD=t=>{var e;return(e=Db())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ob(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[yp(JSON.stringify(n)),yp(JSON.stringify(a)),""].join(".")}const rh={};function hz(){const t={prod:[],emulator:[]};for(const e of Object.keys(rh))rh[e]?t.emulator.push(e):t.prod.push(e);return t}function dz(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let KI=!1;function Vb(t,e){if(typeof window>"u"||typeof document>"u"||!lr(window.location.host)||rh[t]===e||rh[t]||KI)return;rh[t]=e;function n(f){return`__firebase__banner__${f}`}const i="__firebase__banner",s=hz().prod.length>0;function a(){const f=document.getElementById(i);f&&f.remove()}function o(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{KI=!0,a()},f}function h(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=dz(i),g=n("text"),E=document.getElementById(g)||document.createElement("span"),S=n("learnmore"),b=document.getElementById(S)||document.createElement("a"),y=n("preprendIcon"),_=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const v=f.element;o(v),h(b,S);const I=c();l(_,y),v.append(_,E,b,I),document.body.appendChild(v)}s?(E.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _D(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function xg(){var e;const t=(e=Db())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fz(){return typeof window<"u"||vD()}function vD(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function wD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Mb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Sg(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bD(){const t=Se();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function TD(){return!xg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ED(){return!xg()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Hh(){try{return typeof indexedDB=="object"}catch{return!1}}function mz(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pz="FirebaseError";class Ft extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=pz,Object.setPrototypeOf(this,Ft.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cr.prototype.create)}}class cr{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?gz(s,i):"Error",o=`${this.serviceName}: ${a} (${r}).`;return new Ft(r,o,i)}}function gz(t,e){return t.replace(yz,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const yz=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _z(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ks(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(QI(s)&&QI(a)){if(!Ks(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function QI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function yl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Pu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Lb(t,e){const n=new vz(t,e);return n.subscribe.bind(n)}class vz{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");wz(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=S_),r.error===void 0&&(r.error=S_),r.complete===void 0&&(r.complete=S_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wz(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function S_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t){return t&&t._delegate?t._delegate:t}class kn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new uz;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ez(e))try{this.getOrInitializeService({instanceIdentifier:Na})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Na){return this.instances.has(e)}getOptions(e=Na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);i===o&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Tz(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Na){return this.component?this.component.multipleInstances?e:Na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Tz(t){return t===Na?void 0:t}function Ez(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bz(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=[];var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const SD={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},xz=fe.INFO,Sz={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},Iz=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=Sz[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dd{constructor(e){this.name=e,this._logLevel=xz,this._logHandler=Iz,this._userLogHandler=null,Ub.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}function Az(t){Ub.forEach(e=>{e.setLogLevel(t)})}function Rz(t,e){for(const n of Ub){let i=null;e&&e.level&&(i=SD[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,s,...a)=>{const o=a.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(i??r.logLevel)&&t({level:fe[s].toLowerCase(),message:o,args:a,type:r.name})}}}const Cz=(t,e)=>e.some(n=>t instanceof n);let YI,XI;function Nz(){return YI||(YI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Pz(){return XI||(XI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ID=new WeakMap,m0=new WeakMap,AD=new WeakMap,I_=new WeakMap,jb=new WeakMap;function Dz(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Ls(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&ID.set(n,t)}).catch(()=>{}),jb.set(e,t),e}function kz(t){if(m0.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});m0.set(t,e)}let p0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return m0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ls(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Oz(t){p0=t(p0)}function Vz(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(A_(this),e,...n);return AD.set(i,e.sort?e.sort():[e]),Ls(i)}:Pz().includes(t)?function(...e){return t.apply(A_(this),e),Ls(ID.get(this))}:function(...e){return Ls(t.apply(A_(this),e))}}function Mz(t){return typeof t=="function"?Vz(t):(t instanceof IDBTransaction&&kz(t),Cz(t,Nz())?new Proxy(t,p0):t)}function Ls(t){if(t instanceof IDBRequest)return Dz(t);if(I_.has(t))return I_.get(t);const e=Mz(t);return e!==t&&(I_.set(t,e),jb.set(e,t)),e}const A_=t=>jb.get(t);function Lz(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),o=Ls(a);return i&&a.addEventListener("upgradeneeded",l=>{i(Ls(a.result),l.oldVersion,l.newVersion,Ls(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const Uz=["get","getKey","getAll","getAllKeys","count"],jz=["put","add","delete","clear"],R_=new Map;function JI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(R_.get(e))return R_.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=jz.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Uz.includes(n)))return;const s=async function(a,...o){const l=this.transaction(a,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),r&&l.done]))[0]};return R_.set(e,s),s}Oz(t=>({...t,get:(e,n,i)=>JI(e,n)||t.get(e,n,i),has:(e,n)=>!!JI(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Fz(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Fz(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vp="@firebase/app",g0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new Dd("@firebase/app"),Bz="@firebase/app-compat",qz="@firebase/analytics-compat",Hz="@firebase/analytics",Gz="@firebase/app-check-compat",$z="@firebase/app-check",Kz="@firebase/auth",Wz="@firebase/auth-compat",Qz="@firebase/database",Yz="@firebase/data-connect",Xz="@firebase/database-compat",Jz="@firebase/functions",Zz="@firebase/functions-compat",eF="@firebase/installations",tF="@firebase/installations-compat",nF="@firebase/messaging",iF="@firebase/messaging-compat",rF="@firebase/performance",sF="@firebase/performance-compat",aF="@firebase/remote-config",oF="@firebase/remote-config-compat",lF="@firebase/storage",cF="@firebase/storage-compat",uF="@firebase/firestore",hF="@firebase/ai",dF="@firebase/firestore-compat",fF="firebase",mF="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="[DEFAULT]",pF={[vp]:"fire-core",[Bz]:"fire-core-compat",[Hz]:"fire-analytics",[qz]:"fire-analytics-compat",[$z]:"fire-app-check",[Gz]:"fire-app-check-compat",[Kz]:"fire-auth",[Wz]:"fire-auth-compat",[Qz]:"fire-rtdb",[Yz]:"fire-data-connect",[Xz]:"fire-rtdb-compat",[Jz]:"fire-fn",[Zz]:"fire-fn-compat",[eF]:"fire-iid",[tF]:"fire-iid-compat",[nF]:"fire-fcm",[iF]:"fire-fcm-compat",[rF]:"fire-perf",[sF]:"fire-perf-compat",[aF]:"fire-rc",[oF]:"fire-rc-compat",[lF]:"fire-gcs",[cF]:"fire-gcs-compat",[uF]:"fire-fst",[dF]:"fire-fst-compat",[hF]:"fire-vertex","fire-js":"fire-js",[fF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=new Map,Ql=new Map,Yl=new Map;function Gh(t,e){try{t.container.addComponent(e)}catch(n){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function RD(t,e){t.container.addOrOverwriteComponent(e)}function Ci(t){const e=t.name;if(Yl.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;Yl.set(e,t);for(const n of Qs.values())Gh(n,t);for(const n of Ql.values())Gh(n,t);return!0}function CD(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function gF(t,e,n=Ws){CD(t,e).clearInstance(n)}function zb(t){return t.options!==void 0}function ND(t){return zb(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function Ae(t){return t==null?!1:t.settings!==void 0}function yF(){Yl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qn=new cr("app","Firebase",_F);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PD=class{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new kn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t,e){const n=Eg(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const r=JSON.parse(n).exp*1e3,s=new Date().getTime();r-s<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class vF extends PD{constructor(e,n,i,r){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,a={name:i,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,a,r);else{const o=e;super(o.options,a,r)}this._serverConfig={automaticDataCollectionEnabled:s,...n},this._serverConfig.authIdToken&&ZI(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&ZI(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,_n(vp,g0,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Bb(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Qn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=mF;function Fb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Ws,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Qn.create("bad-app-name",{appName:String(r)});if(n||(n=kb()),!n)throw Qn.create("no-options");const s=Qs.get(r);if(s){if(Ks(n,s.options)&&Ks(i,s.config))return s;throw Qn.create("duplicate-app",{appName:r})}const a=new xD(r);for(const l of Yl.values())a.addComponent(l);const o=new PD(n,i,a);return Qs.set(r,o),o}function wF(t,e={}){if(fz()&&!vD())throw Qn.create("invalid-server-app-environment");let n,i=e||{};if(t&&(zb(t)?n=t.options:ND(t)?i=t:n=t),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),n||(n=kb()),!n)throw Qn.create("no-options");const r={...i,...n};r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=h=>[...h].reduce((d,f)=>Math.imul(31,d)+f.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Qn.create("finalization-registry-not-supported",{});const a=""+s(JSON.stringify(r)),o=Ql.get(a);if(o)return o.incRefCount(i.releaseOnDeref),o;const l=new xD(a);for(const h of Yl.values())l.addComponent(h);const c=new vF(n,i,a,l);return Ql.set(a,c),c}function bF(t=Ws){const e=Qs.get(t);if(!e&&t===Ws&&kb())return Fb();if(!e)throw Qn.create("no-app",{appName:t});return e}function TF(){return Array.from(Qs.values())}async function Bb(t){let e=!1;const n=t.name;Qs.has(n)?(e=!0,Qs.delete(n)):Ql.has(n)&&t.decRefCount()<=0&&(Ql.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(i=>i.delete())),t.isDeleted=!0)}function _n(t,e,n){let i=pF[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=e.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(a.join(" "));return}Ci(new kn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function DD(t,e){if(t!==null&&typeof t!="function")throw Qn.create("invalid-log-argument");Rz(t,e)}function kD(t){Az(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF="firebase-heartbeat-database",xF=1,$h="firebase-heartbeat-store";let C_=null;function OD(){return C_||(C_=Lz(EF,xF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($h)}catch(n){console.warn(n)}}}}).catch(t=>{throw Qn.create("idb-open",{originalErrorMessage:t.message})})),C_}async function SF(t){try{const n=(await OD()).transaction($h),i=await n.objectStore($h).get(VD(t));return await n.done,i}catch(e){if(e instanceof Ft)Lr.warn(e.message);else{const n=Qn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Lr.warn(n.message)}}}async function e1(t,e){try{const i=(await OD()).transaction($h,"readwrite");await i.objectStore($h).put(e,VD(t)),await i.done}catch(n){if(n instanceof Ft)Lr.warn(n.message);else{const i=Qn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Lr.warn(i.message)}}}function VD(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF=1024,AF=30;class RF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NF(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=t1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>AF){const a=PF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Lr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=t1(),{heartbeatsToSend:i,unsentEntries:r}=CF(this._heartbeatsCache.heartbeats),s=yp(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Lr.warn(n),""}}}function t1(){return new Date().toISOString().substring(0,10)}function CF(t,e=IF){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),n1(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),n1(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class NF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hh()?mz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await SF(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return e1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return e1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function n1(t){return yp(JSON.stringify({version:2,heartbeats:t})).length}function PF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DF(t){Ci(new kn("platform-logger",e=>new zz(e),"PRIVATE")),Ci(new kn("heartbeat",e=>new RF(e),"PRIVATE")),_n(vp,g0,t),_n(vp,g0,"esm2020"),_n("fire-js","")}DF("");const kF=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Ft,SDK_VERSION:wi,_DEFAULT_ENTRY_NAME:Ws,_addComponent:Gh,_addOrOverwriteComponent:RD,_apps:Qs,_clearComponents:yF,_components:Yl,_getProvider:CD,_isFirebaseApp:zb,_isFirebaseServerApp:Ae,_isFirebaseServerAppSettings:ND,_registerComponent:Ci,_removeServiceInstance:gF,_serverApps:Ql,deleteApp:Bb,getApp:bF,getApps:TF,initializeApp:Fb,initializeServerApp:wF,onLog:DD,registerVersion:_n,setLogLevel:kD},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e,n){this._delegate=e,this.firebase=n,Gh(e,new kn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Bb(this._delegate)))}_getService(e,n=Ws){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())==null?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Ws){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Gh(this._delegate,e)}_addOrOverwriteComponent(e){RD(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},i1=new cr("app-compat","Firebase",VF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(t){const e={},n={__esModule:!0,initializeApp:s,app:r,registerVersion:_n,setLogLevel:kD,onLog:DD,apps:null,SDK_VERSION:wi,INTERNAL:{registerComponent:o,removeApp:i,useAsService:l,modularAPIs:kF}};n.default=n,Object.defineProperty(n,"apps",{get:a});function i(c){delete e[c]}function r(c){if(c=c||Ws,!WI(e,c))throw i1.create("no-app",{appName:c});return e[c]}r.App=t;function s(c,h={}){const d=Fb(c,h);if(WI(e,d.name))return e[d.name];const f=new t(d,n);return e[d.name]=f,f}function a(){return Object.keys(e).map(c=>e[c])}function o(c){const h=c.name,d=h.replace("-compat","");if(Ci(c)&&c.type==="PUBLIC"){const f=(g=r())=>{if(typeof g[d]!="function")throw i1.create("invalid-app-argument",{appName:h});return g[d]()};c.serviceProps!==void 0&&_p(f,c.serviceProps),n[d]=f,t.prototype[d]=function(...g){return this._getService.bind(this,h).apply(this,c.multipleInstances?g:[])}}return c.type==="PUBLIC"?n[d]:null}function l(c,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(){const t=MF(OF);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:MD,extendNamespace:e,createSubscribe:Lb,ErrorFactory:cr,deepExtend:_p};function e(n){_p(t,n)}return t}const LF=MD();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=new Dd("@firebase/app-compat"),UF="@firebase/app-compat",jF="0.5.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(t){_n(UF,jF,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=Pb();if(t.firebase!==void 0){r1.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&r1.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const jt=LF;zF();var FF="firebase",BF="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jt.registerVersion(FF,BF,"app-compat");const pu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Bo={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function LD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HF=qF,GF=LD,UD=new cr("auth","Firebase",LD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp=new Dd("@firebase/auth");function $F(t,...e){wp.logLevel<=fe.WARN&&wp.warn(`Auth (${wi}): ${t}`,...e)}function _m(t,...e){wp.logLevel<=fe.ERROR&&wp.error(`Auth (${wi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(t,...e){throw Hb(t,...e)}function Pt(t,...e){return Hb(t,...e)}function qb(t,e,n){const i={...GF(),[e]:n};return new cr("auth","Firebase",i).create(e,{appName:t.name})}function Bt(t){return qb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pc(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Jt(t,"argument-error"),qb(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Hb(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return UD.create(t,...e)}function G(t,e,...n){if(!t)throw Hb(e,...n)}function $i(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _m(e),new Error(e)}function Ni(t,e){t||$i(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Gb(){return s1()==="http:"||s1()==="https:"}function s1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Gb()||Mb()||"connection"in navigator)?navigator.onLine:!0}function WF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kd=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ni(n>e,"Short delay should be less than long delay!"),this.isMobile=_D()||Sg()}get(){return KF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(t,e){Ni(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jD=class{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],XF=new kd(3e4,6e4);function ft(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function mt(t,e,n,i,r={}){return zD(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const o=la({key:t.config.apiKey,...a}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return wD()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&lr(t.emulatorConfig.host)&&(c.credentials="include"),jD.fetch()(await FD(t,t.config.apiHost,n,o),c)})}async function zD(t,e,n){t._canInitEmulator=!1;const i={...QF,...e};try{const r=new ZF(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Du(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Du(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Du(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Du(t,"user-disabled",a);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw qb(t,h,c);Jt(t,h)}}catch(r){if(r instanceof Ft)throw r;Jt(t,"network-request-failed",{message:String(r)})}}async function Hr(t,e,n,i,r={}){const s=await mt(t,e,n,i,r);return"mfaPendingCredential"in s&&Jt(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function FD(t,e,n,i){const r=`${e}${n}?${i}`,s=t,a=s.config.emulator?$b(t.config,r):`${t.config.apiScheme}://${r}`;return YF.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function JF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}let ZF=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Pt(this.auth,"network-request-failed")),XF.get())})}};function Du(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Pt(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(t){return t!==void 0&&t.getResponse!==void 0}function o1(t){return t!==void 0&&t.enterprise!==void 0}class BD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return JF(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eB(t){return(await mt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function qD(t,e){return mt(t,"GET","/v2/recaptchaConfig",ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tB(t,e){return mt(t,"POST","/v1/accounts:delete",e)}async function nB(t,e){return mt(t,"POST","/v1/accounts:update",e)}async function bp(t,e){return mt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iB(t,e=!1){const n=J(t),i=await n.getIdToken(e),r=Ig(i);G(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:sh(N_(r.auth_time)),issuedAtTime:sh(N_(r.iat)),expirationTime:sh(N_(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function N_(t){return Number(t)*1e3}function Ig(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return _m("JWT malformed, contained fewer than 3 sections"),null;try{const r=Eg(n);return r?JSON.parse(r):(_m("Failed to decode base64 JWT payload"),null)}catch(r){return _m("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function l1(t){const e=Ig(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ur(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ft&&rB(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function rB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sB=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y0=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sh(this.lastLoginAt),this.creationTime=sh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wh(t){var d;const e=t.auth,n=await t.getIdToken(),i=await Ur(t,bp(e,{idToken:n}));G(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const s=(d=r.providerUserInfo)!=null&&d.length?HD(r.providerUserInfo):[],a=oB(t.providerData,s),o=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),c=o?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new y0(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function aB(t){const e=J(t);await Wh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oB(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function HD(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lB(t,e){const n=await zD(t,{},async()=>{const i=la({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=await FD(t,r,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:i};return t.emulatorConfig&&lr(t.emulatorConfig.host)&&(l.credentials="include"),jD.fetch()(a,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cB(t,e){return mt(t,"POST","/v2/accounts:revokeToken",ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P_=class _0{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):l1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){G(e.length!==0,"internal-error");const n=l1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await lB(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new _0;return i&&(G(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(G(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(G(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _0,this.toJSON())}_performRefresh(){return $i("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}let _l=class ku{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new sB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new y0(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Ur(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return iB(this,e)}reload(){return aB(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ku({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Wh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ae(this.auth.app))return Promise.reject(Bt(this.auth));const e=await this.getIdToken();return await Ur(this,tB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:g,providerData:E,stsTokenManager:S}=n;G(d&&S,e,"internal-error");const b=P_.fromJSON(this.name,S);G(typeof d=="string",e,"internal-error"),ss(i,e.name),ss(r,e.name),G(typeof f=="boolean",e,"internal-error"),G(typeof g=="boolean",e,"internal-error"),ss(s,e.name),ss(a,e.name),ss(o,e.name),ss(l,e.name),ss(c,e.name),ss(h,e.name);const y=new ku({uid:d,auth:e,email:r,emailVerified:f,displayName:i,isAnonymous:g,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:b,createdAt:c,lastLoginAt:h});return E&&Array.isArray(E)&&(y.providerData=E.map(_=>({..._}))),l&&(y._redirectEventId=l),y}static async _fromIdTokenResponse(e,n,i=!1){const r=new P_;r.updateFromServerResponse(n);const s=new ku({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Wh(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];G(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?HD(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),o=new P_;o.updateFromIdToken(i);const l=new ku({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new y0(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=new Map;function qn(t){Ni(t instanceof Function,"Expected a class definition");let e=c1.get(t);return e?(Ni(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,c1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GD=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}};GD.type="NONE";const Xl=GD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t,e,n){return`firebase:${t}:${e}:${n}`}let u1=class vm{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Xa(this.userKey,r.apiKey,s),this.fullPersistenceKey=Xa("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await bp(this.auth,{idToken:e}).catch(()=>{});return n?_l._fromGetAccountInfoResponse(this.auth,n,e):null}return _l._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new vm(qn(Xl),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||qn(Xl);const a=Xa(i,e.config.apiKey,e.name);let o=null;for(const c of n)try{const h=await c._get(a);if(h){let d;if(typeof h=="string"){const f=await bp(e,{idToken:h}).catch(()=>{});if(!f)break;d=await _l._fromGetAccountInfoResponse(e,f,h)}else d=_l._fromJSON(e,h);c!==s&&(o=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new vm(s,e,i):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new vm(s,e,i))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($D(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YD(e))return"Blackberry";if(XD(e))return"Webos";if(KD(e))return"Safari";if((e.includes("chrome/")||WD(e))&&!e.includes("edge/"))return"Chrome";if(Od(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function $D(t=Se()){return/firefox\//i.test(t)}function KD(t=Se()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WD(t=Se()){return/crios\//i.test(t)}function QD(t=Se()){return/iemobile/i.test(t)}function Od(t=Se()){return/android/i.test(t)}function YD(t=Se()){return/blackberry/i.test(t)}function XD(t=Se()){return/webos/i.test(t)}function Vd(t=Se()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uB(t=Se()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function hB(t=Se()){var e;return Vd(t)&&!!((e=window.navigator)!=null&&e.standalone)}function dB(){return bD()&&document.documentMode===10}function JD(t=Se()){return Vd(t)||Od(t)||XD(t)||YD(t)||/windows phone/i.test(t)||QD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(t,e=[]){let n;switch(t){case"Browser":n=h1(Se());break;case"Worker":n=`${h1(Se())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wi}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fB=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mB(t,e={}){return mt(t,"GET","/v2/passwordPolicy",ft(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pB=6;let gB=class{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??pB,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yB=class{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new d1(this),this.idTokenSubscription=new d1(this),this.beforeStateQueue=new fB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qn(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await u1.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bp(this,{idToken:e}),i=await _l._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Ae(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ae(this.app))return Promise.reject(Bt(this));const n=e?J(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ae(this.app)?Promise.reject(Bt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ae(this.app)?Promise.reject(Bt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mB(this),n=new gB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cr("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await cB(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qn(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=await u1.create(this,[qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(Ae(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&$F(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}};function st(t){return J(t)}let d1=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Lb(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Md={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _B(t){Md=t}function Kb(t){return Md.loadJS(t)}function vB(){return Md.recaptchaV2Script}function wB(){return Md.recaptchaEnterpriseScript}function bB(){return Md.gapiScript}function ek(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB=500,EB=6e4,Uf=1e12;class xB{constructor(e){this.auth=e,this.counter=Uf,this._widgets=new Map}render(e,n){const i=this.counter;return this._widgets.set(i,new AB(e,this.auth.name,n||{})),this.counter++,i}reset(e){var i;const n=e||Uf;(i=this._widgets.get(n))==null||i.delete(),this._widgets.delete(n)}getResponse(e){var i;const n=e||Uf;return((i=this._widgets.get(n))==null?void 0:i.getResponse())||""}async execute(e){var i;const n=e||Uf;return(i=this._widgets.get(n))==null||i.execute(),""}}class SB{constructor(){this.enterprise=new IB}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class IB{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class AB{constructor(e,n,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;G(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=RB(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},EB)},TB))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function RB(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const CB="recaptcha-enterprise",ah="NO_RECAPTCHA";class tk{constructor(e){this.type=CB,this.auth=st(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{qD(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new BD(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function r(s,a,o){const l=window.grecaptcha;o1(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{a(c)}).catch(()=>{a(ah)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new SB().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{i(this.auth).then(o=>{if(!n&&o1(window.grecaptcha))r(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=wB();l.length!==0&&(l+=o),Kb(l).then(()=>{r(o,s,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function gu(t,e,n,i=!1,r=!1){const s=new tk(t);let a;if(r)a=ah;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,c=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return i?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Us(t,e,n,i,r){var s,a;if(r==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await gu(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await gu(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(o)});else if(r==="PHONE_PROVIDER")if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("PHONE_PROVIDER")){const o=await gu(t,e,n);return i(t,o).catch(async l=>{var c;if(((c=t._getRecaptchaConfig())==null?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await gu(t,e,n,!1,!0);return i(t,h)}return Promise.reject(l)})}else{const o=await gu(t,e,n,!1,!0);return i(t,o)}else return Promise.reject(r+" provider is not supported.")}async function NB(t){const e=st(t),n=await qD(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new BD(n);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new tk(e).verify()}function PB(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(qn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function DB(t,e,n){const i=st(t);G(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),s=nk(e),{host:a,port:o}=kB(e),l=o===null?"":`:${o}`,c={url:`${s}//${a}${l}/`},h=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){G(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),G(Ks(c,i.config.emulator)&&Ks(h,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,lr(a)?(Ob(`${s}//${a}${l}`),Vb("Auth",!0)):r||OB()}function nk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kB(t){const e=nk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:f1(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:f1(a)}}}function f1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function OB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $i("not implemented")}_getIdTokenResponse(e){return $i("not implemented")}_linkToIdToken(e,n){return $i("not implemented")}_getReauthenticationResolver(e){return $i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(t,e){return mt(t,"POST","/v1/accounts:resetPassword",ft(t,e))}async function VB(t,e){return mt(t,"POST","/v1/accounts:update",e)}async function MB(t,e){return mt(t,"POST","/v1/accounts:signUp",e)}async function LB(t,e){return mt(t,"POST","/v1/accounts:update",ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UB(t,e){return Hr(t,"POST","/v1/accounts:signInWithPassword",ft(t,e))}async function Ag(t,e){return mt(t,"POST","/v1/accounts:sendOobCode",ft(t,e))}async function jB(t,e){return Ag(t,e)}async function zB(t,e){return Ag(t,e)}async function FB(t,e){return Ag(t,e)}async function BB(t,e){return Ag(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qB(t,e){return Hr(t,"POST","/v1/accounts:signInWithEmailLink",ft(t,e))}async function HB(t,e){return Hr(t,"POST","/v1/accounts:signInWithEmailLink",ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh extends Dc{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Qh(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Qh(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Us(e,n,"signInWithPassword",UB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return qB(e,{email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Us(e,i,"signUpPassword",MB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return HB(e,{idToken:n,email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ar(t,e){return Hr(t,"POST","/v1/accounts:signInWithIdp",ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB="http://localhost";class ir extends Dc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ir(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new ir(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ar(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ar(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ar(e,n)}buildRequest(){const e={requestUri:GB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=la(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(t,e){return mt(t,"POST","/v1/accounts:sendVerificationCode",ft(t,e))}async function $B(t,e){return Hr(t,"POST","/v1/accounts:signInWithPhoneNumber",ft(t,e))}async function KB(t,e){const n=await Hr(t,"POST","/v1/accounts:signInWithPhoneNumber",ft(t,e));if(n.temporaryProof)throw Du(t,"account-exists-with-different-credential",n);return n}const WB={USER_NOT_FOUND:"user-not-found"};async function QB(t,e){const n={...e,operation:"REAUTH"};return Hr(t,"POST","/v1/accounts:signInWithPhoneNumber",ft(t,n),WB)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends Dc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ja({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ja({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return $B(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return KB(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return QB(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s}=e;return!i&&!n&&!r&&!s?null:new Ja({verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XB(t){const e=yl(Pu(t)).link,n=e?yl(Pu(e)).deep_link_id:null,i=yl(Pu(t)).deep_link_id;return(i?yl(Pu(i)).link:null)||i||n||e||t}class Rg{constructor(e){const n=yl(Pu(e)),i=n.apiKey??null,r=n.oobCode??null,s=YB(n.mode??null);G(i&&r&&s,"argument-error"),this.apiKey=i,this.operation=s,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=XB(e);try{return new Rg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.providerId=ca.PROVIDER_ID}static credential(e,n){return Qh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Rg.parseLink(n);return G(i,"argument-error"),Qh._fromEmailAndCode(e,i.code,i.tenantId)}}ca.PROVIDER_ID="password";ca.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ca.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc extends Gr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Pl extends kc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return G("providerId"in n&&"signInMethod"in n,"argument-error"),ir._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return G(e.idToken||e.accessToken,"argument-error"),ir._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Pl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Pl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:s,nonce:a,providerId:o}=e;if(!i&&!r&&!n&&!s||!o)return null;try{return new Pl(o)._credential({idToken:n,accessToken:i,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends kc{constructor(){super("facebook.com")}static credential(e){return ir._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ui.credential(e.oauthAccessToken)}catch{return null}}}Ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends kc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ir._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ji.credential(n,i)}catch{return null}}}ji.GOOGLE_SIGN_IN_METHOD="google.com";ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends kc{constructor(){super("github.com")}static credential(e){return ir._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zi.credential(e.oauthAccessToken)}catch{return null}}}zi.GITHUB_SIGN_IN_METHOD="github.com";zi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JB="http://localhost";class Jl extends Dc{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Ar(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ar(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ar(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,pendingToken:s}=n;return!i||!r||!s||i!==r?null:new Jl(i,s)}static _create(e,n){return new Jl(e,n)}buildRequest(){return{requestUri:JB,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZB="saml.";class Tp extends Gr{constructor(e){G(e.startsWith(ZB),"argument-error"),super(e)}static credentialFromResult(e){return Tp.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Tp.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Jl.fromJSON(e);return G(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:i}=e;if(!n||!i)return null;try{return Jl._create(i,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends kc{constructor(){super("twitter.com")}static credential(e,n){return ir._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Fi.credential(n,i)}catch{return null}}}Fi.TWITTER_SIGN_IN_METHOD="twitter.com";Fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk(t,e){return Hr(t,"POST","/v1/accounts:signUp",ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await _l._fromIdTokenResponse(e,i,r),a=p1(i);return new _i({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=p1(i);return new _i({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function p1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e8(t){var r;if(Ae(t.app))return Promise.reject(Bt(t));const e=st(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new _i({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await rk(e,{returnSecureToken:!0}),i=await _i._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep extends Ft{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Ep.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Ep(e,n,i,r)}}function sk(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ep._fromErrorAndOperation(t,s,e,i):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t8(t,e){const n=J(t);await Cg(!0,n,e);const{providerUserInfo:i}=await nB(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),r=ak(i||[]);return n.providerData=n.providerData.filter(s=>r.has(s.providerId)),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Wb(t,e,n=!1){const i=await Ur(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return _i._forOperation(t,"link",i)}async function Cg(t,e,n){await Wh(e);const i=ak(e.providerData),r=t===!1?"provider-already-linked":"no-such-provider";G(i.has(n)===t,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ok(t,e,n=!1){const{auth:i}=t;if(Ae(i.app))return Promise.reject(Bt(i));const r="reauthenticate";try{const s=await Ur(t,sk(i,r,e,t),n);G(s.idToken,i,"internal-error");const a=Ig(s.idToken);G(a,i,"internal-error");const{sub:o}=a;return G(t.uid===o,i,"user-mismatch"),_i._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Jt(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lk(t,e,n=!1){if(Ae(t.app))return Promise.reject(Bt(t));const i="signIn",r=await sk(t,i,e),s=await _i._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function Ng(t,e){return lk(st(t),e)}async function ck(t,e){const n=J(t);return await Cg(!1,n,e.providerId),Wb(n,e)}async function uk(t,e){return ok(J(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n8(t,e){return Hr(t,"POST","/v1/accounts:signInWithCustomToken",ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i8(t,e){if(Ae(t.app))return Promise.reject(Bt(t));const n=st(t),i=await n8(n,{token:e,returnSecureToken:!0}),r=await _i._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Qb._fromServerResponse(e,n):"totpInfo"in n?Yb._fromServerResponse(e,n):Jt(e,"internal-error")}}class Qb extends Ld{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Qb(n)}}class Yb extends Ld{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Yb(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t,e,n){var i;G(((i=n.url)==null?void 0:i.length)>0,t,"invalid-continue-uri"),G(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),G(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(G(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(G(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xb(t){const e=st(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function r8(t,e,n){const i=st(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Pg(i,r,n),await Us(i,r,"getOobCode",zB,"EMAIL_PASSWORD_PROVIDER")}async function s8(t,e,n){await ik(J(t),{oobCode:e,newPassword:n}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Xb(t),i})}async function a8(t,e){await LB(J(t),{oobCode:e})}async function hk(t,e){const n=J(t),i=await ik(n,{oobCode:e}),r=i.requestType;switch(G(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(i.mfaInfo,n,"internal-error");default:G(i.email,n,"internal-error")}let s=null;return i.mfaInfo&&(s=Ld._fromServerResponse(st(n),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:s},operation:r}}async function o8(t,e){const{data:n}=await hk(J(t),e);return n.email}async function l8(t,e,n){if(Ae(t.app))return Promise.reject(Bt(t));const i=st(t),a=await Us(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rk,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Xb(t),l}),o=await _i._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(o.user),o}function c8(t,e,n){return Ae(t.app)?Promise.reject(Bt(t)):Ng(J(t),ca.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Xb(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u8(t,e,n){const i=st(t),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(a,o){G(o.handleCodeInApp,i,"argument-error"),o&&Pg(i,a,o)}s(r,n),await Us(i,r,"getOobCode",FB,"EMAIL_PASSWORD_PROVIDER")}function h8(t,e){const n=Rg.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function d8(t,e,n){if(Ae(t.app))return Promise.reject(Bt(t));const i=J(t),r=ca.credentialWithLink(e,n||Kh());return G(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Ng(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f8(t,e){return mt(t,"POST","/v1/accounts:createAuthUri",ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m8(t,e){const n=Gb()?Kh():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:r}=await f8(J(t),i);return r||[]}async function p8(t,e){const n=J(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Pg(n.auth,r,e);const{email:s}=await jB(n.auth,r);s!==t.email&&await t.reload()}async function g8(t,e,n){const i=J(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Pg(i.auth,s,n);const{email:a}=await BB(i.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y8(t,e){return mt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _8(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=J(t),s={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Ur(i,y8(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find(({providerId:l})=>l==="password");o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function v8(t,e){const n=J(t);return Ae(n.auth.app)?Promise.reject(Bt(n.auth)):dk(n,e,null)}function w8(t,e){return dk(J(t),null,e)}async function dk(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const a=await Ur(t,VB(i,s));await t._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(t){var r,s;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},i=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const a=(s=(r=Ig(t.idToken))==null?void 0:r.firebase)==null?void 0:s.sign_in_provider;if(a){const o=a!=="anonymous"&&a!=="custom"?a:null;return new Dl(i,o)}}if(!e)return null;switch(e){case"facebook.com":return new T8(i,n);case"github.com":return new E8(i,n);case"google.com":return new x8(i,n);case"twitter.com":return new S8(i,n,t.screenName||null);case"custom":case"anonymous":return new Dl(i,null);default:return new Dl(i,e,n)}}class Dl{constructor(e,n,i={}){this.isNewUser=e,this.providerId=n,this.profile=i}}class fk extends Dl{constructor(e,n,i,r){super(e,n,i),this.username=r}}class T8 extends Dl{constructor(e,n){super(e,"facebook.com",n)}}class E8 extends fk{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class x8 extends Dl{constructor(e,n){super(e,"google.com",n)}}class S8 extends fk{constructor(e,n,i){super(e,"twitter.com",n,i)}}function I8(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:b8(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n,i){this.type=e,this.credential=n,this.user=i}static _fromIdtoken(e,n){return new za("enroll",e,n)}static _fromMfaPendingCredential(e){return new za("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,i;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return za._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((i=e.multiFactorSession)!=null&&i.idToken)return za._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,n,i){this.session=e,this.hints=n,this.signInResolver=i}static _fromError(e,n){const i=st(e),r=n.customData._serverResponse,s=(r.mfaInfo||[]).map(o=>Ld._fromServerResponse(i,o));G(r.mfaPendingCredential,i,"internal-error");const a=za._fromMfaPendingCredential(r.mfaPendingCredential);return new Jb(a,s,async o=>{const l=await o._process(i,a);delete r.mfaInfo,delete r.mfaPendingCredential;const c={...r,idToken:l.idToken,refreshToken:l.refreshToken};switch(n.operationType){case"signIn":const h=await _i._fromIdTokenResponse(i,n.operationType,c);return await i._updateCurrentUser(h.user),h;case"reauthenticate":return G(n.user,i,"internal-error"),_i._forOperation(n.user,n.operationType,c);default:Jt(i,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function A8(t,e){var r;const n=J(t),i=e;return G(e.customData.operationType,n,"argument-error"),G((r=i.customData._serverResponse)==null?void 0:r.mfaPendingCredential,n,"argument-error"),Jb._fromError(n,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t,e){return mt(t,"POST","/v2/accounts/mfaEnrollment:start",ft(t,e))}function R8(t,e){return mt(t,"POST","/v2/accounts/mfaEnrollment:finalize",ft(t,e))}function C8(t,e){return mt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",ft(t,e))}class Zb{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(i=>Ld._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new Zb(e)}async getSession(){return za._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const i=e,r=await this.getSession(),s=await Ur(this.user,i._process(this.user.auth,r,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const r=await Ur(this.user,C8(this.user.auth,{idToken:i,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(r),await this.user.reload()}catch(r){throw r}}}const D_=new WeakMap;function N8(t){const e=J(t);return D_.has(e)||D_.set(e,Zb._fromUser(e)),D_.get(e)}const xp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xp,"1"),this.storage.removeItem(xp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8=1e3,D8=10;class pk extends mk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);dB()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,D8):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},P8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pk.type="LOCAL";const eT=pk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk extends mk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}gk.type="SESSION";const oo=gk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Dg(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const o=Array.from(a).map(async c=>c(n.origin,s)),l=await k8(o);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const c=Ud("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(){return window}function V8(t){Et().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(){return typeof Et().WorkerGlobalScope<"u"&&typeof Et().importScripts=="function"}async function M8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function L8(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function U8(){return tT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk="firebaseLocalStorageDb",j8=1,Sp="firebaseLocalStorage",_k="fbase_key";class jd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function kg(t,e){return t.transaction([Sp],e?"readwrite":"readonly").objectStore(Sp)}function z8(){const t=indexedDB.deleteDatabase(yk);return new jd(t).toPromise()}function v0(){const t=indexedDB.open(yk,j8);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Sp,{keyPath:_k})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Sp)?e(i):(i.close(),await z8(),e(await v0()))})})}async function y1(t,e,n){const i=kg(t,!0).put({[_k]:e,value:n});return new jd(i).toPromise()}async function F8(t,e){const n=kg(t,!1).get(e),i=await new jd(n).toPromise();return i===void 0?null:i.value}function _1(t,e){const n=kg(t,!0).delete(e);return new jd(n).toPromise()}const B8=800,q8=3;class vk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await v0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>q8)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dg._getInstance(U8()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await M8(),!this.activeServiceWorker)return;this.sender=new O8(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||L8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await v0();return await y1(e,xp,"1"),await _1(e,xp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>y1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>F8(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=kg(r,!1).getAll();return new jd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),B8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vk.type="LOCAL";const Yh=vk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t,e){return mt(t,"POST","/v2/accounts/mfaSignIn:start",ft(t,e))}function H8(t,e){return mt(t,"POST","/v2/accounts/mfaSignIn:finalize",ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_=ek("rcb"),G8=new kd(3e4,6e4);class $8{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Et().grecaptcha)!=null&&e.render)}load(e,n=""){return G(K8(n),e,"argument-error"),this.shouldResolveImmediately(n)&&a1(Et().grecaptcha)?Promise.resolve(Et().grecaptcha):new Promise((i,r)=>{const s=Et().setTimeout(()=>{r(Pt(e,"network-request-failed"))},G8.get());Et()[k_]=()=>{Et().clearTimeout(s),delete Et()[k_];const o=Et().grecaptcha;if(!o||!a1(o)){r(Pt(e,"internal-error"));return}const l=o.render;o.render=(c,h)=>{const d=l(c,h);return this.counter++,d},this.hostLanguage=n,i(o)};const a=`${vB()}?${la({onload:k_,render:"explicit",hl:n})}`;Kb(a).catch(()=>{clearTimeout(s),r(Pt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=Et().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function K8(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class W8{async load(e){return new xB(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh="recaptcha",Q8={theme:"light",type:"image"};let Y8=class{constructor(e,n,i={...Q8}){this.parameters=i,this.type=oh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=st(e),this.isInvisible=this.parameters.size==="invisible",G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof n=="string"?document.getElementById(n):n;G(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new W8:new $8,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),i=n.getResponse(e);return i||new Promise(r=>{const s=a=>{a&&(this.tokenChangeListeners.delete(s),r(a))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(i=>i(n)),typeof e=="function")e(n);else if(typeof e=="string"){const i=Et()[e];typeof i=="function"&&i(n)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){G(Gb()&&!tT(),this.auth,"internal-error"),await X8(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await eB(this.auth);G(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function X8(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ja._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function J8(t,e,n){if(Ae(t.app))return Promise.reject(Bt(t));const i=st(t),r=await Og(i,e,J(n));return new nT(r,s=>Ng(i,s))}async function Z8(t,e,n){const i=J(t);await Cg(!1,i,"phone");const r=await Og(i.auth,e,J(n));return new nT(r,s=>ck(i,s))}async function eq(t,e,n){const i=J(t);if(Ae(i.auth.app))return Promise.reject(Bt(i.auth));const r=await Og(i.auth,e,J(n));return new nT(r,s=>uk(i,s))}async function Og(t,e,n){var i;if(!t._getRecaptchaConfig())try{await NB(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const s=r.session;if("phoneNumber"in r){G(s.type==="enroll",t,"internal-error");const a={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Us(t,a,"mfaSmsEnrollment",async(h,d)=>{if(d.phoneEnrollmentInfo.captchaResponse===ah){G((n==null?void 0:n.type)===oh,h,"argument-error");const f=await O_(h,d,n);return g1(h,f)}return g1(h,d)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{G(s.type==="signin",t,"internal-error");const a=((i=r.multiFactorHint)==null?void 0:i.uid)||r.multiFactorUid;G(a,t,"missing-multi-factor-info");const o={mfaPendingCredential:s.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Us(t,o,"mfaSmsSignIn",async(d,f)=>{if(f.phoneSignInInfo.captchaResponse===ah){G((n==null?void 0:n.type)===oh,d,"argument-error");const g=await O_(d,f,n);return v1(d,g)}return v1(d,f)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Us(t,s,"sendVerificationCode",async(c,h)=>{if(h.captchaResponse===ah){G((n==null?void 0:n.type)===oh,c,"argument-error");const d=await O_(c,h,n);return m1(c,d)}return m1(c,h)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{n==null||n._reset()}}async function tq(t,e){const n=J(t);if(Ae(n.auth.app))return Promise.reject(Bt(n.auth));await Wb(n,e)}async function O_(t,e,n){G(n.type===oh,t,"argument-error");const i=await n.verify();G(typeof i=="string",t,"argument-error");const r={...e};if("phoneEnrollmentInfo"in r){const s=r.phoneEnrollmentInfo.phoneNumber,a=r.phoneEnrollmentInfo.captchaResponse,o=r.phoneEnrollmentInfo.clientType,l=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:i,captchaResponse:a,clientType:o,recaptchaVersion:l}}),r}else if("phoneSignInInfo"in r){const s=r.phoneSignInInfo.captchaResponse,a=r.phoneSignInInfo.clientType,o=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:s,clientType:a,recaptchaVersion:o}}),r}else return Object.assign(r,{recaptchaToken:i}),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lo=class wm{constructor(e){this.providerId=wm.PROVIDER_ID,this.auth=st(e)}verifyPhoneNumber(e,n){return Og(this.auth,e,J(n))}static credential(e,n){return Ja._fromVerification(e,n)}static credentialFromResult(e){const n=e;return wm.credentialFromTaggedObject(n)}static credentialFromError(e){return wm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?Ja._fromTokenResponse(n,i):null}};lo.PROVIDER_ID="phone";lo.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t,e){return e?qn(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT extends Dc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ar(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ar(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ar(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function nq(t){return lk(t.auth,new iT(t),t.bypassAuthState)}function iq(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),ok(n,new iT(t),t.bypassAuthState)}async function rq(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),Wb(n,new iT(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nq;case"linkViaPopup":case"linkViaRedirect":return rq;case"reauthViaPopup":case"reauthViaRedirect":return iq;default:Jt(this.auth,"internal-error")}}resolve(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sq=new kd(2e3,1e4);async function aq(t,e,n){if(Ae(t.app))return Promise.reject(Pt(t,"operation-not-supported-in-this-environment"));const i=st(t);Pc(t,e,Gr);const r=Ro(i,n);return new br(i,"signInViaPopup",e,r).executeNotNull()}async function oq(t,e,n){const i=J(t);if(Ae(i.auth.app))return Promise.reject(Pt(i.auth,"operation-not-supported-in-this-environment"));Pc(i.auth,e,Gr);const r=Ro(i.auth,n);return new br(i.auth,"reauthViaPopup",e,r,i).executeNotNull()}async function lq(t,e,n){const i=J(t);Pc(i.auth,e,Gr);const r=Ro(i.auth,n);return new br(i.auth,"linkViaPopup",e,r,i).executeNotNull()}class br extends wk{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,br.currentPopupAction&&br.currentPopupAction.cancel(),br.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return G(e,this.auth,"internal-error"),e}async onExecution(){Ni(this.filter.length===1,"Popup operations only handle one event");const e=Ud();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Pt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,br.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sq.get())};e()}}br.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cq="pendingRedirect",lh=new Map;class uq extends wk{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=lh.get(this.auth._key());if(!e){try{const i=await hq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}lh.set(this.auth._key(),e)}return this.bypassAuthState||lh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hq(t,e){const n=Tk(e),i=bk(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}async function rT(t,e){return bk(t)._set(Tk(e),"true")}function dq(){lh.clear()}function sT(t,e){lh.set(t._key(),e)}function bk(t){return qn(t._redirectPersistence)}function Tk(t){return Xa(cq,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fq(t,e,n){return mq(t,e,n)}async function mq(t,e,n){if(Ae(t.app))return Promise.reject(Bt(t));const i=st(t);Pc(t,e,Gr),await i._initializationPromise;const r=Ro(i,n);return await rT(r,i),r._openRedirect(i,e,"signInViaRedirect")}function pq(t,e,n){return gq(t,e,n)}async function gq(t,e,n){const i=J(t);if(Pc(i.auth,e,Gr),Ae(i.auth.app))return Promise.reject(Bt(i.auth));await i.auth._initializationPromise;const r=Ro(i.auth,n);await rT(r,i.auth);const s=await Ek(i);return r._openRedirect(i.auth,e,"reauthViaRedirect",s)}function yq(t,e,n){return _q(t,e,n)}async function _q(t,e,n){const i=J(t);Pc(i.auth,e,Gr),await i.auth._initializationPromise;const r=Ro(i.auth,n);await Cg(!1,i,e.providerId),await rT(r,i.auth);const s=await Ek(i);return r._openRedirect(i.auth,e,"linkViaRedirect",s)}async function vq(t,e){return await st(t)._initializationPromise,Vg(t,e,!1)}async function Vg(t,e,n=!1){if(Ae(t.app))return Promise.reject(Bt(t));const i=st(t),r=Ro(i,e),a=await new uq(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}async function Ek(t){const e=Ud(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wq=10*60*1e3;class xk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bq(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!Sk(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Pt(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wq&&this.cachedEventUids.clear(),this.cachedEventUids.has(w1(e))}saveEventToCache(e){this.cachedEventUids.add(w1(e)),this.lastProcessedEventTime=Date.now()}}function w1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Sk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ik(t,e={}){return mt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Eq=/^https?/;async function xq(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Ik(t);for(const n of e)try{if(Sq(n))return}catch{}Jt(t,"unauthorized-domain")}function Sq(t){const e=Kh(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!Eq.test(n))return!1;if(Tq.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iq=new kd(3e4,6e4);function b1(){const t=Et().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Aq(t){return new Promise((e,n)=>{var r,s,a;function i(){b1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{b1(),n(Pt(t,"network-request-failed"))},timeout:Iq.get()})}if((s=(r=Et().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=Et().gapi)!=null&&a.load)i();else{const o=ek("iframefcb");return Et()[o]=()=>{gapi.load?i():n(Pt(t,"network-request-failed"))},Kb(`${bB()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw bm=null,e})}let bm=null;function Rq(t){return bm=bm||Aq(t),bm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cq=new kd(5e3,15e3),Nq="__/auth/iframe",Pq="emulator/auth/iframe",Dq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Oq(t){const e=t.config;G(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$b(e,Pq):`https://${t.config.authDomain}/${Nq}`,i={apiKey:e.apiKey,appName:t.name,v:wi},r=kq.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${la(i).slice(1)}`}async function Vq(t){const e=await Rq(t),n=Et().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:Oq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Dq,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Pt(t,"network-request-failed"),o=Et().setTimeout(()=>{s(a)},Cq.get());function l(){Et().clearTimeout(o),r(i)}i.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Lq=500,Uq=600,jq="_blank",zq="http://localhost";class T1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Fq(t,e,n,i=Lq,r=Uq){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const l={...Mq,width:i.toString(),height:r.toString(),top:s,left:a},c=Se().toLowerCase();n&&(o=WD(c)?jq:n),$D(c)&&(e=e||zq,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[g,E])=>`${f}${g}=${E},`,"");if(hB(c)&&o!=="_self")return Bq(e||"",o),new T1(null);const d=window.open(e||"",o,h);G(d,t,"popup-blocked");try{d.focus()}catch{}return new T1(d)}function Bq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qq="__/auth/handler",Hq="emulator/auth/handler",Gq=encodeURIComponent("fac");async function w0(t,e,n,i,r,s){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:wi,eventId:r};if(e instanceof Gr){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",_z(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(s||{}))a[h]=d}if(e instanceof kc){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const l=await t._getAppCheckToken(),c=l?`#${Gq}=${encodeURIComponent(l)}`:"";return`${$q(t)}?${la(o).slice(1)}${c}`}function $q({config:t}){return t.emulator?$b(t,Hq):`https://${t.authDomain}/${qq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="webStorageSupport";class Kq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oo,this._completeRedirectFn=Vg,this._overrideRedirectResult=sT}async _openPopup(e,n,i,r){var a;Ni((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await w0(e,n,i,Kh(),r);return Fq(e,s,Ud())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await w0(e,n,i,Kh(),r);return V8(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Ni(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Vq(e),i=new xk(e);return n.register("authEvent",r=>(G(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(V_,{type:V_},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[V_];s!==void 0&&n(!!s),Jt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xq(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return JD()||KD()||Vd()}}const Wq=Kq;class Qq{constructor(e){this.factorId=e}_process(e,n,i){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,i);case"signin":return this._finalizeSignIn(e,n.credential);default:return $i("unexpected MultiFactorSessionType")}}}class aT extends Qq{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new aT(e)}_finalizeEnroll(e,n,i){return R8(e,{idToken:n,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return H8(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Ak{constructor(){}static assertion(e){return aT._fromCredential(e)}}Ak.FACTOR_ID="phone";var E1="@firebase/auth",x1="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yq=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Jq(t){Ci(new kn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=i.options;G(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZD(t)},c=new yB(i,r,s,l);return PB(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ci(new kn("auth-internal",e=>{const n=st(e.getProvider("auth").getImmediate());return(i=>new Yq(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_n(E1,x1,Xq(t)),_n(E1,x1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zq=5*60;gD("authIdTokenMaxAge");function e7(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}_B({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Pt("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",e7().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Jq("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7=2e3;async function n7(t,e,n){const{BuildInfo:i}=co();Ni(e.sessionId,"AuthEvent did not contain a session ID");const r=await o7(e.sessionId),s={};return Vd()?s.ibi=i.packageName:Od()?s.apn=i.packageName:Jt(t,"operation-not-supported-in-this-environment"),i.displayName&&(s.appDisplayName=i.displayName),s.sessionId=r,w0(t,n,e.type,void 0,e.eventId??void 0,s)}async function i7(t){const{BuildInfo:e}=co(),n={};Vd()?n.iosBundleId=e.packageName:Od()?n.androidPackageName=e.packageName:Jt(t,"operation-not-supported-in-this-environment"),await Ik(t,n)}function r7(t){const{cordova:e}=co();return new Promise(n=>{e.plugins.browsertab.isAvailable(i=>{let r=null;i?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,uB()?"_blank":"_system","location=yes"),n(r)})})}async function s7(t,e,n){const{cordova:i}=co();let r=()=>{};try{await new Promise((s,a)=>{let o=null;function l(){var f;s();const d=(f=i.plugins.browsertab)==null?void 0:f.close;typeof d=="function"&&d(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){o||(o=window.setTimeout(()=>{a(Pt(t,"redirect-cancelled-by-user"))},t7))}function h(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),Od()&&document.addEventListener("visibilitychange",h,!1),r=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",h,!1),o&&window.clearTimeout(o)}})}finally{r()}}function a7(t){var n,i,r,s,a,o,l,c,h,d;const e=co();G(typeof((n=e==null?void 0:e.universalLinks)==null?void 0:n.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),G(typeof((i=e==null?void 0:e.BuildInfo)==null?void 0:i.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),G(typeof((a=(s=(r=e==null?void 0:e.cordova)==null?void 0:r.plugins)==null?void 0:s.browsertab)==null?void 0:a.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G(typeof((c=(l=(o=e==null?void 0:e.cordova)==null?void 0:o.plugins)==null?void 0:l.browsertab)==null?void 0:c.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G(typeof((d=(h=e==null?void 0:e.cordova)==null?void 0:h.InAppBrowser)==null?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function o7(t){const e=l7(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(r=>r.toString(16).padStart(2,"0")).join("")}function l7(t){if(Ni(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c7=20;class u7 extends xk{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function h7(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:m7(),postBody:null,tenantId:t.tenantId,error:Pt(t,"no-auth-event")}}function d7(t,e){return b0()._set(T0(t),e)}async function S1(t){const e=await b0()._get(T0(t));return e&&await b0()._remove(T0(t)),e}function f7(t,e){var i,r;const n=g7(e);if(n.includes("/__/auth/callback")){const s=Tm(n),a=s.firebaseError?p7(decodeURIComponent(s.firebaseError)):null,o=(r=(i=a==null?void 0:a.code)==null?void 0:i.split("auth/"))==null?void 0:r[1],l=o?Pt(o):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:n,postBody:null}}return null}function m7(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<c7;n++){const i=Math.floor(Math.random()*e.length);t.push(e.charAt(i))}return t.join("")}function b0(){return qn(eT)}function T0(t){return Xa("authEvent",t.config.apiKey,t.name)}function p7(t){try{return JSON.parse(t)}catch{return null}}function g7(t){const e=Tm(t),n=e.link?decodeURIComponent(e.link):void 0,i=Tm(n).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Tm(r).link||r||i||n||t}function Tm(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return yl(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y7=500;class _7{constructor(){this._redirectPersistence=oo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Vg,this._overrideRedirectResult=sT}async _initialize(e){const n=e._key();let i=this.eventManagers.get(n);return i||(i=new u7(e),this.eventManagers.set(n,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){Jt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,i,r){a7(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),dq(),await this._originValidation(e);const a=h7(e,i,r);await d7(e,a);const o=await n7(e,a,n),l=await r7(o);return s7(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=i7(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:i,handleOpenURL:r,BuildInfo:s}=co(),a=setTimeout(async()=>{await S1(e),n.onEvent(I1())},y7),o=async h=>{clearTimeout(a);const d=await S1(e);let f=null;d&&(h!=null&&h.url)&&(f=f7(d,h.url)),n.onEvent(f||I1())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,o);const l=r,c=`${s.packageName.toLowerCase()}://`;co().handleOpenURL=async h=>{if(h.toLowerCase().startsWith(c)&&o({url:h}),typeof l=="function")try{l(h)}catch(d){console.error(d)}}}}const v7=_7;function I1(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Pt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w7(t,e){st(t)._logFramework(e)}var b7="@firebase/auth-compat",T7="0.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E7=1e3;function ch(){var t;return((t=self==null?void 0:self.location)==null?void 0:t.protocol)||null}function x7(){return ch()==="http:"||ch()==="https:"}function Rk(t=Se()){return!!((ch()==="file:"||ch()==="ionic:"||ch()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function S7(){return Sg()||xg()}function I7(){return bD()&&(document==null?void 0:document.documentMode)===11}function A7(t=Se()){return/Edge\/\d+/.test(t)}function R7(t=Se()){return I7()||A7(t)}function Ck(){try{const t=self.localStorage,e=Ud();if(t)return t.setItem(e,"1"),t.removeItem(e),R7()?Hh():!0}catch{return oT()&&Hh()}return!1}function oT(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function M_(){return(x7()||Mb()||Rk())&&!S7()&&Ck()&&!oT()}function Nk(){return Rk()&&typeof document<"u"}async function C7(){return Nk()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},E7);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function N7(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn={LOCAL:"local",NONE:"none",SESSION:"session"},yu=G,Pk="persistence";function P7(t,e){if(yu(Object.values(zn).includes(e),t,"invalid-persistence-type"),Sg()){yu(e!==zn.SESSION,t,"unsupported-persistence-type");return}if(xg()){yu(e===zn.NONE,t,"unsupported-persistence-type");return}if(oT()){yu(e===zn.NONE||e===zn.LOCAL&&Hh(),t,"unsupported-persistence-type");return}yu(e===zn.NONE||Ck(),t,"unsupported-persistence-type")}async function E0(t){await t._initializationPromise;const e=Dk(),n=Xa(Pk,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistenceType())}function D7(t,e){const n=Dk();if(!n)return[];const i=Xa(Pk,t,e);switch(n.getItem(i)){case zn.NONE:return[Xl];case zn.LOCAL:return[Yh,oo];case zn.SESSION:return[oo];default:return[]}}function Dk(){var t;try{return((t=N7())==null?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k7=G;class Ss{constructor(){this.browserResolver=qn(Wq),this.cordovaResolver=qn(v7),this.underlyingResolver=null,this._redirectPersistence=oo,this._completeRedirectFn=Vg,this._overrideRedirectResult=sT}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,i,r)}async _openRedirect(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,i,r)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Nk()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return k7(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await C7();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(t){return t.unwrap()}function O7(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7(t){return Ok(t)}function M7(t,e){var i;const n=(i=e.customData)==null?void 0:i._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const r=e;r.resolver=new L7(t,A8(t,e))}else if(n){const r=Ok(e),s=e;r&&(s.credential=r,s.tenantId=n.tenantId||void 0,s.email=n.email||void 0,s.phoneNumber=n.phoneNumber||void 0)}}function Ok(t){const{_tokenResponse:e}=t instanceof Ft?t.customData:t;if(!e)return null;if(!(t instanceof Ft)&&"temporaryProof"in e&&"phoneNumber"in e)return lo.credentialFromResult(t);const n=e.providerId;if(!n||n===pu.PASSWORD)return null;let i;switch(n){case pu.GOOGLE:i=ji;break;case pu.FACEBOOK:i=Ui;break;case pu.GITHUB:i=zi;break;case pu.TWITTER:i=Fi;break;default:const{oauthIdToken:r,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:o,nonce:l}=e;return!s&&!a&&!r&&!o?null:o?n.startsWith("saml.")?Jl._create(n,o):ir._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:r,accessToken:s}):new Pl(n).credential({idToken:r,accessToken:s,rawNonce:l})}return t instanceof Ft?i.credentialFromError(t):i.credentialFromResult(t)}function In(t,e){return e.catch(n=>{throw n instanceof Ft&&M7(t,n),n}).then(n=>{const i=n.operationType,r=n.user;return{operationType:i,credential:V7(n),additionalUserInfo:I8(n),user:Mg.getOrCreate(r)}})}async function x0(t,e){const n=await e;return{verificationId:n.verificationId,confirm:i=>In(t,n.confirm(i))}}class L7{constructor(e,n){this.resolver=n,this.auth=O7(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return In(kk(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mg=class Ou{constructor(e){this._delegate=e,this.multiFactor=N8(e)}static getOrCreate(e){return Ou.USER_MAP.has(e)||Ou.USER_MAP.set(e,new Ou(e)),Ou.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return In(this.auth,ck(this._delegate,e))}async linkWithPhoneNumber(e,n){return x0(this.auth,Z8(this._delegate,e,n))}async linkWithPopup(e){return In(this.auth,lq(this._delegate,e,Ss))}async linkWithRedirect(e){return await E0(st(this.auth)),yq(this._delegate,e,Ss)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return In(this.auth,uk(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return x0(this.auth,eq(this._delegate,e,n))}reauthenticateWithPopup(e){return In(this.auth,oq(this._delegate,e,Ss))}async reauthenticateWithRedirect(e){return await E0(st(this.auth)),pq(this._delegate,e,Ss)}sendEmailVerification(e){return p8(this._delegate,e)}async unlink(e){return await t8(this._delegate,e),this}updateEmail(e){return v8(this._delegate,e)}updatePassword(e){return w8(this._delegate,e)}updatePhoneNumber(e){return tq(this._delegate,e)}updateProfile(e){return _8(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return g8(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Mg.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=G;class S0{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;_u(i,"invalid-api-key",{appName:e.name}),_u(i,"invalid-api-key",{appName:e.name});const r=typeof window<"u"?Ss:void 0;this._delegate=n.initialize({options:{persistence:U7(i,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(HF),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Mg.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){DB(this._delegate,e,n)}applyActionCode(e){return a8(this._delegate,e)}checkActionCode(e){return hk(this._delegate,e)}confirmPasswordReset(e,n){return s8(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return In(this._delegate,l8(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return m8(this._delegate,e)}isSignInWithEmailLink(e){return h8(this._delegate,e)}async getRedirectResult(){_u(M_(),this._delegate,"operation-not-supported-in-this-environment");const e=await vq(this._delegate,Ss);return e?In(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){w7(this._delegate,e)}onAuthStateChanged(e,n,i){const{next:r,error:s,complete:a}=A1(e,n,i);return this._delegate.onAuthStateChanged(r,s,a)}onIdTokenChanged(e,n,i){const{next:r,error:s,complete:a}=A1(e,n,i);return this._delegate.onIdTokenChanged(r,s,a)}sendSignInLinkToEmail(e,n){return u8(this._delegate,e,n)}sendPasswordResetEmail(e,n){return r8(this._delegate,e,n||void 0)}async setPersistence(e){P7(this._delegate,e);let n;switch(e){case zn.SESSION:n=oo;break;case zn.LOCAL:n=await qn(Yh)._isAvailable()?Yh:eT;break;case zn.NONE:n=Xl;break;default:return Jt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return In(this._delegate,e8(this._delegate))}signInWithCredential(e){return In(this._delegate,Ng(this._delegate,e))}signInWithCustomToken(e){return In(this._delegate,i8(this._delegate,e))}signInWithEmailAndPassword(e,n){return In(this._delegate,c8(this._delegate,e,n))}signInWithEmailLink(e,n){return In(this._delegate,d8(this._delegate,e,n))}signInWithPhoneNumber(e,n){return x0(this._delegate,J8(this._delegate,e,n))}async signInWithPopup(e){return _u(M_(),this._delegate,"operation-not-supported-in-this-environment"),In(this._delegate,aq(this._delegate,e,Ss))}async signInWithRedirect(e){return _u(M_(),this._delegate,"operation-not-supported-in-this-environment"),await E0(this._delegate),fq(this._delegate,e,Ss)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return o8(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}S0.Persistence=zn;function A1(t,e,n){let i=t;typeof t!="function"&&({next:i,error:e,complete:n}=t);const r=i;return{next:a=>r(a&&Mg.getOrCreate(a)),error:e,complete:n}}function U7(t,e){const n=D7(t,e);if(typeof self<"u"&&!n.includes(Yh)&&n.push(Yh),typeof window<"u")for(const i of[eT,oo])n.includes(i)||n.push(i);return n.includes(Xl)||n.push(Xl),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{static credential(e,n){return lo.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new lo(kk(jt.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}lT.PHONE_SIGN_IN_METHOD=lo.PHONE_SIGN_IN_METHOD;lT.PROVIDER_ID=lo.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7=G;class z7{constructor(e,n,i=jt.app()){var r;j7((r=i.options)==null?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Y8(i.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F7="auth-compat";function B7(t){t.INTERNAL.registerComponent(new kn(F7,e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new S0(n,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Bo.EMAIL_SIGNIN,PASSWORD_RESET:Bo.PASSWORD_RESET,RECOVER_EMAIL:Bo.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Bo.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Bo.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Bo.VERIFY_EMAIL}},EmailAuthProvider:ca,FacebookAuthProvider:Ui,GithubAuthProvider:zi,GoogleAuthProvider:ji,OAuthProvider:Pl,SAMLAuthProvider:Tp,PhoneAuthProvider:lT,PhoneMultiFactorGenerator:Ak,RecaptchaVerifier:z7,TwitterAuthProvider:Fi,Auth:S0,AuthCredential:Dc,Error:Ft}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(b7,T7)}B7(jt);var R1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var js,Vk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,x){function R(){}R.prototype=x.prototype,T.F=x.prototype,T.prototype=new R,T.prototype.constructor=T,T.D=function(C,P,V){for(var D=Array(arguments.length-2),q=2;q<arguments.length;q++)D[q-2]=arguments[q];return x.prototype[P].apply(C,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,x,R){R||(R=0);const C=Array(16);if(typeof x=="string")for(var P=0;P<16;++P)C[P]=x.charCodeAt(R++)|x.charCodeAt(R++)<<8|x.charCodeAt(R++)<<16|x.charCodeAt(R++)<<24;else for(P=0;P<16;++P)C[P]=x[R++]|x[R++]<<8|x[R++]<<16|x[R++]<<24;x=T.g[0],R=T.g[1],P=T.g[2];let V=T.g[3],D;D=x+(V^R&(P^V))+C[0]+3614090360&4294967295,x=R+(D<<7&4294967295|D>>>25),D=V+(P^x&(R^P))+C[1]+3905402710&4294967295,V=x+(D<<12&4294967295|D>>>20),D=P+(R^V&(x^R))+C[2]+606105819&4294967295,P=V+(D<<17&4294967295|D>>>15),D=R+(x^P&(V^x))+C[3]+3250441966&4294967295,R=P+(D<<22&4294967295|D>>>10),D=x+(V^R&(P^V))+C[4]+4118548399&4294967295,x=R+(D<<7&4294967295|D>>>25),D=V+(P^x&(R^P))+C[5]+1200080426&4294967295,V=x+(D<<12&4294967295|D>>>20),D=P+(R^V&(x^R))+C[6]+2821735955&4294967295,P=V+(D<<17&4294967295|D>>>15),D=R+(x^P&(V^x))+C[7]+4249261313&4294967295,R=P+(D<<22&4294967295|D>>>10),D=x+(V^R&(P^V))+C[8]+1770035416&4294967295,x=R+(D<<7&4294967295|D>>>25),D=V+(P^x&(R^P))+C[9]+2336552879&4294967295,V=x+(D<<12&4294967295|D>>>20),D=P+(R^V&(x^R))+C[10]+4294925233&4294967295,P=V+(D<<17&4294967295|D>>>15),D=R+(x^P&(V^x))+C[11]+2304563134&4294967295,R=P+(D<<22&4294967295|D>>>10),D=x+(V^R&(P^V))+C[12]+1804603682&4294967295,x=R+(D<<7&4294967295|D>>>25),D=V+(P^x&(R^P))+C[13]+4254626195&4294967295,V=x+(D<<12&4294967295|D>>>20),D=P+(R^V&(x^R))+C[14]+2792965006&4294967295,P=V+(D<<17&4294967295|D>>>15),D=R+(x^P&(V^x))+C[15]+1236535329&4294967295,R=P+(D<<22&4294967295|D>>>10),D=x+(P^V&(R^P))+C[1]+4129170786&4294967295,x=R+(D<<5&4294967295|D>>>27),D=V+(R^P&(x^R))+C[6]+3225465664&4294967295,V=x+(D<<9&4294967295|D>>>23),D=P+(x^R&(V^x))+C[11]+643717713&4294967295,P=V+(D<<14&4294967295|D>>>18),D=R+(V^x&(P^V))+C[0]+3921069994&4294967295,R=P+(D<<20&4294967295|D>>>12),D=x+(P^V&(R^P))+C[5]+3593408605&4294967295,x=R+(D<<5&4294967295|D>>>27),D=V+(R^P&(x^R))+C[10]+38016083&4294967295,V=x+(D<<9&4294967295|D>>>23),D=P+(x^R&(V^x))+C[15]+3634488961&4294967295,P=V+(D<<14&4294967295|D>>>18),D=R+(V^x&(P^V))+C[4]+3889429448&4294967295,R=P+(D<<20&4294967295|D>>>12),D=x+(P^V&(R^P))+C[9]+568446438&4294967295,x=R+(D<<5&4294967295|D>>>27),D=V+(R^P&(x^R))+C[14]+3275163606&4294967295,V=x+(D<<9&4294967295|D>>>23),D=P+(x^R&(V^x))+C[3]+4107603335&4294967295,P=V+(D<<14&4294967295|D>>>18),D=R+(V^x&(P^V))+C[8]+1163531501&4294967295,R=P+(D<<20&4294967295|D>>>12),D=x+(P^V&(R^P))+C[13]+2850285829&4294967295,x=R+(D<<5&4294967295|D>>>27),D=V+(R^P&(x^R))+C[2]+4243563512&4294967295,V=x+(D<<9&4294967295|D>>>23),D=P+(x^R&(V^x))+C[7]+1735328473&4294967295,P=V+(D<<14&4294967295|D>>>18),D=R+(V^x&(P^V))+C[12]+2368359562&4294967295,R=P+(D<<20&4294967295|D>>>12),D=x+(R^P^V)+C[5]+4294588738&4294967295,x=R+(D<<4&4294967295|D>>>28),D=V+(x^R^P)+C[8]+2272392833&4294967295,V=x+(D<<11&4294967295|D>>>21),D=P+(V^x^R)+C[11]+1839030562&4294967295,P=V+(D<<16&4294967295|D>>>16),D=R+(P^V^x)+C[14]+4259657740&4294967295,R=P+(D<<23&4294967295|D>>>9),D=x+(R^P^V)+C[1]+2763975236&4294967295,x=R+(D<<4&4294967295|D>>>28),D=V+(x^R^P)+C[4]+1272893353&4294967295,V=x+(D<<11&4294967295|D>>>21),D=P+(V^x^R)+C[7]+4139469664&4294967295,P=V+(D<<16&4294967295|D>>>16),D=R+(P^V^x)+C[10]+3200236656&4294967295,R=P+(D<<23&4294967295|D>>>9),D=x+(R^P^V)+C[13]+681279174&4294967295,x=R+(D<<4&4294967295|D>>>28),D=V+(x^R^P)+C[0]+3936430074&4294967295,V=x+(D<<11&4294967295|D>>>21),D=P+(V^x^R)+C[3]+3572445317&4294967295,P=V+(D<<16&4294967295|D>>>16),D=R+(P^V^x)+C[6]+76029189&4294967295,R=P+(D<<23&4294967295|D>>>9),D=x+(R^P^V)+C[9]+3654602809&4294967295,x=R+(D<<4&4294967295|D>>>28),D=V+(x^R^P)+C[12]+3873151461&4294967295,V=x+(D<<11&4294967295|D>>>21),D=P+(V^x^R)+C[15]+530742520&4294967295,P=V+(D<<16&4294967295|D>>>16),D=R+(P^V^x)+C[2]+3299628645&4294967295,R=P+(D<<23&4294967295|D>>>9),D=x+(P^(R|~V))+C[0]+4096336452&4294967295,x=R+(D<<6&4294967295|D>>>26),D=V+(R^(x|~P))+C[7]+1126891415&4294967295,V=x+(D<<10&4294967295|D>>>22),D=P+(x^(V|~R))+C[14]+2878612391&4294967295,P=V+(D<<15&4294967295|D>>>17),D=R+(V^(P|~x))+C[5]+4237533241&4294967295,R=P+(D<<21&4294967295|D>>>11),D=x+(P^(R|~V))+C[12]+1700485571&4294967295,x=R+(D<<6&4294967295|D>>>26),D=V+(R^(x|~P))+C[3]+2399980690&4294967295,V=x+(D<<10&4294967295|D>>>22),D=P+(x^(V|~R))+C[10]+4293915773&4294967295,P=V+(D<<15&4294967295|D>>>17),D=R+(V^(P|~x))+C[1]+2240044497&4294967295,R=P+(D<<21&4294967295|D>>>11),D=x+(P^(R|~V))+C[8]+1873313359&4294967295,x=R+(D<<6&4294967295|D>>>26),D=V+(R^(x|~P))+C[15]+4264355552&4294967295,V=x+(D<<10&4294967295|D>>>22),D=P+(x^(V|~R))+C[6]+2734768916&4294967295,P=V+(D<<15&4294967295|D>>>17),D=R+(V^(P|~x))+C[13]+1309151649&4294967295,R=P+(D<<21&4294967295|D>>>11),D=x+(P^(R|~V))+C[4]+4149444226&4294967295,x=R+(D<<6&4294967295|D>>>26),D=V+(R^(x|~P))+C[11]+3174756917&4294967295,V=x+(D<<10&4294967295|D>>>22),D=P+(x^(V|~R))+C[2]+718787259&4294967295,P=V+(D<<15&4294967295|D>>>17),D=R+(V^(P|~x))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+x&4294967295,T.g[1]=T.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,T.g[2]=T.g[2]+P&4294967295,T.g[3]=T.g[3]+V&4294967295}i.prototype.v=function(T,x){x===void 0&&(x=T.length);const R=x-this.blockSize,C=this.C;let P=this.h,V=0;for(;V<x;){if(P==0)for(;V<=R;)r(this,T,V),V+=this.blockSize;if(typeof T=="string"){for(;V<x;)if(C[P++]=T.charCodeAt(V++),P==this.blockSize){r(this,C),P=0;break}}else for(;V<x;)if(C[P++]=T[V++],P==this.blockSize){r(this,C),P=0;break}}this.h=P,this.o+=x},i.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var x=1;x<T.length-8;++x)T[x]=0;x=this.o*8;for(var R=T.length-8;R<T.length;++R)T[R]=x&255,x/=256;for(this.v(T),T=Array(16),x=0,R=0;R<4;++R)for(let C=0;C<32;C+=8)T[x++]=this.g[R]>>>C&255;return T};function s(T,x){var R=o;return Object.prototype.hasOwnProperty.call(R,T)?R[T]:R[T]=x(T)}function a(T,x){this.h=x;const R=[];let C=!0;for(let P=T.length-1;P>=0;P--){const V=T[P]|0;C&&V==x||(R[P]=V,C=!1)}this.g=R}var o={};function l(T){return-128<=T&&T<128?s(T,function(x){return new a([x|0],x<0?-1:0)}):new a([T|0],T<0?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return d;if(T<0)return b(c(-T));const x=[];let R=1;for(let C=0;T>=R;C++)x[C]=T/R|0,R*=4294967296;return new a(x,0)}function h(T,x){if(T.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(T.charAt(0)=="-")return b(h(T.substring(1),x));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=c(Math.pow(x,8));let C=d;for(let V=0;V<T.length;V+=8){var P=Math.min(8,T.length-V);const D=parseInt(T.substring(V,V+P),x);P<8?(P=c(Math.pow(x,P)),C=C.j(P).add(c(D))):(C=C.j(R),C=C.add(c(D)))}return C}var d=l(0),f=l(1),g=l(16777216);t=a.prototype,t.m=function(){if(S(this))return-b(this).m();let T=0,x=1;for(let R=0;R<this.g.length;R++){const C=this.i(R);T+=(C>=0?C:4294967296+C)*x,x*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(S(this))return"-"+b(this).toString(T);const x=c(Math.pow(T,6));var R=this;let C="";for(;;){const P=I(R,x).g;R=y(R,P.j(x));let V=((R.g.length>0?R.g[0]:R.h)>>>0).toString(T);if(R=P,E(R))return V+C;for(;V.length<6;)V="0"+V;C=V+C}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(let x=0;x<T.g.length;x++)if(T.g[x]!=0)return!1;return!0}function S(T){return T.h==-1}t.l=function(T){return T=y(this,T),S(T)?-1:E(T)?0:1};function b(T){const x=T.g.length,R=[];for(let C=0;C<x;C++)R[C]=~T.g[C];return new a(R,~T.h).add(f)}t.abs=function(){return S(this)?b(this):this},t.add=function(T){const x=Math.max(this.g.length,T.g.length),R=[];let C=0;for(let P=0;P<=x;P++){let V=C+(this.i(P)&65535)+(T.i(P)&65535),D=(V>>>16)+(this.i(P)>>>16)+(T.i(P)>>>16);C=D>>>16,V&=65535,D&=65535,R[P]=D<<16|V}return new a(R,R[R.length-1]&-2147483648?-1:0)};function y(T,x){return T.add(b(x))}t.j=function(T){if(E(this)||E(T))return d;if(S(this))return S(T)?b(this).j(b(T)):b(b(this).j(T));if(S(T))return b(this.j(b(T)));if(this.l(g)<0&&T.l(g)<0)return c(this.m()*T.m());const x=this.g.length+T.g.length,R=[];for(var C=0;C<2*x;C++)R[C]=0;for(C=0;C<this.g.length;C++)for(let P=0;P<T.g.length;P++){const V=this.i(C)>>>16,D=this.i(C)&65535,q=T.i(P)>>>16,ee=T.i(P)&65535;R[2*C+2*P]+=D*ee,_(R,2*C+2*P),R[2*C+2*P+1]+=V*ee,_(R,2*C+2*P+1),R[2*C+2*P+1]+=D*q,_(R,2*C+2*P+1),R[2*C+2*P+2]+=V*q,_(R,2*C+2*P+2)}for(T=0;T<x;T++)R[T]=R[2*T+1]<<16|R[2*T];for(T=x;T<2*x;T++)R[T]=0;return new a(R,0)};function _(T,x){for(;(T[x]&65535)!=T[x];)T[x+1]+=T[x]>>>16,T[x]&=65535,x++}function v(T,x){this.g=T,this.h=x}function I(T,x){if(E(x))throw Error("division by zero");if(E(T))return new v(d,d);if(S(T))return x=I(b(T),x),new v(b(x.g),b(x.h));if(S(x))return x=I(T,b(x)),new v(b(x.g),x.h);if(T.g.length>30){if(S(T)||S(x))throw Error("slowDivide_ only works with positive integers.");for(var R=f,C=x;C.l(T)<=0;)R=k(R),C=k(C);var P=O(R,1),V=O(C,1);for(C=O(C,2),R=O(R,2);!E(C);){var D=V.add(C);D.l(T)<=0&&(P=P.add(R),V=D),C=O(C,1),R=O(R,1)}return x=y(T,P.j(x)),new v(P,x)}for(P=d;T.l(x)>=0;){for(R=Math.max(1,Math.floor(T.m()/x.m())),C=Math.ceil(Math.log(R)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),V=c(R),D=V.j(x);S(D)||D.l(T)>0;)R-=C,V=c(R),D=V.j(x);E(V)&&(V=f),P=P.add(V),T=y(T,D)}return new v(P,T)}t.B=function(T){return I(this,T).h},t.and=function(T){const x=Math.max(this.g.length,T.g.length),R=[];for(let C=0;C<x;C++)R[C]=this.i(C)&T.i(C);return new a(R,this.h&T.h)},t.or=function(T){const x=Math.max(this.g.length,T.g.length),R=[];for(let C=0;C<x;C++)R[C]=this.i(C)|T.i(C);return new a(R,this.h|T.h)},t.xor=function(T){const x=Math.max(this.g.length,T.g.length),R=[];for(let C=0;C<x;C++)R[C]=this.i(C)^T.i(C);return new a(R,this.h^T.h)};function k(T){const x=T.g.length+1,R=[];for(let C=0;C<x;C++)R[C]=T.i(C)<<1|T.i(C-1)>>>31;return new a(R,T.h)}function O(T,x){const R=x>>5;x%=32;const C=T.g.length-R,P=[];for(let V=0;V<C;V++)P[V]=x>0?T.i(V+R)>>>x|T.i(V+R+1)<<32-x:T.i(V+R);return new a(P,T.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Vk=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=h,js=a}).apply(typeof R1<"u"?R1:typeof self<"u"?self:typeof window<"u"?window:{});var jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mk,Vu,Lk,Em,I0,Uk,jk,zk;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof jf=="object"&&jf];for(var p=0;p<u.length;++p){var w=u[p];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function r(u,p){if(p)e:{var w=i;u=u.split(".");for(var N=0;N<u.length-1;N++){var L=u[N];if(!(L in w))break e;w=w[L]}u=u[u.length-1],N=w[u],p=p(N),p!=N&&p!=null&&e(w,u,{configurable:!0,writable:!0,value:p})}}r("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(u){return u||function(p){var w=[],N;for(N in p)Object.prototype.hasOwnProperty.call(p,N)&&w.push([N,p[N]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function o(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function l(u,p,w){return u.call.apply(u.bind,arguments)}function c(u,p,w){return c=l,c.apply(null,arguments)}function h(u,p){var w=Array.prototype.slice.call(arguments,1);return function(){var N=w.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function d(u,p){function w(){}w.prototype=p.prototype,u.Z=p.prototype,u.prototype=new w,u.prototype.constructor=u,u.Ob=function(N,L,j){for(var K=Array(arguments.length-2),he=2;he<arguments.length;he++)K[he-2]=arguments[he];return p.prototype[L].apply(N,K)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function g(u){const p=u.length;if(p>0){const w=Array(p);for(let N=0;N<p;N++)w[N]=u[N];return w}return[]}function E(u,p){for(let N=1;N<arguments.length;N++){const L=arguments[N];var w=typeof L;if(w=w!="object"?w:L?Array.isArray(L)?"array":w:"null",w=="array"||w=="object"&&typeof L.length=="number"){w=u.length||0;const j=L.length||0;u.length=w+j;for(let K=0;K<j;K++)u[w+K]=L[K]}else u.push(L)}}class S{constructor(p,w){this.i=p,this.j=w,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function b(u){a.setTimeout(()=>{throw u},0)}function y(){var u=T;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class _{constructor(){this.h=this.g=null}add(p,w){const N=v.get();N.set(p,w),this.h?this.h.next=N:this.g=N,this.h=N}}var v=new S(()=>new I,u=>u.reset());class I{constructor(){this.next=this.g=this.h=null}set(p,w){this.h=p,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let k,O=!1,T=new _,x=()=>{const u=Promise.resolve(void 0);k=()=>{u.then(R)}};function R(){for(var u;u=y();){try{u.h.call(u.g)}catch(w){b(w)}var p=v;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}O=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var V=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const w=()=>{};a.addEventListener("test",w,p),a.removeEventListener("test",w,p)}catch{}return u}();function D(u){return/^[\s\xa0]*$/.test(u)}function q(u,p){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}d(q,P),q.prototype.init=function(u,p){const w=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(w=="mouseover"?p=u.fromElement:w=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&q.Z.h.call(this)},q.prototype.h=function(){q.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ee="closure_listenable_"+(Math.random()*1e6|0),z=0;function Q(u,p,w,N,L){this.listener=u,this.proxy=null,this.src=p,this.type=w,this.capture=!!N,this.ha=L,this.key=++z,this.da=this.fa=!1}function X(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ie(u,p,w){for(const N in u)p.call(w,u[N],N,u)}function le(u,p){for(const w in u)p.call(void 0,u[w],w,u)}function qe(u){const p={};for(const w in u)p[w]=u[w];return p}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ee(u,p){let w,N;for(let L=1;L<arguments.length;L++){N=arguments[L];for(w in N)u[w]=N[w];for(let j=0;j<ne.length;j++)w=ne[j],Object.prototype.hasOwnProperty.call(N,w)&&(u[w]=N[w])}}function bt(u){this.src=u,this.g={},this.h=0}bt.prototype.add=function(u,p,w,N,L){const j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);const K=Oo(u,p,N,L);return K>-1?(p=u[K],w||(p.fa=!1)):(p=new Q(p,this.src,j,!!N,L),p.fa=w,u.push(p)),p};function bi(u,p){const w=p.type;if(w in u.g){var N=u.g[w],L=Array.prototype.indexOf.call(N,p,void 0),j;(j=L>=0)&&Array.prototype.splice.call(N,L,1),j&&(X(p),u.g[w].length==0&&(delete u.g[w],u.h--))}}function Oo(u,p,w,N){for(let L=0;L<u.length;++L){const j=u[L];if(!j.da&&j.listener==p&&j.capture==!!w&&j.ha==N)return L}return-1}var Vo="closure_lm_"+(Math.random()*1e6|0),Mo={};function ya(u,p,w,N,L){if(Array.isArray(p)){for(let j=0;j<p.length;j++)ya(u,p[j],w,N,L);return null}return w=hx(w),u&&u[ee]?u.J(p,w,o(N)?!!N.capture:!1,L):vy(u,p,w,!1,N,L)}function vy(u,p,w,N,L,j){if(!p)throw Error("Invalid event type");const K=o(L)?!!L.capture:!!L;let he=by(u);if(he||(u[Vo]=he=new bt(u)),w=he.add(p,w,N,K,j),w.proxy)return w;if(N=$5(),w.proxy=N,N.src=u,N.listener=w,u.addEventListener)V||(L=K),L===void 0&&(L=!1),u.addEventListener(p.toString(),N,L);else if(u.attachEvent)u.attachEvent(ux(p.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return w}function $5(){function u(w){return p.call(u.src,u.listener,w)}const p=K5;return u}function cx(u,p,w,N,L){if(Array.isArray(p))for(var j=0;j<p.length;j++)cx(u,p[j],w,N,L);else N=o(N)?!!N.capture:!!N,w=hx(w),u&&u[ee]?(u=u.i,j=String(p).toString(),j in u.g&&(p=u.g[j],w=Oo(p,w,N,L),w>-1&&(X(p[w]),Array.prototype.splice.call(p,w,1),p.length==0&&(delete u.g[j],u.h--)))):u&&(u=by(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Oo(p,w,N,L)),(w=u>-1?p[u]:null)&&wy(w))}function wy(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ee])bi(p.i,u);else{var w=u.type,N=u.proxy;p.removeEventListener?p.removeEventListener(w,N,u.capture):p.detachEvent?p.detachEvent(ux(w),N):p.addListener&&p.removeListener&&p.removeListener(N),(w=by(p))?(bi(w,u),w.h==0&&(w.src=null,p[Vo]=null)):X(u)}}}function ux(u){return u in Mo?Mo[u]:Mo[u]="on"+u}function K5(u,p){if(u.da)u=!0;else{p=new q(p,this);const w=u.listener,N=u.ha||u.src;u.fa&&wy(u),u=w.call(N,p)}return u}function by(u){return u=u[Vo],u instanceof bt?u:null}var Ty="__closure_events_fn_"+(Math.random()*1e9>>>0);function hx(u){return typeof u=="function"?u:(u[Ty]||(u[Ty]=function(p){return u.handleEvent(p)}),u[Ty])}function Zt(){C.call(this),this.i=new bt(this),this.M=this,this.G=null}d(Zt,C),Zt.prototype[ee]=!0,Zt.prototype.removeEventListener=function(u,p,w,N){cx(this,u,p,w,N)};function un(u,p){var w,N=u.G;if(N)for(w=[];N;N=N.G)w.push(N);if(u=u.M,N=p.type||p,typeof p=="string")p=new P(p,u);else if(p instanceof P)p.target=p.target||u;else{var L=p;p=new P(N,u),Ee(p,L)}L=!0;let j,K;if(w)for(K=w.length-1;K>=0;K--)j=p.g=w[K],L=lf(j,N,!0,p)&&L;if(j=p.g=u,L=lf(j,N,!0,p)&&L,L=lf(j,N,!1,p)&&L,w)for(K=0;K<w.length;K++)j=p.g=w[K],L=lf(j,N,!1,p)&&L}Zt.prototype.N=function(){if(Zt.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const w=u.g[p];for(let N=0;N<w.length;N++)X(w[N]);delete u.g[p],u.h--}}this.G=null},Zt.prototype.J=function(u,p,w,N){return this.i.add(String(u),p,!1,w,N)},Zt.prototype.K=function(u,p,w,N){return this.i.add(String(u),p,!0,w,N)};function lf(u,p,w,N){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let L=!0;for(let j=0;j<p.length;++j){const K=p[j];if(K&&!K.da&&K.capture==w){const he=K.listener,Ct=K.ha||K.src;K.fa&&bi(u.i,K),L=he.call(Ct,N)!==!1&&L}}return L&&!N.defaultPrevented}function W5(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:a.setTimeout(u,p||0)}function dx(u){u.g=W5(()=>{u.g=null,u.i&&(u.i=!1,dx(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Q5 extends C{constructor(p,w){super(),this.m=p,this.l=w,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:dx(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gc(u){C.call(this),this.h=u,this.g={}}d(Gc,C);var fx=[];function mx(u){ie(u.g,function(p,w){this.g.hasOwnProperty(w)&&wy(p)},u),u.g={}}Gc.prototype.N=function(){Gc.Z.N.call(this),mx(this)},Gc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ey=a.JSON.stringify,Y5=a.JSON.parse,X5=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function px(){}function gx(){}var $c={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xy(){P.call(this,"d")}d(xy,P);function Sy(){P.call(this,"c")}d(Sy,P);var _a={},yx=null;function cf(){return yx=yx||new Zt}_a.Ia="serverreachability";function _x(u){P.call(this,_a.Ia,u)}d(_x,P);function Kc(u){const p=cf();un(p,new _x(p))}_a.STAT_EVENT="statevent";function vx(u,p){P.call(this,_a.STAT_EVENT,u),this.stat=p}d(vx,P);function hn(u){const p=cf();un(p,new vx(p,u))}_a.Ja="timingevent";function wx(u,p){P.call(this,_a.Ja,u),this.size=p}d(wx,P);function Wc(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function Qc(){this.g=!0}Qc.prototype.ua=function(){this.g=!1};function J5(u,p,w,N,L,j){u.info(function(){if(u.g)if(j){var K="",he=j.split("&");for(let Ue=0;Ue<he.length;Ue++){var Ct=he[Ue].split("=");if(Ct.length>1){const Ot=Ct[0];Ct=Ct[1];const Vi=Ot.split("_");K=Vi.length>=2&&Vi[1]=="type"?K+(Ot+"="+Ct+"&"):K+(Ot+"=redacted&")}}}else K=null;else K=j;return"XMLHTTP REQ ("+N+") [attempt "+L+"]: "+p+`
`+w+`
`+K})}function Z5(u,p,w,N,L,j,K){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+L+"]: "+p+`
`+w+`
`+j+" "+K})}function Lo(u,p,w,N){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+t4(u,w)+(N?" "+N:"")})}function e4(u,p){u.info(function(){return"TIMEOUT: "+p})}Qc.prototype.info=function(){};function t4(u,p){if(!u.g)return p;if(!p)return null;try{const j=JSON.parse(p);if(j){for(u=0;u<j.length;u++)if(Array.isArray(j[u])){var w=j[u];if(!(w.length<2)){var N=w[1];if(Array.isArray(N)&&!(N.length<1)){var L=N[0];if(L!="noop"&&L!="stop"&&L!="close")for(let K=1;K<N.length;K++)N[K]=""}}}}return Ey(j)}catch{return p}}var uf={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bx={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Tx;function Iy(){}d(Iy,px),Iy.prototype.g=function(){return new XMLHttpRequest},Tx=new Iy;function Yc(u){return encodeURIComponent(String(u))}function n4(u){var p=1;u=u.split(":");const w=[];for(;p>0&&u.length;)w.push(u.shift()),p--;return u.length&&w.push(u.join(":")),w}function Jr(u,p,w,N){this.j=u,this.i=p,this.l=w,this.S=N||1,this.V=new Gc(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ex}function Ex(){this.i=null,this.g="",this.h=!1}var xx={},Ay={};function Ry(u,p,w){u.M=1,u.A=df(Oi(p)),u.u=w,u.R=!0,Sx(u,null)}function Sx(u,p){u.F=Date.now(),hf(u),u.B=Oi(u.A);var w=u.B,N=u.S;Array.isArray(N)||(N=[String(N)]),Ux(w.i,"t",N),u.C=0,w=u.j.L,u.h=new Ex,u.g=nS(u.j,w?p:null,!u.u),u.P>0&&(u.O=new Q5(c(u.Y,u,u.g),u.P)),p=u.V,w=u.g,N=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(fx[0]=L.toString()),L=fx);for(let j=0;j<L.length;j++){const K=ya(w,L[j],N||p.handleEvent,!1,p.h||p);if(!K)break;p.g[K.key]=K}p=u.J?qe(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),Kc(),J5(u.i,u.v,u.B,u.l,u.S,u.u)}Jr.prototype.ba=function(u){u=u.target;const p=this.O;p&&ts(u)==3?p.j():this.Y(u)},Jr.prototype.Y=function(u){try{if(u==this.g)e:{const he=ts(this.g),Ct=this.g.ya(),Ue=this.g.ca();if(!(he<3)&&(he!=3||this.g&&(this.h.h||this.g.la()||Gx(this.g)))){this.K||he!=4||Ct==7||(Ct==8||Ue<=0?Kc(3):Kc(2)),Cy(this);var p=this.g.ca();this.X=p;var w=i4(this);if(this.o=p==200,Z5(this.i,this.v,this.B,this.l,this.S,he,p),this.o){if(this.U&&!this.L){t:{if(this.g){var N,L=this.g;if((N=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(N)){var j=N;break t}}j=null}if(u=j)Lo(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ny(this,u);else{this.o=!1,this.m=3,hn(12),va(this),Xc(this);break e}}if(this.R){u=!0;let Ot;for(;!this.K&&this.C<w.length;)if(Ot=r4(this,w),Ot==Ay){he==4&&(this.m=4,hn(14),u=!1),Lo(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==xx){this.m=4,hn(15),Lo(this.i,this.l,w,"[Invalid Chunk]"),u=!1;break}else Lo(this.i,this.l,Ot,null),Ny(this,Ot);if(Ix(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),he!=4||w.length!=0||this.h.h||(this.m=1,hn(16),u=!1),this.o=this.o&&u,!u)Lo(this.i,this.l,w,"[Invalid Chunked Response]"),va(this),Xc(this);else if(w.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Uy(K),K.P=!0,hn(11))}}else Lo(this.i,this.l,w,null),Ny(this,w);he==4&&va(this),this.o&&!this.K&&(he==4?Jx(this.j,this):(this.o=!1,hf(this)))}else _4(this.g),p==400&&w.indexOf("Unknown SID")>0?(this.m=3,hn(12)):(this.m=0,hn(13)),va(this),Xc(this)}}}catch{}finally{}};function i4(u){if(!Ix(u))return u.g.la();const p=Gx(u.g);if(p==="")return"";let w="";const N=p.length,L=ts(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return va(u),Xc(u),"";u.h.i=new a.TextDecoder}for(let j=0;j<N;j++)u.h.h=!0,w+=u.h.i.decode(p[j],{stream:!(L&&j==N-1)});return p.length=0,u.h.g+=w,u.C=0,u.h.g}function Ix(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function r4(u,p){var w=u.C,N=p.indexOf(`
`,w);return N==-1?Ay:(w=Number(p.substring(w,N)),isNaN(w)?xx:(N+=1,N+w>p.length?Ay:(p=p.slice(N,N+w),u.C=N+w,p)))}Jr.prototype.cancel=function(){this.K=!0,va(this)};function hf(u){u.T=Date.now()+u.H,Ax(u,u.H)}function Ax(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Wc(c(u.aa,u),p)}function Cy(u){u.D&&(a.clearTimeout(u.D),u.D=null)}Jr.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(e4(this.i,this.B),this.M!=2&&(Kc(),hn(17)),va(this),this.m=2,Xc(this)):Ax(this,this.T-u)};function Xc(u){u.j.I==0||u.K||Jx(u.j,u)}function va(u){Cy(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,mx(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function Ny(u,p){try{var w=u.j;if(w.I!=0&&(w.g==u||Py(w.h,u))){if(!u.L&&Py(w.h,u)&&w.I==3){try{var N=w.Ba.g.parse(p)}catch{N=null}if(Array.isArray(N)&&N.length==3){var L=N;if(L[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<u.F)yf(w),pf(w);else break e;Ly(w),hn(18)}}else w.xa=L[1],0<w.xa-w.K&&L[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Wc(c(w.Va,w),6e3));Nx(w.h)<=1&&w.ta&&(w.ta=void 0)}else ba(w,11)}else if((u.L||w.g==u)&&yf(w),!D(p))for(L=w.Ba.g.parse(p),p=0;p<L.length;p++){let Ue=L[p];const Ot=Ue[0];if(!(Ot<=w.K))if(w.K=Ot,Ue=Ue[1],w.I==2)if(Ue[0]=="c"){w.M=Ue[1],w.ba=Ue[2];const Vi=Ue[3];Vi!=null&&(w.ka=Vi,w.j.info("VER="+w.ka));const Ta=Ue[4];Ta!=null&&(w.za=Ta,w.j.info("SVER="+w.za));const ns=Ue[5];ns!=null&&typeof ns=="number"&&ns>0&&(N=1.5*ns,w.O=N,w.j.info("backChannelRequestTimeoutMs_="+N)),N=w;const is=u.g;if(is){const vf=is.g?is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vf){var j=N.h;j.g||vf.indexOf("spdy")==-1&&vf.indexOf("quic")==-1&&vf.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Dy(j,j.h),j.h=null))}if(N.G){const jy=is.g?is.g.getResponseHeader("X-HTTP-Session-Id"):null;jy&&(N.wa=jy,He(N.J,N.G,jy))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-u.F,w.j.info("Handshake RTT: "+w.T+"ms")),N=w;var K=u;if(N.na=tS(N,N.L?N.ba:null,N.W),K.L){Px(N.h,K);var he=K,Ct=N.O;Ct&&(he.H=Ct),he.D&&(Cy(he),hf(he)),N.g=K}else Yx(N);w.i.length>0&&gf(w)}else Ue[0]!="stop"&&Ue[0]!="close"||ba(w,7);else w.I==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?ba(w,7):My(w):Ue[0]!="noop"&&w.l&&w.l.qa(Ue),w.A=0)}}Kc(4)}catch{}}var s4=class{constructor(u,p){this.g=u,this.map=p}};function Rx(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Cx(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Nx(u){return u.h?1:u.g?u.g.size:0}function Py(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Dy(u,p){u.g?u.g.add(p):u.h=p}function Px(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Rx.prototype.cancel=function(){if(this.i=Dx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Dx(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const w of u.g.values())p=p.concat(w.G);return p}return g(u.i)}var kx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function a4(u,p){if(u){u=u.split("&");for(let w=0;w<u.length;w++){const N=u[w].indexOf("=");let L,j=null;N>=0?(L=u[w].substring(0,N),j=u[w].substring(N+1)):L=u[w],p(L,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Zr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof Zr?(this.l=u.l,Jc(this,u.j),this.o=u.o,this.g=u.g,Zc(this,u.u),this.h=u.h,ky(this,jx(u.i)),this.m=u.m):u&&(p=String(u).match(kx))?(this.l=!1,Jc(this,p[1]||"",!0),this.o=eu(p[2]||""),this.g=eu(p[3]||"",!0),Zc(this,p[4]),this.h=eu(p[5]||"",!0),ky(this,p[6]||"",!0),this.m=eu(p[7]||"")):(this.l=!1,this.i=new nu(null,this.l))}Zr.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(tu(p,Ox,!0),":");var w=this.g;return(w||p=="file")&&(u.push("//"),(p=this.o)&&u.push(tu(p,Ox,!0),"@"),u.push(Yc(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&u.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&u.push("/"),u.push(tu(w,w.charAt(0)=="/"?c4:l4,!0))),(w=this.i.toString())&&u.push("?",w),(w=this.m)&&u.push("#",tu(w,h4)),u.join("")},Zr.prototype.resolve=function(u){const p=Oi(this);let w=!!u.j;w?Jc(p,u.j):w=!!u.o,w?p.o=u.o:w=!!u.g,w?p.g=u.g:w=u.u!=null;var N=u.h;if(w)Zc(p,u.u);else if(w=!!u.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var L=p.h.lastIndexOf("/");L!=-1&&(N=p.h.slice(0,L+1)+N)}if(L=N,L==".."||L==".")N="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){N=L.lastIndexOf("/",0)==0,L=L.split("/");const j=[];for(let K=0;K<L.length;){const he=L[K++];he=="."?N&&K==L.length&&j.push(""):he==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),N&&K==L.length&&j.push("")):(j.push(he),N=!0)}N=j.join("/")}else N=L}return w?p.h=N:w=u.i.toString()!=="",w?ky(p,jx(u.i)):w=!!u.m,w&&(p.m=u.m),p};function Oi(u){return new Zr(u)}function Jc(u,p,w){u.j=w?eu(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Zc(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function ky(u,p,w){p instanceof nu?(u.i=p,d4(u.i,u.l)):(w||(p=tu(p,u4)),u.i=new nu(p,u.l))}function He(u,p,w){u.i.set(p,w)}function df(u){return He(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function eu(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function tu(u,p,w){return typeof u=="string"?(u=encodeURI(u).replace(p,o4),w&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function o4(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ox=/[#\/\?@]/g,l4=/[#\?:]/g,c4=/[#\?]/g,u4=/[#\?@]/g,h4=/#/g;function nu(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function wa(u){u.g||(u.g=new Map,u.h=0,u.i&&a4(u.i,function(p,w){u.add(decodeURIComponent(p.replace(/\+/g," ")),w)}))}t=nu.prototype,t.add=function(u,p){wa(this),this.i=null,u=Uo(this,u);let w=this.g.get(u);return w||this.g.set(u,w=[]),w.push(p),this.h+=1,this};function Vx(u,p){wa(u),p=Uo(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Mx(u,p){return wa(u),p=Uo(u,p),u.g.has(p)}t.forEach=function(u,p){wa(this),this.g.forEach(function(w,N){w.forEach(function(L){u.call(p,L,N,this)},this)},this)};function Lx(u,p){wa(u);let w=[];if(typeof p=="string")Mx(u,p)&&(w=w.concat(u.g.get(Uo(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)w=w.concat(u[p]);return w}t.set=function(u,p){return wa(this),this.i=null,u=Uo(this,u),Mx(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=Lx(this,u),u.length>0?String(u[0]):p):p};function Ux(u,p,w){Vx(u,p),w.length>0&&(u.i=null,u.g.set(Uo(u,p),g(w)),u.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let N=0;N<p.length;N++){var w=p[N];const L=Yc(w);w=Lx(this,w);for(let j=0;j<w.length;j++){let K=L;w[j]!==""&&(K+="="+Yc(w[j])),u.push(K)}}return this.i=u.join("&")};function jx(u){const p=new nu;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function Uo(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function d4(u,p){p&&!u.j&&(wa(u),u.i=null,u.g.forEach(function(w,N){const L=N.toLowerCase();N!=L&&(Vx(this,N),Ux(this,L,w))},u)),u.j=p}function f4(u,p){const w=new Qc;if(a.Image){const N=new Image;N.onload=h(es,w,"TestLoadImage: loaded",!0,p,N),N.onerror=h(es,w,"TestLoadImage: error",!1,p,N),N.onabort=h(es,w,"TestLoadImage: abort",!1,p,N),N.ontimeout=h(es,w,"TestLoadImage: timeout",!1,p,N),a.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else p(!1)}function m4(u,p){const w=new Qc,N=new AbortController,L=setTimeout(()=>{N.abort(),es(w,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:N.signal}).then(j=>{clearTimeout(L),j.ok?es(w,"TestPingServer: ok",!0,p):es(w,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),es(w,"TestPingServer: error",!1,p)})}function es(u,p,w,N,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),N(w)}catch{}}function p4(){this.g=new X5}function Oy(u){this.i=u.Sb||null,this.h=u.ab||!1}d(Oy,px),Oy.prototype.g=function(){return new ff(this.i,this.h)};function ff(u,p){Zt.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(ff,Zt),t=ff.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,ru(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||a).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,iu(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ru(this)),this.g&&(this.readyState=3,ru(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zx(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function zx(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?iu(this):ru(this),this.readyState==3&&zx(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,iu(this))},t.Na=function(u){this.g&&(this.response=u,iu(this))},t.ga=function(){this.g&&iu(this)};function iu(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ru(u)}t.setRequestHeader=function(u,p){this.A.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var w=p.next();!w.done;)w=w.value,u.push(w[0]+": "+w[1]),w=p.next();return u.join(`\r
`)};function ru(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ff.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Fx(u){let p="";return ie(u,function(w,N){p+=N,p+=":",p+=w,p+=`\r
`}),p}function Vy(u,p,w){e:{for(N in w){var N=!1;break e}N=!0}N||(w=Fx(w),typeof u=="string"?w!=null&&Yc(w):He(u,p,w))}function ot(u){Zt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(ot,Zt);var g4=/^https?$/i,y4=["POST","PUT"];t=ot.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,p,w,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Tx.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(j){Bx(this,j);return}if(u=w||"",w=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var L in N)w.set(L,N[L]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const j of N.keys())w.set(j,N.get(j));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(w.keys()).find(j=>j.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(Array.prototype.indexOf.call(y4,p,void 0)>=0)||N||L||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,K]of w)this.g.setRequestHeader(j,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(j){Bx(this,j)}};function Bx(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,qx(u),mf(u)}function qx(u){u.A||(u.A=!0,un(u,"complete"),un(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,un(this,"complete"),un(this,"abort"),mf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mf(this,!0)),ot.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Hx(this):this.Xa())},t.Xa=function(){Hx(this)};function Hx(u){if(u.h&&typeof s<"u"){if(u.v&&ts(u)==4)setTimeout(u.Ca.bind(u),0);else if(un(u,"readystatechange"),ts(u)==4){u.h=!1;try{const j=u.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var w;if(!(w=p)){var N;if(N=j===0){let K=String(u.D).match(kx)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),N=!g4.test(K?K.toLowerCase():"")}w=N}if(w)un(u,"complete"),un(u,"success");else{u.o=6;try{var L=ts(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",qx(u)}}finally{mf(u)}}}}function mf(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const w=u.g;u.g=null,p||un(u,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ts(u){return u.g?u.g.readyState:0}t.ca=function(){try{return ts(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Y5(p)}};function Gx(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function _4(u){const p={};u=(u.g&&ts(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(D(u[N]))continue;var w=n4(u[N]);const L=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const j=p[L]||[];p[L]=j,j.push(w)}le(p,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function su(u,p,w){return w&&w.internalChannelParams&&w.internalChannelParams[u]||p}function $x(u){this.za=0,this.i=[],this.j=new Qc,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=su("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=su("baseRetryDelayMs",5e3,u),this.Za=su("retryDelaySeedMs",1e4,u),this.Ta=su("forwardChannelMaxRetries",2,u),this.va=su("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Rx(u&&u.concurrentRequestLimit),this.Ba=new p4,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=$x.prototype,t.ka=8,t.I=1,t.connect=function(u,p,w,N){hn(0),this.W=u,this.H=p||{},w&&N!==void 0&&(this.H.OSID=w,this.H.OAID=N),this.F=this.X,this.J=tS(this,null,this.W),gf(this)};function My(u){if(Kx(u),u.I==3){var p=u.V++,w=Oi(u.J);if(He(w,"SID",u.M),He(w,"RID",p),He(w,"TYPE","terminate"),au(u,w),p=new Jr(u,u.j,p),p.M=2,p.A=df(Oi(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(p.A.toString(),"")}catch{}!w&&a.Image&&(new Image().src=p.A,w=!0),w||(p.g=nS(p.j,null),p.g.ea(p.A)),p.F=Date.now(),hf(p)}eS(u)}function pf(u){u.g&&(Uy(u),u.g.cancel(),u.g=null)}function Kx(u){pf(u),u.v&&(a.clearTimeout(u.v),u.v=null),yf(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&a.clearTimeout(u.m),u.m=null)}function gf(u){if(!Cx(u.h)&&!u.m){u.m=!0;var p=u.Ea;k||x(),O||(k(),O=!0),T.add(p,u),u.D=0}}function v4(u,p){return Nx(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Wc(c(u.Ea,u,p),Zx(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new Jr(this,this.j,u);let j=this.o;if(this.U&&(j?(j=qe(j),Ee(j,this.U)):j=this.U),this.u!==null||this.R||(L.J=j,j=null),this.S)e:{for(var p=0,w=0;w<this.i.length;w++){t:{var N=this.i[w];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(p+=N,p>4096){p=w;break e}if(p===4096||w===this.i.length-1){p=w+1;break e}}p=1e3}else p=1e3;p=Qx(this,L,p),w=Oi(this.J),He(w,"RID",u),He(w,"CVER",22),this.G&&He(w,"X-HTTP-Session-Id",this.G),au(this,w),j&&(this.R?p="headers="+Yc(Fx(j))+"&"+p:this.u&&Vy(w,this.u,j)),Dy(this.h,L),this.Ra&&He(w,"TYPE","init"),this.S?(He(w,"$req",p),He(w,"SID","null"),L.U=!0,Ry(L,w,null)):Ry(L,w,p),this.I=2}}else this.I==3&&(u?Wx(this,u):this.i.length==0||Cx(this.h)||Wx(this))};function Wx(u,p){var w;p?w=p.l:w=u.V++;const N=Oi(u.J);He(N,"SID",u.M),He(N,"RID",w),He(N,"AID",u.K),au(u,N),u.u&&u.o&&Vy(N,u.u,u.o),w=new Jr(u,u.j,w,u.D+1),u.u===null&&(w.J=u.o),p&&(u.i=p.G.concat(u.i)),p=Qx(u,w,1e3),w.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Dy(u.h,w),Ry(w,N,p)}function au(u,p){u.H&&ie(u.H,function(w,N){He(p,N,w)}),u.l&&ie({},function(w,N){He(p,N,w)})}function Qx(u,p,w){w=Math.min(u.i.length,w);const N=u.l?c(u.l.Ka,u.l,u):null;e:{var L=u.i;let he=-1;for(;;){const Ct=["count="+w];he==-1?w>0?(he=L[0].g,Ct.push("ofs="+he)):he=0:Ct.push("ofs="+he);let Ue=!0;for(let Ot=0;Ot<w;Ot++){var j=L[Ot].g;const Vi=L[Ot].map;if(j-=he,j<0)he=Math.max(0,L[Ot].g-100),Ue=!1;else try{j="req"+j+"_"||"";try{var K=Vi instanceof Map?Vi:Object.entries(Vi);for(const[Ta,ns]of K){let is=ns;o(ns)&&(is=Ey(ns)),Ct.push(j+Ta+"="+encodeURIComponent(is))}}catch(Ta){throw Ct.push(j+"type="+encodeURIComponent("_badmap")),Ta}}catch{N&&N(Vi)}}if(Ue){K=Ct.join("&");break e}}K=void 0}return u=u.i.splice(0,w),p.G=u,K}function Yx(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;k||x(),O||(k(),O=!0),T.add(p,u),u.A=0}}function Ly(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Wc(c(u.Da,u),Zx(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Xx(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Wc(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,hn(10),pf(this),Xx(this))};function Uy(u){u.B!=null&&(a.clearTimeout(u.B),u.B=null)}function Xx(u){u.g=new Jr(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=Oi(u.na);He(p,"RID","rpc"),He(p,"SID",u.M),He(p,"AID",u.K),He(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&He(p,"TO",u.ia),He(p,"TYPE","xmlhttp"),au(u,p),u.u&&u.o&&Vy(p,u.u,u.o),u.O&&(u.g.H=u.O);var w=u.g;u=u.ba,w.M=1,w.A=df(Oi(p)),w.u=null,w.R=!0,Sx(w,u)}t.Va=function(){this.C!=null&&(this.C=null,pf(this),Ly(this),hn(19))};function yf(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Jx(u,p){var w=null;if(u.g==p){yf(u),Uy(u),u.g=null;var N=2}else if(Py(u.h,p))w=p.G,Px(u.h,p),N=1;else return;if(u.I!=0){if(p.o)if(N==1){w=p.u?p.u.length:0,p=Date.now()-p.F;var L=u.D;N=cf(),un(N,new wx(N,w)),gf(u)}else Yx(u);else if(L=p.m,L==3||L==0&&p.X>0||!(N==1&&v4(u,p)||N==2&&Ly(u)))switch(w&&w.length>0&&(p=u.h,p.i=p.i.concat(w)),L){case 1:ba(u,5);break;case 4:ba(u,10);break;case 3:ba(u,6);break;default:ba(u,2)}}}function Zx(u,p){let w=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(w*=2),w*p}function ba(u,p){if(u.j.info("Error code "+p),p==2){var w=c(u.bb,u),N=u.Ua;const L=!N;N=new Zr(N||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Jc(N,"https"),df(N),L?f4(N.toString(),w):m4(N.toString(),w)}else hn(2);u.I=0,u.l&&u.l.pa(p),eS(u),Kx(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),hn(2)):(this.j.info("Failed to ping google.com"),hn(1))};function eS(u){if(u.I=0,u.ja=[],u.l){const p=Dx(u.h);(p.length!=0||u.i.length!=0)&&(E(u.ja,p),E(u.ja,u.i),u.h.i.length=0,g(u.i),u.i.length=0),u.l.oa()}}function tS(u,p,w){var N=w instanceof Zr?Oi(w):new Zr(w);if(N.g!="")p&&(N.g=p+"."+N.g),Zc(N,N.u);else{var L=a.location;N=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;const j=new Zr(null);N&&Jc(j,N),p&&(j.g=p),L&&Zc(j,L),w&&(j.h=w),N=j}return w=u.G,p=u.wa,w&&p&&He(N,w,p),He(N,"VER",u.ka),au(u,N),N}function nS(u,p,w){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new ot(new Oy({ab:w})):new ot(u.ma),p.Fa(u.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function iS(){}t=iS.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function _f(){}_f.prototype.g=function(u,p){return new Vn(u,p)};function Vn(u,p){Zt.call(this),this.g=new $x(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!D(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!D(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new jo(this)}d(Vn,Zt),Vn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vn.prototype.close=function(){My(this.g)},Vn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var w={};w.__data__=u,u=w}else this.v&&(w={},w.__data__=Ey(u),u=w);p.i.push(new s4(p.Ya++,u)),p.I==3&&gf(p)},Vn.prototype.N=function(){this.g.l=null,delete this.j,My(this.g),delete this.g,Vn.Z.N.call(this)};function rS(u){xy.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const w in p){u=w;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}d(rS,xy);function sS(){Sy.call(this),this.status=1}d(sS,Sy);function jo(u){this.g=u}d(jo,iS),jo.prototype.ra=function(){un(this.g,"a")},jo.prototype.qa=function(u){un(this.g,new rS(u))},jo.prototype.pa=function(u){un(this.g,new sS)},jo.prototype.oa=function(){un(this.g,"b")},_f.prototype.createWebChannel=_f.prototype.g,Vn.prototype.send=Vn.prototype.o,Vn.prototype.open=Vn.prototype.m,Vn.prototype.close=Vn.prototype.close,zk=function(){return new _f},jk=function(){return cf()},Uk=_a,I0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},uf.NO_ERROR=0,uf.TIMEOUT=8,uf.HTTP_ERROR=6,Em=uf,bx.COMPLETE="complete",Lk=bx,gx.EventType=$c,$c.OPEN="a",$c.CLOSE="b",$c.ERROR="c",$c.MESSAGE="d",Zt.prototype.listen=Zt.prototype.J,Vu=gx,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,Mk=ot}).apply(typeof jf<"u"?jf:typeof self<"u"?self:typeof window<"u"?window:{});const C1="@firebase/firestore",N1="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new Dd("@firebase/firestore");function el(){return Ys.logLevel}function q7(t){Ys.setLogLevel(t)}function H(t,...e){if(Ys.logLevel<=fe.DEBUG){const n=e.map(cT);Ys.debug(`Firestore (${Oc}): ${t}`,...n)}}function yt(t,...e){if(Ys.logLevel<=fe.ERROR){const n=e.map(cT);Ys.error(`Firestore (${Oc}): ${t}`,...n)}}function rr(t,...e){if(Ys.logLevel<=fe.WARN){const n=e.map(cT);Ys.warn(`Firestore (${Oc}): ${t}`,...n)}}function cT(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Fk(t,i,n)}function Fk(t,e,n){let i=`FIRESTORE (${Oc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw yt(i),new Error(i)}function Z(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||Fk(e,r,i)}function H7(t,e){t||Y(57014,e)}function W(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends Ft{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class G7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lt.UNAUTHENTICATED))}shutdown(){}}class $7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class K7{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Z(this.o===void 0,42304);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Xt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xt,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},o=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Z(typeof i.accessToken=="string",31837,{l:i}),new Bk(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Z(e===null||typeof e=="string",2055,{h:e}),new Lt(e)}}class W7{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Q7{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new W7(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class P1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Y7{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ae(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Z(this.o===void 0,3512);const i=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new P1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Z(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new P1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=X7(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}}function ae(t,e){return t<e?-1:t>e?1:0}function A0(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),s=e.charAt(i);if(r!==s)return L_(r)===L_(s)?ae(r,s):L_(r)?1:-1}return ae(t.length,e.length)}const J7=55296,Z7=57343;function L_(t){const e=t.charCodeAt(0);return e>=J7&&e<=Z7}function Zl(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function qk(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="__name__";class Mi{constructor(e,n,i){n===void 0?n=0:n>e.length&&Y(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Y(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Mi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=Mi.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return ae(e.length,n.length)}static compareSegments(e,n){const i=Mi.isNumericId(e),r=Mi.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Mi.extractNumericId(e).compare(Mi.extractNumericId(n)):A0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return js.fromString(e.substring(4,e.length-2))}}class _e extends Mi{construct(e,n,i){return new _e(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new B(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new _e(n)}static emptyPath(){return new _e([])}}const eH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tt extends Mi{construct(e,n,i){return new tt(e,n,i)}static isValidIdentifier(e){return eH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===D1}static keyField(){return new tt([D1])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new B(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const o=e[r];if(o==="\\"){if(r+1===e.length)throw new B(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new B(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else o==="`"?(a=!a,r++):o!=="."||a?(i+=o,r++):(s(),r++)}if(s(),a)throw new B(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tt(n)}static emptyPath(){return new tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.path=e}static fromPath(e){return new $(_e.fromString(e))}static fromName(e){return new $(_e.fromString(e).popFirst(5))}static empty(){return new $(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $(new _e(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(t,e,n){if(!n)throw new B(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Hk(t,e,n,i){if(e===!0&&i===!0)throw new B(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function k1(t){if(!$.isDocumentKey(t))throw new B(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function O1(t){if($.isDocumentKey(t))throw new B(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gk(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Lg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y(12329,{type:typeof t})}function xe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lg(t);throw new B(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function $k(t,e){if(e<=0)throw new B(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t,e){const n={typeString:t};return e&&(n.value=e),n}function zd(t,e){if(!Gk(t))throw new B(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new B(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=-62135596800,M1=1e6;class Ne{static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*M1);return new Ne(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<V1)throw new B(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/M1}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ne._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zd(e,Ne._jsonSchema))return new Ne(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-V1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ne._jsonSchemaVersion="firestore/timestamp/1.0",Ne._jsonSchema={type:Rt("string",Ne._jsonSchemaVersion),seconds:Rt("number"),nanoseconds:Rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{static fromTimestamp(e){return new te(e)}static min(){return new te(new Ne(0,0))}static max(){return new te(new Ne(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=-1;class Ip{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}}function R0(t){return t.fields.find(e=>e.kind===2)}function Pa(t){return t.fields.filter(e=>e.kind!==2)}Ip.UNKNOWN_ID=-1;class xm{constructor(e,n){this.fieldPath=e,this.kind=n}}class Xh{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Xh(0,Zn.min())}}function Kk(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=te.fromTimestamp(i===1e9?new Ne(n+1,0):new Ne(n,i));return new Zn(r,$.empty(),e)}function Wk(t){return new Zn(t.readTime,t.key,ec)}class Zn{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Zn(te.min(),$.empty(),ec)}static max(){return new Zn(te.max(),$.empty(),ec)}}function dT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Yk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ua(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==Qk)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,i)=>{n(e)})}static reject(e){return new M((n,i)=>{i(e)})}static waitFor(e){return new M((n,i)=>{let r=0,s=0,a=!1;e.forEach(o=>{++r,o.next(()=>{++s,a&&s===r&&n()},l=>i(l))}),a=!0,s===r&&n()})}static or(e){let n=M.resolve(!1);for(const i of e)n=n.next(r=>r?M.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new M((i,r)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{a[c]=h,++o,o===s&&i(a)},h=>r(h))}})}static doWhile(e,n){return new M((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un="SimpleDb";class Ug{static open(e,n,i,r){try{return new Ug(n,e.transaction(r,i))}catch(s){throw new uh(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Xt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new uh(e,n.error)):this.S.resolve()},this.transaction.onerror=i=>{const r=fT(i.target.error);this.S.reject(new uh(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(H(Un,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new nH(n)}}class Xi{static delete(e){return H(Un,"Removing database:",e),Va(Pb().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Hh())return!1;if(Xi.F())return!0;const e=Se(),n=Xi.M(e),i=0<n&&n<10,r=Xk(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,n,i){this.name=e,this.version=n,this.N=i,this.B=null,Xi.M(Se())===12.2&&yt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(H(Un,"Opening database:",this.name),this.db=await new Promise((n,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{const a=s.target.result;n(a)},r.onblocked=()=>{i(new uh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{const a=s.target.error;a.name==="VersionError"?i(new B(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?i(new B(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):i(new uh(e,a))},r.onupgradeneeded=s=>{H(Un,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,r.transaction,s.oldVersion,this.version).next(()=>{H(Un,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,r){const s=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=Ug.open(this.db,e,s?"readonly":"readwrite",i),l=r(o).next(c=>(o.C(),c)).catch(c=>(o.abort(c),M.reject(c))).toPromise();return l.catch(()=>{}),await o.D,l}catch(o){const l=o,c=l.name!=="FirebaseError"&&a<3;if(H(Un,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Xk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class tH{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Va(this.U.delete())}}class uh extends B{constructor(e,n){super(U.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ha(t){return t.name==="IndexedDbTransactionError"}class nH{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(H(Un,"PUT",this.store.name,e,n),i=this.store.put(n,e)):(H(Un,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Va(i)}add(e){return H(Un,"ADD",this.store.name,e,e),Va(this.store.add(e))}get(e){return Va(this.store.get(e)).next(n=>(n===void 0&&(n=null),H(Un,"GET",this.store.name,e,n),n))}delete(e){return H(Un,"DELETE",this.store.name,e),Va(this.store.delete(e))}count(){return H(Un,"COUNT",this.store.name),Va(this.store.count())}J(e,n){const i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const s=r.getAll(i.range);return new M((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}})}{const s=this.cursor(i),a=[];return this.H(s,(o,l)=>{a.push(l)}).next(()=>a)}}Y(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new M((r,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{r(a.target.result)}})}Z(e,n){H(Un,"DELETE ALL",this.store.name);const i=this.options(e,n);i.X=!1;const r=this.cursor(i);return this.H(r,(s,a,o)=>o.delete())}ee(e,n){let i;n?i=e:(i={},n=e);const r=this.cursor(i);return this.H(r,n)}te(e){const n=this.cursor({});return new M((i,r)=>{n.onerror=s=>{const a=fT(s.target.error);r(a)},n.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():i()}):i()}})}H(e,n){const i=[];return new M((r,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void r();const l=new tH(o),c=n(o.primaryKey,o.value,l);if(c instanceof M){const h=c.catch(d=>(l.done(),M.reject(d)));i.push(h)}l.isDone?r():l.G===null?o.continue():o.continue(l.G)}}).next(()=>M.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Va(t){return new M((e,n)=>{t.onsuccess=i=>{const r=i.target.result;e(r)},t.onerror=i=>{const r=fT(i.target.error);n(r)}})}let L1=!1;function fT(t){const e=Xi.M(Se());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new B("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return L1||(L1=!0,setTimeout(()=>{throw i},0)),i}}return t}const hh="IndexBackfiller";class iH{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){H(hh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();H(hh,`Documents written: ${n}`)}catch(n){ha(n)?H(hh,"Ignoring IndexedDB error during index backfill: ",n):await ua(n)}await this.re(6e4)})}}class rH{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const i=new Set;let r=n,s=!0;return M.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!i.has(a))return H(hh,`Processing collection: ${a}`),this.oe(e,a,r).next(o=>{r-=o,i.add(a)});s=!1})).next(()=>n-r)}oe(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this._e(r,s)).next(o=>(H(hh,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>a.size)}))}_e(e,n){let i=e;return n.changes.forEach((r,s)=>{const a=Wk(s);dT(a,i)>0&&(i=a)}),new Zn(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}An.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=-1;function Fd(t){return t==null}function Jh(t){return t===0&&1/t==-1/0}function Jk(t){return typeof t=="number"&&Number.isInteger(t)&&!Jh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="";function ln(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=U1(e)),e=sH(t.get(n),e);return U1(e)}function sH(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case Ap:n+="";break;default:n+=s}}return n}function U1(t){return t+Ap+""}function Ki(t){const e=t.length;if(Z(e>=2,64408,{path:t}),e===2)return Z(t.charAt(0)===Ap&&t.charAt(1)==="",56145,{path:t}),_e.emptyPath();const n=e-2,i=[];let r="";for(let s=0;s<e;){const a=t.indexOf(Ap,s);switch((a<0||a>n)&&Y(50515,{path:t}),t.charAt(a+1)){case"":const o=t.substring(s,a);let l;r.length===0?l=o:(r+=o,l=r,r=""),i.push(l);break;case"":r+=t.substring(s,a),r+="\0";break;case"":r+=t.substring(s,a+1);break;default:Y(61167,{path:t})}s=a+2}return new _e(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="remoteDocuments",Bd="owner",qo="owner",Zh="mutationQueues",aH="userId",Ii="mutations",j1="batchId",Fa="userMutationsIndex",z1=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t,e){return[t,ln(e)]}function Zk(t,e,n){return[t,ln(e),n]}const oH={},tc="documentMutations",Rp="remoteDocumentsV14",lH=["prefixPath","collectionGroup","readTime","documentId"],Im="documentKeyIndex",cH=["prefixPath","collectionGroup","documentId"],eO="collectionGroupIndex",uH=["collectionGroup","readTime","prefixPath","documentId"],ed="remoteDocumentGlobal",C0="remoteDocumentGlobalKey",nc="targets",tO="queryTargetsIndex",hH=["canonicalId","targetId"],ic="targetDocuments",dH=["targetId","path"],mT="documentTargetsIndex",fH=["path","targetId"],Cp="targetGlobalKey",Za="targetGlobal",td="collectionParents",mH=["collectionId","parent"],rc="clientMetadata",pH="clientId",jg="bundles",gH="bundleId",zg="namedQueries",yH="name",pT="indexConfiguration",_H="indexId",N0="collectionGroupIndex",vH="collectionGroup",dh="indexState",wH=["indexId","uid"],nO="sequenceNumberIndex",bH=["uid","sequenceNumber"],fh="indexEntries",TH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],iO="documentKeyIndex",EH=["indexId","uid","orderedDocumentKey"],Fg="documentOverlays",xH=["userId","collectionPath","documentId"],P0="collectionPathOverlayIndex",SH=["userId","collectionPath","largestBatchId"],rO="collectionGroupOverlayIndex",IH=["userId","collectionGroup","largestBatchId"],gT="globals",AH="name",sO=[Zh,Ii,tc,Da,nc,Bd,Za,ic,rc,ed,td,jg,zg],RH=[...sO,Fg],aO=[Zh,Ii,tc,Rp,nc,Bd,Za,ic,rc,ed,td,jg,zg,Fg],oO=aO,yT=[...oO,pT,dh,fh],CH=yT,lO=[...yT,gT],NH=lO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0 extends Yk{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function kt(t,e){const n=W(t);return Xi.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function da(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){this.comparator=e,this.root=n||Gt.EMPTY}insert(e,n){return new Be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new Be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zf(this.root,e,this.comparator,!1)}getReverseIterator(){return new zf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zf(this.root,e,this.comparator,!0)}}class zf{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??Gt.RED,this.left=r??Gt.EMPTY,this.right=s??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new Gt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Gt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,n,i,r,s){return this}insert(e,n,i){return new Gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new B1(this.data.getIterator())}getIteratorFrom(e){return new B1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Ve)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ve(this.comparator);return n.data=e,n}}class B1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ho(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new Rn([])}unionWith(e){let n=new Ve(tt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zl(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PH(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new uO("Invalid base64 string: "+s):s}}(e);return new dt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const DH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jr(t){if(Z(!!t,39018),typeof t=="string"){let e=0;const n=DH.exec(t);if(Z(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zr(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="server_timestamp",dO="__type__",fO="__previous_value__",mO="__local_write_time__";function Bg(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[dO])==null?void 0:i.stringValue)===hO}function qg(t){const e=t.mapValue.fields[fO];return Bg(e)?qg(e):e}function nd(t){const e=jr(t.mapValue.fields[mO].timestampValue);return new Ne(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kH{constructor(e,n,i,r,s,a,o,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const k0="(default)";class Xs{constructor(e,n){this.projectId=e,this.database=n||k0}static empty(){return new Xs("","")}get isDefaultDatabase(){return this.database===k0}isEqual(e){return e instanceof Xs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="__type__",pO="__max__",Is={mapValue:{fields:{__type__:{stringValue:pO}}}},vT="__vector__",sc="value",Am={nullValue:"NULL_VALUE"};function Js(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bg(t)?4:gO(t)?9007199254740991:Hg(t)?10:11:Y(28295,{value:t})}function sr(t,e){if(t===e)return!0;const n=Js(t);if(n!==Js(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nd(t).isEqual(nd(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=jr(r.timestampValue),o=jr(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return zr(r.bytesValue).isEqual(zr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return et(r.geoPointValue.latitude)===et(s.geoPointValue.latitude)&&et(r.geoPointValue.longitude)===et(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return et(r.integerValue)===et(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=et(r.doubleValue),o=et(s.doubleValue);return a===o?Jh(a)===Jh(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Zl(t.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},o=s.mapValue.fields||{};if(F1(a)!==F1(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!sr(a[l],o[l])))return!1;return!0}(t,e);default:return Y(52216,{left:t})}}function id(t,e){return(t.values||[]).find(n=>sr(n,e))!==void 0}function Zs(t,e){if(t===e)return 0;const n=Js(t),i=Js(e);if(n!==i)return ae(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=et(s.integerValue||s.doubleValue),l=et(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return q1(t.timestampValue,e.timestampValue);case 4:return q1(nd(t),nd(e));case 5:return A0(t.stringValue,e.stringValue);case 6:return function(s,a){const o=zr(s),l=zr(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const h=ae(o[c],l[c]);if(h!==0)return h}return ae(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=ae(et(s.latitude),et(a.latitude));return o!==0?o:ae(et(s.longitude),et(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return H1(t.arrayValue,e.arrayValue);case 10:return function(s,a){var f,g,E,S;const o=s.fields||{},l=a.fields||{},c=(f=o[sc])==null?void 0:f.arrayValue,h=(g=l[sc])==null?void 0:g.arrayValue,d=ae(((E=c==null?void 0:c.values)==null?void 0:E.length)||0,((S=h==null?void 0:h.values)==null?void 0:S.length)||0);return d!==0?d:H1(c,h)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Is.mapValue&&a===Is.mapValue)return 0;if(s===Is.mapValue)return 1;if(a===Is.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),c=a.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=A0(l[d],h[d]);if(f!==0)return f;const g=Zs(o[l[d]],c[h[d]]);if(g!==0)return g}return ae(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Y(23264,{he:n})}}function q1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=jr(t),i=jr(e),r=ae(n.seconds,i.seconds);return r!==0?r:ae(n.nanos,i.nanos)}function H1(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Zs(n[r],i[r]);if(s)return s}return ae(n.length,i.length)}function ac(t){return O0(t)}function O0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=jr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return $.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=O0(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${O0(n.fields[a])}`;return r+"}"}(t.mapValue):Y(61005,{value:t})}function Rm(t){switch(Js(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qg(t);return e?16+Rm(e):16;case 5:return 2*t.stringValue.length;case 6:return zr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+Rm(s),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return da(i.fields,(s,a)=>{r+=s.length+Rm(a)}),r}(t.mapValue);default:throw Y(13486,{value:t})}}function uo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function V0(t){return!!t&&"integerValue"in t}function rd(t){return!!t&&"arrayValue"in t}function G1(t){return!!t&&"nullValue"in t}function $1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Cm(t){return!!t&&"mapValue"in t}function Hg(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[_T])==null?void 0:i.stringValue)===vT}function mh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return da(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=mh(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=mh(t.arrayValue.values[n]);return e}return{...t}}function gO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===pO}const yO={mapValue:{fields:{[_T]:{stringValue:vT},[sc]:{arrayValue:{}}}}};function OH(t){return"nullValue"in t?Am:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?uo(Xs.empty(),$.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Hg(t)?yO:{mapValue:{}}:Y(35942,{value:t})}function VH(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?uo(Xs.empty(),$.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?yO:"mapValue"in t?Hg(t)?{mapValue:{}}:Is:Y(61959,{value:t})}function K1(t,e){const n=Zs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function W1(t,e){const n=Zs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.value=e}static empty(){return new Wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Cm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=mh(n)}setAll(e){let n=tt.emptyPath(),i={},r=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=o.popLast()}a?i[o.lastSegment()]=mh(a):r.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Cm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Cm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){da(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Wt(mh(this.value))}}function _O(t){const e=[];return da(t.fields,(n,i)=>{const r=new tt([n]);if(Cm(i)){const s=_O(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n,i,r,s,a,o){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new We(e,0,te.min(),te.min(),te.min(),Wt.empty(),0)}static newFoundDocument(e,n,i,r){return new We(e,1,n,te.min(),i,r,0)}static newNoDocument(e,n){return new We(e,2,n,te.min(),te.min(),Wt.empty(),0)}static newUnknownDocument(e,n){return new We(e,3,n,te.min(),te.min(),Wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof We&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new We(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,n){this.position=e,this.inclusive=n}}function Q1(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=$.comparator($.fromName(a.referenceValue),n.key):i=Zs(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Y1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!sr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n="asc"){this.field=e,this.dir=n}}function MH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{}class we extends vO{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new LH(e,n,i):n==="array-contains"?new zH(e,i):n==="in"?new SO(e,i):n==="not-in"?new FH(e,i):n==="array-contains-any"?new BH(e,i):new we(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new UH(e,i):new jH(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zs(n,this.value)):n!==null&&Js(this.value)===Js(n)&&this.matchesComparison(Zs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Oe extends vO{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Oe(e,n)}matches(e){return oc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function oc(t){return t.op==="and"}function M0(t){return t.op==="or"}function wT(t){return wO(t)&&oc(t)}function wO(t){for(const e of t.filters)if(e instanceof Oe)return!1;return!0}function L0(t){if(t instanceof we)return t.field.canonicalString()+t.op.toString()+ac(t.value);if(wT(t))return t.filters.map(e=>L0(e)).join(",");{const e=t.filters.map(n=>L0(n)).join(",");return`${t.op}(${e})`}}function bO(t,e){return t instanceof we?function(i,r){return r instanceof we&&i.op===r.op&&i.field.isEqual(r.field)&&sr(i.value,r.value)}(t,e):t instanceof Oe?function(i,r){return r instanceof Oe&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,o)=>s&&bO(a,r.filters[o]),!0):!1}(t,e):void Y(19439)}function TO(t,e){const n=t.filters.concat(e);return Oe.create(n,t.op)}function EO(t){return t instanceof we?function(n){return`${n.field.canonicalString()} ${n.op} ${ac(n.value)}`}(t):t instanceof Oe?function(n){return n.op.toString()+" {"+n.getFilters().map(EO).join(" ,")+"}"}(t):"Filter"}class LH extends we{constructor(e,n,i){super(e,n,i),this.key=$.fromName(i.referenceValue)}matches(e){const n=$.comparator(e.key,this.key);return this.matchesComparison(n)}}class UH extends we{constructor(e,n){super(e,"in",n),this.keys=xO("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class jH extends we{constructor(e,n){super(e,"not-in",n),this.keys=xO("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function xO(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>$.fromName(i.referenceValue))}class zH extends we{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rd(n)&&id(n.arrayValue,this.value)}}class SO extends we{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&id(this.value.arrayValue,n)}}class FH extends we{constructor(e,n){super(e,"not-in",n)}matches(e){if(id(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!id(this.value.arrayValue,n)}}class BH extends we{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>id(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qH{constructor(e,n=null,i=[],r=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function U0(t,e=null,n=[],i=[],r=null,s=null,a=null){return new qH(t,e,n,i,r,s,a)}function ho(t){const e=W(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>L0(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Fd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>ac(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>ac(i)).join(",")),e.Te=n}return e.Te}function qd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!MH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bO(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Y1(t.startAt,e.startAt)&&Y1(t.endAt,e.endAt)}function Np(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Pp(t,e){return t.filters.filter(n=>n instanceof we&&n.field.isEqual(e))}function X1(t,e,n){let i=Am,r=!0;for(const s of Pp(t,e)){let a=Am,o=!0;switch(s.op){case"<":case"<=":a=OH(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=Am}K1({value:i,inclusive:r},{value:a,inclusive:o})<0&&(i=a,r=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];K1({value:i,inclusive:r},{value:a,inclusive:n.inclusive})<0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}function J1(t,e,n){let i=Is,r=!0;for(const s of Pp(t,e)){let a=Is,o=!0;switch(s.op){case">=":case">":a=VH(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=Is}W1({value:i,inclusive:r},{value:a,inclusive:o})>0&&(i=a,r=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];W1({value:i,inclusive:r},{value:a,inclusive:n.inclusive})>0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n=null,i=[],r=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function IO(t,e,n,i,r,s,a,o){return new $r(t,e,n,i,r,s,a,o)}function Vc(t){return new $r(t)}function Z1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bT(t){return t.collectionGroup!==null}function kl(t){const e=W(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Ve(tt.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new sd(s,i))}),n.has(tt.keyField().canonicalString())||e.Ie.push(new sd(tt.keyField(),i))}return e.Ie}function vn(t){const e=W(t);return e.Ee||(e.Ee=HH(e,kl(t))),e.Ee}function HH(t,e){if(t.limitType==="F")return U0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new sd(r.field,s)});const n=t.endAt?new ea(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ea(t.startAt.position,t.startAt.inclusive):null;return U0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function j0(t,e){const n=t.filters.concat([e]);return new $r(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dp(t,e,n){return new $r(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hd(t,e){return qd(vn(t),vn(e))&&t.limitType===e.limitType}function AO(t){return`${ho(vn(t))}|lt:${t.limitType}`}function tl(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>EO(r)).join(", ")}]`),Fd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>ac(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>ac(r)).join(",")),`Target(${i})`}(vn(t))}; limitType=${t.limitType})`}function Gd(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):$.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of kl(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,o,l){const c=Q1(a,o,l);return a.inclusive?c<=0:c<0}(i.startAt,kl(i),r)||i.endAt&&!function(a,o,l){const c=Q1(a,o,l);return a.inclusive?c>=0:c>0}(i.endAt,kl(i),r))}(t,e)}function RO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function CO(t){return(e,n)=>{let i=!1;for(const r of kl(t)){const s=GH(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function GH(t,e,n){const i=t.field.isKeyField()?$.comparator(e.key,n.key):function(s,a,o){const l=a.data.field(s),c=o.data.field(s);return l!==null&&c!==null?Zs(l,c):Y(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Y(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){da(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return cO(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $H=new Be($.comparator);function Cn(){return $H}const NO=new Be($.comparator);function Mu(...t){let e=NO;for(const n of t)e=e.insert(n.key,n);return e}function PO(t){let e=NO;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Wi(){return ph()}function DO(){return ph()}function ph(){return new Kr(t=>t.toString(),(t,e)=>t.isEqual(e))}const KH=new Be($.comparator),WH=new Ve($.comparator);function ue(...t){let e=WH;for(const n of t)e=e.add(n);return e}const QH=new Ve(ae);function TT(){return QH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jh(e)?"-0":e}}function kO(t){return{integerValue:""+t}}function OO(t,e){return Jk(e)?kO(e):ET(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(){this._=void 0}}function YH(t,e,n){return t instanceof lc?function(r,s){const a={fields:{[dO]:{stringValue:hO},[mO]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Bg(s)&&(s=qg(s)),s&&(a.fields[fO]=s),{mapValue:a}}(n,e):t instanceof fo?MO(t,e):t instanceof mo?LO(t,e):function(r,s){const a=VO(r,s),o=eA(a)+eA(r.Ae);return V0(a)&&V0(r.Ae)?kO(o):ET(r.serializer,o)}(t,e)}function XH(t,e,n){return t instanceof fo?MO(t,e):t instanceof mo?LO(t,e):n}function VO(t,e){return t instanceof cc?function(i){return V0(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class lc extends Gg{}class fo extends Gg{constructor(e){super(),this.elements=e}}function MO(t,e){const n=UO(e);for(const i of t.elements)n.some(r=>sr(r,i))||n.push(i);return{arrayValue:{values:n}}}class mo extends Gg{constructor(e){super(),this.elements=e}}function LO(t,e){let n=UO(e);for(const i of t.elements)n=n.filter(r=>!sr(r,i));return{arrayValue:{values:n}}}class cc extends Gg{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function eA(t){return et(t.integerValue||t.doubleValue)}function UO(t){return rd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n){this.field=e,this.transform=n}}function JH(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof fo&&r instanceof fo||i instanceof mo&&r instanceof mo?Zl(i.elements,r.elements,sr):i instanceof cc&&r instanceof cc?sr(i.Ae,r.Ae):i instanceof lc&&r instanceof lc}(t.transform,e.transform)}class ZH{constructor(e,n){this.version=e,this.transformResults=n}}class nt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nt}static exists(e){return new nt(void 0,e)}static updateTime(e){return new nt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $g{}function jO(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Lc(t.key,nt.none()):new Mc(t.key,t.data,nt.none());{const n=t.data,i=Wt.empty();let r=new Ve(tt.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new Wr(t.key,i,new Rn(r.toArray()),nt.none())}}function eG(t,e,n){t instanceof Mc?function(r,s,a){const o=r.value.clone(),l=nA(r.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Wr?function(r,s,a){if(!Nm(r.precondition,s))return void s.convertToUnknownDocument(a.version);const o=nA(r.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(zO(r)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function gh(t,e,n,i){return t instanceof Mc?function(s,a,o,l){if(!Nm(s.precondition,a))return o;const c=s.value.clone(),h=iA(s.fieldTransforms,l,a);return c.setAll(h),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof Wr?function(s,a,o,l){if(!Nm(s.precondition,a))return o;const c=iA(s.fieldTransforms,l,a),h=a.data;return h.setAll(zO(s)),h.setAll(c),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,a,o){return Nm(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function tG(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=VO(i.transform,r||null);s!=null&&(n===null&&(n=Wt.empty()),n.set(i.field,s))}return n||null}function tA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Zl(i,r,(s,a)=>JH(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Mc extends $g{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Wr extends $g{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function zO(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function nA(t,e,n){const i=new Map;Z(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,o=e.data.field(s.field);i.set(s.field,XH(a,o,n[r]))}return i}function iA(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,YH(s,a,e))}return i}class Lc extends $g{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xT extends $g{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&eG(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=gh(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=gh(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=DO();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(r.key)?null:o;const l=jO(a,o);l!==null&&i.set(r.key,l),a.isValidDocument()||a.convertToNoDocument(te.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&Zl(this.mutations,e.mutations,(n,i)=>tA(n,i))&&Zl(this.baseMutations,e.baseMutations,(n,i)=>tA(n,i))}}class IT{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Z(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return KH}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new IT(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nG{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,Te;function FO(t){switch(t){case U.OK:return Y(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return Y(15467,{code:t})}}function BO(t){if(t===void 0)return yt("GRPC error has no .code"),U.UNKNOWN;switch(t){case Tt.OK:return U.OK;case Tt.CANCELLED:return U.CANCELLED;case Tt.UNKNOWN:return U.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return U.INTERNAL;case Tt.UNAVAILABLE:return U.UNAVAILABLE;case Tt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Tt.NOT_FOUND:return U.NOT_FOUND;case Tt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Tt.ABORTED:return U.ABORTED;case Tt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Tt.DATA_LOSS:return U.DATA_LOSS;default:return Y(39323,{code:t})}}(Te=Tt||(Tt={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iG=new js([4294967295,4294967295],0);function rA(t){const e=qO().encode(t),n=new Vk;return n.update(e),new Uint8Array(n.digest())}function sA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new js([n,i],0),new js([r,s],0)]}class RT{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Lu(`Invalid padding: ${n}`);if(i<0)throw new Lu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Lu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Lu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=js.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(js.fromNumber(i)));return r.compare(iG)===1&&(r=new js([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=rA(e),[i,r]=sA(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new RT(s,r,n);return i.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const n=rA(e),[i,r]=sA(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Lu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Wd.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Kd(te.min(),r,new Be(ae),Cn(),ue())}}class Wd{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Wd(i,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class HO{constructor(e,n){this.targetId=e,this.Ce=n}}class GO{constructor(e,n,i=dt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class aA{constructor(){this.ve=0,this.Fe=oA(),this.Me=dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ue(),n=ue(),i=ue();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Y(38017,{changeType:s})}}),new Wd(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=oA()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Z(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class rG{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cn(),this.Je=Ff(),this.He=Ff(),this.Ye=new Be(ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Y(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const s=r.target;if(Np(s))if(i===0){const a=new $(s.path);this.et(n,a,We.newNoDocument(a,te.min()))}else Z(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,o;try{a=zr(i).toUint8Array()}catch(l){if(l instanceof uO)return rr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new RT(a,r,s)}catch(l){return rr(l instanceof Lu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(n,s,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&Np(o.target)){const l=new $(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,We.newNoDocument(l,e))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=ue();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const r=new Kd(e,n,this.Ye,this.je,i);return this.je=Cn(),this.Je=Ff(),this.He=Ff(),this.Ye=new Be(ae),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new aA,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ve(ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ve(ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new aA),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ff(){return new Be($.comparator)}function oA(){return new Be($.comparator)}const sG={asc:"ASCENDING",desc:"DESCENDING"},aG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oG={and:"AND",or:"OR"};class lG{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function z0(t,e){return t.useProto3Json||Fd(e)?e:{value:e}}function uc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $O(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function cG(t,e){return uc(t,e.toTimestamp())}function vt(t){return Z(!!t,49232),te.fromTimestamp(function(n){const i=jr(n);return new Ne(i.seconds,i.nanos)}(t))}function CT(t,e){return F0(t,e).canonicalString()}function F0(t,e){const n=function(r){return new _e(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function KO(t){const e=_e.fromString(t);return Z(iV(e),10190,{key:e.toString()}),e}function ad(t,e){return CT(t.databaseId,e.path)}function Ji(t,e){const n=KO(e);if(n.get(1)!==t.databaseId.projectId)throw new B(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(YO(n))}function WO(t,e){return CT(t.databaseId,e)}function QO(t){const e=KO(t);return e.length===4?_e.emptyPath():YO(e)}function B0(t){return new _e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YO(t){return Z(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function lA(t,e,n){return{name:ad(t,e),fields:n.value.mapValue.fields}}function XO(t,e,n){const i=Ji(t,e.name),r=vt(e.updateTime),s=e.createTime?vt(e.createTime):te.min(),a=new Wt({mapValue:{fields:e.fields}}),o=We.newFoundDocument(i,r,s,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function uG(t,e){return"found"in e?function(i,r){Z(!!r.found,43571),r.found.name,r.found.updateTime;const s=Ji(i,r.found.name),a=vt(r.found.updateTime),o=r.found.createTime?vt(r.found.createTime):te.min(),l=new Wt({mapValue:{fields:r.found.fields}});return We.newFoundDocument(s,a,o,l)}(t,e):"missing"in e?function(i,r){Z(!!r.missing,3894),Z(!!r.readTime,22933);const s=Ji(i,r.missing),a=vt(r.readTime);return We.newNoDocument(s,a)}(t,e):Y(7234,{result:e})}function hG(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Y(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Z(h===void 0||typeof h=="string",58123),dt.fromBase64String(h||"")):(Z(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),dt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const h=c.code===void 0?U.UNKNOWN:BO(c.code);return new B(h,c.message||"")}(a);n=new GO(i,r,s,o||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Ji(t,i.document.name),s=vt(i.document.updateTime),a=i.document.createTime?vt(i.document.createTime):te.min(),o=new Wt({mapValue:{fields:i.document.fields}}),l=We.newFoundDocument(r,s,a,o),c=i.targetIds||[],h=i.removedTargetIds||[];n=new Pm(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Ji(t,i.document),s=i.readTime?vt(i.readTime):te.min(),a=We.newNoDocument(r,s),o=i.removedTargetIds||[];n=new Pm([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Ji(t,i.document),s=i.removedTargetIds||[];n=new Pm([],s,r,null)}else{if(!("filter"in e))return Y(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new nG(r,s),o=i.targetId;n=new HO(o,a)}}return n}function od(t,e){let n;if(e instanceof Mc)n={update:lA(t,e.key,e.value)};else if(e instanceof Lc)n={delete:ad(t,e.key)};else if(e instanceof Wr)n={update:lA(t,e.key,e.data),updateMask:yG(e.fieldMask)};else{if(!(e instanceof xT))return Y(16599,{Vt:e.type});n={verify:ad(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const o=a.transform;if(o instanceof lc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof fo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof mo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof cc)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw Y(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:cG(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y(27497)}(t,e.precondition)),n}function q0(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?nt.updateTime(vt(s.updateTime)):s.exists!==void 0?nt.exists(s.exists):nt.none()}(e.currentDocument):nt.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(a,o){let l=null;if("setToServerValue"in o)Z(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new lc;else if("appendMissingElements"in o){const h=o.appendMissingElements.values||[];l=new fo(h)}else if("removeAllFromArray"in o){const h=o.removeAllFromArray.values||[];l=new mo(h)}else"increment"in o?l=new cc(a,o.increment):Y(16584,{proto:o});const c=tt.fromServerFormat(o.fieldPath);return new $d(c,l)}(t,r)):[];if(e.update){e.update.name;const r=Ji(t,e.update.name),s=new Wt({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(l){const c=l.fieldPaths||[];return new Rn(c.map(h=>tt.fromServerFormat(h)))}(e.updateMask);return new Wr(r,s,a,n,i)}return new Mc(r,s,n,i)}if(e.delete){const r=Ji(t,e.delete);return new Lc(r,n)}if(e.verify){const r=Ji(t,e.verify);return new xT(r,n)}return Y(1463,{proto:e})}function dG(t,e){return t&&t.length>0?(Z(e!==void 0,14353),t.map(n=>function(r,s){let a=r.updateTime?vt(r.updateTime):vt(s);return a.isEqual(te.min())&&(a=vt(s)),new ZH(a,r.transformResults||[])}(n,e))):[]}function JO(t,e){return{documents:[WO(t,e.path)]}}function ZO(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=WO(t,r);const s=function(c){if(c.length!==0)return nV(Oe.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:nl(f.field),direction:mG(f.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=z0(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:r}}function eV(t){let e=QO(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Z(i===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=tV(d);return f instanceof Oe&&wT(f)?f.getFilters():[f]}(n.where));let a=[];n.orderBy&&(a=function(d){return d.map(f=>function(E){return new sd(il(E.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(d){let f;return f=typeof d=="object"?d.value:d,Fd(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,g=d.values||[];return new ea(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,g=d.values||[];return new ea(g,f)}(n.endAt)),IO(e,r,a,s,o,"F",l,c)}function fG(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tV(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=il(n.unaryFilter.field);return we.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=il(n.unaryFilter.field);return we.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=il(n.unaryFilter.field);return we.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=il(n.unaryFilter.field);return we.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(t):t.fieldFilter!==void 0?function(n){return we.create(il(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Oe.create(n.compositeFilter.filters.map(i=>tV(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(t):Y(30097,{filter:t})}function mG(t){return sG[t]}function pG(t){return aG[t]}function gG(t){return oG[t]}function nl(t){return{fieldPath:t.canonicalString()}}function il(t){return tt.fromServerFormat(t.fieldPath)}function nV(t){return t instanceof we?function(n){if(n.op==="=="){if($1(n.value))return{unaryFilter:{field:nl(n.field),op:"IS_NAN"}};if(G1(n.value))return{unaryFilter:{field:nl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($1(n.value))return{unaryFilter:{field:nl(n.field),op:"IS_NOT_NAN"}};if(G1(n.value))return{unaryFilter:{field:nl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nl(n.field),op:pG(n.op),value:n.value}}}(t):t instanceof Oe?function(n){const i=n.getFilters().map(r=>nV(r));return i.length===1?i[0]:{compositeFilter:{op:gG(n.op),filters:i}}}(t):Y(54877,{filter:t})}function yG(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function iV(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n,i,r,s=te.min(),a=te.min(),o=dt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.yt=e}}function _G(t,e){let n;if(e.document)n=XO(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=$.fromSegments(e.noDocument.path),r=go(e.noDocument.readTime);n=We.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Y(56709);{const i=$.fromSegments(e.unknownDocument.path),r=go(e.unknownDocument.version);n=We.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){const s=new Ne(r[0],r[1]);return te.fromTimestamp(s)}(e.readTime)),n}function cA(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:kp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,a){return{name:ad(s,a.key),fields:a.data.value.mapValue.fields,updateTime:uc(s,a.version.toTimestamp()),createTime:uc(s,a.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:po(e.version)};else{if(!e.isUnknownDocument())return Y(57904,{document:e});i.unknownDocument={path:n.path.toArray(),version:po(e.version)}}return i}function kp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function po(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function go(t){const e=new Ne(t.seconds,t.nanoseconds);return te.fromTimestamp(e)}function Ma(t,e){const n=(e.baseMutations||[]).map(s=>q0(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const i=e.mutations.map(s=>q0(t.yt,s)),r=Ne.fromMillis(e.localWriteTimeMs);return new ST(e.batchId,r,n,i)}function Uu(t){const e=go(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?go(t.lastLimboFreeSnapshotVersion):te.min();let i;return i=function(s){return s.documents!==void 0}(t.query)?function(s){const a=s.documents.length;return Z(a===1,1966,{count:a}),vn(Vc(QO(s.documents[0])))}(t.query):function(s){return vn(eV(s))}(t.query),new Tr(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,dt.fromBase64String(t.resumeToken))}function sV(t,e){const n=po(e.snapshotVersion),i=po(e.lastLimboFreeSnapshotVersion);let r;r=Np(e.target)?JO(t.yt,e.target):ZO(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ho(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function NT(t){const e=eV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dp(e,e.limit,"L"):e}function U_(t,e){return new AT(e.largestBatchId,q0(t.yt,e.overlayMutation))}function uA(t,e){const n=e.path.lastSegment();return[t,ln(e.path.popLast()),n]}function hA(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:po(i.readTime),documentKey:ln(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vG{getBundleMetadata(e,n){return dA(e).get(n).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:go(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,n){return dA(e).put(function(r){return{bundleId:r.id,createTime:po(vt(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return fA(e).get(n).next(i=>{if(i)return function(s){return{name:s.name,query:NT(s.bundledQuery),readTime:go(s.readTime)}}(i)})}saveNamedQuery(e,n){return fA(e).put(function(r){return{name:r.name,readTime:po(vt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function dA(t){return kt(t,jg)}function fA(t){return kt(t,zg)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const i=n.uid||"";return new Kg(e,i)}getOverlay(e,n){return vu(e).get(uA(this.userId,n)).next(i=>i?U_(this.serializer,i):null)}getOverlays(e,n){const i=Wi();return M.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){const r=[];return i.forEach((s,a)=>{const o=new AT(n,a);r.push(this.St(e,o))}),M.waitFor(r)}removeOverlaysForBatchId(e,n,i){const r=new Set;n.forEach(a=>r.add(ln(a.getCollectionPath())));const s=[];return r.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);s.push(vu(e).Z(P0,o))}),M.waitFor(s)}getOverlaysForCollection(e,n,i){const r=Wi(),s=ln(n),a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return vu(e).J(P0,a).next(o=>{for(const l of o){const c=U_(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,n,i,r){const s=Wi();let a;const o=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return vu(e).ee({index:rO,range:o},(l,c,h)=>{const d=U_(this.serializer,c);s.size()<r||d.largestBatchId===a?(s.set(d.getKey(),d),a=d.largestBatchId):h.done()}).next(()=>s)}St(e,n){return vu(e).put(function(r,s,a){const[o,l,c]=uA(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:od(r.yt,a.mutation)}}(this.serializer,this.userId,n))}}function vu(t){return kt(t,Fg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wG{bt(e){return kt(e,gT)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const i=n==null?void 0:n.value;return i?dt.fromUint8Array(i):dt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(et(e.integerValue));else if("doubleValue"in e){const i=et(e.doubleValue);isNaN(i)?this.Ft(n,13):(this.Ft(n,15),Jh(i)?n.Mt(0):n.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(n,20),typeof i=="string"&&(i=jr(i)),n.xt(`${i.seconds||""}`),n.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(zr(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(n,45),n.Mt(i.latitude||0),n.Mt(i.longitude||0)}else"mapValue"in e?gO(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Hg(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Y(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const i=e.fields||{};this.Ft(n,55);for(const r of Object.keys(i))this.Ot(r,n),this.Ct(i[r],n)}kt(e,n){var a,o;const i=e.fields||{};this.Ft(n,53);const r=sc,s=((o=(a=i[r].arrayValue)==null?void 0:a.values)==null?void 0:o.length)||0;this.Ft(n,15),n.Mt(et(s)),this.Ot(r,n),this.Ct(i[r],n)}Qt(e,n){const i=e.values||[];this.Ft(n,50);for(const r of i)this.Ct(r,n)}Lt(e,n){this.Ft(n,37),$.fromName(e).path.forEach(i=>{this.Ft(n,60),this.Ut(i,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}La.Kt=new La;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=255;function bG(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function mA(t){const e=64-function(i){let r=0;for(let s=0;s<8;++s){const a=bG(255&i[s]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}class TG{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Gt(i.value),i=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Jt(i.value),i=n.next();this.Ht()}Yt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const r=n.codePointAt(0);this.Gt(240|r>>>18),this.Gt(128|63&r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r)}}this.zt()}Zt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const r=n.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Ht()}Xt(e){const n=this.en(e),i=mA(n);this.tn(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}nn(e){const n=this.en(e),i=mA(n);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}rn(){this.sn(Go),this.sn(255)}_n(){this.an(Go),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),i=!!(128&n[0]);n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Go?(this.sn(Go),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Go?(this.an(Go),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class EG{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class xG{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class wu{constructor(){this.cn=new TG,this.ln=new EG(this.cn),this.hn=new xG(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n,i,r){this.Tn=e,this.In=n,this.En=i,this.dn=r}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.dn,0),n!==e?i.set([0],this.dn.length):++i[i.length-1],new Ua(this.Tn,this.In,this.En,i)}Rn(e,n,i){return{indexId:this.Tn,uid:e,arrayValue:Dm(this.En),directionalValue:Dm(this.dn),orderedDocumentKey:Dm(n),documentKey:i.path.toArray()}}Vn(e,n,i){const r=this.Rn(e,n,i);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function as(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=pA(t.En,e.En),n!==0?n:(n=pA(t.dn,e.dn),n!==0?n:$.comparator(t.In,e.In)))}function pA(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}function Dm(t){return ED()?function(n){let i="";for(let r=0;r<n.length;r++)i+=String.fromCharCode(n[r]);return i}(t):t}function gA(t){return typeof t!="string"?t:function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(t)}class yA{constructor(e){this.mn=new Ve((n,i)=>tt.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const i=n;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(Z(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=R0(e);if(n!==void 0&&!this.wn(n))return!1;const i=Pa(e);let r=new Set,s=0,a=0;for(;s<i.length&&this.wn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!r.has(o.field.canonicalString())){const l=i[s];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++s}for(;s<i.length;++s){const o=i[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new Ve(tt.comparator);const n=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new xm(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new xm(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new xm(i.field,i.dir==="asc"?0:1)));return new Ip(Ip.UNKNOWN_ID,this.collectionId,n,Xh.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(t){var n,i;if(Z(t instanceof we||t instanceof Oe,20012),t instanceof we){if(t instanceof SO){const r=((i=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:i.map(s=>we.create(t.field,"==",s)))||[];return Oe.create(r,"or")}return t}const e=t.filters.map(r=>aV(r));return Oe.create(e,t.op)}function SG(t){if(t.getFilters().length===0)return[];const e=$0(aV(t));return Z(oV(e),7391),H0(e)||G0(e)?[e]:e.getFilters()}function H0(t){return t instanceof we}function G0(t){return t instanceof Oe&&wT(t)}function oV(t){return H0(t)||G0(t)||function(n){if(n instanceof Oe&&M0(n)){for(const i of n.getFilters())if(!H0(i)&&!G0(i))return!1;return!0}return!1}(t)}function $0(t){if(Z(t instanceof we||t instanceof Oe,34018),t instanceof we)return t;if(t.filters.length===1)return $0(t.filters[0]);const e=t.filters.map(i=>$0(i));let n=Oe.create(e,t.op);return n=Op(n),oV(n)?n:(Z(n instanceof Oe,64498),Z(oc(n),40251),Z(n.filters.length>1,57927),n.filters.reduce((i,r)=>PT(i,r)))}function PT(t,e){let n;return Z(t instanceof we||t instanceof Oe,38388),Z(e instanceof we||e instanceof Oe,25473),n=t instanceof we?e instanceof we?function(r,s){return Oe.create([r,s],"and")}(t,e):_A(t,e):e instanceof we?_A(e,t):function(r,s){if(Z(r.filters.length>0&&s.filters.length>0,48005),oc(r)&&oc(s))return TO(r,s.getFilters());const a=M0(r)?r:s,o=M0(r)?s:r,l=a.filters.map(c=>PT(c,o));return Oe.create(l,"or")}(t,e),Op(n)}function _A(t,e){if(oc(e))return TO(e,t.getFilters());{const n=e.filters.map(i=>PT(t,i));return Oe.create(n,"or")}}function Op(t){if(Z(t instanceof we||t instanceof Oe,11850),t instanceof we)return t;const e=t.getFilters();if(e.length===1)return Op(e[0]);if(wO(t))return t;const n=e.map(r=>Op(r)),i=[];return n.forEach(r=>{r instanceof we?i.push(r):r instanceof Oe&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Oe.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IG{constructor(){this.Cn=new DT}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Zn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Zn.min())}updateCollectionGroup(e,n,i){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class DT{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ve(_e.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ve(_e.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="IndexedDbIndexManager",Bf=new Uint8Array(0);class AG{constructor(e,n){this.databaseId=n,this.vn=new DT,this.Fn=new Kr(i=>ho(i),(i,r)=>qd(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:i,parent:ln(r)};return wA(e).put(s)}return M.resolve()}getCollectionParents(e,n){const i=[],r=IDBKeyRange.bound([n,""],[qk(n),""],!1,!0);return wA(e).J(r).next(s=>{for(const a of s){if(a.collectionId!==n)break;i.push(Ki(a.parent))}return i})}addFieldIndex(e,n){const i=bu(e),r=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete r.indexId;const s=i.add(r);if(n.indexState){const a=Ko(e);return s.next(o=>{a.put(hA(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const i=bu(e),r=Ko(e),s=$o(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=bu(e),i=$o(e),r=Ko(e);return n.Z().next(()=>i.Z()).next(()=>r.Z())}createTargetIndexes(e,n){return M.forEach(this.Mn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){const s=new yA(i).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const i=$o(e);let r=!0;const s=new Map;return M.forEach(this.Mn(n),a=>this.xn(e,a).next(o=>{r&&(r=!!o),s.set(a,o)})).next(()=>{if(r){let a=ue();const o=[];return M.forEach(s,(l,c)=>{H(vA,`Using index ${function(v){return`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map(I=>`${I.fieldPath}:${I.kind}`).join(",")}`}(l)} to execute ${ho(n)}`);const h=function(v,I){const k=R0(I);if(k===void 0)return null;for(const O of Pp(v,k.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(c,l),d=function(v,I){const k=new Map;for(const O of Pa(I))for(const T of Pp(v,O.fieldPath))switch(T.op){case"==":case"in":k.set(O.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return k.set(O.fieldPath.canonicalString(),T.value),Array.from(k.values())}return null}(c,l),f=function(v,I){const k=[];let O=!0;for(const T of Pa(I)){const x=T.kind===0?X1(v,T.fieldPath,v.startAt):J1(v,T.fieldPath,v.startAt);k.push(x.value),O&&(O=x.inclusive)}return new ea(k,O)}(c,l),g=function(v,I){const k=[];let O=!0;for(const T of Pa(I)){const x=T.kind===0?J1(v,T.fieldPath,v.endAt):X1(v,T.fieldPath,v.endAt);k.push(x.value),O&&(O=x.inclusive)}return new ea(k,O)}(c,l),E=this.On(l,c,f),S=this.On(l,c,g),b=this.Nn(l,c,d),y=this.Bn(l.indexId,h,E,f.inclusive,S,g.inclusive,b);return M.forEach(y,_=>i.Y(_,n.limit).next(v=>{v.forEach(I=>{const k=$.fromSegments(I.documentKey);a.has(k)||(a=a.add(k),o.push(k))})}))}).next(()=>o)}return M.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=SG(Oe.create(e.filters,"and")).map(i=>U0(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,i,r,s,a,o){const l=(n!=null?n.length:1)*Math.max(i.length,s.length),c=l/(n!=null?n.length:1),h=[];for(let d=0;d<l;++d){const f=n?this.Ln(n[d/c]):Bf,g=this.kn(e,f,i[d%c],r),E=this.qn(e,f,s[d%c],a),S=o.map(b=>this.kn(e,f,b,!0));h.push(...this.createRange(g,E,S))}return h}kn(e,n,i,r){const s=new Ua(e,$.empty(),n,i);return r?s:s.An()}qn(e,n,i,r){const s=new Ua(e,$.empty(),n,i);return r?s.An():s}xn(e,n){const i=new yA(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let a=null;for(const o of s)i.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,n){let i=2;const r=this.Mn(n);return M.forEach(r,s=>this.xn(e,s).next(a=>{a?i!==0&&a.fields.length<function(l){let c=new Ve(tt.comparator),h=!1;for(const d of l.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?h=!0:c=c.add(f.field));for(const d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(h?1:0)}(s)&&(i=1):i=0})).next(()=>function(a){return a.limit!==null}(n)&&r.length>1&&i===2?1:i)}Qn(e,n){const i=new wu;for(const r of Pa(e)){const s=n.data.field(r.fieldPath);if(s==null)return null;const a=i.Pn(r.kind);La.Kt.Dt(s,a)}return i.un()}Ln(e){const n=new wu;return La.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const i=new wu;return La.Kt.Dt(uo(this.databaseId,n),i.Pn(function(s){const a=Pa(s);return a.length===0?0:a[a.length-1].kind}(e))),i.un()}Nn(e,n,i){if(i===null)return[];let r=[];r.push(new wu);let s=0;for(const a of Pa(e)){const o=i[s++];for(const l of r)if(this.Un(n,a.fieldPath)&&rd(o))r=this.Kn(r,a,o);else{const c=l.Pn(a.kind);La.Kt.Dt(o,c)}}return this.Wn(r)}On(e,n,i){return this.Nn(e,n,i.position)}Wn(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].un();return n}Kn(e,n,i){const r=[...e],s=[];for(const a of i.arrayValue.values||[])for(const o of r){const l=new wu;l.seed(o.un()),La.Kt.Dt(a,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(i=>i instanceof we&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){const i=bu(e),r=Ko(e);return(n?i.J(N0,IDBKeyRange.bound(n,n)):i.J()).next(s=>{const a=[];return M.forEach(s,o=>r.get([o.indexId,this.uid]).next(l=>{a.push(function(h,d){const f=d?new Xh(d.sequenceNumber,new Zn(go(d.readTime),new $(Ki(d.documentKey)),d.largestBatchId)):Xh.empty(),g=h.fields.map(([E,S])=>new xm(tt.fromServerFormat(E),S));return new Ip(h.indexId,h.collectionGroup,g,f)}(o,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:ae(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){const r=bu(e),s=Ko(e);return this.Gn(e).next(a=>r.J(N0,IDBKeyRange.bound(n,n)).next(o=>M.forEach(o,l=>s.put(hA(l.indexId,this.uid,a,i)))))}updateIndexEntries(e,n){const i=new Map;return M.forEach(n,(r,s)=>{const a=i.get(r.collectionGroup);return(a?M.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(o=>(i.set(r.collectionGroup,o),M.forEach(o,l=>this.zn(e,r,l).next(c=>{const h=this.jn(s,l);return c.isEqual(h)?M.resolve():this.Jn(e,s,l,c,h)}))))})}Hn(e,n,i,r){return $o(e).put(r.Rn(this.uid,this.$n(i,n.key),n.key))}Yn(e,n,i,r){return $o(e).delete(r.Vn(this.uid,this.$n(i,n.key),n.key))}zn(e,n,i){const r=$o(e);let s=new Ve(as);return r.ee({index:iO,range:IDBKeyRange.only([i.indexId,this.uid,Dm(this.$n(i,n))])},(a,o)=>{s=s.add(new Ua(i.indexId,n,gA(o.arrayValue),gA(o.directionalValue)))}).next(()=>s)}jn(e,n){let i=new Ve(as);const r=this.Qn(n,e);if(r==null)return i;const s=R0(n);if(s!=null){const a=e.data.field(s.fieldPath);if(rd(a))for(const o of a.arrayValue.values||[])i=i.add(new Ua(n.indexId,e.key,this.Ln(o),r))}else i=i.add(new Ua(n.indexId,e.key,Bf,r));return i}Jn(e,n,i,r,s){H(vA,"Updating index entries for document '%s'",n.key);const a=[];return function(l,c,h,d,f){const g=l.getIterator(),E=c.getIterator();let S=Ho(g),b=Ho(E);for(;S||b;){let y=!1,_=!1;if(S&&b){const v=h(S,b);v<0?_=!0:v>0&&(y=!0)}else S!=null?_=!0:y=!0;y?(d(b),b=Ho(E)):_?(f(S),S=Ho(g)):(S=Ho(g),b=Ho(E))}}(r,s,as,o=>{a.push(this.Hn(e,n,i,o))},o=>{a.push(this.Yn(e,n,i,o))}),M.waitFor(a)}Gn(e){let n=1;return Ko(e).ee({index:nO,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((a,o)=>as(a,o)).filter((a,o,l)=>!o||as(a,l[o-1])!==0);const r=[];r.push(e);for(const a of i){const o=as(a,e),l=as(a,n);if(o===0)r[0]=e.An();else if(o>0&&l<0)r.push(a),r.push(a.An());else if(l>0)break}r.push(n);const s=[];for(let a=0;a<r.length;a+=2){if(this.Zn(r[a],r[a+1]))return[];const o=r[a].Vn(this.uid,Bf,$.empty()),l=r[a+1].Vn(this.uid,Bf,$.empty());s.push(IDBKeyRange.bound(o,l))}return s}Zn(e,n){return as(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(bA)}getMinOffset(e,n){return M.mapArray(this.Mn(n),i=>this.xn(e,i).next(r=>r||Y(44426))).next(bA)}}function wA(t){return kt(t,td)}function $o(t){return kt(t,fh)}function bu(t){return kt(t,pT)}function Ko(t){return kt(t,dh)}function bA(t){Z(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const r=t[i].indexState.offset;dT(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Zn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lV=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(t,e,n){const i=t.store(Ii),r=t.store(tc),s=[],a=IDBKeyRange.only(n.batchId);let o=0;const l=i.ee({range:a},(h,d,f)=>(o++,f.delete()));s.push(l.next(()=>{Z(o===1,47070,{batchId:n.batchId})}));const c=[];for(const h of n.mutations){const d=Zk(e,h.key.path,n.batchId);s.push(r.delete(d)),c.push(h.key)}return M.waitFor(s).next(()=>c)}function Vp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Y(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(lV,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class Wg{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Xn={}}static wt(e,n,i,r){Z(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new Wg(s,n,i,r)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return os(e).ee({index:Fa,range:i},(r,s,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,i,r){const s=rl(e),a=os(e);return a.add({}).next(o=>{Z(typeof o=="number",49019);const l=new ST(o,n,i,r),c=function(g,E,S){const b=S.baseMutations.map(_=>od(g.yt,_)),y=S.mutations.map(_=>od(g.yt,_));return{userId:E,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:b,mutations:y}}(this.serializer,this.userId,l),h=[];let d=new Ve((f,g)=>ae(f.canonicalString(),g.canonicalString()));for(const f of r){const g=Zk(this.userId,f.key.path,o);d=d.add(f.key.path.popLast()),h.push(a.put(c)),h.push(s.put(g,oH))}return d.forEach(f=>{h.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[o]=l.keys()}),M.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return os(e).get(n).next(i=>i?(Z(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:n}),Ma(this.serializer,i)):null)}er(e,n){return this.Xn[n]?M.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){const r=i.keys();return this.Xn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return os(e).ee({index:Fa,range:r},(a,o,l)=>{o.userId===this.userId&&(Z(o.batchId>=i,47524,{tr:i}),s=Ma(this.serializer,o)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=zs;return os(e).ee({index:Fa,range:n,reverse:!0},(r,s,a)=>{i=s.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,zs],[this.userId,Number.POSITIVE_INFINITY]);return os(e).J(Fa,n).next(i=>i.map(r=>Ma(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=Sm(this.userId,n.path),r=IDBKeyRange.lowerBound(i),s=[];return rl(e).ee({range:r},(a,o,l)=>{const[c,h,d]=a,f=Ki(h);if(c===this.userId&&n.path.isEqual(f))return os(e).get(d).next(g=>{if(!g)throw Y(61480,{nr:a,batchId:d});Z(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:d}),s.push(Ma(this.serializer,g))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ve(ae);const r=[];return n.forEach(s=>{const a=Sm(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=rl(e).ee({range:o},(c,h,d)=>{const[f,g,E]=c,S=Ki(g);f===this.userId&&s.path.isEqual(S)?i=i.add(E):d.done()});r.push(l)}),M.waitFor(r).next(()=>this.rr(e,i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1,s=Sm(this.userId,i),a=IDBKeyRange.lowerBound(s);let o=new Ve(ae);return rl(e).ee({range:a},(l,c,h)=>{const[d,f,g]=l,E=Ki(f);d===this.userId&&i.isPrefixOf(E)?E.length===r&&(o=o.add(g)):h.done()}).next(()=>this.rr(e,o))}rr(e,n){const i=[],r=[];return n.forEach(s=>{r.push(os(e).get(s).next(a=>{if(a===null)throw Y(35274,{batchId:s});Z(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),i.push(Ma(this.serializer,a))}))}),M.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return cV(e.le,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),M.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const i=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),r=[];return rl(e).ee({range:i},(s,a,o)=>{if(s[0]===this.userId){const l=Ki(s[1]);r.push(l)}else o.done()}).next(()=>{Z(r.length===0,56720,{sr:r.map(s=>s.canonicalString())})})})}containsKey(e,n){return uV(e,this.userId,n)}_r(e){return hV(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:zs,lastStreamToken:""})}}function uV(t,e,n){const i=Sm(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let a=!1;return rl(t).ee({range:s,X:!0},(o,l,c)=>{const[h,d,f]=o;h===e&&d===r&&(a=!0),c.done()}).next(()=>a)}function os(t){return kt(t,Ii)}function rl(t){return kt(t,tc)}function hV(t){return kt(t,Zh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new yo(0)}static cr(){return new yo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RG{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const i=new yo(n.highestTargetId);return n.highestTargetId=i.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>te.fromTimestamp(new Ne(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.lr(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.hr(e,r)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(i=>(i.targetCount+=1,this.Tr(n,i),this.hr(e,i))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Wo(e).delete(n.targetId)).next(()=>this.lr(e)).next(i=>(Z(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i)))}removeTargets(e,n,i){let r=0;const s=[];return Wo(e).ee((a,o)=>{const l=Uu(o);l.sequenceNumber<=n&&i.get(l.targetId)===null&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(s)).next(()=>r)}forEachTarget(e,n){return Wo(e).ee((i,r)=>{const s=Uu(r);n(s)})}lr(e){return EA(e).get(Cp).next(n=>(Z(n!==null,2888),n))}hr(e,n){return EA(e).put(Cp,n)}Pr(e,n){return Wo(e).put(sV(this.serializer,n))}Tr(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const i=ho(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Wo(e).ee({range:r,index:tO},(a,o,l)=>{const c=Uu(o);qd(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,i){const r=[],s=vs(e);return n.forEach(a=>{const o=ln(a.path);r.push(s.put({targetId:i,path:o})),r.push(this.referenceDelegate.addReference(e,i,a))}),M.waitFor(r)}removeMatchingKeys(e,n,i){const r=vs(e);return M.forEach(n,s=>{const a=ln(s.path);return M.waitFor([r.delete([i,a]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,n){const i=vs(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),r=vs(e);let s=ue();return r.ee({range:i,X:!0},(a,o,l)=>{const c=Ki(a[1]),h=new $(c);s=s.add(h)}).next(()=>s)}containsKey(e,n){const i=ln(n.path),r=IDBKeyRange.bound([i],[qk(i)],!1,!0);let s=0;return vs(e).ee({index:mT,X:!0,range:r},([a,o],l,c)=>{a!==0&&(s++,c.done())}).next(()=>s>0)}At(e,n){return Wo(e).get(n).next(i=>i?Uu(i):null)}}function Wo(t){return kt(t,nc)}function EA(t){return kt(t,Za)}function vs(t){return kt(t,ic)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="LruGarbageCollector",CG=1048576;function SA([t,e],[n,i]){const r=ae(t,n);return r===0?ae(e,i):r}class NG{constructor(e){this.Ir=e,this.buffer=new Ve(SA),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();SA(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class dV{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(xA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ha(n)?H(xA,"Ignoring IndexedDB error during garbage collection: ",n):await ua(n)}await this.Vr(3e5)})}}class PG{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return M.resolve(An.ce);const i=new NG(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(TA)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TA):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,s,a,o,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,a=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,o=Date.now(),this.removeTargets(e,i,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(c=Date.now(),el()<=fe.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${r} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}function fV(t,e){return new PG(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DG{constructor(e,n){this.db=e,this.garbageCollector=fV(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(i,r)=>n(r))}addReference(e,n,i){return qf(e,i)}removeReference(e,n,i){return qf(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return qf(e,n)}br(e,n){return function(r,s){let a=!1;return hV(r).te(o=>uV(r,o,s).next(l=>(l&&(a=!0),M.resolve(!l)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Sr(e,(a,o)=>{if(o<=n){const l=this.br(e,a).next(c=>{if(!c)return s++,i.getEntry(e,a).next(()=>(i.removeEntry(a,te.min()),vs(e).delete(function(d){return[0,ln(d.path)]}(a))))});r.push(l)}}).next(()=>M.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return qf(e,n)}Sr(e,n){const i=vs(e);let r,s=An.ce;return i.ee({index:mT},([a,o],{path:l,sequenceNumber:c})=>{a===0?(s!==An.ce&&n(new $(Ki(r)),s),s=c,r=l):s=An.ce}).next(()=>{s!==An.ce&&n(new $(Ki(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qf(t,e){return vs(t).put(function(i,r){return{targetId:0,path:ln(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(){this.changes=new Kr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,We.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?M.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kG{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return xa(e).put(i)}removeEntry(e,n,i){return xa(e).delete(function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],kp(a),o[o.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.Dr(e,i)))}getEntry(e,n){let i=We.newInvalidDocument(n);return xa(e).ee({index:Im,range:IDBKeyRange.only(Tu(n))},(r,s)=>{i=this.Cr(n,s)}).next(()=>i)}vr(e,n){let i={size:0,document:We.newInvalidDocument(n)};return xa(e).ee({index:Im,range:IDBKeyRange.only(Tu(n))},(r,s)=>{i={document:this.Cr(n,s),size:Vp(s)}}).next(()=>i)}getEntries(e,n){let i=Cn();return this.Fr(e,n,(r,s)=>{const a=this.Cr(r,s);i=i.insert(r,a)}).next(()=>i)}Mr(e,n){let i=Cn(),r=new Be($.comparator);return this.Fr(e,n,(s,a)=>{const o=this.Cr(s,a);i=i.insert(s,o),r=r.insert(s,Vp(a))}).next(()=>({documents:i,Or:r}))}Fr(e,n,i){if(n.isEmpty())return M.resolve();let r=new Ve(RA);n.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(Tu(r.first()),Tu(r.last())),a=r.getIterator();let o=a.getNext();return xa(e).ee({index:Im,range:s},(l,c,h)=>{const d=$.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&RA(o,d)<0;)i(o,null),o=a.getNext();o&&o.isEqual(d)&&(i(o,c),o=a.hasNext()?a.getNext():null),o?h.j(Tu(o)):h.done()}).next(()=>{for(;o;)i(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,s){const a=n.path,o=[a.popLast().toArray(),a.lastSegment(),kp(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xa(e).J(IDBKeyRange.bound(o,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let h=Cn();for(const d of c){const f=this.Cr($.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(Gd(n,f)||r.has(f.key))&&(h=h.insert(f.key,f))}return h})}getAllFromCollectionGroup(e,n,i,r){let s=Cn();const a=AA(n,i),o=AA(n,Zn.max());return xa(e).ee({index:eO,range:IDBKeyRange.bound(a,o,!0)},(l,c,h)=>{const d=this.Cr($.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===r&&h.done()}).next(()=>s)}newChangeBuffer(e){return new OG(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return IA(e).get(C0).next(n=>(Z(!!n,20021),n))}Dr(e,n){return IA(e).put(C0,n)}Cr(e,n){if(n){const i=_G(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(te.min())))return i}return We.newInvalidDocument(e)}}function pV(t){return new kG(t)}class OG extends mV{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Kr(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const n=[];let i=0,r=new Ve((s,a)=>ae(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const l=cA(this.Nr.serializer,a);r=r.add(s.path.popLast());const c=Vp(l);i+=c-o.size,n.push(this.Nr.addEntry(e,s,l))}else if(i-=o.size,this.trackRemovals){const l=cA(this.Nr.serializer,a.convertToNoDocument(te.min()));n.push(this.Nr.addEntry(e,s,l))}}),r.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,i)),M.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(i=>(this.Br.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:i,Or:r})=>(r.forEach((s,a)=>{this.Br.set(s,{size:a,readTime:i.get(s).readTime})}),i))}}function IA(t){return kt(t,ed)}function xa(t){return kt(t,Rp)}function Tu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function AA(t,e){const n=e.documentKey.path.toArray();return[t,kp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function RA(t,e){const n=t.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=ae(n[s],i[s]),r)return r;return r=ae(n.length,i.length),r||(r=ae(n[n.length-2],i[i.length-2]),r||ae(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VG{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&gh(i.mutation,r,Rn.empty(),Ne.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ue()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ue()){const r=Wi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=Mu();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Wi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ue()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,i,r){let s=Cn();const a=ph(),o=function(){return ph()}();return n.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof Wr)?s=s.insert(c.key,c):h!==void 0?(a.set(c.key,h.mutation.getFieldMask()),gh(h.mutation,c,h.mutation.getFieldMask(),Ne.now())):a.set(c.key,Rn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>a.set(c,h)),n.forEach((c,h)=>o.set(c,new VG(h,a.get(c)??null))),o))}recalculateAndSaveOverlays(e,n){const i=ph();let r=new Be((a,o)=>a-o),s=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||Rn.empty();h=o.applyToLocalView(c,h),i.set(l,h);const d=(r.get(o.batchId)||ue()).add(l);r=r.insert(o.batchId,d)})}).next(()=>{const a=[],o=r.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,h=l.value,d=DO();h.forEach(f=>{if(!s.has(f)){const g=jO(n.get(f),i.get(f));g!==null&&d.set(f,g),s=s.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return M.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return $.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):M.resolve(Wi());let o=ec,l=s;return a.next(c=>M.forEach(c,(h,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ue())).next(h=>({batchId:o,changes:PO(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(i=>{let r=Mu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=Mu();return this.indexManager.getCollectionParents(e,s).next(o=>M.forEach(o,l=>{const c=function(d,f){return new $r(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((d,f)=>{a=a.insert(d,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(a=>{s.forEach((l,c)=>{const h=c.getKey();a.get(h)===null&&(a=a.insert(h,We.newInvalidDocument(h)))});let o=Mu();return a.forEach((l,c)=>{const h=s.get(l);h!==void 0&&gh(h.mutation,c,Rn.empty(),Ne.now()),Gd(n,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MG{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:vt(r.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:NT(r.bundledQuery),readTime:vt(r.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LG{constructor(){this.overlays=new Be($.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Wi();return M.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.St(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),M.resolve()}getOverlaysForCollection(e,n,i){const r=Wi(),s=n.length+1,a=new $(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return M.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Be((c,h)=>c-h);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=Wi(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const o=Wi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>o.set(c,h)),!(o.size()>=r)););return M.resolve(o)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new AT(n,i));let s=this.qr.get(n);s===void 0&&(s=ue(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UG{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(){this.Qr=new Ve(Vt.$r),this.Ur=new Ve(Vt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Vt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new Vt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new $(new _e([])),i=new Vt(n,e),r=new Vt(n,e+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new $(new _e([])),i=new Vt(n,e),r=new Vt(n,e+1);let s=ue();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Vt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Vt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return $.comparator(e.key,n.key)||ae(e.Yr,n.Yr)}static Kr(e,n){return ae(e.Yr,n.Yr)||$.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jG{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ve(Vt.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new ST(s,n,i,r);this.mutationQueue.push(a);for(const o of r)this.Zr=this.Zr.add(new Vt(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return M.resolve(a)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?zs:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Vt(n,0),r=new Vt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const o=this.Xr(a.Yr);s.push(o)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ve(ae);return n.forEach(r=>{const s=new Vt(r,0),a=new Vt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{i=i.add(o.Yr)})}),M.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;$.isDocumentKey(s)||(s=s.child(""));const a=new Vt(new $(s),0);let o=new Ve(ae);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(o=o.add(l.Yr)),!0)},a),M.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Z(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return M.forEach(n.mutations,r=>{const s=new Vt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new Vt(n,0),r=this.Zr.firstAfterOrEqual(i);return M.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zG{constructor(e){this.ri=e,this.docs=function(){return new Be($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return M.resolve(i?i.document.mutableCopy():We.newInvalidDocument(n))}getEntries(e,n){let i=Cn();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():We.newInvalidDocument(r))}),M.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Cn();const a=n.path,o=new $(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||dT(Wk(h),i)<=0||(r.has(h.key)||Gd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,i,r){Y(9500)}ii(e,n){return M.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new FG(this)}getSize(e){return M.resolve(this.size)}}class FG extends mV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BG{constructor(e){this.persistence=e,this.si=new Kr(n=>ho(n),qd),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.oi=0,this._i=new kT,this.targetCount=0,this.ai=yo.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new yo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=n&&i.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),M.waitFor(s).next(()=>r)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return M.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),M.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return M.resolve(i)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n){this.ui={},this.overlays={},this.ci=new An(0),this.li=!1,this.li=!0,this.hi=new UG,this.referenceDelegate=e(this),this.Pi=new BG(this),this.indexManager=new IG,this.remoteDocumentCache=function(r){return new zG(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new rV(n),this.Ii=new MG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new LG,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new jG(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){H("MemoryPersistence","Starting transaction:",e);const r=new qG(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(e,n){return M.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class qG extends Yk{constructor(e){super(),this.currentSequenceNumber=e}}class Qg{constructor(e){this.persistence=e,this.Ri=new kT,this.Vi=null}static mi(e){return new Qg(e)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),M.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,i=>{const r=$.fromPath(i);return this.gi(e,r).next(s=>{s||n.removeEntry(r,te.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Mp{constructor(e,n){this.persistence=e,this.pi=new Kr(i=>ln(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=fV(this,n)}static mi(e,n){return new Mp(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(i,r)=>this.br(e,i,r).next(s=>s?M.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(o=>{o||(i++,s.removeEntry(a,te.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),M.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Rm(e.data.value)),n}br(e,n,i){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return M.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HG{constructor(e){this.serializer=e}k(e,n,i,r){const s=new Ug("createOrUpgrade",n);i<1&&r>=1&&(function(l){l.createObjectStore(Bd)}(e),function(l){l.createObjectStore(Zh,{keyPath:aH}),l.createObjectStore(Ii,{keyPath:j1,autoIncrement:!0}).createIndex(Fa,z1,{unique:!0}),l.createObjectStore(tc)}(e),CA(e),function(l){l.createObjectStore(Da)}(e));let a=M.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore(ic),l.deleteObjectStore(nc),l.deleteObjectStore(Za)}(e),CA(e)),a=a.next(()=>function(l){const c=l.store(Za),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:te.min().toTimestamp(),targetCount:0};return c.put(Cp,h)}(s))),i<4&&r>=4&&(i!==0&&(a=a.next(()=>function(l,c){return c.store(Ii).J().next(d=>{l.deleteObjectStore(Ii),l.createObjectStore(Ii,{keyPath:j1,autoIncrement:!0}).createIndex(Fa,z1,{unique:!0});const f=c.store(Ii),g=d.map(E=>f.put(E));return M.waitFor(g)})}(e,s))),a=a.next(()=>{(function(l){l.createObjectStore(rc,{keyPath:pH})})(e)})),i<5&&r>=5&&(a=a.next(()=>this.yi(s))),i<6&&r>=6&&(a=a.next(()=>(function(l){l.createObjectStore(ed)}(e),this.wi(s)))),i<7&&r>=7&&(a=a.next(()=>this.Si(s))),i<8&&r>=8&&(a=a.next(()=>this.bi(e,s))),i<9&&r>=9&&(a=a.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(a=a.next(()=>this.Di(s))),i<11&&r>=11&&(a=a.next(()=>{(function(l){l.createObjectStore(jg,{keyPath:gH})})(e),function(l){l.createObjectStore(zg,{keyPath:yH})}(e)})),i<12&&r>=12&&(a=a.next(()=>{(function(l){const c=l.createObjectStore(Fg,{keyPath:xH});c.createIndex(P0,SH,{unique:!1}),c.createIndex(rO,IH,{unique:!1})})(e)})),i<13&&r>=13&&(a=a.next(()=>function(l){const c=l.createObjectStore(Rp,{keyPath:lH});c.createIndex(Im,cH),c.createIndex(eO,uH)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(Da))),i<14&&r>=14&&(a=a.next(()=>this.Fi(e,s))),i<15&&r>=15&&(a=a.next(()=>function(l){l.createObjectStore(pT,{keyPath:_H,autoIncrement:!0}).createIndex(N0,vH,{unique:!1}),l.createObjectStore(dh,{keyPath:wH}).createIndex(nO,bH,{unique:!1}),l.createObjectStore(fh,{keyPath:TH}).createIndex(iO,EH,{unique:!1})}(e))),i<16&&r>=16&&(a=a.next(()=>{n.objectStore(dh).clear()}).next(()=>{n.objectStore(fh).clear()})),i<17&&r>=17&&(a=a.next(()=>{(function(l){l.createObjectStore(gT,{keyPath:AH})})(e)})),i<18&&r>=18&&ED()&&(a=a.next(()=>{n.objectStore(dh).clear()}).next(()=>{n.objectStore(fh).clear()})),a}wi(e){let n=0;return e.store(Da).ee((i,r)=>{n+=Vp(r)}).next(()=>{const i={byteSize:n};return e.store(ed).put(C0,i)})}yi(e){const n=e.store(Zh),i=e.store(Ii);return n.J().next(r=>M.forEach(r,s=>{const a=IDBKeyRange.bound([s.userId,zs],[s.userId,s.lastAcknowledgedBatchId]);return i.J(Fa,a).next(o=>M.forEach(o,l=>{Z(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=Ma(this.serializer,l);return cV(e,s.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(ic),i=e.store(Da);return e.store(Za).get(Cp).next(r=>{const s=[];return i.ee((a,o)=>{const l=new _e(a),c=function(d){return[0,ln(d)]}(l);s.push(n.get(c).next(h=>h?M.resolve():(d=>n.put({targetId:0,path:ln(d),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(s))})}bi(e,n){e.createObjectStore(td,{keyPath:mH});const i=n.store(td),r=new DT,s=a=>{if(r.add(a)){const o=a.lastSegment(),l=a.popLast();return i.put({collectionId:o,parent:ln(l)})}};return n.store(Da).ee({X:!0},(a,o)=>{const l=new _e(a);return s(l.popLast())}).next(()=>n.store(tc).ee({X:!0},([a,o,l],c)=>{const h=Ki(o);return s(h.popLast())}))}Di(e){const n=e.store(nc);return n.ee((i,r)=>{const s=Uu(r),a=sV(this.serializer,s);return n.put(a)})}Ci(e,n){const i=n.store(Da),r=[];return i.ee((s,a)=>{const o=n.store(Rp),l=function(d){return d.document?new $(_e.fromString(d.document.name).popFirst(5)):d.noDocument?$.fromSegments(d.noDocument.path):d.unknownDocument?$.fromSegments(d.unknownDocument.path):Y(36783)}(a).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(o.put(c))}).next(()=>M.waitFor(r))}Fi(e,n){const i=n.store(Ii),r=pV(this.serializer),s=new OT(Qg.mi,this.serializer.yt);return i.J().next(a=>{const o=new Map;return a.forEach(l=>{let c=o.get(l.userId)??ue();Ma(this.serializer,l).keys().forEach(h=>c=c.add(h)),o.set(l.userId,c)}),M.forEach(o,(l,c)=>{const h=new Lt(c),d=Kg.wt(this.serializer,h),f=s.getIndexManager(h),g=Wg.wt(h,this.serializer,f,s.referenceDelegate);return new gV(r,g,d,f).recalculateAndSaveOverlaysForDocumentKeys(new D0(n,An.ce),l).next()})})}}function CA(t){t.createObjectStore(ic,{keyPath:dH}).createIndex(mT,fH,{unique:!0}),t.createObjectStore(nc,{keyPath:"targetId"}).createIndex(tO,hH,{unique:!0}),t.createObjectStore(Za)}const ls="IndexedDbPersistence",j_=18e5,z_=5e3,F_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yV="main";class VT{constructor(e,n,i,r,s,a,o,l,c,h,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.Mi=s,this.window=a,this.document=o,this.xi=c,this.Oi=h,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!VT.v())throw new B(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new DG(this,r),this.$i=n+yV,this.serializer=new rV(l),this.Ui=new Xi(this.$i,this.Ni,new HG(this.serializer)),this.hi=new wG,this.Pi=new RG(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pV(this.serializer),this.Ii=new vG,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&yt(ls,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new B(U.FAILED_PRECONDITION,F_);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new An(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Hf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(ha(e))return H(ls,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return H(ls,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Eu(e).get(qo).next(n=>M.resolve(this.es(n)))}ts(e){return Hf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,j_)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=kt(n,rc);return i.J().next(r=>{const s=this.ss(r,j_),a=r.filter(o=>s.indexOf(o)===-1);return M.forEach(a,o=>i.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?M.resolve(!0):Eu(e).get(qo).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,z_)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new B(U.FAILED_PRECONDITION,F_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Hf(e).J().next(i=>this.ss(i,z_).find(r=>{if(this.clientId!==r.clientId){const s=!this.networkEnabled&&r.networkEnabled,a=!this.inForeground&&r.inForeground,o=this.networkEnabled===r.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&H(ls,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Bd,rc],e=>{const n=new D0(e,An.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(i=>this.rs(i.updateTimeMs,n)&&!this.us(i.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Hf(e).J().next(n=>this.ss(n,j_).map(i=>i.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Wg.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new AG(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Kg.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,i){H(ls,"Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?NH:l===17?lO:l===16?CH:l===15?yT:l===14?oO:l===13?aO:l===12?RH:l===11?sO:void Y(60245)}(this.Ni);let a;return this.Ui.runTransaction(e,r,s,o=>(a=new D0(o,this.ci?this.ci.next():An.ce),n==="readwrite-primary"?this.Hi(a).next(l=>!!l||this.Yi(a)).next(l=>{if(!l)throw yt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new B(U.FAILED_PRECONDITION,Qk);return i(a)}).next(l=>this.Xi(a).next(()=>l)):this.Is(a).next(()=>i(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Is(e){return Eu(e).get(qo).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,z_)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new B(U.FAILED_PRECONDITION,F_)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Eu(e).put(qo,n)}static v(){return Xi.v()}Zi(e){const n=Eu(e);return n.get(qo).next(i=>this.es(i)?(H(ls,"Releasing primary lease."),n.delete(qo)):M.resolve())}rs(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(yt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;TD()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const i=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return H(ls,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return yt(ls,"Failed to get zombied client id.",i),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){yt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Eu(t){return kt(t,Bd)}function Hf(t){return kt(t,rc)}function MT(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=ue(),r=ue();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new LT(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return TD()?8:Xk(Se())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.ys(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new GG;return this.Ss(e,n,a).next(o=>{if(s.result=o,this.Vs)return this.bs(e,n,a,o.size)})}).next(()=>s.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(el()<=fe.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",tl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(el()<=fe.DEBUG&&H("QueryEngine","Query:",tl(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(el()<=fe.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",tl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vn(n))):M.resolve())}ys(e,n){if(Z1(n))return M.resolve(null);let i=vn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Dp(n,null,"F"),i=vn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=ue(...s);return this.ps.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Ds(n,o);return this.Cs(n,c,a,l.readTime)?this.ys(e,Dp(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,i,r){return Z1(n)||r.isEqual(te.min())?M.resolve(null):this.ps.getDocuments(e,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?M.resolve(null):(el()<=fe.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),tl(n)),this.vs(e,a,n,Kk(r,ec)).next(o=>o))})}Ds(e,n){let i=new Ve(CO(e));return n.forEach((r,s)=>{Gd(e,s)&&(i=i.add(s))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,n,i){return el()<=fe.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",tl(n)),this.ps.getDocumentsMatchingQuery(e,n,Zn.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="LocalStore",$G=3e8;class KG{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Be(ae),this.xs=new Kr(s=>ho(s),qd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function vV(t,e,n,i){return new KG(t,e,n,i)}async function wV(t,e){const n=W(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],o=[];let l=ue();for(const c of r){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({Ls:c,removedBatchIds:a,addedBatchIds:o}))})})}function WG(t,e){const n=W(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,c,h){const d=c.batch,f=d.keys();let g=M.resolve();return f.forEach(E=>{g=g.next(()=>h.getEntry(l,E)).next(S=>{const b=c.docVersions.get(E);Z(b!==null,48541),S.version.compareTo(b)<0&&(d.applyToRemoteDocument(S,c),S.isValidDocument()&&(S.setReadTime(c.commitVersion),h.addEntry(S)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let l=ue();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function bV(t){const e=W(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function QG(t,e){const n=W(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const o=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;o.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,d)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(dt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,i)),r=r.insert(d,g),function(S,b,y){return S.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=$G?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,g,h)&&o.push(n.Pi.updateTargetData(s,g))});let l=Cn(),c=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),o.push(TV(s,a,e.documentUpdates).next(h=>{l=h.ks,c=h.qs})),!i.isEqual(te.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));o.push(h)}return M.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ms=r,s))}function TV(t,e,n){let i=ue(),r=ue();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=Cn();return n.forEach((o,l)=>{const c=s.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(o)),l.isNoDocument()&&l.version.isEqual(te.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):H(UT,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{ks:a,qs:r}})}function YG(t,e){const n=W(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=zs),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function hc(t,e){const n=W(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(s=>s?(r=s,M.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Tr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function dc(t,e,n){const i=W(t),r=i.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!ha(a))throw a;H(UT,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function Lp(t,e,n){const i=W(t);let r=te.min(),s=ue();return i.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,h){const d=W(l),f=d.xs.get(h);return f!==void 0?M.resolve(d.Ms.get(f)):d.Pi.getTargetData(c,h)}(i,a,vn(e)).next(o=>{if(o)return r=o.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:te.min(),n?s:ue())).next(o=>(SV(i,RO(e),o),{documents:o,Qs:s})))}function EV(t,e){const n=W(t),i=W(n.Pi),r=n.Ms.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",s=>i.At(s,e).next(a=>a?a.target:null))}function xV(t,e){const n=W(t),i=n.Os.get(e)||te.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.Ns.getAllFromCollectionGroup(r,e,Kk(i,ec),Number.MAX_SAFE_INTEGER)).then(r=>(SV(n,e,r),r))}function SV(t,e,n){let i=t.Os.get(e)||te.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.Os.set(e,i)}async function XG(t,e,n,i){const r=W(t);let s=ue(),a=Cn();for(const c of n){const h=e.$s(c.metadata.name);c.document&&(s=s.add(h));const d=e.Us(c);d.setReadTime(e.Ks(c.metadata.readTime)),a=a.insert(h,d)}const o=r.Ns.newChangeBuffer({trackRemovals:!0}),l=await hc(r,function(h){return vn(Vc(_e.fromString(`__bundle__/docs/${h}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>TV(c,o,a).next(h=>(o.apply(c),h)).next(h=>r.Pi.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Pi.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,h.ks,h.qs)).next(()=>h.ks)))}async function JG(t,e,n=ue()){const i=await hc(t,vn(NT(e.bundledQuery))),r=W(t);return r.persistence.runTransaction("Save named query","readwrite",s=>{const a=vt(e.readTime);if(i.snapshotVersion.compareTo(a)>=0)return r.Ii.saveNamedQuery(s,e);const o=i.withResumeToken(dt.EMPTY_BYTE_STRING,a);return r.Ms=r.Ms.insert(o.targetId,o),r.Pi.updateTargetData(s,o).next(()=>r.Pi.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Pi.addMatchingKeys(s,n,i.targetId)).next(()=>r.Ii.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV="firestore_clients";function NA(t,e){return`${IV}_${t}_${e}`}const AV="firestore_mutations";function PA(t,e,n){let i=`${AV}_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const RV="firestore_targets";function B_(t,e){return`${RV}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li="SharedClientState";class Up{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Ws(e,n,i){const r=JSON.parse(i);let s,a=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(s=new B(r.error.code,r.error.message))),a?new Up(e,n,r.state,s):(yt(Li,`Failed to parse mutation state for ID '${n}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yh{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Ws(e,n){const i=JSON.parse(n);let r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new B(i.error.code,i.error.message))),s?new yh(e,i.state,r):(yt(Li,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const i=JSON.parse(n);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=TT();for(let a=0;r&&a<i.activeTargetIds.length;++a)r=Jk(i.activeTargetIds[a]),s=s.add(i.activeTargetIds[a]);return r?new jp(e,s):(yt(Li,`Failed to parse client data for instance '${e}': ${n}`),null)}}class jT{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new jT(n.clientId,n.onlineState):(yt(Li,`Failed to parse online state: ${e}`),null)}}class K0{constructor(){this.activeTargetIds=TT()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class q_{constructor(e,n,i,r,s){this.window=e,this.Mi=n,this.persistenceKey=i,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Be(ae),this.started=!1,this.Xs=[];const a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=NA(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new K0),this.ro=new RegExp(`^${IV}_${a}_([^_]*)$`),this.io=new RegExp(`^${AV}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${RV}_${a}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const r=this.getItem(NA(this.persistenceKey,i));if(r){const s=jp.Ws(i,r);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const i=this.uo(n);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,i){this.ho(e,n,i),this.Po(e)}addLocalQueryTarget(e,n=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(B_(this.persistenceKey,e));if(r){const s=yh.Ws(e,r);s&&(i=s.state)}}return n&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(B_(this.persistenceKey,e))}updateQueryState(e,n,i){this.Io(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Po(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return H(Li,"READ",e,n),n}setItem(e,n){H(Li,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){H(Li,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(H(Li,"EVENT",n.key,n.newValue),n.key===this.eo)return void yt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const i=this.Ro(n.key);return this.Vo(i,null)}{const i=this.mo(n.key,n.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(n.key)){if(n.newValue!==null){const i=this.fo(n.key,n.newValue);if(i)return this.po(i)}}else if(this.so.test(n.key)){if(n.newValue!==null){const i=this.yo(n.key,n.newValue);if(i)return this.wo(i)}}else if(n.key===this.oo){if(n.newValue!==null){const i=this.uo(n.newValue);if(i)return this.co(i)}}else if(n.key===this.no){const i=function(s){let a=An.ce;if(s!=null)try{const o=JSON.parse(s);Z(typeof o=="number",30636,{So:s}),a=o}catch(o){yt(Li,"Failed to read sequence number from WebStorage",o)}return a}(n.newValue);i!==An.ce&&this.sequenceNumberHandler(i)}else if(n.key===this._o){const i=this.bo(n.newValue);await Promise.all(i.map(r=>this.syncEngine.Do(r)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,i){const r=new Up(this.currentUser,e,n,i),s=PA(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Gs())}Po(e){const n=PA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,i){const r=B_(this.persistenceKey,e),s=new yh(e,n,i);this.setItem(r,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const i=this.Ro(e);return jp.Ws(i,n)}fo(e,n){const i=this.io.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return Up.Ws(new Lt(s),r,n)}yo(e,n){const i=this.so.exec(e),r=Number(i[1]);return yh.Ws(r,n)}uo(e){return jT.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);H(Li,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const i=n?this.Zs.insert(e,n):this.Zs.remove(e),r=this.lo(this.Zs),s=this.lo(i),a=[],o=[];return s.forEach(l=>{r.has(l)||a.push(l)}),r.forEach(l=>{s.has(l)||o.push(l)}),this.syncEngine.Fo(a,o).then(()=>{this.Zs=i})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=TT();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}}class CV{constructor(){this.Mo=new K0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new K0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZG{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="ConnectivityMonitor";class kA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(DA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(DA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gf=null;function W0(){return Gf===null?Gf=function(){return 268435456+Math.round(2147483648*Math.random())}():Gf++,"0x"+Gf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="RestConnection",e$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class t${get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===k0?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,s){const a=W0(),o=this.zo(e,n.toUriEncodedString());H(H_,`Sending RPC '${e}' ${a}:`,o,i);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,s);const{host:c}=new URL(o),h=lr(c);return this.Jo(e,o,l,i,h).then(d=>(H(H_,`Received RPC '${e}' ${a}: `,d),d),d=>{throw rr(H_,`RPC '${e}' ${a} failed with error: `,d,"url: ",o,"request:",i),d})}Ho(e,n,i,r,s,a){return this.Go(e,n,i,r,s)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}zo(e,n){const i=e$[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class i$ extends t${constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,s){const a=W0();return new Promise((o,l)=>{const c=new Mk;c.setWithCredentials(!0),c.listenOnce(Lk.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Em.NO_ERROR:const d=c.getResponseJson();H(en,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case Em.TIMEOUT:H(en,`RPC '${e}' ${a} timed out`),l(new B(U.DEADLINE_EXCEEDED,"Request time out"));break;case Em.HTTP_ERROR:const f=c.getStatus();if(H(en,`RPC '${e}' ${a} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const E=g==null?void 0:g.error;if(E&&E.status&&E.message){const S=function(y){const _=y.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(_)>=0?_:U.UNKNOWN}(E.status);l(new B(S,E.message))}else l(new B(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new B(U.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{H(en,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(r);H(en,`RPC '${e}' ${a} sending request:`,r),c.send(n,"POST",h,i,15)})}T_(e,n,i){const r=W0(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=zk(),o=jk(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");H(en,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=a.createWebChannel(h,l);this.I_(d);let f=!1,g=!1;const E=new n$({Yo:b=>{g?H(en,`Not sending because RPC '${e}' stream ${r} is closed:`,b):(f||(H(en,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),H(en,`RPC '${e}' stream ${r} sending:`,b),d.send(b))},Zo:()=>d.close()}),S=(b,y,_)=>{b.listen(y,v=>{try{_(v)}catch(I){setTimeout(()=>{throw I},0)}})};return S(d,Vu.EventType.OPEN,()=>{g||(H(en,`RPC '${e}' stream ${r} transport opened.`),E.o_())}),S(d,Vu.EventType.CLOSE,()=>{g||(g=!0,H(en,`RPC '${e}' stream ${r} transport closed`),E.a_(),this.E_(d))}),S(d,Vu.EventType.ERROR,b=>{g||(g=!0,rr(en,`RPC '${e}' stream ${r} transport errored. Name:`,b.name,"Message:",b.message),E.a_(new B(U.UNAVAILABLE,"The operation could not be completed")))}),S(d,Vu.EventType.MESSAGE,b=>{var y;if(!g){const _=b.data[0];Z(!!_,16349);const v=_,I=(v==null?void 0:v.error)||((y=v[0])==null?void 0:y.error);if(I){H(en,`RPC '${e}' stream ${r} received error:`,I);const k=I.status;let O=function(R){const C=Tt[R];if(C!==void 0)return BO(C)}(k),T=I.message;O===void 0&&(O=U.INTERNAL,T="Unknown error status: "+k+" with message "+I.message),g=!0,E.a_(new B(O,T)),d.close()}else H(en,`RPC '${e}' stream ${r} received:`,_),E.u_(_)}}),S(o,Uk.STAT_EVENT,b=>{b.stat===I0.PROXY?H(en,`RPC '${e}' stream ${r} detected buffering proxy`):b.stat===I0.NOPROXY&&H(en,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{E.__()},0),E}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NV(){return typeof window<"u"?window:null}function km(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(t){return new lG(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&H("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="PersistentStream";class PV{constructor(e,n,i,r,s,a,o,l){this.Mi=e,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new zT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(yt(n.toString()),yt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new B(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(OA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(H(OA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class r$ extends PV{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=hG(this.serializer,e),i=function(s){if(!("targetChange"in s))return te.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?te.min():a.readTime?vt(a.readTime):te.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=B0(this.serializer),n.addTarget=function(s,a){let o;const l=a.target;if(o=Np(l)?{documents:JO(s,l)}:{query:ZO(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=$O(s,a.resumeToken);const c=z0(s,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(te.min())>0){o.readTime=uc(s,a.snapshotVersion.toTimestamp());const c=z0(s,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const i=fG(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=B0(this.serializer),n.removeTarget=e,this.q_(n)}}class s$ extends PV{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Z(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Z(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Z(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=dG(e.writeResults,e.commitTime),i=vt(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=B0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>od(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${}class o$ extends a${constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new B(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,F0(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(U.UNKNOWN,s.toString())})}Ho(e,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(e,F0(n,i),r,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new B(U.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class l${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yt(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="RemoteStore";class c${constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{fa(this)&&(H(_o,"Restarting streams for network reachability change."),await async function(l){const c=W(l);c.Ea.add(4),await Uc(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Yd(c)}(this))})}),this.Ra=new l$(i,r)}}async function Yd(t){if(fa(t))for(const e of t.da)await e(!0)}async function Uc(t){for(const e of t.da)await e(!1)}function Yg(t,e){const n=W(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),qT(n)?BT(n):zc(n).O_()&&FT(n,e))}function fc(t,e){const n=W(t),i=zc(n);n.Ia.delete(e),i.O_()&&DV(n,e),n.Ia.size===0&&(i.O_()?i.L_():fa(n)&&n.Ra.set("Unknown"))}function FT(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zc(t).Y_(e)}function DV(t,e){t.Va.Ue(e),zc(t).Z_(e)}function BT(t){t.Va=new rG({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),zc(t).start(),t.Ra.ua()}function qT(t){return fa(t)&&!zc(t).x_()&&t.Ia.size>0}function fa(t){return W(t).Ea.size===0}function kV(t){t.Va=void 0}async function u$(t){t.Ra.set("Online")}async function h$(t){t.Ia.forEach((e,n)=>{FT(t,e)})}async function d$(t,e){kV(t),qT(t)?(t.Ra.ha(e),BT(t)):t.Ra.set("Unknown")}async function f$(t,e,n){if(t.Ra.set("Online"),e instanceof GO&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const o of s.targetIds)r.Ia.has(o)&&(await r.remoteSyncer.rejectListen(o,a),r.Ia.delete(o),r.Va.removeTarget(o))}(t,e)}catch(i){H(_o,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await zp(t,i)}else if(e instanceof Pm?t.Va.Ze(e):e instanceof HO?t.Va.st(e):t.Va.tt(e),!n.isEqual(te.min()))try{const i=await bV(t.localStore);n.compareTo(i)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(c);h&&s.Ia.set(c,h.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(dt.EMPTY_BYTE_STRING,h.snapshotVersion)),DV(s,l);const d=new Tr(h.target,l,c,h.sequenceNumber);FT(s,d)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(i){H(_o,"Failed to raise snapshot:",i),await zp(t,i)}}async function zp(t,e,n){if(!ha(e))throw e;t.Ea.add(1),await Uc(t),t.Ra.set("Offline"),n||(n=()=>bV(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(_o,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Yd(t)})}function OV(t,e){return e().catch(n=>zp(t,n,e))}async function jc(t){const e=W(t),n=ta(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:zs;for(;m$(e);)try{const r=await YG(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,p$(e,r)}catch(r){await zp(e,r)}VV(e)&&MV(e)}function m$(t){return fa(t)&&t.Ta.length<10}function p$(t,e){t.Ta.push(e);const n=ta(t);n.O_()&&n.X_&&n.ea(e.mutations)}function VV(t){return fa(t)&&!ta(t).x_()&&t.Ta.length>0}function MV(t){ta(t).start()}async function g$(t){ta(t).ra()}async function y$(t){const e=ta(t);for(const n of t.Ta)e.ea(n.mutations)}async function _$(t,e,n){const i=t.Ta.shift(),r=IT.from(i,e,n);await OV(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await jc(t)}async function v$(t,e){e&&ta(t).X_&&await async function(i,r){if(function(a){return FO(a)&&a!==U.ABORTED}(r.code)){const s=i.Ta.shift();ta(i).B_(),await OV(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await jc(i)}}(t,e),VV(t)&&MV(t)}async function VA(t,e){const n=W(t);n.asyncQueue.verifyOperationInProgress(),H(_o,"RemoteStore received new credentials");const i=fa(n);n.Ea.add(3),await Uc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Yd(n)}async function Q0(t,e){const n=W(t);e?(n.Ea.delete(2),await Yd(n)):e||(n.Ea.add(2),await Uc(n),n.Ra.set("Unknown"))}function zc(t){return t.ma||(t.ma=function(n,i,r){const s=W(n);return s.sa(),new r$(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:u$.bind(null,t),t_:h$.bind(null,t),r_:d$.bind(null,t),H_:f$.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),qT(t)?BT(t):t.Ra.set("Unknown")):(await t.ma.stop(),kV(t))})),t.ma}function ta(t){return t.fa||(t.fa=function(n,i,r){const s=W(n);return s.sa(),new s$(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:g$.bind(null,t),r_:v$.bind(null,t),ta:y$.bind(null,t),na:_$.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await jc(t)):(await t.fa.stop(),t.Ta.length>0&&(H(_o,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Xt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,o=new HT(e,n,a,r,s);return o.start(i),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fc(t,e){if(yt("AsyncQueue",`${e}: ${t}`),ha(t))return new B(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{static emptySet(e){return new Ol(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||$.comparator(n.key,i.key):(n,i)=>$.comparator(n.key,i.key),this.keyedMap=Mu(),this.sortedSet=new Be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ol)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ol;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(){this.ga=new Be($.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Y(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class mc{constructor(e,n,i,r,s,a,o,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new mc(e,n,Ol.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class b${constructor(){this.queries=LA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=W(n),s=r.queries;r.queries=LA(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(i)})})(this,new B(U.ABORTED,"Firestore shutting down"))}}function LA(){return new Kr(t=>AO(t),Hd)}async function GT(t,e){const n=W(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.ba()&&e.Da()&&(i=2):(s=new w$,i=e.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const o=Fc(a,`Initialization of query '${tl(e.query)}' failed`);return void e.onError(o)}n.queries.set(r,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&KT(n)}async function $T(t,e){const n=W(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=e.Da()?0:1:!s.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function T$(t,e){const n=W(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const o of a.Sa)o.Fa(r)&&(i=!0);a.wa=r}}i&&KT(n)}function E$(t,e,n){const i=W(t),r=i.queries.get(e);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(e)}function KT(t){t.Ca.forEach(e=>{e.next()})}var Y0,UA;(UA=Y0||(Y0={})).Ma="default",UA.Cache="cache";class WT{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new mc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=mc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Y0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.serializer=e}$s(e){return Ji(this.serializer,e)}Us(e){return e.metadata.exists?XO(this.serializer,e.document,!1):We.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return vt(e)}}class S${constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=LV(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const i=_e.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,i=new jA(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.$s(r.metadata.name);for(const a of r.metadata.queries){const o=(n.get(a)||ue()).add(s);n.set(a,o)}}return n}async ja(e){const n=await XG(e,new jA(this.serializer),this.Wa,this.Ua.id),i=this.za(this.documents);for(const r of this.Ka)await JG(e,r,i.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function LV(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e){this.key=e}}class jV{constructor(e){this.key=e}}class zV{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ue(),this.mutatedKeys=ue(),this.eu=CO(e),this.tu=new Ol(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new MA,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,o=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),g=Gd(this.query,d)?d:null,E=!!f&&this.mutatedKeys.has(f.key),S=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;f&&g?f.data.isEqual(g.data)?E!==S&&(i.track({type:3,doc:g}),b=!0):this.su(f,g)||(i.track({type:2,doc:g}),b=!0,(l&&this.eu(g,l)>0||c&&this.eu(g,c)<0)&&(o=!0)):!f&&g?(i.track({type:0,doc:g}),b=!0):f&&!g&&(i.track({type:1,doc:f}),b=!0,(l||c)&&(o=!0)),b&&(g?(a=a.add(g),s=S?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{tu:a,iu:i,Cs:o,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,d)=>function(g,E){const S=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:b})}};return S(g)-S(E)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(i),r=r??!1;const o=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,c=l!==this.Za;return this.Za=l,a.length!==0||c?{snapshot:new mc(this.query,e.tu,s,a,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new MA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ue(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new jV(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new UV(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=ue();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return mc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ma="SyncEngine";class I${constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class A${constructor(e){this.key=e,this.hu=!1}}class R${constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Kr(o=>AO(o),Hd),this.Iu=new Map,this.Eu=new Set,this.du=new Be($.comparator),this.Au=new Map,this.Ru=new kT,this.Vu={},this.mu=new Map,this.fu=yo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function C$(t,e,n=!0){const i=Xg(t);let r;const s=i.Tu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await FV(i,e,n,!0),r}async function N$(t,e){const n=Xg(t);await FV(n,e,!0,!1)}async function FV(t,e,n,i){const r=await hc(t.localStore,vn(e)),s=r.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return i&&(o=await QT(t,e,s,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&Yg(t.remoteStore,r),o}async function QT(t,e,n,i,r){t.pu=(d,f,g)=>async function(S,b,y,_){let v=b.view.ru(y);v.Cs&&(v=await Lp(S.localStore,b.query,!1).then(({documents:T})=>b.view.ru(T,v)));const I=_&&_.targetChanges.get(b.targetId),k=_&&_.targetMismatches.get(b.targetId)!=null,O=b.view.applyChanges(v,S.isPrimaryClient,I,k);return X0(S,b.targetId,O.au),O.snapshot}(t,d,f,g);const s=await Lp(t.localStore,e,!0),a=new zV(e,s.Qs),o=a.ru(s.documents),l=Wd.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=a.applyChanges(o,t.isPrimaryClient,l);X0(t,n,c.au);const h=new I$(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function P$(t,e,n){const i=W(t),r=i.Tu.get(e),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!Hd(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await dc(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&fc(i.remoteStore,r.targetId),pc(i,r.targetId)}).catch(ua)):(pc(i,r.targetId),await dc(i.localStore,r.targetId,!0))}async function D$(t,e){const n=W(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),fc(n.remoteStore,i.targetId))}async function k$(t,e,n){const i=ZT(t);try{const r=await function(a,o){const l=W(a),c=Ne.now(),h=o.reduce((g,E)=>g.add(E.key),ue());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let E=Cn(),S=ue();return l.Ns.getEntries(g,h).next(b=>{E=b,E.forEach((y,_)=>{_.isValidDocument()||(S=S.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,E)).next(b=>{d=b;const y=[];for(const _ of o){const v=tG(_,d.get(_.key).overlayedDocument);v!=null&&y.push(new Wr(_.key,v,_O(v.value.mapValue),nt.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,y,o)}).next(b=>{f=b;const y=b.applyToLocalDocumentSet(d,S);return l.documentOverlayCache.saveOverlays(g,b.batchId,y)})}).then(()=>({batchId:f.batchId,changes:PO(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,o,l){let c=a.Vu[a.currentUser.toKey()];c||(c=new Be(ae)),c=c.insert(o,l),a.Vu[a.currentUser.toKey()]=c}(i,r.batchId,n),await Qr(i,r.changes),await jc(i.remoteStore)}catch(r){const s=Fc(r,"Failed to persist write");n.reject(s)}}async function BV(t,e){const n=W(t);try{const i=await QG(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(Z(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Z(a.hu,14607):r.removedDocuments.size>0&&(Z(a.hu,42227),a.hu=!1))}),await Qr(n,i,e)}catch(i){await ua(i)}}function zA(t,e,n){const i=W(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const o=a.view.va(e);o.snapshot&&r.push(o.snapshot)}),function(a,o){const l=W(a);l.onlineState=o;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.Sa)f.va(o)&&(c=!0)}),c&&KT(l)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function O$(t,e,n){const i=W(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),s=r&&r.key;if(s){let a=new Be($.comparator);a=a.insert(s,We.newNoDocument(s,te.min()));const o=ue().add(s),l=new Kd(te.min(),new Map,new Be(ae),a,o);await BV(i,l),i.du=i.du.remove(s),i.Au.delete(e),JT(i)}else await dc(i.localStore,e,!1).then(()=>pc(i,e,n)).catch(ua)}async function V$(t,e){const n=W(t),i=e.batch.batchId;try{const r=await WG(n.localStore,e);XT(n,i,null),YT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Qr(n,r)}catch(r){await ua(r)}}async function M$(t,e,n){const i=W(t);try{const r=await function(a,o){const l=W(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,o).next(d=>(Z(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);XT(i,e,n),YT(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Qr(i,r)}catch(r){await ua(r)}}async function L$(t,e){const n=W(t);fa(n.remoteStore)||H(ma,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(a){const o=W(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>o.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(i===zs)return void e.resolve();const r=n.mu.get(i)||[];r.push(e),n.mu.set(i,r)}catch(i){const r=Fc(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function YT(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function XT(t,e,n){const i=W(t);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function pc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||qV(t,i)})}function qV(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(fc(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),JT(t))}function X0(t,e,n){for(const i of n)i instanceof UV?(t.Ru.addReference(i.key,e),U$(t,i)):i instanceof jV?(H(ma,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||qV(t,i.key)):Y(19791,{wu:i})}function U$(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(H(ma,"New document in limbo: "+n),t.Eu.add(i),JT(t))}function JT(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new $(_e.fromString(e)),i=t.fu.next();t.Au.set(i,new A$(n)),t.du=t.du.insert(n,i),Yg(t.remoteStore,new Tr(vn(Vc(n.path)),i,"TargetPurposeLimboResolution",An.ce))}}async function Qr(t,e,n){const i=W(t),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((o,l)=>{a.push(i.pu(l,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=LT.As(l.targetId,c);s.push(d)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(l,c){const h=W(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>M.forEach(c,f=>M.forEach(f.Es,g=>h.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>M.forEach(f.ds,g=>h.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!ha(d))throw d;H(UT,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const g=h.Ms.get(f),E=g.snapshotVersion,S=g.withLastLimboFreeSnapshotVersion(E);h.Ms=h.Ms.insert(f,S)}}}(i.localStore,s))}async function j$(t,e){const n=W(t);if(!n.currentUser.isEqual(e)){H(ma,"User change. New user:",e.toKey());const i=await wV(n.localStore,e);n.currentUser=e,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new B(U.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Qr(n,i.Ls)}}function z$(t,e){const n=W(t),i=n.Au.get(e);if(i&&i.hu)return ue().add(i.key);{let r=ue();const s=n.Iu.get(e);if(!s)return r;for(const a of s){const o=n.Tu.get(a);r=r.unionWith(o.view.nu)}return r}}async function F$(t,e){const n=W(t),i=await Lp(n.localStore,e.query,!0),r=e.view.cu(i);return n.isPrimaryClient&&X0(n,e.targetId,r.au),r}async function B$(t,e){const n=W(t);return xV(n.localStore,e).then(i=>Qr(n,i))}async function q$(t,e,n,i){const r=W(t),s=await function(o,l){const c=W(o),h=W(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>h.er(d,l).next(f=>f?c.localDocuments.getDocuments(d,f):M.resolve(null)))}(r.localStore,e);s!==null?(n==="pending"?await jc(r.remoteStore):n==="acknowledged"||n==="rejected"?(XT(r,e,i||null),YT(r,e),function(o,l){W(W(o).mutationQueue).ir(l)}(r.localStore,e)):Y(6720,"Unknown batchState",{Su:n}),await Qr(r,s)):H(ma,"Cannot apply mutation batch with id: "+e)}async function H$(t,e){const n=W(t);if(Xg(n),ZT(n),e===!0&&n.gu!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),r=await FA(n,i.toArray());n.gu=!0,await Q0(n.remoteStore,!0);for(const s of r)Yg(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const i=[];let r=Promise.resolve();n.Iu.forEach((s,a)=>{n.sharedClientState.isLocalQueryTarget(a)?i.push(a):r=r.then(()=>(pc(n,a),dc(n.localStore,a,!0))),fc(n.remoteStore,a)}),await r,await FA(n,i),function(a){const o=W(a);o.Au.forEach((l,c)=>{fc(o.remoteStore,c)}),o.Ru.Jr(),o.Au=new Map,o.du=new Be($.comparator)}(n),n.gu=!1,await Q0(n.remoteStore,!1)}}async function FA(t,e,n){const i=W(t),r=[],s=[];for(const a of e){let o;const l=i.Iu.get(a);if(l&&l.length!==0){o=await hc(i.localStore,vn(l[0]));for(const c of l){const h=i.Tu.get(c),d=await F$(i,h);d.snapshot&&s.push(d.snapshot)}}else{const c=await EV(i.localStore,a);o=await hc(i.localStore,c),await QT(i,HV(c),a,!1,o.resumeToken)}r.push(o)}return i.Pu.H_(s),r}function HV(t){return IO(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function G$(t){return function(n){return W(W(n).persistence).Ts()}(W(t).localStore)}async function $$(t,e,n,i){const r=W(t);if(r.gu)return void H(ma,"Ignoring unexpected query state notification.");const s=r.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const a=await xV(r.localStore,RO(s[0])),o=Kd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",dt.EMPTY_BYTE_STRING);await Qr(r,a,o);break}case"rejected":await dc(r.localStore,e,!0),pc(r,e,i);break;default:Y(64155,n)}}async function K$(t,e,n){const i=Xg(t);if(i.gu){for(const r of e){if(i.Iu.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){H(ma,"Adding an already active target "+r);continue}const s=await EV(i.localStore,r),a=await hc(i.localStore,s);await QT(i,HV(s),a.targetId,!1,a.resumeToken),Yg(i.remoteStore,a)}for(const r of n)i.Iu.has(r)&&await dc(i.localStore,r,!1).then(()=>{fc(i.remoteStore,r),pc(i,r)}).catch(ua)}}function Xg(t){const e=W(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O$.bind(null,e),e.Pu.H_=T$.bind(null,e.eventManager),e.Pu.yu=E$.bind(null,e.eventManager),e}function ZT(t){const e=W(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=V$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M$.bind(null,e),e}function W$(t,e,n){const i=W(t);(async function(s,a,o){try{const l=await a.getMetadata();if(await function(g,E){const S=W(g),b=vt(E.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",y=>S.Ii.getBundleMetadata(y,E.id)).then(y=>!!y&&y.createTime.compareTo(b)>=0)}(s.localStore,l))return await a.close(),o._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(l)),Promise.resolve(new Set);o._updateProgress(LV(l));const c=new S$(l,a.serializer);let h=await a.bu();for(;h;){const f=await c.Ga(h);f&&o._updateProgress(f),h=await a.bu()}const d=await c.ja(s.localStore);return await Qr(s,d.Ha,void 0),await function(g,E){const S=W(g);return S.persistence.runTransaction("Save bundle","readwrite",b=>S.Ii.saveBundleMetadata(b,E))}(s.localStore,l),o._completeWith(d.progress),Promise.resolve(d.Ja)}catch(l){return rr(ma,`Loading bundle failed with ${l}`),o._failWith(l),Promise.resolve(new Set)}})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}class ld{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return vV(this.persistence,new _V,e.initialUser,this.serializer)}Cu(e){return new OT(Qg.mi,this.serializer)}Du(e){return new CV}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ld.provider={build:()=>new ld};class Q$ extends ld{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Z(this.persistence.referenceDelegate instanceof Mp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new dV(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new OT(i=>Mp.mi(i,n),this.serializer)}}class GV extends ld{constructor(e,n,i){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await ZT(this.xu.syncEngine),await jc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return vV(this.persistence,new _V,e.initialUser,this.serializer)}Fu(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new dV(i,e.asyncQueue,n)}Mu(e,n){const i=new rH(n,this.persistence);return new iH(e.asyncQueue,i)}Cu(e){const n=MT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new VT(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,NV(),km(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new CV}}class Y$ extends GV{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof q_&&(this.sharedClientState.syncEngine={Co:q$.bind(null,n),vo:$$.bind(null,n),Fo:K$.bind(null,n),Ts:G$.bind(null,n),Do:B$.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async i=>{await H$(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}Du(e){const n=NV();if(!q_.v(n))throw new B(U.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=MT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new q_(n,e.asyncQueue,i,e.clientId,e.initialUser)}}class cd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=j$.bind(null,this.syncEngine),await Q0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new b$}()}createDatastore(e){const n=Qd(e.databaseInfo.databaseId),i=function(s){return new i$(s)}(e.databaseInfo);return function(s,a,o,l){return new o$(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,a,o){return new c$(i,r,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>zA(this.syncEngine,n,0),function(){return kA.v()?new kA:new ZG}())}createSyncEngine(e,n){return function(r,s,a,o,l,c,h){const d=new R$(r,s,a,o,l,c);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=W(r);H(_o,"RemoteStore shutting down."),s.Ea.add(5),await Uc(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}cd.provider={build:()=>new cd};function BA(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Xt,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(i=>{i&&i.$a()?this.metadata.resolve(i.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Qa)}`))},i=>this.metadata.reject(i))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),i=Number(n);isNaN(i)&&this.Qu(`length string (${n}) is not valid number`);const r=await this.$u(i);return new x$(JSON.parse(r),e.length+i)}Uu(){return this.buffer.findIndex(e=>e===123)}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new B(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const a=W(r),o={documents:s.map(d=>ad(a.serializer,d))},l=await a.Ho("BatchGetDocuments",a.serializer.databaseId,_e.emptyPath(),o,s.length),c=new Map;l.forEach(d=>{const f=uG(a.serializer,d);c.set(f.key.toString(),f)});const h=[];return s.forEach(d=>{const f=c.get(d.toString());Z(!!f,55234,{key:d}),h.push(f)}),h}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Lc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=$.fromPath(i);this.mutations.push(new xT(r,this.precondition(r)))}),await async function(i,r){const s=W(i),a={writes:r.map(o=>od(s.serializer,o))};await s.Go("Commit",s.serializer.databaseId,_e.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Y(50498,{Gu:e.constructor.name});n=te.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new B(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(te.min())?nt.exists(!1):nt.updateTime(n):nt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(te.min()))throw new B(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nt.updateTime(n)}return nt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.zu=i.maxAttempts,this.M_=new zT(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new J$(this.datastore),n=this.Hu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Yu(r)}))}).catch(i=>{this.Yu(i)})})}Hu(e){try{const n=this.updateFunction(e);return!Fd(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!FO(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="FirestoreClient";class eK{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Lt.UNAUTHENTICATED,this.clientId=uT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{H(na,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(H(na,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Fc(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function G_(t,e){t.asyncQueue.verifyOperationInProgress(),H(na,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await wV(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function qA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await eE(t);H(na,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>VA(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>VA(e.remoteStore,r)),t._onlineComponents=e}async function eE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(na,"Using user provided OfflineComponentProvider");try{await G_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===U.FAILED_PRECONDITION||r.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;rr("Error using user provided cache. Falling back to memory cache: "+n),await G_(t,new ld)}}else H(na,"Using default OfflineComponentProvider"),await G_(t,new Q$(void 0));return t._offlineComponents}async function Zg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(na,"Using user provided OnlineComponentProvider"),await qA(t,t._uninitializedComponentsProvider._online)):(H(na,"Using default OnlineComponentProvider"),await qA(t,new cd))),t._onlineComponents}function $V(t){return eE(t).then(e=>e.persistence)}function tE(t){return eE(t).then(e=>e.localStore)}function KV(t){return Zg(t).then(e=>e.remoteStore)}function nE(t){return Zg(t).then(e=>e.syncEngine)}function tK(t){return Zg(t).then(e=>e.datastore)}async function gc(t){const e=await Zg(t),n=e.eventManager;return n.onListen=C$.bind(null,e.syncEngine),n.onUnlisten=P$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=N$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=D$.bind(null,e.syncEngine),n}function nK(t){return t.asyncQueue.enqueue(async()=>{const e=await $V(t),n=await KV(t);return e.setNetworkEnabled(!0),function(r){const s=W(r);return s.Ea.delete(0),Yd(s)}(n)})}function iK(t){return t.asyncQueue.enqueue(async()=>{const e=await $V(t),n=await KV(t);return e.setNetworkEnabled(!1),async function(r){const s=W(r);s.Ea.add(0),await Uc(s),s.Ra.set("Offline")}(n)})}function rK(t,e){const n=new Xt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const o=await function(c,h){const d=W(c);return d.persistence.runTransaction("read document","readonly",f=>d.localDocuments.getDocument(f,h))}(r,s);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new B(U.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const l=Fc(o,`Failed to get document '${s} from cache`);a.reject(l)}}(await tE(t),e,n)),n.promise}function WV(t,e,n={}){const i=new Xt;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const h=new Jg({next:f=>{h.Nu(),a.enqueueAndForget(()=>$T(s,d));const g=f.docs.has(o);!g&&f.fromCache?c.reject(new B(U.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new B(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new WT(Vc(o.path),h,{includeMetadataChanges:!0,qa:!0});return GT(s,d)}(await gc(t),t.asyncQueue,e,n,i)),i.promise}function sK(t,e){const n=new Xt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const o=await Lp(r,s,!0),l=new zV(s,o.Qs),c=l.ru(o.documents),h=l.applyChanges(c,!1);a.resolve(h.snapshot)}catch(o){const l=Fc(o,`Failed to execute query '${s} against cache`);a.reject(l)}}(await tE(t),e,n)),n.promise}function QV(t,e,n={}){const i=new Xt;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const h=new Jg({next:f=>{h.Nu(),a.enqueueAndForget(()=>$T(s,d)),f.fromCache&&l.source==="server"?c.reject(new B(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new WT(o,h,{includeMetadataChanges:!0,qa:!0});return GT(s,d)}(await gc(t),t.asyncQueue,e,n,i)),i.promise}function aK(t,e){const n=new Jg(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,s){W(r).Ca.add(s),s.next()}(await gc(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(r,s){W(r).Ca.delete(s)}(await gc(t),n))}}function oK(t,e,n,i){const r=function(a,o){let l;return l=typeof a=="string"?qO().encode(a):a,function(h,d){return new X$(h,d)}(function(h,d){if(h instanceof Uint8Array)return BA(h,d);if(h instanceof ArrayBuffer)return BA(new Uint8Array(h),d);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),o)}(n,Qd(e));t.asyncQueue.enqueueAndForget(async()=>{W$(await nE(t),r,i)})}function lK(t,e){return t.asyncQueue.enqueue(async()=>function(i,r){const s=W(i);return s.persistence.runTransaction("Get named query","readonly",a=>s.Ii.getNamedQuery(a,r))}(await tE(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV="firestore.googleapis.com",GA=!0;class $A{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new B(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XV,this.ssl=GA}else this.host=e.host,this.ssl=e.ssl??GA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CG)throw new B(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Hk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YV(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new B(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new B(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new B(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $A({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $A(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new G7;switch(i.type){case"firstParty":return new Q7(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new B(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=HA.get(n);i&&(H("ComponentProvider","Removing Datastore"),HA.delete(n),i.terminate())}(this),Promise.resolve()}}function cK(t,e,n,i={}){var c;t=xe(t,Xd);const r=lr(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;r&&(Ob(`https://${o}`),Vb("Firestore",!0)),s.host!==XV&&s.host!==o&&rr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:r,emulatorOptions:i};if(!Ks(l,a)&&(t._setSettings(l),i.mockUserToken)){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=Lt.MOCK_USER;else{h=yD(i.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new B(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Lt(f)}t._authCredentials=new $7(new Bk(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wn=class JV{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new JV(this.firestore,e,this._query)}},Fe=class ju{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ju(this.firestore,e,this._key)}toJSON(){return{type:ju._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(zd(n,ju._jsonSchema))return new ju(e,i||null,new $(_e.fromString(n.referencePath)))}};Fe._jsonSchemaVersion="firestore/documentReference/1.0",Fe._jsonSchema={type:Rt("string",Fe._jsonSchemaVersion),referencePath:Rt("string")};let Fs=class ZV extends wn{constructor(e,n,i){super(e,n,Vc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fe(this.firestore,null,new $(e))}withConverter(e){return new ZV(this.firestore,e,this._path)}};function eM(t,e,...n){if(t=J(t),hT("collection","path",e),t instanceof Xd){const i=_e.fromString(e,...n);return O1(i),new Fs(t,null,i)}{if(!(t instanceof Fe||t instanceof Fs))throw new B(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(_e.fromString(e,...n));return O1(i),new Fs(t.firestore,null,i)}}function uK(t,e){if(t=xe(t,Xd),hT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new B(U.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new wn(t,null,function(i){return new $r(_e.emptyPath(),i)}(e))}function Fp(t,e,...n){if(t=J(t),arguments.length===1&&(e=uT.newId()),hT("doc","path",e),t instanceof Xd){const i=_e.fromString(e,...n);return k1(i),new Fe(t,null,new $(i))}{if(!(t instanceof Fe||t instanceof Fs))throw new B(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(_e.fromString(e,...n));return k1(i),new Fe(t.firestore,t instanceof Fs?t.converter:null,new $(i))}}function tM(t,e){return t=J(t),e=J(e),(t instanceof Fe||t instanceof Fs)&&(e instanceof Fe||e instanceof Fs)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function nM(t,e){return t=J(t),e=J(e),t instanceof wn&&e instanceof wn&&t.firestore===e.firestore&&Hd(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="AsyncQueue";class WA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new zT(this,"async_queue_retry"),this._c=()=>{const i=km();i&&H(KA,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=km();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=km();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Xt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ha(e))throw e;H(KA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,yt("INTERNAL UNHANDLED ERROR: ",QA(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=HT.createAndSchedule(this,e,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&Y(47125,{Pc:QA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function QA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class hK{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dK=-1;let wt=class extends Xd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new WA,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new WA(e),this._firestoreClient=void 0,await e}}};function cn(t){if(t._terminated)throw new B(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||iM(t),t._firestoreClient}function iM(t){var i,r,s;const e=t._freezeSettings(),n=function(o,l,c,h){return new kH(o,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,YV(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new eK(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}function fK(t,e){rr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return rM(t,cd.provider,{build:i=>new GV(i,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function mK(t){rr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();rM(t,cd.provider,{build:n=>new Y$(n,e.cacheSizeBytes)})}function rM(t,e,n){if((t=xe(t,wt))._firestoreClient||t._terminated)throw new B(U.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new B(U.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},iM(t)}function pK(t){if(t._initialized&&!t._terminated)throw new B(U.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(i){if(!Xi.v())return Promise.resolve();const r=i+yV;await Xi.delete(r)}(MT(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function gK(t){return function(n){const i=new Xt;return n.asyncQueue.enqueueAndForget(async()=>L$(await nE(n),i)),i.promise}(cn(t=xe(t,wt)))}function yK(t){return nK(cn(t=xe(t,wt)))}function _K(t){return iK(cn(t=xe(t,wt)))}function vK(t,e){const n=cn(t=xe(t,wt)),i=new hK;return oK(n,t._databaseId,e,i),i}function wK(t,e){return lK(cn(t=xe(t,wt)),e).then(n=>n?new wn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sn(dt.fromBase64String(e))}catch(n){throw new B(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sn(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zd(e,sn._jsonSchema))return sn.fromBase64String(e.bytes)}}sn._jsonSchemaVersion="firestore/bytes/1.0",sn._jsonSchema={type:Rt("string",sn._jsonSchemaVersion),bytes:Rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ia=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Co=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ai._jsonSchemaVersion}}static fromJSON(e){if(zd(e,Ai._jsonSchema))return new Ai(e.latitude,e.longitude)}}Ai._jsonSchemaVersion="firestore/geoPoint/1.0",Ai._jsonSchema={type:Rt("string",Ai._jsonSchemaVersion),latitude:Rt("number"),longitude:Rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Zi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zd(e,Zi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Zi(e.vectorValues);throw new B(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zi._jsonSchemaVersion="firestore/vectorValue/1.0",Zi._jsonSchema={type:Rt("string",Zi._jsonSchemaVersion),vectorValues:Rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bK=/^__.*__$/;class TK{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Wr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Mc(e,this.data,n,this.fieldTransforms)}}class sM{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Wr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function aM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:t})}}class ey{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ey({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(aM(this.Ac)&&bK.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class EK{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Qd(e)}Cc(e,n,i,r=!1){return new ey({Ac:e,methodName:n,Dc:i,path:tt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function No(t){const e=t._freezeSettings(),n=Qd(t._databaseId);return new EK(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ty(t,e,n,i,r,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,n,r);cE("Data must be an object, but it was:",a,i);const o=cM(i,a);let l,c;if(s.merge)l=new Rn(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=Z0(e,d,n);if(!a.contains(f))throw new B(U.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);hM(h,f)||h.push(f)}l=new Rn(h),c=a.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=a.fieldTransforms;return new TK(new Wt(o),l,c)}class Jd extends Co{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jd}}function oM(t,e,n){return new ey({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class iE extends Co{_toFieldTransform(e){return new $d(e.path,new lc)}isEqual(e){return e instanceof iE}}class rE extends Co{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=oM(this,e,!0),i=this.vc.map(s=>Po(s,n)),r=new fo(i);return new $d(e.path,r)}isEqual(e){return e instanceof rE&&Ks(this.vc,e.vc)}}class sE extends Co{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=oM(this,e,!0),i=this.vc.map(s=>Po(s,n)),r=new mo(i);return new $d(e.path,r)}isEqual(e){return e instanceof sE&&Ks(this.vc,e.vc)}}class aE extends Co{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new cc(e.serializer,OO(e.serializer,this.Fc));return new $d(e.path,n)}isEqual(e){return e instanceof aE&&this.Fc===e.Fc}}function oE(t,e,n,i){const r=t.Cc(1,e,n);cE("Data must be an object, but it was:",r,i);const s=[],a=Wt.empty();da(i,(l,c)=>{const h=uE(e,l,n);c=J(c);const d=r.yc(h);if(c instanceof Jd)s.push(h);else{const f=Po(c,d);f!=null&&(s.push(h),a.set(h,f))}});const o=new Rn(s);return new sM(a,o,r.fieldTransforms)}function lE(t,e,n,i,r,s){const a=t.Cc(1,e,n),o=[Z0(e,i,n)],l=[r];if(s.length%2!=0)throw new B(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)o.push(Z0(e,s[f])),l.push(s[f+1]);const c=[],h=Wt.empty();for(let f=o.length-1;f>=0;--f)if(!hM(c,o[f])){const g=o[f];let E=l[f];E=J(E);const S=a.yc(g);if(E instanceof Jd)c.push(g);else{const b=Po(E,S);b!=null&&(c.push(g),h.set(g,b))}}const d=new Rn(c);return new sM(h,d,a.fieldTransforms)}function lM(t,e,n,i=!1){return Po(n,t.Cc(i?4:3,e))}function Po(t,e){if(uM(t=J(t)))return cE("Unsupported field value:",e,t),cM(t,e);if(t instanceof Co)return function(i,r){if(!aM(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const o of i){let l=Po(o,r.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=J(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return OO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ne.fromDate(i);return{timestampValue:uc(r.serializer,s)}}if(i instanceof Ne){const s=new Ne(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:uc(r.serializer,s)}}if(i instanceof Ai)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof sn)return{bytesValue:$O(r.serializer,i._byteString)};if(i instanceof Fe){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:CT(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Zi)return function(a,o){return{mapValue:{fields:{[_T]:{stringValue:vT},[sc]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.Sc("VectorValues must only contain numeric values.");return ET(o.serializer,c)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${Lg(i)}`)}(t,e)}function cM(t,e){const n={};return cO(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):da(t,(i,r)=>{const s=Po(r,e.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function uM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ne||t instanceof Ai||t instanceof sn||t instanceof Fe||t instanceof Co||t instanceof Zi)}function cE(t,e,n){if(!uM(n)||!Gk(n)){const i=Lg(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Z0(t,e,n){if((e=J(e))instanceof ia)return e._internalPath;if(typeof e=="string")return uE(t,e);throw Bp("Field path arguments must be of type string or ",t,!1,void 0,n)}const xK=new RegExp("[~\\*/\\[\\]]");function uE(t,e,n){if(e.search(xK)>=0)throw Bp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ia(...e.split("."))._internalPath}catch{throw Bp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bp(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${i}`),a&&(l+=` in document ${r}`),l+=")"),new B(U.INVALID_ARGUMENT,o+t+l)}function hM(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ny("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SK extends ud{data(){return super.data()}}function ny(t,e){return typeof e=="string"?uE(t,e):e instanceof ia?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hE{}class Zd extends hE{}function cs(t,e,...n){let i=[];e instanceof hE&&i.push(e),i=i.concat(n),function(s){const a=s.filter(l=>l instanceof dE).length,o=s.filter(l=>l instanceof iy).length;if(a>1||a>0&&o>0)throw new B(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class iy extends Zd{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new iy(e,n,i)}_apply(e){const n=this._parse(e);return mM(e._query,n),new wn(e.firestore,e.converter,j0(e._query,n))}_parse(e){const n=No(e.firestore);return function(s,a,o,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new B(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){XA(d,h);const E=[];for(const S of d)E.push(YA(l,s,S));f={arrayValue:{values:E}}}else f=YA(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||XA(d,h),f=lM(o,a,d,h==="in"||h==="not-in");return we.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function IK(t,e,n){const i=e,r=ny("where",t);return iy._create(r,i,n)}class dE extends hE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new dE(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Oe.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let a=r;const o=s.getFlattenedFilters();for(const l of o)mM(a,l),a=j0(a,l)}(e._query,n),new wn(e.firestore,e.converter,j0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fE extends Zd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new fE(e,n)}_apply(e){const n=function(r,s,a){if(r.startAt!==null)throw new B(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new B(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sd(s,a)}(e._query,this._field,this._direction);return new wn(e.firestore,e.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new $r(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function AK(t,e="asc"){const n=e,i=ny("orderBy",t);return fE._create(i,n)}class ry extends Zd{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new ry(e,n,i)}_apply(e){return new wn(e.firestore,e.converter,Dp(e._query,this._limit,this._limitType))}}function RK(t){return $k("limit",t),ry._create("limit",t,"F")}function CK(t){return $k("limitToLast",t),ry._create("limitToLast",t,"L")}class sy extends Zd{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new sy(e,n,i)}_apply(e){const n=fM(e,this.type,this._docOrFields,this._inclusive);return new wn(e.firestore,e.converter,function(r,s){return new $r(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,n))}}function NK(...t){return sy._create("startAt",t,!0)}function PK(...t){return sy._create("startAfter",t,!1)}class ay extends Zd{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new ay(e,n,i)}_apply(e){const n=fM(e,this.type,this._docOrFields,this._inclusive);return new wn(e.firestore,e.converter,function(r,s){return new $r(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,n))}}function DK(...t){return ay._create("endBefore",t,!1)}function kK(...t){return ay._create("endAt",t,!0)}function fM(t,e,n,i){if(n[0]=J(n[0]),n[0]instanceof ud)return function(s,a,o,l,c){if(!l)throw new B(U.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const h=[];for(const d of kl(s))if(d.field.isKeyField())h.push(uo(a,l.key));else{const f=l.data.field(d.field);if(Bg(f))throw new B(U.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const g=d.field.canonicalString();throw new B(U.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}h.push(f)}return new ea(h,c)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=No(t.firestore);return function(a,o,l,c,h,d){const f=a.explicitOrderBy;if(h.length>f.length)throw new B(U.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let E=0;E<h.length;E++){const S=h[E];if(f[E].field.isKeyField()){if(typeof S!="string")throw new B(U.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof S}`);if(!bT(a)&&S.indexOf("/")!==-1)throw new B(U.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${S}' contains a slash.`);const b=a.path.child(_e.fromString(S));if(!$.isDocumentKey(b))throw new B(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const y=new $(b);g.push(uo(o,y))}else{const b=lM(l,c,S);g.push(b)}}return new ea(g,d)}(t._query,t.firestore._databaseId,r,e,n,i)}}function YA(t,e,n){if(typeof(n=J(n))=="string"){if(n==="")throw new B(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bT(e)&&n.indexOf("/")!==-1)throw new B(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(_e.fromString(n));if(!$.isDocumentKey(i))throw new B(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return uo(t,new $(i))}if(n instanceof Fe)return uo(t,n._key);throw new B(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lg(n)}.`)}function XA(t,e){if(!Array.isArray(t)||t.length===0)throw new B(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mM(t,e){const n=function(r,s){for(const a of r)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class mE{convertValue(e,n="none"){switch(Js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return da(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var i,r,s;const n=(s=(r=(i=e.fields)==null?void 0:i[sc].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>et(a.doubleValue));return new Zi(n)}convertGeoPoint(e){return new Ai(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=qg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(nd(e));default:return null}}convertTimestamp(e){const n=jr(e);return new Ne(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=_e.fromString(e);Z(iV(i),9688,{name:e});const r=new Xs(i.get(1),i.get(3)),s=new $(i.popFirst(5));return r.isEqual(n)||yt(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class OK extends mE{constructor(e){super(),this.firestore=e}convertBytes(e){return new sn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Fe(this.firestore,null,n)}}class Ba{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let gi=class pM extends ud{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ny("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=pM._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};gi._jsonSchemaVersion="firestore/documentSnapshot/1.0",gi._jsonSchema={type:Rt("string",gi._jsonSchemaVersion),bundleSource:Rt("string","DocumentSnapshot"),bundleName:Rt("string"),bundle:Rt("string")};let _h=class extends gi{data(e={}){return super.data(e)}},Ri=class gM{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ba(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new _h(this._firestore,this._userDataWriter,i.key,i,new Ba(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(o=>{const l=new _h(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ba(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new _h(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ba(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:VK(o.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gM._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=uT.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function VK(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:t})}}function yM(t,e){return t instanceof gi&&e instanceof gi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ri&&e instanceof Ri&&t._firestore===e._firestore&&nM(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MK(t){t=xe(t,Fe);const e=xe(t.firestore,wt);return WV(cn(e),t._key).then(n=>pE(e,t,n))}Ri._jsonSchemaVersion="firestore/querySnapshot/1.0",Ri._jsonSchema={type:Rt("string",Ri._jsonSchemaVersion),bundleSource:Rt("string","QuerySnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class Do extends mE{constructor(e){super(),this.firestore=e}convertBytes(e){return new sn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Fe(this.firestore,null,n)}}function LK(t){t=xe(t,Fe);const e=xe(t.firestore,wt),n=cn(e),i=new Do(e);return rK(n,t._key).then(r=>new gi(e,i,t._key,r,new Ba(r!==null&&r.hasLocalMutations,!0),t.converter))}function UK(t){t=xe(t,Fe);const e=xe(t.firestore,wt);return WV(cn(e),t._key,{source:"server"}).then(n=>pE(e,t,n))}function jK(t){t=xe(t,wn);const e=xe(t.firestore,wt),n=cn(e),i=new Do(e);return dM(t._query),QV(n,t._query).then(r=>new Ri(e,i,t,r))}function zK(t){t=xe(t,wn);const e=xe(t.firestore,wt),n=cn(e),i=new Do(e);return sK(n,t._query).then(r=>new Ri(e,i,t,r))}function FK(t){t=xe(t,wn);const e=xe(t.firestore,wt),n=cn(e),i=new Do(e);return QV(n,t._query,{source:"server"}).then(r=>new Ri(e,i,t,r))}function JA(t,e,n){t=xe(t,Fe);const i=xe(t.firestore,wt),r=oy(t.converter,e,n);return ef(i,[ty(No(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,nt.none())])}function ZA(t,e,n,...i){t=xe(t,Fe);const r=xe(t.firestore,wt),s=No(r);let a;return a=typeof(e=J(e))=="string"||e instanceof ia?lE(s,"updateDoc",t._key,e,n,i):oE(s,"updateDoc",t._key,e),ef(r,[a.toMutation(t._key,nt.exists(!0))])}function BK(t){return ef(xe(t.firestore,wt),[new Lc(t._key,nt.none())])}function qK(t,e){const n=xe(t.firestore,wt),i=Fp(t),r=oy(t.converter,e);return ef(n,[ty(No(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,nt.exists(!1))]).then(()=>i)}function _M(t,...e){var l,c,h;t=J(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||J0(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(J0(e[i])){const d=e[i];e[i]=(l=d.next)==null?void 0:l.bind(d),e[i+1]=(c=d.error)==null?void 0:c.bind(d),e[i+2]=(h=d.complete)==null?void 0:h.bind(d)}let s,a,o;if(t instanceof Fe)a=xe(t.firestore,wt),o=Vc(t._key.path),s={next:d=>{e[i]&&e[i](pE(a,t,d))},error:e[i+1],complete:e[i+2]};else{const d=xe(t,wn);a=xe(d.firestore,wt),o=d._query;const f=new Do(a);s={next:g=>{e[i]&&e[i](new Ri(a,f,d,g))},error:e[i+1],complete:e[i+2]},dM(t._query)}return function(f,g,E,S){const b=new Jg(S),y=new WT(g,b,E);return f.asyncQueue.enqueueAndForget(async()=>GT(await gc(f),y)),()=>{b.Nu(),f.asyncQueue.enqueueAndForget(async()=>$T(await gc(f),y))}}(cn(a),o,r,s)}function HK(t,e){return aK(cn(t=xe(t,wt)),J0(e)?e:{next:e})}function ef(t,e){return function(i,r){const s=new Xt;return i.asyncQueue.enqueueAndForget(async()=>k$(await nE(i),r,s)),s.promise}(cn(t),e)}function pE(t,e,n){const i=n.docs.get(e._key),r=new Do(t);return new gi(t,r,e._key,i,new Ba(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GK={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $K=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=No(e)}set(e,n,i){this._verifyNotCommitted();const r=As(e,this._firestore),s=oy(r.converter,n,i),a=ty(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,nt.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=As(e,this._firestore);let a;return a=typeof(n=J(n))=="string"||n instanceof ia?lE(this._dataReader,"WriteBatch.update",s._key,n,i,r):oE(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,nt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=As(e,this._firestore);return this._mutations=this._mutations.concat(new Lc(n._key,nt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function As(t,e){if((t=J(t)).firestore!==e)throw new B(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KK{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=No(e)}get(e){const n=As(e,this._firestore),i=new OK(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return Y(24041);const s=r[0];if(s.isFoundDocument())return new ud(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new ud(this._firestore,i,n._key,null,n.converter);throw Y(18433,{doc:s})})}set(e,n,i){const r=As(e,this._firestore),s=oy(r.converter,n,i),a=ty(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,a),this}update(e,n,i,...r){const s=As(e,this._firestore);let a;return a=typeof(n=J(n))=="string"||n instanceof ia?lE(this._dataReader,"Transaction.update",s._key,n,i,r):oE(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(e){const n=As(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WK=class extends KK{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=As(e,this._firestore),i=new Do(this._firestore);return super.get(e).then(r=>new gi(this._firestore,i,n._key,r._document,new Ba(!1,!1),n.converter))}};function QK(t,e,n){t=xe(t,wt);const i={...GK,...n};return function(s){if(s.maxAttempts<1)throw new B(U.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,o){const l=new Xt;return s.asyncQueue.enqueueAndForget(async()=>{const c=await tK(s);new Z$(s.asyncQueue,c,o,a,l).ju()}),l.promise}(cn(t),r=>e(new WK(t,r)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YK(){return new Jd("deleteField")}function XK(){return new iE("serverTimestamp")}function JK(...t){return new rE("arrayUnion",t)}function ZK(...t){return new sE("arrayRemove",t)}function eW(t){return new aE("increment",t)}(function(e,n=!0){(function(r){Oc=r})(wi),Ci(new kn("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),o=new wt(new K7(i.getProvider("auth-internal")),new Y7(a,i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new B(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xs(c.options.projectId,h)}(a,r),a);return s={useFetchStreams:n,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),_n(C1,N1,e),_n(C1,N1,"esm2020")})();const tW="@firebase/firestore-compat",nW="0.4.2";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new B("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(){if(typeof Uint8Array>"u")throw new B("unimplemented","Uint8Arrays are not available in this environment.")}function tR(){if(!PH())throw new B("unimplemented","Blobs are unavailable in Firestore in this environment.")}let vM=class ew{constructor(e){this._delegate=e}static fromBase64String(e){return tR(),new ew(sn.fromBase64String(e))}static fromUint8Array(e){return eR(),new ew(sn.fromUint8Array(e))}toBase64(){return tR(),this._delegate.toBase64()}toUint8Array(){return eR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(t){return iW(t,["next","error","complete"])}function iW(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{enableIndexedDbPersistence(e,n){return fK(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return mK(e._delegate)}clearIndexedDbPersistence(e){return pK(e._delegate)}}class wM{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Xs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&rr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){cK(this._delegate,e,n,i)}enableNetwork(){return yK(this._delegate)}disableNetwork(){return _K(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,Hk("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return gK(this._delegate)}onSnapshotsInSync(e){return HK(this._delegate,e)}get app(){if(!this._appCompat)throw new B("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new yc(this,eM(this._delegate,e))}catch(n){throw pn(n,"collection()","Firestore.collection()")}}doc(e){try{return new di(this,Fp(this._delegate,e))}catch(n){throw pn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new mn(this,uK(this._delegate,e))}catch(n){throw pn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return QK(this._delegate,n=>e(new bM(this,n)))}batch(){return cn(this._delegate),new TM(new $K(this._delegate,e=>ef(this._delegate,e)))}loadBundle(e){return vK(this._delegate,e)}namedQuery(e){return wK(this._delegate,e).then(n=>n?new mn(this,n):null)}}class ly extends mE{constructor(e){super(),this.firestore=e}convertBytes(e){return new vM(new sn(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return di.forKey(n,this.firestore,null)}}function sW(t){q7(t)}class bM{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new ly(e)}get(e){const n=qa(e);return this._delegate.get(n).then(i=>new hd(this._firestore,new gi(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){const r=qa(e);return i?(gE("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=qa(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=qa(e);return this._delegate.delete(n),this}}class TM{constructor(e){this._delegate=e}set(e,n,i){const r=qa(e);return i?(gE("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=qa(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=qa(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class vo{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){const i=new _h(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new dd(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const i=vo.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(n);return s||(s=new vo(e,new ly(e),n),r.set(n,s)),s}}vo.INSTANCES=new WeakMap;class di{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ly(e)}static forPath(e,n,i){if(e.length%2!==0)throw new B("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new di(n,new Fe(n._delegate,i,new $(e)))}static forKey(e,n,i){return new di(n,new Fe(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new yc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new yc(this.firestore,eM(this._delegate,e))}catch(n){throw pn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=J(e),e instanceof Fe?tM(this._delegate,e):!1}set(e,n){n=gE("DocumentReference.set",n);try{return n?JA(this._delegate,e,n):JA(this._delegate,e)}catch(i){throw pn(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?ZA(this._delegate,e):ZA(this._delegate,e,n,...i)}catch(r){throw pn(r,"updateDoc()","DocumentReference.update()")}}delete(){return BK(this._delegate)}onSnapshot(...e){const n=EM(e),i=xM(e,r=>new hd(this.firestore,new gi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return _M(this._delegate,n,i)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=LK(this._delegate):(e==null?void 0:e.source)==="server"?n=UK(this._delegate):n=MK(this._delegate),n.then(i=>new hd(this.firestore,new gi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new di(this.firestore,e?this._delegate.withConverter(vo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function pn(t,e,n){return t.message=t.message.replace(e,n),t}function EM(t){for(const e of t)if(typeof e=="object"&&!tw(e))return e;return{}}function xM(t,e){var i,r;let n;return tw(t[0])?n=t[0]:tw(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:s=>{n.next&&n.next(e(s))},error:(i=n.error)==null?void 0:i.bind(n),complete:(r=n.complete)==null?void 0:r.bind(n)}}class hd{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new di(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return yM(this._delegate,e._delegate)}}class dd extends hd{data(e){const n=this._delegate.data(e);return this._delegate._converter||H7(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class mn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ly(e)}where(e,n,i){try{return new mn(this.firestore,cs(this._delegate,IK(e,n,i)))}catch(r){throw pn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new mn(this.firestore,cs(this._delegate,AK(e,n)))}catch(i){throw pn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new mn(this.firestore,cs(this._delegate,RK(e)))}catch(n){throw pn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new mn(this.firestore,cs(this._delegate,CK(e)))}catch(n){throw pn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new mn(this.firestore,cs(this._delegate,NK(...e)))}catch(n){throw pn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new mn(this.firestore,cs(this._delegate,PK(...e)))}catch(n){throw pn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new mn(this.firestore,cs(this._delegate,DK(...e)))}catch(n){throw pn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new mn(this.firestore,cs(this._delegate,kK(...e)))}catch(n){throw pn(n,"endAt()","Query.endAt()")}}isEqual(e){return nM(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=zK(this._delegate):(e==null?void 0:e.source)==="server"?n=FK(this._delegate):n=jK(this._delegate),n.then(i=>new nw(this.firestore,new Ri(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const n=EM(e),i=xM(e,r=>new nw(this.firestore,new Ri(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return _M(this._delegate,n,i)}withConverter(e){return new mn(this.firestore,e?this._delegate.withConverter(vo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class aW{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new dd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class nw{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new mn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new dd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new aW(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new dd(this._firestore,i))})}isEqual(e){return yM(this._delegate,e._delegate)}}class yc extends mn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new di(this.firestore,e):null}doc(e){try{return e===void 0?new di(this.firestore,Fp(this._delegate)):new di(this.firestore,Fp(this._delegate,e))}catch(n){throw pn(n,"doc()","CollectionReference.doc()")}}add(e){return qK(this._delegate,e).then(n=>new di(this.firestore,n))}isEqual(e){return tM(this._delegate,e._delegate)}withConverter(e){return new yc(this.firestore,e?this._delegate.withConverter(vo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function qa(t){return xe(t,Fe)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(...e){this._delegate=new ia(...e)}static documentId(){return new yE(tt.keyField().canonicalString())}isEqual(e){return e=J(e),e instanceof ia?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{static serverTimestamp(){const e=XK();return e._methodName="FieldValue.serverTimestamp",new ja(e)}static delete(){const e=YK();return e._methodName="FieldValue.delete",new ja(e)}static arrayUnion(...e){const n=JK(...e);return n._methodName="FieldValue.arrayUnion",new ja(n)}static arrayRemove(...e){const n=ZK(...e);return n._methodName="FieldValue.arrayRemove",new ja(n)}static increment(e){const n=eW(e);return n._methodName="FieldValue.increment",new ja(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oW={Firestore:wM,GeoPoint:Ai,Timestamp:Ne,Blob:vM,Transaction:bM,WriteBatch:TM,DocumentReference:di,DocumentSnapshot:hd,Query:mn,QueryDocumentSnapshot:dd,QuerySnapshot:nw,CollectionReference:yc,FieldPath:yE,FieldValue:ja,setLogLevel:sW,CACHE_SIZE_UNLIMITED:dK};function lW(t,e){t.INTERNAL.registerComponent(new kn("firestore-compat",n=>{const i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps({...oW}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cW(t){lW(t,(e,n)=>new wM(e,n,new rW)),t.registerVersion(tW,nW)}cW(jt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM="firebasestorage.googleapis.com",IM="storageBucket",uW=2*60*1e3,hW=10*60*1e3,dW=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at extends Ft{constructor(e,n,i=0){super($_(e),`Firebase Storage: ${n} (${$_(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,at.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Je;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Je||(Je={}));function $_(t){return"storage/"+t}function _E(){const t="An unknown error occurred, please check the error payload for server response.";return new at(Je.UNKNOWN,t)}function fW(t){return new at(Je.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function mW(t){return new at(Je.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function pW(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new at(Je.UNAUTHENTICATED,t)}function gW(){return new at(Je.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function yW(t){return new at(Je.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function AM(){return new at(Je.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function RM(){return new at(Je.CANCELED,"User canceled the upload/download.")}function _W(t){return new at(Je.INVALID_URL,"Invalid URL '"+t+"'.")}function vW(t){return new at(Je.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function wW(){return new at(Je.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+IM+"' property when initializing the app?")}function CM(){return new at(Je.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bW(){return new at(Je.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function TW(){return new at(Je.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function EW(t){return new at(Je.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Vl(t){return new at(Je.INVALID_ARGUMENT,t)}function NM(){return new at(Je.APP_DELETED,"The Firebase app was deleted.")}function PM(t){return new at(Je.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vh(t,e){return new at(Je.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function xu(t){throw new at(Je.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=an.makeFromUrl(e,n)}catch{return new an(e,"")}if(i.path==="")return i;throw vW(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+r+a,"i"),l={bucket:1,path:3};function c(I){I.path_=decodeURIComponent(I.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${h}/b/${r}/o${f}`,"i"),E={bucket:1,path:3},S=n===SM?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",y=new RegExp(`^https?://${S}/${r}/${b}`,"i"),v=[{regex:o,indices:l,postModify:s},{regex:g,indices:E,postModify:c},{regex:y,indices:{bucket:1,path:2},postModify:c}];for(let I=0;I<v.length;I++){const k=v[I],O=k.regex.exec(e);if(O){const T=O[k.indices.bucket];let x=O[k.indices.path];x||(x=""),i=new an(T,x),k.postModify(i);break}}if(i==null)throw _W(e);return i}}class xW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SW(t,e,n){let i=1,r=null,s=null,a=!1,o=0;function l(){return o===2}let c=!1;function h(...b){c||(c=!0,e.apply(null,b))}function d(b){r=setTimeout(()=>{r=null,t(g,l())},b)}function f(){s&&clearTimeout(s)}function g(b,...y){if(c){f();return}if(b){f(),h.call(null,b,...y);return}if(l()||a){f(),h.call(null,b,...y);return}i<64&&(i*=2);let v;o===1?(o=2,v=0):v=(i+Math.random())*1e3,d(v)}let E=!1;function S(b){E||(E=!0,f(),!c&&(r!==null?(b||(o=2),clearTimeout(r),d(0)):b||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,S(!0)},n),S}function IW(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AW(t){return t!==void 0}function RW(t){return typeof t=="function"}function CW(t){return typeof t=="object"&&!Array.isArray(t)}function cy(t){return typeof t=="string"||t instanceof String}function nR(t){return vE()&&t instanceof Blob}function vE(){return typeof Blob<"u"}function iw(t,e,n,i){if(i<e)throw Vl(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Vl(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function DM(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var eo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(eo||(eo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW{constructor(e,n,i,r,s,a,o,l,c,h,d,f=!0,g=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,S)=>{this.resolve_=E,this.reject_=S,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new $f(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===eo.NO_ERROR,l=s.getStatus();if(!o||kM(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===eo.ABORT;i(!1,new $f(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new $f(c,s))})},n=(i,r)=>{const s=this.resolve_,a=this.reject_,o=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());AW(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=_E();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(r.canceled){const l=this.appDelete_?NM():RM();a(l)}else{const l=AM();a(l)}};this.canceled_?n(!1,new $f(!1,null,!0)):this.backoffId_=SW(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&IW(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $f{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function PW(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function DW(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kW(t,e){e&&(t["X-Firebase-GMPID"]=e)}function OW(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function VW(t,e,n,i,r,s,a=!0,o=!1){const l=DM(t.urlParams),c=t.url+l,h=Object.assign({},t.headers);return kW(h,e),PW(h,n),DW(h,s),OW(h,i),new NW(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MW(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function LW(...t){const e=MW();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(vE())return new Blob(t);throw new at(Je.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function UW(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jW(t){if(typeof atob>"u")throw EW("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class K_{constructor(e,n){this.data=e,this.contentType=n||null}}function OM(t,e){switch(t){case fi.RAW:return new K_(VM(e));case fi.BASE64:case fi.BASE64URL:return new K_(MM(t,e));case fi.DATA_URL:return new K_(FW(e),BW(e))}throw _E()}function VM(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=i,a=t.charCodeAt(++n);i=65536|(s&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function zW(t){let e;try{e=decodeURIComponent(t)}catch{throw vh(fi.DATA_URL,"Malformed data URL.")}return VM(e)}function MM(t,e){switch(t){case fi.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw vh(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case fi.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw vh(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=jW(e)}catch(r){throw r.message.includes("polyfill")?r:vh(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class LM{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw vh(fi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=qW(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function FW(t){const e=new LM(t);return e.base64?MM(fi.BASE64,e.rest):zW(e.rest)}function BW(t){return new LM(t).contentType}function qW(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n){let i=0,r="";nR(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(nR(this.data_)){const i=this.data_,r=UW(i,e,n);return r===null?null:new yr(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new yr(i,!0)}}static getBlob(...e){if(vE()){const n=e.map(i=>i instanceof yr?i.data_:i);return new yr(LW.apply(null,n))}else{const n=e.map(a=>cy(a)?OM(fi.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)r[s++]=a[o]}),new yr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t){let e;try{e=JSON.parse(t)}catch{return null}return CW(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HW(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function GW(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function UM(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $W(t,e){return e}class dn{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||$W}}let Kf=null;function KW(t){return!cy(t)||t.length<2?t:UM(t)}function uy(){if(Kf)return Kf;const t=[];t.push(new dn("bucket")),t.push(new dn("generation")),t.push(new dn("metageneration")),t.push(new dn("name","fullPath",!0));function e(s,a){return KW(a)}const n=new dn("name");n.xform=e,t.push(n);function i(s,a){return a!==void 0?Number(a):a}const r=new dn("size");return r.xform=i,t.push(r),t.push(new dn("timeCreated")),t.push(new dn("updated")),t.push(new dn("md5Hash",null,!0)),t.push(new dn("cacheControl",null,!0)),t.push(new dn("contentDisposition",null,!0)),t.push(new dn("contentEncoding",null,!0)),t.push(new dn("contentLanguage",null,!0)),t.push(new dn("contentType",null,!0)),t.push(new dn("metadata","customMetadata",!0)),Kf=t,Kf}function WW(t,e){function n(){const i=t.bucket,r=t.fullPath,s=new an(i,r);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function QW(t,e,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const a=n[s];i[a.local]=a.xform(i,e[a.server])}return WW(i,t),i}function jM(t,e,n){const i=wE(e);return i===null?null:QW(t,i,n)}function YW(t,e,n,i){const r=wE(e);if(r===null||!cy(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,d=t.fullPath,f="/b/"+a(h)+"/o/"+a(d),g=pa(f,n,i),E=DM({alt:"media",token:c});return g+E})[0]}function bE(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="prefixes",rR="items";function XW(t,e,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[iR])for(const r of n[iR]){const s=r.replace(/\/$/,""),a=t._makeStorageReference(new an(e,s));i.prefixes.push(a)}if(n[rR])for(const r of n[rR]){const s=t._makeStorageReference(new an(e,r.name));i.items.push(s)}return i}function JW(t,e,n){const i=wE(n);return i===null?null:XW(t,e,i)}class Yr{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t){if(!t)throw _E()}function hy(t,e){function n(i,r){const s=jM(t,r,e);return er(s!==null),s}return n}function ZW(t,e){function n(i,r){const s=JW(t,e,r);return er(s!==null),s}return n}function eQ(t,e){function n(i,r){const s=jM(t,r,e);return er(s!==null),YW(s,r,t.host,t._protocol)}return n}function Bc(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=gW():r=pW():n.getStatus()===402?r=mW(t.bucket):n.getStatus()===403?r=yW(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function dy(t){const e=Bc(t);function n(i,r){let s=e(i,r);return i.getStatus()===404&&(s=fW(t.path)),s.serverResponse=r.serverResponse,s}return n}function zM(t,e,n){const i=e.fullServerUrl(),r=pa(i,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new Yr(r,s,hy(t,n),a);return o.errorHandler=dy(e),o}function tQ(t,e,n,i,r){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n.length>0&&(s.delimiter=n),i&&(s.pageToken=i),r&&(s.maxResults=r);const a=e.bucketOnlyServerUrl(),o=pa(a,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,h=new Yr(o,l,ZW(t,e.bucket),c);return h.urlParams=s,h.errorHandler=Bc(e),h}function nQ(t,e,n){const i=e.fullServerUrl(),r=pa(i,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new Yr(r,s,eQ(t,n),a);return o.errorHandler=dy(e),o}function iQ(t,e,n,i){const r=e.fullServerUrl(),s=pa(r,t.host,t._protocol),a="PATCH",o=bE(n,i),l={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,h=new Yr(s,a,hy(t,i),c);return h.headers=l,h.body=o,h.errorHandler=dy(e),h}function rQ(t,e){const n=e.fullServerUrl(),i=pa(n,t.host,t._protocol),r="DELETE",s=t.maxOperationRetryTime;function a(l,c){}const o=new Yr(i,r,a,s);return o.successCodes=[200,204],o.errorHandler=dy(e),o}function sQ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function FM(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=sQ(null,e)),i}function aQ(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let v="";for(let I=0;I<2;I++)v=v+Math.random().toString().slice(2);return v}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=FM(e,i,r),h=bE(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",g=yr.getBlob(d,i,f);if(g===null)throw CM();const E={name:c.fullPath},S=pa(s,t.host,t._protocol),b="POST",y=t.maxUploadRetryTime,_=new Yr(S,b,hy(t,n),y);return _.urlParams=E,_.headers=a,_.body=g.uploadData(),_.errorHandler=Bc(e),_}class qp{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}}function TE(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{er(!1)}return er(!!n&&(e||["active"]).indexOf(n)!==-1),n}function oQ(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),a=FM(e,i,r),o={name:a.fullPath},l=pa(s,t.host,t._protocol),c="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},d=bE(a,n),f=t.maxUploadRetryTime;function g(S){TE(S);let b;try{b=S.getResponseHeader("X-Goog-Upload-URL")}catch{er(!1)}return er(cy(b)),b}const E=new Yr(l,c,g,f);return E.urlParams=o,E.headers=h,E.body=d,E.errorHandler=Bc(e),E}function lQ(t,e,n,i){const r={"X-Goog-Upload-Command":"query"};function s(c){const h=TE(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{er(!1)}d||er(!1);const f=Number(d);return er(!isNaN(f)),new qp(f,i.size(),h==="final")}const a="POST",o=t.maxUploadRetryTime,l=new Yr(n,a,s,o);return l.headers=r,l.errorHandler=Bc(e),l}const sR=256*1024;function cQ(t,e,n,i,r,s,a,o){const l=new qp(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw bW();const c=l.total-l.current;let h=c;r>0&&(h=Math.min(h,r));const d=l.current,f=d+h;let g="";h===0?g="finalize":c===h?g="upload, finalize":g="upload";const E={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${l.current}`},S=i.slice(d,f);if(S===null)throw CM();function b(I,k){const O=TE(I,["active","final"]),T=l.current+h,x=i.size();let R;return O==="final"?R=hy(e,s)(I,k):R=null,new qp(T,x,O==="final",R)}const y="POST",_=e.maxUploadRetryTime,v=new Yr(n,y,b,_);return v.headers=E,v.body=S.uploadData(),v.progressCallback=o||null,v.errorHandler=Bc(t),v}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uQ={STATE_CHANGED:"state_changed"},gn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function W_(t){switch(t){case"running":case"pausing":case"canceling":return gn.RUNNING;case"paused":return gn.PAUSED;case"success":return gn.SUCCESS;case"canceled":return gn.CANCELED;case"error":return gn.ERROR;default:return gn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hQ{constructor(e,n,i){if(RW(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class dQ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=eo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=eo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=eo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,s){if(this.sent_)throw xu("cannot .send() more than once");if(lr(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw xu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class fQ extends dQ{initXhr(){this.xhr_.responseType="text"}}function Bi(){return new fQ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=uy(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Je.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(kM(r.status,[]))if(s)r=AM();else{this.sleepTime=Math.max(this.sleepTime*2,dW),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Je.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const i=oQ(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Bi,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,i)=>{const r=lQ(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,Bi,n,i);this._request=s,s.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=sR*this._chunkMultiplier,n=new qp(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let a;try{a=cQ(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const o=this._ref.storage._makeRequest(a,Bi,r,s,!1);this._request=o,o.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){sR*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const i=zM(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Bi,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const i=aQ(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Bi,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=RM(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=W_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){const s=new hQ(n||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(W_(this._state)){case gn.SUCCESS:Qo(this._resolve.bind(null,this.snapshot))();break;case gn.CANCELED:case gn.ERROR:const n=this._reject;Qo(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(W_(this._state)){case gn.RUNNING:case gn.PAUSED:e.next&&Qo(e.next.bind(e,this.snapshot))();break;case gn.SUCCESS:e.complete&&Qo(e.complete.bind(e))();break;case gn.CANCELED:case gn.ERROR:e.error&&Qo(e.error.bind(e,this._error))();break;default:e.error&&Qo(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n){this._service=e,n instanceof an?this._location=n:this._location=an.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new wo(e,n)}get root(){const e=new an(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return UM(this._location.path)}get storage(){return this._service}get parent(){const e=HW(this._location.path);if(e===null)return null;const n=new an(this._location.bucket,e);return new wo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw PM(e)}}function mQ(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new BM(t,new yr(e),n)}function pQ(t){const e={prefixes:[],items:[]};return qM(t,e).then(()=>e)}async function qM(t,e,n){const r=await HM(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&await qM(t,e,r.nextPageToken)}function HM(t,e){e!=null&&typeof e.maxResults=="number"&&iw("options.maxResults",1,1e3,e.maxResults);const n=e||{},i=tQ(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(i,Bi)}function gQ(t){t._throwIfRoot("getMetadata");const e=zM(t.storage,t._location,uy());return t.storage.makeRequestWithTokens(e,Bi)}function yQ(t,e){t._throwIfRoot("updateMetadata");const n=iQ(t.storage,t._location,e,uy());return t.storage.makeRequestWithTokens(n,Bi)}function _Q(t){t._throwIfRoot("getDownloadURL");const e=nQ(t.storage,t._location,uy());return t.storage.makeRequestWithTokens(e,Bi).then(n=>{if(n===null)throw TW();return n})}function vQ(t){t._throwIfRoot("deleteObject");const e=rQ(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Bi)}function GM(t,e){const n=GW(t._location.path,e),i=new an(t._location.bucket,n);return new wo(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wQ(t){return/^[A-Za-z]+:\/\//.test(t)}function bQ(t,e){return new wo(t,e)}function $M(t,e){if(t instanceof EE){const n=t;if(n._bucket==null)throw wW();const i=new wo(n,n._bucket);return e!=null?$M(i,e):i}else return e!==void 0?GM(t,e):t}function TQ(t,e){if(e&&wQ(e)){if(t instanceof EE)return bQ(t,e);throw Vl("To use ref(service, url), the first argument must be a Storage instance.")}else return $M(t,e)}function aR(t,e){const n=e==null?void 0:e[IM];return n==null?null:an.makeFromBucketSpec(n,t)}function EQ(t,e,n,i={}){t.host=`${e}:${n}`;const r=lr(e);r&&(Ob(`https://${t.host}/b`),Vb("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:s}=i;s&&(t._overrideAuthToken=typeof s=="string"?s:yD(s,t.app.options.projectId))}class EE{constructor(e,n,i,r,s,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=SM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=uW,this._maxUploadRetryTime=hW,this._requests=new Set,r!=null?this._bucket=an.makeFromBucketSpec(r,this._host):this._bucket=aR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=an.makeFromBucketSpec(this._url,e):this._bucket=aR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){iw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){iw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ae(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wo(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new xW(NM());{const a=VW(e,this._appId,i,r,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const oR="@firebase/storage",lR="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xQ="storage";function SQ(t,e,n){return t=J(t),mQ(t,e,n)}function IQ(t){return t=J(t),gQ(t)}function AQ(t,e){return t=J(t),yQ(t,e)}function RQ(t,e){return t=J(t),HM(t,e)}function CQ(t){return t=J(t),pQ(t)}function NQ(t){return t=J(t),_Q(t)}function PQ(t){return t=J(t),vQ(t)}function cR(t,e){return t=J(t),TQ(t,e)}function DQ(t,e){return GM(t,e)}function kQ(t,e,n,i={}){EQ(t,e,n,i)}function OQ(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new EE(n,i,r,e,wi)}function VQ(){Ci(new kn(xQ,OQ,"PUBLIC").setMultipleInstances(!0)),_n(oR,lR,""),_n(oR,lR,"esm2020")}VQ();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n,i){this._delegate=e,this.task=n,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Wf(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(i=>{if(e)return e(new Wf(i,this,this._ref))},n)}on(e,n,i,r){let s;return n&&(typeof n=="function"?s=a=>n(new Wf(a,this,this._ref)):s={next:n.next?a=>n.next(new Wf(a,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}}class hR{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Rr(e,this._service))}get items(){return this._delegate.items.map(e=>new Rr(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=DQ(this._delegate,e);return new Rr(n,this.storage)}get root(){return new Rr(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Rr(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new uR(SQ(this._delegate,e,n),this)}putString(e,n=fi.RAW,i){this._throwIfRoot("putString");const r=OM(n,e),s={...i};return s.contentType==null&&r.contentType!=null&&(s.contentType=r.contentType),new uR(new BM(this._delegate,new yr(r.data,!0),s),this)}listAll(){return CQ(this._delegate).then(e=>new hR(e,this.storage))}list(e){return RQ(this._delegate,e||void 0).then(n=>new hR(n,this.storage))}getMetadata(){return IQ(this._delegate)}updateMetadata(e){return AQ(this._delegate,e)}getDownloadURL(){return NQ(this._delegate)}delete(){return this._throwIfRoot("delete"),PQ(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw PM(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(dR(e))throw Vl("ref() expected a child path but got a URL, use refFromURL instead.");return new Rr(cR(this._delegate,e),this)}refFromURL(e){if(!dR(e))throw Vl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{an.makeFromUrl(e,this._delegate.host)}catch{throw Vl("refFromUrl() expected a valid full URL but got an invalid one.")}return new Rr(cR(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,i={}){kQ(this._delegate,e,n,i)}}function dR(t){return/^[A-Za-z]+:\/\//.test(t)}const MQ="@firebase/storage-compat",LQ="0.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UQ="storage-compat";function jQ(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("storage").getImmediate({identifier:e});return new KM(n,i)}function zQ(t){const e={TaskState:gn,TaskEvent:uQ,StringFormat:fi,Storage:KM,Reference:Rr};t.INTERNAL.registerComponent(new kn(UQ,jQ,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(MQ,LQ)}zQ(jt);const FQ={apiKey:"AIzaSyDzEay5fGB-2r5_V9UXOO8cOv-nJdHwDRg",authDomain:"rush-coffee.firebaseapp.com",projectId:"rush-coffee",storageBucket:"rush-coffee.appspot.com",messagingSenderId:"423413538635",appId:"1:423413538635:web:ded0369f50c3a9086bd2ce"};jt.apps.length||jt.initializeApp(FQ);const nn=jt.auth(),$e=jt.firestore(),jne=jt.storage(),WM=A.createContext(void 0),Xr=()=>{const t=A.useContext(WM);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Q_=async t=>{var r,s,a;const e=$e.collection("users").doc(t),n=await e.get();if(!n.exists){console.log(`Creating missing Firestore profile for user: ${t}`);const o=nn.currentUser;if(!o)throw new Error("User not authenticated");const l=((r=o.displayName)==null?void 0:r.split(" "))||["User",""],c=l[0],h=l.slice(1).join(" ")||"",d={email:o.email||"",displayName:o.displayName||`${c} ${h}`,firstName:c,lastName:h,phone:o.phoneNumber||"",photoURL:o.photoURL||void 0,createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:0,lifetimePoints:0,loyaltyPoints:0,tier:"bronze",rewardsHistory:[],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await e.set(d);const g=(await e.get()).data();return{uid:t,email:g.email,displayName:g.displayName,firstName:g.firstName||"User",lastName:g.lastName||"",phone:g.phone||"",photoURL:g.photoURL,createdAt:((s=g.createdAt)==null?void 0:s.toDate())||new Date,role:g.role,totalOrders:g.totalOrders??0,totalSpent:g.totalSpent??0,currentPoints:g.currentPoints??0,lifetimePoints:g.lifetimePoints??0,loyaltyPoints:g.loyaltyPoints??0,tier:g.tier||"bronze",rewardsHistory:(g.rewardsHistory||[]).map(E=>({...E,date:E.date&&typeof E.date.toDate=="function"?E.date.toDate():E.date})).sort((E,S)=>{const b=E.date instanceof Date?E.date:new Date(E.date);return(S.date instanceof Date?S.date:new Date(S.date)).getTime()-b.getTime()}),preferences:g.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}}}const i=n.data();return{uid:t,email:i.email,displayName:i.displayName||`${i.firstName} ${i.lastName}`,firstName:i.firstName||"User",lastName:i.lastName||"",phone:i.phone||"",photoURL:i.photoURL,createdAt:((a=i.createdAt)==null?void 0:a.toDate())||new Date,role:i.role,totalOrders:i.totalOrders??0,totalSpent:i.totalSpent??0,currentPoints:i.currentPoints??0,lifetimePoints:i.lifetimePoints??0,loyaltyPoints:i.loyaltyPoints??0,tier:i.tier||"bronze",rewardsHistory:(i.rewardsHistory||[]).map(o=>({...o,date:o.date&&typeof o.date.toDate=="function"?o.date.toDate():o.date})).sort((o,l)=>{const c=o.date instanceof Date?o.date:new Date(o.date);return(l.date instanceof Date?l.date:new Date(l.date)).getTime()-c.getTime()}),preferences:i.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}}},BQ=({children:t})=>{const[e,n]=A.useState(null),[i,r]=A.useState(!0);A.useEffect(()=>{let y;const _=nn.onAuthStateChanged(async v=>{y&&y(),v?y=$e.collection("users").doc(v.uid).onSnapshot(k=>{var O;if(k.exists){const T=k.data(),x={uid:v.uid,email:v.email,firstName:T.firstName||"User",lastName:T.lastName||"",phone:T.phone||"",photoURL:T.photoURL,createdAt:((O=T.createdAt)==null?void 0:O.toDate())||new Date,role:T.role,totalOrders:T.totalOrders??0,totalSpent:T.totalSpent??0,currentPoints:T.currentPoints??0,lifetimePoints:T.lifetimePoints??0,tier:T.tier||"bronze",rewardsHistory:(T.rewardsHistory||[]).map(R=>({...R,date:R.date&&typeof R.date.toDate=="function"?R.date.toDate():R.date})).sort((R,C)=>{const P=R.date instanceof Date?R.date:new Date(R.date);return(C.date instanceof Date?C.date:new Date(C.date)).getTime()-P.getTime()}),preferences:T.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}};n(x)}else{const T={uid:v.uid,email:v.email,firstName:"User",lastName:"",createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:0,lifetimePoints:0,tier:"bronze",rewardsHistory:[],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}};n(T)}r(!1)},k=>{console.error("Error listening to user document:",k),r(!1)}):(n(null),r(!1))});return()=>{_(),y&&y()}},[]);const b={currentUser:e,loading:i,register:async(y,_,v,I,k)=>{const T=(await nn.createUserWithEmailAndPassword(y,_)).user,x={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},R={firstName:v,lastName:I,phone:k||"",createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[x],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};return await $e.collection("users").doc(T.uid).set(R),Q_(T.uid)},login:async(y,_,v)=>{var k;if(y==="test@test.com"&&_==="123456"){const O="test-user-id";return sessionStorage.setItem(`dev_verification_code_${O}`,"123456"),sessionStorage.setItem("requires2FA","true"),{needsVerification:!0,userId:O,email:y,role:"customer"}}const I=v?jt.auth.Auth.Persistence.LOCAL:jt.auth.Auth.Persistence.SESSION;await nn.setPersistence(I),sessionStorage.setItem("requires2FA","true");try{const T=(await nn.signInWithEmailAndPassword(y,_)).user.uid,x=Math.floor(1e5+Math.random()*9e5).toString(),R=new Date(Date.now()+10*60*1e3);try{await $e.collection("emailVerifications").doc(T).set({code:x,email:y,createdAt:new Date,expiresAt:R,verified:!1})}catch{sessionStorage.setItem(`dev_verification_code_${T}`,x)}console.log(` Verification code for ${y}: ${x}`);let C;try{C=(k=(await $e.collection("users").doc(T).get()).data())==null?void 0:k.role}catch{C="customer"}return{needsVerification:!0,userId:T,email:y,role:C}}catch(O){throw sessionStorage.removeItem("requires2FA"),O}},logout:async()=>{await nn.signOut()},sendPasswordReset:async y=>{await nn.sendPasswordResetEmail(y)},signInWithGoogle:async()=>{var k;const y=new jt.auth.GoogleAuthProvider;y.setCustomParameters({prompt:"select_account"});const _=await nn.signInWithPopup(y),v=_.user,I=_.additionalUserInfo;if(I!=null&&I.isNewUser){const O=((k=v.displayName)==null?void 0:k.split(" "))||["New","User"],T=O[0],x=O.slice(1).join(" ")||"",R={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},C={firstName:T,lastName:x,photoURL:v.photoURL||void 0,createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[R],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await $e.collection("users").doc(v.uid).set(C)}return Q_(v.uid)},signInWithFacebook:async()=>{var k;const y=new jt.auth.FacebookAuthProvider,_=await nn.signInWithPopup(y),v=_.user,I=_.additionalUserInfo;if(I!=null&&I.isNewUser){const O=((k=v.displayName)==null?void 0:k.split(" "))||["New","User"],T=O[0],x=O.slice(1).join(" ")||"",R={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},C={firstName:T,lastName:x,photoURL:v.photoURL||void 0,createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[R],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await $e.collection("users").doc(v.uid).set(C)}return Q_(v.uid)},updateUserProfile:async y=>{e&&await $e.collection("users").doc(e.uid).update(y)},updateUserPhoto:async y=>{e&&await $e.collection("users").doc(e.uid).update({photoURL:y})},sendEmailVerificationCode:async(y,_)=>{const v=Math.floor(1e5+Math.random()*9e5).toString(),I=new Date(Date.now()+10*60*1e3);try{await $e.collection("emailVerifications").doc(y).set({code:v,email:_,createdAt:new Date,expiresAt:I})}catch{sessionStorage.setItem(`dev_verification_code_${y}`,v)}console.log(` Verification code for ${_}: ${v}`)},verifyEmailCode:async(y,_)=>{try{const I=$e.collection("emailVerifications").doc(y),k=await I.get();if(k.exists){const O=k.data();if(O){const T=new Date,x=O.expiresAt.toDate();if(T>x)return!1;if(O.code===_)return await I.update({verified:!0}),!0}}}catch{}return sessionStorage.getItem(`dev_verification_code_${y}`)===_},updateUserPassword:async(y,_)=>{const v=nn.currentUser;if(!v||!v.email)throw new Error("No user logged in");const I=jt.auth.EmailAuthProvider.credential(v.email,y);await v.reauthenticateWithCredential(I),await v.updatePassword(_)}};return m.jsx(WM.Provider,{value:b,children:!i&&t})},de=t=>`/RushCoffee-Capstone/${t}`,Qf=[{id:"cb-01",name:"Spanish Latte",description:"A creamy and sweet latte with a Spanish twist, featuring condensed milk for a rich flavor.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:de("coffee-based/spanish-latte.png"),available:!0,stock:99,popular:!0,displayOrder:1,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"condensed-milk",quantity:30}]},{id:"cb-02",name:"Rush Coffee Blend",description:"Our signature house blend, perfectly balanced for a smooth and satisfying coffee experience.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:89}],imageUrl:de("coffee-based/rush-coffee-blend.png"),available:!0,stock:99,popular:!0,displayOrder:2,aliases:["rush coffee","house blend"],recipe:[{ingredientId:"coffee-beans",quantity:18},{ingredientId:"hot-water",quantity:200}]},{id:"cb-03",name:"Caramel Chocolate Mocha",description:"A decadent mix of rich chocolate, espresso, and creamy caramel for the ultimate treat.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:de("coffee-based/caramel-chocolate-mocha.jpg"),available:!0,stock:99,popular:!0,displayOrder:3,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"chocolate-sauce",quantity:20},{ingredientId:"caramel-sauce",quantity:15}]},{id:"cb-04",name:"Dark Chocolate Mocha",description:"A bold and intense mocha experience with premium dark chocolate and strong espresso.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:de("coffee-based/dark-chocolate-mocha.jpg"),available:!0,stock:99,displayOrder:4,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"chocolate-sauce",quantity:25}]},{id:"cb-05",name:"Mocha Latte",description:"A classic blend of smooth espresso, rich chocolate sauce, and steamed milk.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:de("coffee-based/mocha-latte.jpg"),available:!0,stock:99,displayOrder:5,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"chocolate-sauce",quantity:20}]},{id:"cb-06",name:"Americano",description:"Bold espresso shots topped with hot water to create a light layer of crema.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:de("coffee-based/americano.jpg"),available:!0,stock:99,displayOrder:6,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"hot-water",quantity:220}]},{id:"cb-07",name:"Biscoff Latte",description:"An indulgent latte infused with the irresistible flavor of caramelized Biscoff cookies.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:199}],imageUrl:de("coffee-based/biscoff-latte.jpg"),available:!0,stock:99,displayOrder:7,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:170},{ingredientId:"biscoff-spread",quantity:30}]},{id:"cb-08",name:"Reeses Latte",description:"The perfect combination of peanut butter, chocolate, and espresso. A candy lover's dream.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:de("coffee-based/reeses-latte.jpg"),available:!0,stock:99,displayOrder:8,aliases:["reese","reese's","reeses"],recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:160},{ingredientId:"chocolate-sauce",quantity:15},{ingredientId:"peanut-butter",quantity:20}]},{id:"cb-09",name:"Brown Sugar Latte",description:"A comforting latte sweetened with rich, molasses-like brown sugar syrup.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:79}],imageUrl:de("coffee-based/brown-sugar-latte.jpg"),available:!0,stock:99,displayOrder:9,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"brown-sugar-syrup",quantity:25}]},{id:"cb-10",name:"Iced Latte",description:"A simple classic. Chilled espresso with cold milk served over ice.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:69}],imageUrl:de("coffee-based/iced-latte.jpg"),available:!0,stock:99,displayOrder:10,aliases:["ice latte","ice coffee","iced coffee","iced latte"],recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"ice-cubes",quantity:100}]},{id:"cb-11",name:"Orange Latte",description:"A unique and refreshing latte with a zesty hint of natural orange flavor.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:89}],imageUrl:de("coffee-based/orange-latte.jpg"),available:!0,stock:99,displayOrder:11,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:170},{ingredientId:"orange-syrup",quantity:20}]},{id:"cb-12",name:"Coffee Jelly",description:"A delightful iced coffee drink with chewy, coffee-flavored jelly cubes.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:99}],imageUrl:de("coffee-based/coffee-jelly.jpg"),available:!0,stock:99,displayOrder:12,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"coffee-jelly",quantity:80},{ingredientId:"ice-cubes",quantity:80}]},{id:"nc-01",name:"Red Velvet",description:"A sweet and creamy drink inspired by the classic red velvet cake, with hints of cocoa and vanilla.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:de("non-coffee/red-velvet.jpg"),available:!0,stock:99,displayOrder:13,recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"red-velvet-powder",quantity:25},{ingredientId:"chocolate-sauce",quantity:10},{ingredientId:"vanilla-syrup",quantity:15}]},{id:"nc-02",name:"Red Velvet Matcha Latte",description:"A beautiful and delicious blend of earthy matcha and sweet red velvet flavors.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:de("non-coffee/red-velvet-matcha-latte.jpg"),available:!0,stock:99,displayOrder:14,recipe:[{ingredientId:"milk",quantity:180},{ingredientId:"matcha-powder",quantity:5},{ingredientId:"red-velvet-powder",quantity:15},{ingredientId:"vanilla-syrup",quantity:10}]},{id:"nc-03",name:"Milky Choco",description:"A rich and comforting chocolate drink made with high-quality cocoa and fresh milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:de("non-coffee/milky-choco.jpg"),available:!0,stock:99,displayOrder:15,recipe:[{ingredientId:"milk",quantity:220},{ingredientId:"chocolate-sauce",quantity:30}]},{id:"nc-04",name:"Strawberry Milk",description:"A refreshing and creamy drink made with real strawberries and fresh milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:de("non-coffee/strawberry-milk.jpg"),available:!0,stock:99,displayOrder:16,recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"strawberry-puree",quantity:50}]},{id:"nc-05",name:"Biscoff Milky",description:"A non-coffee treat blending the sweet, caramelized taste of Biscoff with creamy milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:de("non-coffee/biscoff-milky.jpg"),available:!0,stock:99,displayOrder:17,recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"biscoff-spread",quantity:35}]},{id:"nc-06",name:"Oreo Latte",description:"A fun and delicious drink packed with the classic cookies and cream flavor of Oreos.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:de("non-coffee/oreo-latte.jpg"),available:!0,stock:99,displayOrder:18,recipe:[{ingredientId:"milk",quantity:180},{ingredientId:"oreo-crumbs",quantity:40},{ingredientId:"chocolate-sauce",quantity:15}]},{id:"ms-01",name:"Matcha Latte",description:"Premium Japanese matcha green tea with steamed milk, a perfect balance of earthy and creamy.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:89}],imageUrl:de("matcha-series/matcha-latte.jpg"),available:!0,stock:99,popular:!0,displayOrder:19,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:200}]},{id:"ms-02",name:"Strawberry Matcha",description:"A delightful pairing of sweet strawberry puree and high-quality matcha green tea.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:109}],imageUrl:de("matcha-series/strawberry-matcha.jpg"),available:!0,stock:99,displayOrder:20,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"strawberry-puree",quantity:40}]},{id:"ms-03",name:"Matcha Cream Cheese",description:"Earthy matcha topped with a rich, savory, and slightly sweet cream cheese foam.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:109}],imageUrl:de("matcha-series/matcha-cream-cheese.jpg"),available:!0,stock:99,displayOrder:21,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"cream-cheese",quantity:30}]},{id:"ms-04",name:"Matcha Oreo",description:"A creative blend of matcha and crushed Oreo cookies for a unique texture and flavor.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:de("matcha-series/matcha-oreo.jpg"),available:!0,stock:99,displayOrder:22,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"oreo-crumbs",quantity:35}]},{id:"rf-01",name:"Flamangooverload Shake",description:"An explosive mix of flamingo and mango for an overload of fruity goodness.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:de("refreshments/flamangooverload.jpg"),available:!0,stock:99,displayOrder:23,aliases:["flamingo","flamango","overload"],recipe:[{ingredientId:"mango-puree",quantity:100},{ingredientId:"strawberry-puree",quantity:50},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-02",name:"Mangoberry Shake",description:"A delightful blend of sweet mangoes and tangy berries, perfectly refreshing.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:de("refreshments/mangoberry.jpg"),available:!0,stock:99,displayOrder:24,aliases:["mango berry"],recipe:[{ingredientId:"mango-puree",quantity:80},{ingredientId:"mixed-berries",quantity:50},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-03",name:"Mango Caramel Shake",description:"Creamy mango shake drizzled with rich, buttery caramel sauce.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:de("refreshments/mango-caramel.jpg"),available:!0,stock:99,displayOrder:25,recipe:[{ingredientId:"mango-puree",quantity:100},{ingredientId:"caramel-sauce",quantity:20},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-04",name:"Blueberry Shake",description:"A classic fruit shake made with sweet and juicy blueberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:de("refreshments/blueberry-shake.jpg"),available:!0,stock:99,displayOrder:26,recipe:[{ingredientId:"blueberry-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-05",name:"Strawberry Shake",description:"A creamy and delicious shake made with ripe, sweet strawberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:de("refreshments/strawberry-shake.jpg"),available:!0,stock:99,displayOrder:27,recipe:[{ingredientId:"strawberry-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-06",name:"Green Apple Shake",description:"A tart and refreshing shake with the crisp taste of green apples.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:de("refreshments/green-apple-shake.jpg"),available:!0,stock:99,displayOrder:28,recipe:[{ingredientId:"green-apple-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-07",name:"Blueberry Soda Pop",description:"Fizzy and fun, this soda pop is bursting with sweet blueberry flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:de("refreshments/blueberry-soda.jpg"),available:!0,stock:99,displayOrder:29,aliases:["blueberry soda"],recipe:[{ingredientId:"blueberry-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-08",name:"Strawberry Soda Pop",description:"A refreshing soda pop with the sweet taste of summer strawberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:de("refreshments/strawberry-soda.jpg"),available:!0,stock:99,displayOrder:30,aliases:["strawberry soda"],recipe:[{ingredientId:"strawberry-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-09",name:"Green Apple Soda Pop",description:"A crisp and bubbly soda with a tangy green apple twist.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:de("refreshments/green-apple-soda.jpg"),available:!0,stock:99,displayOrder:31,aliases:["green apple soda"],recipe:[{ingredientId:"green-apple-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-10",name:"Lemon Soda Pop",description:"A zesty and invigorating soda pop with a classic lemon flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:de("refreshments/lemon-soda.jpg"),available:!0,stock:99,displayOrder:32,aliases:["lemon soda"],recipe:[{ingredientId:"lemon-juice",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-11",name:"Lychee Soda Pop",description:"An exotic and fragrant soda pop with the sweet, floral taste of lychee.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:de("refreshments/lychee-soda.jpg"),available:!0,stock:99,displayOrder:33,aliases:["lychee soda"],recipe:[{ingredientId:"lychee-syrup",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-12",name:"Mango Soda Pop",description:"A tropical and bubbly soda bursting with sweet mango flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:de("refreshments/mango-soda.jpg"),available:!0,stock:99,displayOrder:34,aliases:["mango soda"],recipe:[{ingredientId:"mango-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"ml-01",name:"Breaded Bacon",description:"Crispy breaded bacon served with creamy white sauce and golden fries.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:119},{name:"Combo Meal",size:"w/ Fries & Drink",price:139}],imageUrl:de("menu/ala-carte-breaded-bacon-with-white-sauce and fries.jpg"),comboImageUrl:de("menu/combo-meals-breaded-bacon-with-white-sauce,-fries-and-a-drink.jpg"),available:!0,stock:99,popular:!0,displayOrder:35,aliases:["bacon"],recipe:[{ingredientId:"bacon-strips",quantity:.15},{ingredientId:"bread-crumbs",quantity:50},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:100},{ingredientId:"takeout-pack",quantity:1}]},{id:"ml-02",name:"Breaded Porkchop",description:"A juicy breaded porkchop fried to perfection, served with white sauce and fries.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:129},{name:"Combo Meal",size:"w/ Fries & Drink",price:149}],imageUrl:de("menu/ala-carte-breaded-porkchop-with-white-sauce-and-fries.jpg"),comboImageUrl:de("menu/combo-meals-breaded-porkchop-with-white-sauce-and-fries-w-drink.jpg"),available:!0,stock:99,popular:!0,displayOrder:36,aliases:["porkchop","pork chop"],recipe:[{ingredientId:"porkchop",quantity:.2},{ingredientId:"bread-crumbs",quantity:60},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:120},{ingredientId:"takeout-pack",quantity:1}]},{id:"ml-03",name:"Breaded Chicken",description:"Tender breaded chicken fillet with a side of fries and our signature white sauce.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:119},{name:"Combo Meal",size:"w/ Fries & Drink",price:139}],imageUrl:de("menu/ala-carte-chicken-with-white-sauce-and-fries.jpg"),comboImageUrl:de("menu/combo-meals-breaded-chicken-with-white-sauce,-fries-and-a-drink.jpg"),available:!0,stock:99,displayOrder:37,aliases:["chicken","chicken fillet"],recipe:[{ingredientId:"chicken-fillet",quantity:.2},{ingredientId:"bread-crumbs",quantity:55},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:110},{ingredientId:"takeout-pack",quantity:1}]}],QM=A.createContext(void 0),qQ=()=>{const t=A.useContext(QM);if(!t)throw new Error("useProduct must be used within a ProductProvider");return t},HQ=({children:t})=>{const[e,n]=A.useState([]),[i,r]=A.useState(!0),[s,a]=A.useState(null),o=A.useCallback(async()=>{r(!0),a(null);try{const f=$e.collection("products"),g=f.orderBy("displayOrder","asc"),E=await g.get();if(E.empty){console.log("Products collection is empty. Seeding products with specific IDs...");const _=$e.batch();Qf.forEach(k=>{const{id:O,...T}=k,x=f.doc(O);_.set(x,T)}),await _.commit(),console.log(`Successfully seeded ${Qf.length} products to Firestore!`);const I=(await g.get()).docs.map(k=>({id:k.id,...k.data()}));n(I);return}const S=E.docs.map(_=>({id:_.id,..._.data()}));n(S);const b=$e.batch();let y=!1;Qf.forEach(_=>{const v=S.find(I=>I.id===_.id);if(v){const I=JSON.stringify(v.recipe||[]),k=JSON.stringify(_.recipe||[]);if(I!==k){const O=f.doc(_.id);b.update(O,{recipe:_.recipe}),y=!0,console.log(`Syncing recipe for ${_.name}`)}}}),y&&(await b.commit(),console.log(" Recipes synced from code to Firestore"))}catch(f){f.code==="permission-denied"?console.info("Firestore permission denied. This is expected if security rules are not yet configured or if you are offline. Falling back to mock data for demonstration."):console.warn("Error fetching products from Firestore. Falling back to mock data.",f),n(Qf),a(null)}finally{r(!1)}},[]);A.useEffect(()=>{o()},[o]);const d={products:e,isLoading:i,error:s,addProduct:async f=>{try{await $e.collection("products").add(f),await o()}catch(g){throw console.error("Error adding product: ",g),new Error("Failed to add product.")}},updateProduct:async(f,g)=>{try{await $e.collection("products").doc(f).update(g),await o()}catch(E){throw console.error("Error updating product: ",E),new Error("Failed to update product.")}},deleteProduct:async f=>{try{await $e.collection("products").doc(f).delete(),await o()}catch(g){throw console.error("Error deleting product: ",g),new Error("Failed to delete product.")}}};return m.jsx(QM.Provider,{value:d,children:t})},YM=A.createContext(void 0),XM=()=>{const t=A.useContext(YM);if(t===void 0)throw new Error("useCart must be used within a CartProvider");return t},GQ=({children:t})=>{const[e,n]=A.useState([]),[i,r]=A.useState(!1),[s,a]=A.useState(null),[o,l]=A.useState(!0),[c,h]=A.useState([]),{currentUser:d}=Xr(),{products:f,isLoading:g}=qQ();A.useEffect(()=>{if(s){const D=setTimeout(()=>a(null),4e3);return()=>clearTimeout(D)}},[s]);const E=A.useCallback(D=>{a(D)},[]);A.useEffect(()=>{d?(async()=>{var q;if(!(!d||g)){l(!0);try{const z=await $e.collection("users").doc(d.uid).get();if(z.exists){const X=(((q=z.data())==null?void 0:q.cart)||[]).map(ie=>{const le=f.find(bt=>bt.id===ie.productId);if(!le)return null;const qe=le.sizes.find(bt=>bt.name===ie.sizeName);if(!qe)return null;const ne=ie.customizations?JSON.stringify(ie.customizations):"";return{id:`${le.id}-${qe.name}-${ne}`,product:le,selectedSize:qe,quantity:ie.quantity,customizations:ie.customizations}}).filter(ie=>ie!==null);n(X)}}catch(ee){console.error("Error fetching cart from Firestore:",ee),E("Couldn't load your cart.")}finally{l(!1)}}})():(n([]),l(!1))},[d,f,g,E]);const S=A.useCallback(async D=>{if(d)try{const q=$e.collection("users").doc(d.uid),ee=D.map(z=>{const Q={};return z.customizations&&(z.customizations.sugarLevel!==void 0&&(Q.sugarLevel=z.customizations.sugarLevel),z.customizations.iceLevel!==void 0&&(Q.iceLevel=z.customizations.iceLevel),z.customizations.toppings!==void 0&&(Q.toppings=z.customizations.toppings)),{productId:z.product.id,sizeName:z.selectedSize.name,quantity:z.quantity,...Object.keys(Q).length>0&&{customizations:Q}}});await q.set({cart:ee},{merge:!0})}catch(q){console.error("Error updating Firestore cart:",q),E("Error saving your cart.")}},[d,E]),b=A.useMemo(()=>e.reduce((D,q)=>D+q.quantity,0),[e]),y=()=>r(!0),_=()=>r(!1),v=(D,q,ee,z=1)=>{const Q=ee?JSON.stringify(ee):"",X=`${D.id}-${q.name}-${Q}`;let ie;e.find(qe=>qe.id===X)?ie=e.map(qe=>qe.id===X?{...qe,quantity:Math.min(qe.quantity+z,D.stock)}:qe):ie=[...e,{id:X,product:D,selectedSize:q,quantity:Math.min(z,D.stock),customizations:ee}],n(ie),S(ie),E(`${D.name} (${q.name}) added to cart!`),y()},I=D=>{if(!D||D.length===0)return;let q=[...e],ee=0;D.forEach(z=>{const Q=z.customizations?JSON.stringify(z.customizations):"",X=`${z.product.id}-${z.selectedSize.name}-${Q}`,ie=q.findIndex(le=>le.id===X);if(ie>-1){const le=q[ie],qe=le.quantity+z.quantity;q[ie]={...le,quantity:Math.min(qe,z.product.stock)}}else q.push({id:X,product:z.product,selectedSize:z.selectedSize,quantity:Math.min(z.quantity,z.product.stock),customizations:z.customizations});ee+=z.quantity}),n(q),S(q),E(`${ee} item(s) added to your cart!`),y()},k=(D,q)=>{let ee;q<1?ee=e.filter(z=>z.id!==D):ee=e.map(z=>z.id===D?{...z,quantity:Math.min(q,z.product.stock)}:z),n(ee),S(ee)},O=D=>{const q=e.find(z=>z.id===D),ee=e.filter(z=>z.id!==D);n(ee),S(ee),q&&E(`${q.product.name} (${q.selectedSize.name}) removed from cart.`)},T=(D,q,ee,z,Q=1)=>{const X=e.filter(Ee=>Ee.id!==D),ie=z?JSON.stringify(z):"",le=`${q.id}-${ee.name}-${ie}`,qe=X.find(Ee=>Ee.id===le);let ne;qe?ne=X.map(Ee=>Ee.id===le?{...Ee,quantity:Math.min(Ee.quantity+Q,q.stock)}:Ee):ne=[...X,{id:le,product:q,selectedSize:ee,quantity:Math.min(Q,q.stock),customizations:z}],n(ne),S(ne),E(`${q.name} (${ee.name}) updated!`)},x=()=>{n([]),h([]),S([])},R=D=>{h(q=>q.includes(D)?q.filter(ee=>ee!==D):[...q,D])},C=()=>{h(e.map(D=>D.id))},P=()=>{h([])};A.useEffect(()=>{const D=e.map(q=>q.id);h(q=>{const ee=q.filter(Q=>D.includes(Q)),z=D.filter(Q=>!q.includes(Q));return[...ee,...z]})},[e]);const V={cartItems:e,isCartOpen:i,toastMessage:s,totalCartItems:b,isCartLoading:o,selectedItemIds:c,addToCart:v,addMultipleToCart:I,updateQuantity:k,updateCartItem:T,removeFromCart:O,openCart:y,closeCart:_,showToast:E,toggleItemSelection:R,selectAllItems:C,deselectAllItems:P,clearCart:x};return m.jsx(YM.Provider,{value:V,children:t})},Fr=({className:t,...e})=>m.jsxs("svg",{viewBox:"0 0 241 175",xmlns:"http://www.w3.org/2000/svg",className:t,fill:"currentColor",...e,children:[m.jsx("path",{d:"M153.092 78.5C178.275 50.84 210.393 19.4076 222.5 17.5C234.607 15.5924 239.5 30 239.5 30C239.5 30 244.137 46.596 236.388 72.8253C228.64 99.0547 199 128.5 199 128.5C199 128.5 177.5 152.5 147.5 167C147.5 167 114.686 183.001 104.889 169.159C95.0912 155.316 127.909 106.16 153.092 78.5Z"}),m.jsx("path",{d:"M8.99445 86.0801C8.99445 86.0801 -16.2682 31.1886 17.8826 14.4198C33.7618 9.56756 76 55.675 76 64.5C76 70 63.7899 86.337 59 101.5C54.887 114.52 55.557 134.266 52.0896 135.774C48.0468 137.533 37.3644 137.835 8.99445 86.0801Z"}),m.jsx("path",{d:"M47 12.5C41.0274 7.52362 41.5502 -7.59339e-06 52.5 0C63.4498 7.5934e-06 69.3348 2.24286 82.0884 7.45282C95.3718 12.8792 105.888 16.4103 109.463 23.875C111.5 32.5 107.979 33.026 103.5 38.5C99.0205 43.9741 96 44.1666 91 43.5C83.5342 42.5047 52.9726 17.4764 47 12.5Z"}),m.jsx("path",{d:"M200.048 20.8891C212.988 11.4339 207.491 2.52815 200.048 2.97405C192.604 3.41995 127.379 9.72972 89.5542 67.6673C85.4261 73.9905 72.4385 95.2439 69.1452 112.455C65.6022 130.971 65.8681 149.097 73.6272 157.74C81.0528 166.012 88.1891 164.145 92.2823 156.482C96.4277 148.721 97.4982 135.065 100.004 127.882C104.983 113.605 104.907 116.382 109.393 106.379C114.278 95.4879 120.938 86.2377 126.993 78.4363C154.543 42.9442 190.775 27.6646 200.048 20.8891Z"})]}),$Q=({children:t,className:e="",hover:n=!1,variant:i="default",padding:r="md",clickable:s=!1,onClick:a})=>{const o="rounded-2xl transition-all duration-300 ease-out",l={default:"border border-gray-100 bg-white/80 backdrop-blur-sm shadow-lg",elevated:"bg-white shadow-xl border-0",outlined:"border-2 border-primary-200 bg-white",glass:"bg-white/70 backdrop-blur-md border border-white/20 shadow-xl"},c={none:"",sm:"p-4",md:"p-6",lg:"p-8"},h=n?"hover:shadow-2xl hover:-translate-y-1 hover:scale-[1.02]":"",d=s?"cursor-pointer active:scale-[0.98]":"";return m.jsx("div",{className:`${o} ${l[i]} ${c[r]} ${h} ${d} ${e}`,onClick:s?a:void 0,role:s?"button":void 0,tabIndex:s?0:void 0,children:t})},xE=({isOpen:t,onClose:e,title:n,children:i,footer:r,size:s="md",hideHeader:a=!1,hideCloseButton:o=!1,className:l=""})=>{const[c,h]=A.useState(!1);if(A.useEffect(()=>{const f=g=>{g.key==="Escape"&&e()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[e]),A.useEffect(()=>{window.getComputedStyle(document.body).overflow;const f=document.getElementById("admin-main-content");return t?(document.body.style.overflow="hidden",f&&(window.getComputedStyle(f).overflow,f.style.overflow="hidden")):(document.body.style.overflow="",f&&(f.style.overflow="")),()=>{document.body.style.overflow="",f&&(f.style.overflow="")}},[t]),A.useEffect(()=>{if(t){h(!0);const f=setTimeout(()=>{h(!1)},1e3);return()=>clearTimeout(f)}},[t,s,i]),!t)return null;const d={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-2xl"};return typeof document<"u"?rN.createPortal(m.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm animate-fade-in",role:"dialog","aria-modal":"true","aria-labelledby":n?"modal-title":void 0,onClick:e,children:m.jsx("div",{className:`relative w-full transform transition-all ${d[s]} ${l} max-h-[90vh] flex flex-col animate-scale-in`,onClick:f=>f.stopPropagation(),children:m.jsxs($Q,{variant:"elevated",className:"rounded-3xl p-0 shadow-2xl flex flex-col max-h-full overflow-hidden bg-white",children:[!o&&m.jsx("button",{onClick:e,className:"absolute right-6 top-6 z-10 rounded-full p-2 text-gray-400 transition-all hover:bg-gray-100 hover:text-gray-600 active:scale-95","aria-label":"Close modal",children:m.jsx($s,{className:"h-6 w-6"})}),!a&&n&&m.jsx("div",{className:"px-8 pt-8 pb-2 flex-shrink-0",children:m.jsx("h3",{id:"modal-title",className:"text-2xl font-bold text-gray-900",children:n})}),m.jsx("div",{className:`${a&&!n?"p-6 pb-10":"px-6 py-6 pb-10"} overflow-y-auto custom-scrollbar ${c?"scrollbar-flash":""} flex-1`,children:i}),r&&m.jsx("div",{className:"flex justify-end gap-3 px-6 pb-2 pt-2 flex-shrink-0",children:r})]})})}),document.body):null},KQ=()=>m.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),m.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),m.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),m.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),WQ=()=>m.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"#1877F2",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),QQ=({onForgotPassword:t,onRegister:e,onSuccess:n,onVerificationNeeded:i})=>{const[r,s]=A.useState(""),[a,o]=A.useState(""),[l,c]=A.useState(!1),[h,d]=A.useState(!1),[f,g]=A.useState(!1),[E,S]=A.useState(!1),[b,y]=A.useState(!1),[_,v]=A.useState(null),{login:I,signInWithGoogle:k,signInWithFacebook:O}=Xr(),T=async C=>{if(C.preventDefault(),!r||!a){v("Please fill in all fields");return}g(!0),v(null),console.log(" LoginForm submitting:",{email:r,password:a,rememberMe:l});try{const P=await I(r,a,l);sessionStorage.removeItem("requires2FA"),n(P.role)}catch(P){console.error("Login error:",P),P.code==="auth/invalid-credential"||P.code==="auth/user-not-found"||P.code==="auth/wrong-password"?v("Incorrect email or password."):v("Failed to login. Please try again.")}finally{g(!1)}},x=async()=>{S(!0),v(null);try{const C=await k();n(C.role)}catch(C){console.error("Google Sign-In Error:",C),C.code==="auth/popup-closed-by-user"?v("Sign-in cancelled."):C.code==="auth/popup-blocked"?v("Pop-up blocked. Please allow pop-ups for this site."):C.code==="auth/operation-not-allowed"?v("Google Sign-In is not enabled in Firebase Console."):v(C.message||"Failed to sign in with Google")}finally{S(!1)}},R=async()=>{y(!0),v(null);try{const C=await O();n(C.role)}catch(C){console.error("Facebook Sign-In Error:",C),C.code==="auth/popup-closed-by-user"?v("Sign-in cancelled."):C.code==="auth/popup-blocked"?v("Pop-up blocked. Please allow pop-ups for this site."):C.code==="auth/operation-not-allowed"?v("Facebook Sign-In is not enabled in Firebase Console."):C.code==="auth/account-exists-with-different-credential"?v("An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."):v(C.message||"Failed to sign in with Facebook")}finally{y(!1)}};return m.jsxs("div",{className:"w-full max-w-md mx-auto",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx(Fr,{className:"mx-auto h-16 w-16 text-primary-600 mb-4"}),m.jsx("h2",{className:"font-display text-4xl font-bold text-gray-900",children:"Rush Coffee"})]}),m.jsxs("form",{onSubmit:T,className:"space-y-4",children:[_&&m.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-800 border border-red-200",children:[m.jsx(ih,{className:"h-5 w-5 flex-shrink-0"}),m.jsx("span",{children:_})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),m.jsxs("div",{className:"relative",children:[m.jsx(qh,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),m.jsx("input",{type:"email",value:r,onChange:C=>s(C.target.value),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"name@example.com"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),m.jsxs("div",{className:"relative",children:[m.jsx(h0,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),m.jsx("input",{type:h?"text":"password",value:a,onChange:C=>o(C.target.value),className:"w-full pl-12 pr-12 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter your password"}),m.jsx("button",{type:"button",onClick:()=>d(!h),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:h?m.jsx(cD,{className:"h-5 w-5"}):m.jsx(uD,{className:"h-5 w-5"})})]})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("label",{className:"flex items-center cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:l,onChange:C=>c(C.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),m.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Remember me"})]}),m.jsx("button",{type:"button",onClick:()=>t(r),className:"text-sm text-primary-600 hover:text-primary-700 font-medium transition-colors",children:"Forgot your password?"})]}),m.jsx("button",{type:"submit",disabled:f,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3.5 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:f?m.jsxs("span",{className:"flex items-center justify-center gap-2",children:[m.jsx(hi,{className:"h-5 w-5 animate-spin"}),"Logging in..."]}):"Login"}),m.jsxs("div",{className:"relative my-6",children:[m.jsx("div",{className:"absolute inset-0 flex items-center",children:m.jsx("div",{className:"w-full border-t border-gray-200"})}),m.jsx("div",{className:"relative flex justify-center text-sm",children:m.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or continue with"})})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("button",{type:"button",onClick:x,disabled:E||b,className:"flex items-center justify-center gap-2 border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 py-3.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[E?m.jsx(hi,{className:"h-5 w-5 animate-spin"}):m.jsx(KQ,{}),m.jsx("span",{className:"font-semibold text-gray-700",children:"Google"})]}),m.jsxs("button",{type:"button",onClick:R,disabled:E||b,className:"flex items-center justify-center gap-2 border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 py-3.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[b?m.jsx(hi,{className:"h-5 w-5 animate-spin"}):m.jsx(WQ,{}),m.jsx("span",{className:"font-semibold text-gray-700",children:"Facebook"})]})]}),m.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Don't have an account?"," ",m.jsx("button",{type:"button",onClick:e,className:"text-primary-600 font-semibold hover:text-primary-700 transition-colors",children:"Sign up"})]})]})]})},JM=A.createContext(void 0),YQ=()=>{const t=A.useContext(JM);return t||{executeRecaptcha:async()=>"mock-token"}},XQ=({children:t})=>{const e=async()=>(console.log("ReCaptcha executed (mock)"),"mock-recaptcha-token");return m.jsx(JM.Provider,{value:{executeRecaptcha:e},children:t})};function ZM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JQ=ZM,eL=new cr("auth","Firebase",ZM());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp=new Dd("@firebase/auth");function ZQ(t,...e){Hp.logLevel<=fe.WARN&&Hp.warn(`Auth (${wi}): ${t}`,...e)}function Om(t,...e){Hp.logLevel<=fe.ERROR&&Hp.error(`Auth (${wi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t,...e){throw SE(t,...e)}function tL(t,...e){return SE(t,...e)}function nL(t,e,n){const i={...JQ(),[e]:n};return new cr("auth","Firebase",i).create(e,{appName:t.name})}function Vm(t){return nL(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function SE(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return eL.create(t,...e)}function Ie(t,e,...n){if(!t)throw SE(e,...n)}function wh(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Om(e),new Error(e)}function Gp(t,e){t||wh(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eY(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function iL(){return mR()==="http:"||mR()==="https:"}function mR(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tY(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iL()||Mb()||"connection"in navigator)?navigator.onLine:!0}function nY(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gp(n>e,"Short delay should be less than long delay!"),this.isMobile=_D()||Sg()}get(){return tY()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iY(t,e){Gp(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sY=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aY=new tf(3e4,6e4);function IE(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function nf(t,e,n,i,r={}){return sL(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const o=la({key:t.config.apiKey,...a}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return wD()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&lr(t.emulatorConfig.host)&&(c.credentials="include"),rL.fetch()(await aL(t,t.config.apiHost,n,o),c)})}async function sL(t,e,n){t._canInitEmulator=!1;const i={...rY,...e};try{const r=new oY(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Yf(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yf(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Yf(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Yf(t,"user-disabled",a);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw nL(t,h,c);fR(t,h)}}catch(r){if(r instanceof Ft)throw r;fR(t,"network-request-failed",{message:String(r)})}}async function aL(t,e,n,i){const r=`${e}${n}?${i}`,s=t,a=s.config.emulator?iY(t.config,r):`${t.config.apiScheme}://${r}`;return sY.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class oY{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(tL(this.auth,"network-request-failed")),aY.get())})}}function Yf(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=tL(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lY(t,e){return nf(t,"POST","/v1/accounts:delete",e)}async function $p(t,e){return nf(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cY(t,e=!1){const n=J(t),i=await n.getIdToken(e),r=oL(i);Ie(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:bh(Y_(r.auth_time)),issuedAtTime:bh(Y_(r.iat)),expirationTime:bh(Y_(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Y_(t){return Number(t)*1e3}function oL(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Om("JWT malformed, contained fewer than 3 sections"),null;try{const r=Eg(n);return r?JSON.parse(r):(Om("Failed to decode base64 JWT payload"),null)}catch(r){return Om("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function pR(t){const e=oL(t);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rw(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ft&&uY(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function uY({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hY{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=bh(this.lastLoginAt),this.creationTime=bh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kp(t){var d;const e=t.auth,n=await t.getIdToken(),i=await rw(t,$p(e,{idToken:n}));Ie(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const s=(d=r.providerUserInfo)!=null&&d.length?lL(r.providerUserInfo):[],a=fY(t.providerData,s),o=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),c=o?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new sw(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function dY(t){const e=J(t);await Kp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fY(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function lL(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mY(t,e){const n=await sL(t,{},async()=>{const i=la({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=await aL(t,r,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:i};return t.emulatorConfig&&lr(t.emulatorConfig.host)&&(l.credentials="include"),rL.fetch()(a,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pY(t,e){return nf(t,"POST","/v2/accounts:revokeToken",IE(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=pR(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await mY(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new Ml;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(Ie(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(Ie(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ml,this.toJSON())}_performRefresh(){return wh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(t,e){Ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qi{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new hY(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new sw(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await rw(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cY(this,e)}reload(){return dY(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Kp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ae(this.auth.app))return Promise.reject(Vm(this.auth));const e=await this.getIdToken();return await rw(this,lY(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:g,providerData:E,stsTokenManager:S}=n;Ie(d&&S,e,"internal-error");const b=Ml.fromJSON(this.name,S);Ie(typeof d=="string",e,"internal-error"),us(i,e.name),us(r,e.name),Ie(typeof f=="boolean",e,"internal-error"),Ie(typeof g=="boolean",e,"internal-error"),us(s,e.name),us(a,e.name),us(o,e.name),us(l,e.name),us(c,e.name),us(h,e.name);const y=new Qi({uid:d,auth:e,email:r,emailVerified:f,displayName:i,isAnonymous:g,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:b,createdAt:c,lastLoginAt:h});return E&&Array.isArray(E)&&(y.providerData=E.map(_=>({..._}))),l&&(y._redirectEventId=l),y}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ml;r.updateFromServerResponse(n);const s=new Qi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Kp(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Ie(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?lL(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),o=new Ml;o.updateFromIdToken(i);const l=new Qi({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new sw(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=new Map;function Ha(t){Gp(t instanceof Function,"Expected a class definition");let e=gR.get(t);return e?(Gp(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,gR.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cL.type="NONE";const yR=cL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(t,e,n){return`firebase:${t}:${e}:${n}`}class Ll{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=X_(this.userKey,r.apiKey,s),this.fullPersistenceKey=X_("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await $p(this.auth,{idToken:e}).catch(()=>{});return n?Qi._fromGetAccountInfoResponse(this.auth,n,e):null}return Qi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ll(Ha(yR),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||Ha(yR);const a=X_(i,e.config.apiKey,e.name);let o=null;for(const c of n)try{const h=await c._get(a);if(h){let d;if(typeof h=="string"){const f=await $p(e,{idToken:h}).catch(()=>{});if(!f)break;d=await Qi._fromGetAccountInfoResponse(e,f,h)}else d=Qi._fromJSON(e,h);c!==s&&(o=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ll(s,e,i):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new Ll(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vY(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gY(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bY(e))return"Blackberry";if(TY(e))return"Webos";if(yY(e))return"Safari";if((e.includes("chrome/")||_Y(e))&&!e.includes("edge/"))return"Chrome";if(wY(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function gY(t=Se()){return/firefox\//i.test(t)}function yY(t=Se()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _Y(t=Se()){return/crios\//i.test(t)}function vY(t=Se()){return/iemobile/i.test(t)}function wY(t=Se()){return/android/i.test(t)}function bY(t=Se()){return/blackberry/i.test(t)}function TY(t=Se()){return/webos/i.test(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(t,e=[]){let n;switch(t){case"Browser":n=_R(Se());break;case"Worker":n=`${_R(Se())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wi}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EY{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xY(t,e={}){return nf(t,"GET","/v2/passwordPolicy",IE(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SY=6;class IY{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??SY,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AY{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vR(this),this.idTokenSubscription=new vR(this),this.beforeStateQueue=new EY(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ha(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Ll.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $p(this,{idToken:e}),i=await Qi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Ae(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Kp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nY()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ae(this.app))return Promise.reject(Vm(this));const n=e?J(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ae(this.app)?Promise.reject(Vm(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ae(this.app)?Promise.reject(Vm(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ha(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xY(this),n=new IY(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cr("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await pY(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ha(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await Ll.create(this,[Ha(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(Ae(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&ZQ(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function RY(t){return J(t)}class vR{constructor(e){this.auth=e,this.observer=null,this.addObserver=Lb(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function CY(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ha);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NY(t,e){return nf(t,"POST","/v1/accounts:createAuthUri",IE(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PY(t,e){const n=iL()?eY():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:r}=await NY(J(t),i);return r||[]}new tf(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new tf(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new tf(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new tf(5e3,15e3);var wR="@firebase/auth",bR="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DY{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kY(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OY(t){Ci(new kn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=i.options;Ie(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uL(t)},c=new AY(i,r,s,l);return CY(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ci(new kn("auth-internal",e=>{const n=RY(e.getProvider("auth").getImmediate());return(i=>new DY(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_n(wR,bR,kY(t)),_n(wR,bR,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VY=5*60;gD("authIdTokenMaxAge");OY("Browser");const MY=({onLogin:t,onSuccess:e,onVerificationNeeded:n})=>{const[i,r]=A.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),[s,a]=A.useState(!1),[o,l]=A.useState(!1),[c,h]=A.useState(null),[d,f]=A.useState(!1),[g,E]=A.useState(!1),[S,b]=A.useState("idle"),[y,_]=A.useState({score:0,label:"",color:"bg-gray-200"}),[v,I]=A.useState({email:"",password:"",phone:""}),{register:k}=Xr(),{executeRecaptcha:O}=YQ();Hn.useEffect(()=>{window.debugRegister=k},[k]),Hn.useEffect(()=>{const P=setTimeout(async()=>{if(!i.email||!i.email.includes("@")){b("idle");return}b("checking");try{(await PY(nn,i.email)).length>0?(b("taken"),I(D=>({...D,email:"This email is already in use."}))):(b("available"),I(D=>({...D,email:""})))}catch(V){console.error("Error checking email:",V),b("idle")}},500);return()=>clearTimeout(P)},[i.email]);const T=C=>{let P=0;return C?(C.length>=6&&P++,C.length>=10&&P++,/[A-Z]/.test(C)&&P++,/[0-9]/.test(C)&&P++,/[^A-Za-z0-9]/.test(C)&&P++,P<=2?{score:P,label:"Weak",color:"bg-red-500"}:P<=4?{score:P,label:"Good",color:"bg-yellow-500"}:{score:P,label:"Strong",color:"bg-green-500"}):{score:0,label:"",color:"bg-gray-200"}},x=C=>{const P=C.target.value;r({...i,password:P}),_(T(P)),v.password&&I(V=>({...V,password:""}))};Hn.useEffect(()=>{if(!d)return;let C,P;return C=setInterval(async()=>{if(nn.currentUser)try{await nn.currentUser.reload();const D=["admin@rushcoffee.ph","sa@gmail.com"];(nn.currentUser.emailVerified||D.includes(nn.currentUser.email||""))&&(E(!0),clearInterval(C),clearTimeout(P),setTimeout(()=>{window.location.href="#/menu"},1e3))}catch(D){console.error("Error checking verification:",D)}},3e3),P=setTimeout(()=>{clearInterval(C)},6e5),()=>{clearInterval(C),clearTimeout(P)}},[d]);const R=async C=>{try{if(h(""),l(!0),i.password!==i.confirmPassword){I(ee=>({...ee,password:"Passwords do not match"})),l(!1);return}if(!i.email.endsWith("@gmail.com")){I(ee=>({...ee,email:"Please use a valid @gmail.com address"})),l(!1);return}if(S==="taken"){I(ee=>({...ee,email:"This email is already registered."})),l(!1);return}if(i.phone&&!/^(09|\+639)\d{9}$/.test(i.phone)){I(z=>({...z,phone:"Please enter a valid PH phone number (e.g., 09xxxxxxxxx)."})),l(!1);return}const P=await O();console.log("ReCaptcha token:",P);const V=i.email.trim();console.log(`Attempting registration with email: '${V}'`);const D=await k(V,i.password,i.firstName,i.lastName,i.phone),q=nn.currentUser;q&&(await q.sendEmailVerification(),console.log(" Verification email sent to:",V)),h(""),l(!1),f(!0)}catch(P){console.error("Registration error:",P);let V="Failed to create account. Please try again.",D=!1;P.code==="auth/email-already-in-use"?(I(q=>({...q,email:"This email is already registered. Please login or use a different email."})),D=!0):P.code==="auth/invalid-email"?(I(q=>({...q,email:"Please enter a valid email address."})),D=!0):P.code==="auth/weak-password"?(I(q=>({...q,password:"Password is too weak. Please use at least 6 characters."})),D=!0):P.code==="auth/missing-password"?(I(q=>({...q,password:"Please enter a password."})),D=!0):P.message&&(V=P.message.replace("Firebase: ","").replace(/\(auth\/.*\)\.?/,"").trim()),D||h(V),l(!1)}};return d?g?m.jsxs("div",{className:"w-full max-w-md mx-auto text-center py-8",children:[m.jsx("div",{className:"mb-6 flex justify-center",children:m.jsx("div",{className:"rounded-full bg-green-100 p-4 animate-pulse",children:m.jsx(o9,{className:"h-12 w-12 text-green-600"})})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Email Verified!"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Taking you to the menu..."}),m.jsx("div",{className:"flex justify-center",children:m.jsx(hi,{className:"h-8 w-8 animate-spin text-primary-600"})})]}):m.jsxs("div",{className:"w-full max-w-md mx-auto text-center py-8",children:[m.jsx("div",{className:"mb-6 flex justify-center",children:m.jsx("div",{className:"rounded-full bg-blue-100 p-4 animate-bounce-slow",children:m.jsx(qh,{className:"h-12 w-12 text-blue-600"})})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Check your email"}),m.jsxs("p",{className:"text-gray-600 mb-6",children:["We've sent a verification link to ",m.jsx("span",{className:"font-semibold text-gray-900",children:i.email})]}),m.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-5 mb-6",children:[m.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[m.jsx(hi,{className:"h-5 w-5 animate-spin text-blue-600"}),m.jsx("h4",{className:"font-semibold text-blue-900",children:"Waiting for verification..."})]}),m.jsx("p",{className:"text-sm text-blue-800",children:"Click the link in your email and we'll automatically log you in!"})]}),m.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4 mb-8 text-left",children:[m.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[m.jsx(ih,{className:"h-4 w-4 text-gray-600"}),"Next Steps:"]}),m.jsxs("ol",{className:"list-decimal list-inside text-sm text-gray-700 space-y-1.5 ml-1",children:[m.jsx("li",{children:"Check your email inbox (and spam folder)"}),m.jsx("li",{children:"Click the verification link"}),m.jsx("li",{children:"Close the verification tab and return here"}),m.jsx("li",{children:"You'll be automatically logged in!"})]})]}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Didn't receive the email? ",m.jsx("button",{className:"text-primary-600 font-medium hover:underline",children:"Resend"})]})]}):m.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx(Fr,{className:"mx-auto h-16 w-16 text-primary-600 mb-4"}),m.jsx("h2",{className:"font-display text-4xl font-bold text-gray-900",children:"Join Rush Coffee"}),m.jsxs("p",{className:"mt-2 text-gray-600 flex items-center justify-center gap-1",children:["Start skipping the line today ",m.jsx("span",{children:""})]})]}),m.jsxs("div",{onKeyDown:C=>C.key==="Enter"&&R(),className:"space-y-4",children:[c&&m.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-800 border border-red-200",children:[m.jsx(ih,{className:"h-5 w-5 flex-shrink-0"}),m.jsx("span",{children:c})]}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),m.jsxs("div",{className:"relative",children:[m.jsx(f0,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),m.jsx("input",{type:"text",required:!0,value:i.firstName,onChange:C=>r({...i,firstName:C.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter first name"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),m.jsxs("div",{className:"relative",children:[m.jsx(f0,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),m.jsx("input",{type:"text",required:!0,value:i.lastName,onChange:C=>r({...i,lastName:C.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter last name"})]})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),m.jsxs("div",{className:"relative",children:[m.jsx(qh,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),m.jsx("input",{type:"email",required:!0,value:i.email,onChange:C=>{const P=C.target.value;r({...i,email:P}),v.email&&I(V=>({...V,email:""})),P&&P.endsWith("@gmail.com")},className:`w-full pl-12 pr-4 py-3.5 bg-primary-50 border ${v.email?"border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-primary-500"} rounded-xl focus:outline-none focus:ring-2 focus:bg-white transition-all placeholder:text-gray-400`,placeholder:"name@gmail.com"}),S==="checking"&&m.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:m.jsx(hi,{className:"h-4 w-4 animate-spin text-gray-400"})})]}),v.email&&m.jsxs("p",{className:"text-xs text-red-600 mt-1 ml-1 flex items-center gap-1",children:[m.jsx(ih,{className:"h-3 w-3"}),v.email]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number (Optional)"}),m.jsxs("div",{className:"relative",children:[m.jsx(Nb,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),m.jsx("input",{type:"tel",name:"phone",autoComplete:"off",value:i.phone,onChange:C=>{r({...i,phone:C.target.value}),v.phone&&I(P=>({...P,phone:""}))},className:`w-full pl-12 pr-4 py-3.5 bg-primary-50 border ${v.phone?"border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-primary-500"} rounded-xl focus:outline-none focus:ring-2 focus:bg-white transition-all placeholder:text-gray-400`,placeholder:"09xxxxxxxxx"})]}),v.phone&&m.jsx("p",{className:"text-xs text-red-600 mt-1 ml-1",children:v.phone})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),m.jsxs("div",{className:"relative",children:[m.jsx(h0,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),m.jsx("input",{type:s?"text":"password",name:"password",autoComplete:"new-password",required:!0,value:i.password,onChange:x,className:`w-full pl-12 pr-12 py-3.5 bg-primary-50 border ${v.password?"border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-primary-500"} rounded-xl focus:outline-none focus:ring-2 focus:bg-white transition-all placeholder:text-gray-400`,placeholder:"Create a password"}),m.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:s?m.jsx(cD,{className:"h-5 w-5"}):m.jsx(uD,{className:"h-5 w-5"})})]}),v.password&&m.jsx("p",{className:"text-xs text-red-600 mt-1 ml-1",children:v.password}),i.password&&m.jsxs("div",{className:"mt-2",children:[m.jsx("div",{className:"flex justify-between items-center mb-1",children:m.jsx("span",{className:`text-xs font-medium ${y.color.replace("bg-","text-")}`,children:y.label})}),m.jsx("div",{className:"h-1.5 w-full bg-gray-200 rounded-full overflow-hidden",children:m.jsx("div",{className:`h-full ${y.color} transition-all duration-300`,style:{width:`${y.score/5*100}%`}})})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),m.jsxs("div",{className:"relative",children:[m.jsx(h0,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),m.jsx("input",{type:s?"text":"password",name:"confirmPassword",autoComplete:"new-password",required:!0,value:i.confirmPassword,onChange:C=>r({...i,confirmPassword:C.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Confirm your password"})]})]}),m.jsx("button",{type:"button",onClick:()=>R(),disabled:o,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3.5 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:o?m.jsxs("span",{className:"flex items-center justify-center gap-2",children:[m.jsx(hi,{className:"h-5 w-5 animate-spin"}),"Creating account..."]}):"Create Account"}),m.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Already have an account?"," ",m.jsx("button",{type:"button",onClick:t,className:"text-primary-600 font-semibold hover:text-primary-700 transition-colors",children:"Login"})]})]})]})},LY=({onBack:t,initialEmail:e=""})=>{const[n,i]=A.useState(e),[r,s]=A.useState(!1),[a,o]=A.useState(null),[l,c]=A.useState(null),{sendPasswordReset:h}=Xr(),d=async f=>{if(f.preventDefault(),!n){c("Email is required");return}s(!0),c(null),o(null),console.log("Attempting to send password reset email to:",n);try{await h(n),console.log("Password reset email sent successfully"),o("Password reset link sent! Please check your email.")}catch(g){console.error("Password reset error:",g),g.code==="auth/user-not-found"?c("No account found with this email address."):g.code==="auth/invalid-email"?c("Please enter a valid email address."):c(g.message||"Failed to send reset link")}finally{s(!1)}};return m.jsxs("form",{onSubmit:d,className:"space-y-4",children:[m.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter your email address and we'll send you a link to reset your password."}),l&&m.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-800",children:[m.jsx(ih,{className:"h-5 w-5 flex-shrink-0"}),m.jsx("span",{children:l})]}),a&&m.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-green-50 p-3 text-sm text-green-800",children:[m.jsx(lD,{className:"h-5 w-5 flex-shrink-0"}),m.jsx("span",{children:a})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email address"}),m.jsxs("div",{className:"relative",children:[m.jsx(qh,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),m.jsx("input",{type:"email",value:n,onChange:f=>i(f.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"admin@rushcoffee.ph"})]})]}),m.jsx("button",{type:"submit",disabled:r||!!a,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3 rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?m.jsxs("span",{className:"flex items-center justify-center gap-2",children:[m.jsx(hi,{className:"h-5 w-5 animate-spin"}),"Sending Link..."]}):a?"Link Sent":"Send Reset Link"}),m.jsxs("button",{type:"button",onClick:t,className:"w-full flex items-center justify-center gap-2 text-gray-600 hover:text-gray-900 font-medium py-2 transition-colors",children:[m.jsx(oD,{className:"h-4 w-4"}),"Back to Login"]})]})},UY=({isOpen:t,onClose:e,initialView:n="login",onVerificationNeeded:i,onAuthSuccess:r})=>{const[s,a]=Hn.useState(n),[o,l]=Hn.useState("");return Hn.useEffect(()=>{t&&(a(n),l(""))},[t,n]),m.jsxs(xE,{isOpen:t,onClose:e,hideHeader:!0,size:s==="register"?"xl":"md",children:[s==="login"&&m.jsx(QQ,{onForgotPassword:c=>{l(c),a("forgot-password")},onRegister:()=>a("register"),onSuccess:c=>r(c),onVerificationNeeded:(c,h,d)=>i==null?void 0:i(c,h,d)},"login"),s==="register"&&m.jsx(MY,{onLogin:()=>a("login"),onSuccess:()=>r(),onVerificationNeeded:(c,h,d)=>i==null?void 0:i(c,h,d)},"register"),s==="forgot-password"&&m.jsx(LY,{initialEmail:o,onBack:()=>a("login")},"forgot-password")]})},jY=({email:t,onVerify:e,onBack:n,onResend:i})=>{const[r,s]=A.useState(["","","","","",""]),[a,o]=A.useState(!1),[l,c]=A.useState(null),[h,d]=A.useState(30),f=A.useRef([]);A.useEffect(()=>{if(h>0){const _=setTimeout(()=>d(h-1),1e3);return()=>clearTimeout(_)}},[h]);const g=(_,v)=>{var k;if(v.length>1)return;const I=[...r];I[_]=v,s(I),v&&_<5&&((k=f.current[_+1])==null||k.focus())},E=(_,v)=>{var I;v.key==="Backspace"&&!r[_]&&_>0&&((I=f.current[_-1])==null||I.focus())},S=_=>{var k;_.preventDefault();const v=_.clipboardData.getData("text").slice(0,6).split(""),I=[...r];v.forEach((O,T)=>{T<6&&(I[T]=O)}),s(I),v.length===6&&((k=f.current[5])==null||k.focus())},b=async _=>{_.preventDefault();const v=r.join("");if(v.length!==6){c("Please enter the complete 6-digit code");return}o(!0),c(null);try{await e(v)}catch(I){c(I.message||"Verification failed"),o(!1)}},y=async()=>{h>0||(await i(),d(30))};return m.jsxs("form",{onSubmit:b,className:"space-y-8",children:[m.jsxs("div",{className:"text-center",children:[m.jsx(Fr,{className:"mx-auto h-16 w-16 text-primary-600 mb-4"}),m.jsx("h2",{className:"font-display text-3xl font-bold text-gray-900 mb-2",children:"Verify Your Email"}),m.jsx("p",{className:"text-gray-600 mb-2",children:"We've sent a verification code to"}),m.jsx("p",{className:"text-lg font-bold text-primary-700",children:t})]}),m.jsx("div",{className:"flex justify-center gap-3",children:r.map((_,v)=>m.jsx("input",{ref:I=>f.current[v]=I,type:"text",maxLength:1,value:_,onChange:I=>g(v,I.target.value),onKeyDown:I=>E(v,I),onPaste:S,className:"w-12 h-14 sm:w-14 sm:h-16 text-center text-2xl font-bold bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all placeholder:text-gray-300",placeholder:""},v))}),l&&m.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100",children:[m.jsx(H9,{className:"h-4 w-4"}),m.jsx("span",{children:l})]}),m.jsx("button",{type:"submit",disabled:a||r.join("").length!==6,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-4 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:a?m.jsxs("span",{className:"flex items-center justify-center gap-2",children:[m.jsx(hi,{className:"h-5 w-5 animate-spin"}),"Verifying..."]}):"Verify Account"}),m.jsxs("div",{className:"flex items-center justify-between text-sm pt-2",children:[m.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-2 text-gray-500 hover:text-gray-900 font-medium transition-colors group",children:[m.jsx(oD,{className:"h-4 w-4 transition-transform group-hover:-translate-x-1"}),"Back to Login"]}),m.jsxs("button",{type:"button",onClick:y,disabled:h>0,className:`flex items-center gap-2 font-medium transition-colors ${h>0?"text-gray-400 cursor-not-allowed":"text-primary-600 hover:text-primary-700"}`,children:[m.jsx(M9,{className:`h-4 w-4 ${h>0?"animate-spin":""}`}),h>0?`Resend in ${h}s`:"Resend Code"]})]})]})},zY=({isOpen:t,onClose:e,email:n,userId:i,onSuccess:r,onBackToLogin:s,onResend:a})=>{const{verifyEmailCode:o}=Xr(),l=async()=>{a?await a():(console.log("Resending code for user",i),await new Promise(h=>setTimeout(h,1e3)))},c=async h=>{if(!i)throw new Error("User ID is missing. Cannot verify.");if(await o(i,h))r();else throw new Error("Invalid verification code. Please check the console or try again.")};return m.jsx(xE,{isOpen:t,onClose:e,hideHeader:!0,size:"md",children:m.jsx(jY,{email:n,onVerify:c,onBack:s||e,onResend:l})})},AE=A.createContext({});function RE(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const fy=A.createContext(null),CE=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class FY extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function BY({children:t,isPresent:e}){const n=A.useId(),i=A.useRef(null),r=A.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=A.useContext(CE);return A.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:c}=r.current;if(e||!i.current||!a||!o)return;i.current.dataset.motionPopId=n;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),m.jsx(FY,{isPresent:e,childRef:i,sizeRef:r,children:A.cloneElement(t,{ref:i})})}const qY=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:a})=>{const o=RE(HY),l=A.useId(),c=A.useCallback(d=>{o.set(d,!0);for(const f of o.values())if(!f)return;i&&i()},[o,i]),h=A.useMemo(()=>({id:l,initial:e,isPresent:n,custom:r,onExitComplete:c,register:d=>(o.set(d,!1),()=>o.delete(d))}),s?[Math.random(),c]:[n,c]);return A.useMemo(()=>{o.forEach((d,f)=>o.set(f,!1))},[n]),A.useEffect(()=>{!n&&!o.size&&i&&i()},[n]),a==="popLayout"&&(t=m.jsx(BY,{isPresent:n,children:t})),m.jsx(fy.Provider,{value:h,children:t})};function HY(){return new Map}function hL(t=!0){const e=A.useContext(fy);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,s=A.useId();A.useEffect(()=>{t&&r(s)},[t]);const a=A.useCallback(()=>t&&i&&i(s),[s,i,t]);return!n&&i?[!1,a]:[!0]}const Xf=t=>t.key||"";function TR(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const NE=typeof window<"u",dL=NE?A.useLayoutEffect:A.useEffect,Wp=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:a=!1})=>{const[o,l]=hL(a),c=A.useMemo(()=>TR(t),[t]),h=a&&!o?[]:c.map(Xf),d=A.useRef(!0),f=A.useRef(c),g=RE(()=>new Map),[E,S]=A.useState(c),[b,y]=A.useState(c);dL(()=>{d.current=!1,f.current=c;for(let I=0;I<b.length;I++){const k=Xf(b[I]);h.includes(k)?g.delete(k):g.get(k)!==!0&&g.set(k,!1)}},[b,h.length,h.join("-")]);const _=[];if(c!==E){let I=[...c];for(let k=0;k<b.length;k++){const O=b[k],T=Xf(O);h.includes(T)||(I.splice(k,0,O),_.push(O))}s==="wait"&&_.length&&(I=_),y(TR(I)),S(c);return}const{forceRender:v}=A.useContext(AE);return m.jsx(m.Fragment,{children:b.map(I=>{const k=Xf(I),O=a&&!o?!1:c===b||h.includes(k),T=()=>{if(g.has(k))g.set(k,!0);else return;let x=!0;g.forEach(R=>{R||(x=!1)}),x&&(v==null||v(),y(f.current),a&&(l==null||l()),i&&i())};return m.jsx(qY,{isPresent:O,initial:!d.current||n?void 0:!1,custom:O?void 0:e,presenceAffectsLayout:r,mode:s,onExitComplete:O?void 0:T,children:I},k)})})},Yn=t=>t;let fL=Yn;function PE(t){let e;return()=>(e===void 0&&(e=t()),e)}const _c=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},Cr=t=>t*1e3,Nr=t=>t/1e3,GY={useManualTiming:!1};function $Y(t){let e=new Set,n=new Set,i=!1,r=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(c){s.has(c)&&(l.schedule(c),t()),c(a)}const l={schedule:(c,h=!1,d=!1)=>{const g=d&&i?e:n;return h&&s.add(c),g.has(c)||g.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(a=c,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(o),e.clear(),i=!1,r&&(r=!1,l.process(c))}};return l}const Jf=["read","resolveKeyframes","update","preRender","render","postRender"],KY=40;function mL(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=Jf.reduce((y,_)=>(y[_]=$Y(s),y),{}),{read:o,resolveKeyframes:l,update:c,preRender:h,render:d,postRender:f}=a,g=()=>{const y=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(y-r.timestamp,KY),1),r.timestamp=y,r.isProcessing=!0,o.process(r),l.process(r),c.process(r),h.process(r),d.process(r),f.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(g))},E=()=>{n=!0,i=!0,r.isProcessing||t(g)};return{schedule:Jf.reduce((y,_)=>{const v=a[_];return y[_]=(I,k=!1,O=!1)=>(n||E(),v.schedule(I,k,O)),y},{}),cancel:y=>{for(let _=0;_<Jf.length;_++)a[Jf[_]].cancel(y)},state:r,steps:a}}const{schedule:Ye,cancel:ra,state:qt,steps:J_}=mL(typeof requestAnimationFrame<"u"?requestAnimationFrame:Yn,!0),pL=A.createContext({strict:!1}),ER={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vc={};for(const t in ER)vc[t]={isEnabled:e=>ER[t].some(n=>!!e[n])};function WY(t){for(const e in t)vc[e]={...vc[e],...t[e]}}const QY=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||QY.has(t)}let gL=t=>!Qp(t);function YY(t){t&&(gL=e=>e.startsWith("on")?!Qp(e):t(e))}try{YY(require("@emotion/is-prop-valid").default)}catch{}function XY(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(gL(r)||n===!0&&Qp(r)||!e&&!Qp(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function JY(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const my=A.createContext({});function fd(t){return typeof t=="string"||Array.isArray(t)}function py(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const DE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],kE=["initial",...DE];function gy(t){return py(t.animate)||kE.some(e=>fd(t[e]))}function yL(t){return!!(gy(t)||t.variants)}function ZY(t,e){if(gy(t)){const{initial:n,animate:i}=t;return{initial:n===!1||fd(n)?n:void 0,animate:fd(i)?i:void 0}}return t.inherit!==!1?e:{}}function eX(t){const{initial:e,animate:n}=ZY(t,A.useContext(my));return A.useMemo(()=>({initial:e,animate:n}),[xR(e),xR(n)])}function xR(t){return Array.isArray(t)?t.join(" "):t}const tX=Symbol.for("motionComponentSymbol");function vl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function nX(t,e,n){return A.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):vl(n)&&(n.current=i))},[e])}const OE=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),iX="framerAppearId",_L="data-"+OE(iX),{schedule:VE}=mL(queueMicrotask,!1),vL=A.createContext({});function rX(t,e,n,i,r){var s,a;const{visualElement:o}=A.useContext(my),l=A.useContext(pL),c=A.useContext(fy),h=A.useContext(CE).reducedMotion,d=A.useRef(null);i=i||l.renderer,!d.current&&i&&(d.current=i(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const f=d.current,g=A.useContext(vL);f&&!f.projection&&r&&(f.type==="html"||f.type==="svg")&&sX(d.current,n,r,g);const E=A.useRef(!1);A.useInsertionEffect(()=>{f&&E.current&&f.update(n,c)});const S=n[_L],b=A.useRef(!!S&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,S))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,S)));return dL(()=>{f&&(E.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),VE.render(f.render),b.current&&f.animationState&&f.animationState.animateChanges())}),A.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,S)}),b.current=!1))}),f}function sX(t,e,n,i){const{layoutId:r,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:wL(t.parent)),t.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!a||o&&vl(o),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function wL(t){if(t)return t.options.allowProjection!==!1?t.projection:wL(t.parent)}function aX({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var s,a;t&&WY(t);function o(c,h){let d;const f={...A.useContext(CE),...c,layoutId:oX(c)},{isStatic:g}=f,E=eX(c),S=i(c,g);if(!g&&NE){lX();const b=cX(f);d=b.MeasureLayout,E.visualElement=rX(r,S,f,e,b.ProjectionNode)}return m.jsxs(my.Provider,{value:E,children:[d&&E.visualElement?m.jsx(d,{visualElement:E.visualElement,...f}):null,n(r,c,nX(S,E.visualElement,h),S,g,E.visualElement)]})}o.displayName=`motion.${typeof r=="string"?r:`create(${(a=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&a!==void 0?a:""})`}`;const l=A.forwardRef(o);return l[tX]=r,l}function oX({layoutId:t}){const e=A.useContext(AE).id;return e&&t!==void 0?e+"-"+t:t}function lX(t,e){A.useContext(pL).strict}function cX(t){const{drag:e,layout:n}=vc;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const uX=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ME(t){return typeof t!="string"||t.includes("-")?!1:!!(uX.indexOf(t)>-1||/[A-Z]/u.test(t))}function SR(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function LE(t,e,n,i){if(typeof e=="function"){const[r,s]=SR(i);e=e(n!==void 0?n:t.custom,r,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,s]=SR(i);e=e(n!==void 0?n:t.custom,r,s)}return e}const aw=t=>Array.isArray(t),hX=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),dX=t=>aw(t)?t[t.length-1]||0:t,on=t=>!!(t&&t.getVelocity);function Mm(t){const e=on(t)?t.get():t;return hX(e)?e.toValue():e}function fX({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,s){const a={latestValues:mX(i,r,s,t),renderState:e()};return n&&(a.onMount=o=>n({props:i,current:o,...a}),a.onUpdate=o=>n(o)),a}const bL=t=>(e,n)=>{const i=A.useContext(my),r=A.useContext(fy),s=()=>fX(t,e,i,r);return n?s():RE(s)};function mX(t,e,n,i){const r={},s=i(t,{});for(const f in s)r[f]=Mm(s[f]);let{initial:a,animate:o}=t;const l=gy(t),c=yL(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let h=n?n.initial===!1:!1;h=h||a===!1;const d=h?o:a;if(d&&typeof d!="boolean"&&!py(d)){const f=Array.isArray(d)?d:[d];for(let g=0;g<f.length;g++){const E=LE(t,f[g]);if(E){const{transitionEnd:S,transition:b,...y}=E;for(const _ in y){let v=y[_];if(Array.isArray(v)){const I=h?v.length-1:0;v=v[I]}v!==null&&(r[_]=v)}for(const _ in S)r[_]=S[_]}}}return r}const qc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ko=new Set(qc),TL=t=>e=>typeof e=="string"&&e.startsWith(t),EL=TL("--"),pX=TL("var(--"),UE=t=>pX(t)?gX.test(t.split("/*")[0].trim()):!1,gX=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,xL=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Br=(t,e,n)=>n>e?e:n<t?t:n,Hc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},md={...Hc,transform:t=>Br(0,1,t)},Zf={...Hc,default:1},rf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),hs=rf("deg"),tr=rf("%"),re=rf("px"),yX=rf("vh"),_X=rf("vw"),IR={...tr,parse:t=>tr.parse(t)/100,transform:t=>tr.transform(t*100)},vX={borderWidth:re,borderTopWidth:re,borderRightWidth:re,borderBottomWidth:re,borderLeftWidth:re,borderRadius:re,radius:re,borderTopLeftRadius:re,borderTopRightRadius:re,borderBottomRightRadius:re,borderBottomLeftRadius:re,width:re,maxWidth:re,height:re,maxHeight:re,top:re,right:re,bottom:re,left:re,padding:re,paddingTop:re,paddingRight:re,paddingBottom:re,paddingLeft:re,margin:re,marginTop:re,marginRight:re,marginBottom:re,marginLeft:re,backgroundPositionX:re,backgroundPositionY:re},wX={rotate:hs,rotateX:hs,rotateY:hs,rotateZ:hs,scale:Zf,scaleX:Zf,scaleY:Zf,scaleZ:Zf,skew:hs,skewX:hs,skewY:hs,distance:re,translateX:re,translateY:re,translateZ:re,x:re,y:re,z:re,perspective:re,transformPerspective:re,opacity:md,originX:IR,originY:IR,originZ:re},AR={...Hc,transform:Math.round},jE={...vX,...wX,zIndex:AR,size:re,fillOpacity:md,strokeOpacity:md,numOctaves:AR},bX={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TX=qc.length;function EX(t,e,n){let i="",r=!0;for(let s=0;s<TX;s++){const a=qc[s],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=xL(o,jE[a]);if(!l){r=!1;const h=bX[a]||a;i+=`${h}(${c}) `}n&&(e[a]=c)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function zE(t,e,n){const{style:i,vars:r,transformOrigin:s}=t;let a=!1,o=!1;for(const l in e){const c=e[l];if(ko.has(l)){a=!0;continue}else if(EL(l)){r[l]=c;continue}else{const h=xL(c,jE[l]);l.startsWith("origin")?(o=!0,s[l]=h):i[l]=h}}if(e.transform||(a||n?i.transform=EX(e,t.transform,n):i.transform&&(i.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:h=0}=s;i.transformOrigin=`${l} ${c} ${h}`}}const xX={offset:"stroke-dashoffset",array:"stroke-dasharray"},SX={offset:"strokeDashoffset",array:"strokeDasharray"};function IX(t,e,n=1,i=0,r=!0){t.pathLength=1;const s=r?xX:SX;t[s.offset]=re.transform(-i);const a=re.transform(e),o=re.transform(n);t[s.array]=`${a} ${o}`}function RR(t,e,n){return typeof t=="string"?t:re.transform(e+n*t)}function AX(t,e,n){const i=RR(e,t.x,t.width),r=RR(n,t.y,t.height);return`${i} ${r}`}function FE(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},h,d){if(zE(t,c,d),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:g,dimensions:E}=t;f.transform&&(E&&(g.transform=f.transform),delete f.transform),E&&(r!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=AX(E,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),i!==void 0&&(f.scale=i),a!==void 0&&IX(f,a,o,l,!1)}const BE=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),SL=()=>({...BE(),attrs:{}}),qE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function IL(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const s in n)t.style.setProperty(s,n[s])}const AL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function RL(t,e,n,i){IL(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(AL.has(r)?r:OE(r),e.attrs[r])}const Yp={};function RX(t){Object.assign(Yp,t)}function CL(t,{layout:e,layoutId:n}){return ko.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Yp[t]||t==="opacity")}function HE(t,e,n){var i;const{style:r}=t,s={};for(const a in r)(on(r[a])||e.style&&on(e.style[a])||CL(a,t)||((i=n==null?void 0:n.getValue(a))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[a]=r[a]);return s}function NL(t,e,n){const i=HE(t,e,n);for(const r in t)if(on(t[r])||on(e[r])){const s=qc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=t[r]}return i}function CX(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const CR=["x","y","width","height","cx","cy","r"],NX={useVisualState:bL({scrapeMotionValuesFromProps:NL,createRenderState:SL,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let s=!!t.drag;if(!s){for(const o in r)if(ko.has(o)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let o=0;o<CR.length;o++){const l=CR[o];t[l]!==e[l]&&(a=!0)}a&&Ye.read(()=>{CX(n,i),Ye.render(()=>{FE(i,r,qE(n.tagName),t.transformTemplate),RL(n,i)})})}})},PX={useVisualState:bL({scrapeMotionValuesFromProps:HE,createRenderState:BE})};function PL(t,e,n){for(const i in e)!on(e[i])&&!CL(i,n)&&(t[i]=e[i])}function DX({transformTemplate:t},e){return A.useMemo(()=>{const n=BE();return zE(n,e,t),Object.assign({},n.vars,n.style)},[e])}function kX(t,e){const n=t.style||{},i={};return PL(i,n,t),Object.assign(i,DX(t,e)),i}function OX(t,e){const n={},i=kX(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function VX(t,e,n,i){const r=A.useMemo(()=>{const s=SL();return FE(s,e,qE(i),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};PL(s,t.style,t),r.style={...s,...r.style}}return r}function MX(t=!1){return(n,i,r,{latestValues:s},a)=>{const l=(ME(n)?VX:OX)(i,s,a,n),c=XY(i,typeof n=="string",t),h=n!==A.Fragment?{...c,...l,ref:r}:{},{children:d}=i,f=A.useMemo(()=>on(d)?d.get():d,[d]);return A.createElement(n,{...h,children:f})}}function LX(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...ME(i)?NX:PX,preloadedFeatures:t,useRender:MX(r),createVisualElement:e,Component:i};return aX(a)}}function DL(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function yy(t,e,n){const i=t.getProps();return LE(i,e,n!==void 0?n:i.custom,t)}const UX=PE(()=>window.ScrollTimeline!==void 0);class jX{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(UX()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class zX extends jX{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function GE(t,e){return t?t[e]||t.default||t:void 0}const ow=2e4;function kL(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<ow;)e+=n,i=t.next(e);return e>=ow?1/0:e}function $E(t){return typeof t=="function"}function NR(t,e){t.timeline=e,t.onfinish=null}const KE=t=>Array.isArray(t)&&typeof t[0]=="number",FX={linearEasing:void 0};function BX(t,e){const n=PE(t);return()=>{var i;return(i=FX[e])!==null&&i!==void 0?i:n()}}const Xp=BX(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),OL=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let s=0;s<r;s++)i+=t(_c(0,r-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function VL(t){return!!(typeof t=="function"&&Xp()||!t||typeof t=="string"&&(t in lw||Xp())||KE(t)||Array.isArray(t)&&t.every(VL))}const zu=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,lw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zu([0,.65,.55,1]),circOut:zu([.55,0,1,.45]),backIn:zu([.31,.01,.66,-.59]),backOut:zu([.33,1.53,.69,.99])};function ML(t,e){if(t)return typeof t=="function"&&Xp()?OL(t,e):KE(t)?zu(t):Array.isArray(t)?t.map(n=>ML(n,e)||lw.easeOut):lw[t]}const xi={x:!1,y:!1};function LL(){return xi.x||xi.y}function qX(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const s=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function UL(t,e){const n=qX(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function PR(t){return e=>{e.pointerType==="touch"||LL()||t(e)}}function HX(t,e,n={}){const[i,r,s]=UL(t,n),a=PR(o=>{const{target:l}=o,c=e(o);if(typeof c!="function"||!l)return;const h=PR(d=>{c(d),l.removeEventListener("pointerleave",h)});l.addEventListener("pointerleave",h,r)});return i.forEach(o=>{o.addEventListener("pointerenter",a,r)}),s}const jL=(t,e)=>e?t===e?!0:jL(t,e.parentElement):!1,WE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,GX=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function $X(t){return GX.has(t.tagName)||t.tabIndex!==-1}const Fu=new WeakSet;function DR(t){return e=>{e.key==="Enter"&&t(e)}}function Z_(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const KX=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=DR(()=>{if(Fu.has(n))return;Z_(n,"down");const r=DR(()=>{Z_(n,"up")}),s=()=>Z_(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function kR(t){return WE(t)&&!LL()}function WX(t,e,n={}){const[i,r,s]=UL(t,n),a=o=>{const l=o.currentTarget;if(!kR(o)||Fu.has(l))return;Fu.add(l);const c=e(o),h=(g,E)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!kR(g)||!Fu.has(l))&&(Fu.delete(l),typeof c=="function"&&c(g,{success:E}))},d=g=>{h(g,n.useGlobalTarget||jL(l,g.target))},f=g=>{h(g,!1)};window.addEventListener("pointerup",d,r),window.addEventListener("pointercancel",f,r)};return i.forEach(o=>{!$X(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,r),o.addEventListener("focus",c=>KX(c,r),r)}),s}function QX(t){return t==="x"||t==="y"?xi[t]?null:(xi[t]=!0,()=>{xi[t]=!1}):xi.x||xi.y?null:(xi.x=xi.y=!0,()=>{xi.x=xi.y=!1})}const zL=new Set(["width","height","top","left","right","bottom",...qc]);let Lm;function YX(){Lm=void 0}const nr={now:()=>(Lm===void 0&&nr.set(qt.isProcessing||GY.useManualTiming?qt.timestamp:performance.now()),Lm),set:t=>{Lm=t,queueMicrotask(YX)}};function QE(t,e){t.indexOf(e)===-1&&t.push(e)}function YE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class XE{constructor(){this.subscriptions=[]}add(e){return QE(this.subscriptions,e),()=>YE(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let s=0;s<r;s++){const a=this.subscriptions[s];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function FL(t,e){return e?t*(1e3/e):0}const OR=30,XX=t=>!isNaN(parseFloat(t));class JX{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=nr.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=nr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=XX(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new XE);const i=this.events[e].add(n);return e==="change"?()=>{i(),Ye.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=nr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>OR)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,OR);return FL(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pd(t,e){return new JX(t,e)}function ZX(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,pd(n))}function eJ(t,e){const n=yy(t,e);let{transitionEnd:i={},transition:r={},...s}=n||{};s={...s,...i};for(const a in s){const o=dX(s[a]);ZX(t,a,o)}}function tJ(t){return!!(on(t)&&t.add)}function cw(t,e){const n=t.getValue("willChange");if(tJ(n))return n.add(e)}function BL(t){return t.props[_L]}const qL=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,nJ=1e-7,iJ=12;function rJ(t,e,n,i,r){let s,a,o=0;do a=e+(n-e)/2,s=qL(a,i,r)-t,s>0?n=a:e=a;while(Math.abs(s)>nJ&&++o<iJ);return a}function sf(t,e,n,i){if(t===e&&n===i)return Yn;const r=s=>rJ(s,0,1,t,n);return s=>s===0||s===1?s:qL(r(s),e,i)}const HL=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,GL=t=>e=>1-t(1-e),$L=sf(.33,1.53,.69,.99),JE=GL($L),KL=HL(JE),WL=t=>(t*=2)<1?.5*JE(t):.5*(2-Math.pow(2,-10*(t-1))),ZE=t=>1-Math.sin(Math.acos(t)),QL=GL(ZE),YL=HL(ZE),XL=t=>/^0[^.\s]+$/u.test(t);function sJ(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||XL(t):!0}const Th=t=>Math.round(t*1e5)/1e5,ex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function aJ(t){return t==null}const oJ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,tx=(t,e)=>n=>!!(typeof n=="string"&&oJ.test(n)&&n.startsWith(t)||e&&!aJ(n)&&Object.prototype.hasOwnProperty.call(n,e)),JL=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,s,a,o]=i.match(ex);return{[t]:parseFloat(r),[e]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},lJ=t=>Br(0,255,t),ev={...Hc,transform:t=>Math.round(lJ(t))},Ga={test:tx("rgb","red"),parse:JL("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+ev.transform(t)+", "+ev.transform(e)+", "+ev.transform(n)+", "+Th(md.transform(i))+")"};function cJ(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const uw={test:tx("#"),parse:cJ,transform:Ga.transform},wl={test:tx("hsl","hue"),parse:JL("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+tr.transform(Th(e))+", "+tr.transform(Th(n))+", "+Th(md.transform(i))+")"},tn={test:t=>Ga.test(t)||uw.test(t)||wl.test(t),parse:t=>Ga.test(t)?Ga.parse(t):wl.test(t)?wl.parse(t):uw.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ga.transform(t):wl.transform(t)},uJ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function hJ(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(ex))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(uJ))===null||n===void 0?void 0:n.length)||0)>0}const ZL="number",e5="color",dJ="var",fJ="var(",VR="${}",mJ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function gd(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let s=0;const o=e.replace(mJ,l=>(tn.test(l)?(i.color.push(s),r.push(e5),n.push(tn.parse(l))):l.startsWith(fJ)?(i.var.push(s),r.push(dJ),n.push(l)):(i.number.push(s),r.push(ZL),n.push(parseFloat(l))),++s,VR)).split(VR);return{values:n,split:o,indexes:i,types:r}}function t5(t){return gd(t).values}function n5(t){const{split:e,types:n}=gd(t),i=e.length;return r=>{let s="";for(let a=0;a<i;a++)if(s+=e[a],r[a]!==void 0){const o=n[a];o===ZL?s+=Th(r[a]):o===e5?s+=tn.transform(r[a]):s+=r[a]}return s}}const pJ=t=>typeof t=="number"?0:t;function gJ(t){const e=t5(t);return n5(t)(e.map(pJ))}const sa={test:hJ,parse:t5,createTransformer:n5,getAnimatableNone:gJ},yJ=new Set(["brightness","contrast","saturate","opacity"]);function _J(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(ex)||[];if(!i)return t;const r=n.replace(i,"");let s=yJ.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+r+")"}const vJ=/\b([a-z-]*)\(.*?\)/gu,hw={...sa,getAnimatableNone:t=>{const e=t.match(vJ);return e?e.map(_J).join(" "):t}},wJ={...jE,color:tn,backgroundColor:tn,outlineColor:tn,fill:tn,stroke:tn,borderColor:tn,borderTopColor:tn,borderRightColor:tn,borderBottomColor:tn,borderLeftColor:tn,filter:hw,WebkitFilter:hw},nx=t=>wJ[t];function i5(t,e){let n=nx(t);return n!==hw&&(n=sa),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const bJ=new Set(["auto","none","0"]);function TJ(t,e,n){let i=0,r;for(;i<t.length&&!r;){const s=t[i];typeof s=="string"&&!bJ.has(s)&&gd(s).values.length&&(r=t[i]),i++}if(r&&n)for(const s of e)t[s]=i5(n,r)}const MR=t=>t===Hc||t===re,LR=(t,e)=>parseFloat(t.split(", ")[e]),UR=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return LR(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?LR(s[1],t):0}},EJ=new Set(["x","y","z"]),xJ=qc.filter(t=>!EJ.has(t));function SJ(t){const e=[];return xJ.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const wc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:UR(4,13),y:UR(5,14)};wc.translateX=wc.x;wc.translateY=wc.y;const to=new Set;let dw=!1,fw=!1;function r5(){if(fw){const t=Array.from(to).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=SJ(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([s,a])=>{var o;(o=i.getValue(s))===null||o===void 0||o.set(a)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}fw=!1,dw=!1,to.forEach(t=>t.complete()),to.clear()}function s5(){to.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(fw=!0)})}function IJ(){s5(),r5()}class ix{constructor(e,n,i,r,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(to.add(this),dw||(dw=!0,Ye.read(s5),Ye.resolveKeyframes(r5))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=r==null?void 0:r.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&n){const l=i.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),r&&a===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),to.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,to.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const a5=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),AJ=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function RJ(t){const e=AJ.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function o5(t,e,n=1){const[i,r]=RJ(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const a=s.trim();return a5(a)?parseFloat(a):a}return UE(r)?o5(r,e,n+1):r}const l5=t=>e=>e.test(t),CJ={test:t=>t==="auto",parse:t=>t},c5=[Hc,re,tr,hs,_X,yX,CJ],jR=t=>c5.find(l5(t));class u5 extends ix{constructor(e,n,i,r,s){super(e,n,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),UE(c))){const h=o5(c,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!zL.has(i)||e.length!==2)return;const[r,s]=e,a=jR(r),o=jR(s);if(a!==o)if(MR(a)&&MR(o))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)sJ(e[r])&&i.push(r);i.length&&TJ(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wc[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const s=n.getValue(i);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=wc[i](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const zR=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(sa.test(t)||t==="0")&&!t.startsWith("url("));function NJ(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function PJ(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=zR(r,e),o=zR(s,e);return!a||!o?!1:NJ(t)||(n==="spring"||$E(n))&&i}const DJ=t=>t!==null;function _y(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(DJ),s=e&&n!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const kJ=40;class h5{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=nr.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>kJ?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&IJ(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=nr.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:c}=this.options;if(!c&&!PJ(e,i,r,s))if(a)this.options.duration=0;else{l&&l(_y(e,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const rt=(t,e,n)=>t+(e-t)*n;function tv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function OJ({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,s=0,a=0;if(!e)r=s=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;r=tv(l,o,t+1/3),s=tv(l,o,t),a=tv(l,o,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:i}}function Jp(t,e){return n=>n>0?e:t}const nv=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},VJ=[uw,Ga,wl],MJ=t=>VJ.find(e=>e.test(t));function FR(t){const e=MJ(t);if(!e)return!1;let n=e.parse(t);return e===wl&&(n=OJ(n)),n}const BR=(t,e)=>{const n=FR(t),i=FR(e);if(!n||!i)return Jp(t,e);const r={...n};return s=>(r.red=nv(n.red,i.red,s),r.green=nv(n.green,i.green,s),r.blue=nv(n.blue,i.blue,s),r.alpha=rt(n.alpha,i.alpha,s),Ga.transform(r))},LJ=(t,e)=>n=>e(t(n)),af=(...t)=>t.reduce(LJ),mw=new Set(["none","hidden"]);function UJ(t,e){return mw.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function jJ(t,e){return n=>rt(t,e,n)}function rx(t){return typeof t=="number"?jJ:typeof t=="string"?UE(t)?Jp:tn.test(t)?BR:BJ:Array.isArray(t)?d5:typeof t=="object"?tn.test(t)?BR:zJ:Jp}function d5(t,e){const n=[...t],i=n.length,r=t.map((s,a)=>rx(s)(s,e[a]));return s=>{for(let a=0;a<i;a++)n[a]=r[a](s);return n}}function zJ(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=rx(t[r])(t[r],e[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}}function FJ(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][r[a]],l=(n=t.values[o])!==null&&n!==void 0?n:0;i[s]=l,r[a]++}return i}const BJ=(t,e)=>{const n=sa.createTransformer(e),i=gd(t),r=gd(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?mw.has(t)&&!r.values.length||mw.has(e)&&!i.values.length?UJ(t,e):af(d5(FJ(i,r),r.values),n):Jp(t,e)};function f5(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?rt(t,e,n):rx(t)(t,e)}const qJ=5;function m5(t,e,n){const i=Math.max(e-qJ,0);return FL(n-t(i),e-i)}const ct={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},iv=.001;function HJ({duration:t=ct.duration,bounce:e=ct.bounce,velocity:n=ct.velocity,mass:i=ct.mass}){let r,s,a=1-e;a=Br(ct.minDamping,ct.maxDamping,a),t=Br(ct.minDuration,ct.maxDuration,Nr(t)),a<1?(r=c=>{const h=c*a,d=h*t,f=h-n,g=pw(c,a),E=Math.exp(-d);return iv-f/g*E},s=c=>{const d=c*a*t,f=d*n+n,g=Math.pow(a,2)*Math.pow(c,2)*t,E=Math.exp(-d),S=pw(Math.pow(c,2),a);return(-r(c)+iv>0?-1:1)*((f-g)*E)/S}):(r=c=>{const h=Math.exp(-c*t),d=(c-n)*t+1;return-iv+h*d},s=c=>{const h=Math.exp(-c*t),d=(n-c)*(t*t);return h*d});const o=5/t,l=$J(r,s,o);if(t=Cr(t),isNaN(l))return{stiffness:ct.stiffness,damping:ct.damping,duration:t};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:a*2*Math.sqrt(i*c),duration:t}}}const GJ=12;function $J(t,e,n){let i=n;for(let r=1;r<GJ;r++)i=i-t(i)/e(i);return i}function pw(t,e){return t*Math.sqrt(1-e*e)}const KJ=["duration","bounce"],WJ=["stiffness","damping","mass"];function qR(t,e){return e.some(n=>t[n]!==void 0)}function QJ(t){let e={velocity:ct.velocity,stiffness:ct.stiffness,damping:ct.damping,mass:ct.mass,isResolvedFromDuration:!1,...t};if(!qR(t,WJ)&&qR(t,KJ))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,s=2*Br(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:ct.mass,stiffness:r,damping:s}}else{const n=HJ(t);e={...e,...n,mass:ct.mass},e.isResolvedFromDuration=!0}return e}function p5(t=ct.visualDuration,e=ct.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:h,duration:d,velocity:f,isResolvedFromDuration:g}=QJ({...n,velocity:-Nr(n.velocity||0)}),E=f||0,S=c/(2*Math.sqrt(l*h)),b=a-s,y=Nr(Math.sqrt(l/h)),_=Math.abs(b)<5;i||(i=_?ct.restSpeed.granular:ct.restSpeed.default),r||(r=_?ct.restDelta.granular:ct.restDelta.default);let v;if(S<1){const k=pw(y,S);v=O=>{const T=Math.exp(-S*y*O);return a-T*((E+S*y*b)/k*Math.sin(k*O)+b*Math.cos(k*O))}}else if(S===1)v=k=>a-Math.exp(-y*k)*(b+(E+y*b)*k);else{const k=y*Math.sqrt(S*S-1);v=O=>{const T=Math.exp(-S*y*O),x=Math.min(k*O,300);return a-T*((E+S*y*b)*Math.sinh(x)+k*b*Math.cosh(x))/k}}const I={calculatedDuration:g&&d||null,next:k=>{const O=v(k);if(g)o.done=k>=d;else{let T=0;S<1&&(T=k===0?Cr(E):m5(v,k,O));const x=Math.abs(T)<=i,R=Math.abs(a-O)<=r;o.done=x&&R}return o.value=o.done?a:O,o},toString:()=>{const k=Math.min(kL(I),ow),O=OL(T=>I.next(k*T).value,k,30);return k+"ms "+O}};return I}function HR({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:h}){const d=t[0],f={done:!1,value:d},g=x=>o!==void 0&&x<o||l!==void 0&&x>l,E=x=>o===void 0?l:l===void 0||Math.abs(o-x)<Math.abs(l-x)?o:l;let S=n*e;const b=d+S,y=a===void 0?b:a(b);y!==b&&(S=y-d);const _=x=>-S*Math.exp(-x/i),v=x=>y+_(x),I=x=>{const R=_(x),C=v(x);f.done=Math.abs(R)<=c,f.value=f.done?y:C};let k,O;const T=x=>{g(f.value)&&(k=x,O=p5({keyframes:[f.value,E(f.value)],velocity:m5(v,x,f.value),damping:r,stiffness:s,restDelta:c,restSpeed:h}))};return T(0),{calculatedDuration:null,next:x=>{let R=!1;return!O&&k===void 0&&(R=!0,I(x),T(x)),k!==void 0&&x>=k?O.next(x-k):(!R&&I(x),f)}}}const YJ=sf(.42,0,1,1),XJ=sf(0,0,.58,1),g5=sf(.42,0,.58,1),JJ=t=>Array.isArray(t)&&typeof t[0]!="number",ZJ={linear:Yn,easeIn:YJ,easeInOut:g5,easeOut:XJ,circIn:ZE,circInOut:YL,circOut:QL,backIn:JE,backInOut:KL,backOut:$L,anticipate:WL},GR=t=>{if(KE(t)){fL(t.length===4);const[e,n,i,r]=t;return sf(e,n,i,r)}else if(typeof t=="string")return ZJ[t];return t};function eZ(t,e,n){const i=[],r=n||f5,s=t.length-1;for(let a=0;a<s;a++){let o=r(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Yn:e;o=af(l,o)}i.push(o)}return i}function tZ(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const s=t.length;if(fL(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=eZ(e,i,r),l=o.length,c=h=>{if(a&&h<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(h<t[d+1]);d++);const f=_c(t[d],t[d+1],h);return o[d](f)};return n?h=>c(Br(t[0],t[s-1],h)):c}function nZ(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=_c(0,e,i);t.push(rt(n,1,r))}}function iZ(t){const e=[0];return nZ(e,t.length-1),e}function rZ(t,e){return t.map(n=>n*e)}function sZ(t,e){return t.map(()=>e||g5).splice(0,t.length-1)}function Zp({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=JJ(i)?i.map(GR):GR(i),s={done:!1,value:e[0]},a=rZ(n&&n.length===e.length?n:iZ(e),t),o=tZ(a,e,{ease:Array.isArray(r)?r:sZ(e,r)});return{calculatedDuration:t,next:l=>(s.value=o(l),s.done=l>=t,s)}}const aZ=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ye.update(e,!0),stop:()=>ra(e),now:()=>qt.isProcessing?qt.timestamp:nr.now()}},oZ={decay:HR,inertia:HR,tween:Zp,keyframes:Zp,spring:p5},lZ=t=>t/100;class sx extends h5{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:i,element:r,keyframes:s}=this.options,a=(r==null?void 0:r.KeyframeResolver)||ix,o=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new a(s,o,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:a=0}=this.options,o=$E(n)?n:oZ[n]||Zp;let l,c;o!==Zp&&typeof e[0]!="number"&&(l=af(lZ,f5(e[0],e[1])),e=[0,100]);const h=o({...this.options,keyframes:e});s==="mirror"&&(c=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=kL(h));const{calculatedDuration:d}=h,f=d+r,g=f*(i+1)-r;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:g}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:x}=this.options;return{done:!0,value:x[x.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:c,totalDuration:h,resolvedDuration:d}=i;if(this.startTime===null)return s.next(0);const{delay:f,repeat:g,repeatType:E,repeatDelay:S,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-f*(this.speed>=0?1:-1),_=this.speed>=0?y<0:y>h;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let v=this.currentTime,I=s;if(g){const x=Math.min(this.currentTime,h)/d;let R=Math.floor(x),C=x%1;!C&&x>=1&&(C=1),C===1&&R--,R=Math.min(R,g+1),!!(R%2)&&(E==="reverse"?(C=1-C,S&&(C-=S/d)):E==="mirror"&&(I=a)),v=Br(0,1,C)*d}const k=_?{done:!1,value:l[0]}:I.next(v);o&&(k.value=o(k.value));let{done:O}=k;!_&&c!==null&&(O=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return T&&r!==void 0&&(k.value=_y(l,this.options,r)),b&&b(k.value),T&&this.finish(),k}get duration(){const{resolved:e}=this;return e?Nr(e.calculatedDuration):0}get time(){return Nr(this.currentTime)}set time(e){e=Cr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Nr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=aZ,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const cZ=new Set(["opacity","clipPath","filter","transform"]);function uZ(t,e,n,{delay:i=0,duration:r=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const h=ML(o,r);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:i,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const hZ=PE(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),eg=10,dZ=2e4;function fZ(t){return $E(t.type)||t.type==="spring"||!VL(t.ease)}function mZ(t,e){const n=new sx({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let s=0;for(;!i.done&&s<dZ;)i=n.sample(s),r.push(i.value),s+=eg;return{times:void 0,keyframes:r,duration:s-eg,ease:"linear"}}const y5={anticipate:WL,backInOut:KL,circInOut:YL};function pZ(t){return t in y5}class $R extends h5{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new u5(s,(a,o)=>this.onKeyframesResolved(a,o),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:s,type:a,motionValue:o,name:l,startTime:c}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&Xp()&&pZ(s)&&(s=y5[s]),fZ(this.options)){const{onComplete:d,onUpdate:f,motionValue:g,element:E,...S}=this.options,b=mZ(e,S);e=b.keyframes,e.length===1&&(e[1]=e[0]),i=b.duration,r=b.times,s=b.ease,a="keyframes"}const h=uZ(o.owner.current,l,e,{...this.options,duration:i,times:r,ease:s});return h.startTime=c??this.calcStartTime(),this.pendingTimeline?(NR(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:d}=this.options;o.set(_y(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:i,times:r,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Nr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Nr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=Cr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Yn;const{animation:i}=n;NR(i,e)}return Yn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:s,ease:a,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:d,element:f,...g}=this.options,E=new sx({...g,keyframes:i,duration:r,type:s,ease:a,times:o,isGenerator:!0}),S=Cr(this.time);c.setWithVelocity(E.sample(S-eg).value,E.sample(S).value,eg)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:s,damping:a,type:o}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return hZ()&&i&&cZ.has(i)&&!l&&!c&&!r&&s!=="mirror"&&a!==0&&o!=="inertia"}}const gZ={type:"spring",stiffness:500,damping:25,restSpeed:10},yZ=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),_Z={type:"keyframes",duration:.8},vZ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wZ=(t,{keyframes:e})=>e.length>2?_Z:ko.has(t)?t.startsWith("scale")?yZ(e[1]):gZ:vZ;function bZ({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const ax=(t,e,n,i={},r,s)=>a=>{const o=GE(i,t)||{},l=o.delay||i.delay||0;let{elapsed:c=0}=i;c=c-Cr(l);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:f=>{e.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:s?void 0:r};bZ(o)||(h={...h,...wZ(t,h)}),h.duration&&(h.duration=Cr(h.duration)),h.repeatDelay&&(h.repeatDelay=Cr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const f=_y(h.keyframes,o);if(f!==void 0)return Ye.update(()=>{h.onUpdate(f),h.onComplete()}),new zX([])}return!s&&$R.supports(h)?new $R(h):new sx(h)};function TZ({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function _5(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var s;let{transition:a=t.getDefaultTransition(),transitionEnd:o,...l}=e;i&&(a=i);const c=[],h=r&&t.animationState&&t.animationState.getState()[r];for(const d in l){const f=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),g=l[d];if(g===void 0||h&&TZ(h,d))continue;const E={delay:n,...GE(a||{},d)};let S=!1;if(window.MotionHandoffAnimation){const y=BL(t);if(y){const _=window.MotionHandoffAnimation(y,d,Ye);_!==null&&(E.startTime=_,S=!0)}}cw(t,d),f.start(ax(d,f,g,t.shouldReduceMotion&&zL.has(d)?{type:!1}:E,t,S));const b=f.animation;b&&c.push(b)}return o&&Promise.all(c).then(()=>{Ye.update(()=>{o&&eJ(t,o)})}),c}function gw(t,e,n={}){var i;const r=yy(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(_5(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:f}=s;return EZ(t,e,h+c,d,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,h]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>h())}else return Promise.all([a(),o(n.delay)])}function EZ(t,e,n=0,i=0,r=1,s){const a=[],o=(t.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>o-c*i;return Array.from(t.variantChildren).sort(xZ).forEach((c,h)=>{c.notify("AnimationStart",e),a.push(gw(c,e,{...s,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(a)}function xZ(t,e){return t.sortNodePosition(e)}function SZ(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>gw(t,s,n));i=Promise.all(r)}else if(typeof e=="string")i=gw(t,e,n);else{const r=typeof e=="function"?yy(t,e,n.custom):e;i=Promise.all(_5(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const IZ=kE.length;function v5(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?v5(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<IZ;n++){const i=kE[n],r=t.props[i];(fd(r)||r===!1)&&(e[i]=r)}return e}const AZ=[...DE].reverse(),RZ=DE.length;function CZ(t){return e=>Promise.all(e.map(({animation:n,options:i})=>SZ(t,n,i)))}function NZ(t){let e=CZ(t),n=KR(),i=!0;const r=l=>(c,h)=>{var d;const f=yy(t,h,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:g,transitionEnd:E,...S}=f;c={...c,...S,...E}}return c};function s(l){e=l(t)}function a(l){const{props:c}=t,h=v5(t.parent)||{},d=[],f=new Set;let g={},E=1/0;for(let b=0;b<RZ;b++){const y=AZ[b],_=n[y],v=c[y]!==void 0?c[y]:h[y],I=fd(v),k=y===l?_.isActive:null;k===!1&&(E=b);let O=v===h[y]&&v!==c[y]&&I;if(O&&i&&t.manuallyAnimateOnMount&&(O=!1),_.protectedKeys={...g},!_.isActive&&k===null||!v&&!_.prevProp||py(v)||typeof v=="boolean")continue;const T=PZ(_.prevProp,v);let x=T||y===l&&_.isActive&&!O&&I||b>E&&I,R=!1;const C=Array.isArray(v)?v:[v];let P=C.reduce(r(y),{});k===!1&&(P={});const{prevResolvedValues:V={}}=_,D={...V,...P},q=Q=>{x=!0,f.has(Q)&&(R=!0,f.delete(Q)),_.needsAnimating[Q]=!0;const X=t.getValue(Q);X&&(X.liveStyle=!1)};for(const Q in D){const X=P[Q],ie=V[Q];if(g.hasOwnProperty(Q))continue;let le=!1;aw(X)&&aw(ie)?le=!DL(X,ie):le=X!==ie,le?X!=null?q(Q):f.add(Q):X!==void 0&&f.has(Q)?q(Q):_.protectedKeys[Q]=!0}_.prevProp=v,_.prevResolvedValues=P,_.isActive&&(g={...g,...P}),i&&t.blockInitialAnimation&&(x=!1),x&&(!(O&&T)||R)&&d.push(...C.map(Q=>({animation:Q,options:{type:y}})))}if(f.size){const b={};f.forEach(y=>{const _=t.getBaseTarget(y),v=t.getValue(y);v&&(v.liveStyle=!0),b[y]=_??null}),d.push({animation:b})}let S=!!d.length;return i&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(S=!1),i=!1,S?e(d):Promise.resolve()}function o(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(f=>{var g;return(g=f.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),n[l].isActive=c;const d=a(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=KR(),i=!0}}}function PZ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!DL(e,t):!1}function Sa(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function KR(){return{animate:Sa(!0),whileInView:Sa(),whileHover:Sa(),whileTap:Sa(),whileDrag:Sa(),whileFocus:Sa(),exit:Sa()}}class ga{constructor(e){this.isMounted=!1,this.node=e}update(){}}class DZ extends ga{constructor(e){super(e),e.animationState||(e.animationState=NZ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();py(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let kZ=0;class OZ extends ga{constructor(){super(...arguments),this.id=kZ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const VZ={animation:{Feature:DZ},exit:{Feature:OZ}};function yd(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function of(t){return{point:{x:t.pageX,y:t.pageY}}}const MZ=t=>e=>WE(e)&&t(e,of(e));function Eh(t,e,n,i){return yd(t,e,MZ(n),i)}const WR=(t,e)=>Math.abs(t-e);function LZ(t,e){const n=WR(t.x,e.x),i=WR(t.y,e.y);return Math.sqrt(n**2+i**2)}class w5{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=sv(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=LZ(d.offset,{x:0,y:0})>=3;if(!f&&!g)return;const{point:E}=d,{timestamp:S}=qt;this.history.push({...E,timestamp:S});const{onStart:b,onMove:y}=this.handlers;f||(b&&b(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=rv(f,this.transformPagePoint),Ye.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:g,onSessionEnd:E,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=sv(d.type==="pointercancel"?this.lastMoveEventInfo:rv(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(d,b),E&&E(d,b)},!WE(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=of(e),o=rv(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=qt;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,sv(o,this.history)),this.removeListeners=af(Eh(this.contextWindow,"pointermove",this.handlePointerMove),Eh(this.contextWindow,"pointerup",this.handlePointerUp),Eh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ra(this.updatePoint)}}function rv(t,e){return e?{point:e(t.point)}:t}function QR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function sv({point:t},e){return{point:t,delta:QR(t,b5(e)),offset:QR(t,UZ(e)),velocity:jZ(e,.1)}}function UZ(t){return t[0]}function b5(t){return t[t.length-1]}function jZ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=b5(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Cr(e)));)n--;if(!i)return{x:0,y:0};const s=Nr(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const a={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const T5=1e-4,zZ=1-T5,FZ=1+T5,E5=.01,BZ=0-E5,qZ=0+E5;function ei(t){return t.max-t.min}function HZ(t,e,n){return Math.abs(t-e)<=n}function YR(t,e,n,i=.5){t.origin=i,t.originPoint=rt(e.min,e.max,t.origin),t.scale=ei(n)/ei(e),t.translate=rt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=zZ&&t.scale<=FZ||isNaN(t.scale))&&(t.scale=1),(t.translate>=BZ&&t.translate<=qZ||isNaN(t.translate))&&(t.translate=0)}function xh(t,e,n,i){YR(t.x,e.x,n.x,i?i.originX:void 0),YR(t.y,e.y,n.y,i?i.originY:void 0)}function XR(t,e,n){t.min=n.min+e.min,t.max=t.min+ei(e)}function GZ(t,e,n){XR(t.x,e.x,n.x),XR(t.y,e.y,n.y)}function JR(t,e,n){t.min=e.min-n.min,t.max=t.min+ei(e)}function Sh(t,e,n){JR(t.x,e.x,n.x),JR(t.y,e.y,n.y)}function $Z(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?rt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?rt(n,t,i.max):Math.min(t,n)),t}function ZR(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function KZ(t,{top:e,left:n,bottom:i,right:r}){return{x:ZR(t.x,n,r),y:ZR(t.y,e,i)}}function eC(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function WZ(t,e){return{x:eC(t.x,e.x),y:eC(t.y,e.y)}}function QZ(t,e){let n=.5;const i=ei(t),r=ei(e);return r>i?n=_c(e.min,e.max-i,t.min):i>r&&(n=_c(t.min,t.max-r,e.min)),Br(0,1,n)}function YZ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const yw=.35;function XZ(t=yw){return t===!1?t=0:t===!0&&(t=yw),{x:tC(t,"left","right"),y:tC(t,"top","bottom")}}function tC(t,e,n){return{min:nC(t,e),max:nC(t,n)}}function nC(t,e){return typeof t=="number"?t:t[e]||0}const iC=()=>({translate:0,scale:1,origin:0,originPoint:0}),bl=()=>({x:iC(),y:iC()}),rC=()=>({min:0,max:0}),pt=()=>({x:rC(),y:rC()});function ni(t){return[t("x"),t("y")]}function x5({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function JZ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function ZZ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function av(t){return t===void 0||t===1}function _w({scale:t,scaleX:e,scaleY:n}){return!av(t)||!av(e)||!av(n)}function ka(t){return _w(t)||S5(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function S5(t){return sC(t.x)||sC(t.y)}function sC(t){return t&&t!=="0%"}function tg(t,e,n){const i=t-n,r=e*i;return n+r}function aC(t,e,n,i,r){return r!==void 0&&(t=tg(t,r,i)),tg(t,n,i)+e}function vw(t,e=0,n=1,i,r){t.min=aC(t.min,e,n,i,r),t.max=aC(t.max,e,n,i,r)}function I5(t,{x:e,y:n}){vw(t.x,e.translate,e.scale,e.originPoint),vw(t.y,n.translate,n.scale,n.originPoint)}const oC=.999999999999,lC=1.0000000000001;function eee(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let s,a;for(let o=0;o<r;o++){s=n[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&El(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,I5(t,a)),i&&ka(s.latestValues)&&El(t,s.latestValues))}e.x<lC&&e.x>oC&&(e.x=1),e.y<lC&&e.y>oC&&(e.y=1)}function Tl(t,e){t.min=t.min+e,t.max=t.max+e}function cC(t,e,n,i,r=.5){const s=rt(t.min,t.max,r);vw(t,e,n,s,i)}function El(t,e){cC(t.x,e.x,e.scaleX,e.scale,e.originX),cC(t.y,e.y,e.scaleY,e.scale,e.originY)}function A5(t,e){return x5(ZZ(t.getBoundingClientRect(),e))}function tee(t,e,n){const i=A5(t,n),{scroll:r}=e;return r&&(Tl(i.x,r.offset.x),Tl(i.y,r.offset.y)),i}const R5=({current:t})=>t?t.ownerDocument.defaultView:null,nee=new WeakMap;class iee{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(of(h).point)},s=(h,d)=>{const{drag:f,dragPropagation:g,onDragStart:E}=this.getProps();if(f&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=QX(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ni(b=>{let y=this.getAxisMotionValue(b).get()||0;if(tr.test(y)){const{projection:_}=this.visualElement;if(_&&_.layout){const v=_.layout.layoutBox[b];v&&(y=ei(v)*(parseFloat(y)/100))}}this.originPoint[b]=y}),E&&Ye.postRender(()=>E(h,d)),cw(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},a=(h,d)=>{const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:E,onDrag:S}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:b}=d;if(g&&this.currentDirection===null){this.currentDirection=ree(b),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",d.point,b),this.updateAxis("y",d.point,b),this.visualElement.render(),S&&S(h,d)},o=(h,d)=>this.stop(h,d),l=()=>ni(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new w5(e,{onSessionStart:r,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:R5(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Ye.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!em(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=$Z(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&vl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=KZ(r.layoutBox,n):this.constraints=!1,this.elastic=XZ(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ni(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=YZ(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!vl(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=tee(i,r.root,this.visualElement.getTransformPagePoint());let a=WZ(r.layout.layoutBox,s);if(n){const o=n(JZ(a));this.hasMutatedConstraints=!!o,o&&(a=x5(o))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=ni(h=>{if(!em(h,n,this.currentDirection))return;let d=l&&l[h]||{};a&&(d={min:0,max:0});const f=r?200:1e6,g=r?40:1e7,E={type:"inertia",velocity:i?e[h]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,E)});return Promise.all(c).then(o)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return cw(this.visualElement,e),i.start(ax(e,i,0,n,this.visualElement,!1))}stopAnimation(){ni(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ni(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){ni(n=>{const{drag:i}=this.getProps();if(!em(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:o}=r.layout.layoutBox[n];s.set(e[n]-rt(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!vl(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};ni(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();r[a]=QZ({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),ni(a=>{if(!em(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(rt(l,c,r[a]))})}addListeners(){if(!this.visualElement.current)return;nee.set(this.visualElement,this);const e=this.visualElement.current,n=Eh(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();vl(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Ye.read(i);const a=yd(window,"resize",()=>this.scalePositionWithinConstraints()),o=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(ni(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:a=yw,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function em(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function ree(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class see extends ga{constructor(e){super(e),this.removeGroupControls=Yn,this.removeListeners=Yn,this.controls=new iee(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yn}unmount(){this.removeGroupControls(),this.removeListeners()}}const uC=t=>(e,n)=>{t&&Ye.postRender(()=>t(e,n))};class aee extends ga{constructor(){super(...arguments),this.removePointerDownListener=Yn}onPointerDown(e){this.session=new w5(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:R5(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:uC(e),onStart:uC(n),onMove:i,onEnd:(s,a)=>{delete this.session,r&&Ye.postRender(()=>r(s,a))}}}mount(){this.removePointerDownListener=Eh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Um={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function hC(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Su={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(re.test(t))t=parseFloat(t);else return t;const n=hC(t,e.target.x),i=hC(t,e.target.y);return`${n}% ${i}%`}},oee={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=sa.parse(t);if(r.length>5)return i;const s=sa.createTransformer(t),a=typeof r[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;r[0+a]/=o,r[1+a]/=l;const c=rt(o,l,.5);return typeof r[2+a]=="number"&&(r[2+a]/=c),typeof r[3+a]=="number"&&(r[3+a]/=c),s(r)}};class lee extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;RX(cee),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Um.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,a=i.projection;return a&&(a.isPresent=s,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Ye.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),VE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function C5(t){const[e,n]=hL(),i=A.useContext(AE);return m.jsx(lee,{...t,layoutGroup:i,switchLayoutGroup:A.useContext(vL),isPresent:e,safeToRemove:n})}const cee={borderRadius:{...Su,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Su,borderTopRightRadius:Su,borderBottomLeftRadius:Su,borderBottomRightRadius:Su,boxShadow:oee};function uee(t,e,n){const i=on(t)?t:pd(t);return i.start(ax("",i,e,n)),i.animation}function hee(t){return t instanceof SVGElement&&t.tagName!=="svg"}const dee=(t,e)=>t.depth-e.depth;class fee{constructor(){this.children=[],this.isDirty=!1}add(e){QE(this.children,e),this.isDirty=!0}remove(e){YE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(dee),this.isDirty=!1,this.children.forEach(e)}}function mee(t,e){const n=nr.now(),i=({timestamp:r})=>{const s=r-n;s>=e&&(ra(i),t(s-e))};return Ye.read(i,!0),()=>ra(i)}const N5=["TopLeft","TopRight","BottomLeft","BottomRight"],pee=N5.length,dC=t=>typeof t=="string"?parseFloat(t):t,fC=t=>typeof t=="number"||re.test(t);function gee(t,e,n,i,r,s){r?(t.opacity=rt(0,n.opacity!==void 0?n.opacity:1,yee(i)),t.opacityExit=rt(e.opacity!==void 0?e.opacity:1,0,_ee(i))):s&&(t.opacity=rt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<pee;a++){const o=`border${N5[a]}Radius`;let l=mC(e,o),c=mC(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||fC(l)===fC(c)?(t[o]=Math.max(rt(dC(l),dC(c),i),0),(tr.test(c)||tr.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||n.rotate)&&(t.rotate=rt(e.rotate||0,n.rotate||0,i))}function mC(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const yee=P5(0,.5,QL),_ee=P5(.5,.95,Yn);function P5(t,e,n){return i=>i<t?0:i>e?1:n(_c(t,e,i))}function pC(t,e){t.min=e.min,t.max=e.max}function ti(t,e){pC(t.x,e.x),pC(t.y,e.y)}function gC(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function yC(t,e,n,i,r){return t-=e,t=tg(t,1/n,i),r!==void 0&&(t=tg(t,1/r,i)),t}function vee(t,e=0,n=1,i=.5,r,s=t,a=t){if(tr.test(e)&&(e=parseFloat(e),e=rt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=rt(s.min,s.max,i);t===s&&(o-=e),t.min=yC(t.min,e,n,o,r),t.max=yC(t.max,e,n,o,r)}function _C(t,e,[n,i,r],s,a){vee(t,e[n],e[i],e[r],e.scale,s,a)}const wee=["x","scaleX","originX"],bee=["y","scaleY","originY"];function vC(t,e,n,i){_C(t.x,e,wee,n?n.x:void 0,i?i.x:void 0),_C(t.y,e,bee,n?n.y:void 0,i?i.y:void 0)}function wC(t){return t.translate===0&&t.scale===1}function D5(t){return wC(t.x)&&wC(t.y)}function bC(t,e){return t.min===e.min&&t.max===e.max}function Tee(t,e){return bC(t.x,e.x)&&bC(t.y,e.y)}function TC(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function k5(t,e){return TC(t.x,e.x)&&TC(t.y,e.y)}function EC(t){return ei(t.x)/ei(t.y)}function xC(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Eee{constructor(){this.members=[]}add(e){QE(this.members,e),e.scheduleRender()}remove(e){if(YE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function xee(t,e,n){let i="";const r=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((r||s||a)&&(i=`translate3d(${r}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:d,rotateY:f,skewX:g,skewY:E}=n;c&&(i=`perspective(${c}px) ${i}`),h&&(i+=`rotate(${h}deg) `),d&&(i+=`rotateX(${d}deg) `),f&&(i+=`rotateY(${f}deg) `),g&&(i+=`skewX(${g}deg) `),E&&(i+=`skewY(${E}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(i+=`scale(${o}, ${l})`),i||"none"}const Oa={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Bu=typeof window<"u"&&window.MotionDebug!==void 0,ov=["","X","Y","Z"],See={visibility:"hidden"},SC=1e3;let Iee=0;function lv(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function O5(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=BL(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ye,!(r||s))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&O5(i)}function V5({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},o=e==null?void 0:e()){this.id=Iee++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Bu&&(Oa.totalNodes=Oa.resolvedTargetDeltas=Oa.recalculatedProjection=0),this.nodes.forEach(Cee),this.nodes.forEach(Oee),this.nodes.forEach(Vee),this.nodes.forEach(Nee),Bu&&window.MotionDebug.record(Oa)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new fee)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new XE),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=hee(a),this.instance=a;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=mee(f,250),Um.hasAnimatedSinceResize&&(Um.hasAnimatedSinceResize=!1,this.nodes.forEach(AC))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:g,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||h.getDefaultTransition()||zee,{onLayoutAnimationStart:b,onLayoutAnimationComplete:y}=h.getProps(),_=!this.targetLayout||!k5(this.targetLayout,E)||g,v=!f&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||v||f&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,v);const I={...GE(S,"layout"),onPlay:b,onComplete:y};(h.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I)}else f||AC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ra(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Mee),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&O5(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(IC);return}this.isUpdating||this.nodes.forEach(Dee),this.isUpdating=!1,this.nodes.forEach(kee),this.nodes.forEach(Aee),this.nodes.forEach(Ree),this.clearAllSnapshots();const o=nr.now();qt.delta=Br(0,1e3/60,o-qt.timestamp),qt.timestamp=o,qt.isProcessing=!0,J_.update.process(qt),J_.preRender.process(qt),J_.render.process(qt),qt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,VE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Pee),this.sharedNodes.forEach(Lee)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ye.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ye.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!D5(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;a&&(o||ka(this.latestValues)||h)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),Fee(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return pt();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(Bee))){const{scroll:h}=this.root;h&&(Tl(l.x,h.offset.x),Tl(l.y,h.offset.y))}return l}removeElementScroll(a){var o;const l=pt();if(ti(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:d,options:f}=h;h!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&ti(l,a),Tl(l.x,d.offset.x),Tl(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=pt();ti(l,a);for(let c=0;c<this.path.length;c++){const h=this.path[c];!o&&h.options.layoutScroll&&h.scroll&&h!==h.root&&El(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),ka(h.latestValues)&&El(l,h.latestValues)}return ka(this.latestValues)&&El(l,this.latestValues),l}removeTransform(a){const o=pt();ti(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!ka(c.latestValues))continue;_w(c.latestValues)&&c.updateSnapshot();const h=pt(),d=c.measurePageBox();ti(h,d),vC(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return ka(this.latestValues)&&vC(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=qt.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pt(),this.relativeTargetOrigin=pt(),Sh(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),ti(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=pt(),this.targetWithTransforms=pt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),GZ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ti(this.target,this.layout.layoutBox),I5(this.target,this.targetDelta)):ti(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pt(),this.relativeTargetOrigin=pt(),Sh(this.relativeTargetOrigin,this.target,g.target),ti(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Bu&&Oa.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||_w(this.parent.latestValues)||S5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===qt.timestamp&&(c=!1),c)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;ti(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;eee(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=pt());const{target:E}=o;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(gC(this.prevProjectionDelta.x,this.projectionDelta.x),gC(this.prevProjectionDelta.y,this.projectionDelta.y)),xh(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==g||!xC(this.projectionDelta.x,this.prevProjectionDelta.x)||!xC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E)),Bu&&Oa.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=bl(),this.projectionDelta=bl(),this.projectionDeltaWithTransform=bl()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},d=bl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=pt(),g=l?l.source:void 0,E=this.layout?this.layout.source:void 0,S=g!==E,b=this.getStack(),y=!b||b.members.length<=1,_=!!(S&&!y&&this.options.crossfade===!0&&!this.path.some(jee));this.animationProgress=0;let v;this.mixTargetDelta=I=>{const k=I/1e3;RC(d.x,a.x,k),RC(d.y,a.y,k),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Sh(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Uee(this.relativeTarget,this.relativeTargetOrigin,f,k),v&&Tee(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=pt()),ti(v,this.relativeTarget)),S&&(this.animationValues=h,gee(h,c,this.latestValues,k,_,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ra(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ye.update(()=>{Um.hasAnimatedSinceResize=!0,this.currentAnimation=uee(0,SC,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(SC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:h}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&M5(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||pt();const d=ei(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const f=ei(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}ti(o,l),El(o,h),xh(this.projectionDeltaWithTransform,this.layoutCorrected,o,h)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Eee),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&lv("z",a,c,this.animationValues);for(let h=0;h<ov.length;h++)lv(`rotate${ov[h]}`,a,c,this.animationValues),lv(`skew${ov[h]}`,a,c,this.animationValues);a.render();for(const h in c)a.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return See;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Mm(a==null?void 0:a.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=Mm(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!ka(this.latestValues)&&(S.transform=h?h({},""):"none",this.hasProjected=!1),S}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=xee(this.projectionDeltaWithTransform,this.treeScale,f),h&&(c.transform=h(f,c.transform));const{x:g,y:E}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${E.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const S in Yp){if(f[S]===void 0)continue;const{correct:b,applyTo:y}=Yp[S],_=c.transform==="none"?f[S]:b(f[S],d);if(y){const v=y.length;for(let I=0;I<v;I++)c[y[I]]=_}else c[S]=_}return this.options.layoutId&&(c.pointerEvents=d===this?Mm(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(IC),this.root.sharedNodes.clear()}}}function Aee(t){t.updateLayout()}function Ree(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:s}=t.options,a=n.source!==t.layout.source;s==="size"?ni(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],g=ei(f);f.min=i[d].min,f.max=f.min+g}):M5(s,n.layoutBox,i)&&ni(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],g=ei(i[d]);f.max=f.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+g)});const o=bl();xh(o,i,n.layoutBox);const l=bl();a?xh(l,t.applyTransform(r,!0),n.measuredBox):xh(l,i,n.layoutBox);const c=!D5(o);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:g}=d;if(f&&g){const E=pt();Sh(E,n.layoutBox,f.layoutBox);const S=pt();Sh(S,i,g.layoutBox),k5(E,S)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=E,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function Cee(t){Bu&&Oa.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Nee(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Pee(t){t.clearSnapshot()}function IC(t){t.clearMeasurements()}function Dee(t){t.isLayoutDirty=!1}function kee(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function AC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Oee(t){t.resolveTargetDelta()}function Vee(t){t.calcProjection()}function Mee(t){t.resetSkewAndRotation()}function Lee(t){t.removeLeadSnapshot()}function RC(t,e,n){t.translate=rt(e.translate,0,n),t.scale=rt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function CC(t,e,n,i){t.min=rt(e.min,n.min,i),t.max=rt(e.max,n.max,i)}function Uee(t,e,n,i){CC(t.x,e.x,n.x,i),CC(t.y,e.y,n.y,i)}function jee(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const zee={duration:.45,ease:[.4,0,.1,1]},NC=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),PC=NC("applewebkit/")&&!NC("chrome/")?Math.round:Yn;function DC(t){t.min=PC(t.min),t.max=PC(t.max)}function Fee(t){DC(t.x),DC(t.y)}function M5(t,e,n){return t==="position"||t==="preserve-aspect"&&!HZ(EC(e),EC(n),.2)}function Bee(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const qee=V5({attachResizeListener:(t,e)=>yd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),cv={current:void 0},L5=V5({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!cv.current){const t=new qee({});t.mount(window),t.setOptions({layoutScroll:!0}),cv.current=t}return cv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Hee={pan:{Feature:aee},drag:{Feature:see,ProjectionNode:L5,MeasureLayout:C5}};function kC(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,s=i[r];s&&Ye.postRender(()=>s(e,of(e)))}class Gee extends ga{mount(){const{current:e}=this.node;e&&(this.unmount=HX(e,n=>(kC(this.node,n,"Start"),i=>kC(this.node,i,"End"))))}unmount(){}}class $ee extends ga{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=af(yd(this.node.current,"focus",()=>this.onFocus()),yd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function OC(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),s=i[r];s&&Ye.postRender(()=>s(e,of(e)))}class Kee extends ga{mount(){const{current:e}=this.node;e&&(this.unmount=WX(e,n=>(OC(this.node,n,"Start"),(i,{success:r})=>OC(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ww=new WeakMap,uv=new WeakMap,Wee=t=>{const e=ww.get(t.target);e&&e(t)},Qee=t=>{t.forEach(Wee)};function Yee({root:t,...e}){const n=t||document;uv.has(n)||uv.set(n,{});const i=uv.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(Qee,{root:t,...e})),i[r]}function Xee(t,e,n){const i=Yee(e);return ww.set(t,n),i.observe(t),()=>{ww.delete(t),i.unobserve(t)}}const Jee={some:0,all:1};class Zee extends ga{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:Jee[r]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=c?h:d;f&&f(l)};return Xee(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(ete(e,n))&&this.startObserver()}unmount(){}}function ete({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const tte={inView:{Feature:Zee},tap:{Feature:Kee},focus:{Feature:$ee},hover:{Feature:Gee}},nte={layout:{ProjectionNode:L5,MeasureLayout:C5}},bw={current:null},U5={current:!1};function ite(){if(U5.current=!0,!!NE)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>bw.current=t.matches;t.addListener(e),e()}else bw.current=!1}const rte=[...c5,tn,sa],ste=t=>rte.find(l5(t)),VC=new WeakMap;function ate(t,e,n){for(const i in e){const r=e[i],s=n[i];if(on(r))t.addValue(i,r);else if(on(s))t.addValue(i,pd(r,{owner:t}));else if(s!==r)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(i);t.addValue(i,pd(a!==void 0?a:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const MC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ote{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ix,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=nr.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Ye.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:h}=a;this.onUpdate=h,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=gy(n),this.isVariantNode=yL(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in f){const E=f[g];l[g]!==void 0&&on(E)&&E.set(l[g],!1)}}mount(e){this.current=e,VC.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),U5.current||ite(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:bw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){VC.delete(this.current),this.projection&&this.projection.unmount(),ra(this.notifyUpdate),ra(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=ko.has(e),r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ye.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in vc){const n=vc[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<MC.length;i++){const r=MC[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,a=e[s];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=ate(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=pd(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(a5(r)||XL(r))?r=parseFloat(r):!ste(r)&&sa.test(n)&&(r=i5(e,n)),this.setBaseTarget(e,on(r)?r.get():r)),on(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const a=LE(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(r=a[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!on(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new XE),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class j5 extends ote{constructor(){super(...arguments),this.KeyframeResolver=u5}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;on(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function lte(t){return window.getComputedStyle(t)}class cte extends j5{constructor(){super(...arguments),this.type="html",this.renderInstance=IL}readValueFromInstance(e,n){if(ko.has(n)){const i=nx(n);return i&&i.default||0}else{const i=lte(e),r=(EL(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return A5(e,n)}build(e,n,i){zE(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return HE(e,n,i)}}class ute extends j5{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ko.has(n)){const i=nx(n);return i&&i.default||0}return n=AL.has(n)?n:OE(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return NL(e,n,i)}build(e,n,i){FE(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){RL(e,n,i,r)}mount(e){this.isSVGTag=qE(e.tagName),super.mount(e)}}const hte=(t,e)=>ME(t)?new ute(e):new cte(e,{allowProjection:t!==A.Fragment}),dte=LX({...VZ,...tte,...Hee,...nte},hte),ut=JY(dte),z5=()=>{const t=A.useRef(null),e=A.useCallback(()=>{t.current||(t.current=new(window.AudioContext||window.webkitAudioContext)),t.current.state==="suspended"&&t.current.resume().catch(o=>console.error("Audio resume failed:",o))},[]),n=A.useCallback(()=>{e();const o=t.current;if(!o)return;const l=o.createOscillator(),c=o.createGain();l.connect(c),c.connect(o.destination),l.type="triangle",l.frequency.setValueAtTime(800,o.currentTime),l.frequency.exponentialRampToValueAtTime(100,o.currentTime+.05),c.gain.setValueAtTime(.3,o.currentTime),c.gain.exponentialRampToValueAtTime(.01,o.currentTime+.05),l.start(o.currentTime),l.stop(o.currentTime+.05)},[e]),i=A.useCallback(()=>{e();const o=t.current;if(!o)return;[523.25,659.25,783.99,1046.5].forEach((c,h)=>{const d=o.createOscillator(),f=o.createGain();d.connect(f),f.connect(o.destination),d.type="sine",d.frequency.value=c;const g=o.currentTime+h*.1,E=.8;f.gain.setValueAtTime(0,g),f.gain.linearRampToValueAtTime(.3,g+.05),f.gain.exponentialRampToValueAtTime(.01,g+E),d.start(g),d.stop(g+E)})},[e]),r=A.useCallback(()=>{e();const o=t.current;if(!o)return;const l=o.createOscillator(),c=o.createGain();l.connect(c),c.connect(o.destination),l.type="sine",l.frequency.setValueAtTime(200,o.currentTime),l.frequency.linearRampToValueAtTime(600,o.currentTime+.3),c.gain.setValueAtTime(.2,o.currentTime),c.gain.linearRampToValueAtTime(0,o.currentTime+.3),l.start(o.currentTime),l.stop(o.currentTime+.3)},[e]),s=A.useCallback(()=>{e();const o=t.current;if(!o)return;const l=o.sampleRate*.1,c=o.createBuffer(1,l,o.sampleRate),h=c.getChannelData(0);for(let S=0;S<l;S++){const b=Math.random()*2-1,y=1-S/l;h[S]=b*y}const d=S=>{const b=o.createBufferSource();b.buffer=c;const y=o.createBiquadFilter();y.type="bandpass",y.frequency.value=800+Math.random()*600,y.Q.value=1;const _=o.createGain();_.gain.value=.1+Math.random()*.1,b.connect(y),y.connect(_),_.connect(o.destination),b.start(S)},f=o.currentTime,g=2,E=30;for(let S=0;S<g*E;S++){const b=f+Math.random()*g;Math.random()>.3&&d(b)}for(let S=0;S<5;S++)d(f+Math.random()*.1)},[e]),a=A.useCallback(()=>{e();const o=t.current;if(!o)return;const l=o.createOscillator(),c=o.createGain();l.connect(c),c.connect(o.destination),l.type="triangle",l.frequency.setValueAtTime(150,o.currentTime),l.frequency.exponentialRampToValueAtTime(40,o.currentTime+.1),c.gain.setValueAtTime(.5,o.currentTime),c.gain.exponentialRampToValueAtTime(.01,o.currentTime+.15),l.start(o.currentTime),l.stop(o.currentTime+.15);const h=o.sampleRate*.5,d=o.createBuffer(1,h,o.sampleRate),f=d.getChannelData(0);for(let b=0;b<h;b++)f[b]=Math.random()*2-1;const g=o.createBufferSource();g.buffer=d;const E=o.createBiquadFilter();E.type="highpass",E.frequency.value=1e3;const S=o.createGain();g.connect(E),E.connect(S),S.connect(o.destination),S.gain.setValueAtTime(.3,o.currentTime),S.gain.exponentialRampToValueAtTime(.01,o.currentTime+.3),g.start(o.currentTime),g.stop(o.currentTime+.3)},[e]);return{playTick:n,playWin:i,playSpinStart:r,playCheer:s,playConfettiPop:a}},Yo=[{id:"1",label:"5% OFF",value:5,type:"discount",color:"#F97316",textColor:"#FFFFFF"},{id:"2",label:"25% OFF",value:25,type:"discount",color:"#FBBF24",textColor:"#000000"},{id:"3",label:"10% OFF",value:10,type:"discount",color:"#FB923C",textColor:"#FFFFFF"},{id:"4",label:"50% OFF",value:50,type:"discount",color:"#FFD700",textColor:"#000000"},{id:"5",label:"15% OFF",value:15,type:"discount",color:"#EF4444",textColor:"#FFFFFF"},{id:"6",label:"FREE!",value:100,type:"freebie",color:"#10B981",textColor:"#FFFFFF"},{id:"7",label:"20% OFF",value:20,type:"discount",color:"#F59E0B",textColor:"#FFFFFF"},{id:"8",label:"30% OFF",value:30,type:"discount",color:"#DC2626",textColor:"#FFFFFF"}],fte=()=>{const t=[20,15,25,1,18,.5,12,7],e=t.reduce((i,r)=>i+r,0);let n=Math.random()*e;for(let i=0;i<t.length;i++)if(n-=t[i],n<=0)return i;return 0},mte=({onSpinComplete:t,isSpinning:e})=>{const n=A.useRef(null),[i,r]=A.useState(0),[s,a]=A.useState(!1),o=A.useRef(),l=A.useRef(0),{playTick:c,playSpinStart:h}=z5();A.useEffect(()=>{d()},[i]),A.useEffect(()=>{e&&!s&&E()},[e]);const d=()=>{const S=n.current;if(!S)return;const b=S.getContext("2d");if(!b)return;const y=S.width/2,_=S.height/2,v=Math.min(y,_)-20;b.clearRect(0,0,S.width,S.height),b.save(),b.shadowColor="rgba(251, 146, 60, 0.5)",b.shadowBlur=30,b.beginPath(),b.arc(y,_,v+10,0,2*Math.PI),b.strokeStyle="rgba(251, 146, 60, 0.3)",b.lineWidth=20,b.stroke(),b.restore();const I=2*Math.PI/Yo.length;Yo.forEach((T,x)=>{const R=x*I+i,C=R+I;b.save(),b.beginPath(),b.moveTo(y+3,_+3),b.arc(y+3,_+3,v,R,C),b.closePath(),b.fillStyle="rgba(0, 0, 0, 0.2)",b.fill(),b.restore(),b.beginPath(),b.moveTo(y,_),b.arc(y,_,v,R,C),b.closePath();const P=b.createRadialGradient(y,_,0,y,_,v);P.addColorStop(0,f(T.color,30)),P.addColorStop(.7,T.color),P.addColorStop(1,g(T.color,20)),b.fillStyle=P,b.fill(),b.save(),b.clip();const V=b.createRadialGradient(y,_-v*.3,0,y,_-v*.3,v*.8);V.addColorStop(0,"rgba(255, 255, 255, 0.4)"),V.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),V.addColorStop(1,"rgba(255, 255, 255, 0)"),b.fillStyle=V,b.fill(),b.restore(),b.strokeStyle="rgba(255, 255, 255, 0.5)",b.lineWidth=2,b.stroke(),b.save(),b.translate(y,_),b.rotate(R+I/2),b.textAlign="center",b.textBaseline="middle",b.shadowColor="rgba(0, 0, 0, 0.5)",b.shadowBlur=4,b.shadowOffsetX=2,b.shadowOffsetY=2,b.fillStyle=T.textColor,b.font="bold 24px Inter, sans-serif",b.fillText(T.label,v*.7,0),b.restore()}),Yo.forEach((T,x)=>{const R=x*I+i,C=y+Math.cos(R)*v,P=_+Math.sin(R)*v;b.beginPath(),b.arc(C,P,6,0,2*Math.PI);const V=b.createRadialGradient(C-2,P-2,0,C,P,6);V.addColorStop(0,"#FFFFFF"),V.addColorStop(.4,"#D1D5DB"),V.addColorStop(1,"#4B5563"),b.fillStyle=V,b.shadowColor="rgba(0,0,0,0.4)",b.shadowBlur=4,b.fill(),b.strokeStyle="#1F2937",b.lineWidth=1,b.stroke()});const k=b.createRadialGradient(y,_,0,y,_,50);k.addColorStop(0,"#FFFFFF"),k.addColorStop(.7,"#F3F4F6"),k.addColorStop(1,"#D1D5DB"),b.beginPath(),b.arc(y,_,50,0,2*Math.PI),b.fillStyle=k,b.fill(),b.strokeStyle="#F97316",b.lineWidth=6,b.stroke(),b.beginPath(),b.arc(y,_,20,0,2*Math.PI);const O=b.createRadialGradient(y-5,_-5,0,y,_,20);O.addColorStop(0,"#FFA500"),O.addColorStop(1,"#FF6B00"),b.fillStyle=O,b.fill(),b.beginPath(),b.arc(y-5,_-5,8,0,2*Math.PI),b.fillStyle="rgba(255, 255, 255, 0.6)",b.fill()},f=(S,b)=>{const y=parseInt(S.replace("#",""),16),_=Math.min(255,(y>>16&255)+b),v=Math.min(255,(y>>8&255)+b),I=Math.min(255,(y&255)+b);return`#${(_<<16|v<<8|I).toString(16).padStart(6,"0")}`},g=(S,b)=>{const y=parseInt(S.replace("#",""),16),_=Math.max(0,(y>>16&255)-b),v=Math.max(0,(y>>8&255)-b),I=Math.max(0,(y&255)-b);return`#${(_<<16|v<<8|I).toString(16).padStart(6,"0")}`},E=()=>{a(!0),h();const S=fte(),b=2*Math.PI/Yo.length,y=5+Math.floor(Math.random()*5),_=2*Math.PI*y-S*b-b/2-Math.PI/2,v=5e3,I=Date.now(),k=i,O=()=>{const x=Date.now()-I,R=Math.min(x/v,1),C=1-Math.pow(1-R,3),P=k+(_-k)*C,V=Math.PI*2/Yo.length,D=Math.floor(P/V);D>l.current&&(c(),l.current=D),r(P),R<1?o.current=requestAnimationFrame(O):(a(!1),setTimeout(()=>{t(Yo[S])},300))};o.current=requestAnimationFrame(O)};return A.useEffect(()=>()=>{o.current&&cancelAnimationFrame(o.current)},[]),m.jsxs("div",{className:"relative flex items-center justify-center py-4",children:[m.jsx(ut.div,{className:"absolute w-[450px] h-[450px] rounded-full bg-gradient-to-br from-orange-200/30 via-yellow-200/30 to-red-200/30 blur-2xl",animate:s?{scale:[1,1.1,1],opacity:[.3,.5,.3]}:{},transition:{duration:2,repeat:s?1/0:0}}),m.jsxs(ut.div,{className:"relative",animate:s?{scale:[1,1.02,1]}:{scale:1},transition:{duration:.5,repeat:s?1/0:0},children:[m.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-md rounded-full -m-8"}),m.jsx("canvas",{ref:n,width:450,height:450,className:"relative drop-shadow-2xl"}),m.jsx(ut.div,{className:"absolute top-[-10px] left-1/2 z-10",style:{x:"-50%"},animate:s?{y:[0,5,0]}:{y:0},transition:{duration:.3,repeat:s?1/0:0},children:m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 blur-md",children:m.jsx("div",{className:"w-0 h-0 border-l-[25px] border-l-transparent border-r-[25px] border-r-transparent border-t-[50px] border-t-red-500"})}),m.jsx("div",{className:"relative w-0 h-0 border-l-[25px] border-l-transparent border-r-[25px] border-r-transparent border-t-[50px] border-t-gradient-to-b from-red-500 to-red-600 drop-shadow-2xl"}),m.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 w-0 h-0 border-l-[8px] border-l-transparent border-r-[8px] border-r-transparent border-t-[16px] border-t-white/40"})]})}),s&&m.jsx(ut.div,{className:"absolute inset-0 rounded-full border-4 border-orange-400/50",animate:{scale:[1,1.1,1],opacity:[.5,.8,.5]},transition:{duration:1,repeat:1/0}})]})]})};var jm={linear:function(t,e,n,i){var r=n-e;return r*t/i+e},easeInQuad:function(t,e,n,i){var r=n-e;return r*(t/=i)*t+e},easeOutQuad:function(t,e,n,i){var r=n-e;return-r*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,n,i){var r=n-e;return(t/=i/2)<1?r/2*t*t+e:-r/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){var r=n-e;return r*(t/=i)*t*t+e},easeOutCubic:function(t,e,n,i){var r=n-e;return r*((t=t/i-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,i){var r=n-e;return(t/=i/2)<1?r/2*t*t*t+e:r/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,i){var r=n-e;return r*(t/=i)*t*t*t+e},easeOutQuart:function(t,e,n,i){var r=n-e;return-r*((t=t/i-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,i){var r=n-e;return(t/=i/2)<1?r/2*t*t*t*t+e:-r/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,i){var r=n-e;return r*(t/=i)*t*t*t*t+e},easeOutQuint:function(t,e,n,i){var r=n-e;return r*((t=t/i-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,i){var r=n-e;return(t/=i/2)<1?r/2*t*t*t*t*t+e:r/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,i){var r=n-e;return-r*Math.cos(t/i*(Math.PI/2))+r+e},easeOutSine:function(t,e,n,i){var r=n-e;return r*Math.sin(t/i*(Math.PI/2))+e},easeInOutSine:function(t,e,n,i){var r=n-e;return-r/2*(Math.cos(Math.PI*t/i)-1)+e},easeInExpo:function(t,e,n,i){var r=n-e;return t==0?e:r*Math.pow(2,10*(t/i-1))+e},easeOutExpo:function(t,e,n,i){var r=n-e;return t==i?e+r:r*(-Math.pow(2,-10*t/i)+1)+e},easeInOutExpo:function(t,e,n,i){var r=n-e;return t===0?e:t===i?e+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+e:r/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,i){var r=n-e;return-r*(Math.sqrt(1-(t/=i)*t)-1)+e},easeOutCirc:function(t,e,n,i){var r=n-e;return r*Math.sqrt(1-(t=t/i-1)*t)+e},easeInOutCirc:function(t,e,n,i){var r=n-e;return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+e:r/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,i){var r=n-e,s,a,o;return o=1.70158,a=0,s=r,t===0?e:(t/=i)===1?e+r:(a||(a=i*.3),s<Math.abs(r)?(s=r,o=a/4):o=a/(2*Math.PI)*Math.asin(r/s),-(s*Math.pow(2,10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/a))+e)},easeOutElastic:function(t,e,n,i){var r=n-e,s,a,o;return o=1.70158,a=0,s=r,t===0?e:(t/=i)===1?e+r:(a||(a=i*.3),s<Math.abs(r)?(s=r,o=a/4):o=a/(2*Math.PI)*Math.asin(r/s),s*Math.pow(2,-10*t)*Math.sin((t*i-o)*(2*Math.PI)/a)+r+e)},easeInOutElastic:function(t,e,n,i){var r=n-e,s,a,o;return o=1.70158,a=0,s=r,t===0?e:(t/=i/2)===2?e+r:(a||(a=i*(.3*1.5)),s<Math.abs(r)?(s=r,o=a/4):o=a/(2*Math.PI)*Math.asin(r/s),t<1?-.5*(s*Math.pow(2,10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/a))+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/a)*.5+r+e)},easeInBack:function(t,e,n,i,r){var s=n-e;return r===void 0&&(r=1.70158),s*(t/=i)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,n,i,r){var s=n-e;return r===void 0&&(r=1.70158),s*((t=t/i-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,n,i,r){var s=n-e;return r===void 0&&(r=1.70158),(t/=i/2)<1?s/2*(t*t*(((r*=1.525)+1)*t-r))+e:s/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},easeInBounce:function(t,e,n,i){var r=n-e,s;return s=jm.easeOutBounce(i-t,0,r,i),r-s+e},easeOutBounce:function(t,e,n,i){var r=n-e;return(t/=i)<1/2.75?r*(7.5625*t*t)+e:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+e:r*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,i){var r=n-e,s;return t<i/2?(s=jm.easeInBounce(t*2,0,r,i),s*.5+e):(s=jm.easeOutBounce(t*2-i,0,r,i),s*.5+r*.5+e)}},pte=jm;function gte(t){return t*Math.PI/180}function Mn(t,e){return t+Math.random()*(e-t)}function yte(t,e){return Math.floor(t+Math.random()*(e-t+1))}var Ih;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(Ih||(Ih={}));var ms;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(ms||(ms={}));const _te=1e3/60;class vte{constructor(e,n,i,r){this.getOptions=n;const{colors:s,initialVelocityX:a,initialVelocityY:o}=this.getOptions();this.context=e,this.x=i,this.y=r,this.w=Mn(5,20),this.h=Mn(5,20),this.radius=Mn(5,10),this.vx=typeof a=="number"?Mn(-a,a):Mn(a.min,a.max),this.vy=typeof o=="number"?Mn(-o,0):Mn(o.min,o.max),this.shape=yte(0,2),this.angle=gte(Mn(0,360)),this.angularSpin=Mn(-.2,.2),this.color=s[Math.floor(Math.random()*s.length)],this.rotateY=Mn(0,1),this.rotationDirection=Mn(0,1)?ms.Positive:ms.Negative}update(e){const{gravity:n,wind:i,friction:r,opacity:s,drawShape:a}=this.getOptions(),o=e/_te;this.x+=this.vx*o,this.y+=this.vy*o,this.vy+=n*o,this.vx+=i*o,this.vx*=r**o,this.vy*=r**o,this.rotateY>=1&&this.rotationDirection===ms.Positive?this.rotationDirection=ms.Negative:this.rotateY<=-1&&this.rotationDirection===ms.Negative&&(this.rotationDirection=ms.Positive);const l=.1*this.rotationDirection*o;if(this.rotateY+=l,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=s,this.context.lineCap="round",this.context.lineWidth=2,a&&typeof a=="function")a.call(this,this.context);else switch(this.shape){case Ih.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case Ih.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case Ih.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class wte{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=r=>{this.particles.splice(r,1)},this.getParticle=()=>{const r=Mn(this.x,this.w+this.x),s=Mn(this.y,this.h+this.y);return new vte(this.context,this.getOptions,r,s)},this.animate=r=>{const{canvas:s,context:a,particlesGenerated:o,lastNumberOfPieces:l}=this,{run:c,recycle:h,numberOfPieces:d,debug:f,tweenFunction:g,tweenDuration:E}=this.getOptions();if(!c)return!1;const S=this.particles.length,b=h?S:o;if(b<d){l!==d&&(this.tweenProgress=0,this.tweenFrom=b,this.lastNumberOfPieces=d),this.tweenProgress=Math.min(E,Math.max(0,this.tweenProgress+r));const y=g(this.tweenProgress,this.tweenFrom,d,E),_=Math.round(y-b);for(let v=0;v<_;v++)this.particles.push(this.getParticle());this.particlesGenerated+=_}f&&(a.font="12px sans-serif",a.fillStyle="#333",a.textAlign="right",a.fillText(`Particles: ${S}`,s.width-10,s.height-20));for(let y=this.particles.length-1;y>=0;y--){const _=this.particles[y];_.update(r),(_.y>s.height||_.y<-100||_.x>s.width+100||_.x<-100)&&(h&&b<=d?this.particles[y]=this.getParticle():this.removeParticleAt(y))}return S>0||b<d},this.canvas=e;const i=this.canvas.getContext("2d");if(!i)throw new Error("Could not get canvas context");this.context=i,this.getOptions=n}}const ox={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:pte.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class bte{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=r=>{const s={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...s,...ox,...r},Object.assign(this,r.confettiSource)},this.update=(r=0)=>{const{options:{run:s,onConfettiComplete:a,frameRate:o},canvas:l,context:c}=this,h=Math.min(r-this.lastFrameTime,50);if(o&&h<1e3/o){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=r-(o?h%o:0),s&&(c.fillStyle="white",c.clearRect(0,0,l.width,l.height)),this.generator.animate(h)?this.rafId=requestAnimationFrame(this.update):(a&&typeof a=="function"&&this.generator.particlesGenerated>0&&a.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const i=this.canvas.getContext("2d");if(!i)throw new Error("Could not get canvas context");this.context=i,this.generator=new wte(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var r,s;const n=(r=this._options)==null?void 0:r.run,i=(s=this._options)==null?void 0:s.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&i===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const Tte=Hn.createRef();class lx extends Hn.Component{constructor(e){super(e),this.canvas=Hn.createRef(),this.canvas=e.canvasRef||Tte}componentDidMount(){if(this.canvas.current){const e=hv(this.props)[0];this.confetti=new bte(this.canvas.current,e)}}componentDidUpdate(){const e=hv(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=hv(this.props),i={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return m.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:i})}}lx.defaultProps={...ox};lx.displayName="ReactConfetti";function hv(t){const e={},n={},i={},r=[...Object.keys(ox),"confettiSource","drawShape","onConfettiComplete","frameRate"],s=["canvasRef"];for(const a in t){const o=t[a];r.includes(a)?e[a]=o:s.includes(a)?s[a]=o:i[a]=o}return[e,i,n]}const Ete=Hn.forwardRef((t,e)=>m.jsx(lx,{canvasRef:e,...t})),xte=({isOpen:t,onClose:e})=>{const{currentUser:n}=Xr(),[i,r]=A.useState(null),[s,a]=A.useState(!1),[o,l]=A.useState(!0),[c,h]=A.useState(3),[d,f]=A.useState(!0),[g,E]=A.useState(!1),{playWin:S,playCheer:b,playConfettiPop:y}=z5();A.useEffect(()=>{t&&n&&_()},[t,n]);const _=async()=>{if(n){f(!0);try{h(3),l(!0)}catch(T){console.error("Error checking spin availability:",T),l(!0)}finally{f(!1)}}},v=()=>{!o||g||c<=0||(E(!0),r(null))},I=async T=>{if(E(!1),r(T),S(),b(),y(),a(!0),setTimeout(()=>a(!1),6e3),n)try{const x=$e.collection("users").doc(n.uid),C=(await x.get()).data(),P=(C==null?void 0:C.spinStats)||{totalSpins:0,totalWins:0,totalDiscountWon:0,biggestWin:0},V={lastSpinDate:jt.firestore.FieldValue.serverTimestamp(),spinStats:{totalSpins:P.totalSpins+1,totalWins:P.totalWins+1,totalDiscountWon:T.type==="discount"?P.totalDiscountWon+T.value:P.totalDiscountWon,biggestWin:T.type==="discount"?Math.max(P.biggestWin,T.value):P.biggestWin}};T.type==="discount"&&(V.activeDiscount={type:"discount",value:T.value,label:T.label,expiresAt:new Date(Date.now()+24*60*60*1e3),source:"wheel"}),await x.update(V)}catch(x){console.error("Error saving spin result:",x)}},k=()=>{i&&navigator.share&&navigator.share({title:"I just won at Rush Coffee Spin Wheel!",text:` I spun the wheel and won ${i.label}! Try your luck at Rush Coffee!`,url:window.location.origin}).catch(()=>{navigator.clipboard.writeText(` I just won ${i.label} at Rush Coffee!`)})},O=()=>{r(null),a(!1),E(!1),e()};return m.jsx(Wp,{children:t&&m.jsxs(ut.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:O,children:[s&&m.jsx(Ete,{recycle:!1,numberOfPieces:500}),m.jsxs(ut.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:T=>T.stopPropagation(),className:"bg-gradient-to-br from-yellow-50 via-white to-orange-50 rounded-3xl max-w-3xl w-full p-4 md:p-8 relative shadow-2xl max-h-[90vh] overflow-y-auto border border-orange-200",children:[m.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-gradient-to-br from-yellow-200/20 to-transparent rounded-full blur-3xl pointer-events-none"}),m.jsx("div",{className:"absolute bottom-0 right-0 w-32 h-32 bg-gradient-to-tl from-orange-200/20 to-transparent rounded-full blur-3xl pointer-events-none"}),m.jsx("button",{onClick:O,className:"absolute top-4 right-4 z-10 w-10 h-10 rounded-full bg-white/80 backdrop-blur-sm hover:bg-white shadow-lg text-gray-500 hover:text-gray-700 transition-all hover:scale-110 flex items-center justify-center",children:m.jsx($s,{className:"w-5 h-5"})}),m.jsxs("div",{className:"text-center mb-6 relative",children:[m.jsxs(ut.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-yellow-500 via-orange-600 to-red-600 rounded-full mb-4 shadow-xl relative",children:[m.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-yellow-400 to-red-500 blur-md opacity-50"}),m.jsx(gp,{className:"w-10 h-10 text-white relative z-10 drop-shadow-lg"})]}),m.jsx("h2",{className:"text-4xl md:text-5xl font-display font-black bg-clip-text text-transparent bg-gradient-to-r from-yellow-600 via-orange-700 to-red-600 mb-3",children:i?" Winner!":"Spin the Wheel"}),m.jsx("p",{className:"text-base md:text-lg text-gray-700 font-medium",children:d?"Loading your luck...":o?i?`You won ${i.label}!`:" Spin for amazing prizes!":" Come back tomorrow!"})]}),!d&&m.jsxs(m.Fragment,{children:[!i&&o&&m.jsxs("div",{className:"space-y-6",children:[m.jsx("div",{className:"relative flex justify-center",children:m.jsx(mte,{onSpinComplete:I,isSpinning:g})}),m.jsx("div",{className:"text-center",children:m.jsxs("p",{className:"text-sm font-semibold text-gray-600 flex items-center justify-center gap-2",children:[m.jsx(fD,{className:"w-4 h-4"}),"Spins Remaining: ",m.jsx("span",{className:"text-orange-600 text-lg",children:c}),"/3"]})}),m.jsxs(ut.button,{onClick:v,disabled:g||!o,whileHover:!g&&o?{scale:1.02}:{},whileTap:!g&&o?{scale:.98}:{},className:`w-full max-w-md mx-auto block px-8 py-5 rounded-2xl font-black text-xl transition-all shadow-2xl relative overflow-hidden ${g||!o?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-yellow-600 via-orange-700 to-red-600 hover:from-yellow-700 hover:via-orange-800 hover:to-red-700 text-white"}`,children:[!g&&o&&m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12"}),m.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:g?m.jsxs(m.Fragment,{children:[m.jsx(ut.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:""}),"SPINNING..."]}):m.jsxs(m.Fragment,{children:[m.jsx(gp,{className:"w-6 h-6"}),"SPIN NOW!"]})})]})]}),i&&m.jsxs(ut.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center",children:[m.jsxs("div",{className:"mb-8 p-10 bg-gradient-to-br from-yellow-100 via-white to-orange-100 rounded-3xl border-4 border-orange-300 shadow-2xl relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-radial from-yellow-200/20 via-transparent to-transparent"}),m.jsxs(ut.div,{initial:{rotate:-10,scale:0},animate:{rotate:0,scale:1},transition:{type:"spring",stiffness:200,delay:.2},className:"relative z-10",children:[m.jsx("div",{className:"text-8xl md:text-9xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-600 via-orange-700 to-red-600 mb-4 drop-shadow-lg",children:i.label}),m.jsxs("div",{className:"flex items-center justify-center gap-2 text-lg md:text-xl text-gray-700 font-semibold",children:[m.jsx("span",{className:"inline-block w-3 h-3 bg-green-500 rounded-full animate-pulse"}),"Applied to your next order! Valid for 24 hours."]})]})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsxs(ut.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:k,className:"flex-1 px-6 py-4 border-2 border-orange-600 text-orange-600 rounded-2xl font-bold hover:bg-orange-50 transition-all flex items-center justify-center gap-2 shadow-lg",children:[m.jsx(z9,{className:"w-5 h-5"}),"Share"]}),m.jsx(ut.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:O,className:"flex-1 px-6 py-4 bg-gradient-to-r from-yellow-600 to-orange-600 text-white rounded-2xl font-bold hover:from-yellow-700 hover:to-orange-700 transition-all shadow-xl",children:"Start Shopping"})]})]})]}),!i&&m.jsxs("div",{className:"text-center mt-6 space-y-1",children:[m.jsx("p",{className:"text-xs text-gray-500 font-medium",children:" TESTING MODE: Unlimited spins enabled"}),m.jsx("p",{className:"text-xs text-gray-400",children:"Weighted probability  All prizes guaranteed  Discounts expire in 24h"})]})]})]})})},Ste=[{href:"/",label:"Home"},{href:"/about",label:"About"},{href:"/menu",label:"Menu"},{href:"/drink-lab",label:"Drink Lab"},{href:"/contact",label:"Contact"}],Ite=[{href:"/menu",label:"Menu"},{href:"/drink-lab",label:"Drink Lab"},{href:"/queue",label:"Queue"},{href:"/rewards",label:"Rewards"}],LC=[{href:"/profile",label:"My Profile",Icon:f0},{href:"/flavor-profile",label:"My Flavor Profile",Icon:fD},{href:"/rewards",label:"My Rewards",Icon:y9},{href:"/about",label:"About",Icon:hD},{href:"/contact",label:"Contact",Icon:Nb}],Ate=()=>{const[t,e]=A.useState(!1),[n,i]=A.useState(!1),r=A.useRef(null),[s,a]=A.useState(!1),[o,l]=A.useState("login"),[c,h]=A.useState(!1),[d,f]=A.useState(""),[g,E]=A.useState(""),[S,b]=A.useState(!1),{currentUser:y,logout:_}=Xr(),{totalCartItems:v,openCart:I}=XM(),k=Ao(),O=vi(),[T]=F3(),x=O.pathname==="/auth/verify-email",R=sessionStorage.getItem("requires2FA")==="true",C=y&&!x&&!R&&!s&&O.pathname!=="/",P=C?Ite:Ste,V=()=>e(!1),D=ne=>{l(ne),a(!0),V()};A.useEffect(()=>{const ne=T.get("auth");ne==="login"?(l("login"),a(!0)):ne==="register"&&(l("register"),a(!0))},[T]);const q=(ne,Ee,bt)=>{a(!1),f(ne),E(Ee),h(!0)},ee=ne=>{a(!1),h(!1),sessionStorage.removeItem("requires2FA");const Ee=ne||(y==null?void 0:y.role);k(Ee==="admin"?"/admin":Ee==="employee"?"/employee":"/menu")},z=()=>{h(!1),sessionStorage.removeItem("requires2FA"),_()},Q=()=>{h(!1),sessionStorage.removeItem("requires2FA"),_(),l("login"),a(!0)};A.useEffect(()=>{const ne=Ee=>{r.current&&!r.current.contains(Ee.target)&&i(!1)};return document.addEventListener("mousedown",ne),()=>document.removeEventListener("mousedown",ne)},[]),A.useEffect(()=>{const ne=()=>{window.innerWidth>=768&&e(!1)};return window.addEventListener("resize",ne),()=>window.removeEventListener("resize",ne)},[]),A.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[t]);const X=async()=>{await _(),V(),i(!1),k("/")},ie=()=>e(!t),le=(ne=!1)=>{var Oo,Vo;const Ee="rounded-full text-sm font-semibold transition-colors",bt="block w-full text-center py-3 text-base",bi="px-6 py-2";if(C&&y){const Mo=`${((Oo=y.firstName)==null?void 0:Oo.charAt(0))||""}${((Vo=y.lastName)==null?void 0:Vo.charAt(0))||""}`.toUpperCase();return m.jsxs("div",{className:`relative ${ne?"w-full":""}`,ref:r,children:[m.jsx("button",{onClick:()=>i(!n),className:`flex items-center justify-center transition-colors focus:outline-none ${ne?"w-full gap-3 rounded-xl border border-gray-200 p-3 hover:bg-gray-50":`h-10 w-10 rounded-full ${y.photoURL?"ring-2 ring-primary-100":"bg-primary-600 text-white hover:bg-primary-700"} shadow-sm overflow-hidden`}`,"aria-label":"User menu","aria-haspopup":"true","aria-expanded":n,children:ne?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-full ${y.photoURL?"":"bg-primary-600 text-white"} overflow-hidden`,children:y.photoURL?m.jsx("img",{src:y.photoURL,alt:"Profile",className:"h-full w-full object-cover"}):m.jsx("span",{className:"text-sm font-bold",children:Mo})}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[y.firstName," ",y.lastName]}),m.jsx("span",{className:"text-xs text-gray-500",children:y.email})]}),m.jsx(i9,{className:`ml-auto h-4 w-4 text-gray-400 transition-transform ${n?"rotate-180":""}`})]}):y.photoURL?m.jsx("img",{src:y.photoURL,alt:"Profile",className:"h-full w-full object-cover"}):m.jsx("span",{className:"text-sm font-bold",children:Mo})}),n&&!ne&&m.jsx("div",{className:"absolute right-0 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none animate-fade-in-up",children:m.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[m.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[m.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[y.firstName," ",y.lastName]}),m.jsx("p",{className:"text-xs text-gray-500 truncate",children:y.email})]}),LC.map(ya=>m.jsxs(Ei,{to:ya.href,onClick:()=>i(!1),className:({isActive:vy})=>`flex items-center gap-3 px-4 py-2 text-sm transition-colors hover:bg-gray-100 ${vy?"text-primary-600 font-semibold":"text-gray-700"}`,role:"menuitem",children:[m.jsx(ya.Icon,{className:"h-4 w-4"}),ya.label]},ya.label)),(y.role==="employee"||y.role==="admin")&&m.jsxs(m.Fragment,{children:[m.jsx("hr",{className:"my-1"}),m.jsxs(Ei,{to:"/employee",onClick:()=>i(!1),className:"flex items-center gap-3 px-4 py-2 text-sm font-semibold text-blue-700 transition-colors hover:bg-blue-50",role:"menuitem",children:[m.jsx(Lf,{className:"h-4 w-4"}),"Employee Portal"]})]}),y.role==="admin"&&m.jsxs(Ei,{to:"/admin",onClick:()=>i(!1),className:"flex items-center gap-3 px-4 py-2 text-sm font-semibold text-yellow-700 transition-colors hover:bg-yellow-50",role:"menuitem",children:[m.jsx(Lf,{className:"h-4 w-4"}),"Admin Dashboard"]}),m.jsx("hr",{className:"my-1"}),m.jsxs("button",{onClick:X,className:"flex w-full items-center gap-3 px-4 py-2 text-left text-sm text-red-600 transition-colors hover:bg-red-50",role:"menuitem",children:[m.jsx(HI,{className:"h-4 w-4"}),"Logout"]})]})})]})}return m.jsxs("div",{className:`flex items-center ${ne?"flex-col space-y-3":"gap-4"}`,children:[m.jsx("button",{onClick:()=>D("login"),className:`${Ee} border border-primary-600 text-primary-600 hover:bg-primary-50 ${ne?bt:bi}`,children:"Login"}),m.jsx("button",{onClick:()=>D("register"),className:`${Ee} bg-primary-600 text-white shadow-sm hover:bg-primary-700 ${ne?bt:bi}`,children:"Sign Up"})]})},qe=()=>m.jsxs("button",{onClick:I,className:"relative rounded-full p-2 text-gray-700 transition hover:bg-gray-100","aria-label":`Open cart with ${v} items`,children:[m.jsx(K9,{className:"h-6 w-6"}),v>0&&m.jsx("span",{className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white","aria-hidden":"true",children:v})]});return m.jsxs(m.Fragment,{children:[m.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-gray-200/80 bg-white/95 shadow-md backdrop-blur-sm",children:m.jsxs("div",{className:"container mx-auto flex h-16 items-center justify-between px-4 sm:h-20 sm:px-6 lg:px-8 md:grid md:grid-cols-3",children:[m.jsxs(Ei,{to:y?"/menu":"/",className:"flex items-center gap-2 flex-shrink-0 md:justify-self-start",children:[m.jsx(Fr,{className:"h-7 w-7 text-primary-600 sm:h-8 sm:w-8"}),m.jsx("span",{className:"text-lg font-bold text-primary-600 whitespace-nowrap sm:text-2xl",children:"Rush Coffee"})]}),m.jsx("nav",{className:"hidden items-center justify-center space-x-8 md:flex md:justify-self-center",children:P.map(ne=>m.jsx(Ei,{to:ne.href,className:({isActive:Ee})=>`relative text-sm font-normal uppercase transition-colors hover:text-primary-600 ${Ee?"text-primary-600":"text-gray-700"} after:absolute after:bottom-0 after:left-0 after:h-[1px] after:w-full after:origin-center after:transform after:bg-primary-600 after:transition-transform after:duration-300 ${Ee?"after:scale-x-100":"after:scale-x-0"} hover:after:scale-x-100`,children:ne.label},ne.label))}),m.jsxs("div",{className:"hidden items-center justify-end gap-4 md:flex md:justify-self-end",children:[le(),C&&m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:()=>b(!0),className:"relative flex items-center justify-center h-10 w-10 rounded-full bg-gradient-to-r from-yellow-500 to-red-600 text-white hover:from-yellow-600 hover:to-red-700 transition-all hover:scale-110 shadow-lg","aria-label":"Spin Wheel",title:"Spin to win!",children:[m.jsx(gp,{className:"h-5 w-5"}),m.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-blue-500 rounded-full animate-pulse"})]}),m.jsx(qe,{})]})]}),m.jsxs("div",{className:"flex items-center justify-end gap-2 md:hidden",children:[C&&m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:()=>b(!0),className:"relative flex items-center justify-center h-10 w-10 rounded-full bg-gradient-to-r from-yellow-500 to-red-600 text-white hover:from-yellow-600 hover:to-red-700 transition-all hover:scale-110 shadow-lg","aria-label":"Spin Wheel",children:[m.jsx(gp,{className:"h-5 w-5"}),m.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-blue-500 rounded-full animate-pulse"})]}),m.jsx(qe,{})]}),m.jsx("button",{onClick:ie,className:"rounded-md p-2 text-gray-700 transition hover:bg-gray-100","aria-label":"Toggle menu","aria-expanded":t,children:m.jsx(R9,{className:"h-6 w-6"})})]})]})}),m.jsxs("div",{className:`fixed inset-0 z-[60] md:hidden ${t?"pointer-events-auto":"pointer-events-none"}`,children:[m.jsx("div",{className:`absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ${t?"opacity-100":"opacity-0"}`,onClick:V,"aria-hidden":"true"}),m.jsxs("div",{className:`absolute top-0 right-0 h-full w-4/5 max-w-sm transform bg-white shadow-2xl transition-transform duration-300 ease-out ${t?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"mobile-menu-title",children:[m.jsxs("div",{className:"flex items-center justify-between border-b p-4",children:[m.jsxs(Ei,{to:y?"/menu":"/",className:"flex items-center gap-2",onClick:V,children:[m.jsx(Fr,{className:"h-7 w-7 text-primary-600"}),m.jsx("span",{id:"mobile-menu-title",className:"text-xl font-bold text-primary-600",children:"Rush Coffee"})]}),m.jsx("button",{onClick:V,className:"rounded-full p-2 text-gray-500 transition hover:bg-gray-100 hover:text-gray-700","aria-label":"Close menu",children:m.jsx($s,{className:"h-6 w-6"})})]}),m.jsxs("nav",{className:"flex flex-1 flex-col gap-2 overflow-y-auto p-4",children:[P.map(ne=>m.jsx(Ei,{to:ne.href,onClick:V,className:({isActive:Ee})=>`rounded-xl px-4 py-3 text-lg font-medium transition-all ${Ee?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:ne.label},ne.label)),C&&m.jsxs("div",{className:"mt-4 border-t pt-4",children:[m.jsx("p",{className:"mb-2 px-4 text-xs font-semibold uppercase tracking-wider text-gray-400",children:"Account"}),LC.map(ne=>m.jsxs(Ei,{to:ne.href,onClick:V,className:({isActive:Ee})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${Ee?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[m.jsx(ne.Icon,{className:"h-5 w-5"}),ne.label]},ne.label)),(y.role==="employee"||y.role==="admin")&&m.jsxs(Ei,{to:"/employee",onClick:V,className:({isActive:ne})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${ne?"bg-blue-50 text-blue-800":"text-blue-700 hover:bg-blue-50"}`,children:[m.jsx(Lf,{className:"h-5 w-5"}),"Employee Portal"]}),y.role==="admin"&&m.jsxs(Ei,{to:"/admin",onClick:V,className:({isActive:ne})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${ne?"bg-yellow-50 text-yellow-800":"text-yellow-700 hover:bg-yellow-50"}`,children:[m.jsx(Lf,{className:"h-5 w-5"}),"Admin Dashboard"]})]})]}),m.jsx("div",{className:"border-t p-4",children:C?m.jsxs("button",{onClick:X,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-red-50 px-6 py-3 text-base font-semibold text-red-600 transition-colors hover:bg-red-100",children:[m.jsx(HI,{className:"h-5 w-5"}),"Logout"]}):le(!0)})]})]}),m.jsx(UY,{isOpen:s,onClose:()=>a(!1),initialView:o,onVerificationNeeded:q,onAuthSuccess:ee}),m.jsx(zY,{isOpen:c,onClose:z,email:d,userId:g,onSuccess:()=>ee(),onBackToLogin:Q}),m.jsx(xte,{isOpen:S,onClose:()=>b(!1)})]})},Rte=()=>m.jsxs("footer",{className:"relative bg-[#401a00] text-primary-100",children:[m.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),m.jsxs("div",{className:"container relative z-10 mx-auto grid grid-cols-2 gap-8 px-6 py-12 md:grid-cols-2 lg:grid-cols-4",children:[m.jsxs("div",{className:"col-span-2 space-y-4 md:col-span-1 lg:col-span-1",children:[m.jsxs(ii,{to:"/",className:"flex items-center gap-2",children:[m.jsx(Fr,{className:"h-8 w-8 text-primary-500"}),m.jsx("span",{className:"font-display text-2xl font-bold text-white",children:"Rush Coffee"})]}),m.jsx("p",{className:"font-medium text-white",children:"Premium coffee, no waiting."}),m.jsx("p",{className:"text-sm leading-relaxed text-primary-200/80",children:"Join the digital queue and get your coffee fix faster than ever. Experience the future of coffee ordering."})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Quick Links"}),m.jsxs("ul",{className:"space-y-3",children:[m.jsx("li",{children:m.jsx(ii,{to:"/",className:"transition-colors hover:text-primary-400 hover:underline",children:"Home"})}),m.jsx("li",{children:m.jsx(ii,{to:"/about",className:"transition-colors hover:text-primary-400 hover:underline",children:"About Us"})}),m.jsx("li",{children:m.jsx(ii,{to:"/menu",className:"transition-colors hover:text-primary-400 hover:underline",children:"Menu"})}),m.jsx("li",{children:m.jsx(ii,{to:"/faq",className:"transition-colors hover:text-primary-400 hover:underline",children:"FAQ"})}),m.jsx("li",{children:m.jsx(ii,{to:"/contact",className:"transition-colors hover:text-primary-400 hover:underline",children:"Contact"})})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Legal"}),m.jsxs("ul",{className:"space-y-3",children:[m.jsx("li",{children:m.jsx(ii,{to:"/terms",className:"transition-colors hover:text-primary-400 hover:underline",children:"Terms of Service"})}),m.jsx("li",{children:m.jsx(ii,{to:"/privacy",className:"transition-colors hover:text-primary-400 hover:underline",children:"Privacy Policy"})}),m.jsx("li",{children:m.jsx(ii,{to:"/cookies",className:"transition-colors hover:text-primary-400 hover:underline",children:"Cookie Policy"})})]})]}),m.jsxs("div",{className:"col-span-2 md:col-span-1 lg:col-span-1",children:[m.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Contact & Connect"}),m.jsx("address",{className:"not-italic",children:m.jsxs("ul",{className:"space-y-4",children:[m.jsxs("li",{className:"flex items-start gap-3",children:[m.jsx(I9,{className:"mt-1 h-5 w-5 flex-shrink-0 text-primary-500"}),m.jsx("span",{children:"11 Visayan Ave. St. Galas, Quezon City, Philippines"})]}),m.jsxs("li",{className:"flex items-center gap-3",children:[m.jsx(Nb,{className:"h-5 w-5 flex-shrink-0 text-primary-500"}),m.jsx("a",{href:"tel:09304641022",className:"transition-colors hover:text-white",children:"0930 464 1022"})]}),m.jsxs("li",{className:"flex items-center gap-3",children:[m.jsx(qh,{className:"h-5 w-5 flex-shrink-0 text-primary-500"}),m.jsx("a",{href:"mailto:hello@rushcoffee.ph",className:"transition-colors hover:text-white",children:"hello@rushcoffee.ph"})]})]})}),m.jsxs("div",{className:"mt-8 flex gap-4",children:[m.jsx("a",{href:"https://www.facebook.com/profile.php?id=61551613276320",target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",className:"rounded-full bg-white/5 p-2 transition-colors hover:bg-primary-600 hover:text-white",children:m.jsx(p9,{className:"h-5 w-5"})}),m.jsx("a",{href:"https://www.instagram.com/Rush_Coffee2023/",target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",className:"rounded-full bg-white/5 p-2 transition-colors hover:bg-primary-600 hover:text-white",children:m.jsx(w9,{className:"h-5 w-5"})})]})]})]}),m.jsx("div",{className:"relative z-10 border-t border-white/10 bg-black/20",children:m.jsxs("div",{className:"container mx-auto flex flex-col items-center justify-between gap-4 px-6 py-6 text-center text-sm text-primary-300 sm:flex-row",children:[m.jsx("p",{children:" 2023 Rush Coffee. All rights reserved."}),m.jsxs("p",{className:"flex items-center gap-1",children:["Made with ",m.jsx("span",{className:"text-red-500",children:""})," and ",m.jsx("span",{className:"text-amber-500",children:""})]})]})})]}),F5=A.createContext(void 0),B5=()=>{const t=A.useContext(F5);if(t===void 0)throw new Error("useNotification must be used within a NotificationProvider");return t},Cte=({children:t})=>{const[e,n]=A.useState({message:"",type:"info",isVisible:!1}),i=A.useCallback((a,o="info")=>{n({message:a,type:o,isVisible:!0}),setTimeout(()=>{n(l=>({...l,isVisible:!1}))},5e3)},[]),r=A.useCallback(()=>{n(a=>({...a,isVisible:!1}))},[]),s={notification:e,showNotification:i,hideNotification:r};return m.jsx(F5.Provider,{value:s,children:t})},Nte=()=>{const{notification:t,hideNotification:e}=B5(),n={success:m.jsx(lD,{className:"h-6 w-6 text-green-500"}),info:m.jsx(hD,{className:"h-6 w-6 text-blue-500"}),warning:m.jsx(J9,{className:"h-6 w-6 text-amber-500"}),error:m.jsx(c9,{className:"h-6 w-6 text-red-500"})},i={success:"bg-white border-green-100",info:"bg-white border-blue-100",warning:"bg-white border-amber-100",error:"bg-white border-red-100"};return m.jsx(Wp,{children:t.isVisible&&m.jsxs(ut.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{type:"spring",stiffness:300,damping:30},className:`fixed top-6 left-0 right-0 z-[100] mx-auto flex w-[90%] max-w-md items-center gap-3 rounded-xl border p-4 shadow-xl ${i[t.type]}`,children:[m.jsx("div",{className:"flex-shrink-0",children:n[t.type]}),m.jsx("div",{className:"flex-1",children:m.jsx("p",{className:"font-medium text-gray-900",children:t.message})}),m.jsx("button",{onClick:e,className:"flex-shrink-0 rounded-full p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-500",children:m.jsx($s,{className:"h-4 w-4"})})]})})},q5=A.createContext(void 0),Fne=()=>{const t=A.useContext(q5);if(t===void 0)throw new Error("useOrder must be used within an OrderProvider");return t},Pte=({children:t})=>{const[e,n]=A.useState(null),[i,r]=A.useState([]),[s,a]=A.useState(!0),{currentUser:o}=Xr(),{showNotification:l}=B5(),c=A.useRef(void 0);A.useEffect(()=>{let f;return o?(a(!0),f=$e.collection("orders").where("userId","==",o.uid).onSnapshot(S=>{const b=S.docs.map(_=>{var v;return{id:_.id,..._.data(),timestamp:((v=_.data().timestamp)==null?void 0:v.toDate())||new Date}});S.docChanges().forEach(_=>{if(_.type==="modified"){const v=_.doc.data();v.status==="cancelled"&&l(`Your order ${v.orderNumber} has been cancelled. Reason: ${v.cancellationReason||"No reason provided"}`,"error")}}),b.sort((_,v)=>v.timestamp.getTime()-_.timestamp.getTime()),r(b);const y=b.find(_=>_.status!=="completed"&&_.status!=="cancelled")||null;n(y),a(!1)},S=>{console.error("Error listening to order history:",S),a(!1)})):(r([]),n(null),a(!1)),()=>{f&&f()}},[o,l]),A.useEffect(()=>{const f=e==null?void 0:e.status,g=c.current;if(f==="ready"&&g!=="ready"){const E=e==null?void 0:e.orderItems.map(S=>S.productName).join(", ");l(`Your order for ${E} is ready!`,"success")}c.current=f},[e==null?void 0:e.status,e==null?void 0:e.orderItems,l]);const d={activeOrder:e,setActiveOrder:n,orderHistory:i,addOrderToHistory:async f=>{try{const g=await $e.collection("orders").add({...f,timestamp:jt.firestore.FieldValue.serverTimestamp()}),E={...f,id:g.id,timestamp:new Date};r(S=>[E,...S]),n(E)}catch(g){console.error("Error adding order to Firestore:",g)}},isHistoryLoading:s};return m.jsx(q5.Provider,{value:d,children:t})},Dte=({children:t,className:e="",variant:n="solid",color:i="primary",size:r="md"})=>{const s="inline-flex items-center gap-1.5 rounded-full font-medium",a={xs:"px-2 py-0.5 text-xs",sm:"px-2.5 py-1 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-1.5 text-base"},o={primary:"bg-primary-100 text-primary-800",success:"bg-green-100 text-green-800",warning:"bg-amber-100 text-amber-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800",gray:"bg-gray-100 text-gray-800"},l={primary:"border-2 border-primary-300 text-primary-700 bg-transparent",success:"border-2 border-green-300 text-green-700 bg-transparent",warning:"border-2 border-amber-300 text-amber-700 bg-transparent",error:"border-2 border-red-300 text-red-700 bg-transparent",info:"border-2 border-blue-300 text-blue-700 bg-transparent",gray:"border-2 border-gray-300 text-gray-700 bg-transparent"},c={primary:"bg-primary-500",success:"bg-green-500",warning:"bg-amber-500",error:"bg-red-500",info:"bg-blue-500",gray:"bg-gray-500"},h=n==="outline"?l[i]:o[i];return m.jsxs("span",{className:`${s} ${a[r]} ${h} ${e}`,children:[n==="dot"&&m.jsx("span",{className:`h-2 w-2 rounded-full ${c[i]} animate-pulse`}),t]})},H5=()=>{const[t,e]=A.useState([]),[n,i]=A.useState(!0),[r,s]=A.useState(null);return A.useEffect(()=>{(async()=>{try{i(!0);const l=await $e.collection("ingredients").where("isTopping","==",!0).get(),c=[];l.forEach(h=>{const d=h.data();d.stock>0&&d.toppingPrice!==void 0&&d.portionSize!==void 0&&c.push({id:h.id,name:d.name,price:d.toppingPrice,stock:d.stock,portionSize:d.portionSize})}),c.sort((h,d)=>h.name.localeCompare(d.name)),e(c),s(null)}catch(o){console.error("Error fetching toppings:",o),s("Failed to load toppings"),e([{id:"pearls",name:"Pearls",price:10,stock:3e3,portionSize:30},{id:"pudding",name:"Pudding",price:15,stock:2e3,portionSize:40},{id:"grass-jelly",name:"Grass Jelly",price:15,stock:2500,portionSize:35}])}finally{i(!1)}})()},[]),{toppings:t,isLoading:n,error:r}},kte=({cartItems:t,isOpen:e,onClose:n,onUpdateQuantity:i,onRemoveItem:r,onCheckout:s,onEditItem:a,selectedItemIds:o,onToggleItemSelection:l,onSelectAll:c,onDeselectAll:h})=>{const d=Ao(),f=t.reduce((I,k)=>I+k.quantity,0),{toppings:g}=H5(),E=t.length>0&&o.length===t.length,S=o.length>0&&o.length<t.length,b=I=>I?I.reduce((k,O)=>{const T=g.find(x=>x.name===O);return k+((T==null?void 0:T.price)||0)},0):0,y=t.filter(I=>o.includes(I.id)).reduce((I,k)=>{var T;const O=b((T=k.customizations)==null?void 0:T.toppings);return I+(k.selectedSize.price+O)*k.quantity},0),_=()=>{n(),d("/menu")},v=()=>{E?h():c()};return m.jsxs(m.Fragment,{children:[m.jsx("div",{onClick:n,className:`fixed inset-0 z-40 bg-black/50 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"}`,"aria-hidden":"true"}),m.jsx("aside",{className:`fixed top-0 right-0 z-50 h-full w-full transform bg-white shadow-2xl transition-transform duration-300 ease-in-out sm:w-96 md:w-[450px] ${e?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"cart-heading",children:m.jsxs("div",{className:"flex h-full flex-col",children:[m.jsxs("header",{className:"flex items-center justify-between border-b border-gray-200 p-6",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("h2",{id:"cart-heading",className:"font-display text-xl font-bold text-coffee-900",children:"Your Order"}),f>0&&m.jsxs(Dte,{children:[f," ",f===1?"item":"items"]})]}),m.jsx("button",{onClick:n,className:"rounded-md p-2 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-800","aria-label":"Close cart",children:m.jsx($s,{className:"h-6 w-6"})})]}),t.length>0&&m.jsx("div",{className:"border-b border-gray-200 px-6 py-3 bg-gray-50/50 backdrop-blur-sm sticky top-0 z-10",children:m.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group select-none",children:[m.jsxs("div",{className:"relative flex items-center justify-center h-5 w-5",children:[m.jsx("input",{type:"checkbox",checked:E,onChange:v,className:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border-2 border-gray-300 bg-white transition-all checked:border-primary-600 checked:bg-primary-600 hover:border-primary-500 focus:ring-2 focus:ring-primary-500/20"}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 peer-checked:opacity-100 transition-opacity duration-200",children:S&&!E?m.jsx(d0,{className:"h-3.5 w-3.5 text-white",strokeWidth:3}):m.jsx(qI,{className:"h-3.5 w-3.5 text-white",strokeWidth:3})})]}),m.jsx("span",{className:"text-sm font-semibold text-gray-700 group-hover:text-primary-700 transition-colors",children:E?"Deselect All":"Select All"}),o.length>0&&m.jsxs("span",{className:"ml-auto text-xs font-medium text-primary-600 bg-primary-50 px-2 py-1 rounded-full",children:[o.length," selected"]})]})}),t.length===0?m.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-4 p-6 text-center",children:[m.jsx(Fr,{className:"h-24 w-24 text-gray-300 opacity-50"}),m.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Your cart is empty"}),m.jsx("p",{className:"text-gray-500",children:"Looks like you haven't added anything yet."}),m.jsx("button",{onClick:_,className:"mt-4 rounded-full bg-primary-600 px-6 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-primary-700",children:"Start Ordering"})]}):m.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:m.jsx("ul",{className:"space-y-3",children:t.map(I=>{var P;const k=I.selectedSize.name==="Combo Meal",O=k?`${I.product.name} (${I.selectedSize.name})`:I.product.name,T=k&&I.product.comboImageUrl?I.product.comboImageUrl:I.product.imageUrl,x=b((P=I.customizations)==null?void 0:P.toppings),R=I.selectedSize.price+x,C=o.includes(I.id);return m.jsxs("li",{className:`relative flex gap-4 p-5 rounded-xl transition-all ${C?"bg-coffee-50 border-2 border-coffee-200":"bg-gray-50/50 border-2 border-transparent hover:border-gray-200"}`,children:[m.jsx("button",{onClick:()=>r(I.id),className:"absolute top-5 right-5 z-10 rounded-full p-2 text-gray-400 transition-all hover:bg-red-50 hover:text-red-600","aria-label":`Remove ${O} from cart`,children:m.jsx(Q9,{className:"h-4 w-4"})}),m.jsxs("div",{className:"pt-1 relative flex items-center justify-center h-5 w-5",children:[m.jsx("input",{type:"checkbox",checked:C,onChange:()=>l(I.id),className:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border-2 border-gray-300 bg-white transition-all checked:border-primary-600 checked:bg-primary-600 hover:border-primary-500 focus:ring-2 focus:ring-primary-500/20"}),m.jsx(qI,{className:"absolute h-3.5 w-3.5 text-white opacity-0 peer-checked:opacity-100 transition-opacity duration-200 pointer-events-none",strokeWidth:3})]}),m.jsx("button",{onClick:()=>a(I),className:"h-20 w-20 flex-shrink-0 overflow-hidden rounded-lg border border-gray-100 shadow-sm hover:border-primary-300 transition-colors cursor-pointer",children:m.jsx("img",{src:T,alt:O,className:"h-full w-full object-cover object-center"})}),m.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[m.jsxs("button",{onClick:()=>a(I),className:"text-left w-full hover:opacity-75 transition-opacity",children:[m.jsx("h4",{className:"font-bold text-gray-900 truncate text-base pr-8",children:O}),m.jsxs("div",{className:"mt-1.5 flex items-center justify-between",children:[m.jsx("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:I.selectedSize.name}),m.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["",I.selectedSize.price.toFixed(2)]})]})]}),I.customizations&&m.jsxs("div",{className:"mt-2 space-y-1.5",children:[(I.customizations.sugarLevel||I.customizations.iceLevel)&&m.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[I.customizations.sugarLevel&&m.jsxs("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:["Sugar: ",I.customizations.sugarLevel]}),I.customizations.iceLevel&&m.jsxs("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:["Ice: ",I.customizations.iceLevel]})]}),I.customizations.toppings&&I.customizations.toppings.length>0&&m.jsx("div",{className:"flex flex-col gap-1.5",children:I.customizations.toppings.map(V=>{const D=g.find(ee=>ee.name===V),q=(D==null?void 0:D.price)||0;return m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:V}),m.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["+",q.toFixed(2)]})]},V)})})]}),m.jsxs("div",{className:"mt-auto pt-3 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center rounded-full border border-gray-200 bg-white shadow-sm",children:[m.jsx("button",{onClick:()=>i(I.id,I.quantity-1),disabled:I.quantity===1,className:"flex h-8 w-8 items-center justify-center rounded-l-full text-gray-500 transition hover:bg-gray-50 hover:text-gray-700 disabled:cursor-not-allowed disabled:opacity-50","aria-label":`Decrease quantity of ${O}`,children:m.jsx(d0,{className:"h-3.5 w-3.5"})}),m.jsx("span",{className:"w-8 text-center text-sm font-semibold text-gray-900","aria-live":"polite",children:I.quantity}),m.jsx("button",{onClick:()=>i(I.id,I.quantity+1),className:"flex h-8 w-8 items-center justify-center rounded-r-full text-gray-500 transition hover:bg-gray-50 hover:text-gray-700","aria-label":`Increase quantity of ${O}`,children:m.jsx(dD,{className:"h-3.5 w-3.5"})})]}),m.jsxs("p",{className:"font-bold text-lg text-gray-900",children:["",(R*I.quantity).toFixed(2)]})]})]})]},I.id)})})}),t.length>0&&m.jsxs("footer",{className:"mt-auto border-t border-gray-200 p-6 bg-gray-50/50",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-base font-medium text-gray-600",children:"Subtotal"}),m.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["",y.toFixed(2)]})]}),o.length<t.length&&m.jsx("p",{className:"mt-1 text-xs text-amber-600",children:o.length===0?"Please select items to checkout":`${t.length-o.length} item(s) not selected`}),m.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Taxes and service fee calculated at checkout."}),m.jsx("div",{className:"mt-6",children:m.jsxs("button",{onClick:s,disabled:o.length===0,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-primary-600 px-6 py-3.5 text-base font-bold text-white shadow-lg shadow-primary-600/20 transition-all hover:bg-primary-700 hover:shadow-xl hover:scale-[1.02] active:scale-[0.98] focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-gray-400 disabled:opacity-50 disabled:shadow-none disabled:scale-100",children:["Proceed to Checkout",m.jsx(e9,{className:"h-5 w-5"})]})})]})]})})]})},Ah={sugarLevels:[{value:"0%",label:"No Sugar",sugarAmount:0,sugarIngredientId:"brown-sugar-syrup"},{value:"25%",label:"25% Sweet",sugarAmount:5,sugarIngredientId:"brown-sugar-syrup"},{value:"50%",label:"50% Sweet",sugarAmount:10,sugarIngredientId:"brown-sugar-syrup"},{value:"75%",label:"75% Sweet",sugarAmount:15,sugarIngredientId:"brown-sugar-syrup"},{value:"100%",label:"Regular (100%)",sugarAmount:20,sugarIngredientId:"brown-sugar-syrup"}],iceLevels:[{value:"None",label:"No Ice",iceAmount:0,iceIngredientId:"ice-cubes"},{value:"Less",label:"Less Ice",iceAmount:50,iceIngredientId:"ice-cubes"},{value:"Normal",label:"Normal Ice",iceAmount:100,iceIngredientId:"ice-cubes"},{value:"Extra",label:"Extra Ice",iceAmount:150,iceIngredientId:"ice-cubes"}]},Ote=async()=>{try{const t=$e.collection("settings").doc("customizationOptions");(await t.get()).exists?console.log(" Customization options already exist in Firestore"):(console.log("Seeding customization options to Firestore..."),await t.set(Ah),console.log(" Customization options seeded successfully"))}catch(t){throw console.error(" Error seeding customization options:",t),t}},Vte=async()=>{try{const t=$e.collection("settings").doc("customizationOptions"),e=await t.get();return e.exists?e.data():(await Ote(),(await t.get()).data())}catch(t){return console.error("Error fetching customization options:",t),Ah}},Mte=()=>{const[t,e]=A.useState(Ah),[n,i]=A.useState(!0),[r,s]=A.useState(null);return A.useEffect(()=>{(async()=>{try{i(!0);const o=await Vte();o&&o.sugarLevels&&o.iceLevels?(e(o),s(null)):e(Ah)}catch(o){console.error("Error fetching customization options:",o),s("Failed to load customization options"),e(Ah)}finally{i(!1)}})()},[]),{options:t,isLoading:n,error:r}},Lte=({product:t,selectedSize:e,isOpen:n,onClose:i,onConfirm:r,onBuyNow:s,initialCustomizations:a,initialQuantity:o=1})=>{const[l,c]=A.useState("100%"),[h,d]=A.useState("Normal"),[f,g]=A.useState("None"),[E,S]=A.useState(1),[b,y]=A.useState(e),{toppings:_,isLoading:v}=H5(),{options:I,isLoading:k}=Mte();Hn.useEffect(()=>{if(n){if(a){c(a.sugarLevel||"100%"),d(a.iceLevel||"Normal");const q=a.toppings&&a.toppings.length>0?a.toppings[0]:"None";g(q)}else c("100%"),d("Normal"),g("None");S(o),y(e)}},[n,a,o,e]);const O=()=>{const q=["Coffee Based","Non-Coffee Based","Matcha Series","Refreshments"].includes(t.category),ee={toppings:f!=="None"?[f]:[]};return q&&(ee.sugarLevel=l,ee.iceLevel=h),ee},T=()=>{r(O(),E,P/E,b),i()},x=[{id:"none",name:"None",price:0},..._.map(q=>({id:q.id,name:q.name,price:q.price}))],R=x.find(q=>q.name===f),C=(R==null?void 0:R.price)||0,P=(b.price+C)*E,V=v||k,D=m.jsxs("button",{onClick:T,disabled:V,className:"w-full flex items-center justify-between rounded-xl bg-primary-600 px-6 py-3 text-white font-bold shadow-lg hover:bg-primary-700 hover:shadow-xl hover:scale-[1.01] active:scale-[0.99] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[m.jsx("span",{children:"Add to Order"}),m.jsxs("span",{className:"text-lg tabular-nums",children:["",P.toFixed(2)]})]});return m.jsx(xE,{isOpen:n,onClose:i,hideHeader:!0,hideCloseButton:!0,footer:D,className:"sm:max-w-lg",children:m.jsxs("div",{children:[m.jsxs("div",{className:"-mx-6 -mt-6 mb-2",children:[m.jsxs("div",{className:"bg-[#F5F5F0] w-full h-96 flex items-center justify-center relative overflow-hidden",children:[m.jsx("button",{onClick:i,className:"absolute top-4 right-4 z-10 p-2 rounded-full bg-white/50 hover:bg-white/80 backdrop-blur-sm transition-colors text-gray-600 hover:text-gray-900",children:m.jsx($s,{className:"h-5 w-5"})}),m.jsx("img",{src:t.imageUrl,alt:t.name,className:"h-full w-full object-cover object-center"})]}),m.jsxs("div",{className:"px-6 pt-4",children:[m.jsx("div",{className:"flex items-center justify-between mb-2",children:m.jsx("span",{className:"text-sm font-medium text-coffee-600 tracking-wide uppercase",children:t.category})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.name}),m.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:t.description})]})]}),V?m.jsx("div",{className:"flex items-center justify-center py-12",children:m.jsx(hi,{className:"h-8 w-8 animate-spin text-coffee-600"})}):m.jsxs("div",{className:"space-y-1",children:[m.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[m.jsx("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center gap-2",children:"Size"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:t.sizes.map(q=>m.jsx("button",{onClick:()=>y(q),className:`flex-1 min-w-[80px] rounded-lg py-2 text-sm font-semibold transition-all border ${b.name===q.name?"bg-primary-600 text-white border-primary-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:border-primary-300 hover:bg-primary-50"}`,children:q.name},q.name))})]}),["Coffee Based","Non-Coffee Based","Matcha Series","Refreshments"].includes(t.category)&&m.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[m.jsx("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center gap-2",children:"Sugar Level"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:I.sugarLevels.map(q=>m.jsx("button",{onClick:()=>c(q.value),className:`flex-1 min-w-[60px] rounded-lg py-2 text-sm font-semibold transition-all border ${l===q.value?"bg-primary-600 text-white border-primary-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:border-primary-300 hover:bg-primary-50"}`,children:q.value},q.value))})]}),["Coffee Based","Non-Coffee Based","Matcha Series","Refreshments"].includes(t.category)&&m.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[m.jsx("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center gap-2",children:"Ice Level"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:I.iceLevels.map(q=>m.jsx("button",{onClick:()=>d(q.value),className:`flex-1 min-w-[60px] rounded-lg py-2 text-sm font-semibold transition-all border ${h===q.value?"bg-primary-600 text-white border-primary-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:border-primary-300 hover:bg-primary-50"}`,children:q.value},q.value))})]}),m.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[m.jsxs("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center justify-between",children:[m.jsx("span",{children:"Toppings"}),m.jsx("span",{className:"text-xs font-normal text-gray-500 normal-case",children:"Select one"})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(q=>{const ee=f===q.name;return m.jsxs("button",{onClick:()=>g(q.name),className:`
                                                relative px-3 py-2 rounded-lg text-sm font-medium transition-all border flex items-center gap-2
                                                ${ee?"bg-primary-50 border-primary-600 text-primary-700 shadow-sm ring-1 ring-primary-600":"bg-white border-gray-200 text-gray-600 hover:border-primary-300 hover:bg-gray-50"}
                                            `,children:[m.jsx("span",{children:q.name}),q.price>0&&m.jsxs("span",{className:`text-xs font-bold ${ee?"text-primary-600":"text-gray-400"}`,children:["+",q.price]})]},q.id)})})]}),m.jsxs("div",{className:"flex items-center justify-between py-4 -mx-6 px-6",children:[m.jsx("span",{className:"font-bold text-gray-900",children:"Quantity"}),m.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 rounded-lg p-1 border border-gray-200",children:[m.jsx("button",{onClick:()=>S(Math.max(1,E-1)),className:"h-8 w-8 rounded-md bg-white shadow-sm flex items-center justify-center text-gray-600 hover:text-coffee-600 disabled:opacity-50 transition-colors",disabled:E<=1,children:m.jsx(d0,{className:"h-4 w-4"})}),m.jsx("span",{className:"w-8 text-center font-bold text-gray-900 tabular-nums",children:E}),m.jsx("button",{onClick:()=>S(E+1),className:"h-8 w-8 rounded-md bg-primary-600 shadow-sm flex items-center justify-center text-white hover:bg-primary-700 transition-colors",children:m.jsx(dD,{className:"h-4 w-4"})})]})]})]})]})})},Ute=()=>{const{pathname:t}=vi();return A.useEffect(()=>{window.scrollTo(0,0)},[t]),null},UC=({allowedRoles:t,redirectTo:e})=>{const{currentUser:n,loading:i}=Xr(),r=vi();return i?m.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-gray-50",children:m.jsx(hi,{className:"h-12 w-12 animate-spin text-primary-600"})}):n?!t||t.length===0?m.jsx(zI,{}):n.role&&t.includes(n.role)?m.jsx(zI,{}):m.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gradient-to-br from-red-50 to-orange-50 px-4",children:m.jsxs("div",{className:"max-w-md text-center",children:[m.jsx("div",{className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-red-100",children:m.jsx(B9,{className:"h-10 w-10 text-red-600"})}),m.jsx("h1",{className:"mb-3 font-display text-4xl font-bold text-gray-900",children:"Access Denied"}),m.jsx("p",{className:"mb-6 text-lg text-gray-600",children:"You don't have permission to access this page."}),m.jsxs("p",{className:"mb-8 text-sm text-gray-500",children:["Your role: ",m.jsx("span",{className:"font-semibold capitalize",children:n.role||"customer"}),m.jsx("br",{}),"Required role: ",m.jsx("span",{className:"font-semibold capitalize",children:t.join(" or ")})]}),m.jsx("button",{onClick:()=>window.history.back(),className:"rounded-lg bg-primary-600 px-6 py-3 font-semibold text-white transition-colors hover:bg-primary-700",children:"Go Back"})]})}):m.jsx(h3,{to:e||"/auth/login",state:{from:r},replace:!0})},jte=()=>m.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-primary-50",children:m.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[m.jsx(Fr,{className:"h-16 w-16 text-primary-600"}),m.jsxs("div",{className:"flex items-center gap-2 text-primary-800",children:[m.jsx(hi,{className:"h-6 w-6 animate-spin"}),m.jsx("span",{className:"font-medium",children:"Brewing your page..."})]})]})}),zte=()=>{const t=Ao(),[e,n]=A.useState(!1),[i,r]=A.useState(!1),[s,a]=A.useState(""),[o,l]=A.useState(()=>{const O=localStorage.getItem("chat_history");return O?JSON.parse(O,(T,x)=>T==="timestamp"?new Date(x):x):[{id:"1",text:"Hello, welcome to Rush Coffee!  I'm Rush Bot. How can I help you today?",sender:"bot",timestamp:new Date}]}),[c,h]=A.useState(!1),[d,f]=A.useState(!1),[g,E]=A.useState(!0),S=A.useRef(null),b=[{id:2,text:" Store Hours",message:"hours"},{id:4,text:" Location",message:"location"},{id:5,text:" Contact Us",message:"contact"},{id:7,text:" Payment Methods",message:"payment"}],y=()=>{var O;(O=S.current)==null||O.scrollIntoView({behavior:"smooth"})};A.useEffect(()=>{y(),localStorage.setItem("chat_history",JSON.stringify(o))},[o,c]),A.useEffect(()=>{const O=T=>{T.key==="Escape"&&e&&n(!1)};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[e]),A.useEffect(()=>{const O=setTimeout(()=>{f(!0)},2e3);return()=>clearTimeout(O)},[]),A.useEffect(()=>{if(d){const O=setTimeout(()=>{f(!1)},5e3);return()=>clearTimeout(O)}},[d]);const _=()=>{n(!e),f(!1)},v=O=>{const T={id:Date.now().toString(),text:O,sender:"user",timestamp:new Date};l(x=>[...x,T]),h(!0),setTimeout(()=>{const x=I(O),R={id:(Date.now()+1).toString(),text:x.text,sender:"bot",timestamp:new Date,action:x.action};l(C=>[...C,R]),h(!1)},1e3)},I=O=>{const T=O.toLowerCase();return T.includes("hello")||T.includes("hi")||T.includes("hey")?{text:"Hello! Welcome to Rush Coffee. What can I get for you? "}:T.includes("menu")||T.includes("order")||T.includes("drink")||T.includes("food")?{text:"You can explore our delicious menu by clicking the button below. We have Coffee, Non-Coffee, Matcha, and Meals! ",action:{label:" See Menu",path:"/menu"}}:T.includes("hours")||T.includes("open")||T.includes("close")||T.includes("time")?{text:"We are open daily from 7:00 AM to 10:00 PM. See you soon! "}:T.includes("location")||T.includes("where")||T.includes("address")?{text:"We are located at 11 Visayan Ave. St. Galas, Quezon City, Philippines. Come visit us for a fresh brew! "}:T.includes("recommend")||T.includes("best")||T.includes("suggestion")?{text:"I highly recommend our signature Spanish Latte!  It's a customer favorite. If you love matcha, our Dirty Matcha is a must-try!",action:{label:" View Recommendations",path:"/menu"}}:T.includes("contact")||T.includes("call")||T.includes("phone")||T.includes("email")?{text:"You can reach us at 0912-345-6789 or email us at hello@rushcoffee.com. We'd love to hear from you! "}:T.includes("bestseller")||T.includes("best")||T.includes("favorite")||T.includes("popular")?{text:"Our customer favorites are the Spanish Latte, Dirty Matcha, and Caramel Macchiato!  You have to try them!",action:{label:" Order Now",path:"/menu"}}:T.includes("payment")||T.includes("pay")||T.includes("gcash")||T.includes("cash")?{text:"We only accept Over-the-Counter Cash payments at the moment. "}:T.includes("thank")?{text:"You're welcome! Let me know if you need anything else. "}:T.includes("bye")?{text:"Goodbye! Have a wonderful day! "}:{text:"I'm not sure about that, but I'd love to help! You can ask me about our menu, opening hours, or location."}},k=O=>{if(O==null||O.preventDefault(),!s.trim())return;const T={id:Date.now().toString(),text:s,sender:"user",timestamp:new Date};l(x=>[...x,T]),a(""),h(!0),setTimeout(()=>{const x=I(T.text),R={id:(Date.now()+1).toString(),text:x.text,sender:"bot",timestamp:new Date,action:x.action};l(C=>[...C,R]),h(!1)},1e3)};return m.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end pointer-events-none",children:[m.jsxs(Wp,{children:[d&&!e&&m.jsx(ut.div,{initial:{opacity:0,y:10,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.9},className:"pointer-events-auto mb-4 mr-2 max-w-[200px] cursor-pointer rounded-2xl rounded-br-none bg-white p-4 shadow-xl dark:bg-gray-800",onClick:_,children:m.jsxs("div",{className:"relative",children:[m.jsx("button",{onClick:O=>{O.stopPropagation(),f(!1)},className:"absolute -right-2 -top-2 rounded-full bg-gray-100 p-1 hover:bg-gray-200 dark:bg-gray-700",children:m.jsx($s,{className:"h-3 w-3 text-gray-500"})}),m.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:"Hello, welcome to Rush Coffee!  I'm Rush Bot."})]})}),e&&m.jsxs(ut.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.2},className:"pointer-events-auto mb-4 flex h-[500px] w-[350px] flex-col overflow-hidden rounded-2xl border border-white/20 bg-white/90 shadow-2xl backdrop-blur-md dark:bg-gray-900/90 sm:w-[380px]",children:[m.jsxs("div",{className:"flex items-center justify-between bg-primary-600 px-4 py-3 text-white",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-white/20",children:m.jsx(GI,{className:"h-5 w-5 text-white"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-sm",children:"Rush Assistant"}),m.jsxs("p",{className:"text-[10px] text-primary-100 flex items-center gap-1",children:[m.jsx("span",{className:"block h-1.5 w-1.5 rounded-full bg-green-400 animate-pulse"}),"Online"]})]})]}),m.jsx("button",{onClick:()=>n(!1),className:"rounded-full p-1 hover:bg-white/20 transition-colors",children:m.jsx(P9,{className:"h-4 w-4"})})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:[o.map(O=>m.jsx("div",{className:`flex ${O.sender==="user"?"justify-end":"justify-start"}`,children:m.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-2 text-sm shadow-sm ${O.sender==="user"?"bg-primary-600 text-white rounded-br-none":"bg-white text-gray-800 border border-gray-100 rounded-bl-none"}`,children:[m.jsx("p",{children:O.text}),O.action&&m.jsxs("button",{onClick:()=>{t(O.action.path),n(!1)},className:"mt-2 flex items-center gap-1 rounded-lg bg-primary-50 px-3 py-1.5 text-xs font-medium text-primary-700 hover:bg-primary-100 transition-colors w-full justify-center border border-primary-100",children:[O.action.label,m.jsx(h9,{className:"h-3 w-3"})]}),m.jsx("p",{className:`mt-1 text-[9px] ${O.sender==="user"?"text-primary-100":"text-gray-400"}`,children:O.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},O.id)),c&&m.jsx("div",{className:"flex justify-start",children:m.jsx("div",{className:"bg-white border border-gray-100 rounded-2xl rounded-bl-none px-4 py-3 shadow-sm",children:m.jsxs("div",{className:"flex gap-1",children:[m.jsx("span",{className:"h-2 w-2 rounded-full bg-gray-400 animate-bounce [animation-delay:-0.3s]"}),m.jsx("span",{className:"h-2 w-2 rounded-full bg-gray-400 animate-bounce [animation-delay:-0.15s]"}),m.jsx("span",{className:"h-2 w-2 rounded-full bg-gray-400 animate-bounce"})]})})}),m.jsx("div",{ref:S})]}),m.jsxs(ut.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"border-t border-gray-100 bg-white p-2",children:[m.jsx("p",{className:"text-[10px] font-semibold text-gray-600 mb-2",children:"Quick Actions"}),m.jsx("div",{className:"flex flex-wrap gap-1.5",children:b.map(O=>m.jsx(ut.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>v(O.message),className:"px-3 py-1.5 text-[10px] font-semibold text-primary-700 bg-white border-2 border-primary-200 rounded-full hover:bg-primary-50 hover:border-primary-400 transition-all duration-200 shadow-sm hover:shadow-md",children:O.text},O.id))})]}),m.jsx("form",{onSubmit:k,className:"border-t-2 border-primary-200 bg-gray-50 p-3 shadow-inner",children:m.jsxs("div",{className:"relative flex items-center gap-2",children:[m.jsx("input",{type:"text",value:s,onChange:O=>a(O.target.value),placeholder:"Type a message...",className:"flex-1 rounded-full border-2 border-primary-200 bg-white px-4 py-2 text-sm focus:border-primary-500 focus:bg-white focus:outline-none focus:ring-2 focus:ring-primary-500/20"}),m.jsx("button",{type:"submit",disabled:!s.trim(),className:"flex h-9 w-9 items-center justify-center rounded-full bg-primary-600 text-white transition-colors hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:m.jsx(U9,{className:"h-4 w-4"})})]})})]})]}),m.jsxs("div",{className:"relative flex items-center justify-center",children:[!e&&m.jsx(ut.div,{initial:{scale:.8,opacity:.5},animate:{scale:1.5,opacity:0},transition:{duration:2,repeat:1/0,ease:"easeOut"},className:"absolute h-14 w-14 rounded-full bg-primary-500/30"}),m.jsx(ut.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:_,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),className:`pointer-events-auto flex h-14 w-14 items-center justify-center rounded-full shadow-xl shadow-primary-600/20 transition-all duration-300 ${e?"bg-gray-800 text-white rotate-90":"bg-gradient-to-br from-primary-600 to-primary-500 text-white hover:shadow-2xl hover:shadow-primary-600/30"}`,children:m.jsx(Wp,{mode:"wait",children:e?m.jsx(ut.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:.2},children:m.jsx($s,{className:"h-6 w-6"})},"close"):m.jsx(ut.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.5,opacity:0},transition:{duration:.2},children:m.jsx(GI,{className:"h-7 w-7"})},"chat")})})]})]})},Fte=A.lazy(()=>Pe(()=>import("./HomePage-ByX4Rzgj.js"),__vite__mapDeps([0,1,2,3,4,5]))),Bte=A.lazy(()=>Pe(()=>import("./LoginPage-yBe-3hJ_.js"),[])),qte=A.lazy(()=>Pe(()=>import("./RegisterPage-DQ4787b0.js"),[])),Hte=A.lazy(()=>Pe(()=>import("./ForgotPasswordPage-D47QwBOf.js"),__vite__mapDeps([6,7]))),Gte=A.lazy(()=>Pe(()=>import("./MenuPage-Bcnfqlyt.js"),__vite__mapDeps([8,9,10,11,12,13]))),$te=A.lazy(()=>Pe(()=>import("./CheckoutPage-BFJjtABz.js"),__vite__mapDeps([14,1,3,15,16,17,18,19]))),Kte=A.lazy(()=>Pe(()=>import("./QueuePage-obZkXyXG.js"),__vite__mapDeps([20,1,21,5,18,2,9,22,17,23,10]))),Wte=A.lazy(()=>Pe(()=>import("./RewardsPage-tLkD24tA.js"),__vite__mapDeps([24,1,23,25,26,27,28,29,11,16,10]))),Qte=A.lazy(()=>Pe(()=>import("./ProfilePage-CyB9PyoN.js"),__vite__mapDeps([30,1,18,9,28,26,27,31,17,32,7,5,33,19,22,34,35]))),Yte=A.lazy(()=>Pe(()=>import("./FlavorProfilePage-Db3BMzto.js"),__vite__mapDeps([36,18,9,23,37]))),Xte=A.lazy(()=>Pe(()=>import("./AboutPage-BXnHjKU3.js"),__vite__mapDeps([38,1,18,4,2]))),Jte=A.lazy(()=>Pe(()=>import("./ContactPage-CGqBGtbL.js"),__vite__mapDeps([39,1,7,40,19]))),Zte=A.lazy(()=>Pe(()=>import("./FAQPage-qsnW2aqs.js"),__vite__mapDeps([41,1,12]))),ene=A.lazy(()=>Pe(()=>import("./TermsPage-DVwLQR5w.js"),__vite__mapDeps([42,43,4,44,23]))),tne=A.lazy(()=>Pe(()=>import("./PrivacyPolicyPage-De22rYmm.js"),__vite__mapDeps([45,5]))),nne=A.lazy(()=>Pe(()=>import("./CookiePolicyPage-CEWQfReS.js"),__vite__mapDeps([46,34,47]))),ine=A.lazy(()=>Pe(()=>import("./DrinkLabPage-PnCSEXgH.js"),__vite__mapDeps([48,18,49,9]))),rne=A.lazy(()=>Pe(()=>import("./AdminLayout-DJGhbr17.js"),__vite__mapDeps([50,51,1,52,18,19,25,4,47,34]))),sne=A.lazy(()=>Pe(()=>import("./AdminDashboardPage-s1QZpuUX.js"),__vite__mapDeps([53,54,37,52,2,28,13,18,4,47,9,55]))),jC=A.lazy(()=>Pe(()=>import("./AdminQueuePage-CV3KKKLj.js"),__vite__mapDeps([56,21,1,57,2,18,43]))),zC=A.lazy(()=>Pe(()=>import("./AdminInventoryPage-DH7Z2mQU.js"),__vite__mapDeps([58,31,1,28,52,10,12,49,59,29,18]))),ane=A.lazy(()=>Pe(()=>import("./AdminProductsPage-Cv2ahy4a.js"),__vite__mapDeps([60,1,31,52,9,12,59,29,49,18,35]))),one=A.lazy(()=>Pe(()=>import("./AdminAnalyticsPage-BtAOKWnD.js"),__vite__mapDeps([61,54,37,52,2,28,13,19,9,22]))),lne=A.lazy(()=>Pe(()=>import("./AdminFeedbackPage-Dpl_lJd9.js"),__vite__mapDeps([62,33,27,9,19,1,63]))),cne=A.lazy(()=>Pe(()=>import("./AdminSettingsPage-BC5HBQBC.js"),__vite__mapDeps([64,1,7,40,65,2,31]))),FC=A.lazy(()=>Pe(()=>import("./AdminOrdersHistoryPage-Bv9TsVms.js"),__vite__mapDeps([66,2,52,44,43,12,28,32,65,15]))),une=A.lazy(()=>Pe(()=>import("./AdminUsersPage-DNdCMhdb.js"),__vite__mapDeps([67,4,12,63,13,28]))),hne=A.lazy(()=>Pe(()=>import("./EmployeeLayout-Cf2wUzvJ.js"),__vite__mapDeps([68,51,1,52,25]))),dne=A.lazy(()=>Pe(()=>import("./POSDashboard-CVZjeCkx.js"),__vite__mapDeps([69,18,55,52,2]))),fne=A.lazy(()=>Pe(()=>import("./POSPage-QyJblcUk.js"),__vite__mapDeps([70,15,44,57,12]))),mne=()=>m.jsxs("div",{className:"flex min-h-screen flex-col",children:[m.jsx(Ate,{}),m.jsx("main",{className:"flex flex-1 items-center justify-center bg-gradient-to-br from-primary-50 to-coffee-50",children:m.jsxs("div",{className:"p-4 text-center",children:[m.jsx(Fr,{className:"mx-auto mb-4 h-16 w-16 text-gray-400 opacity-50"}),m.jsx("h1",{className:"mb-4 font-display text-4xl font-bold text-gray-900",children:"404 - Page Not Found"}),m.jsx("p",{className:"mb-8 text-gray-600",children:"This coffee blend doesn't exist on our menu. Maybe it got lost in the daily grind?"}),m.jsx(ii,{to:"/",className:"font-medium text-primary-600 transition-colors hover:text-primary-700",children:" Back to Home"})]})}),m.jsx(Rte,{})]}),pne=()=>{const{isCartOpen:t,closeCart:e,cartItems:n,updateQuantity:i,updateCartItem:r,removeFromCart:s,toastMessage:a,selectedItemIds:o,toggleItemSelection:l,selectAllItems:c,deselectAllItems:h}=XM(),d=Ao(),[f,g]=A.useState(null),[E,S]=A.useState(!1),b=()=>{e(),d("/checkout")},y=v=>{g(v),S(!0)},_=(v,I,k,O)=>{f&&O&&(r(f.id,f.product,O,v,I),S(!1),g(null))};return m.jsxs(m.Fragment,{children:[m.jsx(Ute,{}),m.jsx(Nte,{}),m.jsx(A.Suspense,{fallback:m.jsx(jte,{}),children:m.jsxs(f3,{children:[m.jsx(pe,{path:"/",element:m.jsx(Fte,{})}),m.jsx(pe,{path:"/about",element:m.jsx(Xte,{})}),m.jsx(pe,{path:"/menu",element:m.jsx(Gte,{})}),m.jsx(pe,{path:"/drink-lab",element:m.jsx(ine,{})}),m.jsx(pe,{path:"/contact",element:m.jsx(Jte,{})}),m.jsx(pe,{path:"/auth/login",element:m.jsx(Bte,{})}),m.jsx(pe,{path:"/auth/register",element:m.jsx(qte,{})}),m.jsx(pe,{path:"/auth/forgot-password",element:m.jsx(Hte,{})}),m.jsx(pe,{path:"/checkout",element:m.jsx($te,{})}),m.jsx(pe,{path:"/queue",element:m.jsx(Kte,{})}),m.jsx(pe,{path:"/rewards",element:m.jsx(Wte,{})}),m.jsx(pe,{path:"/profile",element:m.jsx(Qte,{})}),m.jsx(pe,{path:"/flavor-profile",element:m.jsx(Yte,{})}),m.jsx(pe,{path:"/faq",element:m.jsx(Zte,{})}),m.jsx(pe,{path:"/terms",element:m.jsx(ene,{})}),m.jsx(pe,{path:"/privacy",element:m.jsx(tne,{})}),m.jsx(pe,{path:"/cookies",element:m.jsx(nne,{})}),m.jsx(pe,{element:m.jsx(UC,{}),children:m.jsxs(pe,{path:"/admin",element:m.jsx(rne,{}),children:[m.jsx(pe,{index:!0,element:m.jsx(sne,{})}),m.jsx(pe,{path:"queue",element:m.jsx(jC,{})}),m.jsx(pe,{path:"history",element:m.jsx(FC,{})}),m.jsx(pe,{path:"users",element:m.jsx(une,{})}),m.jsx(pe,{path:"inventory",element:m.jsx(zC,{})}),m.jsx(pe,{path:"products",element:m.jsx(ane,{})}),m.jsx(pe,{path:"analytics",element:m.jsx(one,{})}),m.jsx(pe,{path:"feedback",element:m.jsx(lne,{})}),m.jsx(pe,{path:"settings",element:m.jsx(cne,{})})]})}),m.jsx(pe,{element:m.jsx(UC,{allowedRoles:["employee","admin"]}),children:m.jsxs(pe,{path:"/employee",element:m.jsx(hne,{}),children:[m.jsx(pe,{index:!0,element:m.jsx(dne,{})}),m.jsx(pe,{path:"pos",element:m.jsx(fne,{})}),m.jsx(pe,{path:"queue",element:m.jsx(jC,{})}),m.jsx(pe,{path:"inventory",element:m.jsx(zC,{})}),m.jsx(pe,{path:"history",element:m.jsx(FC,{})})]})}),m.jsx(pe,{path:"*",element:m.jsx(mne,{})})]})}),m.jsx(kte,{isOpen:t,onClose:e,cartItems:n,onUpdateQuantity:i,onRemoveItem:s,onCheckout:b,onEditItem:y,selectedItemIds:o,onToggleItemSelection:l,onSelectAll:c,onDeselectAll:h}),f&&m.jsx(Lte,{product:f.product,selectedSize:f.selectedSize,isOpen:E,onClose:()=>{S(!1),g(null)},onConfirm:_,initialCustomizations:f.customizations,initialQuantity:f.quantity}),a&&m.jsx("div",{className:"fixed bottom-4 right-4 z-[100] animate-fade-in-up rounded-lg bg-gray-900 px-4 py-3 text-white shadow-lg",children:a}),m.jsx(zte,{})]})},gne=()=>m.jsx(BQ,{children:m.jsx(XQ,{children:m.jsx(Cte,{children:m.jsx(HQ,{children:m.jsx(Pte,{children:m.jsx(GQ,{children:m.jsx(L3,{children:m.jsx(pne,{})})})})})})})}),G5=document.getElementById("root");if(!G5)throw new Error("Could not find root element to mount to");const yne=yj.createRoot(G5);yne.render(m.jsx(Hn.StrictMode,{children:m.jsx(gne,{})}));export{U9 as $,e9 as A,Dte as B,$Q as C,Wp as D,i9 as E,Rte as F,y9 as G,Ate as H,vi as I,Qf as J,dD as K,ii as L,R9 as M,h0 as N,d0 as O,Lte as P,xE as Q,Fr as R,Lf as S,fD as T,f0 as U,M9 as V,Q9 as W,$s as X,J9 as Y,cD as Z,uD as _,eM as a,BC as a0,gp as a1,I9 as a2,p9 as a3,w9 as a4,z9 as a5,o9 as a6,hD as a7,zI as a8,Ei as a9,HI as aa,K9 as ab,c9 as ac,Hn as ad,Ote as ae,jne as af,_ne as ag,AK as ah,_M as ai,Ah as aj,MK as b,me as c,$e as d,Fp as e,Ao as f,jK as g,ih as h,lD as i,m as j,qh as k,hi as l,qQ as m,XM as n,qI as o,ut as p,cs as q,A as r,Fne as s,H5 as t,Xr as u,oD as v,IK as w,Nb as x,jt as y,rN as z};
