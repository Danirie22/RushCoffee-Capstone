const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-DFnQcGKU.js","assets/Button-Cs6ImWJo.js","assets/clock-DiBNRHg5.js","assets/wallet-DM7x-Pwk.js","assets/users-DTDjJZu2.js","assets/bell-Bhu05I8K.js","assets/ForgotPasswordPage-Bcv9xKSm.js","assets/Input-qWnzJSpN.js","assets/MenuPage-BVLnNw1M.js","assets/star-2A07cPrc.js","assets/sparkles-hztar7s2.js","assets/ProductCardSkeleton-CVsXz16y.js","assets/search-CpIU88pX.js","assets/arrow-up-down-tcyQt554.js","assets/CheckoutPage-BT6fb2i0.js","assets/banknote-CYzUmGh_.js","assets/mockAvailableRewards-2NOuBi-T.js","assets/shopping-bag-DkpXMxL_.js","assets/coffee-BpQhe1n2.js","assets/message-square-BzWAw9L5.js","assets/QueuePage-CIKv07Iu.js","assets/DigitalReceipt-mFq3w5pH.js","assets/thumbs-up-CGqd1o9J.js","assets/award-B_doqB7j.js","assets/trending-up-tQmpF5A8.js","assets/RewardsPage-CK4_5UNp.js","assets/history-B5mr7mDE.js","assets/format-BoV-TgZi.js","assets/en-US-wfBU2YNu.js","assets/calendar-_sEf8mUe.js","assets/ProfilePage-DAXmu5CQ.js","assets/save-BDovMTqT.js","assets/chevron-right-CZB9E1Js.js","assets/StarRating-BbQCoX-5.js","assets/send-D52WIROR.js","assets/settings-Cqb5Bztz.js","assets/square-pen-f257oNEe.js","assets/AboutPage-Bb8F_WEM.js","assets/zap-BJWsPBiA.js","assets/ContactPage-CwKe9QQY.js","assets/Textarea-BdeMZANs.js","assets/FAQPage-BrxCNL6K.js","assets/TermsPage-BlWcllpq.js","assets/file-text-QpLxpYk7.js","assets/credit-card-DG1ZJ7Zx.js","assets/PrivacyPolicyPage-BsIdVt93.js","assets/CookiePolicyPage-DPTxH05h.js","assets/chart-column-ctmI6-NG.js","assets/AdminLayout-JGFhors0.js","assets/ConfirmLogoutModal-UbqOxY22.js","assets/package-DIEqKz1p.js","assets/AdminDashboardPage-DFLG0Ekc.js","assets/SalesOverview-CMunQV3c.js","assets/activity-C4Umf5Y2.js","assets/AdminQueuePage-C41vovSW.js","assets/inventoryDeduction-CubfgPSE.js","assets/AdminInventoryPage-X99LAD09.js","assets/snowflake-BlF492o2.js","assets/AdminProductsPage-DgntNvak.js","assets/AdminAnalyticsPage-BtF9DuqX.js","assets/AdminFeedbackPage-BZqvb_DR.js","assets/funnel-CVQEFANL.js","assets/AdminSettingsPage-D6BAezJz.js","assets/store-hx0mDmNC.js","assets/AdminOrdersHistoryPage-KmmLq1rA.js","assets/AdminUsersPage-t48nBT_j.js","assets/EmployeeLayout-CoKF5pQs.js","assets/POSDashboard-CvZmtiMu.js","assets/POSPage-B934iFz7.js"])))=>i.map(i=>d[i]);
function a4(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function CC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var PC={exports:{}},Kp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o4=Symbol.for("react.transitional.element"),l4=Symbol.for("react.fragment");function NC(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:o4,type:t,key:i,ref:e!==void 0?e:null,props:n}}Kp.Fragment=l4;Kp.jsx=NC;Kp.jsxs=NC;PC.exports=Kp;var p=PC.exports,DC={exports:{}},oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw=Symbol.for("react.transitional.element"),c4=Symbol.for("react.portal"),u4=Symbol.for("react.fragment"),h4=Symbol.for("react.strict_mode"),d4=Symbol.for("react.profiler"),f4=Symbol.for("react.consumer"),m4=Symbol.for("react.context"),p4=Symbol.for("react.forward_ref"),g4=Symbol.for("react.suspense"),y4=Symbol.for("react.memo"),kC=Symbol.for("react.lazy"),_4=Symbol.for("react.activity"),WA=Symbol.iterator;function v4(t){return t===null||typeof t!="object"?null:(t=WA&&t[WA]||t["@@iterator"],typeof t=="function"?t:null)}var OC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VC=Object.assign,MC={};function fc(t,e,n){this.props=t,this.context=e,this.refs=MC,this.updater=n||OC}fc.prototype.isReactComponent={};fc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function LC(){}LC.prototype=fc.prototype;function dw(t,e,n){this.props=t,this.context=e,this.refs=MC,this.updater=n||OC}var fw=dw.prototype=new LC;fw.constructor=dw;VC(fw,fc.prototype);fw.isPureReactComponent=!0;var QA=Array.isArray;function tv(){}var Ge={H:null,A:null,T:null,S:null},UC=Object.prototype.hasOwnProperty;function mw(t,e,n){var i=n.ref;return{$$typeof:hw,type:t,key:e,ref:i!==void 0?i:null,props:n}}function w4(t,e){return mw(t.type,e,t.props)}function pw(t){return typeof t=="object"&&t!==null&&t.$$typeof===hw}function b4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var YA=/\/+/g;function Py(t,e){return typeof t=="object"&&t!==null&&t.key!=null?b4(""+t.key):e.toString(36)}function T4(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(tv,tv):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function qo(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case hw:case c4:a=!0;break;case kC:return a=t._init,qo(a(t._payload),e,n,i,r)}}if(a)return r=r(t),a=i===""?"."+Py(t,0):i,QA(r)?(n="",a!=null&&(n=a.replace(YA,"$&/")+"/"),qo(r,e,n,"",function(c){return c})):r!=null&&(pw(r)&&(r=w4(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(YA,"$&/")+"/")+a)),e.push(r)),1;a=0;var o=i===""?".":i+":";if(QA(t))for(var l=0;l<t.length;l++)i=t[l],s=o+Py(i,l),a+=qo(i,e,n,s,r);else if(l=v4(t),typeof l=="function")for(t=l.call(t),l=0;!(i=t.next()).done;)i=i.value,s=o+Py(i,l++),a+=qo(i,e,n,s,r);else if(s==="object"){if(typeof t.then=="function")return qo(T4(t),e,n,i,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function mf(t,e,n){if(t==null)return t;var i=[],r=0;return qo(t,i,"","",function(s){return e.call(n,s,r++)}),i}function E4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var XA=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},A4={map:mf,forEach:function(t,e,n){mf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return mf(t,function(){e++}),e},toArray:function(t){return mf(t,function(e){return e})||[]},only:function(t){if(!pw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Activity=_4;oe.Children=A4;oe.Component=fc;oe.Fragment=u4;oe.Profiler=d4;oe.PureComponent=dw;oe.StrictMode=h4;oe.Suspense=g4;oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ge;oe.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Ge.H.useMemoCache(t)}};oe.cache=function(t){return function(){return t.apply(null,arguments)}};oe.cacheSignal=function(){return null};oe.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=VC({},t.props),r=t.key;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)!UC.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(i[s]=e[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];i.children=a}return mw(t.type,r,i)};oe.createContext=function(t){return t={$$typeof:m4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:f4,_context:t},t};oe.createElement=function(t,e,n){var i,r={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)UC.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return mw(t,s,r)};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:p4,render:t}};oe.isValidElement=pw;oe.lazy=function(t){return{$$typeof:kC,_payload:{_status:-1,_result:t},_init:E4}};oe.memo=function(t,e){return{$$typeof:y4,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Ge.T,n={};Ge.T=n;try{var i=t(),r=Ge.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(tv,XA)}catch(s){XA(s)}finally{e!==null&&n.types!==null&&(e.types=n.types),Ge.T=e}};oe.unstable_useCacheRefresh=function(){return Ge.H.useCacheRefresh()};oe.use=function(t){return Ge.H.use(t)};oe.useActionState=function(t,e,n){return Ge.H.useActionState(t,e,n)};oe.useCallback=function(t,e){return Ge.H.useCallback(t,e)};oe.useContext=function(t){return Ge.H.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t,e){return Ge.H.useDeferredValue(t,e)};oe.useEffect=function(t,e){return Ge.H.useEffect(t,e)};oe.useEffectEvent=function(t){return Ge.H.useEffectEvent(t)};oe.useId=function(){return Ge.H.useId()};oe.useImperativeHandle=function(t,e,n){return Ge.H.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return Ge.H.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return Ge.H.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return Ge.H.useMemo(t,e)};oe.useOptimistic=function(t,e){return Ge.H.useOptimistic(t,e)};oe.useReducer=function(t,e,n){return Ge.H.useReducer(t,e,n)};oe.useRef=function(t){return Ge.H.useRef(t)};oe.useState=function(t){return Ge.H.useState(t)};oe.useSyncExternalStore=function(t,e,n){return Ge.H.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return Ge.H.useTransition()};oe.version="19.2.0";DC.exports=oe;var C=DC.exports;const wr=CC(C),Ote=a4({__proto__:null,default:wr},[C]);var jC={exports:{}},Wp={},zC={exports:{}},FC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Y){var J=z.length;z.push(Y);e:for(;0<J;){var ie=J-1>>>1,W=z[ie];if(0<r(W,Y))z[ie]=Y,z[J]=W,J=ie;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var Y=z[0],J=z.pop();if(J!==Y){z[0]=J;e:for(var ie=0,W=z.length,de=W>>>1;ie<de;){var Dt=2*(ie+1)-1,It=z[Dt],St=Dt+1,_i=z[St];if(0>r(It,J))St<W&&0>r(_i,It)?(z[ie]=_i,z[St]=J,ie=St):(z[ie]=It,z[Dt]=J,ie=Dt);else if(St<W&&0>r(_i,J))z[ie]=_i,z[St]=J,ie=St;else break e}}return Y}function r(z,Y){var J=z.sortIndex-Y.sortIndex;return J!==0?J:z.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],h=1,d=null,f=3,g=!1,b=!1,E=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function I(z){for(var Y=n(c);Y!==null;){if(Y.callback===null)i(c);else if(Y.startTime<=z)i(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(c)}}function k(z){if(E=!1,I(z),!b)if(n(l)!==null)b=!0,V||(V=!0,O());else{var Y=n(c);Y!==null&&ne(k,Y.startTime-z)}}var V=!1,A=-1,T=5,S=-1;function R(){return x?!0:!(t.unstable_now()-S<T)}function D(){if(x=!1,V){var z=t.unstable_now();S=z;var Y=!0;try{e:{b=!1,E&&(E=!1,v(A),A=-1),g=!0;var J=f;try{t:{for(I(z),d=n(l);d!==null&&!(d.expirationTime>z&&R());){var ie=d.callback;if(typeof ie=="function"){d.callback=null,f=d.priorityLevel;var W=ie(d.expirationTime<=z);if(z=t.unstable_now(),typeof W=="function"){d.callback=W,I(z),Y=!0;break t}d===n(l)&&i(l),I(z)}else i(l);d=n(l)}if(d!==null)Y=!0;else{var de=n(c);de!==null&&ne(k,de.startTime-z),Y=!1}}break e}finally{d=null,f=J,g=!1}Y=void 0}}finally{Y?O():V=!1}}}var O;if(typeof _=="function")O=function(){_(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,q=N.port2;N.port1.onmessage=D,O=function(){q.postMessage(null)}}else O=function(){w(D,0)};function ne(z,Y){A=w(function(){z(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var J=f;f=Y;try{return z()}finally{f=J}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var J=f;f=z;try{return Y()}finally{f=J}},t.unstable_scheduleCallback=function(z,Y,J){var ie=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ie+J:ie):J=ie,z){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=J+W,z={id:h++,callback:Y,priorityLevel:z,startTime:J,expirationTime:W,sortIndex:-1},J>ie?(z.sortIndex=J,e(c,z),n(l)===null&&z===n(c)&&(E?(v(A),A=-1):E=!0,ne(k,J-ie))):(z.sortIndex=W,e(l,z),b||g||(b=!0,V||(V=!0,O()))),z},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(z){var Y=f;return function(){var J=f;f=Y;try{return z.apply(this,arguments)}finally{f=J}}}})(FC);zC.exports=FC;var I4=zC.exports,BC={exports:{}},wn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S4=C;function qC(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ns(){}var gn={d:{f:ns,r:function(){throw Error(qC(522))},D:ns,C:ns,L:ns,m:ns,X:ns,S:ns,M:ns},p:0,findDOMNode:null},x4=Symbol.for("react.portal");function R4(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:x4,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var Lu=S4.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Qp(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=gn;wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(qC(299));return R4(t,e,null,n)};wn.flushSync=function(t){var e=Lu.T,n=gn.p;try{if(Lu.T=null,gn.p=2,t)return t()}finally{Lu.T=e,gn.p=n,gn.d.f()}};wn.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,gn.d.C(t,e))};wn.prefetchDNS=function(t){typeof t=="string"&&gn.d.D(t)};wn.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=Qp(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?gn.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&gn.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};wn.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Qp(e.as,e.crossOrigin);gn.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&gn.d.M(t)};wn.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=Qp(n,e.crossOrigin);gn.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};wn.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Qp(e.as,e.crossOrigin);gn.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else gn.d.m(t)};wn.requestFormReset=function(t){gn.d.r(t)};wn.unstable_batchedUpdates=function(t,e){return t(e)};wn.useFormState=function(t,e,n){return Lu.H.useFormState(t,e,n)};wn.useFormStatus=function(){return Lu.H.useHostTransitionStatus()};wn.version="19.2.0";function HC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HC)}catch(t){console.error(t)}}HC(),BC.exports=wn;var $C=BC.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pt=I4,GC=C,C4=$C;function F(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function KC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hd(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function WC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function QC(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function JA(t){if(hd(t)!==t)throw Error(F(188))}function P4(t){var e=t.alternate;if(!e){if(e=hd(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return JA(r),t;if(s===i)return JA(r),e;s=s.sibling}throw Error(F(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===n){a=!0,n=r,i=s;break}if(o===i){a=!0,i=r,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,i=r;break}if(o===i){a=!0,i=s,n=r;break}o=o.sibling}if(!a)throw Error(F(189))}}if(n.alternate!==i)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function YC(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=YC(t),e!==null)return e;t=t.sibling}return null}var We=Object.assign,N4=Symbol.for("react.element"),pf=Symbol.for("react.transitional.element"),wu=Symbol.for("react.portal"),Xo=Symbol.for("react.fragment"),XC=Symbol.for("react.strict_mode"),nv=Symbol.for("react.profiler"),JC=Symbol.for("react.consumer"),pr=Symbol.for("react.context"),gw=Symbol.for("react.forward_ref"),iv=Symbol.for("react.suspense"),rv=Symbol.for("react.suspense_list"),yw=Symbol.for("react.memo"),us=Symbol.for("react.lazy"),sv=Symbol.for("react.activity"),D4=Symbol.for("react.memo_cache_sentinel"),ZA=Symbol.iterator;function tu(t){return t===null||typeof t!="object"?null:(t=ZA&&t[ZA]||t["@@iterator"],typeof t=="function"?t:null)}var k4=Symbol.for("react.client.reference");function av(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===k4?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xo:return"Fragment";case nv:return"Profiler";case XC:return"StrictMode";case iv:return"Suspense";case rv:return"SuspenseList";case sv:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case wu:return"Portal";case pr:return t.displayName||"Context";case JC:return(t._context.displayName||"Context")+".Consumer";case gw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yw:return e=t.displayName||null,e!==null?e:av(t.type)||"Memo";case us:e=t._payload,t=t._init;try{return av(t(e))}catch{}}return null}var bu=Array.isArray,se=GC.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Re=C4.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ba={pending:!1,data:null,method:null,action:null},ov=[],Jo=-1;function ir(t){return{current:t}}function Ut(t){0>Jo||(t.current=ov[Jo],ov[Jo]=null,Jo--)}function je(t,e){Jo++,ov[Jo]=t.current,t.current=e}var Ki=ir(null),bh=ir(null),Is=ir(null),km=ir(null);function Om(t,e){switch(je(Is,e),je(bh,t),je(Ki,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?sS(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=sS(e),t=_2(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Ut(Ki),je(Ki,t)}function Pl(){Ut(Ki),Ut(bh),Ut(Is)}function lv(t){t.memoizedState!==null&&je(km,t);var e=Ki.current,n=_2(e,t.type);e!==n&&(je(bh,t),je(Ki,n))}function Vm(t){bh.current===t&&(Ut(Ki),Ut(bh)),km.current===t&&(Ut(km),Dh._currentValue=Ba)}var Ny,eI;function Ta(t){if(Ny===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ny=e&&e[1]||"",eI=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ny+t+eI}var Dy=!1;function ky(t,e){if(!t||Dy)return"";Dy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(g){var f=g}Reflect.construct(t,[],d)}else{try{d.call()}catch(g){f=g}t.call(d.prototype)}}else{try{throw Error()}catch(g){f=g}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(g){if(g&&f&&typeof g.stack=="string")return[g.stack,f.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split(`
`),c=o.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==c[r]){var h=`
`+l[i].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=i&&0<=r);break}}}finally{Dy=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Ta(n):""}function O4(t,e){switch(t.tag){case 26:case 27:case 5:return Ta(t.type);case 16:return Ta("Lazy");case 13:return t.child!==e&&e!==null?Ta("Suspense Fallback"):Ta("Suspense");case 19:return Ta("SuspenseList");case 0:case 15:return ky(t.type,!1);case 11:return ky(t.type.render,!1);case 1:return ky(t.type,!0);case 31:return Ta("Activity");default:return""}}function tI(t){try{var e="",n=null;do e+=O4(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var cv=Object.prototype.hasOwnProperty,_w=Pt.unstable_scheduleCallback,Oy=Pt.unstable_cancelCallback,V4=Pt.unstable_shouldYield,M4=Pt.unstable_requestPaint,Bn=Pt.unstable_now,L4=Pt.unstable_getCurrentPriorityLevel,ZC=Pt.unstable_ImmediatePriority,eP=Pt.unstable_UserBlockingPriority,Mm=Pt.unstable_NormalPriority,U4=Pt.unstable_LowPriority,tP=Pt.unstable_IdlePriority,j4=Pt.log,z4=Pt.unstable_setDisableYieldValue,dd=null,qn=null;function ys(t){if(typeof j4=="function"&&z4(t),qn&&typeof qn.setStrictMode=="function")try{qn.setStrictMode(dd,t)}catch{}}var Hn=Math.clz32?Math.clz32:q4,F4=Math.log,B4=Math.LN2;function q4(t){return t>>>=0,t===0?32:31-(F4(t)/B4|0)|0}var gf=256,yf=262144,_f=4194304;function Ea(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Yp(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=i&134217727;return o!==0?(i=o&~s,i!==0?r=Ea(i):(a&=o,a!==0?r=Ea(a):n||(n=o&~t,n!==0&&(r=Ea(n))))):(o=i&~s,o!==0?r=Ea(o):a!==0?r=Ea(a):n||(n=i&~t,n!==0&&(r=Ea(n)))),r===0?0:e!==0&&e!==r&&!(e&s)&&(s=r&-r,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:r}function fd(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function H4(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nP(){var t=_f;return _f<<=1,!(_f&62914560)&&(_f=4194304),t}function Vy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function md(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function $4(t,e,n,i,r,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,c=t.hiddenUpdates;for(n=a&~n;0<n;){var h=31-Hn(n),d=1<<h;o[h]=0,l[h]=-1;var f=c[h];if(f!==null)for(c[h]=null,h=0;h<f.length;h++){var g=f[h];g!==null&&(g.lane&=-536870913)}n&=~d}i!==0&&iP(t,i,0),s!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=s&~(a&~e))}function iP(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-Hn(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function rP(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Hn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function sP(t,e){var n=e&-e;return n=n&42?1:vw(n),n&(t.suspendedLanes|e)?0:n}function vw(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ww(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function aP(){var t=Re.p;return t!==0?t:(t=window.event,t===void 0?32:C2(t.type))}function nI(t,e){var n=Re.p;try{return Re.p=t,e()}finally{Re.p=n}}var na=Math.random().toString(36).slice(2),Ht="__reactFiber$"+na,Pn="__reactProps$"+na,mc="__reactContainer$"+na,uv="__reactEvents$"+na,G4="__reactListeners$"+na,K4="__reactHandles$"+na,iI="__reactResources$"+na,pd="__reactMarker$"+na;function bw(t){delete t[Ht],delete t[Pn],delete t[uv],delete t[G4],delete t[K4]}function Zo(t){var e=t[Ht];if(e)return e;for(var n=t.parentNode;n;){if(e=n[mc]||n[Ht]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uS(t);t!==null;){if(n=t[Ht])return n;t=uS(t)}return e}t=n,n=t.parentNode}return null}function pc(t){if(t=t[Ht]||t[mc]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Tu(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(F(33))}function gl(t){var e=t[iI];return e||(e=t[iI]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Lt(t){t[pd]=!0}var oP=new Set,lP={};function yo(t,e){Nl(t,e),Nl(t+"Capture",e)}function Nl(t,e){for(lP[t]=e,t=0;t<e.length;t++)oP.add(e[t])}var W4=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rI={},sI={};function Q4(t){return cv.call(sI,t)?!0:cv.call(rI,t)?!1:W4.test(t)?sI[t]=!0:(rI[t]=!0,!1)}function Qf(t,e,n){if(Q4(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function vf(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function or(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function ni(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Y4(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hv(t){if(!t._valueTracker){var e=cP(t)?"checked":"value";t._valueTracker=Y4(t,e,""+t[e])}}function uP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=cP(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Lm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var X4=/[\n"\\]/g;function si(t){return t.replace(X4,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function dv(t,e,n,i,r,s,a,o){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+ni(e)):t.value!==""+ni(e)&&(t.value=""+ni(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?fv(t,a,ni(e)):n!=null?fv(t,a,ni(n)):i!=null&&t.removeAttribute("value"),r==null&&s!=null&&(t.defaultChecked=!!s),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+ni(o):t.removeAttribute("name")}function hP(t,e,n,i,r,s,a,o){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){hv(t);return}n=n!=null?""+ni(n):"",e=e!=null?""+ni(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=o?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),hv(t)}function fv(t,e,n){e==="number"&&Lm(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function yl(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ni(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function dP(t,e,n){if(e!=null&&(e=""+ni(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+ni(n):""}function fP(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(F(92));if(bu(i)){if(1<i.length)throw Error(F(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=ni(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),hv(t)}function Dl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var J4=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function aI(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||J4.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function mP(t,e,n){if(e!=null&&typeof e!="object")throw Error(F(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&aI(t,r,i)}else for(var s in e)e.hasOwnProperty(s)&&aI(t,s,e[s])}function Tw(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z4=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),e6=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yf(t){return e6.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function gr(){}var mv=null;function Ew(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var el=null,_l=null;function oI(t){var e=pc(t);if(e&&(t=e.stateNode)){var n=t[Pn]||null;e:switch(t=e.stateNode,e.type){case"input":if(dv(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+si(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[Pn]||null;if(!r)throw Error(F(90));dv(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&uP(i)}break e;case"textarea":dP(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&yl(t,!!n.multiple,e,!1)}}}var My=!1;function pP(t,e,n){if(My)return t(e,n);My=!0;try{var i=t(e);return i}finally{if(My=!1,(el!==null||_l!==null)&&(lg(),el&&(e=el,t=_l,_l=el=null,oI(e),t)))for(e=0;e<t.length;e++)oI(t[e])}}function Th(t,e){var n=t.stateNode;if(n===null)return null;var i=n[Pn]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pv=!1;if(Cr)try{var nu={};Object.defineProperty(nu,"passive",{get:function(){pv=!0}}),window.addEventListener("test",nu,nu),window.removeEventListener("test",nu,nu)}catch{pv=!1}var _s=null,Aw=null,Xf=null;function gP(){if(Xf)return Xf;var t,e=Aw,n=e.length,i,r="value"in _s?_s.value:_s.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return Xf=r.slice(t,1<i?1-i:void 0)}function Jf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wf(){return!0}function lI(){return!1}function kn(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?wf:lI,this.isPropagationStopped=lI,this}return We(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wf)},persist:function(){},isPersistent:wf}),e}var _o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xp=kn(_o),gd=We({},_o,{view:0,detail:0}),t6=kn(gd),Ly,Uy,iu,Jp=We({},gd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Iw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==iu&&(iu&&t.type==="mousemove"?(Ly=t.screenX-iu.screenX,Uy=t.screenY-iu.screenY):Uy=Ly=0,iu=t),Ly)},movementY:function(t){return"movementY"in t?t.movementY:Uy}}),cI=kn(Jp),n6=We({},Jp,{dataTransfer:0}),i6=kn(n6),r6=We({},gd,{relatedTarget:0}),jy=kn(r6),s6=We({},_o,{animationName:0,elapsedTime:0,pseudoElement:0}),a6=kn(s6),o6=We({},_o,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),l6=kn(o6),c6=We({},_o,{data:0}),uI=kn(c6),u6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},h6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=d6[t])?!!e[t]:!1}function Iw(){return f6}var m6=We({},gd,{key:function(t){if(t.key){var e=u6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?h6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Iw,charCode:function(t){return t.type==="keypress"?Jf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),p6=kn(m6),g6=We({},Jp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hI=kn(g6),y6=We({},gd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Iw}),_6=kn(y6),v6=We({},_o,{propertyName:0,elapsedTime:0,pseudoElement:0}),w6=kn(v6),b6=We({},Jp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),T6=kn(b6),E6=We({},_o,{newState:0,oldState:0}),A6=kn(E6),I6=[9,13,27,32],Sw=Cr&&"CompositionEvent"in window,Uu=null;Cr&&"documentMode"in document&&(Uu=document.documentMode);var S6=Cr&&"TextEvent"in window&&!Uu,yP=Cr&&(!Sw||Uu&&8<Uu&&11>=Uu),dI=" ",fI=!1;function _P(t,e){switch(t){case"keyup":return I6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var tl=!1;function x6(t,e){switch(t){case"compositionend":return vP(e);case"keypress":return e.which!==32?null:(fI=!0,dI);case"textInput":return t=e.data,t===dI&&fI?null:t;default:return null}}function R6(t,e){if(tl)return t==="compositionend"||!Sw&&_P(t,e)?(t=gP(),Xf=Aw=_s=null,tl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yP&&e.locale!=="ko"?null:e.data;default:return null}}var C6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!C6[t.type]:e==="textarea"}function wP(t,e,n,i){el?_l?_l.push(i):_l=[i]:el=i,e=tp(e,"onChange"),0<e.length&&(n=new Xp("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var ju=null,Eh=null;function P6(t){p2(t,0)}function Zp(t){var e=Tu(t);if(uP(e))return t}function pI(t,e){if(t==="change")return e}var bP=!1;if(Cr){var zy;if(Cr){var Fy="oninput"in document;if(!Fy){var gI=document.createElement("div");gI.setAttribute("oninput","return;"),Fy=typeof gI.oninput=="function"}zy=Fy}else zy=!1;bP=zy&&(!document.documentMode||9<document.documentMode)}function yI(){ju&&(ju.detachEvent("onpropertychange",TP),Eh=ju=null)}function TP(t){if(t.propertyName==="value"&&Zp(Eh)){var e=[];wP(e,Eh,t,Ew(t)),pP(P6,e)}}function N6(t,e,n){t==="focusin"?(yI(),ju=e,Eh=n,ju.attachEvent("onpropertychange",TP)):t==="focusout"&&yI()}function D6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zp(Eh)}function k6(t,e){if(t==="click")return Zp(e)}function O6(t,e){if(t==="input"||t==="change")return Zp(e)}function V6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wn=typeof Object.is=="function"?Object.is:V6;function Ah(t,e){if(Wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!cv.call(e,r)||!Wn(t[r],e[r]))return!1}return!0}function _I(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vI(t,e){var n=_I(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_I(n)}}function EP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?EP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function AP(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Lm(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Lm(t.document)}return e}function xw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var M6=Cr&&"documentMode"in document&&11>=document.documentMode,nl=null,gv=null,zu=null,yv=!1;function wI(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yv||nl==null||nl!==Lm(i)||(i=nl,"selectionStart"in i&&xw(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),zu&&Ah(zu,i)||(zu=i,i=tp(gv,"onSelect"),0<i.length&&(e=new Xp("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=nl)))}function va(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var il={animationend:va("Animation","AnimationEnd"),animationiteration:va("Animation","AnimationIteration"),animationstart:va("Animation","AnimationStart"),transitionrun:va("Transition","TransitionRun"),transitionstart:va("Transition","TransitionStart"),transitioncancel:va("Transition","TransitionCancel"),transitionend:va("Transition","TransitionEnd")},By={},IP={};Cr&&(IP=document.createElement("div").style,"AnimationEvent"in window||(delete il.animationend.animation,delete il.animationiteration.animation,delete il.animationstart.animation),"TransitionEvent"in window||delete il.transitionend.transition);function vo(t){if(By[t])return By[t];if(!il[t])return t;var e=il[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in IP)return By[t]=e[n];return t}var SP=vo("animationend"),xP=vo("animationiteration"),RP=vo("animationstart"),L6=vo("transitionrun"),U6=vo("transitionstart"),j6=vo("transitioncancel"),CP=vo("transitionend"),PP=new Map,_v="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_v.push("scrollEnd");function Ri(t,e){PP.set(t,e),yo(e,[t])}var Um=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ti=[],rl=0,Rw=0;function eg(){for(var t=rl,e=Rw=rl=0;e<t;){var n=ti[e];ti[e++]=null;var i=ti[e];ti[e++]=null;var r=ti[e];ti[e++]=null;var s=ti[e];if(ti[e++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&NP(n,r,s)}}function tg(t,e,n,i){ti[rl++]=t,ti[rl++]=e,ti[rl++]=n,ti[rl++]=i,Rw|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Cw(t,e,n,i){return tg(t,e,n,i),jm(t)}function wo(t,e){return tg(t,null,null,e),jm(t)}function NP(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(r=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,r&&e!==null&&(r=31-Hn(n),t=s.hiddenUpdates,i=t[r],i===null?t[r]=[e]:i.push(e),e.lane=n|536870912),s):null}function jm(t){if(50<Qu)throw Qu=0,jv=null,Error(F(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var sl={};function z6(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(t,e,n,i){return new z6(t,e,n,i)}function Pw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function br(t,e){var n=t.alternate;return n===null?(n=jn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function DP(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Zf(t,e,n,i,r,s){var a=0;if(i=t,typeof t=="function")Pw(t)&&(a=1);else if(typeof t=="string")a=$5(t,n,Ki.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case sv:return t=jn(31,n,e,r),t.elementType=sv,t.lanes=s,t;case Xo:return qa(n.children,r,s,e);case XC:a=8,r|=24;break;case nv:return t=jn(12,n,e,r|2),t.elementType=nv,t.lanes=s,t;case iv:return t=jn(13,n,e,r),t.elementType=iv,t.lanes=s,t;case rv:return t=jn(19,n,e,r),t.elementType=rv,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pr:a=10;break e;case JC:a=9;break e;case gw:a=11;break e;case yw:a=14;break e;case us:a=16,i=null;break e}a=29,n=Error(F(130,t===null?"null":typeof t,"")),i=null}return e=jn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function qa(t,e,n,i){return t=jn(7,t,i,e),t.lanes=n,t}function qy(t,e,n){return t=jn(6,t,null,e),t.lanes=n,t}function kP(t){var e=jn(18,null,null,0);return e.stateNode=t,e}function Hy(t,e,n){return e=jn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var bI=new WeakMap;function ai(t,e){if(typeof t=="object"&&t!==null){var n=bI.get(t);return n!==void 0?n:(e={value:t,source:e,stack:tI(e)},bI.set(t,e),e)}return{value:t,source:e,stack:tI(e)}}var al=[],ol=0,zm=null,Ih=0,ii=[],ri=0,js=null,zi=1,Fi="";function dr(t,e){al[ol++]=Ih,al[ol++]=zm,zm=t,Ih=e}function OP(t,e,n){ii[ri++]=zi,ii[ri++]=Fi,ii[ri++]=js,js=t;var i=zi;t=Fi;var r=32-Hn(i)-1;i&=~(1<<r),n+=1;var s=32-Hn(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,zi=1<<32-Hn(e)+r|n<<r|i,Fi=s+t}else zi=1<<s|n<<r|i,Fi=t}function Nw(t){t.return!==null&&(dr(t,1),OP(t,1,0))}function Dw(t){for(;t===zm;)zm=al[--ol],al[ol]=null,Ih=al[--ol],al[ol]=null;for(;t===js;)js=ii[--ri],ii[ri]=null,Fi=ii[--ri],ii[ri]=null,zi=ii[--ri],ii[ri]=null}function VP(t,e){ii[ri++]=zi,ii[ri++]=Fi,ii[ri++]=js,zi=e.id,Fi=e.overflow,js=t}var $t=null,He=null,we=!1,Ss=null,oi=!1,vv=Error(F(519));function zs(t){var e=Error(F(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sh(ai(e,t)),vv}function TI(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Ht]=t,e[Pn]=i,n){case"dialog":me("cancel",e),me("close",e);break;case"iframe":case"object":case"embed":me("load",e);break;case"video":case"audio":for(n=0;n<Ph.length;n++)me(Ph[n],e);break;case"source":me("error",e);break;case"img":case"image":case"link":me("error",e),me("load",e);break;case"details":me("toggle",e);break;case"input":me("invalid",e),hP(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":me("invalid",e);break;case"textarea":me("invalid",e),fP(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||y2(e.textContent,n)?(i.popover!=null&&(me("beforetoggle",e),me("toggle",e)),i.onScroll!=null&&me("scroll",e),i.onScrollEnd!=null&&me("scrollend",e),i.onClick!=null&&(e.onclick=gr),e=!0):e=!1,e||zs(t,!0)}function EI(t){for($t=t.return;$t;)switch($t.tag){case 5:case 31:case 13:oi=!1;return;case 27:case 3:oi=!0;return;default:$t=$t.return}}function ko(t){if(t!==$t)return!1;if(!we)return EI(t),we=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Hv(t.type,t.memoizedProps)),n=!n),n&&He&&zs(t),EI(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));He=cS(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));He=cS(t)}else e===27?(e=He,ia(t.type)?(t=Wv,Wv=null,He=t):He=e):He=$t?di(t.stateNode.nextSibling):null;return!0}function Ja(){He=$t=null,we=!1}function $y(){var t=Ss;return t!==null&&(An===null?An=t:An.push.apply(An,t),Ss=null),t}function Sh(t){Ss===null?Ss=[t]:Ss.push(t)}var wv=ir(null),bo=null,yr=null;function ds(t,e,n){je(wv,e._currentValue),e._currentValue=n}function Tr(t){t._currentValue=wv.current,Ut(wv)}function bv(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Tv(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;e:for(;s!==null;){var o=s;s=r;for(var l=0;l<e.length;l++)if(o.context===e[l]){s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),bv(s.return,n,t),i||(a=null);break e}s=o.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(F(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),bv(a,n,t),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function gc(t,e,n,i){t=null;for(var r=e,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(F(387));if(a=a.memoizedProps,a!==null){var o=r.type;Wn(r.pendingProps.value,a.value)||(t!==null?t.push(o):t=[o])}}else if(r===km.current){if(a=r.alternate,a===null)throw Error(F(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(Dh):t=[Dh])}r=r.return}t!==null&&Tv(e,t,n,i),e.flags|=262144}function Fm(t){for(t=t.firstContext;t!==null;){if(!Wn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Za(t){bo=t,yr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Wt(t){return MP(bo,t)}function bf(t,e){return bo===null&&Za(t),MP(t,e)}function MP(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},yr===null){if(t===null)throw Error(F(308));yr=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else yr=yr.next=e;return n}var F6=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},B6=Pt.unstable_scheduleCallback,q6=Pt.unstable_NormalPriority,Tt={$$typeof:pr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kw(){return{controller:new F6,data:new Map,refCount:0}}function yd(t){t.refCount--,t.refCount===0&&B6(q6,function(){t.controller.abort()})}var Fu=null,Ev=0,kl=0,vl=null;function H6(t,e){if(Fu===null){var n=Fu=[];Ev=0,kl=rb(),vl={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Ev++,e.then(AI,AI),e}function AI(){if(--Ev===0&&Fu!==null){vl!==null&&(vl.status="fulfilled");var t=Fu;Fu=null,kl=0,vl=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function $6(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var II=se.S;se.S=function(t,e){YN=Bn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&H6(t,e),II!==null&&II(t,e)};var Ha=ir(null);function Ow(){var t=Ha.current;return t!==null?t:Ue.pooledCache}function em(t,e){e===null?je(Ha,Ha.current):je(Ha,e.pool)}function LP(){var t=Ow();return t===null?null:{parent:Tt._currentValue,pool:t}}var yc=Error(F(460)),Vw=Error(F(474)),ng=Error(F(542)),Bm={then:function(){}};function SI(t){return t=t.status,t==="fulfilled"||t==="rejected"}function UP(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(gr,gr),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,RI(t),t;default:if(typeof e.status=="string")e.then(gr,gr);else{if(t=Ue,t!==null&&100<t.shellSuspendCounter)throw Error(F(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,RI(t),t}throw $a=e,yc}}function Aa(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?($a=n,yc):n}}var $a=null;function xI(){if($a===null)throw Error(F(459));var t=$a;return $a=null,t}function RI(t){if(t===yc||t===ng)throw Error(F(483))}var wl=null,xh=0;function Tf(t){var e=xh;return xh+=1,wl===null&&(wl=[]),UP(wl,t,e)}function ru(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Ef(t,e){throw e.$$typeof===N4?Error(F(525)):(t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function jP(t){function e(w,v){if(t){var _=w.deletions;_===null?(w.deletions=[v],w.flags|=16):_.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function i(w){for(var v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function r(w,v){return w=br(w,v),w.index=0,w.sibling=null,w}function s(w,v,_){return w.index=_,t?(_=w.alternate,_!==null?(_=_.index,_<v?(w.flags|=67108866,v):_):(w.flags|=67108866,v)):(w.flags|=1048576,v)}function a(w){return t&&w.alternate===null&&(w.flags|=67108866),w}function o(w,v,_,I){return v===null||v.tag!==6?(v=qy(_,w.mode,I),v.return=w,v):(v=r(v,_),v.return=w,v)}function l(w,v,_,I){var k=_.type;return k===Xo?h(w,v,_.props.children,I,_.key):v!==null&&(v.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===us&&Aa(k)===v.type)?(v=r(v,_.props),ru(v,_),v.return=w,v):(v=Zf(_.type,_.key,_.props,null,w.mode,I),ru(v,_),v.return=w,v)}function c(w,v,_,I){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=Hy(_,w.mode,I),v.return=w,v):(v=r(v,_.children||[]),v.return=w,v)}function h(w,v,_,I,k){return v===null||v.tag!==7?(v=qa(_,w.mode,I,k),v.return=w,v):(v=r(v,_),v.return=w,v)}function d(w,v,_){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=qy(""+v,w.mode,_),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case pf:return _=Zf(v.type,v.key,v.props,null,w.mode,_),ru(_,v),_.return=w,_;case wu:return v=Hy(v,w.mode,_),v.return=w,v;case us:return v=Aa(v),d(w,v,_)}if(bu(v)||tu(v))return v=qa(v,w.mode,_,null),v.return=w,v;if(typeof v.then=="function")return d(w,Tf(v),_);if(v.$$typeof===pr)return d(w,bf(w,v),_);Ef(w,v)}return null}function f(w,v,_,I){var k=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return k!==null?null:o(w,v,""+_,I);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case pf:return _.key===k?l(w,v,_,I):null;case wu:return _.key===k?c(w,v,_,I):null;case us:return _=Aa(_),f(w,v,_,I)}if(bu(_)||tu(_))return k!==null?null:h(w,v,_,I,null);if(typeof _.then=="function")return f(w,v,Tf(_),I);if(_.$$typeof===pr)return f(w,v,bf(w,_),I);Ef(w,_)}return null}function g(w,v,_,I,k){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return w=w.get(_)||null,o(v,w,""+I,k);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case pf:return w=w.get(I.key===null?_:I.key)||null,l(v,w,I,k);case wu:return w=w.get(I.key===null?_:I.key)||null,c(v,w,I,k);case us:return I=Aa(I),g(w,v,_,I,k)}if(bu(I)||tu(I))return w=w.get(_)||null,h(v,w,I,k,null);if(typeof I.then=="function")return g(w,v,_,Tf(I),k);if(I.$$typeof===pr)return g(w,v,_,bf(v,I),k);Ef(v,I)}return null}function b(w,v,_,I){for(var k=null,V=null,A=v,T=v=0,S=null;A!==null&&T<_.length;T++){A.index>T?(S=A,A=null):S=A.sibling;var R=f(w,A,_[T],I);if(R===null){A===null&&(A=S);break}t&&A&&R.alternate===null&&e(w,A),v=s(R,v,T),V===null?k=R:V.sibling=R,V=R,A=S}if(T===_.length)return n(w,A),we&&dr(w,T),k;if(A===null){for(;T<_.length;T++)A=d(w,_[T],I),A!==null&&(v=s(A,v,T),V===null?k=A:V.sibling=A,V=A);return we&&dr(w,T),k}for(A=i(A);T<_.length;T++)S=g(A,w,T,_[T],I),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?T:S.key),v=s(S,v,T),V===null?k=S:V.sibling=S,V=S);return t&&A.forEach(function(D){return e(w,D)}),we&&dr(w,T),k}function E(w,v,_,I){if(_==null)throw Error(F(151));for(var k=null,V=null,A=v,T=v=0,S=null,R=_.next();A!==null&&!R.done;T++,R=_.next()){A.index>T?(S=A,A=null):S=A.sibling;var D=f(w,A,R.value,I);if(D===null){A===null&&(A=S);break}t&&A&&D.alternate===null&&e(w,A),v=s(D,v,T),V===null?k=D:V.sibling=D,V=D,A=S}if(R.done)return n(w,A),we&&dr(w,T),k;if(A===null){for(;!R.done;T++,R=_.next())R=d(w,R.value,I),R!==null&&(v=s(R,v,T),V===null?k=R:V.sibling=R,V=R);return we&&dr(w,T),k}for(A=i(A);!R.done;T++,R=_.next())R=g(A,w,T,R.value,I),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?T:R.key),v=s(R,v,T),V===null?k=R:V.sibling=R,V=R);return t&&A.forEach(function(O){return e(w,O)}),we&&dr(w,T),k}function x(w,v,_,I){if(typeof _=="object"&&_!==null&&_.type===Xo&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case pf:e:{for(var k=_.key;v!==null;){if(v.key===k){if(k=_.type,k===Xo){if(v.tag===7){n(w,v.sibling),I=r(v,_.props.children),I.return=w,w=I;break e}}else if(v.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===us&&Aa(k)===v.type){n(w,v.sibling),I=r(v,_.props),ru(I,_),I.return=w,w=I;break e}n(w,v);break}else e(w,v);v=v.sibling}_.type===Xo?(I=qa(_.props.children,w.mode,I,_.key),I.return=w,w=I):(I=Zf(_.type,_.key,_.props,null,w.mode,I),ru(I,_),I.return=w,w=I)}return a(w);case wu:e:{for(k=_.key;v!==null;){if(v.key===k)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(w,v.sibling),I=r(v,_.children||[]),I.return=w,w=I;break e}else{n(w,v);break}else e(w,v);v=v.sibling}I=Hy(_,w.mode,I),I.return=w,w=I}return a(w);case us:return _=Aa(_),x(w,v,_,I)}if(bu(_))return b(w,v,_,I);if(tu(_)){if(k=tu(_),typeof k!="function")throw Error(F(150));return _=k.call(_),E(w,v,_,I)}if(typeof _.then=="function")return x(w,v,Tf(_),I);if(_.$$typeof===pr)return x(w,v,bf(w,_),I);Ef(w,_)}return typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint"?(_=""+_,v!==null&&v.tag===6?(n(w,v.sibling),I=r(v,_),I.return=w,w=I):(n(w,v),I=qy(_,w.mode,I),I.return=w,w=I),a(w)):n(w,v)}return function(w,v,_,I){try{xh=0;var k=x(w,v,_,I);return wl=null,k}catch(A){if(A===yc||A===ng)throw A;var V=jn(29,A,null,w.mode);return V.lanes=I,V.return=w,V}finally{}}}var eo=jP(!0),zP=jP(!1),hs=!1;function Mw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Av(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function xs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Rs(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,xe&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=jm(t),NP(t,null,n),e}return tg(t,i,e,n),jm(t)}function Bu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,rP(t,n)}}function Gy(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Iv=!1;function qu(){if(Iv){var t=vl;if(t!==null)throw t}}function Hu(t,e,n,i){Iv=!1;var r=t.updateQueue;hs=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;a=0,h=c=l=null,o=s;do{var f=o.lane&-536870913,g=f!==o.lane;if(g?(ye&f)===f:(i&f)===f){f!==0&&f===kl&&(Iv=!0),h!==null&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var b=t,E=o;f=e;var x=n;switch(E.tag){case 1:if(b=E.payload,typeof b=="function"){d=b.call(x,d,f);break e}d=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=E.payload,f=typeof b=="function"?b.call(x,d,f):b,f==null)break e;d=We({},d,f);break e;case 2:hs=!0}}f=o.callback,f!==null&&(t.flags|=64,g&&(t.flags|=8192),g=r.callbacks,g===null?r.callbacks=[f]:g.push(f))}else g={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,a|=f;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;g=o,o=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(!0);h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,s===null&&(r.shared.lanes=0),Bs|=a,t.lanes=a,t.memoizedState=d}}function FP(t,e){if(typeof t!="function")throw Error(F(191,t));t.call(e)}function BP(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)FP(n[t],e)}var Ol=ir(null),qm=ir(0);function CI(t,e){t=kr,je(qm,t),je(Ol,e),kr=t|e.baseLanes}function Sv(){je(qm,kr),je(Ol,Ol.current)}function Lw(){kr=qm.current,Ut(Ol),Ut(qm)}var Qn=ir(null),hi=null;function fs(t){var e=t.alternate;je(ft,ft.current&1),je(Qn,t),hi===null&&(e===null||Ol.current!==null||e.memoizedState!==null)&&(hi=t)}function xv(t){je(ft,ft.current),je(Qn,t),hi===null&&(hi=t)}function qP(t){t.tag===22?(je(ft,ft.current),je(Qn,t),hi===null&&(hi=t)):ms()}function ms(){je(ft,ft.current),je(Qn,Qn.current)}function Ln(t){Ut(Qn),hi===t&&(hi=null),Ut(ft)}var ft=ir(0);function Hm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Gv(n)||Kv(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pr=0,le=null,Ve=null,wt=null,$m=!1,bl=!1,to=!1,Gm=0,Rh=0,Tl=null,G6=0;function at(){throw Error(F(321))}function Uw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wn(t[n],e[n]))return!1;return!0}function jw(t,e,n,i,r,s){return Pr=s,le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,se.H=t===null||t.memoizedState===null?wN:Yw,to=!1,s=n(i,r),to=!1,bl&&(s=$P(e,n,i,r)),HP(t),s}function HP(t){se.H=Ch;var e=Ve!==null&&Ve.next!==null;if(Pr=0,wt=Ve=le=null,$m=!1,Rh=0,Tl=null,e)throw Error(F(300));t===null||Et||(t=t.dependencies,t!==null&&Fm(t)&&(Et=!0))}function $P(t,e,n,i){le=t;var r=0;do{if(bl&&(Tl=null),Rh=0,bl=!1,25<=r)throw Error(F(301));if(r+=1,wt=Ve=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}se.H=bN,s=e(n,i)}while(bl);return s}function K6(){var t=se.H,e=t.useState()[0];return e=typeof e.then=="function"?_d(e):e,t=t.useState()[0],(Ve!==null?Ve.memoizedState:null)!==t&&(le.flags|=1024),e}function zw(){var t=Gm!==0;return Gm=0,t}function Fw(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Bw(t){if($m){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}$m=!1}Pr=0,wt=Ve=le=null,bl=!1,Rh=Gm=0,Tl=null}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?le.memoizedState=wt=t:wt=wt.next=t,wt}function pt(){if(Ve===null){var t=le.alternate;t=t!==null?t.memoizedState:null}else t=Ve.next;var e=wt===null?le.memoizedState:wt.next;if(e!==null)wt=e,Ve=t;else{if(t===null)throw le.alternate===null?Error(F(467)):Error(F(310));Ve=t,t={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},wt===null?le.memoizedState=wt=t:wt=wt.next=t}return wt}function ig(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _d(t){var e=Rh;return Rh+=1,Tl===null&&(Tl=[]),t=UP(Tl,t,e),e=le,(wt===null?e.memoizedState:wt.next)===null&&(e=e.alternate,se.H=e===null||e.memoizedState===null?wN:Yw),t}function rg(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return _d(t);if(t.$$typeof===pr)return Wt(t)}throw Error(F(438,String(t)))}function qw(t){var e=null,n=le.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=le.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=ig(),le.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=D4;return e.index++,n}function Nr(t,e){return typeof e=="function"?e(t):e}function tm(t){var e=pt();return Hw(e,Ve,t)}function Hw(t,e,n){var i=t.queue;if(i===null)throw Error(F(311));i.lastRenderedReducer=n;var r=t.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}e.baseQueue=r=s,i.pending=null}if(s=t.baseState,r===null)t.memoizedState=s;else{e=r.next;var o=a=null,l=null,c=e,h=!1;do{var d=c.lane&-536870913;if(d!==c.lane?(ye&d)===d:(Pr&d)===d){var f=c.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===kl&&(h=!0);else if((Pr&f)===f){c=c.next,f===kl&&(h=!0);continue}else d={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=d,a=s):l=l.next=d,le.lanes|=f,Bs|=f;d=c.action,to&&n(s,d),s=c.hasEagerState?c.eagerState:n(s,d)}else f={lane:d,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=f,a=s):l=l.next=f,le.lanes|=d,Bs|=d;c=c.next}while(c!==null&&c!==e);if(l===null?a=s:l.next=o,!Wn(s,t.memoizedState)&&(Et=!0,h&&(n=vl,n!==null)))throw n;t.memoizedState=s,t.baseState=a,t.baseQueue=l,i.lastRenderedState=s}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Ky(t){var e=pt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);Wn(s,e.memoizedState)||(Et=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function GP(t,e,n){var i=le,r=pt(),s=we;if(s){if(n===void 0)throw Error(F(407));n=n()}else n=e();var a=!Wn((Ve||r).memoizedState,n);if(a&&(r.memoizedState=n,Et=!0),r=r.queue,$w(QP.bind(null,i,r,t),[t]),r.getSnapshot!==e||a||wt!==null&&wt.memoizedState.tag&1){if(i.flags|=2048,Vl(9,{destroy:void 0},WP.bind(null,i,r,n,e),null),Ue===null)throw Error(F(349));s||Pr&127||KP(i,e,n)}return n}function KP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=le.updateQueue,e===null?(e=ig(),le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function WP(t,e,n,i){e.value=n,e.getSnapshot=i,YP(e)&&XP(t)}function QP(t,e,n){return n(function(){YP(e)&&XP(t)})}function YP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wn(t,n)}catch{return!0}}function XP(t){var e=wo(t,2);e!==null&&Cn(e,t,2)}function Rv(t){var e=dn();if(typeof t=="function"){var n=t;if(t=n(),to){ys(!0);try{n()}finally{ys(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:t},e}function JP(t,e,n,i){return t.baseState=n,Hw(t,Ve,typeof i=="function"?i:Nr)}function W6(t,e,n,i,r){if(ag(t))throw Error(F(485));if(t=e.action,t!==null){var s={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};se.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,ZP(e,s)):(s.next=n.next,e.pending=n.next=s)}}function ZP(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var s=se.T,a={};se.T=a;try{var o=n(r,i),l=se.S;l!==null&&l(a,o),PI(t,e,o)}catch(c){Cv(t,e,c)}finally{s!==null&&a.types!==null&&(s.types=a.types),se.T=s}}else try{s=n(r,i),PI(t,e,s)}catch(c){Cv(t,e,c)}}function PI(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){NI(t,e,i)},function(i){return Cv(t,e,i)}):NI(t,e,n)}function NI(t,e,n){e.status="fulfilled",e.value=n,eN(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,ZP(t,n)))}function Cv(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,eN(e),e=e.next;while(e!==i)}t.action=null}function eN(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function tN(t,e){return e}function DI(t,e){if(we){var n=Ue.formState;if(n!==null){e:{var i=le;if(we){if(He){t:{for(var r=He,s=oi;r.nodeType!==8;){if(!s){r=null;break t}if(r=di(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){He=di(r.nextSibling),i=r.data==="F!";break e}}zs(i)}i=!1}i&&(e=n[0])}}return n=dn(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tN,lastRenderedState:e},n.queue=i,n=yN.bind(null,le,i),i.dispatch=n,i=Rv(!1),s=Qw.bind(null,le,!1,i.queue),i=dn(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=W6.bind(null,le,r,s,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function kI(t){var e=pt();return nN(e,Ve,t)}function nN(t,e,n){if(e=Hw(t,e,tN)[0],t=tm(Nr)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=_d(e)}catch(a){throw a===yc?ng:a}else i=e;e=pt();var r=e.queue,s=r.dispatch;return n!==e.memoizedState&&(le.flags|=2048,Vl(9,{destroy:void 0},Q6.bind(null,r,n),null)),[i,s,t]}function Q6(t,e){t.action=e}function OI(t){var e=pt(),n=Ve;if(n!==null)return nN(e,n,t);pt(),e=e.memoizedState,n=pt();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function Vl(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=le.updateQueue,e===null&&(e=ig(),le.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function iN(){return pt().memoizedState}function nm(t,e,n,i){var r=dn();le.flags|=t,r.memoizedState=Vl(1|e,{destroy:void 0},n,i===void 0?null:i)}function sg(t,e,n,i){var r=pt();i=i===void 0?null:i;var s=r.memoizedState.inst;Ve!==null&&i!==null&&Uw(i,Ve.memoizedState.deps)?r.memoizedState=Vl(e,s,n,i):(le.flags|=t,r.memoizedState=Vl(1|e,s,n,i))}function VI(t,e){nm(8390656,8,t,e)}function $w(t,e){sg(2048,8,t,e)}function Y6(t){le.flags|=4;var e=le.updateQueue;if(e===null)e=ig(),le.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function rN(t){var e=pt().memoizedState;return Y6({ref:e,nextImpl:t}),function(){if(xe&2)throw Error(F(440));return e.impl.apply(void 0,arguments)}}function sN(t,e){return sg(4,2,t,e)}function aN(t,e){return sg(4,4,t,e)}function oN(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lN(t,e,n){n=n!=null?n.concat([t]):null,sg(4,4,oN.bind(null,e,t),n)}function Gw(){}function cN(t,e){var n=pt();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&Uw(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function uN(t,e){var n=pt();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&Uw(e,i[1]))return i[0];if(i=t(),to){ys(!0);try{t()}finally{ys(!1)}}return n.memoizedState=[i,e],i}function Kw(t,e,n){return n===void 0||Pr&1073741824&&!(ye&261930)?t.memoizedState=e:(t.memoizedState=n,t=JN(),le.lanes|=t,Bs|=t,n)}function hN(t,e,n,i){return Wn(n,e)?n:Ol.current!==null?(t=Kw(t,n,i),Wn(t,e)||(Et=!0),t):!(Pr&42)||Pr&1073741824&&!(ye&261930)?(Et=!0,t.memoizedState=n):(t=JN(),le.lanes|=t,Bs|=t,e)}function dN(t,e,n,i,r){var s=Re.p;Re.p=s!==0&&8>s?s:8;var a=se.T,o={};se.T=o,Qw(t,!1,e,n);try{var l=r(),c=se.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=$6(l,i);$u(t,e,h,$n(t))}else $u(t,e,i,$n(t))}catch(d){$u(t,e,{then:function(){},status:"rejected",reason:d},$n())}finally{Re.p=s,a!==null&&o.types!==null&&(a.types=o.types),se.T=a}}function X6(){}function Pv(t,e,n,i){if(t.tag!==5)throw Error(F(476));var r=fN(t).queue;dN(t,r,e,Ba,n===null?X6:function(){return mN(t),n(i)})}function fN(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Ba,baseState:Ba,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:Ba},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function mN(t){var e=fN(t);e.next===null&&(e=t.alternate.memoizedState),$u(t,e.next.queue,{},$n())}function Ww(){return Wt(Dh)}function pN(){return pt().memoizedState}function gN(){return pt().memoizedState}function J6(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=$n();t=xs(n);var i=Rs(e,t,n);i!==null&&(Cn(i,e,n),Bu(i,e,n)),e={cache:kw()},t.payload=e;return}e=e.return}}function Z6(t,e,n){var i=$n();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ag(t)?_N(e,n):(n=Cw(t,e,n,i),n!==null&&(Cn(n,t,i),vN(n,e,i)))}function yN(t,e,n){var i=$n();$u(t,e,n,i)}function $u(t,e,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ag(t))_N(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,Wn(o,a))return tg(t,e,r,0),Ue===null&&eg(),!1}catch{}finally{}if(n=Cw(t,e,r,i),n!==null)return Cn(n,t,i),vN(n,e,i),!0}return!1}function Qw(t,e,n,i){if(i={lane:2,revertLane:rb(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},ag(t)){if(e)throw Error(F(479))}else e=Cw(t,n,i,2),e!==null&&Cn(e,t,2)}function ag(t){var e=t.alternate;return t===le||e!==null&&e===le}function _N(t,e){bl=$m=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vN(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,rP(t,n)}}var Ch={readContext:Wt,use:rg,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useLayoutEffect:at,useInsertionEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useSyncExternalStore:at,useId:at,useHostTransitionStatus:at,useFormState:at,useActionState:at,useOptimistic:at,useMemoCache:at,useCacheRefresh:at};Ch.useEffectEvent=at;var wN={readContext:Wt,use:rg,useCallback:function(t,e){return dn().memoizedState=[t,e===void 0?null:e],t},useContext:Wt,useEffect:VI,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,nm(4194308,4,oN.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nm(4194308,4,t,e)},useInsertionEffect:function(t,e){nm(4,2,t,e)},useMemo:function(t,e){var n=dn();e=e===void 0?null:e;var i=t();if(to){ys(!0);try{t()}finally{ys(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=dn();if(n!==void 0){var r=n(e);if(to){ys(!0);try{n(e)}finally{ys(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=Z6.bind(null,le,t),[i.memoizedState,t]},useRef:function(t){var e=dn();return t={current:t},e.memoizedState=t},useState:function(t){t=Rv(t);var e=t.queue,n=yN.bind(null,le,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Gw,useDeferredValue:function(t,e){var n=dn();return Kw(n,t,e)},useTransition:function(){var t=Rv(!1);return t=dN.bind(null,le,t.queue,!0,!1),dn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=le,r=dn();if(we){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Ue===null)throw Error(F(349));ye&127||KP(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,VI(QP.bind(null,i,s,t),[t]),i.flags|=2048,Vl(9,{destroy:void 0},WP.bind(null,i,s,n,e),null),n},useId:function(){var t=dn(),e=Ue.identifierPrefix;if(we){var n=Fi,i=zi;n=(i&~(1<<32-Hn(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Gm++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=G6++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Ww,useFormState:DI,useActionState:DI,useOptimistic:function(t){var e=dn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Qw.bind(null,le,!0,n),n.dispatch=e,[t,e]},useMemoCache:qw,useCacheRefresh:function(){return dn().memoizedState=J6.bind(null,le)},useEffectEvent:function(t){var e=dn(),n={impl:t};return e.memoizedState=n,function(){if(xe&2)throw Error(F(440));return n.impl.apply(void 0,arguments)}}},Yw={readContext:Wt,use:rg,useCallback:cN,useContext:Wt,useEffect:$w,useImperativeHandle:lN,useInsertionEffect:sN,useLayoutEffect:aN,useMemo:uN,useReducer:tm,useRef:iN,useState:function(){return tm(Nr)},useDebugValue:Gw,useDeferredValue:function(t,e){var n=pt();return hN(n,Ve.memoizedState,t,e)},useTransition:function(){var t=tm(Nr)[0],e=pt().memoizedState;return[typeof t=="boolean"?t:_d(t),e]},useSyncExternalStore:GP,useId:pN,useHostTransitionStatus:Ww,useFormState:kI,useActionState:kI,useOptimistic:function(t,e){var n=pt();return JP(n,Ve,t,e)},useMemoCache:qw,useCacheRefresh:gN};Yw.useEffectEvent=rN;var bN={readContext:Wt,use:rg,useCallback:cN,useContext:Wt,useEffect:$w,useImperativeHandle:lN,useInsertionEffect:sN,useLayoutEffect:aN,useMemo:uN,useReducer:Ky,useRef:iN,useState:function(){return Ky(Nr)},useDebugValue:Gw,useDeferredValue:function(t,e){var n=pt();return Ve===null?Kw(n,t,e):hN(n,Ve.memoizedState,t,e)},useTransition:function(){var t=Ky(Nr)[0],e=pt().memoizedState;return[typeof t=="boolean"?t:_d(t),e]},useSyncExternalStore:GP,useId:pN,useHostTransitionStatus:Ww,useFormState:OI,useActionState:OI,useOptimistic:function(t,e){var n=pt();return Ve!==null?JP(n,Ve,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:qw,useCacheRefresh:gN};bN.useEffectEvent=rN;function Wy(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:We({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Nv={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=$n(),r=xs(i);r.payload=e,n!=null&&(r.callback=n),e=Rs(t,r,i),e!==null&&(Cn(e,t,i),Bu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=$n(),r=xs(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Rs(t,r,i),e!==null&&(Cn(e,t,i),Bu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$n(),i=xs(n);i.tag=2,e!=null&&(i.callback=e),e=Rs(t,i,n),e!==null&&(Cn(e,t,n),Bu(e,t,n))}};function MI(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!Ah(n,i)||!Ah(r,s):!0}function LI(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Nv.enqueueReplaceState(e,e.state,null)}function no(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=We({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function TN(t){Um(t)}function EN(t){console.error(t)}function AN(t){Um(t)}function Km(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function UI(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Dv(t,e,n){return n=xs(n),n.tag=3,n.payload={element:null},n.callback=function(){Km(t,e)},n}function IN(t){return t=xs(t),t.tag=3,t}function SN(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;t.payload=function(){return r(s)},t.callback=function(){UI(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){UI(e,n,i),typeof r!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function e5(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&gc(e,n,r,!0),n=Qn.current,n!==null){switch(n.tag){case 31:case 13:return hi===null?Jm():n.alternate===null&&lt===0&&(lt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Bm?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),s_(t,i,r)),!1;case 22:return n.flags|=65536,i===Bm?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),s_(t,i,r)),!1}throw Error(F(435,n.tag))}return s_(t,i,r),Jm(),!1}if(we)return e=Qn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==vv&&(t=Error(F(422),{cause:i}),Sh(ai(t,n)))):(i!==vv&&(e=Error(F(423),{cause:i}),Sh(ai(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=ai(i,n),r=Dv(t.stateNode,i,r),Gy(t,r),lt!==4&&(lt=2)),!1;var s=Error(F(520),{cause:i});if(s=ai(s,n),Wu===null?Wu=[s]:Wu.push(s),lt!==4&&(lt=2),e===null)return!0;i=ai(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=Dv(n.stateNode,i,t),Gy(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Cs===null||!Cs.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=IN(r),SN(r,t,n,i),Gy(n,r),!1}n=n.return}while(n!==null);return!1}var Xw=Error(F(461)),Et=!1;function Bt(t,e,n,i){e.child=t===null?zP(e,null,n,i):eo(e,t.child,n,i)}function jI(t,e,n,i,r){n=n.render;var s=e.ref;if("ref"in i){var a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}else a=i;return Za(e),i=jw(t,e,n,a,s,r),o=zw(),t!==null&&!Et?(Fw(t,e,r),Dr(t,e,r)):(we&&o&&Nw(e),e.flags|=1,Bt(t,e,i,r),e.child)}function zI(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Pw(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,xN(t,e,s,i,r)):(t=Zf(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!Jw(t,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ah,n(a,i)&&t.ref===e.ref)return Dr(t,e,r)}return e.flags|=1,t=br(s,i),t.ref=e.ref,t.return=e,e.child=t}function xN(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Ah(s,i)&&t.ref===e.ref)if(Et=!1,e.pendingProps=i=s,Jw(t,r))t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,Dr(t,e,r)}return kv(t,e,n,i,r)}function RN(t,e,n,i){var r=i.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(s=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~s}else i=0,e.child=null;return FI(t,e,s,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&em(e,s!==null?s.cachePool:null),s!==null?CI(e,s):Sv(),qP(e);else return i=e.lanes=536870912,FI(t,e,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(em(e,s.cachePool),CI(e,s),ms(),e.memoizedState=null):(t!==null&&em(e,null),Sv(),ms());return Bt(t,e,r,n),e.child}function Eu(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function FI(t,e,n,i,r){var s=Ow();return s=s===null?null:{parent:Tt._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&em(e,null),Sv(),qP(e),t!==null&&gc(t,e,i,!0),e.childLanes=r,null}function im(t,e){return e=Wm({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function BI(t,e,n){return eo(e,t.child,null,n),t=im(e,e.pendingProps),t.flags|=2,Ln(e),e.memoizedState=null,t}function t5(t,e,n){var i=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(we){if(i.mode==="hidden")return t=im(e,i),e.lanes=536870912,Eu(null,t);if(xv(e),(t=He)?(t=w2(t,oi),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:js!==null?{id:zi,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},n=kP(t),n.return=e,e.child=n,$t=e,He=null)):t=null,t===null)throw zs(e);return e.lanes=536870912,null}return im(e,i)}var s=t.memoizedState;if(s!==null){var a=s.dehydrated;if(xv(e),r)if(e.flags&256)e.flags&=-257,e=BI(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(F(558));else if(Et||gc(t,e,n,!1),r=(n&t.childLanes)!==0,Et||r){if(i=Ue,i!==null&&(a=sP(i,n),a!==0&&a!==s.retryLane))throw s.retryLane=a,wo(t,a),Cn(i,t,a),Xw;Jm(),e=BI(t,e,n)}else t=s.treeContext,He=di(a.nextSibling),$t=e,we=!0,Ss=null,oi=!1,t!==null&&VP(e,t),e=im(e,i),e.flags|=4096;return e}return t=br(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function rm(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(F(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function kv(t,e,n,i,r){return Za(e),n=jw(t,e,n,i,void 0,r),i=zw(),t!==null&&!Et?(Fw(t,e,r),Dr(t,e,r)):(we&&i&&Nw(e),e.flags|=1,Bt(t,e,n,r),e.child)}function qI(t,e,n,i,r,s){return Za(e),e.updateQueue=null,n=$P(e,i,n,r),HP(t),i=zw(),t!==null&&!Et?(Fw(t,e,s),Dr(t,e,s)):(we&&i&&Nw(e),e.flags|=1,Bt(t,e,n,s),e.child)}function HI(t,e,n,i,r){if(Za(e),e.stateNode===null){var s=sl,a=n.contextType;typeof a=="object"&&a!==null&&(s=Wt(a)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Nv,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},Mw(e),a=n.contextType,s.context=typeof a=="object"&&a!==null?Wt(a):sl,s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Wy(e,n,a,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&Nv.enqueueReplaceState(s,s.state,null),Hu(e,i,s,r),qu(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var o=e.memoizedProps,l=no(n,o);s.props=l;var c=s.context,h=n.contextType;a=sl,typeof h=="object"&&h!==null&&(a=Wt(h));var d=n.getDerivedStateFromProps;h=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o||c!==a)&&LI(e,s,i,a),hs=!1;var f=e.memoizedState;s.state=f,Hu(e,i,s,r),qu(),c=e.memoizedState,o||f!==c||hs?(typeof d=="function"&&(Wy(e,n,d,i),c=e.memoizedState),(l=hs||MI(e,n,l,i,f,c,a))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),s.props=i,s.state=c,s.context=a,i=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Av(t,e),a=e.memoizedProps,h=no(n,a),s.props=h,d=e.pendingProps,f=s.context,c=n.contextType,l=sl,typeof c=="object"&&c!==null&&(l=Wt(c)),o=n.getDerivedStateFromProps,(c=typeof o=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&LI(e,s,i,l),hs=!1,f=e.memoizedState,s.state=f,Hu(e,i,s,r),qu();var g=e.memoizedState;a!==d||f!==g||hs||t!==null&&t.dependencies!==null&&Fm(t.dependencies)?(typeof o=="function"&&(Wy(e,n,o,i),g=e.memoizedState),(h=hs||MI(e,n,h,i,f,g,l)||t!==null&&t.dependencies!==null&&Fm(t.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,g,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,g,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),s.props=i,s.state=g,s.context=l,i=h):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,rm(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=eo(e,t.child,null,r),e.child=eo(e,null,n,r)):Bt(t,e,n,r),e.memoizedState=s.state,t=e.child):t=Dr(t,e,r),t}function $I(t,e,n,i){return Ja(),e.flags|=256,Bt(t,e,n,i),e.child}var Qy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yy(t){return{baseLanes:t,cachePool:LP()}}function Xy(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=zn),t}function CN(t,e,n){var i=e.pendingProps,r=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(ft.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(we){if(r?fs(e):ms(),(t=He)?(t=w2(t,oi),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:js!==null?{id:zi,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},n=kP(t),n.return=e,e.child=n,$t=e,He=null)):t=null,t===null)throw zs(e);return Kv(t)?e.lanes=32:e.lanes=536870912,null}var o=i.children;return i=i.fallback,r?(ms(),r=e.mode,o=Wm({mode:"hidden",children:o},r),i=qa(i,r,n,null),o.return=e,i.return=e,o.sibling=i,e.child=o,i=e.child,i.memoizedState=Yy(n),i.childLanes=Xy(t,a,n),e.memoizedState=Qy,Eu(null,i)):(fs(e),Ov(e,o))}var l=t.memoizedState;if(l!==null&&(o=l.dehydrated,o!==null)){if(s)e.flags&256?(fs(e),e.flags&=-257,e=Jy(t,e,n)):e.memoizedState!==null?(ms(),e.child=t.child,e.flags|=128,e=null):(ms(),o=i.fallback,r=e.mode,i=Wm({mode:"visible",children:i.children},r),o=qa(o,r,n,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,eo(e,t.child,null,n),i=e.child,i.memoizedState=Yy(n),i.childLanes=Xy(t,a,n),e.memoizedState=Qy,e=Eu(null,i));else if(fs(e),Kv(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var c=a.dgst;a=c,i=Error(F(419)),i.stack="",i.digest=a,Sh({value:i,source:null,stack:null}),e=Jy(t,e,n)}else if(Et||gc(t,e,n,!1),a=(n&t.childLanes)!==0,Et||a){if(a=Ue,a!==null&&(i=sP(a,n),i!==0&&i!==l.retryLane))throw l.retryLane=i,wo(t,i),Cn(a,t,i),Xw;Gv(o)||Jm(),e=Jy(t,e,n)}else Gv(o)?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,He=di(o.nextSibling),$t=e,we=!0,Ss=null,oi=!1,t!==null&&VP(e,t),e=Ov(e,i.children),e.flags|=4096);return e}return r?(ms(),o=i.fallback,r=e.mode,l=t.child,c=l.sibling,i=br(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,c!==null?o=br(c,o):(o=qa(o,r,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,Eu(null,i),i=e.child,o=t.child.memoizedState,o===null?o=Yy(n):(r=o.cachePool,r!==null?(l=Tt._currentValue,r=r.parent!==l?{parent:l,pool:l}:r):r=LP(),o={baseLanes:o.baseLanes|n,cachePool:r}),i.memoizedState=o,i.childLanes=Xy(t,a,n),e.memoizedState=Qy,Eu(t.child,i)):(fs(e),n=t.child,t=n.sibling,n=br(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function Ov(t,e){return e=Wm({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Wm(t,e){return t=jn(22,t,null,e),t.lanes=0,t}function Jy(t,e,n){return eo(e,t.child,null,n),t=Ov(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function GI(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),bv(t.return,e,n)}function Zy(t,e,n,i,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r,a.treeForkCount=s)}function PN(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;i=i.children;var a=ft.current,o=(a&2)!==0;if(o?(a=a&1|2,e.flags|=128):a&=1,je(ft,a),Bt(t,e,i,n),i=we?Ih:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&GI(t,n,e);else if(t.tag===19)GI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Hm(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Zy(e,!1,r,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Hm(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Zy(e,!0,n,null,s,i);break;case"together":Zy(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function Dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Bs|=e.lanes,!(n&e.childLanes))if(t!==null){if(gc(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=br(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=br(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Jw(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Fm(t)))}function n5(t,e,n){switch(e.tag){case 3:Om(e,e.stateNode.containerInfo),ds(e,Tt,t.memoizedState.cache),Ja();break;case 27:case 5:lv(e);break;case 4:Om(e,e.stateNode.containerInfo);break;case 10:ds(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,xv(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(fs(e),e.flags|=128,null):n&e.child.childLanes?CN(t,e,n):(fs(e),t=Dr(t,e,n),t!==null?t.sibling:null);fs(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(gc(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return PN(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),je(ft,ft.current),i)break;return null;case 22:return e.lanes=0,RN(t,e,n,e.pendingProps);case 24:ds(e,Tt,t.memoizedState.cache)}return Dr(t,e,n)}function NN(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Et=!0;else{if(!Jw(t,n)&&!(e.flags&128))return Et=!1,n5(t,e,n);Et=!!(t.flags&131072)}else Et=!1,we&&e.flags&1048576&&OP(e,Ih,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=Aa(e.elementType),e.type=t,typeof t=="function")Pw(t)?(i=no(t,i),e.tag=1,e=HI(null,e,t,i,n)):(e.tag=0,e=kv(null,e,t,i,n));else{if(t!=null){var r=t.$$typeof;if(r===gw){e.tag=11,e=jI(null,e,t,i,n);break e}else if(r===yw){e.tag=14,e=zI(null,e,t,i,n);break e}}throw e=av(t)||t,Error(F(306,e,""))}}return e;case 0:return kv(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=no(i,e.pendingProps),HI(t,e,i,r,n);case 3:e:{if(Om(e,e.stateNode.containerInfo),t===null)throw Error(F(387));i=e.pendingProps;var s=e.memoizedState;r=s.element,Av(t,e),Hu(e,i,null,n);var a=e.memoizedState;if(i=a.cache,ds(e,Tt,i),i!==s.cache&&Tv(e,[Tt],n,!0),qu(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=$I(t,e,i,n);break e}else if(i!==r){r=ai(Error(F(424)),e),Sh(r),e=$I(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(He=di(t.firstChild),$t=e,we=!0,Ss=null,oi=!0,n=zP(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ja(),i===r){e=Dr(t,e,n);break e}Bt(t,e,i,n)}e=e.child}return e;case 26:return rm(t,e),t===null?(n=dS(e.type,null,e.pendingProps,null))?e.memoizedState=n:we||(n=e.type,t=e.pendingProps,i=np(Is.current).createElement(n),i[Ht]=e,i[Pn]=t,Qt(i,n,t),Lt(i),e.stateNode=i):e.memoizedState=dS(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return lv(e),t===null&&we&&(i=e.stateNode=b2(e.type,e.pendingProps,Is.current),$t=e,oi=!0,r=He,ia(e.type)?(Wv=r,He=di(i.firstChild)):He=r),Bt(t,e,e.pendingProps.children,n),rm(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&we&&((r=i=He)&&(i=D5(i,e.type,e.pendingProps,oi),i!==null?(e.stateNode=i,$t=e,He=di(i.firstChild),oi=!1,r=!0):r=!1),r||zs(e)),lv(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,i=s.children,Hv(r,s)?i=null:a!==null&&Hv(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=jw(t,e,K6,null,null,n),Dh._currentValue=r),rm(t,e),Bt(t,e,i,n),e.child;case 6:return t===null&&we&&((t=n=He)&&(n=k5(n,e.pendingProps,oi),n!==null?(e.stateNode=n,$t=e,He=null,t=!0):t=!1),t||zs(e)),null;case 13:return CN(t,e,n);case 4:return Om(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=eo(e,null,i,n):Bt(t,e,i,n),e.child;case 11:return jI(t,e,e.type,e.pendingProps,n);case 7:return Bt(t,e,e.pendingProps,n),e.child;case 8:return Bt(t,e,e.pendingProps.children,n),e.child;case 12:return Bt(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,ds(e,e.type,i.value),Bt(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,Za(e),r=Wt(r),i=i(r),e.flags|=1,Bt(t,e,i,n),e.child;case 14:return zI(t,e,e.type,e.pendingProps,n);case 15:return xN(t,e,e.type,e.pendingProps,n);case 19:return PN(t,e,n);case 31:return t5(t,e,n);case 22:return RN(t,e,n,e.pendingProps);case 24:return Za(e),i=Wt(Tt),t===null?(r=Ow(),r===null&&(r=Ue,s=kw(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),e.memoizedState={parent:i,cache:r},Mw(e),ds(e,Tt,r)):(t.lanes&n&&(Av(t,e),Hu(e,null,null,n),qu()),r=t.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),ds(e,Tt,i)):(i=s.cache,ds(e,Tt,i),i!==r.cache&&Tv(e,[Tt],n,!0))),Bt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(F(156,e.tag))}function lr(t){t.flags|=4}function e_(t,e,n,i,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(t2())t.flags|=8192;else throw $a=Bm,Vw}else t.flags&=-16777217}function KI(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!A2(e))if(t2())t.flags|=8192;else throw $a=Bm,Vw}function Af(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?nP():536870912,t.lanes|=e,Ml|=e)}function su(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function qe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function i5(t,e,n){var i=e.pendingProps;switch(Dw(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(e),null;case 1:return qe(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Tr(Tt),Pl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ko(e)?lr(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$y())),qe(e),null;case 26:var r=e.type,s=e.memoizedState;return t===null?(lr(e),s!==null?(qe(e),KI(e,s)):(qe(e),e_(e,r,null,i,n))):s?s!==t.memoizedState?(lr(e),qe(e),KI(e,s)):(qe(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&lr(e),qe(e),e_(e,r,t,i,n)),null;case 27:if(Vm(e),n=Is.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&lr(e);else{if(!i){if(e.stateNode===null)throw Error(F(166));return qe(e),null}t=Ki.current,ko(e)?TI(e):(t=b2(r,i,n),e.stateNode=t,lr(e))}return qe(e),null;case 5:if(Vm(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&lr(e);else{if(!i){if(e.stateNode===null)throw Error(F(166));return qe(e),null}if(s=Ki.current,ko(e))TI(e);else{var a=np(Is.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":s=a.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?a.createElement("select",{is:i.is}):a.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?a.createElement(r,{is:i.is}):a.createElement(r)}}s[Ht]=e,s[Pn]=i;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=s;e:switch(Qt(s,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&lr(e)}}return qe(e),e_(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&lr(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(F(166));if(t=Is.current,ko(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=$t,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[Ht]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||y2(t.nodeValue,n)),t||zs(e,!0)}else t=np(t).createTextNode(i),t[Ht]=e,e.stateNode=t}return qe(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=ko(e),n!==null){if(t===null){if(!i)throw Error(F(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(557));t[Ht]=e}else Ja(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qe(e),t=!1}else n=$y(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Ln(e),e):(Ln(e),null);if(e.flags&128)throw Error(F(558))}return qe(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=ko(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(F(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(F(317));r[Ht]=e}else Ja(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qe(e),r=!1}else r=$y(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(Ln(e),e):(Ln(e),null)}return Ln(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Af(e,e.updateQueue),qe(e),null);case 4:return Pl(),t===null&&sb(e.stateNode.containerInfo),qe(e),null;case 10:return Tr(e.type),qe(e),null;case 19:if(Ut(ft),i=e.memoizedState,i===null)return qe(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)su(i,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Hm(t),s!==null){for(e.flags|=128,su(i,!1),t=s.updateQueue,e.updateQueue=t,Af(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)DP(n,t),n=n.sibling;return je(ft,ft.current&1|2),we&&dr(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&Bn()>Ym&&(e.flags|=128,r=!0,su(i,!1),e.lanes=4194304)}else{if(!r)if(t=Hm(s),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,Af(e,t),su(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!we)return qe(e),null}else 2*Bn()-i.renderingStartTime>Ym&&n!==536870912&&(e.flags|=128,r=!0,su(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Bn(),t.sibling=null,n=ft.current,je(ft,r?n&1|2:n&1),we&&dr(e,i.treeForkCount),t):(qe(e),null);case 22:case 23:return Ln(e),Lw(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(qe(e),e.subtreeFlags&6&&(e.flags|=8192)):qe(e),n=e.updateQueue,n!==null&&Af(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&Ut(Ha),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Tr(Tt),qe(e),null;case 25:return null;case 30:return null}throw Error(F(156,e.tag))}function r5(t,e){switch(Dw(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Tr(Tt),Pl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Vm(e),null;case 31:if(e.memoizedState!==null){if(Ln(e),e.alternate===null)throw Error(F(340));Ja()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Ln(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Ja()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ut(ft),null;case 4:return Pl(),null;case 10:return Tr(e.type),null;case 22:case 23:return Ln(e),Lw(),t!==null&&Ut(Ha),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Tr(Tt),null;case 25:return null;default:return null}}function DN(t,e){switch(Dw(e),e.tag){case 3:Tr(Tt),Pl();break;case 26:case 27:case 5:Vm(e);break;case 4:Pl();break;case 31:e.memoizedState!==null&&Ln(e);break;case 13:Ln(e);break;case 19:Ut(ft);break;case 10:Tr(e.type);break;case 22:case 23:Ln(e),Lw(),t!==null&&Ut(Ha);break;case 24:Tr(Tt)}}function vd(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(o){Ne(e,e.return,o)}}function Fs(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&t)===t){var a=i.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,r=e;var l=n,c=o;try{c()}catch(h){Ne(r,l,h)}}}i=i.next}while(i!==s)}}catch(h){Ne(e,e.return,h)}}function kN(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{BP(e,n)}catch(i){Ne(t,t.return,i)}}}function ON(t,e,n){n.props=no(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Ne(t,e,i)}}function Gu(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(r){Ne(t,e,r)}}function Bi(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Ne(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Ne(t,e,r)}else n.current=null}function VN(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Ne(t,t.return,r)}}function t_(t,e,n){try{var i=t.stateNode;S5(i,t.type,n,e),i[Pn]=e}catch(r){Ne(t,t.return,r)}}function MN(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ia(t.type)||t.tag===4}function n_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||MN(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ia(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vv(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gr));else if(i!==4&&(i===27&&ia(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Vv(t,e,n),t=t.sibling;t!==null;)Vv(t,e,n),t=t.sibling}function Qm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&ia(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Qm(t,e,n),t=t.sibling;t!==null;)Qm(t,e,n),t=t.sibling}function LN(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Qt(e,i,n),e[Ht]=t,e[Pn]=n}catch(s){Ne(t,t.return,s)}}var fr=!1,bt=!1,i_=!1,WI=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function s5(t,e){if(t=t.containerInfo,Bv=ap,t=AP(t),xw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var g;d!==n||r!==0&&d.nodeType!==3||(o=a+r),d!==s||i!==0&&d.nodeType!==3||(l=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++c===r&&(o=a),f===s&&++h===i&&(l=a),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(qv={focusedElem:t,selectionRange:n},ap=!1,Vt=e;Vt!==null;)if(e=Vt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Vt=t;else for(;Vt!==null;){switch(e=Vt,s=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var b=no(n.type,r);t=i.getSnapshotBeforeUpdate(b,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(E){Ne(n,n.return,E)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)$v(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":$v(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(F(163))}if(t=e.sibling,t!==null){t.return=e.return,Vt=t;break}Vt=e.return}}function UN(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:ur(t,n),i&4&&vd(5,n);break;case 1:if(ur(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Ne(n,n.return,a)}else{var r=no(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Ne(n,n.return,a)}}i&64&&kN(n),i&512&&Gu(n,n.return);break;case 3:if(ur(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{BP(t,e)}catch(a){Ne(n,n.return,a)}}break;case 27:e===null&&i&4&&LN(n);case 26:case 5:ur(t,n),e===null&&i&4&&VN(n),i&512&&Gu(n,n.return);break;case 12:ur(t,n);break;case 31:ur(t,n),i&4&&FN(t,n);break;case 13:ur(t,n),i&4&&BN(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=m5.bind(null,n),O5(t,n))));break;case 22:if(i=n.memoizedState!==null||fr,!i){e=e!==null&&e.memoizedState!==null||bt,r=fr;var s=bt;fr=i,(bt=e)&&!s?hr(t,n,(n.subtreeFlags&8772)!==0):ur(t,n),fr=r,bt=s}break;case 30:break;default:ur(t,n)}}function jN(t){var e=t.alternate;e!==null&&(t.alternate=null,jN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&bw(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ye=null,En=!1;function cr(t,e,n){for(n=n.child;n!==null;)zN(t,e,n),n=n.sibling}function zN(t,e,n){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(dd,n)}catch{}switch(n.tag){case 26:bt||Bi(n,e),cr(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:bt||Bi(n,e);var i=Ye,r=En;ia(n.type)&&(Ye=n.stateNode,En=!1),cr(t,e,n),Yu(n.stateNode),Ye=i,En=r;break;case 5:bt||Bi(n,e);case 6:if(i=Ye,r=En,Ye=null,cr(t,e,n),Ye=i,En=r,Ye!==null)if(En)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(n.stateNode)}catch(s){Ne(n,e,s)}else try{Ye.removeChild(n.stateNode)}catch(s){Ne(n,e,s)}break;case 18:Ye!==null&&(En?(t=Ye,oS(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),zl(t)):oS(Ye,n.stateNode));break;case 4:i=Ye,r=En,Ye=n.stateNode.containerInfo,En=!0,cr(t,e,n),Ye=i,En=r;break;case 0:case 11:case 14:case 15:Fs(2,n,e),bt||Fs(4,n,e),cr(t,e,n);break;case 1:bt||(Bi(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&ON(n,e,i)),cr(t,e,n);break;case 21:cr(t,e,n);break;case 22:bt=(i=bt)||n.memoizedState!==null,cr(t,e,n),bt=i;break;default:cr(t,e,n)}}function FN(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{zl(t)}catch(n){Ne(e,e.return,n)}}}function BN(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{zl(t)}catch(n){Ne(e,e.return,n)}}function a5(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new WI),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new WI),e;default:throw Error(F(435,t.tag))}}function If(t,e){var n=a5(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var r=p5.bind(null,t,i);i.then(r,r)}})}function bn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(ia(o.type)){Ye=o.stateNode,En=!1;break e}break;case 5:Ye=o.stateNode,En=!1;break e;case 3:case 4:Ye=o.stateNode.containerInfo,En=!0;break e}o=o.return}if(Ye===null)throw Error(F(160));zN(s,a,r),Ye=null,En=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)qN(e,t),e=e.sibling}var Ti=null;function qN(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:bn(e,t),Tn(t),i&4&&(Fs(3,t,t.return),vd(3,t),Fs(5,t,t.return));break;case 1:bn(e,t),Tn(t),i&512&&(bt||n===null||Bi(n,n.return)),i&64&&fr&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=Ti;if(bn(e,t),Tn(t),i&512&&(bt||n===null||Bi(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[pd]||s[Ht]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Qt(s,i,n),s[Ht]=t,Lt(s),i=s;break e;case"link":var a=mS("link","href",r).get(i+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(s=a[o],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}s=r.createElement(i),Qt(s,i,n),r.head.appendChild(s);break;case"meta":if(a=mS("meta","content",r).get(i+(n.content||""))){for(o=0;o<a.length;o++)if(s=a[o],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}s=r.createElement(i),Qt(s,i,n),r.head.appendChild(s);break;default:throw Error(F(468,i))}s[Ht]=t,Lt(s),i=s}t.stateNode=i}else pS(r,t.type,t.stateNode);else t.stateNode=fS(r,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?pS(r,t.type,t.stateNode):fS(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&t_(t,t.memoizedProps,n.memoizedProps)}break;case 27:bn(e,t),Tn(t),i&512&&(bt||n===null||Bi(n,n.return)),n!==null&&i&4&&t_(t,t.memoizedProps,n.memoizedProps);break;case 5:if(bn(e,t),Tn(t),i&512&&(bt||n===null||Bi(n,n.return)),t.flags&32){r=t.stateNode;try{Dl(r,"")}catch(b){Ne(t,t.return,b)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,t_(t,r,n!==null?n.memoizedProps:r)),i&1024&&(i_=!0);break;case 6:if(bn(e,t),Tn(t),i&4){if(t.stateNode===null)throw Error(F(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(b){Ne(t,t.return,b)}}break;case 3:if(om=null,r=Ti,Ti=ip(e.containerInfo),bn(e,t),Ti=r,Tn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{zl(e.containerInfo)}catch(b){Ne(t,t.return,b)}i_&&(i_=!1,HN(t));break;case 4:i=Ti,Ti=ip(t.stateNode.containerInfo),bn(e,t),Tn(t),Ti=i;break;case 12:bn(e,t),Tn(t);break;case 31:bn(e,t),Tn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,If(t,i)));break;case 13:bn(e,t),Tn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(og=Bn()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,If(t,i)));break;case 22:r=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=fr,h=bt;if(fr=c||r,bt=h||l,bn(e,t),bt=h,fr=c,Tn(t),i&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||l||fr||bt||Ia(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(s=l.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=l.stateNode;var d=l.memoizedProps.style,f=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(b){Ne(l,l.return,b)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=r?"":l.memoizedProps}catch(b){Ne(l,l.return,b)}}}else if(e.tag===18){if(n===null){l=e;try{var g=l.stateNode;r?lS(g,!0):lS(l.stateNode,!1)}catch(b){Ne(l,l.return,b)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,If(t,n))));break;case 19:bn(e,t),Tn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,If(t,i)));break;case 30:break;case 21:break;default:bn(e,t),Tn(t)}}function Tn(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(MN(i)){n=i;break}i=i.return}if(n==null)throw Error(F(160));switch(n.tag){case 27:var r=n.stateNode,s=n_(t);Qm(t,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(Dl(a,""),n.flags&=-33);var o=n_(t);Qm(t,o,a);break;case 3:case 4:var l=n.stateNode.containerInfo,c=n_(t);Vv(t,c,l);break;default:throw Error(F(161))}}catch(h){Ne(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function HN(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;HN(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ur(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)UN(t,e.alternate,e),e=e.sibling}function Ia(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Fs(4,e,e.return),Ia(e);break;case 1:Bi(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&ON(e,e.return,n),Ia(e);break;case 27:Yu(e.stateNode);case 26:case 5:Bi(e,e.return),Ia(e);break;case 22:e.memoizedState===null&&Ia(e);break;case 30:Ia(e);break;default:Ia(e)}t=t.sibling}}function hr(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:hr(r,s,n),vd(4,s);break;case 1:if(hr(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){Ne(i,i.return,c)}if(i=s,r=i.updateQueue,r!==null){var o=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)FP(l[r],o)}catch(c){Ne(i,i.return,c)}}n&&a&64&&kN(s),Gu(s,s.return);break;case 27:LN(s);case 26:case 5:hr(r,s,n),n&&i===null&&a&4&&VN(s),Gu(s,s.return);break;case 12:hr(r,s,n);break;case 31:hr(r,s,n),n&&a&4&&FN(r,s);break;case 13:hr(r,s,n),n&&a&4&&BN(r,s);break;case 22:s.memoizedState===null&&hr(r,s,n),Gu(s,s.return);break;case 30:break;default:hr(r,s,n)}e=e.sibling}}function Zw(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&yd(n))}function eb(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&yd(t))}function vi(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)$N(t,e,n,i),e=e.sibling}function $N(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:vi(t,e,n,i),r&2048&&vd(9,e);break;case 1:vi(t,e,n,i);break;case 3:vi(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&yd(t)));break;case 12:if(r&2048){vi(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,o=s.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){Ne(e,e.return,l)}}else vi(t,e,n,i);break;case 31:vi(t,e,n,i);break;case 13:vi(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?vi(t,e,n,i):Ku(t,e):s._visibility&2?vi(t,e,n,i):(s._visibility|=2,Ho(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),r&2048&&Zw(a,e);break;case 24:vi(t,e,n,i),r&2048&&eb(e.alternate,e);break;default:vi(t,e,n,i)}}function Ho(t,e,n,i,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,a=e,o=n,l=i,c=a.flags;switch(a.tag){case 0:case 11:case 15:Ho(s,a,o,l,r),vd(8,a);break;case 23:break;case 22:var h=a.stateNode;a.memoizedState!==null?h._visibility&2?Ho(s,a,o,l,r):Ku(s,a):(h._visibility|=2,Ho(s,a,o,l,r)),r&&c&2048&&Zw(a.alternate,a);break;case 24:Ho(s,a,o,l,r),r&&c&2048&&eb(a.alternate,a);break;default:Ho(s,a,o,l,r)}e=e.sibling}}function Ku(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:Ku(n,i),r&2048&&Zw(i.alternate,i);break;case 24:Ku(n,i),r&2048&&eb(i.alternate,i);break;default:Ku(n,i)}e=e.sibling}}var Au=8192;function Oo(t,e,n){if(t.subtreeFlags&Au)for(t=t.child;t!==null;)GN(t,e,n),t=t.sibling}function GN(t,e,n){switch(t.tag){case 26:Oo(t,e,n),t.flags&Au&&t.memoizedState!==null&&G5(n,Ti,t.memoizedState,t.memoizedProps);break;case 5:Oo(t,e,n);break;case 3:case 4:var i=Ti;Ti=ip(t.stateNode.containerInfo),Oo(t,e,n),Ti=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Au,Au=16777216,Oo(t,e,n),Au=i):Oo(t,e,n));break;default:Oo(t,e,n)}}function KN(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function au(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Vt=i,QN(i,t)}KN(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)WN(t),t=t.sibling}function WN(t){switch(t.tag){case 0:case 11:case 15:au(t),t.flags&2048&&Fs(9,t,t.return);break;case 3:au(t);break;case 12:au(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,sm(t)):au(t);break;default:au(t)}}function sm(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Vt=i,QN(i,t)}KN(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Fs(8,e,e.return),sm(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,sm(e));break;default:sm(e)}t=t.sibling}}function QN(t,e){for(;Vt!==null;){var n=Vt;switch(n.tag){case 0:case 11:case 15:Fs(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:yd(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Vt=i;else e:for(n=t;Vt!==null;){i=Vt;var r=i.sibling,s=i.return;if(jN(i),i===n){Vt=null;break e}if(r!==null){r.return=s,Vt=r;break e}Vt=s}}}var o5={getCacheForType:function(t){var e=Wt(Tt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Wt(Tt).controller.signal}},l5=typeof WeakMap=="function"?WeakMap:Map,xe=0,Ue=null,pe=null,ye=0,Pe=0,Vn=null,vs=!1,_c=!1,tb=!1,kr=0,lt=0,Bs=0,Ga=0,nb=0,zn=0,Ml=0,Wu=null,An=null,Mv=!1,og=0,YN=0,Ym=1/0,Xm=null,Cs=null,Rt=0,Ps=null,Ll=null,Er=0,Lv=0,Uv=null,XN=null,Qu=0,jv=null;function $n(){return xe&2&&ye!==0?ye&-ye:se.T!==null?rb():aP()}function JN(){if(zn===0)if(!(ye&536870912)||we){var t=yf;yf<<=1,!(yf&3932160)&&(yf=262144),zn=t}else zn=536870912;return t=Qn.current,t!==null&&(t.flags|=32),zn}function Cn(t,e,n){(t===Ue&&(Pe===2||Pe===9)||t.cancelPendingCommit!==null)&&(Ul(t,0),ws(t,ye,zn,!1)),md(t,n),(!(xe&2)||t!==Ue)&&(t===Ue&&(!(xe&2)&&(Ga|=n),lt===4&&ws(t,ye,zn,!1)),rr(t))}function ZN(t,e,n){if(xe&6)throw Error(F(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||fd(t,e),r=i?h5(t,e):r_(t,e,!0),s=i;do{if(r===0){_c&&!i&&ws(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!c5(n)){r=r_(t,e,!1),s=!1;continue}if(r===2){if(s=e,t.errorRecoveryDisabledLanes&s)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=t;r=Wu;var l=o.current.memoizedState.isDehydrated;if(l&&(Ul(o,a).flags|=256),a=r_(o,a,!1),a!==2){if(tb&&!l){o.errorRecoveryDisabledLanes|=s,Ga|=s,r=4;break e}s=An,An=r,s!==null&&(An===null?An=s:An.push.apply(An,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){Ul(t,0),ws(t,e,0,!0);break}e:{switch(i=t,s=r,s){case 0:case 1:throw Error(F(345));case 4:if((e&4194048)!==e)break;case 6:ws(i,e,zn,!vs);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(F(329))}if((e&62914560)===e&&(r=og+300-Bn(),10<r)){if(ws(i,e,zn,!vs),Yp(i,0,!0)!==0)break e;Er=e,i.timeoutHandle=v2(QI.bind(null,i,n,An,Xm,Mv,e,zn,Ga,Ml,vs,s,"Throttled",-0,0),r);break e}QI(i,n,An,Xm,Mv,e,zn,Ga,Ml,vs,s,null,-0,0)}}break}while(!0);rr(t)}function QI(t,e,n,i,r,s,a,o,l,c,h,d,f,g){if(t.timeoutHandle=-1,d=e.subtreeFlags,d&8192||(d&16785408)===16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:gr},GN(e,s,d);var b=(s&62914560)===s?og-Bn():(s&4194048)===s?YN-Bn():0;if(b=K5(d,b),b!==null){Er=s,t.cancelPendingCommit=b(XI.bind(null,t,e,s,n,i,r,a,o,l,h,d,null,f,g)),ws(t,s,a,!c);return}}XI(t,e,s,n,i,r,a,o,l)}function c5(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Wn(s(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ws(t,e,n,i){e&=~nb,e&=~Ga,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var s=31-Hn(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&iP(t,n,e)}function lg(){return xe&6?!0:(wd(0),!1)}function ib(){if(pe!==null){if(Pe===0)var t=pe.return;else t=pe,yr=bo=null,Bw(t),wl=null,xh=0,t=pe;for(;t!==null;)DN(t.alternate,t),t=t.return;pe=null}}function Ul(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,C5(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Er=0,ib(),Ue=t,pe=n=br(t.current,null),ye=e,Pe=0,Vn=null,vs=!1,_c=fd(t,e),tb=!1,Ml=zn=nb=Ga=Bs=lt=0,An=Wu=null,Mv=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-Hn(i),s=1<<r;e|=t[r],i&=~s}return kr=e,eg(),n}function e2(t,e){le=null,se.H=Ch,e===yc||e===ng?(e=xI(),Pe=3):e===Vw?(e=xI(),Pe=4):Pe=e===Xw?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Vn=e,pe===null&&(lt=1,Km(t,ai(e,t.current)))}function t2(){var t=Qn.current;return t===null?!0:(ye&4194048)===ye?hi===null:(ye&62914560)===ye||ye&536870912?t===hi:!1}function n2(){var t=se.H;return se.H=Ch,t===null?Ch:t}function i2(){var t=se.A;return se.A=o5,t}function Jm(){lt=4,vs||(ye&4194048)!==ye&&Qn.current!==null||(_c=!0),!(Bs&134217727)&&!(Ga&134217727)||Ue===null||ws(Ue,ye,zn,!1)}function r_(t,e,n){var i=xe;xe|=2;var r=n2(),s=i2();(Ue!==t||ye!==e)&&(Xm=null,Ul(t,e)),e=!1;var a=lt;e:do try{if(Pe!==0&&pe!==null){var o=pe,l=Vn;switch(Pe){case 8:ib(),a=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(e=!0);var c=Pe;if(Pe=0,Vn=null,ll(t,o,l,c),n&&_c){a=0;break e}break;default:c=Pe,Pe=0,Vn=null,ll(t,o,l,c)}}u5(),a=lt;break}catch(h){e2(t,h)}while(!0);return e&&t.shellSuspendCounter++,yr=bo=null,xe=i,se.H=r,se.A=s,pe===null&&(Ue=null,ye=0,eg()),a}function u5(){for(;pe!==null;)r2(pe)}function h5(t,e){var n=xe;xe|=2;var i=n2(),r=i2();Ue!==t||ye!==e?(Xm=null,Ym=Bn()+500,Ul(t,e)):_c=fd(t,e);e:do try{if(Pe!==0&&pe!==null){e=pe;var s=Vn;t:switch(Pe){case 1:Pe=0,Vn=null,ll(t,e,s,1);break;case 2:case 9:if(SI(s)){Pe=0,Vn=null,YI(e);break}e=function(){Pe!==2&&Pe!==9||Ue!==t||(Pe=7),rr(t)},s.then(e,e);break e;case 3:Pe=7;break e;case 4:Pe=5;break e;case 7:SI(s)?(Pe=0,Vn=null,YI(e)):(Pe=0,Vn=null,ll(t,e,s,7));break;case 5:var a=null;switch(pe.tag){case 26:a=pe.memoizedState;case 5:case 27:var o=pe;if(a?A2(a):o.stateNode.complete){Pe=0,Vn=null;var l=o.sibling;if(l!==null)pe=l;else{var c=o.return;c!==null?(pe=c,cg(c)):pe=null}break t}}Pe=0,Vn=null,ll(t,e,s,5);break;case 6:Pe=0,Vn=null,ll(t,e,s,6);break;case 8:ib(),lt=6;break e;default:throw Error(F(462))}}d5();break}catch(h){e2(t,h)}while(!0);return yr=bo=null,se.H=i,se.A=r,xe=n,pe!==null?0:(Ue=null,ye=0,eg(),lt)}function d5(){for(;pe!==null&&!V4();)r2(pe)}function r2(t){var e=NN(t.alternate,t,kr);t.memoizedProps=t.pendingProps,e===null?cg(t):pe=e}function YI(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=qI(n,e,e.pendingProps,e.type,void 0,ye);break;case 11:e=qI(n,e,e.pendingProps,e.type.render,e.ref,ye);break;case 5:Bw(e);default:DN(n,e),e=pe=DP(e,kr),e=NN(n,e,kr)}t.memoizedProps=t.pendingProps,e===null?cg(t):pe=e}function ll(t,e,n,i){yr=bo=null,Bw(e),wl=null,xh=0;var r=e.return;try{if(e5(t,r,e,n,ye)){lt=1,Km(t,ai(n,t.current)),pe=null;return}}catch(s){if(r!==null)throw pe=r,s;lt=1,Km(t,ai(n,t.current)),pe=null;return}e.flags&32768?(we||i===1?t=!0:_c||ye&536870912?t=!1:(vs=t=!0,(i===2||i===9||i===3||i===6)&&(i=Qn.current,i!==null&&i.tag===13&&(i.flags|=16384))),s2(e,t)):cg(e)}function cg(t){var e=t;do{if(e.flags&32768){s2(e,vs);return}t=e.return;var n=i5(e.alternate,e,kr);if(n!==null){pe=n;return}if(e=e.sibling,e!==null){pe=e;return}pe=e=t}while(e!==null);lt===0&&(lt=5)}function s2(t,e){do{var n=r5(t.alternate,t);if(n!==null){n.flags&=32767,pe=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){pe=t;return}pe=t=n}while(t!==null);lt=6,pe=null}function XI(t,e,n,i,r,s,a,o,l){t.cancelPendingCommit=null;do ug();while(Rt!==0);if(xe&6)throw Error(F(327));if(e!==null){if(e===t.current)throw Error(F(177));if(s=e.lanes|e.childLanes,s|=Rw,$4(t,n,s,a,o,l),t===Ue&&(pe=Ue=null,ye=0),Ll=e,Ps=t,Er=n,Lv=s,Uv=r,XN=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,g5(Mm,function(){return u2(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=se.T,se.T=null,r=Re.p,Re.p=2,a=xe,xe|=4;try{s5(t,e,n)}finally{xe=a,Re.p=r,se.T=i}}Rt=1,a2(),o2(),l2()}}function a2(){if(Rt===1){Rt=0;var t=Ps,e=Ll,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=se.T,se.T=null;var i=Re.p;Re.p=2;var r=xe;xe|=4;try{qN(e,t);var s=qv,a=AP(t.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&EP(o.ownerDocument.documentElement,o)){if(l!==null&&xw(o)){var c=l.start,h=l.end;if(h===void 0&&(h=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(h,o.value.length);else{var d=o.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var g=f.getSelection(),b=o.textContent.length,E=Math.min(l.start,b),x=l.end===void 0?E:Math.min(l.end,b);!g.extend&&E>x&&(a=x,x=E,E=a);var w=vI(o,E),v=vI(o,x);if(w&&v&&(g.rangeCount!==1||g.anchorNode!==w.node||g.anchorOffset!==w.offset||g.focusNode!==v.node||g.focusOffset!==v.offset)){var _=d.createRange();_.setStart(w.node,w.offset),g.removeAllRanges(),E>x?(g.addRange(_),g.extend(v.node,v.offset)):(_.setEnd(v.node,v.offset),g.addRange(_))}}}}for(d=[],g=o;g=g.parentNode;)g.nodeType===1&&d.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var I=d[o];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}ap=!!Bv,qv=Bv=null}finally{xe=r,Re.p=i,se.T=n}}t.current=e,Rt=2}}function o2(){if(Rt===2){Rt=0;var t=Ps,e=Ll,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=se.T,se.T=null;var i=Re.p;Re.p=2;var r=xe;xe|=4;try{UN(t,e.alternate,e)}finally{xe=r,Re.p=i,se.T=n}}Rt=3}}function l2(){if(Rt===4||Rt===3){Rt=0,M4();var t=Ps,e=Ll,n=Er,i=XN;e.subtreeFlags&10256||e.flags&10256?Rt=5:(Rt=0,Ll=Ps=null,c2(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(Cs=null),ww(n),e=e.stateNode,qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(dd,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=se.T,r=Re.p,Re.p=2,se.T=null;try{for(var s=t.onRecoverableError,a=0;a<i.length;a++){var o=i[a];s(o.value,{componentStack:o.stack})}}finally{se.T=e,Re.p=r}}Er&3&&ug(),rr(t),r=t.pendingLanes,n&261930&&r&42?t===jv?Qu++:(Qu=0,jv=t):Qu=0,wd(0)}}function c2(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,yd(e)))}function ug(){return a2(),o2(),l2(),u2()}function u2(){if(Rt!==5)return!1;var t=Ps,e=Lv;Lv=0;var n=ww(Er),i=se.T,r=Re.p;try{Re.p=32>n?32:n,se.T=null,n=Uv,Uv=null;var s=Ps,a=Er;if(Rt=0,Ll=Ps=null,Er=0,xe&6)throw Error(F(331));var o=xe;if(xe|=4,WN(s.current),$N(s,s.current,a,n),xe=o,wd(0,!1),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(dd,s)}catch{}return!0}finally{Re.p=r,se.T=i,c2(t,e)}}function JI(t,e,n){e=ai(n,e),e=Dv(t.stateNode,e,2),t=Rs(t,e,2),t!==null&&(md(t,2),rr(t))}function Ne(t,e,n){if(t.tag===3)JI(t,t,n);else for(;e!==null;){if(e.tag===3){JI(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Cs===null||!Cs.has(i))){t=ai(n,t),n=IN(2),i=Rs(e,n,2),i!==null&&(SN(n,i,e,t),md(i,2),rr(i));break}}e=e.return}}function s_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new l5;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(tb=!0,r.add(n),t=f5.bind(null,t,e,n),e.then(t,t))}function f5(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Ue===t&&(ye&n)===n&&(lt===4||lt===3&&(ye&62914560)===ye&&300>Bn()-og?!(xe&2)&&Ul(t,0):nb|=n,Ml===ye&&(Ml=0)),rr(t)}function h2(t,e){e===0&&(e=nP()),t=wo(t,e),t!==null&&(md(t,e),rr(t))}function m5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),h2(t,n)}function p5(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(F(314))}i!==null&&i.delete(e),h2(t,n)}function g5(t,e){return _w(t,e)}var Zm=null,$o=null,zv=!1,ep=!1,a_=!1,bs=0;function rr(t){t!==$o&&t.next===null&&($o===null?Zm=$o=t:$o=$o.next=t),ep=!0,zv||(zv=!0,_5())}function wd(t,e){if(!a_&&ep){a_=!0;do for(var n=!1,i=Zm;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,o=i.pingedLanes;s=(1<<31-Hn(42|t)+1)-1,s&=r&~(a&~o),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,ZI(i,s))}else s=ye,s=Yp(i,i===Ue?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||fd(i,s)||(n=!0,ZI(i,s));i=i.next}while(n);a_=!1}}function y5(){d2()}function d2(){ep=zv=!1;var t=0;bs!==0&&R5()&&(t=bs);for(var e=Bn(),n=null,i=Zm;i!==null;){var r=i.next,s=f2(i,e);s===0?(i.next=null,n===null?Zm=r:n.next=r,r===null&&($o=n)):(n=i,(t!==0||s&3)&&(ep=!0)),i=r}Rt!==0&&Rt!==5||wd(t),bs!==0&&(bs=0)}function f2(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var a=31-Hn(s),o=1<<a,l=r[a];l===-1?(!(o&n)||o&i)&&(r[a]=H4(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}if(e=Ue,n=ye,n=Yp(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(Pe===2||Pe===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&Oy(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||fd(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&Oy(i),ww(n)){case 2:case 8:n=eP;break;case 32:n=Mm;break;case 268435456:n=tP;break;default:n=Mm}return i=m2.bind(null,t),n=_w(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&Oy(i),t.callbackPriority=2,t.callbackNode=null,2}function m2(t,e){if(Rt!==0&&Rt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(ug()&&t.callbackNode!==n)return null;var i=ye;return i=Yp(t,t===Ue?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(ZN(t,i,e),f2(t,Bn()),t.callbackNode!=null&&t.callbackNode===n?m2.bind(null,t):null)}function ZI(t,e){if(ug())return null;ZN(t,e,!0)}function _5(){P5(function(){xe&6?_w(ZC,y5):d2()})}function rb(){if(bs===0){var t=kl;t===0&&(t=gf,gf<<=1,!(gf&261888)&&(gf=256)),bs=t}return bs}function eS(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Yf(""+t)}function tS(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function v5(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var s=eS((r[Pn]||null).action),a=i.submitter;a&&(e=(e=a[Pn]||null)?eS(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var o=new Xp("action","action",null,i,r);t.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(bs!==0){var l=a?tS(r,a):new FormData(r);Pv(n,{pending:!0,data:l,method:r.method,action:s},null,l)}}else typeof s=="function"&&(o.preventDefault(),l=a?tS(r,a):new FormData(r),Pv(n,{pending:!0,data:l,method:r.method,action:s},s,l))},currentTarget:r}]})}}for(var o_=0;o_<_v.length;o_++){var l_=_v[o_],w5=l_.toLowerCase(),b5=l_[0].toUpperCase()+l_.slice(1);Ri(w5,"on"+b5)}Ri(SP,"onAnimationEnd");Ri(xP,"onAnimationIteration");Ri(RP,"onAnimationStart");Ri("dblclick","onDoubleClick");Ri("focusin","onFocus");Ri("focusout","onBlur");Ri(L6,"onTransitionRun");Ri(U6,"onTransitionStart");Ri(j6,"onTransitionCancel");Ri(CP,"onTransitionEnd");Nl("onMouseEnter",["mouseout","mouseover"]);Nl("onMouseLeave",["mouseout","mouseover"]);Nl("onPointerEnter",["pointerout","pointerover"]);Nl("onPointerLeave",["pointerout","pointerover"]);yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yo("onBeforeInput",["compositionend","keypress","textInput","paste"]);yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ph="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ph));function p2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(h){Um(h)}r.currentTarget=null,s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(h){Um(h)}r.currentTarget=null,s=l}}}}function me(t,e){var n=e[uv];n===void 0&&(n=e[uv]=new Set);var i=t+"__bubble";n.has(i)||(g2(e,t,2,!1),n.add(i))}function c_(t,e,n){var i=0;e&&(i|=4),g2(n,t,i,e)}var Sf="_reactListening"+Math.random().toString(36).slice(2);function sb(t){if(!t[Sf]){t[Sf]=!0,oP.forEach(function(n){n!=="selectionchange"&&(T5.has(n)||c_(n,!1,t),c_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sf]||(e[Sf]=!0,c_("selectionchange",!1,e))}}function g2(t,e,n,i){switch(C2(e)){case 2:var r=Y5;break;case 8:r=X5;break;default:r=cb}n=r.bind(null,e,n,t),r=void 0,!pv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function u_(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;o!==null;){if(a=Zo(o),a===null)return;if(l=a.tag,l===5||l===6||l===26||l===27){i=s=a;continue e}o=o.parentNode}}i=i.return}pP(function(){var c=s,h=Ew(n),d=[];e:{var f=PP.get(t);if(f!==void 0){var g=Xp,b=t;switch(t){case"keypress":if(Jf(n)===0)break e;case"keydown":case"keyup":g=p6;break;case"focusin":b="focus",g=jy;break;case"focusout":b="blur",g=jy;break;case"beforeblur":case"afterblur":g=jy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=cI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=i6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=_6;break;case SP:case xP:case RP:g=a6;break;case CP:g=w6;break;case"scroll":case"scrollend":g=t6;break;case"wheel":g=T6;break;case"copy":case"cut":case"paste":g=l6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=hI;break;case"toggle":case"beforetoggle":g=A6}var E=(e&4)!==0,x=!E&&(t==="scroll"||t==="scrollend"),w=E?f!==null?f+"Capture":null:f;E=[];for(var v=c,_;v!==null;){var I=v;if(_=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||_===null||w===null||(I=Th(v,w),I!=null&&E.push(Nh(v,I,_))),x)break;v=v.return}0<E.length&&(f=new g(f,b,null,n,h),d.push({event:f,listeners:E}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==mv&&(b=n.relatedTarget||n.fromElement)&&(Zo(b)||b[mc]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(b=n.relatedTarget||n.toElement,g=c,b=b?Zo(b):null,b!==null&&(x=hd(b),E=b.tag,b!==x||E!==5&&E!==27&&E!==6)&&(b=null)):(g=null,b=c),g!==b)){if(E=cI,I="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(E=hI,I="onPointerLeave",w="onPointerEnter",v="pointer"),x=g==null?f:Tu(g),_=b==null?f:Tu(b),f=new E(I,v+"leave",g,n,h),f.target=x,f.relatedTarget=_,I=null,Zo(h)===c&&(E=new E(w,v+"enter",b,n,h),E.target=_,E.relatedTarget=x,I=E),x=I,g&&b)t:{for(E=E5,w=g,v=b,_=0,I=w;I;I=E(I))_++;I=0;for(var k=v;k;k=E(k))I++;for(;0<_-I;)w=E(w),_--;for(;0<I-_;)v=E(v),I--;for(;_--;){if(w===v||v!==null&&w===v.alternate){E=w;break t}w=E(w),v=E(v)}E=null}else E=null;g!==null&&nS(d,f,g,E,!1),b!==null&&x!==null&&nS(d,x,b,E,!0)}}e:{if(f=c?Tu(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var V=pI;else if(mI(f))if(bP)V=O6;else{V=D6;var A=N6}else g=f.nodeName,!g||g.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?c&&Tw(c.elementType)&&(V=pI):V=k6;if(V&&(V=V(t,c))){wP(d,V,n,h);break e}A&&A(t,f,c),t==="focusout"&&c&&f.type==="number"&&c.memoizedProps.value!=null&&fv(f,"number",f.value)}switch(A=c?Tu(c):window,t){case"focusin":(mI(A)||A.contentEditable==="true")&&(nl=A,gv=c,zu=null);break;case"focusout":zu=gv=nl=null;break;case"mousedown":yv=!0;break;case"contextmenu":case"mouseup":case"dragend":yv=!1,wI(d,n,h);break;case"selectionchange":if(M6)break;case"keydown":case"keyup":wI(d,n,h)}var T;if(Sw)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else tl?_P(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(yP&&n.locale!=="ko"&&(tl||S!=="onCompositionStart"?S==="onCompositionEnd"&&tl&&(T=gP()):(_s=h,Aw="value"in _s?_s.value:_s.textContent,tl=!0)),A=tp(c,S),0<A.length&&(S=new uI(S,t,null,n,h),d.push({event:S,listeners:A}),T?S.data=T:(T=vP(n),T!==null&&(S.data=T)))),(T=S6?x6(t,n):R6(t,n))&&(S=tp(c,"onBeforeInput"),0<S.length&&(A=new uI("onBeforeInput","beforeinput",null,n,h),d.push({event:A,listeners:S}),A.data=T)),v5(d,t,c,n,h)}p2(d,e)})}function Nh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function tp(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=Th(t,n),r!=null&&i.unshift(Nh(t,r,s)),r=Th(t,e),r!=null&&i.push(Nh(t,r,s))),t.tag===3)return i;t=t.return}return[]}function E5(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function nS(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===i)break;o!==5&&o!==26&&o!==27||c===null||(l=c,r?(c=Th(n,s),c!=null&&a.unshift(Nh(n,c,l))):r||(c=Th(n,s),c!=null&&a.push(Nh(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var A5=/\r\n?/g,I5=/\u0000|\uFFFD/g;function iS(t){return(typeof t=="string"?t:""+t).replace(A5,`
`).replace(I5,"")}function y2(t,e){return e=iS(e),iS(t)===e}function Oe(t,e,n,i,r,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Dl(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Dl(t,""+i);break;case"className":vf(t,"class",i);break;case"tabIndex":vf(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":vf(t,n,i);break;case"style":mP(t,i,s);break;case"data":if(e!=="object"){vf(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Yf(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&Oe(t,e,"name",r.name,r,null),Oe(t,e,"formEncType",r.formEncType,r,null),Oe(t,e,"formMethod",r.formMethod,r,null),Oe(t,e,"formTarget",r.formTarget,r,null)):(Oe(t,e,"encType",r.encType,r,null),Oe(t,e,"method",r.method,r,null),Oe(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Yf(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=gr);break;case"onScroll":i!=null&&me("scroll",t);break;case"onScrollEnd":i!=null&&me("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(F(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(F(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Yf(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":me("beforetoggle",t),me("toggle",t),Qf(t,"popover",i);break;case"xlinkActuate":or(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":or(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":or(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":or(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":or(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":or(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":or(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":or(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":or(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Qf(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Z4.get(n)||n,Qf(t,n,i))}}function Fv(t,e,n,i,r,s){switch(n){case"style":mP(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(F(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(F(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Dl(t,i):(typeof i=="number"||typeof i=="bigint")&&Dl(t,""+i);break;case"onScroll":i!=null&&me("scroll",t);break;case"onScrollEnd":i!=null&&me("scrollend",t);break;case"onClick":i!=null&&(t.onclick=gr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lP.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),s=t[Pn]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):Qf(t,n,i)}}}function Qt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":me("error",t),me("load",t);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(F(137,e));default:Oe(t,e,s,a,n,null)}}r&&Oe(t,e,"srcSet",n.srcSet,n,null),i&&Oe(t,e,"src",n.src,n,null);return;case"input":me("invalid",t);var o=s=a=r=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(h!=null)switch(i){case"name":r=h;break;case"type":a=h;break;case"checked":l=h;break;case"defaultChecked":c=h;break;case"value":s=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(F(137,e));break;default:Oe(t,e,i,h,n,null)}}hP(t,s,o,l,c,a,r,!1);return;case"select":me("invalid",t),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],o!=null))switch(r){case"value":s=o;break;case"defaultValue":a=o;break;case"multiple":i=o;default:Oe(t,e,r,o,n,null)}e=s,n=a,t.multiple=!!i,e!=null?yl(t,!!i,e,!1):n!=null&&yl(t,!!i,n,!0);return;case"textarea":me("invalid",t),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":i=o;break;case"defaultValue":r=o;break;case"children":s=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(F(91));break;default:Oe(t,e,a,o,n,null)}fP(t,i,r,s);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Oe(t,e,l,i,n,null)}return;case"dialog":me("beforetoggle",t),me("toggle",t),me("cancel",t),me("close",t);break;case"iframe":case"object":me("load",t);break;case"video":case"audio":for(i=0;i<Ph.length;i++)me(Ph[i],t);break;case"image":me("error",t),me("load",t);break;case"details":me("toggle",t);break;case"embed":case"source":case"link":me("error",t),me("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(F(137,e));default:Oe(t,e,c,i,n,null)}return;default:if(Tw(e)){for(h in n)n.hasOwnProperty(h)&&(i=n[h],i!==void 0&&Fv(t,e,h,i,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(i=n[o],i!=null&&Oe(t,e,o,i,n,null))}function S5(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,o=null,l=null,c=null,h=null;for(g in n){var d=n[g];if(n.hasOwnProperty(g)&&d!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":l=d;default:i.hasOwnProperty(g)||Oe(t,e,g,null,i,d)}}for(var f in i){var g=i[f];if(d=n[f],i.hasOwnProperty(f)&&(g!=null||d!=null))switch(f){case"type":s=g;break;case"name":r=g;break;case"checked":c=g;break;case"defaultChecked":h=g;break;case"value":a=g;break;case"defaultValue":o=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(F(137,e));break;default:g!==d&&Oe(t,e,f,g,i,d)}}dv(t,a,o,l,c,h,s,r);return;case"select":g=a=o=f=null;for(s in n)if(l=n[s],n.hasOwnProperty(s)&&l!=null)switch(s){case"value":break;case"multiple":g=l;default:i.hasOwnProperty(s)||Oe(t,e,s,null,i,l)}for(r in i)if(s=i[r],l=n[r],i.hasOwnProperty(r)&&(s!=null||l!=null))switch(r){case"value":f=s;break;case"defaultValue":o=s;break;case"multiple":a=s;default:s!==l&&Oe(t,e,r,s,i,l)}e=o,n=a,i=g,f!=null?yl(t,!!n,f,!1):!!i!=!!n&&(e!=null?yl(t,!!n,e,!0):yl(t,!!n,n?[]:"",!1));return;case"textarea":g=f=null;for(o in n)if(r=n[o],n.hasOwnProperty(o)&&r!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:Oe(t,e,o,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":f=r;break;case"defaultValue":g=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(F(91));break;default:r!==s&&Oe(t,e,a,r,i,s)}dP(t,f,g);return;case"option":for(var b in n)if(f=n[b],n.hasOwnProperty(b)&&f!=null&&!i.hasOwnProperty(b))switch(b){case"selected":t.selected=!1;break;default:Oe(t,e,b,null,i,f)}for(l in i)if(f=i[l],g=n[l],i.hasOwnProperty(l)&&f!==g&&(f!=null||g!=null))switch(l){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Oe(t,e,l,f,i,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var E in n)f=n[E],n.hasOwnProperty(E)&&f!=null&&!i.hasOwnProperty(E)&&Oe(t,e,E,null,i,f);for(c in i)if(f=i[c],g=n[c],i.hasOwnProperty(c)&&f!==g&&(f!=null||g!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(F(137,e));break;default:Oe(t,e,c,f,i,g)}return;default:if(Tw(e)){for(var x in n)f=n[x],n.hasOwnProperty(x)&&f!==void 0&&!i.hasOwnProperty(x)&&Fv(t,e,x,void 0,i,f);for(h in i)f=i[h],g=n[h],!i.hasOwnProperty(h)||f===g||f===void 0&&g===void 0||Fv(t,e,h,f,i,g);return}}for(var w in n)f=n[w],n.hasOwnProperty(w)&&f!=null&&!i.hasOwnProperty(w)&&Oe(t,e,w,null,i,f);for(d in i)f=i[d],g=n[d],!i.hasOwnProperty(d)||f===g||f==null&&g==null||Oe(t,e,d,f,i,g)}function rS(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function x5(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],s=r.transferSize,a=r.initiatorType,o=r.duration;if(s&&o&&rS(a)){for(a=0,o=r.responseEnd,i+=1;i<n.length;i++){var l=n[i],c=l.startTime;if(c>o)break;var h=l.transferSize,d=l.initiatorType;h&&rS(d)&&(l=l.responseEnd,a+=h*(l<o?1:(o-c)/(l-c)))}if(--i,e+=8*(s+a)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Bv=null,qv=null;function np(t){return t.nodeType===9?t:t.ownerDocument}function sS(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _2(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Hv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var h_=null;function R5(){var t=window.event;return t&&t.type==="popstate"?t===h_?!1:(h_=t,!0):(h_=null,!1)}var v2=typeof setTimeout=="function"?setTimeout:void 0,C5=typeof clearTimeout=="function"?clearTimeout:void 0,aS=typeof Promise=="function"?Promise:void 0,P5=typeof queueMicrotask=="function"?queueMicrotask:typeof aS<"u"?function(t){return aS.resolve(null).then(t).catch(N5)}:v2;function N5(t){setTimeout(function(){throw t})}function ia(t){return t==="head"}function oS(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(r),zl(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Yu(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Yu(n);for(var s=n.firstChild;s;){var a=s.nextSibling,o=s.nodeName;s[pd]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=a}}else n==="body"&&Yu(t.ownerDocument.body);n=r}while(n);zl(e)}function lS(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function $v(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":$v(n),bw(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function D5(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[pd])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=di(t.nextSibling),t===null)break}return null}function k5(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=di(t.nextSibling),t===null))return null;return t}function w2(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=di(t.nextSibling),t===null))return null;return t}function Gv(t){return t.data==="$?"||t.data==="$~"}function Kv(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function O5(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function di(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Wv=null;function cS(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return di(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function uS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function b2(t,e,n){switch(e=np(n),t){case"html":if(t=e.documentElement,!t)throw Error(F(452));return t;case"head":if(t=e.head,!t)throw Error(F(453));return t;case"body":if(t=e.body,!t)throw Error(F(454));return t;default:throw Error(F(451))}}function Yu(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);bw(t)}var mi=new Map,hS=new Set;function ip(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Fr=Re.d;Re.d={f:V5,r:M5,D:L5,C:U5,L:j5,m:z5,X:B5,S:F5,M:q5};function V5(){var t=Fr.f(),e=lg();return t||e}function M5(t){var e=pc(t);e!==null&&e.tag===5&&e.type==="form"?mN(e):Fr.r(t)}var vc=typeof document>"u"?null:document;function T2(t,e,n){var i=vc;if(i&&typeof e=="string"&&e){var r=si(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),hS.has(r)||(hS.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),Qt(e,"link",t),Lt(e),i.head.appendChild(e)))}}function L5(t){Fr.D(t),T2("dns-prefetch",t,null)}function U5(t,e){Fr.C(t,e),T2("preconnect",t,e)}function j5(t,e,n){Fr.L(t,e,n);var i=vc;if(i&&t&&e){var r='link[rel="preload"][as="'+si(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+si(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+si(n.imageSizes)+'"]')):r+='[href="'+si(t)+'"]';var s=r;switch(e){case"style":s=jl(t);break;case"script":s=wc(t)}mi.has(s)||(t=We({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),mi.set(s,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(bd(s))||e==="script"&&i.querySelector(Td(s))||(e=i.createElement("link"),Qt(e,"link",t),Lt(e),i.head.appendChild(e)))}}function z5(t,e){Fr.m(t,e);var n=vc;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+si(i)+'"][href="'+si(t)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=wc(t)}if(!mi.has(s)&&(t=We({rel:"modulepreload",href:t},e),mi.set(s,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Td(s)))return}i=n.createElement("link"),Qt(i,"link",t),Lt(i),n.head.appendChild(i)}}}function F5(t,e,n){Fr.S(t,e,n);var i=vc;if(i&&t){var r=gl(i).hoistableStyles,s=jl(t);e=e||"default";var a=r.get(s);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(bd(s)))o.loading=5;else{t=We({rel:"stylesheet",href:t,"data-precedence":e},n),(n=mi.get(s))&&ab(t,n);var l=a=i.createElement("link");Lt(l),Qt(l,"link",t),l._p=new Promise(function(c,h){l.onload=c,l.onerror=h}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,am(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(s,a)}}}function B5(t,e){Fr.X(t,e);var n=vc;if(n&&t){var i=gl(n).hoistableScripts,r=wc(t),s=i.get(r);s||(s=n.querySelector(Td(r)),s||(t=We({src:t,async:!0},e),(e=mi.get(r))&&ob(t,e),s=n.createElement("script"),Lt(s),Qt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function q5(t,e){Fr.M(t,e);var n=vc;if(n&&t){var i=gl(n).hoistableScripts,r=wc(t),s=i.get(r);s||(s=n.querySelector(Td(r)),s||(t=We({src:t,async:!0,type:"module"},e),(e=mi.get(r))&&ob(t,e),s=n.createElement("script"),Lt(s),Qt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function dS(t,e,n,i){var r=(r=Is.current)?ip(r):null;if(!r)throw Error(F(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=jl(n.href),n=gl(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=jl(n.href);var s=gl(r).hoistableStyles,a=s.get(t);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,a),(s=r.querySelector(bd(t)))&&!s._p&&(a.instance=s,a.state.loading=5),mi.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},mi.set(t,n),s||H5(r,t,n,a.state))),e&&i===null)throw Error(F(528,""));return a}if(e&&i!==null)throw Error(F(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=wc(n),n=gl(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(F(444,t))}}function jl(t){return'href="'+si(t)+'"'}function bd(t){return'link[rel="stylesheet"]['+t+"]"}function E2(t){return We({},t,{"data-precedence":t.precedence,precedence:null})}function H5(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),Qt(e,"link",n),Lt(e),t.head.appendChild(e))}function wc(t){return'[src="'+si(t)+'"]'}function Td(t){return"script[async]"+t}function fS(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+si(n.href)+'"]');if(i)return e.instance=i,Lt(i),i;var r=We({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),Lt(i),Qt(i,"style",r),am(i,n.precedence,t),e.instance=i;case"stylesheet":r=jl(n.href);var s=t.querySelector(bd(r));if(s)return e.state.loading|=4,e.instance=s,Lt(s),s;i=E2(n),(r=mi.get(r))&&ab(i,r),s=(t.ownerDocument||t).createElement("link"),Lt(s);var a=s;return a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Qt(s,"link",i),e.state.loading|=4,am(s,n.precedence,t),e.instance=s;case"script":return s=wc(n.src),(r=t.querySelector(Td(s)))?(e.instance=r,Lt(r),r):(i=n,(r=mi.get(s))&&(i=We({},n),ob(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),Lt(r),Qt(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(F(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,am(i,n.precedence,t));return e.instance}function am(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===e)s=o;else if(s!==r)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function ab(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function ob(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var om=null;function mS(t,e,n){if(om===null){var i=new Map,r=om=new Map;r.set(n,i)}else r=om,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var s=n[r];if(!(s[pd]||s[Ht]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=t+a;var o=i.get(a);o?o.push(s):i.set(a,[s])}}return i}function pS(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function $5(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function A2(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function G5(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=jl(i.href),s=e.querySelector(bd(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=rp.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=s,Lt(s);return}s=e.ownerDocument||e,i=E2(i),(r=mi.get(r))&&ab(i,r),s=s.createElement("link"),Lt(s);var a=s;a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Qt(s,"link",i),n.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=rp.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var d_=0;function K5(t,e){return t.stylesheets&&t.count===0&&lm(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&lm(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&d_===0&&(d_=62500*x5());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&lm(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>d_?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function rp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)lm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var sp=null;function lm(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,sp=new Map,e.forEach(W5,t),sp=null,rp.call(t))}function W5(t,e){if(!(e.state.loading&4)){var n=sp.get(t);if(n)var i=n.get(null);else{n=new Map,sp.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=e.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=rp.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var Dh={$$typeof:pr,Provider:null,Consumer:null,_currentValue:Ba,_currentValue2:Ba,_threadCount:0};function Q5(t,e,n,i,r,s,a,o,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vy(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vy(0),this.hiddenUpdates=Vy(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function I2(t,e,n,i,r,s,a,o,l,c,h,d){return t=new Q5(t,e,n,a,l,c,h,d,o),e=1,s===!0&&(e|=24),s=jn(3,null,null,e),t.current=s,s.stateNode=t,e=kw(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},Mw(s),t}function S2(t){return t?(t=sl,t):sl}function x2(t,e,n,i,r,s){r=S2(r),i.context===null?i.context=r:i.pendingContext=r,i=xs(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Rs(t,i,e),n!==null&&(Cn(n,t,e),Bu(n,t,e))}function gS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function lb(t,e){gS(t,e),(t=t.alternate)&&gS(t,e)}function R2(t){if(t.tag===13||t.tag===31){var e=wo(t,67108864);e!==null&&Cn(e,t,67108864),lb(t,67108864)}}function yS(t){if(t.tag===13||t.tag===31){var e=$n();e=vw(e);var n=wo(t,e);n!==null&&Cn(n,t,e),lb(t,e)}}var ap=!0;function Y5(t,e,n,i){var r=se.T;se.T=null;var s=Re.p;try{Re.p=2,cb(t,e,n,i)}finally{Re.p=s,se.T=r}}function X5(t,e,n,i){var r=se.T;se.T=null;var s=Re.p;try{Re.p=8,cb(t,e,n,i)}finally{Re.p=s,se.T=r}}function cb(t,e,n,i){if(ap){var r=Qv(i);if(r===null)u_(t,e,i,op,n),_S(t,i);else if(Z5(r,t,e,n,i))i.stopPropagation();else if(_S(t,i),e&4&&-1<J5.indexOf(t)){for(;r!==null;){var s=pc(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=Ea(s.pendingLanes);if(a!==0){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-Hn(a);o.entanglements[1]|=l,a&=~l}rr(s),!(xe&6)&&(Ym=Bn()+500,wd(0))}}break;case 31:case 13:o=wo(s,2),o!==null&&Cn(o,s,2),lg(),lb(s,2)}if(s=Qv(i),s===null&&u_(t,e,i,op,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else u_(t,e,i,null,n)}}function Qv(t){return t=Ew(t),ub(t)}var op=null;function ub(t){if(op=null,t=Zo(t),t!==null){var e=hd(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=WC(e),t!==null)return t;t=null}else if(n===31){if(t=QC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return op=t,null}function C2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(L4()){case ZC:return 2;case eP:return 8;case Mm:case U4:return 32;case tP:return 268435456;default:return 32}default:return 32}}var Yv=!1,Ns=null,Ds=null,ks=null,kh=new Map,Oh=new Map,ps=[],J5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _S(t,e){switch(t){case"focusin":case"focusout":Ns=null;break;case"dragenter":case"dragleave":Ds=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":kh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oh.delete(e.pointerId)}}function ou(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=pc(e),e!==null&&R2(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Z5(t,e,n,i,r){switch(e){case"focusin":return Ns=ou(Ns,t,e,n,i,r),!0;case"dragenter":return Ds=ou(Ds,t,e,n,i,r),!0;case"mouseover":return ks=ou(ks,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return kh.set(s,ou(kh.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Oh.set(s,ou(Oh.get(s)||null,t,e,n,i,r)),!0}return!1}function P2(t){var e=Zo(t.target);if(e!==null){var n=hd(e);if(n!==null){if(e=n.tag,e===13){if(e=WC(n),e!==null){t.blockedOn=e,nI(t.priority,function(){yS(n)});return}}else if(e===31){if(e=QC(n),e!==null){t.blockedOn=e,nI(t.priority,function(){yS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function cm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Qv(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);mv=i,n.target.dispatchEvent(i),mv=null}else return e=pc(n),e!==null&&R2(e),t.blockedOn=n,!1;e.shift()}return!0}function vS(t,e,n){cm(t)&&n.delete(e)}function e3(){Yv=!1,Ns!==null&&cm(Ns)&&(Ns=null),Ds!==null&&cm(Ds)&&(Ds=null),ks!==null&&cm(ks)&&(ks=null),kh.forEach(vS),Oh.forEach(vS)}function xf(t,e){t.blockedOn===e&&(t.blockedOn=null,Yv||(Yv=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,e3)))}var Rf=null;function wS(t){Rf!==t&&(Rf=t,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,function(){Rf===t&&(Rf=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(ub(i||n)===null)continue;break}var s=pc(n);s!==null&&(t.splice(e,3),e-=3,Pv(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function zl(t){function e(l){return xf(l,t)}Ns!==null&&xf(Ns,t),Ds!==null&&xf(Ds,t),ks!==null&&xf(ks,t),kh.forEach(e),Oh.forEach(e);for(var n=0;n<ps.length;n++){var i=ps[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<ps.length&&(n=ps[0],n.blockedOn===null);)P2(n),n.blockedOn===null&&ps.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Pn]||null;if(typeof s=="function")a||wS(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Pn]||null)o=a.formAction;else if(ub(r)!==null)continue}else o=a.action;typeof o=="function"?n[i+1]=o:(n.splice(i,3),i-=3),wS(n)}}}function N2(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(a){return r=a})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function hb(t){this._internalRoot=t}hg.prototype.render=hb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));var n=e.current,i=$n();x2(n,i,t,e,null,null)};hg.prototype.unmount=hb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;x2(t.current,2,null,t,null,null),lg(),e[mc]=null}};function hg(t){this._internalRoot=t}hg.prototype.unstable_scheduleHydration=function(t){if(t){var e=aP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ps.length&&e!==0&&e<ps[n].priority;n++);ps.splice(n,0,t),n===0&&P2(t)}};var bS=GC.version;if(bS!=="19.2.0")throw Error(F(527,bS,"19.2.0"));Re.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=P4(e),t=t!==null?YC(t):null,t=t===null?null:t.stateNode,t};var t3={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cf.isDisabled&&Cf.supportsFiber)try{dd=Cf.inject(t3),qn=Cf}catch{}}Wp.createRoot=function(t,e){if(!KC(t))throw Error(F(299));var n=!1,i="",r=TN,s=EN,a=AN;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=I2(t,1,!1,null,null,n,i,null,r,s,a,N2),t[mc]=e.current,sb(t),new hb(e)};Wp.hydrateRoot=function(t,e,n){if(!KC(t))throw Error(F(299));var i=!1,r="",s=TN,a=EN,o=AN,l=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(l=n.formState)),e=I2(t,1,!0,e,n??null,i,r,l,s,a,o,N2),e.context=S2(null),n=e.current,i=$n(),i=vw(i),r=xs(i),r.callback=null,Rs(n,r,i),n=i,e.current.lanes=n,md(e,n),rr(e),t[mc]=e.current,sb(t),new hg(e)};Wp.version="19.2.0";function D2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D2)}catch(t){console.error(t)}}D2(),jC.exports=Wp;var n3=jC.exports;const i3=CC(n3),r3="modulepreload",s3=function(t){return"/RushCoffee-Capstone/"+t},TS={},Me=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=s3(l),l in TS)return;TS[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":r3,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((f,g)=>{d.addEventListener("load",f),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ES="popstate";function a3(t={}){function e(r,s){let{pathname:a="/",search:o="",hash:l=""}=To(r.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Xv("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){let a=r.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let l=r.location.href,c=l.indexOf("#");o=c===-1?l:l.slice(0,c)}return o+"#"+(typeof s=="string"?s:Vh(s))}function i(r,s){Nn(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return l3(e,n,i,t)}function tt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Nn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function o3(){return Math.random().toString(36).substring(2,10)}function AS(t,e){return{usr:t.state,key:t.key,idx:e}}function Xv(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?To(e):e,state:n,key:e&&e.key||i||o3()}}function Vh({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function To(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function l3(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o="POP",l=null,c=h();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function h(){return(a.state||{idx:null}).idx}function d(){o="POP";let x=h(),w=x==null?null:x-c;c=x,l&&l({action:o,location:E.location,delta:w})}function f(x,w){o="PUSH";let v=Xv(E.location,x,w);n&&n(v,x),c=h()+1;let _=AS(v,c),I=E.createHref(v);try{a.pushState(_,"",I)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(I)}s&&l&&l({action:o,location:E.location,delta:1})}function g(x,w){o="REPLACE";let v=Xv(E.location,x,w);n&&n(v,x),c=h();let _=AS(v,c),I=E.createHref(v);a.replaceState(_,"",I),s&&l&&l({action:o,location:E.location,delta:0})}function b(x){return c3(x)}let E={get action(){return o},get location(){return t(r,a)},listen(x){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(ES,d),l=x,()=>{r.removeEventListener(ES,d),l=null}},createHref(x){return e(r,x)},createURL:b,encodeLocation(x){let w=b(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:g,go(x){return a.go(x)}};return E}function c3(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),tt(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Vh(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function k2(t,e,n="/"){return u3(t,e,n,!1)}function u3(t,e,n,i){let r=typeof e=="string"?To(e):e,s=Or(r.pathname||"/",n);if(s==null)return null;let a=O2(t);h3(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=T3(s);o=w3(a[l],c,i)}return o}function O2(t,e=[],n=[],i="",r=!1){let s=(a,o,l=r,c)=>{let h={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(i)&&l)return;tt(h.relativePath.startsWith(i),`Absolute route path "${h.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(i.length)}let d=Ar([i,h.relativePath]),f=n.concat(h);a.children&&a.children.length>0&&(tt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),O2(a.children,e,f,d,l)),!(a.path==null&&!a.index)&&e.push({path:d,score:_3(d,a.index),routesMeta:f})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of V2(a.path))s(a,o,!0,c)}),e}function V2(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=V2(i.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),r&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function h3(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:v3(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var d3=/^:[\w-]+$/,f3=3,m3=2,p3=1,g3=10,y3=-2,IS=t=>t==="*";function _3(t,e){let n=t.split("/"),i=n.length;return n.some(IS)&&(i+=y3),e&&(i+=m3),n.filter(r=>!IS(r)).reduce((r,s)=>r+(d3.test(s)?f3:s===""?p3:g3),i)}function v3(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function w3(t,e,n=!1){let{routesMeta:i}=t,r={},s="/",a=[];for(let o=0;o<i.length;++o){let l=i[o],c=o===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=lp({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d&&c&&n&&!i[i.length-1].route.index&&(d=lp({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(r,d.params),a.push({params:r,pathname:Ar([s,d.pathname]),pathnameBase:x3(Ar([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Ar([s,d.pathnameBase]))}return a}function lp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=b3(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((c,{paramName:h,isOptional:d},f)=>{if(h==="*"){let b=o[f]||"";a=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const g=o[f];return d&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function b3(t,e=!1,n=!0){Nn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(i.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function T3(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Nn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Or(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var E3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,A3=t=>E3.test(t);function I3(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?To(t):t,s;if(n)if(A3(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Nn(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?s=SS(n.substring(1),"/"):s=SS(n,e)}else s=e;return{pathname:s,search:R3(i),hash:C3(r)}}function SS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function f_(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function S3(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function db(t){let e=S3(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function fb(t,e,n,i=!1){let r;typeof t=="string"?r=To(t):(r={...t},tt(!r.pathname||!r.pathname.includes("?"),f_("?","pathname","search",r)),tt(!r.pathname||!r.pathname.includes("#"),f_("#","pathname","hash",r)),tt(!r.search||!r.search.includes("#"),f_("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=n;else{let d=e.length-1;if(!i&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}o=d>=0?e[d]:"/"}let l=I3(r,o),c=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}var Ar=t=>t.join("/").replace(/\/\/+/g,"/"),x3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),R3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,C3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function P3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var M2=["POST","PUT","PATCH","DELETE"];new Set(M2);var N3=["GET",...M2];new Set(N3);var bc=C.createContext(null);bc.displayName="DataRouter";var dg=C.createContext(null);dg.displayName="DataRouterState";C.createContext(!1);var L2=C.createContext({isTransitioning:!1});L2.displayName="ViewTransition";var D3=C.createContext(new Map);D3.displayName="Fetchers";var k3=C.createContext(null);k3.displayName="Await";var Ci=C.createContext(null);Ci.displayName="Navigation";var Ed=C.createContext(null);Ed.displayName="Location";var Pi=C.createContext({outlet:null,matches:[],isDataRoute:!1});Pi.displayName="Route";var mb=C.createContext(null);mb.displayName="RouteError";function O3(t,{relative:e}={}){tt(Tc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=C.useContext(Ci),{hash:r,pathname:s,search:a}=Ad(t,{relative:e}),o=s;return n!=="/"&&(o=s==="/"?n:Ar([n,s])),i.createHref({pathname:o,search:a,hash:r})}function Tc(){return C.useContext(Ed)!=null}function gi(){return tt(Tc(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Ed).location}var U2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function j2(t){C.useContext(Ci).static||C.useLayoutEffect(t)}function Ec(){let{isDataRoute:t}=C.useContext(Pi);return t?Q3():V3()}function V3(){tt(Tc(),"useNavigate() may be used only in the context of a <Router> component.");let t=C.useContext(bc),{basename:e,navigator:n}=C.useContext(Ci),{matches:i}=C.useContext(Pi),{pathname:r}=gi(),s=JSON.stringify(db(i)),a=C.useRef(!1);return j2(()=>{a.current=!0}),C.useCallback((l,c={})=>{if(Nn(a.current,U2),!a.current)return;if(typeof l=="number"){n.go(l);return}let h=fb(l,JSON.parse(s),r,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ar([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,s,r,t])}var M3=C.createContext(null);function L3(t){let e=C.useContext(Pi).outlet;return C.useMemo(()=>e&&C.createElement(M3.Provider,{value:t},e),[e,t])}function Ad(t,{relative:e}={}){let{matches:n}=C.useContext(Pi),{pathname:i}=gi(),r=JSON.stringify(db(n));return C.useMemo(()=>fb(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function U3(t,e){return z2(t,e)}function z2(t,e,n,i,r){var v;tt(Tc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=C.useContext(Ci),{matches:a}=C.useContext(Pi),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",h=o?o.pathnameBase:"/",d=o&&o.route;{let _=d&&d.path||"";F2(c,!d||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let f=gi(),g;if(e){let _=typeof e=="string"?To(e):e;tt(h==="/"||((v=_.pathname)==null?void 0:v.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${_.pathname}" was given in the \`location\` prop.`),g=_}else g=f;let b=g.pathname||"/",E=b;if(h!=="/"){let _=h.replace(/^\//,"").split("/");E="/"+b.replace(/^\//,"").split("/").slice(_.length).join("/")}let x=k2(t,{pathname:E});Nn(d||x!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Nn(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=q3(x&&x.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Ar([h,s.encodeLocation?s.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?h:Ar([h,s.encodeLocation?s.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),a,n,i,r);return e&&w?C.createElement(Ed.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},w):w}function j3(){let t=W3(),e=P3(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:s},"ErrorBoundary")," or"," ",C.createElement("code",{style:s},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:r},n):null,a)}var z3=C.createElement(j3,null),F3=class extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?C.createElement(Pi.Provider,{value:this.props.routeContext},C.createElement(mb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function B3({routeContext:t,match:e,children:n}){let i=C.useContext(bc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(Pi.Provider,{value:t},n)}function q3(t,e=[],n=null,i=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n==null?void 0:n.errors;if(a!=null){let h=s.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);tt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let o=!1,l=-1;if(n)for(let h=0;h<s.length;h++){let d=s[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=h),d.route.id){let{loaderData:f,errors:g}=n,b=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||b){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let c=n&&i?(h,d)=>{var f,g;i(h,{location:n.location,params:((g=(f=n.matches)==null?void 0:f[0])==null?void 0:g.params)??{},errorInfo:d})}:void 0;return s.reduceRight((h,d,f)=>{let g,b=!1,E=null,x=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,E=d.route.errorElement||z3,o&&(l<0&&f===0?(F2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,x=null):l===f&&(b=!0,x=d.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,f+1)),v=()=>{let _;return g?_=E:b?_=x:d.route.Component?_=C.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=h,C.createElement(B3,{match:d,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?C.createElement(F3,{location:n.location,revalidation:n.revalidation,component:E,error:g,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0},onError:c}):v()},null)}function pb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function H3(t){let e=C.useContext(bc);return tt(e,pb(t)),e}function $3(t){let e=C.useContext(dg);return tt(e,pb(t)),e}function G3(t){let e=C.useContext(Pi);return tt(e,pb(t)),e}function gb(t){let e=G3(t),n=e.matches[e.matches.length-1];return tt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function K3(){return gb("useRouteId")}function W3(){var i;let t=C.useContext(mb),e=$3("useRouteError"),n=gb("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function Q3(){let{router:t}=H3("useNavigate"),e=gb("useNavigate"),n=C.useRef(!1);return j2(()=>{n.current=!0}),C.useCallback(async(r,s={})=>{Nn(n.current,U2),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...s}))},[t,e])}var xS={};function F2(t,e,n){!e&&!xS[t]&&(xS[t]=!0,Nn(!1,n))}C.memo(Y3);function Y3({routes:t,future:e,state:n,unstable_onError:i}){return z2(t,void 0,n,i,e)}function X3({to:t,replace:e,state:n,relative:i}){tt(Tc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=C.useContext(Ci);Nn(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=C.useContext(Pi),{pathname:a}=gi(),o=Ec(),l=fb(t,db(s),a,i==="path"),c=JSON.stringify(l);return C.useEffect(()=>{o(JSON.parse(c),{replace:e,state:n,relative:i})},[o,c,i,e,n]),null}function RS(t){return L3(t.context)}function ve(t){tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function J3({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:s=!1}){tt(!Tc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=C.useMemo(()=>({basename:a,navigator:r,static:s,future:{}}),[a,r,s]);typeof n=="string"&&(n=To(n));let{pathname:l="/",search:c="",hash:h="",state:d=null,key:f="default"}=n,g=C.useMemo(()=>{let b=Or(l,a);return b==null?null:{location:{pathname:b,search:c,hash:h,state:d,key:f},navigationType:i}},[a,l,c,h,d,f,i]);return Nn(g!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:C.createElement(Ci.Provider,{value:o},C.createElement(Ed.Provider,{children:e,value:g}))}function Z3({children:t,location:e}){return U3(Jv(t),e)}function Jv(t,e=[]){let n=[];return C.Children.forEach(t,(i,r)=>{if(!C.isValidElement(i))return;let s=[...e,r];if(i.type===C.Fragment){n.push.apply(n,Jv(i.props.children,s));return}tt(i.type===ve,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),tt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Jv(i.props.children,s)),n.push(a)}),n}var um="get",hm="application/x-www-form-urlencoded";function fg(t){return t!=null&&typeof t.tagName=="string"}function ej(t){return fg(t)&&t.tagName.toLowerCase()==="button"}function tj(t){return fg(t)&&t.tagName.toLowerCase()==="form"}function nj(t){return fg(t)&&t.tagName.toLowerCase()==="input"}function ij(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function rj(t,e){return t.button===0&&(!e||e==="_self")&&!ij(t)}function Zv(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(r=>[n,r]):[[n,i]])},[]))}function sj(t,e){let n=Zv(t);return e&&e.forEach((i,r)=>{n.has(r)||e.getAll(r).forEach(s=>{n.append(r,s)})}),n}var Pf=null;function aj(){if(Pf===null)try{new FormData(document.createElement("form"),0),Pf=!1}catch{Pf=!0}return Pf}var oj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function m_(t){return t!=null&&!oj.has(t)?(Nn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hm}"`),null):t}function lj(t,e){let n,i,r,s,a;if(tj(t)){let o=t.getAttribute("action");i=o?Or(o,e):null,n=t.getAttribute("method")||um,r=m_(t.getAttribute("enctype"))||hm,s=new FormData(t)}else if(ej(t)||nj(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(i=l?Or(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||um,r=m_(t.getAttribute("formenctype"))||m_(o.getAttribute("enctype"))||hm,s=new FormData(o,t),!aj()){let{name:c,type:h,value:d}=t;if(h==="image"){let f=c?`${c}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else c&&s.append(c,d)}}else{if(fg(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=um,i=null,r=hm,a=t}return s&&r==="text/plain"&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function yb(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cj(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Or(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function uj(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hj(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function dj(t,e,n){let i=await Promise.all(t.map(async r=>{let s=e.routes[r.route.id];if(s){let a=await uj(s,n);return a.links?a.links():[]}return[]}));return gj(i.flat(1).filter(hj).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function CS(t,e,n,i,r,s){let a=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,o=(l,c)=>{var h;return n[c].pathname!==l.pathname||((h=n[c].route.path)==null?void 0:h.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?e.filter((l,c)=>{var d;let h=i.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function fj(t,e,{includeHydrateFallback:n}={}){return mj(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function mj(t){return[...new Set(t)]}function pj(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function gj(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let s=JSON.stringify(pj(r));return n.has(s)||(n.add(s),i.push({key:s,link:r})),i},[])}function B2(){let t=C.useContext(bc);return yb(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function yj(){let t=C.useContext(dg);return yb(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var _b=C.createContext(void 0);_b.displayName="FrameworkContext";function q2(){let t=C.useContext(_b);return yb(t,"You must render this element inside a <HydratedRouter> element"),t}function _j(t,e){let n=C.useContext(_b),[i,r]=C.useState(!1),[s,a]=C.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:d}=e,f=C.useRef(null);C.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let E=w=>{w.forEach(v=>{a(v.isIntersecting)})},x=new IntersectionObserver(E,{threshold:.5});return f.current&&x.observe(f.current),()=>{x.disconnect()}}},[t]),C.useEffect(()=>{if(i){let E=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(E)}}},[i]);let g=()=>{r(!0)},b=()=>{r(!1),a(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:lu(o,g),onBlur:lu(l,b),onMouseEnter:lu(c,g),onMouseLeave:lu(h,b),onTouchStart:lu(d,g)}]:[!1,f,{}]}function lu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function vj({page:t,...e}){let{router:n}=B2(),i=C.useMemo(()=>k2(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?C.createElement(bj,{page:t,matches:i,...e}):null}function wj(t){let{manifest:e,routeModules:n}=q2(),[i,r]=C.useState([]);return C.useEffect(()=>{let s=!1;return dj(t,e,n).then(a=>{s||r(a)}),()=>{s=!0}},[t,e,n]),i}function bj({page:t,matches:e,...n}){let i=gi(),{manifest:r,routeModules:s}=q2(),{basename:a}=B2(),{loaderData:o,matches:l}=yj(),c=C.useMemo(()=>CS(t,e,l,r,i,"data"),[t,e,l,r,i]),h=C.useMemo(()=>CS(t,e,l,r,i,"assets"),[t,e,l,r,i]),d=C.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let b=new Set,E=!1;if(e.forEach(w=>{var _;let v=r.routes[w.route.id];!v||!v.hasLoader||(!c.some(I=>I.route.id===w.route.id)&&w.route.id in o&&((_=s[w.route.id])!=null&&_.shouldRevalidate)||v.hasClientLoader?E=!0:b.add(w.route.id))}),b.size===0)return[];let x=cj(t,a,"data");return E&&b.size>0&&x.searchParams.set("_routes",e.filter(w=>b.has(w.route.id)).map(w=>w.route.id).join(",")),[x.pathname+x.search]},[a,o,i,r,c,e,t,s]),f=C.useMemo(()=>fj(h,r),[h,r]),g=wj(h);return C.createElement(C.Fragment,null,d.map(b=>C.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),f.map(b=>C.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),g.map(({key:b,link:E})=>C.createElement("link",{key:b,nonce:n.nonce,...E})))}function Tj(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var H2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{H2&&(window.__reactRouterVersion="7.9.6")}catch{}function Ej({basename:t,children:e,window:n}){let i=C.useRef();i.current==null&&(i.current=a3({window:n,v5Compat:!0}));let r=i.current,[s,a]=C.useState({action:r.action,location:r.location}),o=C.useCallback(l=>{C.startTransition(()=>a(l))},[a]);return C.useLayoutEffect(()=>r.listen(o),[r,o]),C.createElement(J3,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:r})}var $2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ei=C.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:h,viewTransition:d,...f},g){let{basename:b}=C.useContext(Ci),E=typeof c=="string"&&$2.test(c),x,w=!1;if(typeof c=="string"&&E&&(x=c,H2))try{let S=new URL(window.location.href),R=c.startsWith("//")?new URL(S.protocol+c):new URL(c),D=Or(R.pathname,b);R.origin===S.origin&&D!=null?c=D+R.search+R.hash:w=!0}catch{Nn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=O3(c,{relative:r}),[_,I,k]=_j(i,f),V=Sj(c,{replace:a,state:o,target:l,preventScrollReset:h,relative:r,viewTransition:d});function A(S){e&&e(S),S.defaultPrevented||V(S)}let T=C.createElement("a",{...f,...k,href:x||v,onClick:w||s?e:A,ref:Tj(g,I),target:l,"data-discover":!E&&n==="render"?"true":void 0});return _&&!E?C.createElement(C.Fragment,null,T,C.createElement(vj,{page:v})):T});ei.displayName="Link";var wi=C.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:s,to:a,viewTransition:o,children:l,...c},h){let d=Ad(a,{relative:c.relative}),f=gi(),g=C.useContext(dg),{navigator:b,basename:E}=C.useContext(Ci),x=g!=null&&Dj(d)&&o===!0,w=b.encodeLocation?b.encodeLocation(d).pathname:d.pathname,v=f.pathname,_=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(v=v.toLowerCase(),_=_?_.toLowerCase():null,w=w.toLowerCase()),_&&E&&(_=Or(_,E)||_);const I=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let k=v===w||!r&&v.startsWith(w)&&v.charAt(I)==="/",V=_!=null&&(_===w||!r&&_.startsWith(w)&&_.charAt(w.length)==="/"),A={isActive:k,isPending:V,isTransitioning:x},T=k?e:void 0,S;typeof i=="function"?S=i(A):S=[i,k?"active":null,V?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let R=typeof s=="function"?s(A):s;return C.createElement(ei,{...c,"aria-current":T,className:S,ref:h,style:R,to:a,viewTransition:o},typeof l=="function"?l(A):l)});wi.displayName="NavLink";var Aj=C.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:s,method:a=um,action:o,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:d,...f},g)=>{let b=Pj(),E=Nj(o,{relative:c}),x=a.toLowerCase()==="get"?"get":"post",w=typeof o=="string"&&$2.test(o),v=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let I=_.nativeEvent.submitter,k=(I==null?void 0:I.getAttribute("formmethod"))||a;b(I||_.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:r,state:s,relative:c,preventScrollReset:h,viewTransition:d})};return C.createElement("form",{ref:g,method:x,action:E,onSubmit:i?l:v,...f,"data-discover":!w&&t==="render"?"true":void 0})});Aj.displayName="Form";function Ij(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function G2(t){let e=C.useContext(bc);return tt(e,Ij(t)),e}function Sj(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:s,viewTransition:a}={}){let o=Ec(),l=gi(),c=Ad(t,{relative:s});return C.useCallback(h=>{if(rj(h,e)){h.preventDefault();let d=n!==void 0?n:Vh(l)===Vh(c);o(t,{replace:d,state:i,preventScrollReset:r,relative:s,viewTransition:a})}},[l,o,c,n,i,e,t,r,s,a])}function xj(t){Nn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=C.useRef(Zv(t)),n=C.useRef(!1),i=gi(),r=C.useMemo(()=>sj(i.search,n.current?null:e.current),[i.search]),s=Ec(),a=C.useCallback((o,l)=>{const c=Zv(typeof o=="function"?o(new URLSearchParams(r)):o);n.current=!0,s("?"+c,l)},[s,r]);return[r,a]}var Rj=0,Cj=()=>`__${String(++Rj)}__`;function Pj(){let{router:t}=G2("useSubmit"),{basename:e}=C.useContext(Ci),n=K3();return C.useCallback(async(i,r={})=>{let{action:s,method:a,encType:o,formData:l,body:c}=lj(i,e);if(r.navigate===!1){let h=r.fetcherKey||Cj();await t.fetch(h,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,flushSync:r.flushSync})}else await t.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function Nj(t,{relative:e}={}){let{basename:n}=C.useContext(Ci),i=C.useContext(Pi);tt(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...Ad(t||".",{relative:e})},a=gi();if(t==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(h=>h==="")){o.delete("index"),l.filter(d=>d).forEach(d=>o.append("index",d));let h=o.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Ar([n,s.pathname])),Vh(s)}function Dj(t,{relative:e}={}){let n=C.useContext(L2);tt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=G2("useViewTransitionState"),r=Ad(t,{relative:e});if(!n.isTransitioning)return!1;let s=Or(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Or(n.nextLocation.pathname,i)||n.nextLocation.pathname;return lp(r.pathname,a)!=null||lp(r.pathname,s)!=null}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Oj=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),PS=t=>{const e=Oj(t);return e.charAt(0).toUpperCase()+e.slice(1)},K2=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),Vj=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=C.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:a,...o},l)=>C.createElement("svg",{ref:l,...Mj,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:K2("lucide",r),...!s&&!Vj(o)&&{"aria-hidden":"true"},...o},[...a.map(([c,h])=>C.createElement(c,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=(t,e)=>{const n=C.forwardRef(({className:i,...r},s)=>C.createElement(Lj,{ref:s,iconNode:e,className:K2(`lucide-${kj(PS(t))}`,`lucide-${t}`,i),...r}));return n.displayName=PS(t),n};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],W2=Ae("arrow-left",Uj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],zj=Ae("arrow-right",jj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],NS=Ae("check",Fj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],qj=Ae("chevron-down",Bj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Xu=Ae("circle-alert",Hj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Q2=Ae("circle-check-big",$j);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Kj=Ae("circle-check",Gj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Qj=Ae("circle-x",Wj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Y2=Ae("eye-off",Yj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],X2=Ae("eye",Xj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],Zj=Ae("facebook",Jj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],tz=Ae("gift",ez);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],J2=Ae("info",nz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],rz=Ae("instagram",iz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],li=Ae("loader-circle",sz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],e0=Ae("lock",az);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],DS=Ae("log-out",oz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lz=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mh=Ae("mail",lz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],uz=Ae("map-pin",cz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],dz=Ae("menu",hz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fz=[["path",{d:"M5 12h14",key:"1ays0h"}]],t0=Ae("minus",fz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],vb=Ae("phone",mz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Z2=Ae("plus",pz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gz=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],yz=Ae("refresh-cw",gz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _z=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],vz=Ae("shield-alert",_z);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wz=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],bz=Ae("shield-check",wz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tz=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Nf=Ae("shield",Tz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ez=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Az=Ae("shopping-cart",Ez);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iz=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Sz=Ae("trash-2",Iz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Rz=Ae("triangle-alert",xz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cz=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],n0=Ae("user",Cz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Id=Ae("x",Pz),Nz=()=>{};var kS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Dz=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],o=t[n++],l=((r&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},tD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,o=a?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|o>>4;let f=(o&15)<<2|c>>6,g=c&63;l||(g=64,a||(f=64)),i.push(n[h],n[d],n[f],n[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(eD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Dz(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||o==null||c==null||d==null)throw new kz;const f=s<<2|o>>4;if(i.push(f),c!==64){const g=o<<4&240|c>>2;if(i.push(g),d!==64){const b=c<<6&192|d;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kz extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Oz=function(t){const e=eD(t);return tD.encodeByteArray(e,!0)},cp=function(t){return Oz(t).replace(/\./g,"")},mg=function(t){try{return tD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function up(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Vz(n)||(t[n]=up(t[n],e[n]));return t}function Vz(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mz=()=>wb().__FIREBASE_DEFAULTS__,Lz=()=>{if(typeof process>"u"||typeof kS>"u")return;const t=kS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Uz=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mg(t[1]);return e&&JSON.parse(e)},bb=()=>{try{return Nz()||Mz()||Lz()||Uz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Tb=()=>{var t;return(t=bb())==null?void 0:t.config},nD=t=>{var e;return(e=bb())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Eb(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[cp(JSON.stringify(n)),cp(JSON.stringify(a)),""].join(".")}const Ju={};function zz(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ju))Ju[e]?t.emulator.push(e):t.prod.push(e);return t}function Fz(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let OS=!1;function Ab(t,e){if(typeof window>"u"||typeof document>"u"||!sr(window.location.host)||Ju[t]===e||Ju[t]||OS)return;Ju[t]=e;function n(f){return`__firebase__banner__${f}`}const i="__firebase__banner",s=zz().prod.length>0;function a(){const f=document.getElementById(i);f&&f.remove()}function o(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{OS=!0,a()},f}function h(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=Fz(i),g=n("text"),b=document.getElementById(g)||document.createElement("span"),E=n("learnmore"),x=document.getElementById(E)||document.createElement("a"),w=n("preprendIcon"),v=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const _=f.element;o(_),h(x,E);const I=c();l(v,w),_.append(v,b,x,I),document.body.appendChild(_)}s?(b.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ee())}function pg(){var e;const t=(e=bb())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Bz(){return typeof window<"u"||sD()}function sD(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function aD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ib(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gg(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oD(){const t=Ee();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lD(){return!pg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cD(){return!pg()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Lh(){try{return typeof indexedDB=="object"}catch{return!1}}function qz(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hz="FirebaseError";class jt extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Hz,Object.setPrototypeOf(this,jt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ar.prototype.create)}}class ar{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?$z(s,i):"Error",o=`${this.serviceName}: ${a} (${r}).`;return new jt(r,o,i)}}function $z(t,e){return t.replace(Gz,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Gz=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Kz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function qs(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(MS(s)&&MS(a)){if(!qs(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function MS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function cl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Iu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Sb(t,e){const n=new Wz(t,e);return n.subscribe.bind(n)}class Wz{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Qz(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=p_),r.error===void 0&&(r.error=p_),r.complete===void 0&&(r.complete=p_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qz(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function p_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t){return t&&t._delegate?t._delegate:t}class Dn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new jz;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Jz(e))try{this.getOrInitializeService({instanceIdentifier:Sa})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sa){return this.instances.has(e)}getOptions(e=Sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);i===o&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Xz(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Sa){return this.component?this.component.multipleInstances?e:Sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Xz(t){return t===Sa?void 0:t}function Jz(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Yz(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=[];var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const hD={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},Zz=fe.INFO,e9={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},t9=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=e9[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sd{constructor(e){this.name=e,this._logLevel=Zz,this._logHandler=t9,this._userLogHandler=null,xb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}function n9(t){xb.forEach(e=>{e.setLogLevel(t)})}function i9(t,e){for(const n of xb){let i=null;e&&e.level&&(i=hD[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,s,...a)=>{const o=a.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(i??r.logLevel)&&t({level:fe[s].toLowerCase(),message:o,args:a,type:r.name})}}}const r9=(t,e)=>e.some(n=>t instanceof n);let LS,US;function s9(){return LS||(LS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function a9(){return US||(US=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dD=new WeakMap,i0=new WeakMap,fD=new WeakMap,g_=new WeakMap,Rb=new WeakMap;function o9(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Os(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&dD.set(n,t)}).catch(()=>{}),Rb.set(e,t),e}function l9(t){if(i0.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});i0.set(t,e)}let r0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return i0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Os(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function c9(t){r0=t(r0)}function u9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(y_(this),e,...n);return fD.set(i,e.sort?e.sort():[e]),Os(i)}:a9().includes(t)?function(...e){return t.apply(y_(this),e),Os(dD.get(this))}:function(...e){return Os(t.apply(y_(this),e))}}function h9(t){return typeof t=="function"?u9(t):(t instanceof IDBTransaction&&l9(t),r9(t,s9())?new Proxy(t,r0):t)}function Os(t){if(t instanceof IDBRequest)return o9(t);if(g_.has(t))return g_.get(t);const e=h9(t);return e!==t&&(g_.set(t,e),Rb.set(e,t)),e}const y_=t=>Rb.get(t);function d9(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),o=Os(a);return i&&a.addEventListener("upgradeneeded",l=>{i(Os(a.result),l.oldVersion,l.newVersion,Os(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const f9=["get","getKey","getAll","getAllKeys","count"],m9=["put","add","delete","clear"],__=new Map;function jS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(__.get(e))return __.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=m9.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||f9.includes(n)))return;const s=async function(a,...o){const l=this.transaction(a,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),r&&l.done]))[0]};return __.set(e,s),s}c9(t=>({...t,get:(e,n,i)=>jS(e,n)||t.get(e,n,i),has:(e,n)=>!!jS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(g9(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function g9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hp="@firebase/app",s0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new Sd("@firebase/app"),y9="@firebase/app-compat",_9="@firebase/analytics-compat",v9="@firebase/analytics",w9="@firebase/app-check-compat",b9="@firebase/app-check",T9="@firebase/auth",E9="@firebase/auth-compat",A9="@firebase/database",I9="@firebase/data-connect",S9="@firebase/database-compat",x9="@firebase/functions",R9="@firebase/functions-compat",C9="@firebase/installations",P9="@firebase/installations-compat",N9="@firebase/messaging",D9="@firebase/messaging-compat",k9="@firebase/performance",O9="@firebase/performance-compat",V9="@firebase/remote-config",M9="@firebase/remote-config-compat",L9="@firebase/storage",U9="@firebase/storage-compat",j9="@firebase/firestore",z9="@firebase/ai",F9="@firebase/firestore-compat",B9="firebase",q9="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="[DEFAULT]",H9={[hp]:"fire-core",[y9]:"fire-core-compat",[v9]:"fire-analytics",[_9]:"fire-analytics-compat",[b9]:"fire-app-check",[w9]:"fire-app-check-compat",[T9]:"fire-auth",[E9]:"fire-auth-compat",[A9]:"fire-rtdb",[I9]:"fire-data-connect",[S9]:"fire-rtdb-compat",[x9]:"fire-fn",[R9]:"fire-fn-compat",[C9]:"fire-iid",[P9]:"fire-iid-compat",[N9]:"fire-fcm",[D9]:"fire-fcm-compat",[k9]:"fire-perf",[O9]:"fire-perf-compat",[V9]:"fire-rc",[M9]:"fire-rc-compat",[L9]:"fire-gcs",[U9]:"fire-gcs-compat",[j9]:"fire-fst",[F9]:"fire-fst-compat",[z9]:"fire-vertex","fire-js":"fire-js",[B9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new Map,Fl=new Map,Bl=new Map;function Uh(t,e){try{t.container.addComponent(e)}catch(n){Vr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function mD(t,e){t.container.addOrOverwriteComponent(e)}function Si(t){const e=t.name;if(Bl.has(e))return Vr.debug(`There were multiple attempts to register component ${e}.`),!1;Bl.set(e,t);for(const n of $s.values())Uh(n,t);for(const n of Fl.values())Uh(n,t);return!0}function pD(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $9(t,e,n=Hs){pD(t,e).clearInstance(n)}function Cb(t){return t.options!==void 0}function gD(t){return Cb(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function Se(t){return t==null?!1:t.settings!==void 0}function G9(){Bl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gn=new ar("app","Firebase",K9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yD=class{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Dn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t,e){const n=mg(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const r=JSON.parse(n).exp*1e3,s=new Date().getTime();r-s<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class W9 extends yD{constructor(e,n,i,r){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,a={name:i,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,a,r);else{const o=e;super(o.options,a,r)}this._serverConfig={automaticDataCollectionEnabled:s,...n},this._serverConfig.authIdToken&&zS(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&zS(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,yn(hp,s0,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Nb(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Gn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=q9;function Pb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Hs,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Gn.create("bad-app-name",{appName:String(r)});if(n||(n=Tb()),!n)throw Gn.create("no-options");const s=$s.get(r);if(s){if(qs(n,s.options)&&qs(i,s.config))return s;throw Gn.create("duplicate-app",{appName:r})}const a=new uD(r);for(const l of Bl.values())a.addComponent(l);const o=new yD(n,i,a);return $s.set(r,o),o}function Q9(t,e={}){if(Bz()&&!sD())throw Gn.create("invalid-server-app-environment");let n,i=e||{};if(t&&(Cb(t)?n=t.options:gD(t)?i=t:n=t),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),n||(n=Tb()),!n)throw Gn.create("no-options");const r={...i,...n};r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=h=>[...h].reduce((d,f)=>Math.imul(31,d)+f.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Gn.create("finalization-registry-not-supported",{});const a=""+s(JSON.stringify(r)),o=Fl.get(a);if(o)return o.incRefCount(i.releaseOnDeref),o;const l=new uD(a);for(const h of Bl.values())l.addComponent(h);const c=new W9(n,i,a,l);return Fl.set(a,c),c}function Y9(t=Hs){const e=$s.get(t);if(!e&&t===Hs&&Tb())return Pb();if(!e)throw Gn.create("no-app",{appName:t});return e}function X9(){return Array.from($s.values())}async function Nb(t){let e=!1;const n=t.name;$s.has(n)?(e=!0,$s.delete(n)):Fl.has(n)&&t.decRefCount()<=0&&(Fl.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(i=>i.delete())),t.isDeleted=!0)}function yn(t,e,n){let i=H9[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=e.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vr.warn(a.join(" "));return}Si(new Dn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function _D(t,e){if(t!==null&&typeof t!="function")throw Gn.create("invalid-log-argument");i9(t,e)}function vD(t){n9(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J9="firebase-heartbeat-database",Z9=1,jh="firebase-heartbeat-store";let v_=null;function wD(){return v_||(v_=d9(J9,Z9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gn.create("idb-open",{originalErrorMessage:t.message})})),v_}async function eF(t){try{const n=(await wD()).transaction(jh),i=await n.objectStore(jh).get(bD(t));return await n.done,i}catch(e){if(e instanceof jt)Vr.warn(e.message);else{const n=Gn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vr.warn(n.message)}}}async function FS(t,e){try{const i=(await wD()).transaction(jh,"readwrite");await i.objectStore(jh).put(e,bD(t)),await i.done}catch(n){if(n instanceof jt)Vr.warn(n.message);else{const i=Gn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vr.warn(i.message)}}}function bD(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=1024,nF=30;class iF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sF(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=BS();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>nF){const a=aF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Vr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=BS(),{heartbeatsToSend:i,unsentEntries:r}=rF(this._heartbeatsCache.heartbeats),s=cp(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Vr.warn(n),""}}}function BS(){return new Date().toISOString().substring(0,10)}function rF(t,e=tF){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),qS(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),qS(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class sF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lh()?qz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eF(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return FS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return FS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function qS(t){return cp(JSON.stringify({version:2,heartbeats:t})).length}function aF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(t){Si(new Dn("platform-logger",e=>new p9(e),"PRIVATE")),Si(new Dn("heartbeat",e=>new iF(e),"PRIVATE")),yn(hp,s0,t),yn(hp,s0,"esm2020"),yn("fire-js","")}oF("");const lF=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:jt,SDK_VERSION:yi,_DEFAULT_ENTRY_NAME:Hs,_addComponent:Uh,_addOrOverwriteComponent:mD,_apps:$s,_clearComponents:G9,_components:Bl,_getProvider:pD,_isFirebaseApp:Cb,_isFirebaseServerApp:Se,_isFirebaseServerAppSettings:gD,_registerComponent:Si,_removeServiceInstance:$9,_serverApps:Fl,deleteApp:Nb,getApp:Y9,getApps:X9,initializeApp:Pb,initializeServerApp:Q9,onLog:_D,registerVersion:yn,setLogLevel:vD},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e,n){this._delegate=e,this.firebase=n,Uh(e,new Dn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Nb(this._delegate)))}_getService(e,n=Hs){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())==null?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Hs){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Uh(this._delegate,e)}_addOrOverwriteComponent(e){mD(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},HS=new ar("app-compat","Firebase",uF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(t){const e={},n={__esModule:!0,initializeApp:s,app:r,registerVersion:yn,setLogLevel:vD,onLog:_D,apps:null,SDK_VERSION:yi,INTERNAL:{registerComponent:o,removeApp:i,useAsService:l,modularAPIs:lF}};n.default=n,Object.defineProperty(n,"apps",{get:a});function i(c){delete e[c]}function r(c){if(c=c||Hs,!VS(e,c))throw HS.create("no-app",{appName:c});return e[c]}r.App=t;function s(c,h={}){const d=Pb(c,h);if(VS(e,d.name))return e[d.name];const f=new t(d,n);return e[d.name]=f,f}function a(){return Object.keys(e).map(c=>e[c])}function o(c){const h=c.name,d=h.replace("-compat","");if(Si(c)&&c.type==="PUBLIC"){const f=(g=r())=>{if(typeof g[d]!="function")throw HS.create("invalid-app-argument",{appName:h});return g[d]()};c.serviceProps!==void 0&&up(f,c.serviceProps),n[d]=f,t.prototype[d]=function(...g){return this._getService.bind(this,h).apply(this,c.multipleInstances?g:[])}}return c.type==="PUBLIC"?n[d]:null}function l(c,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(){const t=hF(cF);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:TD,extendNamespace:e,createSubscribe:Sb,ErrorFactory:ar,deepExtend:up};function e(n){up(t,n)}return t}const dF=TD();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=new Sd("@firebase/app-compat"),fF="@firebase/app-compat",mF="0.5.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(t){yn(fF,mF,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=wb();if(t.firebase!==void 0){$S.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&$S.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Gt=dF;pF();var gF="firebase",yF="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gt.registerVersion(gF,yF,"app-compat");const cu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Vo={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _F(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function ED(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vF=_F,wF=ED,AD=new ar("auth","Firebase",ED());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp=new Sd("@firebase/auth");function bF(t,...e){dp.logLevel<=fe.WARN&&dp.warn(`Auth (${yi}): ${t}`,...e)}function dm(t,...e){dp.logLevel<=fe.ERROR&&dp.error(`Auth (${yi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t,...e){throw kb(t,...e)}function Ct(t,...e){return kb(t,...e)}function Db(t,e,n){const i={...wF(),[e]:n};return new ar("auth","Firebase",i).create(e,{appName:t.name})}function zt(t){return Db(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ac(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Xt(t,"argument-error"),Db(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kb(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return AD.create(t,...e)}function $(t,e,...n){if(!t)throw kb(e,...n)}function qi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw dm(e),new Error(e)}function xi(t,e){t||qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Ob(){return GS()==="http:"||GS()==="https:"}function GS(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ob()||Ib()||"connection"in navigator)?navigator.onLine:!0}function EF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xd=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,xi(n>e,"Short delay should be less than long delay!"),this.isMobile=rD()||gg()}get(){return TF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t,e){xi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ID=class{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],SF=new xd(3e4,6e4);function ut(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ht(t,e,n,i,r={}){return SD(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const o=ra({key:t.config.apiKey,...a}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return aD()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&sr(t.emulatorConfig.host)&&(c.credentials="include"),ID.fetch()(await xD(t,t.config.apiHost,n,o),c)})}async function SD(t,e,n){t._canInitEmulator=!1;const i={...AF,...e};try{const r=new RF(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Su(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Su(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Su(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Su(t,"user-disabled",a);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Db(t,h,c);Xt(t,h)}}catch(r){if(r instanceof jt)throw r;Xt(t,"network-request-failed",{message:String(r)})}}async function Br(t,e,n,i,r={}){const s=await ht(t,e,n,i,r);return"mfaPendingCredential"in s&&Xt(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function xD(t,e,n,i){const r=`${e}${n}?${i}`,s=t,a=s.config.emulator?Vb(t.config,r):`${t.config.apiScheme}://${r}`;return IF.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function xF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}let RF=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ct(this.auth,"network-request-failed")),SF.get())})}};function Su(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ct(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(t){return t!==void 0&&t.getResponse!==void 0}function WS(t){return t!==void 0&&t.enterprise!==void 0}class RD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return xF(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CF(t){return(await ht(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function CD(t,e){return ht(t,"GET","/v2/recaptchaConfig",ut(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PF(t,e){return ht(t,"POST","/v1/accounts:delete",e)}async function NF(t,e){return ht(t,"POST","/v1/accounts:update",e)}async function fp(t,e){return ht(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DF(t,e=!1){const n=Z(t),i=await n.getIdToken(e),r=yg(i);$(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Zu(w_(r.auth_time)),issuedAtTime:Zu(w_(r.iat)),expirationTime:Zu(w_(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function w_(t){return Number(t)*1e3}function yg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return dm("JWT malformed, contained fewer than 3 sections"),null;try{const r=mg(n);return r?JSON.parse(r):(dm("Failed to decode base64 JWT payload"),null)}catch(r){return dm("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function QS(t){const e=yg(t);return $(e,"internal-error"),$(typeof e.exp<"u","internal-error"),$(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mr(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof jt&&kF(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function kF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OF=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a0=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zu(this.lastLoginAt),this.creationTime=Zu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fh(t){var d;const e=t.auth,n=await t.getIdToken(),i=await Mr(t,fp(e,{idToken:n}));$(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const s=(d=r.providerUserInfo)!=null&&d.length?PD(r.providerUserInfo):[],a=MF(t.providerData,s),o=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),c=o?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new a0(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function VF(t){const e=Z(t);await Fh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MF(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function PD(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LF(t,e){const n=await SD(t,{},async()=>{const i=ra({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=await xD(t,r,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:i};return t.emulatorConfig&&sr(t.emulatorConfig.host)&&(l.credentials="include"),ID.fetch()(a,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function UF(t,e){return ht(t,"POST","/v2/accounts:revokeToken",ut(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b_=class o0{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$(e.idToken,"internal-error"),$(typeof e.idToken<"u","internal-error"),$(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):QS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){$(e.length!==0,"internal-error");const n=QS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:($(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await LF(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new o0;return i&&($(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&($(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&($(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new o0,this.toJSON())}_performRefresh(){return qi("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(t,e){$(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}let ul=class xu{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new OF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new a0(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Mr(this,this.stsTokenManager.getToken(this.auth,e));return $(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return DF(this,e)}reload(){return VF(this)}_assign(e){this!==e&&($(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xu({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Fh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Se(this.auth.app))return Promise.reject(zt(this.auth));const e=await this.getIdToken();return await Mr(this,PF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:g,providerData:b,stsTokenManager:E}=n;$(d&&E,e,"internal-error");const x=b_.fromJSON(this.name,E);$(typeof d=="string",e,"internal-error"),is(i,e.name),is(r,e.name),$(typeof f=="boolean",e,"internal-error"),$(typeof g=="boolean",e,"internal-error"),is(s,e.name),is(a,e.name),is(o,e.name),is(l,e.name),is(c,e.name),is(h,e.name);const w=new xu({uid:d,auth:e,email:r,emailVerified:f,displayName:i,isAnonymous:g,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:x,createdAt:c,lastLoginAt:h});return b&&Array.isArray(b)&&(w.providerData=b.map(v=>({...v}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,n,i=!1){const r=new b_;r.updateFromServerResponse(n);const s=new xu({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Fh(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];$(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?PD(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),o=new b_;o.updateFromIdToken(i);const l=new xu({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new a0(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=new Map;function Fn(t){xi(t instanceof Function,"Expected a class definition");let e=YS.get(t);return e?(xi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,YS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ND=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}};ND.type="NONE";const ql=ND;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t,e,n){return`firebase:${t}:${e}:${n}`}let XS=class fm{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Ka(this.userKey,r.apiKey,s),this.fullPersistenceKey=Ka("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await fp(this.auth,{idToken:e}).catch(()=>{});return n?ul._fromGetAccountInfoResponse(this.auth,n,e):null}return ul._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new fm(Fn(ql),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||Fn(ql);const a=Ka(i,e.config.apiKey,e.name);let o=null;for(const c of n)try{const h=await c._get(a);if(h){let d;if(typeof h=="string"){const f=await fp(e,{idToken:h}).catch(()=>{});if(!f)break;d=await ul._fromGetAccountInfoResponse(e,f,h)}else d=ul._fromJSON(e,h);c!==s&&(o=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new fm(s,e,i):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new fm(s,e,i))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MD(e))return"Blackberry";if(LD(e))return"Webos";if(kD(e))return"Safari";if((e.includes("chrome/")||OD(e))&&!e.includes("edge/"))return"Chrome";if(Rd(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function DD(t=Ee()){return/firefox\//i.test(t)}function kD(t=Ee()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OD(t=Ee()){return/crios\//i.test(t)}function VD(t=Ee()){return/iemobile/i.test(t)}function Rd(t=Ee()){return/android/i.test(t)}function MD(t=Ee()){return/blackberry/i.test(t)}function LD(t=Ee()){return/webos/i.test(t)}function Cd(t=Ee()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function jF(t=Ee()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function zF(t=Ee()){var e;return Cd(t)&&!!((e=window.navigator)!=null&&e.standalone)}function FF(){return oD()&&document.documentMode===10}function UD(t=Ee()){return Cd(t)||Rd(t)||LD(t)||MD(t)||/windows phone/i.test(t)||VD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t,e=[]){let n;switch(t){case"Browser":n=JS(Ee());break;case"Worker":n=`${JS(Ee())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yi}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BF=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qF(t,e={}){return ht(t,"GET","/v2/passwordPolicy",ut(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF=6;let $F=class{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??HF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GF=class{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ZS(this),this.idTokenSubscription=new ZS(this),this.beforeStateQueue=new BF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fn(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await XS.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await fp(this,{idToken:e}),i=await ul._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Se(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return $(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Se(this.app))return Promise.reject(zt(this));const n=e?Z(e):null;return n&&$(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&$(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Se(this.app)?Promise.reject(zt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Se(this.app)?Promise.reject(zt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qF(this),n=new $F(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ar("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await UF(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fn(e)||this._popupRedirectResolver;$(n,this,"argument-error"),this.redirectPersistenceManager=await XS.create(this,[Fn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if($(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(Se(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&bF(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}};function it(t){return Z(t)}let ZS=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Sb(n=>this.observer=n)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KF(t){Pd=t}function Mb(t){return Pd.loadJS(t)}function WF(){return Pd.recaptchaV2Script}function QF(){return Pd.recaptchaEnterpriseScript}function YF(){return Pd.gapiScript}function zD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF=500,JF=6e4,Df=1e12;class ZF{constructor(e){this.auth=e,this.counter=Df,this._widgets=new Map}render(e,n){const i=this.counter;return this._widgets.set(i,new nB(e,this.auth.name,n||{})),this.counter++,i}reset(e){var i;const n=e||Df;(i=this._widgets.get(n))==null||i.delete(),this._widgets.delete(n)}getResponse(e){var i;const n=e||Df;return((i=this._widgets.get(n))==null?void 0:i.getResponse())||""}async execute(e){var i;const n=e||Df;return(i=this._widgets.get(n))==null||i.execute(),""}}class eB{constructor(){this.enterprise=new tB}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class tB{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class nB{constructor(e,n,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;$(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=iB(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},JF)},XF))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function iB(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const rB="recaptcha-enterprise",eh="NO_RECAPTCHA";class FD{constructor(e){this.type=rB,this.auth=it(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{CD(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new RD(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function r(s,a,o){const l=window.grecaptcha;WS(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{a(c)}).catch(()=>{a(eh)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eB().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{i(this.auth).then(o=>{if(!n&&WS(window.grecaptcha))r(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=QF();l.length!==0&&(l+=o),Mb(l).then(()=>{r(o,s,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function uu(t,e,n,i=!1,r=!1){const s=new FD(t);let a;if(r)a=eh;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,c=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return i?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Vs(t,e,n,i,r){var s,a;if(r==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await uu(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await uu(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(o)});else if(r==="PHONE_PROVIDER")if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("PHONE_PROVIDER")){const o=await uu(t,e,n);return i(t,o).catch(async l=>{var c;if(((c=t._getRecaptchaConfig())==null?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await uu(t,e,n,!1,!0);return i(t,h)}return Promise.reject(l)})}else{const o=await uu(t,e,n,!1,!0);return i(t,o)}else return Promise.reject(r+" provider is not supported.")}async function sB(t){const e=it(t),n=await CD(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new RD(n);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new FD(e).verify()}function aB(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Fn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function oB(t,e,n){const i=it(t);$(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),s=BD(e),{host:a,port:o}=lB(e),l=o===null?"":`:${o}`,c={url:`${s}//${a}${l}/`},h=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){$(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),$(qs(c,i.config.emulator)&&qs(h,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,sr(a)?(Eb(`${s}//${a}${l}`),Ab("Auth",!0)):r||cB()}function BD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lB(t){const e=BD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:e1(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:e1(a)}}}function e1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function cB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qi("not implemented")}_getIdTokenResponse(e){return qi("not implemented")}_linkToIdToken(e,n){return qi("not implemented")}_getReauthenticationResolver(e){return qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qD(t,e){return ht(t,"POST","/v1/accounts:resetPassword",ut(t,e))}async function uB(t,e){return ht(t,"POST","/v1/accounts:update",e)}async function hB(t,e){return ht(t,"POST","/v1/accounts:signUp",e)}async function dB(t,e){return ht(t,"POST","/v1/accounts:update",ut(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fB(t,e){return Br(t,"POST","/v1/accounts:signInWithPassword",ut(t,e))}async function _g(t,e){return ht(t,"POST","/v1/accounts:sendOobCode",ut(t,e))}async function mB(t,e){return _g(t,e)}async function pB(t,e){return _g(t,e)}async function gB(t,e){return _g(t,e)}async function yB(t,e){return _g(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _B(t,e){return Br(t,"POST","/v1/accounts:signInWithEmailLink",ut(t,e))}async function vB(t,e){return Br(t,"POST","/v1/accounts:signInWithEmailLink",ut(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh extends Ic{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Bh(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Bh(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vs(e,n,"signInWithPassword",fB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return _B(e,{email:this._email,oobCode:this._password});default:Xt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vs(e,i,"signUpPassword",hB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return vB(e,{idToken:n,email:this._email,oobCode:this._password});default:Xt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ir(t,e){return Br(t,"POST","/v1/accounts:signInWithIdp",ut(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wB="http://localhost";class er extends Ic{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new er(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new er(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ir(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ir(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ir(e,n)}buildRequest(){const e={requestUri:wB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ra(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t1(t,e){return ht(t,"POST","/v1/accounts:sendVerificationCode",ut(t,e))}async function bB(t,e){return Br(t,"POST","/v1/accounts:signInWithPhoneNumber",ut(t,e))}async function TB(t,e){const n=await Br(t,"POST","/v1/accounts:signInWithPhoneNumber",ut(t,e));if(n.temporaryProof)throw Su(t,"account-exists-with-different-credential",n);return n}const EB={USER_NOT_FOUND:"user-not-found"};async function AB(t,e){const n={...e,operation:"REAUTH"};return Br(t,"POST","/v1/accounts:signInWithPhoneNumber",ut(t,n),EB)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa extends Ic{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Wa({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Wa({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return bB(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return TB(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return AB(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s}=e;return!i&&!n&&!r&&!s?null:new Wa({verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SB(t){const e=cl(Iu(t)).link,n=e?cl(Iu(e)).deep_link_id:null,i=cl(Iu(t)).deep_link_id;return(i?cl(Iu(i)).link:null)||i||n||e||t}class vg{constructor(e){const n=cl(Iu(e)),i=n.apiKey??null,r=n.oobCode??null,s=IB(n.mode??null);$(i&&r&&s,"argument-error"),this.apiKey=i,this.operation=s,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=SB(e);try{return new vg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this.providerId=sa.PROVIDER_ID}static credential(e,n){return Bh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=vg.parseLink(n);return $(i,"argument-error"),Bh._fromEmailAndCode(e,i.code,i.tenantId)}}sa.PROVIDER_ID="password";sa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends qr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class El extends Sc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return $("providerId"in n&&"signInMethod"in n,"argument-error"),er._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return $(e.idToken||e.accessToken,"argument-error"),er._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return El.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return El.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:s,nonce:a,providerId:o}=e;if(!i&&!r&&!n&&!s||!o)return null;try{return new El(o)._credential({idToken:n,accessToken:i,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Sc{constructor(){super("facebook.com")}static credential(e){return er._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vi.credential(e.oauthAccessToken)}catch{return null}}}Vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Sc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return er._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Mi.credential(n,i)}catch{return null}}}Mi.GOOGLE_SIGN_IN_METHOD="google.com";Mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Sc{constructor(){super("github.com")}static credential(e){return er._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.GITHUB_SIGN_IN_METHOD="github.com";Li.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB="http://localhost";class Hl extends Ic{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Ir(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ir(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ir(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,pendingToken:s}=n;return!i||!r||!s||i!==r?null:new Hl(i,s)}static _create(e,n){return new Hl(e,n)}buildRequest(){return{requestUri:xB,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB="saml.";class mp extends qr{constructor(e){$(e.startsWith(RB),"argument-error"),super(e)}static credentialFromResult(e){return mp.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return mp.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Hl.fromJSON(e);return $(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:i}=e;if(!n||!i)return null;try{return Hl._create(i,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Sc{constructor(){super("twitter.com")}static credential(e,n){return er._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ui.credential(n,i)}catch{return null}}}Ui.TWITTER_SIGN_IN_METHOD="twitter.com";Ui.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(t,e){return Br(t,"POST","/v1/accounts:signUp",ut(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await ul._fromIdTokenResponse(e,i,r),a=n1(i);return new pi({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=n1(i);return new pi({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function n1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CB(t){var r;if(Se(t.app))return Promise.reject(zt(t));const e=it(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new pi({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await HD(e,{returnSecureToken:!0}),i=await pi._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp extends jt{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,pp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new pp(e,n,i,r)}}function $D(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?pp._fromErrorAndOperation(t,s,e,i):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PB(t,e){const n=Z(t);await wg(!0,n,e);const{providerUserInfo:i}=await NF(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),r=GD(i||[]);return n.providerData=n.providerData.filter(s=>r.has(s.providerId)),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Lb(t,e,n=!1){const i=await Mr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return pi._forOperation(t,"link",i)}async function wg(t,e,n){await Fh(e);const i=GD(e.providerData),r=t===!1?"provider-already-linked":"no-such-provider";$(i.has(n)===t,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(t,e,n=!1){const{auth:i}=t;if(Se(i.app))return Promise.reject(zt(i));const r="reauthenticate";try{const s=await Mr(t,$D(i,r,e,t),n);$(s.idToken,i,"internal-error");const a=yg(s.idToken);$(a,i,"internal-error");const{sub:o}=a;return $(t.uid===o,i,"user-mismatch"),pi._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Xt(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(t,e,n=!1){if(Se(t.app))return Promise.reject(zt(t));const i="signIn",r=await $D(t,i,e),s=await pi._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function bg(t,e){return WD(it(t),e)}async function QD(t,e){const n=Z(t);return await wg(!1,n,e.providerId),Lb(n,e)}async function YD(t,e){return KD(Z(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NB(t,e){return Br(t,"POST","/v1/accounts:signInWithCustomToken",ut(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DB(t,e){if(Se(t.app))return Promise.reject(zt(t));const n=it(t),i=await NB(n,{token:e,returnSecureToken:!0}),r=await pi._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Ub._fromServerResponse(e,n):"totpInfo"in n?jb._fromServerResponse(e,n):Xt(e,"internal-error")}}class Ub extends Nd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Ub(n)}}class jb extends Nd{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new jb(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(t,e,n){var i;$(((i=n.url)==null?void 0:i.length)>0,t,"invalid-continue-uri"),$(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),$(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&($(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&($(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zb(t){const e=it(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function kB(t,e,n){const i=it(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Tg(i,r,n),await Vs(i,r,"getOobCode",pB,"EMAIL_PASSWORD_PROVIDER")}async function OB(t,e,n){await qD(Z(t),{oobCode:e,newPassword:n}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&zb(t),i})}async function VB(t,e){await dB(Z(t),{oobCode:e})}async function XD(t,e){const n=Z(t),i=await qD(n,{oobCode:e}),r=i.requestType;switch($(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(i.mfaInfo,n,"internal-error");default:$(i.email,n,"internal-error")}let s=null;return i.mfaInfo&&(s=Nd._fromServerResponse(it(n),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:s},operation:r}}async function MB(t,e){const{data:n}=await XD(Z(t),e);return n.email}async function LB(t,e,n){if(Se(t.app))return Promise.reject(zt(t));const i=it(t),a=await Vs(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HD,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&zb(t),l}),o=await pi._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(o.user),o}function UB(t,e,n){return Se(t.app)?Promise.reject(zt(t)):bg(Z(t),sa.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&zb(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jB(t,e,n){const i=it(t),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(a,o){$(o.handleCodeInApp,i,"argument-error"),o&&Tg(i,a,o)}s(r,n),await Vs(i,r,"getOobCode",gB,"EMAIL_PASSWORD_PROVIDER")}function zB(t,e){const n=vg.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function FB(t,e,n){if(Se(t.app))return Promise.reject(zt(t));const i=Z(t),r=sa.credentialWithLink(e,n||zh());return $(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),bg(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BB(t,e){return ht(t,"POST","/v1/accounts:createAuthUri",ut(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qB(t,e){const n=Ob()?zh():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:r}=await BB(Z(t),i);return r||[]}async function HB(t,e){const n=Z(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Tg(n.auth,r,e);const{email:s}=await mB(n.auth,r);s!==t.email&&await t.reload()}async function $B(t,e,n){const i=Z(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Tg(i.auth,s,n);const{email:a}=await yB(i.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GB(t,e){return ht(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KB(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=Z(t),s={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Mr(i,GB(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find(({providerId:l})=>l==="password");o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function WB(t,e){const n=Z(t);return Se(n.auth.app)?Promise.reject(zt(n.auth)):JD(n,e,null)}function QB(t,e){return JD(Z(t),null,e)}async function JD(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const a=await Mr(t,uB(i,s));await t._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YB(t){var r,s;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},i=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const a=(s=(r=yg(t.idToken))==null?void 0:r.firebase)==null?void 0:s.sign_in_provider;if(a){const o=a!=="anonymous"&&a!=="custom"?a:null;return new Al(i,o)}}if(!e)return null;switch(e){case"facebook.com":return new XB(i,n);case"github.com":return new JB(i,n);case"google.com":return new ZB(i,n);case"twitter.com":return new eq(i,n,t.screenName||null);case"custom":case"anonymous":return new Al(i,null);default:return new Al(i,e,n)}}class Al{constructor(e,n,i={}){this.isNewUser=e,this.providerId=n,this.profile=i}}class ZD extends Al{constructor(e,n,i,r){super(e,n,i),this.username=r}}class XB extends Al{constructor(e,n){super(e,"facebook.com",n)}}class JB extends ZD{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class ZB extends Al{constructor(e,n){super(e,"google.com",n)}}class eq extends ZD{constructor(e,n,i){super(e,"twitter.com",n,i)}}function tq(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:YB(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n,i){this.type=e,this.credential=n,this.user=i}static _fromIdtoken(e,n){return new Ma("enroll",e,n)}static _fromMfaPendingCredential(e){return new Ma("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,i;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return Ma._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((i=e.multiFactorSession)!=null&&i.idToken)return Ma._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,n,i){this.session=e,this.hints=n,this.signInResolver=i}static _fromError(e,n){const i=it(e),r=n.customData._serverResponse,s=(r.mfaInfo||[]).map(o=>Nd._fromServerResponse(i,o));$(r.mfaPendingCredential,i,"internal-error");const a=Ma._fromMfaPendingCredential(r.mfaPendingCredential);return new Fb(a,s,async o=>{const l=await o._process(i,a);delete r.mfaInfo,delete r.mfaPendingCredential;const c={...r,idToken:l.idToken,refreshToken:l.refreshToken};switch(n.operationType){case"signIn":const h=await pi._fromIdTokenResponse(i,n.operationType,c);return await i._updateCurrentUser(h.user),h;case"reauthenticate":return $(n.user,i,"internal-error"),pi._forOperation(n.user,n.operationType,c);default:Xt(i,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function nq(t,e){var r;const n=Z(t),i=e;return $(e.customData.operationType,n,"argument-error"),$((r=i.customData._serverResponse)==null?void 0:r.mfaPendingCredential,n,"argument-error"),Fb._fromError(n,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(t,e){return ht(t,"POST","/v2/accounts/mfaEnrollment:start",ut(t,e))}function iq(t,e){return ht(t,"POST","/v2/accounts/mfaEnrollment:finalize",ut(t,e))}function rq(t,e){return ht(t,"POST","/v2/accounts/mfaEnrollment:withdraw",ut(t,e))}class Bb{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(i=>Nd._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new Bb(e)}async getSession(){return Ma._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const i=e,r=await this.getSession(),s=await Mr(this.user,i._process(this.user.auth,r,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const r=await Mr(this.user,rq(this.user.auth,{idToken:i,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(r),await this.user.reload()}catch(r){throw r}}}const T_=new WeakMap;function sq(t){const e=Z(t);return T_.has(e)||T_.set(e,Bb._fromUser(e)),T_.get(e)}const gp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gp,"1"),this.storage.removeItem(gp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aq=1e3,oq=10;class tk extends ek{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=UD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);FF()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,oq):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},aq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tk.type="LOCAL";const qb=tk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk extends ek{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}nk.type="SESSION";const io=nk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lq(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Eg(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const o=Array.from(a).map(async c=>c(n.origin,s)),l=await lq(o);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Eg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cq{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const c=Dd("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return window}function uq(t){vt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(){return typeof vt().WorkerGlobalScope<"u"&&typeof vt().importScripts=="function"}async function hq(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dq(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function fq(){return Hb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik="firebaseLocalStorageDb",mq=1,yp="firebaseLocalStorage",rk="fbase_key";class kd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ag(t,e){return t.transaction([yp],e?"readwrite":"readonly").objectStore(yp)}function pq(){const t=indexedDB.deleteDatabase(ik);return new kd(t).toPromise()}function l0(){const t=indexedDB.open(ik,mq);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(yp,{keyPath:rk})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(yp)?e(i):(i.close(),await pq(),e(await l0()))})})}async function r1(t,e,n){const i=Ag(t,!0).put({[rk]:e,value:n});return new kd(i).toPromise()}async function gq(t,e){const n=Ag(t,!1).get(e),i=await new kd(n).toPromise();return i===void 0?null:i.value}function s1(t,e){const n=Ag(t,!0).delete(e);return new kd(n).toPromise()}const yq=800,_q=3;class sk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await l0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>_q)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Eg._getInstance(fq()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await hq(),!this.activeServiceWorker)return;this.sender=new cq(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await l0();return await r1(e,gp,"1"),await s1(e,gp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>r1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>gq(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>s1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Ag(r,!1).getAll();return new kd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sk.type="LOCAL";const qh=sk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(t,e){return ht(t,"POST","/v2/accounts/mfaSignIn:start",ut(t,e))}function vq(t,e){return ht(t,"POST","/v2/accounts/mfaSignIn:finalize",ut(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=zD("rcb"),wq=new xd(3e4,6e4);class bq{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=vt().grecaptcha)!=null&&e.render)}load(e,n=""){return $(Tq(n),e,"argument-error"),this.shouldResolveImmediately(n)&&KS(vt().grecaptcha)?Promise.resolve(vt().grecaptcha):new Promise((i,r)=>{const s=vt().setTimeout(()=>{r(Ct(e,"network-request-failed"))},wq.get());vt()[E_]=()=>{vt().clearTimeout(s),delete vt()[E_];const o=vt().grecaptcha;if(!o||!KS(o)){r(Ct(e,"internal-error"));return}const l=o.render;o.render=(c,h)=>{const d=l(c,h);return this.counter++,d},this.hostLanguage=n,i(o)};const a=`${WF()}?${ra({onload:E_,render:"explicit",hl:n})}`;Mb(a).catch(()=>{clearTimeout(s),r(Ct(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=vt().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Tq(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class Eq{async load(e){return new ZF(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th="recaptcha",Aq={theme:"light",type:"image"};let Iq=class{constructor(e,n,i={...Aq}){this.parameters=i,this.type=th,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=it(e),this.isInvisible=this.parameters.size==="invisible",$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof n=="string"?document.getElementById(n):n;$(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Eq:new bq,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),i=n.getResponse(e);return i||new Promise(r=>{const s=a=>{a&&(this.tokenChangeListeners.delete(s),r(a))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(i=>i(n)),typeof e=="function")e(n);else if(typeof e=="string"){const i=vt()[e];typeof i=="function"&&i(n)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){$(Ob()&&!Hb(),this.auth,"internal-error"),await Sq(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await CF(this.auth);$(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function Sq(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Wa._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function xq(t,e,n){if(Se(t.app))return Promise.reject(zt(t));const i=it(t),r=await Ig(i,e,Z(n));return new $b(r,s=>bg(i,s))}async function Rq(t,e,n){const i=Z(t);await wg(!1,i,"phone");const r=await Ig(i.auth,e,Z(n));return new $b(r,s=>QD(i,s))}async function Cq(t,e,n){const i=Z(t);if(Se(i.auth.app))return Promise.reject(zt(i.auth));const r=await Ig(i.auth,e,Z(n));return new $b(r,s=>YD(i,s))}async function Ig(t,e,n){var i;if(!t._getRecaptchaConfig())try{await sB(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const s=r.session;if("phoneNumber"in r){$(s.type==="enroll",t,"internal-error");const a={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Vs(t,a,"mfaSmsEnrollment",async(h,d)=>{if(d.phoneEnrollmentInfo.captchaResponse===eh){$((n==null?void 0:n.type)===th,h,"argument-error");const f=await A_(h,d,n);return i1(h,f)}return i1(h,d)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{$(s.type==="signin",t,"internal-error");const a=((i=r.multiFactorHint)==null?void 0:i.uid)||r.multiFactorUid;$(a,t,"missing-multi-factor-info");const o={mfaPendingCredential:s.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Vs(t,o,"mfaSmsSignIn",async(d,f)=>{if(f.phoneSignInInfo.captchaResponse===eh){$((n==null?void 0:n.type)===th,d,"argument-error");const g=await A_(d,f,n);return a1(d,g)}return a1(d,f)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Vs(t,s,"sendVerificationCode",async(c,h)=>{if(h.captchaResponse===eh){$((n==null?void 0:n.type)===th,c,"argument-error");const d=await A_(c,h,n);return t1(c,d)}return t1(c,h)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{n==null||n._reset()}}async function Pq(t,e){const n=Z(t);if(Se(n.auth.app))return Promise.reject(zt(n.auth));await Lb(n,e)}async function A_(t,e,n){$(n.type===th,t,"argument-error");const i=await n.verify();$(typeof i=="string",t,"argument-error");const r={...e};if("phoneEnrollmentInfo"in r){const s=r.phoneEnrollmentInfo.phoneNumber,a=r.phoneEnrollmentInfo.captchaResponse,o=r.phoneEnrollmentInfo.clientType,l=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:i,captchaResponse:a,clientType:o,recaptchaVersion:l}}),r}else if("phoneSignInInfo"in r){const s=r.phoneSignInInfo.captchaResponse,a=r.phoneSignInInfo.clientType,o=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:s,clientType:a,recaptchaVersion:o}}),r}else return Object.assign(r,{recaptchaToken:i}),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ro=class mm{constructor(e){this.providerId=mm.PROVIDER_ID,this.auth=it(e)}verifyPhoneNumber(e,n){return Ig(this.auth,e,Z(n))}static credential(e,n){return Wa._fromVerification(e,n)}static credentialFromResult(e){const n=e;return mm.credentialFromTaggedObject(n)}static credentialFromError(e){return mm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?Wa._fromTokenResponse(n,i):null}};ro.PROVIDER_ID="phone";ro.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(t,e){return e?Fn(e):($(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb extends Ic{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ir(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ir(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ir(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Nq(t){return WD(t.auth,new Gb(t),t.bypassAuthState)}function Dq(t){const{auth:e,user:n}=t;return $(n,e,"internal-error"),KD(n,new Gb(t),t.bypassAuthState)}async function kq(t){const{auth:e,user:n}=t;return $(n,e,"internal-error"),Lb(n,new Gb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Nq;case"linkViaPopup":case"linkViaRedirect":return kq;case"reauthViaPopup":case"reauthViaRedirect":return Dq;default:Xt(this.auth,"internal-error")}}resolve(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oq=new xd(2e3,1e4);async function Vq(t,e,n){if(Se(t.app))return Promise.reject(Ct(t,"operation-not-supported-in-this-environment"));const i=it(t);Ac(t,e,qr);const r=Eo(i,n);return new _r(i,"signInViaPopup",e,r).executeNotNull()}async function Mq(t,e,n){const i=Z(t);if(Se(i.auth.app))return Promise.reject(Ct(i.auth,"operation-not-supported-in-this-environment"));Ac(i.auth,e,qr);const r=Eo(i.auth,n);return new _r(i.auth,"reauthViaPopup",e,r,i).executeNotNull()}async function Lq(t,e,n){const i=Z(t);Ac(i.auth,e,qr);const r=Eo(i.auth,n);return new _r(i.auth,"linkViaPopup",e,r,i).executeNotNull()}class _r extends ak{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,_r.currentPopupAction&&_r.currentPopupAction.cancel(),_r.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $(e,this.auth,"internal-error"),e}async onExecution(){xi(this.filter.length===1,"Popup operations only handle one event");const e=Dd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ct(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ct(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_r.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ct(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Oq.get())};e()}}_r.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uq="pendingRedirect",nh=new Map;class jq extends ak{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=nh.get(this.auth._key());if(!e){try{const i=await zq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}nh.set(this.auth._key(),e)}return this.bypassAuthState||nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zq(t,e){const n=lk(e),i=ok(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}async function Kb(t,e){return ok(t)._set(lk(e),"true")}function Fq(){nh.clear()}function Wb(t,e){nh.set(t._key(),e)}function ok(t){return Fn(t._redirectPersistence)}function lk(t){return Ka(Uq,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bq(t,e,n){return qq(t,e,n)}async function qq(t,e,n){if(Se(t.app))return Promise.reject(zt(t));const i=it(t);Ac(t,e,qr),await i._initializationPromise;const r=Eo(i,n);return await Kb(r,i),r._openRedirect(i,e,"signInViaRedirect")}function Hq(t,e,n){return $q(t,e,n)}async function $q(t,e,n){const i=Z(t);if(Ac(i.auth,e,qr),Se(i.auth.app))return Promise.reject(zt(i.auth));await i.auth._initializationPromise;const r=Eo(i.auth,n);await Kb(r,i.auth);const s=await ck(i);return r._openRedirect(i.auth,e,"reauthViaRedirect",s)}function Gq(t,e,n){return Kq(t,e,n)}async function Kq(t,e,n){const i=Z(t);Ac(i.auth,e,qr),await i.auth._initializationPromise;const r=Eo(i.auth,n);await wg(!1,i,e.providerId),await Kb(r,i.auth);const s=await ck(i);return r._openRedirect(i.auth,e,"linkViaRedirect",s)}async function Wq(t,e){return await it(t)._initializationPromise,Sg(t,e,!1)}async function Sg(t,e,n=!1){if(Se(t.app))return Promise.reject(zt(t));const i=it(t),r=Eo(i,e),a=await new jq(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}async function ck(t){const e=Dd(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qq=10*60*1e3;class uk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Yq(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!hk(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ct(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Qq&&this.cachedEventUids.clear(),this.cachedEventUids.has(o1(e))}saveEventToCache(e){this.cachedEventUids.add(o1(e)),this.lastProcessedEventTime=Date.now()}}function o1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function hk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Yq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(t,e={}){return ht(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jq=/^https?/;async function Zq(t){if(t.config.emulator)return;const{authorizedDomains:e}=await dk(t);for(const n of e)try{if(e8(n))return}catch{}Xt(t,"unauthorized-domain")}function e8(t){const e=zh(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!Jq.test(n))return!1;if(Xq.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8=new xd(3e4,6e4);function l1(){const t=vt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function n8(t){return new Promise((e,n)=>{var r,s,a;function i(){l1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{l1(),n(Ct(t,"network-request-failed"))},timeout:t8.get()})}if((s=(r=vt().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=vt().gapi)!=null&&a.load)i();else{const o=zD("iframefcb");return vt()[o]=()=>{gapi.load?i():n(Ct(t,"network-request-failed"))},Mb(`${YF()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw pm=null,e})}let pm=null;function i8(t){return pm=pm||n8(t),pm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8=new xd(5e3,15e3),s8="__/auth/iframe",a8="emulator/auth/iframe",o8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c8(t){const e=t.config;$(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Vb(e,a8):`https://${t.config.authDomain}/${s8}`,i={apiKey:e.apiKey,appName:t.name,v:yi},r=l8.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${ra(i).slice(1)}`}async function u8(t){const e=await i8(t),n=vt().gapi;return $(n,t,"internal-error"),e.open({where:document.body,url:c8(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o8,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Ct(t,"network-request-failed"),o=vt().setTimeout(()=>{s(a)},r8.get());function l(){vt().clearTimeout(o),r(i)}i.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},d8=500,f8=600,m8="_blank",p8="http://localhost";class c1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function g8(t,e,n,i=d8,r=f8){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const l={...h8,width:i.toString(),height:r.toString(),top:s,left:a},c=Ee().toLowerCase();n&&(o=OD(c)?m8:n),DD(c)&&(e=e||p8,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[g,b])=>`${f}${g}=${b},`,"");if(zF(c)&&o!=="_self")return y8(e||"",o),new c1(null);const d=window.open(e||"",o,h);$(d,t,"popup-blocked");try{d.focus()}catch{}return new c1(d)}function y8(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8="__/auth/handler",v8="emulator/auth/handler",w8=encodeURIComponent("fac");async function c0(t,e,n,i,r,s){$(t.config.authDomain,t,"auth-domain-config-required"),$(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:yi,eventId:r};if(e instanceof qr){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Kz(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(s||{}))a[h]=d}if(e instanceof Sc){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const l=await t._getAppCheckToken(),c=l?`#${w8}=${encodeURIComponent(l)}`:"";return`${b8(t)}?${ra(o).slice(1)}${c}`}function b8({config:t}){return t.emulator?Vb(t,v8):`https://${t.authDomain}/${_8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="webStorageSupport";class T8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=io,this._completeRedirectFn=Sg,this._overrideRedirectResult=Wb}async _openPopup(e,n,i,r){var a;xi((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await c0(e,n,i,zh(),r);return g8(e,s,Dd())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await c0(e,n,i,zh(),r);return uq(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(xi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await u8(e),i=new uk(e);return n.register("authEvent",r=>($(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(I_,{type:I_},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[I_];s!==void 0&&n(!!s),Xt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Zq(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return UD()||kD()||Cd()}}const E8=T8;class A8{constructor(e){this.factorId=e}_process(e,n,i){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,i);case"signin":return this._finalizeSignIn(e,n.credential);default:return qi("unexpected MultiFactorSessionType")}}}class Qb extends A8{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Qb(e)}_finalizeEnroll(e,n,i){return iq(e,{idToken:n,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return vq(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class fk{constructor(){}static assertion(e){return Qb._fromCredential(e)}}fk.FACTOR_ID="phone";var u1="@firebase/auth",h1="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I8=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x8(t){Si(new Dn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=i.options;$(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jD(t)},c=new GF(i,r,s,l);return aB(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Si(new Dn("auth-internal",e=>{const n=it(e.getProvider("auth").getImmediate());return(i=>new I8(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yn(u1,h1,S8(t)),yn(u1,h1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R8=5*60;nD("authIdTokenMaxAge");function C8(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}KF({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Ct("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",C8().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x8("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8=2e3;async function N8(t,e,n){const{BuildInfo:i}=so();xi(e.sessionId,"AuthEvent did not contain a session ID");const r=await M8(e.sessionId),s={};return Cd()?s.ibi=i.packageName:Rd()?s.apn=i.packageName:Xt(t,"operation-not-supported-in-this-environment"),i.displayName&&(s.appDisplayName=i.displayName),s.sessionId=r,c0(t,n,e.type,void 0,e.eventId??void 0,s)}async function D8(t){const{BuildInfo:e}=so(),n={};Cd()?n.iosBundleId=e.packageName:Rd()?n.androidPackageName=e.packageName:Xt(t,"operation-not-supported-in-this-environment"),await dk(t,n)}function k8(t){const{cordova:e}=so();return new Promise(n=>{e.plugins.browsertab.isAvailable(i=>{let r=null;i?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,jF()?"_blank":"_system","location=yes"),n(r)})})}async function O8(t,e,n){const{cordova:i}=so();let r=()=>{};try{await new Promise((s,a)=>{let o=null;function l(){var f;s();const d=(f=i.plugins.browsertab)==null?void 0:f.close;typeof d=="function"&&d(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){o||(o=window.setTimeout(()=>{a(Ct(t,"redirect-cancelled-by-user"))},P8))}function h(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),Rd()&&document.addEventListener("visibilitychange",h,!1),r=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",h,!1),o&&window.clearTimeout(o)}})}finally{r()}}function V8(t){var n,i,r,s,a,o,l,c,h,d;const e=so();$(typeof((n=e==null?void 0:e.universalLinks)==null?void 0:n.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(typeof((i=e==null?void 0:e.BuildInfo)==null?void 0:i.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$(typeof((a=(s=(r=e==null?void 0:e.cordova)==null?void 0:r.plugins)==null?void 0:s.browsertab)==null?void 0:a.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$(typeof((c=(l=(o=e==null?void 0:e.cordova)==null?void 0:o.plugins)==null?void 0:l.browsertab)==null?void 0:c.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$(typeof((d=(h=e==null?void 0:e.cordova)==null?void 0:h.InAppBrowser)==null?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function M8(t){const e=L8(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(r=>r.toString(16).padStart(2,"0")).join("")}function L8(t){if(xi(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U8=20;class j8 extends uk{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function z8(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:q8(),postBody:null,tenantId:t.tenantId,error:Ct(t,"no-auth-event")}}function F8(t,e){return u0()._set(h0(t),e)}async function d1(t){const e=await u0()._get(h0(t));return e&&await u0()._remove(h0(t)),e}function B8(t,e){var i,r;const n=$8(e);if(n.includes("/__/auth/callback")){const s=gm(n),a=s.firebaseError?H8(decodeURIComponent(s.firebaseError)):null,o=(r=(i=a==null?void 0:a.code)==null?void 0:i.split("auth/"))==null?void 0:r[1],l=o?Ct(o):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:n,postBody:null}}return null}function q8(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<U8;n++){const i=Math.floor(Math.random()*e.length);t.push(e.charAt(i))}return t.join("")}function u0(){return Fn(qb)}function h0(t){return Ka("authEvent",t.config.apiKey,t.name)}function H8(t){try{return JSON.parse(t)}catch{return null}}function $8(t){const e=gm(t),n=e.link?decodeURIComponent(e.link):void 0,i=gm(n).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return gm(r).link||r||i||n||t}function gm(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return cl(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8=500;class K8{constructor(){this._redirectPersistence=io,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Sg,this._overrideRedirectResult=Wb}async _initialize(e){const n=e._key();let i=this.eventManagers.get(n);return i||(i=new j8(e),this.eventManagers.set(n,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){Xt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,i,r){V8(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),Fq(),await this._originValidation(e);const a=z8(e,i,r);await F8(e,a);const o=await N8(e,a,n),l=await k8(o);return O8(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=D8(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:i,handleOpenURL:r,BuildInfo:s}=so(),a=setTimeout(async()=>{await d1(e),n.onEvent(f1())},G8),o=async h=>{clearTimeout(a);const d=await d1(e);let f=null;d&&(h!=null&&h.url)&&(f=B8(d,h.url)),n.onEvent(f||f1())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,o);const l=r,c=`${s.packageName.toLowerCase()}://`;so().handleOpenURL=async h=>{if(h.toLowerCase().startsWith(c)&&o({url:h}),typeof l=="function")try{l(h)}catch(d){console.error(d)}}}}const W8=K8;function f1(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ct("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8(t,e){it(t)._logFramework(e)}var Y8="@firebase/auth-compat",X8="0.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8=1e3;function ih(){var t;return((t=self==null?void 0:self.location)==null?void 0:t.protocol)||null}function Z8(){return ih()==="http:"||ih()==="https:"}function mk(t=Ee()){return!!((ih()==="file:"||ih()==="ionic:"||ih()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function e7(){return gg()||pg()}function t7(){return oD()&&(document==null?void 0:document.documentMode)===11}function n7(t=Ee()){return/Edge\/\d+/.test(t)}function i7(t=Ee()){return t7()||n7(t)}function pk(){try{const t=self.localStorage,e=Dd();if(t)return t.setItem(e,"1"),t.removeItem(e),i7()?Lh():!0}catch{return Yb()&&Lh()}return!1}function Yb(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function S_(){return(Z8()||Ib()||mk())&&!e7()&&pk()&&!Yb()}function gk(){return mk()&&typeof document<"u"}async function r7(){return gk()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},J8);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function s7(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un={LOCAL:"local",NONE:"none",SESSION:"session"},hu=$,yk="persistence";function a7(t,e){if(hu(Object.values(Un).includes(e),t,"invalid-persistence-type"),gg()){hu(e!==Un.SESSION,t,"unsupported-persistence-type");return}if(pg()){hu(e===Un.NONE,t,"unsupported-persistence-type");return}if(Yb()){hu(e===Un.NONE||e===Un.LOCAL&&Lh(),t,"unsupported-persistence-type");return}hu(e===Un.NONE||pk(),t,"unsupported-persistence-type")}async function d0(t){await t._initializationPromise;const e=_k(),n=Ka(yk,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistenceType())}function o7(t,e){const n=_k();if(!n)return[];const i=Ka(yk,t,e);switch(n.getItem(i)){case Un.NONE:return[ql];case Un.LOCAL:return[qh,io];case Un.SESSION:return[io];default:return[]}}function _k(){var t;try{return((t=s7())==null?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l7=$;class Ts{constructor(){this.browserResolver=Fn(E8),this.cordovaResolver=Fn(W8),this.underlyingResolver=null,this._redirectPersistence=io,this._completeRedirectFn=Sg,this._overrideRedirectResult=Wb}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,i,r)}async _openRedirect(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,i,r)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return gk()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return l7(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await r7();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(t){return t.unwrap()}function c7(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u7(t){return wk(t)}function h7(t,e){var i;const n=(i=e.customData)==null?void 0:i._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const r=e;r.resolver=new d7(t,nq(t,e))}else if(n){const r=wk(e),s=e;r&&(s.credential=r,s.tenantId=n.tenantId||void 0,s.email=n.email||void 0,s.phoneNumber=n.phoneNumber||void 0)}}function wk(t){const{_tokenResponse:e}=t instanceof jt?t.customData:t;if(!e)return null;if(!(t instanceof jt)&&"temporaryProof"in e&&"phoneNumber"in e)return ro.credentialFromResult(t);const n=e.providerId;if(!n||n===cu.PASSWORD)return null;let i;switch(n){case cu.GOOGLE:i=Mi;break;case cu.FACEBOOK:i=Vi;break;case cu.GITHUB:i=Li;break;case cu.TWITTER:i=Ui;break;default:const{oauthIdToken:r,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:o,nonce:l}=e;return!s&&!a&&!r&&!o?null:o?n.startsWith("saml.")?Hl._create(n,o):er._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:r,accessToken:s}):new El(n).credential({idToken:r,accessToken:s,rawNonce:l})}return t instanceof jt?i.credentialFromError(t):i.credentialFromResult(t)}function In(t,e){return e.catch(n=>{throw n instanceof jt&&h7(t,n),n}).then(n=>{const i=n.operationType,r=n.user;return{operationType:i,credential:u7(n),additionalUserInfo:tq(n),user:xg.getOrCreate(r)}})}async function f0(t,e){const n=await e;return{verificationId:n.verificationId,confirm:i=>In(t,n.confirm(i))}}class d7{constructor(e,n){this.resolver=n,this.auth=c7(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return In(vk(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xg=class Ru{constructor(e){this._delegate=e,this.multiFactor=sq(e)}static getOrCreate(e){return Ru.USER_MAP.has(e)||Ru.USER_MAP.set(e,new Ru(e)),Ru.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return In(this.auth,QD(this._delegate,e))}async linkWithPhoneNumber(e,n){return f0(this.auth,Rq(this._delegate,e,n))}async linkWithPopup(e){return In(this.auth,Lq(this._delegate,e,Ts))}async linkWithRedirect(e){return await d0(it(this.auth)),Gq(this._delegate,e,Ts)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return In(this.auth,YD(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return f0(this.auth,Cq(this._delegate,e,n))}reauthenticateWithPopup(e){return In(this.auth,Mq(this._delegate,e,Ts))}async reauthenticateWithRedirect(e){return await d0(it(this.auth)),Hq(this._delegate,e,Ts)}sendEmailVerification(e){return HB(this._delegate,e)}async unlink(e){return await PB(this._delegate,e),this}updateEmail(e){return WB(this._delegate,e)}updatePassword(e){return QB(this._delegate,e)}updatePhoneNumber(e){return Pq(this._delegate,e)}updateProfile(e){return KB(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return $B(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};xg.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=$;class m0{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;du(i,"invalid-api-key",{appName:e.name}),du(i,"invalid-api-key",{appName:e.name});const r=typeof window<"u"?Ts:void 0;this._delegate=n.initialize({options:{persistence:f7(i,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(vF),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?xg.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){oB(this._delegate,e,n)}applyActionCode(e){return VB(this._delegate,e)}checkActionCode(e){return XD(this._delegate,e)}confirmPasswordReset(e,n){return OB(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return In(this._delegate,LB(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return qB(this._delegate,e)}isSignInWithEmailLink(e){return zB(this._delegate,e)}async getRedirectResult(){du(S_(),this._delegate,"operation-not-supported-in-this-environment");const e=await Wq(this._delegate,Ts);return e?In(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){Q8(this._delegate,e)}onAuthStateChanged(e,n,i){const{next:r,error:s,complete:a}=m1(e,n,i);return this._delegate.onAuthStateChanged(r,s,a)}onIdTokenChanged(e,n,i){const{next:r,error:s,complete:a}=m1(e,n,i);return this._delegate.onIdTokenChanged(r,s,a)}sendSignInLinkToEmail(e,n){return jB(this._delegate,e,n)}sendPasswordResetEmail(e,n){return kB(this._delegate,e,n||void 0)}async setPersistence(e){a7(this._delegate,e);let n;switch(e){case Un.SESSION:n=io;break;case Un.LOCAL:n=await Fn(qh)._isAvailable()?qh:qb;break;case Un.NONE:n=ql;break;default:return Xt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return In(this._delegate,CB(this._delegate))}signInWithCredential(e){return In(this._delegate,bg(this._delegate,e))}signInWithCustomToken(e){return In(this._delegate,DB(this._delegate,e))}signInWithEmailAndPassword(e,n){return In(this._delegate,UB(this._delegate,e,n))}signInWithEmailLink(e,n){return In(this._delegate,FB(this._delegate,e,n))}signInWithPhoneNumber(e,n){return f0(this._delegate,xq(this._delegate,e,n))}async signInWithPopup(e){return du(S_(),this._delegate,"operation-not-supported-in-this-environment"),In(this._delegate,Vq(this._delegate,e,Ts))}async signInWithRedirect(e){return du(S_(),this._delegate,"operation-not-supported-in-this-environment"),await d0(this._delegate),Bq(this._delegate,e,Ts)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return MB(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}m0.Persistence=Un;function m1(t,e,n){let i=t;typeof t!="function"&&({next:i,error:e,complete:n}=t);const r=i;return{next:a=>r(a&&xg.getOrCreate(a)),error:e,complete:n}}function f7(t,e){const n=o7(t,e);if(typeof self<"u"&&!n.includes(qh)&&n.push(qh),typeof window<"u")for(const i of[qb,io])n.includes(i)||n.push(i);return n.includes(ql)||n.push(ql),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{static credential(e,n){return ro.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new ro(vk(Gt.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Xb.PHONE_SIGN_IN_METHOD=ro.PHONE_SIGN_IN_METHOD;Xb.PROVIDER_ID=ro.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m7=$;class p7{constructor(e,n,i=Gt.app()){var r;m7((r=i.options)==null?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Iq(i.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g7="auth-compat";function y7(t){t.INTERNAL.registerComponent(new Dn(g7,e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new m0(n,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Vo.EMAIL_SIGNIN,PASSWORD_RESET:Vo.PASSWORD_RESET,RECOVER_EMAIL:Vo.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Vo.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Vo.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Vo.VERIFY_EMAIL}},EmailAuthProvider:sa,FacebookAuthProvider:Vi,GithubAuthProvider:Li,GoogleAuthProvider:Mi,OAuthProvider:El,SAMLAuthProvider:mp,PhoneAuthProvider:Xb,PhoneMultiFactorGenerator:fk,RecaptchaVerifier:p7,TwitterAuthProvider:Ui,Auth:m0,AuthCredential:Ic,Error:jt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(Y8,X8)}y7(Gt);var p1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ms,bk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,T){function S(){}S.prototype=T.prototype,A.F=T.prototype,A.prototype=new S,A.prototype.constructor=A,A.D=function(R,D,O){for(var N=Array(arguments.length-2),q=2;q<arguments.length;q++)N[q-2]=arguments[q];return T.prototype[D].apply(R,N)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(A,T,S){S||(S=0);const R=Array(16);if(typeof T=="string")for(var D=0;D<16;++D)R[D]=T.charCodeAt(S++)|T.charCodeAt(S++)<<8|T.charCodeAt(S++)<<16|T.charCodeAt(S++)<<24;else for(D=0;D<16;++D)R[D]=T[S++]|T[S++]<<8|T[S++]<<16|T[S++]<<24;T=A.g[0],S=A.g[1],D=A.g[2];let O=A.g[3],N;N=T+(O^S&(D^O))+R[0]+3614090360&4294967295,T=S+(N<<7&4294967295|N>>>25),N=O+(D^T&(S^D))+R[1]+3905402710&4294967295,O=T+(N<<12&4294967295|N>>>20),N=D+(S^O&(T^S))+R[2]+606105819&4294967295,D=O+(N<<17&4294967295|N>>>15),N=S+(T^D&(O^T))+R[3]+3250441966&4294967295,S=D+(N<<22&4294967295|N>>>10),N=T+(O^S&(D^O))+R[4]+4118548399&4294967295,T=S+(N<<7&4294967295|N>>>25),N=O+(D^T&(S^D))+R[5]+1200080426&4294967295,O=T+(N<<12&4294967295|N>>>20),N=D+(S^O&(T^S))+R[6]+2821735955&4294967295,D=O+(N<<17&4294967295|N>>>15),N=S+(T^D&(O^T))+R[7]+4249261313&4294967295,S=D+(N<<22&4294967295|N>>>10),N=T+(O^S&(D^O))+R[8]+1770035416&4294967295,T=S+(N<<7&4294967295|N>>>25),N=O+(D^T&(S^D))+R[9]+2336552879&4294967295,O=T+(N<<12&4294967295|N>>>20),N=D+(S^O&(T^S))+R[10]+4294925233&4294967295,D=O+(N<<17&4294967295|N>>>15),N=S+(T^D&(O^T))+R[11]+2304563134&4294967295,S=D+(N<<22&4294967295|N>>>10),N=T+(O^S&(D^O))+R[12]+1804603682&4294967295,T=S+(N<<7&4294967295|N>>>25),N=O+(D^T&(S^D))+R[13]+4254626195&4294967295,O=T+(N<<12&4294967295|N>>>20),N=D+(S^O&(T^S))+R[14]+2792965006&4294967295,D=O+(N<<17&4294967295|N>>>15),N=S+(T^D&(O^T))+R[15]+1236535329&4294967295,S=D+(N<<22&4294967295|N>>>10),N=T+(D^O&(S^D))+R[1]+4129170786&4294967295,T=S+(N<<5&4294967295|N>>>27),N=O+(S^D&(T^S))+R[6]+3225465664&4294967295,O=T+(N<<9&4294967295|N>>>23),N=D+(T^S&(O^T))+R[11]+643717713&4294967295,D=O+(N<<14&4294967295|N>>>18),N=S+(O^T&(D^O))+R[0]+3921069994&4294967295,S=D+(N<<20&4294967295|N>>>12),N=T+(D^O&(S^D))+R[5]+3593408605&4294967295,T=S+(N<<5&4294967295|N>>>27),N=O+(S^D&(T^S))+R[10]+38016083&4294967295,O=T+(N<<9&4294967295|N>>>23),N=D+(T^S&(O^T))+R[15]+3634488961&4294967295,D=O+(N<<14&4294967295|N>>>18),N=S+(O^T&(D^O))+R[4]+3889429448&4294967295,S=D+(N<<20&4294967295|N>>>12),N=T+(D^O&(S^D))+R[9]+568446438&4294967295,T=S+(N<<5&4294967295|N>>>27),N=O+(S^D&(T^S))+R[14]+3275163606&4294967295,O=T+(N<<9&4294967295|N>>>23),N=D+(T^S&(O^T))+R[3]+4107603335&4294967295,D=O+(N<<14&4294967295|N>>>18),N=S+(O^T&(D^O))+R[8]+1163531501&4294967295,S=D+(N<<20&4294967295|N>>>12),N=T+(D^O&(S^D))+R[13]+2850285829&4294967295,T=S+(N<<5&4294967295|N>>>27),N=O+(S^D&(T^S))+R[2]+4243563512&4294967295,O=T+(N<<9&4294967295|N>>>23),N=D+(T^S&(O^T))+R[7]+1735328473&4294967295,D=O+(N<<14&4294967295|N>>>18),N=S+(O^T&(D^O))+R[12]+2368359562&4294967295,S=D+(N<<20&4294967295|N>>>12),N=T+(S^D^O)+R[5]+4294588738&4294967295,T=S+(N<<4&4294967295|N>>>28),N=O+(T^S^D)+R[8]+2272392833&4294967295,O=T+(N<<11&4294967295|N>>>21),N=D+(O^T^S)+R[11]+1839030562&4294967295,D=O+(N<<16&4294967295|N>>>16),N=S+(D^O^T)+R[14]+4259657740&4294967295,S=D+(N<<23&4294967295|N>>>9),N=T+(S^D^O)+R[1]+2763975236&4294967295,T=S+(N<<4&4294967295|N>>>28),N=O+(T^S^D)+R[4]+1272893353&4294967295,O=T+(N<<11&4294967295|N>>>21),N=D+(O^T^S)+R[7]+4139469664&4294967295,D=O+(N<<16&4294967295|N>>>16),N=S+(D^O^T)+R[10]+3200236656&4294967295,S=D+(N<<23&4294967295|N>>>9),N=T+(S^D^O)+R[13]+681279174&4294967295,T=S+(N<<4&4294967295|N>>>28),N=O+(T^S^D)+R[0]+3936430074&4294967295,O=T+(N<<11&4294967295|N>>>21),N=D+(O^T^S)+R[3]+3572445317&4294967295,D=O+(N<<16&4294967295|N>>>16),N=S+(D^O^T)+R[6]+76029189&4294967295,S=D+(N<<23&4294967295|N>>>9),N=T+(S^D^O)+R[9]+3654602809&4294967295,T=S+(N<<4&4294967295|N>>>28),N=O+(T^S^D)+R[12]+3873151461&4294967295,O=T+(N<<11&4294967295|N>>>21),N=D+(O^T^S)+R[15]+530742520&4294967295,D=O+(N<<16&4294967295|N>>>16),N=S+(D^O^T)+R[2]+3299628645&4294967295,S=D+(N<<23&4294967295|N>>>9),N=T+(D^(S|~O))+R[0]+4096336452&4294967295,T=S+(N<<6&4294967295|N>>>26),N=O+(S^(T|~D))+R[7]+1126891415&4294967295,O=T+(N<<10&4294967295|N>>>22),N=D+(T^(O|~S))+R[14]+2878612391&4294967295,D=O+(N<<15&4294967295|N>>>17),N=S+(O^(D|~T))+R[5]+4237533241&4294967295,S=D+(N<<21&4294967295|N>>>11),N=T+(D^(S|~O))+R[12]+1700485571&4294967295,T=S+(N<<6&4294967295|N>>>26),N=O+(S^(T|~D))+R[3]+2399980690&4294967295,O=T+(N<<10&4294967295|N>>>22),N=D+(T^(O|~S))+R[10]+4293915773&4294967295,D=O+(N<<15&4294967295|N>>>17),N=S+(O^(D|~T))+R[1]+2240044497&4294967295,S=D+(N<<21&4294967295|N>>>11),N=T+(D^(S|~O))+R[8]+1873313359&4294967295,T=S+(N<<6&4294967295|N>>>26),N=O+(S^(T|~D))+R[15]+4264355552&4294967295,O=T+(N<<10&4294967295|N>>>22),N=D+(T^(O|~S))+R[6]+2734768916&4294967295,D=O+(N<<15&4294967295|N>>>17),N=S+(O^(D|~T))+R[13]+1309151649&4294967295,S=D+(N<<21&4294967295|N>>>11),N=T+(D^(S|~O))+R[4]+4149444226&4294967295,T=S+(N<<6&4294967295|N>>>26),N=O+(S^(T|~D))+R[11]+3174756917&4294967295,O=T+(N<<10&4294967295|N>>>22),N=D+(T^(O|~S))+R[2]+718787259&4294967295,D=O+(N<<15&4294967295|N>>>17),N=S+(O^(D|~T))+R[9]+3951481745&4294967295,A.g[0]=A.g[0]+T&4294967295,A.g[1]=A.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,A.g[2]=A.g[2]+D&4294967295,A.g[3]=A.g[3]+O&4294967295}i.prototype.v=function(A,T){T===void 0&&(T=A.length);const S=T-this.blockSize,R=this.C;let D=this.h,O=0;for(;O<T;){if(D==0)for(;O<=S;)r(this,A,O),O+=this.blockSize;if(typeof A=="string"){for(;O<T;)if(R[D++]=A.charCodeAt(O++),D==this.blockSize){r(this,R),D=0;break}}else for(;O<T;)if(R[D++]=A[O++],D==this.blockSize){r(this,R),D=0;break}}this.h=D,this.o+=T},i.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var T=1;T<A.length-8;++T)A[T]=0;T=this.o*8;for(var S=A.length-8;S<A.length;++S)A[S]=T&255,T/=256;for(this.v(A),A=Array(16),T=0,S=0;S<4;++S)for(let R=0;R<32;R+=8)A[T++]=this.g[S]>>>R&255;return A};function s(A,T){var S=o;return Object.prototype.hasOwnProperty.call(S,A)?S[A]:S[A]=T(A)}function a(A,T){this.h=T;const S=[];let R=!0;for(let D=A.length-1;D>=0;D--){const O=A[D]|0;R&&O==T||(S[D]=O,R=!1)}this.g=S}var o={};function l(A){return-128<=A&&A<128?s(A,function(T){return new a([T|0],T<0?-1:0)}):new a([A|0],A<0?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return d;if(A<0)return x(c(-A));const T=[];let S=1;for(let R=0;A>=S;R++)T[R]=A/S|0,S*=4294967296;return new a(T,0)}function h(A,T){if(A.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(A.charAt(0)=="-")return x(h(A.substring(1),T));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=c(Math.pow(T,8));let R=d;for(let O=0;O<A.length;O+=8){var D=Math.min(8,A.length-O);const N=parseInt(A.substring(O,O+D),T);D<8?(D=c(Math.pow(T,D)),R=R.j(D).add(c(N))):(R=R.j(S),R=R.add(c(N)))}return R}var d=l(0),f=l(1),g=l(16777216);t=a.prototype,t.m=function(){if(E(this))return-x(this).m();let A=0,T=1;for(let S=0;S<this.g.length;S++){const R=this.i(S);A+=(R>=0?R:4294967296+R)*T,T*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(b(this))return"0";if(E(this))return"-"+x(this).toString(A);const T=c(Math.pow(A,6));var S=this;let R="";for(;;){const D=I(S,T).g;S=w(S,D.j(T));let O=((S.g.length>0?S.g[0]:S.h)>>>0).toString(A);if(S=D,b(S))return O+R;for(;O.length<6;)O="0"+O;R=O+R}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function b(A){if(A.h!=0)return!1;for(let T=0;T<A.g.length;T++)if(A.g[T]!=0)return!1;return!0}function E(A){return A.h==-1}t.l=function(A){return A=w(this,A),E(A)?-1:b(A)?0:1};function x(A){const T=A.g.length,S=[];for(let R=0;R<T;R++)S[R]=~A.g[R];return new a(S,~A.h).add(f)}t.abs=function(){return E(this)?x(this):this},t.add=function(A){const T=Math.max(this.g.length,A.g.length),S=[];let R=0;for(let D=0;D<=T;D++){let O=R+(this.i(D)&65535)+(A.i(D)&65535),N=(O>>>16)+(this.i(D)>>>16)+(A.i(D)>>>16);R=N>>>16,O&=65535,N&=65535,S[D]=N<<16|O}return new a(S,S[S.length-1]&-2147483648?-1:0)};function w(A,T){return A.add(x(T))}t.j=function(A){if(b(this)||b(A))return d;if(E(this))return E(A)?x(this).j(x(A)):x(x(this).j(A));if(E(A))return x(this.j(x(A)));if(this.l(g)<0&&A.l(g)<0)return c(this.m()*A.m());const T=this.g.length+A.g.length,S=[];for(var R=0;R<2*T;R++)S[R]=0;for(R=0;R<this.g.length;R++)for(let D=0;D<A.g.length;D++){const O=this.i(R)>>>16,N=this.i(R)&65535,q=A.i(D)>>>16,ne=A.i(D)&65535;S[2*R+2*D]+=N*ne,v(S,2*R+2*D),S[2*R+2*D+1]+=O*ne,v(S,2*R+2*D+1),S[2*R+2*D+1]+=N*q,v(S,2*R+2*D+1),S[2*R+2*D+2]+=O*q,v(S,2*R+2*D+2)}for(A=0;A<T;A++)S[A]=S[2*A+1]<<16|S[2*A];for(A=T;A<2*T;A++)S[A]=0;return new a(S,0)};function v(A,T){for(;(A[T]&65535)!=A[T];)A[T+1]+=A[T]>>>16,A[T]&=65535,T++}function _(A,T){this.g=A,this.h=T}function I(A,T){if(b(T))throw Error("division by zero");if(b(A))return new _(d,d);if(E(A))return T=I(x(A),T),new _(x(T.g),x(T.h));if(E(T))return T=I(A,x(T)),new _(x(T.g),T.h);if(A.g.length>30){if(E(A)||E(T))throw Error("slowDivide_ only works with positive integers.");for(var S=f,R=T;R.l(A)<=0;)S=k(S),R=k(R);var D=V(S,1),O=V(R,1);for(R=V(R,2),S=V(S,2);!b(R);){var N=O.add(R);N.l(A)<=0&&(D=D.add(S),O=N),R=V(R,1),S=V(S,1)}return T=w(A,D.j(T)),new _(D,T)}for(D=d;A.l(T)>=0;){for(S=Math.max(1,Math.floor(A.m()/T.m())),R=Math.ceil(Math.log(S)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),O=c(S),N=O.j(T);E(N)||N.l(A)>0;)S-=R,O=c(S),N=O.j(T);b(O)&&(O=f),D=D.add(O),A=w(A,N)}return new _(D,A)}t.B=function(A){return I(this,A).h},t.and=function(A){const T=Math.max(this.g.length,A.g.length),S=[];for(let R=0;R<T;R++)S[R]=this.i(R)&A.i(R);return new a(S,this.h&A.h)},t.or=function(A){const T=Math.max(this.g.length,A.g.length),S=[];for(let R=0;R<T;R++)S[R]=this.i(R)|A.i(R);return new a(S,this.h|A.h)},t.xor=function(A){const T=Math.max(this.g.length,A.g.length),S=[];for(let R=0;R<T;R++)S[R]=this.i(R)^A.i(R);return new a(S,this.h^A.h)};function k(A){const T=A.g.length+1,S=[];for(let R=0;R<T;R++)S[R]=A.i(R)<<1|A.i(R-1)>>>31;return new a(S,A.h)}function V(A,T){const S=T>>5;T%=32;const R=A.g.length-S,D=[];for(let O=0;O<R;O++)D[O]=T>0?A.i(O+S)>>>T|A.i(O+S+1)<<32-T:A.i(O+S);return new a(D,A.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,bk=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=h,Ms=a}).apply(typeof p1<"u"?p1:typeof self<"u"?self:typeof window<"u"?window:{});var kf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tk,Cu,Ek,ym,p0,Ak,Ik,Sk;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof kf=="object"&&kf];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function r(u,m){if(m)e:{var y=i;u=u.split(".");for(var P=0;P<u.length-1;P++){var L=u[P];if(!(L in y))break e;y=y[L]}u=u[u.length-1],P=y[u],m=m(P),m!=P&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}r("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(u){return u||function(m){var y=[],P;for(P in m)Object.prototype.hasOwnProperty.call(m,P)&&y.push([P,m[P]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function o(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function l(u,m,y){return u.call.apply(u.bind,arguments)}function c(u,m,y){return c=l,c.apply(null,arguments)}function h(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var P=y.slice();return P.push.apply(P,arguments),u.apply(this,P)}}function d(u,m){function y(){}y.prototype=m.prototype,u.Z=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Ob=function(P,L,j){for(var K=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)K[ue-2]=arguments[ue];return m.prototype[L].apply(P,K)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function g(u){const m=u.length;if(m>0){const y=Array(m);for(let P=0;P<m;P++)y[P]=u[P];return y}return[]}function b(u,m){for(let P=1;P<arguments.length;P++){const L=arguments[P];var y=typeof L;if(y=y!="object"?y:L?Array.isArray(L)?"array":y:"null",y=="array"||y=="object"&&typeof L.length=="number"){y=u.length||0;const j=L.length||0;u.length=y+j;for(let K=0;K<j;K++)u[y+K]=L[K]}else u.push(L)}}class E{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function x(u){a.setTimeout(()=>{throw u},0)}function w(){var u=A;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class v{constructor(){this.h=this.g=null}add(m,y){const P=_.get();P.set(m,y),this.h?this.h.next=P:this.g=P,this.h=P}}var _=new E(()=>new I,u=>u.reset());class I{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let k,V=!1,A=new v,T=()=>{const u=Promise.resolve(void 0);k=()=>{u.then(S)}};function S(){for(var u;u=w();){try{u.h.call(u.g)}catch(y){x(y)}var m=_;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}V=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};a.addEventListener("test",y,m),a.removeEventListener("test",y,m)}catch{}return u}();function N(u){return/^[\s\xa0]*$/.test(u)}function q(u,m){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}d(q,D),q.prototype.init=function(u,m){const y=this.type=u.type,P=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&q.Z.h.call(this)},q.prototype.h=function(){q.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ne="closure_listenable_"+(Math.random()*1e6|0),z=0;function Y(u,m,y,P,L){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!P,this.ha=L,this.key=++z,this.da=this.fa=!1}function J(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ie(u,m,y){for(const P in u)m.call(y,u[P],P,u)}function W(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function de(u){const m={};for(const y in u)m[y]=u[y];return m}const Dt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function It(u,m){let y,P;for(let L=1;L<arguments.length;L++){P=arguments[L];for(y in P)u[y]=P[y];for(let j=0;j<Dt.length;j++)y=Dt[j],Object.prototype.hasOwnProperty.call(P,y)&&(u[y]=P[y])}}function St(u){this.src=u,this.g={},this.h=0}St.prototype.add=function(u,m,y,P,L){const j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);const K=Co(u,m,P,L);return K>-1?(m=u[K],y||(m.fa=!1)):(m=new Y(m,this.src,j,!!P,L),m.fa=y,u.push(m)),m};function _i(u,m){const y=m.type;if(y in u.g){var P=u.g[y],L=Array.prototype.indexOf.call(P,m,void 0),j;(j=L>=0)&&Array.prototype.splice.call(P,L,1),j&&(J(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Co(u,m,y,P){for(let L=0;L<u.length;++L){const j=u[L];if(!j.da&&j.listener==m&&j.capture==!!y&&j.ha==P)return L}return-1}var Qr="closure_lm_"+(Math.random()*1e6|0),Uc={};function YE(u,m,y,P,L){if(Array.isArray(m)){for(let j=0;j<m.length;j++)YE(u,m[j],y,P,L);return null}return y=ZE(y),u&&u[ne]?u.J(m,y,o(P)?!!P.capture:!1,L):NU(u,m,y,!1,P,L)}function NU(u,m,y,P,L,j){if(!m)throw Error("Invalid event type");const K=o(L)?!!L.capture:!!L;let ue=hy(u);if(ue||(u[Qr]=ue=new St(u)),y=ue.add(m,y,P,K,j),y.proxy)return y;if(P=DU(),y.proxy=P,P.src=u,P.listener=y,u.addEventListener)O||(L=K),L===void 0&&(L=!1),u.addEventListener(m.toString(),P,L);else if(u.attachEvent)u.attachEvent(JE(m.toString()),P);else if(u.addListener&&u.removeListener)u.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return y}function DU(){function u(y){return m.call(u.src,u.listener,y)}const m=kU;return u}function XE(u,m,y,P,L){if(Array.isArray(m))for(var j=0;j<m.length;j++)XE(u,m[j],y,P,L);else P=o(P)?!!P.capture:!!P,y=ZE(y),u&&u[ne]?(u=u.i,j=String(m).toString(),j in u.g&&(m=u.g[j],y=Co(m,y,P,L),y>-1&&(J(m[y]),Array.prototype.splice.call(m,y,1),m.length==0&&(delete u.g[j],u.h--)))):u&&(u=hy(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Co(m,y,P,L)),(y=u>-1?m[u]:null)&&uy(y))}function uy(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ne])_i(m.i,u);else{var y=u.type,P=u.proxy;m.removeEventListener?m.removeEventListener(y,P,u.capture):m.detachEvent?m.detachEvent(JE(y),P):m.addListener&&m.removeListener&&m.removeListener(P),(y=hy(m))?(_i(y,u),y.h==0&&(y.src=null,m[Qr]=null)):J(u)}}}function JE(u){return u in Uc?Uc[u]:Uc[u]="on"+u}function kU(u,m){if(u.da)u=!0;else{m=new q(m,this);const y=u.listener,P=u.ha||u.src;u.fa&&uy(u),u=y.call(P,m)}return u}function hy(u){return u=u[Qr],u instanceof St?u:null}var dy="__closure_events_fn_"+(Math.random()*1e9>>>0);function ZE(u){return typeof u=="function"?u:(u[dy]||(u[dy]=function(m){return u.handleEvent(m)}),u[dy])}function Jt(){R.call(this),this.i=new St(this),this.M=this,this.G=null}d(Jt,R),Jt.prototype[ne]=!0,Jt.prototype.removeEventListener=function(u,m,y,P){XE(this,u,m,y,P)};function cn(u,m){var y,P=u.G;if(P)for(y=[];P;P=P.G)y.push(P);if(u=u.M,P=m.type||m,typeof m=="string")m=new D(m,u);else if(m instanceof D)m.target=m.target||u;else{var L=m;m=new D(P,u),It(m,L)}L=!0;let j,K;if(y)for(K=y.length-1;K>=0;K--)j=m.g=y[K],L=tf(j,P,!0,m)&&L;if(j=m.g=u,L=tf(j,P,!0,m)&&L,L=tf(j,P,!1,m)&&L,y)for(K=0;K<y.length;K++)j=m.g=y[K],L=tf(j,P,!1,m)&&L}Jt.prototype.N=function(){if(Jt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const y=u.g[m];for(let P=0;P<y.length;P++)J(y[P]);delete u.g[m],u.h--}}this.G=null},Jt.prototype.J=function(u,m,y,P){return this.i.add(String(u),m,!1,y,P)},Jt.prototype.K=function(u,m,y,P){return this.i.add(String(u),m,!0,y,P)};function tf(u,m,y,P){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let L=!0;for(let j=0;j<m.length;++j){const K=m[j];if(K&&!K.da&&K.capture==y){const ue=K.listener,xt=K.ha||K.src;K.fa&&_i(u.i,K),L=ue.call(xt,P)!==!1&&L}}return L&&!P.defaultPrevented}function OU(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:a.setTimeout(u,m||0)}function eA(u){u.g=OU(()=>{u.g=null,u.i&&(u.i=!1,eA(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class VU extends R{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:eA(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jc(u){R.call(this),this.h=u,this.g={}}d(jc,R);var tA=[];function nA(u){ie(u.g,function(m,y){this.g.hasOwnProperty(y)&&uy(m)},u),u.g={}}jc.prototype.N=function(){jc.Z.N.call(this),nA(this)},jc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fy=a.JSON.stringify,MU=a.JSON.parse,LU=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function iA(){}function rA(){}var zc={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function my(){D.call(this,"d")}d(my,D);function py(){D.call(this,"c")}d(py,D);var ma={},sA=null;function nf(){return sA=sA||new Jt}ma.Ia="serverreachability";function aA(u){D.call(this,ma.Ia,u)}d(aA,D);function Fc(u){const m=nf();cn(m,new aA(m))}ma.STAT_EVENT="statevent";function oA(u,m){D.call(this,ma.STAT_EVENT,u),this.stat=m}d(oA,D);function un(u){const m=nf();cn(m,new oA(m,u))}ma.Ja="timingevent";function lA(u,m){D.call(this,ma.Ja,u),this.size=m}d(lA,D);function Bc(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},m)}function qc(){this.g=!0}qc.prototype.ua=function(){this.g=!1};function UU(u,m,y,P,L,j){u.info(function(){if(u.g)if(j){var K="",ue=j.split("&");for(let Le=0;Le<ue.length;Le++){var xt=ue[Le].split("=");if(xt.length>1){const kt=xt[0];xt=xt[1];const Di=kt.split("_");K=Di.length>=2&&Di[1]=="type"?K+(kt+"="+xt+"&"):K+(kt+"=redacted&")}}}else K=null;else K=j;return"XMLHTTP REQ ("+P+") [attempt "+L+"]: "+m+`
`+y+`
`+K})}function jU(u,m,y,P,L,j,K){u.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+L+"]: "+m+`
`+y+`
`+j+" "+K})}function Po(u,m,y,P){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+FU(u,y)+(P?" "+P:"")})}function zU(u,m){u.info(function(){return"TIMEOUT: "+m})}qc.prototype.info=function(){};function FU(u,m){if(!u.g)return m;if(!m)return null;try{const j=JSON.parse(m);if(j){for(u=0;u<j.length;u++)if(Array.isArray(j[u])){var y=j[u];if(!(y.length<2)){var P=y[1];if(Array.isArray(P)&&!(P.length<1)){var L=P[0];if(L!="noop"&&L!="stop"&&L!="close")for(let K=1;K<P.length;K++)P[K]=""}}}}return fy(j)}catch{return m}}var rf={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},cA={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},uA;function gy(){}d(gy,iA),gy.prototype.g=function(){return new XMLHttpRequest},uA=new gy;function Hc(u){return encodeURIComponent(String(u))}function BU(u){var m=1;u=u.split(":");const y=[];for(;m>0&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function Yr(u,m,y,P){this.j=u,this.i=m,this.l=y,this.S=P||1,this.V=new jc(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new hA}function hA(){this.i=null,this.g="",this.h=!1}var dA={},yy={};function _y(u,m,y){u.M=1,u.A=af(Ni(m)),u.u=y,u.R=!0,fA(u,null)}function fA(u,m){u.F=Date.now(),sf(u),u.B=Ni(u.A);var y=u.B,P=u.S;Array.isArray(P)||(P=[String(P)]),SA(y.i,"t",P),u.C=0,y=u.j.L,u.h=new hA,u.g=HA(u.j,y?m:null,!u.u),u.P>0&&(u.O=new VU(c(u.Y,u,u.g),u.P)),m=u.V,y=u.g,P=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(tA[0]=L.toString()),L=tA);for(let j=0;j<L.length;j++){const K=YE(y,L[j],P||m.handleEvent,!1,m.h||m);if(!K)break;m.g[K.key]=K}m=u.J?de(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Fc(),UU(u.i,u.v,u.B,u.l,u.S,u.u)}Yr.prototype.ba=function(u){u=u.target;const m=this.O;m&&Zr(u)==3?m.j():this.Y(u)},Yr.prototype.Y=function(u){try{if(u==this.g)e:{const ue=Zr(this.g),xt=this.g.ya(),Le=this.g.ca();if(!(ue<3)&&(ue!=3||this.g&&(this.h.h||this.g.la()||kA(this.g)))){this.K||ue!=4||xt==7||(xt==8||Le<=0?Fc(3):Fc(2)),vy(this);var m=this.g.ca();this.X=m;var y=qU(this);if(this.o=m==200,jU(this.i,this.v,this.B,this.l,this.S,ue,m),this.o){if(this.U&&!this.L){t:{if(this.g){var P,L=this.g;if((P=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(P)){var j=P;break t}}j=null}if(u=j)Po(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wy(this,u);else{this.o=!1,this.m=3,un(12),pa(this),$c(this);break e}}if(this.R){u=!0;let kt;for(;!this.K&&this.C<y.length;)if(kt=HU(this,y),kt==yy){ue==4&&(this.m=4,un(14),u=!1),Po(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==dA){this.m=4,un(15),Po(this.i,this.l,y,"[Invalid Chunk]"),u=!1;break}else Po(this.i,this.l,kt,null),wy(this,kt);if(mA(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||y.length!=0||this.h.h||(this.m=1,un(16),u=!1),this.o=this.o&&u,!u)Po(this.i,this.l,y,"[Invalid Chunked Response]"),pa(this),$c(this);else if(y.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),Ry(K),K.P=!0,un(11))}}else Po(this.i,this.l,y,null),wy(this,y);ue==4&&pa(this),this.o&&!this.K&&(ue==4?zA(this.j,this):(this.o=!1,sf(this)))}else r4(this.g),m==400&&y.indexOf("Unknown SID")>0?(this.m=3,un(12)):(this.m=0,un(13)),pa(this),$c(this)}}}catch{}finally{}};function qU(u){if(!mA(u))return u.g.la();const m=kA(u.g);if(m==="")return"";let y="";const P=m.length,L=Zr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return pa(u),$c(u),"";u.h.i=new a.TextDecoder}for(let j=0;j<P;j++)u.h.h=!0,y+=u.h.i.decode(m[j],{stream:!(L&&j==P-1)});return m.length=0,u.h.g+=y,u.C=0,u.h.g}function mA(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function HU(u,m){var y=u.C,P=m.indexOf(`
`,y);return P==-1?yy:(y=Number(m.substring(y,P)),isNaN(y)?dA:(P+=1,P+y>m.length?yy:(m=m.slice(P,P+y),u.C=P+y,m)))}Yr.prototype.cancel=function(){this.K=!0,pa(this)};function sf(u){u.T=Date.now()+u.H,pA(u,u.H)}function pA(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Bc(c(u.aa,u),m)}function vy(u){u.D&&(a.clearTimeout(u.D),u.D=null)}Yr.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(zU(this.i,this.B),this.M!=2&&(Fc(),un(17)),pa(this),this.m=2,$c(this)):pA(this,this.T-u)};function $c(u){u.j.I==0||u.K||zA(u.j,u)}function pa(u){vy(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,nA(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function wy(u,m){try{var y=u.j;if(y.I!=0&&(y.g==u||by(y.h,u))){if(!u.L&&by(y.h,u)&&y.I==3){try{var P=y.Ba.g.parse(m)}catch{P=null}if(Array.isArray(P)&&P.length==3){var L=P;if(L[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<u.F)hf(y),cf(y);else break e;xy(y),un(18)}}else y.xa=L[1],0<y.xa-y.K&&L[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Bc(c(y.Va,y),6e3));_A(y.h)<=1&&y.ta&&(y.ta=void 0)}else ya(y,11)}else if((u.L||y.g==u)&&hf(y),!N(m))for(L=y.Ba.g.parse(m),m=0;m<L.length;m++){let Le=L[m];const kt=Le[0];if(!(kt<=y.K))if(y.K=kt,Le=Le[1],y.I==2)if(Le[0]=="c"){y.M=Le[1],y.ba=Le[2];const Di=Le[3];Di!=null&&(y.ka=Di,y.j.info("VER="+y.ka));const _a=Le[4];_a!=null&&(y.za=_a,y.j.info("SVER="+y.za));const es=Le[5];es!=null&&typeof es=="number"&&es>0&&(P=1.5*es,y.O=P,y.j.info("backChannelRequestTimeoutMs_="+P)),P=y;const ts=u.g;if(ts){const ff=ts.g?ts.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ff){var j=P.h;j.g||ff.indexOf("spdy")==-1&&ff.indexOf("quic")==-1&&ff.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Ty(j,j.h),j.h=null))}if(P.G){const Cy=ts.g?ts.g.getResponseHeader("X-HTTP-Session-Id"):null;Cy&&(P.wa=Cy,Be(P.J,P.G,Cy))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-u.F,y.j.info("Handshake RTT: "+y.T+"ms")),P=y;var K=u;if(P.na=qA(P,P.L?P.ba:null,P.W),K.L){vA(P.h,K);var ue=K,xt=P.O;xt&&(ue.H=xt),ue.D&&(vy(ue),sf(ue)),P.g=K}else UA(P);y.i.length>0&&uf(y)}else Le[0]!="stop"&&Le[0]!="close"||ya(y,7);else y.I==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?ya(y,7):Sy(y):Le[0]!="noop"&&y.l&&y.l.qa(Le),y.A=0)}}Fc(4)}catch{}}var $U=class{constructor(u,m){this.g=u,this.map=m}};function gA(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yA(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function _A(u){return u.h?1:u.g?u.g.size:0}function by(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Ty(u,m){u.g?u.g.add(m):u.h=m}function vA(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}gA.prototype.cancel=function(){if(this.i=wA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function wA(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.G);return m}return g(u.i)}var bA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GU(u,m){if(u){u=u.split("&");for(let y=0;y<u.length;y++){const P=u[y].indexOf("=");let L,j=null;P>=0?(L=u[y].substring(0,P),j=u[y].substring(P+1)):L=u[y],m(L,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Xr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Xr?(this.l=u.l,Gc(this,u.j),this.o=u.o,this.g=u.g,Kc(this,u.u),this.h=u.h,Ey(this,xA(u.i)),this.m=u.m):u&&(m=String(u).match(bA))?(this.l=!1,Gc(this,m[1]||"",!0),this.o=Wc(m[2]||""),this.g=Wc(m[3]||"",!0),Kc(this,m[4]),this.h=Wc(m[5]||"",!0),Ey(this,m[6]||"",!0),this.m=Wc(m[7]||"")):(this.l=!1,this.i=new Yc(null,this.l))}Xr.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Qc(m,TA,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Qc(m,TA,!0),"@"),u.push(Hc(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&u.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Qc(y,y.charAt(0)=="/"?QU:WU,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Qc(y,XU)),u.join("")},Xr.prototype.resolve=function(u){const m=Ni(this);let y=!!u.j;y?Gc(m,u.j):y=!!u.o,y?m.o=u.o:y=!!u.g,y?m.g=u.g:y=u.u!=null;var P=u.h;if(y)Kc(m,u.u);else if(y=!!u.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var L=m.h.lastIndexOf("/");L!=-1&&(P=m.h.slice(0,L+1)+P)}if(L=P,L==".."||L==".")P="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){P=L.lastIndexOf("/",0)==0,L=L.split("/");const j=[];for(let K=0;K<L.length;){const ue=L[K++];ue=="."?P&&K==L.length&&j.push(""):ue==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),P&&K==L.length&&j.push("")):(j.push(ue),P=!0)}P=j.join("/")}else P=L}return y?m.h=P:y=u.i.toString()!=="",y?Ey(m,xA(u.i)):y=!!u.m,y&&(m.m=u.m),m};function Ni(u){return new Xr(u)}function Gc(u,m,y){u.j=y?Wc(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Kc(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function Ey(u,m,y){m instanceof Yc?(u.i=m,JU(u.i,u.l)):(y||(m=Qc(m,YU)),u.i=new Yc(m,u.l))}function Be(u,m,y){u.i.set(m,y)}function af(u){return Be(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Wc(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qc(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,KU),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function KU(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var TA=/[#\/\?@]/g,WU=/[#\?:]/g,QU=/[#\?]/g,YU=/[#\?@]/g,XU=/#/g;function Yc(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function ga(u){u.g||(u.g=new Map,u.h=0,u.i&&GU(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=Yc.prototype,t.add=function(u,m){ga(this),this.i=null,u=No(this,u);let y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function EA(u,m){ga(u),m=No(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function AA(u,m){return ga(u),m=No(u,m),u.g.has(m)}t.forEach=function(u,m){ga(this),this.g.forEach(function(y,P){y.forEach(function(L){u.call(m,L,P,this)},this)},this)};function IA(u,m){ga(u);let y=[];if(typeof m=="string")AA(u,m)&&(y=y.concat(u.g.get(No(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)y=y.concat(u[m]);return y}t.set=function(u,m){return ga(this),this.i=null,u=No(this,u),AA(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=IA(this,u),u.length>0?String(u[0]):m):m};function SA(u,m,y){EA(u,m),y.length>0&&(u.i=null,u.g.set(No(u,m),g(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let P=0;P<m.length;P++){var y=m[P];const L=Hc(y);y=IA(this,y);for(let j=0;j<y.length;j++){let K=L;y[j]!==""&&(K+="="+Hc(y[j])),u.push(K)}}return this.i=u.join("&")};function xA(u){const m=new Yc;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function No(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function JU(u,m){m&&!u.j&&(ga(u),u.i=null,u.g.forEach(function(y,P){const L=P.toLowerCase();P!=L&&(EA(this,P),SA(this,L,y))},u)),u.j=m}function ZU(u,m){const y=new qc;if(a.Image){const P=new Image;P.onload=h(Jr,y,"TestLoadImage: loaded",!0,m,P),P.onerror=h(Jr,y,"TestLoadImage: error",!1,m,P),P.onabort=h(Jr,y,"TestLoadImage: abort",!1,m,P),P.ontimeout=h(Jr,y,"TestLoadImage: timeout",!1,m,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=u}else m(!1)}function e4(u,m){const y=new qc,P=new AbortController,L=setTimeout(()=>{P.abort(),Jr(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:P.signal}).then(j=>{clearTimeout(L),j.ok?Jr(y,"TestPingServer: ok",!0,m):Jr(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Jr(y,"TestPingServer: error",!1,m)})}function Jr(u,m,y,P,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),P(y)}catch{}}function t4(){this.g=new LU}function Ay(u){this.i=u.Sb||null,this.h=u.ab||!1}d(Ay,iA),Ay.prototype.g=function(){return new of(this.i,this.h)};function of(u,m){Jt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(of,Jt),t=of.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Jc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||a).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xc(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Jc(this)),this.g&&(this.readyState=3,Jc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;RA(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function RA(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Xc(this):Jc(this),this.readyState==3&&RA(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Xc(this))},t.Na=function(u){this.g&&(this.response=u,Xc(this))},t.ga=function(){this.g&&Xc(this)};function Xc(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Jc(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function Jc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(of.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function CA(u){let m="";return ie(u,function(y,P){m+=P,m+=":",m+=y,m+=`\r
`}),m}function Iy(u,m,y){e:{for(P in y){var P=!1;break e}P=!0}P||(y=CA(y),typeof u=="string"?y!=null&&Hc(y):Be(u,m,y))}function st(u){Jt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(st,Jt);var n4=/^https?$/i,i4=["POST","PUT"];t=st.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,y,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():uA.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){PA(this,j);return}if(u=y||"",y=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var L in P)y.set(L,P[L]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const j of P.keys())y.set(j,P.get(j));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(y.keys()).find(j=>j.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(Array.prototype.indexOf.call(i4,m,void 0)>=0)||P||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,K]of y)this.g.setRequestHeader(j,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(j){PA(this,j)}};function PA(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,NA(u),lf(u)}function NA(u){u.A||(u.A=!0,cn(u,"complete"),cn(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,cn(this,"complete"),cn(this,"abort"),lf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),lf(this,!0)),st.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?DA(this):this.Xa())},t.Xa=function(){DA(this)};function DA(u){if(u.h&&typeof s<"u"){if(u.v&&Zr(u)==4)setTimeout(u.Ca.bind(u),0);else if(cn(u,"readystatechange"),Zr(u)==4){u.h=!1;try{const j=u.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var P;if(P=j===0){let K=String(u.D).match(bA)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),P=!n4.test(K?K.toLowerCase():"")}y=P}if(y)cn(u,"complete"),cn(u,"success");else{u.o=6;try{var L=Zr(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",NA(u)}}finally{lf(u)}}}}function lf(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const y=u.g;u.g=null,m||cn(u,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Zr(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Zr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),MU(m)}};function kA(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function r4(u){const m={};u=(u.g&&Zr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<u.length;P++){if(N(u[P]))continue;var y=BU(u[P]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const j=m[L]||[];m[L]=j,j.push(y)}W(m,function(P){return P.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zc(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function OA(u){this.za=0,this.i=[],this.j=new qc,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Zc("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Zc("baseRetryDelayMs",5e3,u),this.Za=Zc("retryDelaySeedMs",1e4,u),this.Ta=Zc("forwardChannelMaxRetries",2,u),this.va=Zc("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new gA(u&&u.concurrentRequestLimit),this.Ba=new t4,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=OA.prototype,t.ka=8,t.I=1,t.connect=function(u,m,y,P){un(0),this.W=u,this.H=m||{},y&&P!==void 0&&(this.H.OSID=y,this.H.OAID=P),this.F=this.X,this.J=qA(this,null,this.W),uf(this)};function Sy(u){if(VA(u),u.I==3){var m=u.V++,y=Ni(u.J);if(Be(y,"SID",u.M),Be(y,"RID",m),Be(y,"TYPE","terminate"),eu(u,y),m=new Yr(u,u.j,m),m.M=2,m.A=af(Ni(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(m.A.toString(),"")}catch{}!y&&a.Image&&(new Image().src=m.A,y=!0),y||(m.g=HA(m.j,null),m.g.ea(m.A)),m.F=Date.now(),sf(m)}BA(u)}function cf(u){u.g&&(Ry(u),u.g.cancel(),u.g=null)}function VA(u){cf(u),u.v&&(a.clearTimeout(u.v),u.v=null),hf(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&a.clearTimeout(u.m),u.m=null)}function uf(u){if(!yA(u.h)&&!u.m){u.m=!0;var m=u.Ea;k||T(),V||(k(),V=!0),A.add(m,u),u.D=0}}function s4(u,m){return _A(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Bc(c(u.Ea,u,m),FA(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new Yr(this,this.j,u);let j=this.o;if(this.U&&(j?(j=de(j),It(j,this.U)):j=this.U),this.u!==null||this.R||(L.J=j,j=null),this.S)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var P=this.i[y];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(m+=P,m>4096){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=LA(this,L,m),y=Ni(this.J),Be(y,"RID",u),Be(y,"CVER",22),this.G&&Be(y,"X-HTTP-Session-Id",this.G),eu(this,y),j&&(this.R?m="headers="+Hc(CA(j))+"&"+m:this.u&&Iy(y,this.u,j)),Ty(this.h,L),this.Ra&&Be(y,"TYPE","init"),this.S?(Be(y,"$req",m),Be(y,"SID","null"),L.U=!0,_y(L,y,null)):_y(L,y,m),this.I=2}}else this.I==3&&(u?MA(this,u):this.i.length==0||yA(this.h)||MA(this))};function MA(u,m){var y;m?y=m.l:y=u.V++;const P=Ni(u.J);Be(P,"SID",u.M),Be(P,"RID",y),Be(P,"AID",u.K),eu(u,P),u.u&&u.o&&Iy(P,u.u,u.o),y=new Yr(u,u.j,y,u.D+1),u.u===null&&(y.J=u.o),m&&(u.i=m.G.concat(u.i)),m=LA(u,y,1e3),y.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Ty(u.h,y),_y(y,P,m)}function eu(u,m){u.H&&ie(u.H,function(y,P){Be(m,P,y)}),u.l&&ie({},function(y,P){Be(m,P,y)})}function LA(u,m,y){y=Math.min(u.i.length,y);const P=u.l?c(u.l.Ka,u.l,u):null;e:{var L=u.i;let ue=-1;for(;;){const xt=["count="+y];ue==-1?y>0?(ue=L[0].g,xt.push("ofs="+ue)):ue=0:xt.push("ofs="+ue);let Le=!0;for(let kt=0;kt<y;kt++){var j=L[kt].g;const Di=L[kt].map;if(j-=ue,j<0)ue=Math.max(0,L[kt].g-100),Le=!1;else try{j="req"+j+"_"||"";try{var K=Di instanceof Map?Di:Object.entries(Di);for(const[_a,es]of K){let ts=es;o(es)&&(ts=fy(es)),xt.push(j+_a+"="+encodeURIComponent(ts))}}catch(_a){throw xt.push(j+"type="+encodeURIComponent("_badmap")),_a}}catch{P&&P(Di)}}if(Le){K=xt.join("&");break e}}K=void 0}return u=u.i.splice(0,y),m.G=u,K}function UA(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;k||T(),V||(k(),V=!0),A.add(m,u),u.A=0}}function xy(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Bc(c(u.Da,u),FA(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,jA(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Bc(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,un(10),cf(this),jA(this))};function Ry(u){u.B!=null&&(a.clearTimeout(u.B),u.B=null)}function jA(u){u.g=new Yr(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Ni(u.na);Be(m,"RID","rpc"),Be(m,"SID",u.M),Be(m,"AID",u.K),Be(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Be(m,"TO",u.ia),Be(m,"TYPE","xmlhttp"),eu(u,m),u.u&&u.o&&Iy(m,u.u,u.o),u.O&&(u.g.H=u.O);var y=u.g;u=u.ba,y.M=1,y.A=af(Ni(m)),y.u=null,y.R=!0,fA(y,u)}t.Va=function(){this.C!=null&&(this.C=null,cf(this),xy(this),un(19))};function hf(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function zA(u,m){var y=null;if(u.g==m){hf(u),Ry(u),u.g=null;var P=2}else if(by(u.h,m))y=m.G,vA(u.h,m),P=1;else return;if(u.I!=0){if(m.o)if(P==1){y=m.u?m.u.length:0,m=Date.now()-m.F;var L=u.D;P=nf(),cn(P,new lA(P,y)),uf(u)}else UA(u);else if(L=m.m,L==3||L==0&&m.X>0||!(P==1&&s4(u,m)||P==2&&xy(u)))switch(y&&y.length>0&&(m=u.h,m.i=m.i.concat(y)),L){case 1:ya(u,5);break;case 4:ya(u,10);break;case 3:ya(u,6);break;default:ya(u,2)}}}function FA(u,m){let y=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(y*=2),y*m}function ya(u,m){if(u.j.info("Error code "+m),m==2){var y=c(u.bb,u),P=u.Ua;const L=!P;P=new Xr(P||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gc(P,"https"),af(P),L?ZU(P.toString(),y):e4(P.toString(),y)}else un(2);u.I=0,u.l&&u.l.pa(m),BA(u),VA(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),un(2)):(this.j.info("Failed to ping google.com"),un(1))};function BA(u){if(u.I=0,u.ja=[],u.l){const m=wA(u.h);(m.length!=0||u.i.length!=0)&&(b(u.ja,m),b(u.ja,u.i),u.h.i.length=0,g(u.i),u.i.length=0),u.l.oa()}}function qA(u,m,y){var P=y instanceof Xr?Ni(y):new Xr(y);if(P.g!="")m&&(P.g=m+"."+P.g),Kc(P,P.u);else{var L=a.location;P=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;const j=new Xr(null);P&&Gc(j,P),m&&(j.g=m),L&&Kc(j,L),y&&(j.h=y),P=j}return y=u.G,m=u.wa,y&&m&&Be(P,y,m),Be(P,"VER",u.ka),eu(u,P),P}function HA(u,m,y){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new st(new Ay({ab:y})):new st(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $A(){}t=$A.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function df(){}df.prototype.g=function(u,m){return new On(u,m)};function On(u,m){Jt.call(this),this.g=new OA(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!N(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!N(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Do(this)}d(On,Jt),On.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},On.prototype.close=function(){Sy(this.g)},On.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.v&&(y={},y.__data__=fy(u),u=y);m.i.push(new $U(m.Ya++,u)),m.I==3&&uf(m)},On.prototype.N=function(){this.g.l=null,delete this.j,Sy(this.g),delete this.g,On.Z.N.call(this)};function GA(u){my.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const y in m){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}d(GA,my);function KA(){py.call(this),this.status=1}d(KA,py);function Do(u){this.g=u}d(Do,$A),Do.prototype.ra=function(){cn(this.g,"a")},Do.prototype.qa=function(u){cn(this.g,new GA(u))},Do.prototype.pa=function(u){cn(this.g,new KA)},Do.prototype.oa=function(){cn(this.g,"b")},df.prototype.createWebChannel=df.prototype.g,On.prototype.send=On.prototype.o,On.prototype.open=On.prototype.m,On.prototype.close=On.prototype.close,Sk=function(){return new df},Ik=function(){return nf()},Ak=ma,p0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},rf.NO_ERROR=0,rf.TIMEOUT=8,rf.HTTP_ERROR=6,ym=rf,cA.COMPLETE="complete",Ek=cA,rA.EventType=zc,zc.OPEN="a",zc.CLOSE="b",zc.ERROR="c",zc.MESSAGE="d",Jt.prototype.listen=Jt.prototype.J,Cu=rA,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,Tk=st}).apply(typeof kf<"u"?kf:typeof self<"u"?self:typeof window<"u"?window:{});const g1="@firebase/firestore",y1="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=new Sd("@firebase/firestore");function Go(){return Gs.logLevel}function _7(t){Gs.setLogLevel(t)}function H(t,...e){if(Gs.logLevel<=fe.DEBUG){const n=e.map(Jb);Gs.debug(`Firestore (${xc}): ${t}`,...n)}}function mt(t,...e){if(Gs.logLevel<=fe.ERROR){const n=e.map(Jb);Gs.error(`Firestore (${xc}): ${t}`,...n)}}function tr(t,...e){if(Gs.logLevel<=fe.WARN){const n=e.map(Jb);Gs.warn(`Firestore (${xc}): ${t}`,...n)}}function Jb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,xk(t,i,n)}function xk(t,e,n){let i=`FIRESTORE (${xc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw mt(i),new Error(i)}function ee(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||xk(e,r,i)}function v7(t,e){t||X(57014,e)}function Q(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends jt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class w7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class b7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class T7{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ee(this.o===void 0,42304);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Yt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Yt,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},o=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Yt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ee(typeof i.accessToken=="string",31837,{l:i}),new Rk(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string",2055,{h:e}),new Mt(e)}}class E7{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class A7{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new E7(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I7{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Se(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ee(this.o===void 0,3512);const i=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new _1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ee(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new _1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=S7(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}}function ae(t,e){return t<e?-1:t>e?1:0}function g0(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),s=e.charAt(i);if(r!==s)return x_(r)===x_(s)?ae(r,s):x_(r)?1:-1}return ae(t.length,e.length)}const x7=55296,R7=57343;function x_(t){const e=t.charCodeAt(0);return e>=x7&&e<=R7}function $l(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function Ck(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="__name__";class ki{constructor(e,n,i){n===void 0?n=0:n>e.length&&X(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&X(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ki.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ki?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=ki.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return ae(e.length,n.length)}static compareSegments(e,n){const i=ki.isNumericId(e),r=ki.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?ki.extractNumericId(e).compare(ki.extractNumericId(n)):g0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ms.fromString(e.substring(4,e.length-2))}}class ge extends ki{construct(e,n,i){return new ge(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new B(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new ge(n)}static emptyPath(){return new ge([])}}const C7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ze extends ki{construct(e,n,i){return new Ze(e,n,i)}static isValidIdentifier(e){return C7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===v1}static keyField(){return new Ze([v1])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new B(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const o=e[r];if(o==="\\"){if(r+1===e.length)throw new B(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new B(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else o==="`"?(a=!a,r++):o!=="."||a?(i+=o,r++):(s(),r++)}if(s(),a)throw new B(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ze(n)}static emptyPath(){return new Ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(ge.fromString(e))}static fromName(e){return new G(ge.fromString(e).popFirst(5))}static empty(){return new G(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new ge(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(t,e,n){if(!n)throw new B(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Pk(t,e,n,i){if(e===!0&&i===!0)throw new B(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function w1(t){if(!G.isDocumentKey(t))throw new B(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function b1(t){if(G.isDocumentKey(t))throw new B(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Nk(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Rg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X(12329,{type:typeof t})}function Te(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rg(t);throw new B(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Dk(t,e){if(e<=0)throw new B(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t,e){const n={typeString:t};return e&&(n.value=e),n}function Od(t,e){if(!Nk(t))throw new B(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new B(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=-62135596800,E1=1e6;class Ce{static now(){return Ce.fromMillis(Date.now())}static fromDate(e){return Ce.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*E1);return new Ce(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<T1)throw new B(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/E1}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ce._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Od(e,Ce._jsonSchema))return new Ce(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-T1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ce._jsonSchemaVersion="firestore/timestamp/1.0",Ce._jsonSchema={type:At("string",Ce._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{static fromTimestamp(e){return new te(e)}static min(){return new te(new Ce(0,0))}static max(){return new te(new Ce(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=-1;class _p{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}}function y0(t){return t.fields.find(e=>e.kind===2)}function xa(t){return t.fields.filter(e=>e.kind!==2)}_p.UNKNOWN_ID=-1;class _m{constructor(e,n){this.fieldPath=e,this.kind=n}}class Hh{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Hh(0,Yn.min())}}function kk(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=te.fromTimestamp(i===1e9?new Ce(n+1,0):new Ce(n,i));return new Yn(r,G.empty(),e)}function Ok(t){return new Yn(t.readTime,t.key,Gl)}class Yn{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Yn(te.min(),G.empty(),Gl)}static max(){return new Yn(te.max(),G.empty(),Gl)}}function tT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Mk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==Vk)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,i)=>{n(e)})}static reject(e){return new M((n,i)=>{i(e)})}static waitFor(e){return new M((n,i)=>{let r=0,s=0,a=!1;e.forEach(o=>{++r,o.next(()=>{++s,a&&s===r&&n()},l=>i(l))}),a=!0,s===r&&n()})}static or(e){let n=M.resolve(!1);for(const i of e)n=n.next(r=>r?M.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new M((i,r)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{a[c]=h,++o,o===s&&i(a)},h=>r(h))}})}static doWhile(e,n){return new M((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn="SimpleDb";class Cg{static open(e,n,i,r){try{return new Cg(n,e.transaction(r,i))}catch(s){throw new rh(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Yt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new rh(e,n.error)):this.S.resolve()},this.transaction.onerror=i=>{const r=nT(i.target.error);this.S.reject(new rh(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(H(Mn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new N7(n)}}class Wi{static delete(e){return H(Mn,"Removing database:",e),Na(wb().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Lh())return!1;if(Wi.F())return!0;const e=Ee(),n=Wi.M(e),i=0<n&&n<10,r=Lk(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,n,i){this.name=e,this.version=n,this.N=i,this.B=null,Wi.M(Ee())===12.2&&mt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(H(Mn,"Opening database:",this.name),this.db=await new Promise((n,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{const a=s.target.result;n(a)},r.onblocked=()=>{i(new rh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{const a=s.target.error;a.name==="VersionError"?i(new B(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?i(new B(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):i(new rh(e,a))},r.onupgradeneeded=s=>{H(Mn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,r.transaction,s.oldVersion,this.version).next(()=>{H(Mn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,r){const s=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=Cg.open(this.db,e,s?"readonly":"readwrite",i),l=r(o).next(c=>(o.C(),c)).catch(c=>(o.abort(c),M.reject(c))).toPromise();return l.catch(()=>{}),await o.D,l}catch(o){const l=o,c=l.name!=="FirebaseError"&&a<3;if(H(Mn,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Lk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class P7{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Na(this.U.delete())}}class rh extends B{constructor(e,n){super(U.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function oa(t){return t.name==="IndexedDbTransactionError"}class N7{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(H(Mn,"PUT",this.store.name,e,n),i=this.store.put(n,e)):(H(Mn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Na(i)}add(e){return H(Mn,"ADD",this.store.name,e,e),Na(this.store.add(e))}get(e){return Na(this.store.get(e)).next(n=>(n===void 0&&(n=null),H(Mn,"GET",this.store.name,e,n),n))}delete(e){return H(Mn,"DELETE",this.store.name,e),Na(this.store.delete(e))}count(){return H(Mn,"COUNT",this.store.name),Na(this.store.count())}J(e,n){const i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const s=r.getAll(i.range);return new M((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}})}{const s=this.cursor(i),a=[];return this.H(s,(o,l)=>{a.push(l)}).next(()=>a)}}Y(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new M((r,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{r(a.target.result)}})}Z(e,n){H(Mn,"DELETE ALL",this.store.name);const i=this.options(e,n);i.X=!1;const r=this.cursor(i);return this.H(r,(s,a,o)=>o.delete())}ee(e,n){let i;n?i=e:(i={},n=e);const r=this.cursor(i);return this.H(r,n)}te(e){const n=this.cursor({});return new M((i,r)=>{n.onerror=s=>{const a=nT(s.target.error);r(a)},n.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():i()}):i()}})}H(e,n){const i=[];return new M((r,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void r();const l=new P7(o),c=n(o.primaryKey,o.value,l);if(c instanceof M){const h=c.catch(d=>(l.done(),M.reject(d)));i.push(h)}l.isDone?r():l.G===null?o.continue():o.continue(l.G)}}).next(()=>M.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Na(t){return new M((e,n)=>{t.onsuccess=i=>{const r=i.target.result;e(r)},t.onerror=i=>{const r=nT(i.target.error);n(r)}})}let A1=!1;function nT(t){const e=Wi.M(Ee());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new B("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return A1||(A1=!0,setTimeout(()=>{throw i},0)),i}}return t}const sh="IndexBackfiller";class D7{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){H(sh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();H(sh,`Documents written: ${n}`)}catch(n){oa(n)?H(sh,"Ignoring IndexedDB error during index backfill: ",n):await aa(n)}await this.re(6e4)})}}class k7{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const i=new Set;let r=n,s=!0;return M.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!i.has(a))return H(sh,`Processing collection: ${a}`),this.oe(e,a,r).next(o=>{r-=o,i.add(a)});s=!1})).next(()=>n-r)}oe(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this._e(r,s)).next(o=>(H(sh,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>a.size)}))}_e(e,n){let i=e;return n.changes.forEach((r,s)=>{const a=Ok(s);tT(a,i)>0&&(i=a)}),new Yn(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Sn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls=-1;function Vd(t){return t==null}function $h(t){return t===0&&1/t==-1/0}function Uk(t){return typeof t=="number"&&Number.isInteger(t)&&!$h(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp="";function on(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=I1(e)),e=O7(t.get(n),e);return I1(e)}function O7(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case vp:n+="";break;default:n+=s}}return n}function I1(t){return t+vp+""}function Hi(t){const e=t.length;if(ee(e>=2,64408,{path:t}),e===2)return ee(t.charAt(0)===vp&&t.charAt(1)==="",56145,{path:t}),ge.emptyPath();const n=e-2,i=[];let r="";for(let s=0;s<e;){const a=t.indexOf(vp,s);switch((a<0||a>n)&&X(50515,{path:t}),t.charAt(a+1)){case"":const o=t.substring(s,a);let l;r.length===0?l=o:(r+=o,l=r,r=""),i.push(l);break;case"":r+=t.substring(s,a),r+="\0";break;case"":r+=t.substring(s,a+1);break;default:X(61167,{path:t})}s=a+2}return new ge(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra="remoteDocuments",Md="owner",Mo="owner",Gh="mutationQueues",V7="userId",Ei="mutations",S1="batchId",La="userMutationsIndex",x1=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(t,e){return[t,on(e)]}function jk(t,e,n){return[t,on(e),n]}const M7={},Kl="documentMutations",wp="remoteDocumentsV14",L7=["prefixPath","collectionGroup","readTime","documentId"],wm="documentKeyIndex",U7=["prefixPath","collectionGroup","documentId"],zk="collectionGroupIndex",j7=["collectionGroup","readTime","prefixPath","documentId"],Kh="remoteDocumentGlobal",_0="remoteDocumentGlobalKey",Wl="targets",Fk="queryTargetsIndex",z7=["canonicalId","targetId"],Ql="targetDocuments",F7=["targetId","path"],iT="documentTargetsIndex",B7=["path","targetId"],bp="targetGlobalKey",Qa="targetGlobal",Wh="collectionParents",q7=["collectionId","parent"],Yl="clientMetadata",H7="clientId",Pg="bundles",$7="bundleId",Ng="namedQueries",G7="name",rT="indexConfiguration",K7="indexId",v0="collectionGroupIndex",W7="collectionGroup",ah="indexState",Q7=["indexId","uid"],Bk="sequenceNumberIndex",Y7=["uid","sequenceNumber"],oh="indexEntries",X7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],qk="documentKeyIndex",J7=["indexId","uid","orderedDocumentKey"],Dg="documentOverlays",Z7=["userId","collectionPath","documentId"],w0="collectionPathOverlayIndex",eH=["userId","collectionPath","largestBatchId"],Hk="collectionGroupOverlayIndex",tH=["userId","collectionGroup","largestBatchId"],sT="globals",nH="name",$k=[Gh,Ei,Kl,Ra,Wl,Md,Qa,Ql,Yl,Kh,Wh,Pg,Ng],iH=[...$k,Dg],Gk=[Gh,Ei,Kl,wp,Wl,Md,Qa,Ql,Yl,Kh,Wh,Pg,Ng,Dg],Kk=Gk,aT=[...Kk,rT,ah,oh],rH=aT,Wk=[...aT,sT],sH=Wk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0 extends Mk{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Nt(t,e){const n=Q(t);return Wi.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function la(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Qk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||qt.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Of(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Of(this.root,e,this.comparator,!1)}getReverseIterator(){return new Of(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Of(this.root,e,this.comparator,!0)}}class Of{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??qt.RED,this.left=r??qt.EMPTY,this.right=s??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new qt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return qt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,i,r,s){return this}insert(e,n,i){return new qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new C1(this.data.getIterator())}getIteratorFrom(e){return new C1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ke(this.comparator);return n.data=e,n}}class C1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Lo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new xn([])}unionWith(e){let n=new ke(Ze.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $l(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aH(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Yk("Invalid base64 string: "+s):s}}(e);return new ct(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const oH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(t){if(ee(!!t,39018),typeof t=="string"){let e=0;const n=oH.exec(t);if(ee(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Je(t.seconds),nanos:Je(t.nanos)}}function Je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ur(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="server_timestamp",Jk="__type__",Zk="__previous_value__",eO="__local_write_time__";function kg(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Jk])==null?void 0:i.stringValue)===Xk}function Og(t){const e=t.mapValue.fields[Zk];return kg(e)?Og(e):e}function Qh(t){const e=Lr(t.mapValue.fields[eO].timestampValue);return new Ce(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(e,n,i,r,s,a,o,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const T0="(default)";class Ks{constructor(e,n){this.projectId=e,this.database=n||T0}static empty(){return new Ks("","")}get isDefaultDatabase(){return this.database===T0}isEqual(e){return e instanceof Ks&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="__type__",tO="__max__",Es={mapValue:{fields:{__type__:{stringValue:tO}}}},lT="__vector__",Xl="value",bm={nullValue:"NULL_VALUE"};function Ws(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kg(t)?4:nO(t)?9007199254740991:Vg(t)?10:11:X(28295,{value:t})}function nr(t,e){if(t===e)return!0;const n=Ws(t);if(n!==Ws(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qh(t).isEqual(Qh(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Lr(r.timestampValue),o=Lr(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Ur(r.bytesValue).isEqual(Ur(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Je(r.geoPointValue.latitude)===Je(s.geoPointValue.latitude)&&Je(r.geoPointValue.longitude)===Je(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Je(r.integerValue)===Je(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Je(r.doubleValue),o=Je(s.doubleValue);return a===o?$h(a)===$h(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return $l(t.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},o=s.mapValue.fields||{};if(R1(a)!==R1(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!nr(a[l],o[l])))return!1;return!0}(t,e);default:return X(52216,{left:t})}}function Yh(t,e){return(t.values||[]).find(n=>nr(n,e))!==void 0}function Qs(t,e){if(t===e)return 0;const n=Ws(t),i=Ws(e);if(n!==i)return ae(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=Je(s.integerValue||s.doubleValue),l=Je(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return P1(t.timestampValue,e.timestampValue);case 4:return P1(Qh(t),Qh(e));case 5:return g0(t.stringValue,e.stringValue);case 6:return function(s,a){const o=Ur(s),l=Ur(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const h=ae(o[c],l[c]);if(h!==0)return h}return ae(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=ae(Je(s.latitude),Je(a.latitude));return o!==0?o:ae(Je(s.longitude),Je(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return N1(t.arrayValue,e.arrayValue);case 10:return function(s,a){var f,g,b,E;const o=s.fields||{},l=a.fields||{},c=(f=o[Xl])==null?void 0:f.arrayValue,h=(g=l[Xl])==null?void 0:g.arrayValue,d=ae(((b=c==null?void 0:c.values)==null?void 0:b.length)||0,((E=h==null?void 0:h.values)==null?void 0:E.length)||0);return d!==0?d:N1(c,h)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Es.mapValue&&a===Es.mapValue)return 0;if(s===Es.mapValue)return 1;if(a===Es.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),c=a.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=g0(l[d],h[d]);if(f!==0)return f;const g=Qs(o[l[d]],c[h[d]]);if(g!==0)return g}return ae(l.length,h.length)}(t.mapValue,e.mapValue);default:throw X(23264,{he:n})}}function P1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Lr(t),i=Lr(e),r=ae(n.seconds,i.seconds);return r!==0?r:ae(n.nanos,i.nanos)}function N1(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Qs(n[r],i[r]);if(s)return s}return ae(n.length,i.length)}function Jl(t){return E0(t)}function E0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Lr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ur(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=E0(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${E0(n.fields[a])}`;return r+"}"}(t.mapValue):X(61005,{value:t})}function Tm(t){switch(Ws(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Og(t);return e?16+Tm(e):16;case 5:return 2*t.stringValue.length;case 6:return Ur(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+Tm(s),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return la(i.fields,(s,a)=>{r+=s.length+Tm(a)}),r}(t.mapValue);default:throw X(13486,{value:t})}}function ao(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function A0(t){return!!t&&"integerValue"in t}function Xh(t){return!!t&&"arrayValue"in t}function D1(t){return!!t&&"nullValue"in t}function k1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Em(t){return!!t&&"mapValue"in t}function Vg(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[oT])==null?void 0:i.stringValue)===lT}function lh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return la(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=lh(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=lh(t.arrayValue.values[n]);return e}return{...t}}function nO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===tO}const iO={mapValue:{fields:{[oT]:{stringValue:lT},[Xl]:{arrayValue:{}}}}};function cH(t){return"nullValue"in t?bm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ao(Ks.empty(),G.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Vg(t)?iO:{mapValue:{}}:X(35942,{value:t})}function uH(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ao(Ks.empty(),G.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?iO:"mapValue"in t?Vg(t)?{mapValue:{}}:Es:X(61959,{value:t})}function O1(t,e){const n=Qs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function V1(t,e){const n=Qs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.value=e}static empty(){return new Kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Em(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=lh(n)}setAll(e){let n=Ze.emptyPath(),i={},r=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=o.popLast()}a?i[o.lastSegment()]=lh(a):r.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Em(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Em(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){la(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Kt(lh(this.value))}}function rO(t){const e=[];return la(t.fields,(n,i)=>{const r=new Ze([n]);if(Em(i)){const s=rO(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n,i,r,s,a,o){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new $e(e,0,te.min(),te.min(),te.min(),Kt.empty(),0)}static newFoundDocument(e,n,i,r){return new $e(e,1,n,te.min(),i,r,0)}static newNoDocument(e,n){return new $e(e,2,n,te.min(),te.min(),Kt.empty(),0)}static newUnknownDocument(e,n){return new $e(e,3,n,te.min(),te.min(),Kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $e&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n){this.position=e,this.inclusive=n}}function M1(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=G.comparator(G.fromName(a.referenceValue),n.key):i=Qs(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function L1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n="asc"){this.field=e,this.dir=n}}function hH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{}class _e extends sO{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new dH(e,n,i):n==="array-contains"?new pH(e,i):n==="in"?new hO(e,i):n==="not-in"?new gH(e,i):n==="array-contains-any"?new yH(e,i):new _e(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new fH(e,i):new mH(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Qs(n,this.value)):n!==null&&Ws(this.value)===Ws(n)&&this.matchesComparison(Qs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class De extends sO{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new De(e,n)}matches(e){return Zl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Zl(t){return t.op==="and"}function I0(t){return t.op==="or"}function cT(t){return aO(t)&&Zl(t)}function aO(t){for(const e of t.filters)if(e instanceof De)return!1;return!0}function S0(t){if(t instanceof _e)return t.field.canonicalString()+t.op.toString()+Jl(t.value);if(cT(t))return t.filters.map(e=>S0(e)).join(",");{const e=t.filters.map(n=>S0(n)).join(",");return`${t.op}(${e})`}}function oO(t,e){return t instanceof _e?function(i,r){return r instanceof _e&&i.op===r.op&&i.field.isEqual(r.field)&&nr(i.value,r.value)}(t,e):t instanceof De?function(i,r){return r instanceof De&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,o)=>s&&oO(a,r.filters[o]),!0):!1}(t,e):void X(19439)}function lO(t,e){const n=t.filters.concat(e);return De.create(n,t.op)}function cO(t){return t instanceof _e?function(n){return`${n.field.canonicalString()} ${n.op} ${Jl(n.value)}`}(t):t instanceof De?function(n){return n.op.toString()+" {"+n.getFilters().map(cO).join(" ,")+"}"}(t):"Filter"}class dH extends _e{constructor(e,n,i){super(e,n,i),this.key=G.fromName(i.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class fH extends _e{constructor(e,n){super(e,"in",n),this.keys=uO("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class mH extends _e{constructor(e,n){super(e,"not-in",n),this.keys=uO("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function uO(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>G.fromName(i.referenceValue))}class pH extends _e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xh(n)&&Yh(n.arrayValue,this.value)}}class hO extends _e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yh(this.value.arrayValue,n)}}class gH extends _e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yh(this.value.arrayValue,n)}}class yH extends _e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Yh(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _H{constructor(e,n=null,i=[],r=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function x0(t,e=null,n=[],i=[],r=null,s=null,a=null){return new _H(t,e,n,i,r,s,a)}function oo(t){const e=Q(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>S0(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Vd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Jl(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Jl(i)).join(",")),e.Te=n}return e.Te}function Ld(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!oO(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!L1(t.startAt,e.startAt)&&L1(t.endAt,e.endAt)}function Tp(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ep(t,e){return t.filters.filter(n=>n instanceof _e&&n.field.isEqual(e))}function U1(t,e,n){let i=bm,r=!0;for(const s of Ep(t,e)){let a=bm,o=!0;switch(s.op){case"<":case"<=":a=cH(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=bm}O1({value:i,inclusive:r},{value:a,inclusive:o})<0&&(i=a,r=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];O1({value:i,inclusive:r},{value:a,inclusive:n.inclusive})<0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}function j1(t,e,n){let i=Es,r=!0;for(const s of Ep(t,e)){let a=Es,o=!0;switch(s.op){case">=":case">":a=uH(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=Es}V1({value:i,inclusive:r},{value:a,inclusive:o})>0&&(i=a,r=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];V1({value:i,inclusive:r},{value:a,inclusive:n.inclusive})>0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n=null,i=[],r=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function dO(t,e,n,i,r,s,a,o){return new Hr(t,e,n,i,r,s,a,o)}function Rc(t){return new Hr(t)}function z1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function uT(t){return t.collectionGroup!==null}function Il(t){const e=Q(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new ke(Ze.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Jh(s,i))}),n.has(Ze.keyField().canonicalString())||e.Ie.push(new Jh(Ze.keyField(),i))}return e.Ie}function _n(t){const e=Q(t);return e.Ee||(e.Ee=vH(e,Il(t))),e.Ee}function vH(t,e){if(t.limitType==="F")return x0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Jh(r.field,s)});const n=t.endAt?new Ys(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ys(t.startAt.position,t.startAt.inclusive):null;return x0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function R0(t,e){const n=t.filters.concat([e]);return new Hr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ap(t,e,n){return new Hr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ud(t,e){return Ld(_n(t),_n(e))&&t.limitType===e.limitType}function fO(t){return`${oo(_n(t))}|lt:${t.limitType}`}function Ko(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>cO(r)).join(", ")}]`),Vd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Jl(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Jl(r)).join(",")),`Target(${i})`}(_n(t))}; limitType=${t.limitType})`}function jd(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):G.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of Il(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,o,l){const c=M1(a,o,l);return a.inclusive?c<=0:c<0}(i.startAt,Il(i),r)||i.endAt&&!function(a,o,l){const c=M1(a,o,l);return a.inclusive?c>=0:c>0}(i.endAt,Il(i),r))}(t,e)}function mO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pO(t){return(e,n)=>{let i=!1;for(const r of Il(t)){const s=wH(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function wH(t,e,n){const i=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,a,o){const l=a.data.field(s),c=o.data.field(s);return l!==null&&c!==null?Qs(l,c):X(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return X(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){la(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return Qk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bH=new Fe(G.comparator);function Rn(){return bH}const gO=new Fe(G.comparator);function Pu(...t){let e=gO;for(const n of t)e=e.insert(n.key,n);return e}function yO(t){let e=gO;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function $i(){return ch()}function _O(){return ch()}function ch(){return new $r(t=>t.toString(),(t,e)=>t.isEqual(e))}const TH=new Fe(G.comparator),EH=new ke(G.comparator);function ce(...t){let e=EH;for(const n of t)e=e.add(n);return e}const AH=new ke(ae);function hT(){return AH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$h(e)?"-0":e}}function vO(t){return{integerValue:""+t}}function wO(t,e){return Uk(e)?vO(e):dT(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(){this._=void 0}}function IH(t,e,n){return t instanceof ec?function(r,s){const a={fields:{[Jk]:{stringValue:Xk},[eO]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&kg(s)&&(s=Og(s)),s&&(a.fields[Zk]=s),{mapValue:a}}(n,e):t instanceof lo?TO(t,e):t instanceof co?EO(t,e):function(r,s){const a=bO(r,s),o=F1(a)+F1(r.Ae);return A0(a)&&A0(r.Ae)?vO(o):dT(r.serializer,o)}(t,e)}function SH(t,e,n){return t instanceof lo?TO(t,e):t instanceof co?EO(t,e):n}function bO(t,e){return t instanceof tc?function(i){return A0(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class ec extends Mg{}class lo extends Mg{constructor(e){super(),this.elements=e}}function TO(t,e){const n=AO(e);for(const i of t.elements)n.some(r=>nr(r,i))||n.push(i);return{arrayValue:{values:n}}}class co extends Mg{constructor(e){super(),this.elements=e}}function EO(t,e){let n=AO(e);for(const i of t.elements)n=n.filter(r=>!nr(r,i));return{arrayValue:{values:n}}}class tc extends Mg{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function F1(t){return Je(t.integerValue||t.doubleValue)}function AO(t){return Xh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n){this.field=e,this.transform=n}}function xH(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof lo&&r instanceof lo||i instanceof co&&r instanceof co?$l(i.elements,r.elements,nr):i instanceof tc&&r instanceof tc?nr(i.Ae,r.Ae):i instanceof ec&&r instanceof ec}(t.transform,e.transform)}class RH{constructor(e,n){this.version=e,this.transformResults=n}}class et{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new et}static exists(e){return new et(void 0,e)}static updateTime(e){return new et(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Am(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Lg{}function IO(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Pc(t.key,et.none()):new Cc(t.key,t.data,et.none());{const n=t.data,i=Kt.empty();let r=new ke(Ze.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new Gr(t.key,i,new xn(r.toArray()),et.none())}}function CH(t,e,n){t instanceof Cc?function(r,s,a){const o=r.value.clone(),l=q1(r.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Gr?function(r,s,a){if(!Am(r.precondition,s))return void s.convertToUnknownDocument(a.version);const o=q1(r.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(SO(r)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function uh(t,e,n,i){return t instanceof Cc?function(s,a,o,l){if(!Am(s.precondition,a))return o;const c=s.value.clone(),h=H1(s.fieldTransforms,l,a);return c.setAll(h),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof Gr?function(s,a,o,l){if(!Am(s.precondition,a))return o;const c=H1(s.fieldTransforms,l,a),h=a.data;return h.setAll(SO(s)),h.setAll(c),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,a,o){return Am(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function PH(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=bO(i.transform,r||null);s!=null&&(n===null&&(n=Kt.empty()),n.set(i.field,s))}return n||null}function B1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&$l(i,r,(s,a)=>xH(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Cc extends Lg{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Gr extends Lg{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function SO(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function q1(t,e,n){const i=new Map;ee(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,o=e.data.field(s.field);i.set(s.field,SH(a,o,n[r]))}return i}function H1(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,IH(s,a,e))}return i}class Pc extends Lg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fT extends Lg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&CH(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=uh(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=uh(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=_O();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(r.key)?null:o;const l=IO(a,o);l!==null&&i.set(r.key,l),a.isValidDocument()||a.convertToNoDocument(te.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&$l(this.mutations,e.mutations,(n,i)=>B1(n,i))&&$l(this.baseMutations,e.baseMutations,(n,i)=>B1(n,i))}}class pT{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){ee(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return TH}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new pT(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NH{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,be;function xO(t){switch(t){case U.OK:return X(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return X(15467,{code:t})}}function RO(t){if(t===void 0)return mt("GRPC error has no .code"),U.UNKNOWN;switch(t){case _t.OK:return U.OK;case _t.CANCELLED:return U.CANCELLED;case _t.UNKNOWN:return U.UNKNOWN;case _t.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case _t.INTERNAL:return U.INTERNAL;case _t.UNAVAILABLE:return U.UNAVAILABLE;case _t.UNAUTHENTICATED:return U.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case _t.NOT_FOUND:return U.NOT_FOUND;case _t.ALREADY_EXISTS:return U.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return U.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case _t.ABORTED:return U.ABORTED;case _t.OUT_OF_RANGE:return U.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return U.UNIMPLEMENTED;case _t.DATA_LOSS:return U.DATA_LOSS;default:return X(39323,{code:t})}}(be=_t||(_t={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DH=new Ms([4294967295,4294967295],0);function $1(t){const e=CO().encode(t),n=new bk;return n.update(e),new Uint8Array(n.digest())}function G1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ms([n,i],0),new Ms([r,s],0)]}class yT{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Nu(`Invalid padding: ${n}`);if(i<0)throw new Nu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Nu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Nu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ms.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(Ms.fromNumber(i)));return r.compare(DH)===1&&(r=new Ms([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=$1(e),[i,r]=G1(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new yT(s,r,n);return i.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const n=$1(e),[i,r]=G1(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Nu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Bd.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Fd(te.min(),r,new Fe(ae),Rn(),ce())}}class Bd{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Bd(i,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class PO{constructor(e,n){this.targetId=e,this.Ce=n}}class NO{constructor(e,n,i=ct.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class K1{constructor(){this.ve=0,this.Fe=W1(),this.Me=ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ce(),n=ce(),i=ce();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:X(38017,{changeType:s})}}),new Bd(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=W1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ee(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class kH{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rn(),this.Je=Vf(),this.He=Vf(),this.Ye=new Fe(ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const s=r.target;if(Tp(s))if(i===0){const a=new G(s.path);this.et(n,a,$e.newNoDocument(a,te.min()))}else ee(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,o;try{a=Ur(i).toUint8Array()}catch(l){if(l instanceof Yk)return tr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new yT(a,r,s)}catch(l){return tr(l instanceof Nu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(n,s,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&Tp(o.target)){const l=new G(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,$e.newNoDocument(l,e))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=ce();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const r=new Fd(e,n,this.Ye,this.je,i);return this.je=Rn(),this.Je=Vf(),this.He=Vf(),this.Ye=new Fe(ae),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new K1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ke(ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ke(ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new K1),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Vf(){return new Fe(G.comparator)}function W1(){return new Fe(G.comparator)}const OH={asc:"ASCENDING",desc:"DESCENDING"},VH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MH={and:"AND",or:"OR"};class LH{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function C0(t,e){return t.useProto3Json||Vd(e)?e:{value:e}}function nc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DO(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function UH(t,e){return nc(t,e.toTimestamp())}function gt(t){return ee(!!t,49232),te.fromTimestamp(function(n){const i=Lr(n);return new Ce(i.seconds,i.nanos)}(t))}function _T(t,e){return P0(t,e).canonicalString()}function P0(t,e){const n=function(r){return new ge(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function kO(t){const e=ge.fromString(t);return ee(qO(e),10190,{key:e.toString()}),e}function Zh(t,e){return _T(t.databaseId,e.path)}function Qi(t,e){const n=kO(e);if(n.get(1)!==t.databaseId.projectId)throw new B(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(MO(n))}function OO(t,e){return _T(t.databaseId,e)}function VO(t){const e=kO(t);return e.length===4?ge.emptyPath():MO(e)}function N0(t){return new ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function MO(t){return ee(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Q1(t,e,n){return{name:Zh(t,e),fields:n.value.mapValue.fields}}function LO(t,e,n){const i=Qi(t,e.name),r=gt(e.updateTime),s=e.createTime?gt(e.createTime):te.min(),a=new Kt({mapValue:{fields:e.fields}}),o=$e.newFoundDocument(i,r,s,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function jH(t,e){return"found"in e?function(i,r){ee(!!r.found,43571),r.found.name,r.found.updateTime;const s=Qi(i,r.found.name),a=gt(r.found.updateTime),o=r.found.createTime?gt(r.found.createTime):te.min(),l=new Kt({mapValue:{fields:r.found.fields}});return $e.newFoundDocument(s,a,o,l)}(t,e):"missing"in e?function(i,r){ee(!!r.missing,3894),ee(!!r.readTime,22933);const s=Qi(i,r.missing),a=gt(r.readTime);return $e.newNoDocument(s,a)}(t,e):X(7234,{result:e})}function zH(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:X(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(ee(h===void 0||typeof h=="string",58123),ct.fromBase64String(h||"")):(ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ct.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const h=c.code===void 0?U.UNKNOWN:RO(c.code);return new B(h,c.message||"")}(a);n=new NO(i,r,s,o||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Qi(t,i.document.name),s=gt(i.document.updateTime),a=i.document.createTime?gt(i.document.createTime):te.min(),o=new Kt({mapValue:{fields:i.document.fields}}),l=$e.newFoundDocument(r,s,a,o),c=i.targetIds||[],h=i.removedTargetIds||[];n=new Im(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Qi(t,i.document),s=i.readTime?gt(i.readTime):te.min(),a=$e.newNoDocument(r,s),o=i.removedTargetIds||[];n=new Im([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Qi(t,i.document),s=i.removedTargetIds||[];n=new Im([],s,r,null)}else{if(!("filter"in e))return X(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new NH(r,s),o=i.targetId;n=new PO(o,a)}}return n}function ed(t,e){let n;if(e instanceof Cc)n={update:Q1(t,e.key,e.value)};else if(e instanceof Pc)n={delete:Zh(t,e.key)};else if(e instanceof Gr)n={update:Q1(t,e.key,e.data),updateMask:GH(e.fieldMask)};else{if(!(e instanceof fT))return X(16599,{Vt:e.type});n={verify:Zh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const o=a.transform;if(o instanceof ec)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof lo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof co)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof tc)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw X(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:UH(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X(27497)}(t,e.precondition)),n}function D0(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?et.updateTime(gt(s.updateTime)):s.exists!==void 0?et.exists(s.exists):et.none()}(e.currentDocument):et.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(a,o){let l=null;if("setToServerValue"in o)ee(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new ec;else if("appendMissingElements"in o){const h=o.appendMissingElements.values||[];l=new lo(h)}else if("removeAllFromArray"in o){const h=o.removeAllFromArray.values||[];l=new co(h)}else"increment"in o?l=new tc(a,o.increment):X(16584,{proto:o});const c=Ze.fromServerFormat(o.fieldPath);return new zd(c,l)}(t,r)):[];if(e.update){e.update.name;const r=Qi(t,e.update.name),s=new Kt({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(l){const c=l.fieldPaths||[];return new xn(c.map(h=>Ze.fromServerFormat(h)))}(e.updateMask);return new Gr(r,s,a,n,i)}return new Cc(r,s,n,i)}if(e.delete){const r=Qi(t,e.delete);return new Pc(r,n)}if(e.verify){const r=Qi(t,e.verify);return new fT(r,n)}return X(1463,{proto:e})}function FH(t,e){return t&&t.length>0?(ee(e!==void 0,14353),t.map(n=>function(r,s){let a=r.updateTime?gt(r.updateTime):gt(s);return a.isEqual(te.min())&&(a=gt(s)),new RH(a,r.transformResults||[])}(n,e))):[]}function UO(t,e){return{documents:[OO(t,e.path)]}}function jO(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=OO(t,r);const s=function(c){if(c.length!==0)return BO(De.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:Wo(f.field),direction:qH(f.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=C0(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:r}}function zO(t){let e=VO(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){ee(i===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=FO(d);return f instanceof De&&cT(f)?f.getFilters():[f]}(n.where));let a=[];n.orderBy&&(a=function(d){return d.map(f=>function(b){return new Jh(Qo(b.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(d){let f;return f=typeof d=="object"?d.value:d,Vd(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,g=d.values||[];return new Ys(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,g=d.values||[];return new Ys(g,f)}(n.endAt)),dO(e,r,a,s,o,"F",l,c)}function BH(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FO(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Qo(n.unaryFilter.field);return _e.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Qo(n.unaryFilter.field);return _e.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Qo(n.unaryFilter.field);return _e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Qo(n.unaryFilter.field);return _e.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):t.fieldFilter!==void 0?function(n){return _e.create(Qo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return De.create(n.compositeFilter.filters.map(i=>FO(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(t):X(30097,{filter:t})}function qH(t){return OH[t]}function HH(t){return VH[t]}function $H(t){return MH[t]}function Wo(t){return{fieldPath:t.canonicalString()}}function Qo(t){return Ze.fromServerFormat(t.fieldPath)}function BO(t){return t instanceof _e?function(n){if(n.op==="=="){if(k1(n.value))return{unaryFilter:{field:Wo(n.field),op:"IS_NAN"}};if(D1(n.value))return{unaryFilter:{field:Wo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(k1(n.value))return{unaryFilter:{field:Wo(n.field),op:"IS_NOT_NAN"}};if(D1(n.value))return{unaryFilter:{field:Wo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wo(n.field),op:HH(n.op),value:n.value}}}(t):t instanceof De?function(n){const i=n.getFilters().map(r=>BO(r));return i.length===1?i[0]:{compositeFilter:{op:$H(n.op),filters:i}}}(t):X(54877,{filter:t})}function GH(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n,i,r,s=te.min(),a=te.min(),o=ct.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e){this.yt=e}}function KH(t,e){let n;if(e.document)n=LO(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=G.fromSegments(e.noDocument.path),r=ho(e.noDocument.readTime);n=$e.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return X(56709);{const i=G.fromSegments(e.unknownDocument.path),r=ho(e.unknownDocument.version);n=$e.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){const s=new Ce(r[0],r[1]);return te.fromTimestamp(s)}(e.readTime)),n}function Y1(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ip(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,a){return{name:Zh(s,a.key),fields:a.data.value.mapValue.fields,updateTime:nc(s,a.version.toTimestamp()),createTime:nc(s,a.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:uo(e.version)};else{if(!e.isUnknownDocument())return X(57904,{document:e});i.unknownDocument={path:n.path.toArray(),version:uo(e.version)}}return i}function Ip(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function uo(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ho(t){const e=new Ce(t.seconds,t.nanoseconds);return te.fromTimestamp(e)}function Da(t,e){const n=(e.baseMutations||[]).map(s=>D0(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const i=e.mutations.map(s=>D0(t.yt,s)),r=Ce.fromMillis(e.localWriteTimeMs);return new mT(e.batchId,r,n,i)}function Du(t){const e=ho(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ho(t.lastLimboFreeSnapshotVersion):te.min();let i;return i=function(s){return s.documents!==void 0}(t.query)?function(s){const a=s.documents.length;return ee(a===1,1966,{count:a}),_n(Rc(VO(s.documents[0])))}(t.query):function(s){return _n(zO(s))}(t.query),new vr(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ct.fromBase64String(t.resumeToken))}function $O(t,e){const n=uo(e.snapshotVersion),i=uo(e.lastLimboFreeSnapshotVersion);let r;r=Tp(e.target)?UO(t.yt,e.target):jO(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:oo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function vT(t){const e=zO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ap(e,e.limit,"L"):e}function R_(t,e){return new gT(e.largestBatchId,D0(t.yt,e.overlayMutation))}function X1(t,e){const n=e.path.lastSegment();return[t,on(e.path.popLast()),n]}function J1(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:uo(i.readTime),documentKey:on(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH{getBundleMetadata(e,n){return Z1(e).get(n).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:ho(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,n){return Z1(e).put(function(r){return{bundleId:r.id,createTime:uo(gt(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return ex(e).get(n).next(i=>{if(i)return function(s){return{name:s.name,query:vT(s.bundledQuery),readTime:ho(s.readTime)}}(i)})}saveNamedQuery(e,n){return ex(e).put(function(r){return{name:r.name,readTime:uo(gt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function Z1(t){return Nt(t,Pg)}function ex(t){return Nt(t,Ng)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const i=n.uid||"";return new Ug(e,i)}getOverlay(e,n){return fu(e).get(X1(this.userId,n)).next(i=>i?R_(this.serializer,i):null)}getOverlays(e,n){const i=$i();return M.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){const r=[];return i.forEach((s,a)=>{const o=new gT(n,a);r.push(this.St(e,o))}),M.waitFor(r)}removeOverlaysForBatchId(e,n,i){const r=new Set;n.forEach(a=>r.add(on(a.getCollectionPath())));const s=[];return r.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);s.push(fu(e).Z(w0,o))}),M.waitFor(s)}getOverlaysForCollection(e,n,i){const r=$i(),s=on(n),a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return fu(e).J(w0,a).next(o=>{for(const l of o){const c=R_(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,n,i,r){const s=$i();let a;const o=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return fu(e).ee({index:Hk,range:o},(l,c,h)=>{const d=R_(this.serializer,c);s.size()<r||d.largestBatchId===a?(s.set(d.getKey(),d),a=d.largestBatchId):h.done()}).next(()=>s)}St(e,n){return fu(e).put(function(r,s,a){const[o,l,c]=X1(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:ed(r.yt,a.mutation)}}(this.serializer,this.userId,n))}}function fu(t){return Nt(t,Dg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{bt(e){return Nt(e,sT)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const i=n==null?void 0:n.value;return i?ct.fromUint8Array(i):ct.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Je(e.integerValue));else if("doubleValue"in e){const i=Je(e.doubleValue);isNaN(i)?this.Ft(n,13):(this.Ft(n,15),$h(i)?n.Mt(0):n.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(n,20),typeof i=="string"&&(i=Lr(i)),n.xt(`${i.seconds||""}`),n.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Ur(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(n,45),n.Mt(i.latitude||0),n.Mt(i.longitude||0)}else"mapValue"in e?nO(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Vg(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):X(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const i=e.fields||{};this.Ft(n,55);for(const r of Object.keys(i))this.Ot(r,n),this.Ct(i[r],n)}kt(e,n){var a,o;const i=e.fields||{};this.Ft(n,53);const r=Xl,s=((o=(a=i[r].arrayValue)==null?void 0:a.values)==null?void 0:o.length)||0;this.Ft(n,15),n.Mt(Je(s)),this.Ot(r,n),this.Ct(i[r],n)}Qt(e,n){const i=e.values||[];this.Ft(n,50);for(const r of i)this.Ct(r,n)}Lt(e,n){this.Ft(n,37),G.fromName(e).path.forEach(i=>{this.Ft(n,60),this.Ut(i,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}ka.Kt=new ka;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=255;function YH(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function tx(t){const e=64-function(i){let r=0;for(let s=0;s<8;++s){const a=YH(255&i[s]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}class XH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Gt(i.value),i=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Jt(i.value),i=n.next();this.Ht()}Yt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const r=n.codePointAt(0);this.Gt(240|r>>>18),this.Gt(128|63&r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r)}}this.zt()}Zt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const r=n.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Ht()}Xt(e){const n=this.en(e),i=tx(n);this.tn(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}nn(e){const n=this.en(e),i=tx(n);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}rn(){this.sn(Uo),this.sn(255)}_n(){this.an(Uo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),i=!!(128&n[0]);n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Uo?(this.sn(Uo),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Uo?(this.an(Uo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class JH{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class ZH{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class mu{constructor(){this.cn=new XH,this.ln=new JH(this.cn),this.hn=new ZH(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n,i,r){this.Tn=e,this.In=n,this.En=i,this.dn=r}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.dn,0),n!==e?i.set([0],this.dn.length):++i[i.length-1],new Oa(this.Tn,this.In,this.En,i)}Rn(e,n,i){return{indexId:this.Tn,uid:e,arrayValue:Sm(this.En),directionalValue:Sm(this.dn),orderedDocumentKey:Sm(n),documentKey:i.path.toArray()}}Vn(e,n,i){const r=this.Rn(e,n,i);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function rs(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=nx(t.En,e.En),n!==0?n:(n=nx(t.dn,e.dn),n!==0?n:G.comparator(t.In,e.In)))}function nx(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}function Sm(t){return cD()?function(n){let i="";for(let r=0;r<n.length;r++)i+=String.fromCharCode(n[r]);return i}(t):t}function ix(t){return typeof t!="string"?t:function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(t)}class rx{constructor(e){this.mn=new ke((n,i)=>Ze.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const i=n;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(ee(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=y0(e);if(n!==void 0&&!this.wn(n))return!1;const i=xa(e);let r=new Set,s=0,a=0;for(;s<i.length&&this.wn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!r.has(o.field.canonicalString())){const l=i[s];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++s}for(;s<i.length;++s){const o=i[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new ke(Ze.comparator);const n=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new _m(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new _m(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new _m(i.field,i.dir==="asc"?0:1)));return new _p(_p.UNKNOWN_ID,this.collectionId,n,Hh.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(t){var n,i;if(ee(t instanceof _e||t instanceof De,20012),t instanceof _e){if(t instanceof hO){const r=((i=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:i.map(s=>_e.create(t.field,"==",s)))||[];return De.create(r,"or")}return t}const e=t.filters.map(r=>GO(r));return De.create(e,t.op)}function e$(t){if(t.getFilters().length===0)return[];const e=V0(GO(t));return ee(KO(e),7391),k0(e)||O0(e)?[e]:e.getFilters()}function k0(t){return t instanceof _e}function O0(t){return t instanceof De&&cT(t)}function KO(t){return k0(t)||O0(t)||function(n){if(n instanceof De&&I0(n)){for(const i of n.getFilters())if(!k0(i)&&!O0(i))return!1;return!0}return!1}(t)}function V0(t){if(ee(t instanceof _e||t instanceof De,34018),t instanceof _e)return t;if(t.filters.length===1)return V0(t.filters[0]);const e=t.filters.map(i=>V0(i));let n=De.create(e,t.op);return n=Sp(n),KO(n)?n:(ee(n instanceof De,64498),ee(Zl(n),40251),ee(n.filters.length>1,57927),n.filters.reduce((i,r)=>wT(i,r)))}function wT(t,e){let n;return ee(t instanceof _e||t instanceof De,38388),ee(e instanceof _e||e instanceof De,25473),n=t instanceof _e?e instanceof _e?function(r,s){return De.create([r,s],"and")}(t,e):sx(t,e):e instanceof _e?sx(e,t):function(r,s){if(ee(r.filters.length>0&&s.filters.length>0,48005),Zl(r)&&Zl(s))return lO(r,s.getFilters());const a=I0(r)?r:s,o=I0(r)?s:r,l=a.filters.map(c=>wT(c,o));return De.create(l,"or")}(t,e),Sp(n)}function sx(t,e){if(Zl(e))return lO(e,t.getFilters());{const n=e.filters.map(i=>wT(t,i));return De.create(n,"or")}}function Sp(t){if(ee(t instanceof _e||t instanceof De,11850),t instanceof _e)return t;const e=t.getFilters();if(e.length===1)return Sp(e[0]);if(aO(t))return t;const n=e.map(r=>Sp(r)),i=[];return n.forEach(r=>{r instanceof _e?i.push(r):r instanceof De&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:De.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t${constructor(){this.Cn=new bT}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Yn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Yn.min())}updateCollectionGroup(e,n,i){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class bT{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new ke(ge.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ke(ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="IndexedDbIndexManager",Mf=new Uint8Array(0);class n${constructor(e,n){this.databaseId=n,this.vn=new bT,this.Fn=new $r(i=>oo(i),(i,r)=>Ld(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:i,parent:on(r)};return ox(e).put(s)}return M.resolve()}getCollectionParents(e,n){const i=[],r=IDBKeyRange.bound([n,""],[Ck(n),""],!1,!0);return ox(e).J(r).next(s=>{for(const a of s){if(a.collectionId!==n)break;i.push(Hi(a.parent))}return i})}addFieldIndex(e,n){const i=pu(e),r=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete r.indexId;const s=i.add(r);if(n.indexState){const a=zo(e);return s.next(o=>{a.put(J1(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const i=pu(e),r=zo(e),s=jo(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=pu(e),i=jo(e),r=zo(e);return n.Z().next(()=>i.Z()).next(()=>r.Z())}createTargetIndexes(e,n){return M.forEach(this.Mn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){const s=new rx(i).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const i=jo(e);let r=!0;const s=new Map;return M.forEach(this.Mn(n),a=>this.xn(e,a).next(o=>{r&&(r=!!o),s.set(a,o)})).next(()=>{if(r){let a=ce();const o=[];return M.forEach(s,(l,c)=>{H(ax,`Using index ${function(_){return`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(I=>`${I.fieldPath}:${I.kind}`).join(",")}`}(l)} to execute ${oo(n)}`);const h=function(_,I){const k=y0(I);if(k===void 0)return null;for(const V of Ep(_,k.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null}(c,l),d=function(_,I){const k=new Map;for(const V of xa(I))for(const A of Ep(_,V.fieldPath))switch(A.op){case"==":case"in":k.set(V.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return k.set(V.fieldPath.canonicalString(),A.value),Array.from(k.values())}return null}(c,l),f=function(_,I){const k=[];let V=!0;for(const A of xa(I)){const T=A.kind===0?U1(_,A.fieldPath,_.startAt):j1(_,A.fieldPath,_.startAt);k.push(T.value),V&&(V=T.inclusive)}return new Ys(k,V)}(c,l),g=function(_,I){const k=[];let V=!0;for(const A of xa(I)){const T=A.kind===0?j1(_,A.fieldPath,_.endAt):U1(_,A.fieldPath,_.endAt);k.push(T.value),V&&(V=T.inclusive)}return new Ys(k,V)}(c,l),b=this.On(l,c,f),E=this.On(l,c,g),x=this.Nn(l,c,d),w=this.Bn(l.indexId,h,b,f.inclusive,E,g.inclusive,x);return M.forEach(w,v=>i.Y(v,n.limit).next(_=>{_.forEach(I=>{const k=G.fromSegments(I.documentKey);a.has(k)||(a=a.add(k),o.push(k))})}))}).next(()=>o)}return M.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=e$(De.create(e.filters,"and")).map(i=>x0(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,i,r,s,a,o){const l=(n!=null?n.length:1)*Math.max(i.length,s.length),c=l/(n!=null?n.length:1),h=[];for(let d=0;d<l;++d){const f=n?this.Ln(n[d/c]):Mf,g=this.kn(e,f,i[d%c],r),b=this.qn(e,f,s[d%c],a),E=o.map(x=>this.kn(e,f,x,!0));h.push(...this.createRange(g,b,E))}return h}kn(e,n,i,r){const s=new Oa(e,G.empty(),n,i);return r?s:s.An()}qn(e,n,i,r){const s=new Oa(e,G.empty(),n,i);return r?s.An():s}xn(e,n){const i=new rx(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let a=null;for(const o of s)i.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,n){let i=2;const r=this.Mn(n);return M.forEach(r,s=>this.xn(e,s).next(a=>{a?i!==0&&a.fields.length<function(l){let c=new ke(Ze.comparator),h=!1;for(const d of l.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?h=!0:c=c.add(f.field));for(const d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(h?1:0)}(s)&&(i=1):i=0})).next(()=>function(a){return a.limit!==null}(n)&&r.length>1&&i===2?1:i)}Qn(e,n){const i=new mu;for(const r of xa(e)){const s=n.data.field(r.fieldPath);if(s==null)return null;const a=i.Pn(r.kind);ka.Kt.Dt(s,a)}return i.un()}Ln(e){const n=new mu;return ka.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const i=new mu;return ka.Kt.Dt(ao(this.databaseId,n),i.Pn(function(s){const a=xa(s);return a.length===0?0:a[a.length-1].kind}(e))),i.un()}Nn(e,n,i){if(i===null)return[];let r=[];r.push(new mu);let s=0;for(const a of xa(e)){const o=i[s++];for(const l of r)if(this.Un(n,a.fieldPath)&&Xh(o))r=this.Kn(r,a,o);else{const c=l.Pn(a.kind);ka.Kt.Dt(o,c)}}return this.Wn(r)}On(e,n,i){return this.Nn(e,n,i.position)}Wn(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].un();return n}Kn(e,n,i){const r=[...e],s=[];for(const a of i.arrayValue.values||[])for(const o of r){const l=new mu;l.seed(o.un()),ka.Kt.Dt(a,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(i=>i instanceof _e&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){const i=pu(e),r=zo(e);return(n?i.J(v0,IDBKeyRange.bound(n,n)):i.J()).next(s=>{const a=[];return M.forEach(s,o=>r.get([o.indexId,this.uid]).next(l=>{a.push(function(h,d){const f=d?new Hh(d.sequenceNumber,new Yn(ho(d.readTime),new G(Hi(d.documentKey)),d.largestBatchId)):Hh.empty(),g=h.fields.map(([b,E])=>new _m(Ze.fromServerFormat(b),E));return new _p(h.indexId,h.collectionGroup,g,f)}(o,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:ae(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){const r=pu(e),s=zo(e);return this.Gn(e).next(a=>r.J(v0,IDBKeyRange.bound(n,n)).next(o=>M.forEach(o,l=>s.put(J1(l.indexId,this.uid,a,i)))))}updateIndexEntries(e,n){const i=new Map;return M.forEach(n,(r,s)=>{const a=i.get(r.collectionGroup);return(a?M.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(o=>(i.set(r.collectionGroup,o),M.forEach(o,l=>this.zn(e,r,l).next(c=>{const h=this.jn(s,l);return c.isEqual(h)?M.resolve():this.Jn(e,s,l,c,h)}))))})}Hn(e,n,i,r){return jo(e).put(r.Rn(this.uid,this.$n(i,n.key),n.key))}Yn(e,n,i,r){return jo(e).delete(r.Vn(this.uid,this.$n(i,n.key),n.key))}zn(e,n,i){const r=jo(e);let s=new ke(rs);return r.ee({index:qk,range:IDBKeyRange.only([i.indexId,this.uid,Sm(this.$n(i,n))])},(a,o)=>{s=s.add(new Oa(i.indexId,n,ix(o.arrayValue),ix(o.directionalValue)))}).next(()=>s)}jn(e,n){let i=new ke(rs);const r=this.Qn(n,e);if(r==null)return i;const s=y0(n);if(s!=null){const a=e.data.field(s.fieldPath);if(Xh(a))for(const o of a.arrayValue.values||[])i=i.add(new Oa(n.indexId,e.key,this.Ln(o),r))}else i=i.add(new Oa(n.indexId,e.key,Mf,r));return i}Jn(e,n,i,r,s){H(ax,"Updating index entries for document '%s'",n.key);const a=[];return function(l,c,h,d,f){const g=l.getIterator(),b=c.getIterator();let E=Lo(g),x=Lo(b);for(;E||x;){let w=!1,v=!1;if(E&&x){const _=h(E,x);_<0?v=!0:_>0&&(w=!0)}else E!=null?v=!0:w=!0;w?(d(x),x=Lo(b)):v?(f(E),E=Lo(g)):(E=Lo(g),x=Lo(b))}}(r,s,rs,o=>{a.push(this.Hn(e,n,i,o))},o=>{a.push(this.Yn(e,n,i,o))}),M.waitFor(a)}Gn(e){let n=1;return zo(e).ee({index:Bk,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((a,o)=>rs(a,o)).filter((a,o,l)=>!o||rs(a,l[o-1])!==0);const r=[];r.push(e);for(const a of i){const o=rs(a,e),l=rs(a,n);if(o===0)r[0]=e.An();else if(o>0&&l<0)r.push(a),r.push(a.An());else if(l>0)break}r.push(n);const s=[];for(let a=0;a<r.length;a+=2){if(this.Zn(r[a],r[a+1]))return[];const o=r[a].Vn(this.uid,Mf,G.empty()),l=r[a+1].Vn(this.uid,Mf,G.empty());s.push(IDBKeyRange.bound(o,l))}return s}Zn(e,n){return rs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(lx)}getMinOffset(e,n){return M.mapArray(this.Mn(n),i=>this.xn(e,i).next(r=>r||X(44426))).next(lx)}}function ox(t){return Nt(t,Wh)}function jo(t){return Nt(t,oh)}function pu(t){return Nt(t,rT)}function zo(t){return Nt(t,ah)}function lx(t){ee(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const r=t[i].indexState.offset;tT(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Yn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WO=41943040;class nn{static withCacheSize(e){return new nn(e,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t,e,n){const i=t.store(Ei),r=t.store(Kl),s=[],a=IDBKeyRange.only(n.batchId);let o=0;const l=i.ee({range:a},(h,d,f)=>(o++,f.delete()));s.push(l.next(()=>{ee(o===1,47070,{batchId:n.batchId})}));const c=[];for(const h of n.mutations){const d=jk(e,h.key.path,n.batchId);s.push(r.delete(d)),c.push(h.key)}return M.waitFor(s).next(()=>c)}function xp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw X(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(WO,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);class jg{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Xn={}}static wt(e,n,i,r){ee(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new jg(s,n,i,r)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ss(e).ee({index:La,range:i},(r,s,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,i,r){const s=Yo(e),a=ss(e);return a.add({}).next(o=>{ee(typeof o=="number",49019);const l=new mT(o,n,i,r),c=function(g,b,E){const x=E.baseMutations.map(v=>ed(g.yt,v)),w=E.mutations.map(v=>ed(g.yt,v));return{userId:b,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:x,mutations:w}}(this.serializer,this.userId,l),h=[];let d=new ke((f,g)=>ae(f.canonicalString(),g.canonicalString()));for(const f of r){const g=jk(this.userId,f.key.path,o);d=d.add(f.key.path.popLast()),h.push(a.put(c)),h.push(s.put(g,M7))}return d.forEach(f=>{h.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[o]=l.keys()}),M.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return ss(e).get(n).next(i=>i?(ee(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:n}),Da(this.serializer,i)):null)}er(e,n){return this.Xn[n]?M.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){const r=i.keys();return this.Xn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return ss(e).ee({index:La,range:r},(a,o,l)=>{o.userId===this.userId&&(ee(o.batchId>=i,47524,{tr:i}),s=Da(this.serializer,o)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Ls;return ss(e).ee({index:La,range:n,reverse:!0},(r,s,a)=>{i=s.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ls],[this.userId,Number.POSITIVE_INFINITY]);return ss(e).J(La,n).next(i=>i.map(r=>Da(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=vm(this.userId,n.path),r=IDBKeyRange.lowerBound(i),s=[];return Yo(e).ee({range:r},(a,o,l)=>{const[c,h,d]=a,f=Hi(h);if(c===this.userId&&n.path.isEqual(f))return ss(e).get(d).next(g=>{if(!g)throw X(61480,{nr:a,batchId:d});ee(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:d}),s.push(Da(this.serializer,g))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ke(ae);const r=[];return n.forEach(s=>{const a=vm(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=Yo(e).ee({range:o},(c,h,d)=>{const[f,g,b]=c,E=Hi(g);f===this.userId&&s.path.isEqual(E)?i=i.add(b):d.done()});r.push(l)}),M.waitFor(r).next(()=>this.rr(e,i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1,s=vm(this.userId,i),a=IDBKeyRange.lowerBound(s);let o=new ke(ae);return Yo(e).ee({range:a},(l,c,h)=>{const[d,f,g]=l,b=Hi(f);d===this.userId&&i.isPrefixOf(b)?b.length===r&&(o=o.add(g)):h.done()}).next(()=>this.rr(e,o))}rr(e,n){const i=[],r=[];return n.forEach(s=>{r.push(ss(e).get(s).next(a=>{if(a===null)throw X(35274,{batchId:s});ee(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),i.push(Da(this.serializer,a))}))}),M.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return QO(e.le,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),M.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const i=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),r=[];return Yo(e).ee({range:i},(s,a,o)=>{if(s[0]===this.userId){const l=Hi(s[1]);r.push(l)}else o.done()}).next(()=>{ee(r.length===0,56720,{sr:r.map(s=>s.canonicalString())})})})}containsKey(e,n){return YO(e,this.userId,n)}_r(e){return XO(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ls,lastStreamToken:""})}}function YO(t,e,n){const i=vm(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let a=!1;return Yo(t).ee({range:s,X:!0},(o,l,c)=>{const[h,d,f]=o;h===e&&d===r&&(a=!0),c.done()}).next(()=>a)}function ss(t){return Nt(t,Ei)}function Yo(t){return Nt(t,Kl)}function XO(t){return Nt(t,Gh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new fo(0)}static cr(){return new fo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const i=new fo(n.highestTargetId);return n.highestTargetId=i.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>te.fromTimestamp(new Ce(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.lr(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.hr(e,r)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(i=>(i.targetCount+=1,this.Tr(n,i),this.hr(e,i))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Fo(e).delete(n.targetId)).next(()=>this.lr(e)).next(i=>(ee(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i)))}removeTargets(e,n,i){let r=0;const s=[];return Fo(e).ee((a,o)=>{const l=Du(o);l.sequenceNumber<=n&&i.get(l.targetId)===null&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(s)).next(()=>r)}forEachTarget(e,n){return Fo(e).ee((i,r)=>{const s=Du(r);n(s)})}lr(e){return ux(e).get(bp).next(n=>(ee(n!==null,2888),n))}hr(e,n){return ux(e).put(bp,n)}Pr(e,n){return Fo(e).put($O(this.serializer,n))}Tr(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const i=oo(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Fo(e).ee({range:r,index:Fk},(a,o,l)=>{const c=Du(o);Ld(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,i){const r=[],s=gs(e);return n.forEach(a=>{const o=on(a.path);r.push(s.put({targetId:i,path:o})),r.push(this.referenceDelegate.addReference(e,i,a))}),M.waitFor(r)}removeMatchingKeys(e,n,i){const r=gs(e);return M.forEach(n,s=>{const a=on(s.path);return M.waitFor([r.delete([i,a]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,n){const i=gs(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),r=gs(e);let s=ce();return r.ee({range:i,X:!0},(a,o,l)=>{const c=Hi(a[1]),h=new G(c);s=s.add(h)}).next(()=>s)}containsKey(e,n){const i=on(n.path),r=IDBKeyRange.bound([i],[Ck(i)],!1,!0);let s=0;return gs(e).ee({index:iT,X:!0,range:r},([a,o],l,c)=>{a!==0&&(s++,c.done())}).next(()=>s>0)}At(e,n){return Fo(e).get(n).next(i=>i?Du(i):null)}}function Fo(t){return Nt(t,Wl)}function ux(t){return Nt(t,Qa)}function gs(t){return Nt(t,Ql)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="LruGarbageCollector",r$=1048576;function dx([t,e],[n,i]){const r=ae(t,n);return r===0?ae(e,i):r}class s${constructor(e){this.Ir=e,this.buffer=new ke(dx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();dx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class JO{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(hx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){oa(n)?H(hx,"Ignoring IndexedDB error during garbage collection: ",n):await aa(n)}await this.Vr(3e5)})}}class a${constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Sn.ce);const i=new s$(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(cx)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cx):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,s,a,o,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,a=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,o=Date.now(),this.removeTargets(e,i,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(c=Date.now(),Go()<=fe.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${r} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}function ZO(t,e){return new a$(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e,n){this.db=e,this.garbageCollector=ZO(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(i,r)=>n(r))}addReference(e,n,i){return Lf(e,i)}removeReference(e,n,i){return Lf(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return Lf(e,n)}br(e,n){return function(r,s){let a=!1;return XO(r).te(o=>YO(r,o,s).next(l=>(l&&(a=!0),M.resolve(!l)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Sr(e,(a,o)=>{if(o<=n){const l=this.br(e,a).next(c=>{if(!c)return s++,i.getEntry(e,a).next(()=>(i.removeEntry(a,te.min()),gs(e).delete(function(d){return[0,on(d.path)]}(a))))});r.push(l)}}).next(()=>M.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return Lf(e,n)}Sr(e,n){const i=gs(e);let r,s=Sn.ce;return i.ee({index:iT},([a,o],{path:l,sequenceNumber:c})=>{a===0?(s!==Sn.ce&&n(new G(Hi(r)),s),s=c,r=l):s=Sn.ce}).next(()=>{s!==Sn.ce&&n(new G(Hi(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Lf(t,e){return gs(t).put(function(i,r){return{targetId:0,path:on(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(){this.changes=new $r(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$e.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?M.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return wa(e).put(i)}removeEntry(e,n,i){return wa(e).delete(function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Ip(a),o[o.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.Dr(e,i)))}getEntry(e,n){let i=$e.newInvalidDocument(n);return wa(e).ee({index:wm,range:IDBKeyRange.only(gu(n))},(r,s)=>{i=this.Cr(n,s)}).next(()=>i)}vr(e,n){let i={size:0,document:$e.newInvalidDocument(n)};return wa(e).ee({index:wm,range:IDBKeyRange.only(gu(n))},(r,s)=>{i={document:this.Cr(n,s),size:xp(s)}}).next(()=>i)}getEntries(e,n){let i=Rn();return this.Fr(e,n,(r,s)=>{const a=this.Cr(r,s);i=i.insert(r,a)}).next(()=>i)}Mr(e,n){let i=Rn(),r=new Fe(G.comparator);return this.Fr(e,n,(s,a)=>{const o=this.Cr(s,a);i=i.insert(s,o),r=r.insert(s,xp(a))}).next(()=>({documents:i,Or:r}))}Fr(e,n,i){if(n.isEmpty())return M.resolve();let r=new ke(px);n.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(gu(r.first()),gu(r.last())),a=r.getIterator();let o=a.getNext();return wa(e).ee({index:wm,range:s},(l,c,h)=>{const d=G.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&px(o,d)<0;)i(o,null),o=a.getNext();o&&o.isEqual(d)&&(i(o,c),o=a.hasNext()?a.getNext():null),o?h.j(gu(o)):h.done()}).next(()=>{for(;o;)i(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,s){const a=n.path,o=[a.popLast().toArray(),a.lastSegment(),Ip(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wa(e).J(IDBKeyRange.bound(o,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let h=Rn();for(const d of c){const f=this.Cr(G.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(jd(n,f)||r.has(f.key))&&(h=h.insert(f.key,f))}return h})}getAllFromCollectionGroup(e,n,i,r){let s=Rn();const a=mx(n,i),o=mx(n,Yn.max());return wa(e).ee({index:zk,range:IDBKeyRange.bound(a,o,!0)},(l,c,h)=>{const d=this.Cr(G.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===r&&h.done()}).next(()=>s)}newChangeBuffer(e){return new c$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return fx(e).get(_0).next(n=>(ee(!!n,20021),n))}Dr(e,n){return fx(e).put(_0,n)}Cr(e,n){if(n){const i=KH(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(te.min())))return i}return $e.newInvalidDocument(e)}}function tV(t){return new l$(t)}class c$ extends eV{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new $r(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const n=[];let i=0,r=new ke((s,a)=>ae(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const l=Y1(this.Nr.serializer,a);r=r.add(s.path.popLast());const c=xp(l);i+=c-o.size,n.push(this.Nr.addEntry(e,s,l))}else if(i-=o.size,this.trackRemovals){const l=Y1(this.Nr.serializer,a.convertToNoDocument(te.min()));n.push(this.Nr.addEntry(e,s,l))}}),r.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,i)),M.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(i=>(this.Br.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:i,Or:r})=>(r.forEach((s,a)=>{this.Br.set(s,{size:a,readTime:i.get(s).readTime})}),i))}}function fx(t){return Nt(t,Kh)}function wa(t){return Nt(t,wp)}function gu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mx(t,e){const n=e.documentKey.path.toArray();return[t,Ip(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function px(t,e){const n=t.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=ae(n[s],i[s]),r)return r;return r=ae(n.length,i.length),r||(r=ae(n[n.length-2],i[i.length-2]),r||ae(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&uh(i.mutation,r,xn.empty(),Ce.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ce()){const r=$i();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=Pu();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=$i();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ce()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,i,r){let s=Rn();const a=ch(),o=function(){return ch()}();return n.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof Gr)?s=s.insert(c.key,c):h!==void 0?(a.set(c.key,h.mutation.getFieldMask()),uh(h.mutation,c,h.mutation.getFieldMask(),Ce.now())):a.set(c.key,xn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>a.set(c,h)),n.forEach((c,h)=>o.set(c,new u$(h,a.get(c)??null))),o))}recalculateAndSaveOverlays(e,n){const i=ch();let r=new Fe((a,o)=>a-o),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||xn.empty();h=o.applyToLocalView(c,h),i.set(l,h);const d=(r.get(o.batchId)||ce()).add(l);r=r.insert(o.batchId,d)})}).next(()=>{const a=[],o=r.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,h=l.value,d=_O();h.forEach(f=>{if(!s.has(f)){const g=IO(n.get(f),i.get(f));g!==null&&d.set(f,g),s=s.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return M.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return G.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):uT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):M.resolve($i());let o=Gl,l=s;return a.next(c=>M.forEach(c,(h,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ce())).next(h=>({batchId:o,changes:yO(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(i=>{let r=Pu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=Pu();return this.indexManager.getCollectionParents(e,s).next(o=>M.forEach(o,l=>{const c=function(d,f){return new Hr(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((d,f)=>{a=a.insert(d,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(a=>{s.forEach((l,c)=>{const h=c.getKey();a.get(h)===null&&(a=a.insert(h,$e.newInvalidDocument(h)))});let o=Pu();return a.forEach((l,c)=>{const h=s.get(l);h!==void 0&&uh(h.mutation,c,xn.empty(),Ce.now()),jd(n,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:gt(r.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:vT(r.bundledQuery),readTime:gt(r.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${constructor(){this.overlays=new Fe(G.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const i=$i();return M.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.St(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),M.resolve()}getOverlaysForCollection(e,n,i){const r=$i(),s=n.length+1,a=new G(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return M.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Fe((c,h)=>c-h);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=$i(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const o=$i(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>o.set(c,h)),!(o.size()>=r)););return M.resolve(o)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new gT(n,i));let s=this.qr.get(n);s===void 0&&(s=ce(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f${constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.Qr=new ke(Ot.$r),this.Ur=new ke(Ot.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Ot(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new Ot(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new G(new ge([])),i=new Ot(n,e),r=new Ot(n,e+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new G(new ge([])),i=new Ot(n,e),r=new Ot(n,e+1);let s=ce();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Ot(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ot{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return G.comparator(e.key,n.key)||ae(e.Yr,n.Yr)}static Kr(e,n){return ae(e.Yr,n.Yr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ke(Ot.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new mT(s,n,i,r);this.mutationQueue.push(a);for(const o of r)this.Zr=this.Zr.add(new Ot(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return M.resolve(a)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Ls:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ot(n,0),r=new Ot(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const o=this.Xr(a.Yr);s.push(o)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ke(ae);return n.forEach(r=>{const s=new Ot(r,0),a=new Ot(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{i=i.add(o.Yr)})}),M.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;G.isDocumentKey(s)||(s=s.child(""));const a=new Ot(new G(s),0);let o=new ke(ae);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(o=o.add(l.Yr)),!0)},a),M.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ee(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return M.forEach(n.mutations,r=>{const s=new Ot(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new Ot(n,0),r=this.Zr.firstAfterOrEqual(i);return M.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(e){this.ri=e,this.docs=function(){return new Fe(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return M.resolve(i?i.document.mutableCopy():$e.newInvalidDocument(n))}getEntries(e,n){let i=Rn();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():$e.newInvalidDocument(r))}),M.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Rn();const a=n.path,o=new G(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||tT(Ok(h),i)<=0||(r.has(h.key)||jd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,i,r){X(9500)}ii(e,n){return M.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new g$(this)}getSize(e){return M.resolve(this.size)}}class g$ extends eV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(e){this.persistence=e,this.si=new $r(n=>oo(n),Ld),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.oi=0,this._i=new TT,this.targetCount=0,this.ai=fo.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new fo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=n&&i.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),M.waitFor(s).next(()=>r)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return M.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),M.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return M.resolve(i)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n){this.ui={},this.overlays={},this.ci=new Sn(0),this.li=!1,this.li=!0,this.hi=new f$,this.referenceDelegate=e(this),this.Pi=new y$(this),this.indexManager=new t$,this.remoteDocumentCache=function(r){return new p$(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new HO(n),this.Ii=new h$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new d$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new m$(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){H("MemoryPersistence","Starting transaction:",e);const r=new _$(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(e,n){return M.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class _$ extends Mk{constructor(e){super(),this.currentSequenceNumber=e}}class zg{constructor(e){this.persistence=e,this.Ri=new TT,this.Vi=null}static mi(e){return new zg(e)}get fi(){if(this.Vi)return this.Vi;throw X(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),M.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,i=>{const r=G.fromPath(i);return this.gi(e,r).next(s=>{s||n.removeEntry(r,te.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Rp{constructor(e,n){this.persistence=e,this.pi=new $r(i=>on(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=ZO(this,n)}static mi(e,n){return new Rp(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(i,r)=>this.br(e,i,r).next(s=>s?M.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(o=>{o||(i++,s.removeEntry(a,te.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),M.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Tm(e.data.value)),n}br(e,n,i){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return M.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(e){this.serializer=e}k(e,n,i,r){const s=new Cg("createOrUpgrade",n);i<1&&r>=1&&(function(l){l.createObjectStore(Md)}(e),function(l){l.createObjectStore(Gh,{keyPath:V7}),l.createObjectStore(Ei,{keyPath:S1,autoIncrement:!0}).createIndex(La,x1,{unique:!0}),l.createObjectStore(Kl)}(e),gx(e),function(l){l.createObjectStore(Ra)}(e));let a=M.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore(Ql),l.deleteObjectStore(Wl),l.deleteObjectStore(Qa)}(e),gx(e)),a=a.next(()=>function(l){const c=l.store(Qa),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:te.min().toTimestamp(),targetCount:0};return c.put(bp,h)}(s))),i<4&&r>=4&&(i!==0&&(a=a.next(()=>function(l,c){return c.store(Ei).J().next(d=>{l.deleteObjectStore(Ei),l.createObjectStore(Ei,{keyPath:S1,autoIncrement:!0}).createIndex(La,x1,{unique:!0});const f=c.store(Ei),g=d.map(b=>f.put(b));return M.waitFor(g)})}(e,s))),a=a.next(()=>{(function(l){l.createObjectStore(Yl,{keyPath:H7})})(e)})),i<5&&r>=5&&(a=a.next(()=>this.yi(s))),i<6&&r>=6&&(a=a.next(()=>(function(l){l.createObjectStore(Kh)}(e),this.wi(s)))),i<7&&r>=7&&(a=a.next(()=>this.Si(s))),i<8&&r>=8&&(a=a.next(()=>this.bi(e,s))),i<9&&r>=9&&(a=a.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(a=a.next(()=>this.Di(s))),i<11&&r>=11&&(a=a.next(()=>{(function(l){l.createObjectStore(Pg,{keyPath:$7})})(e),function(l){l.createObjectStore(Ng,{keyPath:G7})}(e)})),i<12&&r>=12&&(a=a.next(()=>{(function(l){const c=l.createObjectStore(Dg,{keyPath:Z7});c.createIndex(w0,eH,{unique:!1}),c.createIndex(Hk,tH,{unique:!1})})(e)})),i<13&&r>=13&&(a=a.next(()=>function(l){const c=l.createObjectStore(wp,{keyPath:L7});c.createIndex(wm,U7),c.createIndex(zk,j7)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(Ra))),i<14&&r>=14&&(a=a.next(()=>this.Fi(e,s))),i<15&&r>=15&&(a=a.next(()=>function(l){l.createObjectStore(rT,{keyPath:K7,autoIncrement:!0}).createIndex(v0,W7,{unique:!1}),l.createObjectStore(ah,{keyPath:Q7}).createIndex(Bk,Y7,{unique:!1}),l.createObjectStore(oh,{keyPath:X7}).createIndex(qk,J7,{unique:!1})}(e))),i<16&&r>=16&&(a=a.next(()=>{n.objectStore(ah).clear()}).next(()=>{n.objectStore(oh).clear()})),i<17&&r>=17&&(a=a.next(()=>{(function(l){l.createObjectStore(sT,{keyPath:nH})})(e)})),i<18&&r>=18&&cD()&&(a=a.next(()=>{n.objectStore(ah).clear()}).next(()=>{n.objectStore(oh).clear()})),a}wi(e){let n=0;return e.store(Ra).ee((i,r)=>{n+=xp(r)}).next(()=>{const i={byteSize:n};return e.store(Kh).put(_0,i)})}yi(e){const n=e.store(Gh),i=e.store(Ei);return n.J().next(r=>M.forEach(r,s=>{const a=IDBKeyRange.bound([s.userId,Ls],[s.userId,s.lastAcknowledgedBatchId]);return i.J(La,a).next(o=>M.forEach(o,l=>{ee(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=Da(this.serializer,l);return QO(e,s.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(Ql),i=e.store(Ra);return e.store(Qa).get(bp).next(r=>{const s=[];return i.ee((a,o)=>{const l=new ge(a),c=function(d){return[0,on(d)]}(l);s.push(n.get(c).next(h=>h?M.resolve():(d=>n.put({targetId:0,path:on(d),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(s))})}bi(e,n){e.createObjectStore(Wh,{keyPath:q7});const i=n.store(Wh),r=new bT,s=a=>{if(r.add(a)){const o=a.lastSegment(),l=a.popLast();return i.put({collectionId:o,parent:on(l)})}};return n.store(Ra).ee({X:!0},(a,o)=>{const l=new ge(a);return s(l.popLast())}).next(()=>n.store(Kl).ee({X:!0},([a,o,l],c)=>{const h=Hi(o);return s(h.popLast())}))}Di(e){const n=e.store(Wl);return n.ee((i,r)=>{const s=Du(r),a=$O(this.serializer,s);return n.put(a)})}Ci(e,n){const i=n.store(Ra),r=[];return i.ee((s,a)=>{const o=n.store(wp),l=function(d){return d.document?new G(ge.fromString(d.document.name).popFirst(5)):d.noDocument?G.fromSegments(d.noDocument.path):d.unknownDocument?G.fromSegments(d.unknownDocument.path):X(36783)}(a).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(o.put(c))}).next(()=>M.waitFor(r))}Fi(e,n){const i=n.store(Ei),r=tV(this.serializer),s=new ET(zg.mi,this.serializer.yt);return i.J().next(a=>{const o=new Map;return a.forEach(l=>{let c=o.get(l.userId)??ce();Da(this.serializer,l).keys().forEach(h=>c=c.add(h)),o.set(l.userId,c)}),M.forEach(o,(l,c)=>{const h=new Mt(c),d=Ug.wt(this.serializer,h),f=s.getIndexManager(h),g=jg.wt(h,this.serializer,f,s.referenceDelegate);return new nV(r,g,d,f).recalculateAndSaveOverlaysForDocumentKeys(new b0(n,Sn.ce),l).next()})})}}function gx(t){t.createObjectStore(Ql,{keyPath:F7}).createIndex(iT,B7,{unique:!0}),t.createObjectStore(Wl,{keyPath:"targetId"}).createIndex(Fk,z7,{unique:!0}),t.createObjectStore(Qa)}const as="IndexedDbPersistence",C_=18e5,P_=5e3,N_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",iV="main";class AT{constructor(e,n,i,r,s,a,o,l,c,h,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.Mi=s,this.window=a,this.document=o,this.xi=c,this.Oi=h,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!AT.v())throw new B(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new o$(this,r),this.$i=n+iV,this.serializer=new HO(l),this.Ui=new Wi(this.$i,this.Ni,new v$(this.serializer)),this.hi=new QH,this.Pi=new i$(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tV(this.serializer),this.Ii=new WH,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&mt(as,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new B(U.FAILED_PRECONDITION,N_);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Sn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Uf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(oa(e))return H(as,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return H(as,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return yu(e).get(Mo).next(n=>M.resolve(this.es(n)))}ts(e){return Uf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,C_)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=Nt(n,Yl);return i.J().next(r=>{const s=this.ss(r,C_),a=r.filter(o=>s.indexOf(o)===-1);return M.forEach(a,o=>i.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?M.resolve(!0):yu(e).get(Mo).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,P_)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new B(U.FAILED_PRECONDITION,N_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Uf(e).J().next(i=>this.ss(i,P_).find(r=>{if(this.clientId!==r.clientId){const s=!this.networkEnabled&&r.networkEnabled,a=!this.inForeground&&r.inForeground,o=this.networkEnabled===r.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&H(as,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Md,Yl],e=>{const n=new b0(e,Sn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(i=>this.rs(i.updateTimeMs,n)&&!this.us(i.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Uf(e).J().next(n=>this.ss(n,C_).map(i=>i.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return jg.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new n$(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Ug.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,i){H(as,"Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?sH:l===17?Wk:l===16?rH:l===15?aT:l===14?Kk:l===13?Gk:l===12?iH:l===11?$k:void X(60245)}(this.Ni);let a;return this.Ui.runTransaction(e,r,s,o=>(a=new b0(o,this.ci?this.ci.next():Sn.ce),n==="readwrite-primary"?this.Hi(a).next(l=>!!l||this.Yi(a)).next(l=>{if(!l)throw mt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new B(U.FAILED_PRECONDITION,Vk);return i(a)}).next(l=>this.Xi(a).next(()=>l)):this.Is(a).next(()=>i(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Is(e){return yu(e).get(Mo).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,P_)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new B(U.FAILED_PRECONDITION,N_)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yu(e).put(Mo,n)}static v(){return Wi.v()}Zi(e){const n=yu(e);return n.get(Mo).next(i=>this.es(i)?(H(as,"Releasing primary lease."),n.delete(Mo)):M.resolve())}rs(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(mt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;lD()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const i=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return H(as,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return mt(as,"Failed to get zombied client id.",i),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){mt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function yu(t){return Nt(t,Md)}function Uf(t){return Nt(t,Yl)}function IT(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=ce(),r=ce();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ST(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return lD()?8:Lk(Ee())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.ys(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new w$;return this.Ss(e,n,a).next(o=>{if(s.result=o,this.Vs)return this.bs(e,n,a,o.size)})}).next(()=>s.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(Go()<=fe.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Ko(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(Go()<=fe.DEBUG&&H("QueryEngine","Query:",Ko(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Go()<=fe.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Ko(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_n(n))):M.resolve())}ys(e,n){if(z1(n))return M.resolve(null);let i=_n(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Ap(n,null,"F"),i=_n(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=ce(...s);return this.ps.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Ds(n,o);return this.Cs(n,c,a,l.readTime)?this.ys(e,Ap(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,i,r){return z1(n)||r.isEqual(te.min())?M.resolve(null):this.ps.getDocuments(e,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?M.resolve(null):(Go()<=fe.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ko(n)),this.vs(e,a,n,kk(r,Gl)).next(o=>o))})}Ds(e,n){let i=new ke(pO(e));return n.forEach((r,s)=>{jd(e,s)&&(i=i.add(s))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,n,i){return Go()<=fe.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Ko(n)),this.ps.getDocumentsMatchingQuery(e,n,Yn.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="LocalStore",b$=3e8;class T${constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Fe(ae),this.xs=new $r(s=>oo(s),Ld),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function sV(t,e,n,i){return new T$(t,e,n,i)}async function aV(t,e){const n=Q(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],o=[];let l=ce();for(const c of r){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({Ls:c,removedBatchIds:a,addedBatchIds:o}))})})}function E$(t,e){const n=Q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,c,h){const d=c.batch,f=d.keys();let g=M.resolve();return f.forEach(b=>{g=g.next(()=>h.getEntry(l,b)).next(E=>{const x=c.docVersions.get(b);ee(x!==null,48541),E.version.compareTo(x)<0&&(d.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let l=ce();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function oV(t){const e=Q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function A$(t,e){const n=Q(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const o=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;o.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,d)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(ct.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,i)),r=r.insert(d,g),function(E,x,w){return E.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=b$?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,g,h)&&o.push(n.Pi.updateTargetData(s,g))});let l=Rn(),c=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),o.push(lV(s,a,e.documentUpdates).next(h=>{l=h.ks,c=h.qs})),!i.isEqual(te.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));o.push(h)}return M.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ms=r,s))}function lV(t,e,n){let i=ce(),r=ce();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=Rn();return n.forEach((o,l)=>{const c=s.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(o)),l.isNoDocument()&&l.version.isEqual(te.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):H(xT,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{ks:a,qs:r}})}function I$(t,e){const n=Q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Ls),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function ic(t,e){const n=Q(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(s=>s?(r=s,M.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new vr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function rc(t,e,n){const i=Q(t),r=i.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!oa(a))throw a;H(xT,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function Cp(t,e,n){const i=Q(t);let r=te.min(),s=ce();return i.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,h){const d=Q(l),f=d.xs.get(h);return f!==void 0?M.resolve(d.Ms.get(f)):d.Pi.getTargetData(c,h)}(i,a,_n(e)).next(o=>{if(o)return r=o.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:te.min(),n?s:ce())).next(o=>(hV(i,mO(e),o),{documents:o,Qs:s})))}function cV(t,e){const n=Q(t),i=Q(n.Pi),r=n.Ms.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",s=>i.At(s,e).next(a=>a?a.target:null))}function uV(t,e){const n=Q(t),i=n.Os.get(e)||te.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.Ns.getAllFromCollectionGroup(r,e,kk(i,Gl),Number.MAX_SAFE_INTEGER)).then(r=>(hV(n,e,r),r))}function hV(t,e,n){let i=t.Os.get(e)||te.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.Os.set(e,i)}async function S$(t,e,n,i){const r=Q(t);let s=ce(),a=Rn();for(const c of n){const h=e.$s(c.metadata.name);c.document&&(s=s.add(h));const d=e.Us(c);d.setReadTime(e.Ks(c.metadata.readTime)),a=a.insert(h,d)}const o=r.Ns.newChangeBuffer({trackRemovals:!0}),l=await ic(r,function(h){return _n(Rc(ge.fromString(`__bundle__/docs/${h}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>lV(c,o,a).next(h=>(o.apply(c),h)).next(h=>r.Pi.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Pi.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,h.ks,h.qs)).next(()=>h.ks)))}async function x$(t,e,n=ce()){const i=await ic(t,_n(vT(e.bundledQuery))),r=Q(t);return r.persistence.runTransaction("Save named query","readwrite",s=>{const a=gt(e.readTime);if(i.snapshotVersion.compareTo(a)>=0)return r.Ii.saveNamedQuery(s,e);const o=i.withResumeToken(ct.EMPTY_BYTE_STRING,a);return r.Ms=r.Ms.insert(o.targetId,o),r.Pi.updateTargetData(s,o).next(()=>r.Pi.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Pi.addMatchingKeys(s,n,i.targetId)).next(()=>r.Ii.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV="firestore_clients";function yx(t,e){return`${dV}_${t}_${e}`}const fV="firestore_mutations";function _x(t,e,n){let i=`${fV}_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const mV="firestore_targets";function D_(t,e){return`${mV}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="SharedClientState";class Pp{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Ws(e,n,i){const r=JSON.parse(i);let s,a=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(s=new B(r.error.code,r.error.message))),a?new Pp(e,n,r.state,s):(mt(Oi,`Failed to parse mutation state for ID '${n}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hh{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Ws(e,n){const i=JSON.parse(n);let r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new B(i.error.code,i.error.message))),s?new hh(e,i.state,r):(mt(Oi,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Np{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const i=JSON.parse(n);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=hT();for(let a=0;r&&a<i.activeTargetIds.length;++a)r=Uk(i.activeTargetIds[a]),s=s.add(i.activeTargetIds[a]);return r?new Np(e,s):(mt(Oi,`Failed to parse client data for instance '${e}': ${n}`),null)}}class RT{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new RT(n.clientId,n.onlineState):(mt(Oi,`Failed to parse online state: ${e}`),null)}}class M0{constructor(){this.activeTargetIds=hT()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class k_{constructor(e,n,i,r,s){this.window=e,this.Mi=n,this.persistenceKey=i,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Fe(ae),this.started=!1,this.Xs=[];const a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=yx(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new M0),this.ro=new RegExp(`^${dV}_${a}_([^_]*)$`),this.io=new RegExp(`^${fV}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${mV}_${a}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const r=this.getItem(yx(this.persistenceKey,i));if(r){const s=Np.Ws(i,r);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const i=this.uo(n);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,i){this.ho(e,n,i),this.Po(e)}addLocalQueryTarget(e,n=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(D_(this.persistenceKey,e));if(r){const s=hh.Ws(e,r);s&&(i=s.state)}}return n&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(D_(this.persistenceKey,e))}updateQueryState(e,n,i){this.Io(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Po(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return H(Oi,"READ",e,n),n}setItem(e,n){H(Oi,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){H(Oi,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(H(Oi,"EVENT",n.key,n.newValue),n.key===this.eo)return void mt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const i=this.Ro(n.key);return this.Vo(i,null)}{const i=this.mo(n.key,n.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(n.key)){if(n.newValue!==null){const i=this.fo(n.key,n.newValue);if(i)return this.po(i)}}else if(this.so.test(n.key)){if(n.newValue!==null){const i=this.yo(n.key,n.newValue);if(i)return this.wo(i)}}else if(n.key===this.oo){if(n.newValue!==null){const i=this.uo(n.newValue);if(i)return this.co(i)}}else if(n.key===this.no){const i=function(s){let a=Sn.ce;if(s!=null)try{const o=JSON.parse(s);ee(typeof o=="number",30636,{So:s}),a=o}catch(o){mt(Oi,"Failed to read sequence number from WebStorage",o)}return a}(n.newValue);i!==Sn.ce&&this.sequenceNumberHandler(i)}else if(n.key===this._o){const i=this.bo(n.newValue);await Promise.all(i.map(r=>this.syncEngine.Do(r)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,i){const r=new Pp(this.currentUser,e,n,i),s=_x(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Gs())}Po(e){const n=_x(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,i){const r=D_(this.persistenceKey,e),s=new hh(e,n,i);this.setItem(r,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const i=this.Ro(e);return Np.Ws(i,n)}fo(e,n){const i=this.io.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return Pp.Ws(new Mt(s),r,n)}yo(e,n){const i=this.so.exec(e),r=Number(i[1]);return hh.Ws(r,n)}uo(e){return RT.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);H(Oi,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const i=n?this.Zs.insert(e,n):this.Zs.remove(e),r=this.lo(this.Zs),s=this.lo(i),a=[],o=[];return s.forEach(l=>{r.has(l)||a.push(l)}),r.forEach(l=>{s.has(l)||o.push(l)}),this.syncEngine.Fo(a,o).then(()=>{this.Zs=i})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=hT();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}}class pV{constructor(){this.Mo=new M0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new M0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="ConnectivityMonitor";class wx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(vx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(vx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jf=null;function L0(){return jf===null?jf=function(){return 268435456+Math.round(2147483648*Math.random())}():jf++,"0x"+jf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="RestConnection",C$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class P${get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===T0?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,s){const a=L0(),o=this.zo(e,n.toUriEncodedString());H(O_,`Sending RPC '${e}' ${a}:`,o,i);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,s);const{host:c}=new URL(o),h=sr(c);return this.Jo(e,o,l,i,h).then(d=>(H(O_,`Received RPC '${e}' ${a}: `,d),d),d=>{throw tr(O_,`RPC '${e}' ${a} failed with error: `,d,"url: ",o,"request:",i),d})}Ho(e,n,i,r,s,a){return this.Go(e,n,i,r,s)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}zo(e,n){const i=C$[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N${constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class D$ extends P${constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,s){const a=L0();return new Promise((o,l)=>{const c=new Tk;c.setWithCredentials(!0),c.listenOnce(Ek.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ym.NO_ERROR:const d=c.getResponseJson();H(Zt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case ym.TIMEOUT:H(Zt,`RPC '${e}' ${a} timed out`),l(new B(U.DEADLINE_EXCEEDED,"Request time out"));break;case ym.HTTP_ERROR:const f=c.getStatus();if(H(Zt,`RPC '${e}' ${a} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g==null?void 0:g.error;if(b&&b.status&&b.message){const E=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(v)>=0?v:U.UNKNOWN}(b.status);l(new B(E,b.message))}else l(new B(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new B(U.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{H(Zt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(r);H(Zt,`RPC '${e}' ${a} sending request:`,r),c.send(n,"POST",h,i,15)})}T_(e,n,i){const r=L0(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Sk(),o=Ik(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");H(Zt,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=a.createWebChannel(h,l);this.I_(d);let f=!1,g=!1;const b=new N$({Yo:x=>{g?H(Zt,`Not sending because RPC '${e}' stream ${r} is closed:`,x):(f||(H(Zt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),H(Zt,`RPC '${e}' stream ${r} sending:`,x),d.send(x))},Zo:()=>d.close()}),E=(x,w,v)=>{x.listen(w,_=>{try{v(_)}catch(I){setTimeout(()=>{throw I},0)}})};return E(d,Cu.EventType.OPEN,()=>{g||(H(Zt,`RPC '${e}' stream ${r} transport opened.`),b.o_())}),E(d,Cu.EventType.CLOSE,()=>{g||(g=!0,H(Zt,`RPC '${e}' stream ${r} transport closed`),b.a_(),this.E_(d))}),E(d,Cu.EventType.ERROR,x=>{g||(g=!0,tr(Zt,`RPC '${e}' stream ${r} transport errored. Name:`,x.name,"Message:",x.message),b.a_(new B(U.UNAVAILABLE,"The operation could not be completed")))}),E(d,Cu.EventType.MESSAGE,x=>{var w;if(!g){const v=x.data[0];ee(!!v,16349);const _=v,I=(_==null?void 0:_.error)||((w=_[0])==null?void 0:w.error);if(I){H(Zt,`RPC '${e}' stream ${r} received error:`,I);const k=I.status;let V=function(S){const R=_t[S];if(R!==void 0)return RO(R)}(k),A=I.message;V===void 0&&(V=U.INTERNAL,A="Unknown error status: "+k+" with message "+I.message),g=!0,b.a_(new B(V,A)),d.close()}else H(Zt,`RPC '${e}' stream ${r} received:`,v),b.u_(v)}}),E(o,Ak.STAT_EVENT,x=>{x.stat===p0.PROXY?H(Zt,`RPC '${e}' stream ${r} detected buffering proxy`):x.stat===p0.NOPROXY&&H(Zt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(){return typeof window<"u"?window:null}function xm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t){return new LH(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&H("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="PersistentStream";class yV{constructor(e,n,i,r,s,a,o,l){this.Mi=e,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new CT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(mt(n.toString()),mt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new B(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(bx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(H(bx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class k$ extends yV{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=zH(this.serializer,e),i=function(s){if(!("targetChange"in s))return te.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?te.min():a.readTime?gt(a.readTime):te.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=N0(this.serializer),n.addTarget=function(s,a){let o;const l=a.target;if(o=Tp(l)?{documents:UO(s,l)}:{query:jO(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=DO(s,a.resumeToken);const c=C0(s,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(te.min())>0){o.readTime=nc(s,a.snapshotVersion.toTimestamp());const c=C0(s,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const i=BH(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=N0(this.serializer),n.removeTarget=e,this.q_(n)}}class O$ extends yV{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=FH(e.writeResults,e.commitTime),i=gt(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=N0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>ed(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${}class M$ extends V${constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new B(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,P0(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(U.UNKNOWN,s.toString())})}Ho(e,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(e,P0(n,i),r,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new B(U.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class L${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mt(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="RemoteStore";class U${constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{ca(this)&&(H(mo,"Restarting streams for network reachability change."),await async function(l){const c=Q(l);c.Ea.add(4),await Nc(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Hd(c)}(this))})}),this.Ra=new L$(i,r)}}async function Hd(t){if(ca(t))for(const e of t.da)await e(!0)}async function Nc(t){for(const e of t.da)await e(!1)}function Fg(t,e){const n=Q(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),DT(n)?NT(n):kc(n).O_()&&PT(n,e))}function sc(t,e){const n=Q(t),i=kc(n);n.Ia.delete(e),i.O_()&&_V(n,e),n.Ia.size===0&&(i.O_()?i.L_():ca(n)&&n.Ra.set("Unknown"))}function PT(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}kc(t).Y_(e)}function _V(t,e){t.Va.Ue(e),kc(t).Z_(e)}function NT(t){t.Va=new kH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),kc(t).start(),t.Ra.ua()}function DT(t){return ca(t)&&!kc(t).x_()&&t.Ia.size>0}function ca(t){return Q(t).Ea.size===0}function vV(t){t.Va=void 0}async function j$(t){t.Ra.set("Online")}async function z$(t){t.Ia.forEach((e,n)=>{PT(t,e)})}async function F$(t,e){vV(t),DT(t)?(t.Ra.ha(e),NT(t)):t.Ra.set("Unknown")}async function B$(t,e,n){if(t.Ra.set("Online"),e instanceof NO&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const o of s.targetIds)r.Ia.has(o)&&(await r.remoteSyncer.rejectListen(o,a),r.Ia.delete(o),r.Va.removeTarget(o))}(t,e)}catch(i){H(mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Dp(t,i)}else if(e instanceof Im?t.Va.Ze(e):e instanceof PO?t.Va.st(e):t.Va.tt(e),!n.isEqual(te.min()))try{const i=await oV(t.localStore);n.compareTo(i)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(c);h&&s.Ia.set(c,h.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(ct.EMPTY_BYTE_STRING,h.snapshotVersion)),_V(s,l);const d=new vr(h.target,l,c,h.sequenceNumber);PT(s,d)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(i){H(mo,"Failed to raise snapshot:",i),await Dp(t,i)}}async function Dp(t,e,n){if(!oa(e))throw e;t.Ea.add(1),await Nc(t),t.Ra.set("Offline"),n||(n=()=>oV(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(mo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Hd(t)})}function wV(t,e){return e().catch(n=>Dp(t,n,e))}async function Dc(t){const e=Q(t),n=Xs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ls;for(;q$(e);)try{const r=await I$(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,H$(e,r)}catch(r){await Dp(e,r)}bV(e)&&TV(e)}function q$(t){return ca(t)&&t.Ta.length<10}function H$(t,e){t.Ta.push(e);const n=Xs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function bV(t){return ca(t)&&!Xs(t).x_()&&t.Ta.length>0}function TV(t){Xs(t).start()}async function $$(t){Xs(t).ra()}async function G$(t){const e=Xs(t);for(const n of t.Ta)e.ea(n.mutations)}async function K$(t,e,n){const i=t.Ta.shift(),r=pT.from(i,e,n);await wV(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Dc(t)}async function W$(t,e){e&&Xs(t).X_&&await async function(i,r){if(function(a){return xO(a)&&a!==U.ABORTED}(r.code)){const s=i.Ta.shift();Xs(i).B_(),await wV(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Dc(i)}}(t,e),bV(t)&&TV(t)}async function Tx(t,e){const n=Q(t);n.asyncQueue.verifyOperationInProgress(),H(mo,"RemoteStore received new credentials");const i=ca(n);n.Ea.add(3),await Nc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Hd(n)}async function U0(t,e){const n=Q(t);e?(n.Ea.delete(2),await Hd(n)):e||(n.Ea.add(2),await Nc(n),n.Ra.set("Unknown"))}function kc(t){return t.ma||(t.ma=function(n,i,r){const s=Q(n);return s.sa(),new k$(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:j$.bind(null,t),t_:z$.bind(null,t),r_:F$.bind(null,t),H_:B$.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),DT(t)?NT(t):t.Ra.set("Unknown")):(await t.ma.stop(),vV(t))})),t.ma}function Xs(t){return t.fa||(t.fa=function(n,i,r){const s=Q(n);return s.sa(),new O$(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:$$.bind(null,t),r_:W$.bind(null,t),ta:G$.bind(null,t),na:K$.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Dc(t)):(await t.fa.stop(),t.Ta.length>0&&(H(mo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Yt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,o=new kT(e,n,a,r,s);return o.start(i),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Oc(t,e){if(mt("AsyncQueue",`${e}: ${t}`),oa(t))return new B(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{static emptySet(e){return new Sl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||G.comparator(n.key,i.key):(n,i)=>G.comparator(n.key,i.key),this.keyedMap=Pu(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Sl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.ga=new Fe(G.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):X(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class ac{constructor(e,n,i,r,s,a,o,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new ac(e,n,Sl.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ud(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q${constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Y${constructor(){this.queries=Ax(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Q(n),s=r.queries;r.queries=Ax(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(i)})})(this,new B(U.ABORTED,"Firestore shutting down"))}}function Ax(){return new $r(t=>fO(t),Ud)}async function OT(t,e){const n=Q(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.ba()&&e.Da()&&(i=2):(s=new Q$,i=e.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const o=Oc(a,`Initialization of query '${Ko(e.query)}' failed`);return void e.onError(o)}n.queries.set(r,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&MT(n)}async function VT(t,e){const n=Q(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=e.Da()?0:1:!s.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function X$(t,e){const n=Q(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const o of a.Sa)o.Fa(r)&&(i=!0);a.wa=r}}i&&MT(n)}function J$(t,e,n){const i=Q(t),r=i.queries.get(e);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(e)}function MT(t){t.Ca.forEach(e=>{e.next()})}var j0,Ix;(Ix=j0||(j0={})).Ma="default",Ix.Cache="cache";class LT{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new ac(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ac.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==j0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.serializer=e}$s(e){return Qi(this.serializer,e)}Us(e){return e.metadata.exists?LO(this.serializer,e.document,!1):$e.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return gt(e)}}class eG{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=EV(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const i=ge.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,i=new Sx(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.$s(r.metadata.name);for(const a of r.metadata.queries){const o=(n.get(a)||ce()).add(s);n.set(a,o)}}return n}async ja(e){const n=await S$(e,new Sx(this.serializer),this.Wa,this.Ua.id),i=this.za(this.documents);for(const r of this.Ka)await x$(e,r,i.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function EV(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.key=e}}class IV{constructor(e){this.key=e}}class SV{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ce(),this.mutatedKeys=ce(),this.eu=pO(e),this.tu=new Sl(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Ex,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,o=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),g=jd(this.query,d)?d:null,b=!!f&&this.mutatedKeys.has(f.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let x=!1;f&&g?f.data.isEqual(g.data)?b!==E&&(i.track({type:3,doc:g}),x=!0):this.su(f,g)||(i.track({type:2,doc:g}),x=!0,(l&&this.eu(g,l)>0||c&&this.eu(g,c)<0)&&(o=!0)):!f&&g?(i.track({type:0,doc:g}),x=!0):f&&!g&&(i.track({type:1,doc:f}),x=!0,(l||c)&&(o=!0)),x&&(g?(a=a.add(g),s=E?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{tu:a,iu:i,Cs:o,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,d)=>function(g,b){const E=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Rt:x})}};return E(g)-E(b)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(i),r=r??!1;const o=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,c=l!==this.Za;return this.Za=l,a.length!==0||c?{snapshot:new ac(this.query,e.tu,s,a,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ex,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ce(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new IV(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new AV(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ac.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ua="SyncEngine";class tG{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class nG{constructor(e){this.key=e,this.hu=!1}}class iG{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new $r(o=>fO(o),Ud),this.Iu=new Map,this.Eu=new Set,this.du=new Fe(G.comparator),this.Au=new Map,this.Ru=new TT,this.Vu={},this.mu=new Map,this.fu=fo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rG(t,e,n=!0){const i=Bg(t);let r;const s=i.Tu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await xV(i,e,n,!0),r}async function sG(t,e){const n=Bg(t);await xV(n,e,!0,!1)}async function xV(t,e,n,i){const r=await ic(t.localStore,_n(e)),s=r.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return i&&(o=await UT(t,e,s,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&Fg(t.remoteStore,r),o}async function UT(t,e,n,i,r){t.pu=(d,f,g)=>async function(E,x,w,v){let _=x.view.ru(w);_.Cs&&(_=await Cp(E.localStore,x.query,!1).then(({documents:A})=>x.view.ru(A,_)));const I=v&&v.targetChanges.get(x.targetId),k=v&&v.targetMismatches.get(x.targetId)!=null,V=x.view.applyChanges(_,E.isPrimaryClient,I,k);return z0(E,x.targetId,V.au),V.snapshot}(t,d,f,g);const s=await Cp(t.localStore,e,!0),a=new SV(e,s.Qs),o=a.ru(s.documents),l=Bd.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=a.applyChanges(o,t.isPrimaryClient,l);z0(t,n,c.au);const h=new tG(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function aG(t,e,n){const i=Q(t),r=i.Tu.get(e),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!Ud(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await rc(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&sc(i.remoteStore,r.targetId),oc(i,r.targetId)}).catch(aa)):(oc(i,r.targetId),await rc(i.localStore,r.targetId,!0))}async function oG(t,e){const n=Q(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),sc(n.remoteStore,i.targetId))}async function lG(t,e,n){const i=BT(t);try{const r=await function(a,o){const l=Q(a),c=Ce.now(),h=o.reduce((g,b)=>g.add(b.key),ce());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=Rn(),E=ce();return l.Ns.getEntries(g,h).next(x=>{b=x,b.forEach((w,v)=>{v.isValidDocument()||(E=E.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,b)).next(x=>{d=x;const w=[];for(const v of o){const _=PH(v,d.get(v.key).overlayedDocument);_!=null&&w.push(new Gr(v.key,_,rO(_.value.mapValue),et.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,w,o)}).next(x=>{f=x;const w=x.applyToLocalDocumentSet(d,E);return l.documentOverlayCache.saveOverlays(g,x.batchId,w)})}).then(()=>({batchId:f.batchId,changes:yO(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,o,l){let c=a.Vu[a.currentUser.toKey()];c||(c=new Fe(ae)),c=c.insert(o,l),a.Vu[a.currentUser.toKey()]=c}(i,r.batchId,n),await Kr(i,r.changes),await Dc(i.remoteStore)}catch(r){const s=Oc(r,"Failed to persist write");n.reject(s)}}async function RV(t,e){const n=Q(t);try{const i=await A$(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(ee(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?ee(a.hu,14607):r.removedDocuments.size>0&&(ee(a.hu,42227),a.hu=!1))}),await Kr(n,i,e)}catch(i){await aa(i)}}function xx(t,e,n){const i=Q(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const o=a.view.va(e);o.snapshot&&r.push(o.snapshot)}),function(a,o){const l=Q(a);l.onlineState=o;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.Sa)f.va(o)&&(c=!0)}),c&&MT(l)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function cG(t,e,n){const i=Q(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),s=r&&r.key;if(s){let a=new Fe(G.comparator);a=a.insert(s,$e.newNoDocument(s,te.min()));const o=ce().add(s),l=new Fd(te.min(),new Map,new Fe(ae),a,o);await RV(i,l),i.du=i.du.remove(s),i.Au.delete(e),FT(i)}else await rc(i.localStore,e,!1).then(()=>oc(i,e,n)).catch(aa)}async function uG(t,e){const n=Q(t),i=e.batch.batchId;try{const r=await E$(n.localStore,e);zT(n,i,null),jT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Kr(n,r)}catch(r){await aa(r)}}async function hG(t,e,n){const i=Q(t);try{const r=await function(a,o){const l=Q(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,o).next(d=>(ee(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);zT(i,e,n),jT(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Kr(i,r)}catch(r){await aa(r)}}async function dG(t,e){const n=Q(t);ca(n.remoteStore)||H(ua,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(a){const o=Q(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>o.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(i===Ls)return void e.resolve();const r=n.mu.get(i)||[];r.push(e),n.mu.set(i,r)}catch(i){const r=Oc(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function jT(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function zT(t,e,n){const i=Q(t);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function oc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||CV(t,i)})}function CV(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(sc(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),FT(t))}function z0(t,e,n){for(const i of n)i instanceof AV?(t.Ru.addReference(i.key,e),fG(t,i)):i instanceof IV?(H(ua,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||CV(t,i.key)):X(19791,{wu:i})}function fG(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(H(ua,"New document in limbo: "+n),t.Eu.add(i),FT(t))}function FT(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new G(ge.fromString(e)),i=t.fu.next();t.Au.set(i,new nG(n)),t.du=t.du.insert(n,i),Fg(t.remoteStore,new vr(_n(Rc(n.path)),i,"TargetPurposeLimboResolution",Sn.ce))}}async function Kr(t,e,n){const i=Q(t),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((o,l)=>{a.push(i.pu(l,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=ST.As(l.targetId,c);s.push(d)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(l,c){const h=Q(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>M.forEach(c,f=>M.forEach(f.Es,g=>h.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>M.forEach(f.ds,g=>h.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!oa(d))throw d;H(xT,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const g=h.Ms.get(f),b=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(f,E)}}}(i.localStore,s))}async function mG(t,e){const n=Q(t);if(!n.currentUser.isEqual(e)){H(ua,"User change. New user:",e.toKey());const i=await aV(n.localStore,e);n.currentUser=e,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new B(U.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Kr(n,i.Ls)}}function pG(t,e){const n=Q(t),i=n.Au.get(e);if(i&&i.hu)return ce().add(i.key);{let r=ce();const s=n.Iu.get(e);if(!s)return r;for(const a of s){const o=n.Tu.get(a);r=r.unionWith(o.view.nu)}return r}}async function gG(t,e){const n=Q(t),i=await Cp(n.localStore,e.query,!0),r=e.view.cu(i);return n.isPrimaryClient&&z0(n,e.targetId,r.au),r}async function yG(t,e){const n=Q(t);return uV(n.localStore,e).then(i=>Kr(n,i))}async function _G(t,e,n,i){const r=Q(t),s=await function(o,l){const c=Q(o),h=Q(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>h.er(d,l).next(f=>f?c.localDocuments.getDocuments(d,f):M.resolve(null)))}(r.localStore,e);s!==null?(n==="pending"?await Dc(r.remoteStore):n==="acknowledged"||n==="rejected"?(zT(r,e,i||null),jT(r,e),function(o,l){Q(Q(o).mutationQueue).ir(l)}(r.localStore,e)):X(6720,"Unknown batchState",{Su:n}),await Kr(r,s)):H(ua,"Cannot apply mutation batch with id: "+e)}async function vG(t,e){const n=Q(t);if(Bg(n),BT(n),e===!0&&n.gu!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),r=await Rx(n,i.toArray());n.gu=!0,await U0(n.remoteStore,!0);for(const s of r)Fg(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const i=[];let r=Promise.resolve();n.Iu.forEach((s,a)=>{n.sharedClientState.isLocalQueryTarget(a)?i.push(a):r=r.then(()=>(oc(n,a),rc(n.localStore,a,!0))),sc(n.remoteStore,a)}),await r,await Rx(n,i),function(a){const o=Q(a);o.Au.forEach((l,c)=>{sc(o.remoteStore,c)}),o.Ru.Jr(),o.Au=new Map,o.du=new Fe(G.comparator)}(n),n.gu=!1,await U0(n.remoteStore,!1)}}async function Rx(t,e,n){const i=Q(t),r=[],s=[];for(const a of e){let o;const l=i.Iu.get(a);if(l&&l.length!==0){o=await ic(i.localStore,_n(l[0]));for(const c of l){const h=i.Tu.get(c),d=await gG(i,h);d.snapshot&&s.push(d.snapshot)}}else{const c=await cV(i.localStore,a);o=await ic(i.localStore,c),await UT(i,PV(c),a,!1,o.resumeToken)}r.push(o)}return i.Pu.H_(s),r}function PV(t){return dO(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function wG(t){return function(n){return Q(Q(n).persistence).Ts()}(Q(t).localStore)}async function bG(t,e,n,i){const r=Q(t);if(r.gu)return void H(ua,"Ignoring unexpected query state notification.");const s=r.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const a=await uV(r.localStore,mO(s[0])),o=Fd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ct.EMPTY_BYTE_STRING);await Kr(r,a,o);break}case"rejected":await rc(r.localStore,e,!0),oc(r,e,i);break;default:X(64155,n)}}async function TG(t,e,n){const i=Bg(t);if(i.gu){for(const r of e){if(i.Iu.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){H(ua,"Adding an already active target "+r);continue}const s=await cV(i.localStore,r),a=await ic(i.localStore,s);await UT(i,PV(s),a.targetId,!1,a.resumeToken),Fg(i.remoteStore,a)}for(const r of n)i.Iu.has(r)&&await rc(i.localStore,r,!1).then(()=>{sc(i.remoteStore,r),oc(i,r)}).catch(aa)}}function Bg(t){const e=Q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=RV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cG.bind(null,e),e.Pu.H_=X$.bind(null,e.eventManager),e.Pu.yu=J$.bind(null,e.eventManager),e}function BT(t){const e=Q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hG.bind(null,e),e}function EG(t,e,n){const i=Q(t);(async function(s,a,o){try{const l=await a.getMetadata();if(await function(g,b){const E=Q(g),x=gt(b.createTime);return E.persistence.runTransaction("hasNewerBundle","readonly",w=>E.Ii.getBundleMetadata(w,b.id)).then(w=>!!w&&w.createTime.compareTo(x)>=0)}(s.localStore,l))return await a.close(),o._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(l)),Promise.resolve(new Set);o._updateProgress(EV(l));const c=new eG(l,a.serializer);let h=await a.bu();for(;h;){const f=await c.Ga(h);f&&o._updateProgress(f),h=await a.bu()}const d=await c.ja(s.localStore);return await Kr(s,d.Ha,void 0),await function(g,b){const E=Q(g);return E.persistence.runTransaction("Save bundle","readwrite",x=>E.Ii.saveBundleMetadata(x,b))}(s.localStore,l),o._completeWith(d.progress),Promise.resolve(d.Ja)}catch(l){return tr(ua,`Loading bundle failed with ${l}`),o._failWith(l),Promise.resolve(new Set)}})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}class td{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return sV(this.persistence,new rV,e.initialUser,this.serializer)}Cu(e){return new ET(zg.mi,this.serializer)}Du(e){return new pV}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}td.provider={build:()=>new td};class AG extends td{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ee(this.persistence.referenceDelegate instanceof Rp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new JO(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new ET(i=>Rp.mi(i,n),this.serializer)}}class NV extends td{constructor(e,n,i){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await BT(this.xu.syncEngine),await Dc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return sV(this.persistence,new rV,e.initialUser,this.serializer)}Fu(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new JO(i,e.asyncQueue,n)}Mu(e,n){const i=new k7(n,this.persistence);return new D7(e.asyncQueue,i)}Cu(e){const n=IT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new AT(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,gV(),xm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new pV}}class IG extends NV{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof k_&&(this.sharedClientState.syncEngine={Co:_G.bind(null,n),vo:bG.bind(null,n),Fo:TG.bind(null,n),Ts:wG.bind(null,n),Do:yG.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async i=>{await vG(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}Du(e){const n=gV();if(!k_.v(n))throw new B(U.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=IT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new k_(n,e.asyncQueue,i,e.clientId,e.initialUser)}}class nd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>xx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mG.bind(null,this.syncEngine),await U0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Y$}()}createDatastore(e){const n=qd(e.databaseInfo.databaseId),i=function(s){return new D$(s)}(e.databaseInfo);return function(s,a,o,l){return new M$(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,a,o){return new U$(i,r,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>xx(this.syncEngine,n,0),function(){return wx.v()?new wx:new R$}())}createSyncEngine(e,n){return function(r,s,a,o,l,c,h){const d=new iG(r,s,a,o,l,c);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=Q(r);H(mo,"RemoteStore shutting down."),s.Ea.add(5),await Nc(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}nd.provider={build:()=>new nd};function Cx(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SG{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Yt,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(i=>{i&&i.$a()?this.metadata.resolve(i.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Qa)}`))},i=>this.metadata.reject(i))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),i=Number(n);isNaN(i)&&this.Qu(`length string (${n}) is not valid number`);const r=await this.$u(i);return new Z$(JSON.parse(r),e.length+i)}Uu(){return this.buffer.findIndex(e=>e===123)}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xG{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new B(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const a=Q(r),o={documents:s.map(d=>Zh(a.serializer,d))},l=await a.Ho("BatchGetDocuments",a.serializer.databaseId,ge.emptyPath(),o,s.length),c=new Map;l.forEach(d=>{const f=jH(a.serializer,d);c.set(f.key.toString(),f)});const h=[];return s.forEach(d=>{const f=c.get(d.toString());ee(!!f,55234,{key:d}),h.push(f)}),h}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Pc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=G.fromPath(i);this.mutations.push(new fT(r,this.precondition(r)))}),await async function(i,r){const s=Q(i),a={writes:r.map(o=>ed(s.serializer,o))};await s.Go("Commit",s.serializer.databaseId,ge.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw X(50498,{Gu:e.constructor.name});n=te.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new B(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(te.min())?et.exists(!1):et.updateTime(n):et.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(te.min()))throw new B(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return et.updateTime(n)}return et.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RG{constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.zu=i.maxAttempts,this.M_=new CT(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new xG(this.datastore),n=this.Hu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Yu(r)}))}).catch(i=>{this.Yu(i)})})}Hu(e){try{const n=this.updateFunction(e);return!Vd(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!xO(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="FirestoreClient";class CG{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Mt.UNAUTHENTICATED,this.clientId=Zb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{H(Js,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(H(Js,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Oc(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function V_(t,e){t.asyncQueue.verifyOperationInProgress(),H(Js,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await aV(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Px(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qT(t);H(Js,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Tx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Tx(e.remoteStore,r)),t._onlineComponents=e}async function qT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(Js,"Using user provided OfflineComponentProvider");try{await V_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===U.FAILED_PRECONDITION||r.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;tr("Error using user provided cache. Falling back to memory cache: "+n),await V_(t,new td)}}else H(Js,"Using default OfflineComponentProvider"),await V_(t,new AG(void 0));return t._offlineComponents}async function Hg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(Js,"Using user provided OnlineComponentProvider"),await Px(t,t._uninitializedComponentsProvider._online)):(H(Js,"Using default OnlineComponentProvider"),await Px(t,new nd))),t._onlineComponents}function DV(t){return qT(t).then(e=>e.persistence)}function HT(t){return qT(t).then(e=>e.localStore)}function kV(t){return Hg(t).then(e=>e.remoteStore)}function $T(t){return Hg(t).then(e=>e.syncEngine)}function PG(t){return Hg(t).then(e=>e.datastore)}async function lc(t){const e=await Hg(t),n=e.eventManager;return n.onListen=rG.bind(null,e.syncEngine),n.onUnlisten=aG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=sG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oG.bind(null,e.syncEngine),n}function NG(t){return t.asyncQueue.enqueue(async()=>{const e=await DV(t),n=await kV(t);return e.setNetworkEnabled(!0),function(r){const s=Q(r);return s.Ea.delete(0),Hd(s)}(n)})}function DG(t){return t.asyncQueue.enqueue(async()=>{const e=await DV(t),n=await kV(t);return e.setNetworkEnabled(!1),async function(r){const s=Q(r);s.Ea.add(0),await Nc(s),s.Ra.set("Offline")}(n)})}function kG(t,e){const n=new Yt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const o=await function(c,h){const d=Q(c);return d.persistence.runTransaction("read document","readonly",f=>d.localDocuments.getDocument(f,h))}(r,s);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new B(U.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const l=Oc(o,`Failed to get document '${s} from cache`);a.reject(l)}}(await HT(t),e,n)),n.promise}function OV(t,e,n={}){const i=new Yt;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const h=new qg({next:f=>{h.Nu(),a.enqueueAndForget(()=>VT(s,d));const g=f.docs.has(o);!g&&f.fromCache?c.reject(new B(U.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new B(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new LT(Rc(o.path),h,{includeMetadataChanges:!0,qa:!0});return OT(s,d)}(await lc(t),t.asyncQueue,e,n,i)),i.promise}function OG(t,e){const n=new Yt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const o=await Cp(r,s,!0),l=new SV(s,o.Qs),c=l.ru(o.documents),h=l.applyChanges(c,!1);a.resolve(h.snapshot)}catch(o){const l=Oc(o,`Failed to execute query '${s} against cache`);a.reject(l)}}(await HT(t),e,n)),n.promise}function VV(t,e,n={}){const i=new Yt;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const h=new qg({next:f=>{h.Nu(),a.enqueueAndForget(()=>VT(s,d)),f.fromCache&&l.source==="server"?c.reject(new B(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new LT(o,h,{includeMetadataChanges:!0,qa:!0});return OT(s,d)}(await lc(t),t.asyncQueue,e,n,i)),i.promise}function VG(t,e){const n=new qg(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,s){Q(r).Ca.add(s),s.next()}(await lc(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(r,s){Q(r).Ca.delete(s)}(await lc(t),n))}}function MG(t,e,n,i){const r=function(a,o){let l;return l=typeof a=="string"?CO().encode(a):a,function(h,d){return new SG(h,d)}(function(h,d){if(h instanceof Uint8Array)return Cx(h,d);if(h instanceof ArrayBuffer)return Cx(new Uint8Array(h),d);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),o)}(n,qd(e));t.asyncQueue.enqueueAndForget(async()=>{EG(await $T(t),r,i)})}function LG(t,e){return t.asyncQueue.enqueue(async()=>function(i,r){const s=Q(i);return s.persistence.runTransaction("Get named query","readonly",a=>s.Ii.getNamedQuery(a,r))}(await HT(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV="firestore.googleapis.com",Dx=!0;class kx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new B(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LV,this.ssl=Dx}else this.host=e.host,this.ssl=e.ssl??Dx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<r$)throw new B(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Pk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MV(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new B(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new B(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new B(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $d{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new w7;switch(i.type){case"firstParty":return new A7(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new B(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Nx.get(n);i&&(H("ComponentProvider","Removing Datastore"),Nx.delete(n),i.terminate())}(this),Promise.resolve()}}function UG(t,e,n,i={}){var c;t=Te(t,$d);const r=sr(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;r&&(Eb(`https://${o}`),Ab("Firestore",!0)),s.host!==LV&&s.host!==o&&tr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:r,emulatorOptions:i};if(!qs(l,a)&&(t._setSettings(l),i.mockUserToken)){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=Mt.MOCK_USER;else{h=iD(i.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new B(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Mt(f)}t._authCredentials=new b7(new Rk(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vn=class UV{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new UV(this.firestore,e,this._query)}},ze=class ku{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ku(this.firestore,e,this._key)}toJSON(){return{type:ku._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Od(n,ku._jsonSchema))return new ku(e,i||null,new G(ge.fromString(n.referencePath)))}};ze._jsonSchemaVersion="firestore/documentReference/1.0",ze._jsonSchema={type:At("string",ze._jsonSchemaVersion),referencePath:At("string")};let Us=class jV extends vn{constructor(e,n,i){super(e,n,Rc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ze(this.firestore,null,new G(e))}withConverter(e){return new jV(this.firestore,e,this._path)}};function zV(t,e,...n){if(t=Z(t),eT("collection","path",e),t instanceof $d){const i=ge.fromString(e,...n);return b1(i),new Us(t,null,i)}{if(!(t instanceof ze||t instanceof Us))throw new B(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ge.fromString(e,...n));return b1(i),new Us(t.firestore,null,i)}}function jG(t,e){if(t=Te(t,$d),eT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new B(U.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vn(t,null,function(i){return new Hr(ge.emptyPath(),i)}(e))}function kp(t,e,...n){if(t=Z(t),arguments.length===1&&(e=Zb.newId()),eT("doc","path",e),t instanceof $d){const i=ge.fromString(e,...n);return w1(i),new ze(t,null,new G(i))}{if(!(t instanceof ze||t instanceof Us))throw new B(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ge.fromString(e,...n));return w1(i),new ze(t.firestore,t instanceof Us?t.converter:null,new G(i))}}function FV(t,e){return t=Z(t),e=Z(e),(t instanceof ze||t instanceof Us)&&(e instanceof ze||e instanceof Us)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function BV(t,e){return t=Z(t),e=Z(e),t instanceof vn&&e instanceof vn&&t.firestore===e.firestore&&Ud(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="AsyncQueue";class Vx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new CT(this,"async_queue_retry"),this._c=()=>{const i=xm();i&&H(Ox,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=xm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=xm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Yt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!oa(e))throw e;H(Ox,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,mt("INTERNAL UNHANDLED ERROR: ",Mx(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=kT.createAndSchedule(this,e,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&X(47125,{Pc:Mx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Mx(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class zG{constructor(){this._progressObserver={},this._taskCompletionResolver=new Yt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FG=-1;let yt=class extends $d{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new Vx,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Vx(e),this._firestoreClient=void 0,await e}}};function ln(t){if(t._terminated)throw new B(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||qV(t),t._firestoreClient}function qV(t){var i,r,s;const e=t._freezeSettings(),n=function(o,l,c,h){return new lH(o,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,MV(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new CG(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}function BG(t,e){tr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return HV(t,nd.provider,{build:i=>new NV(i,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function qG(t){tr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();HV(t,nd.provider,{build:n=>new IG(n,e.cacheSizeBytes)})}function HV(t,e,n){if((t=Te(t,yt))._firestoreClient||t._terminated)throw new B(U.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new B(U.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},qV(t)}function HG(t){if(t._initialized&&!t._terminated)throw new B(U.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Yt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(i){if(!Wi.v())return Promise.resolve();const r=i+iV;await Wi.delete(r)}(IT(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function $G(t){return function(n){const i=new Yt;return n.asyncQueue.enqueueAndForget(async()=>dG(await $T(n),i)),i.promise}(ln(t=Te(t,yt)))}function GG(t){return NG(ln(t=Te(t,yt)))}function KG(t){return DG(ln(t=Te(t,yt)))}function WG(t,e){const n=ln(t=Te(t,yt)),i=new zG;return MG(n,t._databaseId,e,i),i}function QG(t,e){return LG(ln(t=Te(t,yt)),e).then(n=>n?new vn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rn(ct.fromBase64String(e))}catch(n){throw new B(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rn(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Od(e,rn._jsonSchema))return rn.fromBase64String(e.bytes)}}rn._jsonSchemaVersion="firestore/bytes/1.0",rn._jsonSchema={type:At("string",rn._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zs=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ao=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ai._jsonSchemaVersion}}static fromJSON(e){if(Od(e,Ai._jsonSchema))return new Ai(e.latitude,e.longitude)}}Ai._jsonSchemaVersion="firestore/geoPoint/1.0",Ai._jsonSchema={type:At("string",Ai._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Od(e,Yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Yi(e.vectorValues);throw new B(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yi._jsonSchemaVersion="firestore/vectorValue/1.0",Yi._jsonSchema={type:At("string",Yi._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YG=/^__.*__$/;class XG{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cc(e,this.data,n,this.fieldTransforms)}}class $V{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function GV(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ac:t})}}class $g{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new $g({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Op(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(GV(this.Ac)&&YG.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class JG{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||qd(e)}Cc(e,n,i,r=!1){return new $g({Ac:e,methodName:n,Dc:i,path:Ze.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Io(t){const e=t._freezeSettings(),n=qd(t._databaseId);return new JG(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Gg(t,e,n,i,r,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,n,r);JT("Data must be an object, but it was:",a,i);const o=QV(i,a);let l,c;if(s.merge)l=new xn(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=B0(e,d,n);if(!a.contains(f))throw new B(U.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);XV(h,f)||h.push(f)}l=new xn(h),c=a.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=a.fieldTransforms;return new XG(new Kt(o),l,c)}class Gd extends Ao{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gd}}function KV(t,e,n){return new $g({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class GT extends Ao{_toFieldTransform(e){return new zd(e.path,new ec)}isEqual(e){return e instanceof GT}}class KT extends Ao{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=KV(this,e,!0),i=this.vc.map(s=>So(s,n)),r=new lo(i);return new zd(e.path,r)}isEqual(e){return e instanceof KT&&qs(this.vc,e.vc)}}class WT extends Ao{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=KV(this,e,!0),i=this.vc.map(s=>So(s,n)),r=new co(i);return new zd(e.path,r)}isEqual(e){return e instanceof WT&&qs(this.vc,e.vc)}}class QT extends Ao{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new tc(e.serializer,wO(e.serializer,this.Fc));return new zd(e.path,n)}isEqual(e){return e instanceof QT&&this.Fc===e.Fc}}function YT(t,e,n,i){const r=t.Cc(1,e,n);JT("Data must be an object, but it was:",r,i);const s=[],a=Kt.empty();la(i,(l,c)=>{const h=ZT(e,l,n);c=Z(c);const d=r.yc(h);if(c instanceof Gd)s.push(h);else{const f=So(c,d);f!=null&&(s.push(h),a.set(h,f))}});const o=new xn(s);return new $V(a,o,r.fieldTransforms)}function XT(t,e,n,i,r,s){const a=t.Cc(1,e,n),o=[B0(e,i,n)],l=[r];if(s.length%2!=0)throw new B(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)o.push(B0(e,s[f])),l.push(s[f+1]);const c=[],h=Kt.empty();for(let f=o.length-1;f>=0;--f)if(!XV(c,o[f])){const g=o[f];let b=l[f];b=Z(b);const E=a.yc(g);if(b instanceof Gd)c.push(g);else{const x=So(b,E);x!=null&&(c.push(g),h.set(g,x))}}const d=new xn(c);return new $V(h,d,a.fieldTransforms)}function WV(t,e,n,i=!1){return So(n,t.Cc(i?4:3,e))}function So(t,e){if(YV(t=Z(t)))return JT("Unsupported field value:",e,t),QV(t,e);if(t instanceof Ao)return function(i,r){if(!GV(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const o of i){let l=So(o,r.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Z(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return wO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ce.fromDate(i);return{timestampValue:nc(r.serializer,s)}}if(i instanceof Ce){const s=new Ce(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:nc(r.serializer,s)}}if(i instanceof Ai)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof rn)return{bytesValue:DO(r.serializer,i._byteString)};if(i instanceof ze){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:_T(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Yi)return function(a,o){return{mapValue:{fields:{[oT]:{stringValue:lT},[Xl]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.Sc("VectorValues must only contain numeric values.");return dT(o.serializer,c)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${Rg(i)}`)}(t,e)}function QV(t,e){const n={};return Qk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):la(t,(i,r)=>{const s=So(r,e.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function YV(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ce||t instanceof Ai||t instanceof rn||t instanceof ze||t instanceof Ao||t instanceof Yi)}function JT(t,e,n){if(!YV(n)||!Nk(n)){const i=Rg(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function B0(t,e,n){if((e=Z(e))instanceof Zs)return e._internalPath;if(typeof e=="string")return ZT(t,e);throw Op("Field path arguments must be of type string or ",t,!1,void 0,n)}const ZG=new RegExp("[~\\*/\\[\\]]");function ZT(t,e,n){if(e.search(ZG)>=0)throw Op(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Zs(...e.split("."))._internalPath}catch{throw Op(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Op(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${i}`),a&&(l+=` in document ${r}`),l+=")"),new B(U.INVALID_ARGUMENT,o+t+l)}function XV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Kg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eK extends id{data(){return super.data()}}function Kg(t,e){return typeof e=="string"?ZT(t,e):e instanceof Zs?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eE{}class Kd extends eE{}function os(t,e,...n){let i=[];e instanceof eE&&i.push(e),i=i.concat(n),function(s){const a=s.filter(l=>l instanceof tE).length,o=s.filter(l=>l instanceof Wg).length;if(a>1||a>0&&o>0)throw new B(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Wg extends Kd{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Wg(e,n,i)}_apply(e){const n=this._parse(e);return eM(e._query,n),new vn(e.firestore,e.converter,R0(e._query,n))}_parse(e){const n=Io(e.firestore);return function(s,a,o,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new B(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Ux(d,h);const b=[];for(const E of d)b.push(Lx(l,s,E));f={arrayValue:{values:b}}}else f=Lx(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Ux(d,h),f=WV(o,a,d,h==="in"||h==="not-in");return _e.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function tK(t,e,n){const i=e,r=Kg("where",t);return Wg._create(r,i,n)}class tE extends eE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new tE(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:De.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let a=r;const o=s.getFlattenedFilters();for(const l of o)eM(a,l),a=R0(a,l)}(e._query,n),new vn(e.firestore,e.converter,R0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class nE extends Kd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new nE(e,n)}_apply(e){const n=function(r,s,a){if(r.startAt!==null)throw new B(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new B(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Jh(s,a)}(e._query,this._field,this._direction);return new vn(e.firestore,e.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new Hr(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function nK(t,e="asc"){const n=e,i=Kg("orderBy",t);return nE._create(i,n)}class Qg extends Kd{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Qg(e,n,i)}_apply(e){return new vn(e.firestore,e.converter,Ap(e._query,this._limit,this._limitType))}}function iK(t){return Dk("limit",t),Qg._create("limit",t,"F")}function rK(t){return Dk("limitToLast",t),Qg._create("limitToLast",t,"L")}class Yg extends Kd{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Yg(e,n,i)}_apply(e){const n=ZV(e,this.type,this._docOrFields,this._inclusive);return new vn(e.firestore,e.converter,function(r,s){return new Hr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,n))}}function sK(...t){return Yg._create("startAt",t,!0)}function aK(...t){return Yg._create("startAfter",t,!1)}class Xg extends Kd{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Xg(e,n,i)}_apply(e){const n=ZV(e,this.type,this._docOrFields,this._inclusive);return new vn(e.firestore,e.converter,function(r,s){return new Hr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,n))}}function oK(...t){return Xg._create("endBefore",t,!1)}function lK(...t){return Xg._create("endAt",t,!0)}function ZV(t,e,n,i){if(n[0]=Z(n[0]),n[0]instanceof id)return function(s,a,o,l,c){if(!l)throw new B(U.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const h=[];for(const d of Il(s))if(d.field.isKeyField())h.push(ao(a,l.key));else{const f=l.data.field(d.field);if(kg(f))throw new B(U.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const g=d.field.canonicalString();throw new B(U.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}h.push(f)}return new Ys(h,c)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=Io(t.firestore);return function(a,o,l,c,h,d){const f=a.explicitOrderBy;if(h.length>f.length)throw new B(U.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let b=0;b<h.length;b++){const E=h[b];if(f[b].field.isKeyField()){if(typeof E!="string")throw new B(U.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof E}`);if(!uT(a)&&E.indexOf("/")!==-1)throw new B(U.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${E}' contains a slash.`);const x=a.path.child(ge.fromString(E));if(!G.isDocumentKey(x))throw new B(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const w=new G(x);g.push(ao(o,w))}else{const x=WV(l,c,E);g.push(x)}}return new Ys(g,d)}(t._query,t.firestore._databaseId,r,e,n,i)}}function Lx(t,e,n){if(typeof(n=Z(n))=="string"){if(n==="")throw new B(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uT(e)&&n.indexOf("/")!==-1)throw new B(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(ge.fromString(n));if(!G.isDocumentKey(i))throw new B(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ao(t,new G(i))}if(n instanceof ze)return ao(t,n._key);throw new B(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rg(n)}.`)}function Ux(t,e){if(!Array.isArray(t)||t.length===0)throw new B(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eM(t,e){const n=function(r,s){for(const a of r)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class iE{convertValue(e,n="none"){switch(Ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return la(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var i,r,s;const n=(s=(r=(i=e.fields)==null?void 0:i[Xl].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>Je(a.doubleValue));return new Yi(n)}convertGeoPoint(e){return new Ai(Je(e.latitude),Je(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Og(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Qh(e));default:return null}}convertTimestamp(e){const n=Lr(e);return new Ce(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ge.fromString(e);ee(qO(i),9688,{name:e});const r=new Ks(i.get(1),i.get(3)),s=new G(i.popFirst(5));return r.isEqual(n)||mt(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class cK extends iE{constructor(e){super(),this.firestore=e}convertBytes(e){return new rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ze(this.firestore,null,n)}}class Ua{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let fi=class tM extends id{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new dh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Kg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=tM._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};fi._jsonSchemaVersion="firestore/documentSnapshot/1.0",fi._jsonSchema={type:At("string",fi._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};let dh=class extends fi{data(e={}){return super.data(e)}},Ii=class nM{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ua(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new dh(this._firestore,this._userDataWriter,i.key,i,new Ua(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(o=>{const l=new dh(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ua(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new dh(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ua(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:uK(o.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=nM._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zb.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function uK(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}function iM(t,e){return t instanceof fi&&e instanceof fi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ii&&e instanceof Ii&&t._firestore===e._firestore&&BV(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hK(t){t=Te(t,ze);const e=Te(t.firestore,yt);return OV(ln(e),t._key).then(n=>rE(e,t,n))}Ii._jsonSchemaVersion="firestore/querySnapshot/1.0",Ii._jsonSchema={type:At("string",Ii._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};class xo extends iE{constructor(e){super(),this.firestore=e}convertBytes(e){return new rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ze(this.firestore,null,n)}}function dK(t){t=Te(t,ze);const e=Te(t.firestore,yt),n=ln(e),i=new xo(e);return kG(n,t._key).then(r=>new fi(e,i,t._key,r,new Ua(r!==null&&r.hasLocalMutations,!0),t.converter))}function fK(t){t=Te(t,ze);const e=Te(t.firestore,yt);return OV(ln(e),t._key,{source:"server"}).then(n=>rE(e,t,n))}function mK(t){t=Te(t,vn);const e=Te(t.firestore,yt),n=ln(e),i=new xo(e);return JV(t._query),VV(n,t._query).then(r=>new Ii(e,i,t,r))}function pK(t){t=Te(t,vn);const e=Te(t.firestore,yt),n=ln(e),i=new xo(e);return OG(n,t._query).then(r=>new Ii(e,i,t,r))}function gK(t){t=Te(t,vn);const e=Te(t.firestore,yt),n=ln(e),i=new xo(e);return VV(n,t._query,{source:"server"}).then(r=>new Ii(e,i,t,r))}function jx(t,e,n){t=Te(t,ze);const i=Te(t.firestore,yt),r=Jg(t.converter,e,n);return Wd(i,[Gg(Io(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,et.none())])}function zx(t,e,n,...i){t=Te(t,ze);const r=Te(t.firestore,yt),s=Io(r);let a;return a=typeof(e=Z(e))=="string"||e instanceof Zs?XT(s,"updateDoc",t._key,e,n,i):YT(s,"updateDoc",t._key,e),Wd(r,[a.toMutation(t._key,et.exists(!0))])}function yK(t){return Wd(Te(t.firestore,yt),[new Pc(t._key,et.none())])}function _K(t,e){const n=Te(t.firestore,yt),i=kp(t),r=Jg(t.converter,e);return Wd(n,[Gg(Io(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,et.exists(!1))]).then(()=>i)}function rM(t,...e){var l,c,h;t=Z(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||F0(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(F0(e[i])){const d=e[i];e[i]=(l=d.next)==null?void 0:l.bind(d),e[i+1]=(c=d.error)==null?void 0:c.bind(d),e[i+2]=(h=d.complete)==null?void 0:h.bind(d)}let s,a,o;if(t instanceof ze)a=Te(t.firestore,yt),o=Rc(t._key.path),s={next:d=>{e[i]&&e[i](rE(a,t,d))},error:e[i+1],complete:e[i+2]};else{const d=Te(t,vn);a=Te(d.firestore,yt),o=d._query;const f=new xo(a);s={next:g=>{e[i]&&e[i](new Ii(a,f,d,g))},error:e[i+1],complete:e[i+2]},JV(t._query)}return function(f,g,b,E){const x=new qg(E),w=new LT(g,x,b);return f.asyncQueue.enqueueAndForget(async()=>OT(await lc(f),w)),()=>{x.Nu(),f.asyncQueue.enqueueAndForget(async()=>VT(await lc(f),w))}}(ln(a),o,r,s)}function vK(t,e){return VG(ln(t=Te(t,yt)),F0(e)?e:{next:e})}function Wd(t,e){return function(i,r){const s=new Yt;return i.asyncQueue.enqueueAndForget(async()=>lG(await $T(i),r,s)),s.promise}(ln(t),e)}function rE(t,e,n){const i=n.docs.get(e._key),r=new xo(t);return new fi(t,r,e._key,i,new Ua(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wK={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bK=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Io(e)}set(e,n,i){this._verifyNotCommitted();const r=As(e,this._firestore),s=Jg(r.converter,n,i),a=Gg(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,et.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=As(e,this._firestore);let a;return a=typeof(n=Z(n))=="string"||n instanceof Zs?XT(this._dataReader,"WriteBatch.update",s._key,n,i,r):YT(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,et.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=As(e,this._firestore);return this._mutations=this._mutations.concat(new Pc(n._key,et.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function As(t,e){if((t=Z(t)).firestore!==e)throw new B(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TK{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Io(e)}get(e){const n=As(e,this._firestore),i=new cK(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return X(24041);const s=r[0];if(s.isFoundDocument())return new id(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new id(this._firestore,i,n._key,null,n.converter);throw X(18433,{doc:s})})}set(e,n,i){const r=As(e,this._firestore),s=Jg(r.converter,n,i),a=Gg(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,a),this}update(e,n,i,...r){const s=As(e,this._firestore);let a;return a=typeof(n=Z(n))=="string"||n instanceof Zs?XT(this._dataReader,"Transaction.update",s._key,n,i,r):YT(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(e){const n=As(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EK=class extends TK{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=As(e,this._firestore),i=new xo(this._firestore);return super.get(e).then(r=>new fi(this._firestore,i,n._key,r._document,new Ua(!1,!1),n.converter))}};function AK(t,e,n){t=Te(t,yt);const i={...wK,...n};return function(s){if(s.maxAttempts<1)throw new B(U.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,o){const l=new Yt;return s.asyncQueue.enqueueAndForget(async()=>{const c=await PG(s);new RG(s.asyncQueue,c,o,a,l).ju()}),l.promise}(ln(t),r=>e(new EK(t,r)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IK(){return new Gd("deleteField")}function SK(){return new GT("serverTimestamp")}function xK(...t){return new KT("arrayUnion",t)}function RK(...t){return new WT("arrayRemove",t)}function CK(t){return new QT("increment",t)}(function(e,n=!0){(function(r){xc=r})(yi),Si(new Dn("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),o=new yt(new T7(i.getProvider("auth-internal")),new I7(a,i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new B(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ks(c.options.projectId,h)}(a,r),a);return s={useFetchStreams:n,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),yn(g1,y1,e),yn(g1,y1,"esm2020")})();const PK="@firebase/firestore-compat",NK="0.4.2";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new B("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(){if(typeof Uint8Array>"u")throw new B("unimplemented","Uint8Arrays are not available in this environment.")}function Bx(){if(!aH())throw new B("unimplemented","Blobs are unavailable in Firestore in this environment.")}let sM=class q0{constructor(e){this._delegate=e}static fromBase64String(e){return Bx(),new q0(rn.fromBase64String(e))}static fromUint8Array(e){return Fx(),new q0(rn.fromUint8Array(e))}toBase64(){return Bx(),this._delegate.toBase64()}toUint8Array(){return Fx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(t){return DK(t,["next","error","complete"])}function DK(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kK{enableIndexedDbPersistence(e,n){return BG(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return qG(e._delegate)}clearIndexedDbPersistence(e){return HG(e._delegate)}}class aM{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ks||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&tr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){UG(this._delegate,e,n,i)}enableNetwork(){return GG(this._delegate)}disableNetwork(){return KG(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,Pk("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return $G(this._delegate)}onSnapshotsInSync(e){return vK(this._delegate,e)}get app(){if(!this._appCompat)throw new B("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new cc(this,zV(this._delegate,e))}catch(n){throw mn(n,"collection()","Firestore.collection()")}}doc(e){try{return new ci(this,kp(this._delegate,e))}catch(n){throw mn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fn(this,jG(this._delegate,e))}catch(n){throw mn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return AK(this._delegate,n=>e(new oM(this,n)))}batch(){return ln(this._delegate),new lM(new bK(this._delegate,e=>Wd(this._delegate,e)))}loadBundle(e){return WG(this._delegate,e)}namedQuery(e){return QG(this._delegate,e).then(n=>n?new fn(this,n):null)}}class Zg extends iE{constructor(e){super(),this.firestore=e}convertBytes(e){return new sM(new rn(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return ci.forKey(n,this.firestore,null)}}function OK(t){_7(t)}class oM{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Zg(e)}get(e){const n=ja(e);return this._delegate.get(n).then(i=>new rd(this._firestore,new fi(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){const r=ja(e);return i?(sE("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=ja(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=ja(e);return this._delegate.delete(n),this}}class lM{constructor(e){this._delegate=e}set(e,n,i){const r=ja(e);return i?(sE("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=ja(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=ja(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class po{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){const i=new dh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sd(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const i=po.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(n);return s||(s=new po(e,new Zg(e),n),r.set(n,s)),s}}po.INSTANCES=new WeakMap;class ci{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Zg(e)}static forPath(e,n,i){if(e.length%2!==0)throw new B("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ci(n,new ze(n._delegate,i,new G(e)))}static forKey(e,n,i){return new ci(n,new ze(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new cc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new cc(this.firestore,zV(this._delegate,e))}catch(n){throw mn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Z(e),e instanceof ze?FV(this._delegate,e):!1}set(e,n){n=sE("DocumentReference.set",n);try{return n?jx(this._delegate,e,n):jx(this._delegate,e)}catch(i){throw mn(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?zx(this._delegate,e):zx(this._delegate,e,n,...i)}catch(r){throw mn(r,"updateDoc()","DocumentReference.update()")}}delete(){return yK(this._delegate)}onSnapshot(...e){const n=cM(e),i=uM(e,r=>new rd(this.firestore,new fi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return rM(this._delegate,n,i)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=dK(this._delegate):(e==null?void 0:e.source)==="server"?n=fK(this._delegate):n=hK(this._delegate),n.then(i=>new rd(this.firestore,new fi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new ci(this.firestore,e?this._delegate.withConverter(po.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function mn(t,e,n){return t.message=t.message.replace(e,n),t}function cM(t){for(const e of t)if(typeof e=="object"&&!H0(e))return e;return{}}function uM(t,e){var i,r;let n;return H0(t[0])?n=t[0]:H0(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:s=>{n.next&&n.next(e(s))},error:(i=n.error)==null?void 0:i.bind(n),complete:(r=n.complete)==null?void 0:r.bind(n)}}class rd{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new ci(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return iM(this._delegate,e._delegate)}}class sd extends rd{data(e){const n=this._delegate.data(e);return this._delegate._converter||v7(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class fn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Zg(e)}where(e,n,i){try{return new fn(this.firestore,os(this._delegate,tK(e,n,i)))}catch(r){throw mn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new fn(this.firestore,os(this._delegate,nK(e,n)))}catch(i){throw mn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new fn(this.firestore,os(this._delegate,iK(e)))}catch(n){throw mn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new fn(this.firestore,os(this._delegate,rK(e)))}catch(n){throw mn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new fn(this.firestore,os(this._delegate,sK(...e)))}catch(n){throw mn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new fn(this.firestore,os(this._delegate,aK(...e)))}catch(n){throw mn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new fn(this.firestore,os(this._delegate,oK(...e)))}catch(n){throw mn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new fn(this.firestore,os(this._delegate,lK(...e)))}catch(n){throw mn(n,"endAt()","Query.endAt()")}}isEqual(e){return BV(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=pK(this._delegate):(e==null?void 0:e.source)==="server"?n=gK(this._delegate):n=mK(this._delegate),n.then(i=>new $0(this.firestore,new Ii(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const n=cM(e),i=uM(e,r=>new $0(this.firestore,new Ii(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return rM(this._delegate,n,i)}withConverter(e){return new fn(this.firestore,e?this._delegate.withConverter(po.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class VK{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new sd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $0{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new fn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new sd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new VK(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new sd(this._firestore,i))})}isEqual(e){return iM(this._delegate,e._delegate)}}class cc extends fn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ci(this.firestore,e):null}doc(e){try{return e===void 0?new ci(this.firestore,kp(this._delegate)):new ci(this.firestore,kp(this._delegate,e))}catch(n){throw mn(n,"doc()","CollectionReference.doc()")}}add(e){return _K(this._delegate,e).then(n=>new ci(this.firestore,n))}isEqual(e){return FV(this._delegate,e._delegate)}withConverter(e){return new cc(this.firestore,e?this._delegate.withConverter(po.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ja(t){return Te(t,ze)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(...e){this._delegate=new Zs(...e)}static documentId(){return new aE(Ze.keyField().canonicalString())}isEqual(e){return e=Z(e),e instanceof Zs?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{static serverTimestamp(){const e=SK();return e._methodName="FieldValue.serverTimestamp",new Va(e)}static delete(){const e=IK();return e._methodName="FieldValue.delete",new Va(e)}static arrayUnion(...e){const n=xK(...e);return n._methodName="FieldValue.arrayUnion",new Va(n)}static arrayRemove(...e){const n=RK(...e);return n._methodName="FieldValue.arrayRemove",new Va(n)}static increment(e){const n=CK(e);return n._methodName="FieldValue.increment",new Va(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MK={Firestore:aM,GeoPoint:Ai,Timestamp:Ce,Blob:sM,Transaction:oM,WriteBatch:lM,DocumentReference:ci,DocumentSnapshot:rd,Query:fn,QueryDocumentSnapshot:sd,QuerySnapshot:$0,CollectionReference:cc,FieldPath:aE,FieldValue:Va,setLogLevel:OK,CACHE_SIZE_UNLIMITED:FG};function LK(t,e){t.INTERNAL.registerComponent(new Dn("firestore-compat",n=>{const i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps({...MK}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UK(t){LK(t,(e,n)=>new aM(e,n,new kK)),t.registerVersion(PK,NK)}UK(Gt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM="firebasestorage.googleapis.com",dM="storageBucket",jK=2*60*1e3,zK=10*60*1e3,FK=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt extends jt{constructor(e,n,i=0){super(M_(e),`Firebase Storage: ${n} (${M_(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return M_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qe||(Qe={}));function M_(t){return"storage/"+t}function oE(){const t="An unknown error occurred, please check the error payload for server response.";return new rt(Qe.UNKNOWN,t)}function BK(t){return new rt(Qe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function qK(t){return new rt(Qe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function HK(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new rt(Qe.UNAUTHENTICATED,t)}function $K(){return new rt(Qe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function GK(t){return new rt(Qe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function fM(){return new rt(Qe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mM(){return new rt(Qe.CANCELED,"User canceled the upload/download.")}function KK(t){return new rt(Qe.INVALID_URL,"Invalid URL '"+t+"'.")}function WK(t){return new rt(Qe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function QK(){return new rt(Qe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+dM+"' property when initializing the app?")}function pM(){return new rt(Qe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function YK(){return new rt(Qe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function XK(){return new rt(Qe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function JK(t){return new rt(Qe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function xl(t){return new rt(Qe.INVALID_ARGUMENT,t)}function gM(){return new rt(Qe.APP_DELETED,"The Firebase app was deleted.")}function yM(t){return new rt(Qe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fh(t,e){return new rt(Qe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function _u(t){throw new rt(Qe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=sn.makeFromUrl(e,n)}catch{return new sn(e,"")}if(i.path==="")return i;throw WK(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+r+a,"i"),l={bucket:1,path:3};function c(I){I.path_=decodeURIComponent(I.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${h}/b/${r}/o${f}`,"i"),b={bucket:1,path:3},E=n===hM?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",w=new RegExp(`^https?://${E}/${r}/${x}`,"i"),_=[{regex:o,indices:l,postModify:s},{regex:g,indices:b,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let I=0;I<_.length;I++){const k=_[I],V=k.regex.exec(e);if(V){const A=V[k.indices.bucket];let T=V[k.indices.path];T||(T=""),i=new sn(A,T),k.postModify(i);break}}if(i==null)throw KK(e);return i}}class ZK{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eW(t,e,n){let i=1,r=null,s=null,a=!1,o=0;function l(){return o===2}let c=!1;function h(...x){c||(c=!0,e.apply(null,x))}function d(x){r=setTimeout(()=>{r=null,t(g,l())},x)}function f(){s&&clearTimeout(s)}function g(x,...w){if(c){f();return}if(x){f(),h.call(null,x,...w);return}if(l()||a){f(),h.call(null,x,...w);return}i<64&&(i*=2);let _;o===1?(o=2,_=0):_=(i+Math.random())*1e3,d(_)}let b=!1;function E(x){b||(b=!0,f(),!c&&(r!==null?(x||(o=2),clearTimeout(r),d(0)):x||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,E(!0)},n),E}function tW(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nW(t){return t!==void 0}function iW(t){return typeof t=="function"}function rW(t){return typeof t=="object"&&!Array.isArray(t)}function ey(t){return typeof t=="string"||t instanceof String}function qx(t){return lE()&&t instanceof Blob}function lE(){return typeof Blob<"u"}function G0(t,e,n,i){if(i<e)throw xl(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw xl(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function _M(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Ya;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ya||(Ya={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(e,n,i,r,s,a,o,l,c,h,d,f=!0,g=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,E)=>{this.resolve_=b,this.reject_=E,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new zf(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===Ya.NO_ERROR,l=s.getStatus();if(!o||vM(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Ya.ABORT;i(!1,new zf(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new zf(c,s))})},n=(i,r)=>{const s=this.resolve_,a=this.reject_,o=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());nW(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=oE();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(r.canceled){const l=this.appDelete_?gM():mM();a(l)}else{const l=fM();a(l)}};this.canceled_?n(!1,new zf(!1,null,!0)):this.backoffId_=eW(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&tW(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zf{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function aW(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function oW(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lW(t,e){e&&(t["X-Firebase-GMPID"]=e)}function cW(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function uW(t,e,n,i,r,s,a=!0,o=!1){const l=_M(t.urlParams),c=t.url+l,h=Object.assign({},t.headers);return lW(h,e),aW(h,n),oW(h,s),cW(h,i),new sW(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hW(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function dW(...t){const e=hW();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(lE())return new Blob(t);throw new rt(Qe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function fW(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mW(t){if(typeof atob>"u")throw JK("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class L_{constructor(e,n){this.data=e,this.contentType=n||null}}function wM(t,e){switch(t){case ui.RAW:return new L_(bM(e));case ui.BASE64:case ui.BASE64URL:return new L_(TM(t,e));case ui.DATA_URL:return new L_(gW(e),yW(e))}throw oE()}function bM(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=i,a=t.charCodeAt(++n);i=65536|(s&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function pW(t){let e;try{e=decodeURIComponent(t)}catch{throw fh(ui.DATA_URL,"Malformed data URL.")}return bM(e)}function TM(t,e){switch(t){case ui.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw fh(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ui.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw fh(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=mW(e)}catch(r){throw r.message.includes("polyfill")?r:fh(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class EM{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw fh(ui.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=_W(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function gW(t){const e=new EM(t);return e.base64?TM(ui.BASE64,e.rest):pW(e.rest)}function yW(t){return new EM(t).contentType}function _W(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n){let i=0,r="";qx(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(qx(this.data_)){const i=this.data_,r=fW(i,e,n);return r===null?null:new mr(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new mr(i,!0)}}static getBlob(...e){if(lE()){const n=e.map(i=>i instanceof mr?i.data_:i);return new mr(dW.apply(null,n))}else{const n=e.map(a=>ey(a)?wM(ui.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)r[s++]=a[o]}),new mr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(t){let e;try{e=JSON.parse(t)}catch{return null}return rW(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vW(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function wW(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function AM(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bW(t,e){return e}class hn{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||bW}}let Ff=null;function TW(t){return!ey(t)||t.length<2?t:AM(t)}function ty(){if(Ff)return Ff;const t=[];t.push(new hn("bucket")),t.push(new hn("generation")),t.push(new hn("metageneration")),t.push(new hn("name","fullPath",!0));function e(s,a){return TW(a)}const n=new hn("name");n.xform=e,t.push(n);function i(s,a){return a!==void 0?Number(a):a}const r=new hn("size");return r.xform=i,t.push(r),t.push(new hn("timeCreated")),t.push(new hn("updated")),t.push(new hn("md5Hash",null,!0)),t.push(new hn("cacheControl",null,!0)),t.push(new hn("contentDisposition",null,!0)),t.push(new hn("contentEncoding",null,!0)),t.push(new hn("contentLanguage",null,!0)),t.push(new hn("contentType",null,!0)),t.push(new hn("metadata","customMetadata",!0)),Ff=t,Ff}function EW(t,e){function n(){const i=t.bucket,r=t.fullPath,s=new sn(i,r);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function AW(t,e,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const a=n[s];i[a.local]=a.xform(i,e[a.server])}return EW(i,t),i}function IM(t,e,n){const i=cE(e);return i===null?null:AW(t,i,n)}function IW(t,e,n,i){const r=cE(e);if(r===null||!ey(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,d=t.fullPath,f="/b/"+a(h)+"/o/"+a(d),g=ha(f,n,i),b=_M({alt:"media",token:c});return g+b})[0]}function uE(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="prefixes",$x="items";function SW(t,e,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Hx])for(const r of n[Hx]){const s=r.replace(/\/$/,""),a=t._makeStorageReference(new sn(e,s));i.prefixes.push(a)}if(n[$x])for(const r of n[$x]){const s=t._makeStorageReference(new sn(e,r.name));i.items.push(s)}return i}function xW(t,e,n){const i=cE(n);return i===null?null:SW(t,e,i)}class Wr{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(t){if(!t)throw oE()}function ny(t,e){function n(i,r){const s=IM(t,r,e);return Xi(s!==null),s}return n}function RW(t,e){function n(i,r){const s=xW(t,e,r);return Xi(s!==null),s}return n}function CW(t,e){function n(i,r){const s=IM(t,r,e);return Xi(s!==null),IW(s,r,t.host,t._protocol)}return n}function Vc(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=$K():r=HK():n.getStatus()===402?r=qK(t.bucket):n.getStatus()===403?r=GK(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function iy(t){const e=Vc(t);function n(i,r){let s=e(i,r);return i.getStatus()===404&&(s=BK(t.path)),s.serverResponse=r.serverResponse,s}return n}function SM(t,e,n){const i=e.fullServerUrl(),r=ha(i,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new Wr(r,s,ny(t,n),a);return o.errorHandler=iy(e),o}function PW(t,e,n,i,r){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n.length>0&&(s.delimiter=n),i&&(s.pageToken=i),r&&(s.maxResults=r);const a=e.bucketOnlyServerUrl(),o=ha(a,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,h=new Wr(o,l,RW(t,e.bucket),c);return h.urlParams=s,h.errorHandler=Vc(e),h}function NW(t,e,n){const i=e.fullServerUrl(),r=ha(i,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new Wr(r,s,CW(t,n),a);return o.errorHandler=iy(e),o}function DW(t,e,n,i){const r=e.fullServerUrl(),s=ha(r,t.host,t._protocol),a="PATCH",o=uE(n,i),l={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,h=new Wr(s,a,ny(t,i),c);return h.headers=l,h.body=o,h.errorHandler=iy(e),h}function kW(t,e){const n=e.fullServerUrl(),i=ha(n,t.host,t._protocol),r="DELETE",s=t.maxOperationRetryTime;function a(l,c){}const o=new Wr(i,r,a,s);return o.successCodes=[200,204],o.errorHandler=iy(e),o}function OW(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function xM(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=OW(null,e)),i}function VW(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let _="";for(let I=0;I<2;I++)_=_+Math.random().toString().slice(2);return _}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=xM(e,i,r),h=uE(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",g=mr.getBlob(d,i,f);if(g===null)throw pM();const b={name:c.fullPath},E=ha(s,t.host,t._protocol),x="POST",w=t.maxUploadRetryTime,v=new Wr(E,x,ny(t,n),w);return v.urlParams=b,v.headers=a,v.body=g.uploadData(),v.errorHandler=Vc(e),v}class Vp{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}}function hE(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Xi(!1)}return Xi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function MW(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),a=xM(e,i,r),o={name:a.fullPath},l=ha(s,t.host,t._protocol),c="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},d=uE(a,n),f=t.maxUploadRetryTime;function g(E){hE(E);let x;try{x=E.getResponseHeader("X-Goog-Upload-URL")}catch{Xi(!1)}return Xi(ey(x)),x}const b=new Wr(l,c,g,f);return b.urlParams=o,b.headers=h,b.body=d,b.errorHandler=Vc(e),b}function LW(t,e,n,i){const r={"X-Goog-Upload-Command":"query"};function s(c){const h=hE(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Xi(!1)}d||Xi(!1);const f=Number(d);return Xi(!isNaN(f)),new Vp(f,i.size(),h==="final")}const a="POST",o=t.maxUploadRetryTime,l=new Wr(n,a,s,o);return l.headers=r,l.errorHandler=Vc(e),l}const Gx=256*1024;function UW(t,e,n,i,r,s,a,o){const l=new Vp(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw YK();const c=l.total-l.current;let h=c;r>0&&(h=Math.min(h,r));const d=l.current,f=d+h;let g="";h===0?g="finalize":c===h?g="upload, finalize":g="upload";const b={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${l.current}`},E=i.slice(d,f);if(E===null)throw pM();function x(I,k){const V=hE(I,["active","final"]),A=l.current+h,T=i.size();let S;return V==="final"?S=ny(e,s)(I,k):S=null,new Vp(A,T,V==="final",S)}const w="POST",v=e.maxUploadRetryTime,_=new Wr(n,w,x,v);return _.headers=b,_.body=E.uploadData(),_.progressCallback=o||null,_.errorHandler=Vc(t),_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jW={STATE_CHANGED:"state_changed"},pn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function U_(t){switch(t){case"running":case"pausing":case"canceling":return pn.RUNNING;case"paused":return pn.PAUSED;case"success":return pn.SUCCESS;case"canceled":return pn.CANCELED;case"error":return pn.ERROR;default:return pn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zW{constructor(e,n,i){if(iW(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class FW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ya.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ya.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ya.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,s){if(this.sent_)throw _u("cannot .send() more than once");if(sr(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw _u("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw _u("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw _u("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw _u("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class BW extends FW{initXhr(){this.xhr_.responseType="text"}}function ji(){return new BW}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=ty(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Qe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(vM(r.status,[]))if(s)r=fM();else{this.sleepTime=Math.max(this.sleepTime*2,FK),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Qe.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const i=MW(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ji,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,i)=>{const r=LW(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,ji,n,i);this._request=s,s.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Gx*this._chunkMultiplier,n=new Vp(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let a;try{a=UW(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const o=this._ref.storage._makeRequest(a,ji,r,s,!1);this._request=o,o.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Gx*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const i=SM(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,ji,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const i=VW(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ji,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=mM(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=U_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){const s=new zW(n||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(U_(this._state)){case pn.SUCCESS:Bo(this._resolve.bind(null,this.snapshot))();break;case pn.CANCELED:case pn.ERROR:const n=this._reject;Bo(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(U_(this._state)){case pn.RUNNING:case pn.PAUSED:e.next&&Bo(e.next.bind(e,this.snapshot))();break;case pn.SUCCESS:e.complete&&Bo(e.complete.bind(e))();break;case pn.CANCELED:case pn.ERROR:e.error&&Bo(e.error.bind(e,this._error))();break;default:e.error&&Bo(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n){this._service=e,n instanceof sn?this._location=n:this._location=sn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new go(e,n)}get root(){const e=new sn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return AM(this._location.path)}get storage(){return this._service}get parent(){const e=vW(this._location.path);if(e===null)return null;const n=new sn(this._location.bucket,e);return new go(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw yM(e)}}function qW(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new RM(t,new mr(e),n)}function HW(t){const e={prefixes:[],items:[]};return CM(t,e).then(()=>e)}async function CM(t,e,n){const r=await PM(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&await CM(t,e,r.nextPageToken)}function PM(t,e){e!=null&&typeof e.maxResults=="number"&&G0("options.maxResults",1,1e3,e.maxResults);const n=e||{},i=PW(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(i,ji)}function $W(t){t._throwIfRoot("getMetadata");const e=SM(t.storage,t._location,ty());return t.storage.makeRequestWithTokens(e,ji)}function GW(t,e){t._throwIfRoot("updateMetadata");const n=DW(t.storage,t._location,e,ty());return t.storage.makeRequestWithTokens(n,ji)}function KW(t){t._throwIfRoot("getDownloadURL");const e=NW(t.storage,t._location,ty());return t.storage.makeRequestWithTokens(e,ji).then(n=>{if(n===null)throw XK();return n})}function WW(t){t._throwIfRoot("deleteObject");const e=kW(t.storage,t._location);return t.storage.makeRequestWithTokens(e,ji)}function NM(t,e){const n=wW(t._location.path,e),i=new sn(t._location.bucket,n);return new go(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QW(t){return/^[A-Za-z]+:\/\//.test(t)}function YW(t,e){return new go(t,e)}function DM(t,e){if(t instanceof dE){const n=t;if(n._bucket==null)throw QK();const i=new go(n,n._bucket);return e!=null?DM(i,e):i}else return e!==void 0?NM(t,e):t}function XW(t,e){if(e&&QW(e)){if(t instanceof dE)return YW(t,e);throw xl("To use ref(service, url), the first argument must be a Storage instance.")}else return DM(t,e)}function Kx(t,e){const n=e==null?void 0:e[dM];return n==null?null:sn.makeFromBucketSpec(n,t)}function JW(t,e,n,i={}){t.host=`${e}:${n}`;const r=sr(e);r&&(Eb(`https://${t.host}/b`),Ab("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:s}=i;s&&(t._overrideAuthToken=typeof s=="string"?s:iD(s,t.app.options.projectId))}class dE{constructor(e,n,i,r,s,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=hM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jK,this._maxUploadRetryTime=zK,this._requests=new Set,r!=null?this._bucket=sn.makeFromBucketSpec(r,this._host):this._bucket=Kx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=sn.makeFromBucketSpec(this._url,e):this._bucket=Kx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){G0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){G0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Se(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new go(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new ZK(gM());{const a=uW(e,this._appId,i,r,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const Wx="@firebase/storage",Qx="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZW="storage";function eQ(t,e,n){return t=Z(t),qW(t,e,n)}function tQ(t){return t=Z(t),$W(t)}function nQ(t,e){return t=Z(t),GW(t,e)}function iQ(t,e){return t=Z(t),PM(t,e)}function rQ(t){return t=Z(t),HW(t)}function sQ(t){return t=Z(t),KW(t)}function aQ(t){return t=Z(t),WW(t)}function Yx(t,e){return t=Z(t),XW(t,e)}function oQ(t,e){return NM(t,e)}function lQ(t,e,n,i={}){JW(t,e,n,i)}function cQ(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new dE(n,i,r,e,yi)}function uQ(){Si(new Dn(ZW,cQ,"PUBLIC").setMultipleInstances(!0)),yn(Wx,Qx,""),yn(Wx,Qx,"esm2020")}uQ();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n,i){this._delegate=e,this.task=n,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Bf(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(i=>{if(e)return e(new Bf(i,this,this._ref))},n)}on(e,n,i,r){let s;return n&&(typeof n=="function"?s=a=>n(new Bf(a,this,this._ref)):s={next:n.next?a=>n.next(new Bf(a,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}}class Jx{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Sr(e,this._service))}get items(){return this._delegate.items.map(e=>new Sr(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=oQ(this._delegate,e);return new Sr(n,this.storage)}get root(){return new Sr(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Sr(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new Xx(eQ(this._delegate,e,n),this)}putString(e,n=ui.RAW,i){this._throwIfRoot("putString");const r=wM(n,e),s={...i};return s.contentType==null&&r.contentType!=null&&(s.contentType=r.contentType),new Xx(new RM(this._delegate,new mr(r.data,!0),s),this)}listAll(){return rQ(this._delegate).then(e=>new Jx(e,this.storage))}list(e){return iQ(this._delegate,e||void 0).then(n=>new Jx(n,this.storage))}getMetadata(){return tQ(this._delegate)}updateMetadata(e){return nQ(this._delegate,e)}getDownloadURL(){return sQ(this._delegate)}delete(){return this._throwIfRoot("delete"),aQ(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw yM(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Zx(e))throw xl("ref() expected a child path but got a URL, use refFromURL instead.");return new Sr(Yx(this._delegate,e),this)}refFromURL(e){if(!Zx(e))throw xl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{sn.makeFromUrl(e,this._delegate.host)}catch{throw xl("refFromUrl() expected a valid full URL but got an invalid one.")}return new Sr(Yx(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,i={}){lQ(this._delegate,e,n,i)}}function Zx(t){return/^[A-Za-z]+:\/\//.test(t)}const hQ="@firebase/storage-compat",dQ="0.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fQ="storage-compat";function mQ(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("storage").getImmediate({identifier:e});return new kM(n,i)}function pQ(t){const e={TaskState:pn,TaskEvent:jW,StringFormat:ui,Storage:kM,Reference:Sr};t.INTERNAL.registerComponent(new Dn(fQ,mQ,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(hQ,dQ)}pQ(Gt);const gQ={apiKey:"AIzaSyDzEay5fGB-2r5_V9UXOO8cOv-nJdHwDRg",authDomain:"rush-coffee.firebaseapp.com",projectId:"rush-coffee",storageBucket:"rush-coffee.appspot.com",messagingSenderId:"423413538635",appId:"1:423413538635:web:ded0369f50c3a9086bd2ce"};Gt.apps.length||Gt.initializeApp(gQ);const tn=Gt.auth(),Xe=Gt.firestore(),tne=Gt.storage(),OM=C.createContext(void 0),da=()=>{const t=C.useContext(OM);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},j_=async t=>{var r,s,a;const e=Xe.collection("users").doc(t),n=await e.get();if(!n.exists){console.log(`Creating missing Firestore profile for user: ${t}`);const o=tn.currentUser;if(!o)throw new Error("User not authenticated");const l=((r=o.displayName)==null?void 0:r.split(" "))||["User",""],c=l[0],h=l.slice(1).join(" ")||"",d={email:o.email||"",displayName:o.displayName||`${c} ${h}`,firstName:c,lastName:h,phone:o.phoneNumber||"",photoURL:o.photoURL||void 0,createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:0,lifetimePoints:0,loyaltyPoints:0,tier:"bronze",rewardsHistory:[],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await e.set(d);const g=(await e.get()).data();return{uid:t,email:g.email,displayName:g.displayName,firstName:g.firstName||"User",lastName:g.lastName||"",phone:g.phone||"",photoURL:g.photoURL,createdAt:((s=g.createdAt)==null?void 0:s.toDate())||new Date,role:g.role,totalOrders:g.totalOrders??0,totalSpent:g.totalSpent??0,currentPoints:g.currentPoints??0,lifetimePoints:g.lifetimePoints??0,loyaltyPoints:g.loyaltyPoints??0,tier:g.tier||"bronze",rewardsHistory:(g.rewardsHistory||[]).map(b=>({...b,date:b.date&&typeof b.date.toDate=="function"?b.date.toDate():b.date})).sort((b,E)=>{const x=b.date instanceof Date?b.date:new Date(b.date);return(E.date instanceof Date?E.date:new Date(E.date)).getTime()-x.getTime()}),preferences:g.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}}}const i=n.data();return{uid:t,email:i.email,displayName:i.displayName||`${i.firstName} ${i.lastName}`,firstName:i.firstName||"User",lastName:i.lastName||"",phone:i.phone||"",photoURL:i.photoURL,createdAt:((a=i.createdAt)==null?void 0:a.toDate())||new Date,role:i.role,totalOrders:i.totalOrders??0,totalSpent:i.totalSpent??0,currentPoints:i.currentPoints??0,lifetimePoints:i.lifetimePoints??0,loyaltyPoints:i.loyaltyPoints??0,tier:i.tier||"bronze",rewardsHistory:(i.rewardsHistory||[]).map(o=>({...o,date:o.date&&typeof o.date.toDate=="function"?o.date.toDate():o.date})).sort((o,l)=>{const c=o.date instanceof Date?o.date:new Date(o.date);return(l.date instanceof Date?l.date:new Date(l.date)).getTime()-c.getTime()}),preferences:i.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}}},yQ=({children:t})=>{const[e,n]=C.useState(null),[i,r]=C.useState(!0);C.useEffect(()=>{let w;const v=tn.onAuthStateChanged(async _=>{w&&w(),_?w=Xe.collection("users").doc(_.uid).onSnapshot(k=>{var V;if(k.exists){const A=k.data(),T={uid:_.uid,email:_.email,firstName:A.firstName||"User",lastName:A.lastName||"",phone:A.phone||"",photoURL:A.photoURL,createdAt:((V=A.createdAt)==null?void 0:V.toDate())||new Date,role:A.role,totalOrders:A.totalOrders??0,totalSpent:A.totalSpent??0,currentPoints:A.currentPoints??0,lifetimePoints:A.lifetimePoints??0,tier:A.tier||"bronze",rewardsHistory:(A.rewardsHistory||[]).map(S=>({...S,date:S.date&&typeof S.date.toDate=="function"?S.date.toDate():S.date})).sort((S,R)=>{const D=S.date instanceof Date?S.date:new Date(S.date);return(R.date instanceof Date?R.date:new Date(R.date)).getTime()-D.getTime()}),preferences:A.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}};n(T)}else{const A={uid:_.uid,email:_.email,firstName:"User",lastName:"",createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:0,lifetimePoints:0,tier:"bronze",rewardsHistory:[],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}};n(A)}r(!1)},k=>{console.error("Error listening to user document:",k),r(!1)}):(n(null),r(!1))});return()=>{v(),w&&w()}},[]);const x={currentUser:e,loading:i,register:async(w,v,_,I,k)=>{const A=(await tn.createUserWithEmailAndPassword(w,v)).user,T={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},S={firstName:_,lastName:I,phone:k||"",createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[T],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};return await Xe.collection("users").doc(A.uid).set(S),j_(A.uid)},login:async(w,v,_)=>{var k;if(w==="test@test.com"&&v==="123456"){const V="test-user-id";return sessionStorage.setItem(`dev_verification_code_${V}`,"123456"),sessionStorage.setItem("requires2FA","true"),{needsVerification:!0,userId:V,email:w,role:"customer"}}const I=_?Gt.auth.Auth.Persistence.LOCAL:Gt.auth.Auth.Persistence.SESSION;await tn.setPersistence(I),sessionStorage.setItem("requires2FA","true");try{const A=(await tn.signInWithEmailAndPassword(w,v)).user.uid,T=Math.floor(1e5+Math.random()*9e5).toString(),S=new Date(Date.now()+10*60*1e3);try{await Xe.collection("emailVerifications").doc(A).set({code:T,email:w,createdAt:new Date,expiresAt:S,verified:!1})}catch{sessionStorage.setItem(`dev_verification_code_${A}`,T)}console.log(` Verification code for ${w}: ${T}`);let R;try{R=(k=(await Xe.collection("users").doc(A).get()).data())==null?void 0:k.role}catch{R="customer"}return{needsVerification:!0,userId:A,email:w,role:R}}catch(V){throw sessionStorage.removeItem("requires2FA"),V}},logout:async()=>{await tn.signOut()},sendPasswordReset:async w=>{await tn.sendPasswordResetEmail(w)},signInWithGoogle:async()=>{var k;const w=new Gt.auth.GoogleAuthProvider;w.setCustomParameters({prompt:"select_account"});const v=await tn.signInWithPopup(w),_=v.user,I=v.additionalUserInfo;if(I!=null&&I.isNewUser){const V=((k=_.displayName)==null?void 0:k.split(" "))||["New","User"],A=V[0],T=V.slice(1).join(" ")||"",S={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},R={firstName:A,lastName:T,photoURL:_.photoURL||void 0,createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[S],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await Xe.collection("users").doc(_.uid).set(R)}return j_(_.uid)},signInWithFacebook:async()=>{var k;const w=new Gt.auth.FacebookAuthProvider,v=await tn.signInWithPopup(w),_=v.user,I=v.additionalUserInfo;if(I!=null&&I.isNewUser){const V=((k=_.displayName)==null?void 0:k.split(" "))||["New","User"],A=V[0],T=V.slice(1).join(" ")||"",S={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},R={firstName:A,lastName:T,photoURL:_.photoURL||void 0,createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[S],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await Xe.collection("users").doc(_.uid).set(R)}return j_(_.uid)},updateUserProfile:async w=>{e&&await Xe.collection("users").doc(e.uid).update(w)},updateUserPhoto:async w=>{e&&await Xe.collection("users").doc(e.uid).update({photoURL:w})},sendEmailVerificationCode:async(w,v)=>{const _=Math.floor(1e5+Math.random()*9e5).toString(),I=new Date(Date.now()+10*60*1e3);try{await Xe.collection("emailVerifications").doc(w).set({code:_,email:v,createdAt:new Date,expiresAt:I})}catch{sessionStorage.setItem(`dev_verification_code_${w}`,_)}console.log(` Verification code for ${v}: ${_}`)},verifyEmailCode:async(w,v)=>{try{const I=Xe.collection("emailVerifications").doc(w),k=await I.get();if(k.exists){const V=k.data();if(V){const A=new Date,T=V.expiresAt.toDate();if(A>T)return!1;if(V.code===v)return await I.update({verified:!0}),!0}}}catch{}return sessionStorage.getItem(`dev_verification_code_${w}`)===v},updateUserPassword:async(w,v)=>{const _=tn.currentUser;if(!_||!_.email)throw new Error("No user logged in");const I=Gt.auth.EmailAuthProvider.credential(_.email,w);await _.reauthenticateWithCredential(I),await _.updatePassword(v)}};return p.jsx(OM.Provider,{value:x,children:!i&&t})},he=t=>`/RushCoffee-Capstone/${t}`,qf=[{id:"cb-01",name:"Spanish Latte",description:"A creamy and sweet latte with a Spanish twist, featuring condensed milk for a rich flavor.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/spanish-latte.png"),available:!0,stock:99,popular:!0,displayOrder:1,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"condensed-milk",quantity:30}]},{id:"cb-02",name:"Rush Coffee Blend",description:"Our signature house blend, perfectly balanced for a smooth and satisfying coffee experience.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:89}],imageUrl:he("coffee-based/rush-coffee-blend.png"),available:!0,stock:99,popular:!0,displayOrder:2,recipe:[{ingredientId:"coffee-beans",quantity:18},{ingredientId:"hot-water",quantity:200}]},{id:"cb-03",name:"Caramel Chocolate Mocha",description:"A decadent mix of rich chocolate, espresso, and creamy caramel for the ultimate treat.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/caramel-chocolate-mocha.jpg"),available:!0,stock:99,popular:!0,displayOrder:3,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"chocolate-sauce",quantity:20},{ingredientId:"caramel-sauce",quantity:15}]},{id:"cb-04",name:"Dark Chocolate Mocha",description:"A bold and intense mocha experience with premium dark chocolate and strong espresso.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/dark-chocolate-mocha.jpg"),available:!0,stock:99,displayOrder:4,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"chocolate-sauce",quantity:25}]},{id:"cb-05",name:"Mocha Latte",description:"A classic blend of smooth espresso, rich chocolate sauce, and steamed milk.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/mocha-latte.jpg"),available:!0,stock:99,displayOrder:5,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"chocolate-sauce",quantity:20}]},{id:"cb-06",name:"Americano",description:"Bold espresso shots topped with hot water to create a light layer of crema.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/americano.jpg"),available:!0,stock:99,displayOrder:6,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"hot-water",quantity:220}]},{id:"cb-07",name:"Biscoff Latte",description:"An indulgent latte infused with the irresistible flavor of caramelized Biscoff cookies.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:199}],imageUrl:he("coffee-based/biscoff-latte.jpg"),available:!0,stock:99,displayOrder:7,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:170},{ingredientId:"biscoff-spread",quantity:30}]},{id:"cb-08",name:"Reeses Latte",description:"The perfect combination of peanut butter, chocolate, and espresso. A candy lover's dream.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("coffee-based/reeses-latte.jpg"),available:!0,stock:99,displayOrder:8,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:160},{ingredientId:"chocolate-sauce",quantity:15},{ingredientId:"peanut-butter",quantity:20}]},{id:"cb-09",name:"Brown Sugar Latte",description:"A comforting latte sweetened with rich, molasses-like brown sugar syrup.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:79}],imageUrl:he("coffee-based/brown-sugar-latte.jpg"),available:!0,stock:99,displayOrder:9,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"brown-sugar-syrup",quantity:25}]},{id:"cb-10",name:"Iced Latte",description:"A simple classic. Chilled espresso with cold milk served over ice.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/iced-latte.jpg"),available:!0,stock:99,displayOrder:10,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"ice-cubes",quantity:100}]},{id:"cb-11",name:"Orange Latte",description:"A unique and refreshing latte with a zesty hint of natural orange flavor.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:89}],imageUrl:he("coffee-based/orange-latte.jpg"),available:!0,stock:99,displayOrder:11,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:170},{ingredientId:"orange-syrup",quantity:20}]},{id:"cb-12",name:"Coffee Jelly",description:"A delightful iced coffee drink with chewy, coffee-flavored jelly cubes.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:99}],imageUrl:he("coffee-based/coffee-jelly.jpg"),available:!0,stock:99,displayOrder:12,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"coffee-jelly",quantity:80},{ingredientId:"ice-cubes",quantity:80}]},{id:"nc-01",name:"Red Velvet",description:"A sweet and creamy drink inspired by the classic red velvet cake, with hints of cocoa and vanilla.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/red-velvet.jpg"),available:!0,stock:99,displayOrder:13,recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"red-velvet-powder",quantity:25},{ingredientId:"chocolate-sauce",quantity:10},{ingredientId:"vanilla-syrup",quantity:15}]},{id:"nc-02",name:"Red Velvet Matcha Latte",description:"A beautiful and delicious blend of earthy matcha and sweet red velvet flavors.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/red-velvet-matcha-latte.jpg"),available:!0,stock:99,displayOrder:14,recipe:[{ingredientId:"milk",quantity:180},{ingredientId:"matcha-powder",quantity:5},{ingredientId:"red-velvet-powder",quantity:15},{ingredientId:"vanilla-syrup",quantity:10}]},{id:"nc-03",name:"Milky Choco",description:"A rich and comforting chocolate drink made with high-quality cocoa and fresh milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/milky-choco.jpg"),available:!0,stock:99,displayOrder:15,recipe:[{ingredientId:"milk",quantity:220},{ingredientId:"chocolate-sauce",quantity:30}]},{id:"nc-04",name:"Strawberry Milk",description:"A refreshing and creamy drink made with real strawberries and fresh milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/strawberry-milk.jpg"),available:!0,stock:99,displayOrder:16,recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"strawberry-puree",quantity:50}]},{id:"nc-05",name:"Biscoff Milky",description:"A non-coffee treat blending the sweet, caramelized taste of Biscoff with creamy milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/biscoff-milky.jpg"),available:!0,stock:99,displayOrder:17,recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"biscoff-spread",quantity:35}]},{id:"nc-06",name:"Oreo Latte",description:"A fun and delicious drink packed with the classic cookies and cream flavor of Oreos.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/oreo-latte.jpg"),available:!0,stock:99,displayOrder:18,recipe:[{ingredientId:"milk",quantity:180},{ingredientId:"oreo-crumbs",quantity:40},{ingredientId:"chocolate-sauce",quantity:15}]},{id:"ms-01",name:"Matcha Latte",description:"Premium Japanese matcha green tea with steamed milk, a perfect balance of earthy and creamy.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:89}],imageUrl:he("matcha-series/matcha-latte.jpg"),available:!0,stock:99,popular:!0,displayOrder:19,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:200}]},{id:"ms-02",name:"Strawberry Matcha",description:"A delightful pairing of sweet strawberry puree and high-quality matcha green tea.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:109}],imageUrl:he("matcha-series/strawberry-matcha.jpg"),available:!0,stock:99,displayOrder:20,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"strawberry-puree",quantity:40}]},{id:"ms-03",name:"Matcha Cream Cheese",description:"Earthy matcha topped with a rich, savory, and slightly sweet cream cheese foam.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:109}],imageUrl:he("matcha-series/matcha-cream-cheese.jpg"),available:!0,stock:99,displayOrder:21,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"cream-cheese",quantity:30}]},{id:"ms-04",name:"Matcha Oreo",description:"A creative blend of matcha and crushed Oreo cookies for a unique texture and flavor.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("matcha-series/matcha-oreo.jpg"),available:!0,stock:99,displayOrder:22,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"oreo-crumbs",quantity:35}]},{id:"rf-01",name:"Flamangooverload Shake",description:"An explosive mix of flamingo and mango for an overload of fruity goodness.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/flamangooverload.jpg"),available:!0,stock:99,displayOrder:23,recipe:[{ingredientId:"mango-puree",quantity:100},{ingredientId:"strawberry-puree",quantity:50},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-02",name:"Mangoberry Shake",description:"A delightful blend of sweet mangoes and tangy berries, perfectly refreshing.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/mangoberry.jpg"),available:!0,stock:99,displayOrder:24,recipe:[{ingredientId:"mango-puree",quantity:80},{ingredientId:"mixed-berries",quantity:50},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-03",name:"Mango Caramel Shake",description:"Creamy mango shake drizzled with rich, buttery caramel sauce.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/mango-caramel.jpg"),available:!0,stock:99,displayOrder:25,recipe:[{ingredientId:"mango-puree",quantity:100},{ingredientId:"caramel-sauce",quantity:20},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-04",name:"Blueberry Shake",description:"A classic fruit shake made with sweet and juicy blueberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/blueberry-shake.jpg"),available:!0,stock:99,displayOrder:26,recipe:[{ingredientId:"blueberry-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-05",name:"Strawberry Shake",description:"A creamy and delicious shake made with ripe, sweet strawberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/strawberry-shake.jpg"),available:!0,stock:99,displayOrder:27,recipe:[{ingredientId:"strawberry-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-06",name:"Green Apple Shake",description:"A tart and refreshing shake with the crisp taste of green apples.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/green-apple-shake.jpg"),available:!0,stock:99,displayOrder:28,recipe:[{ingredientId:"green-apple-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-07",name:"Blueberry Soda Pop",description:"Fizzy and fun, this soda pop is bursting with sweet blueberry flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/blueberry-soda.jpg"),available:!0,stock:99,displayOrder:29,recipe:[{ingredientId:"blueberry-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-08",name:"Strawberry Soda Pop",description:"A refreshing soda pop with the sweet taste of summer strawberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/strawberry-soda.jpg"),available:!0,stock:99,displayOrder:30,recipe:[{ingredientId:"strawberry-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-09",name:"Green Apple Soda Pop",description:"A crisp and bubbly soda with a tangy green apple twist.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/green-apple-soda.jpg"),available:!0,stock:99,displayOrder:31,recipe:[{ingredientId:"green-apple-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-10",name:"Lemon Soda Pop",description:"A zesty and invigorating soda pop with a classic lemon flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/lemon-soda.jpg"),available:!0,stock:99,displayOrder:32,recipe:[{ingredientId:"lemon-juice",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-11",name:"Lychee Soda Pop",description:"An exotic and fragrant soda pop with the sweet, floral taste of lychee.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/lychee-soda.jpg"),available:!0,stock:99,displayOrder:33,recipe:[{ingredientId:"lychee-syrup",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-12",name:"Mango Soda Pop",description:"A tropical and bubbly soda bursting with sweet mango flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/mango-soda.jpg"),available:!0,stock:99,displayOrder:34,recipe:[{ingredientId:"mango-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"ml-01",name:"Breaded Bacon",description:"Crispy breaded bacon served with creamy white sauce and golden fries.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:119},{name:"Combo Meal",size:"w/ Fries & Drink",price:139}],imageUrl:he("menu/ala-carte-breaded-bacon-with-white-sauce and fries.jpg"),comboImageUrl:he("menu/combo-meals-breaded-bacon-with-white-sauce,-fries-and-a-drink.jpg"),available:!0,stock:99,popular:!0,displayOrder:35,recipe:[{ingredientId:"bacon-strips",quantity:.15},{ingredientId:"bread-crumbs",quantity:50},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:100},{ingredientId:"takeout-pack",quantity:1}]},{id:"ml-02",name:"Breaded Porkchop",description:"A juicy breaded porkchop fried to perfection, served with white sauce and fries.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:129},{name:"Combo Meal",size:"w/ Fries & Drink",price:149}],imageUrl:he("menu/ala-carte-breaded-porkchop-with-white-sauce-and-fries.jpg"),comboImageUrl:he("menu/combo-meals-breaded-porkchop-with-white-sauce-and-fries-w-drink.jpg"),available:!0,stock:99,popular:!0,displayOrder:36,recipe:[{ingredientId:"porkchop",quantity:.2},{ingredientId:"bread-crumbs",quantity:60},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:120},{ingredientId:"takeout-pack",quantity:1}]},{id:"ml-03",name:"Breaded Chicken",description:"Tender breaded chicken fillet with a side of fries and our signature white sauce.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:119},{name:"Combo Meal",size:"w/ Fries & Drink",price:139}],imageUrl:he("menu/ala-carte-chicken-with-white-sauce-and-fries.jpg"),comboImageUrl:he("menu/combo-meals-breaded-chicken-with-white-sauce,-fries-and-a-drink.jpg"),available:!0,stock:99,displayOrder:37,recipe:[{ingredientId:"chicken-fillet",quantity:.2},{ingredientId:"bread-crumbs",quantity:55},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:110},{ingredientId:"takeout-pack",quantity:1}]}],VM=C.createContext(void 0),_Q=()=>{const t=C.useContext(VM);if(!t)throw new Error("useProduct must be used within a ProductProvider");return t},vQ=({children:t})=>{const[e,n]=C.useState([]),[i,r]=C.useState(!0),[s,a]=C.useState(null),o=C.useCallback(async()=>{r(!0),a(null);try{const f=Xe.collection("products"),g=f.orderBy("displayOrder","asc"),b=await g.get();if(b.empty){console.log("Products collection is empty. Seeding products with specific IDs...");const v=Xe.batch();qf.forEach(k=>{const{id:V,...A}=k,T=f.doc(V);v.set(T,A)}),await v.commit(),console.log(`Successfully seeded ${qf.length} products to Firestore!`);const I=(await g.get()).docs.map(k=>({id:k.id,...k.data()}));n(I);return}const E=b.docs.map(v=>({id:v.id,...v.data()}));n(E);const x=Xe.batch();let w=!1;qf.forEach(v=>{const _=E.find(I=>I.id===v.id);if(_){const I=JSON.stringify(_.recipe||[]),k=JSON.stringify(v.recipe||[]);if(I!==k){const V=f.doc(v.id);x.update(V,{recipe:v.recipe}),w=!0,console.log(`Syncing recipe for ${v.name}`)}}}),w&&(await x.commit(),console.log(" Recipes synced from code to Firestore"))}catch(f){f.code==="permission-denied"?console.info("Firestore permission denied. This is expected if security rules are not yet configured or if you are offline. Falling back to mock data for demonstration."):console.warn("Error fetching products from Firestore. Falling back to mock data.",f),n(qf),a(null)}finally{r(!1)}},[]);C.useEffect(()=>{o()},[o]);const d={products:e,isLoading:i,error:s,addProduct:async f=>{try{await Xe.collection("products").add(f),await o()}catch(g){throw console.error("Error adding product: ",g),new Error("Failed to add product.")}},updateProduct:async(f,g)=>{try{await Xe.collection("products").doc(f).update(g),await o()}catch(b){throw console.error("Error updating product: ",b),new Error("Failed to update product.")}},deleteProduct:async f=>{try{await Xe.collection("products").doc(f).delete(),await o()}catch(g){throw console.error("Error deleting product: ",g),new Error("Failed to delete product.")}}};return p.jsx(VM.Provider,{value:d,children:t})},MM=C.createContext(void 0),LM=()=>{const t=C.useContext(MM);if(t===void 0)throw new Error("useCart must be used within a CartProvider");return t},wQ=({children:t})=>{const[e,n]=C.useState([]),[i,r]=C.useState(!1),[s,a]=C.useState(null),[o,l]=C.useState(!0),[c,h]=C.useState([]),{currentUser:d}=da(),{products:f,isLoading:g}=_Q();C.useEffect(()=>{if(s){const N=setTimeout(()=>a(null),4e3);return()=>clearTimeout(N)}},[s]);const b=C.useCallback(N=>{a(N)},[]);C.useEffect(()=>{d?(async()=>{var q;if(!(!d||g)){l(!0);try{const z=await Xe.collection("users").doc(d.uid).get();if(z.exists){const J=(((q=z.data())==null?void 0:q.cart)||[]).map(ie=>{const W=f.find(St=>St.id===ie.productId);if(!W)return null;const de=W.sizes.find(St=>St.name===ie.sizeName);if(!de)return null;const Dt=ie.customizations?JSON.stringify(ie.customizations):"";return{id:`${W.id}-${de.name}-${Dt}`,product:W,selectedSize:de,quantity:ie.quantity,customizations:ie.customizations}}).filter(ie=>ie!==null);n(J)}}catch(ne){console.error("Error fetching cart from Firestore:",ne),b("Couldn't load your cart.")}finally{l(!1)}}})():(n([]),l(!1))},[d,f,g,b]);const E=C.useCallback(async N=>{if(d)try{const q=Xe.collection("users").doc(d.uid),ne=N.map(z=>{const Y={};return z.customizations&&(z.customizations.sugarLevel!==void 0&&(Y.sugarLevel=z.customizations.sugarLevel),z.customizations.iceLevel!==void 0&&(Y.iceLevel=z.customizations.iceLevel),z.customizations.toppings!==void 0&&(Y.toppings=z.customizations.toppings)),{productId:z.product.id,sizeName:z.selectedSize.name,quantity:z.quantity,...Object.keys(Y).length>0&&{customizations:Y}}});await q.set({cart:ne},{merge:!0})}catch(q){console.error("Error updating Firestore cart:",q),b("Error saving your cart.")}},[d,b]),x=C.useMemo(()=>e.reduce((N,q)=>N+q.quantity,0),[e]),w=()=>r(!0),v=()=>r(!1),_=(N,q,ne,z=1)=>{const Y=ne?JSON.stringify(ne):"",J=`${N.id}-${q.name}-${Y}`;let ie;e.find(de=>de.id===J)?ie=e.map(de=>de.id===J?{...de,quantity:Math.min(de.quantity+z,N.stock)}:de):ie=[...e,{id:J,product:N,selectedSize:q,quantity:Math.min(z,N.stock),customizations:ne}],n(ie),E(ie),b(`${N.name} (${q.name}) added to cart!`),w()},I=N=>{if(!N||N.length===0)return;let q=[...e],ne=0;N.forEach(z=>{const Y=z.customizations?JSON.stringify(z.customizations):"",J=`${z.product.id}-${z.selectedSize.name}-${Y}`,ie=q.findIndex(W=>W.id===J);if(ie>-1){const W=q[ie],de=W.quantity+z.quantity;q[ie]={...W,quantity:Math.min(de,z.product.stock)}}else q.push({id:J,product:z.product,selectedSize:z.selectedSize,quantity:Math.min(z.quantity,z.product.stock),customizations:z.customizations});ne+=z.quantity}),n(q),E(q),b(`${ne} item(s) added to your cart!`),w()},k=(N,q)=>{let ne;q<1?ne=e.filter(z=>z.id!==N):ne=e.map(z=>z.id===N?{...z,quantity:Math.min(q,z.product.stock)}:z),n(ne),E(ne)},V=N=>{const q=e.find(z=>z.id===N),ne=e.filter(z=>z.id!==N);n(ne),E(ne),q&&b(`${q.product.name} (${q.selectedSize.name}) removed from cart.`)},A=(N,q,ne,z,Y=1)=>{const J=e.filter(It=>It.id!==N),ie=z?JSON.stringify(z):"",W=`${q.id}-${ne.name}-${ie}`,de=J.find(It=>It.id===W);let Dt;de?Dt=J.map(It=>It.id===W?{...It,quantity:Math.min(It.quantity+Y,q.stock)}:It):Dt=[...J,{id:W,product:q,selectedSize:ne,quantity:Math.min(Y,q.stock),customizations:z}],n(Dt),E(Dt),b(`${q.name} (${ne.name}) updated!`)},T=()=>{n([]),h([]),E([])},S=N=>{h(q=>q.includes(N)?q.filter(ne=>ne!==N):[...q,N])},R=()=>{h(e.map(N=>N.id))},D=()=>{h([])};C.useEffect(()=>{const N=e.map(q=>q.id);h(q=>{const ne=q.filter(Y=>N.includes(Y)),z=N.filter(Y=>!q.includes(Y));return[...ne,...z]})},[e]);const O={cartItems:e,isCartOpen:i,toastMessage:s,totalCartItems:x,isCartLoading:o,selectedItemIds:c,addToCart:_,addMultipleToCart:I,updateQuantity:k,updateCartItem:A,removeFromCart:V,openCart:w,closeCart:v,showToast:b,toggleItemSelection:S,selectAllItems:R,deselectAllItems:D,clearCart:T};return p.jsx(MM.Provider,{value:O,children:t})},jr=({className:t,...e})=>p.jsxs("svg",{viewBox:"0 0 241 175",xmlns:"http://www.w3.org/2000/svg",className:t,fill:"currentColor",...e,children:[p.jsx("path",{d:"M153.092 78.5C178.275 50.84 210.393 19.4076 222.5 17.5C234.607 15.5924 239.5 30 239.5 30C239.5 30 244.137 46.596 236.388 72.8253C228.64 99.0547 199 128.5 199 128.5C199 128.5 177.5 152.5 147.5 167C147.5 167 114.686 183.001 104.889 169.159C95.0912 155.316 127.909 106.16 153.092 78.5Z"}),p.jsx("path",{d:"M8.99445 86.0801C8.99445 86.0801 -16.2682 31.1886 17.8826 14.4198C33.7618 9.56756 76 55.675 76 64.5C76 70 63.7899 86.337 59 101.5C54.887 114.52 55.557 134.266 52.0896 135.774C48.0468 137.533 37.3644 137.835 8.99445 86.0801Z"}),p.jsx("path",{d:"M47 12.5C41.0274 7.52362 41.5502 -7.59339e-06 52.5 0C63.4498 7.5934e-06 69.3348 2.24286 82.0884 7.45282C95.3718 12.8792 105.888 16.4103 109.463 23.875C111.5 32.5 107.979 33.026 103.5 38.5C99.0205 43.9741 96 44.1666 91 43.5C83.5342 42.5047 52.9726 17.4764 47 12.5Z"}),p.jsx("path",{d:"M200.048 20.8891C212.988 11.4339 207.491 2.52815 200.048 2.97405C192.604 3.41995 127.379 9.72972 89.5542 67.6673C85.4261 73.9905 72.4385 95.2439 69.1452 112.455C65.6022 130.971 65.8681 149.097 73.6272 157.74C81.0528 166.012 88.1891 164.145 92.2823 156.482C96.4277 148.721 97.4982 135.065 100.004 127.882C104.983 113.605 104.907 116.382 109.393 106.379C114.278 95.4879 120.938 86.2377 126.993 78.4363C154.543 42.9442 190.775 27.6646 200.048 20.8891Z"})]}),bQ=({children:t,className:e="",hover:n=!1,variant:i="default",padding:r="md",clickable:s=!1,onClick:a})=>{const o="rounded-2xl transition-all duration-300 ease-out",l={default:"border border-gray-100 bg-white/80 backdrop-blur-sm shadow-lg",elevated:"bg-white shadow-xl border-0",outlined:"border-2 border-primary-200 bg-white",glass:"bg-white/70 backdrop-blur-md border border-white/20 shadow-xl"},c={none:"",sm:"p-4",md:"p-6",lg:"p-8"},h=n?"hover:shadow-2xl hover:-translate-y-1 hover:scale-[1.02]":"",d=s?"cursor-pointer active:scale-[0.98]":"";return p.jsx("div",{className:`${o} ${l[i]} ${c[r]} ${h} ${d} ${e}`,onClick:s?a:void 0,role:s?"button":void 0,tabIndex:s?0:void 0,children:t})},fE=({isOpen:t,onClose:e,title:n,children:i,footer:r,size:s="md",hideHeader:a=!1,hideCloseButton:o=!1,className:l=""})=>{const[c,h]=C.useState(!1);if(C.useEffect(()=>{const f=g=>{g.key==="Escape"&&e()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[e]),C.useEffect(()=>{window.getComputedStyle(document.body).overflow;const f=document.getElementById("admin-main-content");return t?(document.body.style.overflow="hidden",f&&(window.getComputedStyle(f).overflow,f.style.overflow="hidden")):(document.body.style.overflow="",f&&(f.style.overflow="")),()=>{document.body.style.overflow="",f&&(f.style.overflow="")}},[t]),C.useEffect(()=>{if(t){h(!0);const f=setTimeout(()=>{h(!1)},1e3);return()=>clearTimeout(f)}},[t,s,i]),!t)return null;const d={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-2xl"};return typeof document<"u"?$C.createPortal(p.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm animate-fade-in",role:"dialog","aria-modal":"true","aria-labelledby":n?"modal-title":void 0,onClick:e,children:p.jsx("div",{className:`relative w-full transform transition-all ${d[s]} ${l} max-h-[90vh] flex flex-col animate-scale-in`,onClick:f=>f.stopPropagation(),children:p.jsxs(bQ,{variant:"elevated",className:"rounded-3xl p-0 shadow-2xl flex flex-col max-h-full overflow-hidden bg-white",children:[!o&&p.jsx("button",{onClick:e,className:"absolute right-6 top-6 z-10 rounded-full p-2 text-gray-400 transition-all hover:bg-gray-100 hover:text-gray-600 active:scale-95","aria-label":"Close modal",children:p.jsx(Id,{className:"h-6 w-6"})}),!a&&n&&p.jsx("div",{className:"px-8 pt-8 pb-2 flex-shrink-0",children:p.jsx("h3",{id:"modal-title",className:"text-2xl font-bold text-gray-900",children:n})}),p.jsx("div",{className:`${a&&!n?"p-6 pb-10":"px-6 py-6 pb-10"} overflow-y-auto custom-scrollbar ${c?"scrollbar-flash":""} flex-1`,children:i}),r&&p.jsx("div",{className:"flex justify-end gap-3 px-6 pb-2 pt-2 flex-shrink-0",children:r})]})})}),document.body):null},TQ=()=>p.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),p.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),p.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),p.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),EQ=()=>p.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"#1877F2",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),AQ=({onForgotPassword:t,onRegister:e,onSuccess:n,onVerificationNeeded:i})=>{const[r,s]=C.useState(""),[a,o]=C.useState(""),[l,c]=C.useState(!1),[h,d]=C.useState(!1),[f,g]=C.useState(!1),[b,E]=C.useState(!1),[x,w]=C.useState(!1),[v,_]=C.useState(null),{login:I,signInWithGoogle:k,signInWithFacebook:V}=da(),A=async R=>{if(R.preventDefault(),!r||!a){_("Please fill in all fields");return}g(!0),_(null),console.log(" LoginForm submitting:",{email:r,password:a,rememberMe:l});try{const D=await I(r,a,l);sessionStorage.removeItem("requires2FA"),n(D.role)}catch(D){console.error("Login error:",D),D.code==="auth/invalid-credential"||D.code==="auth/user-not-found"||D.code==="auth/wrong-password"?_("Incorrect email or password."):_("Failed to login. Please try again.")}finally{g(!1)}},T=async()=>{E(!0),_(null);try{const R=await k();n(R.role)}catch(R){console.error("Google Sign-In Error:",R),R.code==="auth/popup-closed-by-user"?_("Sign-in cancelled."):R.code==="auth/popup-blocked"?_("Pop-up blocked. Please allow pop-ups for this site."):R.code==="auth/operation-not-allowed"?_("Google Sign-In is not enabled in Firebase Console."):_(R.message||"Failed to sign in with Google")}finally{E(!1)}},S=async()=>{w(!0),_(null);try{const R=await V();n(R.role)}catch(R){console.error("Facebook Sign-In Error:",R),R.code==="auth/popup-closed-by-user"?_("Sign-in cancelled."):R.code==="auth/popup-blocked"?_("Pop-up blocked. Please allow pop-ups for this site."):R.code==="auth/operation-not-allowed"?_("Facebook Sign-In is not enabled in Firebase Console."):R.code==="auth/account-exists-with-different-credential"?_("An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."):_(R.message||"Failed to sign in with Facebook")}finally{w(!1)}};return p.jsxs("div",{className:"w-full max-w-md mx-auto",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx(jr,{className:"mx-auto h-16 w-16 text-primary-600 mb-4"}),p.jsx("h2",{className:"font-display text-4xl font-bold text-gray-900",children:"Rush Coffee"})]}),p.jsxs("form",{onSubmit:A,className:"space-y-4",children:[v&&p.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-800 border border-red-200",children:[p.jsx(Xu,{className:"h-5 w-5 flex-shrink-0"}),p.jsx("span",{children:v})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),p.jsxs("div",{className:"relative",children:[p.jsx(Mh,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),p.jsx("input",{type:"email",value:r,onChange:R=>s(R.target.value),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"name@example.com"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),p.jsxs("div",{className:"relative",children:[p.jsx(e0,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),p.jsx("input",{type:h?"text":"password",value:a,onChange:R=>o(R.target.value),className:"w-full pl-12 pr-12 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter your password"}),p.jsx("button",{type:"button",onClick:()=>d(!h),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:h?p.jsx(Y2,{className:"h-5 w-5"}):p.jsx(X2,{className:"h-5 w-5"})})]})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("label",{className:"flex items-center cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:l,onChange:R=>c(R.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),p.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Remember me"})]}),p.jsx("button",{type:"button",onClick:()=>t(r),className:"text-sm text-primary-600 hover:text-primary-700 font-medium transition-colors",children:"Forgot your password?"})]}),p.jsx("button",{type:"submit",disabled:f,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3.5 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:f?p.jsxs("span",{className:"flex items-center justify-center gap-2",children:[p.jsx(li,{className:"h-5 w-5 animate-spin"}),"Logging in..."]}):"Login"}),p.jsxs("div",{className:"relative my-6",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-gray-200"})}),p.jsx("div",{className:"relative flex justify-center text-sm",children:p.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or continue with"})})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("button",{type:"button",onClick:T,disabled:b||x,className:"flex items-center justify-center gap-2 border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 py-3.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[b?p.jsx(li,{className:"h-5 w-5 animate-spin"}):p.jsx(TQ,{}),p.jsx("span",{className:"font-semibold text-gray-700",children:"Google"})]}),p.jsxs("button",{type:"button",onClick:S,disabled:b||x,className:"flex items-center justify-center gap-2 border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 py-3.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[x?p.jsx(li,{className:"h-5 w-5 animate-spin"}):p.jsx(EQ,{}),p.jsx("span",{className:"font-semibold text-gray-700",children:"Facebook"})]})]}),p.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Don't have an account?"," ",p.jsx("button",{type:"button",onClick:e,className:"text-primary-600 font-semibold hover:text-primary-700 transition-colors",children:"Sign up"})]})]})]})},UM=C.createContext(void 0),IQ=()=>{const t=C.useContext(UM);return t||{executeRecaptcha:async()=>"mock-token"}},SQ=({children:t})=>{const e=async()=>(console.log("ReCaptcha executed (mock)"),"mock-recaptcha-token");return p.jsx(UM.Provider,{value:{executeRecaptcha:e},children:t})};function jM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xQ=jM,zM=new ar("auth","Firebase",jM());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=new Sd("@firebase/auth");function RQ(t,...e){Mp.logLevel<=fe.WARN&&Mp.warn(`Auth (${yi}): ${t}`,...e)}function Rm(t,...e){Mp.logLevel<=fe.ERROR&&Mp.error(`Auth (${yi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(t,...e){throw mE(t,...e)}function FM(t,...e){return mE(t,...e)}function BM(t,e,n){const i={...xQ(),[e]:n};return new ar("auth","Firebase",i).create(e,{appName:t.name})}function Cm(t){return BM(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mE(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return zM.create(t,...e)}function Ie(t,e,...n){if(!t)throw mE(e,...n)}function mh(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rm(e),new Error(e)}function Lp(t,e){t||mh(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CQ(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function qM(){return tR()==="http:"||tR()==="https:"}function tR(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PQ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qM()||Ib()||"connection"in navigator)?navigator.onLine:!0}function NQ(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Lp(n>e,"Short delay should be less than long delay!"),this.isMobile=rD()||gg()}get(){return PQ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DQ(t,e){Lp(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OQ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VQ=new Qd(3e4,6e4);function pE(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Yd(t,e,n,i,r={}){return $M(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const o=ra({key:t.config.apiKey,...a}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return aD()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&sr(t.emulatorConfig.host)&&(c.credentials="include"),HM.fetch()(await GM(t,t.config.apiHost,n,o),c)})}async function $M(t,e,n){t._canInitEmulator=!1;const i={...kQ,...e};try{const r=new MQ(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Hf(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hf(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Hf(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Hf(t,"user-disabled",a);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw BM(t,h,c);eR(t,h)}}catch(r){if(r instanceof jt)throw r;eR(t,"network-request-failed",{message:String(r)})}}async function GM(t,e,n,i){const r=`${e}${n}?${i}`,s=t,a=s.config.emulator?DQ(t.config,r):`${t.config.apiScheme}://${r}`;return OQ.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class MQ{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(FM(this.auth,"network-request-failed")),VQ.get())})}}function Hf(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=FM(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LQ(t,e){return Yd(t,"POST","/v1/accounts:delete",e)}async function Up(t,e){return Yd(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function UQ(t,e=!1){const n=Z(t),i=await n.getIdToken(e),r=KM(i);Ie(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:ph(z_(r.auth_time)),issuedAtTime:ph(z_(r.iat)),expirationTime:ph(z_(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function z_(t){return Number(t)*1e3}function KM(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Rm("JWT malformed, contained fewer than 3 sections"),null;try{const r=mg(n);return r?JSON.parse(r):(Rm("Failed to decode base64 JWT payload"),null)}catch(r){return Rm("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function nR(t){const e=KM(t);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K0(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof jt&&jQ(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function jQ({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zQ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ph(this.lastLoginAt),this.creationTime=ph(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jp(t){var d;const e=t.auth,n=await t.getIdToken(),i=await K0(t,Up(e,{idToken:n}));Ie(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const s=(d=r.providerUserInfo)!=null&&d.length?WM(r.providerUserInfo):[],a=BQ(t.providerData,s),o=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),c=o?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new W0(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function FQ(t){const e=Z(t);await jp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BQ(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function WM(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qQ(t,e){const n=await $M(t,{},async()=>{const i=ra({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=await GM(t,r,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:i};return t.emulatorConfig&&sr(t.emulatorConfig.host)&&(l.credentials="include"),HM.fetch()(a,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function HQ(t,e){return Yd(t,"POST","/v2/accounts:revokeToken",pE(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=nR(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await qQ(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new Rl;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(Ie(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(Ie(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rl,this.toJSON())}_performRefresh(){return mh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(t,e){Ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gi{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new zQ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new W0(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await K0(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return UQ(this,e)}reload(){return FQ(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await jp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Se(this.auth.app))return Promise.reject(Cm(this.auth));const e=await this.getIdToken();return await K0(this,LQ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:g,providerData:b,stsTokenManager:E}=n;Ie(d&&E,e,"internal-error");const x=Rl.fromJSON(this.name,E);Ie(typeof d=="string",e,"internal-error"),ls(i,e.name),ls(r,e.name),Ie(typeof f=="boolean",e,"internal-error"),Ie(typeof g=="boolean",e,"internal-error"),ls(s,e.name),ls(a,e.name),ls(o,e.name),ls(l,e.name),ls(c,e.name),ls(h,e.name);const w=new Gi({uid:d,auth:e,email:r,emailVerified:f,displayName:i,isAnonymous:g,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:x,createdAt:c,lastLoginAt:h});return b&&Array.isArray(b)&&(w.providerData=b.map(v=>({...v}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,n,i=!1){const r=new Rl;r.updateFromServerResponse(n);const s=new Gi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await jp(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Ie(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?WM(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),o=new Rl;o.updateFromIdToken(i);const l=new Gi({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new W0(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=new Map;function za(t){Lp(t instanceof Function,"Expected a class definition");let e=iR.get(t);return e?(Lp(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iR.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}QM.type="NONE";const rR=QM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(t,e,n){return`firebase:${t}:${e}:${n}`}class Cl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=F_(this.userKey,r.apiKey,s),this.fullPersistenceKey=F_("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Up(this.auth,{idToken:e}).catch(()=>{});return n?Gi._fromGetAccountInfoResponse(this.auth,n,e):null}return Gi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Cl(za(rR),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||za(rR);const a=F_(i,e.config.apiKey,e.name);let o=null;for(const c of n)try{const h=await c._get(a);if(h){let d;if(typeof h=="string"){const f=await Up(e,{idToken:h}).catch(()=>{});if(!f)break;d=await Gi._fromGetAccountInfoResponse(e,f,h)}else d=Gi._fromJSON(e,h);c!==s&&(o=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Cl(s,e,i):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new Cl(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WQ(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($Q(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YQ(e))return"Blackberry";if(XQ(e))return"Webos";if(GQ(e))return"Safari";if((e.includes("chrome/")||KQ(e))&&!e.includes("edge/"))return"Chrome";if(QQ(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function $Q(t=Ee()){return/firefox\//i.test(t)}function GQ(t=Ee()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KQ(t=Ee()){return/crios\//i.test(t)}function WQ(t=Ee()){return/iemobile/i.test(t)}function QQ(t=Ee()){return/android/i.test(t)}function YQ(t=Ee()){return/blackberry/i.test(t)}function XQ(t=Ee()){return/webos/i.test(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(t,e=[]){let n;switch(t){case"Browser":n=sR(Ee());break;case"Worker":n=`${sR(Ee())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yi}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JQ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZQ(t,e={}){return Yd(t,"GET","/v2/passwordPolicy",pE(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eY=6;class tY{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??eY,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nY{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aR(this),this.idTokenSubscription=new aR(this),this.beforeStateQueue=new JQ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=za(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Cl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Up(this,{idToken:e}),i=await Gi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Se(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await jp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=NQ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Se(this.app))return Promise.reject(Cm(this));const n=e?Z(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Se(this.app)?Promise.reject(Cm(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Se(this.app)?Promise.reject(Cm(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(za(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZQ(this),n=new tY(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ar("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await HQ(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&za(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await Cl.create(this,[za(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(Se(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&RQ(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function iY(t){return Z(t)}class aR{constructor(e){this.auth=e,this.observer=null,this.addObserver=Sb(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function rY(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(za);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sY(t,e){return Yd(t,"POST","/v1/accounts:createAuthUri",pE(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aY(t,e){const n=qM()?CQ():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:r}=await sY(Z(t),i);return r||[]}new Qd(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Qd(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Qd(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Qd(5e3,15e3);var oR="@firebase/auth",lR="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oY{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lY(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cY(t){Si(new Dn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=i.options;Ie(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YM(t)},c=new nY(i,r,s,l);return rY(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Si(new Dn("auth-internal",e=>{const n=iY(e.getProvider("auth").getImmediate());return(i=>new oY(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yn(oR,lR,lY(t)),yn(oR,lR,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uY=5*60;nD("authIdTokenMaxAge");cY("Browser");const hY=({onLogin:t,onSuccess:e,onVerificationNeeded:n})=>{const[i,r]=C.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),[s,a]=C.useState(!1),[o,l]=C.useState(!1),[c,h]=C.useState(null),[d,f]=C.useState(!1),[g,b]=C.useState(!1),[E,x]=C.useState("idle"),[w,v]=C.useState({score:0,label:"",color:"bg-gray-200"}),[_,I]=C.useState({email:"",password:"",phone:""}),{register:k}=da(),{executeRecaptcha:V}=IQ();wr.useEffect(()=>{window.debugRegister=k},[k]),wr.useEffect(()=>{const D=setTimeout(async()=>{if(!i.email||!i.email.includes("@")){x("idle");return}x("checking");try{(await aY(tn,i.email)).length>0?(x("taken"),I(N=>({...N,email:"This email is already in use."}))):(x("available"),I(N=>({...N,email:""})))}catch(O){console.error("Error checking email:",O),x("idle")}},500);return()=>clearTimeout(D)},[i.email]);const A=R=>{let D=0;return R?(R.length>=6&&D++,R.length>=10&&D++,/[A-Z]/.test(R)&&D++,/[0-9]/.test(R)&&D++,/[^A-Za-z0-9]/.test(R)&&D++,D<=2?{score:D,label:"Weak",color:"bg-red-500"}:D<=4?{score:D,label:"Good",color:"bg-yellow-500"}:{score:D,label:"Strong",color:"bg-green-500"}):{score:0,label:"",color:"bg-gray-200"}},T=R=>{const D=R.target.value;r({...i,password:D}),v(A(D)),_.password&&I(O=>({...O,password:""}))};wr.useEffect(()=>{if(!d)return;let R,D;return R=setInterval(async()=>{if(tn.currentUser)try{await tn.currentUser.reload();const N=["admin@rushcoffee.ph","sa@gmail.com"];(tn.currentUser.emailVerified||N.includes(tn.currentUser.email||""))&&(b(!0),clearInterval(R),clearTimeout(D),setTimeout(()=>{window.location.href="#/menu"},1e3))}catch(N){console.error("Error checking verification:",N)}},3e3),D=setTimeout(()=>{clearInterval(R)},6e5),()=>{clearInterval(R),clearTimeout(D)}},[d]);const S=async R=>{try{if(h(""),l(!0),i.password!==i.confirmPassword){I(ne=>({...ne,password:"Passwords do not match"})),l(!1);return}if(!i.email.endsWith("@gmail.com")){I(ne=>({...ne,email:"Please use a valid @gmail.com address"})),l(!1);return}if(E==="taken"){I(ne=>({...ne,email:"This email is already registered."})),l(!1);return}if(i.phone&&!/^(09|\+639)\d{9}$/.test(i.phone)){I(z=>({...z,phone:"Please enter a valid PH phone number (e.g., 09xxxxxxxxx)."})),l(!1);return}const D=await V();console.log("ReCaptcha token:",D);const O=i.email.trim();console.log(`Attempting registration with email: '${O}'`);const N=await k(O,i.password,i.firstName,i.lastName,i.phone),q=tn.currentUser;q&&(await q.sendEmailVerification(),console.log(" Verification email sent to:",O)),h(""),l(!1),f(!0)}catch(D){console.error("Registration error:",D);let O="Failed to create account. Please try again.",N=!1;D.code==="auth/email-already-in-use"?(I(q=>({...q,email:"This email is already registered. Please login or use a different email."})),N=!0):D.code==="auth/invalid-email"?(I(q=>({...q,email:"Please enter a valid email address."})),N=!0):D.code==="auth/weak-password"?(I(q=>({...q,password:"Password is too weak. Please use at least 6 characters."})),N=!0):D.code==="auth/missing-password"?(I(q=>({...q,password:"Please enter a password."})),N=!0):D.message&&(O=D.message.replace("Firebase: ","").replace(/\(auth\/.*\)\.?/,"").trim()),N||h(O),l(!1)}};return d?g?p.jsxs("div",{className:"w-full max-w-md mx-auto text-center py-8",children:[p.jsx("div",{className:"mb-6 flex justify-center",children:p.jsx("div",{className:"rounded-full bg-green-100 p-4 animate-pulse",children:p.jsx(Kj,{className:"h-12 w-12 text-green-600"})})}),p.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Email Verified!"}),p.jsx("p",{className:"text-gray-600 mb-6",children:"Taking you to the menu..."}),p.jsx("div",{className:"flex justify-center",children:p.jsx(li,{className:"h-8 w-8 animate-spin text-primary-600"})})]}):p.jsxs("div",{className:"w-full max-w-md mx-auto text-center py-8",children:[p.jsx("div",{className:"mb-6 flex justify-center",children:p.jsx("div",{className:"rounded-full bg-blue-100 p-4 animate-bounce-slow",children:p.jsx(Mh,{className:"h-12 w-12 text-blue-600"})})}),p.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Check your email"}),p.jsxs("p",{className:"text-gray-600 mb-6",children:["We've sent a verification link to ",p.jsx("span",{className:"font-semibold text-gray-900",children:i.email})]}),p.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-5 mb-6",children:[p.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[p.jsx(li,{className:"h-5 w-5 animate-spin text-blue-600"}),p.jsx("h4",{className:"font-semibold text-blue-900",children:"Waiting for verification..."})]}),p.jsx("p",{className:"text-sm text-blue-800",children:"Click the link in your email and we'll automatically log you in!"})]}),p.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4 mb-8 text-left",children:[p.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[p.jsx(Xu,{className:"h-4 w-4 text-gray-600"}),"Next Steps:"]}),p.jsxs("ol",{className:"list-decimal list-inside text-sm text-gray-700 space-y-1.5 ml-1",children:[p.jsx("li",{children:"Check your email inbox (and spam folder)"}),p.jsx("li",{children:"Click the verification link"}),p.jsx("li",{children:"Close the verification tab and return here"}),p.jsx("li",{children:"You'll be automatically logged in!"})]})]}),p.jsxs("p",{className:"text-sm text-gray-500",children:["Didn't receive the email? ",p.jsx("button",{className:"text-primary-600 font-medium hover:underline",children:"Resend"})]})]}):p.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx(jr,{className:"mx-auto h-16 w-16 text-primary-600 mb-4"}),p.jsx("h2",{className:"font-display text-4xl font-bold text-gray-900",children:"Join Rush Coffee"}),p.jsxs("p",{className:"mt-2 text-gray-600 flex items-center justify-center gap-1",children:["Start skipping the line today ",p.jsx("span",{children:""})]})]}),p.jsxs("div",{onKeyDown:R=>R.key==="Enter"&&S(),className:"space-y-4",children:[c&&p.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-800 border border-red-200",children:[p.jsx(Xu,{className:"h-5 w-5 flex-shrink-0"}),p.jsx("span",{children:c})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),p.jsxs("div",{className:"relative",children:[p.jsx(n0,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),p.jsx("input",{type:"text",required:!0,value:i.firstName,onChange:R=>r({...i,firstName:R.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter first name"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),p.jsxs("div",{className:"relative",children:[p.jsx(n0,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),p.jsx("input",{type:"text",required:!0,value:i.lastName,onChange:R=>r({...i,lastName:R.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter last name"})]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),p.jsxs("div",{className:"relative",children:[p.jsx(Mh,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),p.jsx("input",{type:"email",required:!0,value:i.email,onChange:R=>{const D=R.target.value;r({...i,email:D}),_.email&&I(O=>({...O,email:""})),D&&D.endsWith("@gmail.com")},className:`w-full pl-12 pr-4 py-3.5 bg-primary-50 border ${_.email?"border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-primary-500"} rounded-xl focus:outline-none focus:ring-2 focus:bg-white transition-all placeholder:text-gray-400`,placeholder:"name@gmail.com"}),E==="checking"&&p.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:p.jsx(li,{className:"h-4 w-4 animate-spin text-gray-400"})})]}),_.email&&p.jsxs("p",{className:"text-xs text-red-600 mt-1 ml-1 flex items-center gap-1",children:[p.jsx(Xu,{className:"h-3 w-3"}),_.email]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number (Optional)"}),p.jsxs("div",{className:"relative",children:[p.jsx(vb,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),p.jsx("input",{type:"tel",name:"phone",autoComplete:"off",value:i.phone,onChange:R=>{r({...i,phone:R.target.value}),_.phone&&I(D=>({...D,phone:""}))},className:`w-full pl-12 pr-4 py-3.5 bg-primary-50 border ${_.phone?"border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-primary-500"} rounded-xl focus:outline-none focus:ring-2 focus:bg-white transition-all placeholder:text-gray-400`,placeholder:"09xxxxxxxxx"})]}),_.phone&&p.jsx("p",{className:"text-xs text-red-600 mt-1 ml-1",children:_.phone})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),p.jsxs("div",{className:"relative",children:[p.jsx(e0,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),p.jsx("input",{type:s?"text":"password",name:"password",autoComplete:"new-password",required:!0,value:i.password,onChange:T,className:`w-full pl-12 pr-12 py-3.5 bg-primary-50 border ${_.password?"border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-primary-500"} rounded-xl focus:outline-none focus:ring-2 focus:bg-white transition-all placeholder:text-gray-400`,placeholder:"Create a password"}),p.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:s?p.jsx(Y2,{className:"h-5 w-5"}):p.jsx(X2,{className:"h-5 w-5"})})]}),_.password&&p.jsx("p",{className:"text-xs text-red-600 mt-1 ml-1",children:_.password}),i.password&&p.jsxs("div",{className:"mt-2",children:[p.jsx("div",{className:"flex justify-between items-center mb-1",children:p.jsx("span",{className:`text-xs font-medium ${w.color.replace("bg-","text-")}`,children:w.label})}),p.jsx("div",{className:"h-1.5 w-full bg-gray-200 rounded-full overflow-hidden",children:p.jsx("div",{className:`h-full ${w.color} transition-all duration-300`,style:{width:`${w.score/5*100}%`}})})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),p.jsxs("div",{className:"relative",children:[p.jsx(e0,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),p.jsx("input",{type:s?"text":"password",name:"confirmPassword",autoComplete:"new-password",required:!0,value:i.confirmPassword,onChange:R=>r({...i,confirmPassword:R.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Confirm your password"})]})]}),p.jsx("button",{type:"button",onClick:()=>S(),disabled:o,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3.5 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:o?p.jsxs("span",{className:"flex items-center justify-center gap-2",children:[p.jsx(li,{className:"h-5 w-5 animate-spin"}),"Creating account..."]}):"Create Account"}),p.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Already have an account?"," ",p.jsx("button",{type:"button",onClick:t,className:"text-primary-600 font-semibold hover:text-primary-700 transition-colors",children:"Login"})]})]})]})},dY=({onBack:t,initialEmail:e=""})=>{const[n,i]=C.useState(e),[r,s]=C.useState(!1),[a,o]=C.useState(null),[l,c]=C.useState(null),{sendPasswordReset:h}=da(),d=async f=>{if(f.preventDefault(),!n){c("Email is required");return}s(!0),c(null),o(null),console.log("Attempting to send password reset email to:",n);try{await h(n),console.log("Password reset email sent successfully"),o("Password reset link sent! Please check your email.")}catch(g){console.error("Password reset error:",g),g.code==="auth/user-not-found"?c("No account found with this email address."):g.code==="auth/invalid-email"?c("Please enter a valid email address."):c(g.message||"Failed to send reset link")}finally{s(!1)}};return p.jsxs("form",{onSubmit:d,className:"space-y-4",children:[p.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter your email address and we'll send you a link to reset your password."}),l&&p.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-800",children:[p.jsx(Xu,{className:"h-5 w-5 flex-shrink-0"}),p.jsx("span",{children:l})]}),a&&p.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-green-50 p-3 text-sm text-green-800",children:[p.jsx(Q2,{className:"h-5 w-5 flex-shrink-0"}),p.jsx("span",{children:a})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email address"}),p.jsxs("div",{className:"relative",children:[p.jsx(Mh,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),p.jsx("input",{type:"email",value:n,onChange:f=>i(f.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"admin@rushcoffee.ph"})]})]}),p.jsx("button",{type:"submit",disabled:r||!!a,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3 rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?p.jsxs("span",{className:"flex items-center justify-center gap-2",children:[p.jsx(li,{className:"h-5 w-5 animate-spin"}),"Sending Link..."]}):a?"Link Sent":"Send Reset Link"}),p.jsxs("button",{type:"button",onClick:t,className:"w-full flex items-center justify-center gap-2 text-gray-600 hover:text-gray-900 font-medium py-2 transition-colors",children:[p.jsx(W2,{className:"h-4 w-4"}),"Back to Login"]})]})},fY=({isOpen:t,onClose:e,initialView:n="login",onVerificationNeeded:i,onAuthSuccess:r})=>{const[s,a]=wr.useState(n),[o,l]=wr.useState("");return wr.useEffect(()=>{t&&(a(n),l(""))},[t,n]),p.jsxs(fE,{isOpen:t,onClose:e,hideHeader:!0,size:s==="register"?"xl":"md",children:[s==="login"&&p.jsx(AQ,{onForgotPassword:c=>{l(c),a("forgot-password")},onRegister:()=>a("register"),onSuccess:c=>r(c),onVerificationNeeded:(c,h,d)=>i==null?void 0:i(c,h,d)},"login"),s==="register"&&p.jsx(hY,{onLogin:()=>a("login"),onSuccess:()=>r(),onVerificationNeeded:(c,h,d)=>i==null?void 0:i(c,h,d)},"register"),s==="forgot-password"&&p.jsx(dY,{initialEmail:o,onBack:()=>a("login")},"forgot-password")]})},mY=({email:t,onVerify:e,onBack:n,onResend:i})=>{const[r,s]=C.useState(["","","","","",""]),[a,o]=C.useState(!1),[l,c]=C.useState(null),[h,d]=C.useState(30),f=C.useRef([]);C.useEffect(()=>{if(h>0){const v=setTimeout(()=>d(h-1),1e3);return()=>clearTimeout(v)}},[h]);const g=(v,_)=>{var k;if(_.length>1)return;const I=[...r];I[v]=_,s(I),_&&v<5&&((k=f.current[v+1])==null||k.focus())},b=(v,_)=>{var I;_.key==="Backspace"&&!r[v]&&v>0&&((I=f.current[v-1])==null||I.focus())},E=v=>{var k;v.preventDefault();const _=v.clipboardData.getData("text").slice(0,6).split(""),I=[...r];_.forEach((V,A)=>{A<6&&(I[A]=V)}),s(I),_.length===6&&((k=f.current[5])==null||k.focus())},x=async v=>{v.preventDefault();const _=r.join("");if(_.length!==6){c("Please enter the complete 6-digit code");return}o(!0),c(null);try{await e(_)}catch(I){c(I.message||"Verification failed"),o(!1)}},w=async()=>{h>0||(await i(),d(30))};return p.jsxs("form",{onSubmit:x,className:"space-y-8",children:[p.jsxs("div",{className:"text-center",children:[p.jsx(jr,{className:"mx-auto h-16 w-16 text-primary-600 mb-4"}),p.jsx("h2",{className:"font-display text-3xl font-bold text-gray-900 mb-2",children:"Verify Your Email"}),p.jsx("p",{className:"text-gray-600 mb-2",children:"We've sent a verification code to"}),p.jsx("p",{className:"text-lg font-bold text-primary-700",children:t})]}),p.jsx("div",{className:"flex justify-center gap-3",children:r.map((v,_)=>p.jsx("input",{ref:I=>f.current[_]=I,type:"text",maxLength:1,value:v,onChange:I=>g(_,I.target.value),onKeyDown:I=>b(_,I),onPaste:E,className:"w-12 h-14 sm:w-14 sm:h-16 text-center text-2xl font-bold bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all placeholder:text-gray-300",placeholder:""},_))}),l&&p.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100",children:[p.jsx(bz,{className:"h-4 w-4"}),p.jsx("span",{children:l})]}),p.jsx("button",{type:"submit",disabled:a||r.join("").length!==6,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-4 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:a?p.jsxs("span",{className:"flex items-center justify-center gap-2",children:[p.jsx(li,{className:"h-5 w-5 animate-spin"}),"Verifying..."]}):"Verify Account"}),p.jsxs("div",{className:"flex items-center justify-between text-sm pt-2",children:[p.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-2 text-gray-500 hover:text-gray-900 font-medium transition-colors group",children:[p.jsx(W2,{className:"h-4 w-4 transition-transform group-hover:-translate-x-1"}),"Back to Login"]}),p.jsxs("button",{type:"button",onClick:w,disabled:h>0,className:`flex items-center gap-2 font-medium transition-colors ${h>0?"text-gray-400 cursor-not-allowed":"text-primary-600 hover:text-primary-700"}`,children:[p.jsx(yz,{className:`h-4 w-4 ${h>0?"animate-spin":""}`}),h>0?`Resend in ${h}s`:"Resend Code"]})]})]})},pY=({isOpen:t,onClose:e,email:n,userId:i,onSuccess:r,onBackToLogin:s,onResend:a})=>{const{verifyEmailCode:o}=da(),l=async()=>{a?await a():(console.log("Resending code for user",i),await new Promise(h=>setTimeout(h,1e3)))},c=async h=>{if(!i)throw new Error("User ID is missing. Cannot verify.");if(await o(i,h))r();else throw new Error("Invalid verification code. Please check the console or try again.")};return p.jsx(fE,{isOpen:t,onClose:e,hideHeader:!0,size:"md",children:p.jsx(mY,{email:n,onVerify:c,onBack:s||e,onResend:l})})},gY=[{href:"/",label:"Home"},{href:"/about",label:"About"},{href:"/menu",label:"Menu"},{href:"/contact",label:"Contact"}],yY=[{href:"/menu",label:"Menu"},{href:"/queue",label:"Queue"},{href:"/rewards",label:"Rewards"}],cR=[{href:"/profile",label:"My Profile",Icon:n0},{href:"/rewards",label:"My Rewards",Icon:tz},{href:"/about",label:"About",Icon:J2},{href:"/contact",label:"Contact",Icon:vb}],_Y=()=>{const[t,e]=C.useState(!1),[n,i]=C.useState(!1),r=C.useRef(null),[s,a]=C.useState(!1),[o,l]=C.useState("login"),[c,h]=C.useState(!1),[d,f]=C.useState(""),[g,b]=C.useState(""),{currentUser:E,logout:x}=da(),{totalCartItems:w,openCart:v}=LM(),_=Ec(),I=gi(),[k]=xj(),V=I.pathname==="/auth/verify-email",A=sessionStorage.getItem("requires2FA")==="true",T=E&&!V&&!A&&!s&&I.pathname!=="/",S=T?yY:gY,R=()=>e(!1),D=W=>{l(W),a(!0),R()};C.useEffect(()=>{const W=k.get("auth");W==="login"?(l("login"),a(!0)):W==="register"&&(l("register"),a(!0))},[k]);const O=(W,de,Dt)=>{a(!1),f(W),b(de),h(!0)},N=W=>{a(!1),h(!1),sessionStorage.removeItem("requires2FA");const de=W||(E==null?void 0:E.role);_(de==="admin"?"/admin":de==="employee"?"/employee":"/menu")},q=()=>{h(!1),sessionStorage.removeItem("requires2FA"),x()},ne=()=>{h(!1),sessionStorage.removeItem("requires2FA"),x(),l("login"),a(!0)};C.useEffect(()=>{const W=de=>{r.current&&!r.current.contains(de.target)&&i(!1)};return document.addEventListener("mousedown",W),()=>document.removeEventListener("mousedown",W)},[]),C.useEffect(()=>{const W=()=>{window.innerWidth>=768&&e(!1)};return window.addEventListener("resize",W),()=>window.removeEventListener("resize",W)},[]),C.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[t]);const z=async()=>{await x(),R(),i(!1),_("/")},Y=()=>e(!t),J=(W=!1)=>{var St,_i;const de="rounded-full text-sm font-semibold transition-colors",Dt="block w-full text-center py-3 text-base",It="px-6 py-2";if(T&&E){const Co=`${((St=E.firstName)==null?void 0:St.charAt(0))||""}${((_i=E.lastName)==null?void 0:_i.charAt(0))||""}`.toUpperCase();return p.jsxs("div",{className:`relative ${W?"w-full":""}`,ref:r,children:[p.jsx("button",{onClick:()=>i(!n),className:`flex items-center justify-center transition-colors focus:outline-none ${W?"w-full gap-3 rounded-xl border border-gray-200 p-3 hover:bg-gray-50":`h-10 w-10 rounded-full ${E.photoURL?"ring-2 ring-primary-100":"bg-primary-600 text-white hover:bg-primary-700"} shadow-sm overflow-hidden`}`,"aria-label":"User menu","aria-haspopup":"true","aria-expanded":n,children:W?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-full ${E.photoURL?"":"bg-primary-600 text-white"} overflow-hidden`,children:E.photoURL?p.jsx("img",{src:E.photoURL,alt:"Profile",className:"h-full w-full object-cover"}):p.jsx("span",{className:"text-sm font-bold",children:Co})}),p.jsxs("div",{className:"flex flex-col items-start",children:[p.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[E.firstName," ",E.lastName]}),p.jsx("span",{className:"text-xs text-gray-500",children:E.email})]}),p.jsx(qj,{className:`ml-auto h-4 w-4 text-gray-400 transition-transform ${n?"rotate-180":""}`})]}):E.photoURL?p.jsx("img",{src:E.photoURL,alt:"Profile",className:"h-full w-full object-cover"}):p.jsx("span",{className:"text-sm font-bold",children:Co})}),n&&!W&&p.jsx("div",{className:"absolute right-0 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none animate-fade-in-up",children:p.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[p.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[p.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[E.firstName," ",E.lastName]}),p.jsx("p",{className:"text-xs text-gray-500 truncate",children:E.email})]}),cR.map(Qr=>p.jsxs(wi,{to:Qr.href,onClick:()=>i(!1),className:({isActive:Uc})=>`flex items-center gap-3 px-4 py-2 text-sm transition-colors hover:bg-gray-100 ${Uc?"text-primary-600 font-semibold":"text-gray-700"}`,role:"menuitem",children:[p.jsx(Qr.Icon,{className:"h-4 w-4"}),Qr.label]},Qr.label)),(E.role==="employee"||E.role==="admin")&&p.jsxs(p.Fragment,{children:[p.jsx("hr",{className:"my-1"}),p.jsxs(wi,{to:"/employee",onClick:()=>i(!1),className:"flex items-center gap-3 px-4 py-2 text-sm font-semibold text-blue-700 transition-colors hover:bg-blue-50",role:"menuitem",children:[p.jsx(Nf,{className:"h-4 w-4"}),"Employee Portal"]})]}),E.role==="admin"&&p.jsxs(wi,{to:"/admin",onClick:()=>i(!1),className:"flex items-center gap-3 px-4 py-2 text-sm font-semibold text-yellow-700 transition-colors hover:bg-yellow-50",role:"menuitem",children:[p.jsx(Nf,{className:"h-4 w-4"}),"Admin Dashboard"]}),p.jsx("hr",{className:"my-1"}),p.jsxs("button",{onClick:z,className:"flex w-full items-center gap-3 px-4 py-2 text-left text-sm text-red-600 transition-colors hover:bg-red-50",role:"menuitem",children:[p.jsx(DS,{className:"h-4 w-4"}),"Logout"]})]})})]})}return p.jsxs("div",{className:`flex items-center ${W?"flex-col space-y-3":"gap-4"}`,children:[p.jsx("button",{onClick:()=>D("login"),className:`${de} border border-primary-600 text-primary-600 hover:bg-primary-50 ${W?Dt:It}`,children:"Login"}),p.jsx("button",{onClick:()=>D("register"),className:`${de} bg-primary-600 text-white shadow-sm hover:bg-primary-700 ${W?Dt:It}`,children:"Sign Up"})]})},ie=()=>p.jsxs("button",{onClick:v,className:"relative rounded-full p-2 text-gray-700 transition hover:bg-gray-100","aria-label":`Open cart with ${w} items`,children:[p.jsx(Az,{className:"h-6 w-6"}),w>0&&p.jsx("span",{className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white","aria-hidden":"true",children:w})]});return p.jsxs(p.Fragment,{children:[p.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-gray-200/80 bg-white/95 shadow-md backdrop-blur-sm",children:p.jsxs("div",{className:"container mx-auto flex h-16 items-center justify-between px-4 sm:h-20 sm:px-6 lg:px-8 md:grid md:grid-cols-3",children:[p.jsxs(wi,{to:E?"/menu":"/",className:"flex items-center gap-2 flex-shrink-0 md:justify-self-start",children:[p.jsx(jr,{className:"h-7 w-7 text-primary-600 sm:h-8 sm:w-8"}),p.jsx("span",{className:"text-lg font-bold text-primary-600 whitespace-nowrap sm:text-2xl",children:"Rush Coffee"})]}),p.jsx("nav",{className:"hidden items-center justify-center space-x-8 md:flex md:justify-self-center",children:S.map(W=>p.jsx(wi,{to:W.href,className:({isActive:de})=>`relative text-sm font-normal uppercase transition-colors hover:text-primary-600 ${de?"text-primary-600":"text-gray-700"} after:absolute after:bottom-0 after:left-0 after:h-[1px] after:w-full after:origin-center after:transform after:bg-primary-600 after:transition-transform after:duration-300 ${de?"after:scale-x-100":"after:scale-x-0"} hover:after:scale-x-100`,children:W.label},W.label))}),p.jsxs("div",{className:"hidden items-center justify-end gap-4 md:flex md:justify-self-end",children:[J(),T&&p.jsx(ie,{})]}),p.jsxs("div",{className:"flex items-center justify-end gap-2 md:hidden",children:[T&&p.jsx(ie,{}),p.jsx("button",{onClick:Y,className:"rounded-md p-2 text-gray-700 transition hover:bg-gray-100","aria-label":"Toggle menu","aria-expanded":t,children:p.jsx(dz,{className:"h-6 w-6"})})]})]})}),p.jsxs("div",{className:`fixed inset-0 z-[60] md:hidden ${t?"pointer-events-auto":"pointer-events-none"}`,children:[p.jsx("div",{className:`absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ${t?"opacity-100":"opacity-0"}`,onClick:R,"aria-hidden":"true"}),p.jsxs("div",{className:`absolute top-0 right-0 h-full w-4/5 max-w-sm transform bg-white shadow-2xl transition-transform duration-300 ease-out ${t?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"mobile-menu-title",children:[p.jsxs("div",{className:"flex items-center justify-between border-b p-4",children:[p.jsxs(wi,{to:E?"/menu":"/",className:"flex items-center gap-2",onClick:R,children:[p.jsx(jr,{className:"h-7 w-7 text-primary-600"}),p.jsx("span",{id:"mobile-menu-title",className:"text-xl font-bold text-primary-600",children:"Rush Coffee"})]}),p.jsx("button",{onClick:R,className:"rounded-full p-2 text-gray-500 transition hover:bg-gray-100 hover:text-gray-700","aria-label":"Close menu",children:p.jsx(Id,{className:"h-6 w-6"})})]}),p.jsxs("nav",{className:"flex flex-1 flex-col gap-2 overflow-y-auto p-4",children:[S.map(W=>p.jsx(wi,{to:W.href,onClick:R,className:({isActive:de})=>`rounded-xl px-4 py-3 text-lg font-medium transition-all ${de?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:W.label},W.label)),T&&p.jsxs("div",{className:"mt-4 border-t pt-4",children:[p.jsx("p",{className:"mb-2 px-4 text-xs font-semibold uppercase tracking-wider text-gray-400",children:"Account"}),cR.map(W=>p.jsxs(wi,{to:W.href,onClick:R,className:({isActive:de})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${de?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[p.jsx(W.Icon,{className:"h-5 w-5"}),W.label]},W.label)),(E.role==="employee"||E.role==="admin")&&p.jsxs(wi,{to:"/employee",onClick:R,className:({isActive:W})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${W?"bg-blue-50 text-blue-800":"text-blue-700 hover:bg-blue-50"}`,children:[p.jsx(Nf,{className:"h-5 w-5"}),"Employee Portal"]}),E.role==="admin"&&p.jsxs(wi,{to:"/admin",onClick:R,className:({isActive:W})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${W?"bg-yellow-50 text-yellow-800":"text-yellow-700 hover:bg-yellow-50"}`,children:[p.jsx(Nf,{className:"h-5 w-5"}),"Admin Dashboard"]})]})]}),p.jsx("div",{className:"border-t p-4",children:T?p.jsxs("button",{onClick:z,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-red-50 px-6 py-3 text-base font-semibold text-red-600 transition-colors hover:bg-red-100",children:[p.jsx(DS,{className:"h-5 w-5"}),"Logout"]}):J(!0)})]})]}),p.jsx(fY,{isOpen:s,onClose:()=>a(!1),initialView:o,onVerificationNeeded:O,onAuthSuccess:N}),p.jsx(pY,{isOpen:c,onClose:q,email:d,userId:g,onSuccess:()=>N(),onBackToLogin:ne})]})},vY=()=>p.jsxs("footer",{className:"relative bg-[#401a00] text-primary-100",children:[p.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5"}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),p.jsxs("div",{className:"container relative z-10 mx-auto grid grid-cols-2 gap-8 px-6 py-12 md:grid-cols-2 lg:grid-cols-4",children:[p.jsxs("div",{className:"col-span-2 space-y-4 md:col-span-1 lg:col-span-1",children:[p.jsxs(ei,{to:"/",className:"flex items-center gap-2",children:[p.jsx(jr,{className:"h-8 w-8 text-primary-500"}),p.jsx("span",{className:"font-display text-2xl font-bold text-white",children:"Rush Coffee"})]}),p.jsx("p",{className:"font-medium text-white",children:"Premium coffee, no waiting."}),p.jsx("p",{className:"text-sm leading-relaxed text-primary-200/80",children:"Join the digital queue and get your coffee fix faster than ever. Experience the future of coffee ordering."})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Quick Links"}),p.jsxs("ul",{className:"space-y-3",children:[p.jsx("li",{children:p.jsx(ei,{to:"/",className:"transition-colors hover:text-primary-400 hover:underline",children:"Home"})}),p.jsx("li",{children:p.jsx(ei,{to:"/about",className:"transition-colors hover:text-primary-400 hover:underline",children:"About Us"})}),p.jsx("li",{children:p.jsx(ei,{to:"/menu",className:"transition-colors hover:text-primary-400 hover:underline",children:"Menu"})}),p.jsx("li",{children:p.jsx(ei,{to:"/faq",className:"transition-colors hover:text-primary-400 hover:underline",children:"FAQ"})}),p.jsx("li",{children:p.jsx(ei,{to:"/contact",className:"transition-colors hover:text-primary-400 hover:underline",children:"Contact"})})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Legal"}),p.jsxs("ul",{className:"space-y-3",children:[p.jsx("li",{children:p.jsx(ei,{to:"/terms",className:"transition-colors hover:text-primary-400 hover:underline",children:"Terms of Service"})}),p.jsx("li",{children:p.jsx(ei,{to:"/privacy",className:"transition-colors hover:text-primary-400 hover:underline",children:"Privacy Policy"})}),p.jsx("li",{children:p.jsx(ei,{to:"/cookies",className:"transition-colors hover:text-primary-400 hover:underline",children:"Cookie Policy"})})]})]}),p.jsxs("div",{className:"col-span-2 md:col-span-1 lg:col-span-1",children:[p.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Contact & Connect"}),p.jsx("address",{className:"not-italic",children:p.jsxs("ul",{className:"space-y-4",children:[p.jsxs("li",{className:"flex items-start gap-3",children:[p.jsx(uz,{className:"mt-1 h-5 w-5 flex-shrink-0 text-primary-500"}),p.jsx("span",{children:"11 Visayan Ave. St. Galas, Quezon City, Philippines"})]}),p.jsxs("li",{className:"flex items-center gap-3",children:[p.jsx(vb,{className:"h-5 w-5 flex-shrink-0 text-primary-500"}),p.jsx("a",{href:"tel:09304641022",className:"transition-colors hover:text-white",children:"0930 464 1022"})]}),p.jsxs("li",{className:"flex items-center gap-3",children:[p.jsx(Mh,{className:"h-5 w-5 flex-shrink-0 text-primary-500"}),p.jsx("a",{href:"mailto:hello@rushcoffee.ph",className:"transition-colors hover:text-white",children:"hello@rushcoffee.ph"})]})]})}),p.jsxs("div",{className:"mt-8 flex gap-4",children:[p.jsx("a",{href:"https://www.facebook.com/profile.php?id=61551613276320",target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",className:"rounded-full bg-white/5 p-2 transition-colors hover:bg-primary-600 hover:text-white",children:p.jsx(Zj,{className:"h-5 w-5"})}),p.jsx("a",{href:"https://www.instagram.com/Rush_Coffee2023/",target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",className:"rounded-full bg-white/5 p-2 transition-colors hover:bg-primary-600 hover:text-white",children:p.jsx(rz,{className:"h-5 w-5"})})]})]})]}),p.jsx("div",{className:"relative z-10 border-t border-white/10 bg-black/20",children:p.jsxs("div",{className:"container mx-auto flex flex-col items-center justify-between gap-4 px-6 py-6 text-center text-sm text-primary-300 sm:flex-row",children:[p.jsx("p",{children:" 2023 Rush Coffee. All rights reserved."}),p.jsxs("p",{className:"flex items-center gap-1",children:["Made with ",p.jsx("span",{className:"text-red-500",children:""})," and ",p.jsx("span",{className:"text-amber-500",children:""})]})]})})]}),XM=C.createContext(void 0),JM=()=>{const t=C.useContext(XM);if(t===void 0)throw new Error("useNotification must be used within a NotificationProvider");return t},wY=({children:t})=>{const[e,n]=C.useState({message:"",type:"info",isVisible:!1}),i=C.useCallback((a,o="info")=>{n({message:a,type:o,isVisible:!0}),setTimeout(()=>{n(l=>({...l,isVisible:!1}))},5e3)},[]),r=C.useCallback(()=>{n(a=>({...a,isVisible:!1}))},[]),s={notification:e,showNotification:i,hideNotification:r};return p.jsx(XM.Provider,{value:s,children:t})},gE=C.createContext({});function yE(t){const e=C.useRef(null);return e.current===null&&(e.current=t()),e.current}const ry=C.createContext(null),_E=C.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class bY extends C.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function TY({children:t,isPresent:e}){const n=C.useId(),i=C.useRef(null),r=C.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=C.useContext(_E);return C.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:c}=r.current;if(e||!i.current||!a||!o)return;i.current.dataset.motionPopId=n;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),p.jsx(bY,{isPresent:e,childRef:i,sizeRef:r,children:C.cloneElement(t,{ref:i})})}const EY=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:a})=>{const o=yE(AY),l=C.useId(),c=C.useCallback(d=>{o.set(d,!0);for(const f of o.values())if(!f)return;i&&i()},[o,i]),h=C.useMemo(()=>({id:l,initial:e,isPresent:n,custom:r,onExitComplete:c,register:d=>(o.set(d,!1),()=>o.delete(d))}),s?[Math.random(),c]:[n,c]);return C.useMemo(()=>{o.forEach((d,f)=>o.set(f,!1))},[n]),C.useEffect(()=>{!n&&!o.size&&i&&i()},[n]),a==="popLayout"&&(t=p.jsx(TY,{isPresent:n,children:t})),p.jsx(ry.Provider,{value:h,children:t})};function AY(){return new Map}function ZM(t=!0){const e=C.useContext(ry);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,s=C.useId();C.useEffect(()=>{t&&r(s)},[t]);const a=C.useCallback(()=>t&&i&&i(s),[s,i,t]);return!n&&i?[!1,a]:[!0]}const $f=t=>t.key||"";function uR(t){const e=[];return C.Children.forEach(t,n=>{C.isValidElement(n)&&e.push(n)}),e}const vE=typeof window<"u",eL=vE?C.useLayoutEffect:C.useEffect,IY=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:a=!1})=>{const[o,l]=ZM(a),c=C.useMemo(()=>uR(t),[t]),h=a&&!o?[]:c.map($f),d=C.useRef(!0),f=C.useRef(c),g=yE(()=>new Map),[b,E]=C.useState(c),[x,w]=C.useState(c);eL(()=>{d.current=!1,f.current=c;for(let I=0;I<x.length;I++){const k=$f(x[I]);h.includes(k)?g.delete(k):g.get(k)!==!0&&g.set(k,!1)}},[x,h.length,h.join("-")]);const v=[];if(c!==b){let I=[...c];for(let k=0;k<x.length;k++){const V=x[k],A=$f(V);h.includes(A)||(I.splice(k,0,V),v.push(V))}s==="wait"&&v.length&&(I=v),w(uR(I)),E(c);return}const{forceRender:_}=C.useContext(gE);return p.jsx(p.Fragment,{children:x.map(I=>{const k=$f(I),V=a&&!o?!1:c===x||h.includes(k),A=()=>{if(g.has(k))g.set(k,!0);else return;let T=!0;g.forEach(S=>{S||(T=!1)}),T&&(_==null||_(),w(f.current),a&&(l==null||l()),i&&i())};return p.jsx(EY,{isPresent:V,initial:!d.current||n?void 0:!1,custom:V?void 0:e,presenceAffectsLayout:r,mode:s,onExitComplete:V?void 0:A,children:I},k)})})},Kn=t=>t;let tL=Kn;function wE(t){let e;return()=>(e===void 0&&(e=t()),e)}const uc=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},xr=t=>t*1e3,Rr=t=>t/1e3,SY={useManualTiming:!1};function xY(t){let e=new Set,n=new Set,i=!1,r=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(c){s.has(c)&&(l.schedule(c),t()),c(a)}const l={schedule:(c,h=!1,d=!1)=>{const g=d&&i?e:n;return h&&s.add(c),g.has(c)||g.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(a=c,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(o),e.clear(),i=!1,r&&(r=!1,l.process(c))}};return l}const Gf=["read","resolveKeyframes","update","preRender","render","postRender"],RY=40;function nL(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=Gf.reduce((w,v)=>(w[v]=xY(s),w),{}),{read:o,resolveKeyframes:l,update:c,preRender:h,render:d,postRender:f}=a,g=()=>{const w=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(w-r.timestamp,RY),1),r.timestamp=w,r.isProcessing=!0,o.process(r),l.process(r),c.process(r),h.process(r),d.process(r),f.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(g))},b=()=>{n=!0,i=!0,r.isProcessing||t(g)};return{schedule:Gf.reduce((w,v)=>{const _=a[v];return w[v]=(I,k=!1,V=!1)=>(n||b(),_.schedule(I,k,V)),w},{}),cancel:w=>{for(let v=0;v<Gf.length;v++)a[Gf[v]].cancel(w)},state:r,steps:a}}const{schedule:Ke,cancel:ea,state:Ft,steps:B_}=nL(typeof requestAnimationFrame<"u"?requestAnimationFrame:Kn,!0),iL=C.createContext({strict:!1}),hR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},hc={};for(const t in hR)hc[t]={isEnabled:e=>hR[t].some(n=>!!e[n])};function CY(t){for(const e in t)hc[e]={...hc[e],...t[e]}}const PY=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function zp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||PY.has(t)}let rL=t=>!zp(t);function NY(t){t&&(rL=e=>e.startsWith("on")?!zp(e):t(e))}try{NY(require("@emotion/is-prop-valid").default)}catch{}function DY(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(rL(r)||n===!0&&zp(r)||!e&&!zp(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function kY(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const sy=C.createContext({});function ad(t){return typeof t=="string"||Array.isArray(t)}function ay(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const bE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],TE=["initial",...bE];function oy(t){return ay(t.animate)||TE.some(e=>ad(t[e]))}function sL(t){return!!(oy(t)||t.variants)}function OY(t,e){if(oy(t)){const{initial:n,animate:i}=t;return{initial:n===!1||ad(n)?n:void 0,animate:ad(i)?i:void 0}}return t.inherit!==!1?e:{}}function VY(t){const{initial:e,animate:n}=OY(t,C.useContext(sy));return C.useMemo(()=>({initial:e,animate:n}),[dR(e),dR(n)])}function dR(t){return Array.isArray(t)?t.join(" "):t}const MY=Symbol.for("motionComponentSymbol");function hl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function LY(t,e,n){return C.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):hl(n)&&(n.current=i))},[e])}const EE=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),UY="framerAppearId",aL="data-"+EE(UY),{schedule:AE}=nL(queueMicrotask,!1),oL=C.createContext({});function jY(t,e,n,i,r){var s,a;const{visualElement:o}=C.useContext(sy),l=C.useContext(iL),c=C.useContext(ry),h=C.useContext(_E).reducedMotion,d=C.useRef(null);i=i||l.renderer,!d.current&&i&&(d.current=i(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const f=d.current,g=C.useContext(oL);f&&!f.projection&&r&&(f.type==="html"||f.type==="svg")&&zY(d.current,n,r,g);const b=C.useRef(!1);C.useInsertionEffect(()=>{f&&b.current&&f.update(n,c)});const E=n[aL],x=C.useRef(!!E&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,E))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,E)));return eL(()=>{f&&(b.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),AE.render(f.render),x.current&&f.animationState&&f.animationState.animateChanges())}),C.useEffect(()=>{f&&(!x.current&&f.animationState&&f.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)===null||w===void 0||w.call(window,E)}),x.current=!1))}),f}function zY(t,e,n,i){const{layoutId:r,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:lL(t.parent)),t.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!a||o&&hl(o),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function lL(t){if(t)return t.options.allowProjection!==!1?t.projection:lL(t.parent)}function FY({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var s,a;t&&CY(t);function o(c,h){let d;const f={...C.useContext(_E),...c,layoutId:BY(c)},{isStatic:g}=f,b=VY(c),E=i(c,g);if(!g&&vE){qY();const x=HY(f);d=x.MeasureLayout,b.visualElement=jY(r,E,f,e,x.ProjectionNode)}return p.jsxs(sy.Provider,{value:b,children:[d&&b.visualElement?p.jsx(d,{visualElement:b.visualElement,...f}):null,n(r,c,LY(E,b.visualElement,h),E,g,b.visualElement)]})}o.displayName=`motion.${typeof r=="string"?r:`create(${(a=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&a!==void 0?a:""})`}`;const l=C.forwardRef(o);return l[MY]=r,l}function BY({layoutId:t}){const e=C.useContext(gE).id;return e&&t!==void 0?e+"-"+t:t}function qY(t,e){C.useContext(iL).strict}function HY(t){const{drag:e,layout:n}=hc;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const $Y=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function IE(t){return typeof t!="string"||t.includes("-")?!1:!!($Y.indexOf(t)>-1||/[A-Z]/u.test(t))}function fR(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function SE(t,e,n,i){if(typeof e=="function"){const[r,s]=fR(i);e=e(n!==void 0?n:t.custom,r,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,s]=fR(i);e=e(n!==void 0?n:t.custom,r,s)}return e}const Q0=t=>Array.isArray(t),GY=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),KY=t=>Q0(t)?t[t.length-1]||0:t,an=t=>!!(t&&t.getVelocity);function Pm(t){const e=an(t)?t.get():t;return GY(e)?e.toValue():e}function WY({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,s){const a={latestValues:QY(i,r,s,t),renderState:e()};return n&&(a.onMount=o=>n({props:i,current:o,...a}),a.onUpdate=o=>n(o)),a}const cL=t=>(e,n)=>{const i=C.useContext(sy),r=C.useContext(ry),s=()=>WY(t,e,i,r);return n?s():yE(s)};function QY(t,e,n,i){const r={},s=i(t,{});for(const f in s)r[f]=Pm(s[f]);let{initial:a,animate:o}=t;const l=oy(t),c=sL(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let h=n?n.initial===!1:!1;h=h||a===!1;const d=h?o:a;if(d&&typeof d!="boolean"&&!ay(d)){const f=Array.isArray(d)?d:[d];for(let g=0;g<f.length;g++){const b=SE(t,f[g]);if(b){const{transitionEnd:E,transition:x,...w}=b;for(const v in w){let _=w[v];if(Array.isArray(_)){const I=h?_.length-1:0;_=_[I]}_!==null&&(r[v]=_)}for(const v in E)r[v]=E[v]}}}return r}const Mc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ro=new Set(Mc),uL=t=>e=>typeof e=="string"&&e.startsWith(t),hL=uL("--"),YY=uL("var(--"),xE=t=>YY(t)?XY.test(t.split("/*")[0].trim()):!1,XY=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,dL=(t,e)=>e&&typeof t=="number"?e.transform(t):t,zr=(t,e,n)=>n>e?e:n<t?t:n,Lc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},od={...Lc,transform:t=>zr(0,1,t)},Kf={...Lc,default:1},Xd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),cs=Xd("deg"),Ji=Xd("%"),re=Xd("px"),JY=Xd("vh"),ZY=Xd("vw"),mR={...Ji,parse:t=>Ji.parse(t)/100,transform:t=>Ji.transform(t*100)},eX={borderWidth:re,borderTopWidth:re,borderRightWidth:re,borderBottomWidth:re,borderLeftWidth:re,borderRadius:re,radius:re,borderTopLeftRadius:re,borderTopRightRadius:re,borderBottomRightRadius:re,borderBottomLeftRadius:re,width:re,maxWidth:re,height:re,maxHeight:re,top:re,right:re,bottom:re,left:re,padding:re,paddingTop:re,paddingRight:re,paddingBottom:re,paddingLeft:re,margin:re,marginTop:re,marginRight:re,marginBottom:re,marginLeft:re,backgroundPositionX:re,backgroundPositionY:re},tX={rotate:cs,rotateX:cs,rotateY:cs,rotateZ:cs,scale:Kf,scaleX:Kf,scaleY:Kf,scaleZ:Kf,skew:cs,skewX:cs,skewY:cs,distance:re,translateX:re,translateY:re,translateZ:re,x:re,y:re,z:re,perspective:re,transformPerspective:re,opacity:od,originX:mR,originY:mR,originZ:re},pR={...Lc,transform:Math.round},RE={...eX,...tX,zIndex:pR,size:re,fillOpacity:od,strokeOpacity:od,numOctaves:pR},nX={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},iX=Mc.length;function rX(t,e,n){let i="",r=!0;for(let s=0;s<iX;s++){const a=Mc[s],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=dL(o,RE[a]);if(!l){r=!1;const h=nX[a]||a;i+=`${h}(${c}) `}n&&(e[a]=c)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function CE(t,e,n){const{style:i,vars:r,transformOrigin:s}=t;let a=!1,o=!1;for(const l in e){const c=e[l];if(Ro.has(l)){a=!0;continue}else if(hL(l)){r[l]=c;continue}else{const h=dL(c,RE[l]);l.startsWith("origin")?(o=!0,s[l]=h):i[l]=h}}if(e.transform||(a||n?i.transform=rX(e,t.transform,n):i.transform&&(i.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:h=0}=s;i.transformOrigin=`${l} ${c} ${h}`}}const sX={offset:"stroke-dashoffset",array:"stroke-dasharray"},aX={offset:"strokeDashoffset",array:"strokeDasharray"};function oX(t,e,n=1,i=0,r=!0){t.pathLength=1;const s=r?sX:aX;t[s.offset]=re.transform(-i);const a=re.transform(e),o=re.transform(n);t[s.array]=`${a} ${o}`}function gR(t,e,n){return typeof t=="string"?t:re.transform(e+n*t)}function lX(t,e,n){const i=gR(e,t.x,t.width),r=gR(n,t.y,t.height);return`${i} ${r}`}function PE(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},h,d){if(CE(t,c,d),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:g,dimensions:b}=t;f.transform&&(b&&(g.transform=f.transform),delete f.transform),b&&(r!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=lX(b,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),i!==void 0&&(f.scale=i),a!==void 0&&oX(f,a,o,l,!1)}const NE=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),fL=()=>({...NE(),attrs:{}}),DE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function mL(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const s in n)t.style.setProperty(s,n[s])}const pL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gL(t,e,n,i){mL(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(pL.has(r)?r:EE(r),e.attrs[r])}const Fp={};function cX(t){Object.assign(Fp,t)}function yL(t,{layout:e,layoutId:n}){return Ro.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Fp[t]||t==="opacity")}function kE(t,e,n){var i;const{style:r}=t,s={};for(const a in r)(an(r[a])||e.style&&an(e.style[a])||yL(a,t)||((i=n==null?void 0:n.getValue(a))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[a]=r[a]);return s}function _L(t,e,n){const i=kE(t,e,n);for(const r in t)if(an(t[r])||an(e[r])){const s=Mc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=t[r]}return i}function uX(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const yR=["x","y","width","height","cx","cy","r"],hX={useVisualState:cL({scrapeMotionValuesFromProps:_L,createRenderState:fL,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let s=!!t.drag;if(!s){for(const o in r)if(Ro.has(o)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let o=0;o<yR.length;o++){const l=yR[o];t[l]!==e[l]&&(a=!0)}a&&Ke.read(()=>{uX(n,i),Ke.render(()=>{PE(i,r,DE(n.tagName),t.transformTemplate),gL(n,i)})})}})},dX={useVisualState:cL({scrapeMotionValuesFromProps:kE,createRenderState:NE})};function vL(t,e,n){for(const i in e)!an(e[i])&&!yL(i,n)&&(t[i]=e[i])}function fX({transformTemplate:t},e){return C.useMemo(()=>{const n=NE();return CE(n,e,t),Object.assign({},n.vars,n.style)},[e])}function mX(t,e){const n=t.style||{},i={};return vL(i,n,t),Object.assign(i,fX(t,e)),i}function pX(t,e){const n={},i=mX(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function gX(t,e,n,i){const r=C.useMemo(()=>{const s=fL();return PE(s,e,DE(i),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};vL(s,t.style,t),r.style={...s,...r.style}}return r}function yX(t=!1){return(n,i,r,{latestValues:s},a)=>{const l=(IE(n)?gX:pX)(i,s,a,n),c=DY(i,typeof n=="string",t),h=n!==C.Fragment?{...c,...l,ref:r}:{},{children:d}=i,f=C.useMemo(()=>an(d)?d.get():d,[d]);return C.createElement(n,{...h,children:f})}}function _X(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...IE(i)?hX:dX,preloadedFeatures:t,useRender:yX(r),createVisualElement:e,Component:i};return FY(a)}}function wL(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function ly(t,e,n){const i=t.getProps();return SE(i,e,n!==void 0?n:i.custom,t)}const vX=wE(()=>window.ScrollTimeline!==void 0);class wX{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(vX()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class bX extends wX{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function OE(t,e){return t?t[e]||t.default||t:void 0}const Y0=2e4;function bL(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Y0;)e+=n,i=t.next(e);return e>=Y0?1/0:e}function VE(t){return typeof t=="function"}function _R(t,e){t.timeline=e,t.onfinish=null}const ME=t=>Array.isArray(t)&&typeof t[0]=="number",TX={linearEasing:void 0};function EX(t,e){const n=wE(t);return()=>{var i;return(i=TX[e])!==null&&i!==void 0?i:n()}}const Bp=EX(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),TL=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let s=0;s<r;s++)i+=t(uc(0,r-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function EL(t){return!!(typeof t=="function"&&Bp()||!t||typeof t=="string"&&(t in X0||Bp())||ME(t)||Array.isArray(t)&&t.every(EL))}const Ou=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,X0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ou([0,.65,.55,1]),circOut:Ou([.55,0,1,.45]),backIn:Ou([.31,.01,.66,-.59]),backOut:Ou([.33,1.53,.69,.99])};function AL(t,e){if(t)return typeof t=="function"&&Bp()?TL(t,e):ME(t)?Ou(t):Array.isArray(t)?t.map(n=>AL(n,e)||X0.easeOut):X0[t]}const bi={x:!1,y:!1};function IL(){return bi.x||bi.y}function AX(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const s=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function SL(t,e){const n=AX(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function vR(t){return e=>{e.pointerType==="touch"||IL()||t(e)}}function IX(t,e,n={}){const[i,r,s]=SL(t,n),a=vR(o=>{const{target:l}=o,c=e(o);if(typeof c!="function"||!l)return;const h=vR(d=>{c(d),l.removeEventListener("pointerleave",h)});l.addEventListener("pointerleave",h,r)});return i.forEach(o=>{o.addEventListener("pointerenter",a,r)}),s}const xL=(t,e)=>e?t===e?!0:xL(t,e.parentElement):!1,LE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,SX=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function xX(t){return SX.has(t.tagName)||t.tabIndex!==-1}const Vu=new WeakSet;function wR(t){return e=>{e.key==="Enter"&&t(e)}}function q_(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const RX=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=wR(()=>{if(Vu.has(n))return;q_(n,"down");const r=wR(()=>{q_(n,"up")}),s=()=>q_(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function bR(t){return LE(t)&&!IL()}function CX(t,e,n={}){const[i,r,s]=SL(t,n),a=o=>{const l=o.currentTarget;if(!bR(o)||Vu.has(l))return;Vu.add(l);const c=e(o),h=(g,b)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!bR(g)||!Vu.has(l))&&(Vu.delete(l),typeof c=="function"&&c(g,{success:b}))},d=g=>{h(g,n.useGlobalTarget||xL(l,g.target))},f=g=>{h(g,!1)};window.addEventListener("pointerup",d,r),window.addEventListener("pointercancel",f,r)};return i.forEach(o=>{!xX(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,r),o.addEventListener("focus",c=>RX(c,r),r)}),s}function PX(t){return t==="x"||t==="y"?bi[t]?null:(bi[t]=!0,()=>{bi[t]=!1}):bi.x||bi.y?null:(bi.x=bi.y=!0,()=>{bi.x=bi.y=!1})}const RL=new Set(["width","height","top","left","right","bottom",...Mc]);let Nm;function NX(){Nm=void 0}const Zi={now:()=>(Nm===void 0&&Zi.set(Ft.isProcessing||SY.useManualTiming?Ft.timestamp:performance.now()),Nm),set:t=>{Nm=t,queueMicrotask(NX)}};function UE(t,e){t.indexOf(e)===-1&&t.push(e)}function jE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class zE{constructor(){this.subscriptions=[]}add(e){return UE(this.subscriptions,e),()=>jE(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let s=0;s<r;s++){const a=this.subscriptions[s];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function CL(t,e){return e?t*(1e3/e):0}const TR=30,DX=t=>!isNaN(parseFloat(t));class kX{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=Zi.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Zi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=DX(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new zE);const i=this.events[e].add(n);return e==="change"?()=>{i(),Ke.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Zi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>TR)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,TR);return CL(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ld(t,e){return new kX(t,e)}function OX(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ld(n))}function VX(t,e){const n=ly(t,e);let{transitionEnd:i={},transition:r={},...s}=n||{};s={...s,...i};for(const a in s){const o=KY(s[a]);OX(t,a,o)}}function MX(t){return!!(an(t)&&t.add)}function J0(t,e){const n=t.getValue("willChange");if(MX(n))return n.add(e)}function PL(t){return t.props[aL]}const NL=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,LX=1e-7,UX=12;function jX(t,e,n,i,r){let s,a,o=0;do a=e+(n-e)/2,s=NL(a,i,r)-t,s>0?n=a:e=a;while(Math.abs(s)>LX&&++o<UX);return a}function Jd(t,e,n,i){if(t===e&&n===i)return Kn;const r=s=>jX(s,0,1,t,n);return s=>s===0||s===1?s:NL(r(s),e,i)}const DL=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,kL=t=>e=>1-t(1-e),OL=Jd(.33,1.53,.69,.99),FE=kL(OL),VL=DL(FE),ML=t=>(t*=2)<1?.5*FE(t):.5*(2-Math.pow(2,-10*(t-1))),BE=t=>1-Math.sin(Math.acos(t)),LL=kL(BE),UL=DL(BE),jL=t=>/^0[^.\s]+$/u.test(t);function zX(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||jL(t):!0}const gh=t=>Math.round(t*1e5)/1e5,qE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function FX(t){return t==null}const BX=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,HE=(t,e)=>n=>!!(typeof n=="string"&&BX.test(n)&&n.startsWith(t)||e&&!FX(n)&&Object.prototype.hasOwnProperty.call(n,e)),zL=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,s,a,o]=i.match(qE);return{[t]:parseFloat(r),[e]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},qX=t=>zr(0,255,t),H_={...Lc,transform:t=>Math.round(qX(t))},Fa={test:HE("rgb","red"),parse:zL("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+H_.transform(t)+", "+H_.transform(e)+", "+H_.transform(n)+", "+gh(od.transform(i))+")"};function HX(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Z0={test:HE("#"),parse:HX,transform:Fa.transform},dl={test:HE("hsl","hue"),parse:zL("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Ji.transform(gh(e))+", "+Ji.transform(gh(n))+", "+gh(od.transform(i))+")"},en={test:t=>Fa.test(t)||Z0.test(t)||dl.test(t),parse:t=>Fa.test(t)?Fa.parse(t):dl.test(t)?dl.parse(t):Z0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Fa.transform(t):dl.transform(t)},$X=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function GX(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(qE))===null||e===void 0?void 0:e.length)||0)+(((n=t.match($X))===null||n===void 0?void 0:n.length)||0)>0}const FL="number",BL="color",KX="var",WX="var(",ER="${}",QX=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function cd(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let s=0;const o=e.replace(QX,l=>(en.test(l)?(i.color.push(s),r.push(BL),n.push(en.parse(l))):l.startsWith(WX)?(i.var.push(s),r.push(KX),n.push(l)):(i.number.push(s),r.push(FL),n.push(parseFloat(l))),++s,ER)).split(ER);return{values:n,split:o,indexes:i,types:r}}function qL(t){return cd(t).values}function HL(t){const{split:e,types:n}=cd(t),i=e.length;return r=>{let s="";for(let a=0;a<i;a++)if(s+=e[a],r[a]!==void 0){const o=n[a];o===FL?s+=gh(r[a]):o===BL?s+=en.transform(r[a]):s+=r[a]}return s}}const YX=t=>typeof t=="number"?0:t;function XX(t){const e=qL(t);return HL(t)(e.map(YX))}const ta={test:GX,parse:qL,createTransformer:HL,getAnimatableNone:XX},JX=new Set(["brightness","contrast","saturate","opacity"]);function ZX(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(qE)||[];if(!i)return t;const r=n.replace(i,"");let s=JX.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+r+")"}const eJ=/\b([a-z-]*)\(.*?\)/gu,ew={...ta,getAnimatableNone:t=>{const e=t.match(eJ);return e?e.map(ZX).join(" "):t}},tJ={...RE,color:en,backgroundColor:en,outlineColor:en,fill:en,stroke:en,borderColor:en,borderTopColor:en,borderRightColor:en,borderBottomColor:en,borderLeftColor:en,filter:ew,WebkitFilter:ew},$E=t=>tJ[t];function $L(t,e){let n=$E(t);return n!==ew&&(n=ta),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const nJ=new Set(["auto","none","0"]);function iJ(t,e,n){let i=0,r;for(;i<t.length&&!r;){const s=t[i];typeof s=="string"&&!nJ.has(s)&&cd(s).values.length&&(r=t[i]),i++}if(r&&n)for(const s of e)t[s]=$L(n,r)}const AR=t=>t===Lc||t===re,IR=(t,e)=>parseFloat(t.split(", ")[e]),SR=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return IR(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?IR(s[1],t):0}},rJ=new Set(["x","y","z"]),sJ=Mc.filter(t=>!rJ.has(t));function aJ(t){const e=[];return sJ.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const dc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:SR(4,13),y:SR(5,14)};dc.translateX=dc.x;dc.translateY=dc.y;const Xa=new Set;let tw=!1,nw=!1;function GL(){if(nw){const t=Array.from(Xa).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=aJ(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([s,a])=>{var o;(o=i.getValue(s))===null||o===void 0||o.set(a)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}nw=!1,tw=!1,Xa.forEach(t=>t.complete()),Xa.clear()}function KL(){Xa.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(nw=!0)})}function oJ(){KL(),GL()}class GE{constructor(e,n,i,r,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Xa.add(this),tw||(tw=!0,Ke.read(KL),Ke.resolveKeyframes(GL))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=r==null?void 0:r.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&n){const l=i.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),r&&a===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Xa.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Xa.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const WL=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),lJ=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function cJ(t){const e=lJ.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function QL(t,e,n=1){const[i,r]=cJ(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const a=s.trim();return WL(a)?parseFloat(a):a}return xE(r)?QL(r,e,n+1):r}const YL=t=>e=>e.test(t),uJ={test:t=>t==="auto",parse:t=>t},XL=[Lc,re,Ji,cs,ZY,JY,uJ],xR=t=>XL.find(YL(t));class JL extends GE{constructor(e,n,i,r,s){super(e,n,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),xE(c))){const h=QL(c,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!RL.has(i)||e.length!==2)return;const[r,s]=e,a=xR(r),o=xR(s);if(a!==o)if(AR(a)&&AR(o))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)zX(e[r])&&i.push(r);i.length&&iJ(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=dc[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const s=n.getValue(i);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=dc[i](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const RR=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ta.test(t)||t==="0")&&!t.startsWith("url("));function hJ(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function dJ(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=RR(r,e),o=RR(s,e);return!a||!o?!1:hJ(t)||(n==="spring"||VE(n))&&i}const fJ=t=>t!==null;function cy(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(fJ),s=e&&n!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const mJ=40;class ZL{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Zi.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>mJ?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&oJ(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Zi.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:c}=this.options;if(!c&&!dJ(e,i,r,s))if(a)this.options.duration=0;else{l&&l(cy(e,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const nt=(t,e,n)=>t+(e-t)*n;function $_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function pJ({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,s=0,a=0;if(!e)r=s=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;r=$_(l,o,t+1/3),s=$_(l,o,t),a=$_(l,o,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:i}}function qp(t,e){return n=>n>0?e:t}const G_=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},gJ=[Z0,Fa,dl],yJ=t=>gJ.find(e=>e.test(t));function CR(t){const e=yJ(t);if(!e)return!1;let n=e.parse(t);return e===dl&&(n=pJ(n)),n}const PR=(t,e)=>{const n=CR(t),i=CR(e);if(!n||!i)return qp(t,e);const r={...n};return s=>(r.red=G_(n.red,i.red,s),r.green=G_(n.green,i.green,s),r.blue=G_(n.blue,i.blue,s),r.alpha=nt(n.alpha,i.alpha,s),Fa.transform(r))},_J=(t,e)=>n=>e(t(n)),Zd=(...t)=>t.reduce(_J),iw=new Set(["none","hidden"]);function vJ(t,e){return iw.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function wJ(t,e){return n=>nt(t,e,n)}function KE(t){return typeof t=="number"?wJ:typeof t=="string"?xE(t)?qp:en.test(t)?PR:EJ:Array.isArray(t)?eU:typeof t=="object"?en.test(t)?PR:bJ:qp}function eU(t,e){const n=[...t],i=n.length,r=t.map((s,a)=>KE(s)(s,e[a]));return s=>{for(let a=0;a<i;a++)n[a]=r[a](s);return n}}function bJ(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=KE(t[r])(t[r],e[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}}function TJ(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][r[a]],l=(n=t.values[o])!==null&&n!==void 0?n:0;i[s]=l,r[a]++}return i}const EJ=(t,e)=>{const n=ta.createTransformer(e),i=cd(t),r=cd(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?iw.has(t)&&!r.values.length||iw.has(e)&&!i.values.length?vJ(t,e):Zd(eU(TJ(i,r),r.values),n):qp(t,e)};function tU(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?nt(t,e,n):KE(t)(t,e)}const AJ=5;function nU(t,e,n){const i=Math.max(e-AJ,0);return CL(n-t(i),e-i)}const ot={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},K_=.001;function IJ({duration:t=ot.duration,bounce:e=ot.bounce,velocity:n=ot.velocity,mass:i=ot.mass}){let r,s,a=1-e;a=zr(ot.minDamping,ot.maxDamping,a),t=zr(ot.minDuration,ot.maxDuration,Rr(t)),a<1?(r=c=>{const h=c*a,d=h*t,f=h-n,g=rw(c,a),b=Math.exp(-d);return K_-f/g*b},s=c=>{const d=c*a*t,f=d*n+n,g=Math.pow(a,2)*Math.pow(c,2)*t,b=Math.exp(-d),E=rw(Math.pow(c,2),a);return(-r(c)+K_>0?-1:1)*((f-g)*b)/E}):(r=c=>{const h=Math.exp(-c*t),d=(c-n)*t+1;return-K_+h*d},s=c=>{const h=Math.exp(-c*t),d=(n-c)*(t*t);return h*d});const o=5/t,l=xJ(r,s,o);if(t=xr(t),isNaN(l))return{stiffness:ot.stiffness,damping:ot.damping,duration:t};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:a*2*Math.sqrt(i*c),duration:t}}}const SJ=12;function xJ(t,e,n){let i=n;for(let r=1;r<SJ;r++)i=i-t(i)/e(i);return i}function rw(t,e){return t*Math.sqrt(1-e*e)}const RJ=["duration","bounce"],CJ=["stiffness","damping","mass"];function NR(t,e){return e.some(n=>t[n]!==void 0)}function PJ(t){let e={velocity:ot.velocity,stiffness:ot.stiffness,damping:ot.damping,mass:ot.mass,isResolvedFromDuration:!1,...t};if(!NR(t,CJ)&&NR(t,RJ))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,s=2*zr(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:ot.mass,stiffness:r,damping:s}}else{const n=IJ(t);e={...e,...n,mass:ot.mass},e.isResolvedFromDuration=!0}return e}function iU(t=ot.visualDuration,e=ot.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:h,duration:d,velocity:f,isResolvedFromDuration:g}=PJ({...n,velocity:-Rr(n.velocity||0)}),b=f||0,E=c/(2*Math.sqrt(l*h)),x=a-s,w=Rr(Math.sqrt(l/h)),v=Math.abs(x)<5;i||(i=v?ot.restSpeed.granular:ot.restSpeed.default),r||(r=v?ot.restDelta.granular:ot.restDelta.default);let _;if(E<1){const k=rw(w,E);_=V=>{const A=Math.exp(-E*w*V);return a-A*((b+E*w*x)/k*Math.sin(k*V)+x*Math.cos(k*V))}}else if(E===1)_=k=>a-Math.exp(-w*k)*(x+(b+w*x)*k);else{const k=w*Math.sqrt(E*E-1);_=V=>{const A=Math.exp(-E*w*V),T=Math.min(k*V,300);return a-A*((b+E*w*x)*Math.sinh(T)+k*x*Math.cosh(T))/k}}const I={calculatedDuration:g&&d||null,next:k=>{const V=_(k);if(g)o.done=k>=d;else{let A=0;E<1&&(A=k===0?xr(b):nU(_,k,V));const T=Math.abs(A)<=i,S=Math.abs(a-V)<=r;o.done=T&&S}return o.value=o.done?a:V,o},toString:()=>{const k=Math.min(bL(I),Y0),V=TL(A=>I.next(k*A).value,k,30);return k+"ms "+V}};return I}function DR({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:h}){const d=t[0],f={done:!1,value:d},g=T=>o!==void 0&&T<o||l!==void 0&&T>l,b=T=>o===void 0?l:l===void 0||Math.abs(o-T)<Math.abs(l-T)?o:l;let E=n*e;const x=d+E,w=a===void 0?x:a(x);w!==x&&(E=w-d);const v=T=>-E*Math.exp(-T/i),_=T=>w+v(T),I=T=>{const S=v(T),R=_(T);f.done=Math.abs(S)<=c,f.value=f.done?w:R};let k,V;const A=T=>{g(f.value)&&(k=T,V=iU({keyframes:[f.value,b(f.value)],velocity:nU(_,T,f.value),damping:r,stiffness:s,restDelta:c,restSpeed:h}))};return A(0),{calculatedDuration:null,next:T=>{let S=!1;return!V&&k===void 0&&(S=!0,I(T),A(T)),k!==void 0&&T>=k?V.next(T-k):(!S&&I(T),f)}}}const NJ=Jd(.42,0,1,1),DJ=Jd(0,0,.58,1),rU=Jd(.42,0,.58,1),kJ=t=>Array.isArray(t)&&typeof t[0]!="number",OJ={linear:Kn,easeIn:NJ,easeInOut:rU,easeOut:DJ,circIn:BE,circInOut:UL,circOut:LL,backIn:FE,backInOut:VL,backOut:OL,anticipate:ML},kR=t=>{if(ME(t)){tL(t.length===4);const[e,n,i,r]=t;return Jd(e,n,i,r)}else if(typeof t=="string")return OJ[t];return t};function VJ(t,e,n){const i=[],r=n||tU,s=t.length-1;for(let a=0;a<s;a++){let o=r(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Kn:e;o=Zd(l,o)}i.push(o)}return i}function MJ(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const s=t.length;if(tL(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=VJ(e,i,r),l=o.length,c=h=>{if(a&&h<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(h<t[d+1]);d++);const f=uc(t[d],t[d+1],h);return o[d](f)};return n?h=>c(zr(t[0],t[s-1],h)):c}function LJ(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=uc(0,e,i);t.push(nt(n,1,r))}}function UJ(t){const e=[0];return LJ(e,t.length-1),e}function jJ(t,e){return t.map(n=>n*e)}function zJ(t,e){return t.map(()=>e||rU).splice(0,t.length-1)}function Hp({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=kJ(i)?i.map(kR):kR(i),s={done:!1,value:e[0]},a=jJ(n&&n.length===e.length?n:UJ(e),t),o=MJ(a,e,{ease:Array.isArray(r)?r:zJ(e,r)});return{calculatedDuration:t,next:l=>(s.value=o(l),s.done=l>=t,s)}}const FJ=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ke.update(e,!0),stop:()=>ea(e),now:()=>Ft.isProcessing?Ft.timestamp:Zi.now()}},BJ={decay:DR,inertia:DR,tween:Hp,keyframes:Hp,spring:iU},qJ=t=>t/100;class WE extends ZL{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:i,element:r,keyframes:s}=this.options,a=(r==null?void 0:r.KeyframeResolver)||GE,o=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new a(s,o,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:a=0}=this.options,o=VE(n)?n:BJ[n]||Hp;let l,c;o!==Hp&&typeof e[0]!="number"&&(l=Zd(qJ,tU(e[0],e[1])),e=[0,100]);const h=o({...this.options,keyframes:e});s==="mirror"&&(c=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=bL(h));const{calculatedDuration:d}=h,f=d+r,g=f*(i+1)-r;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:g}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:c,totalDuration:h,resolvedDuration:d}=i;if(this.startTime===null)return s.next(0);const{delay:f,repeat:g,repeatType:b,repeatDelay:E,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const w=this.currentTime-f*(this.speed>=0?1:-1),v=this.speed>=0?w<0:w>h;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let _=this.currentTime,I=s;if(g){const T=Math.min(this.currentTime,h)/d;let S=Math.floor(T),R=T%1;!R&&T>=1&&(R=1),R===1&&S--,S=Math.min(S,g+1),!!(S%2)&&(b==="reverse"?(R=1-R,E&&(R-=E/d)):b==="mirror"&&(I=a)),_=zr(0,1,R)*d}const k=v?{done:!1,value:l[0]}:I.next(_);o&&(k.value=o(k.value));let{done:V}=k;!v&&c!==null&&(V=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return A&&r!==void 0&&(k.value=cy(l,this.options,r)),x&&x(k.value),A&&this.finish(),k}get duration(){const{resolved:e}=this;return e?Rr(e.calculatedDuration):0}get time(){return Rr(this.currentTime)}set time(e){e=xr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Rr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=FJ,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const HJ=new Set(["opacity","clipPath","filter","transform"]);function $J(t,e,n,{delay:i=0,duration:r=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const h=AL(o,r);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:i,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const GJ=wE(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),$p=10,KJ=2e4;function WJ(t){return VE(t.type)||t.type==="spring"||!EL(t.ease)}function QJ(t,e){const n=new WE({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let s=0;for(;!i.done&&s<KJ;)i=n.sample(s),r.push(i.value),s+=$p;return{times:void 0,keyframes:r,duration:s-$p,ease:"linear"}}const sU={anticipate:ML,backInOut:VL,circInOut:UL};function YJ(t){return t in sU}class OR extends ZL{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new JL(s,(a,o)=>this.onKeyframesResolved(a,o),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:s,type:a,motionValue:o,name:l,startTime:c}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&Bp()&&YJ(s)&&(s=sU[s]),WJ(this.options)){const{onComplete:d,onUpdate:f,motionValue:g,element:b,...E}=this.options,x=QJ(e,E);e=x.keyframes,e.length===1&&(e[1]=e[0]),i=x.duration,r=x.times,s=x.ease,a="keyframes"}const h=$J(o.owner.current,l,e,{...this.options,duration:i,times:r,ease:s});return h.startTime=c??this.calcStartTime(),this.pendingTimeline?(_R(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:d}=this.options;o.set(cy(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:i,times:r,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Rr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Rr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=xr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Kn;const{animation:i}=n;_R(i,e)}return Kn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:s,ease:a,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:d,element:f,...g}=this.options,b=new WE({...g,keyframes:i,duration:r,type:s,ease:a,times:o,isGenerator:!0}),E=xr(this.time);c.setWithVelocity(b.sample(E-$p).value,b.sample(E).value,$p)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:s,damping:a,type:o}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return GJ()&&i&&HJ.has(i)&&!l&&!c&&!r&&s!=="mirror"&&a!==0&&o!=="inertia"}}const XJ={type:"spring",stiffness:500,damping:25,restSpeed:10},JJ=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),ZJ={type:"keyframes",duration:.8},eZ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},tZ=(t,{keyframes:e})=>e.length>2?ZJ:Ro.has(t)?t.startsWith("scale")?JJ(e[1]):XJ:eZ;function nZ({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const QE=(t,e,n,i={},r,s)=>a=>{const o=OE(i,t)||{},l=o.delay||i.delay||0;let{elapsed:c=0}=i;c=c-xr(l);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:f=>{e.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:s?void 0:r};nZ(o)||(h={...h,...tZ(t,h)}),h.duration&&(h.duration=xr(h.duration)),h.repeatDelay&&(h.repeatDelay=xr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const f=cy(h.keyframes,o);if(f!==void 0)return Ke.update(()=>{h.onUpdate(f),h.onComplete()}),new bX([])}return!s&&OR.supports(h)?new OR(h):new WE(h)};function iZ({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function aU(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var s;let{transition:a=t.getDefaultTransition(),transitionEnd:o,...l}=e;i&&(a=i);const c=[],h=r&&t.animationState&&t.animationState.getState()[r];for(const d in l){const f=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),g=l[d];if(g===void 0||h&&iZ(h,d))continue;const b={delay:n,...OE(a||{},d)};let E=!1;if(window.MotionHandoffAnimation){const w=PL(t);if(w){const v=window.MotionHandoffAnimation(w,d,Ke);v!==null&&(b.startTime=v,E=!0)}}J0(t,d),f.start(QE(d,f,g,t.shouldReduceMotion&&RL.has(d)?{type:!1}:b,t,E));const x=f.animation;x&&c.push(x)}return o&&Promise.all(c).then(()=>{Ke.update(()=>{o&&VX(t,o)})}),c}function sw(t,e,n={}){var i;const r=ly(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(aU(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:f}=s;return rZ(t,e,h+c,d,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,h]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>h())}else return Promise.all([a(),o(n.delay)])}function rZ(t,e,n=0,i=0,r=1,s){const a=[],o=(t.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>o-c*i;return Array.from(t.variantChildren).sort(sZ).forEach((c,h)=>{c.notify("AnimationStart",e),a.push(sw(c,e,{...s,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(a)}function sZ(t,e){return t.sortNodePosition(e)}function aZ(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>sw(t,s,n));i=Promise.all(r)}else if(typeof e=="string")i=sw(t,e,n);else{const r=typeof e=="function"?ly(t,e,n.custom):e;i=Promise.all(aU(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const oZ=TE.length;function oU(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?oU(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<oZ;n++){const i=TE[n],r=t.props[i];(ad(r)||r===!1)&&(e[i]=r)}return e}const lZ=[...bE].reverse(),cZ=bE.length;function uZ(t){return e=>Promise.all(e.map(({animation:n,options:i})=>aZ(t,n,i)))}function hZ(t){let e=uZ(t),n=VR(),i=!0;const r=l=>(c,h)=>{var d;const f=ly(t,h,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:g,transitionEnd:b,...E}=f;c={...c,...E,...b}}return c};function s(l){e=l(t)}function a(l){const{props:c}=t,h=oU(t.parent)||{},d=[],f=new Set;let g={},b=1/0;for(let x=0;x<cZ;x++){const w=lZ[x],v=n[w],_=c[w]!==void 0?c[w]:h[w],I=ad(_),k=w===l?v.isActive:null;k===!1&&(b=x);let V=_===h[w]&&_!==c[w]&&I;if(V&&i&&t.manuallyAnimateOnMount&&(V=!1),v.protectedKeys={...g},!v.isActive&&k===null||!_&&!v.prevProp||ay(_)||typeof _=="boolean")continue;const A=dZ(v.prevProp,_);let T=A||w===l&&v.isActive&&!V&&I||x>b&&I,S=!1;const R=Array.isArray(_)?_:[_];let D=R.reduce(r(w),{});k===!1&&(D={});const{prevResolvedValues:O={}}=v,N={...O,...D},q=Y=>{T=!0,f.has(Y)&&(S=!0,f.delete(Y)),v.needsAnimating[Y]=!0;const J=t.getValue(Y);J&&(J.liveStyle=!1)};for(const Y in N){const J=D[Y],ie=O[Y];if(g.hasOwnProperty(Y))continue;let W=!1;Q0(J)&&Q0(ie)?W=!wL(J,ie):W=J!==ie,W?J!=null?q(Y):f.add(Y):J!==void 0&&f.has(Y)?q(Y):v.protectedKeys[Y]=!0}v.prevProp=_,v.prevResolvedValues=D,v.isActive&&(g={...g,...D}),i&&t.blockInitialAnimation&&(T=!1),T&&(!(V&&A)||S)&&d.push(...R.map(Y=>({animation:Y,options:{type:w}})))}if(f.size){const x={};f.forEach(w=>{const v=t.getBaseTarget(w),_=t.getValue(w);_&&(_.liveStyle=!0),x[w]=v??null}),d.push({animation:x})}let E=!!d.length;return i&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(E=!1),i=!1,E?e(d):Promise.resolve()}function o(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(f=>{var g;return(g=f.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),n[l].isActive=c;const d=a(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=VR(),i=!0}}}function dZ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!wL(e,t):!1}function ba(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function VR(){return{animate:ba(!0),whileInView:ba(),whileHover:ba(),whileTap:ba(),whileDrag:ba(),whileFocus:ba(),exit:ba()}}class fa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class fZ extends fa{constructor(e){super(e),e.animationState||(e.animationState=hZ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ay(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let mZ=0;class pZ extends fa{constructor(){super(...arguments),this.id=mZ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const gZ={animation:{Feature:fZ},exit:{Feature:pZ}};function ud(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function ef(t){return{point:{x:t.pageX,y:t.pageY}}}const yZ=t=>e=>LE(e)&&t(e,ef(e));function yh(t,e,n,i){return ud(t,e,yZ(n),i)}const MR=(t,e)=>Math.abs(t-e);function _Z(t,e){const n=MR(t.x,e.x),i=MR(t.y,e.y);return Math.sqrt(n**2+i**2)}class lU{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Q_(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=_Z(d.offset,{x:0,y:0})>=3;if(!f&&!g)return;const{point:b}=d,{timestamp:E}=Ft;this.history.push({...b,timestamp:E});const{onStart:x,onMove:w}=this.handlers;f||(x&&x(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=W_(f,this.transformPagePoint),Ke.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:g,onSessionEnd:b,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Q_(d.type==="pointercancel"?this.lastMoveEventInfo:W_(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(d,x),b&&b(d,x)},!LE(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=ef(e),o=W_(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=Ft;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,Q_(o,this.history)),this.removeListeners=Zd(yh(this.contextWindow,"pointermove",this.handlePointerMove),yh(this.contextWindow,"pointerup",this.handlePointerUp),yh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ea(this.updatePoint)}}function W_(t,e){return e?{point:e(t.point)}:t}function LR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Q_({point:t},e){return{point:t,delta:LR(t,cU(e)),offset:LR(t,vZ(e)),velocity:wZ(e,.1)}}function vZ(t){return t[0]}function cU(t){return t[t.length-1]}function wZ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=cU(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>xr(e)));)n--;if(!i)return{x:0,y:0};const s=Rr(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const a={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const uU=1e-4,bZ=1-uU,TZ=1+uU,hU=.01,EZ=0-hU,AZ=0+hU;function Xn(t){return t.max-t.min}function IZ(t,e,n){return Math.abs(t-e)<=n}function UR(t,e,n,i=.5){t.origin=i,t.originPoint=nt(e.min,e.max,t.origin),t.scale=Xn(n)/Xn(e),t.translate=nt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=bZ&&t.scale<=TZ||isNaN(t.scale))&&(t.scale=1),(t.translate>=EZ&&t.translate<=AZ||isNaN(t.translate))&&(t.translate=0)}function _h(t,e,n,i){UR(t.x,e.x,n.x,i?i.originX:void 0),UR(t.y,e.y,n.y,i?i.originY:void 0)}function jR(t,e,n){t.min=n.min+e.min,t.max=t.min+Xn(e)}function SZ(t,e,n){jR(t.x,e.x,n.x),jR(t.y,e.y,n.y)}function zR(t,e,n){t.min=e.min-n.min,t.max=t.min+Xn(e)}function vh(t,e,n){zR(t.x,e.x,n.x),zR(t.y,e.y,n.y)}function xZ(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?nt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?nt(n,t,i.max):Math.min(t,n)),t}function FR(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function RZ(t,{top:e,left:n,bottom:i,right:r}){return{x:FR(t.x,n,r),y:FR(t.y,e,i)}}function BR(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function CZ(t,e){return{x:BR(t.x,e.x),y:BR(t.y,e.y)}}function PZ(t,e){let n=.5;const i=Xn(t),r=Xn(e);return r>i?n=uc(e.min,e.max-i,t.min):i>r&&(n=uc(t.min,t.max-r,e.min)),zr(0,1,n)}function NZ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const aw=.35;function DZ(t=aw){return t===!1?t=0:t===!0&&(t=aw),{x:qR(t,"left","right"),y:qR(t,"top","bottom")}}function qR(t,e,n){return{min:HR(t,e),max:HR(t,n)}}function HR(t,e){return typeof t=="number"?t:t[e]||0}const $R=()=>({translate:0,scale:1,origin:0,originPoint:0}),fl=()=>({x:$R(),y:$R()}),GR=()=>({min:0,max:0}),dt=()=>({x:GR(),y:GR()});function Zn(t){return[t("x"),t("y")]}function dU({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function kZ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function OZ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Y_(t){return t===void 0||t===1}function ow({scale:t,scaleX:e,scaleY:n}){return!Y_(t)||!Y_(e)||!Y_(n)}function Ca(t){return ow(t)||fU(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function fU(t){return KR(t.x)||KR(t.y)}function KR(t){return t&&t!=="0%"}function Gp(t,e,n){const i=t-n,r=e*i;return n+r}function WR(t,e,n,i,r){return r!==void 0&&(t=Gp(t,r,i)),Gp(t,n,i)+e}function lw(t,e=0,n=1,i,r){t.min=WR(t.min,e,n,i,r),t.max=WR(t.max,e,n,i,r)}function mU(t,{x:e,y:n}){lw(t.x,e.translate,e.scale,e.originPoint),lw(t.y,n.translate,n.scale,n.originPoint)}const QR=.999999999999,YR=1.0000000000001;function VZ(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let s,a;for(let o=0;o<r;o++){s=n[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&pl(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,mU(t,a)),i&&Ca(s.latestValues)&&pl(t,s.latestValues))}e.x<YR&&e.x>QR&&(e.x=1),e.y<YR&&e.y>QR&&(e.y=1)}function ml(t,e){t.min=t.min+e,t.max=t.max+e}function XR(t,e,n,i,r=.5){const s=nt(t.min,t.max,r);lw(t,e,n,s,i)}function pl(t,e){XR(t.x,e.x,e.scaleX,e.scale,e.originX),XR(t.y,e.y,e.scaleY,e.scale,e.originY)}function pU(t,e){return dU(OZ(t.getBoundingClientRect(),e))}function MZ(t,e,n){const i=pU(t,n),{scroll:r}=e;return r&&(ml(i.x,r.offset.x),ml(i.y,r.offset.y)),i}const gU=({current:t})=>t?t.ownerDocument.defaultView:null,LZ=new WeakMap;class UZ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=dt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ef(h).point)},s=(h,d)=>{const{drag:f,dragPropagation:g,onDragStart:b}=this.getProps();if(f&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=PX(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zn(x=>{let w=this.getAxisMotionValue(x).get()||0;if(Ji.test(w)){const{projection:v}=this.visualElement;if(v&&v.layout){const _=v.layout.layoutBox[x];_&&(w=Xn(_)*(parseFloat(w)/100))}}this.originPoint[x]=w}),b&&Ke.postRender(()=>b(h,d)),J0(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},a=(h,d)=>{const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:b,onDrag:E}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:x}=d;if(g&&this.currentDirection===null){this.currentDirection=jZ(x),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",d.point,x),this.updateAxis("y",d.point,x),this.visualElement.render(),E&&E(h,d)},o=(h,d)=>this.stop(h,d),l=()=>Zn(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new lU(e,{onSessionStart:r,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:gU(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Ke.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Wf(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=xZ(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&hl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=RZ(r.layoutBox,n):this.constraints=!1,this.elastic=DZ(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Zn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=NZ(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!hl(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=MZ(i,r.root,this.visualElement.getTransformPagePoint());let a=CZ(r.layout.layoutBox,s);if(n){const o=n(kZ(a));this.hasMutatedConstraints=!!o,o&&(a=dU(o))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Zn(h=>{if(!Wf(h,n,this.currentDirection))return;let d=l&&l[h]||{};a&&(d={min:0,max:0});const f=r?200:1e6,g=r?40:1e7,b={type:"inertia",velocity:i?e[h]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,b)});return Promise.all(c).then(o)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return J0(this.visualElement,e),i.start(QE(e,i,0,n,this.visualElement,!1))}stopAnimation(){Zn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Zn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Zn(n=>{const{drag:i}=this.getProps();if(!Wf(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:o}=r.layout.layoutBox[n];s.set(e[n]-nt(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!hl(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Zn(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();r[a]=PZ({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Zn(a=>{if(!Wf(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(nt(l,c,r[a]))})}addListeners(){if(!this.visualElement.current)return;LZ.set(this.visualElement,this);const e=this.visualElement.current,n=yh(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();hl(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Ke.read(i);const a=ud(window,"resize",()=>this.scalePositionWithinConstraints()),o=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Zn(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:a=aw,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function Wf(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function jZ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class zZ extends fa{constructor(e){super(e),this.removeGroupControls=Kn,this.removeListeners=Kn,this.controls=new UZ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Kn}unmount(){this.removeGroupControls(),this.removeListeners()}}const JR=t=>(e,n)=>{t&&Ke.postRender(()=>t(e,n))};class FZ extends fa{constructor(){super(...arguments),this.removePointerDownListener=Kn}onPointerDown(e){this.session=new lU(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gU(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:JR(e),onStart:JR(n),onMove:i,onEnd:(s,a)=>{delete this.session,r&&Ke.postRender(()=>r(s,a))}}}mount(){this.removePointerDownListener=yh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Dm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ZR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const vu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(re.test(t))t=parseFloat(t);else return t;const n=ZR(t,e.target.x),i=ZR(t,e.target.y);return`${n}% ${i}%`}},BZ={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=ta.parse(t);if(r.length>5)return i;const s=ta.createTransformer(t),a=typeof r[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;r[0+a]/=o,r[1+a]/=l;const c=nt(o,l,.5);return typeof r[2+a]=="number"&&(r[2+a]/=c),typeof r[3+a]=="number"&&(r[3+a]/=c),s(r)}};class qZ extends C.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;cX(HZ),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Dm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,a=i.projection;return a&&(a.isPresent=s,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Ke.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),AE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function yU(t){const[e,n]=ZM(),i=C.useContext(gE);return p.jsx(qZ,{...t,layoutGroup:i,switchLayoutGroup:C.useContext(oL),isPresent:e,safeToRemove:n})}const HZ={borderRadius:{...vu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:vu,borderTopRightRadius:vu,borderBottomLeftRadius:vu,borderBottomRightRadius:vu,boxShadow:BZ};function $Z(t,e,n){const i=an(t)?t:ld(t);return i.start(QE("",i,e,n)),i.animation}function GZ(t){return t instanceof SVGElement&&t.tagName!=="svg"}const KZ=(t,e)=>t.depth-e.depth;class WZ{constructor(){this.children=[],this.isDirty=!1}add(e){UE(this.children,e),this.isDirty=!0}remove(e){jE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(KZ),this.isDirty=!1,this.children.forEach(e)}}function QZ(t,e){const n=Zi.now(),i=({timestamp:r})=>{const s=r-n;s>=e&&(ea(i),t(s-e))};return Ke.read(i,!0),()=>ea(i)}const _U=["TopLeft","TopRight","BottomLeft","BottomRight"],YZ=_U.length,eC=t=>typeof t=="string"?parseFloat(t):t,tC=t=>typeof t=="number"||re.test(t);function XZ(t,e,n,i,r,s){r?(t.opacity=nt(0,n.opacity!==void 0?n.opacity:1,JZ(i)),t.opacityExit=nt(e.opacity!==void 0?e.opacity:1,0,ZZ(i))):s&&(t.opacity=nt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<YZ;a++){const o=`border${_U[a]}Radius`;let l=nC(e,o),c=nC(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||tC(l)===tC(c)?(t[o]=Math.max(nt(eC(l),eC(c),i),0),(Ji.test(c)||Ji.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||n.rotate)&&(t.rotate=nt(e.rotate||0,n.rotate||0,i))}function nC(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const JZ=vU(0,.5,LL),ZZ=vU(.5,.95,Kn);function vU(t,e,n){return i=>i<t?0:i>e?1:n(uc(t,e,i))}function iC(t,e){t.min=e.min,t.max=e.max}function Jn(t,e){iC(t.x,e.x),iC(t.y,e.y)}function rC(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function sC(t,e,n,i,r){return t-=e,t=Gp(t,1/n,i),r!==void 0&&(t=Gp(t,1/r,i)),t}function eee(t,e=0,n=1,i=.5,r,s=t,a=t){if(Ji.test(e)&&(e=parseFloat(e),e=nt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=nt(s.min,s.max,i);t===s&&(o-=e),t.min=sC(t.min,e,n,o,r),t.max=sC(t.max,e,n,o,r)}function aC(t,e,[n,i,r],s,a){eee(t,e[n],e[i],e[r],e.scale,s,a)}const tee=["x","scaleX","originX"],nee=["y","scaleY","originY"];function oC(t,e,n,i){aC(t.x,e,tee,n?n.x:void 0,i?i.x:void 0),aC(t.y,e,nee,n?n.y:void 0,i?i.y:void 0)}function lC(t){return t.translate===0&&t.scale===1}function wU(t){return lC(t.x)&&lC(t.y)}function cC(t,e){return t.min===e.min&&t.max===e.max}function iee(t,e){return cC(t.x,e.x)&&cC(t.y,e.y)}function uC(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function bU(t,e){return uC(t.x,e.x)&&uC(t.y,e.y)}function hC(t){return Xn(t.x)/Xn(t.y)}function dC(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class ree{constructor(){this.members=[]}add(e){UE(this.members,e),e.scheduleRender()}remove(e){if(jE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function see(t,e,n){let i="";const r=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((r||s||a)&&(i=`translate3d(${r}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:d,rotateY:f,skewX:g,skewY:b}=n;c&&(i=`perspective(${c}px) ${i}`),h&&(i+=`rotate(${h}deg) `),d&&(i+=`rotateX(${d}deg) `),f&&(i+=`rotateY(${f}deg) `),g&&(i+=`skewX(${g}deg) `),b&&(i+=`skewY(${b}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(i+=`scale(${o}, ${l})`),i||"none"}const Pa={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Mu=typeof window<"u"&&window.MotionDebug!==void 0,X_=["","X","Y","Z"],aee={visibility:"hidden"},fC=1e3;let oee=0;function J_(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function TU(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=PL(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ke,!(r||s))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&TU(i)}function EU({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},o=e==null?void 0:e()){this.id=oee++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Mu&&(Pa.totalNodes=Pa.resolvedTargetDeltas=Pa.recalculatedProjection=0),this.nodes.forEach(uee),this.nodes.forEach(pee),this.nodes.forEach(gee),this.nodes.forEach(hee),Mu&&window.MotionDebug.record(Pa)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new WZ)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new zE),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=GZ(a),this.instance=a;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=QZ(f,250),Dm.hasAnimatedSinceResize&&(Dm.hasAnimatedSinceResize=!1,this.nodes.forEach(pC))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:g,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||h.getDefaultTransition()||bee,{onLayoutAnimationStart:x,onLayoutAnimationComplete:w}=h.getProps(),v=!this.targetLayout||!bU(this.targetLayout,b)||g,_=!f&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,_);const I={...OE(E,"layout"),onPlay:x,onComplete:w};(h.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I)}else f||pC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ea(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(yee),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&TU(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(mC);return}this.isUpdating||this.nodes.forEach(fee),this.isUpdating=!1,this.nodes.forEach(mee),this.nodes.forEach(lee),this.nodes.forEach(cee),this.clearAllSnapshots();const o=Zi.now();Ft.delta=zr(0,1e3/60,o-Ft.timestamp),Ft.timestamp=o,Ft.isProcessing=!0,B_.update.process(Ft),B_.preRender.process(Ft),B_.render.process(Ft),Ft.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,AE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(dee),this.sharedNodes.forEach(_ee)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ke.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ke.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!wU(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;a&&(o||Ca(this.latestValues)||h)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),Tee(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return dt();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(Eee))){const{scroll:h}=this.root;h&&(ml(l.x,h.offset.x),ml(l.y,h.offset.y))}return l}removeElementScroll(a){var o;const l=dt();if(Jn(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:d,options:f}=h;h!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Jn(l,a),ml(l.x,d.offset.x),ml(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=dt();Jn(l,a);for(let c=0;c<this.path.length;c++){const h=this.path[c];!o&&h.options.layoutScroll&&h.scroll&&h!==h.root&&pl(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ca(h.latestValues)&&pl(l,h.latestValues)}return Ca(this.latestValues)&&pl(l,this.latestValues),l}removeTransform(a){const o=dt();Jn(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ca(c.latestValues))continue;ow(c.latestValues)&&c.updateSnapshot();const h=dt(),d=c.measurePageBox();Jn(h,d),oC(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return Ca(this.latestValues)&&oC(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ft.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Ft.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),vh(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Jn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=dt(),this.targetWithTransforms=dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),SZ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Jn(this.target,this.layout.layoutBox),mU(this.target,this.targetDelta)):Jn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),vh(this.relativeTargetOrigin,this.target,g.target),Jn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Mu&&Pa.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||ow(this.parent.latestValues)||fU(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ft.timestamp&&(c=!1),c)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;Jn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;VZ(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=dt());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(rC(this.prevProjectionDelta.x,this.projectionDelta.x),rC(this.prevProjectionDelta.y,this.projectionDelta.y)),_h(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==g||!dC(this.projectionDelta.x,this.prevProjectionDelta.x)||!dC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),Mu&&Pa.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=fl(),this.projectionDelta=fl(),this.projectionDeltaWithTransform=fl()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},d=fl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=dt(),g=l?l.source:void 0,b=this.layout?this.layout.source:void 0,E=g!==b,x=this.getStack(),w=!x||x.members.length<=1,v=!!(E&&!w&&this.options.crossfade===!0&&!this.path.some(wee));this.animationProgress=0;let _;this.mixTargetDelta=I=>{const k=I/1e3;gC(d.x,a.x,k),gC(d.y,a.y,k),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vh(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),vee(this.relativeTarget,this.relativeTargetOrigin,f,k),_&&iee(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=dt()),Jn(_,this.relativeTarget)),E&&(this.animationValues=h,XZ(h,c,this.latestValues,k,v,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ea(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ke.update(()=>{Dm.hasAnimatedSinceResize=!0,this.currentAnimation=$Z(0,fC,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(fC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:h}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&AU(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||dt();const d=Xn(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const f=Xn(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}Jn(o,l),pl(o,h),_h(this.projectionDeltaWithTransform,this.layoutCorrected,o,h)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new ree),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&J_("z",a,c,this.animationValues);for(let h=0;h<X_.length;h++)J_(`rotate${X_[h]}`,a,c,this.animationValues),J_(`skew${X_[h]}`,a,c,this.animationValues);a.render();for(const h in c)a.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return aee;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Pm(a==null?void 0:a.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const E={};return this.options.layoutId&&(E.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,E.pointerEvents=Pm(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ca(this.latestValues)&&(E.transform=h?h({},""):"none",this.hasProjected=!1),E}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=see(this.projectionDeltaWithTransform,this.treeScale,f),h&&(c.transform=h(f,c.transform));const{x:g,y:b}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${b.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const E in Fp){if(f[E]===void 0)continue;const{correct:x,applyTo:w}=Fp[E],v=c.transform==="none"?f[E]:x(f[E],d);if(w){const _=w.length;for(let I=0;I<_;I++)c[w[I]]=v}else c[E]=v}return this.options.layoutId&&(c.pointerEvents=d===this?Pm(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(mC),this.root.sharedNodes.clear()}}}function lee(t){t.updateLayout()}function cee(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:s}=t.options,a=n.source!==t.layout.source;s==="size"?Zn(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],g=Xn(f);f.min=i[d].min,f.max=f.min+g}):AU(s,n.layoutBox,i)&&Zn(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],g=Xn(i[d]);f.max=f.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+g)});const o=fl();_h(o,i,n.layoutBox);const l=fl();a?_h(l,t.applyTransform(r,!0),n.measuredBox):_h(l,i,n.layoutBox);const c=!wU(o);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:g}=d;if(f&&g){const b=dt();vh(b,n.layoutBox,f.layoutBox);const E=dt();vh(E,i,g.layoutBox),bU(b,E)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=E,t.relativeTargetOrigin=b,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function uee(t){Mu&&Pa.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function hee(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function dee(t){t.clearSnapshot()}function mC(t){t.clearMeasurements()}function fee(t){t.isLayoutDirty=!1}function mee(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function pC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function pee(t){t.resolveTargetDelta()}function gee(t){t.calcProjection()}function yee(t){t.resetSkewAndRotation()}function _ee(t){t.removeLeadSnapshot()}function gC(t,e,n){t.translate=nt(e.translate,0,n),t.scale=nt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function yC(t,e,n,i){t.min=nt(e.min,n.min,i),t.max=nt(e.max,n.max,i)}function vee(t,e,n,i){yC(t.x,e.x,n.x,i),yC(t.y,e.y,n.y,i)}function wee(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const bee={duration:.45,ease:[.4,0,.1,1]},_C=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),vC=_C("applewebkit/")&&!_C("chrome/")?Math.round:Kn;function wC(t){t.min=vC(t.min),t.max=vC(t.max)}function Tee(t){wC(t.x),wC(t.y)}function AU(t,e,n){return t==="position"||t==="preserve-aspect"&&!IZ(hC(e),hC(n),.2)}function Eee(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const Aee=EU({attachResizeListener:(t,e)=>ud(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Z_={current:void 0},IU=EU({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Z_.current){const t=new Aee({});t.mount(window),t.setOptions({layoutScroll:!0}),Z_.current=t}return Z_.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Iee={pan:{Feature:FZ},drag:{Feature:zZ,ProjectionNode:IU,MeasureLayout:yU}};function bC(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,s=i[r];s&&Ke.postRender(()=>s(e,ef(e)))}class See extends fa{mount(){const{current:e}=this.node;e&&(this.unmount=IX(e,n=>(bC(this.node,n,"Start"),i=>bC(this.node,i,"End"))))}unmount(){}}class xee extends fa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zd(ud(this.node.current,"focus",()=>this.onFocus()),ud(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function TC(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),s=i[r];s&&Ke.postRender(()=>s(e,ef(e)))}class Ree extends fa{mount(){const{current:e}=this.node;e&&(this.unmount=CX(e,n=>(TC(this.node,n,"Start"),(i,{success:r})=>TC(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const cw=new WeakMap,ev=new WeakMap,Cee=t=>{const e=cw.get(t.target);e&&e(t)},Pee=t=>{t.forEach(Cee)};function Nee({root:t,...e}){const n=t||document;ev.has(n)||ev.set(n,{});const i=ev.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(Pee,{root:t,...e})),i[r]}function Dee(t,e,n){const i=Nee(e);return cw.set(t,n),i.observe(t),()=>{cw.delete(t),i.unobserve(t)}}const kee={some:0,all:1};class Oee extends fa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:kee[r]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=c?h:d;f&&f(l)};return Dee(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Vee(e,n))&&this.startObserver()}unmount(){}}function Vee({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Mee={inView:{Feature:Oee},tap:{Feature:Ree},focus:{Feature:xee},hover:{Feature:See}},Lee={layout:{ProjectionNode:IU,MeasureLayout:yU}},uw={current:null},SU={current:!1};function Uee(){if(SU.current=!0,!!vE)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>uw.current=t.matches;t.addListener(e),e()}else uw.current=!1}const jee=[...XL,en,ta],zee=t=>jee.find(YL(t)),EC=new WeakMap;function Fee(t,e,n){for(const i in e){const r=e[i],s=n[i];if(an(r))t.addValue(i,r);else if(an(s))t.addValue(i,ld(r,{owner:t}));else if(s!==r)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(i);t.addValue(i,ld(a!==void 0?a:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const AC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Bee{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=GE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Zi.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Ke.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:h}=a;this.onUpdate=h,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=oy(n),this.isVariantNode=sL(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in f){const b=f[g];l[g]!==void 0&&an(b)&&b.set(l[g],!1)}}mount(e){this.current=e,EC.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),SU.current||Uee(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:uw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){EC.delete(this.current),this.projection&&this.projection.unmount(),ea(this.notifyUpdate),ea(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Ro.has(e),r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ke.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in hc){const n=hc[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<AC.length;i++){const r=AC[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,a=e[s];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=Fee(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=ld(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(WL(r)||jL(r))?r=parseFloat(r):!zee(r)&&ta.test(n)&&(r=$L(e,n)),this.setBaseTarget(e,an(r)?r.get():r)),an(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const a=SE(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(r=a[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!an(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new zE),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class xU extends Bee{constructor(){super(...arguments),this.KeyframeResolver=JL}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;an(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function qee(t){return window.getComputedStyle(t)}class Hee extends xU{constructor(){super(...arguments),this.type="html",this.renderInstance=mL}readValueFromInstance(e,n){if(Ro.has(n)){const i=$E(n);return i&&i.default||0}else{const i=qee(e),r=(hL(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return pU(e,n)}build(e,n,i){CE(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return kE(e,n,i)}}class $ee extends xU{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=dt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ro.has(n)){const i=$E(n);return i&&i.default||0}return n=pL.has(n)?n:EE(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return _L(e,n,i)}build(e,n,i){PE(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){gL(e,n,i,r)}mount(e){this.isSVGTag=DE(e.tagName),super.mount(e)}}const Gee=(t,e)=>IE(t)?new $ee(e):new Hee(e,{allowProjection:t!==C.Fragment}),Kee=_X({...gZ,...Mee,...Iee,...Lee},Gee),Wee=kY(Kee),Qee=()=>{const{notification:t,hideNotification:e}=JM(),n={success:p.jsx(Q2,{className:"h-6 w-6 text-green-500"}),info:p.jsx(J2,{className:"h-6 w-6 text-blue-500"}),warning:p.jsx(Rz,{className:"h-6 w-6 text-amber-500"}),error:p.jsx(Qj,{className:"h-6 w-6 text-red-500"})},i={success:"bg-white border-green-100",info:"bg-white border-blue-100",warning:"bg-white border-amber-100",error:"bg-white border-red-100"};return p.jsx(IY,{children:t.isVisible&&p.jsxs(Wee.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{type:"spring",stiffness:300,damping:30},className:`fixed top-6 left-0 right-0 z-[100] mx-auto flex w-[90%] max-w-md items-center gap-3 rounded-xl border p-4 shadow-xl ${i[t.type]}`,children:[p.jsx("div",{className:"flex-shrink-0",children:n[t.type]}),p.jsx("div",{className:"flex-1",children:p.jsx("p",{className:"font-medium text-gray-900",children:t.message})}),p.jsx("button",{onClick:e,className:"flex-shrink-0 rounded-full p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-500",children:p.jsx(Id,{className:"h-4 w-4"})})]})})},RU=C.createContext(void 0),ine=()=>{const t=C.useContext(RU);if(t===void 0)throw new Error("useOrder must be used within an OrderProvider");return t},Yee=({children:t})=>{const[e,n]=C.useState(null),[i,r]=C.useState([]),[s,a]=C.useState(!0),{currentUser:o}=da(),{showNotification:l}=JM(),c=C.useRef(void 0);C.useEffect(()=>{let f;return o?(a(!0),f=Xe.collection("orders").where("userId","==",o.uid).onSnapshot(E=>{const x=E.docs.map(v=>{var _;return{id:v.id,...v.data(),timestamp:((_=v.data().timestamp)==null?void 0:_.toDate())||new Date}});E.docChanges().forEach(v=>{if(v.type==="modified"){const _=v.doc.data();_.status==="cancelled"&&l(`Your order ${_.orderNumber} has been cancelled. Reason: ${_.cancellationReason||"No reason provided"}`,"error")}}),x.sort((v,_)=>_.timestamp.getTime()-v.timestamp.getTime()),r(x);const w=x.find(v=>v.status!=="completed"&&v.status!=="cancelled")||null;n(w),a(!1)},E=>{console.error("Error listening to order history:",E),a(!1)})):(r([]),n(null),a(!1)),()=>{f&&f()}},[o,l]),C.useEffect(()=>{const f=e==null?void 0:e.status,g=c.current;if(f==="ready"&&g!=="ready"){const b=e==null?void 0:e.orderItems.map(E=>E.productName).join(", ");l(`Your order for ${b} is ready!`,"success")}c.current=f},[e==null?void 0:e.status,e==null?void 0:e.orderItems,l]);const d={activeOrder:e,setActiveOrder:n,orderHistory:i,addOrderToHistory:async f=>{try{const g=await Xe.collection("orders").add({...f,timestamp:Gt.firestore.FieldValue.serverTimestamp()}),b={...f,id:g.id,timestamp:new Date};r(E=>[b,...E]),n(b)}catch(g){console.error("Error adding order to Firestore:",g)}},isHistoryLoading:s};return p.jsx(RU.Provider,{value:d,children:t})},Xee=({children:t,className:e="",variant:n="solid",color:i="primary",size:r="md"})=>{const s="inline-flex items-center gap-1.5 rounded-full font-medium",a={xs:"px-2 py-0.5 text-xs",sm:"px-2.5 py-1 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-1.5 text-base"},o={primary:"bg-primary-100 text-primary-800",success:"bg-green-100 text-green-800",warning:"bg-amber-100 text-amber-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800",gray:"bg-gray-100 text-gray-800"},l={primary:"border-2 border-primary-300 text-primary-700 bg-transparent",success:"border-2 border-green-300 text-green-700 bg-transparent",warning:"border-2 border-amber-300 text-amber-700 bg-transparent",error:"border-2 border-red-300 text-red-700 bg-transparent",info:"border-2 border-blue-300 text-blue-700 bg-transparent",gray:"border-2 border-gray-300 text-gray-700 bg-transparent"},c={primary:"bg-primary-500",success:"bg-green-500",warning:"bg-amber-500",error:"bg-red-500",info:"bg-blue-500",gray:"bg-gray-500"},h=n==="outline"?l[i]:o[i];return p.jsxs("span",{className:`${s} ${a[r]} ${h} ${e}`,children:[n==="dot"&&p.jsx("span",{className:`h-2 w-2 rounded-full ${c[i]} animate-pulse`}),t]})},CU=()=>{const[t,e]=C.useState([]),[n,i]=C.useState(!0),[r,s]=C.useState(null);return C.useEffect(()=>{(async()=>{try{i(!0);const l=await Xe.collection("ingredients").where("isTopping","==",!0).get(),c=[];l.forEach(h=>{const d=h.data();d.stock>0&&d.toppingPrice!==void 0&&d.portionSize!==void 0&&c.push({id:h.id,name:d.name,price:d.toppingPrice,stock:d.stock,portionSize:d.portionSize})}),c.sort((h,d)=>h.name.localeCompare(d.name)),e(c),s(null)}catch(o){console.error("Error fetching toppings:",o),s("Failed to load toppings"),e([{id:"pearls",name:"Pearls",price:10,stock:3e3,portionSize:30},{id:"pudding",name:"Pudding",price:15,stock:2e3,portionSize:40},{id:"grass-jelly",name:"Grass Jelly",price:15,stock:2500,portionSize:35}])}finally{i(!1)}})()},[]),{toppings:t,isLoading:n,error:r}},Jee=({cartItems:t,isOpen:e,onClose:n,onUpdateQuantity:i,onRemoveItem:r,onCheckout:s,onEditItem:a,selectedItemIds:o,onToggleItemSelection:l,onSelectAll:c,onDeselectAll:h})=>{const d=Ec(),f=t.reduce((I,k)=>I+k.quantity,0),{toppings:g}=CU(),b=t.length>0&&o.length===t.length,E=o.length>0&&o.length<t.length,x=I=>I?I.reduce((k,V)=>{const A=g.find(T=>T.name===V);return k+((A==null?void 0:A.price)||0)},0):0,w=t.filter(I=>o.includes(I.id)).reduce((I,k)=>{var A;const V=x((A=k.customizations)==null?void 0:A.toppings);return I+(k.selectedSize.price+V)*k.quantity},0),v=()=>{n(),d("/menu")},_=()=>{b?h():c()};return p.jsxs(p.Fragment,{children:[p.jsx("div",{onClick:n,className:`fixed inset-0 z-40 bg-black/50 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"}`,"aria-hidden":"true"}),p.jsx("aside",{className:`fixed top-0 right-0 z-50 h-full w-full transform bg-white shadow-2xl transition-transform duration-300 ease-in-out sm:w-96 md:w-[450px] ${e?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"cart-heading",children:p.jsxs("div",{className:"flex h-full flex-col",children:[p.jsxs("header",{className:"flex items-center justify-between border-b border-gray-200 p-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("h2",{id:"cart-heading",className:"font-display text-xl font-bold text-coffee-900",children:"Your Order"}),f>0&&p.jsxs(Xee,{children:[f," ",f===1?"item":"items"]})]}),p.jsx("button",{onClick:n,className:"rounded-md p-2 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-800","aria-label":"Close cart",children:p.jsx(Id,{className:"h-6 w-6"})})]}),t.length>0&&p.jsx("div",{className:"border-b border-gray-200 px-6 py-3 bg-gray-50/50 backdrop-blur-sm sticky top-0 z-10",children:p.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group select-none",children:[p.jsxs("div",{className:"relative flex items-center justify-center h-5 w-5",children:[p.jsx("input",{type:"checkbox",checked:b,onChange:_,className:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border-2 border-gray-300 bg-white transition-all checked:border-primary-600 checked:bg-primary-600 hover:border-primary-500 focus:ring-2 focus:ring-primary-500/20"}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 peer-checked:opacity-100 transition-opacity duration-200",children:E&&!b?p.jsx(t0,{className:"h-3.5 w-3.5 text-white",strokeWidth:3}):p.jsx(NS,{className:"h-3.5 w-3.5 text-white",strokeWidth:3})})]}),p.jsx("span",{className:"text-sm font-semibold text-gray-700 group-hover:text-primary-700 transition-colors",children:b?"Deselect All":"Select All"}),o.length>0&&p.jsxs("span",{className:"ml-auto text-xs font-medium text-primary-600 bg-primary-50 px-2 py-1 rounded-full",children:[o.length," selected"]})]})}),t.length===0?p.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-4 p-6 text-center",children:[p.jsx(jr,{className:"h-24 w-24 text-gray-300 opacity-50"}),p.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Your cart is empty"}),p.jsx("p",{className:"text-gray-500",children:"Looks like you haven't added anything yet."}),p.jsx("button",{onClick:v,className:"mt-4 rounded-full bg-primary-600 px-6 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-primary-700",children:"Start Ordering"})]}):p.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:p.jsx("ul",{className:"space-y-3",children:t.map(I=>{var D;const k=I.selectedSize.name==="Combo Meal",V=k?`${I.product.name} (${I.selectedSize.name})`:I.product.name,A=k&&I.product.comboImageUrl?I.product.comboImageUrl:I.product.imageUrl,T=x((D=I.customizations)==null?void 0:D.toppings),S=I.selectedSize.price+T,R=o.includes(I.id);return p.jsxs("li",{className:`relative flex gap-4 p-5 rounded-xl transition-all ${R?"bg-coffee-50 border-2 border-coffee-200":"bg-gray-50/50 border-2 border-transparent hover:border-gray-200"}`,children:[p.jsx("button",{onClick:()=>r(I.id),className:"absolute top-5 right-5 z-10 rounded-full p-2 text-gray-400 transition-all hover:bg-red-50 hover:text-red-600","aria-label":`Remove ${V} from cart`,children:p.jsx(Sz,{className:"h-4 w-4"})}),p.jsxs("div",{className:"pt-1 relative flex items-center justify-center h-5 w-5",children:[p.jsx("input",{type:"checkbox",checked:R,onChange:()=>l(I.id),className:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border-2 border-gray-300 bg-white transition-all checked:border-primary-600 checked:bg-primary-600 hover:border-primary-500 focus:ring-2 focus:ring-primary-500/20"}),p.jsx(NS,{className:"absolute h-3.5 w-3.5 text-white opacity-0 peer-checked:opacity-100 transition-opacity duration-200 pointer-events-none",strokeWidth:3})]}),p.jsx("button",{onClick:()=>a(I),className:"h-20 w-20 flex-shrink-0 overflow-hidden rounded-lg border border-gray-100 shadow-sm hover:border-primary-300 transition-colors cursor-pointer",children:p.jsx("img",{src:A,alt:V,className:"h-full w-full object-cover object-center"})}),p.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[p.jsxs("button",{onClick:()=>a(I),className:"text-left w-full hover:opacity-75 transition-opacity",children:[p.jsx("h4",{className:"font-bold text-gray-900 truncate text-base pr-8",children:V}),p.jsxs("div",{className:"mt-1.5 flex items-center justify-between",children:[p.jsx("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:I.selectedSize.name}),p.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["",I.selectedSize.price.toFixed(2)]})]})]}),I.customizations&&p.jsxs("div",{className:"mt-2 space-y-1.5",children:[(I.customizations.sugarLevel||I.customizations.iceLevel)&&p.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[I.customizations.sugarLevel&&p.jsxs("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:["Sugar: ",I.customizations.sugarLevel]}),I.customizations.iceLevel&&p.jsxs("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:["Ice: ",I.customizations.iceLevel]})]}),I.customizations.toppings&&I.customizations.toppings.length>0&&p.jsx("div",{className:"flex flex-col gap-1.5",children:I.customizations.toppings.map(O=>{const N=g.find(ne=>ne.name===O),q=(N==null?void 0:N.price)||0;return p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:O}),p.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["+",q.toFixed(2)]})]},O)})})]}),p.jsxs("div",{className:"mt-auto pt-3 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center rounded-full border border-gray-200 bg-white shadow-sm",children:[p.jsx("button",{onClick:()=>i(I.id,I.quantity-1),disabled:I.quantity===1,className:"flex h-8 w-8 items-center justify-center rounded-l-full text-gray-500 transition hover:bg-gray-50 hover:text-gray-700 disabled:cursor-not-allowed disabled:opacity-50","aria-label":`Decrease quantity of ${V}`,children:p.jsx(t0,{className:"h-3.5 w-3.5"})}),p.jsx("span",{className:"w-8 text-center text-sm font-semibold text-gray-900","aria-live":"polite",children:I.quantity}),p.jsx("button",{onClick:()=>i(I.id,I.quantity+1),className:"flex h-8 w-8 items-center justify-center rounded-r-full text-gray-500 transition hover:bg-gray-50 hover:text-gray-700","aria-label":`Increase quantity of ${V}`,children:p.jsx(Z2,{className:"h-3.5 w-3.5"})})]}),p.jsxs("p",{className:"font-bold text-lg text-gray-900",children:["",(S*I.quantity).toFixed(2)]})]})]})]},I.id)})})}),t.length>0&&p.jsxs("footer",{className:"mt-auto border-t border-gray-200 p-6 bg-gray-50/50",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-base font-medium text-gray-600",children:"Subtotal"}),p.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["",w.toFixed(2)]})]}),o.length<t.length&&p.jsx("p",{className:"mt-1 text-xs text-amber-600",children:o.length===0?"Please select items to checkout":`${t.length-o.length} item(s) not selected`}),p.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Taxes and service fee calculated at checkout."}),p.jsx("div",{className:"mt-6",children:p.jsxs("button",{onClick:s,disabled:o.length===0,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-primary-600 px-6 py-3.5 text-base font-bold text-white shadow-lg shadow-primary-600/20 transition-all hover:bg-primary-700 hover:shadow-xl hover:scale-[1.02] active:scale-[0.98] focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-gray-400 disabled:opacity-50 disabled:shadow-none disabled:scale-100",children:["Proceed to Checkout",p.jsx(zj,{className:"h-5 w-5"})]})})]})]})})]})},wh={sugarLevels:[{value:"0%",label:"No Sugar",sugarAmount:0,sugarIngredientId:"brown-sugar-syrup"},{value:"25%",label:"25% Sweet",sugarAmount:5,sugarIngredientId:"brown-sugar-syrup"},{value:"50%",label:"50% Sweet",sugarAmount:10,sugarIngredientId:"brown-sugar-syrup"},{value:"75%",label:"75% Sweet",sugarAmount:15,sugarIngredientId:"brown-sugar-syrup"},{value:"100%",label:"Regular (100%)",sugarAmount:20,sugarIngredientId:"brown-sugar-syrup"}],iceLevels:[{value:"None",label:"No Ice",iceAmount:0,iceIngredientId:"ice-cubes"},{value:"Less",label:"Less Ice",iceAmount:50,iceIngredientId:"ice-cubes"},{value:"Normal",label:"Normal Ice",iceAmount:100,iceIngredientId:"ice-cubes"},{value:"Extra",label:"Extra Ice",iceAmount:150,iceIngredientId:"ice-cubes"}]},Zee=async()=>{try{const t=Xe.collection("settings").doc("customizationOptions");(await t.get()).exists?console.log(" Customization options already exist in Firestore"):(console.log("Seeding customization options to Firestore..."),await t.set(wh),console.log(" Customization options seeded successfully"))}catch(t){throw console.error(" Error seeding customization options:",t),t}},ete=async()=>{try{const t=Xe.collection("settings").doc("customizationOptions"),e=await t.get();return e.exists?e.data():(await Zee(),(await t.get()).data())}catch(t){return console.error("Error fetching customization options:",t),wh}},tte=()=>{const[t,e]=C.useState(wh),[n,i]=C.useState(!0),[r,s]=C.useState(null);return C.useEffect(()=>{(async()=>{try{i(!0);const o=await ete();o&&o.sugarLevels&&o.iceLevels?(e(o),s(null)):e(wh)}catch(o){console.error("Error fetching customization options:",o),s("Failed to load customization options"),e(wh)}finally{i(!1)}})()},[]),{options:t,isLoading:n,error:r}},nte=({product:t,selectedSize:e,isOpen:n,onClose:i,onConfirm:r,onBuyNow:s,initialCustomizations:a,initialQuantity:o=1})=>{const[l,c]=C.useState("100%"),[h,d]=C.useState("Normal"),[f,g]=C.useState("None"),[b,E]=C.useState(1),[x,w]=C.useState(e),{toppings:v,isLoading:_}=CU(),{options:I,isLoading:k}=tte();wr.useEffect(()=>{if(n){if(a){c(a.sugarLevel||"100%"),d(a.iceLevel||"Normal");const q=a.toppings&&a.toppings.length>0?a.toppings[0]:"None";g(q)}else c("100%"),d("Normal"),g("None");E(o),w(e)}},[n,a,o,e]);const V=()=>{const q=["Coffee Based","Non-Coffee Based","Matcha Series","Refreshments"].includes(t.category),ne={toppings:f!=="None"?[f]:[]};return q&&(ne.sugarLevel=l,ne.iceLevel=h),ne},A=()=>{r(V(),b,D/b,x),i()},T=[{id:"none",name:"None",price:0},...v.map(q=>({id:q.id,name:q.name,price:q.price}))],S=T.find(q=>q.name===f),R=(S==null?void 0:S.price)||0,D=(x.price+R)*b,O=_||k,N=p.jsxs("button",{onClick:A,disabled:O,className:"w-full flex items-center justify-between rounded-xl bg-primary-600 px-6 py-3 text-white font-bold shadow-lg hover:bg-primary-700 hover:shadow-xl hover:scale-[1.01] active:scale-[0.99] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[p.jsx("span",{children:"Add to Order"}),p.jsxs("span",{className:"text-lg tabular-nums",children:["",D.toFixed(2)]})]});return p.jsx(fE,{isOpen:n,onClose:i,hideHeader:!0,hideCloseButton:!0,footer:N,className:"sm:max-w-lg",children:p.jsxs("div",{children:[p.jsxs("div",{className:"-mx-6 -mt-6 mb-2",children:[p.jsxs("div",{className:"bg-[#F5F5F0] w-full h-96 flex items-center justify-center relative overflow-hidden",children:[p.jsx("button",{onClick:i,className:"absolute top-4 right-4 z-10 p-2 rounded-full bg-white/50 hover:bg-white/80 backdrop-blur-sm transition-colors text-gray-600 hover:text-gray-900",children:p.jsx(Id,{className:"h-5 w-5"})}),p.jsx("img",{src:t.imageUrl,alt:t.name,className:"h-full w-full object-cover object-center"})]}),p.jsxs("div",{className:"px-6 pt-4",children:[p.jsx("div",{className:"flex items-center justify-between mb-2",children:p.jsx("span",{className:"text-sm font-medium text-coffee-600 tracking-wide uppercase",children:t.category})}),p.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.name}),p.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:t.description})]})]}),O?p.jsx("div",{className:"flex items-center justify-center py-12",children:p.jsx(li,{className:"h-8 w-8 animate-spin text-coffee-600"})}):p.jsxs("div",{className:"space-y-1",children:[p.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[p.jsx("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center gap-2",children:"Size"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:t.sizes.map(q=>p.jsx("button",{onClick:()=>w(q),className:`flex-1 min-w-[80px] rounded-lg py-2 text-sm font-semibold transition-all border ${x.name===q.name?"bg-primary-600 text-white border-primary-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:border-primary-300 hover:bg-primary-50"}`,children:q.name},q.name))})]}),["Coffee Based","Non-Coffee Based","Matcha Series","Refreshments"].includes(t.category)&&p.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[p.jsx("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center gap-2",children:"Sugar Level"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:I.sugarLevels.map(q=>p.jsx("button",{onClick:()=>c(q.value),className:`flex-1 min-w-[60px] rounded-lg py-2 text-sm font-semibold transition-all border ${l===q.value?"bg-primary-600 text-white border-primary-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:border-primary-300 hover:bg-primary-50"}`,children:q.value},q.value))})]}),["Coffee Based","Non-Coffee Based","Matcha Series","Refreshments"].includes(t.category)&&p.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[p.jsx("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center gap-2",children:"Ice Level"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:I.iceLevels.map(q=>p.jsx("button",{onClick:()=>d(q.value),className:`flex-1 min-w-[60px] rounded-lg py-2 text-sm font-semibold transition-all border ${h===q.value?"bg-primary-600 text-white border-primary-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:border-primary-300 hover:bg-primary-50"}`,children:q.value},q.value))})]}),p.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[p.jsxs("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center justify-between",children:[p.jsx("span",{children:"Toppings"}),p.jsx("span",{className:"text-xs font-normal text-gray-500 normal-case",children:"Select one"})]}),p.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(q=>{const ne=f===q.name;return p.jsxs("button",{onClick:()=>g(q.name),className:`
                                                relative px-3 py-2 rounded-lg text-sm font-medium transition-all border flex items-center gap-2
                                                ${ne?"bg-primary-50 border-primary-600 text-primary-700 shadow-sm ring-1 ring-primary-600":"bg-white border-gray-200 text-gray-600 hover:border-primary-300 hover:bg-gray-50"}
                                            `,children:[p.jsx("span",{children:q.name}),q.price>0&&p.jsxs("span",{className:`text-xs font-bold ${ne?"text-primary-600":"text-gray-400"}`,children:["+",q.price]})]},q.id)})})]}),p.jsxs("div",{className:"flex items-center justify-between py-4 -mx-6 px-6",children:[p.jsx("span",{className:"font-bold text-gray-900",children:"Quantity"}),p.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 rounded-lg p-1 border border-gray-200",children:[p.jsx("button",{onClick:()=>E(Math.max(1,b-1)),className:"h-8 w-8 rounded-md bg-white shadow-sm flex items-center justify-center text-gray-600 hover:text-coffee-600 disabled:opacity-50 transition-colors",disabled:b<=1,children:p.jsx(t0,{className:"h-4 w-4"})}),p.jsx("span",{className:"w-8 text-center font-bold text-gray-900 tabular-nums",children:b}),p.jsx("button",{onClick:()=>E(b+1),className:"h-8 w-8 rounded-md bg-primary-600 shadow-sm flex items-center justify-center text-white hover:bg-primary-700 transition-colors",children:p.jsx(Z2,{className:"h-4 w-4"})})]})]})]})]})})},ite=()=>{const{pathname:t}=gi();return C.useEffect(()=>{window.scrollTo(0,0)},[t]),null},IC=({allowedRoles:t,redirectTo:e})=>{const{currentUser:n,loading:i}=da(),r=gi();return i?p.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-gray-50",children:p.jsx(li,{className:"h-12 w-12 animate-spin text-primary-600"})}):n?!t||t.length===0?p.jsx(RS,{}):n.role&&t.includes(n.role)?p.jsx(RS,{}):p.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gradient-to-br from-red-50 to-orange-50 px-4",children:p.jsxs("div",{className:"max-w-md text-center",children:[p.jsx("div",{className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-red-100",children:p.jsx(vz,{className:"h-10 w-10 text-red-600"})}),p.jsx("h1",{className:"mb-3 font-display text-4xl font-bold text-gray-900",children:"Access Denied"}),p.jsx("p",{className:"mb-6 text-lg text-gray-600",children:"You don't have permission to access this page."}),p.jsxs("p",{className:"mb-8 text-sm text-gray-500",children:["Your role: ",p.jsx("span",{className:"font-semibold capitalize",children:n.role||"customer"}),p.jsx("br",{}),"Required role: ",p.jsx("span",{className:"font-semibold capitalize",children:t.join(" or ")})]}),p.jsx("button",{onClick:()=>window.history.back(),className:"rounded-lg bg-primary-600 px-6 py-3 font-semibold text-white transition-colors hover:bg-primary-700",children:"Go Back"})]})}):p.jsx(X3,{to:e||"/auth/login",state:{from:r},replace:!0})},rte=()=>p.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-primary-50",children:p.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[p.jsx(jr,{className:"h-16 w-16 text-primary-600"}),p.jsxs("div",{className:"flex items-center gap-2 text-primary-800",children:[p.jsx(li,{className:"h-6 w-6 animate-spin"}),p.jsx("span",{className:"font-medium",children:"Brewing your page..."})]})]})}),ste=C.lazy(()=>Me(()=>import("./HomePage-DFnQcGKU.js"),__vite__mapDeps([0,1,2,3,4,5]))),ate=C.lazy(()=>Me(()=>import("./LoginPage-B39MFzoB.js"),[])),ote=C.lazy(()=>Me(()=>import("./RegisterPage-i0xr3IZN.js"),[])),lte=C.lazy(()=>Me(()=>import("./ForgotPasswordPage-Bcv9xKSm.js"),__vite__mapDeps([6,7]))),cte=C.lazy(()=>Me(()=>import("./MenuPage-BVLnNw1M.js"),__vite__mapDeps([8,9,10,11,12,13]))),ute=C.lazy(()=>Me(()=>import("./CheckoutPage-BT6fb2i0.js"),__vite__mapDeps([14,1,3,15,16,17,18,19]))),hte=C.lazy(()=>Me(()=>import("./QueuePage-CIKv07Iu.js"),__vite__mapDeps([20,1,21,5,18,2,9,22,17,23,24,10]))),dte=C.lazy(()=>Me(()=>import("./RewardsPage-CK4_5UNp.js"),__vite__mapDeps([25,1,23,26,27,28,29,11,16,10]))),fte=C.lazy(()=>Me(()=>import("./ProfilePage-DAXmu5CQ.js"),__vite__mapDeps([30,1,18,9,29,27,28,31,17,32,7,5,33,19,22,34,35,36]))),mte=C.lazy(()=>Me(()=>import("./AboutPage-Bb8F_WEM.js"),__vite__mapDeps([37,1,18,38,4,2]))),pte=C.lazy(()=>Me(()=>import("./ContactPage-CwKe9QQY.js"),__vite__mapDeps([39,1,7,40,19,34]))),gte=C.lazy(()=>Me(()=>import("./FAQPage-BrxCNL6K.js"),__vite__mapDeps([41,1,12]))),yte=C.lazy(()=>Me(()=>import("./TermsPage-BlWcllpq.js"),__vite__mapDeps([42,43,4,44,23]))),_te=C.lazy(()=>Me(()=>import("./PrivacyPolicyPage-BsIdVt93.js"),__vite__mapDeps([45,5]))),vte=C.lazy(()=>Me(()=>import("./CookiePolicyPage-DPTxH05h.js"),__vite__mapDeps([46,35,38,47]))),wte=C.lazy(()=>Me(()=>import("./AdminLayout-JGFhors0.js"),__vite__mapDeps([48,49,1,50,18,19,26,4,47,35]))),bte=C.lazy(()=>Me(()=>import("./AdminDashboardPage-DFLG0Ekc.js"),__vite__mapDeps([51,52,24,50,2,29,13,18,4,47,9,53,38]))),SC=C.lazy(()=>Me(()=>import("./AdminQueuePage-C41vovSW.js"),__vite__mapDeps([54,21,1,55,2,18,43]))),xC=C.lazy(()=>Me(()=>import("./AdminInventoryPage-X99LAD09.js"),__vite__mapDeps([56,31,1,29,50,10,12,57,18]))),Tte=C.lazy(()=>Me(()=>import("./AdminProductsPage-DgntNvak.js"),__vite__mapDeps([58,1,31,50,9,12,57,18,36]))),Ete=C.lazy(()=>Me(()=>import("./AdminAnalyticsPage-BtF9DuqX.js"),__vite__mapDeps([59,52,24,50,2,29,13,19,9,22]))),Ate=C.lazy(()=>Me(()=>import("./AdminFeedbackPage-BZqvb_DR.js"),__vite__mapDeps([60,33,28,9,19,1,34,61]))),Ite=C.lazy(()=>Me(()=>import("./AdminSettingsPage-D6BAezJz.js"),__vite__mapDeps([62,1,7,40,63,2,31]))),RC=C.lazy(()=>Me(()=>import("./AdminOrdersHistoryPage-KmmLq1rA.js"),__vite__mapDeps([64,2,50,44,43,12,29,32,63,15]))),Ste=C.lazy(()=>Me(()=>import("./AdminUsersPage-t48nBT_j.js"),__vite__mapDeps([65,4,12,61,24,13,29]))),xte=C.lazy(()=>Me(()=>import("./EmployeeLayout-CoKF5pQs.js"),__vite__mapDeps([66,49,1,50,26]))),Rte=C.lazy(()=>Me(()=>import("./POSDashboard-CvZmtiMu.js"),__vite__mapDeps([67,38,24,18,53,50,2]))),Cte=C.lazy(()=>Me(()=>import("./POSPage-B934iFz7.js"),__vite__mapDeps([68,15,44,55,12]))),Pte=()=>p.jsxs("div",{className:"flex min-h-screen flex-col",children:[p.jsx(_Y,{}),p.jsx("main",{className:"flex flex-1 items-center justify-center bg-gradient-to-br from-primary-50 to-coffee-50",children:p.jsxs("div",{className:"p-4 text-center",children:[p.jsx(jr,{className:"mx-auto mb-4 h-16 w-16 text-gray-400 opacity-50"}),p.jsx("h1",{className:"mb-4 font-display text-4xl font-bold text-gray-900",children:"404 - Page Not Found"}),p.jsx("p",{className:"mb-8 text-gray-600",children:"This coffee blend doesn't exist on our menu. Maybe it got lost in the daily grind?"}),p.jsx(ei,{to:"/",className:"font-medium text-primary-600 transition-colors hover:text-primary-700",children:" Back to Home"})]})}),p.jsx(vY,{})]}),Nte=()=>{const{isCartOpen:t,closeCart:e,cartItems:n,updateQuantity:i,updateCartItem:r,removeFromCart:s,toastMessage:a,selectedItemIds:o,toggleItemSelection:l,selectAllItems:c,deselectAllItems:h}=LM(),d=Ec(),[f,g]=C.useState(null),[b,E]=C.useState(!1),x=()=>{e(),d("/checkout")},w=_=>{g(_),E(!0)},v=(_,I,k,V)=>{f&&V&&(r(f.id,f.product,V,_,I),E(!1),g(null))};return p.jsxs(p.Fragment,{children:[p.jsx(ite,{}),p.jsx(Qee,{}),p.jsx(C.Suspense,{fallback:p.jsx(rte,{}),children:p.jsxs(Z3,{children:[p.jsx(ve,{path:"/",element:p.jsx(ste,{})}),p.jsx(ve,{path:"/about",element:p.jsx(mte,{})}),p.jsx(ve,{path:"/menu",element:p.jsx(cte,{})}),p.jsx(ve,{path:"/contact",element:p.jsx(pte,{})}),p.jsx(ve,{path:"/auth/login",element:p.jsx(ate,{})}),p.jsx(ve,{path:"/auth/register",element:p.jsx(ote,{})}),p.jsx(ve,{path:"/auth/forgot-password",element:p.jsx(lte,{})}),p.jsx(ve,{path:"/checkout",element:p.jsx(ute,{})}),p.jsx(ve,{path:"/queue",element:p.jsx(hte,{})}),p.jsx(ve,{path:"/rewards",element:p.jsx(dte,{})}),p.jsx(ve,{path:"/profile",element:p.jsx(fte,{})}),p.jsx(ve,{path:"/faq",element:p.jsx(gte,{})}),p.jsx(ve,{path:"/terms",element:p.jsx(yte,{})}),p.jsx(ve,{path:"/privacy",element:p.jsx(_te,{})}),p.jsx(ve,{path:"/cookies",element:p.jsx(vte,{})}),p.jsx(ve,{element:p.jsx(IC,{}),children:p.jsxs(ve,{path:"/admin",element:p.jsx(wte,{}),children:[p.jsx(ve,{index:!0,element:p.jsx(bte,{})}),p.jsx(ve,{path:"queue",element:p.jsx(SC,{})}),p.jsx(ve,{path:"history",element:p.jsx(RC,{})}),p.jsx(ve,{path:"users",element:p.jsx(Ste,{})}),p.jsx(ve,{path:"inventory",element:p.jsx(xC,{})}),p.jsx(ve,{path:"products",element:p.jsx(Tte,{})}),p.jsx(ve,{path:"analytics",element:p.jsx(Ete,{})}),p.jsx(ve,{path:"feedback",element:p.jsx(Ate,{})}),p.jsx(ve,{path:"settings",element:p.jsx(Ite,{})})]})}),p.jsx(ve,{element:p.jsx(IC,{allowedRoles:["employee","admin"]}),children:p.jsxs(ve,{path:"/employee",element:p.jsx(xte,{}),children:[p.jsx(ve,{index:!0,element:p.jsx(Rte,{})}),p.jsx(ve,{path:"pos",element:p.jsx(Cte,{})}),p.jsx(ve,{path:"queue",element:p.jsx(SC,{})}),p.jsx(ve,{path:"inventory",element:p.jsx(xC,{})}),p.jsx(ve,{path:"history",element:p.jsx(RC,{})})]})}),p.jsx(ve,{path:"*",element:p.jsx(Pte,{})})]})}),p.jsx(Jee,{isOpen:t,onClose:e,cartItems:n,onUpdateQuantity:i,onRemoveItem:s,onCheckout:x,onEditItem:w,selectedItemIds:o,onToggleItemSelection:l,onSelectAll:c,onDeselectAll:h}),f&&p.jsx(nte,{product:f.product,selectedSize:f.selectedSize,isOpen:b,onClose:()=>{E(!1),g(null)},onConfirm:v,initialCustomizations:f.customizations,initialQuantity:f.quantity}),a&&p.jsx("div",{className:"fixed bottom-4 right-4 z-[100] animate-fade-in-up rounded-lg bg-gray-900 px-4 py-3 text-white shadow-lg",children:a})]})},Dte=()=>p.jsx(yQ,{children:p.jsx(SQ,{children:p.jsx(wY,{children:p.jsx(vQ,{children:p.jsx(Yee,{children:p.jsx(wQ,{children:p.jsx(Ej,{children:p.jsx(Nte,{})})})})})})})}),PU=document.getElementById("root");if(!PU)throw new Error("Could not find root element to mount to");const kte=i3.createRoot(PU);kte.render(p.jsx(wr.StrictMode,{children:p.jsx(Dte,{})}));export{Zj as $,zj as A,Xee as B,bQ as C,IY as D,qj as E,vY as F,tz as G,_Y as H,gi as I,qf as J,Z2 as K,ei as L,dz as M,e0 as N,t0 as O,nte as P,fE as Q,jr as R,Nf as S,yz as T,n0 as U,Sz as V,Rz as W,Id as X,Y2 as Y,X2 as Z,uz as _,zV as a,rz as a0,Kj as a1,J2 as a2,RS as a3,wi as a4,DS as a5,Az as a6,Qj as a7,wr as a8,Zee as a9,tne as aa,CC as ab,Ote as ac,nK as ad,rM as ae,wh as af,hK as b,Ae as c,Xe as d,kp as e,Ec as f,mK as g,Xu as h,Q2 as i,p as j,Mh as k,li as l,_Q as m,LM as n,NS as o,Wee as p,os as q,C as r,ine as s,CU as t,da as u,W2 as v,tK as w,vb as x,Gt as y,$C as z};
