(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function K2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var W2={exports:{}},cg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _V=Symbol.for("react.transitional.element"),bV=Symbol.for("react.fragment");function Y2(t,e,n){var s=null;if(n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:_V,type:t,key:s,ref:e!==void 0?e:null,props:n}}cg.Fragment=bV;cg.jsx=Y2;cg.jsxs=Y2;W2.exports=cg;var l=W2.exports,Q2={exports:{}},ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_=Symbol.for("react.transitional.element"),wV=Symbol.for("react.portal"),TV=Symbol.for("react.fragment"),EV=Symbol.for("react.strict_mode"),SV=Symbol.for("react.profiler"),AV=Symbol.for("react.consumer"),NV=Symbol.for("react.context"),IV=Symbol.for("react.forward_ref"),RV=Symbol.for("react.suspense"),CV=Symbol.for("react.memo"),X2=Symbol.for("react.lazy"),jV=Symbol.for("react.activity"),gE=Symbol.iterator;function PV(t){return t===null||typeof t!="object"?null:(t=gE&&t[gE]||t["@@iterator"],typeof t=="function"?t:null)}var J2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z2=Object.assign,eR={};function Nc(t,e,n){this.props=t,this.context=e,this.refs=eR,this.updater=n||J2}Nc.prototype.isReactComponent={};Nc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Nc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tR(){}tR.prototype=Nc.prototype;function R_(t,e,n){this.props=t,this.context=e,this.refs=eR,this.updater=n||J2}var C_=R_.prototype=new tR;C_.constructor=R_;Z2(C_,Nc.prototype);C_.isPureReactComponent=!0;var yE=Array.isArray;function wv(){}var Ke={H:null,A:null,T:null,S:null},nR=Object.prototype.hasOwnProperty;function j_(t,e,n){var s=n.ref;return{$$typeof:I_,type:t,key:e,ref:s!==void 0?s:null,props:n}}function kV(t,e){return j_(t.type,e,t.props)}function P_(t){return typeof t=="object"&&t!==null&&t.$$typeof===I_}function DV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vE=/\/+/g;function Zy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DV(""+t.key):e.toString(36)}function MV(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(wv,wv):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function nl(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case I_:case wV:a=!0;break;case X2:return a=t._init,nl(a(t._payload),e,n,s,r)}}if(a)return r=r(t),a=s===""?"."+Zy(t,0):s,yE(r)?(n="",a!=null&&(n=a.replace(vE,"$&/")+"/"),nl(r,e,n,"",function(u){return u})):r!=null&&(P_(r)&&(r=kV(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(vE,"$&/")+"/")+a)),e.push(r)),1;a=0;var o=s===""?".":s+":";if(yE(t))for(var c=0;c<t.length;c++)s=t[c],i=o+Zy(s,c),a+=nl(s,e,n,i,r);else if(c=PV(t),typeof c=="function")for(t=c.call(t),c=0;!(s=t.next()).done;)s=s.value,i=o+Zy(s,c++),a+=nl(s,e,n,i,r);else if(i==="object"){if(typeof t.then=="function")return nl(MV(t),e,n,s,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function Rf(t,e,n){if(t==null)return t;var s=[],r=0;return nl(t,s,"","",function(i){return e.call(n,i,r++)}),s}function OV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xE=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},VV={map:Rf,forEach:function(t,e,n){Rf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rf(t,function(){e++}),e},toArray:function(t){return Rf(t,function(e){return e})||[]},only:function(t){if(!P_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Activity=jV;ie.Children=VV;ie.Component=Nc;ie.Fragment=TV;ie.Profiler=SV;ie.PureComponent=R_;ie.StrictMode=EV;ie.Suspense=RV;ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ke;ie.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Ke.H.useMemoCache(t)}};ie.cache=function(t){return function(){return t.apply(null,arguments)}};ie.cacheSignal=function(){return null};ie.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var s=Z2({},t.props),r=t.key;if(e!=null)for(i in e.key!==void 0&&(r=""+e.key),e)!nR.call(e,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&e.ref===void 0||(s[i]=e[i]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var a=Array(i),o=0;o<i;o++)a[o]=arguments[o+2];s.children=a}return j_(t.type,r,s)};ie.createContext=function(t){return t={$$typeof:NV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:AV,_context:t},t};ie.createElement=function(t,e,n){var s,r={},i=null;if(e!=null)for(s in e.key!==void 0&&(i=""+e.key),e)nR.call(e,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),c=0;c<a;c++)o[c]=arguments[c+2];r.children=o}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return j_(t,i,r)};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:IV,render:t}};ie.isValidElement=P_;ie.lazy=function(t){return{$$typeof:X2,_payload:{_status:-1,_result:t},_init:OV}};ie.memo=function(t,e){return{$$typeof:CV,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=Ke.T,n={};Ke.T=n;try{var s=t(),r=Ke.S;r!==null&&r(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(wv,xE)}catch(i){xE(i)}finally{e!==null&&n.types!==null&&(e.types=n.types),Ke.T=e}};ie.unstable_useCacheRefresh=function(){return Ke.H.useCacheRefresh()};ie.use=function(t){return Ke.H.use(t)};ie.useActionState=function(t,e,n){return Ke.H.useActionState(t,e,n)};ie.useCallback=function(t,e){return Ke.H.useCallback(t,e)};ie.useContext=function(t){return Ke.H.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t,e){return Ke.H.useDeferredValue(t,e)};ie.useEffect=function(t,e){return Ke.H.useEffect(t,e)};ie.useEffectEvent=function(t){return Ke.H.useEffectEvent(t)};ie.useId=function(){return Ke.H.useId()};ie.useImperativeHandle=function(t,e,n){return Ke.H.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return Ke.H.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return Ke.H.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return Ke.H.useMemo(t,e)};ie.useOptimistic=function(t,e){return Ke.H.useOptimistic(t,e)};ie.useReducer=function(t,e,n){return Ke.H.useReducer(t,e,n)};ie.useRef=function(t){return Ke.H.useRef(t)};ie.useState=function(t){return Ke.H.useState(t)};ie.useSyncExternalStore=function(t,e,n){return Ke.H.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return Ke.H.useTransition()};ie.version="19.2.0";Q2.exports=ie;var S=Q2.exports;const LV=K2(S);var sR={exports:{}},ug={},rR={exports:{}},iR={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,ee){var te=H.length;H.push(ee);e:for(;0<te;){var Te=te-1>>>1,Xe=H[Te];if(0<r(Xe,ee))H[Te]=ee,H[te]=Xe,te=Te;else break e}}function n(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var ee=H[0],te=H.pop();if(te!==ee){H[0]=te;e:for(var Te=0,Xe=H.length,ba=Xe>>>1;Te<ba;){var wa=2*(Te+1)-1,zo=H[wa],ts=wa+1,ti=H[ts];if(0>r(zo,te))ts<Xe&&0>r(ti,zo)?(H[Te]=ti,H[ts]=te,Te=ts):(H[Te]=zo,H[wa]=te,Te=wa);else if(ts<Xe&&0>r(ti,te))H[Te]=ti,H[ts]=te,Te=ts;else break e}}return ee}function r(H,ee){var te=H.sortIndex-ee.sortIndex;return te!==0?te:H.id-ee.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],h=1,f=null,m=3,p=!1,_=!1,w=!1,T=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;function R(H){for(var ee=n(u);ee!==null;){if(ee.callback===null)s(u);else if(ee.startTime<=H)s(u),ee.sortIndex=ee.expirationTime,e(c,ee);else break;ee=n(u)}}function D(H){if(w=!1,R(H),!_)if(n(c)!==null)_=!0,M||(M=!0,k());else{var ee=n(u);ee!==null&&ce(D,ee.startTime-H)}}var M=!1,A=-1,E=5,N=-1;function I(){return T?!0:!(t.unstable_now()-N<E)}function P(){if(T=!1,M){var H=t.unstable_now();N=H;var ee=!0;try{e:{_=!1,w&&(w=!1,v(A),A=-1),p=!0;var te=m;try{t:{for(R(H),f=n(c);f!==null&&!(f.expirationTime>H&&I());){var Te=f.callback;if(typeof Te=="function"){f.callback=null,m=f.priorityLevel;var Xe=Te(f.expirationTime<=H);if(H=t.unstable_now(),typeof Xe=="function"){f.callback=Xe,R(H),ee=!0;break t}f===n(c)&&s(c),R(H)}else s(c);f=n(c)}if(f!==null)ee=!0;else{var ba=n(u);ba!==null&&ce(D,ba.startTime-H),ee=!1}}break e}finally{f=null,m=te,p=!1}ee=void 0}}finally{ee?k():M=!1}}}var k;if(typeof b=="function")k=function(){b(P)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,W=j.port2;j.port1.onmessage=P,k=function(){W.postMessage(null)}}else k=function(){x(P,0)};function ce(H,ee){A=x(function(){H(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(H){switch(m){case 1:case 2:case 3:var ee=3;break;default:ee=m}var te=m;m=ee;try{return H()}finally{m=te}},t.unstable_requestPaint=function(){T=!0},t.unstable_runWithPriority=function(H,ee){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var te=m;m=H;try{return ee()}finally{m=te}},t.unstable_scheduleCallback=function(H,ee,te){var Te=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?Te+te:Te):te=Te,H){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=te+Xe,H={id:h++,callback:ee,priorityLevel:H,startTime:te,expirationTime:Xe,sortIndex:-1},te>Te?(H.sortIndex=te,e(u,H),n(c)===null&&H===n(u)&&(w?(v(A),A=-1):w=!0,ce(D,te-Te))):(H.sortIndex=Xe,e(c,H),_||p||(_=!0,M||(M=!0,k()))),H},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(H){var ee=m;return function(){var te=m;m=ee;try{return H.apply(this,arguments)}finally{m=te}}}})(iR);rR.exports=iR;var UV=rR.exports,aR={exports:{}},bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zV=S;function oR(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function li(){}var vn={d:{f:li,r:function(){throw Error(oR(522))},D:li,C:li,L:li,m:li,X:li,S:li,M:li},p:0,findDOMNode:null},FV=Symbol.for("react.portal");function BV(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:FV,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}var ed=zV.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function dg(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=vn;bn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(oR(299));return BV(t,e,null,n)};bn.flushSync=function(t){var e=ed.T,n=vn.p;try{if(ed.T=null,vn.p=2,t)return t()}finally{ed.T=e,vn.p=n,vn.d.f()}};bn.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,vn.d.C(t,e))};bn.prefetchDNS=function(t){typeof t=="string"&&vn.d.D(t)};bn.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,s=dg(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,i=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?vn.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:s,integrity:r,fetchPriority:i}):n==="script"&&vn.d.X(t,{crossOrigin:s,integrity:r,fetchPriority:i,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};bn.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=dg(e.as,e.crossOrigin);vn.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&vn.d.M(t)};bn.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,s=dg(n,e.crossOrigin);vn.d.L(t,n,{crossOrigin:s,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};bn.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=dg(e.as,e.crossOrigin);vn.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else vn.d.m(t)};bn.requestFormReset=function(t){vn.d.r(t)};bn.unstable_batchedUpdates=function(t,e){return t(e)};bn.useFormState=function(t,e,n){return ed.H.useFormState(t,e,n)};bn.useFormStatus=function(){return ed.H.useHostTransitionStatus()};bn.version="19.2.0";function lR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lR)}catch(t){console.error(t)}}lR(),aR.exports=bn;var qV=aR.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dt=UV,cR=S,HV=qV;function z(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function uR(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ah(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function dR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hR(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function _E(t){if(Ah(t)!==t)throw Error(z(188))}function GV(t){var e=t.alternate;if(!e){if(e=Ah(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return _E(r),t;if(i===s)return _E(r),e;i=i.sibling}throw Error(z(188))}if(n.return!==s.return)n=r,s=i;else{for(var a=!1,o=r.child;o;){if(o===n){a=!0,n=r,s=i;break}if(o===s){a=!0,s=r,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,s=r;break}if(o===s){a=!0,s=i,n=r;break}o=o.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==s)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function fR(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=fR(t),e!==null)return e;t=t.sibling}return null}var Ye=Object.assign,$V=Symbol.for("react.element"),Cf=Symbol.for("react.transitional.element"),Lu=Symbol.for("react.portal"),ul=Symbol.for("react.fragment"),mR=Symbol.for("react.strict_mode"),Tv=Symbol.for("react.profiler"),pR=Symbol.for("react.consumer"),yr=Symbol.for("react.context"),k_=Symbol.for("react.forward_ref"),Ev=Symbol.for("react.suspense"),Sv=Symbol.for("react.suspense_list"),D_=Symbol.for("react.memo"),pi=Symbol.for("react.lazy"),Av=Symbol.for("react.activity"),KV=Symbol.for("react.memo_cache_sentinel"),bE=Symbol.iterator;function gu(t){return t===null||typeof t!="object"?null:(t=bE&&t[bE]||t["@@iterator"],typeof t=="function"?t:null)}var WV=Symbol.for("react.client.reference");function Nv(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===WV?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ul:return"Fragment";case Tv:return"Profiler";case mR:return"StrictMode";case Ev:return"Suspense";case Sv:return"SuspenseList";case Av:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Lu:return"Portal";case yr:return t.displayName||"Context";case pR:return(t._context.displayName||"Context")+".Consumer";case k_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D_:return e=t.displayName||null,e!==null?e:Nv(t.type)||"Memo";case pi:e=t._payload,t=t._init;try{return Nv(t(e))}catch{}}return null}var Uu=Array.isArray,se=cR.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we=HV.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ja={pending:!1,data:null,method:null,action:null},Iv=[],dl=-1;function ar(t){return{current:t}}function Ft(t){0>dl||(t.current=Iv[dl],Iv[dl]=null,dl--)}function Ue(t,e){dl++,Iv[dl]=t.current,t.current=e}var Ys=ar(null),Dd=ar(null),Ci=ar(null),$m=ar(null);function Km(t,e){switch(Ue(Ci,e),Ue(Dd,t),Ue(Ys,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?NS(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=NS(e),t=Mj(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Ft(Ys),Ue(Ys,t)}function Bl(){Ft(Ys),Ft(Dd),Ft(Ci)}function Rv(t){t.memoizedState!==null&&Ue($m,t);var e=Ys.current,n=Mj(e,t.type);e!==n&&(Ue(Dd,t),Ue(Ys,n))}function Wm(t){Dd.current===t&&(Ft(Ys),Ft(Dd)),$m.current===t&&(Ft($m),Gd._currentValue=Ja)}var e0,wE;function Pa(t){if(e0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);e0=e&&e[1]||"",wE=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+e0+t+wE}var t0=!1;function n0(t,e){if(!t||t0)return"";t0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(p){var m=p}Reflect.construct(t,[],f)}else{try{f.call()}catch(p){m=p}t.call(f.prototype)}}else{try{throw Error()}catch(p){m=p}(f=t())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(p){if(p&&m&&typeof p.stack=="string")return[p.stack,m.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=s.DetermineComponentFrameRoot(),a=i[0],o=i[1];if(a&&o){var c=a.split(`
`),u=o.split(`
`);for(r=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;if(s===c.length||r===u.length)for(s=c.length-1,r=u.length-1;1<=s&&0<=r&&c[s]!==u[r];)r--;for(;1<=s&&0<=r;s--,r--)if(c[s]!==u[r]){if(s!==1||r!==1)do if(s--,r--,0>r||c[s]!==u[r]){var h=`
`+c[s].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=s&&0<=r);break}}}finally{t0=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Pa(n):""}function YV(t,e){switch(t.tag){case 26:case 27:case 5:return Pa(t.type);case 16:return Pa("Lazy");case 13:return t.child!==e&&e!==null?Pa("Suspense Fallback"):Pa("Suspense");case 19:return Pa("SuspenseList");case 0:case 15:return n0(t.type,!1);case 11:return n0(t.type.render,!1);case 1:return n0(t.type,!0);case 31:return Pa("Activity");default:return""}}function TE(t){try{var e="",n=null;do e+=YV(t,n),n=t,t=t.return;while(t);return e}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Cv=Object.prototype.hasOwnProperty,M_=Dt.unstable_scheduleCallback,s0=Dt.unstable_cancelCallback,QV=Dt.unstable_shouldYield,XV=Dt.unstable_requestPaint,Bn=Dt.unstable_now,JV=Dt.unstable_getCurrentPriorityLevel,gR=Dt.unstable_ImmediatePriority,yR=Dt.unstable_UserBlockingPriority,Ym=Dt.unstable_NormalPriority,ZV=Dt.unstable_LowPriority,vR=Dt.unstable_IdlePriority,e5=Dt.log,t5=Dt.unstable_setDisableYieldValue,Nh=null,qn=null;function wi(t){if(typeof e5=="function"&&t5(t),qn&&typeof qn.setStrictMode=="function")try{qn.setStrictMode(Nh,t)}catch{}}var Hn=Math.clz32?Math.clz32:r5,n5=Math.log,s5=Math.LN2;function r5(t){return t>>>=0,t===0?32:31-(n5(t)/s5|0)|0}var jf=256,Pf=262144,kf=4194304;function ka(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function hg(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=s&134217727;return o!==0?(s=o&~i,s!==0?r=ka(s):(a&=o,a!==0?r=ka(a):n||(n=o&~t,n!==0&&(r=ka(n))))):(o=s&~i,o!==0?r=ka(o):a!==0?r=ka(a):n||(n=s&~t,n!==0&&(r=ka(n)))),r===0?0:e!==0&&e!==r&&!(e&i)&&(i=r&-r,n=e&-e,i>=n||i===32&&(n&4194048)!==0)?e:r}function Ih(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function i5(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xR(){var t=kf;return kf<<=1,!(kf&62914560)&&(kf=4194304),t}function r0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Rh(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function a5(t,e,n,s,r,i){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,c=t.expirationTimes,u=t.hiddenUpdates;for(n=a&~n;0<n;){var h=31-Hn(n),f=1<<h;o[h]=0,c[h]=-1;var m=u[h];if(m!==null)for(u[h]=null,h=0;h<m.length;h++){var p=m[h];p!==null&&(p.lane&=-536870913)}n&=~f}s!==0&&_R(t,s,0),i!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=i&~(a&~e))}function _R(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-Hn(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&261930}function bR(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Hn(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}function wR(t,e){var n=e&-e;return n=n&42?1:O_(n),n&(t.suspendedLanes|e)?0:n}function O_(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function V_(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function TR(){var t=we.p;return t!==0?t:(t=window.event,t===void 0?32:$j(t.type))}function EE(t,e){var n=we.p;try{return we.p=t,e()}finally{we.p=n}}var ca=Math.random().toString(36).slice(2),$t="__reactFiber$"+ca,jn="__reactProps$"+ca,Ic="__reactContainer$"+ca,jv="__reactEvents$"+ca,o5="__reactListeners$"+ca,l5="__reactHandles$"+ca,SE="__reactResources$"+ca,Ch="__reactMarker$"+ca;function L_(t){delete t[$t],delete t[jn],delete t[jv],delete t[o5],delete t[l5]}function hl(t){var e=t[$t];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ic]||n[$t]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=PS(t);t!==null;){if(n=t[$t])return n;t=PS(t)}return e}t=n,n=t.parentNode}return null}function Rc(t){if(t=t[$t]||t[Ic]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function zu(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(z(33))}function Il(t){var e=t[SE];return e||(e=t[SE]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function zt(t){t[Ch]=!0}var ER=new Set,SR={};function No(t,e){ql(t,e),ql(t+"Capture",e)}function ql(t,e){for(SR[t]=e,t=0;t<e.length;t++)ER.add(e[t])}var c5=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),AE={},NE={};function u5(t){return Cv.call(NE,t)?!0:Cv.call(AE,t)?!1:c5.test(t)?NE[t]=!0:(AE[t]=!0,!1)}function um(t,e,n){if(u5(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Df(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function lr(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}function as(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function AR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function d5(t,e,n){var s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,i=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pv(t){if(!t._valueTracker){var e=AR(t)?"checked":"value";t._valueTracker=d5(t,e,""+t[e])}}function NR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=AR(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Qm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var h5=/[\n"\\]/g;function cs(t){return t.replace(h5,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function kv(t,e,n,s,r,i,a,o){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+as(e)):t.value!==""+as(e)&&(t.value=""+as(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?Dv(t,a,as(e)):n!=null?Dv(t,a,as(n)):s!=null&&t.removeAttribute("value"),r==null&&i!=null&&(t.defaultChecked=!!i),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+as(o):t.removeAttribute("name")}function IR(t,e,n,s,r,i,a,o){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(t.type=i),e!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||e!=null)){Pv(t);return}n=n!=null?""+as(n):"",e=e!=null?""+as(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}s=s??r,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=o?t.checked:!!s,t.defaultChecked=!!s,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),Pv(t)}function Dv(t,e,n){e==="number"&&Qm(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Rl(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+as(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function RR(t,e,n){if(e!=null&&(e=""+as(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+as(n):""}function CR(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(z(92));if(Uu(s)){if(1<s.length)throw Error(z(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=as(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s),Pv(t)}function Hl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var f5=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function IE(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||f5.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function jR(t,e,n){if(e!=null&&typeof e!="object")throw Error(z(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var r in e)s=e[r],e.hasOwnProperty(r)&&n[r]!==s&&IE(t,r,s)}else for(var i in e)e.hasOwnProperty(i)&&IE(t,i,e[i])}function U_(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var m5=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),p5=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dm(t){return p5.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function vr(){}var Mv=null;function z_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fl=null,Cl=null;function RE(t){var e=Rc(t);if(e&&(t=e.stateNode)){var n=t[jn]||null;e:switch(t=e.stateNode,e.type){case"input":if(kv(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+cs(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=s[jn]||null;if(!r)throw Error(z(90));kv(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&NR(s)}break e;case"textarea":RR(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Rl(t,!!n.multiple,e,!1)}}}var i0=!1;function PR(t,e,n){if(i0)return t(e,n);i0=!0;try{var s=t(e);return s}finally{if(i0=!1,(fl!==null||Cl!==null)&&(Eg(),fl&&(e=fl,t=Cl,Cl=fl=null,RE(e),t)))for(e=0;e<t.length;e++)RE(t[e])}}function Md(t,e){var n=t.stateNode;if(n===null)return null;var s=n[jn]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ov=!1;if(Cr)try{var yu={};Object.defineProperty(yu,"passive",{get:function(){Ov=!0}}),window.addEventListener("test",yu,yu),window.removeEventListener("test",yu,yu)}catch{Ov=!1}var Ti=null,F_=null,hm=null;function kR(){if(hm)return hm;var t,e=F_,n=e.length,s,r="value"in Ti?Ti.value:Ti.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(s=1;s<=a&&e[n-s]===r[i-s];s++);return hm=r.slice(t,1<s?1-s:void 0)}function fm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mf(){return!0}function CE(){return!1}function Pn(t){function e(n,s,r,i,a){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Mf:CE,this.isPropagationStopped=CE,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mf)},persist:function(){},isPersistent:Mf}),e}var Io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fg=Pn(Io),jh=Ye({},Io,{view:0,detail:0}),g5=Pn(jh),a0,o0,vu,mg=Ye({},jh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:B_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vu&&(vu&&t.type==="mousemove"?(a0=t.screenX-vu.screenX,o0=t.screenY-vu.screenY):o0=a0=0,vu=t),a0)},movementY:function(t){return"movementY"in t?t.movementY:o0}}),jE=Pn(mg),y5=Ye({},mg,{dataTransfer:0}),v5=Pn(y5),x5=Ye({},jh,{relatedTarget:0}),l0=Pn(x5),_5=Ye({},Io,{animationName:0,elapsedTime:0,pseudoElement:0}),b5=Pn(_5),w5=Ye({},Io,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),T5=Pn(w5),E5=Ye({},Io,{data:0}),PE=Pn(E5),S5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function I5(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=N5[t])?!!e[t]:!1}function B_(){return I5}var R5=Ye({},jh,{key:function(t){if(t.key){var e=S5[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?A5[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:B_,charCode:function(t){return t.type==="keypress"?fm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),C5=Pn(R5),j5=Ye({},mg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kE=Pn(j5),P5=Ye({},jh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:B_}),k5=Pn(P5),D5=Ye({},Io,{propertyName:0,elapsedTime:0,pseudoElement:0}),M5=Pn(D5),O5=Ye({},mg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),V5=Pn(O5),L5=Ye({},Io,{newState:0,oldState:0}),U5=Pn(L5),z5=[9,13,27,32],q_=Cr&&"CompositionEvent"in window,td=null;Cr&&"documentMode"in document&&(td=document.documentMode);var F5=Cr&&"TextEvent"in window&&!td,DR=Cr&&(!q_||td&&8<td&&11>=td),DE=" ",ME=!1;function MR(t,e){switch(t){case"keyup":return z5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ml=!1;function B5(t,e){switch(t){case"compositionend":return OR(e);case"keypress":return e.which!==32?null:(ME=!0,DE);case"textInput":return t=e.data,t===DE&&ME?null:t;default:return null}}function q5(t,e){if(ml)return t==="compositionend"||!q_&&MR(t,e)?(t=kR(),hm=F_=Ti=null,ml=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DR&&e.locale!=="ko"?null:e.data;default:return null}}var H5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!H5[t.type]:e==="textarea"}function VR(t,e,n,s){fl?Cl?Cl.push(s):Cl=[s]:fl=s,e=mp(e,"onChange"),0<e.length&&(n=new fg("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var nd=null,Od=null;function G5(t){Pj(t,0)}function pg(t){var e=zu(t);if(NR(e))return t}function VE(t,e){if(t==="change")return e}var LR=!1;if(Cr){var c0;if(Cr){var u0="oninput"in document;if(!u0){var LE=document.createElement("div");LE.setAttribute("oninput","return;"),u0=typeof LE.oninput=="function"}c0=u0}else c0=!1;LR=c0&&(!document.documentMode||9<document.documentMode)}function UE(){nd&&(nd.detachEvent("onpropertychange",UR),Od=nd=null)}function UR(t){if(t.propertyName==="value"&&pg(Od)){var e=[];VR(e,Od,t,z_(t)),PR(G5,e)}}function $5(t,e,n){t==="focusin"?(UE(),nd=e,Od=n,nd.attachEvent("onpropertychange",UR)):t==="focusout"&&UE()}function K5(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pg(Od)}function W5(t,e){if(t==="click")return pg(e)}function Y5(t,e){if(t==="input"||t==="change")return pg(e)}function Q5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yn=typeof Object.is=="function"?Object.is:Q5;function Vd(t,e){if(Yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Cv.call(e,r)||!Yn(t[r],e[r]))return!1}return!0}function zE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function FE(t,e){var n=zE(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zE(n)}}function zR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function FR(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Qm(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qm(t.document)}return e}function H_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var X5=Cr&&"documentMode"in document&&11>=document.documentMode,pl=null,Vv=null,sd=null,Lv=!1;function BE(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lv||pl==null||pl!==Qm(s)||(s=pl,"selectionStart"in s&&H_(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),sd&&Vd(sd,s)||(sd=s,s=mp(Vv,"onSelect"),0<s.length&&(e=new fg("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=pl)))}function Ia(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gl={animationend:Ia("Animation","AnimationEnd"),animationiteration:Ia("Animation","AnimationIteration"),animationstart:Ia("Animation","AnimationStart"),transitionrun:Ia("Transition","TransitionRun"),transitionstart:Ia("Transition","TransitionStart"),transitioncancel:Ia("Transition","TransitionCancel"),transitionend:Ia("Transition","TransitionEnd")},d0={},BR={};Cr&&(BR=document.createElement("div").style,"AnimationEvent"in window||(delete gl.animationend.animation,delete gl.animationiteration.animation,delete gl.animationstart.animation),"TransitionEvent"in window||delete gl.transitionend.transition);function Ro(t){if(d0[t])return d0[t];if(!gl[t])return t;var e=gl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in BR)return d0[t]=e[n];return t}var qR=Ro("animationend"),HR=Ro("animationiteration"),GR=Ro("animationstart"),J5=Ro("transitionrun"),Z5=Ro("transitionstart"),e3=Ro("transitioncancel"),$R=Ro("transitionend"),KR=new Map,Uv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uv.push("scrollEnd");function Rs(t,e){KR.set(t,e),No(e,[t])}var Xm=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},is=[],yl=0,G_=0;function gg(){for(var t=yl,e=G_=yl=0;e<t;){var n=is[e];is[e++]=null;var s=is[e];is[e++]=null;var r=is[e];is[e++]=null;var i=is[e];if(is[e++]=null,s!==null&&r!==null){var a=s.pending;a===null?r.next=r:(r.next=a.next,a.next=r),s.pending=r}i!==0&&WR(n,r,i)}}function yg(t,e,n,s){is[yl++]=t,is[yl++]=e,is[yl++]=n,is[yl++]=s,G_|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function $_(t,e,n,s){return yg(t,e,n,s),Jm(t)}function Co(t,e){return yg(t,null,null,e),Jm(t)}function WR(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var r=!1,i=t.return;i!==null;)i.childLanes|=n,s=i.alternate,s!==null&&(s.childLanes|=n),i.tag===22&&(t=i.stateNode,t===null||t._visibility&1||(r=!0)),t=i,i=i.return;return t.tag===3?(i=t.stateNode,r&&e!==null&&(r=31-Hn(n),t=i.hiddenUpdates,s=t[r],s===null?t[r]=[e]:s.push(e),e.lane=n|536870912),i):null}function Jm(t){if(50<hd)throw hd=0,ax=null,Error(z(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var vl={};function t3(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(t,e,n,s){return new t3(t,e,n,s)}function K_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wr(t,e){var n=t.alternate;return n===null?(n=Un(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function YR(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function mm(t,e,n,s,r,i){var a=0;if(s=t,typeof t=="function")K_(t)&&(a=1);else if(typeof t=="string")a=aL(t,n,Ys.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Av:return t=Un(31,n,e,r),t.elementType=Av,t.lanes=i,t;case ul:return Za(n.children,r,i,e);case mR:a=8,r|=24;break;case Tv:return t=Un(12,n,e,r|2),t.elementType=Tv,t.lanes=i,t;case Ev:return t=Un(13,n,e,r),t.elementType=Ev,t.lanes=i,t;case Sv:return t=Un(19,n,e,r),t.elementType=Sv,t.lanes=i,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yr:a=10;break e;case pR:a=9;break e;case k_:a=11;break e;case D_:a=14;break e;case pi:a=16,s=null;break e}a=29,n=Error(z(130,t===null?"null":typeof t,"")),s=null}return e=Un(a,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function Za(t,e,n,s){return t=Un(7,t,s,e),t.lanes=n,t}function h0(t,e,n){return t=Un(6,t,null,e),t.lanes=n,t}function QR(t){var e=Un(18,null,null,0);return e.stateNode=t,e}function f0(t,e,n){return e=Un(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var qE=new WeakMap;function us(t,e){if(typeof t=="object"&&t!==null){var n=qE.get(t);return n!==void 0?n:(e={value:t,source:e,stack:TE(e)},qE.set(t,e),e)}return{value:t,source:e,stack:TE(e)}}var xl=[],_l=0,Zm=null,Ld=0,os=[],ls=0,Hi=null,qs=1,Hs="";function mr(t,e){xl[_l++]=Ld,xl[_l++]=Zm,Zm=t,Ld=e}function XR(t,e,n){os[ls++]=qs,os[ls++]=Hs,os[ls++]=Hi,Hi=t;var s=qs;t=Hs;var r=32-Hn(s)-1;s&=~(1<<r),n+=1;var i=32-Hn(e)+r;if(30<i){var a=r-r%5;i=(s&(1<<a)-1).toString(32),s>>=a,r-=a,qs=1<<32-Hn(e)+r|n<<r|s,Hs=i+t}else qs=1<<i|n<<r|s,Hs=t}function W_(t){t.return!==null&&(mr(t,1),XR(t,1,0))}function Y_(t){for(;t===Zm;)Zm=xl[--_l],xl[_l]=null,Ld=xl[--_l],xl[_l]=null;for(;t===Hi;)Hi=os[--ls],os[ls]=null,Hs=os[--ls],os[ls]=null,qs=os[--ls],os[ls]=null}function JR(t,e){os[ls++]=qs,os[ls++]=Hs,os[ls++]=Hi,qs=e.id,Hs=e.overflow,Hi=t}var Kt=null,He=null,ge=!1,ji=null,ds=!1,zv=Error(z(519));function Gi(t){var e=Error(z(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ud(us(e,t)),zv}function HE(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[$t]=t,e[jn]=s,n){case"dialog":ue("cancel",e),ue("close",e);break;case"iframe":case"object":case"embed":ue("load",e);break;case"video":case"audio":for(n=0;n<qd.length;n++)ue(qd[n],e);break;case"source":ue("error",e);break;case"img":case"image":case"link":ue("error",e),ue("load",e);break;case"details":ue("toggle",e);break;case"input":ue("invalid",e),IR(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":ue("invalid",e);break;case"textarea":ue("invalid",e),CR(e,s.value,s.defaultValue,s.children)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||Dj(e.textContent,n)?(s.popover!=null&&(ue("beforetoggle",e),ue("toggle",e)),s.onScroll!=null&&ue("scroll",e),s.onScrollEnd!=null&&ue("scrollend",e),s.onClick!=null&&(e.onclick=vr),e=!0):e=!1,e||Gi(t,!0)}function GE(t){for(Kt=t.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:ds=!1;return;case 27:case 3:ds=!0;return;default:Kt=Kt.return}}function Ho(t){if(t!==Kt)return!1;if(!ge)return GE(t),ge=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||dx(t.type,t.memoizedProps)),n=!n),n&&He&&Gi(t),GE(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));He=jS(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));He=jS(t)}else e===27?(e=He,ua(t.type)?(t=px,px=null,He=t):He=e):He=Kt?ps(t.stateNode.nextSibling):null;return!0}function lo(){He=Kt=null,ge=!1}function m0(){var t=ji;return t!==null&&(Sn===null?Sn=t:Sn.push.apply(Sn,t),ji=null),t}function Ud(t){ji===null?ji=[t]:ji.push(t)}var Fv=ar(null),jo=null,xr=null;function yi(t,e,n){Ue(Fv,e._currentValue),e._currentValue=n}function Tr(t){t._currentValue=Fv.current,Ft(Fv)}function Bv(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function qv(t,e,n,s){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var i=r.dependencies;if(i!==null){var a=r.child;i=i.firstContext;e:for(;i!==null;){var o=i;i=r;for(var c=0;c<e.length;c++)if(o.context===e[c]){i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Bv(i.return,n,t),s||(a=null);break e}i=o.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(z(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),Bv(a,n,t),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function Cc(t,e,n,s){t=null;for(var r=e,i=!1;r!==null;){if(!i){if(r.flags&524288)i=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(z(387));if(a=a.memoizedProps,a!==null){var o=r.type;Yn(r.pendingProps.value,a.value)||(t!==null?t.push(o):t=[o])}}else if(r===$m.current){if(a=r.alternate,a===null)throw Error(z(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(Gd):t=[Gd])}r=r.return}t!==null&&qv(e,t,n,s),e.flags|=262144}function ep(t){for(t=t.firstContext;t!==null;){if(!Yn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function co(t){jo=t,xr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Yt(t){return ZR(jo,t)}function Of(t,e){return jo===null&&co(t),ZR(t,e)}function ZR(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},xr===null){if(t===null)throw Error(z(308));xr=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else xr=xr.next=e;return n}var n3=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},s3=Dt.unstable_scheduleCallback,r3=Dt.unstable_NormalPriority,St={$$typeof:yr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Q_(){return{controller:new n3,data:new Map,refCount:0}}function Ph(t){t.refCount--,t.refCount===0&&s3(r3,function(){t.controller.abort()})}var rd=null,Hv=0,Gl=0,jl=null;function i3(t,e){if(rd===null){var n=rd=[];Hv=0,Gl=bb(),jl={status:"pending",value:void 0,then:function(s){n.push(s)}}}return Hv++,e.then($E,$E),e}function $E(){if(--Hv===0&&rd!==null){jl!==null&&(jl.status="fulfilled");var t=rd;rd=null,Gl=0,jl=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function a3(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(s.status="rejected",s.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),s}var KE=se.S;se.S=function(t,e){fj=Bn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&i3(t,e),KE!==null&&KE(t,e)};var eo=ar(null);function X_(){var t=eo.current;return t!==null?t:Ve.pooledCache}function pm(t,e){e===null?Ue(eo,eo.current):Ue(eo,e.pool)}function eC(){var t=X_();return t===null?null:{parent:St._currentValue,pool:t}}var jc=Error(z(460)),J_=Error(z(474)),vg=Error(z(542)),tp={then:function(){}};function WE(t){return t=t.status,t==="fulfilled"||t==="rejected"}function tC(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(vr,vr),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,QE(t),t;default:if(typeof e.status=="string")e.then(vr,vr);else{if(t=Ve,t!==null&&100<t.shellSuspendCounter)throw Error(z(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=s}},function(s){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,QE(t),t}throw to=e,jc}}function Da(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(to=n,jc):n}}var to=null;function YE(){if(to===null)throw Error(z(459));var t=to;return to=null,t}function QE(t){if(t===jc||t===vg)throw Error(z(483))}var Pl=null,zd=0;function Vf(t){var e=zd;return zd+=1,Pl===null&&(Pl=[]),tC(Pl,t,e)}function xu(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Lf(t,e){throw e.$$typeof===$V?Error(z(525)):(t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function nC(t){function e(x,v){if(t){var b=x.deletions;b===null?(x.deletions=[v],x.flags|=16):b.push(v)}}function n(x,v){if(!t)return null;for(;v!==null;)e(x,v),v=v.sibling;return null}function s(x){for(var v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function r(x,v){return x=wr(x,v),x.index=0,x.sibling=null,x}function i(x,v,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<v?(x.flags|=67108866,v):b):(x.flags|=67108866,v)):(x.flags|=1048576,v)}function a(x){return t&&x.alternate===null&&(x.flags|=67108866),x}function o(x,v,b,R){return v===null||v.tag!==6?(v=h0(b,x.mode,R),v.return=x,v):(v=r(v,b),v.return=x,v)}function c(x,v,b,R){var D=b.type;return D===ul?h(x,v,b.props.children,R,b.key):v!==null&&(v.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===pi&&Da(D)===v.type)?(v=r(v,b.props),xu(v,b),v.return=x,v):(v=mm(b.type,b.key,b.props,null,x.mode,R),xu(v,b),v.return=x,v)}function u(x,v,b,R){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=f0(b,x.mode,R),v.return=x,v):(v=r(v,b.children||[]),v.return=x,v)}function h(x,v,b,R,D){return v===null||v.tag!==7?(v=Za(b,x.mode,R,D),v.return=x,v):(v=r(v,b),v.return=x,v)}function f(x,v,b){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=h0(""+v,x.mode,b),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Cf:return b=mm(v.type,v.key,v.props,null,x.mode,b),xu(b,v),b.return=x,b;case Lu:return v=f0(v,x.mode,b),v.return=x,v;case pi:return v=Da(v),f(x,v,b)}if(Uu(v)||gu(v))return v=Za(v,x.mode,b,null),v.return=x,v;if(typeof v.then=="function")return f(x,Vf(v),b);if(v.$$typeof===yr)return f(x,Of(x,v),b);Lf(x,v)}return null}function m(x,v,b,R){var D=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return D!==null?null:o(x,v,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Cf:return b.key===D?c(x,v,b,R):null;case Lu:return b.key===D?u(x,v,b,R):null;case pi:return b=Da(b),m(x,v,b,R)}if(Uu(b)||gu(b))return D!==null?null:h(x,v,b,R,null);if(typeof b.then=="function")return m(x,v,Vf(b),R);if(b.$$typeof===yr)return m(x,v,Of(x,b),R);Lf(x,b)}return null}function p(x,v,b,R,D){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return x=x.get(b)||null,o(v,x,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Cf:return x=x.get(R.key===null?b:R.key)||null,c(v,x,R,D);case Lu:return x=x.get(R.key===null?b:R.key)||null,u(v,x,R,D);case pi:return R=Da(R),p(x,v,b,R,D)}if(Uu(R)||gu(R))return x=x.get(b)||null,h(v,x,R,D,null);if(typeof R.then=="function")return p(x,v,b,Vf(R),D);if(R.$$typeof===yr)return p(x,v,b,Of(v,R),D);Lf(v,R)}return null}function _(x,v,b,R){for(var D=null,M=null,A=v,E=v=0,N=null;A!==null&&E<b.length;E++){A.index>E?(N=A,A=null):N=A.sibling;var I=m(x,A,b[E],R);if(I===null){A===null&&(A=N);break}t&&A&&I.alternate===null&&e(x,A),v=i(I,v,E),M===null?D=I:M.sibling=I,M=I,A=N}if(E===b.length)return n(x,A),ge&&mr(x,E),D;if(A===null){for(;E<b.length;E++)A=f(x,b[E],R),A!==null&&(v=i(A,v,E),M===null?D=A:M.sibling=A,M=A);return ge&&mr(x,E),D}for(A=s(A);E<b.length;E++)N=p(A,x,E,b[E],R),N!==null&&(t&&N.alternate!==null&&A.delete(N.key===null?E:N.key),v=i(N,v,E),M===null?D=N:M.sibling=N,M=N);return t&&A.forEach(function(P){return e(x,P)}),ge&&mr(x,E),D}function w(x,v,b,R){if(b==null)throw Error(z(151));for(var D=null,M=null,A=v,E=v=0,N=null,I=b.next();A!==null&&!I.done;E++,I=b.next()){A.index>E?(N=A,A=null):N=A.sibling;var P=m(x,A,I.value,R);if(P===null){A===null&&(A=N);break}t&&A&&P.alternate===null&&e(x,A),v=i(P,v,E),M===null?D=P:M.sibling=P,M=P,A=N}if(I.done)return n(x,A),ge&&mr(x,E),D;if(A===null){for(;!I.done;E++,I=b.next())I=f(x,I.value,R),I!==null&&(v=i(I,v,E),M===null?D=I:M.sibling=I,M=I);return ge&&mr(x,E),D}for(A=s(A);!I.done;E++,I=b.next())I=p(A,x,E,I.value,R),I!==null&&(t&&I.alternate!==null&&A.delete(I.key===null?E:I.key),v=i(I,v,E),M===null?D=I:M.sibling=I,M=I);return t&&A.forEach(function(k){return e(x,k)}),ge&&mr(x,E),D}function T(x,v,b,R){if(typeof b=="object"&&b!==null&&b.type===ul&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Cf:e:{for(var D=b.key;v!==null;){if(v.key===D){if(D=b.type,D===ul){if(v.tag===7){n(x,v.sibling),R=r(v,b.props.children),R.return=x,x=R;break e}}else if(v.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===pi&&Da(D)===v.type){n(x,v.sibling),R=r(v,b.props),xu(R,b),R.return=x,x=R;break e}n(x,v);break}else e(x,v);v=v.sibling}b.type===ul?(R=Za(b.props.children,x.mode,R,b.key),R.return=x,x=R):(R=mm(b.type,b.key,b.props,null,x.mode,R),xu(R,b),R.return=x,x=R)}return a(x);case Lu:e:{for(D=b.key;v!==null;){if(v.key===D)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(x,v.sibling),R=r(v,b.children||[]),R.return=x,x=R;break e}else{n(x,v);break}else e(x,v);v=v.sibling}R=f0(b,x.mode,R),R.return=x,x=R}return a(x);case pi:return b=Da(b),T(x,v,b,R)}if(Uu(b))return _(x,v,b,R);if(gu(b)){if(D=gu(b),typeof D!="function")throw Error(z(150));return b=D.call(b),w(x,v,b,R)}if(typeof b.then=="function")return T(x,v,Vf(b),R);if(b.$$typeof===yr)return T(x,v,Of(x,b),R);Lf(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,v!==null&&v.tag===6?(n(x,v.sibling),R=r(v,b),R.return=x,x=R):(n(x,v),R=h0(b,x.mode,R),R.return=x,x=R),a(x)):n(x,v)}return function(x,v,b,R){try{zd=0;var D=T(x,v,b,R);return Pl=null,D}catch(A){if(A===jc||A===vg)throw A;var M=Un(29,A,null,x.mode);return M.lanes=R,M.return=x,M}finally{}}}var uo=nC(!0),sC=nC(!1),gi=!1;function Z_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Pi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ki(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,be&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,e=Jm(t),WR(t,null,n),e}return yg(t,s,e,n),Jm(t)}function id(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,bR(t,n)}}function p0(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?r=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var $v=!1;function ad(){if($v){var t=jl;if(t!==null)throw t}}function od(t,e,n,s){$v=!1;var r=t.updateQueue;gi=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=r.baseState;a=0,h=u=c=null,o=i;do{var m=o.lane&-536870913,p=m!==o.lane;if(p?(me&m)===m:(s&m)===m){m!==0&&m===Gl&&($v=!0),h!==null&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var _=t,w=o;m=e;var T=n;switch(w.tag){case 1:if(_=w.payload,typeof _=="function"){f=_.call(T,f,m);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=w.payload,m=typeof _=="function"?_.call(T,f,m):_,m==null)break e;f=Ye({},f,m);break e;case 2:gi=!0}}m=o.callback,m!==null&&(t.flags|=64,p&&(t.flags|=8192),p=r.callbacks,p===null?r.callbacks=[m]:p.push(m))}else p={lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=p,c=f):h=h.next=p,a|=m;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;p=o,o=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);h===null&&(c=f),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=h,i===null&&(r.shared.lanes=0),Ki|=a,t.lanes=a,t.memoizedState=f}}function rC(t,e){if(typeof t!="function")throw Error(z(191,t));t.call(e)}function iC(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)rC(n[t],e)}var $l=ar(null),np=ar(0);function XE(t,e){t=Dr,Ue(np,t),Ue($l,e),Dr=t|e.baseLanes}function Kv(){Ue(np,Dr),Ue($l,$l.current)}function eb(){Dr=np.current,Ft($l),Ft(np)}var Qn=ar(null),ms=null;function vi(t){var e=t.alternate;Ue(pt,pt.current&1),Ue(Qn,t),ms===null&&(e===null||$l.current!==null||e.memoizedState!==null)&&(ms=t)}function Wv(t){Ue(pt,pt.current),Ue(Qn,t),ms===null&&(ms=t)}function aC(t){t.tag===22?(Ue(pt,pt.current),Ue(Qn,t),ms===null&&(ms=t)):xi()}function xi(){Ue(pt,pt.current),Ue(Qn,Qn.current)}function Vn(t){Ft(Qn),ms===t&&(ms=null),Ft(pt)}var pt=ar(0);function sp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||fx(n)||mx(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jr=0,ae=null,Pe=null,Tt=null,rp=!1,kl=!1,ho=!1,ip=0,Fd=0,Dl=null,o3=0;function lt(){throw Error(z(321))}function tb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yn(t[n],e[n]))return!1;return!0}function nb(t,e,n,s,r,i){return jr=i,ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,se.H=t===null||t.memoizedState===null?VC:fb,ho=!1,i=n(s,r),ho=!1,kl&&(i=lC(e,n,s,r)),oC(t),i}function oC(t){se.H=Bd;var e=Pe!==null&&Pe.next!==null;if(jr=0,Tt=Pe=ae=null,rp=!1,Fd=0,Dl=null,e)throw Error(z(300));t===null||At||(t=t.dependencies,t!==null&&ep(t)&&(At=!0))}function lC(t,e,n,s){ae=t;var r=0;do{if(kl&&(Dl=null),Fd=0,kl=!1,25<=r)throw Error(z(301));if(r+=1,Tt=Pe=null,t.updateQueue!=null){var i=t.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}se.H=LC,i=e(n,s)}while(kl);return i}function l3(){var t=se.H,e=t.useState()[0];return e=typeof e.then=="function"?kh(e):e,t=t.useState()[0],(Pe!==null?Pe.memoizedState:null)!==t&&(ae.flags|=1024),e}function sb(){var t=ip!==0;return ip=0,t}function rb(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function ib(t){if(rp){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}rp=!1}jr=0,Tt=Pe=ae=null,kl=!1,Fd=ip=0,Dl=null}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?ae.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function yt(){if(Pe===null){var t=ae.alternate;t=t!==null?t.memoizedState:null}else t=Pe.next;var e=Tt===null?ae.memoizedState:Tt.next;if(e!==null)Tt=e,Pe=t;else{if(t===null)throw ae.alternate===null?Error(z(467)):Error(z(310));Pe=t,t={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Tt===null?ae.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function xg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kh(t){var e=Fd;return Fd+=1,Dl===null&&(Dl=[]),t=tC(Dl,t,e),e=ae,(Tt===null?e.memoizedState:Tt.next)===null&&(e=e.alternate,se.H=e===null||e.memoizedState===null?VC:fb),t}function _g(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return kh(t);if(t.$$typeof===yr)return Yt(t)}throw Error(z(438,String(t)))}function ab(t){var e=null,n=ae.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=ae.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=xg(),ae.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=KV;return e.index++,n}function Pr(t,e){return typeof e=="function"?e(t):e}function gm(t){var e=yt();return ob(e,Pe,t)}function ob(t,e,n){var s=t.queue;if(s===null)throw Error(z(311));s.lastRenderedReducer=n;var r=t.baseQueue,i=s.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}e.baseQueue=r=i,s.pending=null}if(i=t.baseState,r===null)t.memoizedState=i;else{e=r.next;var o=a=null,c=null,u=e,h=!1;do{var f=u.lane&-536870913;if(f!==u.lane?(me&f)===f:(jr&f)===f){var m=u.revertLane;if(m===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===Gl&&(h=!0);else if((jr&m)===m){u=u.next,m===Gl&&(h=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(o=c=f,a=i):c=c.next=f,ae.lanes|=m,Ki|=m;f=u.action,ho&&n(i,f),i=u.hasEagerState?u.eagerState:n(i,f)}else m={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(o=c=m,a=i):c=c.next=m,ae.lanes|=f,Ki|=f;u=u.next}while(u!==null&&u!==e);if(c===null?a=i:c.next=o,!Yn(i,t.memoizedState)&&(At=!0,h&&(n=jl,n!==null)))throw n;t.memoizedState=i,t.baseState=a,t.baseQueue=c,s.lastRenderedState=i}return r===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function g0(t){var e=yt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do i=t(i,a.action),a=a.next;while(a!==r);Yn(i,e.memoizedState)||(At=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function cC(t,e,n){var s=ae,r=yt(),i=ge;if(i){if(n===void 0)throw Error(z(407));n=n()}else n=e();var a=!Yn((Pe||r).memoizedState,n);if(a&&(r.memoizedState=n,At=!0),r=r.queue,lb(hC.bind(null,s,r,t),[t]),r.getSnapshot!==e||a||Tt!==null&&Tt.memoizedState.tag&1){if(s.flags|=2048,Kl(9,{destroy:void 0},dC.bind(null,s,r,n,e),null),Ve===null)throw Error(z(349));i||jr&127||uC(s,e,n)}return n}function uC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ae.updateQueue,e===null?(e=xg(),ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function dC(t,e,n,s){e.value=n,e.getSnapshot=s,fC(e)&&mC(t)}function hC(t,e,n){return n(function(){fC(e)&&mC(t)})}function fC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yn(t,n)}catch{return!0}}function mC(t){var e=Co(t,2);e!==null&&Cn(e,t,2)}function Yv(t){var e=mn();if(typeof t=="function"){var n=t;if(t=n(),ho){wi(!0);try{n()}finally{wi(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:t},e}function pC(t,e,n,s){return t.baseState=n,ob(t,Pe,typeof s=="function"?s:Pr)}function c3(t,e,n,s,r){if(wg(t))throw Error(z(485));if(t=e.action,t!==null){var i={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){i.listeners.push(a)}};se.T!==null?n(!0):i.isTransition=!1,s(i),n=e.pending,n===null?(i.next=e.pending=i,gC(e,i)):(i.next=n.next,e.pending=n.next=i)}}function gC(t,e){var n=e.action,s=e.payload,r=t.state;if(e.isTransition){var i=se.T,a={};se.T=a;try{var o=n(r,s),c=se.S;c!==null&&c(a,o),JE(t,e,o)}catch(u){Qv(t,e,u)}finally{i!==null&&a.types!==null&&(i.types=a.types),se.T=i}}else try{i=n(r,s),JE(t,e,i)}catch(u){Qv(t,e,u)}}function JE(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){ZE(t,e,s)},function(s){return Qv(t,e,s)}):ZE(t,e,n)}function ZE(t,e,n){e.status="fulfilled",e.value=n,yC(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,gC(t,n)))}function Qv(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,yC(e),e=e.next;while(e!==s)}t.action=null}function yC(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function vC(t,e){return e}function eS(t,e){if(ge){var n=Ve.formState;if(n!==null){e:{var s=ae;if(ge){if(He){t:{for(var r=He,i=ds;r.nodeType!==8;){if(!i){r=null;break t}if(r=ps(r.nextSibling),r===null){r=null;break t}}i=r.data,r=i==="F!"||i==="F"?r:null}if(r){He=ps(r.nextSibling),s=r.data==="F!";break e}}Gi(s)}s=!1}s&&(e=n[0])}}return n=mn(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vC,lastRenderedState:e},n.queue=s,n=DC.bind(null,ae,s),s.dispatch=n,s=Yv(!1),i=hb.bind(null,ae,!1,s.queue),s=mn(),r={state:e,dispatch:null,action:t,pending:null},s.queue=r,n=c3.bind(null,ae,r,i,n),r.dispatch=n,s.memoizedState=t,[e,n,!1]}function tS(t){var e=yt();return xC(e,Pe,t)}function xC(t,e,n){if(e=ob(t,e,vC)[0],t=gm(Pr)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=kh(e)}catch(a){throw a===jc?vg:a}else s=e;e=yt();var r=e.queue,i=r.dispatch;return n!==e.memoizedState&&(ae.flags|=2048,Kl(9,{destroy:void 0},u3.bind(null,r,n),null)),[s,i,t]}function u3(t,e){t.action=e}function nS(t){var e=yt(),n=Pe;if(n!==null)return xC(e,n,t);yt(),e=e.memoizedState,n=yt();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function Kl(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=ae.updateQueue,e===null&&(e=xg(),ae.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function _C(){return yt().memoizedState}function ym(t,e,n,s){var r=mn();ae.flags|=t,r.memoizedState=Kl(1|e,{destroy:void 0},n,s===void 0?null:s)}function bg(t,e,n,s){var r=yt();s=s===void 0?null:s;var i=r.memoizedState.inst;Pe!==null&&s!==null&&tb(s,Pe.memoizedState.deps)?r.memoizedState=Kl(e,i,n,s):(ae.flags|=t,r.memoizedState=Kl(1|e,i,n,s))}function sS(t,e){ym(8390656,8,t,e)}function lb(t,e){bg(2048,8,t,e)}function d3(t){ae.flags|=4;var e=ae.updateQueue;if(e===null)e=xg(),ae.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function bC(t){var e=yt().memoizedState;return d3({ref:e,nextImpl:t}),function(){if(be&2)throw Error(z(440));return e.impl.apply(void 0,arguments)}}function wC(t,e){return bg(4,2,t,e)}function TC(t,e){return bg(4,4,t,e)}function EC(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function SC(t,e,n){n=n!=null?n.concat([t]):null,bg(4,4,EC.bind(null,e,t),n)}function cb(){}function AC(t,e){var n=yt();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&tb(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function NC(t,e){var n=yt();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&tb(e,s[1]))return s[0];if(s=t(),ho){wi(!0);try{t()}finally{wi(!1)}}return n.memoizedState=[s,e],s}function ub(t,e,n){return n===void 0||jr&1073741824&&!(me&261930)?t.memoizedState=e:(t.memoizedState=n,t=pj(),ae.lanes|=t,Ki|=t,n)}function IC(t,e,n,s){return Yn(n,e)?n:$l.current!==null?(t=ub(t,n,s),Yn(t,e)||(At=!0),t):!(jr&42)||jr&1073741824&&!(me&261930)?(At=!0,t.memoizedState=n):(t=pj(),ae.lanes|=t,Ki|=t,e)}function RC(t,e,n,s,r){var i=we.p;we.p=i!==0&&8>i?i:8;var a=se.T,o={};se.T=o,hb(t,!1,e,n);try{var c=r(),u=se.S;if(u!==null&&u(o,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=a3(c,s);ld(t,e,h,Gn(t))}else ld(t,e,s,Gn(t))}catch(f){ld(t,e,{then:function(){},status:"rejected",reason:f},Gn())}finally{we.p=i,a!==null&&o.types!==null&&(a.types=o.types),se.T=a}}function h3(){}function Xv(t,e,n,s){if(t.tag!==5)throw Error(z(476));var r=CC(t).queue;RC(t,r,e,Ja,n===null?h3:function(){return jC(t),n(s)})}function CC(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Ja,baseState:Ja,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:Ja},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function jC(t){var e=CC(t);e.next===null&&(e=t.alternate.memoizedState),ld(t,e.next.queue,{},Gn())}function db(){return Yt(Gd)}function PC(){return yt().memoizedState}function kC(){return yt().memoizedState}function f3(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Gn();t=Pi(n);var s=ki(e,t,n);s!==null&&(Cn(s,e,n),id(s,e,n)),e={cache:Q_()},t.payload=e;return}e=e.return}}function m3(t,e,n){var s=Gn();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},wg(t)?MC(e,n):(n=$_(t,e,n,s),n!==null&&(Cn(n,t,s),OC(n,e,s)))}function DC(t,e,n){var s=Gn();ld(t,e,n,s)}function ld(t,e,n,s){var r={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(wg(t))MC(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(r.hasEagerState=!0,r.eagerState=o,Yn(o,a))return yg(t,e,r,0),Ve===null&&gg(),!1}catch{}finally{}if(n=$_(t,e,r,s),n!==null)return Cn(n,t,s),OC(n,e,s),!0}return!1}function hb(t,e,n,s){if(s={lane:2,revertLane:bb(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},wg(t)){if(e)throw Error(z(479))}else e=$_(t,n,s,2),e!==null&&Cn(e,t,2)}function wg(t){var e=t.alternate;return t===ae||e!==null&&e===ae}function MC(t,e){kl=rp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function OC(t,e,n){if(n&4194048){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,bR(t,n)}}var Bd={readContext:Yt,use:_g,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useLayoutEffect:lt,useInsertionEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useSyncExternalStore:lt,useId:lt,useHostTransitionStatus:lt,useFormState:lt,useActionState:lt,useOptimistic:lt,useMemoCache:lt,useCacheRefresh:lt};Bd.useEffectEvent=lt;var VC={readContext:Yt,use:_g,useCallback:function(t,e){return mn().memoizedState=[t,e===void 0?null:e],t},useContext:Yt,useEffect:sS,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,ym(4194308,4,EC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ym(4194308,4,t,e)},useInsertionEffect:function(t,e){ym(4,2,t,e)},useMemo:function(t,e){var n=mn();e=e===void 0?null:e;var s=t();if(ho){wi(!0);try{t()}finally{wi(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=mn();if(n!==void 0){var r=n(e);if(ho){wi(!0);try{n(e)}finally{wi(!1)}}}else r=e;return s.memoizedState=s.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},s.queue=t,t=t.dispatch=m3.bind(null,ae,t),[s.memoizedState,t]},useRef:function(t){var e=mn();return t={current:t},e.memoizedState=t},useState:function(t){t=Yv(t);var e=t.queue,n=DC.bind(null,ae,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:cb,useDeferredValue:function(t,e){var n=mn();return ub(n,t,e)},useTransition:function(){var t=Yv(!1);return t=RC.bind(null,ae,t.queue,!0,!1),mn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=ae,r=mn();if(ge){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Ve===null)throw Error(z(349));me&127||uC(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,sS(hC.bind(null,s,i,t),[t]),s.flags|=2048,Kl(9,{destroy:void 0},dC.bind(null,s,i,n,e),null),n},useId:function(){var t=mn(),e=Ve.identifierPrefix;if(ge){var n=Hs,s=qs;n=(s&~(1<<32-Hn(s)-1)).toString(32)+n,e="_"+e+"R_"+n,n=ip++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=o3++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:db,useFormState:eS,useActionState:eS,useOptimistic:function(t){var e=mn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=hb.bind(null,ae,!0,n),n.dispatch=e,[t,e]},useMemoCache:ab,useCacheRefresh:function(){return mn().memoizedState=f3.bind(null,ae)},useEffectEvent:function(t){var e=mn(),n={impl:t};return e.memoizedState=n,function(){if(be&2)throw Error(z(440));return n.impl.apply(void 0,arguments)}}},fb={readContext:Yt,use:_g,useCallback:AC,useContext:Yt,useEffect:lb,useImperativeHandle:SC,useInsertionEffect:wC,useLayoutEffect:TC,useMemo:NC,useReducer:gm,useRef:_C,useState:function(){return gm(Pr)},useDebugValue:cb,useDeferredValue:function(t,e){var n=yt();return IC(n,Pe.memoizedState,t,e)},useTransition:function(){var t=gm(Pr)[0],e=yt().memoizedState;return[typeof t=="boolean"?t:kh(t),e]},useSyncExternalStore:cC,useId:PC,useHostTransitionStatus:db,useFormState:tS,useActionState:tS,useOptimistic:function(t,e){var n=yt();return pC(n,Pe,t,e)},useMemoCache:ab,useCacheRefresh:kC};fb.useEffectEvent=bC;var LC={readContext:Yt,use:_g,useCallback:AC,useContext:Yt,useEffect:lb,useImperativeHandle:SC,useInsertionEffect:wC,useLayoutEffect:TC,useMemo:NC,useReducer:g0,useRef:_C,useState:function(){return g0(Pr)},useDebugValue:cb,useDeferredValue:function(t,e){var n=yt();return Pe===null?ub(n,t,e):IC(n,Pe.memoizedState,t,e)},useTransition:function(){var t=g0(Pr)[0],e=yt().memoizedState;return[typeof t=="boolean"?t:kh(t),e]},useSyncExternalStore:cC,useId:PC,useHostTransitionStatus:db,useFormState:nS,useActionState:nS,useOptimistic:function(t,e){var n=yt();return Pe!==null?pC(n,Pe,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:ab,useCacheRefresh:kC};LC.useEffectEvent=bC;function y0(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jv={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Gn(),r=Pi(s);r.payload=e,n!=null&&(r.callback=n),e=ki(t,r,s),e!==null&&(Cn(e,t,s),id(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Gn(),r=Pi(s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=ki(t,r,s),e!==null&&(Cn(e,t,s),id(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Gn(),s=Pi(n);s.tag=2,e!=null&&(s.callback=e),e=ki(t,s,n),e!==null&&(Cn(e,t,n),id(e,t,n))}};function rS(t,e,n,s,r,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,a):e.prototype&&e.prototype.isPureReactComponent?!Vd(n,s)||!Vd(r,i):!0}function iS(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Jv.enqueueReplaceState(e,e.state,null)}function fo(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=Ye({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function UC(t){Xm(t)}function zC(t){console.error(t)}function FC(t){Xm(t)}function ap(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function aS(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Zv(t,e,n){return n=Pi(n),n.tag=3,n.payload={element:null},n.callback=function(){ap(t,e)},n}function BC(t){return t=Pi(t),t.tag=3,t}function qC(t,e,n,s){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=s.value;t.payload=function(){return r(i)},t.callback=function(){aS(e,n,s)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){aS(e,n,s),typeof r!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var o=s.stack;this.componentDidCatch(s.value,{componentStack:o!==null?o:""})})}function p3(t,e,n,s,r){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&Cc(e,n,r,!0),n=Qn.current,n!==null){switch(n.tag){case 31:case 13:return ms===null?dp():n.alternate===null&&ut===0&&(ut=3),n.flags&=-257,n.flags|=65536,n.lanes=r,s===tp?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),I0(t,s,r)),!1;case 22:return n.flags|=65536,s===tp?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),I0(t,s,r)),!1}throw Error(z(435,n.tag))}return I0(t,s,r),dp(),!1}if(ge)return e=Qn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,s!==zv&&(t=Error(z(422),{cause:s}),Ud(us(t,n)))):(s!==zv&&(e=Error(z(423),{cause:s}),Ud(us(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,s=us(s,n),r=Zv(t.stateNode,s,r),p0(t,r),ut!==4&&(ut=2)),!1;var i=Error(z(520),{cause:s});if(i=us(i,n),dd===null?dd=[i]:dd.push(i),ut!==4&&(ut=2),e===null)return!0;s=us(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=Zv(n.stateNode,s,t),p0(n,t),!1;case 1:if(e=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Di===null||!Di.has(i))))return n.flags|=65536,r&=-r,n.lanes|=r,r=BC(r),qC(r,t,n,s),p0(n,r),!1}n=n.return}while(n!==null);return!1}var mb=Error(z(461)),At=!1;function Ht(t,e,n,s){e.child=t===null?sC(e,null,n,s):uo(e,t.child,n,s)}function oS(t,e,n,s,r){n=n.render;var i=e.ref;if("ref"in s){var a={};for(var o in s)o!=="ref"&&(a[o]=s[o])}else a=s;return co(e),s=nb(t,e,n,a,i,r),o=sb(),t!==null&&!At?(rb(t,e,r),kr(t,e,r)):(ge&&o&&W_(e),e.flags|=1,Ht(t,e,s,r),e.child)}function lS(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!K_(i)&&i.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=i,HC(t,e,i,s,r)):(t=mm(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!pb(t,r)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Vd,n(a,s)&&t.ref===e.ref)return kr(t,e,r)}return e.flags|=1,t=wr(i,s),t.ref=e.ref,t.return=e,e.child=t}function HC(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(Vd(i,s)&&t.ref===e.ref)if(At=!1,e.pendingProps=s=i,pb(t,r))t.flags&131072&&(At=!0);else return e.lanes=t.lanes,kr(t,e,r)}return ex(t,e,n,s,r)}function GC(t,e,n,s){var r=s.children,i=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if(e.flags&128){if(i=i!==null?i.baseLanes|n:n,t!==null){for(s=e.child=t.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;s=r&~i}else s=0,e.child=null;return cS(t,e,i,n,s)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&pm(e,i!==null?i.cachePool:null),i!==null?XE(e,i):Kv(),aC(e);else return s=e.lanes=536870912,cS(t,e,i!==null?i.baseLanes|n:n,n,s)}else i!==null?(pm(e,i.cachePool),XE(e,i),xi(),e.memoizedState=null):(t!==null&&pm(e,null),Kv(),xi());return Ht(t,e,r,n),e.child}function Fu(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function cS(t,e,n,s,r){var i=X_();return i=i===null?null:{parent:St._currentValue,pool:i},e.memoizedState={baseLanes:n,cachePool:i},t!==null&&pm(e,null),Kv(),aC(e),t!==null&&Cc(t,e,s,!0),e.childLanes=r,null}function vm(t,e){return e=op({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function uS(t,e,n){return uo(e,t.child,null,n),t=vm(e,e.pendingProps),t.flags|=2,Vn(e),e.memoizedState=null,t}function g3(t,e,n){var s=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(ge){if(s.mode==="hidden")return t=vm(e,s),e.lanes=536870912,Fu(null,t);if(Wv(e),(t=He)?(t=Vj(t,ds),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Hi!==null?{id:qs,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},n=QR(t),n.return=e,e.child=n,Kt=e,He=null)):t=null,t===null)throw Gi(e);return e.lanes=536870912,null}return vm(e,s)}var i=t.memoizedState;if(i!==null){var a=i.dehydrated;if(Wv(e),r)if(e.flags&256)e.flags&=-257,e=uS(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(z(558));else if(At||Cc(t,e,n,!1),r=(n&t.childLanes)!==0,At||r){if(s=Ve,s!==null&&(a=wR(s,n),a!==0&&a!==i.retryLane))throw i.retryLane=a,Co(t,a),Cn(s,t,a),mb;dp(),e=uS(t,e,n)}else t=i.treeContext,He=ps(a.nextSibling),Kt=e,ge=!0,ji=null,ds=!1,t!==null&&JR(e,t),e=vm(e,s),e.flags|=4096;return e}return t=wr(t.child,{mode:s.mode,children:s.children}),t.ref=e.ref,e.child=t,t.return=e,t}function xm(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(z(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function ex(t,e,n,s,r){return co(e),n=nb(t,e,n,s,void 0,r),s=sb(),t!==null&&!At?(rb(t,e,r),kr(t,e,r)):(ge&&s&&W_(e),e.flags|=1,Ht(t,e,n,r),e.child)}function dS(t,e,n,s,r,i){return co(e),e.updateQueue=null,n=lC(e,s,n,r),oC(t),s=sb(),t!==null&&!At?(rb(t,e,i),kr(t,e,i)):(ge&&s&&W_(e),e.flags|=1,Ht(t,e,n,i),e.child)}function hS(t,e,n,s,r){if(co(e),e.stateNode===null){var i=vl,a=n.contextType;typeof a=="object"&&a!==null&&(i=Yt(a)),i=new n(s,i),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Jv,e.stateNode=i,i._reactInternals=e,i=e.stateNode,i.props=s,i.state=e.memoizedState,i.refs={},Z_(e),a=n.contextType,i.context=typeof a=="object"&&a!==null?Yt(a):vl,i.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(y0(e,n,a,s),i.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(a=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),a!==i.state&&Jv.enqueueReplaceState(i,i.state,null),od(e,s,i,r),ad(),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){i=e.stateNode;var o=e.memoizedProps,c=fo(n,o);i.props=c;var u=i.context,h=n.contextType;a=vl,typeof h=="object"&&h!==null&&(a=Yt(h));var f=n.getDerivedStateFromProps;h=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o||u!==a)&&iS(e,i,s,a),gi=!1;var m=e.memoizedState;i.state=m,od(e,s,i,r),ad(),u=e.memoizedState,o||m!==u||gi?(typeof f=="function"&&(y0(e,n,f,s),u=e.memoizedState),(c=gi||rS(e,n,c,s,m,u,a))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=u),i.props=s,i.state=u,i.context=a,s=c):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{i=e.stateNode,Gv(t,e),a=e.memoizedProps,h=fo(n,a),i.props=h,f=e.pendingProps,m=i.context,u=n.contextType,c=vl,typeof u=="object"&&u!==null&&(c=Yt(u)),o=n.getDerivedStateFromProps,(u=typeof o=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==f||m!==c)&&iS(e,i,s,c),gi=!1,m=e.memoizedState,i.state=m,od(e,s,i,r),ad();var p=e.memoizedState;a!==f||m!==p||gi||t!==null&&t.dependencies!==null&&ep(t.dependencies)?(typeof o=="function"&&(y0(e,n,o,s),p=e.memoizedState),(h=gi||rS(e,n,h,s,m,p,c)||t!==null&&t.dependencies!==null&&ep(t.dependencies))?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,p,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,p,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=p),i.props=s,i.state=p,i.context=c,s=h):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),s=!1)}return i=s,xm(t,e),s=(e.flags&128)!==0,i||s?(i=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:i.render(),e.flags|=1,t!==null&&s?(e.child=uo(e,t.child,null,r),e.child=uo(e,null,n,r)):Ht(t,e,n,r),e.memoizedState=i.state,t=e.child):t=kr(t,e,r),t}function fS(t,e,n,s){return lo(),e.flags|=256,Ht(t,e,n,s),e.child}var v0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function x0(t){return{baseLanes:t,cachePool:eC()}}function _0(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=zn),t}function $C(t,e,n){var s=e.pendingProps,r=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(pt.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(ge){if(r?vi(e):xi(),(t=He)?(t=Vj(t,ds),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Hi!==null?{id:qs,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},n=QR(t),n.return=e,e.child=n,Kt=e,He=null)):t=null,t===null)throw Gi(e);return mx(t)?e.lanes=32:e.lanes=536870912,null}var o=s.children;return s=s.fallback,r?(xi(),r=e.mode,o=op({mode:"hidden",children:o},r),s=Za(s,r,n,null),o.return=e,s.return=e,o.sibling=s,e.child=o,s=e.child,s.memoizedState=x0(n),s.childLanes=_0(t,a,n),e.memoizedState=v0,Fu(null,s)):(vi(e),tx(e,o))}var c=t.memoizedState;if(c!==null&&(o=c.dehydrated,o!==null)){if(i)e.flags&256?(vi(e),e.flags&=-257,e=b0(t,e,n)):e.memoizedState!==null?(xi(),e.child=t.child,e.flags|=128,e=null):(xi(),o=s.fallback,r=e.mode,s=op({mode:"visible",children:s.children},r),o=Za(o,r,n,null),o.flags|=2,s.return=e,o.return=e,s.sibling=o,e.child=s,uo(e,t.child,null,n),s=e.child,s.memoizedState=x0(n),s.childLanes=_0(t,a,n),e.memoizedState=v0,e=Fu(null,s));else if(vi(e),mx(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var u=a.dgst;a=u,s=Error(z(419)),s.stack="",s.digest=a,Ud({value:s,source:null,stack:null}),e=b0(t,e,n)}else if(At||Cc(t,e,n,!1),a=(n&t.childLanes)!==0,At||a){if(a=Ve,a!==null&&(s=wR(a,n),s!==0&&s!==c.retryLane))throw c.retryLane=s,Co(t,s),Cn(a,t,s),mb;fx(o)||dp(),e=b0(t,e,n)}else fx(o)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,He=ps(o.nextSibling),Kt=e,ge=!0,ji=null,ds=!1,t!==null&&JR(e,t),e=tx(e,s.children),e.flags|=4096);return e}return r?(xi(),o=s.fallback,r=e.mode,c=t.child,u=c.sibling,s=wr(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&65011712,u!==null?o=wr(u,o):(o=Za(o,r,n,null),o.flags|=2),o.return=e,s.return=e,s.sibling=o,e.child=s,Fu(null,s),s=e.child,o=t.child.memoizedState,o===null?o=x0(n):(r=o.cachePool,r!==null?(c=St._currentValue,r=r.parent!==c?{parent:c,pool:c}:r):r=eC(),o={baseLanes:o.baseLanes|n,cachePool:r}),s.memoizedState=o,s.childLanes=_0(t,a,n),e.memoizedState=v0,Fu(t.child,s)):(vi(e),n=t.child,t=n.sibling,n=wr(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function tx(t,e){return e=op({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function op(t,e){return t=Un(22,t,null,e),t.lanes=0,t}function b0(t,e,n){return uo(e,t.child,null,n),t=tx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mS(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Bv(t.return,e,n)}function w0(t,e,n,s,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r,treeForkCount:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=r,a.treeForkCount=i)}function KC(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;s=s.children;var a=pt.current,o=(a&2)!==0;if(o?(a=a&1|2,e.flags|=128):a&=1,Ue(pt,a),Ht(t,e,s,n),s=ge?Ld:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mS(t,n,e);else if(t.tag===19)mS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&sp(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),w0(e,!1,r,n,i,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&sp(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}w0(e,!0,n,null,i,s);break;case"together":w0(e,!1,null,null,void 0,s);break;default:e.memoizedState=null}return e.child}function kr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ki|=e.lanes,!(n&e.childLanes))if(t!==null){if(Cc(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=wr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=wr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pb(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&ep(t)))}function y3(t,e,n){switch(e.tag){case 3:Km(e,e.stateNode.containerInfo),yi(e,St,t.memoizedState.cache),lo();break;case 27:case 5:Rv(e);break;case 4:Km(e,e.stateNode.containerInfo);break;case 10:yi(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Wv(e),null;break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(vi(e),e.flags|=128,null):n&e.child.childLanes?$C(t,e,n):(vi(e),t=kr(t,e,n),t!==null?t.sibling:null);vi(e);break;case 19:var r=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(Cc(t,e,n,!1),s=(n&e.childLanes)!==0),r){if(s)return KC(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ue(pt,pt.current),s)break;return null;case 22:return e.lanes=0,GC(t,e,n,e.pendingProps);case 24:yi(e,St,t.memoizedState.cache)}return kr(t,e,n)}function WC(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)At=!0;else{if(!pb(t,n)&&!(e.flags&128))return At=!1,y3(t,e,n);At=!!(t.flags&131072)}else At=!1,ge&&e.flags&1048576&&XR(e,Ld,e.index);switch(e.lanes=0,e.tag){case 16:e:{var s=e.pendingProps;if(t=Da(e.elementType),e.type=t,typeof t=="function")K_(t)?(s=fo(t,s),e.tag=1,e=hS(null,e,t,s,n)):(e.tag=0,e=ex(null,e,t,s,n));else{if(t!=null){var r=t.$$typeof;if(r===k_){e.tag=11,e=oS(null,e,t,s,n);break e}else if(r===D_){e.tag=14,e=lS(null,e,t,s,n);break e}}throw e=Nv(t)||t,Error(z(306,e,""))}}return e;case 0:return ex(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,r=fo(s,e.pendingProps),hS(t,e,s,r,n);case 3:e:{if(Km(e,e.stateNode.containerInfo),t===null)throw Error(z(387));s=e.pendingProps;var i=e.memoizedState;r=i.element,Gv(t,e),od(e,s,null,n);var a=e.memoizedState;if(s=a.cache,yi(e,St,s),s!==i.cache&&qv(e,[St],n,!0),ad(),s=a.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){e=fS(t,e,s,n);break e}else if(s!==r){r=us(Error(z(424)),e),Ud(r),e=fS(t,e,s,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(He=ps(t.firstChild),Kt=e,ge=!0,ji=null,ds=!0,n=sC(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(lo(),s===r){e=kr(t,e,n);break e}Ht(t,e,s,n)}e=e.child}return e;case 26:return xm(t,e),t===null?(n=DS(e.type,null,e.pendingProps,null))?e.memoizedState=n:ge||(n=e.type,t=e.pendingProps,s=pp(Ci.current).createElement(n),s[$t]=e,s[jn]=t,Xt(s,n,t),zt(s),e.stateNode=s):e.memoizedState=DS(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Rv(e),t===null&&ge&&(s=e.stateNode=Lj(e.type,e.pendingProps,Ci.current),Kt=e,ds=!0,r=He,ua(e.type)?(px=r,He=ps(s.firstChild)):He=r),Ht(t,e,e.pendingProps.children,n),xm(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&ge&&((r=s=He)&&(s=K3(s,e.type,e.pendingProps,ds),s!==null?(e.stateNode=s,Kt=e,He=ps(s.firstChild),ds=!1,r=!0):r=!1),r||Gi(e)),Rv(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,dx(r,i)?s=null:a!==null&&dx(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=nb(t,e,l3,null,null,n),Gd._currentValue=r),xm(t,e),Ht(t,e,s,n),e.child;case 6:return t===null&&ge&&((t=n=He)&&(n=W3(n,e.pendingProps,ds),n!==null?(e.stateNode=n,Kt=e,He=null,t=!0):t=!1),t||Gi(e)),null;case 13:return $C(t,e,n);case 4:return Km(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=uo(e,null,s,n):Ht(t,e,s,n),e.child;case 11:return oS(t,e,e.type,e.pendingProps,n);case 7:return Ht(t,e,e.pendingProps,n),e.child;case 8:return Ht(t,e,e.pendingProps.children,n),e.child;case 12:return Ht(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,yi(e,e.type,s.value),Ht(t,e,s.children,n),e.child;case 9:return r=e.type._context,s=e.pendingProps.children,co(e),r=Yt(r),s=s(r),e.flags|=1,Ht(t,e,s,n),e.child;case 14:return lS(t,e,e.type,e.pendingProps,n);case 15:return HC(t,e,e.type,e.pendingProps,n);case 19:return KC(t,e,n);case 31:return g3(t,e,n);case 22:return GC(t,e,n,e.pendingProps);case 24:return co(e),s=Yt(St),t===null?(r=X_(),r===null&&(r=Ve,i=Q_(),r.pooledCache=i,i.refCount++,i!==null&&(r.pooledCacheLanes|=n),r=i),e.memoizedState={parent:s,cache:r},Z_(e),yi(e,St,r)):(t.lanes&n&&(Gv(t,e),od(e,null,null,n),ad()),r=t.memoizedState,i=e.memoizedState,r.parent!==s?(r={parent:s,cache:s},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),yi(e,St,s)):(s=i.cache,yi(e,St,s),s!==r.cache&&qv(e,[St],n,!0))),Ht(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(z(156,e.tag))}function cr(t){t.flags|=4}function T0(t,e,n,s,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(vj())t.flags|=8192;else throw to=tp,J_}else t.flags&=-16777217}function pS(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!Fj(e))if(vj())t.flags|=8192;else throw to=tp,J_}function Uf(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?xR():536870912,t.lanes|=e,Wl|=e)}function _u(t,e){if(!ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function qe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&65011712,s|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function v3(t,e,n){var s=e.pendingProps;switch(Y_(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(e),null;case 1:return qe(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),Tr(St),Bl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ho(e)?cr(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,m0())),qe(e),null;case 26:var r=e.type,i=e.memoizedState;return t===null?(cr(e),i!==null?(qe(e),pS(e,i)):(qe(e),T0(e,r,null,s,n))):i?i!==t.memoizedState?(cr(e),qe(e),pS(e,i)):(qe(e),e.flags&=-16777217):(t=t.memoizedProps,t!==s&&cr(e),qe(e),T0(e,r,t,s,n)),null;case 27:if(Wm(e),n=Ci.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&cr(e);else{if(!s){if(e.stateNode===null)throw Error(z(166));return qe(e),null}t=Ys.current,Ho(e)?HE(e):(t=Lj(r,s,n),e.stateNode=t,cr(e))}return qe(e),null;case 5:if(Wm(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&cr(e);else{if(!s){if(e.stateNode===null)throw Error(z(166));return qe(e),null}if(i=Ys.current,Ho(e))HE(e);else{var a=pp(Ci.current);switch(i){case 1:i=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:i=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":i=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":i=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":i=a.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof s.is=="string"?a.createElement("select",{is:s.is}):a.createElement("select"),s.multiple?i.multiple=!0:s.size&&(i.size=s.size);break;default:i=typeof s.is=="string"?a.createElement(r,{is:s.is}):a.createElement(r)}}i[$t]=e,i[jn]=s;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)i.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=i;e:switch(Xt(i,r,s),r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&cr(e)}}return qe(e),T0(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&cr(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(z(166));if(t=Ci.current,Ho(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,r=Kt,r!==null)switch(r.tag){case 27:case 5:s=r.memoizedProps}t[$t]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||Dj(t.nodeValue,n)),t||Gi(e,!0)}else t=pp(t).createTextNode(s),t[$t]=e,e.stateNode=t}return qe(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(s=Ho(e),n!==null){if(t===null){if(!s)throw Error(z(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(557));t[$t]=e}else lo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qe(e),t=!1}else n=m0(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Vn(e),e):(Vn(e),null);if(e.flags&128)throw Error(z(558))}return qe(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=Ho(e),s!==null&&s.dehydrated!==null){if(t===null){if(!r)throw Error(z(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(z(317));r[$t]=e}else lo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qe(e),r=!1}else r=m0(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(Vn(e),e):(Vn(e),null)}return Vn(e),e.flags&128?(e.lanes=n,e):(n=s!==null,t=t!==null&&t.memoizedState!==null,n&&(s=e.child,r=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(r=s.alternate.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==r&&(s.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Uf(e,e.updateQueue),qe(e),null);case 4:return Bl(),t===null&&wb(e.stateNode.containerInfo),qe(e),null;case 10:return Tr(e.type),qe(e),null;case 19:if(Ft(pt),s=e.memoizedState,s===null)return qe(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)_u(s,!1);else{if(ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=sp(t),i!==null){for(e.flags|=128,_u(s,!1),t=i.updateQueue,e.updateQueue=t,Uf(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)YR(n,t),n=n.sibling;return Ue(pt,pt.current&1|2),ge&&mr(e,s.treeForkCount),e.child}t=t.sibling}s.tail!==null&&Bn()>cp&&(e.flags|=128,r=!0,_u(s,!1),e.lanes=4194304)}else{if(!r)if(t=sp(i),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,Uf(e,t),_u(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!ge)return qe(e),null}else 2*Bn()-s.renderingStartTime>cp&&n!==536870912&&(e.flags|=128,r=!0,_u(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(t=s.last,t!==null?t.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Bn(),t.sibling=null,n=pt.current,Ue(pt,r?n&1|2:n&1),ge&&mr(e,s.treeForkCount),t):(qe(e),null);case 22:case 23:return Vn(e),eb(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(qe(e),e.subtreeFlags&6&&(e.flags|=8192)):qe(e),n=e.updateQueue,n!==null&&Uf(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&Ft(eo),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Tr(St),qe(e),null;case 25:return null;case 30:return null}throw Error(z(156,e.tag))}function x3(t,e){switch(Y_(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Tr(St),Bl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Wm(e),null;case 31:if(e.memoizedState!==null){if(Vn(e),e.alternate===null)throw Error(z(340));lo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Vn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));lo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ft(pt),null;case 4:return Bl(),null;case 10:return Tr(e.type),null;case 22:case 23:return Vn(e),eb(),t!==null&&Ft(eo),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Tr(St),null;case 25:return null;default:return null}}function YC(t,e){switch(Y_(e),e.tag){case 3:Tr(St),Bl();break;case 26:case 27:case 5:Wm(e);break;case 4:Bl();break;case 31:e.memoizedState!==null&&Vn(e);break;case 13:Vn(e);break;case 19:Ft(pt);break;case 10:Tr(e.type);break;case 22:case 23:Vn(e),eb(),t!==null&&Ft(eo);break;case 24:Tr(St)}}function Dh(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var r=s.next;n=r;do{if((n.tag&t)===t){s=void 0;var i=n.create,a=n.inst;s=i(),a.destroy=s}n=n.next}while(n!==r)}}catch(o){Ne(e,e.return,o)}}function $i(t,e,n){try{var s=e.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var i=r.next;s=i;do{if((s.tag&t)===t){var a=s.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,r=e;var c=n,u=o;try{u()}catch(h){Ne(r,c,h)}}}s=s.next}while(s!==i)}}catch(h){Ne(e,e.return,h)}}function QC(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{iC(e,n)}catch(s){Ne(t,t.return,s)}}}function XC(t,e,n){n.props=fo(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){Ne(t,e,s)}}function cd(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(r){Ne(t,e,r)}}function Gs(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(r){Ne(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Ne(t,e,r)}else n.current=null}function JC(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(r){Ne(t,t.return,r)}}function E0(t,e,n){try{var s=t.stateNode;F3(s,t.type,n,e),s[jn]=e}catch(r){Ne(t,t.return,r)}}function ZC(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ua(t.type)||t.tag===4}function S0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ZC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ua(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nx(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vr));else if(s!==4&&(s===27&&ua(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(nx(t,e,n),t=t.sibling;t!==null;)nx(t,e,n),t=t.sibling}function lp(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&ua(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(lp(t,e,n),t=t.sibling;t!==null;)lp(t,e,n),t=t.sibling}function ej(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Xt(e,s,n),e[$t]=t,e[jn]=n}catch(i){Ne(t,t.return,i)}}var pr=!1,Et=!1,A0=!1,gS=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function _3(t,e){if(t=t.containerInfo,cx=xp,t=FR(t),H_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,c=-1,u=0,h=0,f=t,m=null;t:for(;;){for(var p;f!==n||r!==0&&f.nodeType!==3||(o=a+r),f!==i||s!==0&&f.nodeType!==3||(c=a+s),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===t)break t;if(m===n&&++u===r&&(o=a),m===i&&++h===s&&(c=a),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ux={focusedElem:t,selectionRange:n},xp=!1,Lt=e;Lt!==null;)if(e=Lt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Lt=t;else for(;Lt!==null;){switch(e=Lt,i=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&i!==null){t=void 0,n=e,r=i.memoizedProps,i=i.memoizedState,s=n.stateNode;try{var _=fo(n.type,r);t=s.getSnapshotBeforeUpdate(_,i),s.__reactInternalSnapshotBeforeUpdate=t}catch(w){Ne(n,n.return,w)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)hx(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":hx(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(z(163))}if(t=e.sibling,t!==null){t.return=e.return,Lt=t;break}Lt=e.return}}function tj(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:dr(t,n),s&4&&Dh(5,n);break;case 1:if(dr(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Ne(n,n.return,a)}else{var r=fo(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Ne(n,n.return,a)}}s&64&&QC(n),s&512&&cd(n,n.return);break;case 3:if(dr(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{iC(t,e)}catch(a){Ne(n,n.return,a)}}break;case 27:e===null&&s&4&&ej(n);case 26:case 5:dr(t,n),e===null&&s&4&&JC(n),s&512&&cd(n,n.return);break;case 12:dr(t,n);break;case 31:dr(t,n),s&4&&rj(t,n);break;case 13:dr(t,n),s&4&&ij(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=R3.bind(null,n),Y3(t,n))));break;case 22:if(s=n.memoizedState!==null||pr,!s){e=e!==null&&e.memoizedState!==null||Et,r=pr;var i=Et;pr=s,(Et=e)&&!i?hr(t,n,(n.subtreeFlags&8772)!==0):dr(t,n),pr=r,Et=i}break;case 30:break;default:dr(t,n)}}function nj(t){var e=t.alternate;e!==null&&(t.alternate=null,nj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&L_(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Je=null,En=!1;function ur(t,e,n){for(n=n.child;n!==null;)sj(t,e,n),n=n.sibling}function sj(t,e,n){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(Nh,n)}catch{}switch(n.tag){case 26:Et||Gs(n,e),ur(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Et||Gs(n,e);var s=Je,r=En;ua(n.type)&&(Je=n.stateNode,En=!1),ur(t,e,n),fd(n.stateNode),Je=s,En=r;break;case 5:Et||Gs(n,e);case 6:if(s=Je,r=En,Je=null,ur(t,e,n),Je=s,En=r,Je!==null)if(En)try{(Je.nodeType===9?Je.body:Je.nodeName==="HTML"?Je.ownerDocument.body:Je).removeChild(n.stateNode)}catch(i){Ne(n,e,i)}else try{Je.removeChild(n.stateNode)}catch(i){Ne(n,e,i)}break;case 18:Je!==null&&(En?(t=Je,RS(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Jl(t)):RS(Je,n.stateNode));break;case 4:s=Je,r=En,Je=n.stateNode.containerInfo,En=!0,ur(t,e,n),Je=s,En=r;break;case 0:case 11:case 14:case 15:$i(2,n,e),Et||$i(4,n,e),ur(t,e,n);break;case 1:Et||(Gs(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&XC(n,e,s)),ur(t,e,n);break;case 21:ur(t,e,n);break;case 22:Et=(s=Et)||n.memoizedState!==null,ur(t,e,n),Et=s;break;default:ur(t,e,n)}}function rj(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Jl(t)}catch(n){Ne(e,e.return,n)}}}function ij(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Jl(t)}catch(n){Ne(e,e.return,n)}}function b3(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new gS),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new gS),e;default:throw Error(z(435,t.tag))}}function zf(t,e){var n=b3(t);e.forEach(function(s){if(!n.has(s)){n.add(s);var r=C3.bind(null,t,s);s.then(r,r)}})}function wn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s],i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(ua(o.type)){Je=o.stateNode,En=!1;break e}break;case 5:Je=o.stateNode,En=!1;break e;case 3:case 4:Je=o.stateNode.containerInfo,En=!0;break e}o=o.return}if(Je===null)throw Error(z(160));sj(i,a,r),Je=null,En=!1,i=r.alternate,i!==null&&(i.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)aj(e,t),e=e.sibling}var ws=null;function aj(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:wn(e,t),Tn(t),s&4&&($i(3,t,t.return),Dh(3,t),$i(5,t,t.return));break;case 1:wn(e,t),Tn(t),s&512&&(Et||n===null||Gs(n,n.return)),s&64&&pr&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var r=ws;if(wn(e,t),Tn(t),s&512&&(Et||n===null||Gs(n,n.return)),s&4){var i=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(s){case"title":i=r.getElementsByTagName("title")[0],(!i||i[Ch]||i[$t]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=r.createElement(s),r.head.insertBefore(i,r.querySelector("head > title"))),Xt(i,s,n),i[$t]=t,zt(i),s=i;break e;case"link":var a=OS("link","href",r).get(s+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(i=a[o],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}i=r.createElement(s),Xt(i,s,n),r.head.appendChild(i);break;case"meta":if(a=OS("meta","content",r).get(s+(n.content||""))){for(o=0;o<a.length;o++)if(i=a[o],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}i=r.createElement(s),Xt(i,s,n),r.head.appendChild(i);break;default:throw Error(z(468,s))}i[$t]=t,zt(i),s=i}t.stateNode=s}else VS(r,t.type,t.stateNode);else t.stateNode=MS(r,s,t.memoizedProps);else i!==s?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,s===null?VS(r,t.type,t.stateNode):MS(r,s,t.memoizedProps)):s===null&&t.stateNode!==null&&E0(t,t.memoizedProps,n.memoizedProps)}break;case 27:wn(e,t),Tn(t),s&512&&(Et||n===null||Gs(n,n.return)),n!==null&&s&4&&E0(t,t.memoizedProps,n.memoizedProps);break;case 5:if(wn(e,t),Tn(t),s&512&&(Et||n===null||Gs(n,n.return)),t.flags&32){r=t.stateNode;try{Hl(r,"")}catch(_){Ne(t,t.return,_)}}s&4&&t.stateNode!=null&&(r=t.memoizedProps,E0(t,r,n!==null?n.memoizedProps:r)),s&1024&&(A0=!0);break;case 6:if(wn(e,t),Tn(t),s&4){if(t.stateNode===null)throw Error(z(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(_){Ne(t,t.return,_)}}break;case 3:if(wm=null,r=ws,ws=gp(e.containerInfo),wn(e,t),ws=r,Tn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Jl(e.containerInfo)}catch(_){Ne(t,t.return,_)}A0&&(A0=!1,oj(t));break;case 4:s=ws,ws=gp(t.stateNode.containerInfo),wn(e,t),Tn(t),ws=s;break;case 12:wn(e,t),Tn(t);break;case 31:wn(e,t),Tn(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,zf(t,s)));break;case 13:wn(e,t),Tn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Tg=Bn()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,zf(t,s)));break;case 22:r=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,u=pr,h=Et;if(pr=u||r,Et=h||c,wn(e,t),Et=h,pr=u,Tn(t),s&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||c||pr||Et||Ma(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(i=c.stateNode,r)a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=c.stateNode;var f=c.memoizedProps.style,m=f!=null&&f.hasOwnProperty("display")?f.display:null;o.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(_){Ne(c,c.return,_)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(_){Ne(c,c.return,_)}}}else if(e.tag===18){if(n===null){c=e;try{var p=c.stateNode;r?CS(p,!0):CS(c.stateNode,!1)}catch(_){Ne(c,c.return,_)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,zf(t,n))));break;case 19:wn(e,t),Tn(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,zf(t,s)));break;case 30:break;case 21:break;default:wn(e,t),Tn(t)}}function Tn(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(ZC(s)){n=s;break}s=s.return}if(n==null)throw Error(z(160));switch(n.tag){case 27:var r=n.stateNode,i=S0(t);lp(t,i,r);break;case 5:var a=n.stateNode;n.flags&32&&(Hl(a,""),n.flags&=-33);var o=S0(t);lp(t,o,a);break;case 3:case 4:var c=n.stateNode.containerInfo,u=S0(t);nx(t,u,c);break;default:throw Error(z(161))}}catch(h){Ne(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function oj(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;oj(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function dr(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)tj(t,e.alternate,e),e=e.sibling}function Ma(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:$i(4,e,e.return),Ma(e);break;case 1:Gs(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&XC(e,e.return,n),Ma(e);break;case 27:fd(e.stateNode);case 26:case 5:Gs(e,e.return),Ma(e);break;case 22:e.memoizedState===null&&Ma(e);break;case 30:Ma(e);break;default:Ma(e)}t=t.sibling}}function hr(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,r=t,i=e,a=i.flags;switch(i.tag){case 0:case 11:case 15:hr(r,i,n),Dh(4,i);break;case 1:if(hr(r,i,n),s=i,r=s.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(u){Ne(s,s.return,u)}if(s=i,r=s.updateQueue,r!==null){var o=s.stateNode;try{var c=r.shared.hiddenCallbacks;if(c!==null)for(r.shared.hiddenCallbacks=null,r=0;r<c.length;r++)rC(c[r],o)}catch(u){Ne(s,s.return,u)}}n&&a&64&&QC(i),cd(i,i.return);break;case 27:ej(i);case 26:case 5:hr(r,i,n),n&&s===null&&a&4&&JC(i),cd(i,i.return);break;case 12:hr(r,i,n);break;case 31:hr(r,i,n),n&&a&4&&rj(r,i);break;case 13:hr(r,i,n),n&&a&4&&ij(r,i);break;case 22:i.memoizedState===null&&hr(r,i,n),cd(i,i.return);break;case 30:break;default:hr(r,i,n)}e=e.sibling}}function gb(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Ph(n))}function yb(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Ph(t))}function _s(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)lj(t,e,n,s),e=e.sibling}function lj(t,e,n,s){var r=e.flags;switch(e.tag){case 0:case 11:case 15:_s(t,e,n,s),r&2048&&Dh(9,e);break;case 1:_s(t,e,n,s);break;case 3:_s(t,e,n,s),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Ph(t)));break;case 12:if(r&2048){_s(t,e,n,s),t=e.stateNode;try{var i=e.memoizedProps,a=i.id,o=i.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){Ne(e,e.return,c)}}else _s(t,e,n,s);break;case 31:_s(t,e,n,s);break;case 13:_s(t,e,n,s);break;case 23:break;case 22:i=e.stateNode,a=e.alternate,e.memoizedState!==null?i._visibility&2?_s(t,e,n,s):ud(t,e):i._visibility&2?_s(t,e,n,s):(i._visibility|=2,sl(t,e,n,s,(e.subtreeFlags&10256)!==0||!1)),r&2048&&gb(a,e);break;case 24:_s(t,e,n,s),r&2048&&yb(e.alternate,e);break;default:_s(t,e,n,s)}}function sl(t,e,n,s,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var i=t,a=e,o=n,c=s,u=a.flags;switch(a.tag){case 0:case 11:case 15:sl(i,a,o,c,r),Dh(8,a);break;case 23:break;case 22:var h=a.stateNode;a.memoizedState!==null?h._visibility&2?sl(i,a,o,c,r):ud(i,a):(h._visibility|=2,sl(i,a,o,c,r)),r&&u&2048&&gb(a.alternate,a);break;case 24:sl(i,a,o,c,r),r&&u&2048&&yb(a.alternate,a);break;default:sl(i,a,o,c,r)}e=e.sibling}}function ud(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,r=s.flags;switch(s.tag){case 22:ud(n,s),r&2048&&gb(s.alternate,s);break;case 24:ud(n,s),r&2048&&yb(s.alternate,s);break;default:ud(n,s)}e=e.sibling}}var Bu=8192;function Go(t,e,n){if(t.subtreeFlags&Bu)for(t=t.child;t!==null;)cj(t,e,n),t=t.sibling}function cj(t,e,n){switch(t.tag){case 26:Go(t,e,n),t.flags&Bu&&t.memoizedState!==null&&oL(n,ws,t.memoizedState,t.memoizedProps);break;case 5:Go(t,e,n);break;case 3:case 4:var s=ws;ws=gp(t.stateNode.containerInfo),Go(t,e,n),ws=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=Bu,Bu=16777216,Go(t,e,n),Bu=s):Go(t,e,n));break;default:Go(t,e,n)}}function uj(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function bu(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Lt=s,hj(s,t)}uj(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)dj(t),t=t.sibling}function dj(t){switch(t.tag){case 0:case 11:case 15:bu(t),t.flags&2048&&$i(9,t,t.return);break;case 3:bu(t);break;case 12:bu(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,_m(t)):bu(t);break;default:bu(t)}}function _m(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Lt=s,hj(s,t)}uj(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:$i(8,e,e.return),_m(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,_m(e));break;default:_m(e)}t=t.sibling}}function hj(t,e){for(;Lt!==null;){var n=Lt;switch(n.tag){case 0:case 11:case 15:$i(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Ph(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Lt=s;else e:for(n=t;Lt!==null;){s=Lt;var r=s.sibling,i=s.return;if(nj(s),s===n){Lt=null;break e}if(r!==null){r.return=i,Lt=r;break e}Lt=i}}}var w3={getCacheForType:function(t){var e=Yt(St),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Yt(St).controller.signal}},T3=typeof WeakMap=="function"?WeakMap:Map,be=0,Ve=null,he=null,me=0,Ae=0,Mn=null,Ei=!1,Pc=!1,vb=!1,Dr=0,ut=0,Ki=0,no=0,xb=0,zn=0,Wl=0,dd=null,Sn=null,sx=!1,Tg=0,fj=0,cp=1/0,up=null,Di=null,jt=0,Mi=null,Yl=null,Er=0,rx=0,ix=null,mj=null,hd=0,ax=null;function Gn(){return be&2&&me!==0?me&-me:se.T!==null?bb():TR()}function pj(){if(zn===0)if(!(me&536870912)||ge){var t=Pf;Pf<<=1,!(Pf&3932160)&&(Pf=262144),zn=t}else zn=536870912;return t=Qn.current,t!==null&&(t.flags|=32),zn}function Cn(t,e,n){(t===Ve&&(Ae===2||Ae===9)||t.cancelPendingCommit!==null)&&(Ql(t,0),Si(t,me,zn,!1)),Rh(t,n),(!(be&2)||t!==Ve)&&(t===Ve&&(!(be&2)&&(no|=n),ut===4&&Si(t,me,zn,!1)),or(t))}function gj(t,e,n){if(be&6)throw Error(z(327));var s=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Ih(t,e),r=s?A3(t,e):N0(t,e,!0),i=s;do{if(r===0){Pc&&!s&&Si(t,e,0,!1);break}else{if(n=t.current.alternate,i&&!E3(n)){r=N0(t,e,!1),i=!1;continue}if(r===2){if(i=e,t.errorRecoveryDisabledLanes&i)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=t;r=dd;var c=o.current.memoizedState.isDehydrated;if(c&&(Ql(o,a).flags|=256),a=N0(o,a,!1),a!==2){if(vb&&!c){o.errorRecoveryDisabledLanes|=i,no|=i,r=4;break e}i=Sn,Sn=r,i!==null&&(Sn===null?Sn=i:Sn.push.apply(Sn,i))}r=a}if(i=!1,r!==2)continue}}if(r===1){Ql(t,0),Si(t,e,0,!0);break}e:{switch(s=t,i=r,i){case 0:case 1:throw Error(z(345));case 4:if((e&4194048)!==e)break;case 6:Si(s,e,zn,!Ei);break e;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(z(329))}if((e&62914560)===e&&(r=Tg+300-Bn(),10<r)){if(Si(s,e,zn,!Ei),hg(s,0,!0)!==0)break e;Er=e,s.timeoutHandle=Oj(yS.bind(null,s,n,Sn,up,sx,e,zn,no,Wl,Ei,i,"Throttled",-0,0),r);break e}yS(s,n,Sn,up,sx,e,zn,no,Wl,Ei,i,null,-0,0)}}break}while(!0);or(t)}function yS(t,e,n,s,r,i,a,o,c,u,h,f,m,p){if(t.timeoutHandle=-1,f=e.subtreeFlags,f&8192||(f&16785408)===16785408){f={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vr},cj(e,i,f);var _=(i&62914560)===i?Tg-Bn():(i&4194048)===i?fj-Bn():0;if(_=lL(f,_),_!==null){Er=i,t.cancelPendingCommit=_(xS.bind(null,t,e,i,n,s,r,a,o,c,h,f,null,m,p)),Si(t,i,a,!u);return}}xS(t,e,i,n,s,r,a,o,c)}function E3(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Yn(i(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Si(t,e,n,s){e&=~xb,e&=~no,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var r=e;0<r;){var i=31-Hn(r),a=1<<i;s[i]=-1,r&=~a}n!==0&&_R(t,n,e)}function Eg(){return be&6?!0:(Mh(0),!1)}function _b(){if(he!==null){if(Ae===0)var t=he.return;else t=he,xr=jo=null,ib(t),Pl=null,zd=0,t=he;for(;t!==null;)YC(t.alternate,t),t=t.return;he=null}}function Ql(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,H3(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Er=0,_b(),Ve=t,he=n=wr(t.current,null),me=e,Ae=0,Mn=null,Ei=!1,Pc=Ih(t,e),vb=!1,Wl=zn=xb=no=Ki=ut=0,Sn=dd=null,sx=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var r=31-Hn(s),i=1<<r;e|=t[r],s&=~i}return Dr=e,gg(),n}function yj(t,e){ae=null,se.H=Bd,e===jc||e===vg?(e=YE(),Ae=3):e===J_?(e=YE(),Ae=4):Ae=e===mb?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Mn=e,he===null&&(ut=1,ap(t,us(e,t.current)))}function vj(){var t=Qn.current;return t===null?!0:(me&4194048)===me?ms===null:(me&62914560)===me||me&536870912?t===ms:!1}function xj(){var t=se.H;return se.H=Bd,t===null?Bd:t}function _j(){var t=se.A;return se.A=w3,t}function dp(){ut=4,Ei||(me&4194048)!==me&&Qn.current!==null||(Pc=!0),!(Ki&134217727)&&!(no&134217727)||Ve===null||Si(Ve,me,zn,!1)}function N0(t,e,n){var s=be;be|=2;var r=xj(),i=_j();(Ve!==t||me!==e)&&(up=null,Ql(t,e)),e=!1;var a=ut;e:do try{if(Ae!==0&&he!==null){var o=he,c=Mn;switch(Ae){case 8:_b(),a=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(e=!0);var u=Ae;if(Ae=0,Mn=null,bl(t,o,c,u),n&&Pc){a=0;break e}break;default:u=Ae,Ae=0,Mn=null,bl(t,o,c,u)}}S3(),a=ut;break}catch(h){yj(t,h)}while(!0);return e&&t.shellSuspendCounter++,xr=jo=null,be=s,se.H=r,se.A=i,he===null&&(Ve=null,me=0,gg()),a}function S3(){for(;he!==null;)bj(he)}function A3(t,e){var n=be;be|=2;var s=xj(),r=_j();Ve!==t||me!==e?(up=null,cp=Bn()+500,Ql(t,e)):Pc=Ih(t,e);e:do try{if(Ae!==0&&he!==null){e=he;var i=Mn;t:switch(Ae){case 1:Ae=0,Mn=null,bl(t,e,i,1);break;case 2:case 9:if(WE(i)){Ae=0,Mn=null,vS(e);break}e=function(){Ae!==2&&Ae!==9||Ve!==t||(Ae=7),or(t)},i.then(e,e);break e;case 3:Ae=7;break e;case 4:Ae=5;break e;case 7:WE(i)?(Ae=0,Mn=null,vS(e)):(Ae=0,Mn=null,bl(t,e,i,7));break;case 5:var a=null;switch(he.tag){case 26:a=he.memoizedState;case 5:case 27:var o=he;if(a?Fj(a):o.stateNode.complete){Ae=0,Mn=null;var c=o.sibling;if(c!==null)he=c;else{var u=o.return;u!==null?(he=u,Sg(u)):he=null}break t}}Ae=0,Mn=null,bl(t,e,i,5);break;case 6:Ae=0,Mn=null,bl(t,e,i,6);break;case 8:_b(),ut=6;break e;default:throw Error(z(462))}}N3();break}catch(h){yj(t,h)}while(!0);return xr=jo=null,se.H=s,se.A=r,be=n,he!==null?0:(Ve=null,me=0,gg(),ut)}function N3(){for(;he!==null&&!QV();)bj(he)}function bj(t){var e=WC(t.alternate,t,Dr);t.memoizedProps=t.pendingProps,e===null?Sg(t):he=e}function vS(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=dS(n,e,e.pendingProps,e.type,void 0,me);break;case 11:e=dS(n,e,e.pendingProps,e.type.render,e.ref,me);break;case 5:ib(e);default:YC(n,e),e=he=YR(e,Dr),e=WC(n,e,Dr)}t.memoizedProps=t.pendingProps,e===null?Sg(t):he=e}function bl(t,e,n,s){xr=jo=null,ib(e),Pl=null,zd=0;var r=e.return;try{if(p3(t,r,e,n,me)){ut=1,ap(t,us(n,t.current)),he=null;return}}catch(i){if(r!==null)throw he=r,i;ut=1,ap(t,us(n,t.current)),he=null;return}e.flags&32768?(ge||s===1?t=!0:Pc||me&536870912?t=!1:(Ei=t=!0,(s===2||s===9||s===3||s===6)&&(s=Qn.current,s!==null&&s.tag===13&&(s.flags|=16384))),wj(e,t)):Sg(e)}function Sg(t){var e=t;do{if(e.flags&32768){wj(e,Ei);return}t=e.return;var n=v3(e.alternate,e,Dr);if(n!==null){he=n;return}if(e=e.sibling,e!==null){he=e;return}he=e=t}while(e!==null);ut===0&&(ut=5)}function wj(t,e){do{var n=x3(t.alternate,t);if(n!==null){n.flags&=32767,he=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){he=t;return}he=t=n}while(t!==null);ut=6,he=null}function xS(t,e,n,s,r,i,a,o,c){t.cancelPendingCommit=null;do Ag();while(jt!==0);if(be&6)throw Error(z(327));if(e!==null){if(e===t.current)throw Error(z(177));if(i=e.lanes|e.childLanes,i|=G_,a5(t,n,i,a,o,c),t===Ve&&(he=Ve=null,me=0),Yl=e,Mi=t,Er=n,rx=i,ix=r,mj=s,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,j3(Ym,function(){return Nj(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,e.subtreeFlags&13878||s){s=se.T,se.T=null,r=we.p,we.p=2,a=be,be|=4;try{_3(t,e,n)}finally{be=a,we.p=r,se.T=s}}jt=1,Tj(),Ej(),Sj()}}function Tj(){if(jt===1){jt=0;var t=Mi,e=Yl,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=se.T,se.T=null;var s=we.p;we.p=2;var r=be;be|=4;try{aj(e,t);var i=ux,a=FR(t.containerInfo),o=i.focusedElem,c=i.selectionRange;if(a!==o&&o&&o.ownerDocument&&zR(o.ownerDocument.documentElement,o)){if(c!==null&&H_(o)){var u=c.start,h=c.end;if(h===void 0&&(h=u),"selectionStart"in o)o.selectionStart=u,o.selectionEnd=Math.min(h,o.value.length);else{var f=o.ownerDocument||document,m=f&&f.defaultView||window;if(m.getSelection){var p=m.getSelection(),_=o.textContent.length,w=Math.min(c.start,_),T=c.end===void 0?w:Math.min(c.end,_);!p.extend&&w>T&&(a=T,T=w,w=a);var x=FE(o,w),v=FE(o,T);if(x&&v&&(p.rangeCount!==1||p.anchorNode!==x.node||p.anchorOffset!==x.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var b=f.createRange();b.setStart(x.node,x.offset),p.removeAllRanges(),w>T?(p.addRange(b),p.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),p.addRange(b))}}}}for(f=[],p=o;p=p.parentNode;)p.nodeType===1&&f.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<f.length;o++){var R=f[o];R.element.scrollLeft=R.left,R.element.scrollTop=R.top}}xp=!!cx,ux=cx=null}finally{be=r,we.p=s,se.T=n}}t.current=e,jt=2}}function Ej(){if(jt===2){jt=0;var t=Mi,e=Yl,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=se.T,se.T=null;var s=we.p;we.p=2;var r=be;be|=4;try{tj(t,e.alternate,e)}finally{be=r,we.p=s,se.T=n}}jt=3}}function Sj(){if(jt===4||jt===3){jt=0,XV();var t=Mi,e=Yl,n=Er,s=mj;e.subtreeFlags&10256||e.flags&10256?jt=5:(jt=0,Yl=Mi=null,Aj(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(Di=null),V_(n),e=e.stateNode,qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(Nh,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=se.T,r=we.p,we.p=2,se.T=null;try{for(var i=t.onRecoverableError,a=0;a<s.length;a++){var o=s[a];i(o.value,{componentStack:o.stack})}}finally{se.T=e,we.p=r}}Er&3&&Ag(),or(t),r=t.pendingLanes,n&261930&&r&42?t===ax?hd++:(hd=0,ax=t):hd=0,Mh(0)}}function Aj(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Ph(e)))}function Ag(){return Tj(),Ej(),Sj(),Nj()}function Nj(){if(jt!==5)return!1;var t=Mi,e=rx;rx=0;var n=V_(Er),s=se.T,r=we.p;try{we.p=32>n?32:n,se.T=null,n=ix,ix=null;var i=Mi,a=Er;if(jt=0,Yl=Mi=null,Er=0,be&6)throw Error(z(331));var o=be;if(be|=4,dj(i.current),lj(i,i.current,a,n),be=o,Mh(0,!1),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(Nh,i)}catch{}return!0}finally{we.p=r,se.T=s,Aj(t,e)}}function _S(t,e,n){e=us(n,e),e=Zv(t.stateNode,e,2),t=ki(t,e,2),t!==null&&(Rh(t,2),or(t))}function Ne(t,e,n){if(t.tag===3)_S(t,t,n);else for(;e!==null;){if(e.tag===3){_S(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Di===null||!Di.has(s))){t=us(n,t),n=BC(2),s=ki(e,n,2),s!==null&&(qC(n,s,e,t),Rh(s,2),or(s));break}}e=e.return}}function I0(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new T3;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(vb=!0,r.add(n),t=I3.bind(null,t,e,n),e.then(t,t))}function I3(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Ve===t&&(me&n)===n&&(ut===4||ut===3&&(me&62914560)===me&&300>Bn()-Tg?!(be&2)&&Ql(t,0):xb|=n,Wl===me&&(Wl=0)),or(t)}function Ij(t,e){e===0&&(e=xR()),t=Co(t,e),t!==null&&(Rh(t,e),or(t))}function R3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ij(t,n)}function C3(t,e){var n=0;switch(t.tag){case 31:case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(z(314))}s!==null&&s.delete(e),Ij(t,n)}function j3(t,e){return M_(t,e)}var hp=null,rl=null,ox=!1,fp=!1,R0=!1,Ai=0;function or(t){t!==rl&&t.next===null&&(rl===null?hp=rl=t:rl=rl.next=t),fp=!0,ox||(ox=!0,k3())}function Mh(t,e){if(!R0&&fp){R0=!0;do for(var n=!1,s=hp;s!==null;){if(t!==0){var r=s.pendingLanes;if(r===0)var i=0;else{var a=s.suspendedLanes,o=s.pingedLanes;i=(1<<31-Hn(42|t)+1)-1,i&=r&~(a&~o),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,bS(s,i))}else i=me,i=hg(s,s===Ve?i:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(i&3)||Ih(s,i)||(n=!0,bS(s,i));s=s.next}while(n);R0=!1}}function P3(){Rj()}function Rj(){fp=ox=!1;var t=0;Ai!==0&&q3()&&(t=Ai);for(var e=Bn(),n=null,s=hp;s!==null;){var r=s.next,i=Cj(s,e);i===0?(s.next=null,n===null?hp=r:n.next=r,r===null&&(rl=n)):(n=s,(t!==0||i&3)&&(fp=!0)),s=r}jt!==0&&jt!==5||Mh(t),Ai!==0&&(Ai=0)}function Cj(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes&-62914561;0<i;){var a=31-Hn(i),o=1<<a,c=r[a];c===-1?(!(o&n)||o&s)&&(r[a]=i5(o,e)):c<=e&&(t.expiredLanes|=o),i&=~o}if(e=Ve,n=me,n=hg(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(Ae===2||Ae===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&s0(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Ih(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&s0(s),V_(n)){case 2:case 8:n=yR;break;case 32:n=Ym;break;case 268435456:n=vR;break;default:n=Ym}return s=jj.bind(null,t),n=M_(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&s0(s),t.callbackPriority=2,t.callbackNode=null,2}function jj(t,e){if(jt!==0&&jt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Ag()&&t.callbackNode!==n)return null;var s=me;return s=hg(t,t===Ve?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(gj(t,s,e),Cj(t,Bn()),t.callbackNode!=null&&t.callbackNode===n?jj.bind(null,t):null)}function bS(t,e){if(Ag())return null;gj(t,e,!0)}function k3(){G3(function(){be&6?M_(gR,P3):Rj()})}function bb(){if(Ai===0){var t=Gl;t===0&&(t=jf,jf<<=1,!(jf&261888)&&(jf=256)),Ai=t}return Ai}function wS(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:dm(""+t)}function TS(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function D3(t,e,n,s,r){if(e==="submit"&&n&&n.stateNode===r){var i=wS((r[jn]||null).action),a=s.submitter;a&&(e=(e=a[jn]||null)?wS(e.formAction):a.getAttribute("formAction"),e!==null&&(i=e,a=null));var o=new fg("action","action",null,s,r);t.push({event:o,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Ai!==0){var c=a?TS(r,a):new FormData(r);Xv(n,{pending:!0,data:c,method:r.method,action:i},null,c)}}else typeof i=="function"&&(o.preventDefault(),c=a?TS(r,a):new FormData(r),Xv(n,{pending:!0,data:c,method:r.method,action:i},i,c))},currentTarget:r}]})}}for(var C0=0;C0<Uv.length;C0++){var j0=Uv[C0],M3=j0.toLowerCase(),O3=j0[0].toUpperCase()+j0.slice(1);Rs(M3,"on"+O3)}Rs(qR,"onAnimationEnd");Rs(HR,"onAnimationIteration");Rs(GR,"onAnimationStart");Rs("dblclick","onDoubleClick");Rs("focusin","onFocus");Rs("focusout","onBlur");Rs(J5,"onTransitionRun");Rs(Z5,"onTransitionStart");Rs(e3,"onTransitionCancel");Rs($R,"onTransitionEnd");ql("onMouseEnter",["mouseout","mouseover"]);ql("onMouseLeave",["mouseout","mouseover"]);ql("onPointerEnter",["pointerout","pointerover"]);ql("onPointerLeave",["pointerout","pointerover"]);No("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));No("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));No("onBeforeInput",["compositionend","keypress","textInput","paste"]);No("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));No("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));No("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qd));function Pj(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var a=s.length-1;0<=a;a--){var o=s[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==i&&r.isPropagationStopped())break e;i=o,r.currentTarget=u;try{i(r)}catch(h){Xm(h)}r.currentTarget=null,i=c}else for(a=0;a<s.length;a++){if(o=s[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==i&&r.isPropagationStopped())break e;i=o,r.currentTarget=u;try{i(r)}catch(h){Xm(h)}r.currentTarget=null,i=c}}}}function ue(t,e){var n=e[jv];n===void 0&&(n=e[jv]=new Set);var s=t+"__bubble";n.has(s)||(kj(e,t,2,!1),n.add(s))}function P0(t,e,n){var s=0;e&&(s|=4),kj(n,t,s,e)}var Ff="_reactListening"+Math.random().toString(36).slice(2);function wb(t){if(!t[Ff]){t[Ff]=!0,ER.forEach(function(n){n!=="selectionchange"&&(V3.has(n)||P0(n,!1,t),P0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ff]||(e[Ff]=!0,P0("selectionchange",!1,e))}}function kj(t,e,n,s){switch($j(e)){case 2:var r=dL;break;case 8:r=hL;break;default:r=Ab}n=r.bind(null,e,n,t),r=void 0,!Ov||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function k0(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var o=s.stateNode.containerInfo;if(o===r)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;o!==null;){if(a=hl(o),a===null)return;if(c=a.tag,c===5||c===6||c===26||c===27){s=i=a;continue e}o=o.parentNode}}s=s.return}PR(function(){var u=i,h=z_(n),f=[];e:{var m=KR.get(t);if(m!==void 0){var p=fg,_=t;switch(t){case"keypress":if(fm(n)===0)break e;case"keydown":case"keyup":p=C5;break;case"focusin":_="focus",p=l0;break;case"focusout":_="blur",p=l0;break;case"beforeblur":case"afterblur":p=l0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=jE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=v5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=k5;break;case qR:case HR:case GR:p=b5;break;case $R:p=M5;break;case"scroll":case"scrollend":p=g5;break;case"wheel":p=V5;break;case"copy":case"cut":case"paste":p=T5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=kE;break;case"toggle":case"beforetoggle":p=U5}var w=(e&4)!==0,T=!w&&(t==="scroll"||t==="scrollend"),x=w?m!==null?m+"Capture":null:m;w=[];for(var v=u,b;v!==null;){var R=v;if(b=R.stateNode,R=R.tag,R!==5&&R!==26&&R!==27||b===null||x===null||(R=Md(v,x),R!=null&&w.push(Hd(v,R,b))),T)break;v=v.return}0<w.length&&(m=new p(m,_,null,n,h),f.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==Mv&&(_=n.relatedTarget||n.fromElement)&&(hl(_)||_[Ic]))break e;if((p||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,p?(_=n.relatedTarget||n.toElement,p=u,_=_?hl(_):null,_!==null&&(T=Ah(_),w=_.tag,_!==T||w!==5&&w!==27&&w!==6)&&(_=null)):(p=null,_=u),p!==_)){if(w=jE,R="onMouseLeave",x="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(w=kE,R="onPointerLeave",x="onPointerEnter",v="pointer"),T=p==null?m:zu(p),b=_==null?m:zu(_),m=new w(R,v+"leave",p,n,h),m.target=T,m.relatedTarget=b,R=null,hl(h)===u&&(w=new w(x,v+"enter",_,n,h),w.target=b,w.relatedTarget=T,R=w),T=R,p&&_)t:{for(w=L3,x=p,v=_,b=0,R=x;R;R=w(R))b++;R=0;for(var D=v;D;D=w(D))R++;for(;0<b-R;)x=w(x),b--;for(;0<R-b;)v=w(v),R--;for(;b--;){if(x===v||v!==null&&x===v.alternate){w=x;break t}x=w(x),v=w(v)}w=null}else w=null;p!==null&&ES(f,m,p,w,!1),_!==null&&T!==null&&ES(f,T,_,w,!0)}}e:{if(m=u?zu(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var M=VE;else if(OE(m))if(LR)M=Y5;else{M=K5;var A=$5}else p=m.nodeName,!p||p.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?u&&U_(u.elementType)&&(M=VE):M=W5;if(M&&(M=M(t,u))){VR(f,M,n,h);break e}A&&A(t,m,u),t==="focusout"&&u&&m.type==="number"&&u.memoizedProps.value!=null&&Dv(m,"number",m.value)}switch(A=u?zu(u):window,t){case"focusin":(OE(A)||A.contentEditable==="true")&&(pl=A,Vv=u,sd=null);break;case"focusout":sd=Vv=pl=null;break;case"mousedown":Lv=!0;break;case"contextmenu":case"mouseup":case"dragend":Lv=!1,BE(f,n,h);break;case"selectionchange":if(X5)break;case"keydown":case"keyup":BE(f,n,h)}var E;if(q_)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else ml?MR(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(DR&&n.locale!=="ko"&&(ml||N!=="onCompositionStart"?N==="onCompositionEnd"&&ml&&(E=kR()):(Ti=h,F_="value"in Ti?Ti.value:Ti.textContent,ml=!0)),A=mp(u,N),0<A.length&&(N=new PE(N,t,null,n,h),f.push({event:N,listeners:A}),E?N.data=E:(E=OR(n),E!==null&&(N.data=E)))),(E=F5?B5(t,n):q5(t,n))&&(N=mp(u,"onBeforeInput"),0<N.length&&(A=new PE("onBeforeInput","beforeinput",null,n,h),f.push({event:A,listeners:N}),A.data=E)),D3(f,t,u,n,h)}Pj(f,e)})}function Hd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function mp(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||i===null||(r=Md(t,n),r!=null&&s.unshift(Hd(t,r,i)),r=Md(t,e),r!=null&&s.push(Hd(t,r,i))),t.tag===3)return s;t=t.return}return[]}function L3(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ES(t,e,n,s,r){for(var i=e._reactName,a=[];n!==null&&n!==s;){var o=n,c=o.alternate,u=o.stateNode;if(o=o.tag,c!==null&&c===s)break;o!==5&&o!==26&&o!==27||u===null||(c=u,r?(u=Md(n,i),u!=null&&a.unshift(Hd(n,u,c))):r||(u=Md(n,i),u!=null&&a.push(Hd(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var U3=/\r\n?/g,z3=/\u0000|\uFFFD/g;function SS(t){return(typeof t=="string"?t:""+t).replace(U3,`
`).replace(z3,"")}function Dj(t,e){return e=SS(e),SS(t)===e}function Ce(t,e,n,s,r,i){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||Hl(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&Hl(t,""+s);break;case"className":Df(t,"class",s);break;case"tabIndex":Df(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Df(t,n,s);break;case"style":jR(t,s,i);break;case"data":if(e!=="object"){Df(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=dm(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(e!=="input"&&Ce(t,e,"name",r.name,r,null),Ce(t,e,"formEncType",r.formEncType,r,null),Ce(t,e,"formMethod",r.formMethod,r,null),Ce(t,e,"formTarget",r.formTarget,r,null)):(Ce(t,e,"encType",r.encType,r,null),Ce(t,e,"method",r.method,r,null),Ce(t,e,"target",r.target,r,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=dm(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=vr);break;case"onScroll":s!=null&&ue("scroll",t);break;case"onScrollEnd":s!=null&&ue("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(z(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(z(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=dm(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":ue("beforetoggle",t),ue("toggle",t),um(t,"popover",s);break;case"xlinkActuate":lr(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":lr(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":lr(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":lr(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":lr(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":lr(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":lr(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":lr(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":lr(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":um(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=m5.get(n)||n,um(t,n,s))}}function lx(t,e,n,s,r,i){switch(n){case"style":jR(t,s,i);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(z(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(z(60));t.innerHTML=n}}break;case"children":typeof s=="string"?Hl(t,s):(typeof s=="number"||typeof s=="bigint")&&Hl(t,""+s);break;case"onScroll":s!=null&&ue("scroll",t);break;case"onScrollEnd":s!=null&&ue("scrollend",t);break;case"onClick":s!=null&&(t.onclick=vr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!SR.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),i=t[jn]||null,i=i!=null?i[n]:null,typeof i=="function"&&t.removeEventListener(e,i,r),typeof s=="function")){typeof i!="function"&&i!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,r);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):um(t,n,s)}}}function Xt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ue("error",t),ue("load",t);var s=!1,r=!1,i;for(i in n)if(n.hasOwnProperty(i)){var a=n[i];if(a!=null)switch(i){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(z(137,e));default:Ce(t,e,i,a,n,null)}}r&&Ce(t,e,"srcSet",n.srcSet,n,null),s&&Ce(t,e,"src",n.src,n,null);return;case"input":ue("invalid",t);var o=i=a=r=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var h=n[s];if(h!=null)switch(s){case"name":r=h;break;case"type":a=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":i=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(z(137,e));break;default:Ce(t,e,s,h,n,null)}}IR(t,i,o,c,u,a,r,!1);return;case"select":ue("invalid",t),s=a=i=null;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],o!=null))switch(r){case"value":i=o;break;case"defaultValue":a=o;break;case"multiple":s=o;default:Ce(t,e,r,o,n,null)}e=i,n=a,t.multiple=!!s,e!=null?Rl(t,!!s,e,!1):n!=null&&Rl(t,!!s,n,!0);return;case"textarea":ue("invalid",t),i=r=s=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":s=o;break;case"defaultValue":r=o;break;case"children":i=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(z(91));break;default:Ce(t,e,a,o,n,null)}CR(t,s,r,i);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ce(t,e,c,s,n,null)}return;case"dialog":ue("beforetoggle",t),ue("toggle",t),ue("cancel",t),ue("close",t);break;case"iframe":case"object":ue("load",t);break;case"video":case"audio":for(s=0;s<qd.length;s++)ue(qd[s],t);break;case"image":ue("error",t),ue("load",t);break;case"details":ue("toggle",t);break;case"embed":case"source":case"link":ue("error",t),ue("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(s=n[u],s!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(z(137,e));default:Ce(t,e,u,s,n,null)}return;default:if(U_(e)){for(h in n)n.hasOwnProperty(h)&&(s=n[h],s!==void 0&&lx(t,e,h,s,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(s=n[o],s!=null&&Ce(t,e,o,s,n,null))}function F3(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,i=null,a=null,o=null,c=null,u=null,h=null;for(p in n){var f=n[p];if(n.hasOwnProperty(p)&&f!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":c=f;default:s.hasOwnProperty(p)||Ce(t,e,p,null,s,f)}}for(var m in s){var p=s[m];if(f=n[m],s.hasOwnProperty(m)&&(p!=null||f!=null))switch(m){case"type":i=p;break;case"name":r=p;break;case"checked":u=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":o=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(z(137,e));break;default:p!==f&&Ce(t,e,m,p,s,f)}}kv(t,a,o,c,u,h,i,r);return;case"select":p=a=o=m=null;for(i in n)if(c=n[i],n.hasOwnProperty(i)&&c!=null)switch(i){case"value":break;case"multiple":p=c;default:s.hasOwnProperty(i)||Ce(t,e,i,null,s,c)}for(r in s)if(i=s[r],c=n[r],s.hasOwnProperty(r)&&(i!=null||c!=null))switch(r){case"value":m=i;break;case"defaultValue":o=i;break;case"multiple":a=i;default:i!==c&&Ce(t,e,r,i,s,c)}e=o,n=a,s=p,m!=null?Rl(t,!!n,m,!1):!!s!=!!n&&(e!=null?Rl(t,!!n,e,!0):Rl(t,!!n,n?[]:"",!1));return;case"textarea":p=m=null;for(o in n)if(r=n[o],n.hasOwnProperty(o)&&r!=null&&!s.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:Ce(t,e,o,null,s,r)}for(a in s)if(r=s[a],i=n[a],s.hasOwnProperty(a)&&(r!=null||i!=null))switch(a){case"value":m=r;break;case"defaultValue":p=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(z(91));break;default:r!==i&&Ce(t,e,a,r,s,i)}RR(t,m,p);return;case"option":for(var _ in n)if(m=n[_],n.hasOwnProperty(_)&&m!=null&&!s.hasOwnProperty(_))switch(_){case"selected":t.selected=!1;break;default:Ce(t,e,_,null,s,m)}for(c in s)if(m=s[c],p=n[c],s.hasOwnProperty(c)&&m!==p&&(m!=null||p!=null))switch(c){case"selected":t.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Ce(t,e,c,m,s,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var w in n)m=n[w],n.hasOwnProperty(w)&&m!=null&&!s.hasOwnProperty(w)&&Ce(t,e,w,null,s,m);for(u in s)if(m=s[u],p=n[u],s.hasOwnProperty(u)&&m!==p&&(m!=null||p!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(z(137,e));break;default:Ce(t,e,u,m,s,p)}return;default:if(U_(e)){for(var T in n)m=n[T],n.hasOwnProperty(T)&&m!==void 0&&!s.hasOwnProperty(T)&&lx(t,e,T,void 0,s,m);for(h in s)m=s[h],p=n[h],!s.hasOwnProperty(h)||m===p||m===void 0&&p===void 0||lx(t,e,h,m,s,p);return}}for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!=null&&!s.hasOwnProperty(x)&&Ce(t,e,x,null,s,m);for(f in s)m=s[f],p=n[f],!s.hasOwnProperty(f)||m===p||m==null&&p==null||Ce(t,e,f,m,s,p)}function AS(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function B3(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),s=0;s<n.length;s++){var r=n[s],i=r.transferSize,a=r.initiatorType,o=r.duration;if(i&&o&&AS(a)){for(a=0,o=r.responseEnd,s+=1;s<n.length;s++){var c=n[s],u=c.startTime;if(u>o)break;var h=c.transferSize,f=c.initiatorType;h&&AS(f)&&(c=c.responseEnd,a+=h*(c<o?1:(o-u)/(c-u)))}if(--s,e+=8*(i+a)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var cx=null,ux=null;function pp(t){return t.nodeType===9?t:t.ownerDocument}function NS(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mj(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function dx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var D0=null;function q3(){var t=window.event;return t&&t.type==="popstate"?t===D0?!1:(D0=t,!0):(D0=null,!1)}var Oj=typeof setTimeout=="function"?setTimeout:void 0,H3=typeof clearTimeout=="function"?clearTimeout:void 0,IS=typeof Promise=="function"?Promise:void 0,G3=typeof queueMicrotask=="function"?queueMicrotask:typeof IS<"u"?function(t){return IS.resolve(null).then(t).catch($3)}:Oj;function $3(t){setTimeout(function(){throw t})}function ua(t){return t==="head"}function RS(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(s===0){t.removeChild(r),Jl(e);return}s--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")s++;else if(n==="html")fd(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,fd(n);for(var i=n.firstChild;i;){var a=i.nextSibling,o=i.nodeName;i[Ch]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&i.rel.toLowerCase()==="stylesheet"||n.removeChild(i),i=a}}else n==="body"&&fd(t.ownerDocument.body);n=r}while(n);Jl(e)}function CS(t,e){var n=t;t=0;do{var s=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=s}while(n)}function hx(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":hx(n),L_(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function K3(t,e,n,s){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[Ch])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(i=t.getAttribute("rel"),i==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(i!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(i=t.getAttribute("src"),(i!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&i&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var i=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===i)return t}else return t;if(t=ps(t.nextSibling),t===null)break}return null}function W3(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=ps(t.nextSibling),t===null))return null;return t}function Vj(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=ps(t.nextSibling),t===null))return null;return t}function fx(t){return t.data==="$?"||t.data==="$~"}function mx(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Y3(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function ps(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var px=null;function jS(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return ps(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function PS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function Lj(t,e,n){switch(e=pp(n),t){case"html":if(t=e.documentElement,!t)throw Error(z(452));return t;case"head":if(t=e.head,!t)throw Error(z(453));return t;case"body":if(t=e.body,!t)throw Error(z(454));return t;default:throw Error(z(451))}}function fd(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);L_(t)}var ys=new Map,kS=new Set;function gp(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Gr=we.d;we.d={f:Q3,r:X3,D:J3,C:Z3,L:eL,m:tL,X:sL,S:nL,M:rL};function Q3(){var t=Gr.f(),e=Eg();return t||e}function X3(t){var e=Rc(t);e!==null&&e.tag===5&&e.type==="form"?jC(e):Gr.r(t)}var kc=typeof document>"u"?null:document;function Uj(t,e,n){var s=kc;if(s&&typeof e=="string"&&e){var r=cs(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),kS.has(r)||(kS.add(r),t={rel:t,crossOrigin:n,href:e},s.querySelector(r)===null&&(e=s.createElement("link"),Xt(e,"link",t),zt(e),s.head.appendChild(e)))}}function J3(t){Gr.D(t),Uj("dns-prefetch",t,null)}function Z3(t,e){Gr.C(t,e),Uj("preconnect",t,e)}function eL(t,e,n){Gr.L(t,e,n);var s=kc;if(s&&t&&e){var r='link[rel="preload"][as="'+cs(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+cs(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+cs(n.imageSizes)+'"]')):r+='[href="'+cs(t)+'"]';var i=r;switch(e){case"style":i=Xl(t);break;case"script":i=Dc(t)}ys.has(i)||(t=Ye({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),ys.set(i,t),s.querySelector(r)!==null||e==="style"&&s.querySelector(Oh(i))||e==="script"&&s.querySelector(Vh(i))||(e=s.createElement("link"),Xt(e,"link",t),zt(e),s.head.appendChild(e)))}}function tL(t,e){Gr.m(t,e);var n=kc;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+cs(s)+'"][href="'+cs(t)+'"]',i=r;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Dc(t)}if(!ys.has(i)&&(t=Ye({rel:"modulepreload",href:t},e),ys.set(i,t),n.querySelector(r)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Vh(i)))return}s=n.createElement("link"),Xt(s,"link",t),zt(s),n.head.appendChild(s)}}}function nL(t,e,n){Gr.S(t,e,n);var s=kc;if(s&&t){var r=Il(s).hoistableStyles,i=Xl(t);e=e||"default";var a=r.get(i);if(!a){var o={loading:0,preload:null};if(a=s.querySelector(Oh(i)))o.loading=5;else{t=Ye({rel:"stylesheet",href:t,"data-precedence":e},n),(n=ys.get(i))&&Tb(t,n);var c=a=s.createElement("link");zt(c),Xt(c,"link",t),c._p=new Promise(function(u,h){c.onload=u,c.onerror=h}),c.addEventListener("load",function(){o.loading|=1}),c.addEventListener("error",function(){o.loading|=2}),o.loading|=4,bm(a,e,s)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(i,a)}}}function sL(t,e){Gr.X(t,e);var n=kc;if(n&&t){var s=Il(n).hoistableScripts,r=Dc(t),i=s.get(r);i||(i=n.querySelector(Vh(r)),i||(t=Ye({src:t,async:!0},e),(e=ys.get(r))&&Eb(t,e),i=n.createElement("script"),zt(i),Xt(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}}function rL(t,e){Gr.M(t,e);var n=kc;if(n&&t){var s=Il(n).hoistableScripts,r=Dc(t),i=s.get(r);i||(i=n.querySelector(Vh(r)),i||(t=Ye({src:t,async:!0,type:"module"},e),(e=ys.get(r))&&Eb(t,e),i=n.createElement("script"),zt(i),Xt(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}}function DS(t,e,n,s){var r=(r=Ci.current)?gp(r):null;if(!r)throw Error(z(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Xl(n.href),n=Il(r).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Xl(n.href);var i=Il(r).hoistableStyles,a=i.get(t);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(t,a),(i=r.querySelector(Oh(t)))&&!i._p&&(a.instance=i,a.state.loading=5),ys.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ys.set(t,n),i||iL(r,t,n,a.state))),e&&s===null)throw Error(z(528,""));return a}if(e&&s!==null)throw Error(z(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Dc(n),n=Il(r).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(z(444,t))}}function Xl(t){return'href="'+cs(t)+'"'}function Oh(t){return'link[rel="stylesheet"]['+t+"]"}function zj(t){return Ye({},t,{"data-precedence":t.precedence,precedence:null})}function iL(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),Xt(e,"link",n),zt(e),t.head.appendChild(e))}function Dc(t){return'[src="'+cs(t)+'"]'}function Vh(t){return"script[async]"+t}function MS(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+cs(n.href)+'"]');if(s)return e.instance=s,zt(s),s;var r=Ye({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),zt(s),Xt(s,"style",r),bm(s,n.precedence,t),e.instance=s;case"stylesheet":r=Xl(n.href);var i=t.querySelector(Oh(r));if(i)return e.state.loading|=4,e.instance=i,zt(i),i;s=zj(n),(r=ys.get(r))&&Tb(s,r),i=(t.ownerDocument||t).createElement("link"),zt(i);var a=i;return a._p=new Promise(function(o,c){a.onload=o,a.onerror=c}),Xt(i,"link",s),e.state.loading|=4,bm(i,n.precedence,t),e.instance=i;case"script":return i=Dc(n.src),(r=t.querySelector(Vh(i)))?(e.instance=r,zt(r),r):(s=n,(r=ys.get(i))&&(s=Ye({},n),Eb(s,r)),t=t.ownerDocument||t,r=t.createElement("script"),zt(r),Xt(r,"link",s),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(z(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,bm(s,n.precedence,t));return e.instance}function bm(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=s.length?s[s.length-1]:null,i=r,a=0;a<s.length;a++){var o=s[a];if(o.dataset.precedence===e)i=o;else if(i!==r)break}i?i.parentNode.insertBefore(t,i.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Tb(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Eb(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var wm=null;function OS(t,e,n){if(wm===null){var s=new Map,r=wm=new Map;r.set(n,s)}else r=wm,s=r.get(n),s||(s=new Map,r.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var i=n[r];if(!(i[Ch]||i[$t]||t==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var a=i.getAttribute(e)||"";a=t+a;var o=s.get(a);o?o.push(i):s.set(a,[i])}}return s}function VS(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function aL(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Fj(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function oL(t,e,n,s){if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=Xl(s.href),i=e.querySelector(Oh(r));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=yp.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=i,zt(i);return}i=e.ownerDocument||e,s=zj(s),(r=ys.get(r))&&Tb(s,r),i=i.createElement("link"),zt(i);var a=i;a._p=new Promise(function(o,c){a.onload=o,a.onerror=c}),Xt(i,"link",s),n.instance=i}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=yp.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var M0=0;function lL(t,e){return t.stylesheets&&t.count===0&&Tm(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var s=setTimeout(function(){if(t.stylesheets&&Tm(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4+e);0<t.imgBytes&&M0===0&&(M0=62500*B3());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Tm(t,t.stylesheets),t.unsuspend)){var i=t.unsuspend;t.unsuspend=null,i()}},(t.imgBytes>M0?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s),clearTimeout(r)}}:null}function yp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Tm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var vp=null;function Tm(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,vp=new Map,e.forEach(cL,t),vp=null,yp.call(t))}function cL(t,e){if(!(e.state.loading&4)){var n=vp.get(t);if(n)var s=n.get(null);else{n=new Map,vp.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<r.length;i++){var a=r[i];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),s=a)}s&&n.set(null,s)}r=e.instance,a=r.getAttribute("data-precedence"),i=n.get(a)||s,i===s&&n.set(null,r),n.set(a,r),this.count++,s=yp.bind(this),r.addEventListener("load",s),r.addEventListener("error",s),i?i.parentNode.insertBefore(r,i.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var Gd={$$typeof:yr,Provider:null,Consumer:null,_currentValue:Ja,_currentValue2:Ja,_threadCount:0};function uL(t,e,n,s,r,i,a,o,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=r0(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=r0(0),this.hiddenUpdates=r0(null),this.identifierPrefix=s,this.onUncaughtError=r,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function Bj(t,e,n,s,r,i,a,o,c,u,h,f){return t=new uL(t,e,n,a,c,u,h,f,o),e=1,i===!0&&(e|=24),i=Un(3,null,null,e),t.current=i,i.stateNode=t,e=Q_(),e.refCount++,t.pooledCache=e,e.refCount++,i.memoizedState={element:s,isDehydrated:n,cache:e},Z_(i),t}function qj(t){return t?(t=vl,t):vl}function Hj(t,e,n,s,r,i){r=qj(r),s.context===null?s.context=r:s.pendingContext=r,s=Pi(e),s.payload={element:n},i=i===void 0?null:i,i!==null&&(s.callback=i),n=ki(t,s,e),n!==null&&(Cn(n,t,e),id(n,t,e))}function LS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Sb(t,e){LS(t,e),(t=t.alternate)&&LS(t,e)}function Gj(t){if(t.tag===13||t.tag===31){var e=Co(t,67108864);e!==null&&Cn(e,t,67108864),Sb(t,67108864)}}function US(t){if(t.tag===13||t.tag===31){var e=Gn();e=O_(e);var n=Co(t,e);n!==null&&Cn(n,t,e),Sb(t,e)}}var xp=!0;function dL(t,e,n,s){var r=se.T;se.T=null;var i=we.p;try{we.p=2,Ab(t,e,n,s)}finally{we.p=i,se.T=r}}function hL(t,e,n,s){var r=se.T;se.T=null;var i=we.p;try{we.p=8,Ab(t,e,n,s)}finally{we.p=i,se.T=r}}function Ab(t,e,n,s){if(xp){var r=gx(s);if(r===null)k0(t,e,s,_p,n),zS(t,s);else if(mL(r,t,e,n,s))s.stopPropagation();else if(zS(t,s),e&4&&-1<fL.indexOf(t)){for(;r!==null;){var i=Rc(r);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var a=ka(i.pendingLanes);if(a!==0){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var c=1<<31-Hn(a);o.entanglements[1]|=c,a&=~c}or(i),!(be&6)&&(cp=Bn()+500,Mh(0))}}break;case 31:case 13:o=Co(i,2),o!==null&&Cn(o,i,2),Eg(),Sb(i,2)}if(i=gx(s),i===null&&k0(t,e,s,_p,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else k0(t,e,s,null,n)}}function gx(t){return t=z_(t),Nb(t)}var _p=null;function Nb(t){if(_p=null,t=hl(t),t!==null){var e=Ah(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=dR(e),t!==null)return t;t=null}else if(n===31){if(t=hR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return _p=t,null}function $j(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(JV()){case gR:return 2;case yR:return 8;case Ym:case ZV:return 32;case vR:return 268435456;default:return 32}default:return 32}}var yx=!1,Oi=null,Vi=null,Li=null,$d=new Map,Kd=new Map,_i=[],fL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zS(t,e){switch(t){case"focusin":case"focusout":Oi=null;break;case"dragenter":case"dragleave":Vi=null;break;case"mouseover":case"mouseout":Li=null;break;case"pointerover":case"pointerout":$d.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kd.delete(e.pointerId)}}function wu(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Rc(e),e!==null&&Gj(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function mL(t,e,n,s,r){switch(e){case"focusin":return Oi=wu(Oi,t,e,n,s,r),!0;case"dragenter":return Vi=wu(Vi,t,e,n,s,r),!0;case"mouseover":return Li=wu(Li,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return $d.set(i,wu($d.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Kd.set(i,wu(Kd.get(i)||null,t,e,n,s,r)),!0}return!1}function Kj(t){var e=hl(t.target);if(e!==null){var n=Ah(e);if(n!==null){if(e=n.tag,e===13){if(e=dR(n),e!==null){t.blockedOn=e,EE(t.priority,function(){US(n)});return}}else if(e===31){if(e=hR(n),e!==null){t.blockedOn=e,EE(t.priority,function(){US(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Em(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gx(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Mv=s,n.target.dispatchEvent(s),Mv=null}else return e=Rc(n),e!==null&&Gj(e),t.blockedOn=n,!1;e.shift()}return!0}function FS(t,e,n){Em(t)&&n.delete(e)}function pL(){yx=!1,Oi!==null&&Em(Oi)&&(Oi=null),Vi!==null&&Em(Vi)&&(Vi=null),Li!==null&&Em(Li)&&(Li=null),$d.forEach(FS),Kd.forEach(FS)}function Bf(t,e){t.blockedOn===e&&(t.blockedOn=null,yx||(yx=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,pL)))}var qf=null;function BS(t){qf!==t&&(qf=t,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,function(){qf===t&&(qf=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],r=t[e+2];if(typeof s!="function"){if(Nb(s||n)===null)continue;break}var i=Rc(n);i!==null&&(t.splice(e,3),e-=3,Xv(i,{pending:!0,data:r,method:n.method,action:s},s,r))}}))}function Jl(t){function e(c){return Bf(c,t)}Oi!==null&&Bf(Oi,t),Vi!==null&&Bf(Vi,t),Li!==null&&Bf(Li,t),$d.forEach(e),Kd.forEach(e);for(var n=0;n<_i.length;n++){var s=_i[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<_i.length&&(n=_i[0],n.blockedOn===null);)Kj(n),n.blockedOn===null&&_i.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var r=n[s],i=n[s+1],a=r[jn]||null;if(typeof i=="function")a||BS(n);else if(a){var o=null;if(i&&i.hasAttribute("formAction")){if(r=i,a=i[jn]||null)o=a.formAction;else if(Nb(r)!==null)continue}else o=a.action;typeof o=="function"?n[s+1]=o:(n.splice(s,3),s-=3),BS(n)}}}function Wj(){function t(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(a){return r=a})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),s||setTimeout(n,20)}function n(){if(!s&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){s=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function Ib(t){this._internalRoot=t}Ng.prototype.render=Ib.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));var n=e.current,s=Gn();Hj(n,s,t,e,null,null)};Ng.prototype.unmount=Ib.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hj(t.current,2,null,t,null,null),Eg(),e[Ic]=null}};function Ng(t){this._internalRoot=t}Ng.prototype.unstable_scheduleHydration=function(t){if(t){var e=TR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_i.length&&e!==0&&e<_i[n].priority;n++);_i.splice(n,0,t),n===0&&Kj(t)}};var qS=cR.version;if(qS!=="19.2.0")throw Error(z(527,qS,"19.2.0"));we.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=GV(e),t=t!==null?fR(t):null,t=t===null?null:t.stateNode,t};var gL={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hf.isDisabled&&Hf.supportsFiber)try{Nh=Hf.inject(gL),qn=Hf}catch{}}ug.createRoot=function(t,e){if(!uR(t))throw Error(z(299));var n=!1,s="",r=UC,i=zC,a=FC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(i=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=Bj(t,1,!1,null,null,n,s,null,r,i,a,Wj),t[Ic]=e.current,wb(t),new Ib(e)};ug.hydrateRoot=function(t,e,n){if(!uR(t))throw Error(z(299));var s=!1,r="",i=UC,a=zC,o=FC,c=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),e=Bj(t,1,!0,e,n??null,s,r,c,i,a,o,Wj),e.context=qj(null),n=e.current,s=Gn(),s=O_(s),r=Pi(s),r.callback=null,ki(n,r,s),n=s,e.current.lanes=n,Rh(e,n),or(e),t[Ic]=e.current,wb(t),new Ng(e)};ug.version="19.2.0";function Yj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yj)}catch(t){console.error(t)}}Yj(),sR.exports=ug;var yL=sR.exports;const vL=K2(yL);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var HS="popstate";function xL(t={}){function e(r,i){let{pathname:a="/",search:o="",hash:c=""}=Po(r.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),vx("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){let a=r.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let c=r.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof i=="string"?i:Wd(i))}function s(r,i){Xn(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return bL(e,n,s,t)}function nt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Xn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _L(){return Math.random().toString(36).substring(2,10)}function GS(t,e){return{usr:t.state,key:t.key,idx:e}}function vx(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Po(e):e,state:n,key:e&&e.key||s||_L()}}function Wd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Po(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function bL(t,e,n,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,a=r.history,o="POP",c=null,u=h();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function h(){return(a.state||{idx:null}).idx}function f(){o="POP";let T=h(),x=T==null?null:T-u;u=T,c&&c({action:o,location:w.location,delta:x})}function m(T,x){o="PUSH";let v=vx(w.location,T,x);n&&n(v,T),u=h()+1;let b=GS(v,u),R=w.createHref(v);try{a.pushState(b,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(R)}i&&c&&c({action:o,location:w.location,delta:1})}function p(T,x){o="REPLACE";let v=vx(w.location,T,x);n&&n(v,T),u=h();let b=GS(v,u),R=w.createHref(v);a.replaceState(b,"",R),i&&c&&c({action:o,location:w.location,delta:0})}function _(T){return wL(T)}let w={get action(){return o},get location(){return t(r,a)},listen(T){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(HS,f),c=T,()=>{r.removeEventListener(HS,f),c=null}},createHref(T){return e(r,T)},createURL:_,encodeLocation(T){let x=_(T);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:p,go(T){return a.go(T)}};return w}function wL(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),nt(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:Wd(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function Qj(t,e,n="/"){return TL(t,e,n,!1)}function TL(t,e,n,s){let r=typeof e=="string"?Po(e):e,i=Mr(r.pathname||"/",n);if(i==null)return null;let a=Xj(t);EL(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let u=ML(i);o=kL(a[c],u,s)}return o}function Xj(t,e=[],n=[],s="",r=!1){let i=(a,o,c=r,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(s)&&c)return;nt(h.relativePath.startsWith(s),`Absolute route path "${h.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(s.length)}let f=Sr([s,h.relativePath]),m=n.concat(h);a.children&&a.children.length>0&&(nt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Xj(a.children,e,m,f,c)),!(a.path==null&&!a.index)&&e.push({path:f,score:jL(f,a.index),routesMeta:m})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,o);else for(let u of Jj(a.path))i(a,o,!0,u)}),e}function Jj(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let a=Jj(s.join("/")),o=[];return o.push(...a.map(c=>c===""?i:[i,c].join("/"))),r&&o.push(...a),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function EL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:PL(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var SL=/^:[\w-]+$/,AL=3,NL=2,IL=1,RL=10,CL=-2,$S=t=>t==="*";function jL(t,e){let n=t.split("/"),s=n.length;return n.some($S)&&(s+=CL),e&&(s+=NL),n.filter(r=>!$S(r)).reduce((r,i)=>r+(SL.test(i)?AL:i===""?IL:RL),s)}function PL(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function kL(t,e,n=!1){let{routesMeta:s}=t,r={},i="/",a=[];for(let o=0;o<s.length;++o){let c=s[o],u=o===s.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=bp({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),m=c.route;if(!f&&u&&n&&!s[s.length-1].route.index&&(f=bp({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(r,f.params),a.push({params:r,pathname:Sr([i,f.pathname]),pathnameBase:zL(Sr([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Sr([i,f.pathnameBase]))}return a}function bp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=DL(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:s.reduce((u,{paramName:h,isOptional:f},m)=>{if(h==="*"){let _=o[m]||"";a=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const p=o[m];return f&&!p?u[h]=void 0:u[h]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:t}}function DL(t,e=!1,n=!0){Xn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function ML(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Mr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}var OL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VL=t=>OL.test(t);function LL(t,e="/"){let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?Po(t):t,i;if(n)if(VL(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Xn(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?i=KS(n.substring(1),"/"):i=KS(n,e)}else i=e;return{pathname:i,search:FL(s),hash:BL(r)}}function KS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function O0(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function UL(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rb(t){let e=UL(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Cb(t,e,n,s=!1){let r;typeof t=="string"?r=Po(t):(r={...t},nt(!r.pathname||!r.pathname.includes("?"),O0("?","pathname","search",r)),nt(!r.pathname||!r.pathname.includes("#"),O0("#","pathname","hash",r)),nt(!r.search||!r.search.includes("#"),O0("#","search","hash",r)));let i=t===""||r.pathname==="",a=i?"/":r.pathname,o;if(a==null)o=n;else{let f=e.length-1;if(!s&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;r.pathname=m.join("/")}o=f>=0?e[f]:"/"}let c=LL(r,o),u=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}var Sr=t=>t.join("/").replace(/\/\/+/g,"/"),zL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),FL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,BL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function qL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Zj=["POST","PUT","PATCH","DELETE"];new Set(Zj);var HL=["GET",...Zj];new Set(HL);var Mc=S.createContext(null);Mc.displayName="DataRouter";var Ig=S.createContext(null);Ig.displayName="DataRouterState";S.createContext(!1);var eP=S.createContext({isTransitioning:!1});eP.displayName="ViewTransition";var GL=S.createContext(new Map);GL.displayName="Fetchers";var $L=S.createContext(null);$L.displayName="Await";var Cs=S.createContext(null);Cs.displayName="Navigation";var Lh=S.createContext(null);Lh.displayName="Location";var js=S.createContext({outlet:null,matches:[],isDataRoute:!1});js.displayName="Route";var jb=S.createContext(null);jb.displayName="RouteError";function KL(t,{relative:e}={}){nt(Oc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=S.useContext(Cs),{hash:r,pathname:i,search:a}=Uh(t,{relative:e}),o=i;return n!=="/"&&(o=i==="/"?n:Sr([n,i])),s.createHref({pathname:o,search:a,hash:r})}function Oc(){return S.useContext(Lh)!=null}function Ps(){return nt(Oc(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Lh).location}var tP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nP(t){S.useContext(Cs).static||S.useLayoutEffect(t)}function ks(){let{isDataRoute:t}=S.useContext(js);return t?lU():WL()}function WL(){nt(Oc(),"useNavigate() may be used only in the context of a <Router> component.");let t=S.useContext(Mc),{basename:e,navigator:n}=S.useContext(Cs),{matches:s}=S.useContext(js),{pathname:r}=Ps(),i=JSON.stringify(Rb(s)),a=S.useRef(!1);return nP(()=>{a.current=!0}),S.useCallback((c,u={})=>{if(Xn(a.current,tP),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=Cb(c,JSON.parse(i),r,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Sr([e,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[e,n,i,r,t])}var YL=S.createContext(null);function QL(t){let e=S.useContext(js).outlet;return S.useMemo(()=>e&&S.createElement(YL.Provider,{value:t},e),[e,t])}function Uh(t,{relative:e}={}){let{matches:n}=S.useContext(js),{pathname:s}=Ps(),r=JSON.stringify(Rb(n));return S.useMemo(()=>Cb(t,JSON.parse(r),s,e==="path"),[t,r,s,e])}function XL(t,e){return sP(t,e)}function sP(t,e,n,s,r){var v;nt(Oc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=S.useContext(Cs),{matches:a}=S.useContext(js),o=a[a.length-1],c=o?o.params:{},u=o?o.pathname:"/",h=o?o.pathnameBase:"/",f=o&&o.route;{let b=f&&f.path||"";rP(u,!f||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let m=Ps(),p;if(e){let b=typeof e=="string"?Po(e):e;nt(h==="/"||((v=b.pathname)==null?void 0:v.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${b.pathname}" was given in the \`location\` prop.`),p=b}else p=m;let _=p.pathname||"/",w=_;if(h!=="/"){let b=h.replace(/^\//,"").split("/");w="/"+_.replace(/^\//,"").split("/").slice(b.length).join("/")}let T=Qj(t,{pathname:w});Xn(f||T!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Xn(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=nU(T&&T.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:Sr([h,i.encodeLocation?i.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?h:Sr([h,i.encodeLocation?i.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),a,n,s,r);return e&&x?S.createElement(Lh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},x):x}function JL(){let t=oU(),e=qL(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:i},"ErrorBoundary")," or"," ",S.createElement("code",{style:i},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:r},n):null,a)}var ZL=S.createElement(JL,null),eU=class extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?S.createElement(js.Provider,{value:this.props.routeContext},S.createElement(jb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tU({routeContext:t,match:e,children:n}){let s=S.useContext(Mc);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),S.createElement(js.Provider,{value:t},n)}function nU(t,e=[],n=null,s=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=n==null?void 0:n.errors;if(a!=null){let h=i.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);nt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let o=!1,c=-1;if(n)for(let h=0;h<i.length;h++){let f=i[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:m,errors:p}=n,_=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||_){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let u=n&&s?(h,f)=>{var m,p;s(h,{location:n.location,params:((p=(m=n.matches)==null?void 0:m[0])==null?void 0:p.params)??{},errorInfo:f})}:void 0;return i.reduceRight((h,f,m)=>{let p,_=!1,w=null,T=null;n&&(p=a&&f.route.id?a[f.route.id]:void 0,w=f.route.errorElement||ZL,o&&(c<0&&m===0?(rP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,T=null):c===m&&(_=!0,T=f.route.hydrateFallbackElement||null)));let x=e.concat(i.slice(0,m+1)),v=()=>{let b;return p?b=w:_?b=T:f.route.Component?b=S.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=h,S.createElement(tU,{match:f,routeContext:{outlet:h,matches:x,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?S.createElement(eU,{location:n.location,revalidation:n.revalidation,component:w,error:p,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0},onError:u}):v()},null)}function Pb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sU(t){let e=S.useContext(Mc);return nt(e,Pb(t)),e}function rU(t){let e=S.useContext(Ig);return nt(e,Pb(t)),e}function iU(t){let e=S.useContext(js);return nt(e,Pb(t)),e}function kb(t){let e=iU(t),n=e.matches[e.matches.length-1];return nt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function aU(){return kb("useRouteId")}function oU(){var s;let t=S.useContext(jb),e=rU("useRouteError"),n=kb("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[n]}function lU(){let{router:t}=sU("useNavigate"),e=kb("useNavigate"),n=S.useRef(!1);return nP(()=>{n.current=!0}),S.useCallback(async(r,i={})=>{Xn(n.current,tP),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...i}))},[t,e])}var WS={};function rP(t,e,n){!e&&!WS[t]&&(WS[t]=!0,Xn(!1,n))}S.memo(cU);function cU({routes:t,future:e,state:n,unstable_onError:s}){return sP(t,void 0,n,s,e)}function YS({to:t,replace:e,state:n,relative:s}){nt(Oc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=S.useContext(Cs);Xn(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=S.useContext(js),{pathname:a}=Ps(),o=ks(),c=Cb(t,Rb(i),a,s==="path"),u=JSON.stringify(c);return S.useEffect(()=>{o(JSON.parse(u),{replace:e,state:n,relative:s})},[o,u,s,e,n]),null}function iP(t){return QL(t.context)}function Le(t){nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function uU({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:r,static:i=!1}){nt(!Oc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=S.useMemo(()=>({basename:a,navigator:r,static:i,future:{}}),[a,r,i]);typeof n=="string"&&(n=Po(n));let{pathname:c="/",search:u="",hash:h="",state:f=null,key:m="default"}=n,p=S.useMemo(()=>{let _=Mr(c,a);return _==null?null:{location:{pathname:_,search:u,hash:h,state:f,key:m},navigationType:s}},[a,c,u,h,f,m,s]);return Xn(p!=null,`<Router basename="${a}"> is not able to match the URL "${c}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:S.createElement(Cs.Provider,{value:o},S.createElement(Lh.Provider,{children:e,value:p}))}function dU({children:t,location:e}){return XL(xx(t),e)}function xx(t,e=[]){let n=[];return S.Children.forEach(t,(s,r)=>{if(!S.isValidElement(s))return;let i=[...e,r];if(s.type===S.Fragment){n.push.apply(n,xx(s.props.children,i));return}nt(s.type===Le,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),nt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let a={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=xx(s.props.children,i)),n.push(a)}),n}var Sm="get",Am="application/x-www-form-urlencoded";function Rg(t){return t!=null&&typeof t.tagName=="string"}function hU(t){return Rg(t)&&t.tagName.toLowerCase()==="button"}function fU(t){return Rg(t)&&t.tagName.toLowerCase()==="form"}function mU(t){return Rg(t)&&t.tagName.toLowerCase()==="input"}function pU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gU(t,e){return t.button===0&&(!e||e==="_self")&&!pU(t)}var Gf=null;function yU(){if(Gf===null)try{new FormData(document.createElement("form"),0),Gf=!1}catch{Gf=!0}return Gf}var vU=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function V0(t){return t!=null&&!vU.has(t)?(Xn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Am}"`),null):t}function xU(t,e){let n,s,r,i,a;if(fU(t)){let o=t.getAttribute("action");s=o?Mr(o,e):null,n=t.getAttribute("method")||Sm,r=V0(t.getAttribute("enctype"))||Am,i=new FormData(t)}else if(hU(t)||mU(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(s=c?Mr(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Sm,r=V0(t.getAttribute("formenctype"))||V0(o.getAttribute("enctype"))||Am,i=new FormData(o,t),!yU()){let{name:u,type:h,value:f}=t;if(h==="image"){let m=u?`${u}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else u&&i.append(u,f)}}else{if(Rg(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Sm,s=null,r=Am,a=t}return i&&r==="text/plain"&&(a=i,i=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Db(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _U(t,e,n){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&Mr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function bU(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wU(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function TU(t,e,n){let s=await Promise.all(t.map(async r=>{let i=e.routes[r.route.id];if(i){let a=await bU(i,n);return a.links?a.links():[]}return[]}));return NU(s.flat(1).filter(wU).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function QS(t,e,n,s,r,i){let a=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,o=(c,u)=>{var h;return n[u].pathname!==c.pathname||((h=n[u].route.path)==null?void 0:h.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,u)=>a(c,u)||o(c,u)):i==="data"?e.filter((c,u)=>{var f;let h=s.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(a(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function EU(t,e,{includeHydrateFallback:n}={}){return SU(t.map(s=>{let r=e.routes[s.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function SU(t){return[...new Set(t)]}function AU(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function NU(t,e){let n=new Set;return new Set(e),t.reduce((s,r)=>{let i=JSON.stringify(AU(r));return n.has(i)||(n.add(i),s.push({key:i,link:r})),s},[])}function aP(){let t=S.useContext(Mc);return Db(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function IU(){let t=S.useContext(Ig);return Db(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Mb=S.createContext(void 0);Mb.displayName="FrameworkContext";function oP(){let t=S.useContext(Mb);return Db(t,"You must render this element inside a <HydratedRouter> element"),t}function RU(t,e){let n=S.useContext(Mb),[s,r]=S.useState(!1),[i,a]=S.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:f}=e,m=S.useRef(null);S.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let w=x=>{x.forEach(v=>{a(v.isIntersecting)})},T=new IntersectionObserver(w,{threshold:.5});return m.current&&T.observe(m.current),()=>{T.disconnect()}}},[t]),S.useEffect(()=>{if(s){let w=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(w)}}},[s]);let p=()=>{r(!0)},_=()=>{r(!1),a(!1)};return n?t!=="intent"?[i,m,{}]:[i,m,{onFocus:Tu(o,p),onBlur:Tu(c,_),onMouseEnter:Tu(u,p),onMouseLeave:Tu(h,_),onTouchStart:Tu(f,p)}]:[!1,m,{}]}function Tu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function CU({page:t,...e}){let{router:n}=aP(),s=S.useMemo(()=>Qj(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?S.createElement(PU,{page:t,matches:s,...e}):null}function jU(t){let{manifest:e,routeModules:n}=oP(),[s,r]=S.useState([]);return S.useEffect(()=>{let i=!1;return TU(t,e,n).then(a=>{i||r(a)}),()=>{i=!0}},[t,e,n]),s}function PU({page:t,matches:e,...n}){let s=Ps(),{manifest:r,routeModules:i}=oP(),{basename:a}=aP(),{loaderData:o,matches:c}=IU(),u=S.useMemo(()=>QS(t,e,c,r,s,"data"),[t,e,c,r,s]),h=S.useMemo(()=>QS(t,e,c,r,s,"assets"),[t,e,c,r,s]),f=S.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let _=new Set,w=!1;if(e.forEach(x=>{var b;let v=r.routes[x.route.id];!v||!v.hasLoader||(!u.some(R=>R.route.id===x.route.id)&&x.route.id in o&&((b=i[x.route.id])!=null&&b.shouldRevalidate)||v.hasClientLoader?w=!0:_.add(x.route.id))}),_.size===0)return[];let T=_U(t,a,"data");return w&&_.size>0&&T.searchParams.set("_routes",e.filter(x=>_.has(x.route.id)).map(x=>x.route.id).join(",")),[T.pathname+T.search]},[a,o,s,r,u,e,t,i]),m=S.useMemo(()=>EU(h,r),[h,r]),p=jU(h);return S.createElement(S.Fragment,null,f.map(_=>S.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),m.map(_=>S.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),p.map(({key:_,link:w})=>S.createElement("link",{key:_,nonce:n.nonce,...w})))}function kU(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var lP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lP&&(window.__reactRouterVersion="7.9.6")}catch{}function DU({basename:t,children:e,window:n}){let s=S.useRef();s.current==null&&(s.current=xL({window:n,v5Compat:!0}));let r=s.current,[i,a]=S.useState({action:r.action,location:r.location}),o=S.useCallback(c=>{S.startTransition(()=>a(c))},[a]);return S.useLayoutEffect(()=>r.listen(o),[r,o]),S.createElement(uU,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:r})}var cP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,je=S.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:r,reloadDocument:i,replace:a,state:o,target:c,to:u,preventScrollReset:h,viewTransition:f,...m},p){let{basename:_}=S.useContext(Cs),w=typeof u=="string"&&cP.test(u),T,x=!1;if(typeof u=="string"&&w&&(T=u,lP))try{let N=new URL(window.location.href),I=u.startsWith("//")?new URL(N.protocol+u):new URL(u),P=Mr(I.pathname,_);I.origin===N.origin&&P!=null?u=P+I.search+I.hash:x=!0}catch{Xn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=KL(u,{relative:r}),[b,R,D]=RU(s,m),M=VU(u,{replace:a,state:o,target:c,preventScrollReset:h,relative:r,viewTransition:f});function A(N){e&&e(N),N.defaultPrevented||M(N)}let E=S.createElement("a",{...m,...D,href:T||v,onClick:x||i?e:A,ref:kU(p,R),target:c,"data-discover":!w&&n==="render"?"true":void 0});return b&&!w?S.createElement(S.Fragment,null,E,S.createElement(CU,{page:v})):E});je.displayName="Link";var ss=S.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:r=!1,style:i,to:a,viewTransition:o,children:c,...u},h){let f=Uh(a,{relative:u.relative}),m=Ps(),p=S.useContext(Ig),{navigator:_,basename:w}=S.useContext(Cs),T=p!=null&&BU(f)&&o===!0,x=_.encodeLocation?_.encodeLocation(f).pathname:f.pathname,v=m.pathname,b=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(v=v.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&w&&(b=Mr(b,w)||b);const R=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let D=v===x||!r&&v.startsWith(x)&&v.charAt(R)==="/",M=b!=null&&(b===x||!r&&b.startsWith(x)&&b.charAt(x.length)==="/"),A={isActive:D,isPending:M,isTransitioning:T},E=D?e:void 0,N;typeof s=="function"?N=s(A):N=[s,D?"active":null,M?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let I=typeof i=="function"?i(A):i;return S.createElement(je,{...u,"aria-current":E,className:N,ref:h,style:I,to:a,viewTransition:o},typeof c=="function"?c(A):c)});ss.displayName="NavLink";var MU=S.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:r,state:i,method:a=Sm,action:o,onSubmit:c,relative:u,preventScrollReset:h,viewTransition:f,...m},p)=>{let _=zU(),w=FU(o,{relative:u}),T=a.toLowerCase()==="get"?"get":"post",x=typeof o=="string"&&cP.test(o),v=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let R=b.nativeEvent.submitter,D=(R==null?void 0:R.getAttribute("formmethod"))||a;_(R||b.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:r,state:i,relative:u,preventScrollReset:h,viewTransition:f})};return S.createElement("form",{ref:p,method:T,action:w,onSubmit:s?c:v,...m,"data-discover":!x&&t==="render"?"true":void 0})});MU.displayName="Form";function OU(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uP(t){let e=S.useContext(Mc);return nt(e,OU(t)),e}function VU(t,{target:e,replace:n,state:s,preventScrollReset:r,relative:i,viewTransition:a}={}){let o=ks(),c=Ps(),u=Uh(t,{relative:i});return S.useCallback(h=>{if(gU(h,e)){h.preventDefault();let f=n!==void 0?n:Wd(c)===Wd(u);o(t,{replace:f,state:s,preventScrollReset:r,relative:i,viewTransition:a})}},[c,o,u,n,s,e,t,r,i,a])}var LU=0,UU=()=>`__${String(++LU)}__`;function zU(){let{router:t}=uP("useSubmit"),{basename:e}=S.useContext(Cs),n=aU();return S.useCallback(async(s,r={})=>{let{action:i,method:a,encType:o,formData:c,body:u}=xU(s,e);if(r.navigate===!1){let h=r.fetcherKey||UU();await t.fetch(h,n,r.action||i,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||a,formEncType:r.encType||o,flushSync:r.flushSync})}else await t.navigate(r.action||i,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||a,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function FU(t,{relative:e}={}){let{basename:n}=S.useContext(Cs),s=S.useContext(js);nt(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...Uh(t||".",{relative:e})},a=Ps();if(t==null){i.search=a.search;let o=new URLSearchParams(i.search),c=o.getAll("index");if(c.some(h=>h==="")){o.delete("index"),c.filter(f=>f).forEach(f=>o.append("index",f));let h=o.toString();i.search=h?`?${h}`:""}}return(!t||t===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Sr([n,i.pathname])),Wd(i)}function BU(t,{relative:e}={}){let n=S.useContext(eP);nt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=uP("useViewTransitionState"),r=Uh(t,{relative:e});if(!n.isTransitioning)return!1;let i=Mr(n.currentLocation.pathname,s)||n.currentLocation.pathname,a=Mr(n.nextLocation.pathname,s)||n.nextLocation.pathname;return bp(r.pathname,a)!=null||bp(r.pathname,i)!=null}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HU=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),XS=t=>{const e=HU(t);return e.charAt(0).toUpperCase()+e.slice(1)},dP=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),GU=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $U={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:a,...o},c)=>S.createElement("svg",{ref:c,...$U,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:dP("lucide",r),...!i&&!GU(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,h])=>S.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=(t,e)=>{const n=S.forwardRef(({className:s,...r},i)=>S.createElement(KU,{ref:i,iconNode:e,className:dP(`lucide-${qU(XS(t))}`,`lucide-${t}`,s),...r}));return n.displayName=XS(t),n};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Zl=Y("arrow-right",WU);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],QU=Y("arrow-up-down",YU);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],JU=Y("award",XU);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],e9=Y("banknote",ZU);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Cg=Y("bell",t9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],hP=Y("calendar",n9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],r9=Y("camera",s9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],fP=Y("chart-column",i9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],o9=Y("chart-no-axes-column-increasing",a9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Wi=Y("check",l9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],zh=Y("chevron-down",c9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]],d9=Y("chevrons-down",u9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],da=Y("circle-alert",h9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ob=Y("circle-check-big",f9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],p9=Y("circle-dollar-sign",m9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],y9=Y("circle-question-mark",g9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],x9=Y("circle-x",v9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]],b9=Y("clipboard-copy",_9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],T9=Y("clipboard-list",w9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jg=Y("clock",E9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],A9=Y("cloud-upload",S9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Ss=Y("coffee",N9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],R9=Y("crown",I9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],j9=Y("dollar-sign",C9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],_x=Y("eye-off",P9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],bx=Y("eye",k9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],mP=Y("facebook",D9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],O9=Y("file-image",M9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Yd=Y("gift",V9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],U9=Y("hash",L9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z9=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],F9=Y("history",z9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B9=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],q9=Y("image",B9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],G9=Y("info",H9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],pP=Y("instagram",$9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],W9=Y("key",K9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Q9=Y("layout-dashboard",Y9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X9=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],J9=Y("lightbulb",X9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z9=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],xt=Y("loader-circle",Z9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],wp=Y("lock",ez);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],JS=Y("log-out",tz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],nr=Y("mail",nz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Vb=Y("map-pin",sz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],iz=Y("medal",rz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],gP=Y("menu",az);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],lz=Y("message-circle",oz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Vc=Y("message-square",cz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=[["path",{d:"M5 12h14",key:"1ays0h"}]],yP=Y("minus",uz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],hz=Y("package",dz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fz=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],mz=Y("palette",fz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pz=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Or=Y("phone",pz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Fh=Y("plus",gz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],vz=Y("quote",yz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],vP=Y("refresh-cw",xz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _z=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Lb=Y("save",_z);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bz=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Tp=Y("search",bz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wz=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ub=Y("send",wz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tz=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zb=Y("settings",Tz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ez=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Sz=Y("share-2",Ez);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Az=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Qd=Y("shield",Az);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nz=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Fb=Y("shopping-bag",Nz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iz=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Bb=Y("shopping-cart",Iz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rz=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],xP=Y("square-pen",Rz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cz=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],_P=Y("star",Cz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jz=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Pg=Y("trash-2",jz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pz=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bP=Y("triangle-alert",Pz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kz=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],wP=Y("twitter",kz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dz=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ZS=Y("upload",Dz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mz=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Vr=Y("user",Mz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oz=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ep=Y("users",Oz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],TP=Y("wallet",Vz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lz=[["path",{d:"M12 10v2.2l1.6 1",key:"n3r21l"}],["path",{d:"m16.13 7.66-.81-4.05a2 2 0 0 0-2-1.61h-2.68a2 2 0 0 0-2 1.61l-.78 4.05",key:"18k57s"}],["path",{d:"m7.88 16.36.8 4a2 2 0 0 0 2 1.61h2.72a2 2 0 0 0 2-1.61l.81-4.05",key:"16ny36"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}]],Uz=Y("watch",Lz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$r=Y("x",zz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fz=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Bz=Y("zap",Fz),ye=({children:t,className:e="",hover:n=!1})=>{const s=n?"hover:shadow-xl transition-all duration-300":"";return l.jsx("div",{className:`rounded-lg border border-gray-100 bg-white p-6 shadow-sm ${s} ${e}`,children:t})},Qt=({children:t,className:e=""})=>{const n="inline-flex items-center rounded-full px-3 py-1 text-sm font-medium",s=e.includes("bg-")?"":"bg-primary-100 text-primary-800";return l.jsx("span",{className:`${n} ${s} ${e}`,children:t})},qz=()=>{};var eA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Hz=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],a=t[n++],o=t[n++],c=((r&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|a&63)}}return e.join("")},SP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],a=r+1<t.length,o=a?t[r+1]:0,c=r+2<t.length,u=c?t[r+2]:0,h=i>>2,f=(i&3)<<4|o>>4;let m=(o&15)<<2|u>>6,p=u&63;c||(p=64,a||(m=64)),s.push(n[h],n[f],n[m],n[p])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(EP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Hz(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const f=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||o==null||u==null||f==null)throw new Gz;const m=i<<2|o>>4;if(s.push(m),u!==64){const p=o<<4&240|u>>2;if(s.push(p),f!==64){const _=u<<6&192|f;s.push(_)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Gz extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $z=function(t){const e=EP(t);return SP.encodeByteArray(e,!0)},Sp=function(t){return $z(t).replace(/\./g,"")},qb=function(t){try{return SP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ap(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Kz(n)||(t[n]=Ap(t[n],e[n]));return t}function Kz(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wz=()=>Hb().__FIREBASE_DEFAULTS__,Yz=()=>{if(typeof process>"u"||typeof eA>"u")return;const t=eA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Qz=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&qb(t[1]);return e&&JSON.parse(e)},Gb=()=>{try{return qz()||Wz()||Yz()||Qz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$b=()=>{var t;return(t=Gb())==null?void 0:t.config},Xz=t=>{var e;return(e=Gb())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Kb(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Sp(JSON.stringify(n)),Sp(JSON.stringify(a)),""].join(".")}const md={};function Zz(){const t={prod:[],emulator:[]};for(const e of Object.keys(md))md[e]?t.emulator.push(e):t.prod.push(e);return t}function eF(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let tA=!1;function Wb(t,e){if(typeof window>"u"||typeof document>"u"||!ha(window.location.host)||md[t]===e||md[t]||tA)return;md[t]=e;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",i=Zz().prod.length>0;function a(){const m=document.getElementById(s);m&&m.remove()}function o(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,p){m.setAttribute("width","24"),m.setAttribute("id",p),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{tA=!0,a()},m}function h(m,p){m.setAttribute("id",p),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=eF(s),p=n("text"),_=document.getElementById(p)||document.createElement("span"),w=n("learnmore"),T=document.getElementById(w)||document.createElement("a"),x=n("preprendIcon"),v=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const b=m.element;o(b),h(T,w);const R=u();c(v,x),b.append(v,_,T,R),document.body.appendChild(b)}i?(_.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function kg(){var e;const t=(e=Gb())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nF(){return typeof window<"u"||NP()}function NP(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function sF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Yb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RP(){const t=rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function CP(){return!kg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jP(){return!kg()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Xd(){try{return typeof indexedDB=="object"}catch{return!1}}function rF(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF="FirebaseError";class ln extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=iF,Object.setPrototypeOf(this,ln.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ko.prototype.create)}}class ko{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?aF(i,s):"Error",o=`${this.serviceName}: ${a} (${r}).`;return new ln(r,o,s)}}function aF(t,e){return t.replace(oF,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const oF=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function lF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yi(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],a=e[r];if(sA(i)&&sA(a)){if(!Yi(i,a))return!1}else if(i!==a)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function sA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function wl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function qu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function PP(t,e){const n=new cF(t,e);return n.subscribe.bind(n)}class cF{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");uF(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=L0),r.error===void 0&&(r.error=L0),r.complete===void 0&&(r.complete=L0);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function L0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t){return t&&t._delegate?t._delegate:t}class vs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Jz;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fF(e))try{this.getOrInitializeService({instanceIdentifier:Oa})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oa){return this.instances.has(e)}getOptions(e=Oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);s===o&&a.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:hF(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Oa){return this.component?this.component.multipleInstances?e:Oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hF(t){return t===Oa?void 0:t}function fF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new dF(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=[];var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const DP={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},mF=de.INFO,pF={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},gF=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=pF[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dg{constructor(e){this.name=e,this._logLevel=mF,this._logHandler=gF,this._userLogHandler=null,Qb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}function yF(t){Qb.forEach(e=>{e.setLogLevel(t)})}function vF(t,e){for(const n of Qb){let s=null;e&&e.level&&(s=DP[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,i,...a)=>{const o=a.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");i>=(s??r.logLevel)&&t({level:de[i].toLowerCase(),message:o,args:a,type:r.name})}}}const xF=(t,e)=>e.some(n=>t instanceof n);let rA,iA;function _F(){return rA||(rA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bF(){return iA||(iA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MP=new WeakMap,wx=new WeakMap,OP=new WeakMap,U0=new WeakMap,Xb=new WeakMap;function wF(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Ui(t.result)),r()},a=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&MP.set(n,t)}).catch(()=>{}),Xb.set(e,t),e}function TF(t){if(wx.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),r()},a=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});wx.set(t,e)}let Tx={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wx.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ui(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EF(t){Tx=t(Tx)}function SF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(z0(this),e,...n);return OP.set(s,e.sort?e.sort():[e]),Ui(s)}:bF().includes(t)?function(...e){return t.apply(z0(this),e),Ui(MP.get(this))}:function(...e){return Ui(t.apply(z0(this),e))}}function AF(t){return typeof t=="function"?SF(t):(t instanceof IDBTransaction&&TF(t),xF(t,_F())?new Proxy(t,Tx):t)}function Ui(t){if(t instanceof IDBRequest)return wF(t);if(U0.has(t))return U0.get(t);const e=AF(t);return e!==t&&(U0.set(t,e),Xb.set(e,t)),e}const z0=t=>Xb.get(t);function NF(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const a=indexedDB.open(t,e),o=Ui(a);return s&&a.addEventListener("upgradeneeded",c=>{s(Ui(a.result),c.oldVersion,c.newVersion,Ui(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const IF=["get","getKey","getAll","getAllKeys","count"],RF=["put","add","delete","clear"],F0=new Map;function aA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(F0.get(e))return F0.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=RF.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||IF.includes(n)))return;const i=async function(a,...o){const c=this.transaction(a,r?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),r&&c.done]))[0]};return F0.set(e,i),i}EF(t=>({...t,get:(e,n,s)=>aA(e,n)||t.get(e,n,s),has:(e,n)=>!!aA(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jF(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function jF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Np="@firebase/app",Ex="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new Dg("@firebase/app"),PF="@firebase/app-compat",kF="@firebase/analytics-compat",DF="@firebase/analytics",MF="@firebase/app-check-compat",OF="@firebase/app-check",VF="@firebase/auth",LF="@firebase/auth-compat",UF="@firebase/database",zF="@firebase/data-connect",FF="@firebase/database-compat",BF="@firebase/functions",qF="@firebase/functions-compat",HF="@firebase/installations",GF="@firebase/installations-compat",$F="@firebase/messaging",KF="@firebase/messaging-compat",WF="@firebase/performance",YF="@firebase/performance-compat",QF="@firebase/remote-config",XF="@firebase/remote-config-compat",JF="@firebase/storage",ZF="@firebase/storage-compat",e8="@firebase/firestore",t8="@firebase/ai",n8="@firebase/firestore-compat",s8="firebase",r8="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi="[DEFAULT]",i8={[Np]:"fire-core",[PF]:"fire-core-compat",[DF]:"fire-analytics",[kF]:"fire-analytics-compat",[OF]:"fire-app-check",[MF]:"fire-app-check-compat",[VF]:"fire-auth",[LF]:"fire-auth-compat",[UF]:"fire-rtdb",[zF]:"fire-data-connect",[FF]:"fire-rtdb-compat",[BF]:"fire-fn",[qF]:"fire-fn-compat",[HF]:"fire-iid",[GF]:"fire-iid-compat",[$F]:"fire-fcm",[KF]:"fire-fcm-compat",[WF]:"fire-perf",[YF]:"fire-perf-compat",[QF]:"fire-rc",[XF]:"fire-rc-compat",[JF]:"fire-gcs",[ZF]:"fire-gcs-compat",[e8]:"fire-fst",[n8]:"fire-fst-compat",[t8]:"fire-vertex","fire-js":"fire-js",[s8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new Map,ec=new Map,tc=new Map;function Jd(t,e){try{t.container.addComponent(e)}catch(n){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function VP(t,e){t.container.addOrOverwriteComponent(e)}function Ur(t){const e=t.name;if(tc.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;tc.set(e,t);for(const n of Xi.values())Jd(n,t);for(const n of ec.values())Jd(n,t);return!0}function LP(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function a8(t,e,n=Qi){LP(t,e).clearInstance(n)}function Jb(t){return t.options!==void 0}function UP(t){return Jb(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function $e(t){return t==null?!1:t.settings!==void 0}function o8(){tc.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$n=new ko("app","Firebase",l8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zP=class{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $n.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t,e){const n=qb(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const r=JSON.parse(n).exp*1e3,i=new Date().getTime();r-i<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class c8 extends zP{constructor(e,n,s,r){const i=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,a={name:s,automaticDataCollectionEnabled:i};if(e.apiKey!==void 0)super(e,a,r);else{const o=e;super(o.options,a,r)}this._serverConfig={automaticDataCollectionEnabled:i,...n},this._serverConfig.authIdToken&&oA(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&oA(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Kn(Np,Ex,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ew(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw $n.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=r8;function Zb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Qi,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw $n.create("bad-app-name",{appName:String(r)});if(n||(n=$b()),!n)throw $n.create("no-options");const i=Xi.get(r);if(i){if(Yi(n,i.options)&&Yi(s,i.config))return i;throw $n.create("duplicate-app",{appName:r})}const a=new kP(r);for(const c of tc.values())a.addComponent(c);const o=new zP(n,s,a);return Xi.set(r,o),o}function u8(t,e={}){if(nF()&&!NP())throw $n.create("invalid-server-app-environment");let n,s=e||{};if(t&&(Jb(t)?n=t.options:UP(t)?s=t:n=t),s.automaticDataCollectionEnabled===void 0&&(s.automaticDataCollectionEnabled=!0),n||(n=$b()),!n)throw $n.create("no-options");const r={...s,...n};r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=h=>[...h].reduce((f,m)=>Math.imul(31,f)+m.charCodeAt(0)|0,0);if(s.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw $n.create("finalization-registry-not-supported",{});const a=""+i(JSON.stringify(r)),o=ec.get(a);if(o)return o.incRefCount(s.releaseOnDeref),o;const c=new kP(a);for(const h of tc.values())c.addComponent(h);const u=new c8(n,s,a,c);return ec.set(a,u),u}function d8(t=Qi){const e=Xi.get(t);if(!e&&t===Qi&&$b())return Zb();if(!e)throw $n.create("no-app",{appName:t});return e}function h8(){return Array.from(Xi.values())}async function ew(t){let e=!1;const n=t.name;Xi.has(n)?(e=!0,Xi.delete(n)):ec.has(n)&&t.decRefCount()<=0&&(ec.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(s=>s.delete())),t.isDeleted=!0)}function Kn(t,e,n){let s=i8[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const a=[`Unable to register library "${s}" with version "${e}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(a.join(" "));return}Ur(new vs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function FP(t,e){if(t!==null&&typeof t!="function")throw $n.create("invalid-log-argument");vF(t,e)}function BP(t){yF(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8="firebase-heartbeat-database",m8=1,Zd="firebase-heartbeat-store";let B0=null;function qP(){return B0||(B0=NF(f8,m8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zd)}catch(n){console.warn(n)}}}}).catch(t=>{throw $n.create("idb-open",{originalErrorMessage:t.message})})),B0}async function p8(t){try{const n=(await qP()).transaction(Zd),s=await n.objectStore(Zd).get(HP(t));return await n.done,s}catch(e){if(e instanceof ln)Lr.warn(e.message);else{const n=$n.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Lr.warn(n.message)}}}async function lA(t,e){try{const s=(await qP()).transaction(Zd,"readwrite");await s.objectStore(Zd).put(e,HP(t)),await s.done}catch(n){if(n instanceof ln)Lr.warn(n.message);else{const s=$n.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Lr.warn(s.message)}}}function HP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g8=1024,y8=30;class v8{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _8(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=cA();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>y8){const a=b8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Lr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=cA(),{heartbeatsToSend:s,unsentEntries:r}=x8(this._heartbeatsCache.heartbeats),i=Sp(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Lr.warn(n),""}}}function cA(){return new Date().toISOString().substring(0,10)}function x8(t,e=g8){const n=[];let s=t.slice();for(const r of t){const i=n.find(a=>a.agent===r.agent);if(i){if(i.dates.push(r.date),uA(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),uA(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class _8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xd()?rF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await p8(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return lA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return lA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function uA(t){return Sp(JSON.stringify({version:2,heartbeats:t})).length}function b8(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w8(t){Ur(new vs("platform-logger",e=>new CF(e),"PRIVATE")),Ur(new vs("heartbeat",e=>new v8(e),"PRIVATE")),Kn(Np,Ex,t),Kn(Np,Ex,"esm2020"),Kn("fire-js","")}w8("");const T8=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:ln,SDK_VERSION:Kr,_DEFAULT_ENTRY_NAME:Qi,_addComponent:Jd,_addOrOverwriteComponent:VP,_apps:Xi,_clearComponents:o8,_components:tc,_getProvider:LP,_isFirebaseApp:Jb,_isFirebaseServerApp:$e,_isFirebaseServerAppSettings:UP,_registerComponent:Ur,_removeServiceInstance:a8,_serverApps:ec,deleteApp:ew,getApp:d8,getApps:h8,initializeApp:Zb,initializeServerApp:u8,onLog:FP,registerVersion:Kn,setLogLevel:BP},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e,n){this._delegate=e,this.firebase=n,Jd(e,new vs("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),ew(this._delegate)))}_getService(e,n=Qi){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())==null?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=Qi){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Jd(this._delegate,e)}_addOrOverwriteComponent(e){VP(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},dA=new ko("app-compat","Firebase",S8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A8(t){const e={},n={__esModule:!0,initializeApp:i,app:r,registerVersion:Kn,setLogLevel:BP,onLog:FP,apps:null,SDK_VERSION:Kr,INTERNAL:{registerComponent:o,removeApp:s,useAsService:c,modularAPIs:T8}};n.default=n,Object.defineProperty(n,"apps",{get:a});function s(u){delete e[u]}function r(u){if(u=u||Qi,!nA(e,u))throw dA.create("no-app",{appName:u});return e[u]}r.App=t;function i(u,h={}){const f=Zb(u,h);if(nA(e,f.name))return e[f.name];const m=new t(f,n);return e[f.name]=m,m}function a(){return Object.keys(e).map(u=>e[u])}function o(u){const h=u.name,f=h.replace("-compat","");if(Ur(u)&&u.type==="PUBLIC"){const m=(p=r())=>{if(typeof p[f]!="function")throw dA.create("invalid-app-argument",{appName:h});return p[f]()};u.serviceProps!==void 0&&Ap(m,u.serviceProps),n[f]=m,t.prototype[f]=function(...p){return this._getService.bind(this,h).apply(this,u.multipleInstances?p:[])}}return u.type==="PUBLIC"?n[f]:null}function c(u,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(){const t=A8(E8);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:GP,extendNamespace:e,createSubscribe:PP,ErrorFactory:ko,deepExtend:Ap};function e(n){Ap(t,n)}return t}const N8=GP();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=new Dg("@firebase/app-compat"),I8="@firebase/app-compat",R8="0.5.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C8(t){Kn(I8,R8,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=Hb();if(t.firebase!==void 0){hA.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&hA.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const De=N8;C8();var j8="firebase",P8="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */De.registerVersion(j8,P8,"app-compat");const Eu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},$o={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k8(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function $P(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const D8=k8,M8=$P,KP=new ko("auth","Firebase",$P());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip=new Dg("@firebase/auth");function O8(t,...e){Ip.logLevel<=de.WARN&&Ip.warn(`Auth (${Kr}): ${t}`,...e)}function Nm(t,...e){Ip.logLevel<=de.ERROR&&Ip.error(`Auth (${Kr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(t,...e){throw nw(t,...e)}function kt(t,...e){return nw(t,...e)}function tw(t,e,n){const s={...M8(),[e]:n};return new ko("auth","Firebase",s).create(e,{appName:t.name})}function Bt(t){return tw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Uc(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Zt(t,"argument-error"),tw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nw(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return KP.create(t,...e)}function q(t,e,...n){if(!t)throw nw(e,...n)}function $s(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nm(e),new Error(e)}function Is(t,e){t||$s(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function sw(){return fA()==="http:"||fA()==="https:"}function fA(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sw()||IP()||"connection"in navigator)?navigator.onLine:!0}function L8(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Is(n>e,"Short delay should be less than long delay!"),this.isMobile=tF()||Yb()}get(){return V8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t,e){Is(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],F8=new Bh(3e4,6e4);function ht(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ft(t,e,n,s,r={}){return YP(t,r,async()=>{let i={},a={};s&&(e==="GET"?a=s:i={body:JSON.stringify(s)});const o=Lc({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return sF()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ha(t.emulatorConfig.host)&&(u.credentials="include"),WP.fetch()(await QP(t,t.config.apiHost,n,o),u)})}async function YP(t,e,n){t._canInitEmulator=!1;const s={...U8,...e};try{const r=new q8(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Hu(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hu(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Hu(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Hu(t,"user-disabled",a);const h=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw tw(t,h,u);Zt(t,h)}}catch(r){if(r instanceof ln)throw r;Zt(t,"network-request-failed",{message:String(r)})}}async function Wr(t,e,n,s,r={}){const i=await ft(t,e,n,s,r);return"mfaPendingCredential"in i&&Zt(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function QP(t,e,n,s){const r=`${e}${n}?${s}`,i=t,a=i.config.emulator?rw(t.config,r):`${t.config.apiScheme}://${r}`;return z8.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function B8(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class q8{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(kt(this.auth,"network-request-failed")),F8.get())})}}function Hu(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=kt(t,e,s);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t){return t!==void 0&&t.getResponse!==void 0}function pA(t){return t!==void 0&&t.enterprise!==void 0}class XP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return B8(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H8(t){return(await ft(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function JP(t,e){return ft(t,"GET","/v2/recaptchaConfig",ht(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G8(t,e){return ft(t,"POST","/v1/accounts:delete",e)}async function $8(t,e){return ft(t,"POST","/v1/accounts:update",e)}async function Rp(t,e){return ft(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function K8(t,e=!1){const n=J(t),s=await n.getIdToken(e),r=Mg(s);q(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:pd(q0(r.auth_time)),issuedAtTime:pd(q0(r.iat)),expirationTime:pd(q0(r.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function q0(t){return Number(t)*1e3}function Mg(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Nm("JWT malformed, contained fewer than 3 sections"),null;try{const r=qb(n);return r?JSON.parse(r):(Nm("Failed to decode base64 JWT payload"),null)}catch(r){return Nm("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function gA(t){const e=Mg(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zr(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ln&&W8(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function W8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=pd(this.lastLoginAt),this.creationTime=pd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function th(t){var f;const e=t.auth,n=await t.getIdToken(),s=await zr(t,Rp(e,{idToken:n}));q(s==null?void 0:s.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=(f=r.providerUserInfo)!=null&&f.length?ZP(r.providerUserInfo):[],a=X8(t.providerData,i),o=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),u=o?c:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Sx(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function Q8(t){const e=J(t);await th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function X8(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function ZP(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J8(t,e){const n=await YP(t,{},async()=>{const s=Lc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,a=await QP(t,r,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:s};return t.emulatorConfig&&ha(t.emulatorConfig.host)&&(c.credentials="include"),WP.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Z8(t,e){return ft(t,"POST","/v2/accounts:revokeToken",ht(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){q(e.length!==0,"internal-error");const n=gA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await J8(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,a=new Ml;return s&&(q(typeof s=="string","internal-error",{appName:e}),a.refreshToken=s),r&&(q(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),i&&(q(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ml,this.toJSON())}_performRefresh(){return $s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(t,e){q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Es{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new Y8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Sx(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await zr(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return K8(this,e)}reload(){return Q8(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Es({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await th(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($e(this.auth.app))return Promise.reject(Bt(this.auth));const e=await this.getIdToken();return await zr(this,G8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,o=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:p,providerData:_,stsTokenManager:w}=n;q(f&&w,e,"internal-error");const T=Ml.fromJSON(this.name,w);q(typeof f=="string",e,"internal-error"),ci(s,e.name),ci(r,e.name),q(typeof m=="boolean",e,"internal-error"),q(typeof p=="boolean",e,"internal-error"),ci(i,e.name),ci(a,e.name),ci(o,e.name),ci(c,e.name),ci(u,e.name),ci(h,e.name);const x=new Es({uid:f,auth:e,email:r,emailVerified:m,displayName:s,isAnonymous:p,photoURL:a,phoneNumber:i,tenantId:o,stsTokenManager:T,createdAt:u,lastLoginAt:h});return _&&Array.isArray(_)&&(x.providerData=_.map(v=>({...v}))),c&&(x._redirectEventId=c),x}static async _fromIdTokenResponse(e,n,s=!1){const r=new Ml;r.updateFromServerResponse(n);const i=new Es({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await th(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];q(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?ZP(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),o=new Ml;o.updateFromIdToken(s);const c=new Es({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Sx(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=new Map;function Fn(t){Is(t instanceof Function,"Expected a class definition");let e=yA.get(t);return e?(Is(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,yA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ek.type="NONE";const nc=ek;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t,e,n){return`firebase:${t}:${e}:${n}`}class Ol{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=so(this.userKey,r.apiKey,i),this.fullPersistenceKey=so("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Rp(this.auth,{idToken:e}).catch(()=>{});return n?Es._fromGetAccountInfoResponse(this.auth,n,e):null}return Es._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ol(Fn(nc),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||Fn(nc);const a=so(s,e.config.apiKey,e.name);let o=null;for(const u of n)try{const h=await u._get(a);if(h){let f;if(typeof h=="string"){const m=await Rp(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Es._fromGetAccountInfoResponse(e,m,h)}else f=Es._fromJSON(e,h);u!==i&&(o=f),i=u;break}}catch{}const c=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Ol(i,e,s):(i=c[0],o&&await i._set(a,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(a)}catch{}})),new Ol(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ik(e))return"Blackberry";if(ak(e))return"Webos";if(nk(e))return"Safari";if((e.includes("chrome/")||sk(e))&&!e.includes("edge/"))return"Chrome";if(qh(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function tk(t=rt()){return/firefox\//i.test(t)}function nk(t=rt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sk(t=rt()){return/crios\//i.test(t)}function rk(t=rt()){return/iemobile/i.test(t)}function qh(t=rt()){return/android/i.test(t)}function ik(t=rt()){return/blackberry/i.test(t)}function ak(t=rt()){return/webos/i.test(t)}function Hh(t=rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eB(t=rt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function tB(t=rt()){var e;return Hh(t)&&!!((e=window.navigator)!=null&&e.standalone)}function nB(){return RP()&&document.documentMode===10}function ok(t=rt()){return Hh(t)||qh(t)||ak(t)||ik(t)||/windows phone/i.test(t)||rk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(t,e=[]){let n;switch(t){case"Browser":n=vA(rt());break;case"Worker":n=`${vA(rt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Kr}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((a,o)=>{try{const c=e(i);a(c)}catch(c){o(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rB(t,e={}){return ft(t,"GET","/v2/passwordPolicy",ht(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB=6;class aB{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??iB,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xA(this),this.idTokenSubscription=new xA(this),this.beforeStateQueue=new sB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fn(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await Ol.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Rp(this,{idToken:e}),s=await Es._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if($e(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,o=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&(c!=null&&c.user)&&(s=c.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await th(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=L8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($e(this.app))return Promise.reject(Bt(this));const n=e?J(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $e(this.app)?Promise.reject(Bt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $e(this.app)?Promise.reject(Bt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rB(this),n=new aB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ko("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Z8(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fn(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=await Ol.create(this,[Fn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if($e(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&O8(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function it(t){return J(t)}class xA{constructor(e){this.auth=e,this.observer=null,this.addObserver=PP(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lB(t){Gh=t}function iw(t){return Gh.loadJS(t)}function cB(){return Gh.recaptchaV2Script}function uB(){return Gh.recaptchaEnterpriseScript}function dB(){return Gh.gapiScript}function ck(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hB=500,fB=6e4,$f=1e12;class mB{constructor(e){this.auth=e,this.counter=$f,this._widgets=new Map}render(e,n){const s=this.counter;return this._widgets.set(s,new yB(e,this.auth.name,n||{})),this.counter++,s}reset(e){var s;const n=e||$f;(s=this._widgets.get(n))==null||s.delete(),this._widgets.delete(n)}getResponse(e){var s;const n=e||$f;return((s=this._widgets.get(n))==null?void 0:s.getResponse())||""}async execute(e){var s;const n=e||$f;return(s=this._widgets.get(n))==null||s.execute(),""}}class pB{constructor(){this.enterprise=new gB}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class gB{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class yB{constructor(e,n,s){this.params=s,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;q(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=vB(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},fB)},hB))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function vB(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<t;s++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const xB="recaptcha-enterprise",gd="NO_RECAPTCHA";class uk{constructor(e){this.type=xB,this.auth=it(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{JP(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new XP(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,a(u.siteKey)}}).catch(c=>{o(c)})})}function r(i,a,o){const c=window.grecaptcha;pA(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{a(u)}).catch(()=>{a(gd)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new pB().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{s(this.auth).then(o=>{if(!n&&pA(window.grecaptcha))r(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=uB();c.length!==0&&(c+=o),iw(c).then(()=>{r(o,i,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function Su(t,e,n,s=!1,r=!1){const i=new uk(t);let a;if(r)a=gd;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return s?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function zi(t,e,n,s,r){var i,a;if(r==="EMAIL_PASSWORD_PROVIDER")if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Su(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Su(t,e,n,n==="getOobCode");return s(t,c)}else return Promise.reject(o)});else if(r==="PHONE_PROVIDER")if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("PHONE_PROVIDER")){const o=await Su(t,e,n);return s(t,o).catch(async c=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await Su(t,e,n,!1,!0);return s(t,h)}return Promise.reject(c)})}else{const o=await Su(t,e,n,!1,!0);return s(t,o)}else return Promise.reject(r+" provider is not supported.")}async function _B(t){const e=it(t),n=await JP(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),s=new XP(n);e.tenantId==null?e._agentRecaptchaConfig=s:e._tenantRecaptchaConfigs[e.tenantId]=s,s.isAnyProviderEnabled()&&new uk(e).verify()}function bB(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Fn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function wB(t,e,n){const s=it(t);q(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),i=dk(e),{host:a,port:o}=TB(e),c=o===null?"":`:${o}`,u={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){q(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),q(Yi(u,s.config.emulator)&&Yi(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,ha(a)?(Kb(`${i}//${a}${c}`),Wb("Auth",!0)):r||EB()}function dk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TB(t){const e=dk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:_A(s.substr(i.length+1))}}else{const[i,a]=s.split(":");return{host:i,port:_A(a)}}}function _A(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function EB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $s("not implemented")}_getIdTokenResponse(e){return $s("not implemented")}_linkToIdToken(e,n){return $s("not implemented")}_getReauthenticationResolver(e){return $s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hk(t,e){return ft(t,"POST","/v1/accounts:resetPassword",ht(t,e))}async function SB(t,e){return ft(t,"POST","/v1/accounts:update",e)}async function AB(t,e){return ft(t,"POST","/v1/accounts:signUp",e)}async function NB(t,e){return ft(t,"POST","/v1/accounts:update",ht(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IB(t,e){return Wr(t,"POST","/v1/accounts:signInWithPassword",ht(t,e))}async function Og(t,e){return ft(t,"POST","/v1/accounts:sendOobCode",ht(t,e))}async function RB(t,e){return Og(t,e)}async function CB(t,e){return Og(t,e)}async function jB(t,e){return Og(t,e)}async function PB(t,e){return Og(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kB(t,e){return Wr(t,"POST","/v1/accounts:signInWithEmailLink",ht(t,e))}async function DB(t,e){return Wr(t,"POST","/v1/accounts:signInWithEmailLink",ht(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends zc{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new nh(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new nh(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zi(e,n,"signInWithPassword",IB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return kB(e,{email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zi(e,s,"signUpPassword",AB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return DB(e,{idToken:n,email:this._email,oobCode:this._password});default:Zt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ar(t,e){return Wr(t,"POST","/v1/accounts:signInWithIdp",ht(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MB="http://localhost";class sr extends zc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new sr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const a=new sr(s,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ar(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ar(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ar(e,n)}buildRequest(){const e={requestUri:MB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Lc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bA(t,e){return ft(t,"POST","/v1/accounts:sendVerificationCode",ht(t,e))}async function OB(t,e){return Wr(t,"POST","/v1/accounts:signInWithPhoneNumber",ht(t,e))}async function VB(t,e){const n=await Wr(t,"POST","/v1/accounts:signInWithPhoneNumber",ht(t,e));if(n.temporaryProof)throw Hu(t,"account-exists-with-different-credential",n);return n}const LB={USER_NOT_FOUND:"user-not-found"};async function UB(t,e){const n={...e,operation:"REAUTH"};return Wr(t,"POST","/v1/accounts:signInWithPhoneNumber",ht(t,n),LB)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends zc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new ro({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new ro({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return OB(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return VB(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return UB(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:s,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:s,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:s,phoneNumber:r,temporaryProof:i}=e;return!s&&!n&&!r&&!i?null:new ro({verificationId:n,verificationCode:s,phoneNumber:r,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FB(t){const e=wl(qu(t)).link,n=e?wl(qu(e)).deep_link_id:null,s=wl(qu(t)).deep_link_id;return(s?wl(qu(s)).link:null)||s||n||e||t}class Vg{constructor(e){const n=wl(qu(e)),s=n.apiKey??null,r=n.oobCode??null,i=zB(n.mode??null);q(s&&r&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=FB(e);try{return new Vg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(){this.providerId=fa.PROVIDER_ID}static credential(e,n){return nh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Vg.parseLink(n);return q(s,"argument-error"),nh._fromEmailAndCode(e,s.code,s.tenantId)}}fa.PROVIDER_ID="password";fa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends Yr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Vl extends Fc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return q("providerId"in n&&"signInMethod"in n,"argument-error"),sr._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return q(e.idToken||e.accessToken,"argument-error"),sr._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Vl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Vl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s,oauthTokenSecret:r,pendingToken:i,nonce:a,providerId:o}=e;if(!s&&!r&&!n&&!i||!o)return null;try{return new Vl(o)._credential({idToken:n,accessToken:s,nonce:a,pendingToken:i})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends Fc{constructor(){super("facebook.com")}static credential(e){return sr._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ls.credential(e.oauthAccessToken)}catch{return null}}}Ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return sr._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Us.credential(n,s)}catch{return null}}}Us.GOOGLE_SIGN_IN_METHOD="google.com";Us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends Fc{constructor(){super("github.com")}static credential(e){return sr._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.GITHUB_SIGN_IN_METHOD="github.com";zs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BB="http://localhost";class sc extends zc{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Ar(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ar(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ar(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,pendingToken:i}=n;return!s||!r||!i||s!==r?null:new sc(s,i)}static _create(e,n){return new sc(e,n)}buildRequest(){return{requestUri:BB,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qB="saml.";class Cp extends Yr{constructor(e){q(e.startsWith(qB),"argument-error"),super(e)}static credentialFromResult(e){return Cp.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Cp.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=sc.fromJSON(e);return q(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:s}=e;if(!n||!s)return null;try{return sc._create(s,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends Fc{constructor(){super("twitter.com")}static credential(e,n){return sr._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Fs.credential(n,s)}catch{return null}}}Fs.TWITTER_SIGN_IN_METHOD="twitter.com";Fs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(t,e){return Wr(t,"POST","/v1/accounts:signUp",ht(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await Es._fromIdTokenResponse(e,s,r),a=wA(s);return new xs({user:i,providerId:a,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=wA(s);return new xs({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function wA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HB(t){var r;if($e(t.app))return Promise.reject(Bt(t));const e=it(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new xs({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await fk(e,{returnSecureToken:!0}),s=await xs._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp extends ln{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,jp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new jp(e,n,s,r)}}function mk(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?jp._fromErrorAndOperation(t,i,e,s):i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GB(t,e){const n=J(t);await Lg(!0,n,e);const{providerUserInfo:s}=await $8(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),r=pk(s||[]);return n.providerData=n.providerData.filter(i=>r.has(i.providerId)),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function aw(t,e,n=!1){const s=await zr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return xs._forOperation(t,"link",s)}async function Lg(t,e,n){await th(e);const s=pk(e.providerData),r=t===!1?"provider-already-linked":"no-such-provider";q(s.has(n)===t,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk(t,e,n=!1){const{auth:s}=t;if($e(s.app))return Promise.reject(Bt(s));const r="reauthenticate";try{const i=await zr(t,mk(s,r,e,t),n);q(i.idToken,s,"internal-error");const a=Mg(i.idToken);q(a,s,"internal-error");const{sub:o}=a;return q(t.uid===o,s,"user-mismatch"),xs._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Zt(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yk(t,e,n=!1){if($e(t.app))return Promise.reject(Bt(t));const s="signIn",r=await mk(t,s,e),i=await xs._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function Ug(t,e){return yk(it(t),e)}async function vk(t,e){const n=J(t);return await Lg(!1,n,e.providerId),aw(n,e)}async function xk(t,e){return gk(J(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $B(t,e){return Wr(t,"POST","/v1/accounts:signInWithCustomToken",ht(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KB(t,e){if($e(t.app))return Promise.reject(Bt(t));const n=it(t),s=await $B(n,{token:e,returnSecureToken:!0}),r=await xs._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?ow._fromServerResponse(e,n):"totpInfo"in n?lw._fromServerResponse(e,n):Zt(e,"internal-error")}}class ow extends $h{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new ow(n)}}class lw extends $h{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new lw(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t,e,n){var s;q(((s=n.url)==null?void 0:s.length)>0,t,"invalid-continue-uri"),q(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),q(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(q(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(q(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cw(t){const e=it(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WB(t,e,n){const s=it(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&zg(s,r,n),await zi(s,r,"getOobCode",CB,"EMAIL_PASSWORD_PROVIDER")}async function YB(t,e,n){await hk(J(t),{oobCode:e,newPassword:n}).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&cw(t),s})}async function QB(t,e){await NB(J(t),{oobCode:e})}async function _k(t,e){const n=J(t),s=await hk(n,{oobCode:e}),r=s.requestType;switch(q(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(s.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(s.mfaInfo,n,"internal-error");default:q(s.email,n,"internal-error")}let i=null;return s.mfaInfo&&(i=$h._fromServerResponse(it(n),s.mfaInfo)),{data:{email:(s.requestType==="VERIFY_AND_CHANGE_EMAIL"?s.newEmail:s.email)||null,previousEmail:(s.requestType==="VERIFY_AND_CHANGE_EMAIL"?s.email:s.newEmail)||null,multiFactorInfo:i},operation:r}}async function XB(t,e){const{data:n}=await _k(J(t),e);return n.email}async function JB(t,e,n){if($e(t.app))return Promise.reject(Bt(t));const s=it(t),a=await zi(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fk,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&cw(t),c}),o=await xs._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(o.user),o}function ZB(t,e,n){return $e(t.app)?Promise.reject(Bt(t)):Ug(J(t),fa.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&cw(t),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e7(t,e,n){const s=it(t),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function i(a,o){q(o.handleCodeInApp,s,"argument-error"),o&&zg(s,a,o)}i(r,n),await zi(s,r,"getOobCode",jB,"EMAIL_PASSWORD_PROVIDER")}function t7(t,e){const n=Vg.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function n7(t,e,n){if($e(t.app))return Promise.reject(Bt(t));const s=J(t),r=fa.credentialWithLink(e,n||eh());return q(r._tenantId===(s.tenantId||null),s,"tenant-id-mismatch"),Ug(s,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s7(t,e){return ft(t,"POST","/v1/accounts:createAuthUri",ht(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r7(t,e){const n=sw()?eh():"http://localhost",s={identifier:e,continueUri:n},{signinMethods:r}=await s7(J(t),s);return r||[]}async function i7(t,e){const n=J(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&zg(n.auth,r,e);const{email:i}=await RB(n.auth,r);i!==t.email&&await t.reload()}async function a7(t,e,n){const s=J(t),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&zg(s.auth,i,n);const{email:a}=await PB(s.auth,i);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o7(t,e){return ft(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l7(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=J(t),i={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await zr(s,o7(s.auth,i));s.displayName=a.displayName||null,s.photoURL=a.photoUrl||null;const o=s.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=s.displayName,o.photoURL=s.photoURL),await s._updateTokensIfNecessary(a)}function c7(t,e){const n=J(t);return $e(n.auth.app)?Promise.reject(Bt(n.auth)):bk(n,e,null)}function u7(t,e){return bk(J(t),null,e)}async function bk(t,e,n){const{auth:s}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const a=await zr(t,SB(s,i));await t._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d7(t){var r,i;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const a=(i=(r=Mg(t.idToken))==null?void 0:r.firebase)==null?void 0:i.sign_in_provider;if(a){const o=a!=="anonymous"&&a!=="custom"?a:null;return new Ll(s,o)}}if(!e)return null;switch(e){case"facebook.com":return new h7(s,n);case"github.com":return new f7(s,n);case"google.com":return new m7(s,n);case"twitter.com":return new p7(s,n,t.screenName||null);case"custom":case"anonymous":return new Ll(s,null);default:return new Ll(s,e,n)}}class Ll{constructor(e,n,s={}){this.isNewUser=e,this.providerId=n,this.profile=s}}class wk extends Ll{constructor(e,n,s,r){super(e,n,s),this.username=r}}class h7 extends Ll{constructor(e,n){super(e,"facebook.com",n)}}class f7 extends wk{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class m7 extends Ll{constructor(e,n){super(e,"google.com",n)}}class p7 extends wk{constructor(e,n,s){super(e,"twitter.com",n,s)}}function g7(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:d7(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n,s){this.type=e,this.credential=n,this.user=s}static _fromIdtoken(e,n){return new Ka("enroll",e,n)}static _fromMfaPendingCredential(e){return new Ka("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,s;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return Ka._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((s=e.multiFactorSession)!=null&&s.idToken)return Ka._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n,s){this.session=e,this.hints=n,this.signInResolver=s}static _fromError(e,n){const s=it(e),r=n.customData._serverResponse,i=(r.mfaInfo||[]).map(o=>$h._fromServerResponse(s,o));q(r.mfaPendingCredential,s,"internal-error");const a=Ka._fromMfaPendingCredential(r.mfaPendingCredential);return new uw(a,i,async o=>{const c=await o._process(s,a);delete r.mfaInfo,delete r.mfaPendingCredential;const u={...r,idToken:c.idToken,refreshToken:c.refreshToken};switch(n.operationType){case"signIn":const h=await xs._fromIdTokenResponse(s,n.operationType,u);return await s._updateCurrentUser(h.user),h;case"reauthenticate":return q(n.user,s,"internal-error"),xs._forOperation(n.user,n.operationType,u);default:Zt(s,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function y7(t,e){var r;const n=J(t),s=e;return q(e.customData.operationType,n,"argument-error"),q((r=s.customData._serverResponse)==null?void 0:r.mfaPendingCredential,n,"argument-error"),uw._fromError(n,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(t,e){return ft(t,"POST","/v2/accounts/mfaEnrollment:start",ht(t,e))}function v7(t,e){return ft(t,"POST","/v2/accounts/mfaEnrollment:finalize",ht(t,e))}function x7(t,e){return ft(t,"POST","/v2/accounts/mfaEnrollment:withdraw",ht(t,e))}class dw{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(s=>$h._fromServerResponse(e.auth,s)))})}static _fromUser(e){return new dw(e)}async getSession(){return Ka._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const s=e,r=await this.getSession(),i=await zr(this.user,s._process(this.user.auth,r,n));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,s=await this.user.getIdToken();try{const r=await zr(this.user,x7(this.user.auth,{idToken:s,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:i})=>i!==n),await this.user._updateTokensIfNecessary(r),await this.user.reload()}catch(r){throw r}}}const H0=new WeakMap;function _7(t){const e=J(t);return H0.has(e)||H0.set(e,dw._fromUser(e)),H0.get(e)}const Pp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pp,"1"),this.storage.removeItem(Pp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7=1e3,w7=10;class Ek extends Tk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ok(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(s);!n&&this.localCache[s]===a||this.notifyListeners(s,a)},i=this.storage.getItem(s);nB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,w7):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},b7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ek.type="LOCAL";const hw=Ek;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk extends Tk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Sk.type="SESSION";const mo=Sk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Fg(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const o=Array.from(a).map(async u=>u(n.origin,i)),c=await T7(o);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,a;return new Promise((o,c)=>{const u=Kh("",20);r.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},s);a={messageChannel:r,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return window}function S7(t){wt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(){return typeof wt().WorkerGlobalScope<"u"&&typeof wt().importScripts=="function"}async function A7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function N7(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function I7(){return fw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak="firebaseLocalStorageDb",R7=1,kp="firebaseLocalStorage",Nk="fbase_key";class Wh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bg(t,e){return t.transaction([kp],e?"readwrite":"readonly").objectStore(kp)}function C7(){const t=indexedDB.deleteDatabase(Ak);return new Wh(t).toPromise()}function Ax(){const t=indexedDB.open(Ak,R7);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(kp,{keyPath:Nk})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(kp)?e(s):(s.close(),await C7(),e(await Ax()))})})}async function EA(t,e,n){const s=Bg(t,!0).put({[Nk]:e,value:n});return new Wh(s).toPromise()}async function j7(t,e){const n=Bg(t,!1).get(e),s=await new Wh(n).toPromise();return s===void 0?null:s.value}function SA(t,e){const n=Bg(t,!0).delete(e);return new Wh(n).toPromise()}const P7=800,k7=3;class Ik{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ax(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>k7)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fg._getInstance(I7()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await A7(),!this.activeServiceWorker)return;this.sender=new E7(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||N7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ax();return await EA(e,Pp,"1"),await SA(e,Pp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>EA(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>j7(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>SA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Bg(r,!1).getAll();return new Wh(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),P7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ik.type="LOCAL";const sh=Ik;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t,e){return ft(t,"POST","/v2/accounts/mfaSignIn:start",ht(t,e))}function D7(t,e){return ft(t,"POST","/v2/accounts/mfaSignIn:finalize",ht(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=ck("rcb"),M7=new Bh(3e4,6e4);class O7{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=wt().grecaptcha)!=null&&e.render)}load(e,n=""){return q(V7(n),e,"argument-error"),this.shouldResolveImmediately(n)&&mA(wt().grecaptcha)?Promise.resolve(wt().grecaptcha):new Promise((s,r)=>{const i=wt().setTimeout(()=>{r(kt(e,"network-request-failed"))},M7.get());wt()[G0]=()=>{wt().clearTimeout(i),delete wt()[G0];const o=wt().grecaptcha;if(!o||!mA(o)){r(kt(e,"internal-error"));return}const c=o.render;o.render=(u,h)=>{const f=c(u,h);return this.counter++,f},this.hostLanguage=n,s(o)};const a=`${cB()}?${Lc({onload:G0,render:"explicit",hl:n})}`;iw(a).catch(()=>{clearTimeout(i),r(kt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=wt().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function V7(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class L7{async load(e){return new mB(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="recaptcha",U7={theme:"light",type:"image"};let z7=class{constructor(e,n,s={...U7}){this.parameters=s,this.type=yd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=it(e),this.isInvisible=this.parameters.size==="invisible",q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof n=="string"?document.getElementById(n):n;q(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new L7:new O7,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),s=n.getResponse(e);return s||new Promise(r=>{const i=a=>{a&&(this.tokenChangeListeners.delete(i),r(a))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(s=>s(n)),typeof e=="function")e(n);else if(typeof e=="string"){const s=wt()[e];typeof s=="function"&&s(n)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){q(sw()&&!fw(),this.auth,"internal-error"),await F7(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await H8(this.auth);q(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function F7(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=ro._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function B7(t,e,n){if($e(t.app))return Promise.reject(Bt(t));const s=it(t),r=await qg(s,e,J(n));return new mw(r,i=>Ug(s,i))}async function q7(t,e,n){const s=J(t);await Lg(!1,s,"phone");const r=await qg(s.auth,e,J(n));return new mw(r,i=>vk(s,i))}async function H7(t,e,n){const s=J(t);if($e(s.auth.app))return Promise.reject(Bt(s.auth));const r=await qg(s.auth,e,J(n));return new mw(r,i=>xk(s,i))}async function qg(t,e,n){var s;if(!t._getRecaptchaConfig())try{await _B(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const i=r.session;if("phoneNumber"in r){q(i.type==="enroll",t,"internal-error");const a={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await zi(t,a,"mfaSmsEnrollment",async(h,f)=>{if(f.phoneEnrollmentInfo.captchaResponse===gd){q((n==null?void 0:n.type)===yd,h,"argument-error");const m=await $0(h,f,n);return TA(h,m)}return TA(h,f)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{q(i.type==="signin",t,"internal-error");const a=((s=r.multiFactorHint)==null?void 0:s.uid)||r.multiFactorUid;q(a,t,"missing-multi-factor-info");const o={mfaPendingCredential:i.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await zi(t,o,"mfaSmsSignIn",async(f,m)=>{if(m.phoneSignInInfo.captchaResponse===gd){q((n==null?void 0:n.type)===yd,f,"argument-error");const p=await $0(f,m,n);return AA(f,p)}return AA(f,m)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await zi(t,i,"sendVerificationCode",async(u,h)=>{if(h.captchaResponse===gd){q((n==null?void 0:n.type)===yd,u,"argument-error");const f=await $0(u,h,n);return bA(u,f)}return bA(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{n==null||n._reset()}}async function G7(t,e){const n=J(t);if($e(n.auth.app))return Promise.reject(Bt(n.auth));await aw(n,e)}async function $0(t,e,n){q(n.type===yd,t,"argument-error");const s=await n.verify();q(typeof s=="string",t,"argument-error");const r={...e};if("phoneEnrollmentInfo"in r){const i=r.phoneEnrollmentInfo.phoneNumber,a=r.phoneEnrollmentInfo.captchaResponse,o=r.phoneEnrollmentInfo.clientType,c=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:s,captchaResponse:a,clientType:o,recaptchaVersion:c}}),r}else if("phoneSignInInfo"in r){const i=r.phoneSignInInfo.captchaResponse,a=r.phoneSignInInfo.clientType,o=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:i,clientType:a,recaptchaVersion:o}}),r}else return Object.assign(r,{recaptchaToken:s}),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let po=class Im{constructor(e){this.providerId=Im.PROVIDER_ID,this.auth=it(e)}verifyPhoneNumber(e,n){return qg(this.auth,e,J(n))}static credential(e,n){return ro._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Im.credentialFromTaggedObject(n)}static credentialFromError(e){return Im.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:s}=e;return n&&s?ro._fromTokenResponse(n,s):null}};po.PROVIDER_ID="phone";po.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(t,e){return e?Fn(e):(q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw extends zc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ar(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ar(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ar(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $7(t){return yk(t.auth,new pw(t),t.bypassAuthState)}function K7(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),gk(n,new pw(t),t.bypassAuthState)}async function W7(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),aw(n,new pw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $7;case"linkViaPopup":case"linkViaRedirect":return W7;case"reauthViaPopup":case"reauthViaRedirect":return K7;default:Zt(this.auth,"internal-error")}}resolve(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7=new Bh(2e3,1e4);async function Q7(t,e,n){if($e(t.app))return Promise.reject(kt(t,"operation-not-supported-in-this-environment"));const s=it(t);Uc(t,e,Yr);const r=Do(s,n);return new _r(s,"signInViaPopup",e,r).executeNotNull()}async function X7(t,e,n){const s=J(t);if($e(s.auth.app))return Promise.reject(kt(s.auth,"operation-not-supported-in-this-environment"));Uc(s.auth,e,Yr);const r=Do(s.auth,n);return new _r(s.auth,"reauthViaPopup",e,r,s).executeNotNull()}async function J7(t,e,n){const s=J(t);Uc(s.auth,e,Yr);const r=Do(s.auth,n);return new _r(s.auth,"linkViaPopup",e,r,s).executeNotNull()}class _r extends Rk{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,_r.currentPopupAction&&_r.currentPopupAction.cancel(),_r.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return q(e,this.auth,"internal-error"),e}async onExecution(){Is(this.filter.length===1,"Popup operations only handle one event");const e=Kh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(kt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(kt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_r.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Y7.get())};e()}}_r.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7="pendingRedirect",vd=new Map;class eq extends Rk{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=vd.get(this.auth._key());if(!e){try{const s=await tq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}vd.set(this.auth._key(),e)}return this.bypassAuthState||vd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tq(t,e){const n=jk(e),s=Ck(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}async function gw(t,e){return Ck(t)._set(jk(e),"true")}function nq(){vd.clear()}function yw(t,e){vd.set(t._key(),e)}function Ck(t){return Fn(t._redirectPersistence)}function jk(t){return so(Z7,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sq(t,e,n){return rq(t,e,n)}async function rq(t,e,n){if($e(t.app))return Promise.reject(Bt(t));const s=it(t);Uc(t,e,Yr),await s._initializationPromise;const r=Do(s,n);return await gw(r,s),r._openRedirect(s,e,"signInViaRedirect")}function iq(t,e,n){return aq(t,e,n)}async function aq(t,e,n){const s=J(t);if(Uc(s.auth,e,Yr),$e(s.auth.app))return Promise.reject(Bt(s.auth));await s.auth._initializationPromise;const r=Do(s.auth,n);await gw(r,s.auth);const i=await Pk(s);return r._openRedirect(s.auth,e,"reauthViaRedirect",i)}function oq(t,e,n){return lq(t,e,n)}async function lq(t,e,n){const s=J(t);Uc(s.auth,e,Yr),await s.auth._initializationPromise;const r=Do(s.auth,n);await Lg(!1,s,e.providerId),await gw(r,s.auth);const i=await Pk(s);return r._openRedirect(s.auth,e,"linkViaRedirect",i)}async function cq(t,e){return await it(t)._initializationPromise,Hg(t,e,!1)}async function Hg(t,e,n=!1){if($e(t.app))return Promise.reject(Bt(t));const s=it(t),r=Do(s,e),a=await new eq(s,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,e)),a}async function Pk(t){const e=Kh(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uq=10*60*1e3;class kk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dq(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!Dk(e)){const r=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(kt(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uq&&this.cachedEventUids.clear(),this.cachedEventUids.has(NA(e))}saveEventToCache(e){this.cachedEventUids.add(NA(e)),this.lastProcessedEventTime=Date.now()}}function NA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Dk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mk(t,e={}){return ft(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fq=/^https?/;async function mq(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Mk(t);for(const n of e)try{if(pq(n))return}catch{}Zt(t,"unauthorized-domain")}function pq(t){const e=eh(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===s}if(!fq.test(n))return!1;if(hq.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gq=new Bh(3e4,6e4);function IA(){const t=wt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function yq(t){return new Promise((e,n)=>{var r,i,a;function s(){IA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{IA(),n(kt(t,"network-request-failed"))},timeout:gq.get()})}if((i=(r=wt().gapi)==null?void 0:r.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=wt().gapi)!=null&&a.load)s();else{const o=ck("iframefcb");return wt()[o]=()=>{gapi.load?s():n(kt(t,"network-request-failed"))},iw(`${dB()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw Rm=null,e})}let Rm=null;function vq(t){return Rm=Rm||yq(t),Rm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xq=new Bh(5e3,15e3),_q="__/auth/iframe",bq="emulator/auth/iframe",wq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Eq(t){const e=t.config;q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?rw(e,bq):`https://${t.config.authDomain}/${_q}`,s={apiKey:e.apiKey,appName:t.name,v:Kr},r=Tq.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Lc(s).slice(1)}`}async function Sq(t){const e=await vq(t),n=wt().gapi;return q(n,t,"internal-error"),e.open({where:document.body,url:Eq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wq,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const a=kt(t,"network-request-failed"),o=wt().setTimeout(()=>{i(a)},xq.get());function c(){wt().clearTimeout(o),r(s)}s.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Nq=500,Iq=600,Rq="_blank",Cq="http://localhost";class RA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jq(t,e,n,s=Nq,r=Iq){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let o="";const c={...Aq,width:s.toString(),height:r.toString(),top:i,left:a},u=rt().toLowerCase();n&&(o=sk(u)?Rq:n),tk(u)&&(e=e||Cq,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[p,_])=>`${m}${p}=${_},`,"");if(tB(u)&&o!=="_self")return Pq(e||"",o),new RA(null);const f=window.open(e||"",o,h);q(f,t,"popup-blocked");try{f.focus()}catch{}return new RA(f)}function Pq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kq="__/auth/handler",Dq="emulator/auth/handler",Mq=encodeURIComponent("fac");async function Nx(t,e,n,s,r,i){q(t.config.authDomain,t,"auth-domain-config-required"),q(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Kr,eventId:r};if(e instanceof Yr){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",lF(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries(i||{}))a[h]=f}if(e instanceof Fc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const c=await t._getAppCheckToken(),u=c?`#${Mq}=${encodeURIComponent(c)}`:"";return`${Oq(t)}?${Lc(o).slice(1)}${u}`}function Oq({config:t}){return t.emulator?rw(t,Dq):`https://${t.authDomain}/${kq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="webStorageSupport";class Vq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mo,this._completeRedirectFn=Hg,this._overrideRedirectResult=yw}async _openPopup(e,n,s,r){var a;Is((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await Nx(e,n,s,eh(),r);return jq(e,i,Kh())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Nx(e,n,s,eh(),r);return S7(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Is(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await Sq(e),s=new kk(e);return n.register("authEvent",r=>(q(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(K0,{type:K0},r=>{var a;const i=(a=r==null?void 0:r[0])==null?void 0:a[K0];i!==void 0&&n(!!i),Zt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mq(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ok()||nk()||Hh()}}const Lq=Vq;class Uq{constructor(e){this.factorId=e}_process(e,n,s){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,s);case"signin":return this._finalizeSignIn(e,n.credential);default:return $s("unexpected MultiFactorSessionType")}}}class vw extends Uq{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new vw(e)}_finalizeEnroll(e,n,s){return v7(e,{idToken:n,displayName:s,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return D7(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Ok{constructor(){}static assertion(e){return vw._fromCredential(e)}}Ok.FACTOR_ID="phone";var CA="@firebase/auth",jA="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Bq(t){Ur(new vs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=s.options;q(a&&!a.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lk(t)},u=new oB(s,r,i,c);return bB(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ur(new vs("auth-internal",e=>{const n=it(e.getProvider("auth").getImmediate());return(s=>new zq(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kn(CA,jA,Fq(t)),Kn(CA,jA,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qq=5*60;Xz("authIdTokenMaxAge");function Hq(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}lB({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=kt("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",Hq().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Bq("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gq=2e3;async function $q(t,e,n){const{BuildInfo:s}=go();Is(e.sessionId,"AuthEvent did not contain a session ID");const r=await Xq(e.sessionId),i={};return Hh()?i.ibi=s.packageName:qh()?i.apn=s.packageName:Zt(t,"operation-not-supported-in-this-environment"),s.displayName&&(i.appDisplayName=s.displayName),i.sessionId=r,Nx(t,n,e.type,void 0,e.eventId??void 0,i)}async function Kq(t){const{BuildInfo:e}=go(),n={};Hh()?n.iosBundleId=e.packageName:qh()?n.androidPackageName=e.packageName:Zt(t,"operation-not-supported-in-this-environment"),await Mk(t,n)}function Wq(t){const{cordova:e}=go();return new Promise(n=>{e.plugins.browsertab.isAvailable(s=>{let r=null;s?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,eB()?"_blank":"_system","location=yes"),n(r)})})}async function Yq(t,e,n){const{cordova:s}=go();let r=()=>{};try{await new Promise((i,a)=>{let o=null;function c(){var m;i();const f=(m=s.plugins.browsertab)==null?void 0:m.close;typeof f=="function"&&f(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function u(){o||(o=window.setTimeout(()=>{a(kt(t,"redirect-cancelled-by-user"))},Gq))}function h(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(c),document.addEventListener("resume",u,!1),qh()&&document.addEventListener("visibilitychange",h,!1),r=()=>{e.removePassiveListener(c),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",h,!1),o&&window.clearTimeout(o)}})}finally{r()}}function Qq(t){var n,s,r,i,a,o,c,u,h,f;const e=go();q(typeof((n=e==null?void 0:e.universalLinks)==null?void 0:n.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(typeof((s=e==null?void 0:e.BuildInfo)==null?void 0:s.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q(typeof((a=(i=(r=e==null?void 0:e.cordova)==null?void 0:r.plugins)==null?void 0:i.browsertab)==null?void 0:a.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q(typeof((u=(c=(o=e==null?void 0:e.cordova)==null?void 0:o.plugins)==null?void 0:c.browsertab)==null?void 0:u.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q(typeof((f=(h=e==null?void 0:e.cordova)==null?void 0:h.InAppBrowser)==null?void 0:f.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Xq(t){const e=Jq(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(r=>r.toString(16).padStart(2,"0")).join("")}function Jq(t){if(Is(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zq=20;class eH extends kk{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function tH(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:rH(),postBody:null,tenantId:t.tenantId,error:kt(t,"no-auth-event")}}function nH(t,e){return Ix()._set(Rx(t),e)}async function PA(t){const e=await Ix()._get(Rx(t));return e&&await Ix()._remove(Rx(t)),e}function sH(t,e){var s,r;const n=aH(e);if(n.includes("/__/auth/callback")){const i=Cm(n),a=i.firebaseError?iH(decodeURIComponent(i.firebaseError)):null,o=(r=(s=a==null?void 0:a.code)==null?void 0:s.split("auth/"))==null?void 0:r[1],c=o?kt(o):null;return c?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:n,postBody:null}}return null}function rH(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Zq;n++){const s=Math.floor(Math.random()*e.length);t.push(e.charAt(s))}return t.join("")}function Ix(){return Fn(hw)}function Rx(t){return so("authEvent",t.config.apiKey,t.name)}function iH(t){try{return JSON.parse(t)}catch{return null}}function aH(t){const e=Cm(t),n=e.link?decodeURIComponent(e.link):void 0,s=Cm(n).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Cm(r).link||r||s||n||t}function Cm(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return wl(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oH=500;class lH{constructor(){this._redirectPersistence=mo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Hg,this._overrideRedirectResult=yw}async _initialize(e){const n=e._key();let s=this.eventManagers.get(n);return s||(s=new eH(e),this.eventManagers.set(n,s),this.attachCallbackListeners(e,s)),s}_openPopup(e){Zt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,s,r){Qq(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),nq(),await this._originValidation(e);const a=tH(e,s,r);await nH(e,a);const o=await $q(e,a,n),c=await Wq(o);return Yq(e,i,c)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Kq(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:s,handleOpenURL:r,BuildInfo:i}=go(),a=setTimeout(async()=>{await PA(e),n.onEvent(kA())},oH),o=async h=>{clearTimeout(a);const f=await PA(e);let m=null;f&&(h!=null&&h.url)&&(m=sH(f,h.url)),n.onEvent(m||kA())};typeof s<"u"&&typeof s.subscribe=="function"&&s.subscribe(null,o);const c=r,u=`${i.packageName.toLowerCase()}://`;go().handleOpenURL=async h=>{if(h.toLowerCase().startsWith(u)&&o({url:h}),typeof c=="function")try{c(h)}catch(f){console.error(f)}}}}const cH=lH;function kA(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:kt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uH(t,e){it(t)._logFramework(e)}var dH="@firebase/auth-compat",hH="0.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fH=1e3;function xd(){var t;return((t=self==null?void 0:self.location)==null?void 0:t.protocol)||null}function mH(){return xd()==="http:"||xd()==="https:"}function Vk(t=rt()){return!!((xd()==="file:"||xd()==="ionic:"||xd()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function pH(){return Yb()||kg()}function gH(){return RP()&&(document==null?void 0:document.documentMode)===11}function yH(t=rt()){return/Edge\/\d+/.test(t)}function vH(t=rt()){return gH()||yH(t)}function Lk(){try{const t=self.localStorage,e=Kh();if(t)return t.setItem(e,"1"),t.removeItem(e),vH()?Xd():!0}catch{return xw()&&Xd()}return!1}function xw(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function W0(){return(mH()||IP()||Vk())&&!pH()&&Lk()&&!xw()}function Uk(){return Vk()&&typeof document<"u"}async function xH(){return Uk()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},fH);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function _H(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln={LOCAL:"local",NONE:"none",SESSION:"session"},Au=q,zk="persistence";function bH(t,e){if(Au(Object.values(Ln).includes(e),t,"invalid-persistence-type"),Yb()){Au(e!==Ln.SESSION,t,"unsupported-persistence-type");return}if(kg()){Au(e===Ln.NONE,t,"unsupported-persistence-type");return}if(xw()){Au(e===Ln.NONE||e===Ln.LOCAL&&Xd(),t,"unsupported-persistence-type");return}Au(e===Ln.NONE||Lk(),t,"unsupported-persistence-type")}async function Cx(t){await t._initializationPromise;const e=Fk(),n=so(zk,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistenceType())}function wH(t,e){const n=Fk();if(!n)return[];const s=so(zk,t,e);switch(n.getItem(s)){case Ln.NONE:return[nc];case Ln.LOCAL:return[sh,mo];case Ln.SESSION:return[mo];default:return[]}}function Fk(){var t;try{return((t=_H())==null?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TH=q;class Ni{constructor(){this.browserResolver=Fn(Lq),this.cordovaResolver=Fn(cH),this.underlyingResolver=null,this._redirectPersistence=mo,this._completeRedirectFn=Hg,this._overrideRedirectResult=yw}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,s,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,s,r)}async _openRedirect(e,n,s,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,s,r)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Uk()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return TH(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await xH();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t){return t.unwrap()}function EH(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SH(t){return qk(t)}function AH(t,e){var s;const n=(s=e.customData)==null?void 0:s._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const r=e;r.resolver=new NH(t,y7(t,e))}else if(n){const r=qk(e),i=e;r&&(i.credential=r,i.tenantId=n.tenantId||void 0,i.email=n.email||void 0,i.phoneNumber=n.phoneNumber||void 0)}}function qk(t){const{_tokenResponse:e}=t instanceof ln?t.customData:t;if(!e)return null;if(!(t instanceof ln)&&"temporaryProof"in e&&"phoneNumber"in e)return po.credentialFromResult(t);const n=e.providerId;if(!n||n===Eu.PASSWORD)return null;let s;switch(n){case Eu.GOOGLE:s=Us;break;case Eu.FACEBOOK:s=Ls;break;case Eu.GITHUB:s=zs;break;case Eu.TWITTER:s=Fs;break;default:const{oauthIdToken:r,oauthAccessToken:i,oauthTokenSecret:a,pendingToken:o,nonce:c}=e;return!i&&!a&&!r&&!o?null:o?n.startsWith("saml.")?sc._create(n,o):sr._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:r,accessToken:i}):new Vl(n).credential({idToken:r,accessToken:i,rawNonce:c})}return t instanceof ln?s.credentialFromError(t):s.credentialFromResult(t)}function An(t,e){return e.catch(n=>{throw n instanceof ln&&AH(t,n),n}).then(n=>{const s=n.operationType,r=n.user;return{operationType:s,credential:SH(n),additionalUserInfo:g7(n),user:Gg.getOrCreate(r)}})}async function jx(t,e){const n=await e;return{verificationId:n.verificationId,confirm:s=>An(t,n.confirm(s))}}class NH{constructor(e,n){this.resolver=n,this.auth=EH(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return An(Bk(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gg=class Gu{constructor(e){this._delegate=e,this.multiFactor=_7(e)}static getOrCreate(e){return Gu.USER_MAP.has(e)||Gu.USER_MAP.set(e,new Gu(e)),Gu.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return An(this.auth,vk(this._delegate,e))}async linkWithPhoneNumber(e,n){return jx(this.auth,q7(this._delegate,e,n))}async linkWithPopup(e){return An(this.auth,J7(this._delegate,e,Ni))}async linkWithRedirect(e){return await Cx(it(this.auth)),oq(this._delegate,e,Ni)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return An(this.auth,xk(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return jx(this.auth,H7(this._delegate,e,n))}reauthenticateWithPopup(e){return An(this.auth,X7(this._delegate,e,Ni))}async reauthenticateWithRedirect(e){return await Cx(it(this.auth)),iq(this._delegate,e,Ni)}sendEmailVerification(e){return i7(this._delegate,e)}async unlink(e){return await GB(this._delegate,e),this}updateEmail(e){return c7(this._delegate,e)}updatePassword(e){return u7(this._delegate,e)}updatePhoneNumber(e){return G7(this._delegate,e)}updateProfile(e){return l7(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return a7(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Gg.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=q;class Px{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:s}=e.options;Nu(s,"invalid-api-key",{appName:e.name}),Nu(s,"invalid-api-key",{appName:e.name});const r=typeof window<"u"?Ni:void 0;this._delegate=n.initialize({options:{persistence:IH(s,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(D8),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Gg.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){wB(this._delegate,e,n)}applyActionCode(e){return QB(this._delegate,e)}checkActionCode(e){return _k(this._delegate,e)}confirmPasswordReset(e,n){return YB(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return An(this._delegate,JB(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return r7(this._delegate,e)}isSignInWithEmailLink(e){return t7(this._delegate,e)}async getRedirectResult(){Nu(W0(),this._delegate,"operation-not-supported-in-this-environment");const e=await cq(this._delegate,Ni);return e?An(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){uH(this._delegate,e)}onAuthStateChanged(e,n,s){const{next:r,error:i,complete:a}=DA(e,n,s);return this._delegate.onAuthStateChanged(r,i,a)}onIdTokenChanged(e,n,s){const{next:r,error:i,complete:a}=DA(e,n,s);return this._delegate.onIdTokenChanged(r,i,a)}sendSignInLinkToEmail(e,n){return e7(this._delegate,e,n)}sendPasswordResetEmail(e,n){return WB(this._delegate,e,n||void 0)}async setPersistence(e){bH(this._delegate,e);let n;switch(e){case Ln.SESSION:n=mo;break;case Ln.LOCAL:n=await Fn(sh)._isAvailable()?sh:hw;break;case Ln.NONE:n=nc;break;default:return Zt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return An(this._delegate,HB(this._delegate))}signInWithCredential(e){return An(this._delegate,Ug(this._delegate,e))}signInWithCustomToken(e){return An(this._delegate,KB(this._delegate,e))}signInWithEmailAndPassword(e,n){return An(this._delegate,ZB(this._delegate,e,n))}signInWithEmailLink(e,n){return An(this._delegate,n7(this._delegate,e,n))}signInWithPhoneNumber(e,n){return jx(this._delegate,B7(this._delegate,e,n))}async signInWithPopup(e){return Nu(W0(),this._delegate,"operation-not-supported-in-this-environment"),An(this._delegate,Q7(this._delegate,e,Ni))}async signInWithRedirect(e){return Nu(W0(),this._delegate,"operation-not-supported-in-this-environment"),await Cx(this._delegate),sq(this._delegate,e,Ni)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return XB(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Px.Persistence=Ln;function DA(t,e,n){let s=t;typeof t!="function"&&({next:s,error:e,complete:n}=t);const r=s;return{next:a=>r(a&&Gg.getOrCreate(a)),error:e,complete:n}}function IH(t,e){const n=wH(t,e);if(typeof self<"u"&&!n.includes(sh)&&n.push(sh),typeof window<"u")for(const s of[hw,mo])n.includes(s)||n.push(s);return n.includes(nc)||n.push(nc),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{static credential(e,n){return po.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new po(Bk(De.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}_w.PHONE_SIGN_IN_METHOD=po.PHONE_SIGN_IN_METHOD;_w.PROVIDER_ID=po.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RH=q;class CH{constructor(e,n,s=De.app()){var r;RH((r=s.options)==null?void 0:r.apiKey,"invalid-api-key",{appName:s.name}),this._delegate=new z7(s.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jH="auth-compat";function PH(t){t.INTERNAL.registerComponent(new vs(jH,e=>{const n=e.getProvider("app-compat").getImmediate(),s=e.getProvider("auth");return new Px(n,s)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:$o.EMAIL_SIGNIN,PASSWORD_RESET:$o.PASSWORD_RESET,RECOVER_EMAIL:$o.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:$o.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:$o.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:$o.VERIFY_EMAIL}},EmailAuthProvider:fa,FacebookAuthProvider:Ls,GithubAuthProvider:zs,GoogleAuthProvider:Us,OAuthProvider:Vl,SAMLAuthProvider:Cp,PhoneAuthProvider:_w,PhoneMultiFactorGenerator:Ok,RecaptchaVerifier:CH,TwitterAuthProvider:Fs,Auth:Px,AuthCredential:zc,Error:ln}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(dH,hH)}PH(De);var MA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fi,Hk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,E){function N(){}N.prototype=E.prototype,A.F=E.prototype,A.prototype=new N,A.prototype.constructor=A,A.D=function(I,P,k){for(var j=Array(arguments.length-2),W=2;W<arguments.length;W++)j[W-2]=arguments[W];return E.prototype[P].apply(I,j)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(A,E,N){N||(N=0);const I=Array(16);if(typeof E=="string")for(var P=0;P<16;++P)I[P]=E.charCodeAt(N++)|E.charCodeAt(N++)<<8|E.charCodeAt(N++)<<16|E.charCodeAt(N++)<<24;else for(P=0;P<16;++P)I[P]=E[N++]|E[N++]<<8|E[N++]<<16|E[N++]<<24;E=A.g[0],N=A.g[1],P=A.g[2];let k=A.g[3],j;j=E+(k^N&(P^k))+I[0]+3614090360&4294967295,E=N+(j<<7&4294967295|j>>>25),j=k+(P^E&(N^P))+I[1]+3905402710&4294967295,k=E+(j<<12&4294967295|j>>>20),j=P+(N^k&(E^N))+I[2]+606105819&4294967295,P=k+(j<<17&4294967295|j>>>15),j=N+(E^P&(k^E))+I[3]+3250441966&4294967295,N=P+(j<<22&4294967295|j>>>10),j=E+(k^N&(P^k))+I[4]+4118548399&4294967295,E=N+(j<<7&4294967295|j>>>25),j=k+(P^E&(N^P))+I[5]+1200080426&4294967295,k=E+(j<<12&4294967295|j>>>20),j=P+(N^k&(E^N))+I[6]+2821735955&4294967295,P=k+(j<<17&4294967295|j>>>15),j=N+(E^P&(k^E))+I[7]+4249261313&4294967295,N=P+(j<<22&4294967295|j>>>10),j=E+(k^N&(P^k))+I[8]+1770035416&4294967295,E=N+(j<<7&4294967295|j>>>25),j=k+(P^E&(N^P))+I[9]+2336552879&4294967295,k=E+(j<<12&4294967295|j>>>20),j=P+(N^k&(E^N))+I[10]+4294925233&4294967295,P=k+(j<<17&4294967295|j>>>15),j=N+(E^P&(k^E))+I[11]+2304563134&4294967295,N=P+(j<<22&4294967295|j>>>10),j=E+(k^N&(P^k))+I[12]+1804603682&4294967295,E=N+(j<<7&4294967295|j>>>25),j=k+(P^E&(N^P))+I[13]+4254626195&4294967295,k=E+(j<<12&4294967295|j>>>20),j=P+(N^k&(E^N))+I[14]+2792965006&4294967295,P=k+(j<<17&4294967295|j>>>15),j=N+(E^P&(k^E))+I[15]+1236535329&4294967295,N=P+(j<<22&4294967295|j>>>10),j=E+(P^k&(N^P))+I[1]+4129170786&4294967295,E=N+(j<<5&4294967295|j>>>27),j=k+(N^P&(E^N))+I[6]+3225465664&4294967295,k=E+(j<<9&4294967295|j>>>23),j=P+(E^N&(k^E))+I[11]+643717713&4294967295,P=k+(j<<14&4294967295|j>>>18),j=N+(k^E&(P^k))+I[0]+3921069994&4294967295,N=P+(j<<20&4294967295|j>>>12),j=E+(P^k&(N^P))+I[5]+3593408605&4294967295,E=N+(j<<5&4294967295|j>>>27),j=k+(N^P&(E^N))+I[10]+38016083&4294967295,k=E+(j<<9&4294967295|j>>>23),j=P+(E^N&(k^E))+I[15]+3634488961&4294967295,P=k+(j<<14&4294967295|j>>>18),j=N+(k^E&(P^k))+I[4]+3889429448&4294967295,N=P+(j<<20&4294967295|j>>>12),j=E+(P^k&(N^P))+I[9]+568446438&4294967295,E=N+(j<<5&4294967295|j>>>27),j=k+(N^P&(E^N))+I[14]+3275163606&4294967295,k=E+(j<<9&4294967295|j>>>23),j=P+(E^N&(k^E))+I[3]+4107603335&4294967295,P=k+(j<<14&4294967295|j>>>18),j=N+(k^E&(P^k))+I[8]+1163531501&4294967295,N=P+(j<<20&4294967295|j>>>12),j=E+(P^k&(N^P))+I[13]+2850285829&4294967295,E=N+(j<<5&4294967295|j>>>27),j=k+(N^P&(E^N))+I[2]+4243563512&4294967295,k=E+(j<<9&4294967295|j>>>23),j=P+(E^N&(k^E))+I[7]+1735328473&4294967295,P=k+(j<<14&4294967295|j>>>18),j=N+(k^E&(P^k))+I[12]+2368359562&4294967295,N=P+(j<<20&4294967295|j>>>12),j=E+(N^P^k)+I[5]+4294588738&4294967295,E=N+(j<<4&4294967295|j>>>28),j=k+(E^N^P)+I[8]+2272392833&4294967295,k=E+(j<<11&4294967295|j>>>21),j=P+(k^E^N)+I[11]+1839030562&4294967295,P=k+(j<<16&4294967295|j>>>16),j=N+(P^k^E)+I[14]+4259657740&4294967295,N=P+(j<<23&4294967295|j>>>9),j=E+(N^P^k)+I[1]+2763975236&4294967295,E=N+(j<<4&4294967295|j>>>28),j=k+(E^N^P)+I[4]+1272893353&4294967295,k=E+(j<<11&4294967295|j>>>21),j=P+(k^E^N)+I[7]+4139469664&4294967295,P=k+(j<<16&4294967295|j>>>16),j=N+(P^k^E)+I[10]+3200236656&4294967295,N=P+(j<<23&4294967295|j>>>9),j=E+(N^P^k)+I[13]+681279174&4294967295,E=N+(j<<4&4294967295|j>>>28),j=k+(E^N^P)+I[0]+3936430074&4294967295,k=E+(j<<11&4294967295|j>>>21),j=P+(k^E^N)+I[3]+3572445317&4294967295,P=k+(j<<16&4294967295|j>>>16),j=N+(P^k^E)+I[6]+76029189&4294967295,N=P+(j<<23&4294967295|j>>>9),j=E+(N^P^k)+I[9]+3654602809&4294967295,E=N+(j<<4&4294967295|j>>>28),j=k+(E^N^P)+I[12]+3873151461&4294967295,k=E+(j<<11&4294967295|j>>>21),j=P+(k^E^N)+I[15]+530742520&4294967295,P=k+(j<<16&4294967295|j>>>16),j=N+(P^k^E)+I[2]+3299628645&4294967295,N=P+(j<<23&4294967295|j>>>9),j=E+(P^(N|~k))+I[0]+4096336452&4294967295,E=N+(j<<6&4294967295|j>>>26),j=k+(N^(E|~P))+I[7]+1126891415&4294967295,k=E+(j<<10&4294967295|j>>>22),j=P+(E^(k|~N))+I[14]+2878612391&4294967295,P=k+(j<<15&4294967295|j>>>17),j=N+(k^(P|~E))+I[5]+4237533241&4294967295,N=P+(j<<21&4294967295|j>>>11),j=E+(P^(N|~k))+I[12]+1700485571&4294967295,E=N+(j<<6&4294967295|j>>>26),j=k+(N^(E|~P))+I[3]+2399980690&4294967295,k=E+(j<<10&4294967295|j>>>22),j=P+(E^(k|~N))+I[10]+4293915773&4294967295,P=k+(j<<15&4294967295|j>>>17),j=N+(k^(P|~E))+I[1]+2240044497&4294967295,N=P+(j<<21&4294967295|j>>>11),j=E+(P^(N|~k))+I[8]+1873313359&4294967295,E=N+(j<<6&4294967295|j>>>26),j=k+(N^(E|~P))+I[15]+4264355552&4294967295,k=E+(j<<10&4294967295|j>>>22),j=P+(E^(k|~N))+I[6]+2734768916&4294967295,P=k+(j<<15&4294967295|j>>>17),j=N+(k^(P|~E))+I[13]+1309151649&4294967295,N=P+(j<<21&4294967295|j>>>11),j=E+(P^(N|~k))+I[4]+4149444226&4294967295,E=N+(j<<6&4294967295|j>>>26),j=k+(N^(E|~P))+I[11]+3174756917&4294967295,k=E+(j<<10&4294967295|j>>>22),j=P+(E^(k|~N))+I[2]+718787259&4294967295,P=k+(j<<15&4294967295|j>>>17),j=N+(k^(P|~E))+I[9]+3951481745&4294967295,A.g[0]=A.g[0]+E&4294967295,A.g[1]=A.g[1]+(P+(j<<21&4294967295|j>>>11))&4294967295,A.g[2]=A.g[2]+P&4294967295,A.g[3]=A.g[3]+k&4294967295}s.prototype.v=function(A,E){E===void 0&&(E=A.length);const N=E-this.blockSize,I=this.C;let P=this.h,k=0;for(;k<E;){if(P==0)for(;k<=N;)r(this,A,k),k+=this.blockSize;if(typeof A=="string"){for(;k<E;)if(I[P++]=A.charCodeAt(k++),P==this.blockSize){r(this,I),P=0;break}}else for(;k<E;)if(I[P++]=A[k++],P==this.blockSize){r(this,I),P=0;break}}this.h=P,this.o+=E},s.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var E=1;E<A.length-8;++E)A[E]=0;E=this.o*8;for(var N=A.length-8;N<A.length;++N)A[N]=E&255,E/=256;for(this.v(A),A=Array(16),E=0,N=0;N<4;++N)for(let I=0;I<32;I+=8)A[E++]=this.g[N]>>>I&255;return A};function i(A,E){var N=o;return Object.prototype.hasOwnProperty.call(N,A)?N[A]:N[A]=E(A)}function a(A,E){this.h=E;const N=[];let I=!0;for(let P=A.length-1;P>=0;P--){const k=A[P]|0;I&&k==E||(N[P]=k,I=!1)}this.g=N}var o={};function c(A){return-128<=A&&A<128?i(A,function(E){return new a([E|0],E<0?-1:0)}):new a([A|0],A<0?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return f;if(A<0)return T(u(-A));const E=[];let N=1;for(let I=0;A>=N;I++)E[I]=A/N|0,N*=4294967296;return new a(E,0)}function h(A,E){if(A.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(A.charAt(0)=="-")return T(h(A.substring(1),E));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=u(Math.pow(E,8));let I=f;for(let k=0;k<A.length;k+=8){var P=Math.min(8,A.length-k);const j=parseInt(A.substring(k,k+P),E);P<8?(P=u(Math.pow(E,P)),I=I.j(P).add(u(j))):(I=I.j(N),I=I.add(u(j)))}return I}var f=c(0),m=c(1),p=c(16777216);t=a.prototype,t.m=function(){if(w(this))return-T(this).m();let A=0,E=1;for(let N=0;N<this.g.length;N++){const I=this.i(N);A+=(I>=0?I:4294967296+I)*E,E*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(_(this))return"0";if(w(this))return"-"+T(this).toString(A);const E=u(Math.pow(A,6));var N=this;let I="";for(;;){const P=R(N,E).g;N=x(N,P.j(E));let k=((N.g.length>0?N.g[0]:N.h)>>>0).toString(A);if(N=P,_(N))return k+I;for(;k.length<6;)k="0"+k;I=k+I}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function _(A){if(A.h!=0)return!1;for(let E=0;E<A.g.length;E++)if(A.g[E]!=0)return!1;return!0}function w(A){return A.h==-1}t.l=function(A){return A=x(this,A),w(A)?-1:_(A)?0:1};function T(A){const E=A.g.length,N=[];for(let I=0;I<E;I++)N[I]=~A.g[I];return new a(N,~A.h).add(m)}t.abs=function(){return w(this)?T(this):this},t.add=function(A){const E=Math.max(this.g.length,A.g.length),N=[];let I=0;for(let P=0;P<=E;P++){let k=I+(this.i(P)&65535)+(A.i(P)&65535),j=(k>>>16)+(this.i(P)>>>16)+(A.i(P)>>>16);I=j>>>16,k&=65535,j&=65535,N[P]=j<<16|k}return new a(N,N[N.length-1]&-2147483648?-1:0)};function x(A,E){return A.add(T(E))}t.j=function(A){if(_(this)||_(A))return f;if(w(this))return w(A)?T(this).j(T(A)):T(T(this).j(A));if(w(A))return T(this.j(T(A)));if(this.l(p)<0&&A.l(p)<0)return u(this.m()*A.m());const E=this.g.length+A.g.length,N=[];for(var I=0;I<2*E;I++)N[I]=0;for(I=0;I<this.g.length;I++)for(let P=0;P<A.g.length;P++){const k=this.i(I)>>>16,j=this.i(I)&65535,W=A.i(P)>>>16,ce=A.i(P)&65535;N[2*I+2*P]+=j*ce,v(N,2*I+2*P),N[2*I+2*P+1]+=k*ce,v(N,2*I+2*P+1),N[2*I+2*P+1]+=j*W,v(N,2*I+2*P+1),N[2*I+2*P+2]+=k*W,v(N,2*I+2*P+2)}for(A=0;A<E;A++)N[A]=N[2*A+1]<<16|N[2*A];for(A=E;A<2*E;A++)N[A]=0;return new a(N,0)};function v(A,E){for(;(A[E]&65535)!=A[E];)A[E+1]+=A[E]>>>16,A[E]&=65535,E++}function b(A,E){this.g=A,this.h=E}function R(A,E){if(_(E))throw Error("division by zero");if(_(A))return new b(f,f);if(w(A))return E=R(T(A),E),new b(T(E.g),T(E.h));if(w(E))return E=R(A,T(E)),new b(T(E.g),E.h);if(A.g.length>30){if(w(A)||w(E))throw Error("slowDivide_ only works with positive integers.");for(var N=m,I=E;I.l(A)<=0;)N=D(N),I=D(I);var P=M(N,1),k=M(I,1);for(I=M(I,2),N=M(N,2);!_(I);){var j=k.add(I);j.l(A)<=0&&(P=P.add(N),k=j),I=M(I,1),N=M(N,1)}return E=x(A,P.j(E)),new b(P,E)}for(P=f;A.l(E)>=0;){for(N=Math.max(1,Math.floor(A.m()/E.m())),I=Math.ceil(Math.log(N)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),k=u(N),j=k.j(E);w(j)||j.l(A)>0;)N-=I,k=u(N),j=k.j(E);_(k)&&(k=m),P=P.add(k),A=x(A,j)}return new b(P,A)}t.B=function(A){return R(this,A).h},t.and=function(A){const E=Math.max(this.g.length,A.g.length),N=[];for(let I=0;I<E;I++)N[I]=this.i(I)&A.i(I);return new a(N,this.h&A.h)},t.or=function(A){const E=Math.max(this.g.length,A.g.length),N=[];for(let I=0;I<E;I++)N[I]=this.i(I)|A.i(I);return new a(N,this.h|A.h)},t.xor=function(A){const E=Math.max(this.g.length,A.g.length),N=[];for(let I=0;I<E;I++)N[I]=this.i(I)^A.i(I);return new a(N,this.h^A.h)};function D(A){const E=A.g.length+1,N=[];for(let I=0;I<E;I++)N[I]=A.i(I)<<1|A.i(I-1)>>>31;return new a(N,A.h)}function M(A,E){const N=E>>5;E%=32;const I=A.g.length-N,P=[];for(let k=0;k<I;k++)P[k]=E>0?A.i(k+N)>>>E|A.i(k+N+1)<<32-E:A.i(k+N);return new a(P,A.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Hk=s,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=h,Fi=a}).apply(typeof MA<"u"?MA:typeof self<"u"?self:typeof window<"u"?window:{});var Kf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gk,$u,$k,jm,kx,Kk,Wk,Yk;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kf=="object"&&Kf];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=n(this);function r(d,g){if(g)e:{var y=s;d=d.split(".");for(var C=0;C<d.length-1;C++){var V=d[C];if(!(V in y))break e;y=y[V]}d=d[d.length-1],C=y[d],g=g(C),g!=C&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}r("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(d){return d||function(g){var y=[],C;for(C in g)Object.prototype.hasOwnProperty.call(g,C)&&y.push([C,g[C]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function o(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function c(d,g,y){return d.call.apply(d.bind,arguments)}function u(d,g,y){return u=c,u.apply(null,arguments)}function h(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var C=y.slice();return C.push.apply(C,arguments),d.apply(this,C)}}function f(d,g){function y(){}y.prototype=g.prototype,d.Z=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Ob=function(C,V,U){for(var $=Array(arguments.length-2),le=2;le<arguments.length;le++)$[le-2]=arguments[le];return g.prototype[V].apply(C,$)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function p(d){const g=d.length;if(g>0){const y=Array(g);for(let C=0;C<g;C++)y[C]=d[C];return y}return[]}function _(d,g){for(let C=1;C<arguments.length;C++){const V=arguments[C];var y=typeof V;if(y=y!="object"?y:V?Array.isArray(V)?"array":y:"null",y=="array"||y=="object"&&typeof V.length=="number"){y=d.length||0;const U=V.length||0;d.length=y+U;for(let $=0;$<U;$++)d[y+$]=V[$]}else d.push(V)}}class w{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function T(d){a.setTimeout(()=>{throw d},0)}function x(){var d=A;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class v{constructor(){this.h=this.g=null}add(g,y){const C=b.get();C.set(g,y),this.h?this.h.next=C:this.g=C,this.h=C}}var b=new w(()=>new R,d=>d.reset());class R{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let D,M=!1,A=new v,E=()=>{const d=Promise.resolve(void 0);D=()=>{d.then(N)}};function N(){for(var d;d=x();){try{d.h.call(d.g)}catch(y){T(y)}var g=b;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}M=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const y=()=>{};a.addEventListener("test",y,g),a.removeEventListener("test",y,g)}catch{}return d}();function j(d){return/^[\s\xa0]*$/.test(d)}function W(d,g){P.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}f(W,P),W.prototype.init=function(d,g){const y=this.type=d.type,C=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ce="closure_listenable_"+(Math.random()*1e6|0),H=0;function ee(d,g,y,C,V){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!C,this.ha=V,this.key=++H,this.da=this.fa=!1}function te(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Te(d,g,y){for(const C in d)g.call(y,d[C],C,d)}function Xe(d,g){for(const y in d)g.call(void 0,d[y],y,d)}function ba(d){const g={};for(const y in d)g[y]=d[y];return g}const wa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zo(d,g){let y,C;for(let V=1;V<arguments.length;V++){C=arguments[V];for(y in C)d[y]=C[y];for(let U=0;U<wa.length;U++)y=wa[U],Object.prototype.hasOwnProperty.call(C,y)&&(d[y]=C[y])}}function ts(d){this.src=d,this.g={},this.h=0}ts.prototype.add=function(d,g,y,C,V){const U=d.toString();d=this.g[U],d||(d=this.g[U]=[],this.h++);const $=Cy(d,g,C,V);return $>-1?(g=d[$],y||(g.fa=!1)):(g=new ee(g,this.src,U,!!C,V),g.fa=y,d.push(g)),g};function ti(d,g){const y=g.type;if(y in d.g){var C=d.g[y],V=Array.prototype.indexOf.call(C,g,void 0),U;(U=V>=0)&&Array.prototype.splice.call(C,V,1),U&&(te(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function Cy(d,g,y,C){for(let V=0;V<d.length;++V){const U=d[V];if(!U.da&&U.listener==g&&U.capture==!!y&&U.ha==C)return V}return-1}var jy="closure_lm_"+(Math.random()*1e6|0),Py={};function vT(d,g,y,C,V){if(Array.isArray(g)){for(let U=0;U<g.length;U++)vT(d,g[U],y,C,V);return null}return y=bT(y),d&&d[ce]?d.J(g,y,o(C)?!!C.capture:!1,V):G6(d,g,y,!1,C,V)}function G6(d,g,y,C,V,U){if(!g)throw Error("Invalid event type");const $=o(V)?!!V.capture:!!V;let le=Dy(d);if(le||(d[jy]=le=new ts(d)),y=le.add(g,y,C,$,U),y.proxy)return y;if(C=$6(),y.proxy=C,C.src=d,C.listener=y,d.addEventListener)k||(V=$),V===void 0&&(V=!1),d.addEventListener(g.toString(),C,V);else if(d.attachEvent)d.attachEvent(_T(g.toString()),C);else if(d.addListener&&d.removeListener)d.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return y}function $6(){function d(y){return g.call(d.src,d.listener,y)}const g=K6;return d}function xT(d,g,y,C,V){if(Array.isArray(g))for(var U=0;U<g.length;U++)xT(d,g[U],y,C,V);else C=o(C)?!!C.capture:!!C,y=bT(y),d&&d[ce]?(d=d.i,U=String(g).toString(),U in d.g&&(g=d.g[U],y=Cy(g,y,C,V),y>-1&&(te(g[y]),Array.prototype.splice.call(g,y,1),g.length==0&&(delete d.g[U],d.h--)))):d&&(d=Dy(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Cy(g,y,C,V)),(y=d>-1?g[d]:null)&&ky(y))}function ky(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[ce])ti(g.i,d);else{var y=d.type,C=d.proxy;g.removeEventListener?g.removeEventListener(y,C,d.capture):g.detachEvent?g.detachEvent(_T(y),C):g.addListener&&g.removeListener&&g.removeListener(C),(y=Dy(g))?(ti(y,d),y.h==0&&(y.src=null,g[jy]=null)):te(d)}}}function _T(d){return d in Py?Py[d]:Py[d]="on"+d}function K6(d,g){if(d.da)d=!0;else{g=new W(g,this);const y=d.listener,C=d.ha||d.src;d.fa&&ky(d),d=y.call(C,g)}return d}function Dy(d){return d=d[jy],d instanceof ts?d:null}var My="__closure_events_fn_"+(Math.random()*1e9>>>0);function bT(d){return typeof d=="function"?d:(d[My]||(d[My]=function(g){return d.handleEvent(g)}),d[My])}function en(){I.call(this),this.i=new ts(this),this.M=this,this.G=null}f(en,I),en.prototype[ce]=!0,en.prototype.removeEventListener=function(d,g,y,C){xT(this,d,g,y,C)};function dn(d,g){var y,C=d.G;if(C)for(y=[];C;C=C.G)y.push(C);if(d=d.M,C=g.type||g,typeof g=="string")g=new P(g,d);else if(g instanceof P)g.target=g.target||d;else{var V=g;g=new P(C,d),zo(g,V)}V=!0;let U,$;if(y)for($=y.length-1;$>=0;$--)U=g.g=y[$],V=yf(U,C,!0,g)&&V;if(U=g.g=d,V=yf(U,C,!0,g)&&V,V=yf(U,C,!1,g)&&V,y)for($=0;$<y.length;$++)U=g.g=y[$],V=yf(U,C,!1,g)&&V}en.prototype.N=function(){if(en.Z.N.call(this),this.i){var d=this.i;for(const g in d.g){const y=d.g[g];for(let C=0;C<y.length;C++)te(y[C]);delete d.g[g],d.h--}}this.G=null},en.prototype.J=function(d,g,y,C){return this.i.add(String(d),g,!1,y,C)},en.prototype.K=function(d,g,y,C){return this.i.add(String(d),g,!0,y,C)};function yf(d,g,y,C){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let V=!0;for(let U=0;U<g.length;++U){const $=g[U];if($&&!$.da&&$.capture==y){const le=$.listener,Ct=$.ha||$.src;$.fa&&ti(d.i,$),V=le.call(Ct,C)!==!1&&V}}return V&&!C.defaultPrevented}function W6(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:a.setTimeout(d,g||0)}function wT(d){d.g=W6(()=>{d.g=null,d.i&&(d.i=!1,wT(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class Y6 extends I{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:wT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eu(d){I.call(this),this.h=d,this.g={}}f(eu,I);var TT=[];function ET(d){Te(d.g,function(g,y){this.g.hasOwnProperty(y)&&ky(g)},d),d.g={}}eu.prototype.N=function(){eu.Z.N.call(this),ET(this)},eu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oy=a.JSON.stringify,Q6=a.JSON.parse,X6=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function ST(){}function AT(){}var tu={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vy(){P.call(this,"d")}f(Vy,P);function Ly(){P.call(this,"c")}f(Ly,P);var Ta={},NT=null;function vf(){return NT=NT||new en}Ta.Ia="serverreachability";function IT(d){P.call(this,Ta.Ia,d)}f(IT,P);function nu(d){const g=vf();dn(g,new IT(g))}Ta.STAT_EVENT="statevent";function RT(d,g){P.call(this,Ta.STAT_EVENT,d),this.stat=g}f(RT,P);function hn(d){const g=vf();dn(g,new RT(g,d))}Ta.Ja="timingevent";function CT(d,g){P.call(this,Ta.Ja,d),this.size=g}f(CT,P);function su(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function ru(){this.g=!0}ru.prototype.ua=function(){this.g=!1};function J6(d,g,y,C,V,U){d.info(function(){if(d.g)if(U){var $="",le=U.split("&");for(let ke=0;ke<le.length;ke++){var Ct=le[ke].split("=");if(Ct.length>1){const Ot=Ct[0];Ct=Ct[1];const Ms=Ot.split("_");$=Ms.length>=2&&Ms[1]=="type"?$+(Ot+"="+Ct+"&"):$+(Ot+"=redacted&")}}}else $=null;else $=U;return"XMLHTTP REQ ("+C+") [attempt "+V+"]: "+g+`
`+y+`
`+$})}function Z6(d,g,y,C,V,U,$){d.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+V+"]: "+g+`
`+y+`
`+U+" "+$})}function Fo(d,g,y,C){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+tV(d,y)+(C?" "+C:"")})}function eV(d,g){d.info(function(){return"TIMEOUT: "+g})}ru.prototype.info=function(){};function tV(d,g){if(!d.g)return g;if(!g)return null;try{const U=JSON.parse(g);if(U){for(d=0;d<U.length;d++)if(Array.isArray(U[d])){var y=U[d];if(!(y.length<2)){var C=y[1];if(Array.isArray(C)&&!(C.length<1)){var V=C[0];if(V!="noop"&&V!="stop"&&V!="close")for(let $=1;$<C.length;$++)C[$]=""}}}}return Oy(U)}catch{return g}}var xf={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},jT={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},PT;function Uy(){}f(Uy,ST),Uy.prototype.g=function(){return new XMLHttpRequest},PT=new Uy;function iu(d){return encodeURIComponent(String(d))}function nV(d){var g=1;d=d.split(":");const y=[];for(;g>0&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function ni(d,g,y,C){this.j=d,this.i=g,this.l=y,this.S=C||1,this.V=new eu(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new kT}function kT(){this.i=null,this.g="",this.h=!1}var DT={},zy={};function Fy(d,g,y){d.M=1,d.A=bf(Ds(g)),d.u=y,d.R=!0,MT(d,null)}function MT(d,g){d.F=Date.now(),_f(d),d.B=Ds(d.A);var y=d.B,C=d.S;Array.isArray(C)||(C=[String(C)]),WT(y.i,"t",C),d.C=0,y=d.j.L,d.h=new kT,d.g=hE(d.j,y?g:null,!d.u),d.P>0&&(d.O=new Y6(u(d.Y,d,d.g),d.P)),g=d.V,y=d.g,C=d.ba;var V="readystatechange";Array.isArray(V)||(V&&(TT[0]=V.toString()),V=TT);for(let U=0;U<V.length;U++){const $=vT(y,V[U],C||g.handleEvent,!1,g.h||g);if(!$)break;g.g[$.key]=$}g=d.J?ba(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),nu(),J6(d.i,d.v,d.B,d.l,d.S,d.u)}ni.prototype.ba=function(d){d=d.target;const g=this.O;g&&ii(d)==3?g.j():this.Y(d)},ni.prototype.Y=function(d){try{if(d==this.g)e:{const le=ii(this.g),Ct=this.g.ya(),ke=this.g.ca();if(!(le<3)&&(le!=3||this.g&&(this.h.h||this.g.la()||tE(this.g)))){this.K||le!=4||Ct==7||(Ct==8||ke<=0?nu(3):nu(2)),By(this);var g=this.g.ca();this.X=g;var y=sV(this);if(this.o=g==200,Z6(this.i,this.v,this.B,this.l,this.S,le,g),this.o){if(this.U&&!this.L){t:{if(this.g){var C,V=this.g;if((C=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(C)){var U=C;break t}}U=null}if(d=U)Fo(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qy(this,d);else{this.o=!1,this.m=3,hn(12),Ea(this),au(this);break e}}if(this.R){d=!0;let Ot;for(;!this.K&&this.C<y.length;)if(Ot=rV(this,y),Ot==zy){le==4&&(this.m=4,hn(14),d=!1),Fo(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==DT){this.m=4,hn(15),Fo(this.i,this.l,y,"[Invalid Chunk]"),d=!1;break}else Fo(this.i,this.l,Ot,null),qy(this,Ot);if(OT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),le!=4||y.length!=0||this.h.h||(this.m=1,hn(16),d=!1),this.o=this.o&&d,!d)Fo(this.i,this.l,y,"[Invalid Chunked Response]"),Ea(this),au(this);else if(y.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),Xy($),$.P=!0,hn(11))}}else Fo(this.i,this.l,y,null),qy(this,y);le==4&&Ea(this),this.o&&!this.K&&(le==4?lE(this.j,this):(this.o=!1,_f(this)))}else vV(this.g),g==400&&y.indexOf("Unknown SID")>0?(this.m=3,hn(12)):(this.m=0,hn(13)),Ea(this),au(this)}}}catch{}finally{}};function sV(d){if(!OT(d))return d.g.la();const g=tE(d.g);if(g==="")return"";let y="";const C=g.length,V=ii(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Ea(d),au(d),"";d.h.i=new a.TextDecoder}for(let U=0;U<C;U++)d.h.h=!0,y+=d.h.i.decode(g[U],{stream:!(V&&U==C-1)});return g.length=0,d.h.g+=y,d.C=0,d.h.g}function OT(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function rV(d,g){var y=d.C,C=g.indexOf(`
`,y);return C==-1?zy:(y=Number(g.substring(y,C)),isNaN(y)?DT:(C+=1,C+y>g.length?zy:(g=g.slice(C,C+y),d.C=C+y,g)))}ni.prototype.cancel=function(){this.K=!0,Ea(this)};function _f(d){d.T=Date.now()+d.H,VT(d,d.H)}function VT(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=su(u(d.aa,d),g)}function By(d){d.D&&(a.clearTimeout(d.D),d.D=null)}ni.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(eV(this.i,this.B),this.M!=2&&(nu(),hn(17)),Ea(this),this.m=2,au(this)):VT(this,this.T-d)};function au(d){d.j.I==0||d.K||lE(d.j,d)}function Ea(d){By(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,ET(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function qy(d,g){try{var y=d.j;if(y.I!=0&&(y.g==d||Hy(y.h,d))){if(!d.L&&Hy(y.h,d)&&y.I==3){try{var C=y.Ba.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var V=C;if(V[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<d.F)Af(y),Ef(y);else break e;Qy(y),hn(18)}}else y.xa=V[1],0<y.xa-y.K&&V[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=su(u(y.Va,y),6e3));zT(y.h)<=1&&y.ta&&(y.ta=void 0)}else Aa(y,11)}else if((d.L||y.g==d)&&Af(y),!j(g))for(V=y.Ba.g.parse(g),g=0;g<V.length;g++){let ke=V[g];const Ot=ke[0];if(!(Ot<=y.K))if(y.K=Ot,ke=ke[1],y.I==2)if(ke[0]=="c"){y.M=ke[1],y.ba=ke[2];const Ms=ke[3];Ms!=null&&(y.ka=Ms,y.j.info("VER="+y.ka));const Na=ke[4];Na!=null&&(y.za=Na,y.j.info("SVER="+y.za));const ai=ke[5];ai!=null&&typeof ai=="number"&&ai>0&&(C=1.5*ai,y.O=C,y.j.info("backChannelRequestTimeoutMs_="+C)),C=y;const oi=d.g;if(oi){const If=oi.g?oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(If){var U=C.h;U.g||If.indexOf("spdy")==-1&&If.indexOf("quic")==-1&&If.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Gy(U,U.h),U.h=null))}if(C.G){const Jy=oi.g?oi.g.getResponseHeader("X-HTTP-Session-Id"):null;Jy&&(C.wa=Jy,Be(C.J,C.G,Jy))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-d.F,y.j.info("Handshake RTT: "+y.T+"ms")),C=y;var $=d;if(C.na=dE(C,C.L?C.ba:null,C.W),$.L){FT(C.h,$);var le=$,Ct=C.O;Ct&&(le.H=Ct),le.D&&(By(le),_f(le)),C.g=$}else aE(C);y.i.length>0&&Sf(y)}else ke[0]!="stop"&&ke[0]!="close"||Aa(y,7);else y.I==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?Aa(y,7):Yy(y):ke[0]!="noop"&&y.l&&y.l.qa(ke),y.A=0)}}nu(4)}catch{}}var iV=class{constructor(d,g){this.g=d,this.map=g}};function LT(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function UT(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function zT(d){return d.h?1:d.g?d.g.size:0}function Hy(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Gy(d,g){d.g?d.g.add(g):d.h=g}function FT(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}LT.prototype.cancel=function(){if(this.i=BT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function BT(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const y of d.g.values())g=g.concat(y.G);return g}return p(d.i)}var qT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aV(d,g){if(d){d=d.split("&");for(let y=0;y<d.length;y++){const C=d[y].indexOf("=");let V,U=null;C>=0?(V=d[y].substring(0,C),U=d[y].substring(C+1)):V=d[y],g(V,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function si(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof si?(this.l=d.l,ou(this,d.j),this.o=d.o,this.g=d.g,lu(this,d.u),this.h=d.h,$y(this,YT(d.i)),this.m=d.m):d&&(g=String(d).match(qT))?(this.l=!1,ou(this,g[1]||"",!0),this.o=cu(g[2]||""),this.g=cu(g[3]||"",!0),lu(this,g[4]),this.h=cu(g[5]||"",!0),$y(this,g[6]||"",!0),this.m=cu(g[7]||"")):(this.l=!1,this.i=new du(null,this.l))}si.prototype.toString=function(){const d=[];var g=this.j;g&&d.push(uu(g,HT,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push(uu(g,HT,!0),"@"),d.push(iu(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&d.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(uu(y,y.charAt(0)=="/"?cV:lV,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",uu(y,dV)),d.join("")},si.prototype.resolve=function(d){const g=Ds(this);let y=!!d.j;y?ou(g,d.j):y=!!d.o,y?g.o=d.o:y=!!d.g,y?g.g=d.g:y=d.u!=null;var C=d.h;if(y)lu(g,d.u);else if(y=!!d.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var V=g.h.lastIndexOf("/");V!=-1&&(C=g.h.slice(0,V+1)+C)}if(V=C,V==".."||V==".")C="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){C=V.lastIndexOf("/",0)==0,V=V.split("/");const U=[];for(let $=0;$<V.length;){const le=V[$++];le=="."?C&&$==V.length&&U.push(""):le==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),C&&$==V.length&&U.push("")):(U.push(le),C=!0)}C=U.join("/")}else C=V}return y?g.h=C:y=d.i.toString()!=="",y?$y(g,YT(d.i)):y=!!d.m,y&&(g.m=d.m),g};function Ds(d){return new si(d)}function ou(d,g,y){d.j=y?cu(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function lu(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function $y(d,g,y){g instanceof du?(d.i=g,hV(d.i,d.l)):(y||(g=uu(g,uV)),d.i=new du(g,d.l))}function Be(d,g,y){d.i.set(g,y)}function bf(d){return Be(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function cu(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function uu(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,oV),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function oV(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var HT=/[#\/\?@]/g,lV=/[#\?:]/g,cV=/[#\?]/g,uV=/[#\?@]/g,dV=/#/g;function du(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Sa(d){d.g||(d.g=new Map,d.h=0,d.i&&aV(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=du.prototype,t.add=function(d,g){Sa(this),this.i=null,d=Bo(this,d);let y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function GT(d,g){Sa(d),g=Bo(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function $T(d,g){return Sa(d),g=Bo(d,g),d.g.has(g)}t.forEach=function(d,g){Sa(this),this.g.forEach(function(y,C){y.forEach(function(V){d.call(g,V,C,this)},this)},this)};function KT(d,g){Sa(d);let y=[];if(typeof g=="string")$T(d,g)&&(y=y.concat(d.g.get(Bo(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)y=y.concat(d[g]);return y}t.set=function(d,g){return Sa(this),this.i=null,d=Bo(this,d),$T(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=KT(this,d),d.length>0?String(d[0]):g):g};function WT(d,g,y){GT(d,g),y.length>0&&(d.i=null,d.g.set(Bo(d,g),p(y)),d.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(let C=0;C<g.length;C++){var y=g[C];const V=iu(y);y=KT(this,y);for(let U=0;U<y.length;U++){let $=V;y[U]!==""&&($+="="+iu(y[U])),d.push($)}}return this.i=d.join("&")};function YT(d){const g=new du;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function Bo(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function hV(d,g){g&&!d.j&&(Sa(d),d.i=null,d.g.forEach(function(y,C){const V=C.toLowerCase();C!=V&&(GT(this,C),WT(this,V,y))},d)),d.j=g}function fV(d,g){const y=new ru;if(a.Image){const C=new Image;C.onload=h(ri,y,"TestLoadImage: loaded",!0,g,C),C.onerror=h(ri,y,"TestLoadImage: error",!1,g,C),C.onabort=h(ri,y,"TestLoadImage: abort",!1,g,C),C.ontimeout=h(ri,y,"TestLoadImage: timeout",!1,g,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=d}else g(!1)}function mV(d,g){const y=new ru,C=new AbortController,V=setTimeout(()=>{C.abort(),ri(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:C.signal}).then(U=>{clearTimeout(V),U.ok?ri(y,"TestPingServer: ok",!0,g):ri(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),ri(y,"TestPingServer: error",!1,g)})}function ri(d,g,y,C,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),C(y)}catch{}}function pV(){this.g=new X6}function Ky(d){this.i=d.Sb||null,this.h=d.ab||!1}f(Ky,ST),Ky.prototype.g=function(){return new wf(this.i,this.h)};function wf(d,g){en.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(wf,en),t=wf.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,fu(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||a).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hu(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,fu(this)),this.g&&(this.readyState=3,fu(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;QT(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function QT(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?hu(this):fu(this),this.readyState==3&&QT(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,hu(this))},t.Na=function(d){this.g&&(this.response=d,hu(this))},t.ga=function(){this.g&&hu(this)};function hu(d){d.readyState=4,d.l=null,d.j=null,d.B=null,fu(d)}t.setRequestHeader=function(d,g){this.A.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function fu(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(wf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function XT(d){let g="";return Te(d,function(y,C){g+=C,g+=":",g+=y,g+=`\r
`}),g}function Wy(d,g,y){e:{for(C in y){var C=!1;break e}C=!0}C||(y=XT(y),typeof d=="string"?y!=null&&iu(y):Be(d,g,y))}function ot(d){en.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(ot,en);var gV=/^https?$/i,yV=["POST","PUT"];t=ot.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,g,y,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():PT.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(U){JT(this,U);return}if(d=y||"",y=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var V in C)y.set(V,C[V]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const U of C.keys())y.set(U,C.get(U));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),V=a.FormData&&d instanceof a.FormData,!(Array.prototype.indexOf.call(yV,g,void 0)>=0)||C||V||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,$]of y)this.g.setRequestHeader(U,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(U){JT(this,U)}};function JT(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,ZT(d),Tf(d)}function ZT(d){d.A||(d.A=!0,dn(d,"complete"),dn(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,dn(this,"complete"),dn(this,"abort"),Tf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tf(this,!0)),ot.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?eE(this):this.Xa())},t.Xa=function(){eE(this)};function eE(d){if(d.h&&typeof i<"u"){if(d.v&&ii(d)==4)setTimeout(d.Ca.bind(d),0);else if(dn(d,"readystatechange"),ii(d)==4){d.h=!1;try{const U=d.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var C;if(C=U===0){let $=String(d.D).match(qT)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),C=!gV.test($?$.toLowerCase():"")}y=C}if(y)dn(d,"complete"),dn(d,"success");else{d.o=6;try{var V=ii(d)>2?d.g.statusText:""}catch{V=""}d.l=V+" ["+d.ca()+"]",ZT(d)}}finally{Tf(d)}}}}function Tf(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const y=d.g;d.g=null,g||dn(d,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ii(d){return d.g?d.g.readyState:0}t.ca=function(){try{return ii(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Q6(g)}};function tE(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function vV(d){const g={};d=(d.g&&ii(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<d.length;C++){if(j(d[C]))continue;var y=nV(d[C]);const V=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=g[V]||[];g[V]=U,U.push(y)}Xe(g,function(C){return C.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function mu(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function nE(d){this.za=0,this.i=[],this.j=new ru,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=mu("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=mu("baseRetryDelayMs",5e3,d),this.Za=mu("retryDelaySeedMs",1e4,d),this.Ta=mu("forwardChannelMaxRetries",2,d),this.va=mu("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new LT(d&&d.concurrentRequestLimit),this.Ba=new pV,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=nE.prototype,t.ka=8,t.I=1,t.connect=function(d,g,y,C){hn(0),this.W=d,this.H=g||{},y&&C!==void 0&&(this.H.OSID=y,this.H.OAID=C),this.F=this.X,this.J=dE(this,null,this.W),Sf(this)};function Yy(d){if(sE(d),d.I==3){var g=d.V++,y=Ds(d.J);if(Be(y,"SID",d.M),Be(y,"RID",g),Be(y,"TYPE","terminate"),pu(d,y),g=new ni(d,d.j,g),g.M=2,g.A=bf(Ds(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(g.A.toString(),"")}catch{}!y&&a.Image&&(new Image().src=g.A,y=!0),y||(g.g=hE(g.j,null),g.g.ea(g.A)),g.F=Date.now(),_f(g)}uE(d)}function Ef(d){d.g&&(Xy(d),d.g.cancel(),d.g=null)}function sE(d){Ef(d),d.v&&(a.clearTimeout(d.v),d.v=null),Af(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&a.clearTimeout(d.m),d.m=null)}function Sf(d){if(!UT(d.h)&&!d.m){d.m=!0;var g=d.Ea;D||E(),M||(D(),M=!0),A.add(g,d),d.D=0}}function xV(d,g){return zT(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=su(u(d.Ea,d,g),cE(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const V=new ni(this,this.j,d);let U=this.o;if(this.U&&(U?(U=ba(U),zo(U,this.U)):U=this.U),this.u!==null||this.R||(V.J=U,U=null),this.S)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var C=this.i[y];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(g+=C,g>4096){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=iE(this,V,g),y=Ds(this.J),Be(y,"RID",d),Be(y,"CVER",22),this.G&&Be(y,"X-HTTP-Session-Id",this.G),pu(this,y),U&&(this.R?g="headers="+iu(XT(U))+"&"+g:this.u&&Wy(y,this.u,U)),Gy(this.h,V),this.Ra&&Be(y,"TYPE","init"),this.S?(Be(y,"$req",g),Be(y,"SID","null"),V.U=!0,Fy(V,y,null)):Fy(V,y,g),this.I=2}}else this.I==3&&(d?rE(this,d):this.i.length==0||UT(this.h)||rE(this))};function rE(d,g){var y;g?y=g.l:y=d.V++;const C=Ds(d.J);Be(C,"SID",d.M),Be(C,"RID",y),Be(C,"AID",d.K),pu(d,C),d.u&&d.o&&Wy(C,d.u,d.o),y=new ni(d,d.j,y,d.D+1),d.u===null&&(y.J=d.o),g&&(d.i=g.G.concat(d.i)),g=iE(d,y,1e3),y.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Gy(d.h,y),Fy(y,C,g)}function pu(d,g){d.H&&Te(d.H,function(y,C){Be(g,C,y)}),d.l&&Te({},function(y,C){Be(g,C,y)})}function iE(d,g,y){y=Math.min(d.i.length,y);const C=d.l?u(d.l.Ka,d.l,d):null;e:{var V=d.i;let le=-1;for(;;){const Ct=["count="+y];le==-1?y>0?(le=V[0].g,Ct.push("ofs="+le)):le=0:Ct.push("ofs="+le);let ke=!0;for(let Ot=0;Ot<y;Ot++){var U=V[Ot].g;const Ms=V[Ot].map;if(U-=le,U<0)le=Math.max(0,V[Ot].g-100),ke=!1;else try{U="req"+U+"_"||"";try{var $=Ms instanceof Map?Ms:Object.entries(Ms);for(const[Na,ai]of $){let oi=ai;o(ai)&&(oi=Oy(ai)),Ct.push(U+Na+"="+encodeURIComponent(oi))}}catch(Na){throw Ct.push(U+"type="+encodeURIComponent("_badmap")),Na}}catch{C&&C(Ms)}}if(ke){$=Ct.join("&");break e}}$=void 0}return d=d.i.splice(0,y),g.G=d,$}function aE(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;D||E(),M||(D(),M=!0),A.add(g,d),d.A=0}}function Qy(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=su(u(d.Da,d),cE(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,oE(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=su(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,hn(10),Ef(this),oE(this))};function Xy(d){d.B!=null&&(a.clearTimeout(d.B),d.B=null)}function oE(d){d.g=new ni(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=Ds(d.na);Be(g,"RID","rpc"),Be(g,"SID",d.M),Be(g,"AID",d.K),Be(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&Be(g,"TO",d.ia),Be(g,"TYPE","xmlhttp"),pu(d,g),d.u&&d.o&&Wy(g,d.u,d.o),d.O&&(d.g.H=d.O);var y=d.g;d=d.ba,y.M=1,y.A=bf(Ds(g)),y.u=null,y.R=!0,MT(y,d)}t.Va=function(){this.C!=null&&(this.C=null,Ef(this),Qy(this),hn(19))};function Af(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function lE(d,g){var y=null;if(d.g==g){Af(d),Xy(d),d.g=null;var C=2}else if(Hy(d.h,g))y=g.G,FT(d.h,g),C=1;else return;if(d.I!=0){if(g.o)if(C==1){y=g.u?g.u.length:0,g=Date.now()-g.F;var V=d.D;C=vf(),dn(C,new CT(C,y)),Sf(d)}else aE(d);else if(V=g.m,V==3||V==0&&g.X>0||!(C==1&&xV(d,g)||C==2&&Qy(d)))switch(y&&y.length>0&&(g=d.h,g.i=g.i.concat(y)),V){case 1:Aa(d,5);break;case 4:Aa(d,10);break;case 3:Aa(d,6);break;default:Aa(d,2)}}}function cE(d,g){let y=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(y*=2),y*g}function Aa(d,g){if(d.j.info("Error code "+g),g==2){var y=u(d.bb,d),C=d.Ua;const V=!C;C=new si(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ou(C,"https"),bf(C),V?fV(C.toString(),y):mV(C.toString(),y)}else hn(2);d.I=0,d.l&&d.l.pa(g),uE(d),sE(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),hn(2)):(this.j.info("Failed to ping google.com"),hn(1))};function uE(d){if(d.I=0,d.ja=[],d.l){const g=BT(d.h);(g.length!=0||d.i.length!=0)&&(_(d.ja,g),_(d.ja,d.i),d.h.i.length=0,p(d.i),d.i.length=0),d.l.oa()}}function dE(d,g,y){var C=y instanceof si?Ds(y):new si(y);if(C.g!="")g&&(C.g=g+"."+C.g),lu(C,C.u);else{var V=a.location;C=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;const U=new si(null);C&&ou(U,C),g&&(U.g=g),V&&lu(U,V),y&&(U.h=y),C=U}return y=d.G,g=d.wa,y&&g&&Be(C,y,g),Be(C,"VER",d.ka),pu(d,C),C}function hE(d,g,y){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new ot(new Ky({ab:y})):new ot(d.ma),g.Fa(d.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fE(){}t=fE.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Nf(){}Nf.prototype.g=function(d,g){return new Dn(d,g)};function Dn(d,g){en.call(this),this.g=new nE(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!j(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!j(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new qo(this)}f(Dn,en),Dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Yy(this.g)},Dn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.v&&(y={},y.__data__=Oy(d),d=y);g.i.push(new iV(g.Ya++,d)),g.I==3&&Sf(g)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Yy(this.g),delete this.g,Dn.Z.N.call(this)};function mE(d){Vy.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}f(mE,Vy);function pE(){Ly.call(this),this.status=1}f(pE,Ly);function qo(d){this.g=d}f(qo,fE),qo.prototype.ra=function(){dn(this.g,"a")},qo.prototype.qa=function(d){dn(this.g,new mE(d))},qo.prototype.pa=function(d){dn(this.g,new pE)},qo.prototype.oa=function(){dn(this.g,"b")},Nf.prototype.createWebChannel=Nf.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,Yk=function(){return new Nf},Wk=function(){return vf()},Kk=Ta,kx={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xf.NO_ERROR=0,xf.TIMEOUT=8,xf.HTTP_ERROR=6,jm=xf,jT.COMPLETE="complete",$k=jT,AT.EventType=tu,tu.OPEN="a",tu.CLOSE="b",tu.ERROR="c",tu.MESSAGE="d",en.prototype.listen=en.prototype.J,$u=AT,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,Gk=ot}).apply(typeof Kf<"u"?Kf:typeof self<"u"?self:typeof window<"u"?window:{});const OA="@firebase/firestore",VA="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new Dg("@firebase/firestore");function il(){return Ji.logLevel}function kH(t){Ji.setLogLevel(t)}function B(t,...e){if(Ji.logLevel<=de.DEBUG){const n=e.map(bw);Ji.debug(`Firestore (${Bc}): ${t}`,...n)}}function gt(t,...e){if(Ji.logLevel<=de.ERROR){const n=e.map(bw);Ji.error(`Firestore (${Bc}): ${t}`,...n)}}function rr(t,...e){if(Ji.logLevel<=de.WARN){const n=e.map(bw);Ji.warn(`Firestore (${Bc}): ${t}`,...n)}}function bw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Qk(t,s,n)}function Qk(t,e,n){let s=`FIRESTORE (${Bc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw gt(s),new Error(s)}function X(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||Qk(e,r,s)}function DH(t,e){t||Q(57014,e)}function K(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends ln{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MH{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ut.UNAUTHENTICATED))}shutdown(){}}class OH{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class VH{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){X(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new Jt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Jt,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},o=c=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Jt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(X(typeof s.accessToken=="string",31837,{l:s}),new Xk(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return X(e===null||typeof e=="string",2055,{h:e}),new Ut(e)}}class LH{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class UH{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new LH(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zH{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$e(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){X(this.o===void 0,3512);const s=i=>{i.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,B("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new LA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(X(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new LA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FH(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=FH(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function re(t,e){return t<e?-1:t>e?1:0}function Dx(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return Y0(r)===Y0(i)?re(r,i):Y0(r)?1:-1}return re(t.length,e.length)}const BH=55296,qH=57343;function Y0(t){const e=t.charCodeAt(0);return e>=BH&&e<=qH}function rc(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}function Jk(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="__name__";class Os{constructor(e,n,s){n===void 0?n=0:n>e.length&&Q(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Q(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Os.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Os?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Os.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return re(e.length,n.length)}static compareSegments(e,n){const s=Os.isNumericId(e),r=Os.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Os.extractNumericId(e).compare(Os.extractNumericId(n)):Dx(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fi.fromString(e.substring(4,e.length-2))}}class fe extends Os{construct(e,n,s){return new fe(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new F(L.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new fe(n)}static emptyPath(){return new fe([])}}const HH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class et extends Os{construct(e,n,s){return new et(e,n,s)}static isValidIdentifier(e){return HH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===UA}static keyField(){return new et([UA])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new F(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let a=!1;for(;r<e.length;){const o=e[r];if(o==="\\"){if(r+1===e.length)throw new F(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new F(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else o==="`"?(a=!a,r++):o!=="."||a?(s+=o,r++):(i(),r++)}if(i(),a)throw new F(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new et(n)}static emptyPath(){return new et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(fe.fromString(e))}static fromName(e){return new G(fe.fromString(e).popFirst(5))}static empty(){return new G(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new fe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(t,e,n){if(!n)throw new F(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Zk(t,e,n,s){if(e===!0&&s===!0)throw new F(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function zA(t){if(!G.isDocumentKey(t))throw new F(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function FA(t){if(G.isDocumentKey(t))throw new F(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eD(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function $g(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q(12329,{type:typeof t})}function _e(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$g(t);throw new F(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function tD(t,e){if(e<=0)throw new F(L.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Yh(t,e){if(!eD(t))throw new F(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const a=t[s];if(r&&typeof a!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new F(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=-62135596800,qA=1e6;class Ee{static now(){return Ee.fromMillis(Date.now())}static fromDate(e){return Ee.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*qA);return new Ee(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<BA)throw new F(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qA}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ee._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yh(e,Ee._jsonSchema))return new Ee(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-BA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ee._jsonSchemaVersion="firestore/timestamp/1.0",Ee._jsonSchema={type:Nt("string",Ee._jsonSchemaVersion),seconds:Nt("number"),nanoseconds:Nt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Ee(0,0))}static max(){return new Z(new Ee(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=-1;class Dp{constructor(e,n,s,r){this.indexId=e,this.collectionGroup=n,this.fields=s,this.indexState=r}}function Mx(t){return t.fields.find(e=>e.kind===2)}function Va(t){return t.fields.filter(e=>e.kind!==2)}Dp.UNKNOWN_ID=-1;class Pm{constructor(e,n){this.fieldPath=e,this.kind=n}}class rh{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new rh(0,Jn.min())}}function nD(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=Z.fromTimestamp(s===1e9?new Ee(n+1,0):new Ee(n,s));return new Jn(r,G.empty(),e)}function sD(t){return new Jn(t.readTime,t.key,ic)}class Jn{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Jn(Z.min(),G.empty(),ic)}static max(){return new Jn(Z.max(),G.empty(),ic)}}function Ew(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ma(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==rD)throw t;B("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,s)=>{n(e)})}static reject(e){return new O((n,s)=>{s(e)})}static waitFor(e){return new O((n,s)=>{let r=0,i=0,a=!1;e.forEach(o=>{++r,o.next(()=>{++i,a&&i===r&&n()},c=>s(c))}),a=!0,i===r&&n()})}static or(e){let n=O.resolve(!1);for(const s of e)n=n.next(r=>r?O.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new O((s,r)=>{const i=e.length,a=new Array(i);let o=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{a[u]=h,++o,o===i&&s(a)},h=>r(h))}})}static doWhile(e,n){return new O((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="SimpleDb";class Kg{static open(e,n,s,r){try{return new Kg(n,e.transaction(r,s))}catch(i){throw new _d(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Jt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new _d(e,n.error)):this.S.resolve()},this.transaction.onerror=s=>{const r=Sw(s.target.error);this.S.reject(new _d(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(B(On,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new $H(n)}}class Qs{static delete(e){return B(On,"Removing database:",e),Ba(Hb().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Xd())return!1;if(Qs.F())return!0;const e=rt(),n=Qs.M(e),s=0<n&&n<10,r=aD(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,n,s){this.name=e,this.version=n,this.N=s,this.B=null,Qs.M(rt())===12.2&&gt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(B(On,"Opening database:",this.name),this.db=await new Promise((n,s)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=i=>{const a=i.target.result;n(a)},r.onblocked=()=>{s(new _d(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=i=>{const a=i.target.error;a.name==="VersionError"?s(new F(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?s(new F(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):s(new _d(e,a))},r.onupgradeneeded=i=>{B(On,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.N.k(a,r.transaction,i.oldVersion,this.version).next(()=>{B(On,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,s,r){const i=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=Kg.open(this.db,e,i?"readonly":"readwrite",s),c=r(o).next(u=>(o.C(),u)).catch(u=>(o.abort(u),O.reject(u))).toPromise();return c.catch(()=>{}),await o.D,c}catch(o){const c=o,u=c.name!=="FirebaseError"&&a<3;if(B(On,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function aD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class GH{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ba(this.U.delete())}}class _d extends F{constructor(e,n){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function pa(t){return t.name==="IndexedDbTransactionError"}class $H{constructor(e){this.store=e}put(e,n){let s;return n!==void 0?(B(On,"PUT",this.store.name,e,n),s=this.store.put(n,e)):(B(On,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Ba(s)}add(e){return B(On,"ADD",this.store.name,e,e),Ba(this.store.add(e))}get(e){return Ba(this.store.get(e)).next(n=>(n===void 0&&(n=null),B(On,"GET",this.store.name,e,n),n))}delete(e){return B(On,"DELETE",this.store.name,e),Ba(this.store.delete(e))}count(){return B(On,"COUNT",this.store.name),Ba(this.store.count())}J(e,n){const s=this.options(e,n),r=s.index?this.store.index(s.index):this.store;if(typeof r.getAll=="function"){const i=r.getAll(s.range);return new O((a,o)=>{i.onerror=c=>{o(c.target.error)},i.onsuccess=c=>{a(c.target.result)}})}{const i=this.cursor(s),a=[];return this.H(i,(o,c)=>{a.push(c)}).next(()=>a)}}Y(e,n){const s=this.store.getAll(e,n===null?void 0:n);return new O((r,i)=>{s.onerror=a=>{i(a.target.error)},s.onsuccess=a=>{r(a.target.result)}})}Z(e,n){B(On,"DELETE ALL",this.store.name);const s=this.options(e,n);s.X=!1;const r=this.cursor(s);return this.H(r,(i,a,o)=>o.delete())}ee(e,n){let s;n?s=e:(s={},n=e);const r=this.cursor(s);return this.H(r,n)}te(e){const n=this.cursor({});return new O((s,r)=>{n.onerror=i=>{const a=Sw(i.target.error);r(a)},n.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():s()}):s()}})}H(e,n){const s=[];return new O((r,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void r();const c=new GH(o),u=n(o.primaryKey,o.value,c);if(u instanceof O){const h=u.catch(f=>(c.done(),O.reject(f)));s.push(h)}c.isDone?r():c.G===null?o.continue():o.continue(c.G)}}).next(()=>O.waitFor(s))}options(e,n){let s;return e!==void 0&&(typeof e=="string"?s=e:n=e),{index:s,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,n):s.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ba(t){return new O((e,n)=>{t.onsuccess=s=>{const r=s.target.result;e(r)},t.onerror=s=>{const r=Sw(s.target.error);n(r)}})}let HA=!1;function Sw(t){const e=Qs.M(rt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const s=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return HA||(HA=!0,setTimeout(()=>{throw s},0)),s}}return t}const bd="IndexBackfiller";class KH{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){B(bd,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();B(bd,`Documents written: ${n}`)}catch(n){pa(n)?B(bd,"Ignoring IndexedDB error during index backfill: ",n):await ma(n)}await this.re(6e4)})}}class WH{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const s=new Set;let r=n,i=!0;return O.doWhile(()=>i===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!s.has(a))return B(bd,`Processing collection: ${a}`),this.oe(e,a,r).next(o=>{r-=o,s.add(a)});i=!1})).next(()=>n-r)}oe(e,n,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,s).next(i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this._e(r,i)).next(o=>(B(bd,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>a.size)}))}_e(e,n){let s=e;return n.changes.forEach((r,i)=>{const a=sD(i);Ew(a,s)>0&&(s=a)}),new Jn(s.readTime,s.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=-1;function Qh(t){return t==null}function ih(t){return t===0&&1/t==-1/0}function oD(t){return typeof t=="number"&&Number.isInteger(t)&&!ih(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="";function cn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=GA(e)),e=YH(t.get(n),e);return GA(e)}function YH(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case Mp:n+="";break;default:n+=i}}return n}function GA(t){return t+Mp+""}function Ks(t){const e=t.length;if(X(e>=2,64408,{path:t}),e===2)return X(t.charAt(0)===Mp&&t.charAt(1)==="",56145,{path:t}),fe.emptyPath();const n=e-2,s=[];let r="";for(let i=0;i<e;){const a=t.indexOf(Mp,i);switch((a<0||a>n)&&Q(50515,{path:t}),t.charAt(a+1)){case"":const o=t.substring(i,a);let c;r.length===0?c=o:(r+=o,c=r,r=""),s.push(c);break;case"":r+=t.substring(i,a),r+="\0";break;case"":r+=t.substring(i,a+1);break;default:Q(61167,{path:t})}i=a+2}return new fe(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="remoteDocuments",Xh="owner",Ko="owner",ah="mutationQueues",QH="userId",Ts="mutations",$A="batchId",Wa="userMutationsIndex",KA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(t,e){return[t,cn(e)]}function lD(t,e,n){return[t,cn(e),n]}const XH={},ac="documentMutations",Op="remoteDocumentsV14",JH=["prefixPath","collectionGroup","readTime","documentId"],Dm="documentKeyIndex",ZH=["prefixPath","collectionGroup","documentId"],cD="collectionGroupIndex",eG=["collectionGroup","readTime","prefixPath","documentId"],oh="remoteDocumentGlobal",Ox="remoteDocumentGlobalKey",oc="targets",uD="queryTargetsIndex",tG=["canonicalId","targetId"],lc="targetDocuments",nG=["targetId","path"],Aw="documentTargetsIndex",sG=["path","targetId"],Vp="targetGlobalKey",io="targetGlobal",lh="collectionParents",rG=["collectionId","parent"],cc="clientMetadata",iG="clientId",Wg="bundles",aG="bundleId",Yg="namedQueries",oG="name",Nw="indexConfiguration",lG="indexId",Vx="collectionGroupIndex",cG="collectionGroup",wd="indexState",uG=["indexId","uid"],dD="sequenceNumberIndex",dG=["uid","sequenceNumber"],Td="indexEntries",hG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hD="documentKeyIndex",fG=["indexId","uid","orderedDocumentKey"],Qg="documentOverlays",mG=["userId","collectionPath","documentId"],Lx="collectionPathOverlayIndex",pG=["userId","collectionPath","largestBatchId"],fD="collectionGroupOverlayIndex",gG=["userId","collectionGroup","largestBatchId"],Iw="globals",yG="name",mD=[ah,Ts,ac,La,oc,Xh,io,lc,cc,oh,lh,Wg,Yg],vG=[...mD,Qg],pD=[ah,Ts,ac,Op,oc,Xh,io,lc,cc,oh,lh,Wg,Yg,Qg],gD=pD,Rw=[...gD,Nw,wd,Td],xG=Rw,yD=[...Rw,Iw],_G=yD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux extends iD{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Mt(t,e){const n=K(t);return Qs.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ga(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||Gt.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wf(this.root,e,this.comparator,!0)}}class Wf{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Gt.RED,this.left=r??Gt.EMPTY,this.right=i??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Gt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Gt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new Gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new YA(this.data.getIterator())}getIteratorFrom(e){return new YA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Re)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Re(this.comparator);return n.data=e,n}}class YA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Wo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new In([])}unionWith(e){let n=new Re(et.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new In(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return rc(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bG(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new xD("Invalid base64 string: "+i):i}}(e);return new dt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const wG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(t){if(X(!!t,39018),typeof t=="string"){let e=0;const n=wG.exec(t);if(X(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ze(t.seconds),nanos:Ze(t.nanos)}}function Ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Br(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="server_timestamp",bD="__type__",wD="__previous_value__",TD="__local_write_time__";function Xg(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[bD])==null?void 0:s.stringValue)===_D}function Jg(t){const e=t.mapValue.fields[wD];return Xg(e)?Jg(e):e}function ch(t){const e=Fr(t.mapValue.fields[TD].timestampValue);return new Ee(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TG{constructor(e,n,s,r,i,a,o,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const zx="(default)";class Zi{constructor(e,n){this.projectId=e,this.database=n||zx}static empty(){return new Zi("","")}get isDefaultDatabase(){return this.database===zx}isEqual(e){return e instanceof Zi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="__type__",ED="__max__",Ii={mapValue:{fields:{__type__:{stringValue:ED}}}},jw="__vector__",uc="value",Mm={nullValue:"NULL_VALUE"};function ea(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xg(t)?4:SD(t)?9007199254740991:Zg(t)?10:11:Q(28295,{value:t})}function ir(t,e){if(t===e)return!0;const n=ea(t);if(n!==ea(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ch(t).isEqual(ch(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Fr(r.timestampValue),o=Fr(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Br(r.bytesValue).isEqual(Br(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Ze(r.geoPointValue.latitude)===Ze(i.geoPointValue.latitude)&&Ze(r.geoPointValue.longitude)===Ze(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ze(r.integerValue)===Ze(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Ze(r.doubleValue),o=Ze(i.doubleValue);return a===o?ih(a)===ih(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return rc(t.arrayValue.values||[],e.arrayValue.values||[],ir);case 10:case 11:return function(r,i){const a=r.mapValue.fields||{},o=i.mapValue.fields||{};if(WA(a)!==WA(o))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(o[c]===void 0||!ir(a[c],o[c])))return!1;return!0}(t,e);default:return Q(52216,{left:t})}}function uh(t,e){return(t.values||[]).find(n=>ir(n,e))!==void 0}function ta(t,e){if(t===e)return 0;const n=ea(t),s=ea(e);if(n!==s)return re(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=Ze(i.integerValue||i.doubleValue),c=Ze(a.integerValue||a.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(t,e);case 3:return QA(t.timestampValue,e.timestampValue);case 4:return QA(ch(t),ch(e));case 5:return Dx(t.stringValue,e.stringValue);case 6:return function(i,a){const o=Br(i),c=Br(a);return o.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),c=a.split("/");for(let u=0;u<o.length&&u<c.length;u++){const h=re(o[u],c[u]);if(h!==0)return h}return re(o.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=re(Ze(i.latitude),Ze(a.latitude));return o!==0?o:re(Ze(i.longitude),Ze(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return XA(t.arrayValue,e.arrayValue);case 10:return function(i,a){var m,p,_,w;const o=i.fields||{},c=a.fields||{},u=(m=o[uc])==null?void 0:m.arrayValue,h=(p=c[uc])==null?void 0:p.arrayValue,f=re(((_=u==null?void 0:u.values)==null?void 0:_.length)||0,((w=h==null?void 0:h.values)==null?void 0:w.length)||0);return f!==0?f:XA(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Ii.mapValue&&a===Ii.mapValue)return 0;if(i===Ii.mapValue)return 1;if(a===Ii.mapValue)return-1;const o=i.fields||{},c=Object.keys(o),u=a.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=Dx(c[f],h[f]);if(m!==0)return m;const p=ta(o[c[f]],u[h[f]]);if(p!==0)return p}return re(c.length,h.length)}(t.mapValue,e.mapValue);default:throw Q(23264,{he:n})}}function QA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);const n=Fr(t),s=Fr(e),r=re(n.seconds,s.seconds);return r!==0?r:re(n.nanos,s.nanos)}function XA(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=ta(n[r],s[r]);if(i)return i}return re(n.length,s.length)}function dc(t){return Fx(t)}function Fx(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Fr(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Br(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Fx(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const a of s)i?i=!1:r+=",",r+=`${a}:${Fx(n.fields[a])}`;return r+"}"}(t.mapValue):Q(61005,{value:t})}function Om(t){switch(ea(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jg(t);return e?16+Om(e):16;case 5:return 2*t.stringValue.length;case 6:return Br(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+Om(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return ga(s.fields,(i,a)=>{r+=i.length+Om(a)}),r}(t.mapValue);default:throw Q(13486,{value:t})}}function yo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Bx(t){return!!t&&"integerValue"in t}function dh(t){return!!t&&"arrayValue"in t}function JA(t){return!!t&&"nullValue"in t}function ZA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vm(t){return!!t&&"mapValue"in t}function Zg(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Cw])==null?void 0:s.stringValue)===jw}function Ed(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ga(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Ed(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ed(t.arrayValue.values[n]);return e}return{...t}}function SD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ED}const AD={mapValue:{fields:{[Cw]:{stringValue:jw},[uc]:{arrayValue:{}}}}};function EG(t){return"nullValue"in t?Mm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?yo(Zi.empty(),G.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Zg(t)?AD:{mapValue:{}}:Q(35942,{value:t})}function SG(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?yo(Zi.empty(),G.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?AD:"mapValue"in t?Zg(t)?{mapValue:{}}:Ii:Q(61959,{value:t})}function eN(t,e){const n=ta(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function tN(t,e){const n=ta(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.value=e}static empty(){return new Wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Vm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ed(n)}setAll(e){let n=et.emptyPath(),s={},r=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=o.popLast()}a?s[o.lastSegment()]=Ed(a):r.push(o.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Vm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ir(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Vm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){ga(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Wt(Ed(this.value))}}function ND(t){const e=[];return ga(t.fields,(n,s)=>{const r=new et([n]);if(Vm(s)){const i=ND(s.mapValue).fields;if(i.length===0)e.push(r);else for(const a of i)e.push(r.child(a))}else e.push(r)}),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n,s,r,i,a,o){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Ge(e,0,Z.min(),Z.min(),Z.min(),Wt.empty(),0)}static newFoundDocument(e,n,s,r){return new Ge(e,1,n,Z.min(),s,r,0)}static newNoDocument(e,n){return new Ge(e,2,n,Z.min(),Z.min(),Wt.empty(),0)}static newUnknownDocument(e,n){return new Ge(e,3,n,Z.min(),Z.min(),Wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ge&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ge(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n){this.position=e,this.inclusive=n}}function nN(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],a=t.position[r];if(i.field.isKeyField()?s=G.comparator(G.fromName(a.referenceValue),n.key):s=ta(a,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function sN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ir(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n="asc"){this.field=e,this.dir=n}}function AG(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{}class pe extends ID{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new NG(e,n,s):n==="array-contains"?new CG(e,s):n==="in"?new DD(e,s):n==="not-in"?new jG(e,s):n==="array-contains-any"?new PG(e,s):new pe(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new IG(e,s):new RG(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ta(n,this.value)):n!==null&&ea(this.value)===ea(n)&&this.matchesComparison(ta(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ie extends ID{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ie(e,n)}matches(e){return hc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hc(t){return t.op==="and"}function qx(t){return t.op==="or"}function Pw(t){return RD(t)&&hc(t)}function RD(t){for(const e of t.filters)if(e instanceof Ie)return!1;return!0}function Hx(t){if(t instanceof pe)return t.field.canonicalString()+t.op.toString()+dc(t.value);if(Pw(t))return t.filters.map(e=>Hx(e)).join(",");{const e=t.filters.map(n=>Hx(n)).join(",");return`${t.op}(${e})`}}function CD(t,e){return t instanceof pe?function(s,r){return r instanceof pe&&s.op===r.op&&s.field.isEqual(r.field)&&ir(s.value,r.value)}(t,e):t instanceof Ie?function(s,r){return r instanceof Ie&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,a,o)=>i&&CD(a,r.filters[o]),!0):!1}(t,e):void Q(19439)}function jD(t,e){const n=t.filters.concat(e);return Ie.create(n,t.op)}function PD(t){return t instanceof pe?function(n){return`${n.field.canonicalString()} ${n.op} ${dc(n.value)}`}(t):t instanceof Ie?function(n){return n.op.toString()+" {"+n.getFilters().map(PD).join(" ,")+"}"}(t):"Filter"}class NG extends pe{constructor(e,n,s){super(e,n,s),this.key=G.fromName(s.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class IG extends pe{constructor(e,n){super(e,"in",n),this.keys=kD("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class RG extends pe{constructor(e,n){super(e,"not-in",n),this.keys=kD("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function kD(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(s=>G.fromName(s.referenceValue))}class CG extends pe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dh(n)&&uh(n.arrayValue,this.value)}}class DD extends pe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&uh(this.value.arrayValue,n)}}class jG extends pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(uh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!uh(this.value.arrayValue,n)}}class PG extends pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>uh(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kG{constructor(e,n=null,s=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}}function Gx(t,e=null,n=[],s=[],r=null,i=null,a=null){return new kG(t,e,n,s,r,i,a)}function vo(t){const e=K(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Hx(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Qh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>dc(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>dc(s)).join(",")),e.Te=n}return e.Te}function Jh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!AG(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!CD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sN(t.startAt,e.startAt)&&sN(t.endAt,e.endAt)}function Lp(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Up(t,e){return t.filters.filter(n=>n instanceof pe&&n.field.isEqual(e))}function rN(t,e,n){let s=Mm,r=!0;for(const i of Up(t,e)){let a=Mm,o=!0;switch(i.op){case"<":case"<=":a=EG(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,o=!1;break;case"!=":case"not-in":a=Mm}eN({value:s,inclusive:r},{value:a,inclusive:o})<0&&(s=a,r=o)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=n.position[i];eN({value:s,inclusive:r},{value:a,inclusive:n.inclusive})<0&&(s=a,r=n.inclusive);break}}return{value:s,inclusive:r}}function iN(t,e,n){let s=Ii,r=!0;for(const i of Up(t,e)){let a=Ii,o=!0;switch(i.op){case">=":case">":a=SG(i.value),o=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,o=!1;break;case"!=":case"not-in":a=Ii}tN({value:s,inclusive:r},{value:a,inclusive:o})>0&&(s=a,r=o)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=n.position[i];tN({value:s,inclusive:r},{value:a,inclusive:n.inclusive})>0&&(s=a,r=n.inclusive);break}}return{value:s,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n=null,s=[],r=[],i=null,a="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function MD(t,e,n,s,r,i,a,o){return new Qr(t,e,n,s,r,i,a,o)}function qc(t){return new Qr(t)}function aN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kw(t){return t.collectionGroup!==null}function Ul(t){const e=K(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Re(et.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new hh(i,s))}),n.has(et.keyField().canonicalString())||e.Ie.push(new hh(et.keyField(),s))}return e.Ie}function xn(t){const e=K(t);return e.Ee||(e.Ee=DG(e,Ul(t))),e.Ee}function DG(t,e){if(t.limitType==="F")return Gx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new hh(r.field,i)});const n=t.endAt?new na(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new na(t.startAt.position,t.startAt.inclusive):null;return Gx(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function $x(t,e){const n=t.filters.concat([e]);return new Qr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function zp(t,e,n){return new Qr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zh(t,e){return Jh(xn(t),xn(e))&&t.limitType===e.limitType}function OD(t){return`${vo(xn(t))}|lt:${t.limitType}`}function al(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>PD(r)).join(", ")}]`),Qh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>dc(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>dc(r)).join(",")),`Target(${s})`}(xn(t))}; limitType=${t.limitType})`}function ef(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):G.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of Ul(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(a,o,c){const u=nN(a,o,c);return a.inclusive?u<=0:u<0}(s.startAt,Ul(s),r)||s.endAt&&!function(a,o,c){const u=nN(a,o,c);return a.inclusive?u>=0:u>0}(s.endAt,Ul(s),r))}(t,e)}function VD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function LD(t){return(e,n)=>{let s=!1;for(const r of Ul(t)){const i=MG(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function MG(t,e,n){const s=t.field.isKeyField()?G.comparator(e.key,n.key):function(i,a,o){const c=a.data.field(i),u=o.data.field(i);return c!==null&&u!==null?ta(c,u):Q(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Q(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ga(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return vD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OG=new Fe(G.comparator);function Rn(){return OG}const UD=new Fe(G.comparator);function Ku(...t){let e=UD;for(const n of t)e=e.insert(n.key,n);return e}function zD(t){let e=UD;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Ws(){return Sd()}function FD(){return Sd()}function Sd(){return new Xr(t=>t.toString(),(t,e)=>t.isEqual(e))}const VG=new Fe(G.comparator),LG=new Re(G.comparator);function oe(...t){let e=LG;for(const n of t)e=e.add(n);return e}const UG=new Re(re);function Dw(){return UG}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ih(e)?"-0":e}}function BD(t){return{integerValue:""+t}}function qD(t,e){return oD(e)?BD(e):Mw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(){this._=void 0}}function zG(t,e,n){return t instanceof fc?function(r,i){const a={fields:{[bD]:{stringValue:_D},[TD]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Xg(i)&&(i=Jg(i)),i&&(a.fields[wD]=i),{mapValue:a}}(n,e):t instanceof xo?GD(t,e):t instanceof _o?$D(t,e):function(r,i){const a=HD(r,i),o=oN(a)+oN(r.Ae);return Bx(a)&&Bx(r.Ae)?BD(o):Mw(r.serializer,o)}(t,e)}function FG(t,e,n){return t instanceof xo?GD(t,e):t instanceof _o?$D(t,e):n}function HD(t,e){return t instanceof mc?function(s){return Bx(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class fc extends ey{}class xo extends ey{constructor(e){super(),this.elements=e}}function GD(t,e){const n=KD(e);for(const s of t.elements)n.some(r=>ir(r,s))||n.push(s);return{arrayValue:{values:n}}}class _o extends ey{constructor(e){super(),this.elements=e}}function $D(t,e){let n=KD(e);for(const s of t.elements)n=n.filter(r=>!ir(r,s));return{arrayValue:{values:n}}}class mc extends ey{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function oN(t){return Ze(t.integerValue||t.doubleValue)}function KD(t){return dh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n){this.field=e,this.transform=n}}function BG(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof xo&&r instanceof xo||s instanceof _o&&r instanceof _o?rc(s.elements,r.elements,ir):s instanceof mc&&r instanceof mc?ir(s.Ae,r.Ae):s instanceof fc&&r instanceof fc}(t.transform,e.transform)}class qG{constructor(e,n){this.version=e,this.transformResults=n}}class tt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new tt}static exists(e){return new tt(void 0,e)}static updateTime(e){return new tt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ty{}function WD(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Gc(t.key,tt.none()):new Hc(t.key,t.data,tt.none());{const n=t.data,s=Wt.empty();let r=new Re(et.comparator);for(let i of e.fields)if(!r.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?s.delete(i):s.set(i,a),r=r.add(i)}return new Jr(t.key,s,new In(r.toArray()),tt.none())}}function HG(t,e,n){t instanceof Hc?function(r,i,a){const o=r.value.clone(),c=cN(r.fieldTransforms,i,a.transformResults);o.setAll(c),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Jr?function(r,i,a){if(!Lm(r.precondition,i))return void i.convertToUnknownDocument(a.version);const o=cN(r.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(YD(r)),c.setAll(o),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(r,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Ad(t,e,n,s){return t instanceof Hc?function(i,a,o,c){if(!Lm(i.precondition,a))return o;const u=i.value.clone(),h=uN(i.fieldTransforms,c,a);return u.setAll(h),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,s):t instanceof Jr?function(i,a,o,c){if(!Lm(i.precondition,a))return o;const u=uN(i.fieldTransforms,c,a),h=a.data;return h.setAll(YD(i)),h.setAll(u),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,s):function(i,a,o){return Lm(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function GG(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=HD(s.transform,r||null);i!=null&&(n===null&&(n=Wt.empty()),n.set(s.field,i))}return n||null}function lN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&rc(s,r,(i,a)=>BG(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Hc extends ty{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Jr extends ty{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function YD(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function cN(t,e,n){const s=new Map;X(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],a=i.transform,o=e.data.field(i.field);s.set(i.field,FG(a,o,n[r]))}return s}function uN(t,e,n){const s=new Map;for(const r of t){const i=r.transform,a=n.data.field(r.field);s.set(r.field,zG(i,a,e))}return s}class Gc extends ty{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ow extends ty{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&HG(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ad(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ad(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=FD();return this.mutations.forEach(r=>{const i=e.get(r.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=n.has(r.key)?null:o;const c=WD(a,o);c!==null&&s.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(Z.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&rc(this.mutations,e.mutations,(n,s)=>lN(n,s))&&rc(this.baseMutations,e.baseMutations,(n,s)=>lN(n,s))}}class Lw{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){X(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return VG}();const i=e.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,s[a].version);return new Lw(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $G{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,ve;function QD(t){switch(t){case L.OK:return Q(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return Q(15467,{code:t})}}function XD(t){if(t===void 0)return gt("GRPC error has no .code"),L.UNKNOWN;switch(t){case bt.OK:return L.OK;case bt.CANCELLED:return L.CANCELLED;case bt.UNKNOWN:return L.UNKNOWN;case bt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case bt.INTERNAL:return L.INTERNAL;case bt.UNAVAILABLE:return L.UNAVAILABLE;case bt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case bt.NOT_FOUND:return L.NOT_FOUND;case bt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case bt.ABORTED:return L.ABORTED;case bt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case bt.DATA_LOSS:return L.DATA_LOSS;default:return Q(39323,{code:t})}}(ve=bt||(bt={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KG=new Fi([4294967295,4294967295],0);function dN(t){const e=JD().encode(t),n=new Hk;return n.update(e),new Uint8Array(n.digest())}function hN(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Fi([n,s],0),new Fi([r,i],0)]}class zw{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Wu(`Invalid padding: ${n}`);if(s<0)throw new Wu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Wu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Wu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Fi.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(Fi.fromNumber(s)));return r.compare(KG)===1&&(r=new Fi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=dN(e),[s,r]=hN(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(s,r,i);if(!this.we(a))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new zw(i,r,n);return s.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const n=dN(e),[s,r]=hN(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(s,r,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,sf.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new nf(Z.min(),r,new Fe(re),Rn(),oe())}}class sf{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new sf(s,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class ZD{constructor(e,n){this.targetId=e,this.Ce=n}}class eM{constructor(e,n,s=dt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class fN{constructor(){this.ve=0,this.Fe=mN(),this.Me=dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=oe(),n=oe(),s=oe();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:Q(38017,{changeType:i})}}),new sf(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=mN()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,X(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class WG{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rn(),this.Je=Yf(),this.He=Yf(),this.Ye=new Fe(re)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Lp(i))if(s===0){const a=new G(i.path);this.et(n,a,Ge.newNoDocument(a,Z.min()))}else X(s===1,20013,{expectedCount:s});else{const a=this._t(n);if(a!==s){const o=this.ut(e),c=o?this.ct(o,e,a):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let a,o;try{a=Br(s).toUint8Array()}catch(c){if(c instanceof xD)return rr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new zw(a,r,i)}catch(c){return rr(c instanceof Wu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const o=this.ot(a);if(o){if(i.current&&Lp(o.target)){const c=new G(o.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,Ge.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let s=oe();this.He.forEach((i,a)=>{let o=!0;a.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(s=s.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const r=new nf(e,n,this.Ye,this.je,s);return this.je=Rn(),this.Je=Yf(),this.He=Yf(),this.Ye=new Fe(re),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new fN,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Re(re),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Re(re),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fN),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Yf(){return new Fe(G.comparator)}function mN(){return new Fe(G.comparator)}const YG={asc:"ASCENDING",desc:"DESCENDING"},QG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XG={and:"AND",or:"OR"};class JG{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Kx(t,e){return t.useProto3Json||Qh(e)?e:{value:e}}function pc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ZG(t,e){return pc(t,e.toTimestamp())}function vt(t){return X(!!t,49232),Z.fromTimestamp(function(n){const s=Fr(n);return new Ee(s.seconds,s.nanos)}(t))}function Fw(t,e){return Wx(t,e).canonicalString()}function Wx(t,e){const n=function(r){return new fe(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function nM(t){const e=fe.fromString(t);return X(hM(e),10190,{key:e.toString()}),e}function fh(t,e){return Fw(t.databaseId,e.path)}function Xs(t,e){const n=nM(e);if(n.get(1)!==t.databaseId.projectId)throw new F(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(iM(n))}function sM(t,e){return Fw(t.databaseId,e)}function rM(t){const e=nM(t);return e.length===4?fe.emptyPath():iM(e)}function Yx(t){return new fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iM(t){return X(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function pN(t,e,n){return{name:fh(t,e),fields:n.value.mapValue.fields}}function aM(t,e,n){const s=Xs(t,e.name),r=vt(e.updateTime),i=e.createTime?vt(e.createTime):Z.min(),a=new Wt({mapValue:{fields:e.fields}}),o=Ge.newFoundDocument(s,r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function e$(t,e){return"found"in e?function(s,r){X(!!r.found,43571),r.found.name,r.found.updateTime;const i=Xs(s,r.found.name),a=vt(r.found.updateTime),o=r.found.createTime?vt(r.found.createTime):Z.min(),c=new Wt({mapValue:{fields:r.found.fields}});return Ge.newFoundDocument(i,a,o,c)}(t,e):"missing"in e?function(s,r){X(!!r.missing,3894),X(!!r.readTime,22933);const i=Xs(s,r.missing),a=vt(r.readTime);return Ge.newNoDocument(i,a)}(t,e):Q(7234,{result:e})}function t$(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Q(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(X(h===void 0||typeof h=="string",58123),dt.fromBase64String(h||"")):(X(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),dt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const h=u.code===void 0?L.UNKNOWN:XD(u.code);return new F(h,u.message||"")}(a);n=new eM(s,r,i,o||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Xs(t,s.document.name),i=vt(s.document.updateTime),a=s.document.createTime?vt(s.document.createTime):Z.min(),o=new Wt({mapValue:{fields:s.document.fields}}),c=Ge.newFoundDocument(r,i,a,o),u=s.targetIds||[],h=s.removedTargetIds||[];n=new Um(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Xs(t,s.document),i=s.readTime?vt(s.readTime):Z.min(),a=Ge.newNoDocument(r,i),o=s.removedTargetIds||[];n=new Um([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Xs(t,s.document),i=s.removedTargetIds||[];n=new Um([],i,r,null)}else{if(!("filter"in e))return Q(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,a=new $G(r,i),o=s.targetId;n=new ZD(o,a)}}return n}function mh(t,e){let n;if(e instanceof Hc)n={update:pN(t,e.key,e.value)};else if(e instanceof Gc)n={delete:fh(t,e.key)};else if(e instanceof Jr)n={update:pN(t,e.key,e.data),updateMask:o$(e.fieldMask)};else{if(!(e instanceof Ow))return Q(16599,{Vt:e.type});n={verify:fh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,a){const o=a.transform;if(o instanceof fc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof xo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof _o)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof mc)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw Q(20930,{transform:a.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:ZG(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Q(27497)}(t,e.precondition)),n}function Qx(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?tt.updateTime(vt(i.updateTime)):i.exists!==void 0?tt.exists(i.exists):tt.none()}(e.currentDocument):tt.none(),s=e.updateTransforms?e.updateTransforms.map(r=>function(a,o){let c=null;if("setToServerValue"in o)X(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),c=new fc;else if("appendMissingElements"in o){const h=o.appendMissingElements.values||[];c=new xo(h)}else if("removeAllFromArray"in o){const h=o.removeAllFromArray.values||[];c=new _o(h)}else"increment"in o?c=new mc(a,o.increment):Q(16584,{proto:o});const u=et.fromServerFormat(o.fieldPath);return new tf(u,c)}(t,r)):[];if(e.update){e.update.name;const r=Xs(t,e.update.name),i=new Wt({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(c){const u=c.fieldPaths||[];return new In(u.map(h=>et.fromServerFormat(h)))}(e.updateMask);return new Jr(r,i,a,n,s)}return new Hc(r,i,n,s)}if(e.delete){const r=Xs(t,e.delete);return new Gc(r,n)}if(e.verify){const r=Xs(t,e.verify);return new Ow(r,n)}return Q(1463,{proto:e})}function n$(t,e){return t&&t.length>0?(X(e!==void 0,14353),t.map(n=>function(r,i){let a=r.updateTime?vt(r.updateTime):vt(i);return a.isEqual(Z.min())&&(a=vt(i)),new qG(a,r.transformResults||[])}(n,e))):[]}function oM(t,e){return{documents:[sM(t,e.path)]}}function lM(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=sM(t,r);const i=function(u){if(u.length!==0)return dM(Ie.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:ol(m.field),direction:r$(m.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Kx(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:r}}function cM(t){let e=rM(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){X(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=uM(f);return m instanceof Ie&&Pw(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(m=>function(_){return new hh(ll(_.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m))}(n.orderBy));let o=null;n.limit&&(o=function(f){let m;return m=typeof f=="object"?f.value:f,Qh(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,p=f.values||[];return new na(p,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,p=f.values||[];return new na(p,m)}(n.endAt)),MD(e,r,a,i,o,"F",c,u)}function s$(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uM(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=ll(n.unaryFilter.field);return pe.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=ll(n.unaryFilter.field);return pe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ll(n.unaryFilter.field);return pe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ll(n.unaryFilter.field);return pe.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(t):t.fieldFilter!==void 0?function(n){return pe.create(ll(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ie.create(n.compositeFilter.filters.map(s=>uM(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(t):Q(30097,{filter:t})}function r$(t){return YG[t]}function i$(t){return QG[t]}function a$(t){return XG[t]}function ol(t){return{fieldPath:t.canonicalString()}}function ll(t){return et.fromServerFormat(t.fieldPath)}function dM(t){return t instanceof pe?function(n){if(n.op==="=="){if(ZA(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NAN"}};if(JA(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ZA(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NOT_NAN"}};if(JA(n.value))return{unaryFilter:{field:ol(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ol(n.field),op:i$(n.op),value:n.value}}}(t):t instanceof Ie?function(n){const s=n.getFilters().map(r=>dM(r));return s.length===1?s[0]:{compositeFilter:{op:a$(n.op),filters:s}}}(t):Q(54877,{filter:t})}function o$(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,s,r,i=Z.min(),a=Z.min(),o=dt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e){this.yt=e}}function l$(t,e){let n;if(e.document)n=aM(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=G.fromSegments(e.noDocument.path),r=wo(e.noDocument.readTime);n=Ge.newNoDocument(s,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Q(56709);{const s=G.fromSegments(e.unknownDocument.path),r=wo(e.unknownDocument.version);n=Ge.newUnknownDocument(s,r)}}return e.readTime&&n.setReadTime(function(r){const i=new Ee(r[0],r[1]);return Z.fromTimestamp(i)}(e.readTime)),n}function gN(t,e){const n=e.key,s={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Fp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=function(i,a){return{name:fh(i,a.key),fields:a.data.value.mapValue.fields,updateTime:pc(i,a.version.toTimestamp()),createTime:pc(i,a.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())s.noDocument={path:n.path.toArray(),readTime:bo(e.version)};else{if(!e.isUnknownDocument())return Q(57904,{document:e});s.unknownDocument={path:n.path.toArray(),version:bo(e.version)}}return s}function Fp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function bo(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function wo(t){const e=new Ee(t.seconds,t.nanoseconds);return Z.fromTimestamp(e)}function qa(t,e){const n=(e.baseMutations||[]).map(i=>Qx(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const o=e.mutations[i+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const s=e.mutations.map(i=>Qx(t.yt,i)),r=Ee.fromMillis(e.localWriteTimeMs);return new Vw(e.batchId,r,n,s)}function Yu(t){const e=wo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?wo(t.lastLimboFreeSnapshotVersion):Z.min();let s;return s=function(i){return i.documents!==void 0}(t.query)?function(i){const a=i.documents.length;return X(a===1,1966,{count:a}),xn(qc(rM(i.documents[0])))}(t.query):function(i){return xn(cM(i))}(t.query),new br(s,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,dt.fromBase64String(t.resumeToken))}function mM(t,e){const n=bo(e.snapshotVersion),s=bo(e.lastLimboFreeSnapshotVersion);let r;r=Lp(e.target)?oM(t.yt,e.target):lM(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:vo(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:r}}function Bw(t){const e=cM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?zp(e,e.limit,"L"):e}function Q0(t,e){return new Uw(e.largestBatchId,Qx(t.yt,e.overlayMutation))}function yN(t,e){const n=e.path.lastSegment();return[t,cn(e.path.popLast()),n]}function vN(t,e,n,s){return{indexId:t,uid:e,sequenceNumber:n,readTime:bo(s.readTime),documentKey:cn(s.documentKey.path),largestBatchId:s.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${getBundleMetadata(e,n){return xN(e).get(n).next(s=>{if(s)return function(i){return{id:i.bundleId,createTime:wo(i.createTime),version:i.version}}(s)})}saveBundleMetadata(e,n){return xN(e).put(function(r){return{bundleId:r.id,createTime:bo(vt(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return _N(e).get(n).next(s=>{if(s)return function(i){return{name:i.name,query:Bw(i.bundledQuery),readTime:wo(i.readTime)}}(s)})}saveNamedQuery(e,n){return _N(e).put(function(r){return{name:r.name,readTime:bo(vt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function xN(t){return Mt(t,Wg)}function _N(t){return Mt(t,Yg)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const s=n.uid||"";return new ny(e,s)}getOverlay(e,n){return Iu(e).get(yN(this.userId,n)).next(s=>s?Q0(this.serializer,s):null)}getOverlays(e,n){const s=Ws();return O.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){const r=[];return s.forEach((i,a)=>{const o=new Uw(n,a);r.push(this.St(e,o))}),O.waitFor(r)}removeOverlaysForBatchId(e,n,s){const r=new Set;n.forEach(a=>r.add(cn(a.getCollectionPath())));const i=[];return r.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,s],[this.userId,a,s+1],!1,!0);i.push(Iu(e).Z(Lx,o))}),O.waitFor(i)}getOverlaysForCollection(e,n,s){const r=Ws(),i=cn(n),a=IDBKeyRange.bound([this.userId,i,s],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Iu(e).J(Lx,a).next(o=>{for(const c of o){const u=Q0(this.serializer,c);r.set(u.getKey(),u)}return r})}getOverlaysForCollectionGroup(e,n,s,r){const i=Ws();let a;const o=IDBKeyRange.bound([this.userId,n,s],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Iu(e).ee({index:fD,range:o},(c,u,h)=>{const f=Q0(this.serializer,u);i.size()<r||f.largestBatchId===a?(i.set(f.getKey(),f),a=f.largestBatchId):h.done()}).next(()=>i)}St(e,n){return Iu(e).put(function(r,i,a){const[o,c,u]=yN(i,a.mutation.key);return{userId:i,collectionPath:c,documentId:u,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:mh(r.yt,a.mutation)}}(this.serializer,this.userId,n))}}function Iu(t){return Mt(t,Qg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u${bt(e){return Mt(e,Iw)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const s=n==null?void 0:n.value;return s?dt.fromUint8Array(s):dt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ze(e.integerValue));else if("doubleValue"in e){const s=Ze(e.doubleValue);isNaN(s)?this.Ft(n,13):(this.Ft(n,15),ih(s)?n.Mt(0):n.Mt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Ft(n,20),typeof s=="string"&&(s=Fr(s)),n.xt(`${s.seconds||""}`),n.Mt(s.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Br(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const s=e.geoPointValue;this.Ft(n,45),n.Mt(s.latitude||0),n.Mt(s.longitude||0)}else"mapValue"in e?SD(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Zg(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Q(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const s=e.fields||{};this.Ft(n,55);for(const r of Object.keys(s))this.Ot(r,n),this.Ct(s[r],n)}kt(e,n){var a,o;const s=e.fields||{};this.Ft(n,53);const r=uc,i=((o=(a=s[r].arrayValue)==null?void 0:a.values)==null?void 0:o.length)||0;this.Ft(n,15),n.Mt(Ze(i)),this.Ot(r,n),this.Ct(s[r],n)}Qt(e,n){const s=e.values||[];this.Ft(n,50);for(const r of s)this.Ct(r,n)}Lt(e,n){this.Ft(n,37),G.fromName(e).path.forEach(s=>{this.Ft(n,60),this.Ut(s,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Ha.Kt=new Ha;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=255;function d$(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function bN(t){const e=64-function(s){let r=0;for(let i=0;i<8;++i){const a=d$(255&s[i]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}class h${constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.Gt(s.value),s=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.Jt(s.value),s=n.next();this.Ht()}Yt(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.Gt(s);else if(s<2048)this.Gt(960|s>>>6),this.Gt(128|63&s);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s);else{const r=n.codePointAt(0);this.Gt(240|r>>>18),this.Gt(128|63&r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r)}}this.zt()}Zt(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.Jt(s);else if(s<2048)this.Jt(960|s>>>6),this.Jt(128|63&s);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s);else{const r=n.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Ht()}Xt(e){const n=this.en(e),s=bN(n);this.tn(1+s),this.buffer[this.position++]=255&s;for(let r=n.length-s;r<n.length;++r)this.buffer[this.position++]=255&n[r]}nn(e){const n=this.en(e),s=bN(n);this.tn(1+s),this.buffer[this.position++]=~(255&s);for(let r=n.length-s;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}rn(){this.sn(Yo),this.sn(255)}_n(){this.an(Yo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),s=!!(128&n[0]);n[0]^=s?255:128;for(let r=1;r<n.length;++r)n[r]^=s?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Yo?(this.sn(Yo),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Yo?(this.an(Yo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let s=2*this.buffer.length;s<n&&(s=n);const r=new Uint8Array(s);r.set(this.buffer),this.buffer=r}}class f${constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class m${constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Ru{constructor(){this.cn=new h$,this.ln=new f$(this.cn),this.hn=new m$(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n,s,r){this.Tn=e,this.In=n,this.En=s,this.dn=r}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,s=new Uint8Array(n);return s.set(this.dn,0),n!==e?s.set([0],this.dn.length):++s[s.length-1],new Ga(this.Tn,this.In,this.En,s)}Rn(e,n,s){return{indexId:this.Tn,uid:e,arrayValue:zm(this.En),directionalValue:zm(this.dn),orderedDocumentKey:zm(n),documentKey:s.path.toArray()}}Vn(e,n,s){const r=this.Rn(e,n,s);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function ui(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=wN(t.En,e.En),n!==0?n:(n=wN(t.dn,e.dn),n!==0?n:G.comparator(t.In,e.In)))}function wN(t,e){for(let n=0;n<t.length&&n<e.length;++n){const s=t[n]-e[n];if(s!==0)return s}return t.length-e.length}function zm(t){return jP()?function(n){let s="";for(let r=0;r<n.length;r++)s+=String.fromCharCode(n[r]);return s}(t):t}function TN(t){return typeof t!="string"?t:function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(t)}class EN{constructor(e){this.mn=new Re((n,s)=>et.comparator(n.field,s.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const s=n;s.isInequality()?this.mn=this.mn.add(s):this.gn.push(s)}}get pn(){return this.mn.size>1}yn(e){if(X(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Mx(e);if(n!==void 0&&!this.wn(n))return!1;const s=Va(e);let r=new Set,i=0,a=0;for(;i<s.length&&this.wn(s[i]);++i)r=r.add(s[i].fieldPath.canonicalString());if(i===s.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!r.has(o.field.canonicalString())){const c=s[i];if(!this.Sn(o,c)||!this.bn(this.fn[a++],c))return!1}++i}for(;i<s.length;++i){const o=s[i];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new Re(et.comparator);const n=[];for(const s of this.gn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")n.push(new Pm(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),n.push(new Pm(s.field,0))}for(const s of this.fn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),n.push(new Pm(s.field,s.dir==="asc"?0:1)));return new Dp(Dp.UNKNOWN_ID,this.collectionId,n,rh.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===s}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(t){var n,s;if(X(t instanceof pe||t instanceof Ie,20012),t instanceof pe){if(t instanceof DD){const r=((s=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:s.map(i=>pe.create(t.field,"==",i)))||[];return Ie.create(r,"or")}return t}const e=t.filters.map(r=>pM(r));return Ie.create(e,t.op)}function p$(t){if(t.getFilters().length===0)return[];const e=Zx(pM(t));return X(gM(e),7391),Xx(e)||Jx(e)?[e]:e.getFilters()}function Xx(t){return t instanceof pe}function Jx(t){return t instanceof Ie&&Pw(t)}function gM(t){return Xx(t)||Jx(t)||function(n){if(n instanceof Ie&&qx(n)){for(const s of n.getFilters())if(!Xx(s)&&!Jx(s))return!1;return!0}return!1}(t)}function Zx(t){if(X(t instanceof pe||t instanceof Ie,34018),t instanceof pe)return t;if(t.filters.length===1)return Zx(t.filters[0]);const e=t.filters.map(s=>Zx(s));let n=Ie.create(e,t.op);return n=Bp(n),gM(n)?n:(X(n instanceof Ie,64498),X(hc(n),40251),X(n.filters.length>1,57927),n.filters.reduce((s,r)=>qw(s,r)))}function qw(t,e){let n;return X(t instanceof pe||t instanceof Ie,38388),X(e instanceof pe||e instanceof Ie,25473),n=t instanceof pe?e instanceof pe?function(r,i){return Ie.create([r,i],"and")}(t,e):SN(t,e):e instanceof pe?SN(e,t):function(r,i){if(X(r.filters.length>0&&i.filters.length>0,48005),hc(r)&&hc(i))return jD(r,i.getFilters());const a=qx(r)?r:i,o=qx(r)?i:r,c=a.filters.map(u=>qw(u,o));return Ie.create(c,"or")}(t,e),Bp(n)}function SN(t,e){if(hc(e))return jD(e,t.getFilters());{const n=e.filters.map(s=>qw(t,s));return Ie.create(n,"or")}}function Bp(t){if(X(t instanceof pe||t instanceof Ie,11850),t instanceof pe)return t;const e=t.getFilters();if(e.length===1)return Bp(e[0]);if(RD(t))return t;const n=e.map(r=>Bp(r)),s=[];return n.forEach(r=>{r instanceof pe?s.push(r):r instanceof Ie&&(r.op===t.op?s.push(...r.filters):s.push(r))}),s.length===1?s[0]:Ie.create(s,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(){this.Cn=new Hw}addToCollectionParentIndex(e,n){return this.Cn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Jn.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Jn.min())}updateCollectionGroup(e,n,s){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class Hw{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Re(fe.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Re(fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="IndexedDbIndexManager",Qf=new Uint8Array(0);class y${constructor(e,n){this.databaseId=n,this.vn=new Hw,this.Fn=new Xr(s=>vo(s),(s,r)=>Jh(s,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const s=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:s,parent:cn(r)};return NN(e).put(i)}return O.resolve()}getCollectionParents(e,n){const s=[],r=IDBKeyRange.bound([n,""],[Jk(n),""],!1,!0);return NN(e).J(r).next(i=>{for(const a of i){if(a.collectionId!==n)break;s.push(Ks(a.parent))}return s})}addFieldIndex(e,n){const s=Cu(e),r=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;const i=s.add(r);if(n.indexState){const a=Xo(e);return i.next(o=>{a.put(vN(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const s=Cu(e),r=Xo(e),i=Qo(e);return s.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Cu(e),s=Qo(e),r=Xo(e);return n.Z().next(()=>s.Z()).next(()=>r.Z())}createTargetIndexes(e,n){return O.forEach(this.Mn(n),s=>this.getIndexType(e,s).next(r=>{if(r===0||r===1){const i=new EN(s).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const s=Qo(e);let r=!0;const i=new Map;return O.forEach(this.Mn(n),a=>this.xn(e,a).next(o=>{r&&(r=!!o),i.set(a,o)})).next(()=>{if(r){let a=oe();const o=[];return O.forEach(i,(c,u)=>{B(AN,`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(c)} to execute ${vo(n)}`);const h=function(b,R){const D=Mx(R);if(D===void 0)return null;for(const M of Up(b,D.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null}(u,c),f=function(b,R){const D=new Map;for(const M of Va(R))for(const A of Up(b,M.fieldPath))switch(A.op){case"==":case"in":D.set(M.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return D.set(M.fieldPath.canonicalString(),A.value),Array.from(D.values())}return null}(u,c),m=function(b,R){const D=[];let M=!0;for(const A of Va(R)){const E=A.kind===0?rN(b,A.fieldPath,b.startAt):iN(b,A.fieldPath,b.startAt);D.push(E.value),M&&(M=E.inclusive)}return new na(D,M)}(u,c),p=function(b,R){const D=[];let M=!0;for(const A of Va(R)){const E=A.kind===0?iN(b,A.fieldPath,b.endAt):rN(b,A.fieldPath,b.endAt);D.push(E.value),M&&(M=E.inclusive)}return new na(D,M)}(u,c),_=this.On(c,u,m),w=this.On(c,u,p),T=this.Nn(c,u,f),x=this.Bn(c.indexId,h,_,m.inclusive,w,p.inclusive,T);return O.forEach(x,v=>s.Y(v,n.limit).next(b=>{b.forEach(R=>{const D=G.fromSegments(R.documentKey);a.has(D)||(a=a.add(D),o.push(D))})}))}).next(()=>o)}return O.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=p$(Ie.create(e.filters,"and")).map(s=>Gx(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,s,r,i,a,o){const c=(n!=null?n.length:1)*Math.max(s.length,i.length),u=c/(n!=null?n.length:1),h=[];for(let f=0;f<c;++f){const m=n?this.Ln(n[f/u]):Qf,p=this.kn(e,m,s[f%u],r),_=this.qn(e,m,i[f%u],a),w=o.map(T=>this.kn(e,m,T,!0));h.push(...this.createRange(p,_,w))}return h}kn(e,n,s,r){const i=new Ga(e,G.empty(),n,s);return r?i:i.An()}qn(e,n,s,r){const i=new Ga(e,G.empty(),n,s);return r?i.An():i}xn(e,n){const s=new EN(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(i=>{let a=null;for(const o of i)s.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,n){let s=2;const r=this.Mn(n);return O.forEach(r,i=>this.xn(e,i).next(a=>{a?s!==0&&a.fields.length<function(c){let u=new Re(et.comparator),h=!1;for(const f of c.filters)for(const m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:u=u.add(m.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)}(i)&&(s=1):s=0})).next(()=>function(a){return a.limit!==null}(n)&&r.length>1&&s===2?1:s)}Qn(e,n){const s=new Ru;for(const r of Va(e)){const i=n.data.field(r.fieldPath);if(i==null)return null;const a=s.Pn(r.kind);Ha.Kt.Dt(i,a)}return s.un()}Ln(e){const n=new Ru;return Ha.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const s=new Ru;return Ha.Kt.Dt(yo(this.databaseId,n),s.Pn(function(i){const a=Va(i);return a.length===0?0:a[a.length-1].kind}(e))),s.un()}Nn(e,n,s){if(s===null)return[];let r=[];r.push(new Ru);let i=0;for(const a of Va(e)){const o=s[i++];for(const c of r)if(this.Un(n,a.fieldPath)&&dh(o))r=this.Kn(r,a,o);else{const u=c.Pn(a.kind);Ha.Kt.Dt(o,u)}}return this.Wn(r)}On(e,n,s){return this.Nn(e,n,s.position)}Wn(e){const n=[];for(let s=0;s<e.length;++s)n[s]=e[s].un();return n}Kn(e,n,s){const r=[...e],i=[];for(const a of s.arrayValue.values||[])for(const o of r){const c=new Ru;c.seed(o.un()),Ha.Kt.Dt(a,c.Pn(n.kind)),i.push(c)}return i}Un(e,n){return!!e.filters.find(s=>s instanceof pe&&s.field.isEqual(n)&&(s.op==="in"||s.op==="not-in"))}getFieldIndexes(e,n){const s=Cu(e),r=Xo(e);return(n?s.J(Vx,IDBKeyRange.bound(n,n)):s.J()).next(i=>{const a=[];return O.forEach(i,o=>r.get([o.indexId,this.uid]).next(c=>{a.push(function(h,f){const m=f?new rh(f.sequenceNumber,new Jn(wo(f.readTime),new G(Ks(f.documentKey)),f.largestBatchId)):rh.empty(),p=h.fields.map(([_,w])=>new Pm(et.fromServerFormat(_),w));return new Dp(h.indexId,h.collectionGroup,p,m)}(o,c))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((s,r)=>{const i=s.indexState.sequenceNumber-r.indexState.sequenceNumber;return i!==0?i:re(s.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,s){const r=Cu(e),i=Xo(e);return this.Gn(e).next(a=>r.J(Vx,IDBKeyRange.bound(n,n)).next(o=>O.forEach(o,c=>i.put(vN(c.indexId,this.uid,a,s)))))}updateIndexEntries(e,n){const s=new Map;return O.forEach(n,(r,i)=>{const a=s.get(r.collectionGroup);return(a?O.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(o=>(s.set(r.collectionGroup,o),O.forEach(o,c=>this.zn(e,r,c).next(u=>{const h=this.jn(i,c);return u.isEqual(h)?O.resolve():this.Jn(e,i,c,u,h)}))))})}Hn(e,n,s,r){return Qo(e).put(r.Rn(this.uid,this.$n(s,n.key),n.key))}Yn(e,n,s,r){return Qo(e).delete(r.Vn(this.uid,this.$n(s,n.key),n.key))}zn(e,n,s){const r=Qo(e);let i=new Re(ui);return r.ee({index:hD,range:IDBKeyRange.only([s.indexId,this.uid,zm(this.$n(s,n))])},(a,o)=>{i=i.add(new Ga(s.indexId,n,TN(o.arrayValue),TN(o.directionalValue)))}).next(()=>i)}jn(e,n){let s=new Re(ui);const r=this.Qn(n,e);if(r==null)return s;const i=Mx(n);if(i!=null){const a=e.data.field(i.fieldPath);if(dh(a))for(const o of a.arrayValue.values||[])s=s.add(new Ga(n.indexId,e.key,this.Ln(o),r))}else s=s.add(new Ga(n.indexId,e.key,Qf,r));return s}Jn(e,n,s,r,i){B(AN,"Updating index entries for document '%s'",n.key);const a=[];return function(c,u,h,f,m){const p=c.getIterator(),_=u.getIterator();let w=Wo(p),T=Wo(_);for(;w||T;){let x=!1,v=!1;if(w&&T){const b=h(w,T);b<0?v=!0:b>0&&(x=!0)}else w!=null?v=!0:x=!0;x?(f(T),T=Wo(_)):v?(m(w),w=Wo(p)):(w=Wo(p),T=Wo(_))}}(r,i,ui,o=>{a.push(this.Hn(e,n,s,o))},o=>{a.push(this.Yn(e,n,s,o))}),O.waitFor(a)}Gn(e){let n=1;return Xo(e).ee({index:dD,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,r,i)=>{i.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,s){s=s.sort((a,o)=>ui(a,o)).filter((a,o,c)=>!o||ui(a,c[o-1])!==0);const r=[];r.push(e);for(const a of s){const o=ui(a,e),c=ui(a,n);if(o===0)r[0]=e.An();else if(o>0&&c<0)r.push(a),r.push(a.An());else if(c>0)break}r.push(n);const i=[];for(let a=0;a<r.length;a+=2){if(this.Zn(r[a],r[a+1]))return[];const o=r[a].Vn(this.uid,Qf,G.empty()),c=r[a+1].Vn(this.uid,Qf,G.empty());i.push(IDBKeyRange.bound(o,c))}return i}Zn(e,n){return ui(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(IN)}getMinOffset(e,n){return O.mapArray(this.Mn(n),s=>this.xn(e,s).next(r=>r||Q(44426))).next(IN)}}function NN(t){return Mt(t,lh)}function Qo(t){return Mt(t,Td)}function Cu(t){return Mt(t,Nw)}function Xo(t){return Mt(t,wd)}function IN(t){X(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let s=1;s<t.length;s++){const r=t[s].indexState.offset;Ew(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Jn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yM=41943040;class sn{static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(t,e,n){const s=t.store(Ts),r=t.store(ac),i=[],a=IDBKeyRange.only(n.batchId);let o=0;const c=s.ee({range:a},(h,f,m)=>(o++,m.delete()));i.push(c.next(()=>{X(o===1,47070,{batchId:n.batchId})}));const u=[];for(const h of n.mutations){const f=lD(e,h.key.path,n.batchId);i.push(r.delete(f)),u.push(h.key)}return O.waitFor(i).next(()=>u)}function qp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Q(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(yM,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);class sy{constructor(e,n,s,r){this.userId=e,this.serializer=n,this.indexManager=s,this.referenceDelegate=r,this.Xn={}}static wt(e,n,s,r){X(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new sy(i,n,s,r)}checkEmpty(e){let n=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return di(e).ee({index:Wa,range:s},(r,i,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,s,r){const i=cl(e),a=di(e);return a.add({}).next(o=>{X(typeof o=="number",49019);const c=new Vw(o,n,s,r),u=function(p,_,w){const T=w.baseMutations.map(v=>mh(p.yt,v)),x=w.mutations.map(v=>mh(p.yt,v));return{userId:_,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:T,mutations:x}}(this.serializer,this.userId,c),h=[];let f=new Re((m,p)=>re(m.canonicalString(),p.canonicalString()));for(const m of r){const p=lD(this.userId,m.key.path,o);f=f.add(m.key.path.popLast()),h.push(a.put(u)),h.push(i.put(p,XH))}return f.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Xn[o]=c.keys()}),O.waitFor(h).next(()=>c)})}lookupMutationBatch(e,n){return di(e).get(n).next(s=>s?(X(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:n}),qa(this.serializer,s)):null)}er(e,n){return this.Xn[n]?O.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(s=>{if(s){const r=s.keys();return this.Xn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=IDBKeyRange.lowerBound([this.userId,s]);let i=null;return di(e).ee({index:Wa,range:r},(a,o,c)=>{o.userId===this.userId&&(X(o.batchId>=s,47524,{tr:s}),i=qa(this.serializer,o)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=Bi;return di(e).ee({index:Wa,range:n,reverse:!0},(r,i,a)=>{s=i.batchId,a.done()}).next(()=>s)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Bi],[this.userId,Number.POSITIVE_INFINITY]);return di(e).J(Wa,n).next(s=>s.map(r=>qa(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const s=km(this.userId,n.path),r=IDBKeyRange.lowerBound(s),i=[];return cl(e).ee({range:r},(a,o,c)=>{const[u,h,f]=a,m=Ks(h);if(u===this.userId&&n.path.isEqual(m))return di(e).get(f).next(p=>{if(!p)throw Q(61480,{nr:a,batchId:f});X(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:f}),i.push(qa(this.serializer,p))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Re(re);const r=[];return n.forEach(i=>{const a=km(this.userId,i.path),o=IDBKeyRange.lowerBound(a),c=cl(e).ee({range:o},(u,h,f)=>{const[m,p,_]=u,w=Ks(p);m===this.userId&&i.path.isEqual(w)?s=s.add(_):f.done()});r.push(c)}),O.waitFor(r).next(()=>this.rr(e,s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1,i=km(this.userId,s),a=IDBKeyRange.lowerBound(i);let o=new Re(re);return cl(e).ee({range:a},(c,u,h)=>{const[f,m,p]=c,_=Ks(m);f===this.userId&&s.isPrefixOf(_)?_.length===r&&(o=o.add(p)):h.done()}).next(()=>this.rr(e,o))}rr(e,n){const s=[],r=[];return n.forEach(i=>{r.push(di(e).get(i).next(a=>{if(a===null)throw Q(35274,{batchId:i});X(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:i}),s.push(qa(this.serializer,a))}))}),O.waitFor(r).next(()=>s)}removeMutationBatch(e,n){return vM(e.le,this.userId,n).next(s=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),O.forEach(s,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();const s=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),r=[];return cl(e).ee({range:s},(i,a,o)=>{if(i[0]===this.userId){const c=Ks(i[1]);r.push(c)}else o.done()}).next(()=>{X(r.length===0,56720,{sr:r.map(i=>i.canonicalString())})})})}containsKey(e,n){return xM(e,this.userId,n)}_r(e){return _M(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Bi,lastStreamToken:""})}}function xM(t,e,n){const s=km(e,n.path),r=s[1],i=IDBKeyRange.lowerBound(s);let a=!1;return cl(t).ee({range:i,X:!0},(o,c,u)=>{const[h,f,m]=o;h===e&&f===r&&(a=!0),u.done()}).next(()=>a)}function di(t){return Mt(t,Ts)}function cl(t){return Mt(t,ac)}function _M(t){return Mt(t,ah)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new To(0)}static cr(){return new To(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const s=new To(n.highestTargetId);return n.highestTargetId=s.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>Z.fromTimestamp(new Ee(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,s){return this.lr(e).next(r=>(r.highestListenSequenceNumber=n,s&&(r.lastRemoteSnapshotVersion=s.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.hr(e,r)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(s=>(s.targetCount+=1,this.Tr(n,s),this.hr(e,s))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Jo(e).delete(n.targetId)).next(()=>this.lr(e)).next(s=>(X(s.targetCount>0,8065),s.targetCount-=1,this.hr(e,s)))}removeTargets(e,n,s){let r=0;const i=[];return Jo(e).ee((a,o)=>{const c=Yu(o);c.sequenceNumber<=n&&s.get(c.targetId)===null&&(r++,i.push(this.removeTargetData(e,c)))}).next(()=>O.waitFor(i)).next(()=>r)}forEachTarget(e,n){return Jo(e).ee((s,r)=>{const i=Yu(r);n(i)})}lr(e){return CN(e).get(Vp).next(n=>(X(n!==null,2888),n))}hr(e,n){return CN(e).put(Vp,n)}Pr(e,n){return Jo(e).put(mM(this.serializer,n))}Tr(e,n){let s=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,s=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const s=vo(n),r=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let i=null;return Jo(e).ee({range:r,index:uD},(a,o,c)=>{const u=Yu(o);Jh(n,u.target)&&(i=u,c.done())}).next(()=>i)}addMatchingKeys(e,n,s){const r=[],i=bi(e);return n.forEach(a=>{const o=cn(a.path);r.push(i.put({targetId:s,path:o})),r.push(this.referenceDelegate.addReference(e,s,a))}),O.waitFor(r)}removeMatchingKeys(e,n,s){const r=bi(e);return O.forEach(n,i=>{const a=cn(i.path);return O.waitFor([r.delete([s,a]),this.referenceDelegate.removeReference(e,s,i)])})}removeMatchingKeysForTargetId(e,n){const s=bi(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return s.delete(r)}getMatchingKeysForTargetId(e,n){const s=IDBKeyRange.bound([n],[n+1],!1,!0),r=bi(e);let i=oe();return r.ee({range:s,X:!0},(a,o,c)=>{const u=Ks(a[1]),h=new G(u);i=i.add(h)}).next(()=>i)}containsKey(e,n){const s=cn(n.path),r=IDBKeyRange.bound([s],[Jk(s)],!1,!0);let i=0;return bi(e).ee({index:Aw,X:!0,range:r},([a,o],c,u)=>{a!==0&&(i++,u.done())}).next(()=>i>0)}At(e,n){return Jo(e).get(n).next(s=>s?Yu(s):null)}}function Jo(t){return Mt(t,oc)}function CN(t){return Mt(t,io)}function bi(t){return Mt(t,lc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN="LruGarbageCollector",x$=1048576;function PN([t,e],[n,s]){const r=re(t,n);return r===0?re(e,s):r}class _${constructor(e){this.Ir=e,this.buffer=new Re(PN),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();PN(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bM{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){B(jN,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){pa(n)?B(jN,"Ignoring IndexedDB error during garbage collection: ",n):await ma(n)}await this.Vr(3e5)})}}class b${constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return O.resolve(Nn.ce);const s=new _$(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(RN)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RN):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,a,o,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,a=Date.now(),this.nthSequenceNumber(e,r))).next(f=>(s=f,o=Date.now(),this.removeTargets(e,s,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(f=>(u=Date.now(),il()<=de.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${r} in `+(o-a)+`ms
	Removed ${i} targets in `+(c-o)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:f})))}}function wM(t,e){return new b$(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(e,n){this.db=e,this.garbageCollector=wM(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(s,r)=>n(r))}addReference(e,n,s){return Xf(e,s)}removeReference(e,n,s){return Xf(e,s)}removeTargets(e,n,s){return this.db.getTargetCache().removeTargets(e,n,s)}markPotentiallyOrphaned(e,n){return Xf(e,n)}br(e,n){return function(r,i){let a=!1;return _M(r).te(o=>xM(r,o,i).next(c=>(c&&(a=!0),O.resolve(!c)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Sr(e,(a,o)=>{if(o<=n){const c=this.br(e,a).next(u=>{if(!u)return i++,s.getEntry(e,a).next(()=>(s.removeEntry(a,Z.min()),bi(e).delete(function(f){return[0,cn(f.path)]}(a))))});r.push(c)}}).next(()=>O.waitFor(r)).next(()=>s.apply(e)).next(()=>i)}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,n){return Xf(e,n)}Sr(e,n){const s=bi(e);let r,i=Nn.ce;return s.ee({index:Aw},([a,o],{path:c,sequenceNumber:u})=>{a===0?(i!==Nn.ce&&n(new G(Ks(r)),i),i=u,r=c):i=Nn.ce}).next(()=>{i!==Nn.ce&&n(new G(Ks(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Xf(t,e){return bi(t).put(function(s,r){return{targetId:0,path:cn(s.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(){this.changes=new Xr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ge.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?O.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,s){return Ra(e).put(s)}removeEntry(e,n,s){return Ra(e).delete(function(i,a){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Fp(a),o[o.length-1]]}(n,s))}updateMetadata(e,n){return this.getMetadata(e).next(s=>(s.byteSize+=n,this.Dr(e,s)))}getEntry(e,n){let s=Ge.newInvalidDocument(n);return Ra(e).ee({index:Dm,range:IDBKeyRange.only(ju(n))},(r,i)=>{s=this.Cr(n,i)}).next(()=>s)}vr(e,n){let s={size:0,document:Ge.newInvalidDocument(n)};return Ra(e).ee({index:Dm,range:IDBKeyRange.only(ju(n))},(r,i)=>{s={document:this.Cr(n,i),size:qp(i)}}).next(()=>s)}getEntries(e,n){let s=Rn();return this.Fr(e,n,(r,i)=>{const a=this.Cr(r,i);s=s.insert(r,a)}).next(()=>s)}Mr(e,n){let s=Rn(),r=new Fe(G.comparator);return this.Fr(e,n,(i,a)=>{const o=this.Cr(i,a);s=s.insert(i,o),r=r.insert(i,qp(a))}).next(()=>({documents:s,Or:r}))}Fr(e,n,s){if(n.isEmpty())return O.resolve();let r=new Re(MN);n.forEach(c=>r=r.add(c));const i=IDBKeyRange.bound(ju(r.first()),ju(r.last())),a=r.getIterator();let o=a.getNext();return Ra(e).ee({index:Dm,range:i},(c,u,h)=>{const f=G.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&MN(o,f)<0;)s(o,null),o=a.getNext();o&&o.isEqual(f)&&(s(o,u),o=a.hasNext()?a.getNext():null),o?h.j(ju(o)):h.done()}).next(()=>{for(;o;)s(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,s,r,i){const a=n.path,o=[a.popLast().toArray(),a.lastSegment(),Fp(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],c=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ra(e).J(IDBKeyRange.bound(o,c,!0)).next(u=>{i==null||i.incrementDocumentReadCount(u.length);let h=Rn();for(const f of u){const m=this.Cr(G.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(ef(n,m)||r.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,s,r){let i=Rn();const a=DN(n,s),o=DN(n,Jn.max());return Ra(e).ee({index:cD,range:IDBKeyRange.bound(a,o,!0)},(c,u,h)=>{const f=this.Cr(G.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(f.key,f),i.size===r&&h.done()}).next(()=>i)}newChangeBuffer(e){return new E$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return kN(e).get(Ox).next(n=>(X(!!n,20021),n))}Dr(e,n){return kN(e).put(Ox,n)}Cr(e,n){if(n){const s=l$(this.serializer,n);if(!(s.isNoDocument()&&s.version.isEqual(Z.min())))return s}return Ge.newInvalidDocument(e)}}function EM(t){return new T$(t)}class E$ extends TM{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Xr(s=>s.toString(),(s,r)=>s.isEqual(r))}applyChanges(e){const n=[];let s=0,r=new Re((i,a)=>re(i.canonicalString(),a.canonicalString()));return this.changes.forEach((i,a)=>{const o=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,o.readTime)),a.isValidDocument()){const c=gN(this.Nr.serializer,a);r=r.add(i.path.popLast());const u=qp(c);s+=u-o.size,n.push(this.Nr.addEntry(e,i,c))}else if(s-=o.size,this.trackRemovals){const c=gN(this.Nr.serializer,a.convertToNoDocument(Z.min()));n.push(this.Nr.addEntry(e,i,c))}}),r.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,s)),O.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(s=>(this.Br.set(n,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:s,Or:r})=>(r.forEach((i,a)=>{this.Br.set(i,{size:a,readTime:s.get(i).readTime})}),s))}}function kN(t){return Mt(t,oh)}function Ra(t){return Mt(t,Op)}function ju(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function DN(t,e){const n=e.documentKey.path.toArray();return[t,Fp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function MN(t,e){const n=t.path.toArray(),s=e.path.toArray();let r=0;for(let i=0;i<n.length-2&&i<s.length-2;++i)if(r=re(n[i],s[i]),r)return r;return r=re(n.length,s.length),r||(r=re(n[n.length-2],s[s.length-2]),r||re(n[n.length-1],s[s.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Ad(s.mutation,r,In.empty(),Ee.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,oe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=oe()){const r=Ws();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let a=Ku();return i.forEach((o,c)=>{a=a.insert(o,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const s=Ws();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,oe()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,s,r){let i=Rn();const a=Sd(),o=function(){return Sd()}();return n.forEach((c,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof Jr)?i=i.insert(u.key,u):h!==void 0?(a.set(u.key,h.mutation.getFieldMask()),Ad(h.mutation,u,h.mutation.getFieldMask(),Ee.now())):a.set(u.key,In.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>a.set(u,h)),n.forEach((u,h)=>o.set(u,new S$(h,a.get(u)??null))),o))}recalculateAndSaveOverlays(e,n){const s=Sd();let r=new Fe((a,o)=>a-o),i=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=s.get(c)||In.empty();h=o.applyToLocalView(u,h),s.set(c,h);const f=(r.get(o.batchId)||oe()).add(c);r=r.insert(o.batchId,f)})}).next(()=>{const a=[],o=r.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,h=c.value,f=FD();h.forEach(m=>{if(!i.has(m)){const p=WD(n.get(m),s.get(m));p!==null&&f.set(m,p),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,f))}return O.waitFor(a)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(a){return G.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):O.resolve(Ws());let o=ic,c=i;return a.next(u=>O.forEach(u,(h,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),i.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,oe())).next(h=>({batchId:o,changes:zD(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(s=>{let r=Ku();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let a=Ku();return this.indexManager.getCollectionParents(e,i).next(o=>O.forEach(o,c=>{const u=function(f,m){return new Qr(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next(h=>{h.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(a=>{i.forEach((c,u)=>{const h=u.getKey();a.get(h)===null&&(a=a.insert(h,Ge.newInvalidDocument(h)))});let o=Ku();return a.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Ad(h.mutation,u,In.empty(),Ee.now()),ef(n,u)&&(o=o.insert(c,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return O.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:vt(r.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:Bw(r.bundledQuery),readTime:vt(r.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N${constructor(){this.overlays=new Fe(G.comparator),this.qr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ws();return O.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),O.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),O.resolve()}getOverlaysForCollection(e,n,s){const r=Ws(),i=n.length+1,a=new G(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return O.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Fe((u,h)=>u-h);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=Ws(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const o=Ws(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>o.set(u,h)),!(o.size()>=r)););return O.resolve(o)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(s.key,new Uw(n,s));let i=this.qr.get(n);i===void 0&&(i=oe(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(){this.Qr=new Re(Vt.$r),this.Ur=new Re(Vt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Vt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new Vt(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new G(new fe([])),s=new Vt(n,e),r=new Vt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new G(new fe([])),s=new Vt(n,e),r=new Vt(n,e+1);let i=oe();return this.Ur.forEachInRange([s,r],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Vt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Vt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return G.comparator(e.key,n.key)||re(e.Yr,n.Yr)}static Kr(e,n){return re(e.Yr,n.Yr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Re(Vt.$r)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Vw(i,n,s,r);this.mutationQueue.push(a);for(const o of r)this.Zr=this.Zr.add(new Vt(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return O.resolve(a)}lookupMutationBatch(e,n){return O.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Bi:this.tr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Vt(n,0),r=new Vt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],a=>{const o=this.Xr(a.Yr);i.push(o)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Re(re);return n.forEach(r=>{const i=new Vt(r,0),a=new Vt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],o=>{s=s.add(o.Yr)})}),O.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;G.isDocumentKey(i)||(i=i.child(""));const a=new Vt(new G(i),0);let o=new Re(re);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(o=o.add(c.Yr)),!0)},a),O.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){X(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return O.forEach(n.mutations,r=>{const i=new Vt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new Vt(n,0),r=this.Zr.firstAfterOrEqual(s);return O.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(e){this.ri=e,this.docs=function(){return new Fe(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return O.resolve(s?s.document.mutableCopy():Ge.newInvalidDocument(n))}getEntries(e,n){let s=Rn();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Ge.newInvalidDocument(r))}),O.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Rn();const a=n.path,o=new G(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||Ew(sD(h),s)<=0||(r.has(h.key)||ef(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,s,r){Q(9500)}ii(e,n){return O.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new j$(this)}getSize(e){return O.resolve(this.size)}}class j$ extends TM{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),O.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(e){this.persistence=e,this.si=new Xr(n=>vo(n),Jh),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new Gw,this.targetCount=0,this.ai=To.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),O.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new To(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Pr(n),O.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=n&&s.get(o.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),O.waitFor(i).next(()=>r)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return O.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),O.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(a=>{i.push(r.markPotentiallyOrphaned(e,a))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return O.resolve(s)}containsKey(e,n){return O.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,n){this.ui={},this.overlays={},this.ci=new Nn(0),this.li=!1,this.li=!0,this.hi=new I$,this.referenceDelegate=e(this),this.Pi=new P$(this),this.indexManager=new g$,this.remoteDocumentCache=function(r){return new C$(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new fM(n),this.Ii=new A$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new N$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new R$(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){B("MemoryPersistence","Starting transaction:",e);const r=new k$(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return O.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class k$ extends iD{constructor(e){super(),this.currentSequenceNumber=e}}class ry{constructor(e){this.persistence=e,this.Ri=new Gw,this.Vi=null}static mi(e){return new ry(e)}get fi(){if(this.Vi)return this.Vi;throw Q(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),O.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.fi,s=>{const r=G.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,Z.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Hp{constructor(e,n){this.persistence=e,this.pi=new Xr(s=>cn(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=wM(this,n)}static mi(e,n){return new Hp(e,n)}Ei(){}di(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return O.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?O.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(o=>{o||(s++,i.removeEntry(a,Z.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),O.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Om(e.data.value)),n}br(e,n,s){return O.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return O.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(e){this.serializer=e}k(e,n,s,r){const i=new Kg("createOrUpgrade",n);s<1&&r>=1&&(function(c){c.createObjectStore(Xh)}(e),function(c){c.createObjectStore(ah,{keyPath:QH}),c.createObjectStore(Ts,{keyPath:$A,autoIncrement:!0}).createIndex(Wa,KA,{unique:!0}),c.createObjectStore(ac)}(e),ON(e),function(c){c.createObjectStore(La)}(e));let a=O.resolve();return s<3&&r>=3&&(s!==0&&(function(c){c.deleteObjectStore(lc),c.deleteObjectStore(oc),c.deleteObjectStore(io)}(e),ON(e)),a=a.next(()=>function(c){const u=c.store(io),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Z.min().toTimestamp(),targetCount:0};return u.put(Vp,h)}(i))),s<4&&r>=4&&(s!==0&&(a=a.next(()=>function(c,u){return u.store(Ts).J().next(f=>{c.deleteObjectStore(Ts),c.createObjectStore(Ts,{keyPath:$A,autoIncrement:!0}).createIndex(Wa,KA,{unique:!0});const m=u.store(Ts),p=f.map(_=>m.put(_));return O.waitFor(p)})}(e,i))),a=a.next(()=>{(function(c){c.createObjectStore(cc,{keyPath:iG})})(e)})),s<5&&r>=5&&(a=a.next(()=>this.yi(i))),s<6&&r>=6&&(a=a.next(()=>(function(c){c.createObjectStore(oh)}(e),this.wi(i)))),s<7&&r>=7&&(a=a.next(()=>this.Si(i))),s<8&&r>=8&&(a=a.next(()=>this.bi(e,i))),s<9&&r>=9&&(a=a.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),s<10&&r>=10&&(a=a.next(()=>this.Di(i))),s<11&&r>=11&&(a=a.next(()=>{(function(c){c.createObjectStore(Wg,{keyPath:aG})})(e),function(c){c.createObjectStore(Yg,{keyPath:oG})}(e)})),s<12&&r>=12&&(a=a.next(()=>{(function(c){const u=c.createObjectStore(Qg,{keyPath:mG});u.createIndex(Lx,pG,{unique:!1}),u.createIndex(fD,gG,{unique:!1})})(e)})),s<13&&r>=13&&(a=a.next(()=>function(c){const u=c.createObjectStore(Op,{keyPath:JH});u.createIndex(Dm,ZH),u.createIndex(cD,eG)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(La))),s<14&&r>=14&&(a=a.next(()=>this.Fi(e,i))),s<15&&r>=15&&(a=a.next(()=>function(c){c.createObjectStore(Nw,{keyPath:lG,autoIncrement:!0}).createIndex(Vx,cG,{unique:!1}),c.createObjectStore(wd,{keyPath:uG}).createIndex(dD,dG,{unique:!1}),c.createObjectStore(Td,{keyPath:hG}).createIndex(hD,fG,{unique:!1})}(e))),s<16&&r>=16&&(a=a.next(()=>{n.objectStore(wd).clear()}).next(()=>{n.objectStore(Td).clear()})),s<17&&r>=17&&(a=a.next(()=>{(function(c){c.createObjectStore(Iw,{keyPath:yG})})(e)})),s<18&&r>=18&&jP()&&(a=a.next(()=>{n.objectStore(wd).clear()}).next(()=>{n.objectStore(Td).clear()})),a}wi(e){let n=0;return e.store(La).ee((s,r)=>{n+=qp(r)}).next(()=>{const s={byteSize:n};return e.store(oh).put(Ox,s)})}yi(e){const n=e.store(ah),s=e.store(Ts);return n.J().next(r=>O.forEach(r,i=>{const a=IDBKeyRange.bound([i.userId,Bi],[i.userId,i.lastAcknowledgedBatchId]);return s.J(Wa,a).next(o=>O.forEach(o,c=>{X(c.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=qa(this.serializer,c);return vM(e,i.userId,u).next(()=>{})}))}))}Si(e){const n=e.store(lc),s=e.store(La);return e.store(io).get(Vp).next(r=>{const i=[];return s.ee((a,o)=>{const c=new fe(a),u=function(f){return[0,cn(f)]}(c);i.push(n.get(u).next(h=>h?O.resolve():(f=>n.put({targetId:0,path:cn(f),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>O.waitFor(i))})}bi(e,n){e.createObjectStore(lh,{keyPath:rG});const s=n.store(lh),r=new Hw,i=a=>{if(r.add(a)){const o=a.lastSegment(),c=a.popLast();return s.put({collectionId:o,parent:cn(c)})}};return n.store(La).ee({X:!0},(a,o)=>{const c=new fe(a);return i(c.popLast())}).next(()=>n.store(ac).ee({X:!0},([a,o,c],u)=>{const h=Ks(o);return i(h.popLast())}))}Di(e){const n=e.store(oc);return n.ee((s,r)=>{const i=Yu(r),a=mM(this.serializer,i);return n.put(a)})}Ci(e,n){const s=n.store(La),r=[];return s.ee((i,a)=>{const o=n.store(Op),c=function(f){return f.document?new G(fe.fromString(f.document.name).popFirst(5)):f.noDocument?G.fromSegments(f.noDocument.path):f.unknownDocument?G.fromSegments(f.unknownDocument.path):Q(36783)}(a).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(o.put(u))}).next(()=>O.waitFor(r))}Fi(e,n){const s=n.store(Ts),r=EM(this.serializer),i=new $w(ry.mi,this.serializer.yt);return s.J().next(a=>{const o=new Map;return a.forEach(c=>{let u=o.get(c.userId)??oe();qa(this.serializer,c).keys().forEach(h=>u=u.add(h)),o.set(c.userId,u)}),O.forEach(o,(c,u)=>{const h=new Ut(u),f=ny.wt(this.serializer,h),m=i.getIndexManager(h),p=sy.wt(h,this.serializer,m,i.referenceDelegate);return new SM(r,p,f,m).recalculateAndSaveOverlaysForDocumentKeys(new Ux(n,Nn.ce),c).next()})})}}function ON(t){t.createObjectStore(lc,{keyPath:nG}).createIndex(Aw,sG,{unique:!0}),t.createObjectStore(oc,{keyPath:"targetId"}).createIndex(uD,tG,{unique:!0}),t.createObjectStore(io)}const hi="IndexedDbPersistence",X0=18e5,J0=5e3,Z0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",AM="main";class Kw{constructor(e,n,s,r,i,a,o,c,u,h,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=s,this.Mi=i,this.window=a,this.document=o,this.xi=u,this.Oi=h,this.Ni=f,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!Kw.v())throw new F(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new w$(this,r),this.$i=n+AM,this.serializer=new fM(c),this.Ui=new Qs(this.$i,this.Ni,new D$(this.serializer)),this.hi=new u$,this.Pi=new v$(this.referenceDelegate,this.serializer),this.remoteDocumentCache=EM(this.serializer),this.Ii=new c$,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&gt(hi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(L.FAILED_PRECONDITION,Z0);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Nn(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Jf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(pa(e))return B(hi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return B(hi,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Pu(e).get(Ko).next(n=>O.resolve(this.es(n)))}ts(e){return Jf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,X0)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const s=Mt(n,cc);return s.J().next(r=>{const i=this.ss(r,X0),a=r.filter(o=>i.indexOf(o)===-1);return O.forEach(a,o=>s.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?O.resolve(!0):Pu(e).get(Ko).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,J0)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new F(L.FAILED_PRECONDITION,Z0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Jf(e).J().next(s=>this.ss(s,J0).find(r=>{if(this.clientId!==r.clientId){const i=!this.networkEnabled&&r.networkEnabled,a=!this.inForeground&&r.inForeground,o=this.networkEnabled===r.networkEnabled;if(i||a&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&B(hi,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Xh,cc],e=>{const n=new Ux(e,Nn.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(s=>this.rs(s.updateTimeMs,n)&&!this.us(s.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Jf(e).J().next(n=>this.ss(n,X0).map(s=>s.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return sy.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new y$(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return ny.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,s){B(hi,"Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",i=function(c){return c===18?_G:c===17?yD:c===16?xG:c===15?Rw:c===14?gD:c===13?pD:c===12?vG:c===11?mD:void Q(60245)}(this.Ni);let a;return this.Ui.runTransaction(e,r,i,o=>(a=new Ux(o,this.ci?this.ci.next():Nn.ce),n==="readwrite-primary"?this.Hi(a).next(c=>!!c||this.Yi(a)).next(c=>{if(!c)throw gt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new F(L.FAILED_PRECONDITION,rD);return s(a)}).next(c=>this.Xi(a).next(()=>c)):this.Is(a).next(()=>s(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Is(e){return Pu(e).get(Ko).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,J0)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new F(L.FAILED_PRECONDITION,Z0)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Pu(e).put(Ko,n)}static v(){return Qs.v()}Zi(e){const n=Pu(e);return n.get(Ko).next(s=>this.es(s)?(B(hi,"Releasing primary lease."),n.delete(Ko)):O.resolve())}rs(e,n){const s=Date.now();return!(e<s-n)&&(!(e>s)||(gt(`Detected an update time that is in the future: ${e} > ${s}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;CP()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const s=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return B(hi,`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return gt(hi,"Failed to get zombied client id.",s),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){gt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Pu(t){return Mt(t,Xh)}function Jf(t){return Mt(t,cc)}function Ww(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=oe(),r=oe();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Yw(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return CP()?8:aD(rt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new M$;return this.Ss(e,n,a).next(o=>{if(i.result=o,this.Vs)return this.bs(e,n,a,o.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(il()<=de.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",al(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),O.resolve()):(il()<=de.DEBUG&&B("QueryEngine","Query:",al(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(il()<=de.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",al(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xn(n))):O.resolve())}ys(e,n){if(aN(n))return O.resolve(null);let s=xn(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=zp(n,null,"F"),s=xn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const a=oe(...i);return this.ps.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,s).next(c=>{const u=this.Ds(n,o);return this.Cs(n,u,a,c.readTime)?this.ys(e,zp(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,s,r){return aN(n)||r.isEqual(Z.min())?O.resolve(null):this.ps.getDocuments(e,s).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,s,r)?O.resolve(null):(il()<=de.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),al(n)),this.vs(e,a,n,nD(r,ic)).next(o=>o))})}Ds(e,n){let s=new Re(LD(e));return n.forEach((r,i)=>{ef(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return il()<=de.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",al(n)),this.ps.getDocumentsMatchingQuery(e,n,Jn.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="LocalStore",O$=3e8;class V${constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Fe(re),this.xs=new Xr(i=>vo(i),Jh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function IM(t,e,n,s){return new V$(t,e,n,s)}async function RM(t,e){const n=K(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const a=[],o=[];let c=oe();for(const u of r){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(s,c).next(u=>({Ls:u,removedBatchIds:a,addedBatchIds:o}))})})}function L$(t,e){const n=K(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,c,u,h){const f=u.batch,m=f.keys();let p=O.resolve();return m.forEach(_=>{p=p.next(()=>h.getEntry(c,_)).next(w=>{const T=u.docVersions.get(_);X(T!==null,48541),w.version.compareTo(T)<0&&(f.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),h.addEntry(w)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(c,f))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let c=oe();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function CM(t){const e=K(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function U$(t,e){const n=K(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const o=[];e.targetChanges.forEach((h,f)=>{const m=r.get(f);if(!m)return;o.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let p=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(dt.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(h.resumeToken,s)),r=r.insert(f,p),function(w,T,x){return w.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=O$?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,p,h)&&o.push(n.Pi.updateTargetData(i,p))});let c=Rn(),u=oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),o.push(jM(i,a,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!s.isEqual(Z.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));o.push(h)}return O.waitFor(o).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=r,i))}function jM(t,e,n){let s=oe(),r=oe();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let a=Rn();return n.forEach((o,c)=>{const u=i.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(o)),c.isNoDocument()&&c.version.isEqual(Z.min())?(e.removeEntry(o,c.readTime),a=a.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(o,c)):B(Qw,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{ks:a,qs:r}})}function z$(t,e){const n=K(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Bi),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function gc(t,e){const n=K(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,O.resolve(r)):n.Pi.allocateTargetId(s).next(a=>(r=new br(e,a,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function yc(t,e,n){const s=K(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,a=>s.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!pa(a))throw a;B(Qw,`Failed to update sequence numbers for target ${e}: ${a}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function Gp(t,e,n){const s=K(t);let r=Z.min(),i=oe();return s.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,h){const f=K(c),m=f.xs.get(h);return m!==void 0?O.resolve(f.Ms.get(m)):f.Pi.getTargetData(u,h)}(s,a,xn(e)).next(o=>{if(o)return r=o.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(a,o.targetId).next(c=>{i=c})}).next(()=>s.Fs.getDocumentsMatchingQuery(a,e,n?r:Z.min(),n?i:oe())).next(o=>(DM(s,VD(e),o),{documents:o,Qs:i})))}function PM(t,e){const n=K(t),s=K(n.Pi),r=n.Ms.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",i=>s.At(i,e).next(a=>a?a.target:null))}function kM(t,e){const n=K(t),s=n.Os.get(e)||Z.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.Ns.getAllFromCollectionGroup(r,e,nD(s,ic),Number.MAX_SAFE_INTEGER)).then(r=>(DM(n,e,r),r))}function DM(t,e,n){let s=t.Os.get(e)||Z.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}async function F$(t,e,n,s){const r=K(t);let i=oe(),a=Rn();for(const u of n){const h=e.$s(u.metadata.name);u.document&&(i=i.add(h));const f=e.Us(u);f.setReadTime(e.Ks(u.metadata.readTime)),a=a.insert(h,f)}const o=r.Ns.newChangeBuffer({trackRemovals:!0}),c=await gc(r,function(h){return xn(qc(fe.fromString(`__bundle__/docs/${h}`)))}(s));return r.persistence.runTransaction("Apply bundle documents","readwrite",u=>jM(u,o,a).next(h=>(o.apply(u),h)).next(h=>r.Pi.removeMatchingKeysForTargetId(u,c.targetId).next(()=>r.Pi.addMatchingKeys(u,i,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(u,h.ks,h.qs)).next(()=>h.ks)))}async function B$(t,e,n=oe()){const s=await gc(t,xn(Bw(e.bundledQuery))),r=K(t);return r.persistence.runTransaction("Save named query","readwrite",i=>{const a=vt(e.readTime);if(s.snapshotVersion.compareTo(a)>=0)return r.Ii.saveNamedQuery(i,e);const o=s.withResumeToken(dt.EMPTY_BYTE_STRING,a);return r.Ms=r.Ms.insert(o.targetId,o),r.Pi.updateTargetData(i,o).next(()=>r.Pi.removeMatchingKeysForTargetId(i,s.targetId)).next(()=>r.Pi.addMatchingKeys(i,n,s.targetId)).next(()=>r.Ii.saveNamedQuery(i,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM="firestore_clients";function VN(t,e){return`${MM}_${t}_${e}`}const OM="firestore_mutations";function LN(t,e,n){let s=`${OM}_${t}_${n}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}const VM="firestore_targets";function ev(t,e){return`${VM}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="SharedClientState";class $p{constructor(e,n,s,r){this.user=e,this.batchId=n,this.state=s,this.error=r}static Ws(e,n,s){const r=JSON.parse(s);let i,a=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new F(r.error.code,r.error.message))),a?new $p(e,n,r.state,i):(gt(Vs,`Failed to parse mutation state for ID '${n}': ${s}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nd{constructor(e,n,s){this.targetId=e,this.state=n,this.error=s}static Ws(e,n){const s=JSON.parse(n);let r,i=typeof s=="object"&&["not-current","current","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return i&&s.error&&(i=typeof s.error.message=="string"&&typeof s.error.code=="string",i&&(r=new F(s.error.code,s.error.message))),i?new Nd(e,s.state,r):(gt(Vs,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const s=JSON.parse(n);let r=typeof s=="object"&&s.activeTargetIds instanceof Array,i=Dw();for(let a=0;r&&a<s.activeTargetIds.length;++a)r=oD(s.activeTargetIds[a]),i=i.add(s.activeTargetIds[a]);return r?new Kp(e,i):(gt(Vs,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Xw{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Xw(n.clientId,n.onlineState):(gt(Vs,`Failed to parse online state: ${e}`),null)}}class e_{constructor(){this.activeTargetIds=Dw()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tv{constructor(e,n,s,r,i){this.window=e,this.Mi=n,this.persistenceKey=s,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Fe(re),this.started=!1,this.Xs=[];const a=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=VN(this.persistenceKey,this.Js),this.no=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new e_),this.ro=new RegExp(`^${MM}_${a}_([^_]*)$`),this.io=new RegExp(`^${OM}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${VM}_${a}_(\\d+)$`),this.oo=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this._o=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const s of e){if(s===this.Js)continue;const r=this.getItem(VN(this.persistenceKey,s));if(r){const i=Kp.Ws(s,r);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const s=this.uo(n);s&&this.co(s)}for(const s of this.Xs)this.Ys(s);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((s,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,s){this.ho(e,n,s),this.Po(e)}addLocalQueryTarget(e,n=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ev(this.persistenceKey,e));if(r){const i=Nd.Ws(e,r);i&&(s=i.state)}}return n&&this.To.zs(e),this.ao(),s}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ev(this.persistenceKey,e))}updateQueryState(e,n,s){this.Io(e,n,s)}handleUserChange(e,n,s){n.forEach(r=>{this.Po(r)}),this.currentUser=e,s.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return B(Vs,"READ",e,n),n}setItem(e,n){B(Vs,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){B(Vs,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(B(Vs,"EVENT",n.key,n.newValue),n.key===this.eo)return void gt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const s=this.Ro(n.key);return this.Vo(s,null)}{const s=this.mo(n.key,n.newValue);if(s)return this.Vo(s.clientId,s)}}else if(this.io.test(n.key)){if(n.newValue!==null){const s=this.fo(n.key,n.newValue);if(s)return this.po(s)}}else if(this.so.test(n.key)){if(n.newValue!==null){const s=this.yo(n.key,n.newValue);if(s)return this.wo(s)}}else if(n.key===this.oo){if(n.newValue!==null){const s=this.uo(n.newValue);if(s)return this.co(s)}}else if(n.key===this.no){const s=function(i){let a=Nn.ce;if(i!=null)try{const o=JSON.parse(i);X(typeof o=="number",30636,{So:i}),a=o}catch(o){gt(Vs,"Failed to read sequence number from WebStorage",o)}return a}(n.newValue);s!==Nn.ce&&this.sequenceNumberHandler(s)}else if(n.key===this._o){const s=this.bo(n.newValue);await Promise.all(s.map(r=>this.syncEngine.Do(r)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,s){const r=new $p(this.currentUser,e,n,s),i=LN(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Gs())}Po(e){const n=LN(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,s){const r=ev(this.persistenceKey,e),i=new Nd(e,n,s);this.setItem(r,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const s=this.Ro(e);return Kp.Ws(s,n)}fo(e,n){const s=this.io.exec(e),r=Number(s[1]),i=s[2]!==void 0?s[2]:null;return $p.Ws(new Ut(i),r,n)}yo(e,n){const s=this.so.exec(e),r=Number(s[1]);return Nd.Ws(r,n)}uo(e){return Xw.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);B(Vs,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const s=n?this.Zs.insert(e,n):this.Zs.remove(e),r=this.lo(this.Zs),i=this.lo(s),a=[],o=[];return i.forEach(c=>{r.has(c)||a.push(c)}),r.forEach(c=>{i.has(c)||o.push(c)}),this.syncEngine.Fo(a,o).then(()=>{this.Zs=s})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=Dw();return e.forEach((s,r)=>{n=n.unionWith(r.activeTargetIds)}),n}}class LM{constructor(){this.Mo=new e_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new e_,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q${Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="ConnectivityMonitor";class zN{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){B(UN,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){B(UN,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zf=null;function t_(){return Zf===null?Zf=function(){return 268435456+Math.round(2147483648*Math.random())}():Zf++,"0x"+Zf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="RestConnection",H$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class G${get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===zx?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const a=t_(),o=this.zo(e,n.toUriEncodedString());B(nv,`Sending RPC '${e}' ${a}:`,o,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:u}=new URL(o),h=ha(u);return this.Jo(e,o,c,s,h).then(f=>(B(nv,`Received RPC '${e}' ${a}: `,f),f),f=>{throw rr(nv,`RPC '${e}' ${a} failed with error: `,f,"url: ",o,"request:",s),f})}Ho(e,n,s,r,i,a){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=H$[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class K$ extends G${constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const a=t_();return new Promise((o,c)=>{const u=new Gk;u.setWithCredentials(!0),u.listenOnce($k.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case jm.NO_ERROR:const f=u.getResponseJson();B(tn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),o(f);break;case jm.TIMEOUT:B(tn,`RPC '${e}' ${a} timed out`),c(new F(L.DEADLINE_EXCEEDED,"Request time out"));break;case jm.HTTP_ERROR:const m=u.getStatus();if(B(tn,`RPC '${e}' ${a} failed with status:`,m,"response text:",u.getResponseText()),m>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const _=p==null?void 0:p.error;if(_&&_.status&&_.message){const w=function(x){const v=x.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(v)>=0?v:L.UNKNOWN}(_.status);c(new F(w,_.message))}else c(new F(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new F(L.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{B(tn,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(r);B(tn,`RPC '${e}' ${a} sending request:`,r),u.send(n,"POST",h,s,15)})}T_(e,n,s){const r=t_(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Yk(),o=Wk(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const h=i.join("");B(tn,`Creating RPC '${e}' stream ${r}: ${h}`,c);const f=a.createWebChannel(h,c);this.I_(f);let m=!1,p=!1;const _=new $$({Yo:T=>{p?B(tn,`Not sending because RPC '${e}' stream ${r} is closed:`,T):(m||(B(tn,`Opening RPC '${e}' stream ${r} transport.`),f.open(),m=!0),B(tn,`RPC '${e}' stream ${r} sending:`,T),f.send(T))},Zo:()=>f.close()}),w=(T,x,v)=>{T.listen(x,b=>{try{v(b)}catch(R){setTimeout(()=>{throw R},0)}})};return w(f,$u.EventType.OPEN,()=>{p||(B(tn,`RPC '${e}' stream ${r} transport opened.`),_.o_())}),w(f,$u.EventType.CLOSE,()=>{p||(p=!0,B(tn,`RPC '${e}' stream ${r} transport closed`),_.a_(),this.E_(f))}),w(f,$u.EventType.ERROR,T=>{p||(p=!0,rr(tn,`RPC '${e}' stream ${r} transport errored. Name:`,T.name,"Message:",T.message),_.a_(new F(L.UNAVAILABLE,"The operation could not be completed")))}),w(f,$u.EventType.MESSAGE,T=>{var x;if(!p){const v=T.data[0];X(!!v,16349);const b=v,R=(b==null?void 0:b.error)||((x=b[0])==null?void 0:x.error);if(R){B(tn,`RPC '${e}' stream ${r} received error:`,R);const D=R.status;let M=function(N){const I=bt[N];if(I!==void 0)return XD(I)}(D),A=R.message;M===void 0&&(M=L.INTERNAL,A="Unknown error status: "+D+" with message "+R.message),p=!0,_.a_(new F(M,A)),f.close()}else B(tn,`RPC '${e}' stream ${r} received:`,v),_.u_(v)}}),w(o,Kk.STAT_EVENT,T=>{T.stat===kx.PROXY?B(tn,`RPC '${e}' stream ${r} detected buffering proxy`):T.stat===kx.NOPROXY&&B(tn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(){return typeof window<"u"?window:null}function Fm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(t){return new JG(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&B("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="PersistentStream";class zM{constructor(e,n,s,r,i,a,o,c){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Jw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(gt(n.toString()),gt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new F(L.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return B(FN,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(B(FN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class W$ extends zM{constructor(e,n,s,r,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=t$(this.serializer,e),s=function(i){if(!("targetChange"in i))return Z.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?vt(a.readTime):Z.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Yx(this.serializer),n.addTarget=function(i,a){let o;const c=a.target;if(o=Lp(c)?{documents:oM(i,c)}:{query:lM(i,c).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=tM(i,a.resumeToken);const u=Kx(i,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(Z.min())>0){o.readTime=pc(i,a.snapshotVersion.toTimestamp());const u=Kx(i,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const s=s$(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Yx(this.serializer),n.removeTarget=e,this.q_(n)}}class Y$ extends zM{constructor(e,n,s,r,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return X(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,X(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){X(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=n$(e.writeResults,e.commitTime),s=vt(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Yx(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>mh(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q${}class X$ extends Q${constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new F(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,Wx(n,s),r,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new F(L.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(e,Wx(n,s),r,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new F(L.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class J${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gt(n),this.aa=!1):B("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="RemoteStore";class Z${constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{s.enqueueAndForget(async()=>{ya(this)&&(B(Eo,"Restarting streams for network reachability change."),await async function(c){const u=K(c);u.Ea.add(4),await $c(u),u.Ra.set("Unknown"),u.Ea.delete(4),await af(u)}(this))})}),this.Ra=new J$(s,r)}}async function af(t){if(ya(t))for(const e of t.da)await e(!0)}async function $c(t){for(const e of t.da)await e(!1)}function iy(t,e){const n=K(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),t1(n)?e1(n):Wc(n).O_()&&Zw(n,e))}function vc(t,e){const n=K(t),s=Wc(n);n.Ia.delete(e),s.O_()&&FM(n,e),n.Ia.size===0&&(s.O_()?s.L_():ya(n)&&n.Ra.set("Unknown"))}function Zw(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Wc(t).Y_(e)}function FM(t,e){t.Va.Ue(e),Wc(t).Z_(e)}function e1(t){t.Va=new WG({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Wc(t).start(),t.Ra.ua()}function t1(t){return ya(t)&&!Wc(t).x_()&&t.Ia.size>0}function ya(t){return K(t).Ea.size===0}function BM(t){t.Va=void 0}async function eK(t){t.Ra.set("Online")}async function tK(t){t.Ia.forEach((e,n)=>{Zw(t,e)})}async function nK(t,e){BM(t),t1(t)?(t.Ra.ha(e),e1(t)):t.Ra.set("Unknown")}async function sK(t,e,n){if(t.Ra.set("Online"),e instanceof eM&&e.state===2&&e.cause)try{await async function(r,i){const a=i.cause;for(const o of i.targetIds)r.Ia.has(o)&&(await r.remoteSyncer.rejectListen(o,a),r.Ia.delete(o),r.Va.removeTarget(o))}(t,e)}catch(s){B(Eo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Wp(t,s)}else if(e instanceof Um?t.Va.Ze(e):e instanceof ZD?t.Va.st(e):t.Va.tt(e),!n.isEqual(Z.min()))try{const s=await CM(t.localStore);n.compareTo(s)>=0&&await function(i,a){const o=i.Va.Tt(a);return o.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,a))}}),o.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(dt.EMPTY_BYTE_STRING,h.snapshotVersion)),FM(i,c);const f=new br(h.target,c,u,h.sequenceNumber);Zw(i,f)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){B(Eo,"Failed to raise snapshot:",s),await Wp(t,s)}}async function Wp(t,e,n){if(!pa(e))throw e;t.Ea.add(1),await $c(t),t.Ra.set("Offline"),n||(n=()=>CM(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{B(Eo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await af(t)})}function qM(t,e){return e().catch(n=>Wp(t,n,e))}async function Kc(t){const e=K(t),n=sa(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Bi;for(;rK(e);)try{const r=await z$(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,iK(e,r)}catch(r){await Wp(e,r)}HM(e)&&GM(e)}function rK(t){return ya(t)&&t.Ta.length<10}function iK(t,e){t.Ta.push(e);const n=sa(t);n.O_()&&n.X_&&n.ea(e.mutations)}function HM(t){return ya(t)&&!sa(t).x_()&&t.Ta.length>0}function GM(t){sa(t).start()}async function aK(t){sa(t).ra()}async function oK(t){const e=sa(t);for(const n of t.Ta)e.ea(n.mutations)}async function lK(t,e,n){const s=t.Ta.shift(),r=Lw.from(s,e,n);await qM(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Kc(t)}async function cK(t,e){e&&sa(t).X_&&await async function(s,r){if(function(a){return QD(a)&&a!==L.ABORTED}(r.code)){const i=s.Ta.shift();sa(s).B_(),await qM(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Kc(s)}}(t,e),HM(t)&&GM(t)}async function BN(t,e){const n=K(t);n.asyncQueue.verifyOperationInProgress(),B(Eo,"RemoteStore received new credentials");const s=ya(n);n.Ea.add(3),await $c(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await af(n)}async function n_(t,e){const n=K(t);e?(n.Ea.delete(2),await af(n)):e||(n.Ea.add(2),await $c(n),n.Ra.set("Unknown"))}function Wc(t){return t.ma||(t.ma=function(n,s,r){const i=K(n);return i.sa(),new W$(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:eK.bind(null,t),t_:tK.bind(null,t),r_:nK.bind(null,t),H_:sK.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),t1(t)?e1(t):t.Ra.set("Unknown")):(await t.ma.stop(),BM(t))})),t.ma}function sa(t){return t.fa||(t.fa=function(n,s,r){const i=K(n);return i.sa(),new Y$(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:aK.bind(null,t),r_:cK.bind(null,t),ta:oK.bind(null,t),na:lK.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Kc(t)):(await t.fa.stop(),t.Ta.length>0&&(B(Eo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Jt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const a=Date.now()+s,o=new n1(e,n,a,r,i);return o.start(s),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yc(t,e){if(gt("AsyncQueue",`${e}: ${t}`),pa(t))return new F(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{static emptySet(e){return new zl(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||G.comparator(n.key,s.key):(n,s)=>G.comparator(n.key,s.key),this.keyedMap=Ku(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new zl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(){this.ga=new Fe(G.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Q(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class xc{constructor(e,n,s,r,i,a,o,c,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new xc(e,n,zl.emptySet(n),a,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uK{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class dK{constructor(){this.queries=HN(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=K(n),i=r.queries;r.queries=HN(),i.forEach((a,o)=>{for(const c of o.Sa)c.onError(s)})})(this,new F(L.ABORTED,"Firestore shutting down"))}}function HN(){return new Xr(t=>OD(t),Zh)}async function s1(t,e){const n=K(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new uK,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const o=Yc(a,`Initialization of query '${al(e.query)}' failed`);return void e.onError(o)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&i1(n)}async function r1(t,e){const n=K(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function hK(t,e){const n=K(t);let s=!1;for(const r of e){const i=r.query,a=n.queries.get(i);if(a){for(const o of a.Sa)o.Fa(r)&&(s=!0);a.wa=r}}s&&i1(n)}function fK(t,e,n){const s=K(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function i1(t){t.Ca.forEach(e=>{e.next()})}var s_,GN;(GN=s_||(s_={})).Ma="default",GN.Cache="cache";class a1{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new xc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=xc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==s_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mK{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.serializer=e}$s(e){return Xs(this.serializer,e)}Us(e){return e.metadata.exists?aM(this.serializer,e.document,!1):Ge.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return vt(e)}}class pK{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=$M(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const s=fe.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,s=new $N(this.serializer);for(const r of e)if(r.metadata.queries){const i=s.$s(r.metadata.name);for(const a of r.metadata.queries){const o=(n.get(a)||oe()).add(i);n.set(a,o)}}return n}async ja(e){const n=await F$(e,new $N(this.serializer),this.Wa,this.Ua.id),s=this.za(this.documents);for(const r of this.Ka)await B$(e,r,s.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function $M(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.key=e}}class WM{constructor(e){this.key=e}}class YM{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=oe(),this.mutatedKeys=oe(),this.eu=LD(e),this.tu=new zl(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new qN,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=r,o=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,f)=>{const m=r.get(h),p=ef(this.query,f)?f:null,_=!!m&&this.mutatedKeys.has(m.key),w=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let T=!1;m&&p?m.data.isEqual(p.data)?_!==w&&(s.track({type:3,doc:p}),T=!0):this.su(m,p)||(s.track({type:2,doc:p}),T=!0,(c&&this.eu(p,c)>0||u&&this.eu(p,u)<0)&&(o=!0)):!m&&p?(s.track({type:0,doc:p}),T=!0):m&&!p&&(s.track({type:1,doc:m}),T=!0,(c||u)&&(o=!0)),T&&(p?(a=a.add(p),i=w?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:a,iu:s,Cs:o,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,f)=>function(p,_){const w=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{Rt:T})}};return w(p)-w(_)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(s),r=r??!1;const o=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,u=c!==this.Za;return this.Za=c,a.length!==0||u?{snapshot:new xc(this.query,e.tu,i,a,e.mutatedKeys,c===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qN,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=oe(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new WM(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new KM(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=oe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return xc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const va="SyncEngine";class gK{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class yK{constructor(e){this.key=e,this.hu=!1}}class vK{constructor(e,n,s,r,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Xr(o=>OD(o),Zh),this.Iu=new Map,this.Eu=new Set,this.du=new Fe(G.comparator),this.Au=new Map,this.Ru=new Gw,this.Vu={},this.mu=new Map,this.fu=To.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function xK(t,e,n=!0){const s=ay(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await QM(s,e,n,!0),r}async function _K(t,e){const n=ay(t);await QM(n,e,!0,!1)}async function QM(t,e,n,s){const r=await gc(t.localStore,xn(e)),i=r.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let o;return s&&(o=await o1(t,e,i,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&iy(t.remoteStore,r),o}async function o1(t,e,n,s,r){t.pu=(f,m,p)=>async function(w,T,x,v){let b=T.view.ru(x);b.Cs&&(b=await Gp(w.localStore,T.query,!1).then(({documents:A})=>T.view.ru(A,b)));const R=v&&v.targetChanges.get(T.targetId),D=v&&v.targetMismatches.get(T.targetId)!=null,M=T.view.applyChanges(b,w.isPrimaryClient,R,D);return r_(w,T.targetId,M.au),M.snapshot}(t,f,m,p);const i=await Gp(t.localStore,e,!0),a=new YM(e,i.Qs),o=a.ru(i.documents),c=sf.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=a.applyChanges(o,t.isPrimaryClient,c);r_(t,n,u.au);const h=new gK(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function bK(t,e,n){const s=K(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(a=>!Zh(a,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await yc(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&vc(s.remoteStore,r.targetId),_c(s,r.targetId)}).catch(ma)):(_c(s,r.targetId),await yc(s.localStore,r.targetId,!0))}async function wK(t,e){const n=K(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),vc(n.remoteStore,s.targetId))}async function TK(t,e,n){const s=d1(t);try{const r=await function(a,o){const c=K(a),u=Ee.now(),h=o.reduce((p,_)=>p.add(_.key),oe());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let _=Rn(),w=oe();return c.Ns.getEntries(p,h).next(T=>{_=T,_.forEach((x,v)=>{v.isValidDocument()||(w=w.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,_)).next(T=>{f=T;const x=[];for(const v of o){const b=GG(v,f.get(v.key).overlayedDocument);b!=null&&x.push(new Jr(v.key,b,ND(b.value.mapValue),tt.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,x,o)}).next(T=>{m=T;const x=T.applyToLocalDocumentSet(f,w);return c.documentOverlayCache.saveOverlays(p,T.batchId,x)})}).then(()=>({batchId:m.batchId,changes:zD(f)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(a,o,c){let u=a.Vu[a.currentUser.toKey()];u||(u=new Fe(re)),u=u.insert(o,c),a.Vu[a.currentUser.toKey()]=u}(s,r.batchId,n),await Zr(s,r.changes),await Kc(s.remoteStore)}catch(r){const i=Yc(r,"Failed to persist write");n.reject(i)}}async function XM(t,e){const n=K(t);try{const s=await U$(n.localStore,e);e.targetChanges.forEach((r,i)=>{const a=n.Au.get(i);a&&(X(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?X(a.hu,14607):r.removedDocuments.size>0&&(X(a.hu,42227),a.hu=!1))}),await Zr(n,s,e)}catch(s){await ma(s)}}function KN(t,e,n){const s=K(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,a)=>{const o=a.view.va(e);o.snapshot&&r.push(o.snapshot)}),function(a,o){const c=K(a);c.onlineState=o;let u=!1;c.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(o)&&(u=!0)}),u&&i1(c)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function EK(t,e,n){const s=K(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let a=new Fe(G.comparator);a=a.insert(i,Ge.newNoDocument(i,Z.min()));const o=oe().add(i),c=new nf(Z.min(),new Map,new Fe(re),a,o);await XM(s,c),s.du=s.du.remove(i),s.Au.delete(e),u1(s)}else await yc(s.localStore,e,!1).then(()=>_c(s,e,n)).catch(ma)}async function SK(t,e){const n=K(t),s=e.batch.batchId;try{const r=await L$(n.localStore,e);c1(n,s,null),l1(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Zr(n,r)}catch(r){await ma(r)}}async function AK(t,e,n){const s=K(t);try{const r=await function(a,o){const c=K(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,o).next(f=>(X(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(s.localStore,e);c1(s,e,n),l1(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Zr(s,r)}catch(r){await ma(r)}}async function NK(t,e){const n=K(t);ya(n.remoteStore)||B(va,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=await function(a){const o=K(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>o.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(s===Bi)return void e.resolve();const r=n.mu.get(s)||[];r.push(e),n.mu.set(s,r)}catch(s){const r=Yc(s,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function l1(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function c1(t,e,n){const s=K(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function _c(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||JM(t,s)})}function JM(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(vc(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),u1(t))}function r_(t,e,n){for(const s of n)s instanceof KM?(t.Ru.addReference(s.key,e),IK(t,s)):s instanceof WM?(B(va,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||JM(t,s.key)):Q(19791,{wu:s})}function IK(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(B(va,"New document in limbo: "+n),t.Eu.add(s),u1(t))}function u1(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new G(fe.fromString(e)),s=t.fu.next();t.Au.set(s,new yK(n)),t.du=t.du.insert(n,s),iy(t.remoteStore,new br(xn(qc(n.path)),s,"TargetPurposeLimboResolution",Nn.ce))}}async function Zr(t,e,n){const s=K(t),r=[],i=[],a=[];s.Tu.isEmpty()||(s.Tu.forEach((o,c)=>{a.push(s.pu(c,e,n).then(u=>{var h;if((u||n)&&s.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;s.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){r.push(u);const f=Yw.As(c.targetId,u);i.push(f)}}))}),await Promise.all(a),s.Pu.H_(r),await async function(c,u){const h=K(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>O.forEach(u,m=>O.forEach(m.Es,p=>h.persistence.referenceDelegate.addReference(f,m.targetId,p)).next(()=>O.forEach(m.ds,p=>h.persistence.referenceDelegate.removeReference(f,m.targetId,p)))))}catch(f){if(!pa(f))throw f;B(Qw,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const p=h.Ms.get(m),_=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(m,w)}}}(s.localStore,i))}async function RK(t,e){const n=K(t);if(!n.currentUser.isEqual(e)){B(va,"User change. New user:",e.toKey());const s=await RM(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(o=>{o.forEach(c=>{c.reject(new F(L.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Zr(n,s.Ls)}}function CK(t,e){const n=K(t),s=n.Au.get(e);if(s&&s.hu)return oe().add(s.key);{let r=oe();const i=n.Iu.get(e);if(!i)return r;for(const a of i){const o=n.Tu.get(a);r=r.unionWith(o.view.nu)}return r}}async function jK(t,e){const n=K(t),s=await Gp(n.localStore,e.query,!0),r=e.view.cu(s);return n.isPrimaryClient&&r_(n,e.targetId,r.au),r}async function PK(t,e){const n=K(t);return kM(n.localStore,e).then(s=>Zr(n,s))}async function kK(t,e,n,s){const r=K(t),i=await function(o,c){const u=K(o),h=K(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>h.er(f,c).next(m=>m?u.localDocuments.getDocuments(f,m):O.resolve(null)))}(r.localStore,e);i!==null?(n==="pending"?await Kc(r.remoteStore):n==="acknowledged"||n==="rejected"?(c1(r,e,s||null),l1(r,e),function(o,c){K(K(o).mutationQueue).ir(c)}(r.localStore,e)):Q(6720,"Unknown batchState",{Su:n}),await Zr(r,i)):B(va,"Cannot apply mutation batch with id: "+e)}async function DK(t,e){const n=K(t);if(ay(n),d1(n),e===!0&&n.gu!==!0){const s=n.sharedClientState.getAllActiveQueryTargets(),r=await WN(n,s.toArray());n.gu=!0,await n_(n.remoteStore,!0);for(const i of r)iy(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const s=[];let r=Promise.resolve();n.Iu.forEach((i,a)=>{n.sharedClientState.isLocalQueryTarget(a)?s.push(a):r=r.then(()=>(_c(n,a),yc(n.localStore,a,!0))),vc(n.remoteStore,a)}),await r,await WN(n,s),function(a){const o=K(a);o.Au.forEach((c,u)=>{vc(o.remoteStore,u)}),o.Ru.Jr(),o.Au=new Map,o.du=new Fe(G.comparator)}(n),n.gu=!1,await n_(n.remoteStore,!1)}}async function WN(t,e,n){const s=K(t),r=[],i=[];for(const a of e){let o;const c=s.Iu.get(a);if(c&&c.length!==0){o=await gc(s.localStore,xn(c[0]));for(const u of c){const h=s.Tu.get(u),f=await jK(s,h);f.snapshot&&i.push(f.snapshot)}}else{const u=await PM(s.localStore,a);o=await gc(s.localStore,u),await o1(s,ZM(u),a,!1,o.resumeToken)}r.push(o)}return s.Pu.H_(i),r}function ZM(t){return MD(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function MK(t){return function(n){return K(K(n).persistence).Ts()}(K(t).localStore)}async function OK(t,e,n,s){const r=K(t);if(r.gu)return void B(va,"Ignoring unexpected query state notification.");const i=r.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const a=await kM(r.localStore,VD(i[0])),o=nf.createSynthesizedRemoteEventForCurrentChange(e,n==="current",dt.EMPTY_BYTE_STRING);await Zr(r,a,o);break}case"rejected":await yc(r.localStore,e,!0),_c(r,e,s);break;default:Q(64155,n)}}async function VK(t,e,n){const s=ay(t);if(s.gu){for(const r of e){if(s.Iu.has(r)&&s.sharedClientState.isActiveQueryTarget(r)){B(va,"Adding an already active target "+r);continue}const i=await PM(s.localStore,r),a=await gc(s.localStore,i);await o1(s,ZM(i),a.targetId,!1,a.resumeToken),iy(s.remoteStore,a)}for(const r of n)s.Iu.has(r)&&await yc(s.localStore,r,!1).then(()=>{vc(s.remoteStore,r),_c(s,r)}).catch(ma)}}function ay(t){const e=K(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=XM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EK.bind(null,e),e.Pu.H_=hK.bind(null,e.eventManager),e.Pu.yu=fK.bind(null,e.eventManager),e}function d1(t){const e=K(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AK.bind(null,e),e}function LK(t,e,n){const s=K(t);(async function(i,a,o){try{const c=await a.getMetadata();if(await function(p,_){const w=K(p),T=vt(_.createTime);return w.persistence.runTransaction("hasNewerBundle","readonly",x=>w.Ii.getBundleMetadata(x,_.id)).then(x=>!!x&&x.createTime.compareTo(T)>=0)}(i.localStore,c))return await a.close(),o._completeWith(function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}}(c)),Promise.resolve(new Set);o._updateProgress($M(c));const u=new pK(c,a.serializer);let h=await a.bu();for(;h;){const m=await u.Ga(h);m&&o._updateProgress(m),h=await a.bu()}const f=await u.ja(i.localStore);return await Zr(i,f.Ha,void 0),await function(p,_){const w=K(p);return w.persistence.runTransaction("Save bundle","readwrite",T=>w.Ii.saveBundleMetadata(T,_))}(i.localStore,c),o._completeWith(f.progress),Promise.resolve(f.Ja)}catch(c){return rr(va,`Loading bundle failed with ${c}`),o._failWith(c),Promise.resolve(new Set)}})(s,e,n).then(r=>{s.sharedClientState.notifyBundleLoaded(r)})}class ph{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return IM(this.persistence,new NM,e.initialUser,this.serializer)}Cu(e){return new $w(ry.mi,this.serializer)}Du(e){return new LM}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ph.provider={build:()=>new ph};class UK extends ph{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){X(this.persistence.referenceDelegate instanceof Hp,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new bM(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new $w(s=>Hp.mi(s,n),this.serializer)}}class e4 extends ph{constructor(e,n,s){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await d1(this.xu.syncEngine),await Kc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return IM(this.persistence,new NM,e.initialUser,this.serializer)}Fu(e,n){const s=this.persistence.referenceDelegate.garbageCollector;return new bM(s,e.asyncQueue,n)}Mu(e,n){const s=new WH(n,this.persistence);return new KH(e.asyncQueue,s)}Cu(e){const n=Ww(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new Kw(this.synchronizeTabs,n,e.clientId,s,e.asyncQueue,UM(),Fm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new LM}}class zK extends e4{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof tv&&(this.sharedClientState.syncEngine={Co:kK.bind(null,n),vo:OK.bind(null,n),Fo:VK.bind(null,n),Ts:MK.bind(null,n),Do:PK.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async s=>{await DK(this.xu.syncEngine,s),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start():s||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(s&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():s||this.indexBackfillerScheduler.stop())})}Du(e){const n=UM();if(!tv.v(n))throw new F(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Ww(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tv(n,e.asyncQueue,s,e.clientId,e.initialUser)}}class gh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>KN(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=RK.bind(null,this.syncEngine),await n_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dK}()}createDatastore(e){const n=rf(e.databaseInfo.databaseId),s=function(i){return new K$(i)}(e.databaseInfo);return function(i,a,o,c){return new X$(i,a,o,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,a,o){return new Z$(s,r,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>KN(this.syncEngine,n,0),function(){return zN.v()?new zN:new q$}())}createSyncEngine(e,n){return function(r,i,a,o,c,u,h){const f=new vK(r,i,a,o,c,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=K(r);B(Eo,"RemoteStore shutting down."),i.Ea.add(5),await $c(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}gh.provider={build:()=>new gh};function YN(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const s={value:t.slice(n,n+e),done:!1};return n+=e,s}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):gt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FK{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Jt,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(s=>{s&&s.$a()?this.metadata.resolve(s.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(s==null?void 0:s.Qa)}`))},s=>this.metadata.reject(s))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),s=Number(n);isNaN(s)&&this.Qu(`length string (${n}) is not valid number`);const r=await this.$u(s);return new mK(JSON.parse(r),e.length+s)}Uu(){return this.buffer.findIndex(e=>e===123)}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BK{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new F(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,i){const a=K(r),o={documents:i.map(f=>fh(a.serializer,f))},c=await a.Ho("BatchGetDocuments",a.serializer.databaseId,fe.emptyPath(),o,i.length),u=new Map;c.forEach(f=>{const m=e$(a.serializer,f);u.set(m.key.toString(),m)});const h=[];return i.forEach(f=>{const m=u.get(f.toString());X(!!m,55234,{key:f}),h.push(m)}),h}(this.datastore,e);return n.forEach(s=>this.recordVersion(s)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,s)=>{const r=G.fromPath(s);this.mutations.push(new Ow(r,this.precondition(r)))}),await async function(s,r){const i=K(s),a={writes:r.map(o=>mh(i.serializer,o))};await i.Go("Commit",i.serializer.databaseId,fe.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Q(50498,{Gu:e.constructor.name});n=Z.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new F(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Z.min())?tt.exists(!1):tt.updateTime(n):tt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Z.min()))throw new F(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tt.updateTime(n)}return tt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qK{constructor(e,n,s,r,i){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=r,this.deferred=i,this.zu=s.maxAttempts,this.M_=new Jw(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new BK(this.datastore),n=this.Hu(e);n&&n.then(s=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(s)}).catch(r=>{this.Yu(r)}))}).catch(s=>{this.Yu(s)})})}Hu(e){try{const n=this.updateFunction(e);return!Qh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!QD(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="FirestoreClient";class HK{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Ut.UNAUTHENTICATED,this.clientId=ww.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async a=>{B(ra,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(s,a=>(B(ra,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Yc(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function sv(t,e){t.asyncQueue.verifyOperationInProgress(),B(ra,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await RM(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function QN(t,e){t.asyncQueue.verifyOperationInProgress();const n=await h1(t);B(ra,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>BN(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>BN(e.remoteStore,r)),t._onlineComponents=e}async function h1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B(ra,"Using user provided OfflineComponentProvider");try{await sv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===L.FAILED_PRECONDITION||r.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;rr("Error using user provided cache. Falling back to memory cache: "+n),await sv(t,new ph)}}else B(ra,"Using default OfflineComponentProvider"),await sv(t,new UK(void 0));return t._offlineComponents}async function ly(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(B(ra,"Using user provided OnlineComponentProvider"),await QN(t,t._uninitializedComponentsProvider._online)):(B(ra,"Using default OnlineComponentProvider"),await QN(t,new gh))),t._onlineComponents}function t4(t){return h1(t).then(e=>e.persistence)}function f1(t){return h1(t).then(e=>e.localStore)}function n4(t){return ly(t).then(e=>e.remoteStore)}function m1(t){return ly(t).then(e=>e.syncEngine)}function GK(t){return ly(t).then(e=>e.datastore)}async function bc(t){const e=await ly(t),n=e.eventManager;return n.onListen=xK.bind(null,e.syncEngine),n.onUnlisten=bK.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_K.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wK.bind(null,e.syncEngine),n}function $K(t){return t.asyncQueue.enqueue(async()=>{const e=await t4(t),n=await n4(t);return e.setNetworkEnabled(!0),function(r){const i=K(r);return i.Ea.delete(0),af(i)}(n)})}function KK(t){return t.asyncQueue.enqueue(async()=>{const e=await t4(t),n=await n4(t);return e.setNetworkEnabled(!1),async function(r){const i=K(r);i.Ea.add(0),await $c(i),i.Ra.set("Offline")}(n)})}function WK(t,e){const n=new Jt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,a){try{const o=await function(u,h){const f=K(u);return f.persistence.runTransaction("read document","readonly",m=>f.localDocuments.getDocument(m,h))}(r,i);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new F(L.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const c=Yc(o,`Failed to get document '${i} from cache`);a.reject(c)}}(await f1(t),e,n)),n.promise}function s4(t,e,n={}){const s=new Jt;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,c,u){const h=new oy({next:m=>{h.Nu(),a.enqueueAndForget(()=>r1(i,f));const p=m.docs.has(o);!p&&m.fromCache?u.reject(new F(L.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&c&&c.source==="server"?u.reject(new F(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new a1(qc(o.path),h,{includeMetadataChanges:!0,qa:!0});return s1(i,f)}(await bc(t),t.asyncQueue,e,n,s)),s.promise}function YK(t,e){const n=new Jt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,a){try{const o=await Gp(r,i,!0),c=new YM(i,o.Qs),u=c.ru(o.documents),h=c.applyChanges(u,!1);a.resolve(h.snapshot)}catch(o){const c=Yc(o,`Failed to execute query '${i} against cache`);a.reject(c)}}(await f1(t),e,n)),n.promise}function r4(t,e,n={}){const s=new Jt;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,c,u){const h=new oy({next:m=>{h.Nu(),a.enqueueAndForget(()=>r1(i,f)),m.fromCache&&c.source==="server"?u.reject(new F(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new a1(o,h,{includeMetadataChanges:!0,qa:!0});return s1(i,f)}(await bc(t),t.asyncQueue,e,n,s)),s.promise}function QK(t,e){const n=new oy(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){K(r).Ca.add(i),i.next()}(await bc(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){K(r).Ca.delete(i)}(await bc(t),n))}}function XK(t,e,n,s){const r=function(a,o){let c;return c=typeof a=="string"?JD().encode(a):a,function(h,f){return new FK(h,f)}(function(h,f){if(h instanceof Uint8Array)return YN(h,f);if(h instanceof ArrayBuffer)return YN(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),o)}(n,rf(e));t.asyncQueue.enqueueAndForget(async()=>{LK(await m1(t),r,s)})}function JK(t,e){return t.asyncQueue.enqueue(async()=>function(s,r){const i=K(s);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ii.getNamedQuery(a,r))}(await f1(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4="firestore.googleapis.com",JN=!0;class ZN{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new F(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=a4,this.ssl=JN}else this.host=e.host,this.ssl=e.ssl??JN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<x$)throw new F(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Zk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=i4(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class of{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZN(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new MH;switch(s.type){case"firstParty":return new UH(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new F(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=XN.get(n);s&&(B("ComponentProvider","Removing Datastore"),XN.delete(n),s.terminate())}(this),Promise.resolve()}}function ZK(t,e,n,s={}){var u;t=_e(t,of);const r=ha(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;r&&(Kb(`https://${o}`),Wb("Firestore",!0)),i.host!==a4&&i.host!==o&&rr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:o,ssl:r,emulatorOptions:s};if(!Yi(c,a)&&(t._setSettings(c),s.mockUserToken)){let h,f;if(typeof s.mockUserToken=="string")h=s.mockUserToken,f=Ut.MOCK_USER;else{h=AP(s.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=s.mockUserToken.sub||s.mockUserToken.user_id;if(!m)throw new F(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ut(m)}t._authCredentials=new OH(new Xk(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _n=class o4{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new o4(this.firestore,e,this._query)}},ze=class Qu{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qu(this.firestore,e,this._key)}toJSON(){return{type:Qu._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Yh(n,Qu._jsonSchema))return new Qu(e,s||null,new G(fe.fromString(n.referencePath)))}};ze._jsonSchemaVersion="firestore/documentReference/1.0",ze._jsonSchema={type:Nt("string",ze._jsonSchemaVersion),referencePath:Nt("string")};let qi=class l4 extends _n{constructor(e,n,s){super(e,n,qc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ze(this.firestore,null,new G(e))}withConverter(e){return new l4(this.firestore,e,this._path)}};function Yp(t,e,...n){if(t=J(t),Tw("collection","path",e),t instanceof of){const s=fe.fromString(e,...n);return FA(s),new qi(t,null,s)}{if(!(t instanceof ze||t instanceof qi))throw new F(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(fe.fromString(e,...n));return FA(s),new qi(t.firestore,null,s)}}function eW(t,e){if(t=_e(t,of),Tw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new F(L.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _n(t,null,function(s){return new Qr(fe.emptyPath(),s)}(e))}function Qp(t,e,...n){if(t=J(t),arguments.length===1&&(e=ww.newId()),Tw("doc","path",e),t instanceof of){const s=fe.fromString(e,...n);return zA(s),new ze(t,null,new G(s))}{if(!(t instanceof ze||t instanceof qi))throw new F(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(fe.fromString(e,...n));return zA(s),new ze(t.firestore,t instanceof qi?t.converter:null,new G(s))}}function c4(t,e){return t=J(t),e=J(e),(t instanceof ze||t instanceof qi)&&(e instanceof ze||e instanceof qi)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function u4(t,e){return t=J(t),e=J(e),t instanceof _n&&e instanceof _n&&t.firestore===e.firestore&&Zh(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="AsyncQueue";class tI{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Jw(this,"async_queue_retry"),this._c=()=>{const s=Fm();s&&B(eI,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Fm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Fm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Jt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!pa(e))throw e;B(eI,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,gt("INTERNAL UNHANDLED ERROR: ",nI(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=n1.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&Q(47125,{Pc:nI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function nI(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const r=n;for(const i of s)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class tW{constructor(){this._progressObserver={},this._taskCompletionResolver=new Jt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,s){this._progressObserver={next:e,error:n,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nW=-1;let _t=class extends of{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new tI,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tI(e),this._firestoreClient=void 0,await e}}};function un(t){if(t._terminated)throw new F(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||d4(t),t._firestoreClient}function d4(t){var s,r,i;const e=t._freezeSettings(),n=function(o,c,u,h){return new TG(o,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,i4(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new HK(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(t._componentsProvider))}function sW(t,e){rr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return h4(t,gh.provider,{build:s=>new e4(s,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function rW(t){rr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();h4(t,gh.provider,{build:n=>new zK(n,e.cacheSizeBytes)})}function h4(t,e,n){if((t=_e(t,_t))._firestoreClient||t._terminated)throw new F(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new F(L.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},d4(t)}function iW(t){if(t._initialized&&!t._terminated)throw new F(L.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Jt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(s){if(!Qs.v())return Promise.resolve();const r=s+AM;await Qs.delete(r)}(Ww(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function aW(t){return function(n){const s=new Jt;return n.asyncQueue.enqueueAndForget(async()=>NK(await m1(n),s)),s.promise}(un(t=_e(t,_t)))}function oW(t){return $K(un(t=_e(t,_t)))}function lW(t){return KK(un(t=_e(t,_t)))}function cW(t,e){const n=un(t=_e(t,_t)),s=new tW;return XK(n,t._databaseId,e,s),s}function uW(t,e){return JK(un(t=_e(t,_t)),e).then(n=>n?new _n(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rn(dt.fromBase64String(e))}catch(n){throw new F(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rn(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yh(e,rn._jsonSchema))return rn.fromBase64String(e.bytes)}}rn._jsonSchemaVersion="firestore/bytes/1.0",rn._jsonSchema={type:Nt("string",rn._jsonSchemaVersion),bytes:Nt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ia=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mo=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:As._jsonSchemaVersion}}static fromJSON(e){if(Yh(e,As._jsonSchema))return new As(e.latitude,e.longitude)}}As._jsonSchemaVersion="firestore/geoPoint/1.0",As._jsonSchema={type:Nt("string",As._jsonSchemaVersion),latitude:Nt("number"),longitude:Nt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Js._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yh(e,Js._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Js(e.vectorValues);throw new F(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Js._jsonSchemaVersion="firestore/vectorValue/1.0",Js._jsonSchema={type:Nt("string",Js._jsonSchemaVersion),vectorValues:Nt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dW=/^__.*__$/;class hW{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Jr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Hc(e,this.data,n,this.fieldTransforms)}}class f4{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Jr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function m4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ac:t})}}class cy{constructor(e,n,s,r,i,a){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new cy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Xp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(m4(this.Ac)&&dW.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class fW{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||rf(e)}Cc(e,n,s,r=!1){return new cy({Ac:e,methodName:n,Dc:s,path:et.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Oo(t){const e=t._freezeSettings(),n=rf(t._databaseId);return new fW(t._databaseId,!!e.ignoreUndefinedProperties,n)}function uy(t,e,n,s,r,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);b1("Data must be an object, but it was:",a,s);const o=y4(s,a);let c,u;if(i.merge)c=new In(a.fieldMask),u=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=a_(e,f,n);if(!a.contains(m))throw new F(L.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);x4(h,m)||h.push(m)}c=new In(h),u=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=a.fieldTransforms;return new hW(new Wt(o),c,u)}class lf extends Mo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lf}}function p4(t,e,n){return new cy({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class p1 extends Mo{_toFieldTransform(e){return new tf(e.path,new fc)}isEqual(e){return e instanceof p1}}class g1 extends Mo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=p4(this,e,!0),s=this.vc.map(i=>Vo(i,n)),r=new xo(s);return new tf(e.path,r)}isEqual(e){return e instanceof g1&&Yi(this.vc,e.vc)}}class y1 extends Mo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=p4(this,e,!0),s=this.vc.map(i=>Vo(i,n)),r=new _o(s);return new tf(e.path,r)}isEqual(e){return e instanceof y1&&Yi(this.vc,e.vc)}}class v1 extends Mo{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new mc(e.serializer,qD(e.serializer,this.Fc));return new tf(e.path,n)}isEqual(e){return e instanceof v1&&this.Fc===e.Fc}}function x1(t,e,n,s){const r=t.Cc(1,e,n);b1("Data must be an object, but it was:",r,s);const i=[],a=Wt.empty();ga(s,(c,u)=>{const h=w1(e,c,n);u=J(u);const f=r.yc(h);if(u instanceof lf)i.push(h);else{const m=Vo(u,f);m!=null&&(i.push(h),a.set(h,m))}});const o=new In(i);return new f4(a,o,r.fieldTransforms)}function _1(t,e,n,s,r,i){const a=t.Cc(1,e,n),o=[a_(e,s,n)],c=[r];if(i.length%2!=0)throw new F(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)o.push(a_(e,i[m])),c.push(i[m+1]);const u=[],h=Wt.empty();for(let m=o.length-1;m>=0;--m)if(!x4(u,o[m])){const p=o[m];let _=c[m];_=J(_);const w=a.yc(p);if(_ instanceof lf)u.push(p);else{const T=Vo(_,w);T!=null&&(u.push(p),h.set(p,T))}}const f=new In(u);return new f4(h,f,a.fieldTransforms)}function g4(t,e,n,s=!1){return Vo(n,t.Cc(s?4:3,e))}function Vo(t,e){if(v4(t=J(t)))return b1("Unsupported field value:",e,t),y4(t,e);if(t instanceof Mo)return function(s,r){if(!m4(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,r){const i=[];let a=0;for(const o of s){let c=Vo(o,r.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=J(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return qD(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Ee.fromDate(s);return{timestampValue:pc(r.serializer,i)}}if(s instanceof Ee){const i=new Ee(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:pc(r.serializer,i)}}if(s instanceof As)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof rn)return{bytesValue:tM(r.serializer,s._byteString)};if(s instanceof ze){const i=r.databaseId,a=s.firestore._databaseId;if(!a.isEqual(i))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Fw(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Js)return function(a,o){return{mapValue:{fields:{[Cw]:{stringValue:jw},[uc]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return Mw(o.serializer,u)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${$g(s)}`)}(t,e)}function y4(t,e){const n={};return vD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ga(t,(s,r)=>{const i=Vo(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function v4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ee||t instanceof As||t instanceof rn||t instanceof ze||t instanceof Mo||t instanceof Js)}function b1(t,e,n){if(!v4(n)||!eD(n)){const s=$g(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function a_(t,e,n){if((e=J(e))instanceof ia)return e._internalPath;if(typeof e=="string")return w1(t,e);throw Xp("Field path arguments must be of type string or ",t,!1,void 0,n)}const mW=new RegExp("[~\\*/\\[\\]]");function w1(t,e,n){if(e.search(mW)>=0)throw Xp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ia(...e.split("."))._internalPath}catch{throw Xp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xp(t,e,n,s,r){const i=s&&!s.isEmpty(),a=r!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${s}`),a&&(c+=` in document ${r}`),c+=")"),new F(L.INVALID_ARGUMENT,o+t+c)}function x4(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class pW extends yh{data(){return super.data()}}function dy(t,e){return typeof e=="string"?w1(t,e):e instanceof ia?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class T1{}class cf extends T1{}function fr(t,e,...n){let s=[];e instanceof T1&&s.push(e),s=s.concat(n),function(i){const a=i.filter(c=>c instanceof E1).length,o=i.filter(c=>c instanceof hy).length;if(a>1||a>0&&o>0)throw new F(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class hy extends cf{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new hy(e,n,s)}_apply(e){const n=this._parse(e);return T4(e._query,n),new _n(e.firestore,e.converter,$x(e._query,n))}_parse(e){const n=Oo(e.firestore);return function(i,a,o,c,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){rI(f,h);const _=[];for(const w of f)_.push(sI(c,i,w));m={arrayValue:{values:_}}}else m=sI(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||rI(f,h),m=g4(o,a,f,h==="in"||h==="not-in");return pe.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function gW(t,e,n){const s=e,r=dy("where",t);return hy._create(r,s,n)}class E1 extends T1{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new E1(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Ie.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let a=r;const o=i.getFlattenedFilters();for(const c of o)T4(a,c),a=$x(a,c)}(e._query,n),new _n(e.firestore,e.converter,$x(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class S1 extends cf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new S1(e,n)}_apply(e){const n=function(r,i,a){if(r.startAt!==null)throw new F(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new F(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hh(i,a)}(e._query,this._field,this._direction);return new _n(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Qr(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function b4(t,e="asc"){const n=e,s=dy("orderBy",t);return S1._create(s,n)}class fy extends cf{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new fy(e,n,s)}_apply(e){return new _n(e.firestore,e.converter,zp(e._query,this._limit,this._limitType))}}function yW(t){return tD("limit",t),fy._create("limit",t,"F")}function vW(t){return tD("limitToLast",t),fy._create("limitToLast",t,"L")}class my extends cf{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new my(e,n,s)}_apply(e){const n=w4(e,this.type,this._docOrFields,this._inclusive);return new _n(e.firestore,e.converter,function(r,i){return new Qr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function xW(...t){return my._create("startAt",t,!0)}function _W(...t){return my._create("startAfter",t,!1)}class py extends cf{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new py(e,n,s)}_apply(e){const n=w4(e,this.type,this._docOrFields,this._inclusive);return new _n(e.firestore,e.converter,function(r,i){return new Qr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function bW(...t){return py._create("endBefore",t,!1)}function wW(...t){return py._create("endAt",t,!0)}function w4(t,e,n,s){if(n[0]=J(n[0]),n[0]instanceof yh)return function(i,a,o,c,u){if(!c)throw new F(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const h=[];for(const f of Ul(i))if(f.field.isKeyField())h.push(yo(a,c.key));else{const m=c.data.field(f.field);if(Xg(m))throw new F(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const p=f.field.canonicalString();throw new F(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}h.push(m)}return new na(h,u)}(t._query,t.firestore._databaseId,e,n[0]._document,s);{const r=Oo(t.firestore);return function(a,o,c,u,h,f){const m=a.explicitOrderBy;if(h.length>m.length)throw new F(L.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let _=0;_<h.length;_++){const w=h[_];if(m[_].field.isKeyField()){if(typeof w!="string")throw new F(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof w}`);if(!kw(a)&&w.indexOf("/")!==-1)throw new F(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${w}' contains a slash.`);const T=a.path.child(fe.fromString(w));if(!G.isDocumentKey(T))throw new F(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const x=new G(T);p.push(yo(o,x))}else{const T=g4(c,u,w);p.push(T)}}return new na(p,f)}(t._query,t.firestore._databaseId,r,e,n,s)}}function sI(t,e,n){if(typeof(n=J(n))=="string"){if(n==="")throw new F(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kw(e)&&n.indexOf("/")!==-1)throw new F(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(fe.fromString(n));if(!G.isDocumentKey(s))throw new F(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return yo(t,new G(s))}if(n instanceof ze)return yo(t,n._key);throw new F(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$g(n)}.`)}function rI(t,e){if(!Array.isArray(t)||t.length===0)throw new F(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function T4(t,e){const n=function(r,i){for(const a of r)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class A1{convertValue(e,n="none"){switch(ea(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ga(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var s,r,i;const n=(i=(r=(s=e.fields)==null?void 0:s[uc].arrayValue)==null?void 0:r.values)==null?void 0:i.map(a=>Ze(a.doubleValue));return new Js(n)}convertGeoPoint(e){return new As(Ze(e.latitude),Ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Jg(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ch(e));default:return null}}convertTimestamp(e){const n=Fr(e);return new Ee(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=fe.fromString(e);X(hM(s),9688,{name:e});const r=new Zi(s.get(1),s.get(3)),i=new G(s.popFirst(5));return r.isEqual(n)||gt(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class TW extends A1{constructor(e){super(),this.firestore=e}convertBytes(e){return new rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ze(this.firestore,null,n)}}class Ya{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let gs=class E4 extends yh{constructor(e,n,s,r,i,a){super(e,n,s,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Id(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(dy("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=E4._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};gs._jsonSchemaVersion="firestore/documentSnapshot/1.0",gs._jsonSchema={type:Nt("string",gs._jsonSchemaVersion),bundleSource:Nt("string","DocumentSnapshot"),bundleName:Nt("string"),bundle:Nt("string")};let Id=class extends gs{data(e={}){return super.data(e)}},Ns=class S4{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ya(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Id(this._firestore,this._userDataWriter,s.key,s,new Ya(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(o=>{const c=new Id(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ya(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const c=new Id(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ya(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:EW(o.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=S4._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ww.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function EW(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:t})}}function A4(t,e){return t instanceof gs&&e instanceof gs?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ns&&e instanceof Ns&&t._firestore===e._firestore&&u4(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SW(t){t=_e(t,ze);const e=_e(t.firestore,_t);return s4(un(e),t._key).then(n=>I1(e,t,n))}Ns._jsonSchemaVersion="firestore/querySnapshot/1.0",Ns._jsonSchema={type:Nt("string",Ns._jsonSchemaVersion),bundleSource:Nt("string","QuerySnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class Lo extends A1{constructor(e){super(),this.firestore=e}convertBytes(e){return new rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ze(this.firestore,null,n)}}function AW(t){t=_e(t,ze);const e=_e(t.firestore,_t),n=un(e),s=new Lo(e);return WK(n,t._key).then(r=>new gs(e,s,t._key,r,new Ya(r!==null&&r.hasLocalMutations,!0),t.converter))}function NW(t){t=_e(t,ze);const e=_e(t.firestore,_t);return s4(un(e),t._key,{source:"server"}).then(n=>I1(e,t,n))}function N4(t){t=_e(t,_n);const e=_e(t.firestore,_t),n=un(e),s=new Lo(e);return _4(t._query),r4(n,t._query).then(r=>new Ns(e,s,t,r))}function IW(t){t=_e(t,_n);const e=_e(t.firestore,_t),n=un(e),s=new Lo(e);return YK(n,t._query).then(r=>new Ns(e,s,t,r))}function RW(t){t=_e(t,_n);const e=_e(t.firestore,_t),n=un(e),s=new Lo(e);return r4(n,t._query,{source:"server"}).then(r=>new Ns(e,s,t,r))}function iI(t,e,n){t=_e(t,ze);const s=_e(t.firestore,_t),r=gy(t.converter,e,n);return uf(s,[uy(Oo(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,tt.none())])}function aI(t,e,n,...s){t=_e(t,ze);const r=_e(t.firestore,_t),i=Oo(r);let a;return a=typeof(e=J(e))=="string"||e instanceof ia?_1(i,"updateDoc",t._key,e,n,s):x1(i,"updateDoc",t._key,e),uf(r,[a.toMutation(t._key,tt.exists(!0))])}function CW(t){return uf(_e(t.firestore,_t),[new Gc(t._key,tt.none())])}function jW(t,e){const n=_e(t.firestore,_t),s=Qp(t),r=gy(t.converter,e);return uf(n,[uy(Oo(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,tt.exists(!1))]).then(()=>s)}function N1(t,...e){var c,u,h;t=J(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||i_(e[s])||(n=e[s++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(i_(e[s])){const f=e[s];e[s]=(c=f.next)==null?void 0:c.bind(f),e[s+1]=(u=f.error)==null?void 0:u.bind(f),e[s+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,a,o;if(t instanceof ze)a=_e(t.firestore,_t),o=qc(t._key.path),i={next:f=>{e[s]&&e[s](I1(a,t,f))},error:e[s+1],complete:e[s+2]};else{const f=_e(t,_n);a=_e(f.firestore,_t),o=f._query;const m=new Lo(a);i={next:p=>{e[s]&&e[s](new Ns(a,m,f,p))},error:e[s+1],complete:e[s+2]},_4(t._query)}return function(m,p,_,w){const T=new oy(w),x=new a1(p,T,_);return m.asyncQueue.enqueueAndForget(async()=>s1(await bc(m),x)),()=>{T.Nu(),m.asyncQueue.enqueueAndForget(async()=>r1(await bc(m),x))}}(un(a),o,r,i)}function PW(t,e){return QK(un(t=_e(t,_t)),i_(e)?e:{next:e})}function uf(t,e){return function(s,r){const i=new Jt;return s.asyncQueue.enqueueAndForget(async()=>TK(await m1(s),r,i)),i.promise}(un(t),e)}function I1(t,e,n){const s=n.docs.get(e._key),r=new Lo(t);return new gs(t,r,e._key,s,new Ya(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kW={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DW=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Oo(e)}set(e,n,s){this._verifyNotCommitted();const r=Ri(e,this._firestore),i=gy(r.converter,n,s),a=uy(this._dataReader,"WriteBatch.set",r._key,i,r.converter!==null,s);return this._mutations.push(a.toMutation(r._key,tt.none())),this}update(e,n,s,...r){this._verifyNotCommitted();const i=Ri(e,this._firestore);let a;return a=typeof(n=J(n))=="string"||n instanceof ia?_1(this._dataReader,"WriteBatch.update",i._key,n,s,r):x1(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(a.toMutation(i._key,tt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ri(e,this._firestore);return this._mutations=this._mutations.concat(new Gc(n._key,tt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ri(t,e){if((t=J(t)).firestore!==e)throw new F(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MW{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Oo(e)}get(e){const n=Ri(e,this._firestore),s=new TW(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return Q(24041);const i=r[0];if(i.isFoundDocument())return new yh(this._firestore,s,i.key,i,n.converter);if(i.isNoDocument())return new yh(this._firestore,s,n._key,null,n.converter);throw Q(18433,{doc:i})})}set(e,n,s){const r=Ri(e,this._firestore),i=gy(r.converter,n,s),a=uy(this._dataReader,"Transaction.set",r._key,i,r.converter!==null,s);return this._transaction.set(r._key,a),this}update(e,n,s,...r){const i=Ri(e,this._firestore);let a;return a=typeof(n=J(n))=="string"||n instanceof ia?_1(this._dataReader,"Transaction.update",i._key,n,s,r):x1(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,a),this}delete(e){const n=Ri(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OW=class extends MW{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ri(e,this._firestore),s=new Lo(this._firestore);return super.get(e).then(r=>new gs(this._firestore,s,n._key,r._document,new Ya(!1,!1),n.converter))}};function VW(t,e,n){t=_e(t,_t);const s={...kW,...n};return function(i){if(i.maxAttempts<1)throw new F(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(i,a,o){const c=new Jt;return i.asyncQueue.enqueueAndForget(async()=>{const u=await GK(i);new qK(i.asyncQueue,u,o,a,c).ju()}),c.promise}(un(t),r=>e(new OW(t,r)),s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LW(){return new lf("deleteField")}function UW(){return new p1("serverTimestamp")}function zW(...t){return new g1("arrayUnion",t)}function FW(...t){return new y1("arrayRemove",t)}function BW(t){return new v1("increment",t)}(function(e,n=!0){(function(r){Bc=r})(Kr),Ur(new vs("firestore",(s,{instanceIdentifier:r,options:i})=>{const a=s.getProvider("app").getImmediate(),o=new _t(new VH(s.getProvider("auth-internal")),new zH(a,s.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new F(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zi(u.options.projectId,h)}(a,r),a);return i={useFetchStreams:n,...i},o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Kn(OA,VA,e),Kn(OA,VA,"esm2020")})();const qW="@firebase/firestore-compat",HW="0.4.2";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new F("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(){if(typeof Uint8Array>"u")throw new F("unimplemented","Uint8Arrays are not available in this environment.")}function lI(){if(!bG())throw new F("unimplemented","Blobs are unavailable in Firestore in this environment.")}let I4=class o_{constructor(e){this._delegate=e}static fromBase64String(e){return lI(),new o_(rn.fromBase64String(e))}static fromUint8Array(e){return oI(),new o_(rn.fromUint8Array(e))}toBase64(){return lI(),this._delegate.toBase64()}toUint8Array(){return oI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(t){return GW(t,["next","error","complete"])}function GW(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const s of e)if(s in n&&typeof n[s]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $W{enableIndexedDbPersistence(e,n){return sW(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return rW(e._delegate)}clearIndexedDbPersistence(e){return iW(e._delegate)}}class R4{constructor(e,n,s){this._delegate=n,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Zi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&rr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,s={}){ZK(this._delegate,e,n,s)}enableNetwork(){return oW(this._delegate)}disableNetwork(){return lW(this._delegate)}enablePersistence(e){let n=!1,s=!1;return e&&(n=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Zk("synchronizeTabs",n,"experimentalForceOwningTab",s)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return aW(this._delegate)}onSnapshotsInSync(e){return PW(this._delegate,e)}get app(){if(!this._appCompat)throw new F("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new wc(this,Yp(this._delegate,e))}catch(n){throw gn(n,"collection()","Firestore.collection()")}}doc(e){try{return new hs(this,Qp(this._delegate,e))}catch(n){throw gn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new pn(this,eW(this._delegate,e))}catch(n){throw gn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return VW(this._delegate,n=>e(new C4(this,n)))}batch(){return un(this._delegate),new j4(new DW(this._delegate,e=>uf(this._delegate,e)))}loadBundle(e){return cW(this._delegate,e)}namedQuery(e){return uW(this._delegate,e).then(n=>n?new pn(this,n):null)}}class yy extends A1{constructor(e){super(),this.firestore=e}convertBytes(e){return new I4(new rn(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return hs.forKey(n,this.firestore,null)}}function KW(t){kH(t)}class C4{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new yy(e)}get(e){const n=Qa(e);return this._delegate.get(n).then(s=>new vh(this._firestore,new gs(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,n.converter)))}set(e,n,s){const r=Qa(e);return s?(R1("Transaction.set",s),this._delegate.set(r,n,s)):this._delegate.set(r,n),this}update(e,n,s,...r){const i=Qa(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,s,...r),this}delete(e){const n=Qa(e);return this._delegate.delete(n),this}}class j4{constructor(e){this._delegate=e}set(e,n,s){const r=Qa(e);return s?(R1("WriteBatch.set",s),this._delegate.set(r,n,s)):this._delegate.set(r,n),this}update(e,n,s,...r){const i=Qa(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,s,...r),this}delete(e){const n=Qa(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class So{constructor(e,n,s){this._firestore=e,this._userDataWriter=n,this._delegate=s}fromFirestore(e,n){const s=new Id(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xh(this._firestore,s),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const s=So.INSTANCES;let r=s.get(e);r||(r=new WeakMap,s.set(e,r));let i=r.get(n);return i||(i=new So(e,new yy(e),n),r.set(n,i)),i}}So.INSTANCES=new WeakMap;class hs{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new yy(e)}static forPath(e,n,s){if(e.length%2!==0)throw new F("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new hs(n,new ze(n._delegate,s,new G(e)))}static forKey(e,n,s){return new hs(n,new ze(n._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new wc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new wc(this.firestore,Yp(this._delegate,e))}catch(n){throw gn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=J(e),e instanceof ze?c4(this._delegate,e):!1}set(e,n){n=R1("DocumentReference.set",n);try{return n?iI(this._delegate,e,n):iI(this._delegate,e)}catch(s){throw gn(s,"setDoc()","DocumentReference.set()")}}update(e,n,...s){try{return arguments.length===1?aI(this._delegate,e):aI(this._delegate,e,n,...s)}catch(r){throw gn(r,"updateDoc()","DocumentReference.update()")}}delete(){return CW(this._delegate)}onSnapshot(...e){const n=P4(e),s=k4(e,r=>new vh(this.firestore,new gs(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return N1(this._delegate,n,s)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=AW(this._delegate):(e==null?void 0:e.source)==="server"?n=NW(this._delegate):n=SW(this._delegate),n.then(s=>new vh(this.firestore,new gs(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new hs(this.firestore,e?this._delegate.withConverter(So.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function gn(t,e,n){return t.message=t.message.replace(e,n),t}function P4(t){for(const e of t)if(typeof e=="object"&&!l_(e))return e;return{}}function k4(t,e){var s,r;let n;return l_(t[0])?n=t[0]:l_(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:i=>{n.next&&n.next(e(i))},error:(s=n.error)==null?void 0:s.bind(n),complete:(r=n.complete)==null?void 0:r.bind(n)}}class vh{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new hs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return A4(this._delegate,e._delegate)}}class xh extends vh{data(e){const n=this._delegate.data(e);return this._delegate._converter||DH(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class pn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new yy(e)}where(e,n,s){try{return new pn(this.firestore,fr(this._delegate,gW(e,n,s)))}catch(r){throw gn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new pn(this.firestore,fr(this._delegate,b4(e,n)))}catch(s){throw gn(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new pn(this.firestore,fr(this._delegate,yW(e)))}catch(n){throw gn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new pn(this.firestore,fr(this._delegate,vW(e)))}catch(n){throw gn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new pn(this.firestore,fr(this._delegate,xW(...e)))}catch(n){throw gn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new pn(this.firestore,fr(this._delegate,_W(...e)))}catch(n){throw gn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new pn(this.firestore,fr(this._delegate,bW(...e)))}catch(n){throw gn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new pn(this.firestore,fr(this._delegate,wW(...e)))}catch(n){throw gn(n,"endAt()","Query.endAt()")}}isEqual(e){return u4(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=IW(this._delegate):(e==null?void 0:e.source)==="server"?n=RW(this._delegate):n=N4(this._delegate),n.then(s=>new c_(this.firestore,new Ns(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const n=P4(e),s=k4(e,r=>new c_(this.firestore,new Ns(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return N1(this._delegate,n,s)}withConverter(e){return new pn(this.firestore,e?this._delegate.withConverter(So.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class WW{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new xh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class c_{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new pn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new xh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new WW(this._firestore,n))}forEach(e,n){this._delegate.forEach(s=>{e.call(n,new xh(this._firestore,s))})}isEqual(e){return A4(this._delegate,e._delegate)}}class wc extends pn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new hs(this.firestore,e):null}doc(e){try{return e===void 0?new hs(this.firestore,Qp(this._delegate)):new hs(this.firestore,Qp(this._delegate,e))}catch(n){throw gn(n,"doc()","CollectionReference.doc()")}}add(e){return jW(this._delegate,e).then(n=>new hs(this.firestore,n))}isEqual(e){return c4(this._delegate,e._delegate)}withConverter(e){return new wc(this.firestore,e?this._delegate.withConverter(So.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Qa(t){return _e(t,ze)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(...e){this._delegate=new ia(...e)}static documentId(){return new C1(et.keyField().canonicalString())}isEqual(e){return e=J(e),e instanceof ia?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{static serverTimestamp(){const e=UW();return e._methodName="FieldValue.serverTimestamp",new $a(e)}static delete(){const e=LW();return e._methodName="FieldValue.delete",new $a(e)}static arrayUnion(...e){const n=zW(...e);return n._methodName="FieldValue.arrayUnion",new $a(n)}static arrayRemove(...e){const n=FW(...e);return n._methodName="FieldValue.arrayRemove",new $a(n)}static increment(e){const n=BW(e);return n._methodName="FieldValue.increment",new $a(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YW={Firestore:R4,GeoPoint:As,Timestamp:Ee,Blob:I4,Transaction:C4,WriteBatch:j4,DocumentReference:hs,DocumentSnapshot:vh,Query:pn,QueryDocumentSnapshot:xh,QuerySnapshot:c_,CollectionReference:wc,FieldPath:C1,FieldValue:$a,setLogLevel:KW,CACHE_SIZE_UNLIMITED:nW};function QW(t,e){t.INTERNAL.registerComponent(new vs("firestore-compat",n=>{const s=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(s,r)},"PUBLIC").setServiceProps({...YW}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XW(t){QW(t,(e,n)=>new R4(e,n,new $W)),t.registerVersion(qW,HW)}XW(De);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4="firebasestorage.googleapis.com",M4="storageBucket",JW=2*60*1e3,ZW=10*60*1e3,eY=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at extends ln{constructor(e,n,s=0){super(rv(e),`Firebase Storage: ${n} (${rv(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,at.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qe||(Qe={}));function rv(t){return"storage/"+t}function j1(){const t="An unknown error occurred, please check the error payload for server response.";return new at(Qe.UNKNOWN,t)}function tY(t){return new at(Qe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function nY(t){return new at(Qe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function sY(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new at(Qe.UNAUTHENTICATED,t)}function rY(){return new at(Qe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function iY(t){return new at(Qe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function O4(){return new at(Qe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function V4(){return new at(Qe.CANCELED,"User canceled the upload/download.")}function aY(t){return new at(Qe.INVALID_URL,"Invalid URL '"+t+"'.")}function oY(t){return new at(Qe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function lY(){return new at(Qe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+M4+"' property when initializing the app?")}function L4(){return new at(Qe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function cY(){return new at(Qe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function uY(){return new at(Qe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function dY(t){return new at(Qe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Fl(t){return new at(Qe.INVALID_ARGUMENT,t)}function U4(){return new at(Qe.APP_DELETED,"The Firebase app was deleted.")}function z4(t){return new at(Qe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Rd(t,e){return new at(Qe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ku(t){throw new at(Qe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=an.makeFromUrl(e,n)}catch{return new an(e,"")}if(s.path==="")return s;throw oY(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+r+a,"i"),c={bucket:1,path:3};function u(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${h}/b/${r}/o${m}`,"i"),_={bucket:1,path:3},w=n===D4?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",x=new RegExp(`^https?://${w}/${r}/${T}`,"i"),b=[{regex:o,indices:c,postModify:i},{regex:p,indices:_,postModify:u},{regex:x,indices:{bucket:1,path:2},postModify:u}];for(let R=0;R<b.length;R++){const D=b[R],M=D.regex.exec(e);if(M){const A=M[D.indices.bucket];let E=M[D.indices.path];E||(E=""),s=new an(A,E),D.postModify(s);break}}if(s==null)throw aY(e);return s}}class hY{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fY(t,e,n){let s=1,r=null,i=null,a=!1,o=0;function c(){return o===2}let u=!1;function h(...T){u||(u=!0,e.apply(null,T))}function f(T){r=setTimeout(()=>{r=null,t(p,c())},T)}function m(){i&&clearTimeout(i)}function p(T,...x){if(u){m();return}if(T){m(),h.call(null,T,...x);return}if(c()||a){m(),h.call(null,T,...x);return}s<64&&(s*=2);let b;o===1?(o=2,b=0):b=(s+Math.random())*1e3,f(b)}let _=!1;function w(T){_||(_=!0,m(),!u&&(r!==null?(T||(o=2),clearTimeout(r),f(0)):T||(o=1)))}return f(0),i=setTimeout(()=>{a=!0,w(!0)},n),w}function mY(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pY(t){return t!==void 0}function gY(t){return typeof t=="function"}function yY(t){return typeof t=="object"&&!Array.isArray(t)}function vy(t){return typeof t=="string"||t instanceof String}function cI(t){return P1()&&t instanceof Blob}function P1(){return typeof Blob<"u"}function u_(t,e,n,s){if(s<e)throw Fl(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw Fl(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function F4(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var ao;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ao||(ao={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||r||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vY{constructor(e,n,s,r,i,a,o,c,u,h,f,m=!0,p=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,w)=>{this.resolve_=_,this.reject_=w,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new em(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=o=>{const c=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const o=i.getErrorCode()===ao.NO_ERROR,c=i.getStatus();if(!o||B4(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===ao.ABORT;s(!1,new em(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;s(!0,new em(u,i))})},n=(s,r)=>{const i=this.resolve_,a=this.reject_,o=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(o,o.getResponse());pY(c)?i(c):i()}catch(c){a(c)}else if(o!==null){const c=j1();c.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,c)):a(c)}else if(r.canceled){const c=this.appDelete_?U4():V4();a(c)}else{const c=O4();a(c)}};this.canceled_?n(!1,new em(!1,null,!0)):this.backoffId_=fY(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&mY(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class em{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function xY(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function _Y(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function bY(t,e){e&&(t["X-Firebase-GMPID"]=e)}function wY(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function TY(t,e,n,s,r,i,a=!0,o=!1){const c=F4(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return bY(h,e),xY(h,n),_Y(h,i),wY(h,s),new vY(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EY(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function SY(...t){const e=EY();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(P1())return new Blob(t);throw new at(Qe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function AY(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NY(t){if(typeof atob>"u")throw dY("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class iv{constructor(e,n){this.data=e,this.contentType=n||null}}function q4(t,e){switch(t){case fs.RAW:return new iv(H4(e));case fs.BASE64:case fs.BASE64URL:return new iv(G4(t,e));case fs.DATA_URL:return new iv(RY(e),CY(e))}throw j1()}function H4(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=s,a=t.charCodeAt(++n);s=65536|(i&1023)<<10|a&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function IY(t){let e;try{e=decodeURIComponent(t)}catch{throw Rd(fs.DATA_URL,"Malformed data URL.")}return H4(e)}function G4(t,e){switch(t){case fs.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw Rd(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case fs.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw Rd(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=NY(e)}catch(r){throw r.message.includes("polyfill")?r:Rd(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class $4{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Rd(fs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=jY(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function RY(t){const e=new $4(t);return e.base64?G4(fs.BASE64,e.rest):IY(e.rest)}function CY(t){return new $4(t).contentType}function jY(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n){let s=0,r="";cI(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(cI(this.data_)){const s=this.data_,r=AY(s,e,n);return r===null?null:new gr(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new gr(s,!0)}}static getBlob(...e){if(P1()){const n=e.map(s=>s instanceof gr?s.data_:s);return new gr(SY.apply(null,n))}else{const n=e.map(a=>vy(a)?q4(fs.RAW,a).data:a.data_);let s=0;n.forEach(a=>{s+=a.byteLength});const r=new Uint8Array(s);let i=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)r[i++]=a[o]}),new gr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(t){let e;try{e=JSON.parse(t)}catch{return null}return yY(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PY(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function kY(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function K4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DY(t,e){return e}class fn{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||DY}}let tm=null;function MY(t){return!vy(t)||t.length<2?t:K4(t)}function xy(){if(tm)return tm;const t=[];t.push(new fn("bucket")),t.push(new fn("generation")),t.push(new fn("metageneration")),t.push(new fn("name","fullPath",!0));function e(i,a){return MY(a)}const n=new fn("name");n.xform=e,t.push(n);function s(i,a){return a!==void 0?Number(a):a}const r=new fn("size");return r.xform=s,t.push(r),t.push(new fn("timeCreated")),t.push(new fn("updated")),t.push(new fn("md5Hash",null,!0)),t.push(new fn("cacheControl",null,!0)),t.push(new fn("contentDisposition",null,!0)),t.push(new fn("contentEncoding",null,!0)),t.push(new fn("contentLanguage",null,!0)),t.push(new fn("contentType",null,!0)),t.push(new fn("metadata","customMetadata",!0)),tm=t,tm}function OY(t,e){function n(){const s=t.bucket,r=t.fullPath,i=new an(s,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function VY(t,e,n){const s={};s.type="file";const r=n.length;for(let i=0;i<r;i++){const a=n[i];s[a.local]=a.xform(s,e[a.server])}return OY(s,t),s}function W4(t,e,n){const s=k1(e);return s===null?null:VY(t,s,n)}function LY(t,e,n,s){const r=k1(e);if(r===null||!vy(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(u=>{const h=t.bucket,f=t.fullPath,m="/b/"+a(h)+"/o/"+a(f),p=xa(m,n,s),_=F4({alt:"media",token:u});return p+_})[0]}function D1(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="prefixes",dI="items";function UY(t,e,n){const s={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[uI])for(const r of n[uI]){const i=r.replace(/\/$/,""),a=t._makeStorageReference(new an(e,i));s.prefixes.push(a)}if(n[dI])for(const r of n[dI]){const i=t._makeStorageReference(new an(e,r.name));s.items.push(i)}return s}function zY(t,e,n){const s=k1(n);return s===null?null:UY(t,e,s)}class ei{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(t){if(!t)throw j1()}function _y(t,e){function n(s,r){const i=W4(t,r,e);return Zs(i!==null),i}return n}function FY(t,e){function n(s,r){const i=zY(t,e,r);return Zs(i!==null),i}return n}function BY(t,e){function n(s,r){const i=W4(t,r,e);return Zs(i!==null),LY(i,r,t.host,t._protocol)}return n}function Qc(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=rY():r=sY():n.getStatus()===402?r=nY(t.bucket):n.getStatus()===403?r=iY(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function by(t){const e=Qc(t);function n(s,r){let i=e(s,r);return s.getStatus()===404&&(i=tY(t.path)),i.serverResponse=r.serverResponse,i}return n}function Y4(t,e,n){const s=e.fullServerUrl(),r=xa(s,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,o=new ei(r,i,_y(t,n),a);return o.errorHandler=by(e),o}function qY(t,e,n,s,r){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n.length>0&&(i.delimiter=n),s&&(i.pageToken=s),r&&(i.maxResults=r);const a=e.bucketOnlyServerUrl(),o=xa(a,t.host,t._protocol),c="GET",u=t.maxOperationRetryTime,h=new ei(o,c,FY(t,e.bucket),u);return h.urlParams=i,h.errorHandler=Qc(e),h}function HY(t,e,n){const s=e.fullServerUrl(),r=xa(s,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,o=new ei(r,i,BY(t,n),a);return o.errorHandler=by(e),o}function GY(t,e,n,s){const r=e.fullServerUrl(),i=xa(r,t.host,t._protocol),a="PATCH",o=D1(n,s),c={"Content-Type":"application/json; charset=utf-8"},u=t.maxOperationRetryTime,h=new ei(i,a,_y(t,s),u);return h.headers=c,h.body=o,h.errorHandler=by(e),h}function $Y(t,e){const n=e.fullServerUrl(),s=xa(n,t.host,t._protocol),r="DELETE",i=t.maxOperationRetryTime;function a(c,u){}const o=new ei(s,r,a,i);return o.successCodes=[200,204],o.errorHandler=by(e),o}function KY(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Q4(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=KY(null,e)),s}function WY(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let b="";for(let R=0;R<2;R++)b=b+Math.random().toString().slice(2);return b}const c=o();a["Content-Type"]="multipart/related; boundary="+c;const u=Q4(e,s,r),h=D1(u,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+c+"--",p=gr.getBlob(f,s,m);if(p===null)throw L4();const _={name:u.fullPath},w=xa(i,t.host,t._protocol),T="POST",x=t.maxUploadRetryTime,v=new ei(w,T,_y(t,n),x);return v.urlParams=_,v.headers=a,v.body=p.uploadData(),v.errorHandler=Qc(e),v}class Jp{constructor(e,n,s,r){this.current=e,this.total=n,this.finalized=!!s,this.metadata=r||null}}function M1(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Zs(!1)}return Zs(!!n&&(e||["active"]).indexOf(n)!==-1),n}function YY(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),a=Q4(e,s,r),o={name:a.fullPath},c=xa(i,t.host,t._protocol),u="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},f=D1(a,n),m=t.maxUploadRetryTime;function p(w){M1(w);let T;try{T=w.getResponseHeader("X-Goog-Upload-URL")}catch{Zs(!1)}return Zs(vy(T)),T}const _=new ei(c,u,p,m);return _.urlParams=o,_.headers=h,_.body=f,_.errorHandler=Qc(e),_}function QY(t,e,n,s){const r={"X-Goog-Upload-Command":"query"};function i(u){const h=M1(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Zs(!1)}f||Zs(!1);const m=Number(f);return Zs(!isNaN(m)),new Jp(m,s.size(),h==="final")}const a="POST",o=t.maxUploadRetryTime,c=new ei(n,a,i,o);return c.headers=r,c.errorHandler=Qc(e),c}const hI=256*1024;function XY(t,e,n,s,r,i,a,o){const c=new Jp(0,0);if(a?(c.current=a.current,c.total=a.total):(c.current=0,c.total=s.size()),s.size()!==c.total)throw cY();const u=c.total-c.current;let h=u;r>0&&(h=Math.min(h,r));const f=c.current,m=f+h;let p="";h===0?p="finalize":u===h?p="upload, finalize":p="upload";const _={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${c.current}`},w=s.slice(f,m);if(w===null)throw L4();function T(R,D){const M=M1(R,["active","final"]),A=c.current+h,E=s.size();let N;return M==="final"?N=_y(e,i)(R,D):N=null,new Jp(A,E,M==="final",N)}const x="POST",v=e.maxUploadRetryTime,b=new ei(n,x,T,v);return b.headers=_,b.body=w.uploadData(),b.progressCallback=o||null,b.errorHandler=Qc(t),b}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JY={STATE_CHANGED:"state_changed"},yn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function av(t){switch(t){case"running":case"pausing":case"canceling":return yn.RUNNING;case"paused":return yn.PAUSED;case"success":return yn.SUCCESS;case"canceled":return yn.CANCELED;case"error":return yn.ERROR;default:return yn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZY{constructor(e,n,s){if(gY(e)||n!=null||s!=null)this.next=e,this.error=n??void 0,this.complete=s??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class eQ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ao.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ao.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ao.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r,i){if(this.sent_)throw ku("cannot .send() more than once");if(ha(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ku("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ku("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ku("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ku("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class tQ extends eQ{initXhr(){this.xhr_.responseType="text"}}function Bs(){return new tQ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=s,this._mappings=xy(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Qe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(B4(r.status,[]))if(i)r=O4();else{this.sleepTime=Math.max(this.sleepTime*2,eY),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Qe.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,i)=>{this._resolve=r,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,s])=>{switch(this._state){case"running":e(n,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const s=YY(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(s,Bs,e,n);this._request=r,r.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,s)=>{const r=QY(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,Bs,n,s);this._request=i,i.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=hI*this._chunkMultiplier,n=new Jp(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((r,i)=>{let a;try{a=XY(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const o=this._ref.storage._makeRequest(a,Bs,r,i,!1);this._request=o,o.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){hI*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const s=Y4(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(s,Bs,e,n);this._request=r,r.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const s=WY(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(s,Bs,e,n);this._request=r,r.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=V4(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=av(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,s,r){const i=new ZY(n||void 0,s||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(av(this._state)){case yn.SUCCESS:Zo(this._resolve.bind(null,this.snapshot))();break;case yn.CANCELED:case yn.ERROR:const n=this._reject;Zo(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(av(this._state)){case yn.RUNNING:case yn.PAUSED:e.next&&Zo(e.next.bind(e,this.snapshot))();break;case yn.SUCCESS:e.complete&&Zo(e.complete.bind(e))();break;case yn.CANCELED:case yn.ERROR:e.error&&Zo(e.error.bind(e,this._error))();break;default:e.error&&Zo(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n){this._service=e,n instanceof an?this._location=n:this._location=an.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ao(e,n)}get root(){const e=new an(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return K4(this._location.path)}get storage(){return this._service}get parent(){const e=PY(this._location.path);if(e===null)return null;const n=new an(this._location.bucket,e);return new Ao(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw z4(e)}}function nQ(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new X4(t,new gr(e),n)}function sQ(t){const e={prefixes:[],items:[]};return J4(t,e).then(()=>e)}async function J4(t,e,n){const r=await Z4(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&await J4(t,e,r.nextPageToken)}function Z4(t,e){e!=null&&typeof e.maxResults=="number"&&u_("options.maxResults",1,1e3,e.maxResults);const n=e||{},s=qY(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(s,Bs)}function rQ(t){t._throwIfRoot("getMetadata");const e=Y4(t.storage,t._location,xy());return t.storage.makeRequestWithTokens(e,Bs)}function iQ(t,e){t._throwIfRoot("updateMetadata");const n=GY(t.storage,t._location,e,xy());return t.storage.makeRequestWithTokens(n,Bs)}function aQ(t){t._throwIfRoot("getDownloadURL");const e=HY(t.storage,t._location,xy());return t.storage.makeRequestWithTokens(e,Bs).then(n=>{if(n===null)throw uY();return n})}function oQ(t){t._throwIfRoot("deleteObject");const e=$Y(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Bs)}function eO(t,e){const n=kY(t._location.path,e),s=new an(t._location.bucket,n);return new Ao(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lQ(t){return/^[A-Za-z]+:\/\//.test(t)}function cQ(t,e){return new Ao(t,e)}function tO(t,e){if(t instanceof O1){const n=t;if(n._bucket==null)throw lY();const s=new Ao(n,n._bucket);return e!=null?tO(s,e):s}else return e!==void 0?eO(t,e):t}function uQ(t,e){if(e&&lQ(e)){if(t instanceof O1)return cQ(t,e);throw Fl("To use ref(service, url), the first argument must be a Storage instance.")}else return tO(t,e)}function fI(t,e){const n=e==null?void 0:e[M4];return n==null?null:an.makeFromBucketSpec(n,t)}function dQ(t,e,n,s={}){t.host=`${e}:${n}`;const r=ha(e);r&&(Kb(`https://${t.host}/b`),Wb("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:AP(i,t.app.options.projectId))}class O1{constructor(e,n,s,r,i,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=D4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=JW,this._maxUploadRetryTime=ZW,this._requests=new Set,r!=null?this._bucket=an.makeFromBucketSpec(r,this._host):this._bucket=fI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=an.makeFromBucketSpec(this._url,e):this._bucket=fI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){u_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){u_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if($e(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ao(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new hY(U4());{const a=TY(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const mI="@firebase/storage",pI="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hQ="storage";function fQ(t,e,n){return t=J(t),nQ(t,e,n)}function mQ(t){return t=J(t),rQ(t)}function pQ(t,e){return t=J(t),iQ(t,e)}function gQ(t,e){return t=J(t),Z4(t,e)}function yQ(t){return t=J(t),sQ(t)}function vQ(t){return t=J(t),aQ(t)}function xQ(t){return t=J(t),oQ(t)}function gI(t,e){return t=J(t),uQ(t,e)}function _Q(t,e){return eO(t,e)}function bQ(t,e,n,s={}){dQ(t,e,n,s)}function wQ(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new O1(n,s,r,e,Kr)}function TQ(){Ur(new vs(hQ,wQ,"PUBLIC").setMultipleInstances(!0)),Kn(mI,pI,""),Kn(mI,pI,"esm2020")}TQ();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n,s){this._delegate=e,this.task=n,this.ref=s}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new nm(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(s=>{if(e)return e(new nm(s,this,this._ref))},n)}on(e,n,s,r){let i;return n&&(typeof n=="function"?i=a=>n(new nm(a,this,this._ref)):i={next:n.next?a=>n.next(new nm(a,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,i,s||void 0,r||void 0)}}class vI{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Nr(e,this._service))}get items(){return this._delegate.items.map(e=>new Nr(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=_Q(this._delegate,e);return new Nr(n,this.storage)}get root(){return new Nr(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Nr(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new yI(fQ(this._delegate,e,n),this)}putString(e,n=fs.RAW,s){this._throwIfRoot("putString");const r=q4(n,e),i={...s};return i.contentType==null&&r.contentType!=null&&(i.contentType=r.contentType),new yI(new X4(this._delegate,new gr(r.data,!0),i),this)}listAll(){return yQ(this._delegate).then(e=>new vI(e,this.storage))}list(e){return gQ(this._delegate,e||void 0).then(n=>new vI(n,this.storage))}getMetadata(){return mQ(this._delegate)}updateMetadata(e){return pQ(this._delegate,e)}getDownloadURL(){return vQ(this._delegate)}delete(){return this._throwIfRoot("delete"),xQ(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw z4(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(xI(e))throw Fl("ref() expected a child path but got a URL, use refFromURL instead.");return new Nr(gI(this._delegate,e),this)}refFromURL(e){if(!xI(e))throw Fl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{an.makeFromUrl(e,this._delegate.host)}catch{throw Fl("refFromUrl() expected a valid full URL but got an invalid one.")}return new Nr(gI(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,s={}){bQ(this._delegate,e,n,s)}}function xI(t){return/^[A-Za-z]+:\/\//.test(t)}const EQ="@firebase/storage-compat",SQ="0.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AQ="storage-compat";function NQ(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),s=t.getProvider("storage").getImmediate({identifier:e});return new nO(n,s)}function IQ(t){const e={TaskState:yn,TaskEvent:JY,StringFormat:fs,Storage:nO,Reference:Nr};t.INTERNAL.registerComponent(new vs(AQ,NQ,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(EQ,SQ)}IQ(De);const RQ={apiKey:"AIzaSyDzEay5fGB-2r5_V9UXOO8cOv-nJdHwDRg",authDomain:"rush-coffee.firebaseapp.com",projectId:"rush-coffee",storageBucket:"rush-coffee.appspot.com",messagingSenderId:"423413538635",appId:"1:423413538635:web:ded0369f50c3a9086bd2ce"};De.apps.length||De.initializeApp(RQ);const Ca=De.auth(),xe=De.firestore(),CQ=De.storage(),sO=S.createContext(void 0),es=()=>{const t=S.useContext(sO);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},jQ=({children:t})=>{const[e,n]=S.useState(null),[s,r]=S.useState(!0);S.useEffect(()=>{let p;const _=Ca.onAuthStateChanged(async w=>{p&&p(),w?p=xe.collection("users").doc(w.uid).onSnapshot(x=>{var v;if(x.exists){const b=x.data(),R={uid:w.uid,email:w.email,firstName:b.firstName||"User",lastName:b.lastName||"",phone:b.phone||"",photoURL:b.photoURL,createdAt:((v=b.createdAt)==null?void 0:v.toDate())||new Date,role:b.role,totalOrders:b.totalOrders??0,totalSpent:b.totalSpent??0,currentPoints:b.currentPoints??0,lifetimePoints:b.lifetimePoints??0,tier:b.tier||"bronze",rewardsHistory:(b.rewardsHistory||[]).map(D=>({...D,date:D.date.toDate()})).sort((D,M)=>M.date-D.date),preferences:b.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}};n(R)}else console.log("User document not found for UID:",w.uid);r(!1)},x=>{console.error("Error listening to user document:",x),n(null),r(!1)}):(n(null),r(!1))});return()=>{_(),p&&p()}},[]);const m={currentUser:e,loading:s,register:async(p,_,w,T,x)=>{const b=(await Ca.createUserWithEmailAndPassword(p,_)).user,R={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},D={firstName:w,lastName:T,phone:x||"",createdAt:new Date,totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[R],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await xe.collection("users").doc(b.uid).set(D)},login:async(p,_,w)=>{const T=w?De.auth.Auth.Persistence.LOCAL:De.auth.Auth.Persistence.SESSION;await Ca.setPersistence(T),await Ca.signInWithEmailAndPassword(p,_)},logout:async()=>{await Ca.signOut()},sendPasswordReset:async p=>{await Ca.sendPasswordResetEmail(p)},signInWithGoogle:async()=>{var x;const p=new De.auth.GoogleAuthProvider,_=await Ca.signInWithPopup(p),w=_.user,T=_.additionalUserInfo;if(T!=null&&T.isNewUser){const v=((x=w.displayName)==null?void 0:x.split(" "))||["New","User"],b=v[0],R=v.slice(1).join(" ")||"",D={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},M={firstName:b,lastName:R,photoURL:w.photoURL||void 0,createdAt:new Date,totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[D],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await xe.collection("users").doc(w.uid).set(M)}},updateUserProfile:async p=>{if(!e)return;await xe.collection("users").doc(e.uid).update(p)},updateUserPhoto:async p=>{if(!e)return;await xe.collection("users").doc(e.uid).update({photoURL:p})}};return l.jsx(sO.Provider,{value:m,children:!s&&t})},rO=[{id:"cb-01",name:"Spanish Latte",description:"A creamy and sweet latte with a Spanish twist, featuring condensed milk for a rich flavor.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:"/coffee-based/spanish-latte.png",available:!0,stock:99,popular:!0,displayOrder:1,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"condensed-milk",quantity:30}]},{id:"cb-02",name:"Rush Coffee Blend",description:"Our signature house blend, perfectly balanced for a smooth and satisfying coffee experience.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:89}],imageUrl:"/coffee-based/rush-coffee-blend.png",available:!0,stock:99,popular:!0,displayOrder:2,recipe:[{ingredientId:"coffee-beans-blend",quantity:18},{ingredientId:"hot-water",quantity:200}]},{id:"cb-03",name:"Caramel Chocolate Mocha",description:"A decadent mix of rich chocolate, espresso, and creamy caramel for the ultimate treat.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:"/coffee-based/caramel-chocolate-mocha.jpg",available:!0,stock:99,popular:!0,displayOrder:3,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"chocolate-sauce",quantity:20},{ingredientId:"caramel-sauce",quantity:15}]},{id:"cb-04",name:"Dark Chocolate Mocha",description:"A bold and intense mocha experience with premium dark chocolate and strong espresso.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:"/coffee-based/dark-chocolate-mocha.jpg",available:!0,stock:99,displayOrder:4},{id:"cb-05",name:"Mocha Latte",description:"A classic blend of smooth espresso, rich chocolate sauce, and steamed milk.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:"/coffee-based/mocha-latte.jpg",available:!0,stock:99,displayOrder:5},{id:"cb-06",name:"Americano",description:"Bold espresso shots topped with hot water to create a light layer of crema.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:"/coffee-based/americano.jpg",available:!0,stock:99,displayOrder:6},{id:"cb-07",name:"Biscoff Latte",description:"An indulgent latte infused with the irresistible flavor of caramelized Biscoff cookies.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:199}],imageUrl:"/coffee-based/biscoff-latte.jpg",available:!0,stock:99,displayOrder:7},{id:"cb-08",name:"Reeses Latte",description:"The perfect combination of peanut butter, chocolate, and espresso. A candy lover's dream.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:"/coffee-based/reeses-latte.jpg",available:!0,stock:99,displayOrder:8},{id:"cb-09",name:"Brown Sugar Latte",description:"A comforting latte sweetened with rich, molasses-like brown sugar syrup.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:79}],imageUrl:"/coffee-based/brown-sugar-latte.jpg",available:!0,stock:99,displayOrder:9},{id:"cb-10",name:"Iced Latte",description:"A simple classic. Chilled espresso with cold milk served over ice.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:69}],imageUrl:"/coffee-based/iced-latte.jpg",available:!0,stock:99,displayOrder:10},{id:"cb-11",name:"Orange Latte",description:"A unique and refreshing latte with a zesty hint of natural orange flavor.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:89}],imageUrl:"/coffee-based/orange-latte.jpg",available:!0,stock:99,displayOrder:11},{id:"cb-12",name:"Coffee Jelly",description:"A delightful iced coffee drink with chewy, coffee-flavored jelly cubes.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:99}],imageUrl:"/coffee-based/coffee-jelly.jpg",available:!0,stock:99,displayOrder:12},{id:"nc-01",name:"Red Velvet",description:"A sweet and creamy drink inspired by the classic red velvet cake, with hints of cocoa and vanilla.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:"/non-coffee/red-velvet.jpg",available:!0,stock:99,displayOrder:13},{id:"nc-02",name:"Red Velvet Matcha Latte",description:"A beautiful and delicious blend of earthy matcha and sweet red velvet flavors.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:"/non-coffee/red-velvet-matcha-latte.jpg",available:!0,stock:99,displayOrder:14},{id:"nc-03",name:"Milky Choco",description:"A rich and comforting chocolate drink made with high-quality cocoa and fresh milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:"/non-coffee/milky-choco.jpg",available:!0,stock:99,displayOrder:15},{id:"nc-04",name:"Strawberry Milk",description:"A refreshing and creamy drink made with real strawberries and fresh milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:"/non-coffee/strawberry-milk.jpg",available:!0,stock:99,displayOrder:16},{id:"nc-05",name:"Biscoff Milky",description:"A non-coffee treat blending the sweet, caramelized taste of Biscoff with creamy milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:"/non-coffee/biscoff-milky.jpg",available:!0,stock:99,displayOrder:17},{id:"nc-06",name:"Oreo Latte",description:"A fun and delicious drink packed with the classic cookies and cream flavor of Oreos.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:"/non-coffee/oreo-latte.jpg",available:!0,stock:99,displayOrder:18},{id:"ms-01",name:"Matcha Latte",description:"Premium Japanese matcha green tea with steamed milk, a perfect balance of earthy and creamy.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:89}],imageUrl:"/matcha-series/matcha-latte.jpg",available:!0,stock:99,popular:!0,displayOrder:19,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:200}]},{id:"ms-02",name:"Strawberry Matcha",description:"A delightful pairing of sweet strawberry puree and high-quality matcha green tea.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:109}],imageUrl:"/matcha-series/strawberry-matcha.jpg",available:!0,stock:99,displayOrder:20},{id:"ms-03",name:"Matcha Cream Cheese",description:"Earthy matcha topped with a rich, savory, and slightly sweet cream cheese foam.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:109}],imageUrl:"/matcha-series/matcha-cream-cheese.jpg",available:!0,stock:99,displayOrder:21},{id:"ms-04",name:"Matcha Oreo",description:"A creative blend of matcha and crushed Oreo cookies for a unique texture and flavor.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:"/matcha-series/matcha-oreo.jpg",available:!0,stock:99,displayOrder:22},{id:"rf-01",name:"Flamangooverload Shake",description:"An explosive mix of flamingo and mango for an overload of fruity goodness.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:"/refreshments/flamangooverload.jpg",available:!0,stock:99,displayOrder:23},{id:"rf-02",name:"Mangoberry Shake",description:"A delightful blend of sweet mangoes and tangy berries, perfectly refreshing.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:"/refreshments/mangoberry.jpg",available:!0,stock:99,displayOrder:24},{id:"rf-03",name:"Mango Caramel Shake",description:"Creamy mango shake drizzled with rich, buttery caramel sauce.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:"/refreshments/mango-caramel.jpg",available:!0,stock:99,displayOrder:25},{id:"rf-04",name:"Blueberry Shake",description:"A classic fruit shake made with sweet and juicy blueberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:"/refreshments/blueberry-shake.jpg",available:!0,stock:99,displayOrder:26},{id:"rf-05",name:"Strawberry Shake",description:"A creamy and delicious shake made with ripe, sweet strawberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:"/refreshments/strawberry-shake.jpg",available:!0,stock:99,displayOrder:27},{id:"rf-06",name:"Green Apple Shake",description:"A tart and refreshing shake with the crisp taste of green apples.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:"/refreshments/green-apple-shake.jpg",available:!0,stock:99,displayOrder:28},{id:"rf-07",name:"Blueberry Soda Pop",description:"Fizzy and fun, this soda pop is bursting with sweet blueberry flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:"/refreshments/blueberry-soda.jpg",available:!0,stock:99,displayOrder:29},{id:"rf-08",name:"Strawberry Soda Pop",description:"A refreshing soda pop with the sweet taste of summer strawberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:"/refreshments/strawberry-soda.jpg",available:!0,stock:99,displayOrder:30},{id:"rf-09",name:"Green Apple Soda Pop",description:"A crisp and bubbly soda with a tangy green apple twist.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:"/refreshments/green-apple-soda.jpg",available:!0,stock:99,displayOrder:31},{id:"rf-10",name:"Lemon Soda Pop",description:"A zesty and invigorating soda pop with a classic lemon flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:"/refreshments/lemon-soda.jpg",available:!0,stock:99,displayOrder:32},{id:"rf-11",name:"Lychee Soda Pop",description:"An exotic and fragrant soda pop with the sweet, floral taste of lychee.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:"/refreshments/lychee-soda.jpg",available:!0,stock:99,displayOrder:33},{id:"rf-12",name:"Mango Soda Pop",description:"A tropical and bubbly soda bursting with sweet mango flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:"/refreshments/mango-soda.jpg",available:!0,stock:99,displayOrder:34},{id:"ml-01",name:"Breaded Bacon",description:"Crispy breaded bacon served with creamy white sauce and golden fries.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:119},{name:"Combo Meal",size:"w/ Fries & Drink",price:139}],imageUrl:"/menu/ala-carte-breaded-bacon-with-white-sauce and fries.jpg",comboImageUrl:"/menu/combo-meals-breaded-bacon-with-white-sauce,-fries-and-a-drink.jpg",available:!0,stock:99,popular:!0,displayOrder:35},{id:"ml-02",name:"Breaded Porkchop",description:"A juicy breaded porkchop fried to perfection, served with white sauce and fries.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:129},{name:"Combo Meal",size:"w/ Fries & Drink",price:149}],imageUrl:"/menu/ala-carte-breaded-porkchop-with-white-sauce-and-fries.jpg",comboImageUrl:"/menu/combo-meals-breaded-porkchop-with-white-sauce-and-fries-w-drink.jpg",available:!0,stock:99,popular:!0,displayOrder:36},{id:"ml-03",name:"Breaded Chicken",description:"Tender breaded chicken fillet with a side of fries and our signature white sauce.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:119},{name:"Combo Meal",size:"w/ Fries & Drink",price:139}],imageUrl:"/menu/ala-carte-chicken-with-white-sauce-and-fries.jpg",comboImageUrl:"/menu/combo-meals-breaded-chicken-with-white-sauce,-fries-and-a-drink.jpg",available:!0,stock:99,displayOrder:37}],iO=S.createContext(void 0),Xc=()=>{const t=S.useContext(iO);if(!t)throw new Error("useProduct must be used within a ProductProvider");return t},PQ=({children:t})=>{const[e,n]=S.useState([]),[s,r]=S.useState(!0),[i,a]=S.useState(null),o=S.useCallback(async()=>{r(!0);try{const w=(await xe.collection("products").orderBy("displayOrder","asc").get()).docs.map(T=>({id:T.id,...T.data()}));n(w)}catch(m){console.error("Error fetching products from Firestore: ",m),a("Could not connect to the database. Please check your connection and try again."),n([])}finally{r(!1)}},[]);S.useEffect(()=>{(async()=>{r(!0);const p=xe.collection("products");console.log("Syncing products with the latest mock data to ensure freshness...");try{const _=xe.batch();rO.forEach(w=>{const{id:T,...x}=w,v=p.doc(T);_.set(v,x)}),await _.commit(),console.log("Product sync complete.")}catch(_){console.error("Error syncing products:",_),a("Failed to sync the product database."),r(!1);return}await o()})()},[o]);const f={products:e,isLoading:s,error:i,addProduct:async m=>{try{await xe.collection("products").add(m),await o()}catch(p){throw console.error("Error adding product: ",p),new Error("Failed to add product.")}},updateProduct:async(m,p)=>{try{await xe.collection("products").doc(m).update(p),await o()}catch(_){throw console.error("Error updating product: ",_),new Error("Failed to update product.")}},deleteProduct:async m=>{try{await xe.collection("products").doc(m).delete(),await o()}catch(p){throw console.error("Error deleting product: ",p),new Error("Failed to delete product.")}}};return l.jsx(iO.Provider,{value:f,children:t})},aO=S.createContext(void 0),kn=()=>{const t=S.useContext(aO);if(t===void 0)throw new Error("useCart must be used within a CartProvider");return t},kQ=({children:t})=>{const[e,n]=S.useState([]),[s,r]=S.useState(!1),[i,a]=S.useState(null),[o,c]=S.useState(!0),{currentUser:u}=es(),{products:h,isLoading:f}=Xc();S.useEffect(()=>{if(i){const A=setTimeout(()=>a(null),4e3);return()=>clearTimeout(A)}},[i]);const m=S.useCallback(A=>{a(A)},[]);S.useEffect(()=>{u?(async()=>{var E;if(!(!u||f)){c(!0);try{const I=await xe.collection("users").doc(u.uid).get();if(I.exists){const k=(((E=I.data())==null?void 0:E.cart)||[]).map(j=>{const W=h.find(H=>H.id===j.productId);if(!W)return null;const ce=W.sizes.find(H=>H.name===j.sizeName);return ce?{id:`${W.id}-${ce.name}`,product:W,selectedSize:ce,quantity:j.quantity}:null}).filter(j=>j!==null);n(k)}}catch(N){console.error("Error fetching cart from Firestore:",N),m("Couldn't load your cart.")}finally{c(!1)}}})():(n([]),c(!1))},[u,h,f,m]);const p=S.useCallback(async A=>{if(u)try{const E=xe.collection("users").doc(u.uid),N=A.map(I=>({productId:I.product.id,sizeName:I.selectedSize.name,quantity:I.quantity}));await E.update({cart:N})}catch(E){console.error("Error updating Firestore cart:",E),m("Error saving your cart.")}},[u,m]),_=S.useMemo(()=>e.reduce((A,E)=>A+E.quantity,0),[e]),w=()=>r(!0),M={cartItems:e,isCartOpen:s,toastMessage:i,totalCartItems:_,isCartLoading:o,addToCart:(A,E)=>{const N=`${A.id}-${E.name}`;let I;e.find(k=>k.id===N)?I=e.map(k=>k.id===N?{...k,quantity:Math.min(k.quantity+1,A.stock)}:k):I=[...e,{id:N,product:A,selectedSize:E,quantity:1}],n(I),p(I),m(`${A.name} (${E.name}) added to cart!`),w()},addMultipleToCart:A=>{if(!A||A.length===0)return;let E=[...e],N=0;A.forEach(I=>{const P=`${I.product.id}-${I.selectedSize.name}`,k=E.findIndex(j=>j.id===P);if(k>-1){const j=E[k],W=j.quantity+I.quantity;E[k]={...j,quantity:Math.min(W,I.product.stock)}}else E.push({id:P,product:I.product,selectedSize:I.selectedSize,quantity:Math.min(I.quantity,I.product.stock)});N+=I.quantity}),n(E),p(E),m(`${N} item(s) added to your cart!`),w()},updateQuantity:(A,E)=>{let N;E<1?N=e.filter(I=>I.id!==A):N=e.map(I=>I.id===A?{...I,quantity:Math.min(E,I.product.stock)}:I),n(N),p(N)},removeFromCart:A=>{const E=e.find(I=>I.id===A),N=e.filter(I=>I.id!==A);n(N),p(N),E&&m(`${E.product.name} (${E.selectedSize.name}) removed from cart.`)},openCart:w,closeCart:()=>r(!1),showToast:m,clearCart:()=>{n([]),p([])}};return l.jsx(aO.Provider,{value:M,children:t})},Pt=({className:t,...e})=>l.jsxs("svg",{viewBox:"0 0 241 175",xmlns:"http://www.w3.org/2000/svg",className:t,fill:"currentColor",...e,children:[l.jsx("path",{d:"M153.092 78.5C178.275 50.84 210.393 19.4076 222.5 17.5C234.607 15.5924 239.5 30 239.5 30C239.5 30 244.137 46.596 236.388 72.8253C228.64 99.0547 199 128.5 199 128.5C199 128.5 177.5 152.5 147.5 167C147.5 167 114.686 183.001 104.889 169.159C95.0912 155.316 127.909 106.16 153.092 78.5Z"}),l.jsx("path",{d:"M8.99445 86.0801C8.99445 86.0801 -16.2682 31.1886 17.8826 14.4198C33.7618 9.56756 76 55.675 76 64.5C76 70 63.7899 86.337 59 101.5C54.887 114.52 55.557 134.266 52.0896 135.774C48.0468 137.533 37.3644 137.835 8.99445 86.0801Z"}),l.jsx("path",{d:"M47 12.5C41.0274 7.52362 41.5502 -7.59339e-06 52.5 0C63.4498 7.5934e-06 69.3348 2.24286 82.0884 7.45282C95.3718 12.8792 105.888 16.4103 109.463 23.875C111.5 32.5 107.979 33.026 103.5 38.5C99.0205 43.9741 96 44.1666 91 43.5C83.5342 42.5047 52.9726 17.4764 47 12.5Z"}),l.jsx("path",{d:"M200.048 20.8891C212.988 11.4339 207.491 2.52815 200.048 2.97405C192.604 3.41995 127.379 9.72972 89.5542 67.6673C85.4261 73.9905 72.4385 95.2439 69.1452 112.455C65.6022 130.971 65.8681 149.097 73.6272 157.74C81.0528 166.012 88.1891 164.145 92.2823 156.482C96.4277 148.721 97.4982 135.065 100.004 127.882C104.983 113.605 104.907 116.382 109.393 106.379C114.278 95.4879 120.938 86.2377 126.993 78.4363C154.543 42.9442 190.775 27.6646 200.048 20.8891Z"})]}),DQ=[{href:"/",label:"Home"},{href:"/about",label:"About"},{href:"/menu",label:"Menu"},{href:"/contact",label:"Contact"}],MQ=[{href:"/menu",label:"Menu"},{href:"/queue",label:"Queue"},{href:"/rewards",label:"Rewards"}],_I=[{href:"/profile",label:"My Profile",Icon:Vr},{href:"/rewards",label:"My Rewards",Icon:Yd},{href:"/about",label:"About",Icon:G9},{href:"/contact",label:"Contact",Icon:Or}],It=()=>{const[t,e]=S.useState(!1),[n,s]=S.useState(!1),r=S.useRef(null),{currentUser:i,logout:a}=es(),{totalCartItems:o,openCart:c}=kn(),u=ks(),h=i?MQ:DQ,f=()=>e(!1);S.useEffect(()=>{const T=x=>{r.current&&!r.current.contains(x.target)&&s(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]),S.useEffect(()=>{const T=()=>{window.innerWidth>=768&&e(!1)};return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),S.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[t]);const m=async()=>{await a(),f(),s(!1),u("/")},p=()=>e(!t),_=(T=!1)=>{const x="rounded-full text-sm font-semibold transition-colors",v="block w-full text-center py-3 text-base",b="px-6 py-2",R=T?f:void 0;return i?l.jsxs("div",{className:`relative ${T?"w-full":""}`,ref:r,children:[l.jsxs("button",{onClick:()=>s(!n),className:`flex w-full items-center justify-center gap-2 rounded-full border border-primary-600 px-4 py-2 text-sm font-semibold text-primary-600 transition-colors hover:bg-primary-50 ${T?"text-base":""}`,"aria-haspopup":"true","aria-expanded":n,children:[l.jsxs("span",{children:["Welcome, ",i.firstName,"!"]}),l.jsx(zh,{className:`h-4 w-4 transition-transform ${n?"rotate-180":""}`})]}),n&&!T&&l.jsx("div",{className:"absolute right-0 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:l.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[_I.map(D=>l.jsxs(ss,{to:D.href,onClick:()=>s(!1),className:({isActive:M})=>`flex items-center gap-3 px-4 py-2 text-sm transition-colors hover:bg-gray-100 ${M?"text-primary-600 font-semibold":"text-gray-700"}`,role:"menuitem",children:[l.jsx(D.Icon,{className:"h-4 w-4"}),D.label]},D.label)),i.role==="admin"&&l.jsxs(l.Fragment,{children:[l.jsx("hr",{className:"my-1"}),l.jsxs(ss,{to:"/admin",onClick:()=>s(!1),className:"flex items-center gap-3 px-4 py-2 text-sm font-semibold text-yellow-700 transition-colors hover:bg-yellow-50",role:"menuitem",children:[l.jsx(Qd,{className:"h-4 w-4"}),"Admin Dashboard"]})]}),l.jsx("hr",{className:"my-1"}),l.jsxs("button",{onClick:m,className:"flex w-full items-center gap-3 px-4 py-2 text-left text-sm text-red-600 transition-colors hover:bg-red-50",role:"menuitem",children:[l.jsx(JS,{className:"h-4 w-4"}),"Logout"]})]})})]}):l.jsxs("div",{className:`flex items-center ${T?"flex-col space-y-3":"gap-4"}`,children:[l.jsx(ss,{to:"/auth/login",onClick:R,className:`${x} border border-primary-600 text-primary-600 hover:bg-primary-50 ${T?v:b}`,children:"Login"}),l.jsx(ss,{to:"/auth/register",onClick:R,className:`${x} bg-primary-600 text-white shadow-sm hover:bg-primary-700 ${T?v:b}`,children:"Sign Up"})]})},w=()=>l.jsxs("button",{onClick:c,className:"relative rounded-full p-2 text-gray-700 transition hover:bg-gray-100","aria-label":`Open cart with ${o} items`,children:[l.jsx(Bb,{className:"h-6 w-6"}),o>0&&l.jsx("span",{className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white","aria-hidden":"true",children:o})]});return l.jsxs(l.Fragment,{children:[l.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-gray-200/80 bg-white/95 shadow-md backdrop-blur-sm",children:l.jsxs("div",{className:"container mx-auto flex h-20 items-center justify-between px-4 sm:px-6 lg:px-8",children:[l.jsxs(ss,{to:"/",className:"flex items-center gap-2",children:[l.jsx(Pt,{className:"h-8 w-8 text-primary-600"}),l.jsx("span",{className:"text-2xl font-bold text-primary-600",children:"Rush Coffee"})]}),l.jsx("nav",{className:"hidden items-center space-x-8 md:flex",children:h.map(T=>l.jsx(ss,{to:T.href,className:({isActive:x})=>`text-base font-medium transition-colors hover:text-primary-600 ${x?"text-primary-600":"text-gray-700"}`,children:T.label},T.label))}),l.jsxs("div",{className:"hidden items-center gap-2 md:flex",children:[_(),i&&l.jsx(w,{})]}),l.jsxs("div",{className:"flex items-center gap-2 md:hidden",children:[i&&l.jsx(w,{}),l.jsx("button",{onClick:p,className:"rounded-md p-2 text-gray-700 transition hover:bg-gray-100","aria-label":"Toggle menu","aria-expanded":t,children:l.jsx(gP,{className:"h-6 w-6"})})]})]})}),l.jsxs("div",{className:`fixed inset-0 z-40 transform transition-opacity duration-300 md:hidden ${t?"opacity-100":"opacity-0 pointer-events-none"}`,children:[l.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:f,"aria-hidden":"true"}),l.jsxs("div",{className:`fixed top-0 right-0 flex h-full w-4/5 max-w-sm flex-col bg-white shadow-2xl transition-transform duration-300 ease-in-out ${t?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"mobile-menu-title",children:[l.jsxs("div",{className:"flex items-center justify-between border-b p-4",children:[l.jsxs(ss,{to:"/",className:"flex items-center gap-2",onClick:f,children:[l.jsx(Pt,{className:"h-7 w-7 text-primary-600"}),l.jsx("span",{id:"mobile-menu-title",className:"text-xl font-bold text-primary-600",children:"Rush Coffee"})]}),l.jsx("button",{onClick:f,className:"rounded-md p-2 text-gray-700 transition hover:bg-gray-100","aria-label":"Close menu",children:l.jsx($r,{className:"h-6 w-6"})})]}),l.jsxs("nav",{className:"flex flex-1 flex-col gap-4 overflow-y-auto p-4",children:[h.map(T=>l.jsx(ss,{to:T.href,onClick:f,className:({isActive:x})=>`rounded-md px-3 py-2 text-lg font-medium transition-colors hover:bg-gray-100 ${x?"bg-primary-50 text-primary-600":"text-gray-800"}`,children:T.label},T.label)),i&&l.jsxs("div",{className:"border-t pt-4 mt-2",children:[_I.map(T=>l.jsxs(ss,{to:T.href,onClick:f,className:({isActive:x})=>`flex items-center gap-3 rounded-md px-3 py-2 text-lg font-medium transition-colors hover:bg-gray-100 ${x?"bg-primary-50 text-primary-600":"text-gray-800"}`,children:[l.jsx(T.Icon,{className:"h-5 w-5"}),T.label]},T.label)),i.role==="admin"&&l.jsxs(ss,{to:"/admin",onClick:f,className:({isActive:T})=>`flex items-center gap-3 rounded-md px-3 py-2 text-lg font-medium transition-colors hover:bg-yellow-50 ${T?"bg-yellow-100 text-yellow-800":"text-yellow-700"}`,children:[l.jsx(Qd,{className:"h-5 w-5"}),"Admin Dashboard"]})]})]}),l.jsx("div",{className:"mt-auto border-t p-4 space-y-3",children:i?l.jsxs("button",{onClick:m,className:"flex w-full items-center justify-center gap-2 rounded-full bg-red-500 px-6 py-3 text-base font-semibold text-white shadow-sm transition-colors hover:bg-red-600",children:[l.jsx(JS,{className:"h-5 w-5"}),"Logout"]}):_(!0)})]})]})]})},Rt=()=>l.jsxs("footer",{className:"bg-coffee-900 text-coffee-100",children:[l.jsxs("div",{className:"container mx-auto grid grid-cols-1 gap-8 px-6 py-12 md:grid-cols-2 lg:grid-cols-4",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs(je,{to:"/",className:"flex items-center gap-2",children:[l.jsx(Pt,{className:"h-8 w-8 text-primary-400"}),l.jsx("span",{className:"text-2xl font-bold text-primary-400",children:"Rush Coffee"})]}),l.jsx("p",{className:"font-semibold",children:"Premium coffee, no waiting."}),l.jsx("p",{className:"text-sm text-coffee-100/80",children:"Join the digital queue and get your coffee fix faster than ever."})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"mb-4 font-semibold text-primary-400",children:"Quick Links"}),l.jsxs("ul",{className:"space-y-2",children:[l.jsx("li",{children:l.jsx(je,{to:"/",className:"transition hover:text-primary-400",children:"Home"})}),l.jsx("li",{children:l.jsx(je,{to:"/about",className:"transition hover:text-primary-400",children:"About Us"})}),l.jsx("li",{children:l.jsx(je,{to:"/menu",className:"transition hover:text-primary-400",children:"Menu"})}),l.jsx("li",{children:l.jsx(je,{to:"/faq",className:"transition hover:text-primary-400",children:"FAQ"})}),l.jsx("li",{children:l.jsx(je,{to:"/contact",className:"transition hover:text-primary-400",children:"Contact"})})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"mb-4 font-semibold text-primary-400",children:"Legal"}),l.jsxs("ul",{className:"space-y-2",children:[l.jsx("li",{children:l.jsx(je,{to:"/terms",className:"transition hover:text-primary-400",children:"Terms of Service"})}),l.jsx("li",{children:l.jsx(je,{to:"/privacy",className:"transition hover:text-primary-400",children:"Privacy Policy"})}),l.jsx("li",{children:l.jsx(je,{to:"/cookies",className:"transition hover:text-primary-400",children:"Cookie Policy"})})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"mb-4 font-semibold text-primary-400",children:"Contact & Connect"}),l.jsx("address",{className:"not-italic",children:l.jsxs("ul",{className:"space-y-3",children:[l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx(Vb,{className:"mt-1 h-5 w-5 flex-shrink-0"}),l.jsx("span",{children:"123 Coffee Street, Manila"})]}),l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx(Or,{className:"h-5 w-5 flex-shrink-0"}),l.jsx("a",{href:"tel:+639171234567",className:"transition hover:text-primary-400",children:"+63 917 123 4567"})]}),l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx(nr,{className:"h-5 w-5 flex-shrink-0"}),l.jsx("a",{href:"mailto:hello@rushcoffee.ph",className:"transition hover:text-primary-400",children:"hello@rushcoffee.ph"})]})]})}),l.jsxs("div",{className:"mt-6 flex gap-4",children:[l.jsx("a",{href:"#","aria-label":"Facebook",className:"transition hover:text-primary-400",children:l.jsx(mP,{className:"h-6 w-6"})}),l.jsx("a",{href:"#","aria-label":"Instagram",className:"transition hover:text-primary-400",children:l.jsx(pP,{className:"h-6 w-6"})}),l.jsx("a",{href:"#","aria-label":"Twitter",className:"transition hover:text-primary-400",children:l.jsx(wP,{className:"h-6 w-6"})})]})]})]}),l.jsx("div",{className:"border-t border-coffee-800 bg-coffee-900/50",children:l.jsxs("div",{className:"container mx-auto flex flex-col items-center justify-between gap-2 px-6 py-4 text-center text-sm sm:flex-row",children:[l.jsxs("p",{children:[" ",new Date().getFullYear()," Rush Coffee. All rights reserved."]}),l.jsx("p",{children:"Made with  and "})]})})]}),OQ=[{Icon:jg,title:"Live Queue Updates",description:"Track your position in real-time and know exactly when your coffee will be ready. No more waiting around!",iconBgColor:"bg-primary-100",iconTextColor:"text-primary-600"},{Icon:Pt,title:"Order Ahead",description:"Browse our menu, customize your drink, and order from anywhere. Your coffee, your way.",iconBgColor:"bg-coffee-100",iconTextColor:"text-coffee-800"},{Icon:Yd,title:"Loyalty Rewards",description:"Earn points with every purchase and redeem for free drinks and exclusive perks.",iconBgColor:"bg-green-100",iconTextColor:"text-green-600"},{Icon:TP,title:"Multiple Payment Options",description:"Pay with GCash or cash on pickupwhatever works best for you.",iconBgColor:"bg-blue-100",iconTextColor:"text-blue-600"}],bI=[{number:1,Icon:gP,title:"Browse & Customize",description:"Explore our menu of premium coffee drinks and customize your order exactly how you like it.",hasAnimation:!0},{number:2,Icon:Ep,title:"Join Virtual Queue",description:"Place your order and automatically join the queue. Get your position and estimated wait time instantly."},{number:3,Icon:Cg,title:"Pickup & Enjoy",description:"Receive real-time notifications. When ready, breeze past the line and grab your coffee.",isPulsing:!0}],VQ=[{quote:"Rush Coffee changed my morning routine! No more waiting in long lines. I order on my way and pick up when it's ready. Absolutely love it!",name:"Sarah M.",title:"Regular Customer",initial:"S",avatarBg:"bg-primary-100",avatarText:"text-primary-600"},{quote:"The queue system is genius. I can track exactly when my coffee will be ready. Plus, earning rewards with every purchase is a nice bonus!",name:"Miguel R.",title:"Gold Member",initial:"M",avatarBg:"bg-blue-100",avatarText:"text-blue-600"},{quote:"Best coffee experience in Manila. Fast, convenient, and the coffee is always perfect. The mobile app makes everything so easy!",name:"Ana L.",title:"VIP Member",initial:"A",avatarBg:"bg-green-100",avatarText:"text-green-600"}],LQ=()=>{const{currentUser:t}=es(),e=t?"/menu":"/auth/register";return l.jsxs("div",{className:"bg-white",children:[l.jsx(It,{}),l.jsxs("main",{children:[l.jsxs("section",{className:"relative flex min-h-[calc(100vh-5rem)] items-center overflow-hidden bg-white",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary-50 via-coffee-100 to-white"}),l.jsx("div",{className:"container relative mx-auto max-w-7xl px-6 py-20",children:l.jsxs("div",{className:"grid grid-cols-1 items-center gap-12 lg:grid-cols-2",children:[l.jsxs("div",{className:"animate-fade-in-up text-center lg:text-left",children:[l.jsx("p",{className:"mb-4 font-medium text-primary-600",style:{animationDelay:"100ms",opacity:0},children:" Welcome to Rush Coffee"}),l.jsxs("h1",{className:"font-display text-5xl font-bold text-coffee-900 md:text-6xl lg:text-7xl",children:[l.jsx("span",{className:"block",style:{animation:"fade-in-up 0.8s ease-out 200ms forwards",opacity:0},children:"Skip the Line,"}),l.jsx("span",{className:"block text-primary-600",style:{animation:"fade-in-up 0.8s ease-out 300ms forwards",opacity:0},children:"Get Your Coffee"}),l.jsx("span",{className:"block",style:{animation:"fade-in-up 0.8s ease-out 400ms forwards",opacity:0},children:"Faster."})]}),l.jsx("p",{className:"mx-auto mt-6 max-w-2xl text-lg text-gray-600 md:text-xl lg:mx-0",style:{animation:"fade-in-up 0.8s ease-out 500ms forwards",opacity:0},children:"Join our digital queue system. Order ahead, track your position in real-time, and breeze through pickup. Your perfect cup awaitswithout the wait."}),l.jsxs("div",{className:"mt-8 flex flex-wrap justify-center gap-2 lg:justify-start",style:{animation:"fade-in-up 0.8s ease-out 600ms forwards",opacity:0},children:[l.jsx(Qt,{className:"animate-pulse-slow",children:" Real-Time Queue"}),l.jsx(Qt,{className:"animate-pulse-slow",children:" Mobile Ordering"}),l.jsx(Qt,{className:"animate-pulse-slow",children:" Rewards Program"})]}),l.jsxs("div",{className:"mt-8 flex flex-col items-center gap-4 sm:flex-row sm:justify-center lg:justify-start",style:{animation:"fade-in-up 0.8s ease-out 700ms forwards",opacity:0},children:[l.jsxs(je,{to:e,className:"flex w-full items-center justify-center gap-2 rounded-full bg-primary-600 px-8 py-4 text-lg font-semibold text-white shadow-lg transition-transform hover:scale-105 hover:bg-primary-700 sm:w-auto",children:[l.jsx(Pt,{className:"h-5 w-5"}),"Order Now"]}),l.jsxs("a",{href:"#features",className:"flex w-full items-center justify-center gap-2 rounded-full border-2 border-primary-600 px-8 py-4 text-lg font-semibold text-primary-600 transition-transform hover:scale-105 hover:bg-primary-50 sm:w-auto",children:[l.jsx(d9,{className:"h-5 w-5"}),"View Features"]})]}),l.jsx("p",{className:"mt-6 text-sm text-gray-500",style:{animation:"fade-in-up 0.8s ease-out 800ms forwards",opacity:0},children:"Join 5,000+ happy customers "})]}),l.jsxs("div",{className:"relative hidden h-96 lg:flex lg:items-center lg:justify-center",children:[l.jsx("div",{className:"absolute h-80 w-80 animate-float rounded-full bg-primary-200/50 blur-3xl"}),l.jsx("div",{className:"absolute bottom-0 right-0 h-64 w-64 animate-float-delay rounded-full bg-coffee-800/10 blur-2xl"}),l.jsx("div",{className:"relative animate-fade-in-up",style:{animationDelay:"500ms",opacity:0},children:l.jsx(Pt,{className:"h-auto w-[250px] animate-float drop-shadow-2xl lg:w-[350px]"})})]})]})})]}),l.jsx("section",{id:"features",className:"bg-white px-6 py-20",children:l.jsxs("div",{className:"container mx-auto max-w-7xl",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"mb-2 font-medium text-primary-600",children:"Why Rush Coffee?"}),l.jsx("h2",{className:"mb-4 font-display text-3xl font-bold text-coffee-900 md:text-4xl",children:"Everything You Need for a Seamless Coffee Experience"}),l.jsx("p",{className:"mx-auto mb-12 max-w-2xl text-gray-600",children:"From ordering to pickup, we've got you covered."})]}),l.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:OQ.map((n,s)=>l.jsxs(ye,{hover:!0,className:"text-center",children:[l.jsx("div",{className:`mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-xl ${n.iconBgColor}`,children:l.jsx(n.Icon,{className:`h-8 w-8 ${n.iconTextColor}`})}),l.jsx("h3",{className:"mb-2 font-display text-xl font-semibold text-coffee-900",children:n.title}),l.jsx("p",{className:"text-sm leading-relaxed text-gray-600",children:n.description})]},s))})]})}),l.jsx("section",{id:"how-it-works",className:"bg-gradient-to-b from-coffee-50 to-white px-6 py-20",children:l.jsxs("div",{className:"container mx-auto max-w-7xl",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"mb-2 font-medium text-primary-600",children:"Simple Process"}),l.jsx("h2",{className:"mb-4 font-display text-3xl font-bold text-coffee-900 md:text-4xl",children:"How Rush Coffee Works"}),l.jsx("p",{className:"mx-auto mb-16 max-w-2xl text-gray-600",children:"Get your perfect cup in three easy steps."})]}),l.jsx("div",{className:"flex flex-col items-stretch justify-center gap-16 lg:flex-row lg:items-center lg:gap-8",children:bI.map((n,s)=>l.jsxs(S.Fragment,{children:[l.jsxs("div",{className:"relative w-full max-w-sm flex-1 text-center",children:[l.jsx("div",{className:"absolute -top-4 left-1/2 z-10 flex h-12 w-12 -translate-x-1/2 items-center justify-center rounded-full bg-primary-600 font-display text-xl font-bold text-white shadow-lg",children:n.number}),l.jsxs(ye,{className:"pt-8",children:[l.jsxs("div",{className:"relative mx-auto flex h-20 w-20 items-center justify-center rounded-2xl bg-gradient-to-br from-primary-100 to-coffee-100 p-4",children:[n.hasAnimation&&l.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-2xl",children:[l.jsx("div",{className:"absolute left-1/2 top-2 h-4 w-px -translate-x-1/2 animate-steam-1 rounded-full bg-primary-300/80"}),l.jsx("div",{className:"absolute left-1/3 top-2 h-5 w-px animate-steam-2 rounded-full bg-primary-300/80"}),l.jsx("div",{className:"absolute left-2/3 top-2 h-3 w-px animate-steam-1 rounded-full bg-primary-300/80"})]}),l.jsx(n.Icon,{className:`h-10 w-10 text-primary-600 ${n.isPulsing?"animate-pulse-slow":""}`})]}),l.jsx("h3",{className:"mb-2 mt-4 font-display text-xl font-semibold text-coffee-900",children:n.title}),l.jsx("p",{className:"text-sm text-gray-600",children:n.description})]})]}),s<bI.length-1&&l.jsx("div",{className:"hidden text-primary-400 lg:flex",children:l.jsx(Zl,{className:"h-10 w-10"})})]},n.number))})]})}),l.jsx("section",{id:"testimonials",className:"bg-white py-20 px-6",children:l.jsxs("div",{className:"container mx-auto max-w-7xl",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"mb-2 font-medium text-primary-600",children:"Customer Love"}),l.jsx("h2",{className:"mb-4 font-display text-3xl font-bold text-coffee-900 md:text-4xl",children:"What Our Customers Say"}),l.jsx("p",{className:"mx-auto mb-12 max-w-2xl text-gray-600",children:"Join thousands of satisfied coffee lovers."})]}),l.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:VQ.map((n,s)=>l.jsxs(ye,{hover:!0,className:"flex flex-col border-l-4 border-primary-400 transition-transform duration-300 hover:scale-105",children:[l.jsx(vz,{className:"h-8 w-8 text-primary-200"}),l.jsx("div",{className:"my-4 text-yellow-400",children:""}),l.jsxs("p",{className:"flex-grow font-sans italic text-gray-700",children:['"',n.quote,'"']}),l.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[l.jsx("div",{className:`flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full font-bold ${n.avatarBg} ${n.avatarText}`,children:n.initial}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-coffee-900",children:n.name}),l.jsx(Qt,{className:"bg-gray-100 text-gray-600 text-xs px-2 py-0.5",children:n.title})]})]})]},s))})]})}),l.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-r from-primary-600 via-coffee-600 to-primary-700 py-16 px-6",children:[l.jsx("div",{className:"absolute top-0 left-0 -translate-x-1/3 -translate-y-1/3 opacity-10",children:l.jsx(Pt,{className:"h-48 w-48 animate-float text-white"})}),l.jsx("div",{className:"absolute bottom-0 right-0 translate-x-1/3 translate-y-1/3 opacity-10",children:l.jsx(Pt,{className:"h-64 w-64 animate-float-delay text-white"})}),l.jsxs("div",{className:"relative z-10 mx-auto max-w-4xl text-center",children:[l.jsxs("div",{className:"relative mx-auto mb-4 inline-block",children:[l.jsx("span",{className:"text-5xl",role:"img","aria-label":"Coffee cup",children:""}),l.jsxs("div",{className:"absolute -top-4 left-0 right-0 h-12",children:[l.jsx("div",{className:"absolute left-1/2 h-6 w-px -translate-x-1/2 animate-steam-1 rounded-full bg-white/50"}),l.jsx("div",{className:"absolute left-1/3 h-8 w-px animate-steam-2 rounded-full bg-white/50"}),l.jsx("div",{className:"absolute left-2/3 h-5 w-px animate-steam-1 rounded-full bg-white/50"})]})]}),l.jsx("h2",{className:"mb-4 font-display text-4xl font-bold text-white md:text-5xl",children:"Ready to Rush Through Your Day?"}),l.jsx("p",{className:"mb-2 text-xl text-primary-100",children:"Join 5,000+ customers who've already skipped the line."}),l.jsxs("div",{className:"my-8 flex flex-col items-center justify-center gap-4 sm:flex-row",children:[l.jsx("span",{className:"rounded-full bg-white/10 px-4 py-2 text-sm font-medium text-white backdrop-blur",children:"10,000+ Orders Completed"}),l.jsx("span",{className:"rounded-full bg-white/10 px-4 py-2 text-sm font-medium text-white backdrop-blur",children:"4.9 Average Rating"}),l.jsx("span",{className:"rounded-full bg-white/10 px-4 py-2 text-sm font-medium text-white backdrop-blur",children:"< 5 min Average Wait"})]}),l.jsxs(je,{to:e,className:"inline-flex transform items-center justify-center gap-2 rounded-full bg-white px-8 py-4 text-lg font-semibold text-primary-600 shadow-lg transition hover:scale-105 hover:shadow-2xl",children:["Start Ordering Now",l.jsx(Zl,{className:"h-5 w-5"})]}),l.jsxs("p",{className:"mt-4 text-sm",children:[l.jsx("span",{className:"text-white/80",children:"Already have an account? "}),l.jsx(je,{to:"/auth/login",className:"font-semibold text-white underline transition hover:text-primary-100",children:"Login"})]})]})]})]}),l.jsx(Rt,{})]})},UQ=()=>l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),l.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),l.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),l.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),zQ=()=>{const[t,e]=S.useState(""),[n,s]=S.useState(""),[r,i]=S.useState(!1),[a,o]=S.useState(!1),[c,u]=S.useState({}),[h,f]=S.useState(null),[m,p]=S.useState(!1),[_,w]=S.useState(!1),T=ks(),{login:x,signInWithGoogle:v}=es(),b=()=>{const M={};return t?/\S+@\S+\.\S+/.test(t)||(M.email="Email address is invalid"):M.email="Email is required",n||(M.password="Password is required"),M},R=async M=>{M.preventDefault(),f(null);const A=b();if(Object.keys(A).length>0){u(A);return}u({}),p(!0);try{await x(t,n,a),T("/")}catch(E){let N="An unexpected error occurred. Please try again.";switch(E.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":N="Invalid email or password. Please try again.";break;case"auth/too-many-requests":N="Too many failed login attempts. Please try again later.";break}f(N)}finally{p(!1)}},D=async()=>{f(null),w(!0);try{await v(),T("/")}catch(M){console.error("Google Sign-In Error: ",M.code,M.message),f("Failed to sign in with Google. Please try again.")}finally{w(!1)}};return l.jsxs("div",{className:"flex min-h-screen flex-col bg-gradient-to-br from-primary-50 via-coffee-50 to-white",children:[l.jsx(It,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center px-4 py-12 sm:px-6 lg:px-8",children:l.jsx("div",{className:"w-full max-w-md",children:l.jsxs(ye,{className:"rounded-2xl p-8 shadow-xl",children:[l.jsxs("div",{className:"mb-6 text-center",children:[l.jsx(Pt,{className:"mx-auto h-12 w-12 text-primary-600"}),l.jsx("h2",{className:"mt-4 font-display text-3xl font-bold text-coffee-900",children:"Rush Coffee"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Welcome back! "})]}),h&&l.jsxs("div",{className:"mb-4 flex items-start gap-3 rounded-lg bg-red-50 p-4 text-sm text-red-700",role:"alert",children:[l.jsx(da,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),l.jsx("div",{children:h})]}),l.jsxs("form",{onSubmit:R,noValidate:!0,className:"space-y-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),l.jsx(nr,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:M=>e(M.target.value),className:`w-full rounded-lg border py-3 pl-10 pr-3 text-gray-900 placeholder:text-gray-400 transition-colors focus:outline-none focus:ring-2 ${c.email?"border-red-500 ring-red-500":"border-gray-300 focus:border-primary-500 focus:ring-primary-500"}`,placeholder:"Email address","aria-invalid":!!c.email,"aria-describedby":"email-error"}),c.email&&l.jsx("p",{id:"email-error",className:"mt-1 text-xs text-red-600",role:"alert",children:c.email})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),l.jsx(wp,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{id:"password",name:"password",type:r?"text":"password",autoComplete:"current-password",required:!0,value:n,onChange:M=>s(M.target.value),className:`w-full rounded-lg border py-3 pl-10 pr-10 text-gray-900 placeholder:text-gray-400 transition-colors focus:outline-none focus:ring-2 ${c.password?"border-red-500 ring-red-500":"border-gray-300 focus:border-primary-500 focus:ring-primary-500"}`,placeholder:"Password","aria-invalid":!!c.password,"aria-describedby":"password-error"}),l.jsx("button",{type:"button",onClick:()=>i(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600","aria-label":r?"Hide password":"Show password",children:r?l.jsx(_x,{className:"h-5 w-5"}):l.jsx(bx,{className:"h-5 w-5"})}),c.password&&l.jsx("p",{id:"password-error",className:"mt-1 text-xs text-red-600",role:"alert",children:c.password})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:a,onChange:M=>o(M.target.checked),className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),l.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),l.jsx("div",{className:"text-sm",children:l.jsx(je,{to:"/auth/forgot-password",className:"font-medium text-primary-600 hover:text-primary-500",children:"Forgot your password?"})})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:m||_,className:"flex w-full justify-center rounded-full bg-primary-600 px-4 py-3 text-base font-semibold text-white shadow-sm transition-colors hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-primary-400",children:m?l.jsx(xt,{className:"h-6 w-6 animate-spin"}):"Login"})})]}),l.jsxs("div",{className:"my-6 flex items-center",children:[l.jsx("div",{className:"flex-grow border-t border-gray-300"}),l.jsx("span",{className:"mx-4 flex-shrink text-sm text-gray-500",children:"or"}),l.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),l.jsxs("button",{type:"button",disabled:m||_,onClick:D,className:"flex w-full items-center justify-center gap-3 rounded-full border border-gray-300 px-4 py-3 text-base font-medium text-gray-700 transition-colors hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-60",children:[_?l.jsx(xt,{className:"h-5 w-5 animate-spin"}):l.jsx(UQ,{}),"Continue with Google"]}),l.jsxs("p",{className:"mt-8 text-center text-sm text-gray-600",children:["Don't have an account?"," ",l.jsx(je,{to:"/auth/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign up"})]})]})})}),l.jsx(Rt,{})]})},FQ=()=>l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),l.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),l.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),l.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),BQ=t=>{let e=0;return t.length>=8&&e++,t.match(/[a-z]/)&&e++,t.match(/[A-Z]/)&&e++,t.match(/[0-9]/)&&e++,t.match(/[^a-zA-Z0-9]/)&&e++,e/5*100},el=({name:t,label:e,type:n,placeholder:s,Icon:r,children:i,autoComplete:a,value:o,onChange:c,onBlur:u,error:h,touched:f})=>{const m=f&&h,p=f&&!h&&o;return l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:t,className:"sr-only",children:e}),l.jsx(r,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{id:t,name:t,type:n,autoComplete:a,required:!["phone"].includes(t),value:o,onChange:c,onBlur:u,className:`w-full rounded-lg border py-3 pl-10 pr-10 text-gray-900 placeholder:text-gray-400 transition-colors focus:outline-none focus:ring-2 ${m?"border-red-500 ring-red-500":p?"border-green-500":"border-gray-300 focus:border-primary-500 focus:ring-primary-500"}`,placeholder:s,"aria-invalid":!!m,"aria-describedby":`${t}-error`}),i,m?l.jsx($r,{className:"absolute right-3 top-1/2 h-5 w-5 -translate-y-1/2 text-red-500"}):null,p?l.jsx(Wi,{className:"absolute right-3 top-1/2 h-5 w-5 -translate-y-1/2 text-green-500"}):null,m&&l.jsx("p",{id:`${t}-error`,className:"mt-1 text-xs text-red-600",role:"alert",children:h})]})},qQ=()=>{const[t,e]=S.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",terms:!1}),[n,s]=S.useState({}),[r,i]=S.useState({}),[a,o]=S.useState(null),[c,u]=S.useState(!1),[h,f]=S.useState(!1),[m,p]=S.useState(!1),[_,w]=S.useState(!1),[T,x]=S.useState(0),v=ks(),{register:b,signInWithGoogle:R}=es(),D=S.useCallback(()=>{const k={};return t.firstName?t.firstName.length<2&&(k.firstName="First name must be at least 2 characters"):k.firstName="First name is required",t.lastName?t.lastName.length<2&&(k.lastName="Last name must be at least 2 characters"):k.lastName="Last name is required",t.email?/\S+@\S+\.\S+/.test(t.email)||(k.email="Email address is invalid"):k.email="Email is required",t.phone&&!/^(09|\+639)\d{9}$/.test(t.phone)&&(k.phone="Invalid Philippine phone number"),t.password?t.password.length<8?k.password="Password must be at least 8 characters":/(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])/.test(t.password)||(k.password="Must contain uppercase, lowercase, and a number"):k.password="Password is required",t.confirmPassword?t.password!==t.confirmPassword&&(k.confirmPassword="Passwords do not match"):k.confirmPassword="Please confirm your password",t.terms||(k.terms="You must accept the terms and conditions"),k},[t]);S.useEffect(()=>{r.password&&x(BQ(t.password))},[t.password,r.password]),S.useEffect(()=>{Object.keys(r).length>0&&s(D())},[t,r,D]);const M=k=>{const{name:j,value:W,type:ce,checked:H}=k.target;e(ee=>({...ee,[j]:ce==="checkbox"?H:W}))},A=k=>{const{name:j}=k.target;i(W=>({...W,[j]:!0}))},E=async k=>{k.preventDefault(),o(null),i({firstName:!0,lastName:!0,email:!0,phone:!0,password:!0,confirmPassword:!0,terms:!0});const j=D();if(Object.keys(j).length>0){s(j);return}u(!0);try{await b(t.email,t.password,t.firstName,t.lastName,t.phone),v("/")}catch(W){let ce="An unexpected error occurred. Please try again.";switch(W.code){case"auth/email-already-in-use":ce="This email address is already registered.";break;case"auth/invalid-email":ce="The email address is not valid.";break;case"auth/weak-password":ce="The password is too weak.";break}o(ce)}finally{u(!1)}},N=async()=>{o(null),f(!0);try{await R(),v("/")}catch(k){console.error("Google Sign-Up Error: ",k.code,k.message),o("Failed to sign up with Google. Please try again.")}finally{f(!1)}},I=()=>T<40?"bg-red-500":T<80?"bg-yellow-500":"bg-green-500",P=()=>T<40?"Weak":T<80?"Medium":"Strong";return l.jsxs("div",{className:"flex min-h-screen flex-col bg-gradient-to-br from-primary-50 via-coffee-50 to-white",children:[l.jsx(It,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center px-4 py-12 sm:px-6 lg:px-8",children:l.jsx("div",{className:"w-full max-w-2xl",children:l.jsxs(ye,{className:"rounded-2xl p-8 shadow-xl",children:[l.jsxs("div",{className:"mb-6 text-center",children:[l.jsx(Pt,{className:"mx-auto h-12 w-12 text-primary-600"}),l.jsx("h2",{className:"mt-4 font-display text-3xl font-bold text-coffee-900",children:"Join Rush Coffee"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Start skipping the line today "})]}),a&&l.jsxs("div",{className:"mb-4 flex items-start gap-3 rounded-lg bg-red-50 p-4 text-sm text-red-700",role:"alert",children:[l.jsx(da,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),l.jsx("div",{children:a})]}),l.jsxs("form",{onSubmit:E,noValidate:!0,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 gap-x-6 gap-y-6 sm:grid-cols-2",children:[l.jsx(el,{name:"firstName",label:"First Name",type:"text",placeholder:"First Name",Icon:Vr,autoComplete:"given-name",value:t.firstName,onChange:M,onBlur:A,error:n.firstName,touched:r.firstName}),l.jsx(el,{name:"lastName",label:"Last Name",type:"text",placeholder:"Last Name",Icon:Vr,autoComplete:"family-name",value:t.lastName,onChange:M,onBlur:A,error:n.lastName,touched:r.lastName})]}),l.jsx(el,{name:"email",label:"Email address",type:"email",placeholder:"Email address",Icon:nr,autoComplete:"email",value:t.email,onChange:M,onBlur:A,error:n.email,touched:r.email}),l.jsx(el,{name:"phone",label:"Phone Number (Optional)",type:"tel",placeholder:"Phone Number (e.g., 09xxxxxxxxx)",Icon:Or,autoComplete:"tel",value:t.phone,onChange:M,onBlur:A,error:n.phone,touched:r.phone}),l.jsxs("div",{className:"relative",children:[l.jsx(el,{name:"password",label:"Password",type:m?"text":"password",placeholder:"Password",Icon:wp,autoComplete:"new-password",value:t.password,onChange:M,onBlur:A,error:n.password,touched:r.password,children:l.jsx("button",{type:"button",onClick:()=>p(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 z-10","aria-label":m?"Hide password":"Show password",children:m?l.jsx(_x,{className:"h-5 w-5"}):l.jsx(bx,{className:"h-5 w-5"})})}),r.password&&l.jsxs("div",{className:"mt-2 space-y-1",children:[l.jsx("div",{className:"h-2 w-full rounded-full bg-gray-200",children:l.jsx("div",{className:`h-2 rounded-full ${I()}`,style:{width:`${T}%`,transition:"width 0.3s, background-color 0.3s"}})}),l.jsx("p",{className:"text-xs font-medium",style:{color:I().replace("bg-","text-")},children:P()})]})]}),l.jsx(el,{name:"confirmPassword",label:"Confirm Password",type:_?"text":"password",placeholder:"Confirm Password",Icon:wp,autoComplete:"new-password",value:t.confirmPassword,onChange:M,onBlur:A,error:n.confirmPassword,touched:r.confirmPassword,children:l.jsx("button",{type:"button",onClick:()=>w(!_),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 z-10","aria-label":_?"Hide password":"Show password",children:_?l.jsx(_x,{className:"h-5 w-5"}):l.jsx(bx,{className:"h-5 w-5"})})}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex h-6 items-center",children:l.jsx("input",{id:"terms",name:"terms",type:"checkbox",checked:t.terms,onChange:M,onBlur:A,className:`h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500 ${r.terms&&n.terms?"border-red-500":""}`})}),l.jsxs("div",{className:"ml-3 text-sm leading-6",children:[l.jsxs("label",{htmlFor:"terms",className:"font-medium text-gray-900",children:["I agree to the"," ",l.jsx(je,{to:"/terms",className:"font-semibold text-primary-600 hover:underline",children:"Terms of Service"})," and ",l.jsx(je,{to:"/privacy",className:"font-semibold text-primary-600 hover:underline",children:"Privacy Policy"}),"."]}),r.terms&&n.terms&&l.jsx("p",{className:"mt-1 text-xs text-red-600",children:n.terms})]})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:c||h,className:"flex w-full justify-center rounded-full bg-primary-600 px-4 py-3 text-base font-semibold text-white shadow-sm transition-colors hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-primary-400",children:c?l.jsx(xt,{className:"h-6 w-6 animate-spin"}):"Create Account"})})]}),l.jsxs("div",{className:"my-6 flex items-center",children:[l.jsx("div",{className:"flex-grow border-t border-gray-300"}),l.jsx("span",{className:"mx-4 flex-shrink text-sm text-gray-500",children:"or"}),l.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),l.jsxs("button",{type:"button",disabled:c||h,onClick:N,className:"flex w-full items-center justify-center gap-3 rounded-full border border-gray-300 px-4 py-3 text-base font-medium text-gray-700 transition-colors hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-60",children:[h?l.jsx(xt,{className:"h-5 w-5 animate-spin"}):l.jsx(FQ,{}),"Sign up with Google"]}),l.jsxs("p",{className:"mt-8 text-center text-sm text-gray-600",children:["Already have an account?"," ",l.jsx(je,{to:"/auth/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Login"})]})]})})}),l.jsx(Rt,{})]})},HQ=()=>{const[t,e]=S.useState(""),[n,s]=S.useState(null),[r,i]=S.useState(null),[a,o]=S.useState(!1),{sendPasswordReset:c}=es(),u=async h=>{if(h.preventDefault(),s(null),i(null),t){if(!/\S+@\S+\.\S+/.test(t)){s("Please enter a valid email address");return}}else{s("Email is required");return}o(!0);try{await c(t),i("Password reset link sent to your email. Please check your inbox.")}catch(f){let m="An unexpected error occurred. Please try again.";(f.code==="auth/user-not-found"||f.code==="auth/invalid-email")&&(m="No user found with this email address."),s(m)}finally{o(!1)}};return l.jsxs("div",{className:"flex min-h-screen flex-col bg-gradient-to-br from-primary-50 via-coffee-50 to-white",children:[l.jsx(It,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center px-4 py-12 sm:px-6 lg:px-8",children:l.jsx("div",{className:"w-full max-w-md",children:l.jsxs(ye,{className:"rounded-2xl p-8 shadow-xl",children:[l.jsxs("div",{className:"mb-6 text-center",children:[l.jsx(Pt,{className:"mx-auto h-12 w-12 text-primary-600"}),l.jsx("h2",{className:"mt-4 font-display text-3xl font-bold text-coffee-900",children:"Reset Password"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Enter your email to receive a reset link."})]}),n&&l.jsxs("div",{className:"mb-4 flex items-center gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-700",role:"alert",children:[l.jsx(da,{className:"h-5 w-5 flex-shrink-0"}),l.jsx("span",{children:n})]}),r&&l.jsxs("div",{className:"mb-4 flex items-center gap-2 rounded-lg bg-green-50 p-3 text-sm text-green-700",role:"alert",children:[l.jsx(Ob,{className:"h-5 w-5 flex-shrink-0"}),l.jsx("span",{children:r})]}),l.jsxs("form",{onSubmit:u,noValidate:!0,className:"space-y-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),l.jsx(nr,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:h=>e(h.target.value),className:"w-full rounded-lg border border-gray-300 py-3 pl-10 pr-3 text-gray-900 placeholder:text-gray-400 transition-colors focus:outline-none focus:ring-2 focus:border-primary-500 focus:ring-primary-500",placeholder:"Email address"})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:a,className:"flex w-full justify-center rounded-full bg-primary-600 px-4 py-3 text-base font-semibold text-white shadow-sm transition-colors hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-primary-400",children:a?l.jsx(xt,{className:"h-6 w-6 animate-spin"}):"Send Reset Link"})})]}),l.jsxs("p",{className:"mt-8 text-center text-sm text-gray-600",children:["Remember your password?"," ",l.jsx(je,{to:"/auth/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Back to Login"})]})]})})}),l.jsx(Rt,{})]})},V1=S.createContext({});function L1(t){const e=S.useRef(null);return e.current===null&&(e.current=t()),e.current}const wy=S.createContext(null),U1=S.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class GQ extends S.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function $Q({children:t,isPresent:e}){const n=S.useId(),s=S.useRef(null),r=S.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=S.useContext(U1);return S.useInsertionEffect(()=>{const{width:a,height:o,top:c,left:u}=r.current;if(e||!s.current||!a||!o)return;s.current.dataset.motionPopId=n;const h=document.createElement("style");return i&&(h.nonce=i),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${c}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),l.jsx(GQ,{isPresent:e,childRef:s,sizeRef:r,children:S.cloneElement(t,{ref:s})})}const KQ=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:a})=>{const o=L1(WQ),c=S.useId(),u=S.useCallback(f=>{o.set(f,!0);for(const m of o.values())if(!m)return;s&&s()},[o,s]),h=S.useMemo(()=>({id:c,initial:e,isPresent:n,custom:r,onExitComplete:u,register:f=>(o.set(f,!1),()=>o.delete(f))}),i?[Math.random(),u]:[n,u]);return S.useMemo(()=>{o.forEach((f,m)=>o.set(m,!1))},[n]),S.useEffect(()=>{!n&&!o.size&&s&&s()},[n]),a==="popLayout"&&(t=l.jsx($Q,{isPresent:n,children:t})),l.jsx(wy.Provider,{value:h,children:t})};function WQ(){return new Map}function oO(t=!0){const e=S.useContext(wy);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:r}=e,i=S.useId();S.useEffect(()=>{t&&r(i)},[t]);const a=S.useCallback(()=>t&&s&&s(i),[i,s,t]);return!n&&s?[!1,a]:[!0]}const sm=t=>t.key||"";function wI(t){const e=[];return S.Children.forEach(t,n=>{S.isValidElement(n)&&e.push(n)}),e}const z1=typeof window<"u",lO=z1?S.useLayoutEffect:S.useEffect,df=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:r=!0,mode:i="sync",propagate:a=!1})=>{const[o,c]=oO(a),u=S.useMemo(()=>wI(t),[t]),h=a&&!o?[]:u.map(sm),f=S.useRef(!0),m=S.useRef(u),p=L1(()=>new Map),[_,w]=S.useState(u),[T,x]=S.useState(u);lO(()=>{f.current=!1,m.current=u;for(let R=0;R<T.length;R++){const D=sm(T[R]);h.includes(D)?p.delete(D):p.get(D)!==!0&&p.set(D,!1)}},[T,h.length,h.join("-")]);const v=[];if(u!==_){let R=[...u];for(let D=0;D<T.length;D++){const M=T[D],A=sm(M);h.includes(A)||(R.splice(D,0,M),v.push(M))}i==="wait"&&v.length&&(R=v),x(wI(R)),w(u);return}const{forceRender:b}=S.useContext(V1);return l.jsx(l.Fragment,{children:T.map(R=>{const D=sm(R),M=a&&!o?!1:u===T||h.includes(D),A=()=>{if(p.has(D))p.set(D,!0);else return;let E=!0;p.forEach(N=>{N||(E=!1)}),E&&(b==null||b(),x(m.current),a&&(c==null||c()),s&&s())};return l.jsx(KQ,{isPresent:M,initial:!f.current||n?void 0:!1,custom:M?void 0:e,presenceAffectsLayout:r,mode:i,onExitComplete:M?void 0:A,children:R},D)})})},Wn=t=>t;let cO=Wn;function F1(t){let e;return()=>(e===void 0&&(e=t()),e)}const Tc=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s},Ir=t=>t*1e3,Rr=t=>t/1e3,YQ={useManualTiming:!1};function QQ(t){let e=new Set,n=new Set,s=!1,r=!1;const i=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(u){i.has(u)&&(c.schedule(u),t()),u(a)}const c={schedule:(u,h=!1,f=!1)=>{const p=f&&s?e:n;return h&&i.add(u),p.has(u)||p.add(u),u},cancel:u=>{n.delete(u),i.delete(u)},process:u=>{if(a=u,s){r=!0;return}s=!0,[e,n]=[n,e],e.forEach(o),e.clear(),s=!1,r&&(r=!1,c.process(u))}};return c}const rm=["read","resolveKeyframes","update","preRender","render","postRender"],XQ=40;function uO(t,e){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=rm.reduce((x,v)=>(x[v]=QQ(i),x),{}),{read:o,resolveKeyframes:c,update:u,preRender:h,render:f,postRender:m}=a,p=()=>{const x=performance.now();n=!1,r.delta=s?1e3/60:Math.max(Math.min(x-r.timestamp,XQ),1),r.timestamp=x,r.isProcessing=!0,o.process(r),c.process(r),u.process(r),h.process(r),f.process(r),m.process(r),r.isProcessing=!1,n&&e&&(s=!1,t(p))},_=()=>{n=!0,s=!0,r.isProcessing||t(p)};return{schedule:rm.reduce((x,v)=>{const b=a[v];return x[v]=(R,D=!1,M=!1)=>(n||_(),b.schedule(R,D,M)),x},{}),cancel:x=>{for(let v=0;v<rm.length;v++)a[rm[v]].cancel(x)},state:r,steps:a}}const{schedule:We,cancel:aa,state:qt,steps:ov}=uO(typeof requestAnimationFrame<"u"?requestAnimationFrame:Wn,!0),dO=S.createContext({strict:!1}),TI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ec={};for(const t in TI)Ec[t]={isEnabled:e=>TI[t].some(n=>!!e[n])};function JQ(t){for(const e in t)Ec[e]={...Ec[e],...t[e]}}const ZQ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||ZQ.has(t)}let hO=t=>!Zp(t);function eX(t){t&&(hO=e=>e.startsWith("on")?!Zp(e):t(e))}try{eX(require("@emotion/is-prop-valid").default)}catch{}function tX(t,e,n){const s={};for(const r in t)r==="values"&&typeof t.values=="object"||(hO(r)||n===!0&&Zp(r)||!e&&!Zp(r)||t.draggable&&r.startsWith("onDrag"))&&(s[r]=t[r]);return s}function nX(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...s)=>t(...s);return new Proxy(n,{get:(s,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const Ty=S.createContext({});function _h(t){return typeof t=="string"||Array.isArray(t)}function Ey(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const B1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],q1=["initial",...B1];function Sy(t){return Ey(t.animate)||q1.some(e=>_h(t[e]))}function fO(t){return!!(Sy(t)||t.variants)}function sX(t,e){if(Sy(t)){const{initial:n,animate:s}=t;return{initial:n===!1||_h(n)?n:void 0,animate:_h(s)?s:void 0}}return t.inherit!==!1?e:{}}function rX(t){const{initial:e,animate:n}=sX(t,S.useContext(Ty));return S.useMemo(()=>({initial:e,animate:n}),[EI(e),EI(n)])}function EI(t){return Array.isArray(t)?t.join(" "):t}const iX=Symbol.for("motionComponentSymbol");function Tl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function aX(t,e,n){return S.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):Tl(n)&&(n.current=s))},[e])}const H1=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),oX="framerAppearId",mO="data-"+H1(oX),{schedule:G1}=uO(queueMicrotask,!1),pO=S.createContext({});function lX(t,e,n,s,r){var i,a;const{visualElement:o}=S.useContext(Ty),c=S.useContext(dO),u=S.useContext(wy),h=S.useContext(U1).reducedMotion,f=S.useRef(null);s=s||c.renderer,!f.current&&s&&(f.current=s(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const m=f.current,p=S.useContext(pO);m&&!m.projection&&r&&(m.type==="html"||m.type==="svg")&&cX(f.current,n,r,p);const _=S.useRef(!1);S.useInsertionEffect(()=>{m&&_.current&&m.update(n,u)});const w=n[mO],T=S.useRef(!!w&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,w))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,w)));return lO(()=>{m&&(_.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),G1.render(m.render),T.current&&m.animationState&&m.animationState.animateChanges())}),S.useEffect(()=>{m&&(!T.current&&m.animationState&&m.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)===null||x===void 0||x.call(window,w)}),T.current=!1))}),m}function cX(t,e,n,s){const{layoutId:r,layout:i,drag:a,dragConstraints:o,layoutScroll:c,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:gO(t.parent)),t.projection.setOptions({layoutId:r,layout:i,alwaysMeasureLayout:!!a||o&&Tl(o),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,layoutScroll:c,layoutRoot:u})}function gO(t){if(t)return t.options.allowProjection!==!1?t.projection:gO(t.parent)}function uX({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:s,Component:r}){var i,a;t&&JQ(t);function o(u,h){let f;const m={...S.useContext(U1),...u,layoutId:dX(u)},{isStatic:p}=m,_=rX(u),w=s(u,p);if(!p&&z1){hX();const T=fX(m);f=T.MeasureLayout,_.visualElement=lX(r,w,m,e,T.ProjectionNode)}return l.jsxs(Ty.Provider,{value:_,children:[f&&_.visualElement?l.jsx(f,{visualElement:_.visualElement,...m}):null,n(r,u,aX(w,_.visualElement,h),w,p,_.visualElement)]})}o.displayName=`motion.${typeof r=="string"?r:`create(${(a=(i=r.displayName)!==null&&i!==void 0?i:r.name)!==null&&a!==void 0?a:""})`}`;const c=S.forwardRef(o);return c[iX]=r,c}function dX({layoutId:t}){const e=S.useContext(V1).id;return e&&t!==void 0?e+"-"+t:t}function hX(t,e){S.useContext(dO).strict}function fX(t){const{drag:e,layout:n}=Ec;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const mX=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $1(t){return typeof t!="string"||t.includes("-")?!1:!!(mX.indexOf(t)>-1||/[A-Z]/u.test(t))}function SI(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function K1(t,e,n,s){if(typeof e=="function"){const[r,i]=SI(s);e=e(n!==void 0?n:t.custom,r,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,i]=SI(s);e=e(n!==void 0?n:t.custom,r,i)}return e}const d_=t=>Array.isArray(t),pX=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),gX=t=>d_(t)?t[t.length-1]||0:t,on=t=>!!(t&&t.getVelocity);function Bm(t){const e=on(t)?t.get():t;return pX(e)?e.toValue():e}function yX({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},s,r,i){const a={latestValues:vX(s,r,i,t),renderState:e()};return n&&(a.onMount=o=>n({props:s,current:o,...a}),a.onUpdate=o=>n(o)),a}const yO=t=>(e,n)=>{const s=S.useContext(Ty),r=S.useContext(wy),i=()=>yX(t,e,s,r);return n?i():L1(i)};function vX(t,e,n,s){const r={},i=s(t,{});for(const m in i)r[m]=Bm(i[m]);let{initial:a,animate:o}=t;const c=Sy(t),u=fO(t);e&&u&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let h=n?n.initial===!1:!1;h=h||a===!1;const f=h?o:a;if(f&&typeof f!="boolean"&&!Ey(f)){const m=Array.isArray(f)?f:[f];for(let p=0;p<m.length;p++){const _=K1(t,m[p]);if(_){const{transitionEnd:w,transition:T,...x}=_;for(const v in x){let b=x[v];if(Array.isArray(b)){const R=h?b.length-1:0;b=b[R]}b!==null&&(r[v]=b)}for(const v in w)r[v]=w[v]}}}return r}const Jc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Uo=new Set(Jc),vO=t=>e=>typeof e=="string"&&e.startsWith(t),xO=vO("--"),xX=vO("var(--"),W1=t=>xX(t)?_X.test(t.split("/*")[0].trim()):!1,_X=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,_O=(t,e)=>e&&typeof t=="number"?e.transform(t):t,qr=(t,e,n)=>n>e?e:n<t?t:n,Zc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},bh={...Zc,transform:t=>qr(0,1,t)},im={...Zc,default:1},hf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),mi=hf("deg"),er=hf("%"),ne=hf("px"),bX=hf("vh"),wX=hf("vw"),AI={...er,parse:t=>er.parse(t)/100,transform:t=>er.transform(t*100)},TX={borderWidth:ne,borderTopWidth:ne,borderRightWidth:ne,borderBottomWidth:ne,borderLeftWidth:ne,borderRadius:ne,radius:ne,borderTopLeftRadius:ne,borderTopRightRadius:ne,borderBottomRightRadius:ne,borderBottomLeftRadius:ne,width:ne,maxWidth:ne,height:ne,maxHeight:ne,top:ne,right:ne,bottom:ne,left:ne,padding:ne,paddingTop:ne,paddingRight:ne,paddingBottom:ne,paddingLeft:ne,margin:ne,marginTop:ne,marginRight:ne,marginBottom:ne,marginLeft:ne,backgroundPositionX:ne,backgroundPositionY:ne},EX={rotate:mi,rotateX:mi,rotateY:mi,rotateZ:mi,scale:im,scaleX:im,scaleY:im,scaleZ:im,skew:mi,skewX:mi,skewY:mi,distance:ne,translateX:ne,translateY:ne,translateZ:ne,x:ne,y:ne,z:ne,perspective:ne,transformPerspective:ne,opacity:bh,originX:AI,originY:AI,originZ:ne},NI={...Zc,transform:Math.round},Y1={...TX,...EX,zIndex:NI,size:ne,fillOpacity:bh,strokeOpacity:bh,numOctaves:NI},SX={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},AX=Jc.length;function NX(t,e,n){let s="",r=!0;for(let i=0;i<AX;i++){const a=Jc[i],o=t[a];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(a.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const u=_O(o,Y1[a]);if(!c){r=!1;const h=SX[a]||a;s+=`${h}(${u}) `}n&&(e[a]=u)}}return s=s.trim(),n?s=n(e,r?"":s):r&&(s="none"),s}function Q1(t,e,n){const{style:s,vars:r,transformOrigin:i}=t;let a=!1,o=!1;for(const c in e){const u=e[c];if(Uo.has(c)){a=!0;continue}else if(xO(c)){r[c]=u;continue}else{const h=_O(u,Y1[c]);c.startsWith("origin")?(o=!0,i[c]=h):s[c]=h}}if(e.transform||(a||n?s.transform=NX(e,t.transform,n):s.transform&&(s.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:h=0}=i;s.transformOrigin=`${c} ${u} ${h}`}}const IX={offset:"stroke-dashoffset",array:"stroke-dasharray"},RX={offset:"strokeDashoffset",array:"strokeDasharray"};function CX(t,e,n=1,s=0,r=!0){t.pathLength=1;const i=r?IX:RX;t[i.offset]=ne.transform(-s);const a=ne.transform(e),o=ne.transform(n);t[i.array]=`${a} ${o}`}function II(t,e,n){return typeof t=="string"?t:ne.transform(e+n*t)}function jX(t,e,n){const s=II(e,t.x,t.width),r=II(n,t.y,t.height);return`${s} ${r}`}function X1(t,{attrX:e,attrY:n,attrScale:s,originX:r,originY:i,pathLength:a,pathSpacing:o=1,pathOffset:c=0,...u},h,f){if(Q1(t,u,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:p,dimensions:_}=t;m.transform&&(_&&(p.transform=m.transform),delete m.transform),_&&(r!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=jX(_,r!==void 0?r:.5,i!==void 0?i:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),s!==void 0&&(m.scale=s),a!==void 0&&CX(m,a,o,c,!1)}const J1=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),bO=()=>({...J1(),attrs:{}}),Z1=t=>typeof t=="string"&&t.toLowerCase()==="svg";function wO(t,{style:e,vars:n},s,r){Object.assign(t.style,e,r&&r.getProjectionStyles(s));for(const i in n)t.style.setProperty(i,n[i])}const TO=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function EO(t,e,n,s){wO(t,e,void 0,s);for(const r in e.attrs)t.setAttribute(TO.has(r)?r:H1(r),e.attrs[r])}const eg={};function PX(t){Object.assign(eg,t)}function SO(t,{layout:e,layoutId:n}){return Uo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!eg[t]||t==="opacity")}function eT(t,e,n){var s;const{style:r}=t,i={};for(const a in r)(on(r[a])||e.style&&on(e.style[a])||SO(a,t)||((s=n==null?void 0:n.getValue(a))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(i[a]=r[a]);return i}function AO(t,e,n){const s=eT(t,e,n);for(const r in t)if(on(t[r])||on(e[r])){const i=Jc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[i]=t[r]}return s}function kX(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const RI=["x","y","width","height","cx","cy","r"],DX={useVisualState:yO({scrapeMotionValuesFromProps:AO,createRenderState:bO,onUpdate:({props:t,prevProps:e,current:n,renderState:s,latestValues:r})=>{if(!n)return;let i=!!t.drag;if(!i){for(const o in r)if(Uo.has(o)){i=!0;break}}if(!i)return;let a=!e;if(e)for(let o=0;o<RI.length;o++){const c=RI[o];t[c]!==e[c]&&(a=!0)}a&&We.read(()=>{kX(n,s),We.render(()=>{X1(s,r,Z1(n.tagName),t.transformTemplate),EO(n,s)})})}})},MX={useVisualState:yO({scrapeMotionValuesFromProps:eT,createRenderState:J1})};function NO(t,e,n){for(const s in e)!on(e[s])&&!SO(s,n)&&(t[s]=e[s])}function OX({transformTemplate:t},e){return S.useMemo(()=>{const n=J1();return Q1(n,e,t),Object.assign({},n.vars,n.style)},[e])}function VX(t,e){const n=t.style||{},s={};return NO(s,n,t),Object.assign(s,OX(t,e)),s}function LX(t,e){const n={},s=VX(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}function UX(t,e,n,s){const r=S.useMemo(()=>{const i=bO();return X1(i,e,Z1(s),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};NO(i,t.style,t),r.style={...i,...r.style}}return r}function zX(t=!1){return(n,s,r,{latestValues:i},a)=>{const c=($1(n)?UX:LX)(s,i,a,n),u=tX(s,typeof n=="string",t),h=n!==S.Fragment?{...u,...c,ref:r}:{},{children:f}=s,m=S.useMemo(()=>on(f)?f.get():f,[f]);return S.createElement(n,{...h,children:m})}}function FX(t,e){return function(s,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...$1(s)?DX:MX,preloadedFeatures:t,useRender:zX(r),createVisualElement:e,Component:s};return uX(a)}}function IO(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}function Ay(t,e,n){const s=t.getProps();return K1(s,e,n!==void 0?n:s.custom,t)}const BX=F1(()=>window.ScrollTimeline!==void 0);class qX{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let s=0;s<this.animations.length;s++)this.animations[s][e]=n}attachTimeline(e,n){const s=this.animations.map(r=>{if(BX()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{s.forEach((r,i)=>{r&&r(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class HX extends qX{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function tT(t,e){return t?t[e]||t.default||t:void 0}const h_=2e4;function RO(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<h_;)e+=n,s=t.next(e);return e>=h_?1/0:e}function nT(t){return typeof t=="function"}function CI(t,e){t.timeline=e,t.onfinish=null}const sT=t=>Array.isArray(t)&&typeof t[0]=="number",GX={linearEasing:void 0};function $X(t,e){const n=F1(t);return()=>{var s;return(s=GX[e])!==null&&s!==void 0?s:n()}}const tg=$X(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),CO=(t,e,n=10)=>{let s="";const r=Math.max(Math.round(e/n),2);for(let i=0;i<r;i++)s+=t(Tc(0,r-1,i))+", ";return`linear(${s.substring(0,s.length-2)})`};function jO(t){return!!(typeof t=="function"&&tg()||!t||typeof t=="string"&&(t in f_||tg())||sT(t)||Array.isArray(t)&&t.every(jO))}const Xu=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,f_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xu([0,.65,.55,1]),circOut:Xu([.55,0,1,.45]),backIn:Xu([.31,.01,.66,-.59]),backOut:Xu([.33,1.53,.69,.99])};function PO(t,e){if(t)return typeof t=="function"&&tg()?CO(t,e):sT(t)?Xu(t):Array.isArray(t)?t.map(n=>PO(n,e)||f_.easeOut):f_[t]}const bs={x:!1,y:!1};function kO(){return bs.x||bs.y}function KX(t,e,n){var s;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const i=(s=void 0)!==null&&s!==void 0?s:r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function DO(t,e){const n=KX(t),s=new AbortController,r={passive:!0,...e,signal:s.signal};return[n,r,()=>s.abort()]}function jI(t){return e=>{e.pointerType==="touch"||kO()||t(e)}}function WX(t,e,n={}){const[s,r,i]=DO(t,n),a=jI(o=>{const{target:c}=o,u=e(o);if(typeof u!="function"||!c)return;const h=jI(f=>{u(f),c.removeEventListener("pointerleave",h)});c.addEventListener("pointerleave",h,r)});return s.forEach(o=>{o.addEventListener("pointerenter",a,r)}),i}const MO=(t,e)=>e?t===e?!0:MO(t,e.parentElement):!1,rT=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,YX=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function QX(t){return YX.has(t.tagName)||t.tabIndex!==-1}const Ju=new WeakSet;function PI(t){return e=>{e.key==="Enter"&&t(e)}}function lv(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const XX=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=PI(()=>{if(Ju.has(n))return;lv(n,"down");const r=PI(()=>{lv(n,"up")}),i=()=>lv(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function kI(t){return rT(t)&&!kO()}function JX(t,e,n={}){const[s,r,i]=DO(t,n),a=o=>{const c=o.currentTarget;if(!kI(o)||Ju.has(c))return;Ju.add(c);const u=e(o),h=(p,_)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),!(!kI(p)||!Ju.has(c))&&(Ju.delete(c),typeof u=="function"&&u(p,{success:_}))},f=p=>{h(p,n.useGlobalTarget||MO(c,p.target))},m=p=>{h(p,!1)};window.addEventListener("pointerup",f,r),window.addEventListener("pointercancel",m,r)};return s.forEach(o=>{!QX(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,r),o.addEventListener("focus",u=>XX(u,r),r)}),i}function ZX(t){return t==="x"||t==="y"?bs[t]?null:(bs[t]=!0,()=>{bs[t]=!1}):bs.x||bs.y?null:(bs.x=bs.y=!0,()=>{bs.x=bs.y=!1})}const OO=new Set(["width","height","top","left","right","bottom",...Jc]);let qm;function eJ(){qm=void 0}const tr={now:()=>(qm===void 0&&tr.set(qt.isProcessing||YQ.useManualTiming?qt.timestamp:performance.now()),qm),set:t=>{qm=t,queueMicrotask(eJ)}};function iT(t,e){t.indexOf(e)===-1&&t.push(e)}function aT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class oT{constructor(){this.subscriptions=[]}add(e){return iT(this.subscriptions,e),()=>aT(this.subscriptions,e)}notify(e,n,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,s);else for(let i=0;i<r;i++){const a=this.subscriptions[i];a&&a(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function VO(t,e){return e?t*(1e3/e):0}const DI=30,tJ=t=>!isNaN(parseFloat(t));class nJ{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,r=!0)=>{const i=tr.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=tr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=tJ(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new oT);const s=this.events[e].add(n);return e==="change"?()=>{s(),We.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=tr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>DI)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,DI);return VO(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function wh(t,e){return new nJ(t,e)}function sJ(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,wh(n))}function rJ(t,e){const n=Ay(t,e);let{transitionEnd:s={},transition:r={},...i}=n||{};i={...i,...s};for(const a in i){const o=gX(i[a]);sJ(t,a,o)}}function iJ(t){return!!(on(t)&&t.add)}function m_(t,e){const n=t.getValue("willChange");if(iJ(n))return n.add(e)}function LO(t){return t.props[mO]}const UO=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,aJ=1e-7,oJ=12;function lJ(t,e,n,s,r){let i,a,o=0;do a=e+(n-e)/2,i=UO(a,s,r)-t,i>0?n=a:e=a;while(Math.abs(i)>aJ&&++o<oJ);return a}function ff(t,e,n,s){if(t===e&&n===s)return Wn;const r=i=>lJ(i,0,1,t,n);return i=>i===0||i===1?i:UO(r(i),e,s)}const zO=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,FO=t=>e=>1-t(1-e),BO=ff(.33,1.53,.69,.99),lT=FO(BO),qO=zO(lT),HO=t=>(t*=2)<1?.5*lT(t):.5*(2-Math.pow(2,-10*(t-1))),cT=t=>1-Math.sin(Math.acos(t)),GO=FO(cT),$O=zO(cT),KO=t=>/^0[^.\s]+$/u.test(t);function cJ(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||KO(t):!0}const Cd=t=>Math.round(t*1e5)/1e5,uT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function uJ(t){return t==null}const dJ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,dT=(t,e)=>n=>!!(typeof n=="string"&&dJ.test(n)&&n.startsWith(t)||e&&!uJ(n)&&Object.prototype.hasOwnProperty.call(n,e)),WO=(t,e,n)=>s=>{if(typeof s!="string")return s;const[r,i,a,o]=s.match(uT);return{[t]:parseFloat(r),[e]:parseFloat(i),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},hJ=t=>qr(0,255,t),cv={...Zc,transform:t=>Math.round(hJ(t))},Xa={test:dT("rgb","red"),parse:WO("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+cv.transform(t)+", "+cv.transform(e)+", "+cv.transform(n)+", "+Cd(bh.transform(s))+")"};function fJ(t){let e="",n="",s="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,s+=s,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const p_={test:dT("#"),parse:fJ,transform:Xa.transform},El={test:dT("hsl","hue"),parse:WO("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+er.transform(Cd(e))+", "+er.transform(Cd(n))+", "+Cd(bh.transform(s))+")"},nn={test:t=>Xa.test(t)||p_.test(t)||El.test(t),parse:t=>Xa.test(t)?Xa.parse(t):El.test(t)?El.parse(t):p_.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Xa.transform(t):El.transform(t)},mJ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function pJ(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(uT))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(mJ))===null||n===void 0?void 0:n.length)||0)>0}const YO="number",QO="color",gJ="var",yJ="var(",MI="${}",vJ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Th(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},r=[];let i=0;const o=e.replace(vJ,c=>(nn.test(c)?(s.color.push(i),r.push(QO),n.push(nn.parse(c))):c.startsWith(yJ)?(s.var.push(i),r.push(gJ),n.push(c)):(s.number.push(i),r.push(YO),n.push(parseFloat(c))),++i,MI)).split(MI);return{values:n,split:o,indexes:s,types:r}}function XO(t){return Th(t).values}function JO(t){const{split:e,types:n}=Th(t),s=e.length;return r=>{let i="";for(let a=0;a<s;a++)if(i+=e[a],r[a]!==void 0){const o=n[a];o===YO?i+=Cd(r[a]):o===QO?i+=nn.transform(r[a]):i+=r[a]}return i}}const xJ=t=>typeof t=="number"?0:t;function _J(t){const e=XO(t);return JO(t)(e.map(xJ))}const oa={test:pJ,parse:XO,createTransformer:JO,getAnimatableNone:_J},bJ=new Set(["brightness","contrast","saturate","opacity"]);function wJ(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(uT)||[];if(!s)return t;const r=n.replace(s,"");let i=bJ.has(e)?1:0;return s!==n&&(i*=100),e+"("+i+r+")"}const TJ=/\b([a-z-]*)\(.*?\)/gu,g_={...oa,getAnimatableNone:t=>{const e=t.match(TJ);return e?e.map(wJ).join(" "):t}},EJ={...Y1,color:nn,backgroundColor:nn,outlineColor:nn,fill:nn,stroke:nn,borderColor:nn,borderTopColor:nn,borderRightColor:nn,borderBottomColor:nn,borderLeftColor:nn,filter:g_,WebkitFilter:g_},hT=t=>EJ[t];function ZO(t,e){let n=hT(t);return n!==g_&&(n=oa),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const SJ=new Set(["auto","none","0"]);function AJ(t,e,n){let s=0,r;for(;s<t.length&&!r;){const i=t[s];typeof i=="string"&&!SJ.has(i)&&Th(i).values.length&&(r=t[s]),s++}if(r&&n)for(const i of e)t[i]=ZO(n,r)}const OI=t=>t===Zc||t===ne,VI=(t,e)=>parseFloat(t.split(", ")[e]),LI=(t,e)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const r=s.match(/^matrix3d\((.+)\)$/u);if(r)return VI(r[1],e);{const i=s.match(/^matrix\((.+)\)$/u);return i?VI(i[1],t):0}},NJ=new Set(["x","y","z"]),IJ=Jc.filter(t=>!NJ.has(t));function RJ(t){const e=[];return IJ.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const Sc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:LI(4,13),y:LI(5,14)};Sc.translateX=Sc.x;Sc.translateY=Sc.y;const oo=new Set;let y_=!1,v_=!1;function e6(){if(v_){const t=Array.from(oo).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const r=RJ(s);r.length&&(n.set(s,r),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const r=n.get(s);r&&r.forEach(([i,a])=>{var o;(o=s.getValue(i))===null||o===void 0||o.set(a)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}v_=!1,y_=!1,oo.forEach(t=>t.complete()),oo.clear()}function t6(){oo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(v_=!0)})}function CJ(){t6(),e6()}class fT{constructor(e,n,s,r,i,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=r,this.element=i,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(oo.add(this),y_||(y_=!0,We.read(t6),We.resolveKeyframes(e6))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:r}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const a=r==null?void 0:r.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(s&&n){const c=s.readValue(n,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),r&&a===void 0&&r.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),oo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,oo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const n6=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),jJ=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function PJ(t){const e=jJ.exec(t);if(!e)return[,];const[,n,s,r]=e;return[`--${n??s}`,r]}function s6(t,e,n=1){const[s,r]=PJ(t);if(!s)return;const i=window.getComputedStyle(e).getPropertyValue(s);if(i){const a=i.trim();return n6(a)?parseFloat(a):a}return W1(r)?s6(r,e,n+1):r}const r6=t=>e=>e.test(t),kJ={test:t=>t==="auto",parse:t=>t},i6=[Zc,ne,er,mi,wX,bX,kJ],UI=t=>i6.find(r6(t));class a6 extends fT{constructor(e,n,s,r,i){super(e,n,s,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),W1(u))){const h=s6(u,n.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!OO.has(s)||e.length!==2)return;const[r,i]=e,a=UI(r),o=UI(i);if(a!==o)if(OI(a)&&OI(o))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let r=0;r<e.length;r++)cJ(e[r])&&s.push(r);s.length&&AJ(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Sc[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(s,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:s,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const i=n.getValue(s);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=Sc[s](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,u])=>{n.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const zI=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(oa.test(t)||t==="0")&&!t.startsWith("url("));function DJ(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function MJ(t,e,n,s){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],a=zI(r,e),o=zI(i,e);return!a||!o?!1:DJ(t)||(n==="spring"||nT(n))&&s}const OJ=t=>t!==null;function Ny(t,{repeat:e,repeatType:n="loop"},s){const r=t.filter(OJ),i=e&&n!=="loop"&&e%2===1?0:r.length-1;return!i||s===void 0?r[i]:s}const VJ=40;class o6{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=tr.now(),this.options={autoplay:e,delay:n,type:s,repeat:r,repeatDelay:i,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>VJ?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&CJ(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=tr.now(),this.hasAttemptedResolve=!0;const{name:s,type:r,velocity:i,delay:a,onComplete:o,onUpdate:c,isGenerator:u}=this.options;if(!u&&!MJ(e,s,r,i))if(a)this.options.duration=0;else{c&&c(Ny(e,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const st=(t,e,n)=>t+(e-t)*n;function uv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function LJ({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let r=0,i=0,a=0;if(!e)r=i=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;r=uv(c,o,t+1/3),i=uv(c,o,t),a=uv(c,o,t-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:s}}function ng(t,e){return n=>n>0?e:t}const dv=(t,e,n)=>{const s=t*t,r=n*(e*e-s)+s;return r<0?0:Math.sqrt(r)},UJ=[p_,Xa,El],zJ=t=>UJ.find(e=>e.test(t));function FI(t){const e=zJ(t);if(!e)return!1;let n=e.parse(t);return e===El&&(n=LJ(n)),n}const BI=(t,e)=>{const n=FI(t),s=FI(e);if(!n||!s)return ng(t,e);const r={...n};return i=>(r.red=dv(n.red,s.red,i),r.green=dv(n.green,s.green,i),r.blue=dv(n.blue,s.blue,i),r.alpha=st(n.alpha,s.alpha,i),Xa.transform(r))},FJ=(t,e)=>n=>e(t(n)),mf=(...t)=>t.reduce(FJ),x_=new Set(["none","hidden"]);function BJ(t,e){return x_.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function qJ(t,e){return n=>st(t,e,n)}function mT(t){return typeof t=="number"?qJ:typeof t=="string"?W1(t)?ng:nn.test(t)?BI:$J:Array.isArray(t)?l6:typeof t=="object"?nn.test(t)?BI:HJ:ng}function l6(t,e){const n=[...t],s=n.length,r=t.map((i,a)=>mT(i)(i,e[a]));return i=>{for(let a=0;a<s;a++)n[a]=r[a](i);return n}}function HJ(t,e){const n={...t,...e},s={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(s[r]=mT(t[r])(t[r],e[r]));return r=>{for(const i in s)n[i]=s[i](r);return n}}function GJ(t,e){var n;const s=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],o=t.indexes[a][r[a]],c=(n=t.values[o])!==null&&n!==void 0?n:0;s[i]=c,r[a]++}return s}const $J=(t,e)=>{const n=oa.createTransformer(e),s=Th(t),r=Th(e);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?x_.has(t)&&!r.values.length||x_.has(e)&&!s.values.length?BJ(t,e):mf(l6(GJ(s,r),r.values),n):ng(t,e)};function c6(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?st(t,e,n):mT(t)(t,e)}const KJ=5;function u6(t,e,n){const s=Math.max(e-KJ,0);return VO(n-t(s),e-s)}const ct={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},hv=.001;function WJ({duration:t=ct.duration,bounce:e=ct.bounce,velocity:n=ct.velocity,mass:s=ct.mass}){let r,i,a=1-e;a=qr(ct.minDamping,ct.maxDamping,a),t=qr(ct.minDuration,ct.maxDuration,Rr(t)),a<1?(r=u=>{const h=u*a,f=h*t,m=h-n,p=__(u,a),_=Math.exp(-f);return hv-m/p*_},i=u=>{const f=u*a*t,m=f*n+n,p=Math.pow(a,2)*Math.pow(u,2)*t,_=Math.exp(-f),w=__(Math.pow(u,2),a);return(-r(u)+hv>0?-1:1)*((m-p)*_)/w}):(r=u=>{const h=Math.exp(-u*t),f=(u-n)*t+1;return-hv+h*f},i=u=>{const h=Math.exp(-u*t),f=(n-u)*(t*t);return h*f});const o=5/t,c=QJ(r,i,o);if(t=Ir(t),isNaN(c))return{stiffness:ct.stiffness,damping:ct.damping,duration:t};{const u=Math.pow(c,2)*s;return{stiffness:u,damping:a*2*Math.sqrt(s*u),duration:t}}}const YJ=12;function QJ(t,e,n){let s=n;for(let r=1;r<YJ;r++)s=s-t(s)/e(s);return s}function __(t,e){return t*Math.sqrt(1-e*e)}const XJ=["duration","bounce"],JJ=["stiffness","damping","mass"];function qI(t,e){return e.some(n=>t[n]!==void 0)}function ZJ(t){let e={velocity:ct.velocity,stiffness:ct.stiffness,damping:ct.damping,mass:ct.mass,isResolvedFromDuration:!1,...t};if(!qI(t,JJ)&&qI(t,XJ))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),r=s*s,i=2*qr(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:ct.mass,stiffness:r,damping:i}}else{const n=WJ(t);e={...e,...n,mass:ct.mass},e.isResolvedFromDuration=!0}return e}function d6(t=ct.visualDuration,e=ct.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:r}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:i},{stiffness:c,damping:u,mass:h,duration:f,velocity:m,isResolvedFromDuration:p}=ZJ({...n,velocity:-Rr(n.velocity||0)}),_=m||0,w=u/(2*Math.sqrt(c*h)),T=a-i,x=Rr(Math.sqrt(c/h)),v=Math.abs(T)<5;s||(s=v?ct.restSpeed.granular:ct.restSpeed.default),r||(r=v?ct.restDelta.granular:ct.restDelta.default);let b;if(w<1){const D=__(x,w);b=M=>{const A=Math.exp(-w*x*M);return a-A*((_+w*x*T)/D*Math.sin(D*M)+T*Math.cos(D*M))}}else if(w===1)b=D=>a-Math.exp(-x*D)*(T+(_+x*T)*D);else{const D=x*Math.sqrt(w*w-1);b=M=>{const A=Math.exp(-w*x*M),E=Math.min(D*M,300);return a-A*((_+w*x*T)*Math.sinh(E)+D*T*Math.cosh(E))/D}}const R={calculatedDuration:p&&f||null,next:D=>{const M=b(D);if(p)o.done=D>=f;else{let A=0;w<1&&(A=D===0?Ir(_):u6(b,D,M));const E=Math.abs(A)<=s,N=Math.abs(a-M)<=r;o.done=E&&N}return o.value=o.done?a:M,o},toString:()=>{const D=Math.min(RO(R),h_),M=CO(A=>R.next(D*A).value,D,30);return D+"ms "+M}};return R}function HI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:a,min:o,max:c,restDelta:u=.5,restSpeed:h}){const f=t[0],m={done:!1,value:f},p=E=>o!==void 0&&E<o||c!==void 0&&E>c,_=E=>o===void 0?c:c===void 0||Math.abs(o-E)<Math.abs(c-E)?o:c;let w=n*e;const T=f+w,x=a===void 0?T:a(T);x!==T&&(w=x-f);const v=E=>-w*Math.exp(-E/s),b=E=>x+v(E),R=E=>{const N=v(E),I=b(E);m.done=Math.abs(N)<=u,m.value=m.done?x:I};let D,M;const A=E=>{p(m.value)&&(D=E,M=d6({keyframes:[m.value,_(m.value)],velocity:u6(b,E,m.value),damping:r,stiffness:i,restDelta:u,restSpeed:h}))};return A(0),{calculatedDuration:null,next:E=>{let N=!1;return!M&&D===void 0&&(N=!0,R(E),A(E)),D!==void 0&&E>=D?M.next(E-D):(!N&&R(E),m)}}}const eZ=ff(.42,0,1,1),tZ=ff(0,0,.58,1),h6=ff(.42,0,.58,1),nZ=t=>Array.isArray(t)&&typeof t[0]!="number",sZ={linear:Wn,easeIn:eZ,easeInOut:h6,easeOut:tZ,circIn:cT,circInOut:$O,circOut:GO,backIn:lT,backInOut:qO,backOut:BO,anticipate:HO},GI=t=>{if(sT(t)){cO(t.length===4);const[e,n,s,r]=t;return ff(e,n,s,r)}else if(typeof t=="string")return sZ[t];return t};function rZ(t,e,n){const s=[],r=n||c6,i=t.length-1;for(let a=0;a<i;a++){let o=r(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||Wn:e;o=mf(c,o)}s.push(o)}return s}function iZ(t,e,{clamp:n=!0,ease:s,mixer:r}={}){const i=t.length;if(cO(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=rZ(e,s,r),c=o.length,u=h=>{if(a&&h<t[0])return e[0];let f=0;if(c>1)for(;f<t.length-2&&!(h<t[f+1]);f++);const m=Tc(t[f],t[f+1],h);return o[f](m)};return n?h=>u(qr(t[0],t[i-1],h)):u}function aZ(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const r=Tc(0,e,s);t.push(st(n,1,r))}}function oZ(t){const e=[0];return aZ(e,t.length-1),e}function lZ(t,e){return t.map(n=>n*e)}function cZ(t,e){return t.map(()=>e||h6).splice(0,t.length-1)}function sg({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const r=nZ(s)?s.map(GI):GI(s),i={done:!1,value:e[0]},a=lZ(n&&n.length===e.length?n:oZ(e),t),o=iZ(a,e,{ease:Array.isArray(r)?r:cZ(e,r)});return{calculatedDuration:t,next:c=>(i.value=o(c),i.done=c>=t,i)}}const uZ=t=>{const e=({timestamp:n})=>t(n);return{start:()=>We.update(e,!0),stop:()=>aa(e),now:()=>qt.isProcessing?qt.timestamp:tr.now()}},dZ={decay:HI,inertia:HI,tween:sg,keyframes:sg,spring:d6},hZ=t=>t/100;class pT extends o6{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:s,element:r,keyframes:i}=this.options,a=(r==null?void 0:r.KeyframeResolver)||fT,o=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new a(i,o,n,s,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:i,velocity:a=0}=this.options,o=nT(n)?n:dZ[n]||sg;let c,u;o!==sg&&typeof e[0]!="number"&&(c=mf(hZ,c6(e[0],e[1])),e=[0,100]);const h=o({...this.options,keyframes:e});i==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=RO(h));const{calculatedDuration:f}=h,m=f+r,p=m*(s+1)-r;return{generator:h,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:f,resolvedDuration:m,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:s}=this;if(!s){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:r,generator:i,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:c,calculatedDuration:u,totalDuration:h,resolvedDuration:f}=s;if(this.startTime===null)return i.next(0);const{delay:m,repeat:p,repeatType:_,repeatDelay:w,onUpdate:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const x=this.currentTime-m*(this.speed>=0?1:-1),v=this.speed>=0?x<0:x>h;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let b=this.currentTime,R=i;if(p){const E=Math.min(this.currentTime,h)/f;let N=Math.floor(E),I=E%1;!I&&E>=1&&(I=1),I===1&&N--,N=Math.min(N,p+1),!!(N%2)&&(_==="reverse"?(I=1-I,w&&(I-=w/f)):_==="mirror"&&(R=a)),b=qr(0,1,I)*f}const D=v?{done:!1,value:c[0]}:R.next(b);o&&(D.value=o(D.value));let{done:M}=D;!v&&u!==null&&(M=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return A&&r!==void 0&&(D.value=Ny(c,this.options,r)),T&&T(D.value),A&&this.finish(),D}get duration(){const{resolved:e}=this;return e?Rr(e.calculatedDuration):0}get time(){return Rr(this.currentTime)}set time(e){e=Ir(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Rr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=uZ,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const fZ=new Set(["opacity","clipPath","filter","transform"]);function mZ(t,e,n,{delay:s=0,duration:r=300,repeat:i=0,repeatType:a="loop",ease:o="easeInOut",times:c}={}){const u={[e]:n};c&&(u.offset=c);const h=PO(o,r);return Array.isArray(h)&&(u.easing=h),t.animate(u,{delay:s,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}const pZ=F1(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),rg=10,gZ=2e4;function yZ(t){return nT(t.type)||t.type==="spring"||!jO(t.ease)}function vZ(t,e){const n=new pT({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:t[0]};const r=[];let i=0;for(;!s.done&&i<gZ;)s=n.sample(i),r.push(s.value),i+=rg;return{times:void 0,keyframes:r,duration:i-rg,ease:"linear"}}const f6={anticipate:HO,backInOut:qO,circInOut:$O};function xZ(t){return t in f6}class $I extends o6{constructor(e){super(e);const{name:n,motionValue:s,element:r,keyframes:i}=this.options;this.resolver=new a6(i,(a,o)=>this.onKeyframesResolved(a,o),n,s,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:s=300,times:r,ease:i,type:a,motionValue:o,name:c,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof i=="string"&&tg()&&xZ(i)&&(i=f6[i]),yZ(this.options)){const{onComplete:f,onUpdate:m,motionValue:p,element:_,...w}=this.options,T=vZ(e,w);e=T.keyframes,e.length===1&&(e[1]=e[0]),s=T.duration,r=T.times,i=T.ease,a="keyframes"}const h=mZ(o.owner.current,c,e,{...this.options,duration:s,times:r,ease:i});return h.startTime=u??this.calcStartTime(),this.pendingTimeline?(CI(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:f}=this.options;o.set(Ny(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:s,times:r,type:a,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Rr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Rr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=Ir(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Wn;const{animation:s}=n;CI(s,e)}return Wn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:s,duration:r,type:i,ease:a,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:h,onComplete:f,element:m,...p}=this.options,_=new pT({...p,keyframes:s,duration:r,type:i,ease:a,times:o,isGenerator:!0}),w=Ir(this.time);u.setWithVelocity(_.sample(w-rg).value,_.sample(w).value,rg)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:s,repeatDelay:r,repeatType:i,damping:a,type:o}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=n.owner.getProps();return pZ()&&s&&fZ.has(s)&&!c&&!u&&!r&&i!=="mirror"&&a!==0&&o!=="inertia"}}const _Z={type:"spring",stiffness:500,damping:25,restSpeed:10},bZ=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),wZ={type:"keyframes",duration:.8},TZ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},EZ=(t,{keyframes:e})=>e.length>2?wZ:Uo.has(t)?t.startsWith("scale")?bZ(e[1]):_Z:TZ;function SZ({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:a,repeatDelay:o,from:c,elapsed:u,...h}){return!!Object.keys(h).length}const gT=(t,e,n,s={},r,i)=>a=>{const o=tT(s,t)||{},c=o.delay||s.delay||0;let{elapsed:u=0}=s;u=u-Ir(c);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:m=>{e.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:i?void 0:r};SZ(o)||(h={...h,...EZ(t,h)}),h.duration&&(h.duration=Ir(h.duration)),h.repeatDelay&&(h.repeatDelay=Ir(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),f&&!i&&e.get()!==void 0){const m=Ny(h.keyframes,o);if(m!==void 0)return We.update(()=>{h.onUpdate(m),h.onComplete()}),new HX([])}return!i&&$I.supports(h)?new $I(h):new pT(h)};function AZ({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function m6(t,e,{delay:n=0,transitionOverride:s,type:r}={}){var i;let{transition:a=t.getDefaultTransition(),transitionEnd:o,...c}=e;s&&(a=s);const u=[],h=r&&t.animationState&&t.animationState.getState()[r];for(const f in c){const m=t.getValue(f,(i=t.latestValues[f])!==null&&i!==void 0?i:null),p=c[f];if(p===void 0||h&&AZ(h,f))continue;const _={delay:n,...tT(a||{},f)};let w=!1;if(window.MotionHandoffAnimation){const x=LO(t);if(x){const v=window.MotionHandoffAnimation(x,f,We);v!==null&&(_.startTime=v,w=!0)}}m_(t,f),m.start(gT(f,m,p,t.shouldReduceMotion&&OO.has(f)?{type:!1}:_,t,w));const T=m.animation;T&&u.push(T)}return o&&Promise.all(u).then(()=>{We.update(()=>{o&&rJ(t,o)})}),u}function b_(t,e,n={}){var s;const r=Ay(t,e,n.type==="exit"?(s=t.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(m6(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:m}=i;return NZ(t,e,h+u,f,m,n)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,h]=c==="beforeChildren"?[a,o]:[o,a];return u().then(()=>h())}else return Promise.all([a(),o(n.delay)])}function NZ(t,e,n=0,s=0,r=1,i){const a=[],o=(t.variantChildren.size-1)*s,c=r===1?(u=0)=>u*s:(u=0)=>o-u*s;return Array.from(t.variantChildren).sort(IZ).forEach((u,h)=>{u.notify("AnimationStart",e),a.push(b_(u,e,{...i,delay:n+c(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(a)}function IZ(t,e){return t.sortNodePosition(e)}function RZ(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const r=e.map(i=>b_(t,i,n));s=Promise.all(r)}else if(typeof e=="string")s=b_(t,e,n);else{const r=typeof e=="function"?Ay(t,e,n.custom):e;s=Promise.all(m6(t,r,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}const CZ=q1.length;function p6(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?p6(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<CZ;n++){const s=q1[n],r=t.props[s];(_h(r)||r===!1)&&(e[s]=r)}return e}const jZ=[...B1].reverse(),PZ=B1.length;function kZ(t){return e=>Promise.all(e.map(({animation:n,options:s})=>RZ(t,n,s)))}function DZ(t){let e=kZ(t),n=KI(),s=!0;const r=c=>(u,h)=>{var f;const m=Ay(t,h,c==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(m){const{transition:p,transitionEnd:_,...w}=m;u={...u,...w,..._}}return u};function i(c){e=c(t)}function a(c){const{props:u}=t,h=p6(t.parent)||{},f=[],m=new Set;let p={},_=1/0;for(let T=0;T<PZ;T++){const x=jZ[T],v=n[x],b=u[x]!==void 0?u[x]:h[x],R=_h(b),D=x===c?v.isActive:null;D===!1&&(_=T);let M=b===h[x]&&b!==u[x]&&R;if(M&&s&&t.manuallyAnimateOnMount&&(M=!1),v.protectedKeys={...p},!v.isActive&&D===null||!b&&!v.prevProp||Ey(b)||typeof b=="boolean")continue;const A=MZ(v.prevProp,b);let E=A||x===c&&v.isActive&&!M&&R||T>_&&R,N=!1;const I=Array.isArray(b)?b:[b];let P=I.reduce(r(x),{});D===!1&&(P={});const{prevResolvedValues:k={}}=v,j={...k,...P},W=ee=>{E=!0,m.has(ee)&&(N=!0,m.delete(ee)),v.needsAnimating[ee]=!0;const te=t.getValue(ee);te&&(te.liveStyle=!1)};for(const ee in j){const te=P[ee],Te=k[ee];if(p.hasOwnProperty(ee))continue;let Xe=!1;d_(te)&&d_(Te)?Xe=!IO(te,Te):Xe=te!==Te,Xe?te!=null?W(ee):m.add(ee):te!==void 0&&m.has(ee)?W(ee):v.protectedKeys[ee]=!0}v.prevProp=b,v.prevResolvedValues=P,v.isActive&&(p={...p,...P}),s&&t.blockInitialAnimation&&(E=!1),E&&(!(M&&A)||N)&&f.push(...I.map(ee=>({animation:ee,options:{type:x}})))}if(m.size){const T={};m.forEach(x=>{const v=t.getBaseTarget(x),b=t.getValue(x);b&&(b.liveStyle=!0),T[x]=v??null}),f.push({animation:T})}let w=!!f.length;return s&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(w=!1),s=!1,w?e(f):Promise.resolve()}function o(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(m=>{var p;return(p=m.animationState)===null||p===void 0?void 0:p.setActive(c,u)}),n[c].isActive=u;const f=a(c);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:a,setActive:o,setAnimateFunction:i,getState:()=>n,reset:()=>{n=KI(),s=!0}}}function MZ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!IO(e,t):!1}function ja(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function KI(){return{animate:ja(!0),whileInView:ja(),whileHover:ja(),whileTap:ja(),whileDrag:ja(),whileFocus:ja(),exit:ja()}}class _a{constructor(e){this.isMounted=!1,this.node=e}update(){}}class OZ extends _a{constructor(e){super(e),e.animationState||(e.animationState=DZ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ey(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let VZ=0;class LZ extends _a{constructor(){super(...arguments),this.id=VZ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const UZ={animation:{Feature:OZ},exit:{Feature:LZ}};function Eh(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function pf(t){return{point:{x:t.pageX,y:t.pageY}}}const zZ=t=>e=>rT(e)&&t(e,pf(e));function jd(t,e,n,s){return Eh(t,e,zZ(n),s)}const WI=(t,e)=>Math.abs(t-e);function FZ(t,e){const n=WI(t.x,e.x),s=WI(t.y,e.y);return Math.sqrt(n**2+s**2)}class g6{constructor(e,n,{transformPagePoint:s,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=mv(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,p=FZ(f.offset,{x:0,y:0})>=3;if(!m&&!p)return;const{point:_}=f,{timestamp:w}=qt;this.history.push({..._,timestamp:w});const{onStart:T,onMove:x}=this.handlers;m||(T&&T(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=fv(m,this.transformPagePoint),We.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:p,onSessionEnd:_,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=mv(f.type==="pointercancel"?this.lastMoveEventInfo:fv(m,this.transformPagePoint),this.history);this.startEvent&&p&&p(f,T),_&&_(f,T)},!rT(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.contextWindow=r||window;const a=pf(e),o=fv(a,this.transformPagePoint),{point:c}=o,{timestamp:u}=qt;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=n;h&&h(e,mv(o,this.history)),this.removeListeners=mf(jd(this.contextWindow,"pointermove",this.handlePointerMove),jd(this.contextWindow,"pointerup",this.handlePointerUp),jd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),aa(this.updatePoint)}}function fv(t,e){return e?{point:e(t.point)}:t}function YI(t,e){return{x:t.x-e.x,y:t.y-e.y}}function mv({point:t},e){return{point:t,delta:YI(t,y6(e)),offset:YI(t,BZ(e)),velocity:qZ(e,.1)}}function BZ(t){return t[0]}function y6(t){return t[t.length-1]}function qZ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const r=y6(t);for(;n>=0&&(s=t[n],!(r.timestamp-s.timestamp>Ir(e)));)n--;if(!s)return{x:0,y:0};const i=Rr(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const a={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const v6=1e-4,HZ=1-v6,GZ=1+v6,x6=.01,$Z=0-x6,KZ=0+x6;function Zn(t){return t.max-t.min}function WZ(t,e,n){return Math.abs(t-e)<=n}function QI(t,e,n,s=.5){t.origin=s,t.originPoint=st(e.min,e.max,t.origin),t.scale=Zn(n)/Zn(e),t.translate=st(n.min,n.max,t.origin)-t.originPoint,(t.scale>=HZ&&t.scale<=GZ||isNaN(t.scale))&&(t.scale=1),(t.translate>=$Z&&t.translate<=KZ||isNaN(t.translate))&&(t.translate=0)}function Pd(t,e,n,s){QI(t.x,e.x,n.x,s?s.originX:void 0),QI(t.y,e.y,n.y,s?s.originY:void 0)}function XI(t,e,n){t.min=n.min+e.min,t.max=t.min+Zn(e)}function YZ(t,e,n){XI(t.x,e.x,n.x),XI(t.y,e.y,n.y)}function JI(t,e,n){t.min=e.min-n.min,t.max=t.min+Zn(e)}function kd(t,e,n){JI(t.x,e.x,n.x),JI(t.y,e.y,n.y)}function QZ(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?st(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?st(n,t,s.max):Math.min(t,n)),t}function ZI(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function XZ(t,{top:e,left:n,bottom:s,right:r}){return{x:ZI(t.x,n,r),y:ZI(t.y,e,s)}}function e2(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function JZ(t,e){return{x:e2(t.x,e.x),y:e2(t.y,e.y)}}function ZZ(t,e){let n=.5;const s=Zn(t),r=Zn(e);return r>s?n=Tc(e.min,e.max-s,t.min):s>r&&(n=Tc(t.min,t.max-r,e.min)),qr(0,1,n)}function eee(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const w_=.35;function tee(t=w_){return t===!1?t=0:t===!0&&(t=w_),{x:t2(t,"left","right"),y:t2(t,"top","bottom")}}function t2(t,e,n){return{min:n2(t,e),max:n2(t,n)}}function n2(t,e){return typeof t=="number"?t:t[e]||0}const s2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Sl=()=>({x:s2(),y:s2()}),r2=()=>({min:0,max:0}),mt=()=>({x:r2(),y:r2()});function rs(t){return[t("x"),t("y")]}function _6({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function nee({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function see(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function pv(t){return t===void 0||t===1}function T_({scale:t,scaleX:e,scaleY:n}){return!pv(t)||!pv(e)||!pv(n)}function Ua(t){return T_(t)||b6(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function b6(t){return i2(t.x)||i2(t.y)}function i2(t){return t&&t!=="0%"}function ig(t,e,n){const s=t-n,r=e*s;return n+r}function a2(t,e,n,s,r){return r!==void 0&&(t=ig(t,r,s)),ig(t,n,s)+e}function E_(t,e=0,n=1,s,r){t.min=a2(t.min,e,n,s,r),t.max=a2(t.max,e,n,s,r)}function w6(t,{x:e,y:n}){E_(t.x,e.translate,e.scale,e.originPoint),E_(t.y,n.translate,n.scale,n.originPoint)}const o2=.999999999999,l2=1.0000000000001;function ree(t,e,n,s=!1){const r=n.length;if(!r)return;e.x=e.y=1;let i,a;for(let o=0;o<r;o++){i=n[o],a=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Nl(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,w6(t,a)),s&&Ua(i.latestValues)&&Nl(t,i.latestValues))}e.x<l2&&e.x>o2&&(e.x=1),e.y<l2&&e.y>o2&&(e.y=1)}function Al(t,e){t.min=t.min+e,t.max=t.max+e}function c2(t,e,n,s,r=.5){const i=st(t.min,t.max,r);E_(t,e,n,i,s)}function Nl(t,e){c2(t.x,e.x,e.scaleX,e.scale,e.originX),c2(t.y,e.y,e.scaleY,e.scale,e.originY)}function T6(t,e){return _6(see(t.getBoundingClientRect(),e))}function iee(t,e,n){const s=T6(t,n),{scroll:r}=e;return r&&(Al(s.x,r.offset.x),Al(s.y,r.offset.y)),s}const E6=({current:t})=>t?t.ownerDocument.defaultView:null,aee=new WeakMap;class oee{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=mt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(pf(h).point)},i=(h,f)=>{const{drag:m,dragPropagation:p,onDragStart:_}=this.getProps();if(m&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ZX(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),rs(T=>{let x=this.getAxisMotionValue(T).get()||0;if(er.test(x)){const{projection:v}=this.visualElement;if(v&&v.layout){const b=v.layout.layoutBox[T];b&&(x=Zn(b)*(parseFloat(x)/100))}}this.originPoint[T]=x}),_&&We.postRender(()=>_(h,f)),m_(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},a=(h,f)=>{const{dragPropagation:m,dragDirectionLock:p,onDirectionLock:_,onDrag:w}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:T}=f;if(p&&this.currentDirection===null){this.currentDirection=lee(T),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",f.point,T),this.updateAxis("y",f.point,T),this.visualElement.render(),w&&w(h,f)},o=(h,f)=>this.stop(h,f),c=()=>rs(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new g6(e,{onSessionStart:r,onStart:i,onMove:a,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:E6(this.visualElement)})}stop(e,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&We.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:r}=this.getProps();if(!s||!am(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(a=QZ(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&Tl(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=XZ(r.layoutBox,n):this.constraints=!1,this.elastic=tee(s),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&rs(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=eee(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Tl(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=iee(s,r.root,this.visualElement.getTransformPagePoint());let a=JZ(r.layout.layoutBox,i);if(n){const o=n(nee(a));this.hasMutatedConstraints=!!o,o&&(a=_6(o))}return a}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=rs(h=>{if(!am(h,n,this.currentDirection))return;let f=c&&c[h]||{};a&&(f={min:0,max:0});const m=r?200:1e6,p=r?40:1e7,_={type:"inertia",velocity:s?e[h]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(h,_)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return m_(this.visualElement,e),s.start(gT(e,s,0,n,this.visualElement,!1))}stopAnimation(){rs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){rs(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),r=s[n];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){rs(n=>{const{drag:s}=this.getProps();if(!am(n,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:o}=r.layout.layoutBox[n];i.set(e[n]-st(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Tl(n)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};rs(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const c=o.get();r[a]=ZZ({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),rs(a=>{if(!am(a,e,null))return;const o=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];o.set(st(c,u,r[a]))})}addListeners(){if(!this.visualElement.current)return;aee.set(this.visualElement,this);const e=this.visualElement.current,n=jd(e,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();Tl(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),We.read(s);const a=Eh(window,"resize",()=>this.scalePositionWithinConstraints()),o=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(rs(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=c[h].translate,f.set(f.get()+c[h].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:a=w_,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:a,dragMomentum:o}}}function am(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function lee(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class cee extends _a{constructor(e){super(e),this.removeGroupControls=Wn,this.removeListeners=Wn,this.controls=new oee(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Wn}unmount(){this.removeGroupControls(),this.removeListeners()}}const u2=t=>(e,n)=>{t&&We.postRender(()=>t(e,n))};class uee extends _a{constructor(){super(...arguments),this.removePointerDownListener=Wn}onPointerDown(e){this.session=new g6(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:E6(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:u2(e),onStart:u2(n),onMove:s,onEnd:(i,a)=>{delete this.session,r&&We.postRender(()=>r(i,a))}}}mount(){this.removePointerDownListener=jd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Hm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function d2(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Du={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ne.test(t))t=parseFloat(t);else return t;const n=d2(t,e.target.x),s=d2(t,e.target.y);return`${n}% ${s}%`}},dee={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,r=oa.parse(t);if(r.length>5)return s;const i=oa.createTransformer(t),a=typeof r[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;r[0+a]/=o,r[1+a]/=c;const u=st(o,c,.5);return typeof r[2+a]=="number"&&(r[2+a]/=u),typeof r[3+a]=="number"&&(r[3+a]/=u),i(r)}};class hee extends S.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=e;PX(fee),i&&(n.group&&n.group.add(i),s&&s.register&&r&&s.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Hm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:r,isPresent:i}=this.props,a=s.projection;return a&&(a.isPresent=i,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||We.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),G1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function S6(t){const[e,n]=oO(),s=S.useContext(V1);return l.jsx(hee,{...t,layoutGroup:s,switchLayoutGroup:S.useContext(pO),isPresent:e,safeToRemove:n})}const fee={borderRadius:{...Du,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Du,borderTopRightRadius:Du,borderBottomLeftRadius:Du,borderBottomRightRadius:Du,boxShadow:dee};function mee(t,e,n){const s=on(t)?t:wh(t);return s.start(gT("",s,e,n)),s.animation}function pee(t){return t instanceof SVGElement&&t.tagName!=="svg"}const gee=(t,e)=>t.depth-e.depth;class yee{constructor(){this.children=[],this.isDirty=!1}add(e){iT(this.children,e),this.isDirty=!0}remove(e){aT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(gee),this.isDirty=!1,this.children.forEach(e)}}function vee(t,e){const n=tr.now(),s=({timestamp:r})=>{const i=r-n;i>=e&&(aa(s),t(i-e))};return We.read(s,!0),()=>aa(s)}const A6=["TopLeft","TopRight","BottomLeft","BottomRight"],xee=A6.length,h2=t=>typeof t=="string"?parseFloat(t):t,f2=t=>typeof t=="number"||ne.test(t);function _ee(t,e,n,s,r,i){r?(t.opacity=st(0,n.opacity!==void 0?n.opacity:1,bee(s)),t.opacityExit=st(e.opacity!==void 0?e.opacity:1,0,wee(s))):i&&(t.opacity=st(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let a=0;a<xee;a++){const o=`border${A6[a]}Radius`;let c=m2(e,o),u=m2(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||f2(c)===f2(u)?(t[o]=Math.max(st(h2(c),h2(u),s),0),(er.test(u)||er.test(c))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=st(e.rotate||0,n.rotate||0,s))}function m2(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const bee=N6(0,.5,GO),wee=N6(.5,.95,Wn);function N6(t,e,n){return s=>s<t?0:s>e?1:n(Tc(t,e,s))}function p2(t,e){t.min=e.min,t.max=e.max}function ns(t,e){p2(t.x,e.x),p2(t.y,e.y)}function g2(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function y2(t,e,n,s,r){return t-=e,t=ig(t,1/n,s),r!==void 0&&(t=ig(t,1/r,s)),t}function Tee(t,e=0,n=1,s=.5,r,i=t,a=t){if(er.test(e)&&(e=parseFloat(e),e=st(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=st(i.min,i.max,s);t===i&&(o-=e),t.min=y2(t.min,e,n,o,r),t.max=y2(t.max,e,n,o,r)}function v2(t,e,[n,s,r],i,a){Tee(t,e[n],e[s],e[r],e.scale,i,a)}const Eee=["x","scaleX","originX"],See=["y","scaleY","originY"];function x2(t,e,n,s){v2(t.x,e,Eee,n?n.x:void 0,s?s.x:void 0),v2(t.y,e,See,n?n.y:void 0,s?s.y:void 0)}function _2(t){return t.translate===0&&t.scale===1}function I6(t){return _2(t.x)&&_2(t.y)}function b2(t,e){return t.min===e.min&&t.max===e.max}function Aee(t,e){return b2(t.x,e.x)&&b2(t.y,e.y)}function w2(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function R6(t,e){return w2(t.x,e.x)&&w2(t.y,e.y)}function T2(t){return Zn(t.x)/Zn(t.y)}function E2(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Nee{constructor(){this.members=[]}add(e){iT(this.members,e),e.scheduleRender()}remove(e){if(aT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let s;for(let r=n;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Iee(t,e,n){let s="";const r=t.x.translate/e.x,i=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((r||i||a)&&(s=`translate3d(${r}px, ${i}px, ${a}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:h,rotateX:f,rotateY:m,skewX:p,skewY:_}=n;u&&(s=`perspective(${u}px) ${s}`),h&&(s+=`rotate(${h}deg) `),f&&(s+=`rotateX(${f}deg) `),m&&(s+=`rotateY(${m}deg) `),p&&(s+=`skewX(${p}deg) `),_&&(s+=`skewY(${_}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(s+=`scale(${o}, ${c})`),s||"none"}const za={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Zu=typeof window<"u"&&window.MotionDebug!==void 0,gv=["","X","Y","Z"],Ree={visibility:"hidden"},S2=1e3;let Cee=0;function yv(t,e,n,s){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),s&&(s[t]=0))}function C6(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=LO(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",We,!(r||i))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&C6(s)}function j6({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(a={},o=e==null?void 0:e()){this.id=Cee++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Zu&&(za.totalNodes=za.resolvedTargetDeltas=za.recalculatedProjection=0),this.nodes.forEach(kee),this.nodes.forEach(Lee),this.nodes.forEach(Uee),this.nodes.forEach(Dee),Zu&&window.MotionDebug.record(za)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new yee)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new oT),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const c=this.eventHandlers.get(a);c&&c.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=pee(a),this.instance=a;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||c)&&(this.isLayoutDirty=!0),t){let f;const m=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=vee(m,250),Hm.hasAnimatedSinceResize&&(Hm.hasAnimatedSinceResize=!1,this.nodes.forEach(N2))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeTargetChanged:p,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||Hee,{onLayoutAnimationStart:T,onLayoutAnimationComplete:x}=h.getProps(),v=!this.targetLayout||!R6(this.targetLayout,_)||p,b=!m&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||m&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,b);const R={...tT(w,"layout"),onPlay:T,onComplete:x};(h.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else m||N2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,aa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zee),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&C6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(A2);return}this.isUpdating||this.nodes.forEach(Oee),this.isUpdating=!1,this.nodes.forEach(Vee),this.nodes.forEach(jee),this.nodes.forEach(Pee),this.clearAllSnapshots();const o=tr.now();qt.delta=qr(0,1e3/60,o-qt.timestamp),qt.timestamp=o,qt.isProcessing=!0,ov.update.process(qt),ov.preRender.process(qt),ov.render.process(qt),qt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,G1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Mee),this.sharedNodes.forEach(Fee)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,We.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){We.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=mt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const c=s(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!I6(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;a&&(o||Ua(this.latestValues)||h)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return a&&(c=this.removeTransform(c)),Gee(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return mt();const c=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some($ee))){const{scroll:h}=this.root;h&&(Al(c.x,h.offset.x),Al(c.y,h.offset.y))}return c}removeElementScroll(a){var o;const c=mt();if(ns(c,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return c;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:f,options:m}=h;h!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&ns(c,a),Al(c.x,f.offset.x),Al(c.y,f.offset.y))}return c}applyTransform(a,o=!1){const c=mt();ns(c,a);for(let u=0;u<this.path.length;u++){const h=this.path[u];!o&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Nl(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ua(h.latestValues)&&Nl(c,h.latestValues)}return Ua(this.latestValues)&&Nl(c,this.latestValues),c}removeTransform(a){const o=mt();ns(o,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Ua(u.latestValues))continue;T_(u.latestValues)&&u.updateSnapshot();const h=mt(),f=u.measurePageBox();ns(h,f),x2(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Ua(this.latestValues)&&x2(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=qt.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mt(),this.relativeTargetOrigin=mt(),kd(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),ns(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=mt(),this.targetWithTransforms=mt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),YZ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ns(this.target,this.layout.layoutBox),w6(this.target,this.targetDelta)):ns(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mt(),this.relativeTargetOrigin=mt(),kd(this.relativeTargetOrigin,this.target,p.target),ns(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Zu&&za.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||T_(this.parent.latestValues)||b6(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===qt.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;ns(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;ree(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=mt());const{target:_}=o;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(g2(this.prevProjectionDelta.x,this.projectionDelta.x),g2(this.prevProjectionDelta.y,this.projectionDelta.y)),Pd(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==p||!E2(this.projectionDelta.x,this.prevProjectionDelta.x)||!E2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),Zu&&za.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Sl(),this.projectionDelta=Sl(),this.projectionDeltaWithTransform=Sl()}setAnimationOrigin(a,o=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},f=Sl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=mt(),p=c?c.source:void 0,_=this.layout?this.layout.source:void 0,w=p!==_,T=this.getStack(),x=!T||T.members.length<=1,v=!!(w&&!x&&this.options.crossfade===!0&&!this.path.some(qee));this.animationProgress=0;let b;this.mixTargetDelta=R=>{const D=R/1e3;I2(f.x,a.x,D),I2(f.y,a.y,D),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(kd(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Bee(this.relativeTarget,this.relativeTargetOrigin,m,D),b&&Aee(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=mt()),ns(b,this.relativeTarget)),w&&(this.animationValues=h,_ee(h,u,this.latestValues,D,v,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(aa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=We.update(()=>{Hm.hasAnimatedSinceResize=!0,this.currentAnimation=mee(0,S2,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(S2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:h}=a;if(!(!o||!c||!u)){if(this!==a&&this.layout&&u&&P6(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||mt();const f=Zn(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+f;const m=Zn(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+m}ns(o,c),Nl(o,h),Pd(this.projectionDeltaWithTransform,this.layoutCorrected,o,h)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Nee),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&yv("z",a,u,this.animationValues);for(let h=0;h<gv.length;h++)yv(`rotate${gv[h]}`,a,u,this.animationValues),yv(`skew${gv[h]}`,a,u,this.animationValues);a.render();for(const h in u)a.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);a.scheduleRender()}getProjectionStyles(a){var o,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ree;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Bm(a==null?void 0:a.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Bm(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ua(this.latestValues)&&(w.transform=h?h({},""):"none",this.hasProjected=!1),w}const m=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=Iee(this.projectionDeltaWithTransform,this.treeScale,m),h&&(u.transform=h(m,u.transform));const{x:p,y:_}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${_.origin*100}% 0`,f.animationValues?u.opacity=f===this?(c=(o=m.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const w in eg){if(m[w]===void 0)continue;const{correct:T,applyTo:x}=eg[w],v=u.transform==="none"?m[w]:T(m[w],f);if(x){const b=x.length;for(let R=0;R<b;R++)u[x[R]]=v}else u[w]=v}return this.options.layoutId&&(u.pointerEvents=f===this?Bm(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(A2),this.root.sharedNodes.clear()}}}function jee(t){t.updateLayout()}function Pee(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=t.layout,{animationType:i}=t.options,a=n.source!==t.layout.source;i==="size"?rs(f=>{const m=a?n.measuredBox[f]:n.layoutBox[f],p=Zn(m);m.min=s[f].min,m.max=m.min+p}):P6(i,n.layoutBox,s)&&rs(f=>{const m=a?n.measuredBox[f]:n.layoutBox[f],p=Zn(s[f]);m.max=m.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+p)});const o=Sl();Pd(o,s,n.layoutBox);const c=Sl();a?Pd(c,t.applyTransform(r,!0),n.measuredBox):Pd(c,s,n.layoutBox);const u=!I6(o);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:p}=f;if(m&&p){const _=mt();kd(_,n.layoutBox,m.layoutBox);const w=mt();kd(w,s,p.layoutBox),R6(_,w)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=_,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function kee(t){Zu&&za.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Dee(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Mee(t){t.clearSnapshot()}function A2(t){t.clearMeasurements()}function Oee(t){t.isLayoutDirty=!1}function Vee(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function N2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Lee(t){t.resolveTargetDelta()}function Uee(t){t.calcProjection()}function zee(t){t.resetSkewAndRotation()}function Fee(t){t.removeLeadSnapshot()}function I2(t,e,n){t.translate=st(e.translate,0,n),t.scale=st(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function R2(t,e,n,s){t.min=st(e.min,n.min,s),t.max=st(e.max,n.max,s)}function Bee(t,e,n,s){R2(t.x,e.x,n.x,s),R2(t.y,e.y,n.y,s)}function qee(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Hee={duration:.45,ease:[.4,0,.1,1]},C2=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),j2=C2("applewebkit/")&&!C2("chrome/")?Math.round:Wn;function P2(t){t.min=j2(t.min),t.max=j2(t.max)}function Gee(t){P2(t.x),P2(t.y)}function P6(t,e,n){return t==="position"||t==="preserve-aspect"&&!WZ(T2(e),T2(n),.2)}function $ee(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const Kee=j6({attachResizeListener:(t,e)=>Eh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vv={current:void 0},k6=j6({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!vv.current){const t=new Kee({});t.mount(window),t.setOptions({layoutScroll:!0}),vv.current=t}return vv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Wee={pan:{Feature:uee},drag:{Feature:cee,ProjectionNode:k6,MeasureLayout:S6}};function k2(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,i=s[r];i&&We.postRender(()=>i(e,pf(e)))}class Yee extends _a{mount(){const{current:e}=this.node;e&&(this.unmount=WX(e,n=>(k2(this.node,n,"Start"),s=>k2(this.node,s,"End"))))}unmount(){}}class Qee extends _a{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=mf(Eh(this.node.current,"focus",()=>this.onFocus()),Eh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function D2(t,e,n){const{props:s}=t;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),i=s[r];i&&We.postRender(()=>i(e,pf(e)))}class Xee extends _a{mount(){const{current:e}=this.node;e&&(this.unmount=JX(e,n=>(D2(this.node,n,"Start"),(s,{success:r})=>D2(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const S_=new WeakMap,xv=new WeakMap,Jee=t=>{const e=S_.get(t.target);e&&e(t)},Zee=t=>{t.forEach(Jee)};function ete({root:t,...e}){const n=t||document;xv.has(n)||xv.set(n,{});const s=xv.get(n),r=JSON.stringify(e);return s[r]||(s[r]=new IntersectionObserver(Zee,{root:t,...e})),s[r]}function tte(t,e,n){const s=ete(e);return S_.set(t,n),s.observe(t),()=>{S_.delete(t),s.unobserve(t)}}const nte={some:0,all:1};class ste extends _a{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:r="some",once:i}=e,a={root:n?n.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:nte[r]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),m=u?h:f;m&&m(c)};return tte(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(rte(e,n))&&this.startObserver()}unmount(){}}function rte({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const ite={inView:{Feature:ste},tap:{Feature:Xee},focus:{Feature:Qee},hover:{Feature:Yee}},ate={layout:{ProjectionNode:k6,MeasureLayout:S6}},A_={current:null},D6={current:!1};function ote(){if(D6.current=!0,!!z1)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>A_.current=t.matches;t.addListener(e),e()}else A_.current=!1}const lte=[...i6,nn,oa],cte=t=>lte.find(r6(t)),M2=new WeakMap;function ute(t,e,n){for(const s in e){const r=e[s],i=n[s];if(on(r))t.addValue(s,r);else if(on(i))t.addValue(s,wh(r,{owner:t}));else if(i!==r)if(t.hasValue(s)){const a=t.getValue(s);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(s);t.addValue(s,wh(a!==void 0?a:r,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const O2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class dte{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:r,blockInitialAnimation:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=fT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=tr.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,We.render(this.render,!1,!0))};const{latestValues:c,renderState:u,onUpdate:h}=a;this.onUpdate=h,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=Sy(n),this.isVariantNode=fO(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in m){const _=m[p];c[p]!==void 0&&on(_)&&_.set(c[p],!1)}}mount(e){this.current=e,M2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),D6.current||ote(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:A_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){M2.delete(this.current),this.projection&&this.projection.unmount(),aa(this.notifyUpdate),aa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Uo.has(e),r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&We.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ec){const n=Ec[e];if(!n)continue;const{isEnabled:s,Feature:r}=n;if(!this.features[e]&&r&&s(this.props)&&(this.features[e]=new r(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):mt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<O2.length;s++){const r=O2[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i="on"+r,a=e[i];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=ute(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=wh(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){var s;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(n6(r)||KO(r))?r=parseFloat(r):!cte(r)&&oa.test(n)&&(r=ZO(e,n)),this.setBaseTarget(e,on(r)?r.get():r)),on(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const a=K1(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(r=a[e])}if(s&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!on(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new oT),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class M6 extends dte{constructor(){super(...arguments),this.KeyframeResolver=a6}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;on(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function hte(t){return window.getComputedStyle(t)}class fte extends M6{constructor(){super(...arguments),this.type="html",this.renderInstance=wO}readValueFromInstance(e,n){if(Uo.has(n)){const s=hT(n);return s&&s.default||0}else{const s=hte(e),r=(xO(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return T6(e,n)}build(e,n,s){Q1(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return eT(e,n,s)}}class mte extends M6{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=mt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Uo.has(n)){const s=hT(n);return s&&s.default||0}return n=TO.has(n)?n:H1(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return AO(e,n,s)}build(e,n,s){X1(e,n,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,s,r){EO(e,n,s,r)}mount(e){this.isSVGTag=Z1(e.tagName),super.mount(e)}}const pte=(t,e)=>$1(t)?new mte(e):new fte(e,{allowProjection:t!==S.Fragment}),gte=FX({...UZ,...ite,...Wee,...ate},pte),Hr=nX(gte),yte=({product:t,onAddToCart:e,isLoggedIn:n})=>{const{name:s,description:r,category:i,imageUrl:a,comboImageUrl:o,available:c,stock:u,popular:h,new:f}=t,m=ks(),[p,_]=S.useState(t.sizes[0]),w=p.name==="Combo Meal"&&o?o:a,T=!c||u===0,x=()=>{n?e(t,p):m("/auth/login")},v=()=>T?l.jsx("p",{className:"text-sm font-medium text-red-600",children:"Out of Stock"}):u<5?l.jsxs("p",{className:"text-sm font-medium text-orange-600",children:["Only ",u," left"]}):l.jsx("p",{className:"text-sm font-medium text-green-600",children:"In Stock"});return l.jsxs(ye,{className:"flex flex-col overflow-hidden transition-transform duration-300 hover:-translate-y-1",hover:!0,children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:w,alt:s,className:"h-48 w-full object-cover"}),l.jsxs("div",{className:"absolute top-2 right-2 flex flex-col items-end gap-1",children:[T?l.jsx(Qt,{className:"bg-red-100 text-red-800",children:"Out of Stock"}):u>0&&u<5?l.jsx(Qt,{className:"bg-orange-100 text-orange-800",children:"Low Stock"}):null,h&&!T&&l.jsx(Qt,{className:"bg-primary-100 text-primary-800",children:"Popular"}),f&&!T&&l.jsx(Qt,{className:"bg-blue-100 text-blue-800",children:"New"})]})]}),l.jsxs("div",{className:"flex flex-1 flex-col p-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:i}),l.jsx("h3",{className:"mt-1 text-lg font-semibold text-coffee-900",children:s}),l.jsx("p",{className:"mt-1 h-10 text-sm text-gray-600 line-clamp-2",children:r})]}),l.jsxs("div",{className:"mt-auto pt-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("p",{className:"text-xl font-bold text-primary-600",children:["",p.price.toFixed(2)]}),v()]}),l.jsx("div",{className:"mt-4 flex w-full rounded-full border border-gray-200 bg-gray-50 p-1",children:t.sizes.map(b=>l.jsxs("button",{onClick:()=>_(b),className:`w-1/2 rounded-full py-1.5 text-sm font-semibold transition-colors ${p.name===b.name?"bg-primary-600 text-white shadow":"text-gray-600 hover:bg-primary-50"}`,children:[b.name," (",b.size,")"]},b.name))}),l.jsx("button",{onClick:x,disabled:T,className:"mt-3 flex w-full items-center justify-center gap-2 rounded-full bg-primary-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-gray-400","aria-label":n?`Add ${s} to cart`:`Login to order ${s}`,children:T?"Out of Stock":n?l.jsxs(l.Fragment,{children:[l.jsx(Bb,{className:"h-4 w-4"}),"Add to Cart"]}):"Login to Order"})]})]})]})},O6=()=>l.jsxs(ye,{className:"flex animate-pulse flex-col overflow-hidden",children:[l.jsx("div",{className:"relative",children:l.jsx("div",{className:"h-48 w-full bg-gray-300"})}),l.jsxs("div",{className:"flex flex-1 flex-col p-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"h-4 w-1/4 rounded bg-gray-300"}),l.jsx("div",{className:"mt-2 h-6 w-3/4 rounded bg-gray-300"}),l.jsxs("div",{className:"mt-2 space-y-2",children:[l.jsx("div",{className:"h-4 rounded bg-gray-300"}),l.jsx("div",{className:"h-4 w-5/6 rounded bg-gray-300"})]})]}),l.jsxs("div",{className:"mt-auto pt-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"h-8 w-1/3 rounded bg-gray-300"}),l.jsx("div",{className:"h-5 w-1/4 rounded bg-gray-300"})]}),l.jsx("div",{className:"mt-3 h-10 w-full rounded-full bg-gray-300"})]})]})]}),vte=[{value:"default",label:"Default"},{value:"price-asc",label:"Price: Low to High"},{value:"price-desc",label:"Price: High to Low"},{value:"name-asc",label:"Name: A-Z"},{value:"name-desc",label:"Name: Z-A"}],xte={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},_te={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},bte=()=>{const{products:t,isLoading:e,error:n}=Xc(),[s,r]=S.useState("All"),[i,a]=S.useState(""),[o,c]=S.useState("default"),[u,h]=S.useState(!1),f=S.useRef(null),m=S.useRef(null),{addToCart:p}=kn(),{currentUser:_}=es(),w=S.useMemo(()=>t.length===0?["All"]:["All",...[...new Set(t.map(v=>v.category))].sort()],[t]);S.useEffect(()=>{const x=v=>{f.current&&!f.current.contains(v.target)&&h(!1)};return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[]);const T=S.useMemo(()=>{const v=[...t.filter(b=>{const R=s==="All"||b.category===s,D=i.trim()===""||b.name.toLowerCase().includes(i.toLowerCase())||b.description.toLowerCase().includes(i.toLowerCase());return R&&D})];switch(o){case"price-asc":v.sort((b,R)=>b.sizes[0].price-R.sizes[0].price);break;case"price-desc":v.sort((b,R)=>R.sizes[0].price-b.sizes[0].price);break;case"name-asc":v.sort((b,R)=>b.name.localeCompare(R.name));break;case"name-desc":v.sort((b,R)=>R.name.localeCompare(b.name));break}return v},[s,i,t,o]);return l.jsxs("div",{className:"flex min-h-screen flex-col bg-white",children:[l.jsx(It,{}),l.jsxs("main",{children:[l.jsx("section",{className:"bg-gradient-to-r from-primary-50 to-coffee-50 px-6 py-12 text-center",children:l.jsxs("div",{className:"container mx-auto max-w-4xl",children:[l.jsx("h1",{className:"font-display text-4xl font-bold text-coffee-900 md:text-5xl",children:"Our Menu"}),l.jsx("p",{className:"mt-2 text-lg text-gray-600",children:"Discover your perfect cup "}),l.jsxs("div",{className:"mx-auto mt-6 flex max-w-2xl flex-col items-center gap-4 sm:flex-row",children:[l.jsxs("div",{className:"relative w-full flex-grow",children:[l.jsx(Tp,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",value:i,onChange:x=>a(x.target.value),placeholder:"Search for coffee, matcha...",className:"w-full rounded-full border border-gray-300 py-3 pl-12 pr-4 text-gray-700 placeholder:text-gray-400 shadow-sm focus:border-primary-500 focus:ring-2 focus:ring-primary-500"})]}),l.jsxs("div",{className:"relative flex w-full justify-end sm:w-auto sm:justify-start",ref:f,children:[l.jsx("button",{onClick:()=>h(!u),className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full border border-primary-600 bg-white shadow-sm transition-colors hover:bg-primary-50","aria-haspopup":"true","aria-expanded":u,"aria-label":"Sort products",children:l.jsx(QU,{className:"h-5 w-5 text-gray-500"})}),l.jsx("div",{className:`absolute right-0 top-full z-40 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none transition-all duration-200 ease-out ${u?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,role:"menu","aria-orientation":"vertical",children:l.jsx("div",{className:"py-1",role:"none",children:vte.map(x=>l.jsxs("button",{onClick:()=>{c(x.value),h(!1)},className:`flex w-full items-center justify-between px-4 py-2 text-sm text-left font-medium transition-colors ${o===x.value?"bg-primary-50 text-primary-600":"text-gray-700 hover:bg-gray-100"}`,role:"menuitem",children:[l.jsx("span",{children:x.label}),o===x.value&&l.jsx(Wi,{className:"h-4 w-4"})]},x.value))})})]})]})]})}),l.jsx("div",{className:"sticky top-20 z-30 border-b border-gray-200 bg-white/95 py-3 backdrop-blur-sm",children:l.jsx("div",{className:"container mx-auto flex max-w-7xl gap-2 overflow-x-auto px-6 pb-2",children:w.map(x=>l.jsx("button",{onClick:()=>{var v;r(x),(v=m.current)==null||v.scrollIntoView({behavior:"smooth"})},className:`flex-shrink-0 rounded-full px-4 py-2 text-sm font-semibold transition-colors ${s===x?"bg-primary-600 text-white shadow":"border border-gray-300 bg-white text-gray-700 hover:bg-gray-100"}`,children:x},x))})}),l.jsx("section",{ref:m,className:"bg-gray-50 px-6 py-8 scroll-mt-36",children:l.jsx("div",{className:"container mx-auto max-w-7xl",children:e?l.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:Array.from({length:8}).map((x,v)=>l.jsx(O6,{},v))}):n?l.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border border-red-200 bg-red-50 py-20 text-center text-red-700",children:[l.jsx(da,{className:"h-16 w-16"}),l.jsx("h3",{className:"mt-4 text-xl font-semibold",children:"Oops! Something went wrong."}),l.jsx("p",{className:"mt-2",children:n})]}):T.length>0?l.jsx(Hr.div,{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",variants:xte,initial:"hidden",animate:"visible",children:T.map(x=>l.jsx(Hr.div,{variants:_te,layout:!0,className:"flex",children:l.jsx(yte,{product:x,onAddToCart:p,isLoggedIn:!!_})},x.id))}):l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[l.jsx(Tp,{className:"h-24 w-24 text-gray-300"}),l.jsx("h3",{className:"mt-4 text-xl font-semibold text-gray-800",children:"No products found"}),l.jsx("p",{className:"mt-2 text-gray-500",children:"Try adjusting your filters or search query."})]})})})]}),l.jsx(Rt,{})]})},wte=({selectedMethod:t,onSelectMethod:e})=>{const n=t==="gcash",s=t==="cash",r=({isSelected:i})=>l.jsx("div",{className:`absolute top-4 right-4 flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full border-2 transition-all ${i?"border-primary-600 bg-primary-600":"border-gray-400 bg-white"}`,children:i&&l.jsx(Wi,{className:"h-4 w-4 text-white"})});return l.jsxs("div",{className:"w-full",children:[l.jsx("h2",{className:"mb-4 font-display text-xl font-bold text-coffee-900",children:"Payment Method"}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",role:"radiogroup",children:[l.jsxs("div",{onClick:()=>e("gcash"),role:"radio","aria-checked":n,tabIndex:0,onKeyDown:i=>(i.key===" "||i.key==="Enter")&&e("gcash"),className:`relative cursor-pointer rounded-xl border-2 p-6 transition-all duration-200 ease-in-out hover:border-primary-300 ${n?"border-primary-600 bg-primary-50 shadow-lg":"border-gray-200 bg-white"}`,children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-lg bg-blue-100",children:l.jsx(TP,{className:"h-7 w-7 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"pr-8 font-display text-lg font-bold text-coffee-900",children:"GCash"}),l.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Pay securely via GCash QR code."})]})]}),l.jsx("div",{className:"mt-4",children:l.jsx(Qt,{className:n?"bg-blue-200 text-blue-800":"bg-gray-100 text-gray-700",children:"Instant confirmation"})}),l.jsx(r,{isSelected:n})]}),l.jsxs("div",{onClick:()=>e("cash"),role:"radio","aria-checked":s,tabIndex:0,onKeyDown:i=>(i.key===" "||i.key==="Enter")&&e("cash"),className:`relative cursor-pointer rounded-xl border-2 p-6 transition-all duration-200 ease-in-out hover:border-primary-300 ${s?"border-primary-600 bg-primary-50 shadow-lg":"border-gray-200 bg-white"}`,children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-lg bg-green-100",children:l.jsx(e9,{className:"h-7 w-7 text-green-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"pr-8 font-display text-lg font-bold text-coffee-900",children:"Cash on Pickup"}),l.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Pay when you collect your order."})]})]}),l.jsx("div",{className:"mt-4",children:l.jsx(Qt,{className:s?"bg-green-200 text-green-800":"bg-gray-100 text-gray-700",children:"Pay at counter"})}),l.jsx(r,{isSelected:s})]})]})]})},Tte=({totalAmount:t,orderNumber:e,receipt:n,onReceiptUpload:s})=>{const[r,i]=S.useState(null);S.useEffect(()=>{if(!n){i(null);return}const c=URL.createObjectURL(n);return i(c),()=>URL.revokeObjectURL(c)},[n]);const a=c=>{c.target.files&&c.target.files[0]&&s(c.target.files[0]),c.target.value=""},o=()=>{s(null)};return l.jsxs("div",{className:"w-full max-w-md mx-auto space-y-6",children:[l.jsx("div",{className:"rounded-lg border-l-4 border-blue-400 bg-blue-50 p-4",role:"alert",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(da,{className:"h-5 w-5 text-blue-400","aria-hidden":"true"})}),l.jsx("div",{className:"ml-3",children:l.jsx("p",{className:"text-sm text-blue-700",children:"Please scan the QR code, complete the payment, and upload a screenshot of your receipt."})})]})}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mx-auto flex h-64 w-64 items-center justify-center rounded-xl border-4 border-primary-600 bg-white p-4 shadow-lg",children:l.jsx("div",{className:"relative flex h-full w-full items-center justify-center bg-[radial-gradient(#1e1612_1px,transparent_1px),radial-gradient(#1e1612_1px,transparent_1px)] bg-[length:12px_12px] bg-[position:0_0,6px_6px]",children:l.jsx("div",{className:"bg-white p-2 font-mono text-sm font-bold text-coffee-900",children:e})})}),l.jsxs("p",{className:"mt-4 text-sm font-medium text-gray-600",children:["Merchant: ",l.jsx("span",{className:"font-bold text-coffee-900",children:"Rush Coffee"})]}),l.jsxs("p",{className:"font-display text-3xl font-bold text-primary-600",children:["",t.toFixed(2)]})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("input",{type:"file",id:"receipt-upload",className:"hidden",accept:"image/*",onChange:a}),n?l.jsxs("div",{className:"relative rounded-lg border border-gray-300 bg-white p-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[r?l.jsx("img",{src:r,alt:"Receipt preview",className:"h-16 w-16 flex-shrink-0 rounded-md object-cover"}):l.jsx("div",{className:"flex h-16 w-16 flex-shrink-0 items-center justify-center rounded-md bg-gray-100",children:l.jsx(O9,{className:"h-8 w-8 text-gray-400"})}),l.jsxs("div",{className:"flex-1 overflow-hidden",children:[l.jsx("p",{className:"truncate text-sm font-medium text-gray-800",children:n.name}),l.jsxs("p",{className:"text-xs text-gray-500",children:[(n.size/1024).toFixed(2)," KB"]})]})]}),l.jsx("button",{onClick:o,className:"absolute -top-2 -right-2 flex h-6 w-6 items-center justify-center rounded-full bg-red-500 text-white transition-transform hover:scale-110","aria-label":"Remove receipt",children:l.jsx($r,{className:"h-4 w-4"})})]}):l.jsxs("label",{htmlFor:"receipt-upload",className:"flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-6 text-center transition hover:bg-gray-100",children:[l.jsx(A9,{className:"h-12 w-12 text-gray-400"}),l.jsx("span",{className:"mt-2 block text-sm font-semibold text-gray-600",children:"Upload Receipt"}),l.jsx("span",{className:"mt-1 block text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})]})]})},Ete=({items:t,subtotal:e,serviceFee:n=0,total:s})=>l.jsx("div",{className:"w-full lg:sticky lg:top-24",children:l.jsxs(ye,{className:"rounded-xl border-gray-200 p-6 shadow-none",children:[l.jsx("h2",{className:"mb-4 font-display text-lg font-semibold text-coffee-900",children:"Order Summary"}),l.jsx("div",{className:"max-h-60 space-y-2 overflow-y-auto pr-2",children:t.map((r,i)=>l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"text-gray-700",children:r.productName}),l.jsxs("span",{className:"ml-2 rounded-md bg-gray-100 px-1.5 py-0.5 text-xs font-medium text-gray-600",children:["",r.quantity]})]}),l.jsxs("span",{className:"font-medium text-gray-900",children:["",(r.price*r.quantity).toFixed(2)]})]},i))}),l.jsx("hr",{className:"my-4 border-gray-200"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Subtotal"}),l.jsxs("span",{className:"font-medium text-gray-900",children:["",e.toFixed(2)]})]}),n>0&&l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Service Fee"}),l.jsxs("span",{className:"font-medium text-gray-900",children:["",n.toFixed(2)]})]})]}),l.jsx("hr",{className:"my-4 border-dashed border-gray-300"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-base font-bold text-gray-900",children:"Total"}),l.jsxs("span",{className:"font-display text-2xl font-bold text-primary-600",children:["",s.toFixed(2)]})]})]})}),V6=S.createContext(void 0),yT=()=>{const t=S.useContext(V6);if(t===void 0)throw new Error("useOrder must be used within an OrderProvider");return t},Ste=({children:t})=>{const[e,n]=S.useState(null),[s,r]=S.useState([]),[i,a]=S.useState(!0),{currentUser:o}=es();S.useEffect(()=>{o?(async()=>{a(!0);try{const _=(await xe.collection("orders").where("userId","==",o.uid).get()).docs.map(T=>({id:T.id,...T.data(),timestamp:T.data().timestamp.toDate()}));_.sort((T,x)=>x.timestamp.getTime()-T.timestamp.getTime()),r(_);const w=_.find(T=>T.status!=="completed");n(w||null)}catch(f){console.error("Error fetching order history:",f)}finally{a(!1)}})():(r([]),n(null),a(!1))},[o]),S.useEffect(()=>{if(e&&e.status!=="completed"){const h=["waiting","preparing","ready","completed"],f=e.status,m=h.indexOf(f);if(m===-1||m>=h.length-1)return;const p=setTimeout(()=>{const _=h[m+1];n(w=>w?{...w,status:_}:null)},1e4);return()=>clearTimeout(p)}},[e]);const u={activeOrder:e,setActiveOrder:n,orderHistory:s,addOrderToHistory:async h=>{try{const f=await xe.collection("orders").add({...h,timestamp:De.firestore.FieldValue.serverTimestamp()}),m={...h,id:f.id,timestamp:new Date};r(p=>[m,...p]),n(m)}catch(f){console.error("Error adding order to Firestore:",f)}},isHistoryLoading:i};return l.jsx(V6.Provider,{value:u,children:t})},Ate=()=>{const t=ks(),{cartItems:e,showToast:n,totalCartItems:s,clearCart:r}=kn(),{currentUser:i}=es(),{setActiveOrder:a,addOrderToHistory:o}=yT(),[c,u]=S.useState(null),[h,f]=S.useState({name:"",phone:""}),[m,p]=S.useState(""),[_,w]=S.useState({}),[T,x]=S.useState(null),[v,b]=S.useState(!1),[R,D]=S.useState(!1),{subtotal:M,serviceFee:A,total:E}=S.useMemo(()=>{const j=e.reduce((ce,H)=>ce+H.selectedSize.price*H.quantity,0),W=15;return{subtotal:j,serviceFee:W,total:j+W}},[e]),N=S.useMemo(()=>e.map(j=>({productName:`${j.product.name} (${j.selectedSize.name})`,quantity:j.quantity,price:j.selectedSize.price})),[e]);S.useEffect(()=>{if(!i){n("Please log in to proceed to checkout."),t("/auth/login",{state:{from:"/checkout"}});return}s===0&&!v&&!R&&(n("Your cart is empty. Add items to checkout."),t("/menu"))},[s,t,n,v,R,i]),S.useEffect(()=>{i&&f({name:`${i.firstName} ${i.lastName}`,phone:i.phone||""})},[i]);const I=()=>{const j={};return h.name.trim().length<2&&(j.name="Name must be at least 2 characters long."),/^(09|\+639)\d{9}$/.test(h.phone)||(j.phone="Please enter a valid Philippine phone number (e.g., 09xxxxxxxxx)."),c||(j.payment="Please select a payment method."),c==="gcash"&&!T&&(j.gcash="Please upload your payment receipt to proceed."),w(j),Object.keys(j).length===0},P=async j=>{if(j.preventDefault(),!i||!I()){n("Please correct the errors before proceeding.");return}b(!0);const W=`RC-2025-${Math.floor(1e3+Math.random()*9e3)}`;setTimeout(async()=>{const ce={userId:i.uid,customerName:h.name,orderNumber:W,position:Math.floor(Math.random()*5)+1,status:"waiting",orderItems:e.map(H=>({productId:H.product.id,productName:`${H.product.name} (${H.selectedSize.name})`,quantity:H.quantity,price:H.selectedSize.price})),totalAmount:E,paymentMethod:c,paymentStatus:c==="gcash"?"paid":"pending",estimatedTime:10};await o(ce),r(),b(!1),D(!0),t("/queue",{state:{fromCheckout:!0,orderNumber:W}})},2e3)},k=v||!c||!h.name||!/^(09|\+639)\d{9}$/.test(h.phone)||c==="gcash"&&!T;return!i||s===0&&!R?l.jsxs("div",{className:"flex min-h-screen flex-col",children:[l.jsx(It,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center bg-gray-50 text-center",children:l.jsxs("div",{children:[l.jsx(Fb,{className:"mx-auto h-24 w-24 text-gray-300"}),l.jsx("h1",{className:"mt-4 text-2xl font-bold text-gray-800",children:"Your cart is empty"}),l.jsx("p",{className:"mt-2 text-gray-500",children:"Add some delicious coffee to get started."}),l.jsx("button",{onClick:()=>t("/menu"),className:"mt-6 rounded-full bg-primary-600 px-6 py-2 font-semibold text-white hover:bg-primary-700",children:"Browse Menu"})]})}),l.jsx(Rt,{})]}):l.jsxs("div",{className:"flex min-h-screen flex-col bg-gray-50",children:[l.jsx(It,{}),l.jsxs("main",{className:"container mx-auto max-w-7xl px-4 py-8",children:[l.jsx("h1",{className:"mb-6 font-display text-3xl font-bold text-coffee-900",children:"Checkout"}),l.jsxs("form",{onSubmit:P,id:"checkout-form",className:"grid grid-cols-1 gap-8 lg:grid-cols-3",children:[l.jsxs("div",{className:"space-y-8 lg:col-span-2",children:[l.jsxs("div",{className:"rounded-xl border bg-white p-6",children:[l.jsx("h2",{className:"mb-4 font-display text-xl font-bold text-coffee-900",children:"Your Information"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),l.jsx(Vr,{className:"absolute left-3 top-10 h-5 w-5 text-gray-400"}),l.jsx("input",{type:"text",id:"name",value:h.name,onChange:j=>f({...h,name:j.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 py-2 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"Juan dela Cruz"}),_.name&&l.jsx("p",{className:"mt-1 text-xs text-red-500",children:_.name})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),l.jsx(Or,{className:"absolute left-3 top-10 h-5 w-5 text-gray-400"}),l.jsx("input",{type:"tel",id:"phone",value:h.phone,onChange:j=>f({...h,phone:j.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 py-2 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"09171234567"}),_.phone&&l.jsx("p",{className:"mt-1 text-xs text-red-500",children:_.phone})]})]})]}),l.jsxs("div",{className:"rounded-xl border bg-white p-6",children:[l.jsx(wte,{selectedMethod:c,onSelectMethod:u}),_.payment&&l.jsx("p",{className:"mt-2 text-xs text-red-500",children:_.payment}),c==="gcash"&&l.jsxs("div",{className:"mt-6 border-t pt-6",children:[l.jsx(Tte,{totalAmount:E,orderNumber:`TEMP-${Date.now()}`,receipt:T,onReceiptUpload:x}),_.gcash&&l.jsx("p",{className:"mt-2 text-xs text-red-500 text-center",children:_.gcash})]}),c==="cash"&&l.jsx("div",{className:"mt-6 rounded-lg border-l-4 border-green-400 bg-green-50 p-4",role:"alert",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(da,{className:"h-5 w-5 text-green-400"})}),l.jsx("div",{className:"ml-3",children:l.jsx("p",{className:"text-sm text-green-700",children:"Please prepare the exact amount. You can pay at the counter upon pickup."})})]})})]}),l.jsxs("div",{className:"rounded-xl border bg-white p-6",children:[l.jsx("h2",{className:"mb-4 font-display text-xl font-bold text-coffee-900",children:"Special Instructions (Optional)"}),l.jsxs("div",{className:"relative",children:[l.jsx(Vc,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),l.jsx("textarea",{id:"notes",value:m,onChange:j=>p(j.target.value),rows:3,className:"block w-full rounded-md border-gray-300 py-2 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"e.g., less ice, extra shot..."})]})]}),l.jsx("div",{className:"hidden lg:block",children:l.jsx("button",{type:"submit",form:"checkout-form",disabled:k,className:"mt-2 flex w-full max-w-xs justify-center rounded-full bg-primary-600 px-4 py-3 text-base font-semibold text-white shadow-sm transition-colors hover:bg-primary-700 disabled:cursor-not-allowed disabled:bg-primary-400",children:v?l.jsx(xt,{className:"h-6 w-6 animate-spin"}):"Place Order"})})]}),l.jsx("div",{className:"lg:col-span-1",children:l.jsx(Ete,{items:N,subtotal:M,serviceFee:A,total:E})})]})]}),l.jsx("div",{className:"sticky bottom-0 left-0 right-0 border-t border-gray-200 bg-white/90 p-4 backdrop-blur-sm lg:hidden",children:l.jsx("button",{type:"submit",form:"checkout-form",disabled:k,className:"flex w-full justify-center rounded-full bg-primary-600 px-4 py-3 text-base font-semibold text-white shadow-sm transition-colors hover:bg-primary-700 disabled:cursor-not-allowed disabled:bg-primary-400",children:v?l.jsx(xt,{className:"h-6 w-6 animate-spin"}):`Place Order (${E.toFixed(2)})`})}),l.jsx(Rt,{})]})};function Me(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function la(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const L6=6048e5,Nte=864e5,om=43200,V2=1440;let Ite={};function gf(){return Ite}function Sh(t,e){var o,c,u,h;const n=gf(),s=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,r=Me(t),i=r.getDay(),a=(i<s?7:0)+i-s;return r.setDate(r.getDate()-a),r.setHours(0,0,0,0),r}function ag(t){return Sh(t,{weekStartsOn:1})}function U6(t){const e=Me(t),n=e.getFullYear(),s=la(t,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const r=ag(s),i=la(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const a=ag(i);return e.getTime()>=r.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function L2(t){const e=Me(t);return e.setHours(0,0,0,0),e}function og(t){const e=Me(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Rte(t,e){const n=L2(t),s=L2(e),r=+n-og(n),i=+s-og(s);return Math.round((r-i)/Nte)}function Cte(t){const e=U6(t),n=la(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),ag(n)}function Gm(t,e){const n=Me(t),s=Me(e),r=n.getTime()-s.getTime();return r<0?-1:r>0?1:r}function jte(t){return la(t,Date.now())}function Pte(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function kte(t){if(!Pte(t)&&typeof t!="number")return!1;const e=Me(t);return!isNaN(Number(e))}function Dte(t,e){const n=Me(t),s=Me(e),r=n.getFullYear()-s.getFullYear(),i=n.getMonth()-s.getMonth();return r*12+i}function Mte(t){return e=>{const s=(t?Math[t]:Math.trunc)(e);return s===0?0:s}}function Ote(t,e){return+Me(t)-+Me(e)}function Vte(t){const e=Me(t);return e.setHours(23,59,59,999),e}function Lte(t){const e=Me(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function Ute(t){const e=Me(t);return+Vte(e)==+Lte(e)}function zte(t,e){const n=Me(t),s=Me(e),r=Gm(n,s),i=Math.abs(Dte(n,s));let a;if(i<1)a=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-r*i);let o=Gm(n,s)===-r;Ute(Me(t))&&i===1&&Gm(t,s)===1&&(o=!1),a=r*(i-Number(o))}return a===0?0:a}function Fte(t,e,n){const s=Ote(t,e)/1e3;return Mte(n==null?void 0:n.roundingMethod)(s)}function Bte(t){const e=Me(t),n=la(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const qte={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Hte=(t,e,n)=>{let s;const r=qte[t];return typeof r=="string"?s=r:e===1?s=r.one:s=r.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function _v(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Gte={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$te={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Kte={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Wte={date:_v({formats:Gte,defaultWidth:"full"}),time:_v({formats:$te,defaultWidth:"full"}),dateTime:_v({formats:Kte,defaultWidth:"full"})},Yte={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Qte=(t,e,n,s)=>Yte[t];function Mu(t){return(e,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let r;if(s==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):a;r=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;r=t.values[o]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return r[i]}}const Xte={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Jte={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Zte={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ene={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},tne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},nne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},sne=(t,e)=>{const n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},rne={ordinalNumber:sne,era:Mu({values:Xte,defaultWidth:"wide"}),quarter:Mu({values:Jte,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Mu({values:Zte,defaultWidth:"wide"}),day:Mu({values:ene,defaultWidth:"wide"}),dayPeriod:Mu({values:tne,defaultWidth:"wide",formattingValues:nne,defaultFormattingWidth:"wide"})};function Ou(t){return(e,n={})=>{const s=n.width,r=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],i=e.match(r);if(!i)return null;const a=i[0],o=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?ane(o,f=>f.test(a)):ine(o,f=>f.test(a));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const h=e.slice(a.length);return{value:u,rest:h}}}function ine(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function ane(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function one(t){return(e,n={})=>{const s=e.match(t.matchPattern);if(!s)return null;const r=s[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(r.length);return{value:a,rest:o}}}const lne=/^(\d+)(th|st|nd|rd)?/i,cne=/\d+/i,une={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},dne={any:[/^b/i,/^(a|c)/i]},hne={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fne={any:[/1/i,/2/i,/3/i,/4/i]},mne={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},pne={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gne={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},yne={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},vne={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xne={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_ne={ordinalNumber:one({matchPattern:lne,parsePattern:cne,valueCallback:t=>parseInt(t,10)}),era:Ou({matchPatterns:une,defaultMatchWidth:"wide",parsePatterns:dne,defaultParseWidth:"any"}),quarter:Ou({matchPatterns:hne,defaultMatchWidth:"wide",parsePatterns:fne,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ou({matchPatterns:mne,defaultMatchWidth:"wide",parsePatterns:pne,defaultParseWidth:"any"}),day:Ou({matchPatterns:gne,defaultMatchWidth:"wide",parsePatterns:yne,defaultParseWidth:"any"}),dayPeriod:Ou({matchPatterns:vne,defaultMatchWidth:"any",parsePatterns:xne,defaultParseWidth:"any"})},z6={code:"en-US",formatDistance:Hte,formatLong:Wte,formatRelative:Qte,localize:rne,match:_ne,options:{weekStartsOn:0,firstWeekContainsDate:1}};function bne(t){const e=Me(t);return Rte(e,Bte(e))+1}function wne(t){const e=Me(t),n=+ag(e)-+Cte(e);return Math.round(n/L6)+1}function F6(t,e){var h,f,m,p;const n=Me(t),s=n.getFullYear(),r=gf(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(m=r.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,a=la(t,0);a.setFullYear(s+1,0,i),a.setHours(0,0,0,0);const o=Sh(a,e),c=la(t,0);c.setFullYear(s,0,i),c.setHours(0,0,0,0);const u=Sh(c,e);return n.getTime()>=o.getTime()?s+1:n.getTime()>=u.getTime()?s:s-1}function Tne(t,e){var o,c,u,h;const n=gf(),s=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,r=F6(t,e),i=la(t,0);return i.setFullYear(r,0,s),i.setHours(0,0,0,0),Sh(i,e)}function Ene(t,e){const n=Me(t),s=+Sh(n,e)-+Tne(n,e);return Math.round(s/L6)+1}function Se(t,e){const n=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return n+s}const fi={y(t,e){const n=t.getFullYear(),s=n>0?n:1-n;return Se(e==="yy"?s%100:s,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Se(n+1,2)},d(t,e){return Se(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Se(t.getHours()%12||12,e.length)},H(t,e){return Se(t.getHours(),e.length)},m(t,e){return Se(t.getMinutes(),e.length)},s(t,e){return Se(t.getSeconds(),e.length)},S(t,e){const n=e.length,s=t.getMilliseconds(),r=Math.trunc(s*Math.pow(10,n-3));return Se(r,e.length)}},tl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},U2={G:function(t,e,n){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const s=t.getFullYear(),r=s>0?s:1-s;return n.ordinalNumber(r,{unit:"year"})}return fi.y(t,e)},Y:function(t,e,n,s){const r=F6(t,s),i=r>0?r:1-r;if(e==="YY"){const a=i%100;return Se(a,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):Se(i,e.length)},R:function(t,e){const n=U6(t);return Se(n,e.length)},u:function(t,e){const n=t.getFullYear();return Se(n,e.length)},Q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return Se(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return Se(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,n){const s=t.getMonth();switch(e){case"M":case"MM":return fi.M(t,e);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,n){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return Se(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,n,s){const r=Ene(t,s);return e==="wo"?n.ordinalNumber(r,{unit:"week"}):Se(r,e.length)},I:function(t,e,n){const s=wne(t);return e==="Io"?n.ordinalNumber(s,{unit:"week"}):Se(s,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):fi.d(t,e)},D:function(t,e,n){const s=bne(t);return e==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):Se(s,e.length)},E:function(t,e,n){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,n,s){const r=t.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Se(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,s){const r=t.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Se(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){const s=t.getDay(),r=s===0?7:s;switch(e){case"i":return String(r);case"ii":return Se(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const s=t.getHours();let r;switch(s===12?r=tl.noon:s===0?r=tl.midnight:r=s/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){const s=t.getHours();let r;switch(s>=17?r=tl.evening:s>=12?r=tl.afternoon:s>=4?r=tl.morning:r=tl.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return fi.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):fi.H(t,e)},K:function(t,e,n){const s=t.getHours()%12;return e==="Ko"?n.ordinalNumber(s,{unit:"hour"}):Se(s,e.length)},k:function(t,e,n){let s=t.getHours();return s===0&&(s=24),e==="ko"?n.ordinalNumber(s,{unit:"hour"}):Se(s,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):fi.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):fi.s(t,e)},S:function(t,e){return fi.S(t,e)},X:function(t,e,n){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return F2(s);case"XXXX":case"XX":return Fa(s);case"XXXXX":case"XXX":default:return Fa(s,":")}},x:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"x":return F2(s);case"xxxx":case"xx":return Fa(s);case"xxxxx":case"xxx":default:return Fa(s,":")}},O:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+z2(s,":");case"OOOO":default:return"GMT"+Fa(s,":")}},z:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+z2(s,":");case"zzzz":default:return"GMT"+Fa(s,":")}},t:function(t,e,n){const s=Math.trunc(t.getTime()/1e3);return Se(s,e.length)},T:function(t,e,n){const s=t.getTime();return Se(s,e.length)}};function z2(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=Math.trunc(s/60),i=s%60;return i===0?n+String(r):n+String(r)+e+Se(i,2)}function F2(t,e){return t%60===0?(t>0?"-":"+")+Se(Math.abs(t)/60,2):Fa(t,e)}function Fa(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=Se(Math.trunc(s/60),2),i=Se(s%60,2);return n+r+e+i}const B2=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},B6=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Sne=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],s=n[1],r=n[2];if(!r)return B2(t,e);let i;switch(s){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",B2(s,e)).replace("{{time}}",B6(r,e))},Ane={p:B6,P:Sne},Nne=/^D+$/,Ine=/^Y+$/,Rne=["D","DD","YY","YYYY"];function Cne(t){return Nne.test(t)}function jne(t){return Ine.test(t)}function Pne(t,e,n){const s=kne(t,e,n);if(console.warn(s),Rne.includes(t))throw new RangeError(s)}function kne(t,e,n){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Dne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Mne=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,One=/^'([^]*?)'?$/,Vne=/''/g,Lne=/[a-zA-Z]/;function Iy(t,e,n){var h,f,m,p;const s=gf(),r=s.locale??z6,i=s.firstWeekContainsDate??((f=(h=s.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,a=s.weekStartsOn??((p=(m=s.locale)==null?void 0:m.options)==null?void 0:p.weekStartsOn)??0,o=Me(t);if(!kte(o))throw new RangeError("Invalid time value");let c=e.match(Mne).map(_=>{const w=_[0];if(w==="p"||w==="P"){const T=Ane[w];return T(_,r.formatLong)}return _}).join("").match(Dne).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const w=_[0];if(w==="'")return{isToken:!1,value:Une(_)};if(U2[w])return{isToken:!0,value:_};if(w.match(Lne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:_}});r.localize.preprocessor&&(c=r.localize.preprocessor(o,c));const u={firstWeekContainsDate:i,weekStartsOn:a,locale:r};return c.map(_=>{if(!_.isToken)return _.value;const w=_.value;(jne(w)||Cne(w))&&Pne(w,e,String(t));const T=U2[w[0]];return T(o,w,r.localize,u)}).join("")}function Une(t){const e=t.match(One);return e?e[1].replace(Vne,"'"):t}function zne(t,e,n){const s=gf(),r=(n==null?void 0:n.locale)??s.locale??z6,i=2520,a=Gm(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:a});let c,u;a>0?(c=Me(e),u=Me(t)):(c=Me(t),u=Me(e));const h=Fte(u,c),f=(og(u)-og(c))/1e3,m=Math.round((h-f)/60);let p;if(m<2)return n!=null&&n.includeSeconds?h<5?r.formatDistance("lessThanXSeconds",5,o):h<10?r.formatDistance("lessThanXSeconds",10,o):h<20?r.formatDistance("lessThanXSeconds",20,o):h<40?r.formatDistance("halfAMinute",0,o):h<60?r.formatDistance("lessThanXMinutes",1,o):r.formatDistance("xMinutes",1,o):m===0?r.formatDistance("lessThanXMinutes",1,o):r.formatDistance("xMinutes",m,o);if(m<45)return r.formatDistance("xMinutes",m,o);if(m<90)return r.formatDistance("aboutXHours",1,o);if(m<V2){const _=Math.round(m/60);return r.formatDistance("aboutXHours",_,o)}else{if(m<i)return r.formatDistance("xDays",1,o);if(m<om){const _=Math.round(m/V2);return r.formatDistance("xDays",_,o)}else if(m<om*2)return p=Math.round(m/om),r.formatDistance("aboutXMonths",p,o)}if(p=zte(u,c),p<12){const _=Math.round(m/om);return r.formatDistance("xMonths",_,o)}else{const _=p%12,w=Math.trunc(p/12);return _<3?r.formatDistance("aboutXYears",w,o):_<9?r.formatDistance("overXYears",w,o):r.formatDistance("almostXYears",w+1,o)}}function Ry(t,e){return zne(t,jte(t),e)}const Fne=({children:t,className:e="",hover:n=!1})=>{const s=n?"hover:shadow-xl transition-all duration-300":"";return l.jsx("div",{className:`rounded-lg border border-gray-100 bg-white p-6 shadow-sm ${s} ${e}`,children:t})},Oe=({children:t,variant:e="primary",size:n="md",className:s="",asChild:r=!1,...i})=>{const a="inline-flex items-center justify-center rounded-full font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-60",o={primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-primary-100 text-primary-700 hover:bg-primary-200 focus:ring-primary-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"},c={sm:"px-4 py-2 text-sm",md:"px-6 py-2.5 text-base",lg:"px-8 py-3 text-lg"},u=r?"span":"button";return S.createElement(u,{className:`${a} ${o[e]} ${c[n]} ${s}`,...i},t)},Bne={waiting:{Icon:jg,text:"Your order is in the queue.",color:"text-yellow-600",bgColor:"bg-yellow-100",progress:10,progressText:"Ordered"},preparing:{Icon:Ss,text:"Your order is being prepared.",color:"text-blue-600",bgColor:"bg-blue-100",progress:50,progressText:"Preparing"},ready:{Icon:Cg,text:"Your order is ready for pickup!",color:"text-green-600",bgColor:"bg-green-100",progress:100,progressText:"Ready"},completed:{Icon:Wi,text:"Your order has been completed.",color:"text-primary-600",bgColor:"bg-primary-100",progress:100,progressText:"Completed"}},qne=({order:t})=>{const[e,n]=S.useState(!1),s=ks(),r=Bne[t.status],{addMultipleToCart:i,showToast:a}=kn(),{products:o}=Xc(),c=()=>{const h=[],f=[];for(const m of t.orderItems){const p=o.find(x=>x.id===m.productId);if(!p||!p.available||p.stock===0){f.push(m.productName);continue}const _=m.productName.match(/\((Grande|Venti)\)$/),w=_?_[1]:null;if(!w){f.push(m.productName);continue}const T=p.sizes.find(x=>x.name===w);if(!T){f.push(m.productName);continue}h.push({product:p,selectedSize:T,quantity:m.quantity})}h.length>0&&i(h),f.length>0&&a(`Could not add: ${f.join(", ")}. They may be unavailable.`)},u=()=>{t.status==="completed"?s("/menu"):c()};return l.jsxs(Fne,{className:"w-full max-w-md rounded-2xl p-6 shadow-lg",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full ${r.bgColor}`,children:l.jsx(r.Icon,{className:`h-6 w-6 ${r.color}`})}),l.jsxs("div",{children:[l.jsx("h2",{className:"font-display text-xl font-bold text-coffee-900",children:r.text}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Order #",t.orderNumber]})]})]}),l.jsxs("div",{className:"mt-6 space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm font-medium text-gray-600",children:[l.jsx("span",{children:"Ordered"}),l.jsx("span",{children:"Preparing"}),l.jsx("span",{children:"Ready"})]}),l.jsx("div",{className:"h-2 w-full rounded-full bg-gray-200",children:l.jsx("div",{className:"h-2 rounded-full bg-primary-600 transition-all duration-500 ease-out",style:{width:`${r.progress}%`}})}),l.jsx("p",{className:"text-right text-sm font-semibold text-primary-600",children:r.progressText})]}),l.jsxs("div",{className:"mt-6 border-t border-gray-200 pt-4",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-gray-500",children:"Time Placed"}),l.jsx("span",{className:"font-medium text-gray-800",children:Iy(t.timestamp,"p")})]}),l.jsxs("div",{className:"mt-1 flex justify-between text-sm",children:[l.jsx("span",{className:"text-gray-500",children:"Estimated Wait"}),l.jsxs("span",{className:"font-medium text-gray-800",children:["~",t.estimatedTime," min"]})]}),l.jsxs("div",{className:"mt-3 flex justify-between text-lg font-bold",children:[l.jsx("span",{className:"text-gray-800",children:"Total"}),l.jsxs("span",{className:"text-primary-600",children:["",t.totalAmount.toFixed(2)]})]})]}),l.jsxs("div",{className:"mt-4 border-t border-gray-200",children:[l.jsxs("button",{onClick:()=>n(!e),className:"flex w-full items-center justify-between py-3 text-left font-semibold text-gray-700 hover:text-primary-600",children:[l.jsxs("span",{children:["View Items (",t.orderItems.length,")"]}),l.jsx(zh,{className:`h-5 w-5 transform transition-transform duration-300 ${e?"rotate-180":""}`})]}),l.jsx(df,{children:e&&l.jsx(Hr.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:l.jsx("ul",{className:"space-y-2 pb-2",children:t.orderItems.map((h,f)=>l.jsxs("li",{className:"flex justify-between border-b border-gray-100 py-1 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-800",children:h.productName}),l.jsxs("span",{className:"ml-2 text-gray-500",children:["x",h.quantity]})]}),l.jsxs("span",{className:"text-gray-600",children:["",(h.price*h.quantity).toFixed(2)]})]},f))})})})]}),l.jsx("div",{className:"mt-4 border-t border-gray-200 pt-4",children:l.jsx(Oe,{size:"lg",className:"w-full",onClick:u,variant:t.status==="completed"?"primary":"secondary",children:t.status==="completed"?l.jsxs(l.Fragment,{children:[l.jsx(Bb,{className:"mr-2 h-5 w-5"}),"Start New Order"]}):l.jsxs(l.Fragment,{children:[l.jsx(vP,{className:"mr-2 h-5 w-5"}),"Reorder Items"]})})})]})},Hne="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQ2IiBoZWlnaHQ9IjE3OCIgdmlld0JveD0iMCAwIDI0NiAxNzgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xNTQuNTAzIDgwQzE4MC41MDMgNTEgMjEzLjAwMyAyMC41IDIyNS41MDMgMTguNUMyMzguMDAzIDE2LjUgMjQ0LjAwMyAyOS41IDI0NC4wMDMgMjkuNUMyNDQuMDAzIDI5LjUgMjQ4LjUwMyA1Mi41IDI0MC41MDMgODBDMjMyLjUwMyAxMDcuNSAyMTEuNTAzIDEyNCAyMTEuNTAzIDEyNEMyMTEuNTAzIDEyNCAxNjYuNTAzIDE3MSAxNDcuMDAzIDE3NUMxNDcuMDAzIDE3NSAxMTkuMDAzIDE4MS41IDEwNy4wMDMgMTcyLjVDOTUuMDAyNSAxNjMuNSAxMjguNTAzIDEwOSAxNTQuNTAzIDgwWiIgZmlsbD0iI0VCNUYxNiIvPgo8cGF0aCBkPSJNMTIuMDAyNSA4OUMxMi4wMDI1IDg5IC0yMS4wMjkzIDIyLjAyMyAyMi41MDI1IDE3QzM1LjUwMjUgMTUuNSA4MC4wMDI1IDU2IDc5LjUwMjUgNTkuNUM4Mi41MDI1IDc1IDcyLjAwMjUgODcgNjQuNTAyNSA5N0M2MS4xMzM2IDEwMS40OTIgNjAuMDAyNSAxMDcuNSA1OC4wMDI1IDExOS41QzU4LjAwMjUgMTM5IDUzLjAwMjUgMTM4LjUgNTMuMDAyNSAxMzguNUM1My4wMDI1IDEzOC41IDQwLjUwMjUgMTQxIDEyLjAwMjUgODlaIiBmaWxsPSIjRUI1RjE2IiIvPgo8cGF0aCBkPSJNNDcuMDAyNSAxN0M0MS4wMDI1IDEyLjAwMDEgNDIuMDAyNSAtNy42MjkzOWUtMDYgNTMuMDAyNSAwQzY0LjAwMjUgNy42Mjk0ZS0wNiA3NC4xOTA0IDQuNzY1MzQgODcuMDAyNSAxMEMxMDAuMzQ3IDE1LjQ1MjEgMTEwLjkxMSAxOSAxMTQuNTAzIDI2LjVDMTE4LjA5NCAzNCAxMTQuNTAzIDM5LjUgMTEwLjAwMyA0NUMxMDUuNTAzIDUwLjUgMTAyLjAwMyA1MiA5NC41MDI1IDUxQzg3LjAwMjUgNTAgNTMuMDAyNSAyMiA0Ny4wMDI1IDE3WiIgZmlsbD0iI0VCNUYxNiIvPgo8cGF0aCBkPSJNMjA1LjUwMyAyMy41QzIxOC41MDMgMTQgMjA1LjUwMyA1LjUgMjA1LjUwMyA1LjVDMTYyLjIzOSAxLjQzMjUyIDEyMi40MDggMzEuOTMyNCA4Mi4wMDI1IDg4LjVDNzEuNjQ1NCAxMDMgNjIuNTU4MyAxNTAuMzIyIDc4LjUwMjUgMTYxQzk3LjE3ODQgMTczLjUwOCAxMDIuNjM0IDE2Ny4xMDkgMTAzLjUwMyAxMzJDMTIxLjUwMyA1MSAxOTIuNTAzIDMzIDIwNS41MDMgMjMuNVoiIGZpbGw9IiNFQjVGMTYiLz4KPC9zdmc+Cg==",Gne=()=>{var h;const{currentUser:t}=es(),{activeOrder:e}=yT(),n=Ps(),s=ks(),[r,i]=S.useState("default"),[a,o]=S.useState(!1),c=S.useRef(null);S.useEffect(()=>{"Notification"in window&&(i(Notification.permission),Notification.permission==="default"&&o(!0))},[]),S.useEffect(()=>{if(e&&e.status==="ready"&&r==="granted"&&c.current!==e.id){const f="Your Order is Ready! ",m={body:`Your Rush Coffee order (${e.orderNumber}) is now ready for pickup.`,icon:Hne,tag:e.id},p=new Notification(f,m);p.onclick=()=>{window.focus()},c.current=e.id}(!e||e.status==="completed")&&(c.current=null)},[e,r]);const u=async()=>{if(!("Notification"in window)){alert("This browser does not support desktop notification");return}const f=await Notification.requestPermission();i(f),(f==="granted"||f==="denied")&&o(!1)};return t?e?l.jsxs("div",{className:"flex min-h-screen flex-col bg-gray-50",children:[l.jsx(It,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center px-4 py-12 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex w-full max-w-md flex-col items-center gap-6",children:[((h=n.state)==null?void 0:h.fromCheckout)&&l.jsxs("div",{className:"w-full rounded-lg bg-green-100 p-4 text-center text-green-800 animate-fade-in-up",children:[l.jsx("h2",{className:"font-bold",children:"Order Placed Successfully!"}),l.jsx("p",{className:"text-sm",children:"You are now in the queue. We'll start preparing your order shortly."})]}),a&&r==="default"&&e.status!=="completed"&&l.jsxs("div",{className:"relative w-full animate-fade-in-up rounded-lg border border-primary-200 bg-white p-4 shadow-sm",children:[l.jsx("button",{onClick:()=>o(!1),className:"absolute top-2 right-2 rounded-full p-1 text-gray-400 transition-colors hover:text-gray-600","aria-label":"Dismiss",children:l.jsx($r,{className:"h-4 w-4"})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full bg-primary-100",children:l.jsx(Cg,{className:"h-6 w-6 text-primary-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"Get Order Updates"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Know the moment your coffee is ready!"})]})]}),l.jsx("button",{onClick:u,className:"mt-3 w-full rounded-full bg-primary-600 px-4 py-2 text-sm font-semibold text-white transition-colors hover:bg-primary-700",children:"Enable Notifications"})]}),l.jsx(qne,{order:e})]})}),l.jsx(Rt,{})]}):l.jsxs("div",{className:"flex min-h-screen flex-col bg-gray-50",children:[l.jsx(It,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center px-6 py-20 text-center",children:l.jsxs("div",{children:[l.jsx(Pt,{className:"mx-auto h-24 w-24 text-gray-300 opacity-50"}),l.jsx("h1",{className:"mt-4 font-display text-2xl font-bold text-coffee-900",children:"Your queue is empty"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Ready for your next coffee fix?"}),l.jsxs("button",{onClick:()=>s("/menu"),className:"mt-8 inline-flex items-center justify-center gap-2 rounded-full bg-primary-600 px-8 py-3 font-semibold text-white shadow-lg transition-transform hover:scale-105",children:["Start a New Order",l.jsx(Zl,{className:"h-5 w-5"})]})]})}),l.jsx(Rt,{})]}):l.jsxs("div",{className:"flex min-h-screen flex-col bg-gray-50",children:[l.jsx(It,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center px-6 py-20 text-center",children:l.jsxs("div",{children:[l.jsx(Pt,{className:"mx-auto h-24 w-24 text-gray-300 opacity-50"}),l.jsx("h1",{className:"mt-4 font-display text-2xl font-bold text-coffee-900",children:"You're not in the queue"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Please log in and place an order to see your queue status."}),l.jsxs("div",{className:"mt-8 flex justify-center gap-4",children:[l.jsx(je,{to:"/auth/login",className:"rounded-full bg-primary-600 px-8 py-3 font-semibold text-white transition-transform hover:scale-105",children:"Login"}),l.jsx(je,{to:"/menu",className:"rounded-full border-2 border-primary-600 px-8 py-3 font-semibold text-primary-600 transition-transform hover:scale-105 hover:bg-primary-50",children:"View Menu"})]})]})}),l.jsx(Rt,{})]})},Ac=({isOpen:t,onClose:e,title:n,children:s,footer:r,size:i="md"})=>{if(S.useEffect(()=>{const o=c=>{c.key==="Escape"&&e()};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[e]),!t)return null;const a={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg"};return l.jsx("div",{className:"fixed inset-0 z-50 flex animate-fade-in-up items-center justify-center bg-black/60 p-4 backdrop-blur-sm",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",onClick:e,style:{animationDuration:"0.3s"},children:l.jsx("div",{className:`relative w-full transform transition-all ${a[i]}`,onClick:o=>o.stopPropagation(),children:l.jsxs(ye,{className:"rounded-xl p-0 shadow-2xl",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 p-4",children:[l.jsx("h3",{id:"modal-title",className:"text-lg font-semibold text-coffee-900",children:n}),l.jsx("button",{onClick:e,className:"rounded-full p-1 text-gray-400 transition-colors hover:bg-gray-100 hover:text-gray-700","aria-label":"Close modal",children:l.jsx($r,{className:"h-5 w-5"})})]}),l.jsx("div",{className:"p-6",children:s}),r&&l.jsx("div",{className:"flex justify-end gap-3 rounded-b-xl border-t border-gray-200 bg-gray-50 p-4",children:r})]})})})},$ne={bronze:{Icon:iz,name:"Bronze Member",gradient:"from-orange-400 to-orange-600",nextTierName:"Silver",progressColor:"bg-gray-400",minPoints:0},silver:{Icon:JU,name:"Silver Member",gradient:"from-gray-300 to-gray-500",nextTierName:"Gold",progressColor:"bg-yellow-400",minPoints:300},gold:{Icon:R9,name:"Gold Member",gradient:"from-yellow-400 to-yellow-600",nextTierName:null,progressColor:"",minPoints:1e3}},Kne=({tier:t,currentPoints:e,nextTierPoints:n,showProgress:s=!0})=>{const r=$ne[t],i=n-e,a=t!=="gold"?Math.max(0,Math.min(100,(e-r.minPoints)/(n-r.minPoints)*100)):100;return l.jsxs("div",{className:`relative w-full max-w-sm overflow-hidden rounded-2xl bg-gradient-to-br p-6 text-center text-white shadow-lg md:p-8 ${r.gradient}`,children:[l.jsx("div",{className:"absolute inset-0 -translate-x-full animate-shimmer bg-gradient-to-r from-transparent via-white/30 to-transparent"}),l.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[l.jsx(r.Icon,{className:"h-16 w-16 animate-pulse-slow drop-shadow-lg"}),l.jsx("h2",{className:"mt-4 font-display text-2xl font-bold drop-shadow-md md:text-3xl",children:r.name}),l.jsxs("p",{className:"font-semibold text-white/80",children:[e," points"]})]}),s&&t!=="gold"&&l.jsxs("div",{className:"relative z-10 mt-6 text-left",children:[l.jsxs("p",{className:"text-xs font-semibold md:text-sm",children:[l.jsx("span",{className:"font-bold",children:i>0?i:0})," points to ",r.nextTierName]}),l.jsx("div",{className:"mt-1 h-2.5 w-full overflow-hidden rounded-full bg-black/20",children:l.jsx("div",{className:`h-full rounded-full ${r.progressColor} transition-all duration-500 ease-out`,style:{width:`${a}%`}})})]})]})},Wne={drink:"bg-blue-100 text-blue-800",food:"bg-green-100 text-green-800",discount:"bg-yellow-100 text-yellow-800"},Yne=({reward:t,currentPoints:e,onRedeem:n})=>{const{id:s,name:r,description:i,pointsCost:a,imageUrl:o,category:c,available:u}=t,h=e>=a,f=u&&h,m=a-e,p=()=>u?h?"Redeem Now":l.jsxs(l.Fragment,{children:[l.jsx(wp,{className:"h-4 w-4"}),"Need ",m," more points"]}):"Unavailable";return l.jsxs(ye,{className:"flex flex-col overflow-hidden transition-transform duration-300 hover:-translate-y-1",hover:!0,children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:o,alt:r,className:`h-40 w-full object-cover ${u?"":"grayscale"}`}),l.jsx(Qt,{className:`absolute top-2 left-2 capitalize ${Wne[c]}`,children:c}),!u&&l.jsx(Qt,{className:"absolute top-2 right-2 bg-gray-500 text-white",children:"Temporarily Unavailable"})]}),l.jsxs("div",{className:"flex flex-1 flex-col p-4",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("h3",{className:"text-lg font-semibold text-coffee-900",children:r}),l.jsx("p",{className:"mt-1 h-10 text-sm text-gray-600 line-clamp-2",children:i})]}),l.jsx("div",{className:"mt-4 flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-2 text-primary-600",children:[l.jsx(Yd,{className:"h-5 w-5"}),l.jsxs("p",{className:"text-lg font-bold",children:[a," points"]})]})}),l.jsx("button",{onClick:()=>n(s),disabled:!f,className:"mt-4 flex w-full items-center justify-center gap-2 rounded-full bg-primary-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-gray-400 disabled:text-gray-100","aria-label":f?`Redeem ${r}`:`Cannot redeem ${r}`,children:p()})]})]})},Qne=({history:t})=>{const[e,n]=S.useState("all"),s=S.useMemo(()=>e==="all"?t:t.filter(a=>a.type===e),[t,e]),r=S.useMemo(()=>[...s].sort((a,o)=>o.date.getTime()-a.date.getTime()),[s]),i=a=>a==="earned"?l.jsx("div",{className:"absolute left-0 top-0 flex h-10 w-10 -translate-x-1/2 items-center justify-center rounded-full bg-green-100 ring-8 ring-white",children:l.jsx(Fh,{className:"h-5 w-5 text-green-600"})}):l.jsx("div",{className:"absolute left-0 top-0 flex h-10 w-10 -translate-x-1/2 items-center justify-center rounded-full bg-red-100 ring-8 ring-white",children:l.jsx(yP,{className:"h-5 w-5 text-red-600"})});return l.jsxs(ye,{children:[l.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center",children:[l.jsx("h2",{className:"font-display text-2xl font-bold text-coffee-900",children:"Points History"}),l.jsx("div",{className:"flex gap-2 rounded-full bg-gray-100 p-1",children:["all","earned","redeemed"].map(a=>l.jsx("button",{onClick:()=>n(a),className:`rounded-full px-3 py-1 text-sm font-semibold capitalize transition-colors ${e===a?"bg-primary-600 text-white shadow":"text-gray-600 hover:bg-primary-50"}`,children:a},a))})]}),l.jsx("div",{className:"mt-6 max-h-96 overflow-y-auto pr-2",children:r.length>0?l.jsx("div",{className:"relative border-l-2 border-gray-200 pl-8",children:r.map((a,o)=>l.jsxs("div",{className:`relative ${o<r.length-1?"pb-8":""}`,children:[i(a.type),l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-gray-800",children:a.description}),l.jsx("p",{className:"text-sm text-gray-500",children:Ry(a.date,{addSuffix:!0})})]}),l.jsxs("p",{className:`text-lg font-bold ${a.type==="earned"?"text-green-600":"text-red-600"}`,children:[a.type==="earned"?"+":"",a.points]})]})]},a.id))}):l.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 py-10 text-center",children:[l.jsx(F9,{className:"h-12 w-12 text-gray-300"}),l.jsx("p",{className:"font-semibold text-gray-700",children:"No transactions yet"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Your points history for this filter will appear here."})]})})]})},N_={bronze:{min:0,max:299,name:"Bronze"},silver:{min:300,max:999,name:"Silver"},gold:{min:1e3,max:1/0,name:"Gold"}},Xne=[{name:"Free Grande Drink",description:"Redeem your points for any Grande-sized drink on our menu. A perfect treat!",pointsCost:200,imageUrl:"/Menu/free-grande-drink.jpg",category:"drink",available:!0,displayOrder:1},{name:"10% Off Total Order",description:"Get a 10% discount on your entire order. Great for when you're treating friends!",pointsCost:300,imageUrl:"/Menu/10-off-total-order.jpg",category:"discount",available:!0,displayOrder:2},{name:"Free Pastry Item",description:"Choose any delicious pastry from our selection to complement your coffee.",pointsCost:150,imageUrl:"/Menu/free-pastry-item.jpg",category:"food",available:!0,displayOrder:3},{name:"Upgrade to Venti",description:"Get a free size upgrade from Grande to Venti on any drink.",pointsCost:100,imageUrl:"/Menu/upgrade-to-venti.jpg",category:"drink",available:!0,displayOrder:4}],Jne=()=>{var R;const{currentUser:t}=es(),{showToast:e}=kn(),[n,s]=S.useState([]),[r,i]=S.useState(!0),[a,o]=S.useState(!1),[c,u]=S.useState(null),[h,f]=S.useState(!1),[m,p]=S.useState("");S.useEffect(()=>{(async()=>{i(!0);const M=xe.collection("rewards");if((await M.get()).empty){console.log("Seeding available rewards...");const P=Xne.map(k=>M.add(k));await Promise.all(P)}const I=(await M.orderBy("displayOrder").get()).docs.map(P=>({id:P.id,...P.data()}));s(I),i(!1)})()},[]);const _=(t==null?void 0:t.tier)==="bronze"?"silver":"gold",w=t&&((R=N_[_])==null?void 0:R.min)||0,T=D=>{u(D),o(!0)},x=async()=>{if(!(!t||!c)){f(!0);try{if(t.currentPoints<c.pointsCost)throw new Error("You don't have enough points.");const D=xe.collection("users").doc(t.uid),M={id:`rh-${Date.now()}`,type:"redeemed",points:-c.pointsCost,description:`Redeemed: ${c.name}`,date:new Date};await D.update({currentPoints:De.firestore.FieldValue.increment(-c.pointsCost),rewardsHistory:De.firestore.FieldValue.arrayUnion(M)}),p(`RC-REDEEM-${Math.random().toString(36).substr(2,9).toUpperCase()}`)}catch(D){e(D.message||"Failed to redeem reward."),f(!1)}}},v=()=>{navigator.clipboard&&(navigator.clipboard.writeText(m),e("Code copied to clipboard!"))},b=()=>{o(!1),u(null),f(!1),p("")};return t?l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(It,{}),l.jsxs("main",{children:[l.jsx("section",{className:"bg-gradient-to-r from-primary-50 to-coffee-50 px-6 py-12",children:l.jsx("div",{className:"container mx-auto max-w-7xl",children:l.jsxs("div",{className:"grid grid-cols-1 items-center gap-8 md:grid-cols-3",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("h1",{className:"font-display text-4xl font-bold text-coffee-900 md:text-5xl",children:["Welcome, ",t.firstName,"!"]}),l.jsx("p",{className:"mt-2 text-lg text-gray-600",children:"You're doing great! Keep earning points for amazing rewards."})]}),l.jsx("div",{className:"flex justify-center md:justify-end",children:l.jsx(Kne,{tier:t.tier,currentPoints:t.currentPoints,nextTierPoints:w})})]})})}),l.jsx("section",{className:"px-6 py-16",children:l.jsxs("div",{className:"container mx-auto max-w-7xl",children:[l.jsxs("div",{className:"mb-8 flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"font-display text-3xl font-bold text-coffee-900",children:"Redeem Your Points"}),l.jsx("p",{className:"mt-1 text-gray-600",children:"Use your points to claim these exciting rewards."})]}),l.jsxs("div",{className:"rounded-full bg-white px-4 py-2 text-lg font-semibold text-primary-600 shadow-md",children:["Your Points: ",l.jsx("span",{className:"font-bold",children:t.currentPoints})]})]}),r?l.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:Array.from({length:4}).map((D,M)=>l.jsx(O6,{},M))}):n.length>0?l.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:n.map(D=>l.jsx(Yne,{reward:D,currentPoints:t.currentPoints,onRedeem:()=>T(D)},D.id))}):l.jsxs(ye,{className:"py-20 text-center",children:[l.jsx(Yd,{className:"mx-auto h-16 w-16 text-gray-300"}),l.jsx("h3",{className:"mt-4 font-semibold text-gray-800",children:"No Rewards Available"}),l.jsx("p",{className:"mt-1 text-gray-500",children:"Please check back later for new rewards."})]})]})}),l.jsx("section",{className:"bg-white px-6 py-16",children:l.jsx("div",{className:"container mx-auto max-w-4xl",children:l.jsx(Qne,{history:t.rewardsHistory})})})]}),l.jsx(Rt,{}),l.jsx(Ac,{isOpen:a,onClose:b,title:m?"Reward Claimed!":`Redeem: ${(c==null?void 0:c.name)||""}`,children:m?l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-green-100",children:l.jsx(Wi,{className:"h-8 w-8 text-green-600"})}),l.jsx("h3",{className:"mt-4 text-lg font-semibold text-gray-900",children:"Success!"}),l.jsx("p",{className:"mt-1 text-gray-600",children:"Show this code at the counter to claim your reward:"}),l.jsxs("div",{className:"relative my-4 rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-4",children:[l.jsx("p",{className:"font-mono text-2xl font-bold text-primary-700 tracking-widest",children:m}),l.jsx("button",{onClick:v,className:"absolute top-2 right-2 text-gray-400 hover:text-primary-600",children:l.jsx(b9,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"mt-2 flex items-center justify-center gap-2 rounded-lg bg-yellow-50 p-3 text-sm text-yellow-800",children:[l.jsx(da,{className:"h-5 w-5 flex-shrink-0"}),l.jsx("span",{children:"This code is for one-time use only."})]}),l.jsx("div",{className:"mt-6",children:l.jsx(Oe,{onClick:b,children:"Close"})})]}):l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"text-center text-gray-600",children:["Are you sure you want to spend ",l.jsxs("span",{className:"font-bold text-primary-600",children:[c==null?void 0:c.pointsCost," points"]})," to redeem this reward?"]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx(Oe,{variant:"ghost",onClick:b,children:"Cancel"}),l.jsxs(Oe,{onClick:x,disabled:h,children:[h?l.jsx(xt,{className:"mr-2 h-4 w-4 animate-spin"}):l.jsx(Wi,{className:"mr-2 h-4 w-4"}),"Confirm"]})]})]})})]}):l.jsxs("div",{className:"flex min-h-screen flex-col bg-gray-50",children:[l.jsx(It,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center px-6 py-20 text-center",children:l.jsxs("div",{children:[l.jsx(Yd,{className:"mx-auto h-24 w-24 text-gray-300 opacity-50"}),l.jsx("h1",{className:"mt-4 font-display text-2xl font-bold text-coffee-900",children:"Join Our Rewards Program"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Log in or create an account to start earning points and get free coffee!"}),l.jsxs("div",{className:"mt-8 flex justify-center gap-4",children:[l.jsx(je,{to:"/auth/login",className:"rounded-full bg-primary-600 px-8 py-3 font-semibold text-white transition-transform hover:scale-105",children:"Login"}),l.jsx(je,{to:"/auth/register",className:"rounded-full border-2 border-primary-600 px-8 py-3 font-semibold text-primary-600 transition-transform hover:scale-105 hover:bg-primary-50",children:"Sign Up"})]})]})}),l.jsx(Rt,{})]})},Zne=({user:t,onEditPhoto:e})=>{const n=(s,r)=>`${s.charAt(0)}${r.charAt(0)}`.toUpperCase();return l.jsxs("div",{className:"w-full",children:[l.jsx("div",{className:"relative h-48 w-full bg-gradient-to-r from-primary-500 to-coffee-600"}),l.jsxs("div",{className:"-mt-16 px-6",children:[l.jsxs("div",{className:"relative mx-auto h-32 w-32",children:[t.photoURL?l.jsx("img",{src:t.photoURL,alt:`${t.firstName} ${t.lastName}`,className:"h-full w-full rounded-full border-4 border-white object-cover shadow-lg"}):l.jsx("div",{className:"flex h-full w-full items-center justify-center rounded-full border-4 border-white bg-gradient-to-br from-primary-400 to-primary-600 text-white shadow-lg",children:l.jsx("span",{className:"font-display text-4xl font-bold",children:n(t.firstName,t.lastName)})}),l.jsx("button",{onClick:e,className:"absolute bottom-0 right-0 flex h-10 w-10 items-center justify-center rounded-full bg-primary-600 text-white shadow-lg transition-colors hover:bg-primary-700","aria-label":"Edit profile photo",children:l.jsx(r9,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"mt-4 text-center",children:[l.jsxs("h1",{className:"font-display text-3xl font-bold text-coffee-900",children:[t.firstName," ",t.lastName]}),l.jsx("p",{className:"text-gray-600",children:t.email}),t.role&&l.jsxs(Qt,{className:"mt-2 bg-yellow-100 text-yellow-800 capitalize",children:[l.jsx(Qd,{className:"mr-1 h-3 w-3"}),t.role]})]})]}),l.jsxs("div",{className:"mt-8 grid grid-cols-3 gap-4 border-y border-gray-200 bg-gray-50/50 px-6 py-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx(Ss,{className:"mx-auto mb-1 h-6 w-6 text-primary-600"}),l.jsx("p",{className:"text-xl font-bold text-coffee-900",children:t.totalOrders}),l.jsx("p",{className:"text-xs text-gray-500",children:"Total Orders"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx(p9,{className:"mx-auto mb-1 h-6 w-6 text-primary-600"}),l.jsxs("p",{className:"text-xl font-bold text-coffee-900",children:["",t.totalSpent.toLocaleString()]}),l.jsx("p",{className:"text-xs text-gray-500",children:"Total Spent"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx(hP,{className:"mx-auto mb-1 h-6 w-6 text-primary-600"}),l.jsx("p",{className:"text-xl font-bold text-coffee-900",children:Iy(t.createdAt,"MMMM yyyy")}),l.jsx("p",{className:"text-xs text-gray-500",children:"Member Since"})]})]})]})},ese=({user:t,onSave:e,onCancel:n})=>{const[s,r]=S.useState({firstName:t.firstName,lastName:t.lastName,phone:t.phone||""}),[i,a]=S.useState({}),[o,c]=S.useState(!1),[u,h]=S.useState(!1),{showToast:f}=kn();S.useEffect(()=>{const w=s.firstName!==t.firstName||s.lastName!==t.lastName||s.phone!==(t.phone||"");h(w)},[s,t]);const m=()=>{const w={};return s.firstName.length<2&&(w.firstName="First name must be at least 2 characters."),s.lastName.length<2&&(w.lastName="Last name must be at least 2 characters."),s.phone&&!/^(09|\+639)\d{9}$/.test(s.phone)&&(w.phone="Invalid Philippine phone number format."),a(w),Object.keys(w).length===0},p=w=>{r({...s,[w.target.name]:w.target.value})},_=w=>{w.preventDefault(),m()&&(c(!0),setTimeout(()=>{e(s),c(!1),f("Profile updated successfully!")},1e3))};return l.jsxs(ye,{className:"w-full",children:[l.jsx("h2",{className:"mb-4 font-display text-xl font-bold text-coffee-900",children:"Edit Profile Information"}),l.jsxs("form",{onSubmit:_,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(Vr,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",name:"firstName",id:"firstName",value:s.firstName,onChange:p,className:"w-full rounded-md border-gray-300 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500",required:!0})]}),i.firstName&&l.jsx("p",{className:"mt-1 text-xs text-red-500",children:i.firstName})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last Name"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(Vr,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",name:"lastName",id:"lastName",value:s.lastName,onChange:p,className:"w-full rounded-md border-gray-300 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500",required:!0})]}),i.lastName&&l.jsx("p",{className:"mt-1 text-xs text-red-500",children:i.lastName})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(Or,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"tel",name:"phone",id:"phone",value:s.phone,onChange:p,className:"w-full rounded-md border-gray-300 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]}),i.phone&&l.jsx("p",{className:"mt-1 text-xs text-red-500",children:i.phone})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(nr,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"email",name:"email",id:"email",value:t.email||"",className:"w-full rounded-md border-gray-300 bg-gray-100 pl-10 text-gray-500 shadow-sm",disabled:!0,readOnly:!0})]}),l.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Contact support to change your email address."})]}),l.jsxs("div",{className:"flex justify-end gap-3 border-t border-gray-200 pt-4",children:[l.jsxs(Oe,{type:"button",variant:"ghost",onClick:n,children:[l.jsx($r,{className:"mr-2 h-4 w-4"}),"Cancel"]}),l.jsxs(Oe,{type:"submit",variant:"primary",disabled:!u||o,children:[o?l.jsx(xt,{className:"mr-2 h-4 w-4 animate-spin"}):l.jsx(Lb,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]})]})},q2={completed:{icon:Wi,color:"bg-green-100 text-green-800"},cancelled:{icon:$r,color:"bg-red-100 text-red-800"},preparing:{icon:Ss,color:"bg-blue-100 text-blue-800"},waiting:{icon:Ss,color:"bg-yellow-100 text-yellow-800"},ready:{icon:Ss,color:"bg-purple-100 text-purple-800"}},tse={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},nse={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},sse=({order:t})=>{var c,u;const e=((c=q2[t.status])==null?void 0:c.icon)||Ss,n=((u=q2[t.status])==null?void 0:u.color)||"bg-gray-100 text-gray-800",{addMultipleToCart:s,showToast:r}=kn(),{products:i}=Xc(),a=()=>{const h=[],f=[];for(const m of t.orderItems){const p=i.find(x=>x.id===m.productId);if(!p||!p.available||p.stock===0){f.push(m.productName);continue}const _=m.productName.match(/\((Grande|Venti)\)$/),w=_?_[1]:null;if(!w){f.push(m.productName);continue}const T=p.sizes.find(x=>x.name===w);if(!T){f.push(m.productName);continue}h.push({product:p,selectedSize:T,quantity:m.quantity})}h.length>0&&s(h),f.length>0&&r(`Could not add: ${f.join(", ")}. They may be unavailable.`)},o=()=>{const h=t.orderItems;return h.length<=2?h.map(m=>`${m.quantity}x ${m.productName}`).join(", "):`${h.slice(0,2).map(m=>m.productName).join(", ")}, and ${h.length-2} more item(s)`};return l.jsx(ye,{hover:!0,className:"transition-shadow duration-300",children:l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"font-mono text-sm font-semibold text-primary-700",children:t.orderNumber}),l.jsxs(Qt,{className:`capitalize ${n}`,children:[l.jsx(e,{className:"mr-1 h-3 w-3"}),t.status]})]}),l.jsx("p",{className:"mt-1 text-xs text-gray-500",children:Iy(t.timestamp,"MMM dd, yyyy  hh:mm a")}),l.jsx("p",{className:"mt-2 text-sm text-gray-700",children:o()})]}),l.jsxs("div",{className:"flex-shrink-0 text-right sm:ml-4",children:[l.jsxs("p",{className:"font-display text-2xl font-bold text-coffee-900",children:["",t.totalAmount.toFixed(2)]}),l.jsxs(Oe,{size:"sm",variant:"secondary",className:"mt-2",onClick:a,children:[l.jsx(vP,{className:"mr-2 h-4 w-4"}),"Reorder"]})]})]})})},H2=({orders:t,limit:e,showViewAll:n,onViewAll:s})=>{const r=[...t].sort((a,o)=>o.timestamp.getTime()-a.timestamp.getTime()),i=e?r.slice(0,e):r;return t.length===0?l.jsxs("div",{className:"py-16 text-center",children:[l.jsx(Fb,{className:"mx-auto h-16 w-16 text-gray-300"}),l.jsx("h3",{className:"mt-4 text-xl font-semibold text-gray-800",children:"No Orders Yet"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Your past orders will appear here."}),l.jsx(Oe,{size:"lg",className:"mt-6",children:"Browse Menu"})]}):l.jsxs("div",{children:[l.jsx(Hr.div,{className:"space-y-4",variants:tse,initial:"hidden",animate:"visible",children:i.map(a=>l.jsx(Hr.div,{variants:nse,layout:!0,children:l.jsx(sse,{order:a})},a.id))}),n&&r.length>(e||0)&&l.jsx("div",{className:"mt-6 text-center",children:l.jsx(Oe,{variant:"ghost",onClick:s,children:"View All Orders"})})]})},Vu=({label:t,description:e,enabled:n,onChange:s,Icon:r})=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(r,{className:"h-5 w-5 text-gray-500"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-800",children:t}),l.jsx("p",{className:"text-sm text-gray-500",children:e})]})]}),l.jsx("button",{type:"button",className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 ${n?"bg-primary-600":"bg-gray-200"}`,role:"switch","aria-checked":n,onClick:()=>s(!n),children:l.jsx("span",{"aria-hidden":"true",className:`inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${n?"translate-x-5":"translate-x-0"}`})})]}),rse=({preferences:t,onUpdatePreferences:e})=>{const[n,s]=S.useState(t),[r,i]=S.useState(!1),[a,o]=S.useState(!1),{showToast:c}=kn(),u=(R,D,M)=>{const A={...n,[R]:{...n[R],[D]:M}};s(A),e({[R]:A[R]}),c("Preferences updated!")},[h,f]=S.useState({current:"",new:"",confirm:""}),[m,p]=S.useState({current:!1,new:!1,confirm:!1}),[_,w]=S.useState(!1),[T,x]=S.useState({password:"",checkbox:!1}),[v,b]=S.useState(!1);return l.jsxs(l.Fragment,{children:[l.jsxs(ye,{children:[l.jsx("h2",{className:"mb-4 font-display text-2xl font-bold text-coffee-900",children:"Preferences & Settings"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-gray-500",children:"Notifications"}),l.jsx(Vu,{Icon:Cg,label:"Push Notifications",description:"Get notified when order is ready",enabled:n.notifications.push,onChange:R=>u("notifications","push",R)}),l.jsx(Vu,{Icon:nr,label:"Email Updates",description:"Receive order updates via email",enabled:n.notifications.emailUpdates,onChange:R=>u("notifications","emailUpdates",R)}),l.jsx(Vu,{Icon:nr,label:"Marketing Emails",description:"Get news and promotions",enabled:n.notifications.marketing,onChange:R=>u("notifications","marketing",R)})]}),l.jsx("hr",{className:"my-6"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(mz,{className:"h-5 w-5 text-gray-500"}),l.jsx("h3",{className:"font-semibold text-gray-800",children:"Appearance"})]}),l.jsx("div",{className:"flex gap-2 rounded-full bg-gray-100 p-1",children:["light","dark","auto"].map(R=>l.jsx("button",{onClick:()=>u("theme","theme",R),className:`w-full rounded-full py-1.5 text-sm font-semibold capitalize transition-colors ${n.theme===R?"bg-primary-600 text-white shadow":"text-gray-600 hover:bg-primary-50"}`,children:R},R))})]}),l.jsx("hr",{className:"my-6"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-gray-500",children:"Privacy"}),l.jsx(Vu,{Icon:Qd,label:"Share anonymous usage data",description:"Help us improve our services",enabled:n.privacy.shareUsageData,onChange:R=>u("privacy","shareUsageData",R)}),l.jsx(Vu,{Icon:Qd,label:"Personalized recommendations",description:"Get recommendations based on your activity",enabled:n.privacy.personalizedRecs,onChange:R=>u("privacy","personalizedRecs",R)})]})]}),l.jsxs(ye,{className:"mt-6 border-l-4 border-red-500",children:[l.jsx("h2",{className:"mb-4 font-display text-xl font-bold text-red-700",children:"Account Management"}),l.jsxs("div",{className:"flex flex-col items-start gap-4 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"Change Password"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Update your password for better security."})]}),l.jsxs(Oe,{variant:"secondary",onClick:()=>i(!0),children:[l.jsx(W9,{className:"mr-2 h-4 w-4"}),"Change Password"]})]}),l.jsx("hr",{className:"my-4"}),l.jsxs("div",{className:"flex flex-col items-start gap-4 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"Delete Account"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Permanently delete your account and all data."})]}),l.jsxs(Oe,{variant:"danger",onClick:()=>o(!0),children:[l.jsx(Pg,{className:"mr-2 h-4 w-4"}),"Delete Account"]})]})]}),l.jsx(Ac,{isOpen:r,onClose:()=>i(!1),title:"Change Password",children:l.jsx("form",{className:"space-y-4",children:l.jsx("p",{className:"text-sm text-gray-600",children:"Password change functionality is coming soon."})})}),l.jsx(Ac,{isOpen:a,onClose:()=>o(!1),title:"Delete Account",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-red-100",children:l.jsx(bP,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),l.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Are you absolutely sure?"}),l.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"This action cannot be undone. This will permanently delete your account, orders, and rewards."}),l.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Account deletion functionality is coming soon."})]})})]})},ise=["Poor","Fair","Good","Very Good","Excellent"],ase={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"},lg=({rating:t,onRatingChange:e,readonly:n=!1,size:s="md",className:r=""})=>{const[i,a]=S.useState(0),o=!n&&e,c=p=>{o&&e(p)},u=p=>{o&&a(p)},h=()=>{o&&a(0)},f=i||t,m=f>0?ise[f-1]:"";return l.jsxs("div",{className:`flex flex-col items-center gap-2 ${r}`,children:[l.jsx("div",{className:"flex",onMouseLeave:h,role:o?"radiogroup":"img","aria-label":o?"Star rating":`Rating: ${t} out of 5 stars`,children:[...Array(5)].map((p,_)=>{const w=_+1,T=w<=f;return l.jsx("button",{type:"button",disabled:!o,onClick:()=>c(w),onMouseEnter:()=>u(w),className:`transition-colors duration-200 ${o?"cursor-pointer":"cursor-default"}`,"aria-label":o?`${w} star`:void 0,"aria-checked":o?t===w:void 0,role:o?"radio":void 0,children:l.jsx(_P,{className:`
                  ${ase[s]}
                  ${T?"text-yellow-400":"text-gray-300"}
                  transition-transform duration-200
                  ${o&&T?"hover:scale-110":""}
                `,fill:T?"currentColor":"none"})},_)})}),o&&l.jsx("div",{className:"h-5 text-sm font-medium text-gray-600",children:m})]})},ose=({user:t})=>{const[e,n]=S.useState(0),[s,r]=S.useState("food"),[i,a]=S.useState(""),[o,c]=S.useState(!1),[u,h]=S.useState([]),[f,m]=S.useState(!0),[p,_]=S.useState(null),{showToast:w}=kn();S.useEffect(()=>{if(!t)return;const b=xe.collection("feedback").where("userId","==",t.uid).onSnapshot(R=>{const D=[];R.forEach(M=>{var E,N;const A=M.data();D.push({id:M.id,...A,createdAt:(E=A.createdAt)==null?void 0:E.toDate(),updatedAt:(N=A.updatedAt)==null?void 0:N.toDate()})}),D.sort((M,A)=>{var E,N;return(((E=A.createdAt)==null?void 0:E.getTime())||0)-(((N=M.createdAt)==null?void 0:N.getTime())||0)}),h(D),m(!1)});return()=>b()},[t]);const T=async v=>{if(v.preventDefault(),e===0||i.trim().length<10){w("Please provide a rating and a comment (at least 10 characters).");return}c(!0);try{await xe.collection("feedback").add({userId:t.uid,rating:e,category:s,comment:i,status:"pending",createdAt:De.firestore.FieldValue.serverTimestamp(),updatedAt:De.firestore.FieldValue.serverTimestamp()}),w("Feedback submitted successfully!"),n(0),r("food"),a("")}catch(b){console.error("Error submitting feedback: ",b),w("Failed to submit feedback. Please try again.")}finally{c(!1)}},x={pending:"bg-yellow-100 text-yellow-800",reviewed:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800"};return l.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[l.jsx("div",{className:"lg:col-span-2",children:l.jsxs(ye,{children:[l.jsx("h2",{className:"mb-4 font-display text-2xl font-bold text-coffee-900",children:"Your Feedback History"}),f?l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx(xt,{className:"h-8 w-8 animate-spin text-primary-600"})}):u.length>0?l.jsx("div",{className:"space-y-3",children:u.map(v=>l.jsxs("div",{className:"rounded-lg border border-gray-200",children:[l.jsxs("button",{onClick:()=>_(p===v.id?null:v.id),className:"flex w-full items-center justify-between p-4 text-left",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(lg,{rating:v.rating,size:"sm",readonly:!0}),l.jsxs("div",{className:"flex-1 overflow-hidden",children:[l.jsx("p",{className:"font-semibold text-gray-800 truncate",children:v.comment}),l.jsx("p",{className:"text-xs text-gray-500",children:v.createdAt?Ry(v.createdAt,{addSuffix:!0}):"Just now"})]})]}),l.jsx(zh,{className:`h-5 w-5 transform transition-transform ${p===v.id?"rotate-180":""}`})]}),l.jsx(df,{children:p===v.id&&l.jsx(Hr.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:l.jsxs("div",{className:"border-t p-4",children:[l.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:v.comment}),v.response&&l.jsxs("div",{className:"mt-4 rounded-md border-l-4 border-primary-400 bg-primary-50 p-3",children:[l.jsx("p",{className:"font-semibold text-primary-800",children:"Response from Rush Coffee:"}),l.jsxs("p",{className:"mt-1 text-sm text-primary-700 italic",children:['"',v.response,'"']})]}),l.jsx("div",{className:"mt-3",children:l.jsx(Qt,{className:`capitalize ${x[v.status]}`,children:v.status})})]})})})]},v.id))}):l.jsxs("div",{className:"py-10 text-center text-gray-500",children:[l.jsx(Vc,{className:"mx-auto h-12 w-12 text-gray-300"}),l.jsx("p",{className:"mt-2 font-semibold",children:"No feedback history found."}),l.jsx("p",{className:"text-sm",children:"Share your thoughts with us using the form!"})]})]})}),l.jsx("div",{children:l.jsxs(ye,{children:[l.jsx("h2",{className:"mb-4 font-display text-2xl font-bold text-coffee-900",children:"Leave Feedback"}),l.jsxs("form",{onSubmit:T,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Overall Rating"}),l.jsx(lg,{rating:e,onRatingChange:n})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category"}),l.jsxs("select",{id:"category",value:s,onChange:v=>r(v.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[l.jsx("option",{value:"food",children:"Food & Drinks"}),l.jsx("option",{value:"service",children:"Service"}),l.jsx("option",{value:"system",children:"App/Website"}),l.jsx("option",{value:"other",children:"Other"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700",children:"Comments"}),l.jsx("textarea",{id:"comment",value:i,onChange:v=>a(v.target.value),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"Tell us more about your experience..."})]}),l.jsxs(Oe,{type:"submit",disabled:o,className:"w-full",children:[o?l.jsx(xt,{className:"mr-2 h-4 w-4 animate-spin"}):l.jsx(Ub,{className:"mr-2 h-4 w-4"}),o?"Submitting...":"Submit Feedback"]})]})]})})]})},G2=()=>l.jsx(ye,{className:"animate-pulse",children:l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"flex-grow space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"h-4 w-1/3 rounded bg-gray-300"}),l.jsx("div",{className:"h-5 w-1/4 rounded-full bg-gray-300"})]}),l.jsx("div",{className:"h-3 w-1/4 rounded bg-gray-300"}),l.jsx("div",{className:"h-4 w-1/2 rounded bg-gray-300"})]}),l.jsxs("div",{className:"flex-shrink-0 space-y-2 text-right sm:ml-4",children:[l.jsx("div",{className:"h-8 w-24 rounded bg-gray-300 ml-auto"}),l.jsx("div",{className:"h-8 w-28 rounded-full bg-gray-300 ml-auto"})]})]})}),lse=()=>{const{currentUser:t,updateUserProfile:e,updateUserPhoto:n}=es(),{orderHistory:s,isHistoryLoading:r}=yT(),[i,a]=S.useState(null),[o,c]=S.useState("overview"),[u,h]=S.useState(!1),[f,m]=S.useState(!1),[p,_]=S.useState(null),[w,T]=S.useState(null),[x,v]=S.useState(!1),b=S.useRef(null),{showToast:R,addToCart:D}=kn();S.useEffect(()=>{a(t)},[t]),S.useEffect(()=>{if(!p){T(null);return}const W=URL.createObjectURL(p);return T(W),()=>URL.revokeObjectURL(W)},[p]);const M=S.useMemo(()=>i?rO.find(W=>W.id==="cb-01"):null,[i]),A=W=>{i&&e&&(e(W),h(!1))},E=W=>{i&&a(ce=>ce?{...ce,preferences:{...ce.preferences,...W}}:null)},N=W=>{if(W.target.files&&W.target.files[0]){if(W.target.files[0].size>2*1024*1024){R("File size should not exceed 2MB.");return}_(W.target.files[0])}},I=()=>{if(!p||!i||!n)return;v(!0);const W=new FileReader;W.readAsDataURL(p),W.onloadend=async()=>{const ce=W.result;try{await n(ce),v(!1),m(!1),_(null),R("Profile photo updated!")}catch(H){console.error("Error updating photo:",H),R("Failed to update photo."),v(!1)}}},P=()=>{M&&D(M,M.sizes[0])};if(!i)return l.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50",children:l.jsx(xt,{className:"h-12 w-12 animate-spin text-primary-600"})});const k=[{id:"overview",label:"Overview",Icon:Vr},{id:"orders",label:"Order History",Icon:Fb},{id:"feedback",label:"My Feedback",Icon:Vc},{id:"settings",label:"Settings",Icon:zb}],j=()=>{switch(o){case"orders":return r?l.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((W,ce)=>l.jsx(G2,{},ce))}):l.jsx(H2,{orders:s});case"settings":return l.jsx(rse,{preferences:i.preferences,onUpdatePreferences:E});case"feedback":return l.jsx(ose,{user:i});case"overview":default:return l.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[l.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[u?l.jsx(ese,{user:i,onSave:A,onCancel:()=>h(!1)}):l.jsxs(ye,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"font-display text-xl font-bold text-coffee-900",children:"Quick Info"}),l.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>h(!0),children:[l.jsx(xP,{className:"mr-2 h-4 w-4"})," Edit Profile"]})]}),l.jsxs("ul",{className:"mt-4 space-y-3 text-gray-700",children:[l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx(nr,{className:"h-5 w-5 text-gray-400"})," ",i.email]}),l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx(Or,{className:"h-5 w-5 text-gray-400"})," ",i.phone||"Not provided"]}),l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx(hP,{className:"h-5 w-5 text-gray-400"})," Member since ",Iy(i.createdAt,"MMMM dd, yyyy")]})]})]}),r?l.jsxs(ye,{children:[l.jsx("h3",{className:"font-display text-xl font-bold text-coffee-900",children:"Recent Orders"}),l.jsx("div",{className:"mt-4 space-y-4",children:Array.from({length:3}).map((W,ce)=>l.jsx(G2,{},ce))})]}):l.jsx(H2,{orders:s,limit:3,showViewAll:!0,onViewAll:()=>c("orders")})]}),l.jsxs("div",{className:"space-y-6 lg:col-span-1",children:[M&&l.jsxs(ye,{children:[l.jsx("h3",{className:"font-display text-xl font-bold text-coffee-900",children:"Your Favorite"}),l.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[l.jsx("img",{src:M.imageUrl,alt:M.name,className:"h-20 w-20 rounded-lg object-cover"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-gray-800",children:M.name}),l.jsx("p",{className:"text-sm text-gray-500",children:M.category}),l.jsx(Oe,{size:"sm",variant:"secondary",className:"mt-2",onClick:P,children:"Order Again"})]})]})]}),l.jsxs(ye,{children:[l.jsx("h3",{className:"font-display text-xl font-bold text-coffee-900",children:"Quick Stats"}),l.jsxs("ul",{className:"mt-4 space-y-3 text-gray-700",children:[l.jsxs("li",{className:"flex justify-between",children:[l.jsx("span",{children:"Orders this week:"})," ",l.jsx("span",{className:"font-bold",children:"5"})]}),l.jsxs("li",{className:"flex justify-between",children:[l.jsx("span",{children:"Orders this month:"})," ",l.jsx("span",{className:"font-bold",children:"12"})]}),l.jsxs("li",{className:"flex justify-between",children:[l.jsx("span",{children:"Total Savings:"})," ",l.jsx("span",{className:"font-bold text-green-600",children:"250.00"})]})]})]})]})]})}};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(It,{}),l.jsxs("main",{children:[l.jsx(Zne,{user:i,onEditPhoto:()=>m(!0)}),l.jsx("div",{className:"sticky top-20 z-30 border-b border-gray-200 bg-white/95 backdrop-blur-sm",children:l.jsx("div",{className:"container mx-auto max-w-7xl px-6",children:l.jsx("nav",{className:"-mb-px flex space-x-6 overflow-x-auto",children:k.map(W=>l.jsxs("button",{onClick:()=>c(W.id),className:`group inline-flex shrink-0 items-center gap-2 whitespace-nowrap border-b-2 px-1 py-4 text-sm font-medium transition-colors ${o===W.id?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:[l.jsx(W.Icon,{className:`h-5 w-5 ${o!==W.id&&"text-gray-400 group-hover:text-gray-500"}`}),W.label]},W.id))})})}),l.jsx("div",{className:"container mx-auto max-w-7xl p-6",children:j()})]}),l.jsx(Rt,{}),l.jsx(Ac,{isOpen:f,onClose:()=>m(!1),title:"Upload New Photo",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{type:"file",ref:b,onChange:N,accept:"image/*",className:"hidden"}),l.jsx("div",{className:"flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-6 text-center transition hover:bg-gray-100",onClick:()=>{var W;return(W=b.current)==null?void 0:W.click()},children:w?l.jsx("img",{src:w,alt:"Preview",className:"h-32 w-32 rounded-full object-cover"}):l.jsxs(l.Fragment,{children:[l.jsx(ZS,{className:"h-12 w-12 text-gray-400"}),l.jsx("span",{className:"mt-2 block text-sm font-semibold text-gray-600",children:"Click to upload"}),l.jsx("span",{className:"mt-1 block text-xs text-gray-500",children:"PNG or JPG (MAX. 2MB)"})]})}),x&&l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:l.jsx("div",{className:"bg-primary-600 h-2.5 rounded-full animate-pulse",style:{width:"100%"}})}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx(Oe,{variant:"ghost",onClick:()=>m(!1),children:"Cancel"}),l.jsxs(Oe,{onClick:I,disabled:!p||x,children:[x?l.jsx(xt,{className:"mr-2 h-4 w-4 animate-spin"}):l.jsx(ZS,{className:"mr-2 h-4 w-4"}),"Upload Photo"]})]})]})})]})},cse=(t,e=2e3)=>{const[n,s]=S.useState(0),r=S.useRef(null),i=t%1!==0?1:0;return S.useEffect(()=>{const a=new IntersectionObserver(([c])=>{if(c.isIntersecting){let u=0;const h=t;if(u===h){s(h);return}const f=Math.round(e/(1e3/60)),m=(h-u)/f,p=()=>{u+=m,u<h?(s(u),requestAnimationFrame(p)):s(h)};requestAnimationFrame(p),a.disconnect()}},{threshold:.1}),o=r.current;return o&&a.observe(o),()=>{o&&a.unobserve(o)}},[t,e]),{count:n.toFixed(i),ref:r}},lm=({icon:t,value:e,label:n,suffix:s=""})=>{const{count:r,ref:i}=cse(e),a=r.includes(".");return l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx(t,{className:"mb-2 h-10 w-10 text-primary-600"}),l.jsxs("span",{ref:i,className:"font-display text-4xl font-bold text-coffee-900",children:[Number(r).toLocaleString(void 0,{minimumFractionDigits:a?1:0,maximumFractionDigits:a?1:0}),s]}),l.jsx("p",{className:"mt-1 text-gray-600",children:n})]})},use=()=>l.jsxs("div",{className:"bg-white",children:[l.jsx(It,{}),l.jsxs("main",{children:[l.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-primary-50 via-coffee-100 to-white px-6 py-24 text-center",children:[l.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/az-subtle.png')] opacity-30"}),l.jsxs("div",{className:"relative z-10 mx-auto max-w-4xl",children:[l.jsx("h1",{className:"animate-fade-in-up font-display text-5xl font-bold text-coffee-900 md:text-6xl",style:{animationDelay:"100ms",opacity:0},children:"About Rush Coffee"}),l.jsx("p",{className:"animate-fade-in-up mt-4 text-xl text-gray-700 md:text-2xl",style:{animationDelay:"300ms",opacity:0},children:"More than just coffee, it's a revolution in your daily ritual."})]})]}),l.jsx("section",{className:"px-6 py-20",children:l.jsxs("div",{className:"container mx-auto grid max-w-7xl items-center gap-12 md:grid-cols-2",children:[l.jsxs("div",{className:"animate-fade-in-up",children:[l.jsx("h2",{className:"font-display text-3xl font-bold text-coffee-900 md:text-4xl",children:"Our Story"}),l.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Founded in 2023 by a group of passionate coffee aficionados and tech enthusiasts, Rush Coffee was born from a simple yet powerful idea: your coffee break should be a moment of joy, not a test of patience."}),l.jsx("p",{className:"mt-4 text-gray-600",children:"We saw the long lines, the rushed orders, and the precious minutes slipping away from people's days. Our mission became clear: to blend the rich tradition of artisanal coffee with the seamless efficiency of modern technology. We're not just serving coffee; we're giving you back your time, one perfectly brewed cup at a time."})]}),l.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:"200ms",opacity:0},children:l.jsx("img",{src:"/Menu/free-pastry-item.jpg",alt:"Inside Rush Coffee shop",className:"h-80 w-full rounded-lg object-cover shadow-xl"})})]})}),l.jsx("section",{className:"bg-gray-50 px-6 py-20",children:l.jsxs("div",{className:"container mx-auto max-w-7xl",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"font-display text-3xl font-bold text-coffee-900 md:text-4xl",children:"What We Stand For"}),l.jsx("p",{className:"mx-auto mt-4 max-w-2xl text-gray-600",children:"Our core values guide every bean we roast and every line of code we write."})]}),l.jsxs("div",{className:"mt-12 grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsxs(ye,{hover:!0,className:"text-center",children:[l.jsx(Ss,{className:"mx-auto mb-4 h-12 w-12 text-primary-600"}),l.jsx("h3",{className:"font-display text-xl font-semibold text-coffee-900",children:"Quality"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"From ethically sourced, premium beans to the perfect extraction, excellence is in every cup."})]}),l.jsxs(ye,{hover:!0,className:"text-center",children:[l.jsx(Bz,{className:"mx-auto mb-4 h-12 w-12 text-primary-600"}),l.jsx("h3",{className:"font-display text-xl font-semibold text-coffee-900",children:"Speed"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Our digital queue system ensures your order is ready when you are. Fast, efficient, and always fresh."})]}),l.jsxs(ye,{hover:!0,className:"text-center",children:[l.jsx(Ep,{className:"mx-auto mb-4 h-12 w-12 text-primary-600"}),l.jsx("h3",{className:"font-display text-xl font-semibold text-coffee-900",children:"Community"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"We're more than a coffee shop; we're a hub for connection, creativity, and caffeine lovers."})]}),l.jsxs(ye,{hover:!0,className:"text-center",children:[l.jsx(J9,{className:"mx-auto mb-4 h-12 w-12 text-primary-600"}),l.jsx("h3",{className:"font-display text-xl font-semibold text-coffee-900",children:"Innovation"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Continuously improving your experience by thoughtfully integrating technology with tradition."})]})]})]})}),l.jsx("section",{className:"bg-white px-6 py-20",children:l.jsx("div",{className:"container mx-auto max-w-7xl",children:l.jsxs("div",{className:"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsx(lm,{icon:Ep,value:1e4,label:"Happy Customers",suffix:"+"}),l.jsx(lm,{icon:Ss,value:5e4,label:"Coffees Served",suffix:"+"}),l.jsx(lm,{icon:_P,value:4.9,label:"Average Rating"}),l.jsx(lm,{icon:Uz,value:5,label:"Minutes Average Wait"})]})})}),l.jsx("section",{className:"bg-gray-50 px-6 py-20",children:l.jsxs("div",{className:"container mx-auto grid max-w-7xl items-center gap-12 lg:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"font-display text-3xl font-bold text-coffee-900 md:text-4xl",children:"Visit Us"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Experience the Rush Coffee difference in person. We're ready to serve you."}),l.jsxs("ul",{className:"mt-6 space-y-4",children:[l.jsxs("li",{className:"flex items-start gap-4",children:[l.jsx(Vb,{className:"mt-1 h-6 w-6 flex-shrink-0 text-primary-600"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-coffee-900",children:"Address"}),l.jsx("p",{className:"text-gray-600",children:"123 Coffee Street, Malate, Manila, 1004 Metro Manila"})]})]}),l.jsxs("li",{className:"flex items-start gap-4",children:[l.jsx(jg,{className:"mt-1 h-6 w-6 flex-shrink-0 text-primary-600"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-coffee-900",children:"Operating Hours"}),l.jsx("p",{className:"text-gray-600",children:"Monday - Friday: 7:00 AM - 8:00 PM"}),l.jsx("p",{className:"text-gray-600",children:"Saturday - Sunday: 8:00 AM - 6:00 PM"})]})]}),l.jsxs("li",{className:"flex items-start gap-4",children:[l.jsx(Or,{className:"mt-1 h-6 w-6 flex-shrink-0 text-primary-600"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-coffee-900",children:"Contact"}),l.jsx("a",{href:"tel:+639171234567",className:"text-primary-600 transition hover:text-primary-700",children:"+63 917 123 4567"})]})]})]}),l.jsx(Oe,{size:"lg",className:"mt-8",children:"Get Directions"})]}),l.jsx("div",{className:"h-96 overflow-hidden rounded-lg shadow-xl",children:l.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gray-300 bg-cover bg-center",style:{backgroundImage:"url('/Coffee Based/coffee-jelly.jpg')"},children:l.jsx("span",{className:"rounded bg-white/80 px-4 py-2 font-semibold text-gray-700 backdrop-blur-sm",children:"[Google Maps Placeholder]"})})})]})}),l.jsxs("section",{className:"relative bg-gradient-to-r from-primary-600 via-coffee-600 to-primary-700 px-6 py-20",children:[l.jsx("div",{className:"absolute -left-1/4 -top-1/4 opacity-10",children:l.jsx(Pt,{className:"h-64 w-64 animate-float text-white"})}),l.jsx("div",{className:"absolute -bottom-1/4 -right-1/4 opacity-10",children:l.jsx(Pt,{className:"h-80 w-80 animate-float-delay text-white"})}),l.jsxs("div",{className:"relative z-10 mx-auto max-w-4xl text-center",children:[l.jsx("h2",{className:"font-display text-4xl font-bold text-white md:text-5xl",children:"Ready to Experience the Rush?"}),l.jsx("p",{className:"mb-8 mt-4 text-xl text-primary-100",children:"Join thousands of customers who've already skipped the line."}),l.jsx(je,{to:"/menu",children:l.jsxs(Oe,{size:"lg",className:"bg-white text-primary-600 transition-transform hover:scale-105 hover:bg-primary-50",children:["Order Now ",l.jsx(Zl,{className:"ml-2 h-5 w-5"})]})})]})]})]}),l.jsx(Rt,{})]}),dse=[{question:"What are your operating hours?",answer:"We are open Monday to Friday from 7:00 AM to 8:00 PM, and Saturday to Sunday from 8:00 AM to 6:00 PM."},{question:"How does the digital queue system work?",answer:"Simply place your order through our app or website. You'll be added to our virtual queue and receive real-time updates on your order status, including your position and estimated wait time. You'll get a notification when it's ready for pickup!"},{question:"Can I customize my drink?",answer:"Absolutely! Most of our drinks can be customized. You can choose your milk, sweetness level, add extra shots, and more right from the order page."},{question:"Do you offer catering services for events?",answer:"Yes, we do! We offer a range of catering options for meetings, parties, and events. Please use the contact form and select 'Partnership' as the subject to discuss your needs with us."},{question:"How do I earn and redeem rewards points?",answer:"You earn points with every purchase made through your account. You can view your points balance and redeem available rewards on the 'Rewards' page in the app."}],hse=({question:t,answer:e,isOpen:n,onClick:s})=>l.jsxs("div",{className:"border-b border-gray-200",children:[l.jsxs("button",{onClick:s,className:"flex w-full items-center justify-between py-4 text-left text-lg font-medium text-gray-800 focus:outline-none",children:[l.jsx("span",{children:t}),l.jsx(zh,{className:`h-6 w-6 transform transition-transform duration-300 ${n?"rotate-180":""}`})]}),l.jsx(df,{children:n&&l.jsx(Hr.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:l.jsx("p",{className:"pb-4 text-gray-600",children:e})})})]}),cm=({icon:t,title:e,children:n})=>l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"mt-1 flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-lg bg-primary-100",children:l.jsx(t,{className:"h-6 w-6 text-primary-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-display text-xl font-bold text-coffee-900",children:e}),n]})]}),fse=()=>{const[t,e]=S.useState(0),[n,s]=S.useState({name:"",email:"",phone:"",subject:"",message:""}),[r,i]=S.useState({}),[a,o]=S.useState(!1),[c,u]=S.useState(!1),h=()=>{const p={};return n.name.length<2&&(p.name="Name must be at least 2 characters."),/\S+@\S+\.\S+/.test(n.email)||(p.email="Please enter a valid email address."),n.subject||(p.subject="Please select a subject."),n.message.length<10&&(p.message="Message must be at least 10 characters."),i(p),Object.keys(p).length===0},f=p=>{p.preventDefault(),h()&&(o(!0),u(!1),setTimeout(()=>{o(!1),u(!0),s({name:"",email:"",phone:"",subject:"",message:""}),setTimeout(()=>u(!1),5e3)},1500))},m=p=>{s({...n,[p.target.name]:p.target.value})};return l.jsxs("div",{className:"bg-white",children:[l.jsx(It,{}),l.jsxs("main",{children:[l.jsxs("section",{className:"bg-gradient-to-br from-primary-50 to-coffee-50 px-6 py-20 text-center",children:[l.jsx("h1",{className:"font-display text-5xl font-bold text-coffee-900 md:text-6xl",children:"Get in Touch"}),l.jsx("p",{className:"mt-4 text-xl text-gray-700",children:"We're here to help and answer any question you might have."})]}),l.jsx("section",{className:"px-6 py-20",children:l.jsxs("div",{className:"container mx-auto grid max-w-7xl gap-12 lg:grid-cols-5",children:[l.jsx("div",{className:"lg:col-span-3",children:l.jsxs(ye,{className:"p-8",children:[l.jsx("h2",{className:"font-display text-3xl font-bold text-coffee-900",children:"Send us a Message"}),c&&l.jsxs("div",{className:"mt-4 flex items-center gap-2 rounded-lg bg-green-50 p-4 text-green-700",children:[l.jsx(Ob,{className:"h-5 w-5"}),l.jsx("p",{children:"Thanks for your message! We'll get back to you soon."})]}),l.jsxs("form",{onSubmit:f,className:"mt-6 space-y-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"name",className:"sr-only",children:"Name"}),l.jsx(Vr,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",name:"name",id:"name",value:n.name,onChange:m,placeholder:"Full Name",required:!0,className:"w-full rounded-md border-gray-300 py-3 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),r.name&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.name})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),l.jsx(nr,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"email",name:"email",id:"email",value:n.email,onChange:m,placeholder:"Email Address",required:!0,className:"w-full rounded-md border-gray-300 py-3 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),r.email&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.email})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"phone",className:"sr-only",children:"Phone"}),l.jsx(Or,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"tel",name:"phone",id:"phone",value:n.phone,onChange:m,placeholder:"Phone Number (Optional)",className:"w-full rounded-md border-gray-300 py-3 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"subject",className:"sr-only",children:"Subject"}),l.jsx(U9,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsxs("select",{name:"subject",id:"subject",value:n.subject,onChange:m,required:!0,className:"w-full appearance-none rounded-md border-gray-300 bg-white py-3 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[l.jsx("option",{value:"",disabled:!0,children:"Select a subject..."}),l.jsx("option",{children:"General Inquiry"}),l.jsx("option",{children:"Feedback"}),l.jsx("option",{children:"Partnership"}),l.jsx("option",{children:"Support"})]}),r.subject&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.subject})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"message",className:"sr-only",children:"Message"}),l.jsx(Vc,{className:"absolute left-3 top-4 h-5 w-5 text-gray-400"}),l.jsx("textarea",{name:"message",id:"message",value:n.message,onChange:m,placeholder:"Your Message",rows:5,required:!0,className:"w-full rounded-md border-gray-300 py-3 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),r.message&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.message})]}),l.jsxs(Oe,{type:"submit",size:"lg",disabled:a,className:"w-full",children:[a?l.jsx(xt,{className:"mr-2 h-5 w-5 animate-spin"}):l.jsx(Ub,{className:"mr-2 h-5 w-5"}),a?"Sending...":"Send Message"]})]})]})}),l.jsxs("div",{className:"space-y-8 lg:col-span-2",children:[l.jsxs(cm,{icon:Vb,title:"Visit Us",children:[l.jsx("p",{className:"mt-1 text-gray-600",children:"123 Coffee Street, Malate, Manila"}),l.jsx(Oe,{variant:"secondary",size:"sm",className:"mt-2",children:"Get Directions"})]}),l.jsxs(cm,{icon:Or,title:"Call Us",children:[l.jsx("a",{href:"tel:+639171234567",className:"mt-1 text-primary-600 transition hover:text-primary-700",children:"+63 917 123 4567"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Mon-Sun: 7AM - 8PM"})]}),l.jsxs(cm,{icon:nr,title:"Email Us",children:[l.jsx("a",{href:"mailto:hello@rushcoffee.ph",className:"mt-1 text-primary-600 transition hover:text-primary-700",children:"hello@rushcoffee.ph"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Responds within 24 hours"})]}),l.jsx(cm,{icon:Sz,title:"Follow Us",children:l.jsxs("div",{className:"mt-2 flex gap-4",children:[l.jsx("a",{href:"#","aria-label":"Facebook",className:"text-gray-500 transition hover:text-primary-600",children:l.jsx(mP,{})}),l.jsx("a",{href:"#","aria-label":"Instagram",className:"text-gray-500 transition hover:text-primary-600",children:l.jsx(pP,{})}),l.jsx("a",{href:"#","aria-label":"Twitter",className:"text-gray-500 transition hover:text-primary-600",children:l.jsx(wP,{})})]})})]})]})}),l.jsx("section",{className:"bg-gray-50 px-6 py-20",children:l.jsxs("div",{className:"container mx-auto max-w-4xl",children:[l.jsx("h2",{className:"text-center font-display text-3xl font-bold text-coffee-900 md:text-4xl",children:"Frequently Asked Questions"}),l.jsx("div",{className:"mt-8",children:dse.map((p,_)=>l.jsx(hse,{...p,isOpen:t===_,onClick:()=>e(t===_?null:_)},_))})]})}),l.jsx("section",{children:l.jsx("div",{className:"h-96 w-full bg-gray-300 flex items-center justify-center",children:l.jsx("p",{className:"text-gray-600 font-semibold",children:"[Google Maps Embed Placeholder]"})})})]}),l.jsx(Rt,{})]})},q6=[{category:"Ordering & Queue",question:"How do I join the virtual queue?",answer:"Simply place an order through our website or app. You'll automatically join the queue and receive your position number."},{category:"Ordering & Queue",question:"Can I see my queue position in real-time?",answer:"Yes! Your queue page updates in real-time showing your current position and estimated wait time."},{category:"Ordering & Queue",question:"What happens if I miss my turn?",answer:"Don't worry! You have a 10-minute grace period to pick up your order once it's ready. After that, your order will be held for you, but you may need to wait briefly if we are busy."},{category:"Ordering & Queue",question:"Can I cancel my order?",answer:"Yes, you can cancel an order directly from your order history as long as its status is still 'waiting'. Once it moves to 'preparing', it can no longer be canceled. Refunds for successful cancellations are processed within 3-5 business days."},{category:"Payments",question:"What payment methods do you accept?",answer:"We currently accept GCash for pre-payment and cash on pickup. We are working on adding more digital payment options soon!"},{category:"Payments",question:"Is it safe to pay via GCash?",answer:"Absolutely! We use a secure payment process, and your payment information is encrypted and handled safely."},{category:"Payments",question:"Do I need to pay upfront?",answer:"For GCash payments, yes, payment is required upon placing the order. For cash payments, you can pay at the counter when you pick up your order."},{category:"Rewards",question:"How do I earn rewards points?",answer:"You earn points with every purchase made through your Rush Coffee account! The current rate is 1 point for every 10 spent. Keep an eye out for special promotions to earn bonus points."},{category:"Rewards",question:"When do my points expire?",answer:"Good news - your points never expire! You can save them up for as long as you like and redeem them for rewards whenever you're ready."},{category:"Rewards",question:"What are the tier benefits?",answer:"We have three tiers! Bronze (0-299pts): Earn 1x points. Silver (300-999pts): Earn 1.5x points and get access to exclusive silver rewards. Gold (1000+pts): Earn 2x points, get VIP perks, and early access to new items."},{category:"Account",question:"Do I need an account to order?",answer:"Yes, creating an account is necessary. It allows us to manage your orders in the queue, track your rewards points, and save your preferences for a faster checkout next time."},{category:"Account",question:"How do I reset my password?",answer:"On the login page, click the 'Forgot your password?' link. We'll send a password reset link to the email address associated with your account."},{category:"Account",question:"Can I change my email address?",answer:"To update the email address on your account, please contact our support team at hello@rushcoffee.ph, and we'll be happy to assist you."},{category:"Technical",question:"The website isn't working correctly. What should I do?",answer:"First, try refreshing the page. If that doesn't work, clearing your browser's cache and cookies often resolves the issue. If you're still experiencing problems, please contact our support team with details about the issue."},{category:"Technical",question:"Do you have a mobile app?",answer:"A dedicated mobile app for iOS and Android is currently in development and will be launching soon! For now, our website is fully responsive and works great on all mobile browsers."},{category:"General",question:"What are your operating hours?",answer:"We're open Monday to Sunday, from 7:00 AM to 10:00 PM. Hours may vary on public holidays."},{category:"General",question:"Do you offer WiFi in your store?",answer:"Yes, we offer complimentary high-speed WiFi for all our customers. Just ask our staff for the network details."},{category:"General",question:"Can I customize my drink?",answer:"Absolutely! You can customize aspects like milk type, sweetness level, add extra espresso shots, and choose from various syrups and toppings directly on the product page before adding an item to your cart."}],mse=["All",...Array.from(new Set(q6.map(t=>t.category)))],pse=({question:t,answer:e,isOpen:n,onClick:s,highlight:r})=>{const i=(a,o)=>{if(!o.trim())return a;const c=new RegExp(`(${o})`,"gi");return a.split(c).map((u,h)=>c.test(u)?l.jsx("mark",{className:"bg-primary-100 text-primary-700 rounded-sm",children:u},h):u)};return l.jsxs("div",{className:"border-b border-gray-200",children:[l.jsxs("button",{onClick:s,className:"flex w-full items-center justify-between py-5 text-left text-lg font-medium text-gray-800 focus:outline-none focus:bg-gray-50 rounded-md",children:[l.jsx("span",{className:"flex-1 pr-4",children:i(t,r)}),l.jsx(zh,{className:`h-6 w-6 transform text-primary-600 transition-transform duration-300 ${n?"rotate-180":""}`})]}),l.jsx(df,{children:n&&l.jsx(Hr.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:l.jsx("div",{className:"pb-5 pr-6 text-gray-600 leading-relaxed",children:i(e,r)})})})]})},gse=()=>{const[t,e]=S.useState(""),[n,s]=S.useState("All"),[r,i]=S.useState(0),a=S.useMemo(()=>q6.filter(o=>{const c=n==="All"||o.category===n,u=t.trim()===""||o.question.toLowerCase().includes(t.toLowerCase())||o.answer.toLowerCase().includes(t.toLowerCase());return c&&u}),[t,n]);return l.jsxs("div",{className:"bg-white",children:[l.jsx(It,{}),l.jsxs("main",{children:[l.jsx("section",{className:"bg-gradient-to-br from-primary-50 to-coffee-50 px-6 py-16",children:l.jsxs("div",{className:"container mx-auto max-w-4xl text-center",children:[l.jsx("h1",{className:"font-display text-5xl font-bold text-coffee-900 md:text-6xl",children:"Frequently Asked Questions"}),l.jsx("p",{className:"mt-4 text-xl text-gray-700",children:"Everything you need to know about Rush Coffee"}),l.jsxs("div",{className:"relative mx-auto mt-8 max-w-2xl",children:[l.jsx(Tp,{className:"absolute left-6 top-1/2 h-6 w-6 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"search",placeholder:"Search for answers...",value:t,onChange:o=>e(o.target.value),className:"w-full rounded-full border border-gray-300 bg-white py-4 pl-16 pr-6 text-lg shadow-sm focus:border-primary-500 focus:ring-2 focus:ring-primary-500"})]})]})}),l.jsx("div",{className:"sticky top-20 z-30 border-b border-gray-200 bg-white/95 py-3 backdrop-blur-sm",children:l.jsx("div",{className:"container mx-auto flex max-w-7xl gap-2 overflow-x-auto px-6 pb-2",children:mse.map(o=>l.jsx("button",{onClick:()=>s(o),className:`flex-shrink-0 rounded-full px-4 py-2 text-sm font-semibold transition-colors ${n===o?"bg-primary-600 text-white shadow":"border border-gray-300 bg-white text-gray-700 hover:bg-gray-100"}`,children:o},o))})}),l.jsx("section",{className:"px-6 py-16",children:l.jsx("div",{className:"container mx-auto max-w-4xl",children:a.length>0?l.jsxs("div",{children:[l.jsxs("p",{className:"mb-4 text-sm text-gray-500",children:[a.length," question(s) found"]}),a.map((o,c)=>l.jsx(pse,{question:o.question,answer:o.answer,isOpen:r===c,onClick:()=>i(r===c?null:c),highlight:t},`${o.category}-${c}`))]}):l.jsxs("div",{className:"py-20 text-center",children:[l.jsx(Tp,{className:"mx-auto h-16 w-16 text-gray-300"}),l.jsx("h3",{className:"mt-4 text-xl font-semibold text-gray-800",children:"No Results Found"}),l.jsxs("p",{className:"mt-2 text-gray-500",children:[`We couldn't find any answers for "`,t,'". Try a different search term or category.']})]})})}),l.jsx("section",{className:"bg-gray-50 px-6 py-20",children:l.jsx("div",{className:"container mx-auto max-w-4xl",children:l.jsxs(ye,{className:"text-center",children:[l.jsx(y9,{className:"mx-auto h-12 w-12 text-primary-600"}),l.jsx("h2",{className:"mt-4 font-display text-3xl font-bold text-coffee-900",children:"Still have questions?"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"If you can't find the answer you're looking for, please get in touch with our support team."}),l.jsx("div",{className:"mt-6 flex flex-col items-center justify-center gap-4 sm:flex-row",children:l.jsx(je,{to:"/contact",children:l.jsxs(Oe,{size:"lg",children:[l.jsx(lz,{className:"mr-2 h-5 w-5"}),"Contact Support"]})})})]})})})]}),l.jsx(Rt,{})]})},yse=({cartItems:t,isOpen:e,onClose:n,onUpdateQuantity:s,onRemoveItem:r,onCheckout:i})=>{const a=ks(),o=t.reduce((h,f)=>h+f.quantity,0),c=t.reduce((h,f)=>h+f.selectedSize.price*f.quantity,0),u=()=>{n(),a("/menu")};return l.jsxs(l.Fragment,{children:[l.jsx("div",{onClick:n,className:`fixed inset-0 z-40 bg-black/50 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"}`,"aria-hidden":"true"}),l.jsx("aside",{className:`fixed top-0 right-0 z-50 h-full w-full transform bg-white shadow-2xl transition-transform duration-300 ease-in-out sm:w-96 md:w-[450px] ${e?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"cart-heading",children:l.jsxs("div",{className:"flex h-full flex-col",children:[l.jsxs("header",{className:"flex items-center justify-between border-b border-gray-200 p-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("h2",{id:"cart-heading",className:"font-display text-xl font-bold text-coffee-900",children:"Your Order"}),o>0&&l.jsxs(Qt,{children:[o," ",o===1?"item":"items"]})]}),l.jsx("button",{onClick:n,className:"rounded-md p-2 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-800","aria-label":"Close cart",children:l.jsx($r,{className:"h-6 w-6"})})]}),t.length===0?l.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-4 p-6 text-center",children:[l.jsx(Pt,{className:"h-24 w-24 text-gray-300 opacity-50"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Your cart is empty"}),l.jsx("p",{className:"text-gray-500",children:"Looks like you haven't added anything yet."}),l.jsx("button",{onClick:u,className:"mt-4 rounded-full bg-primary-600 px-6 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-primary-700",children:"Start Ordering"})]}):l.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:l.jsx("ul",{className:"-my-4 divide-y divide-gray-200",children:t.map(h=>{const f=h.selectedSize.name==="Combo Meal",m=f?`${h.product.name} (${h.selectedSize.name})`:h.product.name,p=f&&h.product.comboImageUrl?h.product.comboImageUrl:h.product.imageUrl;return l.jsxs("li",{className:"relative flex items-center gap-4 py-4",children:[l.jsx("div",{className:"h-16 w-16 flex-shrink-0 overflow-hidden rounded-md border border-gray-200",children:l.jsx("img",{src:p,alt:m,className:"h-full w-full object-cover object-center"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-gray-800",children:m}),l.jsxs("p",{className:"text-sm text-gray-500",children:[h.selectedSize.size," - ",h.selectedSize.price.toFixed(2)]}),l.jsxs("div",{className:"mt-2 flex items-center",children:[l.jsx("button",{onClick:()=>s(h.id,h.quantity-1),disabled:h.quantity===1,className:"flex h-8 w-8 items-center justify-center rounded-full border border-gray-300 text-gray-600 transition hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50","aria-label":`Decrease quantity of ${m}`,children:l.jsx(yP,{className:"h-4 w-4"})}),l.jsx("span",{className:"w-12 text-center font-semibold text-gray-800","aria-live":"polite",children:h.quantity}),l.jsx("button",{onClick:()=>s(h.id,h.quantity+1),className:"flex h-8 w-8 items-center justify-center rounded-full border border-gray-300 text-gray-600 transition hover:bg-gray-100","aria-label":`Increase quantity of ${m}`,children:l.jsx(Fh,{className:"h-4 w-4"})})]})]}),l.jsxs("p",{className:"font-semibold text-gray-900",children:["",(h.selectedSize.price*h.quantity).toFixed(2)]}),l.jsx("button",{onClick:()=>r(h.id),className:"absolute top-4 right-0 p-1 text-gray-400 transition-colors hover:text-red-600","aria-label":`Remove ${m} from cart`,children:l.jsx(Pg,{className:"h-5 w-5"})})]},h.id)})})}),t.length>0&&l.jsxs("footer",{className:"mt-auto border-t border-gray-200 p-6",children:[l.jsxs("div",{className:"flex items-center justify-between text-lg font-semibold text-gray-900",children:[l.jsx("span",{children:"Subtotal"}),l.jsxs("span",{children:["",c.toFixed(2)]})]}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Taxes and service fee calculated at checkout."}),l.jsx("div",{className:"mt-6",children:l.jsxs("button",{onClick:i,disabled:t.length===0,className:"flex w-full items-center justify-center gap-2 rounded-full bg-primary-600 px-6 py-3 text-base font-semibold text-white shadow-sm transition-colors hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-gray-400",children:["Proceed to Checkout",l.jsx(Zl,{className:"h-5 w-5"})]})})]})]})})]})},vse=()=>{const{pathname:t}=Ps();return S.useEffect(()=>{window.scrollTo(0,0)},[t]),null},xse=()=>{const{currentUser:t,loading:e}=es(),n=Ps();return e?l.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-gray-50",children:l.jsx(xt,{className:"h-12 w-12 animate-spin text-primary-600"})}):t?t.role!=="admin"?l.jsx(YS,{to:"/",replace:!0}):l.jsx(iP,{}):l.jsx(YS,{to:"/auth/login",state:{from:n},replace:!0})},_se=()=>l.jsxs("div",{children:[l.jsx("h1",{className:"mb-6 font-display text-3xl font-bold text-gray-800",children:"Admin Dashboard"}),l.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsxs(ye,{className:"flex items-center gap-4 p-6",children:[l.jsx("div",{className:"rounded-full bg-blue-100 p-3",children:l.jsx(j9,{className:"h-6 w-6 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),l.jsx("p",{className:"text-2xl font-bold text-gray-800",children:"12,450.00"})]})]}),l.jsxs(ye,{className:"flex items-center gap-4 p-6",children:[l.jsx("div",{className:"rounded-full bg-green-100 p-3",children:l.jsx(Ss,{className:"h-6 w-6 text-green-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Orders Today"}),l.jsx("p",{className:"text-2xl font-bold text-gray-800",children:"78"})]})]}),l.jsxs(ye,{className:"flex items-center gap-4 p-6",children:[l.jsx("div",{className:"rounded-full bg-yellow-100 p-3",children:l.jsx(Ep,{className:"h-6 w-6 text-yellow-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"New Customers"}),l.jsx("p",{className:"text-2xl font-bold text-gray-800",children:"12"})]})]}),l.jsxs(ye,{className:"flex items-center gap-4 p-6",children:[l.jsx("div",{className:"rounded-full bg-purple-100 p-3",children:l.jsx(o9,{className:"h-6 w-6 text-purple-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Pending Orders"}),l.jsx("p",{className:"text-2xl font-bold text-gray-800",children:"5"})]})]})]}),l.jsx("div",{className:"mt-8",children:l.jsxs(ye,{children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Sales Overview"}),l.jsx("div",{className:"mt-4 flex h-64 items-center justify-center bg-gray-100",children:l.jsx("p",{className:"text-gray-500",children:"[Chart Placeholder]"})})]})})]}),bse={waiting:{text:"Start Preparing",nextStatus:"preparing",color:"bg-blue-500 hover:bg-blue-600"},preparing:{text:"Mark as Ready",nextStatus:"ready",color:"bg-green-500 hover:bg-green-600"},ready:{text:"Complete Order",nextStatus:"completed",color:"bg-primary-600 hover:bg-primary-700"}},wse=({order:t,onUpdateStatus:e})=>{const n=bse[t.status],s=Ry(t.timestamp,{addSuffix:!0});return l.jsxs("div",{className:"rounded-lg border bg-white p-4 shadow-sm transition-shadow hover:shadow-md",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"font-mono text-sm font-bold text-primary-700",children:t.orderNumber}),l.jsxs("p",{className:"font-display text-lg font-bold text-gray-800",children:["",t.totalAmount.toFixed(2)]})]}),l.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Vr,{className:"h-4 w-4"}),l.jsx("span",{children:t.customerName})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(jg,{className:"h-4 w-4"}),l.jsx("span",{children:s})]})]}),l.jsx("div",{className:"mt-3 border-t pt-2",children:l.jsx("ul",{className:"text-xs text-gray-500",children:t.orderItems.map((r,i)=>l.jsxs("li",{children:[r.quantity,"x ",r.productName]},i))})}),n&&l.jsxs("button",{onClick:()=>e(t.id,n.nextStatus),className:`mt-4 flex w-full items-center justify-center gap-2 rounded-full px-4 py-2 text-sm font-semibold text-white shadow-sm transition-colors ${n.color}`,children:[l.jsx("span",{children:n.text}),n.nextStatus==="completed"?l.jsx(Wi,{className:"h-4 w-4"}):l.jsx(Zl,{className:"h-4 w-4"})]})]})},Tse={yellow:"border-yellow-400",blue:"border-blue-400",green:"border-green-400"},bv=({title:t,orders:e,onUpdateStatus:n,color:s})=>l.jsxs("div",{className:"flex flex-col rounded-lg bg-gray-100 p-4",children:[l.jsxs("h2",{className:`mb-4 border-b-4 pb-2 font-display text-xl font-bold text-gray-700 ${Tse[s]}`,children:[t," ",l.jsxs("span",{className:"text-base font-medium text-gray-500",children:["(",e.length,")"]})]}),l.jsxs("div",{className:"flex-grow space-y-4 overflow-y-auto",children:[l.jsx(df,{children:e.map(r=>l.jsx(Hr.div,{layout:!0,initial:{opacity:0,y:50,scale:.3},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.5,transition:{duration:.2}},children:l.jsx(wse,{order:r,onUpdateStatus:n})},r.id))}),e.length===0&&l.jsx("div",{className:"flex h-32 items-center justify-center text-sm text-gray-500",children:"No orders in this stage."})]})]}),Ese=()=>{const[t,e]=S.useState([]),[n,s]=S.useState(!0),{showToast:r}=kn();S.useEffect(()=>{const h=xe.collection("orders").where("status","in",["waiting","preparing","ready"]).onSnapshot(f=>{const m=[];f.forEach(p=>{m.push({id:p.id,...p.data(),timestamp:p.data().timestamp.toDate()})}),m.sort((p,_)=>p.timestamp.getTime()-_.timestamp.getTime()),e(m),s(!1)},f=>{console.error("Error fetching real-time orders: ",f),s(!1)});return()=>h()},[]);const i=async(u,h)=>{try{await xe.runTransaction(async f=>{const m=xe.collection("orders").doc(u),p=await f.get(m);if(!p.exists)throw new Error("Order does not exist!");const _=p.data(),w=_.status;if(w==="waiting"&&h==="preparing")for(const T of _.orderItems){const x=xe.collection("products").doc(T.productId),v=await f.get(x);if(v.exists&&v.data().recipe)for(const b of v.data().recipe){const R=xe.collection("ingredients").doc(b.ingredientId),D=b.quantity*T.quantity,M=await f.get(R);if(!M.exists)throw new Error(`Ingredient '${b.ingredientId}' not found.`);if(M.data().stock<D)throw new Error(`Insufficient stock for '${M.data().name}'.`);f.update(R,{stock:De.firestore.FieldValue.increment(-D)})}}if(h==="completed"&&w!=="completed"){const T=xe.collection("users").doc(_.userId),x=await f.get(T);if(x.exists){const v=x.data();let b=0;for(const N of _.orderItems)N.productName.includes("(Grande)")?b+=4*N.quantity:N.productName.includes("(Venti)")&&(b+=5*N.quantity);let R=1;v.tier==="silver"&&(R=1.5),v.tier==="gold"&&(R=2);const D=Math.floor(b*R),M=v.lifetimePoints+D;let A=v.tier;A==="bronze"&&M>=N_.silver.min&&(A="silver"),A==="silver"&&M>=N_.gold.min&&(A="gold");const E={id:`rh-${Date.now()}`,type:"earned",points:D,description:`Order #${_.orderNumber}`,date:new Date};f.update(T,{totalOrders:De.firestore.FieldValue.increment(1),totalSpent:De.firestore.FieldValue.increment(_.totalAmount),currentPoints:De.firestore.FieldValue.increment(D),lifetimePoints:De.firestore.FieldValue.increment(D),tier:A,rewardsHistory:De.firestore.FieldValue.arrayUnion(E)})}}f.update(m,{status:h})})}catch(f){console.error("Error updating order status and stock: ",f),r(f.message||"Failed to update order. Please check inventory.")}},a=S.useMemo(()=>t.filter(u=>u.status==="waiting"),[t]),o=S.useMemo(()=>t.filter(u=>u.status==="preparing"),[t]),c=S.useMemo(()=>t.filter(u=>u.status==="ready"),[t]);return n?l.jsx("div",{className:"flex h-full items-center justify-center",children:l.jsx(xt,{className:"h-12 w-12 animate-spin text-primary-600"})}):l.jsxs("div",{children:[l.jsx("h1",{className:"mb-6 font-display text-3xl font-bold text-gray-800",children:"Live Order Queue"}),t.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border-2 border-dashed bg-gray-50 p-12 text-center",children:[l.jsx(Ss,{className:"h-16 w-16 text-gray-400"}),l.jsx("h2",{className:"mt-4 text-xl font-semibold text-gray-700",children:"No Active Orders"}),l.jsx("p",{className:"mt-1 text-gray-500",children:"New orders will appear here in real-time."})]}):l.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[l.jsx(bv,{title:"Waiting",orders:a,onUpdateStatus:i,color:"yellow"}),l.jsx(bv,{title:"Preparing",orders:o,onUpdateStatus:i,color:"blue"}),l.jsx(bv,{title:"Ready for Pickup",orders:c,onUpdateStatus:i,color:"green"})]})]})},Sse=[{to:"/admin",text:"Dashboard",icon:Q9},{to:"/admin/queue",text:"Queue Management",icon:T9},{to:"/admin/inventory",text:"Inventory",icon:hz},{to:"/admin/products",text:"Products",icon:Ss},{to:"/admin/feedback",text:"Feedback",icon:Vc},{to:"/admin/analytics",text:"Analytics",icon:fP},{to:"/admin/settings",text:"Settings",icon:zb}],Ase=()=>l.jsxs("div",{className:"flex h-screen bg-gray-100",children:[l.jsxs("aside",{className:"hidden w-64 flex-shrink-0 bg-gray-800 p-4 text-white md:flex md:flex-col",children:[l.jsxs("div",{className:"mb-8 flex items-center gap-2 px-2",children:[l.jsx(Pt,{className:"h-8 w-8 text-primary-400"}),l.jsx("span",{className:"text-xl font-bold text-white",children:"Admin Panel"})]}),l.jsx("nav",{className:"flex-grow",children:l.jsx("ul",{children:Sse.map(({to:t,text:e,icon:n})=>l.jsx("li",{children:l.jsxs(ss,{to:t,end:t==="/admin",className:({isActive:s})=>`flex items-center gap-3 rounded-md px-3 py-2 transition-colors ${s?"bg-primary-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:[l.jsx(n,{className:"h-5 w-5"}),l.jsx("span",{children:e})]})},t))})}),l.jsx("div",{className:"mt-auto text-center text-xs text-gray-400",children:l.jsxs("p",{children:[" ",new Date().getFullYear()," Rush Coffee"]})})]}),l.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[l.jsx("header",{className:"border-b bg-white shadow-sm",children:l.jsxs("div",{className:"flex h-16 items-center justify-between px-6",children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"Dashboard"}),l.jsx("div",{})]})}),l.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:l.jsx(iP,{})})]})]}),Nse=({ingredient:t,onClose:e,onUpdate:n})=>{const[s,r]=S.useState("add"),[i,a]=S.useState(""),o=c=>{c.preventDefault(),typeof i=="number"&&i>=0&&n(t.id,i,s)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6 shadow-xl",onClick:c=>c.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h2",{className:"font-display text-xl font-bold text-gray-800",children:["Update Stock: ",t.name]}),l.jsx("button",{onClick:e,className:"rounded-full p-1 text-gray-500 hover:bg-gray-100",children:l.jsx($r,{})})]}),l.jsx("div",{className:"mt-4 text-sm",children:l.jsxs("p",{children:["Current Stock: ",l.jsxs("span",{className:"font-bold",children:[t.stock.toLocaleString()," ",t.unit]})]})}),l.jsxs("form",{onSubmit:o,className:"mt-6",children:[l.jsxs("div",{className:"flex gap-2 rounded-full bg-gray-100 p-1",children:[l.jsx("button",{type:"button",onClick:()=>r("add"),className:`w-full rounded-full py-2 text-sm font-semibold transition-colors ${s==="add"?"bg-primary-600 text-white shadow":"text-gray-600 hover:bg-primary-50"}`,children:"Add Stock"}),l.jsx("button",{type:"button",onClick:()=>r("set"),className:`w-full rounded-full py-2 text-sm font-semibold transition-colors ${s==="set"?"bg-primary-600 text-white shadow":"text-gray-600 hover:bg-primary-50"}`,children:"Set New Total"})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700",children:s==="add"?`Amount to Add (${t.unit})`:`New Total Stock (${t.unit})`}),l.jsx("input",{type:"number",id:"amount",value:i,onChange:c=>a(c.target.value===""?"":Number(c.target.value)),min:"0",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",required:!0,autoFocus:!0})]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:e,className:"rounded-full bg-gray-200 px-4 py-2 text-sm font-semibold text-gray-800 hover:bg-gray-300",children:"Cancel"}),l.jsxs("button",{type:"submit",className:"flex items-center gap-2 rounded-full bg-primary-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primary-700 disabled:bg-primary-400",disabled:i===""||i<0,children:[l.jsx(Lb,{className:"h-4 w-4"}),"Update Stock"]})]})]})]})})},Ise=[{name:"Espresso Shot",stock:1e3,unit:"pcs",lowStockThreshold:100},{name:"Milk",stock:2e4,unit:"ml",lowStockThreshold:2e3},{name:"Condensed Milk",stock:5e3,unit:"ml",lowStockThreshold:500},{name:"Coffee Beans (Blend)",stock:1e4,unit:"g",lowStockThreshold:1e3},{name:"Hot Water",stock:99999,unit:"ml",lowStockThreshold:1e4},{name:"Chocolate Sauce",stock:3e3,unit:"ml",lowStockThreshold:300},{name:"Caramel Sauce",stock:3e3,unit:"ml",lowStockThreshold:300},{name:"Matcha Powder",stock:2e3,unit:"g",lowStockThreshold:200}],Rse=()=>{const[t,e]=S.useState([]),[n,s]=S.useState(!0),[r,i]=S.useState(!1),[a,o]=S.useState(null);S.useEffect(()=>{const m=async()=>{const _=xe.collection("ingredients");if((await _.get()).empty){console.log("Seeding ingredients...");const v=Ise.map(b=>_.add(b));await Promise.all(v)}return xe.collection("ingredients").orderBy("name","asc").onSnapshot(v=>{const b=[];v.forEach(R=>{b.push({id:R.id,...R.data()})}),e(b),s(!1)},v=>{console.error("Error fetching inventory: ",v),s(!1)})};let p;return m().then(_=>{_&&(p=_)}),()=>{p&&p()}},[]);const c=m=>{o(m),i(!0)},u=()=>{i(!1),o(null)},h=async(m,p,_)=>{const w=xe.collection("ingredients").doc(m);try{_==="add"?await w.update({stock:De.firestore.FieldValue.increment(p)}):await w.update({stock:p}),u()}catch(T){console.error("Error updating stock: ",T)}},f=m=>m.stock<=0?{text:"Out of Stock",color:"text-red-600",Icon:x9}:m.stock<=m.lowStockThreshold?{text:"Low Stock",color:"text-yellow-600",Icon:bP}:{text:"In Stock",color:"text-green-600",Icon:Ob};return n?l.jsx("div",{className:"flex h-full items-center justify-center",children:l.jsx(xt,{className:"h-12 w-12 animate-spin text-primary-600"})}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h1",{className:"font-display text-3xl font-bold text-gray-800",children:"Inventory Management"}),l.jsxs("button",{className:"flex items-center gap-2 rounded-full bg-primary-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-primary-700",children:[l.jsx(Fh,{className:"h-4 w-4"}),"Add Ingredient"]})]}),l.jsx("div",{className:"overflow-x-auto rounded-lg border bg-white shadow-sm",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Ingredient"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Current Stock"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Status"}),l.jsx("th",{scope:"col",className:"relative px-6 py-3",children:l.jsx("span",{className:"sr-only",children:"Edit"})})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:t.map(m=>{const p=f(m);return l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.name})}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:l.jsxs("div",{className:"text-sm text-gray-900",children:[m.stock.toLocaleString()," ",l.jsx("span",{className:"text-gray-500",children:m.unit})]})}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:l.jsxs("div",{className:`inline-flex items-center gap-1 text-sm font-semibold ${p.color}`,children:[l.jsx(p.Icon,{className:"h-4 w-4"}),p.text]})}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right text-sm font-medium",children:l.jsx("button",{onClick:()=>c(m),className:"text-primary-600 hover:text-primary-800",children:"Update Stock"})})]},m.id)})})]})}),r&&a&&l.jsx(Nse,{ingredient:a,onClose:u,onUpdate:h})]})},$2={name:"",description:"",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:0},{name:"Venti",size:"22oz",price:0}],imageUrl:"",available:!0,stock:0,popular:!1,new:!1,displayOrder:99,recipe:[]},Cse=({isOpen:t,onClose:e,productToEdit:n})=>{var E,N;const[s,r]=S.useState($2),[i,a]=S.useState([]),[o,c]=S.useState(!1),{addProduct:u,updateProduct:h}=Xc(),{showToast:f}=kn(),[m,p]=S.useState(null),[_,w]=S.useState(null),T=S.useRef(null);S.useEffect(()=>{t&&(async()=>{const k=(await xe.collection("ingredients").get()).docs.map(j=>({id:j.id,...j.data()}));a(k)})()},[t]),S.useEffect(()=>{n?(r(n),w(n.imageUrl)):(r($2),w(null)),p(null)},[n,t]);const x=I=>{if(I.target.files&&I.target.files[0]){const P=I.target.files[0];if(P.size>2*1024*1024){f("Image file should be less than 2MB.");return}p(P);const k=URL.createObjectURL(P);w(k)}},v=I=>{const{name:P,value:k,type:j}=I.target,W=I.target.checked;r(ce=>({...ce,[P]:j==="checkbox"?W:k}))},b=(I,P)=>{r(k=>({...k,sizes:k.sizes.map(j=>j.name===I?{...j,price:P}:j)}))},R=(I,P,k)=>{const j=[...s.recipe||[]];j[I][P]=k,r(W=>({...W,recipe:j}))},D=()=>{const I=[...s.recipe||[],{ingredientId:"",quantity:0}];r(P=>({...P,recipe:I}))},M=I=>{const P=[...s.recipe||[]];P.splice(I,1),r(k=>({...k,recipe:P}))},A=async I=>{I.preventDefault(),c(!0);let P=s.imageUrl;if(m)try{P=await(await CQ.ref(`product_images/${Date.now()}-${m.name}`).put(m)).ref.getDownloadURL()}catch(j){console.error("Error uploading image:",j),f("Failed to upload image. Please try again."),c(!1);return}const k={...s,imageUrl:P};try{if(n){const{id:j,...W}={...k,id:n.id};await h(j,W),f("Product updated successfully!")}else await u(k),f("Product added successfully!");e()}catch(j){console.error(j),f("An error occurred. Please try again.")}finally{c(!1)}};return l.jsx(Ac,{isOpen:t,onClose:e,title:n?"Edit Product":"Add New Product",size:"lg",children:l.jsxs("form",{onSubmit:A,className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),l.jsx("input",{type:"text",name:"name",id:"name",value:s.name,onChange:v,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category"}),l.jsxs("select",{name:"category",id:"category",value:s.category,onChange:v,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",children:[l.jsx("option",{children:"Coffee Based"}),l.jsx("option",{children:"Non-Coffee Based"}),l.jsx("option",{children:"Matcha Series"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),l.jsx("textarea",{name:"description",id:"description",value:s.description,onChange:v,rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product Image"}),l.jsxs("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md cursor-pointer hover:border-primary-500 bg-gray-50",onClick:()=>{var I;return(I=T.current)==null?void 0:I.click()},children:[l.jsx("input",{ref:T,id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:"image/png, image/jpeg",onChange:x}),_?l.jsx("img",{src:_,alt:"Product preview",className:"max-h-40 rounded-lg object-contain"}):l.jsxs("div",{className:"space-y-1 text-center",children:[l.jsx(q9,{className:"mx-auto h-12 w-12 text-gray-400"}),l.jsxs("p",{className:"text-sm text-gray-600",children:[l.jsx("span",{className:"font-medium text-primary-600",children:"Click to upload"})," or drag and drop"]}),l.jsx("p",{className:"text-xs text-gray-500",children:"PNG or JPG up to 2MB"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Grande Price ()"}),l.jsx("input",{type:"number",value:(E=s.sizes.find(I=>I.name==="Grande"))==null?void 0:E.price,onChange:I=>b("Grande",+I.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Venti Price ()"}),l.jsx("input",{type:"number",value:(N=s.sizes.find(I=>I.name==="Venti"))==null?void 0:N.price,onChange:I=>b("Venti",+I.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"stock",className:"block text-sm font-medium text-gray-700",children:"Stock"}),l.jsx("input",{type:"number",name:"stock",id:"stock",value:s.stock,onChange:I=>r(P=>({...P,stock:+I.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"displayOrder",className:"block text-sm font-medium text-gray-700",children:"Display Order"}),l.jsx("input",{type:"number",name:"displayOrder",id:"displayOrder",value:s.displayOrder,onChange:I=>r(P=>({...P,displayOrder:+I.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]}),l.jsxs("div",{className:"flex items-center space-x-6",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",name:"available",checked:s.available,onChange:v,className:"h-4 w-4 rounded"}),l.jsx("label",{className:"ml-2 text-sm",children:"Available"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",name:"popular",checked:s.popular,onChange:v,className:"h-4 w-4 rounded"}),l.jsx("label",{className:"ml-2 text-sm",children:"Popular"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",name:"new",checked:s.new,onChange:v,className:"h-4 w-4 rounded"}),l.jsx("label",{className:"ml-2 text-sm",children:"New"})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-md font-medium text-gray-800",children:"Recipe"}),l.jsxs("div",{className:"mt-2 space-y-2 rounded-md border bg-gray-50 p-3",children:[(s.recipe||[]).map((I,P)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:I.ingredientId,onChange:k=>R(P,"ingredientId",k.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm",children:[l.jsx("option",{value:"",disabled:!0,children:"Select Ingredient"}),i.map(k=>l.jsx("option",{value:k.id,children:k.name},k.id))]}),l.jsx("input",{type:"number",value:I.quantity,onChange:k=>R(P,"quantity",+k.target.value),className:"block w-32 rounded-md border-gray-300 shadow-sm",placeholder:"Qty"}),l.jsx(Oe,{type:"button",variant:"ghost",size:"sm",onClick:()=>M(P),className:"px-2",children:l.jsx(Pg,{className:"h-4 w-4 text-red-500"})})]},P)),l.jsxs(Oe,{type:"button",variant:"secondary",size:"sm",onClick:D,children:[l.jsx(Fh,{className:"mr-1 h-4 w-4"}),"Add Ingredient"]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx(Oe,{type:"button",variant:"ghost",onClick:e,children:"Cancel"}),l.jsxs(Oe,{type:"submit",disabled:o,children:[o?l.jsx(xt,{className:"mr-2 h-4 w-4 animate-spin"}):l.jsx(Lb,{className:"mr-2 h-4 w-4"}),n?"Save Changes":"Add Product"]})]})]})})},jse=()=>{const{products:t,isLoading:e,error:n,deleteProduct:s}=Xc(),[r,i]=S.useState(!1),[a,o]=S.useState(null),{showToast:c}=kn(),u=(m=null)=>{o(m),i(!0)},h=()=>{i(!1),o(null)},f=async(m,p)=>{if(window.confirm(`Are you sure you want to delete "${p}"? This action cannot be undone.`))try{await s(m),c(`"${p}" has been deleted.`)}catch{c(`Failed to delete "${p}".`)}};return e?l.jsx("div",{className:"flex h-full items-center justify-center",children:l.jsx(xt,{className:"h-12 w-12 animate-spin text-primary-600"})}):n?l.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border border-red-200 bg-red-50 py-20 text-center text-red-700",children:[l.jsx(da,{className:"h-16 w-16"}),l.jsx("h3",{className:"mt-4 text-xl font-semibold",children:"Oops! Something went wrong."}),l.jsx("p",{className:"mt-2",children:n})]}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h1",{className:"font-display text-3xl font-bold text-gray-800",children:"Product Management"}),l.jsxs("button",{onClick:()=>u(),className:"flex items-center gap-2 rounded-full bg-primary-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-primary-700",children:[l.jsx(Fh,{className:"h-4 w-4"}),"Add New Product"]})]}),l.jsx("div",{className:"overflow-x-auto rounded-lg border bg-white shadow-sm",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Product"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Category"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Price (G/V)"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Stock"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Status"}),l.jsx("th",{scope:"col",className:"relative px-6 py-3",children:l.jsx("span",{className:"sr-only",children:"Actions"})})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:t.map(m=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:l.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:m.imageUrl,alt:m.name})}),l.jsx("div",{className:"ml-4",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.name})})]})}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:m.category}),l.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:["",m.sizes[0].price.toFixed(2)," / ",m.sizes[1].price.toFixed(2)]}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:m.stock}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:m.available?l.jsx("span",{className:"inline-flex rounded-full bg-green-100 px-2 text-xs font-semibold leading-5 text-green-800",children:"Available"}):l.jsx("span",{className:"inline-flex rounded-full bg-red-100 px-2 text-xs font-semibold leading-5 text-red-800",children:"Unavailable"})}),l.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-right text-sm font-medium",children:[l.jsx("button",{onClick:()=>u(m),className:"p-1 text-primary-600 hover:text-primary-800",children:l.jsx(xP,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>f(m.id,m.name),className:"ml-2 p-1 text-red-600 hover:text-red-800",children:l.jsx(Pg,{className:"h-4 w-4"})})]})]},m.id))})]})}),l.jsx(Cse,{isOpen:r,onClose:h,productToEdit:a})]})},Pse=()=>l.jsxs("div",{children:[l.jsx("h1",{className:"mb-6 font-display text-3xl font-bold text-gray-800",children:"Analytics & Reports"}),l.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border-2 border-dashed bg-gray-50 p-12 text-center",children:[l.jsx(fP,{className:"h-16 w-16 text-gray-400"}),l.jsx("h2",{className:"mt-4 text-xl font-semibold text-gray-700",children:"Coming Soon"}),l.jsx("p",{className:"mt-1 text-gray-500",children:"This is where you'll find detailed charts and reports on sales, customers, and product performance."})]})]}),kse={pending:"bg-yellow-100 text-yellow-800",reviewed:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800"},Dse=({feedback:t,onRespond:e})=>{const n=t.user?`${t.user.firstName} ${t.user.lastName}`:`User ${t.userId.substring(0,6)}`;return l.jsxs("div",{className:"flex flex-col rounded-lg border bg-white p-4 shadow-sm transition-shadow hover:shadow-md",children:[l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:n}),l.jsx("p",{className:"text-xs text-gray-500",children:t.createdAt?Ry(t.createdAt,{addSuffix:!0}):"Just now"})]}),l.jsx(Qt,{className:`capitalize ${kse[t.status]}`,children:t.status})]}),l.jsx("div",{className:"my-3 flex justify-start",children:l.jsx(lg,{rating:t.rating,readonly:!0,size:"sm"})}),l.jsxs("p",{className:"flex-grow text-sm text-gray-600 line-clamp-3",children:['"',t.comment,'"']}),l.jsx("div",{className:"mt-4 border-t pt-3",children:l.jsx("button",{onClick:e,className:"w-full rounded-full bg-primary-100 px-4 py-2 text-sm font-semibold text-primary-700 transition-colors hover:bg-primary-200",children:"View & Respond"})})]})},Mse=({isOpen:t,onClose:e,feedback:n})=>{const[s,r]=S.useState(n.response||""),[i,a]=S.useState(n.status),[o,c]=S.useState(!1);S.useEffect(()=>{t&&(r(n.response||""),a(n.status))},[t,n]);const u=async f=>{f.preventDefault(),c(!0);try{await xe.collection("feedback").doc(n.id).update({response:s,status:i,updatedAt:De.firestore.FieldValue.serverTimestamp()}),e()}catch(m){console.error("Error updating feedback: ",m)}finally{c(!1)}},h=n.user?`${n.user.firstName} ${n.user.lastName}`:`User ID: ${n.userId}`;return l.jsx(Ac,{isOpen:t,onClose:e,title:`Feedback from ${h}`,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-500",children:"Rating"}),l.jsx(lg,{rating:n.rating,readonly:!0})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-500",children:"Comment"}),l.jsx("p",{className:"mt-1 max-h-40 overflow-y-auto rounded-md bg-gray-50 p-3 text-gray-700 whitespace-pre-wrap",children:n.comment})]}),l.jsxs("form",{onSubmit:u,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"response",className:"block text-sm font-medium text-gray-700",children:"Your Response"}),l.jsx("textarea",{id:"response",value:s,onChange:f=>r(f.target.value),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"Write a response to the customer..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Update Status"}),l.jsx("div",{className:"mt-2 flex gap-2 rounded-full bg-gray-100 p-1",children:["pending","reviewed","resolved"].map(f=>l.jsx("button",{type:"button",onClick:()=>a(f),className:`w-full rounded-full py-1.5 text-sm font-semibold capitalize transition-colors ${i===f?"bg-primary-600 text-white shadow":"text-gray-600 hover:bg-primary-50"}`,children:f},f))})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx(Oe,{type:"button",variant:"ghost",onClick:e,children:"Cancel"}),l.jsxs(Oe,{type:"submit",disabled:o,children:[o?l.jsx(xt,{className:"mr-2 h-4 w-4 animate-spin"}):l.jsx(Ub,{className:"mr-2 h-4 w-4"}),"Save Response"]})]})]})]})})},Ose=()=>{const[t,e]=S.useState([]),[n,s]=S.useState(!0),[r,i]=S.useState("pending"),[a,o]=S.useState(!1),[c,u]=S.useState(null);S.useEffect(()=>{const p=new Map,_=async()=>{if(p.size>0)return p;const x=Yp(xe,"users");return(await N4(x)).forEach(b=>{const R=b.data();p.set(b.id,{firstName:R.firstName,lastName:R.lastName,email:R.email})}),p},w=fr(Yp(xe,"feedback"),b4("createdAt","desc")),T=N1(w,async x=>{const v=await _(),b=[];x.forEach(R=>{var M,A;const D=R.data();b.push({id:R.id,...D,createdAt:(M=D.createdAt)==null?void 0:M.toDate(),updatedAt:(A=D.updatedAt)==null?void 0:A.toDate(),user:v.get(D.userId)})}),e(b),s(!1)},x=>{console.error("Error fetching feedback: ",x),s(!1)});return()=>T()},[]);const h=S.useMemo(()=>r==="all"?t:t.filter(p=>p.status===r),[r,t]),f=p=>{u(p),o(!0)},m=()=>{o(!1),u(null)};return n?l.jsx("div",{className:"flex h-full items-center justify-center",children:l.jsx(xt,{className:"h-12 w-12 animate-spin text-primary-600"})}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[l.jsx("h1",{className:"font-display text-3xl font-bold text-gray-800",children:"Customer Feedback"}),l.jsx("div",{className:"flex mt-4 md:mt-0 gap-2 rounded-full bg-gray-200 p-1",children:["pending","reviewed","resolved","all"].map(p=>l.jsx("button",{onClick:()=>i(p),className:`rounded-full px-3 py-1.5 text-sm font-semibold capitalize transition-colors ${r===p?"bg-primary-600 text-white shadow":"text-gray-600 hover:bg-primary-50"}`,children:p},p))})]}),h.length>0?l.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:h.map(p=>l.jsx(Dse,{feedback:p,onRespond:()=>f(p)},p.id))}):l.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border-2 border-dashed bg-gray-50 p-12 text-center",children:[l.jsx(Vc,{className:"h-16 w-16 text-gray-400"}),l.jsx("h2",{className:"mt-4 text-xl font-semibold text-gray-700",children:"No Feedback Here"}),l.jsxs("p",{className:"mt-1 text-gray-500",children:['No feedback matching the "',r,'" filter.']})]}),c&&l.jsx(Mse,{isOpen:a,onClose:m,feedback:c})]})},Vse=()=>l.jsxs("div",{children:[l.jsx("h1",{className:"mb-6 font-display text-3xl font-bold text-gray-800",children:"Shop Settings"}),l.jsxs("div",{className:"mt-6 flex flex-col items-center justify-center rounded-lg border-2 border-dashed bg-gray-50 p-12 text-center",children:[l.jsx(zb,{className:"h-16 w-16 text-gray-400"}),l.jsx("h2",{className:"mt-4 text-xl font-semibold text-gray-700",children:"More Settings Coming Soon"}),l.jsx("p",{className:"mt-1 text-gray-500",children:"This is where you'll manage your shop's information, hours, and other system settings."})]})]}),Lse=()=>l.jsxs("div",{className:"bg-white",children:[l.jsx(It,{}),l.jsxs("main",{children:[l.jsxs("section",{className:"bg-gradient-to-br from-primary-50 to-coffee-50 px-6 py-20 text-center",children:[l.jsx("h1",{className:"font-display text-5xl font-bold text-coffee-900 md:text-6xl",children:"Terms of Service"}),l.jsxs("p",{className:"mt-4 text-xl text-gray-700",children:["Last updated: ",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),l.jsx("section",{className:"px-6 py-16",children:l.jsxs("div",{className:"prose prose-lg mx-auto max-w-4xl text-gray-700 prose-headings:font-display prose-headings:text-coffee-900 prose-a:text-primary-600 hover:prose-a:text-primary-700",children:[l.jsx("h2",{children:"1. Introduction"}),l.jsx("p",{children:'Welcome to Rush Coffee ("we," "our," or "us"). These Terms of Service govern your use of our website, mobile application, and services (collectively, the "Services"). By accessing or using our Services, you agree to be bound by these terms.'}),l.jsx("h2",{children:"2. User Accounts"}),l.jsx("p",{children:"To use certain features of our Services, you must register for an account. You agree to provide accurate, current, and complete information during the registration process and to update such information to keep it accurate, current, and complete. You are responsible for safeguarding your password and for all activities that occur under your account."}),l.jsx("h2",{children:"3. Orders and Payments"}),l.jsx("p",{children:"When you place an order through our Services, you are making an offer to purchase the products you have selected. All orders are subject to our acceptance. We reserve the right to refuse or cancel any order for any reason, including limitations on quantities available for purchase, inaccuracies, or errors in product or pricing information."}),l.jsx("p",{children:'Payment for all orders must be made at the time of placing the order, unless you select "Cash on Pickup." We accept payment through GCash and other methods as may be made available from time to time.'}),l.jsx("h2",{children:"4. Rewards Program"}),l.jsx("p",{children:"Our rewards program allows you to earn points for purchases and redeem them for rewards. Points are non-transferable and have no cash value. We reserve the right to modify, suspend, or terminate the rewards program at any time without notice."}),l.jsx("h2",{children:"5. Limitation of Liability"}),l.jsx("p",{children:"To the fullest extent permitted by applicable law, Rush Coffee shall not be liable for any indirect, incidental, special, consequential, or punitive damages, or any loss of profits or revenues, whether incurred directly or indirectly, or any loss of data, use, goodwill, or other intangible losses, resulting from (a) your access to or use of or inability to access or use the services; (b) any conduct or content of any third party on the services; or (c) unauthorized access, use, or alteration of your transmissions or content."}),l.jsx("h2",{children:"6. Changes to Terms"}),l.jsx("p",{children:"We may modify these Terms of Service from time to time. We will provide notice of any changes by posting the new Terms of Service on this page. You are advised to review these Terms of Service periodically for any changes."}),l.jsx("h2",{children:"7. Contact Us"}),l.jsxs("p",{children:["If you have any questions about these Terms of Service, please contact us at ",l.jsx("a",{href:"mailto:hello@rushcoffee.ph",children:"hello@rushcoffee.ph"}),"."]})]})})]}),l.jsx(Rt,{})]}),Use=()=>l.jsxs("div",{className:"bg-white",children:[l.jsx(It,{}),l.jsxs("main",{children:[l.jsxs("section",{className:"bg-gradient-to-br from-primary-50 to-coffee-50 px-6 py-20 text-center",children:[l.jsx("h1",{className:"font-display text-5xl font-bold text-coffee-900 md:text-6xl",children:"Privacy Policy"}),l.jsx("p",{className:"mt-4 text-xl text-gray-700",children:"Your privacy is important to us."}),l.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),l.jsx("section",{className:"px-6 py-16",children:l.jsxs("div",{className:"prose prose-lg mx-auto max-w-4xl text-gray-700 prose-headings:font-display prose-headings:text-coffee-900 prose-a:text-primary-600 hover:prose-a:text-primary-700",children:[l.jsx("h2",{children:"1. Information We Collect"}),l.jsx("p",{children:"We collect information you provide directly to us when you create an account, place an order, or communicate with us. This information may include your name, email address, phone number, and order details."}),l.jsx("h2",{children:"2. How We Use Your Information"}),l.jsx("p",{children:"We use the information we collect to:"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Process your transactions and fulfill your orders."}),l.jsx("li",{children:"Communicate with you about your orders, account, and our services."}),l.jsx("li",{children:"Operate and improve our Services, including our rewards program."}),l.jsx("li",{children:"Personalize your experience."})]}),l.jsx("h2",{children:"3. Information Sharing"}),l.jsx("p",{children:"We do not share your personal information with third parties except as necessary to provide our Services (e.g., with payment processors) or as required by law. We do not sell your personal data."}),l.jsx("h2",{children:"4. Data Security"}),l.jsx("p",{children:"We implement reasonable security measures to protect your information from unauthorized access, alteration, disclosure, or destruction. However, no internet-based service is 100% secure, so we cannot guarantee absolute security."}),l.jsx("h2",{children:"5. Your Choices"}),l.jsx("p",{children:"You may review and update your account information at any time by logging into your account and visiting your profile page. You can also unsubscribe from our marketing emails by following the instructions in those emails."}),l.jsx("h2",{children:"6. Contact Us"}),l.jsxs("p",{children:["If you have any questions about this Privacy Policy, please contact us at ",l.jsx("a",{href:"mailto:hello@rushcoffee.ph",children:"hello@rushcoffee.ph"}),"."]})]})})]}),l.jsx(Rt,{})]}),zse=({title:t})=>l.jsxs("div",{className:"flex min-h-screen flex-col",children:[l.jsx(It,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center bg-gradient-to-br from-primary-50 to-coffee-50",children:l.jsxs("div",{className:"p-4 text-center",children:[l.jsx(Pt,{className:"mx-auto mb-4 h-16 w-16 text-gray-400 opacity-50"}),l.jsx("h1",{className:"mb-4 font-display text-4xl font-bold text-gray-900",children:t}),l.jsx("p",{className:"mb-8 text-gray-600",children:"We're brewing something special. Check back soon!"}),l.jsx(je,{to:"/",className:"font-medium text-primary-600 transition-colors hover:text-primary-700",children:" Back to Home"})]})}),l.jsx(Rt,{})]}),Fse=()=>l.jsxs("div",{className:"flex min-h-screen flex-col",children:[l.jsx(It,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center bg-gradient-to-br from-primary-50 to-coffee-50",children:l.jsxs("div",{className:"p-4 text-center",children:[l.jsx(Pt,{className:"mx-auto mb-4 h-16 w-16 text-gray-400 opacity-50"}),l.jsx("h1",{className:"mb-4 font-display text-4xl font-bold text-gray-900",children:"404 - Page Not Found"}),l.jsx("p",{className:"mb-8 text-gray-600",children:"This coffee blend doesn't exist on our menu. Maybe it got lost in the daily grind?"}),l.jsx(je,{to:"/",className:"font-medium text-primary-600 transition-colors hover:text-primary-700",children:" Back to Home"})]})}),l.jsx(Rt,{})]}),Bse=()=>{const{isCartOpen:t,closeCart:e,cartItems:n,updateQuantity:s,removeFromCart:r,toastMessage:i}=kn(),a=ks(),o=()=>{e(),a("/checkout")};return l.jsxs(l.Fragment,{children:[l.jsx(vse,{}),l.jsxs(dU,{children:[l.jsx(Le,{path:"/",element:l.jsx(LQ,{})}),l.jsx(Le,{path:"/about",element:l.jsx(use,{})}),l.jsx(Le,{path:"/menu",element:l.jsx(bte,{})}),l.jsx(Le,{path:"/contact",element:l.jsx(fse,{})}),l.jsx(Le,{path:"/auth/login",element:l.jsx(zQ,{})}),l.jsx(Le,{path:"/auth/register",element:l.jsx(qQ,{})}),l.jsx(Le,{path:"/auth/forgot-password",element:l.jsx(HQ,{})}),l.jsx(Le,{path:"/checkout",element:l.jsx(Ate,{})}),l.jsx(Le,{path:"/queue",element:l.jsx(Gne,{})}),l.jsx(Le,{path:"/rewards",element:l.jsx(Jne,{})}),l.jsx(Le,{path:"/profile",element:l.jsx(lse,{})}),l.jsx(Le,{path:"/faq",element:l.jsx(gse,{})}),l.jsx(Le,{path:"/terms",element:l.jsx(Lse,{})}),l.jsx(Le,{path:"/privacy",element:l.jsx(Use,{})}),l.jsx(Le,{path:"/cookies",element:l.jsx(zse,{title:"Cookie Policy"})}),l.jsx(Le,{element:l.jsx(xse,{}),children:l.jsxs(Le,{path:"/admin",element:l.jsx(Ase,{}),children:[l.jsx(Le,{index:!0,element:l.jsx(_se,{})}),l.jsx(Le,{path:"queue",element:l.jsx(Ese,{})}),l.jsx(Le,{path:"inventory",element:l.jsx(Rse,{})}),l.jsx(Le,{path:"products",element:l.jsx(jse,{})}),l.jsx(Le,{path:"analytics",element:l.jsx(Pse,{})}),l.jsx(Le,{path:"feedback",element:l.jsx(Ose,{})}),l.jsx(Le,{path:"settings",element:l.jsx(Vse,{})})]})}),l.jsx(Le,{path:"*",element:l.jsx(Fse,{})})]}),l.jsx(yse,{isOpen:t,onClose:e,cartItems:n,onUpdateQuantity:s,onRemoveItem:r,onCheckout:o}),i&&l.jsx("div",{className:"fixed bottom-4 right-4 z-[100] animate-fade-in-up rounded-lg bg-gray-900 px-4 py-3 text-white shadow-lg",children:i})]})},qse=()=>l.jsx(jQ,{children:l.jsx(PQ,{children:l.jsx(Ste,{children:l.jsx(kQ,{children:l.jsx(DU,{children:l.jsx(Bse,{})})})})})}),H6=document.getElementById("root");if(!H6)throw new Error("Could not find root element to mount to");const Hse=vL.createRoot(H6);Hse.render(l.jsx(LV.StrictMode,{children:l.jsx(qse,{})}));
