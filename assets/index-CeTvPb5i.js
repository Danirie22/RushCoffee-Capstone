const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-CcrXq0yf.js","assets/clock-DRheYq4O.js","assets/wallet-CHNxYnwS.js","assets/users-DtFZ1pmi.js","assets/bell-2tB5X9ux.js","assets/ForgotPasswordPage-C2f1dpAk.js","assets/Input-CvH-8zzi.js","assets/MenuPage-qkdwuwft.js","assets/star-BuyZ9k-S.js","assets/sparkles-DkTpaRkK.js","assets/ProductCardSkeleton-BlTLDrbf.js","assets/search-DhkzcnOu.js","assets/arrow-up-down-DWI0BKhl.js","assets/CheckoutPage-BiS99nF_.js","assets/Button-7EiVU78F.js","assets/banknote-CwcDQt6K.js","assets/mockAvailableRewards-2NOuBi-T.js","assets/shopping-bag-Df_4vLZe.js","assets/coffee-BfFzb84j.js","assets/message-square-DPCCtN5P.js","assets/QueuePage-B-4jTMKV.js","assets/DigitalReceipt-CdT99Zd7.js","assets/thumbs-up-D_2d3uTi.js","assets/award-BxFki7ls.js","assets/trending-up-2jcTlzGr.js","assets/RewardsPage-CDDGhG7U.js","assets/history-cA30FRKv.js","assets/format-BoV-TgZi.js","assets/en-US-wfBU2YNu.js","assets/calendar-BS-dkdsU.js","assets/ProfilePage-CKT8Pal1.js","assets/save-BaK_6ap_.js","assets/StarRating-DRJ7W5rW.js","assets/send-BunkZdFk.js","assets/settings-CSIZuYnK.js","assets/square-pen-B6cL6_2p.js","assets/AboutPage-D78i9w43.js","assets/zap-wcsBhCoZ.js","assets/ContactPage-dBp6iA1H.js","assets/Textarea-BQ7SRXvB.js","assets/FAQPage-5i6Y3o8z.js","assets/TermsPage-DFCKb1Yx.js","assets/file-text-Ciu-ng-P.js","assets/credit-card-BBRnKTAT.js","assets/PrivacyPolicyPage-83Cb9OY7.js","assets/circle-check-HfT-F75u.js","assets/CookiePolicyPage-CIGGSC0Y.js","assets/chart-column-CawM1P5m.js","assets/AdminLayout-D0QlM0dg.js","assets/ConfirmLogoutModal-BhzRITw1.js","assets/package-gtaLKwRw.js","assets/AdminDashboardPage-_AREoe56.js","assets/SalesOverview-DPTpLmVG.js","assets/dollar-sign-DAZX1ou4.js","assets/AdminQueuePage-CTWAd0l0.js","assets/inventoryDeduction-LfRRV2nQ.js","assets/AdminInventoryPage-DuR0LuVs.js","assets/snowflake-B4mSSVQ8.js","assets/AdminProductsPage-BIT551_j.js","assets/AdminAnalyticsPage-BE_qslYa.js","assets/AdminFeedbackPage-DmoH6-E9.js","assets/funnel-Dd9VB8js.js","assets/AdminSettingsPage-Dgf9EbWn.js","assets/store-DX_VNmVR.js","assets/AdminOrdersHistoryPage-jvp4HjWh.js","assets/AdminUsersPage-BdYqktjR.js","assets/EmployeeLayout-0A0zJiDk.js","assets/POSDashboard-C-sIQsgy.js","assets/POSPage-BeQM_ZgY.js"])))=>i.map(i=>d[i]);
function o4(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function GR(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $R={exports:{}},Ap={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l4=Symbol.for("react.transitional.element"),c4=Symbol.for("react.fragment");function KR(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:l4,type:t,key:i,ref:e!==void 0?e:null,props:n}}Ap.Fragment=c4;Ap.jsx=KR;Ap.jsxs=KR;$R.exports=Ap;var g=$R.exports,QR={exports:{}},oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L0=Symbol.for("react.transitional.element"),u4=Symbol.for("react.portal"),h4=Symbol.for("react.fragment"),d4=Symbol.for("react.strict_mode"),f4=Symbol.for("react.profiler"),m4=Symbol.for("react.consumer"),p4=Symbol.for("react.context"),g4=Symbol.for("react.forward_ref"),y4=Symbol.for("react.suspense"),_4=Symbol.for("react.memo"),WR=Symbol.for("react.lazy"),v4=Symbol.for("react.activity"),vA=Symbol.iterator;function b4(t){return t===null||typeof t!="object"?null:(t=vA&&t[vA]||t["@@iterator"],typeof t=="function"?t:null)}var YR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},XR=Object.assign,JR={};function sc(t,e,n){this.props=t,this.context=e,this.refs=JR,this.updater=n||YR}sc.prototype.isReactComponent={};sc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ZR(){}ZR.prototype=sc.prototype;function U0(t,e,n){this.props=t,this.context=e,this.refs=JR,this.updater=n||YR}var j0=U0.prototype=new ZR;j0.constructor=U0;XR(j0,sc.prototype);j0.isPureReactComponent=!0;var bA=Array.isArray;function P_(){}var He={H:null,A:null,T:null,S:null},eC=Object.prototype.hasOwnProperty;function z0(t,e,n){var i=n.ref;return{$$typeof:L0,type:t,key:e,ref:i!==void 0?i:null,props:n}}function w4(t,e){return z0(t.type,e,t.props)}function B0(t){return typeof t=="object"&&t!==null&&t.$$typeof===L0}function T4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wA=/\/+/g;function cy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?T4(""+t.key):e.toString(36)}function E4(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(P_,P_):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Mo(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case L0:case u4:a=!0;break;case WR:return a=t._init,Mo(a(t._payload),e,n,i,r)}}if(a)return r=r(t),a=i===""?"."+cy(t,0):i,bA(r)?(n="",a!=null&&(n=a.replace(wA,"$&/")+"/"),Mo(r,e,n,"",function(c){return c})):r!=null&&(B0(r)&&(r=w4(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(wA,"$&/")+"/")+a)),e.push(r)),1;a=0;var o=i===""?".":i+":";if(bA(t))for(var l=0;l<t.length;l++)i=t[l],s=o+cy(i,l),a+=Mo(i,e,n,s,r);else if(l=b4(t),typeof l=="function")for(t=l.call(t),l=0;!(i=t.next()).done;)i=i.value,s=o+cy(i,l++),a+=Mo(i,e,n,s,r);else if(s==="object"){if(typeof t.then=="function")return Mo(E4(t),e,n,i,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function Jd(t,e,n){if(t==null)return t;var i=[],r=0;return Mo(t,i,"","",function(s){return e.call(n,s,r++)}),i}function A4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var TA=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},S4={map:Jd,forEach:function(t,e,n){Jd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Jd(t,function(){e++}),e},toArray:function(t){return Jd(t,function(e){return e})||[]},only:function(t){if(!B0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Activity=v4;oe.Children=S4;oe.Component=sc;oe.Fragment=h4;oe.Profiler=f4;oe.PureComponent=U0;oe.StrictMode=d4;oe.Suspense=y4;oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=He;oe.__COMPILER_RUNTIME={__proto__:null,c:function(t){return He.H.useMemoCache(t)}};oe.cache=function(t){return function(){return t.apply(null,arguments)}};oe.cacheSignal=function(){return null};oe.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=XR({},t.props),r=t.key;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)!eC.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(i[s]=e[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];i.children=a}return z0(t.type,r,i)};oe.createContext=function(t){return t={$$typeof:p4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:m4,_context:t},t};oe.createElement=function(t,e,n){var i,r={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)eC.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return z0(t,s,r)};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:g4,render:t}};oe.isValidElement=B0;oe.lazy=function(t){return{$$typeof:WR,_payload:{_status:-1,_result:t},_init:A4}};oe.memo=function(t,e){return{$$typeof:_4,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=He.T,n={};He.T=n;try{var i=t(),r=He.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(P_,TA)}catch(s){TA(s)}finally{e!==null&&n.types!==null&&(e.types=n.types),He.T=e}};oe.unstable_useCacheRefresh=function(){return He.H.useCacheRefresh()};oe.use=function(t){return He.H.use(t)};oe.useActionState=function(t,e,n){return He.H.useActionState(t,e,n)};oe.useCallback=function(t,e){return He.H.useCallback(t,e)};oe.useContext=function(t){return He.H.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t,e){return He.H.useDeferredValue(t,e)};oe.useEffect=function(t,e){return He.H.useEffect(t,e)};oe.useEffectEvent=function(t){return He.H.useEffectEvent(t)};oe.useId=function(){return He.H.useId()};oe.useImperativeHandle=function(t,e,n){return He.H.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return He.H.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return He.H.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return He.H.useMemo(t,e)};oe.useOptimistic=function(t,e){return He.H.useOptimistic(t,e)};oe.useReducer=function(t,e,n){return He.H.useReducer(t,e,n)};oe.useRef=function(t){return He.H.useRef(t)};oe.useState=function(t){return He.H.useState(t)};oe.useSyncExternalStore=function(t,e,n){return He.H.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return He.H.useTransition()};oe.version="19.2.0";QR.exports=oe;var R=QR.exports;const ch=GR(R),JZ=o4({__proto__:null,default:ch},[R]);var tC={exports:{}},Sp={},nC={exports:{}},iC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Y){var J=z.length;z.push(Y);e:for(;0<J;){var ne=J-1>>>1,Q=z[ne];if(0<r(Q,Y))z[ne]=Y,z[J]=Q,J=ne;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var Y=z[0],J=z.pop();if(J!==Y){z[0]=J;e:for(var ne=0,Q=z.length,de=Q>>>1;ne<de;){var Nt=2*(ne+1)-1,St=z[Nt],ht=Nt+1,Ii=z[ht];if(0>r(St,J))ht<Q&&0>r(Ii,St)?(z[ne]=Ii,z[ht]=J,ne=ht):(z[ne]=St,z[Nt]=J,ne=Nt);else if(ht<Q&&0>r(Ii,J))z[ne]=Ii,z[ht]=J,ne=ht;else break e}}return Y}function r(z,Y){var J=z.sortIndex-Y.sortIndex;return J!==0?J:z.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],h=1,d=null,f=3,p=!1,w=!1,E=!1,A=!1,v=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;function I(z){for(var Y=n(c);Y!==null;){if(Y.callback===null)i(c);else if(Y.startTime<=z)i(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(c)}}function D(z){if(E=!1,I(z),!w)if(n(l)!==null)w=!0,V||(V=!0,O());else{var Y=n(c);Y!==null&&ie(D,Y.startTime-z)}}var V=!1,S=-1,T=5,C=-1;function N(){return A?!0:!(t.unstable_now()-C<T)}function k(){if(A=!1,V){var z=t.unstable_now();C=z;var Y=!0;try{e:{w=!1,E&&(E=!1,_(S),S=-1),p=!0;var J=f;try{t:{for(I(z),d=n(l);d!==null&&!(d.expirationTime>z&&N());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,f=d.priorityLevel;var Q=ne(d.expirationTime<=z);if(z=t.unstable_now(),typeof Q=="function"){d.callback=Q,I(z),Y=!0;break t}d===n(l)&&i(l),I(z)}else i(l);d=n(l)}if(d!==null)Y=!0;else{var de=n(c);de!==null&&ie(D,de.startTime-z),Y=!1}}break e}finally{d=null,f=J,p=!1}Y=void 0}}finally{Y?O():V=!1}}}var O;if(typeof b=="function")O=function(){b(k)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,H=P.port2;P.port1.onmessage=k,O=function(){H.postMessage(null)}}else O=function(){v(k,0)};function ie(z,Y){S=v(function(){z(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(z){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var J=f;f=Y;try{return z()}finally{f=J}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var J=f;f=z;try{return Y()}finally{f=J}},t.unstable_scheduleCallback=function(z,Y,J){var ne=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ne+J:ne):J=ne,z){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=J+Q,z={id:h++,callback:Y,priorityLevel:z,startTime:J,expirationTime:Q,sortIndex:-1},J>ne?(z.sortIndex=J,e(c,z),n(l)===null&&z===n(c)&&(E?(_(S),S=-1):E=!0,ie(D,J-ne))):(z.sortIndex=Q,e(l,z),w||p||(w=!0,V||(V=!0,O()))),z},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(z){var Y=f;return function(){var J=f;f=Y;try{return z.apply(this,arguments)}finally{f=J}}}})(iC);nC.exports=iC;var I4=nC.exports,rC={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x4=R;function sC(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Yr(){}var mn={d:{f:Yr,r:function(){throw Error(sC(522))},D:Yr,C:Yr,L:Yr,m:Yr,X:Yr,S:Yr,M:Yr},p:0,findDOMNode:null},R4=Symbol.for("react.portal");function C4(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R4,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var Ru=x4.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ip(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=mn;yn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(sC(299));return C4(t,e,null,n)};yn.flushSync=function(t){var e=Ru.T,n=mn.p;try{if(Ru.T=null,mn.p=2,t)return t()}finally{Ru.T=e,mn.p=n,mn.d.f()}};yn.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,mn.d.C(t,e))};yn.prefetchDNS=function(t){typeof t=="string"&&mn.d.D(t)};yn.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=Ip(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?mn.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&mn.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};yn.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Ip(e.as,e.crossOrigin);mn.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&mn.d.M(t)};yn.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=Ip(n,e.crossOrigin);mn.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};yn.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Ip(e.as,e.crossOrigin);mn.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else mn.d.m(t)};yn.requestFormReset=function(t){mn.d.r(t)};yn.unstable_batchedUpdates=function(t,e){return t(e)};yn.useFormState=function(t,e,n){return Ru.H.useFormState(t,e,n)};yn.useFormStatus=function(){return Ru.H.useHostTransitionStatus()};yn.version="19.2.0";function aC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aC)}catch(t){console.error(t)}}aC(),rC.exports=yn;var oC=rC.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ct=I4,lC=R,P4=oC;function B(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function cC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function uC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hC(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function EA(t){if(Zh(t)!==t)throw Error(B(188))}function N4(t){var e=t.alternate;if(!e){if(e=Zh(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return EA(r),t;if(s===i)return EA(r),e;s=s.sibling}throw Error(B(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===n){a=!0,n=r,i=s;break}if(o===i){a=!0,i=r,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,i=r;break}if(o===i){a=!0,i=s,n=r;break}o=o.sibling}if(!a)throw Error(B(189))}}if(n.alternate!==i)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function dC(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=dC(t),e!==null)return e;t=t.sibling}return null}var $e=Object.assign,D4=Symbol.for("react.element"),Zd=Symbol.for("react.transitional.element"),du=Symbol.for("react.portal"),Ho=Symbol.for("react.fragment"),fC=Symbol.for("react.strict_mode"),N_=Symbol.for("react.profiler"),mC=Symbol.for("react.consumer"),cr=Symbol.for("react.context"),F0=Symbol.for("react.forward_ref"),D_=Symbol.for("react.suspense"),k_=Symbol.for("react.suspense_list"),q0=Symbol.for("react.memo"),is=Symbol.for("react.lazy"),V_=Symbol.for("react.activity"),k4=Symbol.for("react.memo_cache_sentinel"),AA=Symbol.iterator;function Kc(t){return t===null||typeof t!="object"?null:(t=AA&&t[AA]||t["@@iterator"],typeof t=="function"?t:null)}var V4=Symbol.for("react.client.reference");function O_(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===V4?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ho:return"Fragment";case N_:return"Profiler";case fC:return"StrictMode";case D_:return"Suspense";case k_:return"SuspenseList";case V_:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case du:return"Portal";case cr:return t.displayName||"Context";case mC:return(t._context.displayName||"Context")+".Consumer";case F0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case q0:return e=t.displayName||null,e!==null?e:O_(t.type)||"Memo";case is:e=t._payload,t=t._init;try{return O_(t(e))}catch{}}return null}var fu=Array.isArray,se=lC.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae=P4.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ka={pending:!1,data:null,method:null,action:null},M_=[],Go=-1;function Ji(t){return{current:t}}function Lt(t){0>Go||(t.current=M_[Go],M_[Go]=null,Go--)}function Me(t,e){Go++,M_[Go]=t.current,t.current=e}var Fi=Ji(null),uh=Ji(null),_s=Ji(null),mm=Ji(null);function pm(t,e){switch(Me(_s,e),Me(uh,t),Me(Fi,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?PS(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=PS(e),t=VN(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Lt(Fi),Me(Fi,t)}function Tl(){Lt(Fi),Lt(uh),Lt(_s)}function L_(t){t.memoizedState!==null&&Me(mm,t);var e=Fi.current,n=VN(e,t.type);e!==n&&(Me(uh,t),Me(Fi,n))}function gm(t){uh.current===t&&(Lt(Fi),Lt(uh)),mm.current===t&&(Lt(mm),wh._currentValue=ka)}var uy,SA;function ma(t){if(uy===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);uy=e&&e[1]||"",SA=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+uy+t+SA}var hy=!1;function dy(t,e){if(!t||hy)return"";hy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(p){var f=p}Reflect.construct(t,[],d)}else{try{d.call()}catch(p){f=p}t.call(d.prototype)}}else{try{throw Error()}catch(p){f=p}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(p){if(p&&f&&typeof p.stack=="string")return[p.stack,f.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split(`
`),c=o.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==c[r]){var h=`
`+l[i].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=i&&0<=r);break}}}finally{hy=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?ma(n):""}function O4(t,e){switch(t.tag){case 26:case 27:case 5:return ma(t.type);case 16:return ma("Lazy");case 13:return t.child!==e&&e!==null?ma("Suspense Fallback"):ma("Suspense");case 19:return ma("SuspenseList");case 0:case 15:return dy(t.type,!1);case 11:return dy(t.type.render,!1);case 1:return dy(t.type,!0);case 31:return ma("Activity");default:return""}}function IA(t){try{var e="",n=null;do e+=O4(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var U_=Object.prototype.hasOwnProperty,H0=Ct.unstable_scheduleCallback,fy=Ct.unstable_cancelCallback,M4=Ct.unstable_shouldYield,L4=Ct.unstable_requestPaint,Un=Ct.unstable_now,U4=Ct.unstable_getCurrentPriorityLevel,pC=Ct.unstable_ImmediatePriority,gC=Ct.unstable_UserBlockingPriority,ym=Ct.unstable_NormalPriority,j4=Ct.unstable_LowPriority,yC=Ct.unstable_IdlePriority,z4=Ct.log,B4=Ct.unstable_setDisableYieldValue,ed=null,jn=null;function us(t){if(typeof z4=="function"&&B4(t),jn&&typeof jn.setStrictMode=="function")try{jn.setStrictMode(ed,t)}catch{}}var zn=Math.clz32?Math.clz32:H4,F4=Math.log,q4=Math.LN2;function H4(t){return t>>>=0,t===0?32:31-(F4(t)/q4|0)|0}var ef=256,tf=262144,nf=4194304;function pa(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function xp(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=i&134217727;return o!==0?(i=o&~s,i!==0?r=pa(i):(a&=o,a!==0?r=pa(a):n||(n=o&~t,n!==0&&(r=pa(n))))):(o=i&~s,o!==0?r=pa(o):a!==0?r=pa(a):n||(n=i&~t,n!==0&&(r=pa(n)))),r===0?0:e!==0&&e!==r&&!(e&s)&&(s=r&-r,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:r}function td(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function G4(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _C(){var t=nf;return nf<<=1,!(nf&62914560)&&(nf=4194304),t}function my(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function nd(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function $4(t,e,n,i,r,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,c=t.hiddenUpdates;for(n=a&~n;0<n;){var h=31-zn(n),d=1<<h;o[h]=0,l[h]=-1;var f=c[h];if(f!==null)for(c[h]=null,h=0;h<f.length;h++){var p=f[h];p!==null&&(p.lane&=-536870913)}n&=~d}i!==0&&vC(t,i,0),s!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=s&~(a&~e))}function vC(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-zn(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function bC(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-zn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function wC(t,e){var n=e&-e;return n=n&42?1:G0(n),n&(t.suspendedLanes|e)?0:n}function G0(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function $0(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function TC(){var t=Ae.p;return t!==0?t:(t=window.event,t===void 0?32:GN(t.type))}function xA(t,e){var n=Ae.p;try{return Ae.p=t,e()}finally{Ae.p=n}}var Ws=Math.random().toString(36).slice(2),Ft="__reactFiber$"+Ws,xn="__reactProps$"+Ws,ac="__reactContainer$"+Ws,j_="__reactEvents$"+Ws,K4="__reactListeners$"+Ws,Q4="__reactHandles$"+Ws,RA="__reactResources$"+Ws,id="__reactMarker$"+Ws;function K0(t){delete t[Ft],delete t[xn],delete t[j_],delete t[K4],delete t[Q4]}function $o(t){var e=t[Ft];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ac]||n[Ft]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=OS(t);t!==null;){if(n=t[Ft])return n;t=OS(t)}return e}t=n,n=t.parentNode}return null}function oc(t){if(t=t[Ft]||t[ac]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function mu(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(B(33))}function ll(t){var e=t[RA];return e||(e=t[RA]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Mt(t){t[id]=!0}var EC=new Set,AC={};function lo(t,e){El(t,e),El(t+"Capture",e)}function El(t,e){for(AC[t]=e,t=0;t<e.length;t++)EC.add(e[t])}var W4=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),CA={},PA={};function Y4(t){return U_.call(PA,t)?!0:U_.call(CA,t)?!1:W4.test(t)?PA[t]=!0:(CA[t]=!0,!1)}function kf(t,e,n){if(Y4(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function rf(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function er(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function Zn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function SC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function X4(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function z_(t){if(!t._valueTracker){var e=SC(t)?"checked":"value";t._valueTracker=X4(t,e,""+t[e])}}function IC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=SC(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function _m(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var J4=/[\n"\\]/g;function ni(t){return t.replace(J4,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function B_(t,e,n,i,r,s,a,o){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Zn(e)):t.value!==""+Zn(e)&&(t.value=""+Zn(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?F_(t,a,Zn(e)):n!=null?F_(t,a,Zn(n)):i!=null&&t.removeAttribute("value"),r==null&&s!=null&&(t.defaultChecked=!!s),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+Zn(o):t.removeAttribute("name")}function xC(t,e,n,i,r,s,a,o){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){z_(t);return}n=n!=null?""+Zn(n):"",e=e!=null?""+Zn(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=o?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),z_(t)}function F_(t,e,n){e==="number"&&_m(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function cl(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Zn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function RC(t,e,n){if(e!=null&&(e=""+Zn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Zn(n):""}function CC(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(B(92));if(fu(i)){if(1<i.length)throw Error(B(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=Zn(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),z_(t)}function Al(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Z4=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function NA(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||Z4.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function PC(t,e,n){if(e!=null&&typeof e!="object")throw Error(B(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&NA(t,r,i)}else for(var s in e)e.hasOwnProperty(s)&&NA(t,s,e[s])}function Q0(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var e6=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),t6=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vf(t){return t6.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ur(){}var q_=null;function W0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ko=null,ul=null;function DA(t){var e=oc(t);if(e&&(t=e.stateNode)){var n=t[xn]||null;e:switch(t=e.stateNode,e.type){case"input":if(B_(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ni(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[xn]||null;if(!r)throw Error(B(90));B_(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&IC(i)}break e;case"textarea":RC(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&cl(t,!!n.multiple,e,!1)}}}var py=!1;function NC(t,e,n){if(py)return t(e,n);py=!0;try{var i=t(e);return i}finally{if(py=!1,(Ko!==null||ul!==null)&&(jp(),Ko&&(e=Ko,t=ul,ul=Ko=null,DA(e),t)))for(e=0;e<t.length;e++)DA(t[e])}}function hh(t,e){var n=t.stateNode;if(n===null)return null;var i=n[xn]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),H_=!1;if(Tr)try{var Qc={};Object.defineProperty(Qc,"passive",{get:function(){H_=!0}}),window.addEventListener("test",Qc,Qc),window.removeEventListener("test",Qc,Qc)}catch{H_=!1}var hs=null,Y0=null,Of=null;function DC(){if(Of)return Of;var t,e=Y0,n=e.length,i,r="value"in hs?hs.value:hs.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return Of=r.slice(t,1<i?1-i:void 0)}function Mf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sf(){return!0}function kA(){return!1}function Cn(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?sf:kA,this.isPropagationStopped=kA,this}return $e(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sf)},persist:function(){},isPersistent:sf}),e}var co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rp=Cn(co),rd=$e({},co,{view:0,detail:0}),n6=Cn(rd),gy,yy,Wc,Cp=$e({},rd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:X0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wc&&(Wc&&t.type==="mousemove"?(gy=t.screenX-Wc.screenX,yy=t.screenY-Wc.screenY):yy=gy=0,Wc=t),gy)},movementY:function(t){return"movementY"in t?t.movementY:yy}}),VA=Cn(Cp),i6=$e({},Cp,{dataTransfer:0}),r6=Cn(i6),s6=$e({},rd,{relatedTarget:0}),_y=Cn(s6),a6=$e({},co,{animationName:0,elapsedTime:0,pseudoElement:0}),o6=Cn(a6),l6=$e({},co,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),c6=Cn(l6),u6=$e({},co,{data:0}),OA=Cn(u6),h6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=f6[t])?!!e[t]:!1}function X0(){return m6}var p6=$e({},rd,{key:function(t){if(t.key){var e=h6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Mf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?d6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:X0,charCode:function(t){return t.type==="keypress"?Mf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),g6=Cn(p6),y6=$e({},Cp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),MA=Cn(y6),_6=$e({},rd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:X0}),v6=Cn(_6),b6=$e({},co,{propertyName:0,elapsedTime:0,pseudoElement:0}),w6=Cn(b6),T6=$e({},Cp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),E6=Cn(T6),A6=$e({},co,{newState:0,oldState:0}),S6=Cn(A6),I6=[9,13,27,32],J0=Tr&&"CompositionEvent"in window,Cu=null;Tr&&"documentMode"in document&&(Cu=document.documentMode);var x6=Tr&&"TextEvent"in window&&!Cu,kC=Tr&&(!J0||Cu&&8<Cu&&11>=Cu),LA=" ",UA=!1;function VC(t,e){switch(t){case"keyup":return I6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qo=!1;function R6(t,e){switch(t){case"compositionend":return OC(e);case"keypress":return e.which!==32?null:(UA=!0,LA);case"textInput":return t=e.data,t===LA&&UA?null:t;default:return null}}function C6(t,e){if(Qo)return t==="compositionend"||!J0&&VC(t,e)?(t=DC(),Of=Y0=hs=null,Qo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kC&&e.locale!=="ko"?null:e.data;default:return null}}var P6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!P6[t.type]:e==="textarea"}function MC(t,e,n,i){Ko?ul?ul.push(i):ul=[i]:Ko=i,e=Mm(e,"onChange"),0<e.length&&(n=new Rp("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Pu=null,dh=null;function N6(t){NN(t,0)}function Pp(t){var e=mu(t);if(IC(e))return t}function zA(t,e){if(t==="change")return e}var LC=!1;if(Tr){var vy;if(Tr){var by="oninput"in document;if(!by){var BA=document.createElement("div");BA.setAttribute("oninput","return;"),by=typeof BA.oninput=="function"}vy=by}else vy=!1;LC=vy&&(!document.documentMode||9<document.documentMode)}function FA(){Pu&&(Pu.detachEvent("onpropertychange",UC),dh=Pu=null)}function UC(t){if(t.propertyName==="value"&&Pp(dh)){var e=[];MC(e,dh,t,W0(t)),NC(N6,e)}}function D6(t,e,n){t==="focusin"?(FA(),Pu=e,dh=n,Pu.attachEvent("onpropertychange",UC)):t==="focusout"&&FA()}function k6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pp(dh)}function V6(t,e){if(t==="click")return Pp(e)}function O6(t,e){if(t==="input"||t==="change")return Pp(e)}function M6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gn=typeof Object.is=="function"?Object.is:M6;function fh(t,e){if(Gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!U_.call(e,r)||!Gn(t[r],e[r]))return!1}return!0}function qA(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function HA(t,e){var n=qA(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qA(n)}}function jC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zC(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=_m(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_m(t.document)}return e}function Z0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var L6=Tr&&"documentMode"in document&&11>=document.documentMode,Wo=null,G_=null,Nu=null,$_=!1;function GA(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$_||Wo==null||Wo!==_m(i)||(i=Wo,"selectionStart"in i&&Z0(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Nu&&fh(Nu,i)||(Nu=i,i=Mm(G_,"onSelect"),0<i.length&&(e=new Rp("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Wo)))}function ha(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yo={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionrun:ha("Transition","TransitionRun"),transitionstart:ha("Transition","TransitionStart"),transitioncancel:ha("Transition","TransitionCancel"),transitionend:ha("Transition","TransitionEnd")},wy={},BC={};Tr&&(BC=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function uo(t){if(wy[t])return wy[t];if(!Yo[t])return t;var e=Yo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in BC)return wy[t]=e[n];return t}var FC=uo("animationend"),qC=uo("animationiteration"),HC=uo("animationstart"),U6=uo("transitionrun"),j6=uo("transitionstart"),z6=uo("transitioncancel"),GC=uo("transitionend"),$C=new Map,K_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");K_.push("scrollEnd");function Ei(t,e){$C.set(t,e),lo(e,[t])}var vm=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Jn=[],Xo=0,eb=0;function Np(){for(var t=Xo,e=eb=Xo=0;e<t;){var n=Jn[e];Jn[e++]=null;var i=Jn[e];Jn[e++]=null;var r=Jn[e];Jn[e++]=null;var s=Jn[e];if(Jn[e++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&KC(n,r,s)}}function Dp(t,e,n,i){Jn[Xo++]=t,Jn[Xo++]=e,Jn[Xo++]=n,Jn[Xo++]=i,eb|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function tb(t,e,n,i){return Dp(t,e,n,i),bm(t)}function ho(t,e){return Dp(t,null,null,e),bm(t)}function KC(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(r=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,r&&e!==null&&(r=31-zn(n),t=s.hiddenUpdates,i=t[r],i===null?t[r]=[e]:i.push(e),e.lane=n|536870912),s):null}function bm(t){if(50<zu)throw zu=0,mv=null,Error(B(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Jo={};function B6(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(t,e,n,i){return new B6(t,e,n,i)}function nb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mr(t,e){var n=t.alternate;return n===null?(n=On(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function QC(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Lf(t,e,n,i,r,s){var a=0;if(i=t,typeof t=="function")nb(t)&&(a=1);else if(typeof t=="string")a=$5(t,n,Fi.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case V_:return t=On(31,n,e,r),t.elementType=V_,t.lanes=s,t;case Ho:return Va(n.children,r,s,e);case fC:a=8,r|=24;break;case N_:return t=On(12,n,e,r|2),t.elementType=N_,t.lanes=s,t;case D_:return t=On(13,n,e,r),t.elementType=D_,t.lanes=s,t;case k_:return t=On(19,n,e,r),t.elementType=k_,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cr:a=10;break e;case mC:a=9;break e;case F0:a=11;break e;case q0:a=14;break e;case is:a=16,i=null;break e}a=29,n=Error(B(130,t===null?"null":typeof t,"")),i=null}return e=On(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Va(t,e,n,i){return t=On(7,t,i,e),t.lanes=n,t}function Ty(t,e,n){return t=On(6,t,null,e),t.lanes=n,t}function WC(t){var e=On(18,null,null,0);return e.stateNode=t,e}function Ey(t,e,n){return e=On(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var $A=new WeakMap;function ii(t,e){if(typeof t=="object"&&t!==null){var n=$A.get(t);return n!==void 0?n:(e={value:t,source:e,stack:IA(e)},$A.set(t,e),e)}return{value:t,source:e,stack:IA(e)}}var Zo=[],el=0,wm=null,mh=0,ei=[],ti=0,Ds=null,Mi=1,Li="";function ar(t,e){Zo[el++]=mh,Zo[el++]=wm,wm=t,mh=e}function YC(t,e,n){ei[ti++]=Mi,ei[ti++]=Li,ei[ti++]=Ds,Ds=t;var i=Mi;t=Li;var r=32-zn(i)-1;i&=~(1<<r),n+=1;var s=32-zn(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Mi=1<<32-zn(e)+r|n<<r|i,Li=s+t}else Mi=1<<s|n<<r|i,Li=t}function ib(t){t.return!==null&&(ar(t,1),YC(t,1,0))}function rb(t){for(;t===wm;)wm=Zo[--el],Zo[el]=null,mh=Zo[--el],Zo[el]=null;for(;t===Ds;)Ds=ei[--ti],ei[ti]=null,Li=ei[--ti],ei[ti]=null,Mi=ei[--ti],ei[ti]=null}function XC(t,e){ei[ti++]=Mi,ei[ti++]=Li,ei[ti++]=Ds,Mi=e.id,Li=e.overflow,Ds=t}var qt=null,Be=null,be=!1,vs=null,ri=!1,Q_=Error(B(519));function ks(t){var e=Error(B(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ph(ii(e,t)),Q_}function KA(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Ft]=t,e[xn]=i,n){case"dialog":fe("cancel",e),fe("close",e);break;case"iframe":case"object":case"embed":fe("load",e);break;case"video":case"audio":for(n=0;n<vh.length;n++)fe(vh[n],e);break;case"source":fe("error",e);break;case"img":case"image":case"link":fe("error",e),fe("load",e);break;case"details":fe("toggle",e);break;case"input":fe("invalid",e),xC(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":fe("invalid",e);break;case"textarea":fe("invalid",e),CC(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||kN(e.textContent,n)?(i.popover!=null&&(fe("beforetoggle",e),fe("toggle",e)),i.onScroll!=null&&fe("scroll",e),i.onScrollEnd!=null&&fe("scrollend",e),i.onClick!=null&&(e.onclick=ur),e=!0):e=!1,e||ks(t,!0)}function QA(t){for(qt=t.return;qt;)switch(qt.tag){case 5:case 31:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:qt=qt.return}}function Io(t){if(t!==qt)return!1;if(!be)return QA(t),be=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||vv(t.type,t.memoizedProps)),n=!n),n&&Be&&ks(t),QA(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));Be=VS(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));Be=VS(t)}else e===27?(e=Be,Ys(t.type)?(t=Ev,Ev=null,Be=t):Be=e):Be=qt?li(t.stateNode.nextSibling):null;return!0}function qa(){Be=qt=null,be=!1}function Ay(){var t=vs;return t!==null&&(wn===null?wn=t:wn.push.apply(wn,t),vs=null),t}function ph(t){vs===null?vs=[t]:vs.push(t)}var W_=Ji(null),fo=null,hr=null;function ss(t,e,n){Me(W_,e._currentValue),e._currentValue=n}function pr(t){t._currentValue=W_.current,Lt(W_)}function Y_(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function X_(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;e:for(;s!==null;){var o=s;s=r;for(var l=0;l<e.length;l++)if(o.context===e[l]){s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Y_(s.return,n,t),i||(a=null);break e}s=o.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(B(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Y_(a,n,t),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function lc(t,e,n,i){t=null;for(var r=e,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(B(387));if(a=a.memoizedProps,a!==null){var o=r.type;Gn(r.pendingProps.value,a.value)||(t!==null?t.push(o):t=[o])}}else if(r===mm.current){if(a=r.alternate,a===null)throw Error(B(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(wh):t=[wh])}r=r.return}t!==null&&X_(e,t,n,i),e.flags|=262144}function Tm(t){for(t=t.firstContext;t!==null;){if(!Gn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ha(t){fo=t,hr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Gt(t){return JC(fo,t)}function af(t,e){return fo===null&&Ha(t),JC(t,e)}function JC(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},hr===null){if(t===null)throw Error(B(308));hr=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else hr=hr.next=e;return n}var F6=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},q6=Ct.unstable_scheduleCallback,H6=Ct.unstable_NormalPriority,Tt={$$typeof:cr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sb(){return{controller:new F6,data:new Map,refCount:0}}function sd(t){t.refCount--,t.refCount===0&&q6(H6,function(){t.controller.abort()})}var Du=null,J_=0,Sl=0,hl=null;function G6(t,e){if(Du===null){var n=Du=[];J_=0,Sl=Pb(),hl={status:"pending",value:void 0,then:function(i){n.push(i)}}}return J_++,e.then(WA,WA),e}function WA(){if(--J_===0&&Du!==null){hl!==null&&(hl.status="fulfilled");var t=Du;Du=null,Sl=0,hl=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function $6(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var YA=se.S;se.S=function(t,e){dN=Un(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&G6(t,e),YA!==null&&YA(t,e)};var Oa=Ji(null);function ab(){var t=Oa.current;return t!==null?t:Oe.pooledCache}function Uf(t,e){e===null?Me(Oa,Oa.current):Me(Oa,e.pool)}function ZC(){var t=ab();return t===null?null:{parent:Tt._currentValue,pool:t}}var cc=Error(B(460)),ob=Error(B(474)),kp=Error(B(542)),Em={then:function(){}};function XA(t){return t=t.status,t==="fulfilled"||t==="rejected"}function eP(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(ur,ur),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,ZA(t),t;default:if(typeof e.status=="string")e.then(ur,ur);else{if(t=Oe,t!==null&&100<t.shellSuspendCounter)throw Error(B(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,ZA(t),t}throw Ma=e,cc}}function ga(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ma=n,cc):n}}var Ma=null;function JA(){if(Ma===null)throw Error(B(459));var t=Ma;return Ma=null,t}function ZA(t){if(t===cc||t===kp)throw Error(B(483))}var dl=null,gh=0;function of(t){var e=gh;return gh+=1,dl===null&&(dl=[]),eP(dl,t,e)}function Yc(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function lf(t,e){throw e.$$typeof===D4?Error(B(525)):(t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function tP(t){function e(v,_){if(t){var b=v.deletions;b===null?(v.deletions=[_],v.flags|=16):b.push(_)}}function n(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function i(v){for(var _=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function r(v,_){return v=mr(v,_),v.index=0,v.sibling=null,v}function s(v,_,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<_?(v.flags|=67108866,_):b):(v.flags|=67108866,_)):(v.flags|=1048576,_)}function a(v){return t&&v.alternate===null&&(v.flags|=67108866),v}function o(v,_,b,I){return _===null||_.tag!==6?(_=Ty(b,v.mode,I),_.return=v,_):(_=r(_,b),_.return=v,_)}function l(v,_,b,I){var D=b.type;return D===Ho?h(v,_,b.props.children,I,b.key):_!==null&&(_.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===is&&ga(D)===_.type)?(_=r(_,b.props),Yc(_,b),_.return=v,_):(_=Lf(b.type,b.key,b.props,null,v.mode,I),Yc(_,b),_.return=v,_)}function c(v,_,b,I){return _===null||_.tag!==4||_.stateNode.containerInfo!==b.containerInfo||_.stateNode.implementation!==b.implementation?(_=Ey(b,v.mode,I),_.return=v,_):(_=r(_,b.children||[]),_.return=v,_)}function h(v,_,b,I,D){return _===null||_.tag!==7?(_=Va(b,v.mode,I,D),_.return=v,_):(_=r(_,b),_.return=v,_)}function d(v,_,b){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=Ty(""+_,v.mode,b),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Zd:return b=Lf(_.type,_.key,_.props,null,v.mode,b),Yc(b,_),b.return=v,b;case du:return _=Ey(_,v.mode,b),_.return=v,_;case is:return _=ga(_),d(v,_,b)}if(fu(_)||Kc(_))return _=Va(_,v.mode,b,null),_.return=v,_;if(typeof _.then=="function")return d(v,of(_),b);if(_.$$typeof===cr)return d(v,af(v,_),b);lf(v,_)}return null}function f(v,_,b,I){var D=_!==null?_.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return D!==null?null:o(v,_,""+b,I);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Zd:return b.key===D?l(v,_,b,I):null;case du:return b.key===D?c(v,_,b,I):null;case is:return b=ga(b),f(v,_,b,I)}if(fu(b)||Kc(b))return D!==null?null:h(v,_,b,I,null);if(typeof b.then=="function")return f(v,_,of(b),I);if(b.$$typeof===cr)return f(v,_,af(v,b),I);lf(v,b)}return null}function p(v,_,b,I,D){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return v=v.get(b)||null,o(_,v,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Zd:return v=v.get(I.key===null?b:I.key)||null,l(_,v,I,D);case du:return v=v.get(I.key===null?b:I.key)||null,c(_,v,I,D);case is:return I=ga(I),p(v,_,b,I,D)}if(fu(I)||Kc(I))return v=v.get(b)||null,h(_,v,I,D,null);if(typeof I.then=="function")return p(v,_,b,of(I),D);if(I.$$typeof===cr)return p(v,_,b,af(_,I),D);lf(_,I)}return null}function w(v,_,b,I){for(var D=null,V=null,S=_,T=_=0,C=null;S!==null&&T<b.length;T++){S.index>T?(C=S,S=null):C=S.sibling;var N=f(v,S,b[T],I);if(N===null){S===null&&(S=C);break}t&&S&&N.alternate===null&&e(v,S),_=s(N,_,T),V===null?D=N:V.sibling=N,V=N,S=C}if(T===b.length)return n(v,S),be&&ar(v,T),D;if(S===null){for(;T<b.length;T++)S=d(v,b[T],I),S!==null&&(_=s(S,_,T),V===null?D=S:V.sibling=S,V=S);return be&&ar(v,T),D}for(S=i(S);T<b.length;T++)C=p(S,v,T,b[T],I),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?T:C.key),_=s(C,_,T),V===null?D=C:V.sibling=C,V=C);return t&&S.forEach(function(k){return e(v,k)}),be&&ar(v,T),D}function E(v,_,b,I){if(b==null)throw Error(B(151));for(var D=null,V=null,S=_,T=_=0,C=null,N=b.next();S!==null&&!N.done;T++,N=b.next()){S.index>T?(C=S,S=null):C=S.sibling;var k=f(v,S,N.value,I);if(k===null){S===null&&(S=C);break}t&&S&&k.alternate===null&&e(v,S),_=s(k,_,T),V===null?D=k:V.sibling=k,V=k,S=C}if(N.done)return n(v,S),be&&ar(v,T),D;if(S===null){for(;!N.done;T++,N=b.next())N=d(v,N.value,I),N!==null&&(_=s(N,_,T),V===null?D=N:V.sibling=N,V=N);return be&&ar(v,T),D}for(S=i(S);!N.done;T++,N=b.next())N=p(S,v,T,N.value,I),N!==null&&(t&&N.alternate!==null&&S.delete(N.key===null?T:N.key),_=s(N,_,T),V===null?D=N:V.sibling=N,V=N);return t&&S.forEach(function(O){return e(v,O)}),be&&ar(v,T),D}function A(v,_,b,I){if(typeof b=="object"&&b!==null&&b.type===Ho&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Zd:e:{for(var D=b.key;_!==null;){if(_.key===D){if(D=b.type,D===Ho){if(_.tag===7){n(v,_.sibling),I=r(_,b.props.children),I.return=v,v=I;break e}}else if(_.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===is&&ga(D)===_.type){n(v,_.sibling),I=r(_,b.props),Yc(I,b),I.return=v,v=I;break e}n(v,_);break}else e(v,_);_=_.sibling}b.type===Ho?(I=Va(b.props.children,v.mode,I,b.key),I.return=v,v=I):(I=Lf(b.type,b.key,b.props,null,v.mode,I),Yc(I,b),I.return=v,v=I)}return a(v);case du:e:{for(D=b.key;_!==null;){if(_.key===D)if(_.tag===4&&_.stateNode.containerInfo===b.containerInfo&&_.stateNode.implementation===b.implementation){n(v,_.sibling),I=r(_,b.children||[]),I.return=v,v=I;break e}else{n(v,_);break}else e(v,_);_=_.sibling}I=Ey(b,v.mode,I),I.return=v,v=I}return a(v);case is:return b=ga(b),A(v,_,b,I)}if(fu(b))return w(v,_,b,I);if(Kc(b)){if(D=Kc(b),typeof D!="function")throw Error(B(150));return b=D.call(b),E(v,_,b,I)}if(typeof b.then=="function")return A(v,_,of(b),I);if(b.$$typeof===cr)return A(v,_,af(v,b),I);lf(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,_!==null&&_.tag===6?(n(v,_.sibling),I=r(_,b),I.return=v,v=I):(n(v,_),I=Ty(b,v.mode,I),I.return=v,v=I),a(v)):n(v,_)}return function(v,_,b,I){try{gh=0;var D=A(v,_,b,I);return dl=null,D}catch(S){if(S===cc||S===kp)throw S;var V=On(29,S,null,v.mode);return V.lanes=I,V.return=v,V}finally{}}}var Ga=tP(!0),nP=tP(!1),rs=!1;function lb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Z_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function bs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ws(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ee&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=bm(t),KC(t,null,n),e}return Dp(t,i,e,n),bm(t)}function ku(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,bC(t,n)}}function Sy(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var ev=!1;function Vu(){if(ev){var t=hl;if(t!==null)throw t}}function Ou(t,e,n,i){ev=!1;var r=t.updateQueue;rs=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;a=0,h=c=l=null,o=s;do{var f=o.lane&-536870913,p=f!==o.lane;if(p?(ye&f)===f:(i&f)===f){f!==0&&f===Sl&&(ev=!0),h!==null&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var w=t,E=o;f=e;var A=n;switch(E.tag){case 1:if(w=E.payload,typeof w=="function"){d=w.call(A,d,f);break e}d=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=E.payload,f=typeof w=="function"?w.call(A,d,f):w,f==null)break e;d=$e({},d,f);break e;case 2:rs=!0}}f=o.callback,f!==null&&(t.flags|=64,p&&(t.flags|=8192),p=r.callbacks,p===null?r.callbacks=[f]:p.push(f))}else p={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=p,l=d):h=h.next=p,a|=f;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;p=o,o=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,s===null&&(r.shared.lanes=0),Os|=a,t.lanes=a,t.memoizedState=d}}function iP(t,e){if(typeof t!="function")throw Error(B(191,t));t.call(e)}function rP(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)iP(n[t],e)}var Il=Ji(null),Am=Ji(0);function eS(t,e){t=Ir,Me(Am,t),Me(Il,e),Ir=t|e.baseLanes}function tv(){Me(Am,Ir),Me(Il,Il.current)}function cb(){Ir=Am.current,Lt(Il),Lt(Am)}var $n=Ji(null),oi=null;function as(t){var e=t.alternate;Me(ft,ft.current&1),Me($n,t),oi===null&&(e===null||Il.current!==null||e.memoizedState!==null)&&(oi=t)}function nv(t){Me(ft,ft.current),Me($n,t),oi===null&&(oi=t)}function sP(t){t.tag===22?(Me(ft,ft.current),Me($n,t),oi===null&&(oi=t)):os()}function os(){Me(ft,ft.current),Me($n,$n.current)}function kn(t){Lt($n),oi===t&&(oi=null),Lt(ft)}var ft=Ji(0);function Sm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||wv(n)||Tv(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Er=0,le=null,De=null,bt=null,Im=!1,fl=!1,$a=!1,xm=0,yh=0,ml=null,K6=0;function st(){throw Error(B(321))}function ub(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gn(t[n],e[n]))return!1;return!0}function hb(t,e,n,i,r,s){return Er=s,le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,se.H=t===null||t.memoizedState===null?MP:Tb,$a=!1,s=n(i,r),$a=!1,fl&&(s=oP(e,n,i,r)),aP(t),s}function aP(t){se.H=_h;var e=De!==null&&De.next!==null;if(Er=0,bt=De=le=null,Im=!1,yh=0,ml=null,e)throw Error(B(300));t===null||Et||(t=t.dependencies,t!==null&&Tm(t)&&(Et=!0))}function oP(t,e,n,i){le=t;var r=0;do{if(fl&&(ml=null),yh=0,fl=!1,25<=r)throw Error(B(301));if(r+=1,bt=De=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}se.H=LP,s=e(n,i)}while(fl);return s}function Q6(){var t=se.H,e=t.useState()[0];return e=typeof e.then=="function"?ad(e):e,t=t.useState()[0],(De!==null?De.memoizedState:null)!==t&&(le.flags|=1024),e}function db(){var t=xm!==0;return xm=0,t}function fb(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function mb(t){if(Im){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Im=!1}Er=0,bt=De=le=null,fl=!1,yh=xm=0,ml=null}function un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?le.memoizedState=bt=t:bt=bt.next=t,bt}function pt(){if(De===null){var t=le.alternate;t=t!==null?t.memoizedState:null}else t=De.next;var e=bt===null?le.memoizedState:bt.next;if(e!==null)bt=e,De=t;else{if(t===null)throw le.alternate===null?Error(B(467)):Error(B(310));De=t,t={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},bt===null?le.memoizedState=bt=t:bt=bt.next=t}return bt}function Vp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ad(t){var e=yh;return yh+=1,ml===null&&(ml=[]),t=eP(ml,t,e),e=le,(bt===null?e.memoizedState:bt.next)===null&&(e=e.alternate,se.H=e===null||e.memoizedState===null?MP:Tb),t}function Op(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ad(t);if(t.$$typeof===cr)return Gt(t)}throw Error(B(438,String(t)))}function pb(t){var e=null,n=le.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=le.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Vp(),le.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=k4;return e.index++,n}function Ar(t,e){return typeof e=="function"?e(t):e}function jf(t){var e=pt();return gb(e,De,t)}function gb(t,e,n){var i=t.queue;if(i===null)throw Error(B(311));i.lastRenderedReducer=n;var r=t.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}e.baseQueue=r=s,i.pending=null}if(s=t.baseState,r===null)t.memoizedState=s;else{e=r.next;var o=a=null,l=null,c=e,h=!1;do{var d=c.lane&-536870913;if(d!==c.lane?(ye&d)===d:(Er&d)===d){var f=c.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===Sl&&(h=!0);else if((Er&f)===f){c=c.next,f===Sl&&(h=!0);continue}else d={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=d,a=s):l=l.next=d,le.lanes|=f,Os|=f;d=c.action,$a&&n(s,d),s=c.hasEagerState?c.eagerState:n(s,d)}else f={lane:d,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=f,a=s):l=l.next=f,le.lanes|=d,Os|=d;c=c.next}while(c!==null&&c!==e);if(l===null?a=s:l.next=o,!Gn(s,t.memoizedState)&&(Et=!0,h&&(n=hl,n!==null)))throw n;t.memoizedState=s,t.baseState=a,t.baseQueue=l,i.lastRenderedState=s}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Iy(t){var e=pt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);Gn(s,e.memoizedState)||(Et=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function lP(t,e,n){var i=le,r=pt(),s=be;if(s){if(n===void 0)throw Error(B(407));n=n()}else n=e();var a=!Gn((De||r).memoizedState,n);if(a&&(r.memoizedState=n,Et=!0),r=r.queue,yb(hP.bind(null,i,r,t),[t]),r.getSnapshot!==e||a||bt!==null&&bt.memoizedState.tag&1){if(i.flags|=2048,xl(9,{destroy:void 0},uP.bind(null,i,r,n,e),null),Oe===null)throw Error(B(349));s||Er&127||cP(i,e,n)}return n}function cP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=le.updateQueue,e===null?(e=Vp(),le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function uP(t,e,n,i){e.value=n,e.getSnapshot=i,dP(e)&&fP(t)}function hP(t,e,n){return n(function(){dP(e)&&fP(t)})}function dP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gn(t,n)}catch{return!0}}function fP(t){var e=ho(t,2);e!==null&&In(e,t,2)}function iv(t){var e=un();if(typeof t=="function"){var n=t;if(t=n(),$a){us(!0);try{n()}finally{us(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:t},e}function mP(t,e,n,i){return t.baseState=n,gb(t,De,typeof i=="function"?i:Ar)}function W6(t,e,n,i,r){if(Lp(t))throw Error(B(485));if(t=e.action,t!==null){var s={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};se.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,pP(e,s)):(s.next=n.next,e.pending=n.next=s)}}function pP(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var s=se.T,a={};se.T=a;try{var o=n(r,i),l=se.S;l!==null&&l(a,o),tS(t,e,o)}catch(c){rv(t,e,c)}finally{s!==null&&a.types!==null&&(s.types=a.types),se.T=s}}else try{s=n(r,i),tS(t,e,s)}catch(c){rv(t,e,c)}}function tS(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){nS(t,e,i)},function(i){return rv(t,e,i)}):nS(t,e,n)}function nS(t,e,n){e.status="fulfilled",e.value=n,gP(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,pP(t,n)))}function rv(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,gP(e),e=e.next;while(e!==i)}t.action=null}function gP(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function yP(t,e){return e}function iS(t,e){if(be){var n=Oe.formState;if(n!==null){e:{var i=le;if(be){if(Be){t:{for(var r=Be,s=ri;r.nodeType!==8;){if(!s){r=null;break t}if(r=li(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Be=li(r.nextSibling),i=r.data==="F!";break e}}ks(i)}i=!1}i&&(e=n[0])}}return n=un(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yP,lastRenderedState:e},n.queue=i,n=kP.bind(null,le,i),i.dispatch=n,i=iv(!1),s=wb.bind(null,le,!1,i.queue),i=un(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=W6.bind(null,le,r,s,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function rS(t){var e=pt();return _P(e,De,t)}function _P(t,e,n){if(e=gb(t,e,yP)[0],t=jf(Ar)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=ad(e)}catch(a){throw a===cc?kp:a}else i=e;e=pt();var r=e.queue,s=r.dispatch;return n!==e.memoizedState&&(le.flags|=2048,xl(9,{destroy:void 0},Y6.bind(null,r,n),null)),[i,s,t]}function Y6(t,e){t.action=e}function sS(t){var e=pt(),n=De;if(n!==null)return _P(e,n,t);pt(),e=e.memoizedState,n=pt();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function xl(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=le.updateQueue,e===null&&(e=Vp(),le.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function vP(){return pt().memoizedState}function zf(t,e,n,i){var r=un();le.flags|=t,r.memoizedState=xl(1|e,{destroy:void 0},n,i===void 0?null:i)}function Mp(t,e,n,i){var r=pt();i=i===void 0?null:i;var s=r.memoizedState.inst;De!==null&&i!==null&&ub(i,De.memoizedState.deps)?r.memoizedState=xl(e,s,n,i):(le.flags|=t,r.memoizedState=xl(1|e,s,n,i))}function aS(t,e){zf(8390656,8,t,e)}function yb(t,e){Mp(2048,8,t,e)}function X6(t){le.flags|=4;var e=le.updateQueue;if(e===null)e=Vp(),le.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function bP(t){var e=pt().memoizedState;return X6({ref:e,nextImpl:t}),function(){if(Ee&2)throw Error(B(440));return e.impl.apply(void 0,arguments)}}function wP(t,e){return Mp(4,2,t,e)}function TP(t,e){return Mp(4,4,t,e)}function EP(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function AP(t,e,n){n=n!=null?n.concat([t]):null,Mp(4,4,EP.bind(null,e,t),n)}function _b(){}function SP(t,e){var n=pt();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&ub(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function IP(t,e){var n=pt();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&ub(e,i[1]))return i[0];if(i=t(),$a){us(!0);try{t()}finally{us(!1)}}return n.memoizedState=[i,e],i}function vb(t,e,n){return n===void 0||Er&1073741824&&!(ye&261930)?t.memoizedState=e:(t.memoizedState=n,t=mN(),le.lanes|=t,Os|=t,n)}function xP(t,e,n,i){return Gn(n,e)?n:Il.current!==null?(t=vb(t,n,i),Gn(t,e)||(Et=!0),t):!(Er&42)||Er&1073741824&&!(ye&261930)?(Et=!0,t.memoizedState=n):(t=mN(),le.lanes|=t,Os|=t,e)}function RP(t,e,n,i,r){var s=Ae.p;Ae.p=s!==0&&8>s?s:8;var a=se.T,o={};se.T=o,wb(t,!1,e,n);try{var l=r(),c=se.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=$6(l,i);Mu(t,e,h,Bn(t))}else Mu(t,e,i,Bn(t))}catch(d){Mu(t,e,{then:function(){},status:"rejected",reason:d},Bn())}finally{Ae.p=s,a!==null&&o.types!==null&&(a.types=o.types),se.T=a}}function J6(){}function sv(t,e,n,i){if(t.tag!==5)throw Error(B(476));var r=CP(t).queue;RP(t,r,e,ka,n===null?J6:function(){return PP(t),n(i)})}function CP(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:ka,baseState:ka,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:ka},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function PP(t){var e=CP(t);e.next===null&&(e=t.alternate.memoizedState),Mu(t,e.next.queue,{},Bn())}function bb(){return Gt(wh)}function NP(){return pt().memoizedState}function DP(){return pt().memoizedState}function Z6(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Bn();t=bs(n);var i=ws(e,t,n);i!==null&&(In(i,e,n),ku(i,e,n)),e={cache:sb()},t.payload=e;return}e=e.return}}function e5(t,e,n){var i=Bn();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Lp(t)?VP(e,n):(n=tb(t,e,n,i),n!==null&&(In(n,t,i),OP(n,e,i)))}function kP(t,e,n){var i=Bn();Mu(t,e,n,i)}function Mu(t,e,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lp(t))VP(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,Gn(o,a))return Dp(t,e,r,0),Oe===null&&Np(),!1}catch{}finally{}if(n=tb(t,e,r,i),n!==null)return In(n,t,i),OP(n,e,i),!0}return!1}function wb(t,e,n,i){if(i={lane:2,revertLane:Pb(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Lp(t)){if(e)throw Error(B(479))}else e=tb(t,n,i,2),e!==null&&In(e,t,2)}function Lp(t){var e=t.alternate;return t===le||e!==null&&e===le}function VP(t,e){fl=Im=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function OP(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,bC(t,n)}}var _h={readContext:Gt,use:Op,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useLayoutEffect:st,useInsertionEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useSyncExternalStore:st,useId:st,useHostTransitionStatus:st,useFormState:st,useActionState:st,useOptimistic:st,useMemoCache:st,useCacheRefresh:st};_h.useEffectEvent=st;var MP={readContext:Gt,use:Op,useCallback:function(t,e){return un().memoizedState=[t,e===void 0?null:e],t},useContext:Gt,useEffect:aS,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,zf(4194308,4,EP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zf(4194308,4,t,e)},useInsertionEffect:function(t,e){zf(4,2,t,e)},useMemo:function(t,e){var n=un();e=e===void 0?null:e;var i=t();if($a){us(!0);try{t()}finally{us(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=un();if(n!==void 0){var r=n(e);if($a){us(!0);try{n(e)}finally{us(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=e5.bind(null,le,t),[i.memoizedState,t]},useRef:function(t){var e=un();return t={current:t},e.memoizedState=t},useState:function(t){t=iv(t);var e=t.queue,n=kP.bind(null,le,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:_b,useDeferredValue:function(t,e){var n=un();return vb(n,t,e)},useTransition:function(){var t=iv(!1);return t=RP.bind(null,le,t.queue,!0,!1),un().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=le,r=un();if(be){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Oe===null)throw Error(B(349));ye&127||cP(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,aS(hP.bind(null,i,s,t),[t]),i.flags|=2048,xl(9,{destroy:void 0},uP.bind(null,i,s,n,e),null),n},useId:function(){var t=un(),e=Oe.identifierPrefix;if(be){var n=Li,i=Mi;n=(i&~(1<<32-zn(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=xm++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=K6++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:bb,useFormState:iS,useActionState:iS,useOptimistic:function(t){var e=un();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=wb.bind(null,le,!0,n),n.dispatch=e,[t,e]},useMemoCache:pb,useCacheRefresh:function(){return un().memoizedState=Z6.bind(null,le)},useEffectEvent:function(t){var e=un(),n={impl:t};return e.memoizedState=n,function(){if(Ee&2)throw Error(B(440));return n.impl.apply(void 0,arguments)}}},Tb={readContext:Gt,use:Op,useCallback:SP,useContext:Gt,useEffect:yb,useImperativeHandle:AP,useInsertionEffect:wP,useLayoutEffect:TP,useMemo:IP,useReducer:jf,useRef:vP,useState:function(){return jf(Ar)},useDebugValue:_b,useDeferredValue:function(t,e){var n=pt();return xP(n,De.memoizedState,t,e)},useTransition:function(){var t=jf(Ar)[0],e=pt().memoizedState;return[typeof t=="boolean"?t:ad(t),e]},useSyncExternalStore:lP,useId:NP,useHostTransitionStatus:bb,useFormState:rS,useActionState:rS,useOptimistic:function(t,e){var n=pt();return mP(n,De,t,e)},useMemoCache:pb,useCacheRefresh:DP};Tb.useEffectEvent=bP;var LP={readContext:Gt,use:Op,useCallback:SP,useContext:Gt,useEffect:yb,useImperativeHandle:AP,useInsertionEffect:wP,useLayoutEffect:TP,useMemo:IP,useReducer:Iy,useRef:vP,useState:function(){return Iy(Ar)},useDebugValue:_b,useDeferredValue:function(t,e){var n=pt();return De===null?vb(n,t,e):xP(n,De.memoizedState,t,e)},useTransition:function(){var t=Iy(Ar)[0],e=pt().memoizedState;return[typeof t=="boolean"?t:ad(t),e]},useSyncExternalStore:lP,useId:NP,useHostTransitionStatus:bb,useFormState:sS,useActionState:sS,useOptimistic:function(t,e){var n=pt();return De!==null?mP(n,De,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:pb,useCacheRefresh:DP};LP.useEffectEvent=bP;function xy(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:$e({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var av={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Bn(),r=bs(i);r.payload=e,n!=null&&(r.callback=n),e=ws(t,r,i),e!==null&&(In(e,t,i),ku(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Bn(),r=bs(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=ws(t,r,i),e!==null&&(In(e,t,i),ku(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bn(),i=bs(n);i.tag=2,e!=null&&(i.callback=e),e=ws(t,i,n),e!==null&&(In(e,t,n),ku(e,t,n))}};function oS(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!fh(n,i)||!fh(r,s):!0}function lS(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&av.enqueueReplaceState(e,e.state,null)}function Ka(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=$e({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function UP(t){vm(t)}function jP(t){console.error(t)}function zP(t){vm(t)}function Rm(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function cS(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function ov(t,e,n){return n=bs(n),n.tag=3,n.payload={element:null},n.callback=function(){Rm(t,e)},n}function BP(t){return t=bs(t),t.tag=3,t}function FP(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;t.payload=function(){return r(s)},t.callback=function(){cS(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){cS(e,n,i),typeof r!="function"&&(Ts===null?Ts=new Set([this]):Ts.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function t5(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&lc(e,n,r,!0),n=$n.current,n!==null){switch(n.tag){case 31:case 13:return oi===null?km():n.alternate===null&&ot===0&&(ot=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Em?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Uy(t,i,r)),!1;case 22:return n.flags|=65536,i===Em?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Uy(t,i,r)),!1}throw Error(B(435,n.tag))}return Uy(t,i,r),km(),!1}if(be)return e=$n.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==Q_&&(t=Error(B(422),{cause:i}),ph(ii(t,n)))):(i!==Q_&&(e=Error(B(423),{cause:i}),ph(ii(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=ii(i,n),r=ov(t.stateNode,i,r),Sy(t,r),ot!==4&&(ot=2)),!1;var s=Error(B(520),{cause:i});if(s=ii(s,n),ju===null?ju=[s]:ju.push(s),ot!==4&&(ot=2),e===null)return!0;i=ii(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=ov(n.stateNode,i,t),Sy(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Ts===null||!Ts.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=BP(r),FP(r,t,n,i),Sy(n,r),!1}n=n.return}while(n!==null);return!1}var Eb=Error(B(461)),Et=!1;function zt(t,e,n,i){e.child=t===null?nP(e,null,n,i):Ga(e,t.child,n,i)}function uS(t,e,n,i,r){n=n.render;var s=e.ref;if("ref"in i){var a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}else a=i;return Ha(e),i=hb(t,e,n,a,s,r),o=db(),t!==null&&!Et?(fb(t,e,r),Sr(t,e,r)):(be&&o&&ib(e),e.flags|=1,zt(t,e,i,r),e.child)}function hS(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!nb(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,qP(t,e,s,i,r)):(t=Lf(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!Ab(t,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:fh,n(a,i)&&t.ref===e.ref)return Sr(t,e,r)}return e.flags|=1,t=mr(s,i),t.ref=e.ref,t.return=e,e.child=t}function qP(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(fh(s,i)&&t.ref===e.ref)if(Et=!1,e.pendingProps=i=s,Ab(t,r))t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,Sr(t,e,r)}return lv(t,e,n,i,r)}function HP(t,e,n,i){var r=i.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(s=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~s}else i=0,e.child=null;return dS(t,e,s,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Uf(e,s!==null?s.cachePool:null),s!==null?eS(e,s):tv(),sP(e);else return i=e.lanes=536870912,dS(t,e,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(Uf(e,s.cachePool),eS(e,s),os(),e.memoizedState=null):(t!==null&&Uf(e,null),tv(),os());return zt(t,e,r,n),e.child}function pu(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function dS(t,e,n,i,r){var s=ab();return s=s===null?null:{parent:Tt._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&Uf(e,null),tv(),sP(e),t!==null&&lc(t,e,i,!0),e.childLanes=r,null}function Bf(t,e){return e=Cm({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function fS(t,e,n){return Ga(e,t.child,null,n),t=Bf(e,e.pendingProps),t.flags|=2,kn(e),e.memoizedState=null,t}function n5(t,e,n){var i=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(be){if(i.mode==="hidden")return t=Bf(e,i),e.lanes=536870912,pu(null,t);if(nv(e),(t=Be)?(t=MN(t,ri),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ds!==null?{id:Mi,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},n=WC(t),n.return=e,e.child=n,qt=e,Be=null)):t=null,t===null)throw ks(e);return e.lanes=536870912,null}return Bf(e,i)}var s=t.memoizedState;if(s!==null){var a=s.dehydrated;if(nv(e),r)if(e.flags&256)e.flags&=-257,e=fS(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(B(558));else if(Et||lc(t,e,n,!1),r=(n&t.childLanes)!==0,Et||r){if(i=Oe,i!==null&&(a=wC(i,n),a!==0&&a!==s.retryLane))throw s.retryLane=a,ho(t,a),In(i,t,a),Eb;km(),e=fS(t,e,n)}else t=s.treeContext,Be=li(a.nextSibling),qt=e,be=!0,vs=null,ri=!1,t!==null&&XC(e,t),e=Bf(e,i),e.flags|=4096;return e}return t=mr(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Ff(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(B(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function lv(t,e,n,i,r){return Ha(e),n=hb(t,e,n,i,void 0,r),i=db(),t!==null&&!Et?(fb(t,e,r),Sr(t,e,r)):(be&&i&&ib(e),e.flags|=1,zt(t,e,n,r),e.child)}function mS(t,e,n,i,r,s){return Ha(e),e.updateQueue=null,n=oP(e,i,n,r),aP(t),i=db(),t!==null&&!Et?(fb(t,e,s),Sr(t,e,s)):(be&&i&&ib(e),e.flags|=1,zt(t,e,n,s),e.child)}function pS(t,e,n,i,r){if(Ha(e),e.stateNode===null){var s=Jo,a=n.contextType;typeof a=="object"&&a!==null&&(s=Gt(a)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=av,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},lb(e),a=n.contextType,s.context=typeof a=="object"&&a!==null?Gt(a):Jo,s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(xy(e,n,a,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&av.enqueueReplaceState(s,s.state,null),Ou(e,i,s,r),Vu(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var o=e.memoizedProps,l=Ka(n,o);s.props=l;var c=s.context,h=n.contextType;a=Jo,typeof h=="object"&&h!==null&&(a=Gt(h));var d=n.getDerivedStateFromProps;h=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o||c!==a)&&lS(e,s,i,a),rs=!1;var f=e.memoizedState;s.state=f,Ou(e,i,s,r),Vu(),c=e.memoizedState,o||f!==c||rs?(typeof d=="function"&&(xy(e,n,d,i),c=e.memoizedState),(l=rs||oS(e,n,l,i,f,c,a))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),s.props=i,s.state=c,s.context=a,i=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Z_(t,e),a=e.memoizedProps,h=Ka(n,a),s.props=h,d=e.pendingProps,f=s.context,c=n.contextType,l=Jo,typeof c=="object"&&c!==null&&(l=Gt(c)),o=n.getDerivedStateFromProps,(c=typeof o=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&lS(e,s,i,l),rs=!1,f=e.memoizedState,s.state=f,Ou(e,i,s,r),Vu();var p=e.memoizedState;a!==d||f!==p||rs||t!==null&&t.dependencies!==null&&Tm(t.dependencies)?(typeof o=="function"&&(xy(e,n,o,i),p=e.memoizedState),(h=rs||oS(e,n,h,i,f,p,l)||t!==null&&t.dependencies!==null&&Tm(t.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,p,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),s.props=i,s.state=p,s.context=l,i=h):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,Ff(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=Ga(e,t.child,null,r),e.child=Ga(e,null,n,r)):zt(t,e,n,r),e.memoizedState=s.state,t=e.child):t=Sr(t,e,r),t}function gS(t,e,n,i){return qa(),e.flags|=256,zt(t,e,n,i),e.child}var Ry={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cy(t){return{baseLanes:t,cachePool:ZC()}}function Py(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Mn),t}function GP(t,e,n){var i=e.pendingProps,r=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(ft.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(be){if(r?as(e):os(),(t=Be)?(t=MN(t,ri),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ds!==null?{id:Mi,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},n=WC(t),n.return=e,e.child=n,qt=e,Be=null)):t=null,t===null)throw ks(e);return Tv(t)?e.lanes=32:e.lanes=536870912,null}var o=i.children;return i=i.fallback,r?(os(),r=e.mode,o=Cm({mode:"hidden",children:o},r),i=Va(i,r,n,null),o.return=e,i.return=e,o.sibling=i,e.child=o,i=e.child,i.memoizedState=Cy(n),i.childLanes=Py(t,a,n),e.memoizedState=Ry,pu(null,i)):(as(e),cv(e,o))}var l=t.memoizedState;if(l!==null&&(o=l.dehydrated,o!==null)){if(s)e.flags&256?(as(e),e.flags&=-257,e=Ny(t,e,n)):e.memoizedState!==null?(os(),e.child=t.child,e.flags|=128,e=null):(os(),o=i.fallback,r=e.mode,i=Cm({mode:"visible",children:i.children},r),o=Va(o,r,n,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,Ga(e,t.child,null,n),i=e.child,i.memoizedState=Cy(n),i.childLanes=Py(t,a,n),e.memoizedState=Ry,e=pu(null,i));else if(as(e),Tv(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var c=a.dgst;a=c,i=Error(B(419)),i.stack="",i.digest=a,ph({value:i,source:null,stack:null}),e=Ny(t,e,n)}else if(Et||lc(t,e,n,!1),a=(n&t.childLanes)!==0,Et||a){if(a=Oe,a!==null&&(i=wC(a,n),i!==0&&i!==l.retryLane))throw l.retryLane=i,ho(t,i),In(a,t,i),Eb;wv(o)||km(),e=Ny(t,e,n)}else wv(o)?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,Be=li(o.nextSibling),qt=e,be=!0,vs=null,ri=!1,t!==null&&XC(e,t),e=cv(e,i.children),e.flags|=4096);return e}return r?(os(),o=i.fallback,r=e.mode,l=t.child,c=l.sibling,i=mr(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,c!==null?o=mr(c,o):(o=Va(o,r,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,pu(null,i),i=e.child,o=t.child.memoizedState,o===null?o=Cy(n):(r=o.cachePool,r!==null?(l=Tt._currentValue,r=r.parent!==l?{parent:l,pool:l}:r):r=ZC(),o={baseLanes:o.baseLanes|n,cachePool:r}),i.memoizedState=o,i.childLanes=Py(t,a,n),e.memoizedState=Ry,pu(t.child,i)):(as(e),n=t.child,t=n.sibling,n=mr(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function cv(t,e){return e=Cm({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Cm(t,e){return t=On(22,t,null,e),t.lanes=0,t}function Ny(t,e,n){return Ga(e,t.child,null,n),t=cv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yS(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Y_(t.return,e,n)}function Dy(t,e,n,i,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r,a.treeForkCount=s)}function $P(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;i=i.children;var a=ft.current,o=(a&2)!==0;if(o?(a=a&1|2,e.flags|=128):a&=1,Me(ft,a),zt(t,e,i,n),i=be?mh:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yS(t,n,e);else if(t.tag===19)yS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Sm(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Dy(e,!1,r,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Sm(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Dy(e,!0,n,null,s,i);break;case"together":Dy(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function Sr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Os|=e.lanes,!(n&e.childLanes))if(t!==null){if(lc(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=mr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=mr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ab(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Tm(t)))}function i5(t,e,n){switch(e.tag){case 3:pm(e,e.stateNode.containerInfo),ss(e,Tt,t.memoizedState.cache),qa();break;case 27:case 5:L_(e);break;case 4:pm(e,e.stateNode.containerInfo);break;case 10:ss(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,nv(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(as(e),e.flags|=128,null):n&e.child.childLanes?GP(t,e,n):(as(e),t=Sr(t,e,n),t!==null?t.sibling:null);as(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(lc(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return $P(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Me(ft,ft.current),i)break;return null;case 22:return e.lanes=0,HP(t,e,n,e.pendingProps);case 24:ss(e,Tt,t.memoizedState.cache)}return Sr(t,e,n)}function KP(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Et=!0;else{if(!Ab(t,n)&&!(e.flags&128))return Et=!1,i5(t,e,n);Et=!!(t.flags&131072)}else Et=!1,be&&e.flags&1048576&&YC(e,mh,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=ga(e.elementType),e.type=t,typeof t=="function")nb(t)?(i=Ka(t,i),e.tag=1,e=pS(null,e,t,i,n)):(e.tag=0,e=lv(null,e,t,i,n));else{if(t!=null){var r=t.$$typeof;if(r===F0){e.tag=11,e=uS(null,e,t,i,n);break e}else if(r===q0){e.tag=14,e=hS(null,e,t,i,n);break e}}throw e=O_(t)||t,Error(B(306,e,""))}}return e;case 0:return lv(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=Ka(i,e.pendingProps),pS(t,e,i,r,n);case 3:e:{if(pm(e,e.stateNode.containerInfo),t===null)throw Error(B(387));i=e.pendingProps;var s=e.memoizedState;r=s.element,Z_(t,e),Ou(e,i,null,n);var a=e.memoizedState;if(i=a.cache,ss(e,Tt,i),i!==s.cache&&X_(e,[Tt],n,!0),Vu(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=gS(t,e,i,n);break e}else if(i!==r){r=ii(Error(B(424)),e),ph(r),e=gS(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Be=li(t.firstChild),qt=e,be=!0,vs=null,ri=!0,n=nP(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(qa(),i===r){e=Sr(t,e,n);break e}zt(t,e,i,n)}e=e.child}return e;case 26:return Ff(t,e),t===null?(n=LS(e.type,null,e.pendingProps,null))?e.memoizedState=n:be||(n=e.type,t=e.pendingProps,i=Lm(_s.current).createElement(n),i[Ft]=e,i[xn]=t,$t(i,n,t),Mt(i),e.stateNode=i):e.memoizedState=LS(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return L_(e),t===null&&be&&(i=e.stateNode=LN(e.type,e.pendingProps,_s.current),qt=e,ri=!0,r=Be,Ys(e.type)?(Ev=r,Be=li(i.firstChild)):Be=r),zt(t,e,e.pendingProps.children,n),Ff(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&be&&((r=i=Be)&&(i=k5(i,e.type,e.pendingProps,ri),i!==null?(e.stateNode=i,qt=e,Be=li(i.firstChild),ri=!1,r=!0):r=!1),r||ks(e)),L_(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,i=s.children,vv(r,s)?i=null:a!==null&&vv(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=hb(t,e,Q6,null,null,n),wh._currentValue=r),Ff(t,e),zt(t,e,i,n),e.child;case 6:return t===null&&be&&((t=n=Be)&&(n=V5(n,e.pendingProps,ri),n!==null?(e.stateNode=n,qt=e,Be=null,t=!0):t=!1),t||ks(e)),null;case 13:return GP(t,e,n);case 4:return pm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ga(e,null,i,n):zt(t,e,i,n),e.child;case 11:return uS(t,e,e.type,e.pendingProps,n);case 7:return zt(t,e,e.pendingProps,n),e.child;case 8:return zt(t,e,e.pendingProps.children,n),e.child;case 12:return zt(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,ss(e,e.type,i.value),zt(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,Ha(e),r=Gt(r),i=i(r),e.flags|=1,zt(t,e,i,n),e.child;case 14:return hS(t,e,e.type,e.pendingProps,n);case 15:return qP(t,e,e.type,e.pendingProps,n);case 19:return $P(t,e,n);case 31:return n5(t,e,n);case 22:return HP(t,e,n,e.pendingProps);case 24:return Ha(e),i=Gt(Tt),t===null?(r=ab(),r===null&&(r=Oe,s=sb(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),e.memoizedState={parent:i,cache:r},lb(e),ss(e,Tt,r)):(t.lanes&n&&(Z_(t,e),Ou(e,null,null,n),Vu()),r=t.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),ss(e,Tt,i)):(i=s.cache,ss(e,Tt,i),i!==r.cache&&X_(e,[Tt],n,!0))),zt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(B(156,e.tag))}function tr(t){t.flags|=4}function ky(t,e,n,i,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(yN())t.flags|=8192;else throw Ma=Em,ob}else t.flags&=-16777217}function _S(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!zN(e))if(yN())t.flags|=8192;else throw Ma=Em,ob}function cf(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?_C():536870912,t.lanes|=e,Rl|=e)}function Xc(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function r5(t,e,n){var i=e.pendingProps;switch(rb(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(e),null;case 1:return ze(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),pr(Tt),Tl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Io(e)?tr(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ay())),ze(e),null;case 26:var r=e.type,s=e.memoizedState;return t===null?(tr(e),s!==null?(ze(e),_S(e,s)):(ze(e),ky(e,r,null,i,n))):s?s!==t.memoizedState?(tr(e),ze(e),_S(e,s)):(ze(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&tr(e),ze(e),ky(e,r,t,i,n)),null;case 27:if(gm(e),n=_s.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&tr(e);else{if(!i){if(e.stateNode===null)throw Error(B(166));return ze(e),null}t=Fi.current,Io(e)?KA(e):(t=LN(r,i,n),e.stateNode=t,tr(e))}return ze(e),null;case 5:if(gm(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&tr(e);else{if(!i){if(e.stateNode===null)throw Error(B(166));return ze(e),null}if(s=Fi.current,Io(e))KA(e);else{var a=Lm(_s.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":s=a.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?a.createElement("select",{is:i.is}):a.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?a.createElement(r,{is:i.is}):a.createElement(r)}}s[Ft]=e,s[xn]=i;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=s;e:switch($t(s,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&tr(e)}}return ze(e),ky(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&tr(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(B(166));if(t=_s.current,Io(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=qt,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[Ft]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||kN(t.nodeValue,n)),t||ks(e,!0)}else t=Lm(t).createTextNode(i),t[Ft]=e,e.stateNode=t}return ze(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=Io(e),n!==null){if(t===null){if(!i)throw Error(B(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(557));t[Ft]=e}else qa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ze(e),t=!1}else n=Ay(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(kn(e),e):(kn(e),null);if(e.flags&128)throw Error(B(558))}return ze(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=Io(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(B(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(B(317));r[Ft]=e}else qa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ze(e),r=!1}else r=Ay(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(kn(e),e):(kn(e),null)}return kn(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),cf(e,e.updateQueue),ze(e),null);case 4:return Tl(),t===null&&Nb(e.stateNode.containerInfo),ze(e),null;case 10:return pr(e.type),ze(e),null;case 19:if(Lt(ft),i=e.memoizedState,i===null)return ze(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)Xc(i,!1);else{if(ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Sm(t),s!==null){for(e.flags|=128,Xc(i,!1),t=s.updateQueue,e.updateQueue=t,cf(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)QC(n,t),n=n.sibling;return Me(ft,ft.current&1|2),be&&ar(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&Un()>Nm&&(e.flags|=128,r=!0,Xc(i,!1),e.lanes=4194304)}else{if(!r)if(t=Sm(s),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,cf(e,t),Xc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!be)return ze(e),null}else 2*Un()-i.renderingStartTime>Nm&&n!==536870912&&(e.flags|=128,r=!0,Xc(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Un(),t.sibling=null,n=ft.current,Me(ft,r?n&1|2:n&1),be&&ar(e,i.treeForkCount),t):(ze(e),null);case 22:case 23:return kn(e),cb(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(ze(e),e.subtreeFlags&6&&(e.flags|=8192)):ze(e),n=e.updateQueue,n!==null&&cf(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&Lt(Oa),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),pr(Tt),ze(e),null;case 25:return null;case 30:return null}throw Error(B(156,e.tag))}function s5(t,e){switch(rb(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pr(Tt),Tl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return gm(e),null;case 31:if(e.memoizedState!==null){if(kn(e),e.alternate===null)throw Error(B(340));qa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(kn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));qa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Lt(ft),null;case 4:return Tl(),null;case 10:return pr(e.type),null;case 22:case 23:return kn(e),cb(),t!==null&&Lt(Oa),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return pr(Tt),null;case 25:return null;default:return null}}function QP(t,e){switch(rb(e),e.tag){case 3:pr(Tt),Tl();break;case 26:case 27:case 5:gm(e);break;case 4:Tl();break;case 31:e.memoizedState!==null&&kn(e);break;case 13:kn(e);break;case 19:Lt(ft);break;case 10:pr(e.type);break;case 22:case 23:kn(e),cb(),t!==null&&Lt(Oa);break;case 24:pr(Tt)}}function od(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(o){Re(e,e.return,o)}}function Vs(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&t)===t){var a=i.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,r=e;var l=n,c=o;try{c()}catch(h){Re(r,l,h)}}}i=i.next}while(i!==s)}}catch(h){Re(e,e.return,h)}}function WP(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{rP(e,n)}catch(i){Re(t,t.return,i)}}}function YP(t,e,n){n.props=Ka(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Re(t,e,i)}}function Lu(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(r){Re(t,e,r)}}function Ui(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Re(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Re(t,e,r)}else n.current=null}function XP(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Re(t,t.return,r)}}function Vy(t,e,n){try{var i=t.stateNode;x5(i,t.type,n,e),i[xn]=e}catch(r){Re(t,t.return,r)}}function JP(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ys(t.type)||t.tag===4}function Oy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||JP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ys(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uv(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ur));else if(i!==4&&(i===27&&Ys(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(uv(t,e,n),t=t.sibling;t!==null;)uv(t,e,n),t=t.sibling}function Pm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Ys(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Pm(t,e,n),t=t.sibling;t!==null;)Pm(t,e,n),t=t.sibling}function ZP(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);$t(e,i,n),e[Ft]=t,e[xn]=n}catch(s){Re(t,t.return,s)}}var or=!1,wt=!1,My=!1,vS=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function a5(t,e){if(t=t.containerInfo,yv=Bm,t=zC(t),Z0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(o=a+r),d!==s||i!==0&&d.nodeType!==3||(l=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===r&&(o=a),f===s&&++h===i&&(l=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(_v={focusedElem:t,selectionRange:n},Bm=!1,Vt=e;Vt!==null;)if(e=Vt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Vt=t;else for(;Vt!==null;){switch(e=Vt,s=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var w=Ka(n.type,r);t=i.getSnapshotBeforeUpdate(w,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(E){Re(n,n.return,E)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)bv(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":bv(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(B(163))}if(t=e.sibling,t!==null){t.return=e.return,Vt=t;break}Vt=e.return}}function eN(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:ir(t,n),i&4&&od(5,n);break;case 1:if(ir(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Re(n,n.return,a)}else{var r=Ka(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Re(n,n.return,a)}}i&64&&WP(n),i&512&&Lu(n,n.return);break;case 3:if(ir(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{rP(t,e)}catch(a){Re(n,n.return,a)}}break;case 27:e===null&&i&4&&ZP(n);case 26:case 5:ir(t,n),e===null&&i&4&&XP(n),i&512&&Lu(n,n.return);break;case 12:ir(t,n);break;case 31:ir(t,n),i&4&&iN(t,n);break;case 13:ir(t,n),i&4&&rN(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=p5.bind(null,n),O5(t,n))));break;case 22:if(i=n.memoizedState!==null||or,!i){e=e!==null&&e.memoizedState!==null||wt,r=or;var s=wt;or=i,(wt=e)&&!s?rr(t,n,(n.subtreeFlags&8772)!==0):ir(t,n),or=r,wt=s}break;case 30:break;default:ir(t,n)}}function tN(t){var e=t.alternate;e!==null&&(t.alternate=null,tN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&K0(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Qe=null,bn=!1;function nr(t,e,n){for(n=n.child;n!==null;)nN(t,e,n),n=n.sibling}function nN(t,e,n){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(ed,n)}catch{}switch(n.tag){case 26:wt||Ui(n,e),nr(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:wt||Ui(n,e);var i=Qe,r=bn;Ys(n.type)&&(Qe=n.stateNode,bn=!1),nr(t,e,n),Bu(n.stateNode),Qe=i,bn=r;break;case 5:wt||Ui(n,e);case 6:if(i=Qe,r=bn,Qe=null,nr(t,e,n),Qe=i,bn=r,Qe!==null)if(bn)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(n.stateNode)}catch(s){Re(n,e,s)}else try{Qe.removeChild(n.stateNode)}catch(s){Re(n,e,s)}break;case 18:Qe!==null&&(bn?(t=Qe,DS(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Dl(t)):DS(Qe,n.stateNode));break;case 4:i=Qe,r=bn,Qe=n.stateNode.containerInfo,bn=!0,nr(t,e,n),Qe=i,bn=r;break;case 0:case 11:case 14:case 15:Vs(2,n,e),wt||Vs(4,n,e),nr(t,e,n);break;case 1:wt||(Ui(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&YP(n,e,i)),nr(t,e,n);break;case 21:nr(t,e,n);break;case 22:wt=(i=wt)||n.memoizedState!==null,nr(t,e,n),wt=i;break;default:nr(t,e,n)}}function iN(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Dl(t)}catch(n){Re(e,e.return,n)}}}function rN(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Dl(t)}catch(n){Re(e,e.return,n)}}function o5(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new vS),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new vS),e;default:throw Error(B(435,t.tag))}}function uf(t,e){var n=o5(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var r=g5.bind(null,t,i);i.then(r,r)}})}function _n(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(Ys(o.type)){Qe=o.stateNode,bn=!1;break e}break;case 5:Qe=o.stateNode,bn=!1;break e;case 3:case 4:Qe=o.stateNode.containerInfo,bn=!0;break e}o=o.return}if(Qe===null)throw Error(B(160));nN(s,a,r),Qe=null,bn=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)sN(e,t),e=e.sibling}var yi=null;function sN(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:_n(e,t),vn(t),i&4&&(Vs(3,t,t.return),od(3,t),Vs(5,t,t.return));break;case 1:_n(e,t),vn(t),i&512&&(wt||n===null||Ui(n,n.return)),i&64&&or&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=yi;if(_n(e,t),vn(t),i&512&&(wt||n===null||Ui(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[id]||s[Ft]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),$t(s,i,n),s[Ft]=t,Mt(s),i=s;break e;case"link":var a=jS("link","href",r).get(i+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(s=a[o],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}s=r.createElement(i),$t(s,i,n),r.head.appendChild(s);break;case"meta":if(a=jS("meta","content",r).get(i+(n.content||""))){for(o=0;o<a.length;o++)if(s=a[o],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}s=r.createElement(i),$t(s,i,n),r.head.appendChild(s);break;default:throw Error(B(468,i))}s[Ft]=t,Mt(s),i=s}t.stateNode=i}else zS(r,t.type,t.stateNode);else t.stateNode=US(r,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?zS(r,t.type,t.stateNode):US(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&Vy(t,t.memoizedProps,n.memoizedProps)}break;case 27:_n(e,t),vn(t),i&512&&(wt||n===null||Ui(n,n.return)),n!==null&&i&4&&Vy(t,t.memoizedProps,n.memoizedProps);break;case 5:if(_n(e,t),vn(t),i&512&&(wt||n===null||Ui(n,n.return)),t.flags&32){r=t.stateNode;try{Al(r,"")}catch(w){Re(t,t.return,w)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,Vy(t,r,n!==null?n.memoizedProps:r)),i&1024&&(My=!0);break;case 6:if(_n(e,t),vn(t),i&4){if(t.stateNode===null)throw Error(B(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(w){Re(t,t.return,w)}}break;case 3:if(Gf=null,r=yi,yi=Um(e.containerInfo),_n(e,t),yi=r,vn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Dl(e.containerInfo)}catch(w){Re(t,t.return,w)}My&&(My=!1,aN(t));break;case 4:i=yi,yi=Um(t.stateNode.containerInfo),_n(e,t),vn(t),yi=i;break;case 12:_n(e,t),vn(t);break;case 31:_n(e,t),vn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,uf(t,i)));break;case 13:_n(e,t),vn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Up=Un()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,uf(t,i)));break;case 22:r=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=or,h=wt;if(or=c||r,wt=h||l,_n(e,t),wt=h,or=c,vn(t),i&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||l||or||wt||ya(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(s=l.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=l.stateNode;var d=l.memoizedProps.style,f=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(w){Re(l,l.return,w)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=r?"":l.memoizedProps}catch(w){Re(l,l.return,w)}}}else if(e.tag===18){if(n===null){l=e;try{var p=l.stateNode;r?kS(p,!0):kS(l.stateNode,!1)}catch(w){Re(l,l.return,w)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,uf(t,n))));break;case 19:_n(e,t),vn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,uf(t,i)));break;case 30:break;case 21:break;default:_n(e,t),vn(t)}}function vn(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(JP(i)){n=i;break}i=i.return}if(n==null)throw Error(B(160));switch(n.tag){case 27:var r=n.stateNode,s=Oy(t);Pm(t,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(Al(a,""),n.flags&=-33);var o=Oy(t);Pm(t,o,a);break;case 3:case 4:var l=n.stateNode.containerInfo,c=Oy(t);uv(t,c,l);break;default:throw Error(B(161))}}catch(h){Re(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function aN(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;aN(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ir(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)eN(t,e.alternate,e),e=e.sibling}function ya(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Vs(4,e,e.return),ya(e);break;case 1:Ui(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&YP(e,e.return,n),ya(e);break;case 27:Bu(e.stateNode);case 26:case 5:Ui(e,e.return),ya(e);break;case 22:e.memoizedState===null&&ya(e);break;case 30:ya(e);break;default:ya(e)}t=t.sibling}}function rr(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:rr(r,s,n),od(4,s);break;case 1:if(rr(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){Re(i,i.return,c)}if(i=s,r=i.updateQueue,r!==null){var o=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)iP(l[r],o)}catch(c){Re(i,i.return,c)}}n&&a&64&&WP(s),Lu(s,s.return);break;case 27:ZP(s);case 26:case 5:rr(r,s,n),n&&i===null&&a&4&&XP(s),Lu(s,s.return);break;case 12:rr(r,s,n);break;case 31:rr(r,s,n),n&&a&4&&iN(r,s);break;case 13:rr(r,s,n),n&&a&4&&rN(r,s);break;case 22:s.memoizedState===null&&rr(r,s,n),Lu(s,s.return);break;case 30:break;default:rr(r,s,n)}e=e.sibling}}function Sb(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&sd(n))}function Ib(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&sd(t))}function mi(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)oN(t,e,n,i),e=e.sibling}function oN(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:mi(t,e,n,i),r&2048&&od(9,e);break;case 1:mi(t,e,n,i);break;case 3:mi(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&sd(t)));break;case 12:if(r&2048){mi(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,o=s.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){Re(e,e.return,l)}}else mi(t,e,n,i);break;case 31:mi(t,e,n,i);break;case 13:mi(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?mi(t,e,n,i):Uu(t,e):s._visibility&2?mi(t,e,n,i):(s._visibility|=2,Lo(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),r&2048&&Sb(a,e);break;case 24:mi(t,e,n,i),r&2048&&Ib(e.alternate,e);break;default:mi(t,e,n,i)}}function Lo(t,e,n,i,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,a=e,o=n,l=i,c=a.flags;switch(a.tag){case 0:case 11:case 15:Lo(s,a,o,l,r),od(8,a);break;case 23:break;case 22:var h=a.stateNode;a.memoizedState!==null?h._visibility&2?Lo(s,a,o,l,r):Uu(s,a):(h._visibility|=2,Lo(s,a,o,l,r)),r&&c&2048&&Sb(a.alternate,a);break;case 24:Lo(s,a,o,l,r),r&&c&2048&&Ib(a.alternate,a);break;default:Lo(s,a,o,l,r)}e=e.sibling}}function Uu(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:Uu(n,i),r&2048&&Sb(i.alternate,i);break;case 24:Uu(n,i),r&2048&&Ib(i.alternate,i);break;default:Uu(n,i)}e=e.sibling}}var gu=8192;function xo(t,e,n){if(t.subtreeFlags&gu)for(t=t.child;t!==null;)lN(t,e,n),t=t.sibling}function lN(t,e,n){switch(t.tag){case 26:xo(t,e,n),t.flags&gu&&t.memoizedState!==null&&K5(n,yi,t.memoizedState,t.memoizedProps);break;case 5:xo(t,e,n);break;case 3:case 4:var i=yi;yi=Um(t.stateNode.containerInfo),xo(t,e,n),yi=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=gu,gu=16777216,xo(t,e,n),gu=i):xo(t,e,n));break;default:xo(t,e,n)}}function cN(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Jc(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Vt=i,hN(i,t)}cN(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)uN(t),t=t.sibling}function uN(t){switch(t.tag){case 0:case 11:case 15:Jc(t),t.flags&2048&&Vs(9,t,t.return);break;case 3:Jc(t);break;case 12:Jc(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,qf(t)):Jc(t);break;default:Jc(t)}}function qf(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Vt=i,hN(i,t)}cN(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Vs(8,e,e.return),qf(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,qf(e));break;default:qf(e)}t=t.sibling}}function hN(t,e){for(;Vt!==null;){var n=Vt;switch(n.tag){case 0:case 11:case 15:Vs(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:sd(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Vt=i;else e:for(n=t;Vt!==null;){i=Vt;var r=i.sibling,s=i.return;if(tN(i),i===n){Vt=null;break e}if(r!==null){r.return=s,Vt=r;break e}Vt=s}}}var l5={getCacheForType:function(t){var e=Gt(Tt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Gt(Tt).controller.signal}},c5=typeof WeakMap=="function"?WeakMap:Map,Ee=0,Oe=null,pe=null,ye=0,xe=0,Nn=null,ds=!1,uc=!1,xb=!1,Ir=0,ot=0,Os=0,La=0,Rb=0,Mn=0,Rl=0,ju=null,wn=null,hv=!1,Up=0,dN=0,Nm=1/0,Dm=null,Ts=null,xt=0,Es=null,Cl=null,gr=0,dv=0,fv=null,fN=null,zu=0,mv=null;function Bn(){return Ee&2&&ye!==0?ye&-ye:se.T!==null?Pb():TC()}function mN(){if(Mn===0)if(!(ye&536870912)||be){var t=tf;tf<<=1,!(tf&3932160)&&(tf=262144),Mn=t}else Mn=536870912;return t=$n.current,t!==null&&(t.flags|=32),Mn}function In(t,e,n){(t===Oe&&(xe===2||xe===9)||t.cancelPendingCommit!==null)&&(Pl(t,0),fs(t,ye,Mn,!1)),nd(t,n),(!(Ee&2)||t!==Oe)&&(t===Oe&&(!(Ee&2)&&(La|=n),ot===4&&fs(t,ye,Mn,!1)),Zi(t))}function pN(t,e,n){if(Ee&6)throw Error(B(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||td(t,e),r=i?d5(t,e):Ly(t,e,!0),s=i;do{if(r===0){uc&&!i&&fs(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!u5(n)){r=Ly(t,e,!1),s=!1;continue}if(r===2){if(s=e,t.errorRecoveryDisabledLanes&s)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=t;r=ju;var l=o.current.memoizedState.isDehydrated;if(l&&(Pl(o,a).flags|=256),a=Ly(o,a,!1),a!==2){if(xb&&!l){o.errorRecoveryDisabledLanes|=s,La|=s,r=4;break e}s=wn,wn=r,s!==null&&(wn===null?wn=s:wn.push.apply(wn,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){Pl(t,0),fs(t,e,0,!0);break}e:{switch(i=t,s=r,s){case 0:case 1:throw Error(B(345));case 4:if((e&4194048)!==e)break;case 6:fs(i,e,Mn,!ds);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(B(329))}if((e&62914560)===e&&(r=Up+300-Un(),10<r)){if(fs(i,e,Mn,!ds),xp(i,0,!0)!==0)break e;gr=e,i.timeoutHandle=ON(bS.bind(null,i,n,wn,Dm,hv,e,Mn,La,Rl,ds,s,"Throttled",-0,0),r);break e}bS(i,n,wn,Dm,hv,e,Mn,La,Rl,ds,s,null,-0,0)}}break}while(!0);Zi(t)}function bS(t,e,n,i,r,s,a,o,l,c,h,d,f,p){if(t.timeoutHandle=-1,d=e.subtreeFlags,d&8192||(d&16785408)===16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ur},lN(e,s,d);var w=(s&62914560)===s?Up-Un():(s&4194048)===s?dN-Un():0;if(w=Q5(d,w),w!==null){gr=s,t.cancelPendingCommit=w(TS.bind(null,t,e,s,n,i,r,a,o,l,h,d,null,f,p)),fs(t,s,a,!c);return}}TS(t,e,s,n,i,r,a,o,l)}function u5(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Gn(s(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fs(t,e,n,i){e&=~Rb,e&=~La,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var s=31-zn(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&vC(t,n,e)}function jp(){return Ee&6?!0:(ld(0),!1)}function Cb(){if(pe!==null){if(xe===0)var t=pe.return;else t=pe,hr=fo=null,mb(t),dl=null,gh=0,t=pe;for(;t!==null;)QP(t.alternate,t),t=t.return;pe=null}}function Pl(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,P5(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),gr=0,Cb(),Oe=t,pe=n=mr(t.current,null),ye=e,xe=0,Nn=null,ds=!1,uc=td(t,e),xb=!1,Rl=Mn=Rb=La=Os=ot=0,wn=ju=null,hv=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-zn(i),s=1<<r;e|=t[r],i&=~s}return Ir=e,Np(),n}function gN(t,e){le=null,se.H=_h,e===cc||e===kp?(e=JA(),xe=3):e===ob?(e=JA(),xe=4):xe=e===Eb?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Nn=e,pe===null&&(ot=1,Rm(t,ii(e,t.current)))}function yN(){var t=$n.current;return t===null?!0:(ye&4194048)===ye?oi===null:(ye&62914560)===ye||ye&536870912?t===oi:!1}function _N(){var t=se.H;return se.H=_h,t===null?_h:t}function vN(){var t=se.A;return se.A=l5,t}function km(){ot=4,ds||(ye&4194048)!==ye&&$n.current!==null||(uc=!0),!(Os&134217727)&&!(La&134217727)||Oe===null||fs(Oe,ye,Mn,!1)}function Ly(t,e,n){var i=Ee;Ee|=2;var r=_N(),s=vN();(Oe!==t||ye!==e)&&(Dm=null,Pl(t,e)),e=!1;var a=ot;e:do try{if(xe!==0&&pe!==null){var o=pe,l=Nn;switch(xe){case 8:Cb(),a=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(e=!0);var c=xe;if(xe=0,Nn=null,tl(t,o,l,c),n&&uc){a=0;break e}break;default:c=xe,xe=0,Nn=null,tl(t,o,l,c)}}h5(),a=ot;break}catch(h){gN(t,h)}while(!0);return e&&t.shellSuspendCounter++,hr=fo=null,Ee=i,se.H=r,se.A=s,pe===null&&(Oe=null,ye=0,Np()),a}function h5(){for(;pe!==null;)bN(pe)}function d5(t,e){var n=Ee;Ee|=2;var i=_N(),r=vN();Oe!==t||ye!==e?(Dm=null,Nm=Un()+500,Pl(t,e)):uc=td(t,e);e:do try{if(xe!==0&&pe!==null){e=pe;var s=Nn;t:switch(xe){case 1:xe=0,Nn=null,tl(t,e,s,1);break;case 2:case 9:if(XA(s)){xe=0,Nn=null,wS(e);break}e=function(){xe!==2&&xe!==9||Oe!==t||(xe=7),Zi(t)},s.then(e,e);break e;case 3:xe=7;break e;case 4:xe=5;break e;case 7:XA(s)?(xe=0,Nn=null,wS(e)):(xe=0,Nn=null,tl(t,e,s,7));break;case 5:var a=null;switch(pe.tag){case 26:a=pe.memoizedState;case 5:case 27:var o=pe;if(a?zN(a):o.stateNode.complete){xe=0,Nn=null;var l=o.sibling;if(l!==null)pe=l;else{var c=o.return;c!==null?(pe=c,zp(c)):pe=null}break t}}xe=0,Nn=null,tl(t,e,s,5);break;case 6:xe=0,Nn=null,tl(t,e,s,6);break;case 8:Cb(),ot=6;break e;default:throw Error(B(462))}}f5();break}catch(h){gN(t,h)}while(!0);return hr=fo=null,se.H=i,se.A=r,Ee=n,pe!==null?0:(Oe=null,ye=0,Np(),ot)}function f5(){for(;pe!==null&&!M4();)bN(pe)}function bN(t){var e=KP(t.alternate,t,Ir);t.memoizedProps=t.pendingProps,e===null?zp(t):pe=e}function wS(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=mS(n,e,e.pendingProps,e.type,void 0,ye);break;case 11:e=mS(n,e,e.pendingProps,e.type.render,e.ref,ye);break;case 5:mb(e);default:QP(n,e),e=pe=QC(e,Ir),e=KP(n,e,Ir)}t.memoizedProps=t.pendingProps,e===null?zp(t):pe=e}function tl(t,e,n,i){hr=fo=null,mb(e),dl=null,gh=0;var r=e.return;try{if(t5(t,r,e,n,ye)){ot=1,Rm(t,ii(n,t.current)),pe=null;return}}catch(s){if(r!==null)throw pe=r,s;ot=1,Rm(t,ii(n,t.current)),pe=null;return}e.flags&32768?(be||i===1?t=!0:uc||ye&536870912?t=!1:(ds=t=!0,(i===2||i===9||i===3||i===6)&&(i=$n.current,i!==null&&i.tag===13&&(i.flags|=16384))),wN(e,t)):zp(e)}function zp(t){var e=t;do{if(e.flags&32768){wN(e,ds);return}t=e.return;var n=r5(e.alternate,e,Ir);if(n!==null){pe=n;return}if(e=e.sibling,e!==null){pe=e;return}pe=e=t}while(e!==null);ot===0&&(ot=5)}function wN(t,e){do{var n=s5(t.alternate,t);if(n!==null){n.flags&=32767,pe=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){pe=t;return}pe=t=n}while(t!==null);ot=6,pe=null}function TS(t,e,n,i,r,s,a,o,l){t.cancelPendingCommit=null;do Bp();while(xt!==0);if(Ee&6)throw Error(B(327));if(e!==null){if(e===t.current)throw Error(B(177));if(s=e.lanes|e.childLanes,s|=eb,$4(t,n,s,a,o,l),t===Oe&&(pe=Oe=null,ye=0),Cl=e,Es=t,gr=n,dv=s,fv=r,fN=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,y5(ym,function(){return IN(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=se.T,se.T=null,r=Ae.p,Ae.p=2,a=Ee,Ee|=4;try{a5(t,e,n)}finally{Ee=a,Ae.p=r,se.T=i}}xt=1,TN(),EN(),AN()}}function TN(){if(xt===1){xt=0;var t=Es,e=Cl,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=se.T,se.T=null;var i=Ae.p;Ae.p=2;var r=Ee;Ee|=4;try{sN(e,t);var s=_v,a=zC(t.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&jC(o.ownerDocument.documentElement,o)){if(l!==null&&Z0(o)){var c=l.start,h=l.end;if(h===void 0&&(h=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(h,o.value.length);else{var d=o.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),w=o.textContent.length,E=Math.min(l.start,w),A=l.end===void 0?E:Math.min(l.end,w);!p.extend&&E>A&&(a=A,A=E,E=a);var v=HA(o,E),_=HA(o,A);if(v&&_&&(p.rangeCount!==1||p.anchorNode!==v.node||p.anchorOffset!==v.offset||p.focusNode!==_.node||p.focusOffset!==_.offset)){var b=d.createRange();b.setStart(v.node,v.offset),p.removeAllRanges(),E>A?(p.addRange(b),p.extend(_.node,_.offset)):(b.setEnd(_.node,_.offset),p.addRange(b))}}}}for(d=[],p=o;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var I=d[o];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}Bm=!!yv,_v=yv=null}finally{Ee=r,Ae.p=i,se.T=n}}t.current=e,xt=2}}function EN(){if(xt===2){xt=0;var t=Es,e=Cl,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=se.T,se.T=null;var i=Ae.p;Ae.p=2;var r=Ee;Ee|=4;try{eN(t,e.alternate,e)}finally{Ee=r,Ae.p=i,se.T=n}}xt=3}}function AN(){if(xt===4||xt===3){xt=0,L4();var t=Es,e=Cl,n=gr,i=fN;e.subtreeFlags&10256||e.flags&10256?xt=5:(xt=0,Cl=Es=null,SN(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(Ts=null),$0(n),e=e.stateNode,jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(ed,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=se.T,r=Ae.p,Ae.p=2,se.T=null;try{for(var s=t.onRecoverableError,a=0;a<i.length;a++){var o=i[a];s(o.value,{componentStack:o.stack})}}finally{se.T=e,Ae.p=r}}gr&3&&Bp(),Zi(t),r=t.pendingLanes,n&261930&&r&42?t===mv?zu++:(zu=0,mv=t):zu=0,ld(0)}}function SN(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,sd(e)))}function Bp(){return TN(),EN(),AN(),IN()}function IN(){if(xt!==5)return!1;var t=Es,e=dv;dv=0;var n=$0(gr),i=se.T,r=Ae.p;try{Ae.p=32>n?32:n,se.T=null,n=fv,fv=null;var s=Es,a=gr;if(xt=0,Cl=Es=null,gr=0,Ee&6)throw Error(B(331));var o=Ee;if(Ee|=4,uN(s.current),oN(s,s.current,a,n),Ee=o,ld(0,!1),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(ed,s)}catch{}return!0}finally{Ae.p=r,se.T=i,SN(t,e)}}function ES(t,e,n){e=ii(n,e),e=ov(t.stateNode,e,2),t=ws(t,e,2),t!==null&&(nd(t,2),Zi(t))}function Re(t,e,n){if(t.tag===3)ES(t,t,n);else for(;e!==null;){if(e.tag===3){ES(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ts===null||!Ts.has(i))){t=ii(n,t),n=BP(2),i=ws(e,n,2),i!==null&&(FP(n,i,e,t),nd(i,2),Zi(i));break}}e=e.return}}function Uy(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new c5;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(xb=!0,r.add(n),t=m5.bind(null,t,e,n),e.then(t,t))}function m5(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Oe===t&&(ye&n)===n&&(ot===4||ot===3&&(ye&62914560)===ye&&300>Un()-Up?!(Ee&2)&&Pl(t,0):Rb|=n,Rl===ye&&(Rl=0)),Zi(t)}function xN(t,e){e===0&&(e=_C()),t=ho(t,e),t!==null&&(nd(t,e),Zi(t))}function p5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xN(t,n)}function g5(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(B(314))}i!==null&&i.delete(e),xN(t,n)}function y5(t,e){return H0(t,e)}var Vm=null,Uo=null,pv=!1,Om=!1,jy=!1,ms=0;function Zi(t){t!==Uo&&t.next===null&&(Uo===null?Vm=Uo=t:Uo=Uo.next=t),Om=!0,pv||(pv=!0,v5())}function ld(t,e){if(!jy&&Om){jy=!0;do for(var n=!1,i=Vm;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,o=i.pingedLanes;s=(1<<31-zn(42|t)+1)-1,s&=r&~(a&~o),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,AS(i,s))}else s=ye,s=xp(i,i===Oe?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||td(i,s)||(n=!0,AS(i,s));i=i.next}while(n);jy=!1}}function _5(){RN()}function RN(){Om=pv=!1;var t=0;ms!==0&&C5()&&(t=ms);for(var e=Un(),n=null,i=Vm;i!==null;){var r=i.next,s=CN(i,e);s===0?(i.next=null,n===null?Vm=r:n.next=r,r===null&&(Uo=n)):(n=i,(t!==0||s&3)&&(Om=!0)),i=r}xt!==0&&xt!==5||ld(t),ms!==0&&(ms=0)}function CN(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var a=31-zn(s),o=1<<a,l=r[a];l===-1?(!(o&n)||o&i)&&(r[a]=G4(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}if(e=Oe,n=ye,n=xp(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(xe===2||xe===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&fy(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||td(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&fy(i),$0(n)){case 2:case 8:n=gC;break;case 32:n=ym;break;case 268435456:n=yC;break;default:n=ym}return i=PN.bind(null,t),n=H0(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&fy(i),t.callbackPriority=2,t.callbackNode=null,2}function PN(t,e){if(xt!==0&&xt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Bp()&&t.callbackNode!==n)return null;var i=ye;return i=xp(t,t===Oe?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(pN(t,i,e),CN(t,Un()),t.callbackNode!=null&&t.callbackNode===n?PN.bind(null,t):null)}function AS(t,e){if(Bp())return null;pN(t,e,!0)}function v5(){N5(function(){Ee&6?H0(pC,_5):RN()})}function Pb(){if(ms===0){var t=Sl;t===0&&(t=ef,ef<<=1,!(ef&261888)&&(ef=256)),ms=t}return ms}function SS(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Vf(""+t)}function IS(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function b5(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var s=SS((r[xn]||null).action),a=i.submitter;a&&(e=(e=a[xn]||null)?SS(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var o=new Rp("action","action",null,i,r);t.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(ms!==0){var l=a?IS(r,a):new FormData(r);sv(n,{pending:!0,data:l,method:r.method,action:s},null,l)}}else typeof s=="function"&&(o.preventDefault(),l=a?IS(r,a):new FormData(r),sv(n,{pending:!0,data:l,method:r.method,action:s},s,l))},currentTarget:r}]})}}for(var zy=0;zy<K_.length;zy++){var By=K_[zy],w5=By.toLowerCase(),T5=By[0].toUpperCase()+By.slice(1);Ei(w5,"on"+T5)}Ei(FC,"onAnimationEnd");Ei(qC,"onAnimationIteration");Ei(HC,"onAnimationStart");Ei("dblclick","onDoubleClick");Ei("focusin","onFocus");Ei("focusout","onBlur");Ei(U6,"onTransitionRun");Ei(j6,"onTransitionStart");Ei(z6,"onTransitionCancel");Ei(GC,"onTransitionEnd");El("onMouseEnter",["mouseout","mouseover"]);El("onMouseLeave",["mouseout","mouseover"]);El("onPointerEnter",["pointerout","pointerover"]);El("onPointerLeave",["pointerout","pointerover"]);lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lo("onBeforeInput",["compositionend","keypress","textInput","paste"]);lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vh));function NN(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(h){vm(h)}r.currentTarget=null,s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(h){vm(h)}r.currentTarget=null,s=l}}}}function fe(t,e){var n=e[j_];n===void 0&&(n=e[j_]=new Set);var i=t+"__bubble";n.has(i)||(DN(e,t,2,!1),n.add(i))}function Fy(t,e,n){var i=0;e&&(i|=4),DN(n,t,i,e)}var hf="_reactListening"+Math.random().toString(36).slice(2);function Nb(t){if(!t[hf]){t[hf]=!0,EC.forEach(function(n){n!=="selectionchange"&&(E5.has(n)||Fy(n,!1,t),Fy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hf]||(e[hf]=!0,Fy("selectionchange",!1,e))}}function DN(t,e,n,i){switch(GN(e)){case 2:var r=X5;break;case 8:r=J5;break;default:r=Ob}n=r.bind(null,e,n,t),r=void 0,!H_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function qy(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;o!==null;){if(a=$o(o),a===null)return;if(l=a.tag,l===5||l===6||l===26||l===27){i=s=a;continue e}o=o.parentNode}}i=i.return}NC(function(){var c=s,h=W0(n),d=[];e:{var f=$C.get(t);if(f!==void 0){var p=Rp,w=t;switch(t){case"keypress":if(Mf(n)===0)break e;case"keydown":case"keyup":p=g6;break;case"focusin":w="focus",p=_y;break;case"focusout":w="blur",p=_y;break;case"beforeblur":case"afterblur":p=_y;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=VA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=r6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=v6;break;case FC:case qC:case HC:p=o6;break;case GC:p=w6;break;case"scroll":case"scrollend":p=n6;break;case"wheel":p=E6;break;case"copy":case"cut":case"paste":p=c6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=MA;break;case"toggle":case"beforetoggle":p=S6}var E=(e&4)!==0,A=!E&&(t==="scroll"||t==="scrollend"),v=E?f!==null?f+"Capture":null:f;E=[];for(var _=c,b;_!==null;){var I=_;if(b=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||b===null||v===null||(I=hh(_,v),I!=null&&E.push(bh(_,I,b))),A)break;_=_.return}0<E.length&&(f=new p(f,w,null,n,h),d.push({event:f,listeners:E}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==q_&&(w=n.relatedTarget||n.fromElement)&&($o(w)||w[ac]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(w=n.relatedTarget||n.toElement,p=c,w=w?$o(w):null,w!==null&&(A=Zh(w),E=w.tag,w!==A||E!==5&&E!==27&&E!==6)&&(w=null)):(p=null,w=c),p!==w)){if(E=VA,I="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(E=MA,I="onPointerLeave",v="onPointerEnter",_="pointer"),A=p==null?f:mu(p),b=w==null?f:mu(w),f=new E(I,_+"leave",p,n,h),f.target=A,f.relatedTarget=b,I=null,$o(h)===c&&(E=new E(v,_+"enter",w,n,h),E.target=b,E.relatedTarget=A,I=E),A=I,p&&w)t:{for(E=A5,v=p,_=w,b=0,I=v;I;I=E(I))b++;I=0;for(var D=_;D;D=E(D))I++;for(;0<b-I;)v=E(v),b--;for(;0<I-b;)_=E(_),I--;for(;b--;){if(v===_||_!==null&&v===_.alternate){E=v;break t}v=E(v),_=E(_)}E=null}else E=null;p!==null&&xS(d,f,p,E,!1),w!==null&&A!==null&&xS(d,A,w,E,!0)}}e:{if(f=c?mu(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var V=zA;else if(jA(f))if(LC)V=O6;else{V=k6;var S=D6}else p=f.nodeName,!p||p.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?c&&Q0(c.elementType)&&(V=zA):V=V6;if(V&&(V=V(t,c))){MC(d,V,n,h);break e}S&&S(t,f,c),t==="focusout"&&c&&f.type==="number"&&c.memoizedProps.value!=null&&F_(f,"number",f.value)}switch(S=c?mu(c):window,t){case"focusin":(jA(S)||S.contentEditable==="true")&&(Wo=S,G_=c,Nu=null);break;case"focusout":Nu=G_=Wo=null;break;case"mousedown":$_=!0;break;case"contextmenu":case"mouseup":case"dragend":$_=!1,GA(d,n,h);break;case"selectionchange":if(L6)break;case"keydown":case"keyup":GA(d,n,h)}var T;if(J0)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Qo?VC(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(kC&&n.locale!=="ko"&&(Qo||C!=="onCompositionStart"?C==="onCompositionEnd"&&Qo&&(T=DC()):(hs=h,Y0="value"in hs?hs.value:hs.textContent,Qo=!0)),S=Mm(c,C),0<S.length&&(C=new OA(C,t,null,n,h),d.push({event:C,listeners:S}),T?C.data=T:(T=OC(n),T!==null&&(C.data=T)))),(T=x6?R6(t,n):C6(t,n))&&(C=Mm(c,"onBeforeInput"),0<C.length&&(S=new OA("onBeforeInput","beforeinput",null,n,h),d.push({event:S,listeners:C}),S.data=T)),b5(d,t,c,n,h)}NN(d,e)})}function bh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mm(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=hh(t,n),r!=null&&i.unshift(bh(t,r,s)),r=hh(t,e),r!=null&&i.push(bh(t,r,s))),t.tag===3)return i;t=t.return}return[]}function A5(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function xS(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===i)break;o!==5&&o!==26&&o!==27||c===null||(l=c,r?(c=hh(n,s),c!=null&&a.unshift(bh(n,c,l))):r||(c=hh(n,s),c!=null&&a.push(bh(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var S5=/\r\n?/g,I5=/\u0000|\uFFFD/g;function RS(t){return(typeof t=="string"?t:""+t).replace(S5,`
`).replace(I5,"")}function kN(t,e){return e=RS(e),RS(t)===e}function Ne(t,e,n,i,r,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Al(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Al(t,""+i);break;case"className":rf(t,"class",i);break;case"tabIndex":rf(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":rf(t,n,i);break;case"style":PC(t,i,s);break;case"data":if(e!=="object"){rf(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Vf(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&Ne(t,e,"name",r.name,r,null),Ne(t,e,"formEncType",r.formEncType,r,null),Ne(t,e,"formMethod",r.formMethod,r,null),Ne(t,e,"formTarget",r.formTarget,r,null)):(Ne(t,e,"encType",r.encType,r,null),Ne(t,e,"method",r.method,r,null),Ne(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Vf(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=ur);break;case"onScroll":i!=null&&fe("scroll",t);break;case"onScrollEnd":i!=null&&fe("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(B(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(B(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Vf(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":fe("beforetoggle",t),fe("toggle",t),kf(t,"popover",i);break;case"xlinkActuate":er(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":er(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":er(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":er(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":er(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":er(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":er(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":er(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":er(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":kf(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=e6.get(n)||n,kf(t,n,i))}}function gv(t,e,n,i,r,s){switch(n){case"style":PC(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(B(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(B(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Al(t,i):(typeof i=="number"||typeof i=="bigint")&&Al(t,""+i);break;case"onScroll":i!=null&&fe("scroll",t);break;case"onScrollEnd":i!=null&&fe("scrollend",t);break;case"onClick":i!=null&&(t.onclick=ur);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!AC.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),s=t[xn]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):kf(t,n,i)}}}function $t(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fe("error",t),fe("load",t);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(B(137,e));default:Ne(t,e,s,a,n,null)}}r&&Ne(t,e,"srcSet",n.srcSet,n,null),i&&Ne(t,e,"src",n.src,n,null);return;case"input":fe("invalid",t);var o=s=a=r=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(h!=null)switch(i){case"name":r=h;break;case"type":a=h;break;case"checked":l=h;break;case"defaultChecked":c=h;break;case"value":s=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(B(137,e));break;default:Ne(t,e,i,h,n,null)}}xC(t,s,o,l,c,a,r,!1);return;case"select":fe("invalid",t),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],o!=null))switch(r){case"value":s=o;break;case"defaultValue":a=o;break;case"multiple":i=o;default:Ne(t,e,r,o,n,null)}e=s,n=a,t.multiple=!!i,e!=null?cl(t,!!i,e,!1):n!=null&&cl(t,!!i,n,!0);return;case"textarea":fe("invalid",t),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":i=o;break;case"defaultValue":r=o;break;case"children":s=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(B(91));break;default:Ne(t,e,a,o,n,null)}CC(t,i,r,s);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ne(t,e,l,i,n,null)}return;case"dialog":fe("beforetoggle",t),fe("toggle",t),fe("cancel",t),fe("close",t);break;case"iframe":case"object":fe("load",t);break;case"video":case"audio":for(i=0;i<vh.length;i++)fe(vh[i],t);break;case"image":fe("error",t),fe("load",t);break;case"details":fe("toggle",t);break;case"embed":case"source":case"link":fe("error",t),fe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(B(137,e));default:Ne(t,e,c,i,n,null)}return;default:if(Q0(e)){for(h in n)n.hasOwnProperty(h)&&(i=n[h],i!==void 0&&gv(t,e,h,i,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(i=n[o],i!=null&&Ne(t,e,o,i,n,null))}function x5(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,o=null,l=null,c=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&d!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":l=d;default:i.hasOwnProperty(p)||Ne(t,e,p,null,i,d)}}for(var f in i){var p=i[f];if(d=n[f],i.hasOwnProperty(f)&&(p!=null||d!=null))switch(f){case"type":s=p;break;case"name":r=p;break;case"checked":c=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":o=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(B(137,e));break;default:p!==d&&Ne(t,e,f,p,i,d)}}B_(t,a,o,l,c,h,s,r);return;case"select":p=a=o=f=null;for(s in n)if(l=n[s],n.hasOwnProperty(s)&&l!=null)switch(s){case"value":break;case"multiple":p=l;default:i.hasOwnProperty(s)||Ne(t,e,s,null,i,l)}for(r in i)if(s=i[r],l=n[r],i.hasOwnProperty(r)&&(s!=null||l!=null))switch(r){case"value":f=s;break;case"defaultValue":o=s;break;case"multiple":a=s;default:s!==l&&Ne(t,e,r,s,i,l)}e=o,n=a,i=p,f!=null?cl(t,!!n,f,!1):!!i!=!!n&&(e!=null?cl(t,!!n,e,!0):cl(t,!!n,n?[]:"",!1));return;case"textarea":p=f=null;for(o in n)if(r=n[o],n.hasOwnProperty(o)&&r!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:Ne(t,e,o,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":f=r;break;case"defaultValue":p=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(B(91));break;default:r!==s&&Ne(t,e,a,r,i,s)}RC(t,f,p);return;case"option":for(var w in n)if(f=n[w],n.hasOwnProperty(w)&&f!=null&&!i.hasOwnProperty(w))switch(w){case"selected":t.selected=!1;break;default:Ne(t,e,w,null,i,f)}for(l in i)if(f=i[l],p=n[l],i.hasOwnProperty(l)&&f!==p&&(f!=null||p!=null))switch(l){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Ne(t,e,l,f,i,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var E in n)f=n[E],n.hasOwnProperty(E)&&f!=null&&!i.hasOwnProperty(E)&&Ne(t,e,E,null,i,f);for(c in i)if(f=i[c],p=n[c],i.hasOwnProperty(c)&&f!==p&&(f!=null||p!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(B(137,e));break;default:Ne(t,e,c,f,i,p)}return;default:if(Q0(e)){for(var A in n)f=n[A],n.hasOwnProperty(A)&&f!==void 0&&!i.hasOwnProperty(A)&&gv(t,e,A,void 0,i,f);for(h in i)f=i[h],p=n[h],!i.hasOwnProperty(h)||f===p||f===void 0&&p===void 0||gv(t,e,h,f,i,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&f!=null&&!i.hasOwnProperty(v)&&Ne(t,e,v,null,i,f);for(d in i)f=i[d],p=n[d],!i.hasOwnProperty(d)||f===p||f==null&&p==null||Ne(t,e,d,f,i,p)}function CS(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function R5(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],s=r.transferSize,a=r.initiatorType,o=r.duration;if(s&&o&&CS(a)){for(a=0,o=r.responseEnd,i+=1;i<n.length;i++){var l=n[i],c=l.startTime;if(c>o)break;var h=l.transferSize,d=l.initiatorType;h&&CS(d)&&(l=l.responseEnd,a+=h*(l<o?1:(o-c)/(l-c)))}if(--i,e+=8*(s+a)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var yv=null,_v=null;function Lm(t){return t.nodeType===9?t:t.ownerDocument}function PS(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function VN(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function vv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hy=null;function C5(){var t=window.event;return t&&t.type==="popstate"?t===Hy?!1:(Hy=t,!0):(Hy=null,!1)}var ON=typeof setTimeout=="function"?setTimeout:void 0,P5=typeof clearTimeout=="function"?clearTimeout:void 0,NS=typeof Promise=="function"?Promise:void 0,N5=typeof queueMicrotask=="function"?queueMicrotask:typeof NS<"u"?function(t){return NS.resolve(null).then(t).catch(D5)}:ON;function D5(t){setTimeout(function(){throw t})}function Ys(t){return t==="head"}function DS(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(r),Dl(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Bu(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Bu(n);for(var s=n.firstChild;s;){var a=s.nextSibling,o=s.nodeName;s[id]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=a}}else n==="body"&&Bu(t.ownerDocument.body);n=r}while(n);Dl(e)}function kS(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function bv(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":bv(n),K0(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function k5(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[id])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=li(t.nextSibling),t===null)break}return null}function V5(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=li(t.nextSibling),t===null))return null;return t}function MN(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=li(t.nextSibling),t===null))return null;return t}function wv(t){return t.data==="$?"||t.data==="$~"}function Tv(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function O5(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function li(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Ev=null;function VS(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return li(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function OS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function LN(t,e,n){switch(e=Lm(n),t){case"html":if(t=e.documentElement,!t)throw Error(B(452));return t;case"head":if(t=e.head,!t)throw Error(B(453));return t;case"body":if(t=e.body,!t)throw Error(B(454));return t;default:throw Error(B(451))}}function Bu(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);K0(t)}var ui=new Map,MS=new Set;function Um(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Or=Ae.d;Ae.d={f:M5,r:L5,D:U5,C:j5,L:z5,m:B5,X:q5,S:F5,M:H5};function M5(){var t=Or.f(),e=jp();return t||e}function L5(t){var e=oc(t);e!==null&&e.tag===5&&e.type==="form"?PP(e):Or.r(t)}var hc=typeof document>"u"?null:document;function UN(t,e,n){var i=hc;if(i&&typeof e=="string"&&e){var r=ni(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),MS.has(r)||(MS.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),$t(e,"link",t),Mt(e),i.head.appendChild(e)))}}function U5(t){Or.D(t),UN("dns-prefetch",t,null)}function j5(t,e){Or.C(t,e),UN("preconnect",t,e)}function z5(t,e,n){Or.L(t,e,n);var i=hc;if(i&&t&&e){var r='link[rel="preload"][as="'+ni(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+ni(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+ni(n.imageSizes)+'"]')):r+='[href="'+ni(t)+'"]';var s=r;switch(e){case"style":s=Nl(t);break;case"script":s=dc(t)}ui.has(s)||(t=$e({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),ui.set(s,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(cd(s))||e==="script"&&i.querySelector(ud(s))||(e=i.createElement("link"),$t(e,"link",t),Mt(e),i.head.appendChild(e)))}}function B5(t,e){Or.m(t,e);var n=hc;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+ni(i)+'"][href="'+ni(t)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=dc(t)}if(!ui.has(s)&&(t=$e({rel:"modulepreload",href:t},e),ui.set(s,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ud(s)))return}i=n.createElement("link"),$t(i,"link",t),Mt(i),n.head.appendChild(i)}}}function F5(t,e,n){Or.S(t,e,n);var i=hc;if(i&&t){var r=ll(i).hoistableStyles,s=Nl(t);e=e||"default";var a=r.get(s);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(cd(s)))o.loading=5;else{t=$e({rel:"stylesheet",href:t,"data-precedence":e},n),(n=ui.get(s))&&Db(t,n);var l=a=i.createElement("link");Mt(l),$t(l,"link",t),l._p=new Promise(function(c,h){l.onload=c,l.onerror=h}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Hf(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(s,a)}}}function q5(t,e){Or.X(t,e);var n=hc;if(n&&t){var i=ll(n).hoistableScripts,r=dc(t),s=i.get(r);s||(s=n.querySelector(ud(r)),s||(t=$e({src:t,async:!0},e),(e=ui.get(r))&&kb(t,e),s=n.createElement("script"),Mt(s),$t(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function H5(t,e){Or.M(t,e);var n=hc;if(n&&t){var i=ll(n).hoistableScripts,r=dc(t),s=i.get(r);s||(s=n.querySelector(ud(r)),s||(t=$e({src:t,async:!0,type:"module"},e),(e=ui.get(r))&&kb(t,e),s=n.createElement("script"),Mt(s),$t(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function LS(t,e,n,i){var r=(r=_s.current)?Um(r):null;if(!r)throw Error(B(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Nl(n.href),n=ll(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Nl(n.href);var s=ll(r).hoistableStyles,a=s.get(t);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,a),(s=r.querySelector(cd(t)))&&!s._p&&(a.instance=s,a.state.loading=5),ui.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ui.set(t,n),s||G5(r,t,n,a.state))),e&&i===null)throw Error(B(528,""));return a}if(e&&i!==null)throw Error(B(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=dc(n),n=ll(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(B(444,t))}}function Nl(t){return'href="'+ni(t)+'"'}function cd(t){return'link[rel="stylesheet"]['+t+"]"}function jN(t){return $e({},t,{"data-precedence":t.precedence,precedence:null})}function G5(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),$t(e,"link",n),Mt(e),t.head.appendChild(e))}function dc(t){return'[src="'+ni(t)+'"]'}function ud(t){return"script[async]"+t}function US(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+ni(n.href)+'"]');if(i)return e.instance=i,Mt(i),i;var r=$e({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),Mt(i),$t(i,"style",r),Hf(i,n.precedence,t),e.instance=i;case"stylesheet":r=Nl(n.href);var s=t.querySelector(cd(r));if(s)return e.state.loading|=4,e.instance=s,Mt(s),s;i=jN(n),(r=ui.get(r))&&Db(i,r),s=(t.ownerDocument||t).createElement("link"),Mt(s);var a=s;return a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),$t(s,"link",i),e.state.loading|=4,Hf(s,n.precedence,t),e.instance=s;case"script":return s=dc(n.src),(r=t.querySelector(ud(s)))?(e.instance=r,Mt(r),r):(i=n,(r=ui.get(s))&&(i=$e({},n),kb(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),Mt(r),$t(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(B(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Hf(i,n.precedence,t));return e.instance}function Hf(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===e)s=o;else if(s!==r)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Db(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function kb(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Gf=null;function jS(t,e,n){if(Gf===null){var i=new Map,r=Gf=new Map;r.set(n,i)}else r=Gf,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var s=n[r];if(!(s[id]||s[Ft]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=t+a;var o=i.get(a);o?o.push(s):i.set(a,[s])}}return i}function zS(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function $5(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function zN(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function K5(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=Nl(i.href),s=e.querySelector(cd(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=jm.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=s,Mt(s);return}s=e.ownerDocument||e,i=jN(i),(r=ui.get(r))&&Db(i,r),s=s.createElement("link"),Mt(s);var a=s;a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),$t(s,"link",i),n.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=jm.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Gy=0;function Q5(t,e){return t.stylesheets&&t.count===0&&$f(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&$f(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&Gy===0&&(Gy=62500*R5());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&$f(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>Gy?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function jm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$f(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var zm=null;function $f(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,zm=new Map,e.forEach(W5,t),zm=null,jm.call(t))}function W5(t,e){if(!(e.state.loading&4)){var n=zm.get(t);if(n)var i=n.get(null);else{n=new Map,zm.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=e.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=jm.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var wh={$$typeof:cr,Provider:null,Consumer:null,_currentValue:ka,_currentValue2:ka,_threadCount:0};function Y5(t,e,n,i,r,s,a,o,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=my(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=my(0),this.hiddenUpdates=my(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function BN(t,e,n,i,r,s,a,o,l,c,h,d){return t=new Y5(t,e,n,a,l,c,h,d,o),e=1,s===!0&&(e|=24),s=On(3,null,null,e),t.current=s,s.stateNode=t,e=sb(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},lb(s),t}function FN(t){return t?(t=Jo,t):Jo}function qN(t,e,n,i,r,s){r=FN(r),i.context===null?i.context=r:i.pendingContext=r,i=bs(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=ws(t,i,e),n!==null&&(In(n,t,e),ku(n,t,e))}function BS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vb(t,e){BS(t,e),(t=t.alternate)&&BS(t,e)}function HN(t){if(t.tag===13||t.tag===31){var e=ho(t,67108864);e!==null&&In(e,t,67108864),Vb(t,67108864)}}function FS(t){if(t.tag===13||t.tag===31){var e=Bn();e=G0(e);var n=ho(t,e);n!==null&&In(n,t,e),Vb(t,e)}}var Bm=!0;function X5(t,e,n,i){var r=se.T;se.T=null;var s=Ae.p;try{Ae.p=2,Ob(t,e,n,i)}finally{Ae.p=s,se.T=r}}function J5(t,e,n,i){var r=se.T;se.T=null;var s=Ae.p;try{Ae.p=8,Ob(t,e,n,i)}finally{Ae.p=s,se.T=r}}function Ob(t,e,n,i){if(Bm){var r=Av(i);if(r===null)qy(t,e,i,Fm,n),qS(t,i);else if(eU(r,t,e,n,i))i.stopPropagation();else if(qS(t,i),e&4&&-1<Z5.indexOf(t)){for(;r!==null;){var s=oc(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=pa(s.pendingLanes);if(a!==0){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-zn(a);o.entanglements[1]|=l,a&=~l}Zi(s),!(Ee&6)&&(Nm=Un()+500,ld(0))}}break;case 31:case 13:o=ho(s,2),o!==null&&In(o,s,2),jp(),Vb(s,2)}if(s=Av(i),s===null&&qy(t,e,i,Fm,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else qy(t,e,i,null,n)}}function Av(t){return t=W0(t),Mb(t)}var Fm=null;function Mb(t){if(Fm=null,t=$o(t),t!==null){var e=Zh(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=uC(e),t!==null)return t;t=null}else if(n===31){if(t=hC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Fm=t,null}function GN(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(U4()){case pC:return 2;case gC:return 8;case ym:case j4:return 32;case yC:return 268435456;default:return 32}default:return 32}}var Sv=!1,As=null,Ss=null,Is=null,Th=new Map,Eh=new Map,ls=[],Z5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qS(t,e){switch(t){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":Th.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eh.delete(e.pointerId)}}function Zc(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=oc(e),e!==null&&HN(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function eU(t,e,n,i,r){switch(e){case"focusin":return As=Zc(As,t,e,n,i,r),!0;case"dragenter":return Ss=Zc(Ss,t,e,n,i,r),!0;case"mouseover":return Is=Zc(Is,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Th.set(s,Zc(Th.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Eh.set(s,Zc(Eh.get(s)||null,t,e,n,i,r)),!0}return!1}function $N(t){var e=$o(t.target);if(e!==null){var n=Zh(e);if(n!==null){if(e=n.tag,e===13){if(e=uC(n),e!==null){t.blockedOn=e,xA(t.priority,function(){FS(n)});return}}else if(e===31){if(e=hC(n),e!==null){t.blockedOn=e,xA(t.priority,function(){FS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Av(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);q_=i,n.target.dispatchEvent(i),q_=null}else return e=oc(n),e!==null&&HN(e),t.blockedOn=n,!1;e.shift()}return!0}function HS(t,e,n){Kf(t)&&n.delete(e)}function tU(){Sv=!1,As!==null&&Kf(As)&&(As=null),Ss!==null&&Kf(Ss)&&(Ss=null),Is!==null&&Kf(Is)&&(Is=null),Th.forEach(HS),Eh.forEach(HS)}function df(t,e){t.blockedOn===e&&(t.blockedOn=null,Sv||(Sv=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,tU)))}var ff=null;function GS(t){ff!==t&&(ff=t,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,function(){ff===t&&(ff=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(Mb(i||n)===null)continue;break}var s=oc(n);s!==null&&(t.splice(e,3),e-=3,sv(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Dl(t){function e(l){return df(l,t)}As!==null&&df(As,t),Ss!==null&&df(Ss,t),Is!==null&&df(Is,t),Th.forEach(e),Eh.forEach(e);for(var n=0;n<ls.length;n++){var i=ls[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<ls.length&&(n=ls[0],n.blockedOn===null);)$N(n),n.blockedOn===null&&ls.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[xn]||null;if(typeof s=="function")a||GS(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[xn]||null)o=a.formAction;else if(Mb(r)!==null)continue}else o=a.action;typeof o=="function"?n[i+1]=o:(n.splice(i,3),i-=3),GS(n)}}}function KN(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(a){return r=a})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function Lb(t){this._internalRoot=t}Fp.prototype.render=Lb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));var n=e.current,i=Bn();qN(n,i,t,e,null,null)};Fp.prototype.unmount=Lb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;qN(t.current,2,null,t,null,null),jp(),e[ac]=null}};function Fp(t){this._internalRoot=t}Fp.prototype.unstable_scheduleHydration=function(t){if(t){var e=TC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ls.length&&e!==0&&e<ls[n].priority;n++);ls.splice(n,0,t),n===0&&$N(t)}};var $S=lC.version;if($S!=="19.2.0")throw Error(B(527,$S,"19.2.0"));Ae.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=N4(e),t=t!==null?dC(t):null,t=t===null?null:t.stateNode,t};var nU={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mf.isDisabled&&mf.supportsFiber)try{ed=mf.inject(nU),jn=mf}catch{}}Sp.createRoot=function(t,e){if(!cC(t))throw Error(B(299));var n=!1,i="",r=UP,s=jP,a=zP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=BN(t,1,!1,null,null,n,i,null,r,s,a,KN),t[ac]=e.current,Nb(t),new Lb(e)};Sp.hydrateRoot=function(t,e,n){if(!cC(t))throw Error(B(299));var i=!1,r="",s=UP,a=jP,o=zP,l=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(l=n.formState)),e=BN(t,1,!0,e,n??null,i,r,l,s,a,o,KN),e.context=FN(null),n=e.current,i=Bn(),i=G0(i),r=bs(i),r.callback=null,ws(n,r,i),n=i,e.current.lanes=n,nd(e,n),Zi(e),t[ac]=e.current,Nb(t),new Fp(e)};Sp.version="19.2.0";function QN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QN)}catch(t){console.error(t)}}QN(),tC.exports=Sp;var iU=tC.exports;const rU=GR(iU),sU="modulepreload",aU=function(t){return"/RushCoffee-Capstone/"+t},KS={},ke=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=aU(l),l in KS)return;KS[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":sU,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var QS="popstate";function oU(t={}){function e(r,s){let{pathname:a="/",search:o="",hash:l=""}=mo(r.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Iv("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){let a=r.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let l=r.location.href,c=l.indexOf("#");o=c===-1?l:l.slice(0,c)}return o+"#"+(typeof s=="string"?s:Ah(s))}function i(r,s){Rn(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return cU(e,n,i,t)}function Je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lU(){return Math.random().toString(36).substring(2,10)}function WS(t,e){return{usr:t.state,key:t.key,idx:e}}function Iv(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?mo(e):e,state:n,key:e&&e.key||i||lU()}}function Ah({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function mo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function cU(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o="POP",l=null,c=h();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function h(){return(a.state||{idx:null}).idx}function d(){o="POP";let A=h(),v=A==null?null:A-c;c=A,l&&l({action:o,location:E.location,delta:v})}function f(A,v){o="PUSH";let _=Iv(E.location,A,v);n&&n(_,A),c=h()+1;let b=WS(_,c),I=E.createHref(_);try{a.pushState(b,"",I)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(I)}s&&l&&l({action:o,location:E.location,delta:1})}function p(A,v){o="REPLACE";let _=Iv(E.location,A,v);n&&n(_,A),c=h();let b=WS(_,c),I=E.createHref(_);a.replaceState(b,"",I),s&&l&&l({action:o,location:E.location,delta:0})}function w(A){return uU(A)}let E={get action(){return o},get location(){return t(r,a)},listen(A){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(QS,d),l=A,()=>{r.removeEventListener(QS,d),l=null}},createHref(A){return e(r,A)},createURL:w,encodeLocation(A){let v=w(A);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(A){return a.go(A)}};return E}function uU(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Je(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Ah(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function WN(t,e,n="/"){return hU(t,e,n,!1)}function hU(t,e,n,i){let r=typeof e=="string"?mo(e):e,s=xr(r.pathname||"/",n);if(s==null)return null;let a=YN(t);dU(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=EU(s);o=wU(a[l],c,i)}return o}function YN(t,e=[],n=[],i="",r=!1){let s=(a,o,l=r,c)=>{let h={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(i)&&l)return;Je(h.relativePath.startsWith(i),`Absolute route path "${h.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(i.length)}let d=yr([i,h.relativePath]),f=n.concat(h);a.children&&a.children.length>0&&(Je(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),YN(a.children,e,f,d,l)),!(a.path==null&&!a.index)&&e.push({path:d,score:vU(d,a.index),routesMeta:f})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of XN(a.path))s(a,o,!0,c)}),e}function XN(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=XN(i.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),r&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function dU(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:bU(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var fU=/^:[\w-]+$/,mU=3,pU=2,gU=1,yU=10,_U=-2,YS=t=>t==="*";function vU(t,e){let n=t.split("/"),i=n.length;return n.some(YS)&&(i+=_U),e&&(i+=pU),n.filter(r=>!YS(r)).reduce((r,s)=>r+(fU.test(s)?mU:s===""?gU:yU),i)}function bU(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function wU(t,e,n=!1){let{routesMeta:i}=t,r={},s="/",a=[];for(let o=0;o<i.length;++o){let l=i[o],c=o===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=qm({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),f=l.route;if(!d&&c&&n&&!i[i.length-1].route.index&&(d=qm({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(r,d.params),a.push({params:r,pathname:yr([s,d.pathname]),pathnameBase:RU(yr([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=yr([s,d.pathnameBase]))}return a}function qm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=TU(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((c,{paramName:h,isOptional:d},f)=>{if(h==="*"){let w=o[f]||"";a=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const p=o[f];return d&&!p?c[h]=void 0:c[h]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function TU(t,e=!1,n=!0){Rn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(i.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function EU(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function xr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var AU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SU=t=>AU.test(t);function IU(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?mo(t):t,s;if(n)if(SU(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Rn(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?s=XS(n.substring(1),"/"):s=XS(n,e)}else s=e;return{pathname:s,search:CU(i),hash:PU(r)}}function XS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function $y(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xU(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ub(t){let e=xU(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function jb(t,e,n,i=!1){let r;typeof t=="string"?r=mo(t):(r={...t},Je(!r.pathname||!r.pathname.includes("?"),$y("?","pathname","search",r)),Je(!r.pathname||!r.pathname.includes("#"),$y("#","pathname","hash",r)),Je(!r.search||!r.search.includes("#"),$y("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=n;else{let d=e.length-1;if(!i&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}o=d>=0?e[d]:"/"}let l=IU(r,o),c=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}var yr=t=>t.join("/").replace(/\/\/+/g,"/"),RU=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),CU=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,PU=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function NU(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var JN=["POST","PUT","PATCH","DELETE"];new Set(JN);var DU=["GET",...JN];new Set(DU);var fc=R.createContext(null);fc.displayName="DataRouter";var qp=R.createContext(null);qp.displayName="DataRouterState";R.createContext(!1);var ZN=R.createContext({isTransitioning:!1});ZN.displayName="ViewTransition";var kU=R.createContext(new Map);kU.displayName="Fetchers";var VU=R.createContext(null);VU.displayName="Await";var Ai=R.createContext(null);Ai.displayName="Navigation";var hd=R.createContext(null);hd.displayName="Location";var Si=R.createContext({outlet:null,matches:[],isDataRoute:!1});Si.displayName="Route";var zb=R.createContext(null);zb.displayName="RouteError";function OU(t,{relative:e}={}){Je(mc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=R.useContext(Ai),{hash:r,pathname:s,search:a}=dd(t,{relative:e}),o=s;return n!=="/"&&(o=s==="/"?n:yr([n,s])),i.createHref({pathname:o,search:a,hash:r})}function mc(){return R.useContext(hd)!=null}function fi(){return Je(mc(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(hd).location}var e2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function t2(t){R.useContext(Ai).static||R.useLayoutEffect(t)}function pc(){let{isDataRoute:t}=R.useContext(Si);return t?YU():MU()}function MU(){Je(mc(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(fc),{basename:e,navigator:n}=R.useContext(Ai),{matches:i}=R.useContext(Si),{pathname:r}=fi(),s=JSON.stringify(Ub(i)),a=R.useRef(!1);return t2(()=>{a.current=!0}),R.useCallback((l,c={})=>{if(Rn(a.current,e2),!a.current)return;if(typeof l=="number"){n.go(l);return}let h=jb(l,JSON.parse(s),r,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:yr([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,s,r,t])}var LU=R.createContext(null);function UU(t){let e=R.useContext(Si).outlet;return R.useMemo(()=>e&&R.createElement(LU.Provider,{value:t},e),[e,t])}function dd(t,{relative:e}={}){let{matches:n}=R.useContext(Si),{pathname:i}=fi(),r=JSON.stringify(Ub(n));return R.useMemo(()=>jb(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function jU(t,e){return n2(t,e)}function n2(t,e,n,i,r){var _;Je(mc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=R.useContext(Ai),{matches:a}=R.useContext(Si),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",h=o?o.pathnameBase:"/",d=o&&o.route;{let b=d&&d.path||"";i2(c,!d||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let f=fi(),p;if(e){let b=typeof e=="string"?mo(e):e;Je(h==="/"||((_=b.pathname)==null?void 0:_.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${b.pathname}" was given in the \`location\` prop.`),p=b}else p=f;let w=p.pathname||"/",E=w;if(h!=="/"){let b=h.replace(/^\//,"").split("/");E="/"+w.replace(/^\//,"").split("/").slice(b.length).join("/")}let A=WN(t,{pathname:E});Rn(d||A!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Rn(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=HU(A&&A.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:yr([h,s.encodeLocation?s.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?h:yr([h,s.encodeLocation?s.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),a,n,i,r);return e&&v?R.createElement(hd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},v):v}function zU(){let t=WU(),e=NU(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:s},"ErrorBoundary")," or"," ",R.createElement("code",{style:s},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:r},n):null,a)}var BU=R.createElement(zU,null),FU=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?R.createElement(Si.Provider,{value:this.props.routeContext},R.createElement(zb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function qU({routeContext:t,match:e,children:n}){let i=R.useContext(fc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(Si.Provider,{value:t},n)}function HU(t,e=[],n=null,i=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n==null?void 0:n.errors;if(a!=null){let h=s.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);Je(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let o=!1,l=-1;if(n)for(let h=0;h<s.length;h++){let d=s[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=h),d.route.id){let{loaderData:f,errors:p}=n,w=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||w){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let c=n&&i?(h,d)=>{var f,p;i(h,{location:n.location,params:((p=(f=n.matches)==null?void 0:f[0])==null?void 0:p.params)??{},errorInfo:d})}:void 0;return s.reduceRight((h,d,f)=>{let p,w=!1,E=null,A=null;n&&(p=a&&d.route.id?a[d.route.id]:void 0,E=d.route.errorElement||BU,o&&(l<0&&f===0?(i2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,A=null):l===f&&(w=!0,A=d.route.hydrateFallbackElement||null)));let v=e.concat(s.slice(0,f+1)),_=()=>{let b;return p?b=E:w?b=A:d.route.Component?b=R.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=h,R.createElement(qU,{match:d,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?R.createElement(FU,{location:n.location,revalidation:n.revalidation,component:E,error:p,children:_(),routeContext:{outlet:null,matches:v,isDataRoute:!0},onError:c}):_()},null)}function Bb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GU(t){let e=R.useContext(fc);return Je(e,Bb(t)),e}function $U(t){let e=R.useContext(qp);return Je(e,Bb(t)),e}function KU(t){let e=R.useContext(Si);return Je(e,Bb(t)),e}function Fb(t){let e=KU(t),n=e.matches[e.matches.length-1];return Je(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function QU(){return Fb("useRouteId")}function WU(){var i;let t=R.useContext(zb),e=$U("useRouteError"),n=Fb("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function YU(){let{router:t}=GU("useNavigate"),e=Fb("useNavigate"),n=R.useRef(!1);return t2(()=>{n.current=!0}),R.useCallback(async(r,s={})=>{Rn(n.current,e2),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...s}))},[t,e])}var JS={};function i2(t,e,n){!e&&!JS[t]&&(JS[t]=!0,Rn(!1,n))}R.memo(XU);function XU({routes:t,future:e,state:n,unstable_onError:i}){return n2(t,void 0,n,i,e)}function JU({to:t,replace:e,state:n,relative:i}){Je(mc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=R.useContext(Ai);Rn(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=R.useContext(Si),{pathname:a}=fi(),o=pc(),l=jb(t,Ub(s),a,i==="path"),c=JSON.stringify(l);return R.useEffect(()=>{o(JSON.parse(c),{replace:e,state:n,relative:i})},[o,c,i,e,n]),null}function ZS(t){return UU(t.context)}function ve(t){Je(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZU({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:s=!1}){Je(!mc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=R.useMemo(()=>({basename:a,navigator:r,static:s,future:{}}),[a,r,s]);typeof n=="string"&&(n=mo(n));let{pathname:l="/",search:c="",hash:h="",state:d=null,key:f="default"}=n,p=R.useMemo(()=>{let w=xr(l,a);return w==null?null:{location:{pathname:w,search:c,hash:h,state:d,key:f},navigationType:i}},[a,l,c,h,d,f,i]);return Rn(p!=null,`<Router basename="${a}"> is not able to match the URL "${l}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:R.createElement(Ai.Provider,{value:o},R.createElement(hd.Provider,{children:e,value:p}))}function e3({children:t,location:e}){return jU(xv(t),e)}function xv(t,e=[]){let n=[];return R.Children.forEach(t,(i,r)=>{if(!R.isValidElement(i))return;let s=[...e,r];if(i.type===R.Fragment){n.push.apply(n,xv(i.props.children,s));return}Je(i.type===ve,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Je(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=xv(i.props.children,s)),n.push(a)}),n}var Qf="get",Wf="application/x-www-form-urlencoded";function Hp(t){return t!=null&&typeof t.tagName=="string"}function t3(t){return Hp(t)&&t.tagName.toLowerCase()==="button"}function n3(t){return Hp(t)&&t.tagName.toLowerCase()==="form"}function i3(t){return Hp(t)&&t.tagName.toLowerCase()==="input"}function r3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function s3(t,e){return t.button===0&&(!e||e==="_self")&&!r3(t)}function Rv(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(r=>[n,r]):[[n,i]])},[]))}function a3(t,e){let n=Rv(t);return e&&e.forEach((i,r)=>{n.has(r)||e.getAll(r).forEach(s=>{n.append(r,s)})}),n}var pf=null;function o3(){if(pf===null)try{new FormData(document.createElement("form"),0),pf=!1}catch{pf=!0}return pf}var l3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ky(t){return t!=null&&!l3.has(t)?(Rn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wf}"`),null):t}function c3(t,e){let n,i,r,s,a;if(n3(t)){let o=t.getAttribute("action");i=o?xr(o,e):null,n=t.getAttribute("method")||Qf,r=Ky(t.getAttribute("enctype"))||Wf,s=new FormData(t)}else if(t3(t)||i3(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(i=l?xr(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Qf,r=Ky(t.getAttribute("formenctype"))||Ky(o.getAttribute("enctype"))||Wf,s=new FormData(o,t),!o3()){let{name:c,type:h,value:d}=t;if(h==="image"){let f=c?`${c}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else c&&s.append(c,d)}}else{if(Hp(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Qf,i=null,r=Wf,a=t}return s&&r==="text/plain"&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function qb(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function u3(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&xr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function h3(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function d3(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function f3(t,e,n){let i=await Promise.all(t.map(async r=>{let s=e.routes[r.route.id];if(s){let a=await h3(s,n);return a.links?a.links():[]}return[]}));return y3(i.flat(1).filter(d3).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function eI(t,e,n,i,r,s){let a=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,o=(l,c)=>{var h;return n[c].pathname!==l.pathname||((h=n[c].route.path)==null?void 0:h.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?e.filter((l,c)=>{var d;let h=i.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function m3(t,e,{includeHydrateFallback:n}={}){return p3(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function p3(t){return[...new Set(t)]}function g3(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function y3(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let s=JSON.stringify(g3(r));return n.has(s)||(n.add(s),i.push({key:s,link:r})),i},[])}function r2(){let t=R.useContext(fc);return qb(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function _3(){let t=R.useContext(qp);return qb(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Hb=R.createContext(void 0);Hb.displayName="FrameworkContext";function s2(){let t=R.useContext(Hb);return qb(t,"You must render this element inside a <HydratedRouter> element"),t}function v3(t,e){let n=R.useContext(Hb),[i,r]=R.useState(!1),[s,a]=R.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:d}=e,f=R.useRef(null);R.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let E=v=>{v.forEach(_=>{a(_.isIntersecting)})},A=new IntersectionObserver(E,{threshold:.5});return f.current&&A.observe(f.current),()=>{A.disconnect()}}},[t]),R.useEffect(()=>{if(i){let E=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(E)}}},[i]);let p=()=>{r(!0)},w=()=>{r(!1),a(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:eu(o,p),onBlur:eu(l,w),onMouseEnter:eu(c,p),onMouseLeave:eu(h,w),onTouchStart:eu(d,p)}]:[!1,f,{}]}function eu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function b3({page:t,...e}){let{router:n}=r2(),i=R.useMemo(()=>WN(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?R.createElement(T3,{page:t,matches:i,...e}):null}function w3(t){let{manifest:e,routeModules:n}=s2(),[i,r]=R.useState([]);return R.useEffect(()=>{let s=!1;return f3(t,e,n).then(a=>{s||r(a)}),()=>{s=!0}},[t,e,n]),i}function T3({page:t,matches:e,...n}){let i=fi(),{manifest:r,routeModules:s}=s2(),{basename:a}=r2(),{loaderData:o,matches:l}=_3(),c=R.useMemo(()=>eI(t,e,l,r,i,"data"),[t,e,l,r,i]),h=R.useMemo(()=>eI(t,e,l,r,i,"assets"),[t,e,l,r,i]),d=R.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let w=new Set,E=!1;if(e.forEach(v=>{var b;let _=r.routes[v.route.id];!_||!_.hasLoader||(!c.some(I=>I.route.id===v.route.id)&&v.route.id in o&&((b=s[v.route.id])!=null&&b.shouldRevalidate)||_.hasClientLoader?E=!0:w.add(v.route.id))}),w.size===0)return[];let A=u3(t,a,"data");return E&&w.size>0&&A.searchParams.set("_routes",e.filter(v=>w.has(v.route.id)).map(v=>v.route.id).join(",")),[A.pathname+A.search]},[a,o,i,r,c,e,t,s]),f=R.useMemo(()=>m3(h,r),[h,r]),p=w3(h);return R.createElement(R.Fragment,null,d.map(w=>R.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),f.map(w=>R.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),p.map(({key:w,link:E})=>R.createElement("link",{key:w,nonce:n.nonce,...E})))}function E3(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var a2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{a2&&(window.__reactRouterVersion="7.9.6")}catch{}function A3({basename:t,children:e,window:n}){let i=R.useRef();i.current==null&&(i.current=oU({window:n,v5Compat:!0}));let r=i.current,[s,a]=R.useState({action:r.action,location:r.location}),o=R.useCallback(l=>{R.startTransition(()=>a(l))},[a]);return R.useLayoutEffect(()=>r.listen(o),[r,o]),R.createElement(ZU,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:r})}var o2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xn=R.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:h,viewTransition:d,...f},p){let{basename:w}=R.useContext(Ai),E=typeof c=="string"&&o2.test(c),A,v=!1;if(typeof c=="string"&&E&&(A=c,a2))try{let C=new URL(window.location.href),N=c.startsWith("//")?new URL(C.protocol+c):new URL(c),k=xr(N.pathname,w);N.origin===C.origin&&k!=null?c=k+N.search+N.hash:v=!0}catch{Rn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=OU(c,{relative:r}),[b,I,D]=v3(i,f),V=x3(c,{replace:a,state:o,target:l,preventScrollReset:h,relative:r,viewTransition:d});function S(C){e&&e(C),C.defaultPrevented||V(C)}let T=R.createElement("a",{...f,...D,href:A||_,onClick:v||s?e:S,ref:E3(p,I),target:l,"data-discover":!E&&n==="render"?"true":void 0});return b&&!E?R.createElement(R.Fragment,null,T,R.createElement(b3,{page:_})):T});Xn.displayName="Link";var pi=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:s,to:a,viewTransition:o,children:l,...c},h){let d=dd(a,{relative:c.relative}),f=fi(),p=R.useContext(qp),{navigator:w,basename:E}=R.useContext(Ai),A=p!=null&&k3(d)&&o===!0,v=w.encodeLocation?w.encodeLocation(d).pathname:d.pathname,_=f.pathname,b=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(_=_.toLowerCase(),b=b?b.toLowerCase():null,v=v.toLowerCase()),b&&E&&(b=xr(b,E)||b);const I=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let D=_===v||!r&&_.startsWith(v)&&_.charAt(I)==="/",V=b!=null&&(b===v||!r&&b.startsWith(v)&&b.charAt(v.length)==="/"),S={isActive:D,isPending:V,isTransitioning:A},T=D?e:void 0,C;typeof i=="function"?C=i(S):C=[i,D?"active":null,V?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let N=typeof s=="function"?s(S):s;return R.createElement(Xn,{...c,"aria-current":T,className:C,ref:h,style:N,to:a,viewTransition:o},typeof l=="function"?l(S):l)});pi.displayName="NavLink";var S3=R.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:s,method:a=Qf,action:o,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:d,...f},p)=>{let w=N3(),E=D3(o,{relative:c}),A=a.toLowerCase()==="get"?"get":"post",v=typeof o=="string"&&o2.test(o),_=b=>{if(l&&l(b),b.defaultPrevented)return;b.preventDefault();let I=b.nativeEvent.submitter,D=(I==null?void 0:I.getAttribute("formmethod"))||a;w(I||b.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:r,state:s,relative:c,preventScrollReset:h,viewTransition:d})};return R.createElement("form",{ref:p,method:A,action:E,onSubmit:i?l:_,...f,"data-discover":!v&&t==="render"?"true":void 0})});S3.displayName="Form";function I3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function l2(t){let e=R.useContext(fc);return Je(e,I3(t)),e}function x3(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:s,viewTransition:a}={}){let o=pc(),l=fi(),c=dd(t,{relative:s});return R.useCallback(h=>{if(s3(h,e)){h.preventDefault();let d=n!==void 0?n:Ah(l)===Ah(c);o(t,{replace:d,state:i,preventScrollReset:r,relative:s,viewTransition:a})}},[l,o,c,n,i,e,t,r,s,a])}function R3(t){Rn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=R.useRef(Rv(t)),n=R.useRef(!1),i=fi(),r=R.useMemo(()=>a3(i.search,n.current?null:e.current),[i.search]),s=pc(),a=R.useCallback((o,l)=>{const c=Rv(typeof o=="function"?o(new URLSearchParams(r)):o);n.current=!0,s("?"+c,l)},[s,r]);return[r,a]}var C3=0,P3=()=>`__${String(++C3)}__`;function N3(){let{router:t}=l2("useSubmit"),{basename:e}=R.useContext(Ai),n=QU();return R.useCallback(async(i,r={})=>{let{action:s,method:a,encType:o,formData:l,body:c}=c3(i,e);if(r.navigate===!1){let h=r.fetcherKey||P3();await t.fetch(h,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,flushSync:r.flushSync})}else await t.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function D3(t,{relative:e}={}){let{basename:n}=R.useContext(Ai),i=R.useContext(Si);Je(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...dd(t||".",{relative:e})},a=fi();if(t==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(h=>h==="")){o.delete("index"),l.filter(d=>d).forEach(d=>o.append("index",d));let h=o.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:yr([n,s.pathname])),Ah(s)}function k3(t,{relative:e}={}){let n=R.useContext(ZN);Je(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=l2("useViewTransitionState"),r=dd(t,{relative:e});if(!n.isTransitioning)return!1;let s=xr(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=xr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return qm(r.pathname,a)!=null||qm(r.pathname,s)!=null}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),O3=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),tI=t=>{const e=O3(t);return e.charAt(0).toUpperCase()+e.slice(1)},c2=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),M3=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var L3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=R.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:a,...o},l)=>R.createElement("svg",{ref:l,...L3,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:c2("lucide",r),...!s&&!M3(o)&&{"aria-hidden":"true"},...o},[...a.map(([c,h])=>R.createElement(c,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(t,e)=>{const n=R.forwardRef(({className:i,...r},s)=>R.createElement(U3,{ref:s,iconNode:e,className:c2(`lucide-${V3(tI(t))}`,`lucide-${t}`,i),...r}));return n.displayName=tI(t),n};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],z3=Se("arrow-left",j3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],F3=Se("arrow-right",B3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],nI=Se("check",q3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],G3=Se("chevron-down",H3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],u2=Se("circle-alert",$3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Q3=Se("circle-check-big",K3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Y3=Se("circle-x",W3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],h2=Se("eye-off",X3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],d2=Se("eye",J3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],ej=Se("facebook",Z3);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],nj=Se("gift",tj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],f2=Se("info",ij);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],sj=Se("instagram",rj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Qa=Se("loader-circle",aj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Cv=Se("lock",oj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],iI=Se("log-out",lj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Gb=Se("mail",cj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],hj=Se("map-pin",uj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],fj=Se("menu",dj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"M5 12h14",key:"1ays0h"}]],Pv=Se("minus",mj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],$b=Se("phone",pj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],m2=Se("plus",gj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],_j=Se("refresh-cw",yj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],bj=Se("shield-alert",vj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Tj=Se("shield-check",wj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],gf=Se("shield",Ej);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Sj=Se("shopping-cart",Aj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],xj=Se("trash-2",Ij);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Cj=Se("triangle-alert",Rj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Nv=Se("user",Pj);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fd=Se("x",Nj),Dj=()=>{};var rI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},kj=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],o=t[n++],l=((r&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},g2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,o=a?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|o>>4;let f=(o&15)<<2|c>>6,p=c&63;l||(p=64,a||(f=64)),i.push(n[h],n[d],n[f],n[p])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(p2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||o==null||c==null||d==null)throw new Vj;const f=s<<2|o>>4;if(i.push(f),c!==64){const p=o<<4&240|c>>2;if(i.push(p),d!==64){const w=c<<6&192|d;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Vj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Oj=function(t){const e=p2(t);return g2.encodeByteArray(e,!0)},Hm=function(t){return Oj(t).replace(/\./g,"")},Kb=function(t){try{return g2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Gm(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Mj(n)||(t[n]=Gm(t[n],e[n]));return t}function Mj(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=()=>Qb().__FIREBASE_DEFAULTS__,Uj=()=>{if(typeof process>"u"||typeof rI>"u")return;const t=rI.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Kb(t[1]);return e&&JSON.parse(e)},Wb=()=>{try{return Dj()||Lj()||Uj()||jj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Yb=()=>{var t;return(t=Wb())==null?void 0:t.config},zj=t=>{var e;return(e=Wb())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Xb(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Hm(JSON.stringify(n)),Hm(JSON.stringify(a)),""].join(".")}const Fu={};function Fj(){const t={prod:[],emulator:[]};for(const e of Object.keys(Fu))Fu[e]?t.emulator.push(e):t.prod.push(e);return t}function qj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let sI=!1;function Jb(t,e){if(typeof window>"u"||typeof document>"u"||!Xs(window.location.host)||Fu[t]===e||Fu[t]||sI)return;Fu[t]=e;function n(f){return`__firebase__banner__${f}`}const i="__firebase__banner",s=Fj().prod.length>0;function a(){const f=document.getElementById(i);f&&f.remove()}function o(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{sI=!0,a()},f}function h(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=qj(i),p=n("text"),w=document.getElementById(p)||document.createElement("span"),E=n("learnmore"),A=document.getElementById(E)||document.createElement("a"),v=n("preprendIcon"),_=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const b=f.element;o(b),h(A,E);const I=c();l(_,v),b.append(_,w,A,I),document.body.appendChild(b)}s?(w.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Hj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function Gp(){var e;const t=(e=Wb())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Gj(){return typeof window<"u"||_2()}function _2(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function $j(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function v2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Zb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b2(){const t=tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w2(){return!Gp()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T2(){return!Gp()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Sh(){try{return typeof indexedDB=="object"}catch{return!1}}function Kj(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj="FirebaseError";class rn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Qj,Object.setPrototypeOf(this,rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,po.prototype.create)}}class po{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?Wj(s,i):"Error",o=`${this.serviceName}: ${a} (${r}).`;return new rn(r,o,i)}}function Wj(t,e){return t.replace(Yj,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Yj=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Xj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ms(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(oI(s)&&oI(a)){if(!Ms(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function oI(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function nl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function yu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function E2(t,e){const n=new Jj(t,e);return n.subscribe.bind(n)}class Jj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Zj(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Qy),r.error===void 0&&(r.error=Qy),r.complete===void 0&&(r.complete=Qy);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Zj(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t){return t&&t._delegate?t._delegate:t}class hi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Bj;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(n9(e))try{this.getOrInitializeService({instanceIdentifier:_a})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=_a){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_a){return this.instances.has(e)}getOptions(e=_a){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);i===o&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:t9(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=_a){return this.component?this.component.multipleInstances?e:_a:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function t9(t){return t===_a?void 0:t}function n9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new e9(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew=[];var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const S2={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},i9=me.INFO,r9={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},s9=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=r9[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $p{constructor(e){this.name=e,this._logLevel=i9,this._logHandler=s9,this._userLogHandler=null,ew.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?S2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}function a9(t){ew.forEach(e=>{e.setLogLevel(t)})}function o9(t,e){for(const n of ew){let i=null;e&&e.level&&(i=S2[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,s,...a)=>{const o=a.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(i??r.logLevel)&&t({level:me[s].toLowerCase(),message:o,args:a,type:r.name})}}}const l9=(t,e)=>e.some(n=>t instanceof n);let lI,cI;function c9(){return lI||(lI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u9(){return cI||(cI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I2=new WeakMap,Dv=new WeakMap,x2=new WeakMap,Wy=new WeakMap,tw=new WeakMap;function h9(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(xs(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&I2.set(n,t)}).catch(()=>{}),tw.set(e,t),e}function d9(t){if(Dv.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Dv.set(t,e)}let kv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Dv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||x2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function f9(t){kv=t(kv)}function m9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Yy(this),e,...n);return x2.set(i,e.sort?e.sort():[e]),xs(i)}:u9().includes(t)?function(...e){return t.apply(Yy(this),e),xs(I2.get(this))}:function(...e){return xs(t.apply(Yy(this),e))}}function p9(t){return typeof t=="function"?m9(t):(t instanceof IDBTransaction&&d9(t),l9(t,c9())?new Proxy(t,kv):t)}function xs(t){if(t instanceof IDBRequest)return h9(t);if(Wy.has(t))return Wy.get(t);const e=p9(t);return e!==t&&(Wy.set(t,e),tw.set(e,t)),e}const Yy=t=>tw.get(t);function g9(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),o=xs(a);return i&&a.addEventListener("upgradeneeded",l=>{i(xs(a.result),l.oldVersion,l.newVersion,xs(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const y9=["get","getKey","getAll","getAllKeys","count"],_9=["put","add","delete","clear"],Xy=new Map;function uI(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xy.get(e))return Xy.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=_9.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||y9.includes(n)))return;const s=async function(a,...o){const l=this.transaction(a,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),r&&l.done]))[0]};return Xy.set(e,s),s}f9(t=>({...t,get:(e,n,i)=>uI(e,n)||t.get(e,n,i),has:(e,n)=>!!uI(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(b9(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function b9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $m="@firebase/app",Vv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new $p("@firebase/app"),w9="@firebase/app-compat",T9="@firebase/analytics-compat",E9="@firebase/analytics",A9="@firebase/app-check-compat",S9="@firebase/app-check",I9="@firebase/auth",x9="@firebase/auth-compat",R9="@firebase/database",C9="@firebase/data-connect",P9="@firebase/database-compat",N9="@firebase/functions",D9="@firebase/functions-compat",k9="@firebase/installations",V9="@firebase/installations-compat",O9="@firebase/messaging",M9="@firebase/messaging-compat",L9="@firebase/performance",U9="@firebase/performance-compat",j9="@firebase/remote-config",z9="@firebase/remote-config-compat",B9="@firebase/storage",F9="@firebase/storage-compat",q9="@firebase/firestore",H9="@firebase/ai",G9="@firebase/firestore-compat",$9="firebase",K9="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="[DEFAULT]",Q9={[$m]:"fire-core",[w9]:"fire-core-compat",[E9]:"fire-analytics",[T9]:"fire-analytics-compat",[S9]:"fire-app-check",[A9]:"fire-app-check-compat",[I9]:"fire-auth",[x9]:"fire-auth-compat",[R9]:"fire-rtdb",[C9]:"fire-data-connect",[P9]:"fire-rtdb-compat",[N9]:"fire-fn",[D9]:"fire-fn-compat",[k9]:"fire-iid",[V9]:"fire-iid-compat",[O9]:"fire-fcm",[M9]:"fire-fcm-compat",[L9]:"fire-perf",[U9]:"fire-perf-compat",[j9]:"fire-rc",[z9]:"fire-rc-compat",[B9]:"fire-gcs",[F9]:"fire-gcs-compat",[q9]:"fire-fst",[G9]:"fire-fst-compat",[H9]:"fire-vertex","fire-js":"fire-js",[$9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new Map,kl=new Map,Vl=new Map;function Ih(t,e){try{t.container.addComponent(e)}catch(n){Rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function R2(t,e){t.container.addOrOverwriteComponent(e)}function Cr(t){const e=t.name;if(Vl.has(e))return Rr.debug(`There were multiple attempts to register component ${e}.`),!1;Vl.set(e,t);for(const n of Us.values())Ih(n,t);for(const n of kl.values())Ih(n,t);return!0}function C2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function W9(t,e,n=Ls){C2(t,e).clearInstance(n)}function nw(t){return t.options!==void 0}function P2(t){return nw(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function qe(t){return t==null?!1:t.settings!==void 0}function Y9(){Vl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fn=new po("app","Firebase",X9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N2=class{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(t,e){const n=Kb(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const r=JSON.parse(n).exp*1e3,s=new Date().getTime();r-s<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class J9 extends N2{constructor(e,n,i,r){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,a={name:i,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,a,r);else{const o=e;super(o.options,a,r)}this._serverConfig={automaticDataCollectionEnabled:s,...n},this._serverConfig.authIdToken&&hI(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&hI(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,qn($m,Vv,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){rw(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Fn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=K9;function iw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Ls,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Fn.create("bad-app-name",{appName:String(r)});if(n||(n=Yb()),!n)throw Fn.create("no-options");const s=Us.get(r);if(s){if(Ms(n,s.options)&&Ms(i,s.config))return s;throw Fn.create("duplicate-app",{appName:r})}const a=new A2(r);for(const l of Vl.values())a.addComponent(l);const o=new N2(n,i,a);return Us.set(r,o),o}function Z9(t,e={}){if(Gj()&&!_2())throw Fn.create("invalid-server-app-environment");let n,i=e||{};if(t&&(nw(t)?n=t.options:P2(t)?i=t:n=t),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),n||(n=Yb()),!n)throw Fn.create("no-options");const r={...i,...n};r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const s=h=>[...h].reduce((d,f)=>Math.imul(31,d)+f.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Fn.create("finalization-registry-not-supported",{});const a=""+s(JSON.stringify(r)),o=kl.get(a);if(o)return o.incRefCount(i.releaseOnDeref),o;const l=new A2(a);for(const h of Vl.values())l.addComponent(h);const c=new J9(n,i,a,l);return kl.set(a,c),c}function ez(t=Ls){const e=Us.get(t);if(!e&&t===Ls&&Yb())return iw();if(!e)throw Fn.create("no-app",{appName:t});return e}function tz(){return Array.from(Us.values())}async function rw(t){let e=!1;const n=t.name;Us.has(n)?(e=!0,Us.delete(n)):kl.has(n)&&t.decRefCount()<=0&&(kl.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(i=>i.delete())),t.isDeleted=!0)}function qn(t,e,n){let i=Q9[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=e.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rr.warn(a.join(" "));return}Cr(new hi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function D2(t,e){if(t!==null&&typeof t!="function")throw Fn.create("invalid-log-argument");o9(t,e)}function k2(t){a9(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz="firebase-heartbeat-database",iz=1,xh="firebase-heartbeat-store";let Jy=null;function V2(){return Jy||(Jy=g9(nz,iz,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fn.create("idb-open",{originalErrorMessage:t.message})})),Jy}async function rz(t){try{const n=(await V2()).transaction(xh),i=await n.objectStore(xh).get(O2(t));return await n.done,i}catch(e){if(e instanceof rn)Rr.warn(e.message);else{const n=Fn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rr.warn(n.message)}}}async function dI(t,e){try{const i=(await V2()).transaction(xh,"readwrite");await i.objectStore(xh).put(e,O2(t)),await i.done}catch(n){if(n instanceof rn)Rr.warn(n.message);else{const i=Fn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Rr.warn(i.message)}}}function O2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sz=1024,az=30;class oz{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cz(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=fI();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>az){const a=uz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Rr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=fI(),{heartbeatsToSend:i,unsentEntries:r}=lz(this._heartbeatsCache.heartbeats),s=Hm(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Rr.warn(n),""}}}function fI(){return new Date().toISOString().substring(0,10)}function lz(t,e=sz){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),mI(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),mI(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class cz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sh()?Kj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rz(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return dI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return dI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function mI(t){return Hm(JSON.stringify({version:2,heartbeats:t})).length}function uz(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hz(t){Cr(new hi("platform-logger",e=>new v9(e),"PRIVATE")),Cr(new hi("heartbeat",e=>new oz(e),"PRIVATE")),qn($m,Vv,t),qn($m,Vv,"esm2020"),qn("fire-js","")}hz("");const dz=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:rn,SDK_VERSION:Mr,_DEFAULT_ENTRY_NAME:Ls,_addComponent:Ih,_addOrOverwriteComponent:R2,_apps:Us,_clearComponents:Y9,_components:Vl,_getProvider:C2,_isFirebaseApp:nw,_isFirebaseServerApp:qe,_isFirebaseServerAppSettings:P2,_registerComponent:Cr,_removeServiceInstance:W9,_serverApps:kl,deleteApp:rw,getApp:ez,getApps:tz,initializeApp:iw,initializeServerApp:Z9,onLog:D2,registerVersion:qn,setLogLevel:k2},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e,n){this._delegate=e,this.firebase=n,Ih(e,new hi("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),rw(this._delegate)))}_getService(e,n=Ls){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())==null?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Ls){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Ih(this._delegate,e)}_addOrOverwriteComponent(e){R2(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mz={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},pI=new po("app-compat","Firebase",mz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pz(t){const e={},n={__esModule:!0,initializeApp:s,app:r,registerVersion:qn,setLogLevel:k2,onLog:D2,apps:null,SDK_VERSION:Mr,INTERNAL:{registerComponent:o,removeApp:i,useAsService:l,modularAPIs:dz}};n.default=n,Object.defineProperty(n,"apps",{get:a});function i(c){delete e[c]}function r(c){if(c=c||Ls,!aI(e,c))throw pI.create("no-app",{appName:c});return e[c]}r.App=t;function s(c,h={}){const d=iw(c,h);if(aI(e,d.name))return e[d.name];const f=new t(d,n);return e[d.name]=f,f}function a(){return Object.keys(e).map(c=>e[c])}function o(c){const h=c.name,d=h.replace("-compat","");if(Cr(c)&&c.type==="PUBLIC"){const f=(p=r())=>{if(typeof p[d]!="function")throw pI.create("invalid-app-argument",{appName:h});return p[d]()};c.serviceProps!==void 0&&Gm(f,c.serviceProps),n[d]=f,t.prototype[d]=function(...p){return this._getService.bind(this,h).apply(this,c.multipleInstances?p:[])}}return c.type==="PUBLIC"?n[d]:null}function l(c,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(){const t=pz(fz);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:M2,extendNamespace:e,createSubscribe:E2,ErrorFactory:po,deepExtend:Gm};function e(n){Gm(t,n)}return t}const gz=M2();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new $p("@firebase/app-compat"),yz="@firebase/app-compat",_z="0.5.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vz(t){qn(yz,_z,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=Qb();if(t.firebase!==void 0){gI.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&gI.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const en=gz;vz();var bz="firebase",wz="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en.registerVersion(bz,wz,"app-compat");const tu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Ro={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tz(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function L2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ez=Tz,Az=L2,U2=new po("auth","Firebase",L2());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=new $p("@firebase/auth");function Sz(t,...e){Km.logLevel<=me.WARN&&Km.warn(`Auth (${Mr}): ${t}`,...e)}function Yf(t,...e){Km.logLevel<=me.ERROR&&Km.error(`Auth (${Mr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t,...e){throw aw(t,...e)}function Rt(t,...e){return aw(t,...e)}function sw(t,e,n){const i={...Az(),[e]:n};return new po("auth","Firebase",i).create(e,{appName:t.name})}function Ut(t){return sw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yc(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Qt(t,"argument-error"),sw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function aw(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return U2.create(t,...e)}function G(t,e,...n){if(!t)throw aw(e,...n)}function ji(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yf(e),new Error(e)}function Ti(t,e){t||ji(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function ow(){return yI()==="http:"||yI()==="https:"}function yI(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ow()||v2()||"connection"in navigator)?navigator.onLine:!0}function xz(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ti(n>e,"Short delay should be less than long delay!"),this.isMobile=Hj()||Zb()}get(){return Iz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(t,e){Ti(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Pz=new md(3e4,6e4);function ct(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ut(t,e,n,i,r={}){return z2(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const o=gc({key:t.config.apiKey,...a}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return $j()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Xs(t.emulatorConfig.host)&&(c.credentials="include"),j2.fetch()(await B2(t,t.config.apiHost,n,o),c)})}async function z2(t,e,n){t._canInitEmulator=!1;const i={...Rz,...e};try{const r=new Dz(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw _u(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw _u(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw _u(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw _u(t,"user-disabled",a);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw sw(t,h,c);Qt(t,h)}}catch(r){if(r instanceof rn)throw r;Qt(t,"network-request-failed",{message:String(r)})}}async function Lr(t,e,n,i,r={}){const s=await ut(t,e,n,i,r);return"mfaPendingCredential"in s&&Qt(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function B2(t,e,n,i){const r=`${e}${n}?${i}`,s=t,a=s.config.emulator?lw(t.config,r):`${t.config.apiScheme}://${r}`;return Cz.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function Nz(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Dz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Rt(this.auth,"network-request-failed")),Pz.get())})}}function _u(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Rt(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(t){return t!==void 0&&t.getResponse!==void 0}function vI(t){return t!==void 0&&t.enterprise!==void 0}class F2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Nz(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kz(t){return(await ut(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function q2(t,e){return ut(t,"GET","/v2/recaptchaConfig",ct(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vz(t,e){return ut(t,"POST","/v1/accounts:delete",e)}async function Oz(t,e){return ut(t,"POST","/v1/accounts:update",e)}async function Qm(t,e){return ut(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Mz(t,e=!1){const n=ee(t),i=await n.getIdToken(e),r=Kp(i);G(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:qu(Zy(r.auth_time)),issuedAtTime:qu(Zy(r.iat)),expirationTime:qu(Zy(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Zy(t){return Number(t)*1e3}function Kp(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Yf("JWT malformed, contained fewer than 3 sections"),null;try{const r=Kb(n);return r?JSON.parse(r):(Yf("Failed to decode base64 JWT payload"),null)}catch(r){return Yf("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function bI(t){const e=Kp(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pr(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof rn&&Lz(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function Lz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qu(this.lastLoginAt),this.creationTime=qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ch(t){var d;const e=t.auth,n=await t.getIdToken(),i=await Pr(t,Qm(e,{idToken:n}));G(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const s=(d=r.providerUserInfo)!=null&&d.length?H2(r.providerUserInfo):[],a=zz(t.providerData,s),o=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),c=o?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Ov(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function jz(t){const e=ee(t);await Ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zz(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function H2(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bz(t,e){const n=await z2(t,{},async()=>{const i=gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=await B2(t,r,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:i};return t.emulatorConfig&&Xs(t.emulatorConfig.host)&&(l.credentials="include"),j2.fetch()(a,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Fz(t,e){return ut(t,"POST","/v2/accounts:revokeToken",ct(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){G(e.length!==0,"internal-error");const n=bI(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await Bz(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new pl;return i&&(G(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(G(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(G(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pl,this.toJSON())}_performRefresh(){return ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vi{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new Uz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Ov(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Pr(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Mz(this,e)}reload(){return jz(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Ch(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qe(this.auth.app))return Promise.reject(Ut(this.auth));const e=await this.getIdToken();return await Pr(this,Vz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:w,stsTokenManager:E}=n;G(d&&E,e,"internal-error");const A=pl.fromJSON(this.name,E);G(typeof d=="string",e,"internal-error"),Xr(i,e.name),Xr(r,e.name),G(typeof f=="boolean",e,"internal-error"),G(typeof p=="boolean",e,"internal-error"),Xr(s,e.name),Xr(a,e.name),Xr(o,e.name),Xr(l,e.name),Xr(c,e.name),Xr(h,e.name);const v=new vi({uid:d,auth:e,email:r,emailVerified:f,displayName:i,isAnonymous:p,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:A,createdAt:c,lastLoginAt:h});return w&&Array.isArray(w)&&(v.providerData=w.map(_=>({..._}))),l&&(v._redirectEventId=l),v}static async _fromIdTokenResponse(e,n,i=!1){const r=new pl;r.updateFromServerResponse(n);const s=new vi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Ch(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];G(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?H2(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),o=new pl;o.updateFromIdToken(i);const l=new vi({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Ov(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=new Map;function Ln(t){Ti(t instanceof Function,"Expected a class definition");let e=wI.get(t);return e?(Ti(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,wI.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}G2.type="NONE";const Ol=G2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(t,e,n){return`firebase:${t}:${e}:${n}`}class gl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Ua(this.userKey,r.apiKey,s),this.fullPersistenceKey=Ua("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Qm(this.auth,{idToken:e}).catch(()=>{});return n?vi._fromGetAccountInfoResponse(this.auth,n,e):null}return vi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new gl(Ln(Ol),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||Ln(Ol);const a=Ua(i,e.config.apiKey,e.name);let o=null;for(const c of n)try{const h=await c._get(a);if(h){let d;if(typeof h=="string"){const f=await Qm(e,{idToken:h}).catch(()=>{});if(!f)break;d=await vi._fromGetAccountInfoResponse(e,f,h)}else d=vi._fromJSON(e,h);c!==s&&(o=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new gl(s,e,i):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new gl(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(W2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Y2(e))return"Blackberry";if(X2(e))return"Webos";if(K2(e))return"Safari";if((e.includes("chrome/")||Q2(e))&&!e.includes("edge/"))return"Chrome";if(pd(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function $2(t=tt()){return/firefox\//i.test(t)}function K2(t=tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Q2(t=tt()){return/crios\//i.test(t)}function W2(t=tt()){return/iemobile/i.test(t)}function pd(t=tt()){return/android/i.test(t)}function Y2(t=tt()){return/blackberry/i.test(t)}function X2(t=tt()){return/webos/i.test(t)}function gd(t=tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qz(t=tt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function Hz(t=tt()){var e;return gd(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Gz(){return b2()&&document.documentMode===10}function J2(t=tt()){return gd(t)||pd(t)||X2(t)||Y2(t)||/windows phone/i.test(t)||W2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(t,e=[]){let n;switch(t){case"Browser":n=TI(tt());break;case"Worker":n=`${TI(tt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mr}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kz(t,e={}){return ut(t,"GET","/v2/passwordPolicy",ct(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qz=6;class Wz{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Qz,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new EI(this),this.idTokenSubscription=new EI(this),this.beforeStateQueue=new $z(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=U2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ln(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await gl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Qm(this,{idToken:e}),i=await vi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(qe(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ch(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qe(this.app))return Promise.reject(Ut(this));const n=e?ee(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qe(this.app)?Promise.reject(Ut(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qe(this.app)?Promise.reject(Ut(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ln(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Kz(this),n=new Wz(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new po("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Fz(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ln(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=await gl.create(this,[Ln(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Z2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(qe(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Sz(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function nt(t){return ee(t)}class EI{constructor(e){this.auth=e,this.observer=null,this.addObserver=E2(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Xz(t){yd=t}function cw(t){return yd.loadJS(t)}function Jz(){return yd.recaptchaV2Script}function Zz(){return yd.recaptchaEnterpriseScript}function eB(){return yd.gapiScript}function eD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB=500,nB=6e4,yf=1e12;class iB{constructor(e){this.auth=e,this.counter=yf,this._widgets=new Map}render(e,n){const i=this.counter;return this._widgets.set(i,new aB(e,this.auth.name,n||{})),this.counter++,i}reset(e){var i;const n=e||yf;(i=this._widgets.get(n))==null||i.delete(),this._widgets.delete(n)}getResponse(e){var i;const n=e||yf;return((i=this._widgets.get(n))==null?void 0:i.getResponse())||""}async execute(e){var i;const n=e||yf;return(i=this._widgets.get(n))==null||i.execute(),""}}class rB{constructor(){this.enterprise=new sB}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class sB{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class aB{constructor(e,n,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;G(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=oB(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},nB)},tB))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function oB(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const lB="recaptcha-enterprise",Hu="NO_RECAPTCHA";class tD{constructor(e){this.type=lB,this.auth=nt(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{q2(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new F2(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function r(s,a,o){const l=window.grecaptcha;vI(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{a(c)}).catch(()=>{a(Hu)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new rB().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{i(this.auth).then(o=>{if(!n&&vI(window.grecaptcha))r(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Zz();l.length!==0&&(l+=o),cw(l).then(()=>{r(o,s,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function nu(t,e,n,i=!1,r=!1){const s=new tD(t);let a;if(r)a=Hu;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,c=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return i?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Rs(t,e,n,i,r){var s,a;if(r==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await nu(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await nu(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(o)});else if(r==="PHONE_PROVIDER")if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("PHONE_PROVIDER")){const o=await nu(t,e,n);return i(t,o).catch(async l=>{var c;if(((c=t._getRecaptchaConfig())==null?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await nu(t,e,n,!1,!0);return i(t,h)}return Promise.reject(l)})}else{const o=await nu(t,e,n,!1,!0);return i(t,o)}else return Promise.reject(r+" provider is not supported.")}async function cB(t){const e=nt(t),n=await q2(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new F2(n);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new tD(e).verify()}function uB(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ln);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function hB(t,e,n){const i=nt(t);G(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),s=nD(e),{host:a,port:o}=dB(e),l=o===null?"":`:${o}`,c={url:`${s}//${a}${l}/`},h=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){G(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),G(Ms(c,i.config.emulator)&&Ms(h,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,Xs(a)?(Xb(`${s}//${a}${l}`),Jb("Auth",!0)):r||fB()}function nD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function dB(t){const e=nD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:AI(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:AI(a)}}}function AI(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function fB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ji("not implemented")}_getIdTokenResponse(e){return ji("not implemented")}_linkToIdToken(e,n){return ji("not implemented")}_getReauthenticationResolver(e){return ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iD(t,e){return ut(t,"POST","/v1/accounts:resetPassword",ct(t,e))}async function mB(t,e){return ut(t,"POST","/v1/accounts:update",e)}async function pB(t,e){return ut(t,"POST","/v1/accounts:signUp",e)}async function gB(t,e){return ut(t,"POST","/v1/accounts:update",ct(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yB(t,e){return Lr(t,"POST","/v1/accounts:signInWithPassword",ct(t,e))}async function Qp(t,e){return ut(t,"POST","/v1/accounts:sendOobCode",ct(t,e))}async function _B(t,e){return Qp(t,e)}async function vB(t,e){return Qp(t,e)}async function bB(t,e){return Qp(t,e)}async function wB(t,e){return Qp(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TB(t,e){return Lr(t,"POST","/v1/accounts:signInWithEmailLink",ct(t,e))}async function EB(t,e){return Lr(t,"POST","/v1/accounts:signInWithEmailLink",ct(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph extends _c{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Ph(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Ph(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rs(e,n,"signInWithPassword",yB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return TB(e,{email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rs(e,i,"signUpPassword",pB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return EB(e,{idToken:n,email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _r(t,e){return Lr(t,"POST","/v1/accounts:signInWithIdp",ct(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB="http://localhost";class Wi extends _c{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Wi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new Wi(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return _r(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,_r(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_r(e,n)}buildRequest(){const e={requestUri:AB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=gc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SI(t,e){return ut(t,"POST","/v1/accounts:sendVerificationCode",ct(t,e))}async function SB(t,e){return Lr(t,"POST","/v1/accounts:signInWithPhoneNumber",ct(t,e))}async function IB(t,e){const n=await Lr(t,"POST","/v1/accounts:signInWithPhoneNumber",ct(t,e));if(n.temporaryProof)throw _u(t,"account-exists-with-different-credential",n);return n}const xB={USER_NOT_FOUND:"user-not-found"};async function RB(t,e){const n={...e,operation:"REAUTH"};return Lr(t,"POST","/v1/accounts:signInWithPhoneNumber",ct(t,n),xB)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja extends _c{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new ja({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new ja({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return SB(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return IB(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return RB(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s}=e;return!i&&!n&&!r&&!s?null:new ja({verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PB(t){const e=nl(yu(t)).link,n=e?nl(yu(e)).deep_link_id:null,i=nl(yu(t)).deep_link_id;return(i?nl(yu(i)).link:null)||i||n||e||t}class Wp{constructor(e){const n=nl(yu(e)),i=n.apiKey??null,r=n.oobCode??null,s=CB(n.mode??null);G(i&&r&&s,"argument-error"),this.apiKey=i,this.operation=s,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=PB(e);try{return new Wp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(){this.providerId=Js.PROVIDER_ID}static credential(e,n){return Ph._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Wp.parseLink(n);return G(i,"argument-error"),Ph._fromEmailAndCode(e,i.code,i.tenantId)}}Js.PROVIDER_ID="password";Js.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Js.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends Ur{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class yl extends vc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return G("providerId"in n&&"signInMethod"in n,"argument-error"),Wi._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return G(e.idToken||e.accessToken,"argument-error"),Wi._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return yl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return yl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:s,nonce:a,providerId:o}=e;if(!i&&!r&&!n&&!s||!o)return null;try{return new yl(o)._credential({idToken:n,accessToken:i,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends vc{constructor(){super("facebook.com")}static credential(e){return Wi._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ni.credential(e.oauthAccessToken)}catch{return null}}}Ni.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ni.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends vc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Wi._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Di.credential(n,i)}catch{return null}}}Di.GOOGLE_SIGN_IN_METHOD="google.com";Di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends vc{constructor(){super("github.com")}static credential(e){return Wi._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NB="http://localhost";class Ml extends _c{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return _r(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,_r(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_r(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,pendingToken:s}=n;return!i||!r||!s||i!==r?null:new Ml(i,s)}static _create(e,n){return new Ml(e,n)}buildRequest(){return{requestUri:NB,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB="saml.";class Wm extends Ur{constructor(e){G(e.startsWith(DB),"argument-error"),super(e)}static credentialFromResult(e){return Wm.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Wm.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Ml.fromJSON(e);return G(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:i}=e;if(!n||!i)return null;try{return Ml._create(i,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends vc{constructor(){super("twitter.com")}static credential(e,n){return Wi._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Vi.credential(n,i)}catch{return null}}}Vi.TWITTER_SIGN_IN_METHOD="twitter.com";Vi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rD(t,e){return Lr(t,"POST","/v1/accounts:signUp",ct(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await vi._fromIdTokenResponse(e,i,r),a=II(i);return new di({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=II(i);return new di({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function II(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kB(t){var r;if(qe(t.app))return Promise.reject(Ut(t));const e=nt(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new di({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await rD(e,{returnSecureToken:!0}),i=await di._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym extends rn{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Ym.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Ym(e,n,i,r)}}function sD(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ym._fromErrorAndOperation(t,s,e,i):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VB(t,e){const n=ee(t);await Yp(!0,n,e);const{providerUserInfo:i}=await Oz(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),r=aD(i||[]);return n.providerData=n.providerData.filter(s=>r.has(s.providerId)),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function uw(t,e,n=!1){const i=await Pr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return di._forOperation(t,"link",i)}async function Yp(t,e,n){await Ch(e);const i=aD(e.providerData),r=t===!1?"provider-already-linked":"no-such-provider";G(i.has(n)===t,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oD(t,e,n=!1){const{auth:i}=t;if(qe(i.app))return Promise.reject(Ut(i));const r="reauthenticate";try{const s=await Pr(t,sD(i,r,e,t),n);G(s.idToken,i,"internal-error");const a=Kp(s.idToken);G(a,i,"internal-error");const{sub:o}=a;return G(t.uid===o,i,"user-mismatch"),di._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Qt(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lD(t,e,n=!1){if(qe(t.app))return Promise.reject(Ut(t));const i="signIn",r=await sD(t,i,e),s=await di._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function Xp(t,e){return lD(nt(t),e)}async function cD(t,e){const n=ee(t);return await Yp(!1,n,e.providerId),uw(n,e)}async function uD(t,e){return oD(ee(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OB(t,e){return Lr(t,"POST","/v1/accounts:signInWithCustomToken",ct(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MB(t,e){if(qe(t.app))return Promise.reject(Ut(t));const n=nt(t),i=await OB(n,{token:e,returnSecureToken:!0}),r=await di._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?hw._fromServerResponse(e,n):"totpInfo"in n?dw._fromServerResponse(e,n):Qt(e,"internal-error")}}class hw extends _d{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new hw(n)}}class dw extends _d{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new dw(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t,e,n){var i;G(((i=n.url)==null?void 0:i.length)>0,t,"invalid-continue-uri"),G(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),G(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(G(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(G(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fw(t){const e=nt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function LB(t,e,n){const i=nt(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Jp(i,r,n),await Rs(i,r,"getOobCode",vB,"EMAIL_PASSWORD_PROVIDER")}async function UB(t,e,n){await iD(ee(t),{oobCode:e,newPassword:n}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&fw(t),i})}async function jB(t,e){await gB(ee(t),{oobCode:e})}async function hD(t,e){const n=ee(t),i=await iD(n,{oobCode:e}),r=i.requestType;switch(G(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(i.mfaInfo,n,"internal-error");default:G(i.email,n,"internal-error")}let s=null;return i.mfaInfo&&(s=_d._fromServerResponse(nt(n),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:s},operation:r}}async function zB(t,e){const{data:n}=await hD(ee(t),e);return n.email}async function BB(t,e,n){if(qe(t.app))return Promise.reject(Ut(t));const i=nt(t),a=await Rs(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rD,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&fw(t),l}),o=await di._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(o.user),o}function FB(t,e,n){return qe(t.app)?Promise.reject(Ut(t)):Xp(ee(t),Js.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&fw(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qB(t,e,n){const i=nt(t),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(a,o){G(o.handleCodeInApp,i,"argument-error"),o&&Jp(i,a,o)}s(r,n),await Rs(i,r,"getOobCode",bB,"EMAIL_PASSWORD_PROVIDER")}function HB(t,e){const n=Wp.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function GB(t,e,n){if(qe(t.app))return Promise.reject(Ut(t));const i=ee(t),r=Js.credentialWithLink(e,n||Rh());return G(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Xp(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $B(t,e){return ut(t,"POST","/v1/accounts:createAuthUri",ct(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KB(t,e){const n=ow()?Rh():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:r}=await $B(ee(t),i);return r||[]}async function QB(t,e){const n=ee(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Jp(n.auth,r,e);const{email:s}=await _B(n.auth,r);s!==t.email&&await t.reload()}async function WB(t,e,n){const i=ee(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Jp(i.auth,s,n);const{email:a}=await wB(i.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YB(t,e){return ut(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XB(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=ee(t),s={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Pr(i,YB(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find(({providerId:l})=>l==="password");o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function JB(t,e){const n=ee(t);return qe(n.auth.app)?Promise.reject(Ut(n.auth)):dD(n,e,null)}function ZB(t,e){return dD(ee(t),null,e)}async function dD(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const a=await Pr(t,mB(i,s));await t._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t){var r,s;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},i=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const a=(s=(r=Kp(t.idToken))==null?void 0:r.firebase)==null?void 0:s.sign_in_provider;if(a){const o=a!=="anonymous"&&a!=="custom"?a:null;return new _l(i,o)}}if(!e)return null;switch(e){case"facebook.com":return new tF(i,n);case"github.com":return new nF(i,n);case"google.com":return new iF(i,n);case"twitter.com":return new rF(i,n,t.screenName||null);case"custom":case"anonymous":return new _l(i,null);default:return new _l(i,e,n)}}class _l{constructor(e,n,i={}){this.isNewUser=e,this.providerId=n,this.profile=i}}class fD extends _l{constructor(e,n,i,r){super(e,n,i),this.username=r}}class tF extends _l{constructor(e,n){super(e,"facebook.com",n)}}class nF extends fD{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class iF extends _l{constructor(e,n){super(e,"google.com",n)}}class rF extends fD{constructor(e,n,i){super(e,"twitter.com",n,i)}}function sF(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:eF(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n,i){this.type=e,this.credential=n,this.user=i}static _fromIdtoken(e,n){return new Ra("enroll",e,n)}static _fromMfaPendingCredential(e){return new Ra("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,i;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return Ra._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((i=e.multiFactorSession)!=null&&i.idToken)return Ra._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n,i){this.session=e,this.hints=n,this.signInResolver=i}static _fromError(e,n){const i=nt(e),r=n.customData._serverResponse,s=(r.mfaInfo||[]).map(o=>_d._fromServerResponse(i,o));G(r.mfaPendingCredential,i,"internal-error");const a=Ra._fromMfaPendingCredential(r.mfaPendingCredential);return new mw(a,s,async o=>{const l=await o._process(i,a);delete r.mfaInfo,delete r.mfaPendingCredential;const c={...r,idToken:l.idToken,refreshToken:l.refreshToken};switch(n.operationType){case"signIn":const h=await di._fromIdTokenResponse(i,n.operationType,c);return await i._updateCurrentUser(h.user),h;case"reauthenticate":return G(n.user,i,"internal-error"),di._forOperation(n.user,n.operationType,c);default:Qt(i,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function aF(t,e){var r;const n=ee(t),i=e;return G(e.customData.operationType,n,"argument-error"),G((r=i.customData._serverResponse)==null?void 0:r.mfaPendingCredential,n,"argument-error"),mw._fromError(n,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(t,e){return ut(t,"POST","/v2/accounts/mfaEnrollment:start",ct(t,e))}function oF(t,e){return ut(t,"POST","/v2/accounts/mfaEnrollment:finalize",ct(t,e))}function lF(t,e){return ut(t,"POST","/v2/accounts/mfaEnrollment:withdraw",ct(t,e))}class pw{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(i=>_d._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new pw(e)}async getSession(){return Ra._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const i=e,r=await this.getSession(),s=await Pr(this.user,i._process(this.user.auth,r,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const r=await Pr(this.user,lF(this.user.auth,{idToken:i,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(r),await this.user.reload()}catch(r){throw r}}}const e_=new WeakMap;function cF(t){const e=ee(t);return e_.has(e)||e_.set(e,pw._fromUser(e)),e_.get(e)}const Xm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xm,"1"),this.storage.removeItem(Xm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF=1e3,hF=10;class pD extends mD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=J2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Gz()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,hF):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},uF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pD.type="LOCAL";const gw=pD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD extends mD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}gD.type="SESSION";const Wa=gD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Zp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const o=Array.from(a).map(async c=>c(n.origin,s)),l=await dF(o);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const c=vd("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return window}function mF(t){vt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(){return typeof vt().WorkerGlobalScope<"u"&&typeof vt().importScripts=="function"}async function pF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function yF(){return yw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD="firebaseLocalStorageDb",_F=1,Jm="firebaseLocalStorage",_D="fbase_key";class bd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function eg(t,e){return t.transaction([Jm],e?"readwrite":"readonly").objectStore(Jm)}function vF(){const t=indexedDB.deleteDatabase(yD);return new bd(t).toPromise()}function Mv(){const t=indexedDB.open(yD,_F);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Jm,{keyPath:_D})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Jm)?e(i):(i.close(),await vF(),e(await Mv()))})})}async function RI(t,e,n){const i=eg(t,!0).put({[_D]:e,value:n});return new bd(i).toPromise()}async function bF(t,e){const n=eg(t,!1).get(e),i=await new bd(n).toPromise();return i===void 0?null:i.value}function CI(t,e){const n=eg(t,!0).delete(e);return new bd(n).toPromise()}const wF=800,TF=3;class vD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>TF)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zp._getInstance(yF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await pF(),!this.activeServiceWorker)return;this.sender=new fF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mv();return await RI(e,Xm,"1"),await CI(e,Xm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>RI(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>bF(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>CI(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=eg(r,!1).getAll();return new bd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vD.type="LOCAL";const Nh=vD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t,e){return ut(t,"POST","/v2/accounts/mfaSignIn:start",ct(t,e))}function EF(t,e){return ut(t,"POST","/v2/accounts/mfaSignIn:finalize",ct(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=eD("rcb"),AF=new md(3e4,6e4);class SF{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=vt().grecaptcha)!=null&&e.render)}load(e,n=""){return G(IF(n),e,"argument-error"),this.shouldResolveImmediately(n)&&_I(vt().grecaptcha)?Promise.resolve(vt().grecaptcha):new Promise((i,r)=>{const s=vt().setTimeout(()=>{r(Rt(e,"network-request-failed"))},AF.get());vt()[t_]=()=>{vt().clearTimeout(s),delete vt()[t_];const o=vt().grecaptcha;if(!o||!_I(o)){r(Rt(e,"internal-error"));return}const l=o.render;o.render=(c,h)=>{const d=l(c,h);return this.counter++,d},this.hostLanguage=n,i(o)};const a=`${Jz()}?${gc({onload:t_,render:"explicit",hl:n})}`;cw(a).catch(()=>{clearTimeout(s),r(Rt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=vt().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function IF(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class xF{async load(e){return new iB(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu="recaptcha",RF={theme:"light",type:"image"};let CF=class{constructor(e,n,i={...RF}){this.parameters=i,this.type=Gu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nt(e),this.isInvisible=this.parameters.size==="invisible",G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof n=="string"?document.getElementById(n):n;G(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xF:new SF,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),i=n.getResponse(e);return i||new Promise(r=>{const s=a=>{a&&(this.tokenChangeListeners.delete(s),r(a))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(i=>i(n)),typeof e=="function")e(n);else if(typeof e=="string"){const i=vt()[e];typeof i=="function"&&i(n)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){G(ow()&&!yw(),this.auth,"internal-error"),await PF(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await kz(this.auth);G(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function PF(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=ja._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function NF(t,e,n){if(qe(t.app))return Promise.reject(Ut(t));const i=nt(t),r=await tg(i,e,ee(n));return new _w(r,s=>Xp(i,s))}async function DF(t,e,n){const i=ee(t);await Yp(!1,i,"phone");const r=await tg(i.auth,e,ee(n));return new _w(r,s=>cD(i,s))}async function kF(t,e,n){const i=ee(t);if(qe(i.auth.app))return Promise.reject(Ut(i.auth));const r=await tg(i.auth,e,ee(n));return new _w(r,s=>uD(i,s))}async function tg(t,e,n){var i;if(!t._getRecaptchaConfig())try{await cB(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const s=r.session;if("phoneNumber"in r){G(s.type==="enroll",t,"internal-error");const a={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Rs(t,a,"mfaSmsEnrollment",async(h,d)=>{if(d.phoneEnrollmentInfo.captchaResponse===Hu){G((n==null?void 0:n.type)===Gu,h,"argument-error");const f=await n_(h,d,n);return xI(h,f)}return xI(h,d)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{G(s.type==="signin",t,"internal-error");const a=((i=r.multiFactorHint)==null?void 0:i.uid)||r.multiFactorUid;G(a,t,"missing-multi-factor-info");const o={mfaPendingCredential:s.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Rs(t,o,"mfaSmsSignIn",async(d,f)=>{if(f.phoneSignInInfo.captchaResponse===Hu){G((n==null?void 0:n.type)===Gu,d,"argument-error");const p=await n_(d,f,n);return PI(d,p)}return PI(d,f)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Rs(t,s,"sendVerificationCode",async(c,h)=>{if(h.captchaResponse===Hu){G((n==null?void 0:n.type)===Gu,c,"argument-error");const d=await n_(c,h,n);return SI(c,d)}return SI(c,h)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{n==null||n._reset()}}async function VF(t,e){const n=ee(t);if(qe(n.auth.app))return Promise.reject(Ut(n.auth));await uw(n,e)}async function n_(t,e,n){G(n.type===Gu,t,"argument-error");const i=await n.verify();G(typeof i=="string",t,"argument-error");const r={...e};if("phoneEnrollmentInfo"in r){const s=r.phoneEnrollmentInfo.phoneNumber,a=r.phoneEnrollmentInfo.captchaResponse,o=r.phoneEnrollmentInfo.clientType,l=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:i,captchaResponse:a,clientType:o,recaptchaVersion:l}}),r}else if("phoneSignInInfo"in r){const s=r.phoneSignInInfo.captchaResponse,a=r.phoneSignInInfo.clientType,o=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:s,clientType:a,recaptchaVersion:o}}),r}else return Object.assign(r,{recaptchaToken:i}),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ya=class Xf{constructor(e){this.providerId=Xf.PROVIDER_ID,this.auth=nt(e)}verifyPhoneNumber(e,n){return tg(this.auth,e,ee(n))}static credential(e,n){return ja._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Xf.credentialFromTaggedObject(n)}static credentialFromError(e){return Xf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?ja._fromTokenResponse(n,i):null}};Ya.PROVIDER_ID="phone";Ya.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t,e){return e?Ln(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw extends _c{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _r(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _r(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _r(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function OF(t){return lD(t.auth,new vw(t),t.bypassAuthState)}function MF(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),oD(n,new vw(t),t.bypassAuthState)}async function LF(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),uw(n,new vw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OF;case"linkViaPopup":case"linkViaRedirect":return LF;case"reauthViaPopup":case"reauthViaRedirect":return MF;default:Qt(this.auth,"internal-error")}}resolve(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF=new md(2e3,1e4);async function jF(t,e,n){if(qe(t.app))return Promise.reject(Rt(t,"operation-not-supported-in-this-environment"));const i=nt(t);yc(t,e,Ur);const r=go(i,n);return new dr(i,"signInViaPopup",e,r).executeNotNull()}async function zF(t,e,n){const i=ee(t);if(qe(i.auth.app))return Promise.reject(Rt(i.auth,"operation-not-supported-in-this-environment"));yc(i.auth,e,Ur);const r=go(i.auth,n);return new dr(i.auth,"reauthViaPopup",e,r,i).executeNotNull()}async function BF(t,e,n){const i=ee(t);yc(i.auth,e,Ur);const r=go(i.auth,n);return new dr(i.auth,"linkViaPopup",e,r,i).executeNotNull()}class dr extends bD{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,dr.currentPopupAction&&dr.currentPopupAction.cancel(),dr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return G(e,this.auth,"internal-error"),e}async onExecution(){Ti(this.filter.length===1,"Popup operations only handle one event");const e=vd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Rt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Rt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Rt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,UF.get())};e()}}dr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF="pendingRedirect",$u=new Map;class qF extends bD{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=$u.get(this.auth._key());if(!e){try{const i=await HF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}$u.set(this.auth._key(),e)}return this.bypassAuthState||$u.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HF(t,e){const n=TD(e),i=wD(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}async function bw(t,e){return wD(t)._set(TD(e),"true")}function GF(){$u.clear()}function ww(t,e){$u.set(t._key(),e)}function wD(t){return Ln(t._redirectPersistence)}function TD(t){return Ua(FF,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $F(t,e,n){return KF(t,e,n)}async function KF(t,e,n){if(qe(t.app))return Promise.reject(Ut(t));const i=nt(t);yc(t,e,Ur),await i._initializationPromise;const r=go(i,n);return await bw(r,i),r._openRedirect(i,e,"signInViaRedirect")}function QF(t,e,n){return WF(t,e,n)}async function WF(t,e,n){const i=ee(t);if(yc(i.auth,e,Ur),qe(i.auth.app))return Promise.reject(Ut(i.auth));await i.auth._initializationPromise;const r=go(i.auth,n);await bw(r,i.auth);const s=await ED(i);return r._openRedirect(i.auth,e,"reauthViaRedirect",s)}function YF(t,e,n){return XF(t,e,n)}async function XF(t,e,n){const i=ee(t);yc(i.auth,e,Ur),await i.auth._initializationPromise;const r=go(i.auth,n);await Yp(!1,i,e.providerId),await bw(r,i.auth);const s=await ED(i);return r._openRedirect(i.auth,e,"linkViaRedirect",s)}async function JF(t,e){return await nt(t)._initializationPromise,ng(t,e,!1)}async function ng(t,e,n=!1){if(qe(t.app))return Promise.reject(Ut(t));const i=nt(t),r=go(i,e),a=await new qF(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}async function ED(t){const e=vd(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF=10*60*1e3;class AD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eq(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!SD(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Rt(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZF&&this.cachedEventUids.clear(),this.cachedEventUids.has(NI(e))}saveEventToCache(e){this.cachedEventUids.add(NI(e)),this.lastProcessedEventTime=Date.now()}}function NI(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SD({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SD(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(t,e={}){return ut(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nq=/^https?/;async function iq(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ID(t);for(const n of e)try{if(rq(n))return}catch{}Qt(t,"unauthorized-domain")}function rq(t){const e=Rh(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!nq.test(n))return!1;if(tq.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sq=new md(3e4,6e4);function DI(){const t=vt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function aq(t){return new Promise((e,n)=>{var r,s,a;function i(){DI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{DI(),n(Rt(t,"network-request-failed"))},timeout:sq.get()})}if((s=(r=vt().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=vt().gapi)!=null&&a.load)i();else{const o=eD("iframefcb");return vt()[o]=()=>{gapi.load?i():n(Rt(t,"network-request-failed"))},cw(`${eB()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw Jf=null,e})}let Jf=null;function oq(t){return Jf=Jf||aq(t),Jf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lq=new md(5e3,15e3),cq="__/auth/iframe",uq="emulator/auth/iframe",hq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fq(t){const e=t.config;G(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?lw(e,uq):`https://${t.config.authDomain}/${cq}`,i={apiKey:e.apiKey,appName:t.name,v:Mr},r=dq.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${gc(i).slice(1)}`}async function mq(t){const e=await oq(t),n=vt().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:fq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hq,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Rt(t,"network-request-failed"),o=vt().setTimeout(()=>{s(a)},lq.get());function l(){vt().clearTimeout(o),r(i)}i.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gq=500,yq=600,_q="_blank",vq="http://localhost";class kI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bq(t,e,n,i=gq,r=yq){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const l={...pq,width:i.toString(),height:r.toString(),top:s,left:a},c=tt().toLowerCase();n&&(o=Q2(c)?_q:n),$2(c)&&(e=e||vq,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[p,w])=>`${f}${p}=${w},`,"");if(Hz(c)&&o!=="_self")return wq(e||"",o),new kI(null);const d=window.open(e||"",o,h);G(d,t,"popup-blocked");try{d.focus()}catch{}return new kI(d)}function wq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tq="__/auth/handler",Eq="emulator/auth/handler",Aq=encodeURIComponent("fac");async function Lv(t,e,n,i,r,s){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Mr,eventId:r};if(e instanceof Ur){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Xj(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(s||{}))a[h]=d}if(e instanceof vc){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const l=await t._getAppCheckToken(),c=l?`#${Aq}=${encodeURIComponent(l)}`:"";return`${Sq(t)}?${gc(o).slice(1)}${c}`}function Sq({config:t}){return t.emulator?lw(t,Eq):`https://${t.authDomain}/${Tq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="webStorageSupport";class Iq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wa,this._completeRedirectFn=ng,this._overrideRedirectResult=ww}async _openPopup(e,n,i,r){var a;Ti((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await Lv(e,n,i,Rh(),r);return bq(e,s,vd())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await Lv(e,n,i,Rh(),r);return mF(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Ti(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await mq(e),i=new AD(e);return n.register("authEvent",r=>(G(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(i_,{type:i_},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[i_];s!==void 0&&n(!!s),Qt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iq(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return J2()||K2()||gd()}}const xq=Iq;class Rq{constructor(e){this.factorId=e}_process(e,n,i){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,i);case"signin":return this._finalizeSignIn(e,n.credential);default:return ji("unexpected MultiFactorSessionType")}}}class Tw extends Rq{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Tw(e)}_finalizeEnroll(e,n,i){return oF(e,{idToken:n,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return EF(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class xD{constructor(){}static assertion(e){return Tw._fromCredential(e)}}xD.FACTOR_ID="phone";var VI="@firebase/auth",OI="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Nq(t){Cr(new hi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=i.options;G(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Z2(t)},c=new Yz(i,r,s,l);return uB(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Cr(new hi("auth-internal",e=>{const n=nt(e.getProvider("auth").getImmediate());return(i=>new Cq(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qn(VI,OI,Pq(t)),qn(VI,OI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dq=5*60;zj("authIdTokenMaxAge");function kq(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Xz({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Rt("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",kq().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Nq("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vq=2e3;async function Oq(t,e,n){const{BuildInfo:i}=Xa();Ti(e.sessionId,"AuthEvent did not contain a session ID");const r=await zq(e.sessionId),s={};return gd()?s.ibi=i.packageName:pd()?s.apn=i.packageName:Qt(t,"operation-not-supported-in-this-environment"),i.displayName&&(s.appDisplayName=i.displayName),s.sessionId=r,Lv(t,n,e.type,void 0,e.eventId??void 0,s)}async function Mq(t){const{BuildInfo:e}=Xa(),n={};gd()?n.iosBundleId=e.packageName:pd()?n.androidPackageName=e.packageName:Qt(t,"operation-not-supported-in-this-environment"),await ID(t,n)}function Lq(t){const{cordova:e}=Xa();return new Promise(n=>{e.plugins.browsertab.isAvailable(i=>{let r=null;i?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,qz()?"_blank":"_system","location=yes"),n(r)})})}async function Uq(t,e,n){const{cordova:i}=Xa();let r=()=>{};try{await new Promise((s,a)=>{let o=null;function l(){var f;s();const d=(f=i.plugins.browsertab)==null?void 0:f.close;typeof d=="function"&&d(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){o||(o=window.setTimeout(()=>{a(Rt(t,"redirect-cancelled-by-user"))},Vq))}function h(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),pd()&&document.addEventListener("visibilitychange",h,!1),r=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",h,!1),o&&window.clearTimeout(o)}})}finally{r()}}function jq(t){var n,i,r,s,a,o,l,c,h,d;const e=Xa();G(typeof((n=e==null?void 0:e.universalLinks)==null?void 0:n.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),G(typeof((i=e==null?void 0:e.BuildInfo)==null?void 0:i.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),G(typeof((a=(s=(r=e==null?void 0:e.cordova)==null?void 0:r.plugins)==null?void 0:s.browsertab)==null?void 0:a.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G(typeof((c=(l=(o=e==null?void 0:e.cordova)==null?void 0:o.plugins)==null?void 0:l.browsertab)==null?void 0:c.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G(typeof((d=(h=e==null?void 0:e.cordova)==null?void 0:h.InAppBrowser)==null?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function zq(t){const e=Bq(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(r=>r.toString(16).padStart(2,"0")).join("")}function Bq(t){if(Ti(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq=20;class qq extends AD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function Hq(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:Kq(),postBody:null,tenantId:t.tenantId,error:Rt(t,"no-auth-event")}}function Gq(t,e){return Uv()._set(jv(t),e)}async function MI(t){const e=await Uv()._get(jv(t));return e&&await Uv()._remove(jv(t)),e}function $q(t,e){var i,r;const n=Wq(e);if(n.includes("/__/auth/callback")){const s=Zf(n),a=s.firebaseError?Qq(decodeURIComponent(s.firebaseError)):null,o=(r=(i=a==null?void 0:a.code)==null?void 0:i.split("auth/"))==null?void 0:r[1],l=o?Rt(o):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:n,postBody:null}}return null}function Kq(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Fq;n++){const i=Math.floor(Math.random()*e.length);t.push(e.charAt(i))}return t.join("")}function Uv(){return Ln(gw)}function jv(t){return Ua("authEvent",t.config.apiKey,t.name)}function Qq(t){try{return JSON.parse(t)}catch{return null}}function Wq(t){const e=Zf(t),n=e.link?decodeURIComponent(e.link):void 0,i=Zf(n).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Zf(r).link||r||i||n||t}function Zf(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return nl(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yq=500;class Xq{constructor(){this._redirectPersistence=Wa,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ng,this._overrideRedirectResult=ww}async _initialize(e){const n=e._key();let i=this.eventManagers.get(n);return i||(i=new qq(e),this.eventManagers.set(n,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){Qt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,i,r){jq(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),GF(),await this._originValidation(e);const a=Hq(e,i,r);await Gq(e,a);const o=await Oq(e,a,n),l=await Lq(o);return Uq(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Mq(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:i,handleOpenURL:r,BuildInfo:s}=Xa(),a=setTimeout(async()=>{await MI(e),n.onEvent(LI())},Yq),o=async h=>{clearTimeout(a);const d=await MI(e);let f=null;d&&(h!=null&&h.url)&&(f=$q(d,h.url)),n.onEvent(f||LI())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,o);const l=r,c=`${s.packageName.toLowerCase()}://`;Xa().handleOpenURL=async h=>{if(h.toLowerCase().startsWith(c)&&o({url:h}),typeof l=="function")try{l(h)}catch(d){console.error(d)}}}}const Jq=Xq;function LI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Rt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zq(t,e){nt(t)._logFramework(e)}var e8="@firebase/auth-compat",t8="0.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8=1e3;function Ku(){var t;return((t=self==null?void 0:self.location)==null?void 0:t.protocol)||null}function i8(){return Ku()==="http:"||Ku()==="https:"}function RD(t=tt()){return!!((Ku()==="file:"||Ku()==="ionic:"||Ku()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function r8(){return Zb()||Gp()}function s8(){return b2()&&(document==null?void 0:document.documentMode)===11}function a8(t=tt()){return/Edge\/\d+/.test(t)}function o8(t=tt()){return s8()||a8(t)}function CD(){try{const t=self.localStorage,e=vd();if(t)return t.setItem(e,"1"),t.removeItem(e),o8()?Sh():!0}catch{return Ew()&&Sh()}return!1}function Ew(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function r_(){return(i8()||v2()||RD())&&!r8()&&CD()&&!Ew()}function PD(){return RD()&&typeof document<"u"}async function l8(){return PD()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},n8);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function c8(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn={LOCAL:"local",NONE:"none",SESSION:"session"},iu=G,ND="persistence";function u8(t,e){if(iu(Object.values(Vn).includes(e),t,"invalid-persistence-type"),Zb()){iu(e!==Vn.SESSION,t,"unsupported-persistence-type");return}if(Gp()){iu(e===Vn.NONE,t,"unsupported-persistence-type");return}if(Ew()){iu(e===Vn.NONE||e===Vn.LOCAL&&Sh(),t,"unsupported-persistence-type");return}iu(e===Vn.NONE||CD(),t,"unsupported-persistence-type")}async function zv(t){await t._initializationPromise;const e=DD(),n=Ua(ND,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistenceType())}function h8(t,e){const n=DD();if(!n)return[];const i=Ua(ND,t,e);switch(n.getItem(i)){case Vn.NONE:return[Ol];case Vn.LOCAL:return[Nh,Wa];case Vn.SESSION:return[Wa];default:return[]}}function DD(){var t;try{return((t=c8())==null?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8=G;class ps{constructor(){this.browserResolver=Ln(xq),this.cordovaResolver=Ln(Jq),this.underlyingResolver=null,this._redirectPersistence=Wa,this._completeRedirectFn=ng,this._overrideRedirectResult=ww}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,i,r)}async _openRedirect(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,i,r)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return PD()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return d8(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await l8();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(t){return t.unwrap()}function f8(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(t){return VD(t)}function p8(t,e){var i;const n=(i=e.customData)==null?void 0:i._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const r=e;r.resolver=new g8(t,aF(t,e))}else if(n){const r=VD(e),s=e;r&&(s.credential=r,s.tenantId=n.tenantId||void 0,s.email=n.email||void 0,s.phoneNumber=n.phoneNumber||void 0)}}function VD(t){const{_tokenResponse:e}=t instanceof rn?t.customData:t;if(!e)return null;if(!(t instanceof rn)&&"temporaryProof"in e&&"phoneNumber"in e)return Ya.credentialFromResult(t);const n=e.providerId;if(!n||n===tu.PASSWORD)return null;let i;switch(n){case tu.GOOGLE:i=Di;break;case tu.FACEBOOK:i=Ni;break;case tu.GITHUB:i=ki;break;case tu.TWITTER:i=Vi;break;default:const{oauthIdToken:r,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:o,nonce:l}=e;return!s&&!a&&!r&&!o?null:o?n.startsWith("saml.")?Ml._create(n,o):Wi._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:r,accessToken:s}):new yl(n).credential({idToken:r,accessToken:s,rawNonce:l})}return t instanceof rn?i.credentialFromError(t):i.credentialFromResult(t)}function Tn(t,e){return e.catch(n=>{throw n instanceof rn&&p8(t,n),n}).then(n=>{const i=n.operationType,r=n.user;return{operationType:i,credential:m8(n),additionalUserInfo:sF(n),user:ig.getOrCreate(r)}})}async function Bv(t,e){const n=await e;return{verificationId:n.verificationId,confirm:i=>Tn(t,n.confirm(i))}}class g8{constructor(e,n){this.resolver=n,this.auth=f8(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Tn(kD(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ig=class vu{constructor(e){this._delegate=e,this.multiFactor=cF(e)}static getOrCreate(e){return vu.USER_MAP.has(e)||vu.USER_MAP.set(e,new vu(e)),vu.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Tn(this.auth,cD(this._delegate,e))}async linkWithPhoneNumber(e,n){return Bv(this.auth,DF(this._delegate,e,n))}async linkWithPopup(e){return Tn(this.auth,BF(this._delegate,e,ps))}async linkWithRedirect(e){return await zv(nt(this.auth)),YF(this._delegate,e,ps)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Tn(this.auth,uD(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return Bv(this.auth,kF(this._delegate,e,n))}reauthenticateWithPopup(e){return Tn(this.auth,zF(this._delegate,e,ps))}async reauthenticateWithRedirect(e){return await zv(nt(this.auth)),QF(this._delegate,e,ps)}sendEmailVerification(e){return QB(this._delegate,e)}async unlink(e){return await VB(this._delegate,e),this}updateEmail(e){return JB(this._delegate,e)}updatePassword(e){return ZB(this._delegate,e)}updatePhoneNumber(e){return VF(this._delegate,e)}updateProfile(e){return XB(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return WB(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};ig.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=G;class Fv{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;ru(i,"invalid-api-key",{appName:e.name}),ru(i,"invalid-api-key",{appName:e.name});const r=typeof window<"u"?ps:void 0;this._delegate=n.initialize({options:{persistence:y8(i,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Ez),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ig.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){hB(this._delegate,e,n)}applyActionCode(e){return jB(this._delegate,e)}checkActionCode(e){return hD(this._delegate,e)}confirmPasswordReset(e,n){return UB(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Tn(this._delegate,BB(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return KB(this._delegate,e)}isSignInWithEmailLink(e){return HB(this._delegate,e)}async getRedirectResult(){ru(r_(),this._delegate,"operation-not-supported-in-this-environment");const e=await JF(this._delegate,ps);return e?Tn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){Zq(this._delegate,e)}onAuthStateChanged(e,n,i){const{next:r,error:s,complete:a}=UI(e,n,i);return this._delegate.onAuthStateChanged(r,s,a)}onIdTokenChanged(e,n,i){const{next:r,error:s,complete:a}=UI(e,n,i);return this._delegate.onIdTokenChanged(r,s,a)}sendSignInLinkToEmail(e,n){return qB(this._delegate,e,n)}sendPasswordResetEmail(e,n){return LB(this._delegate,e,n||void 0)}async setPersistence(e){u8(this._delegate,e);let n;switch(e){case Vn.SESSION:n=Wa;break;case Vn.LOCAL:n=await Ln(Nh)._isAvailable()?Nh:gw;break;case Vn.NONE:n=Ol;break;default:return Qt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Tn(this._delegate,kB(this._delegate))}signInWithCredential(e){return Tn(this._delegate,Xp(this._delegate,e))}signInWithCustomToken(e){return Tn(this._delegate,MB(this._delegate,e))}signInWithEmailAndPassword(e,n){return Tn(this._delegate,FB(this._delegate,e,n))}signInWithEmailLink(e,n){return Tn(this._delegate,GB(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Bv(this._delegate,NF(this._delegate,e,n))}async signInWithPopup(e){return ru(r_(),this._delegate,"operation-not-supported-in-this-environment"),Tn(this._delegate,jF(this._delegate,e,ps))}async signInWithRedirect(e){return ru(r_(),this._delegate,"operation-not-supported-in-this-environment"),await zv(this._delegate),$F(this._delegate,e,ps)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return zB(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Fv.Persistence=Vn;function UI(t,e,n){let i=t;typeof t!="function"&&({next:i,error:e,complete:n}=t);const r=i;return{next:a=>r(a&&ig.getOrCreate(a)),error:e,complete:n}}function y8(t,e){const n=h8(t,e);if(typeof self<"u"&&!n.includes(Nh)&&n.push(Nh),typeof window<"u")for(const i of[gw,Wa])n.includes(i)||n.push(i);return n.includes(Ol)||n.push(Ol),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{static credential(e,n){return Ya.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new Ya(kD(en.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Aw.PHONE_SIGN_IN_METHOD=Ya.PHONE_SIGN_IN_METHOD;Aw.PROVIDER_ID=Ya.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8=G;class v8{constructor(e,n,i=en.app()){var r;_8((r=i.options)==null?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new CF(i.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b8="auth-compat";function w8(t){t.INTERNAL.registerComponent(new hi(b8,e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new Fv(n,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ro.EMAIL_SIGNIN,PASSWORD_RESET:Ro.PASSWORD_RESET,RECOVER_EMAIL:Ro.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ro.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ro.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ro.VERIFY_EMAIL}},EmailAuthProvider:Js,FacebookAuthProvider:Ni,GithubAuthProvider:ki,GoogleAuthProvider:Di,OAuthProvider:yl,SAMLAuthProvider:Wm,PhoneAuthProvider:Aw,PhoneMultiFactorGenerator:xD,RecaptchaVerifier:v8,TwitterAuthProvider:Vi,Auth:Fv,AuthCredential:_c,Error:rn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(e8,t8)}w8(en);var jI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cs,OD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function C(){}C.prototype=T.prototype,S.F=T.prototype,S.prototype=new C,S.prototype.constructor=S,S.D=function(N,k,O){for(var P=Array(arguments.length-2),H=2;H<arguments.length;H++)P[H-2]=arguments[H];return T.prototype[k].apply(N,P)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,T,C){C||(C=0);const N=Array(16);if(typeof T=="string")for(var k=0;k<16;++k)N[k]=T.charCodeAt(C++)|T.charCodeAt(C++)<<8|T.charCodeAt(C++)<<16|T.charCodeAt(C++)<<24;else for(k=0;k<16;++k)N[k]=T[C++]|T[C++]<<8|T[C++]<<16|T[C++]<<24;T=S.g[0],C=S.g[1],k=S.g[2];let O=S.g[3],P;P=T+(O^C&(k^O))+N[0]+3614090360&4294967295,T=C+(P<<7&4294967295|P>>>25),P=O+(k^T&(C^k))+N[1]+3905402710&4294967295,O=T+(P<<12&4294967295|P>>>20),P=k+(C^O&(T^C))+N[2]+606105819&4294967295,k=O+(P<<17&4294967295|P>>>15),P=C+(T^k&(O^T))+N[3]+3250441966&4294967295,C=k+(P<<22&4294967295|P>>>10),P=T+(O^C&(k^O))+N[4]+4118548399&4294967295,T=C+(P<<7&4294967295|P>>>25),P=O+(k^T&(C^k))+N[5]+1200080426&4294967295,O=T+(P<<12&4294967295|P>>>20),P=k+(C^O&(T^C))+N[6]+2821735955&4294967295,k=O+(P<<17&4294967295|P>>>15),P=C+(T^k&(O^T))+N[7]+4249261313&4294967295,C=k+(P<<22&4294967295|P>>>10),P=T+(O^C&(k^O))+N[8]+1770035416&4294967295,T=C+(P<<7&4294967295|P>>>25),P=O+(k^T&(C^k))+N[9]+2336552879&4294967295,O=T+(P<<12&4294967295|P>>>20),P=k+(C^O&(T^C))+N[10]+4294925233&4294967295,k=O+(P<<17&4294967295|P>>>15),P=C+(T^k&(O^T))+N[11]+2304563134&4294967295,C=k+(P<<22&4294967295|P>>>10),P=T+(O^C&(k^O))+N[12]+1804603682&4294967295,T=C+(P<<7&4294967295|P>>>25),P=O+(k^T&(C^k))+N[13]+4254626195&4294967295,O=T+(P<<12&4294967295|P>>>20),P=k+(C^O&(T^C))+N[14]+2792965006&4294967295,k=O+(P<<17&4294967295|P>>>15),P=C+(T^k&(O^T))+N[15]+1236535329&4294967295,C=k+(P<<22&4294967295|P>>>10),P=T+(k^O&(C^k))+N[1]+4129170786&4294967295,T=C+(P<<5&4294967295|P>>>27),P=O+(C^k&(T^C))+N[6]+3225465664&4294967295,O=T+(P<<9&4294967295|P>>>23),P=k+(T^C&(O^T))+N[11]+643717713&4294967295,k=O+(P<<14&4294967295|P>>>18),P=C+(O^T&(k^O))+N[0]+3921069994&4294967295,C=k+(P<<20&4294967295|P>>>12),P=T+(k^O&(C^k))+N[5]+3593408605&4294967295,T=C+(P<<5&4294967295|P>>>27),P=O+(C^k&(T^C))+N[10]+38016083&4294967295,O=T+(P<<9&4294967295|P>>>23),P=k+(T^C&(O^T))+N[15]+3634488961&4294967295,k=O+(P<<14&4294967295|P>>>18),P=C+(O^T&(k^O))+N[4]+3889429448&4294967295,C=k+(P<<20&4294967295|P>>>12),P=T+(k^O&(C^k))+N[9]+568446438&4294967295,T=C+(P<<5&4294967295|P>>>27),P=O+(C^k&(T^C))+N[14]+3275163606&4294967295,O=T+(P<<9&4294967295|P>>>23),P=k+(T^C&(O^T))+N[3]+4107603335&4294967295,k=O+(P<<14&4294967295|P>>>18),P=C+(O^T&(k^O))+N[8]+1163531501&4294967295,C=k+(P<<20&4294967295|P>>>12),P=T+(k^O&(C^k))+N[13]+2850285829&4294967295,T=C+(P<<5&4294967295|P>>>27),P=O+(C^k&(T^C))+N[2]+4243563512&4294967295,O=T+(P<<9&4294967295|P>>>23),P=k+(T^C&(O^T))+N[7]+1735328473&4294967295,k=O+(P<<14&4294967295|P>>>18),P=C+(O^T&(k^O))+N[12]+2368359562&4294967295,C=k+(P<<20&4294967295|P>>>12),P=T+(C^k^O)+N[5]+4294588738&4294967295,T=C+(P<<4&4294967295|P>>>28),P=O+(T^C^k)+N[8]+2272392833&4294967295,O=T+(P<<11&4294967295|P>>>21),P=k+(O^T^C)+N[11]+1839030562&4294967295,k=O+(P<<16&4294967295|P>>>16),P=C+(k^O^T)+N[14]+4259657740&4294967295,C=k+(P<<23&4294967295|P>>>9),P=T+(C^k^O)+N[1]+2763975236&4294967295,T=C+(P<<4&4294967295|P>>>28),P=O+(T^C^k)+N[4]+1272893353&4294967295,O=T+(P<<11&4294967295|P>>>21),P=k+(O^T^C)+N[7]+4139469664&4294967295,k=O+(P<<16&4294967295|P>>>16),P=C+(k^O^T)+N[10]+3200236656&4294967295,C=k+(P<<23&4294967295|P>>>9),P=T+(C^k^O)+N[13]+681279174&4294967295,T=C+(P<<4&4294967295|P>>>28),P=O+(T^C^k)+N[0]+3936430074&4294967295,O=T+(P<<11&4294967295|P>>>21),P=k+(O^T^C)+N[3]+3572445317&4294967295,k=O+(P<<16&4294967295|P>>>16),P=C+(k^O^T)+N[6]+76029189&4294967295,C=k+(P<<23&4294967295|P>>>9),P=T+(C^k^O)+N[9]+3654602809&4294967295,T=C+(P<<4&4294967295|P>>>28),P=O+(T^C^k)+N[12]+3873151461&4294967295,O=T+(P<<11&4294967295|P>>>21),P=k+(O^T^C)+N[15]+530742520&4294967295,k=O+(P<<16&4294967295|P>>>16),P=C+(k^O^T)+N[2]+3299628645&4294967295,C=k+(P<<23&4294967295|P>>>9),P=T+(k^(C|~O))+N[0]+4096336452&4294967295,T=C+(P<<6&4294967295|P>>>26),P=O+(C^(T|~k))+N[7]+1126891415&4294967295,O=T+(P<<10&4294967295|P>>>22),P=k+(T^(O|~C))+N[14]+2878612391&4294967295,k=O+(P<<15&4294967295|P>>>17),P=C+(O^(k|~T))+N[5]+4237533241&4294967295,C=k+(P<<21&4294967295|P>>>11),P=T+(k^(C|~O))+N[12]+1700485571&4294967295,T=C+(P<<6&4294967295|P>>>26),P=O+(C^(T|~k))+N[3]+2399980690&4294967295,O=T+(P<<10&4294967295|P>>>22),P=k+(T^(O|~C))+N[10]+4293915773&4294967295,k=O+(P<<15&4294967295|P>>>17),P=C+(O^(k|~T))+N[1]+2240044497&4294967295,C=k+(P<<21&4294967295|P>>>11),P=T+(k^(C|~O))+N[8]+1873313359&4294967295,T=C+(P<<6&4294967295|P>>>26),P=O+(C^(T|~k))+N[15]+4264355552&4294967295,O=T+(P<<10&4294967295|P>>>22),P=k+(T^(O|~C))+N[6]+2734768916&4294967295,k=O+(P<<15&4294967295|P>>>17),P=C+(O^(k|~T))+N[13]+1309151649&4294967295,C=k+(P<<21&4294967295|P>>>11),P=T+(k^(C|~O))+N[4]+4149444226&4294967295,T=C+(P<<6&4294967295|P>>>26),P=O+(C^(T|~k))+N[11]+3174756917&4294967295,O=T+(P<<10&4294967295|P>>>22),P=k+(T^(O|~C))+N[2]+718787259&4294967295,k=O+(P<<15&4294967295|P>>>17),P=C+(O^(k|~T))+N[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,S.g[2]=S.g[2]+k&4294967295,S.g[3]=S.g[3]+O&4294967295}i.prototype.v=function(S,T){T===void 0&&(T=S.length);const C=T-this.blockSize,N=this.C;let k=this.h,O=0;for(;O<T;){if(k==0)for(;O<=C;)r(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<T;)if(N[k++]=S.charCodeAt(O++),k==this.blockSize){r(this,N),k=0;break}}else for(;O<T;)if(N[k++]=S[O++],k==this.blockSize){r(this,N),k=0;break}}this.h=k,this.o+=T},i.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;T=this.o*8;for(var C=S.length-8;C<S.length;++C)S[C]=T&255,T/=256;for(this.v(S),S=Array(16),T=0,C=0;C<4;++C)for(let N=0;N<32;N+=8)S[T++]=this.g[C]>>>N&255;return S};function s(S,T){var C=o;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=T(S)}function a(S,T){this.h=T;const C=[];let N=!0;for(let k=S.length-1;k>=0;k--){const O=S[k]|0;N&&O==T||(C[k]=O,N=!1)}this.g=C}var o={};function l(S){return-128<=S&&S<128?s(S,function(T){return new a([T|0],T<0?-1:0)}):new a([S|0],S<0?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(S<0)return A(c(-S));const T=[];let C=1;for(let N=0;S>=C;N++)T[N]=S/C|0,C*=4294967296;return new a(T,0)}function h(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return A(h(S.substring(1),T));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=c(Math.pow(T,8));let N=d;for(let O=0;O<S.length;O+=8){var k=Math.min(8,S.length-O);const P=parseInt(S.substring(O,O+k),T);k<8?(k=c(Math.pow(T,k)),N=N.j(k).add(c(P))):(N=N.j(C),N=N.add(c(P)))}return N}var d=l(0),f=l(1),p=l(16777216);t=a.prototype,t.m=function(){if(E(this))return-A(this).m();let S=0,T=1;for(let C=0;C<this.g.length;C++){const N=this.i(C);S+=(N>=0?N:4294967296+N)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(E(this))return"-"+A(this).toString(S);const T=c(Math.pow(S,6));var C=this;let N="";for(;;){const k=I(C,T).g;C=v(C,k.j(T));let O=((C.g.length>0?C.g[0]:C.h)>>>0).toString(S);if(C=k,w(C))return O+N;for(;O.length<6;)O="0"+O;N=O+N}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(let T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function E(S){return S.h==-1}t.l=function(S){return S=v(this,S),E(S)?-1:w(S)?0:1};function A(S){const T=S.g.length,C=[];for(let N=0;N<T;N++)C[N]=~S.g[N];return new a(C,~S.h).add(f)}t.abs=function(){return E(this)?A(this):this},t.add=function(S){const T=Math.max(this.g.length,S.g.length),C=[];let N=0;for(let k=0;k<=T;k++){let O=N+(this.i(k)&65535)+(S.i(k)&65535),P=(O>>>16)+(this.i(k)>>>16)+(S.i(k)>>>16);N=P>>>16,O&=65535,P&=65535,C[k]=P<<16|O}return new a(C,C[C.length-1]&-2147483648?-1:0)};function v(S,T){return S.add(A(T))}t.j=function(S){if(w(this)||w(S))return d;if(E(this))return E(S)?A(this).j(A(S)):A(A(this).j(S));if(E(S))return A(this.j(A(S)));if(this.l(p)<0&&S.l(p)<0)return c(this.m()*S.m());const T=this.g.length+S.g.length,C=[];for(var N=0;N<2*T;N++)C[N]=0;for(N=0;N<this.g.length;N++)for(let k=0;k<S.g.length;k++){const O=this.i(N)>>>16,P=this.i(N)&65535,H=S.i(k)>>>16,ie=S.i(k)&65535;C[2*N+2*k]+=P*ie,_(C,2*N+2*k),C[2*N+2*k+1]+=O*ie,_(C,2*N+2*k+1),C[2*N+2*k+1]+=P*H,_(C,2*N+2*k+1),C[2*N+2*k+2]+=O*H,_(C,2*N+2*k+2)}for(S=0;S<T;S++)C[S]=C[2*S+1]<<16|C[2*S];for(S=T;S<2*T;S++)C[S]=0;return new a(C,0)};function _(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function b(S,T){this.g=S,this.h=T}function I(S,T){if(w(T))throw Error("division by zero");if(w(S))return new b(d,d);if(E(S))return T=I(A(S),T),new b(A(T.g),A(T.h));if(E(T))return T=I(S,A(T)),new b(A(T.g),T.h);if(S.g.length>30){if(E(S)||E(T))throw Error("slowDivide_ only works with positive integers.");for(var C=f,N=T;N.l(S)<=0;)C=D(C),N=D(N);var k=V(C,1),O=V(N,1);for(N=V(N,2),C=V(C,2);!w(N);){var P=O.add(N);P.l(S)<=0&&(k=k.add(C),O=P),N=V(N,1),C=V(C,1)}return T=v(S,k.j(T)),new b(k,T)}for(k=d;S.l(T)>=0;){for(C=Math.max(1,Math.floor(S.m()/T.m())),N=Math.ceil(Math.log(C)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),O=c(C),P=O.j(T);E(P)||P.l(S)>0;)C-=N,O=c(C),P=O.j(T);w(O)&&(O=f),k=k.add(O),S=v(S,P)}return new b(k,S)}t.B=function(S){return I(this,S).h},t.and=function(S){const T=Math.max(this.g.length,S.g.length),C=[];for(let N=0;N<T;N++)C[N]=this.i(N)&S.i(N);return new a(C,this.h&S.h)},t.or=function(S){const T=Math.max(this.g.length,S.g.length),C=[];for(let N=0;N<T;N++)C[N]=this.i(N)|S.i(N);return new a(C,this.h|S.h)},t.xor=function(S){const T=Math.max(this.g.length,S.g.length),C=[];for(let N=0;N<T;N++)C[N]=this.i(N)^S.i(N);return new a(C,this.h^S.h)};function D(S){const T=S.g.length+1,C=[];for(let N=0;N<T;N++)C[N]=S.i(N)<<1|S.i(N-1)>>>31;return new a(C,S.h)}function V(S,T){const C=T>>5;T%=32;const N=S.g.length-C,k=[];for(let O=0;O<N;O++)k[O]=T>0?S.i(O+C)>>>T|S.i(O+C+1)<<32-T:S.i(O+C);return new a(k,S.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,OD=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=h,Cs=a}).apply(typeof jI<"u"?jI:typeof self<"u"?self:typeof window<"u"?window:{});var _f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var MD,bu,LD,em,qv,UD,jD,zD;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof _f=="object"&&_f];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function r(u,m){if(m)e:{var y=i;u=u.split(".");for(var x=0;x<u.length-1;x++){var L=u[x];if(!(L in y))break e;y=y[L]}u=u[u.length-1],x=y[u],m=m(x),m!=x&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}r("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(u){return u||function(m){var y=[],x;for(x in m)Object.prototype.hasOwnProperty.call(m,x)&&y.push([x,m[x]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function o(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function l(u,m,y){return u.call.apply(u.bind,arguments)}function c(u,m,y){return c=l,c.apply(null,arguments)}function h(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var x=y.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function d(u,m){function y(){}y.prototype=m.prototype,u.Z=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Ob=function(x,L,j){for(var K=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)K[ue-2]=arguments[ue];return m.prototype[L].apply(x,K)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function p(u){const m=u.length;if(m>0){const y=Array(m);for(let x=0;x<m;x++)y[x]=u[x];return y}return[]}function w(u,m){for(let x=1;x<arguments.length;x++){const L=arguments[x];var y=typeof L;if(y=y!="object"?y:L?Array.isArray(L)?"array":y:"null",y=="array"||y=="object"&&typeof L.length=="number"){y=u.length||0;const j=L.length||0;u.length=y+j;for(let K=0;K<j;K++)u[y+K]=L[K]}else u.push(L)}}class E{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function A(u){a.setTimeout(()=>{throw u},0)}function v(){var u=S;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class _{constructor(){this.h=this.g=null}add(m,y){const x=b.get();x.set(m,y),this.h?this.h.next=x:this.g=x,this.h=x}}var b=new E(()=>new I,u=>u.reset());class I{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let D,V=!1,S=new _,T=()=>{const u=Promise.resolve(void 0);D=()=>{u.then(C)}};function C(){for(var u;u=v();){try{u.h.call(u.g)}catch(y){A(y)}var m=b;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}V=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};a.addEventListener("test",y,m),a.removeEventListener("test",y,m)}catch{}return u}();function P(u){return/^[\s\xa0]*$/.test(u)}function H(u,m){k.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}d(H,k),H.prototype.init=function(u,m){const y=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&H.Z.h.call(this)},H.prototype.h=function(){H.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ie="closure_listenable_"+(Math.random()*1e6|0),z=0;function Y(u,m,y,x,L){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!x,this.ha=L,this.key=++z,this.da=this.fa=!1}function J(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ne(u,m,y){for(const x in u)m.call(y,u[x],x,u)}function Q(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function de(u){const m={};for(const y in u)m[y]=u[y];return m}const Nt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function St(u,m){let y,x;for(let L=1;L<arguments.length;L++){x=arguments[L];for(y in x)u[y]=x[y];for(let j=0;j<Nt.length;j++)y=Nt[j],Object.prototype.hasOwnProperty.call(x,y)&&(u[y]=x[y])}}function ht(u){this.src=u,this.g={},this.h=0}ht.prototype.add=function(u,m,y,x,L){const j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);const K=zg(u,m,x,L);return K>-1?(m=u[K],y||(m.fa=!1)):(m=new Y(m,this.src,j,!!x,L),m.fa=y,u.push(m)),m};function Ii(u,m){const y=m.type;if(y in u.g){var x=u.g[y],L=Array.prototype.indexOf.call(x,m,void 0),j;(j=L>=0)&&Array.prototype.splice.call(x,L,1),j&&(J(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function zg(u,m,y,x){for(let L=0;L<u.length;++L){const j=u[L];if(!j.da&&j.listener==m&&j.capture==!!y&&j.ha==x)return L}return-1}var Bg="closure_lm_"+(Math.random()*1e6|0),Fg={};function wE(u,m,y,x,L){if(Array.isArray(m)){for(let j=0;j<m.length;j++)wE(u,m[j],y,x,L);return null}return y=AE(y),u&&u[ie]?u.J(m,y,o(x)?!!x.capture:!1,L):DL(u,m,y,!1,x,L)}function DL(u,m,y,x,L,j){if(!m)throw Error("Invalid event type");const K=o(L)?!!L.capture:!!L;let ue=Hg(u);if(ue||(u[Bg]=ue=new ht(u)),y=ue.add(m,y,x,K,j),y.proxy)return y;if(x=kL(),y.proxy=x,x.src=u,x.listener=y,u.addEventListener)O||(L=K),L===void 0&&(L=!1),u.addEventListener(m.toString(),x,L);else if(u.attachEvent)u.attachEvent(EE(m.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return y}function kL(){function u(y){return m.call(u.src,u.listener,y)}const m=VL;return u}function TE(u,m,y,x,L){if(Array.isArray(m))for(var j=0;j<m.length;j++)TE(u,m[j],y,x,L);else x=o(x)?!!x.capture:!!x,y=AE(y),u&&u[ie]?(u=u.i,j=String(m).toString(),j in u.g&&(m=u.g[j],y=zg(m,y,x,L),y>-1&&(J(m[y]),Array.prototype.splice.call(m,y,1),m.length==0&&(delete u.g[j],u.h--)))):u&&(u=Hg(u))&&(m=u.g[m.toString()],u=-1,m&&(u=zg(m,y,x,L)),(y=u>-1?m[u]:null)&&qg(y))}function qg(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ie])Ii(m.i,u);else{var y=u.type,x=u.proxy;m.removeEventListener?m.removeEventListener(y,x,u.capture):m.detachEvent?m.detachEvent(EE(y),x):m.addListener&&m.removeListener&&m.removeListener(x),(y=Hg(m))?(Ii(y,u),y.h==0&&(y.src=null,m[Bg]=null)):J(u)}}}function EE(u){return u in Fg?Fg[u]:Fg[u]="on"+u}function VL(u,m){if(u.da)u=!0;else{m=new H(m,this);const y=u.listener,x=u.ha||u.src;u.fa&&qg(u),u=y.call(x,m)}return u}function Hg(u){return u=u[Bg],u instanceof ht?u:null}var Gg="__closure_events_fn_"+(Math.random()*1e9>>>0);function AE(u){return typeof u=="function"?u:(u[Gg]||(u[Gg]=function(m){return u.handleEvent(m)}),u[Gg])}function Wt(){N.call(this),this.i=new ht(this),this.M=this,this.G=null}d(Wt,N),Wt.prototype[ie]=!0,Wt.prototype.removeEventListener=function(u,m,y,x){TE(this,u,m,y,x)};function on(u,m){var y,x=u.G;if(x)for(y=[];x;x=x.G)y.push(x);if(u=u.M,x=m.type||m,typeof m=="string")m=new k(m,u);else if(m instanceof k)m.target=m.target||u;else{var L=m;m=new k(x,u),St(m,L)}L=!0;let j,K;if(y)for(K=y.length-1;K>=0;K--)j=m.g=y[K],L=zd(j,x,!0,m)&&L;if(j=m.g=u,L=zd(j,x,!0,m)&&L,L=zd(j,x,!1,m)&&L,y)for(K=0;K<y.length;K++)j=m.g=y[K],L=zd(j,x,!1,m)&&L}Wt.prototype.N=function(){if(Wt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const y=u.g[m];for(let x=0;x<y.length;x++)J(y[x]);delete u.g[m],u.h--}}this.G=null},Wt.prototype.J=function(u,m,y,x){return this.i.add(String(u),m,!1,y,x)},Wt.prototype.K=function(u,m,y,x){return this.i.add(String(u),m,!0,y,x)};function zd(u,m,y,x){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let L=!0;for(let j=0;j<m.length;++j){const K=m[j];if(K&&!K.da&&K.capture==y){const ue=K.listener,It=K.ha||K.src;K.fa&&Ii(u.i,K),L=ue.call(It,x)!==!1&&L}}return L&&!x.defaultPrevented}function OL(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:a.setTimeout(u,m||0)}function SE(u){u.g=OL(()=>{u.g=null,u.i&&(u.i=!1,SE(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class ML extends N{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:SE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nc(u){N.call(this),this.h=u,this.g={}}d(Nc,N);var IE=[];function xE(u){ne(u.g,function(m,y){this.g.hasOwnProperty(y)&&qg(m)},u),u.g={}}Nc.prototype.N=function(){Nc.Z.N.call(this),xE(this)},Nc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $g=a.JSON.stringify,LL=a.JSON.parse,UL=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function RE(){}function CE(){}var Dc={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kg(){k.call(this,"d")}d(Kg,k);function Qg(){k.call(this,"c")}d(Qg,k);var aa={},PE=null;function Bd(){return PE=PE||new Wt}aa.Ia="serverreachability";function NE(u){k.call(this,aa.Ia,u)}d(NE,k);function kc(u){const m=Bd();on(m,new NE(m))}aa.STAT_EVENT="statevent";function DE(u,m){k.call(this,aa.STAT_EVENT,u),this.stat=m}d(DE,k);function ln(u){const m=Bd();on(m,new DE(m,u))}aa.Ja="timingevent";function kE(u,m){k.call(this,aa.Ja,u),this.size=m}d(kE,k);function Vc(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},m)}function Oc(){this.g=!0}Oc.prototype.ua=function(){this.g=!1};function jL(u,m,y,x,L,j){u.info(function(){if(u.g)if(j){var K="",ue=j.split("&");for(let Ve=0;Ve<ue.length;Ve++){var It=ue[Ve].split("=");if(It.length>1){const Dt=It[0];It=It[1];const Ri=Dt.split("_");K=Ri.length>=2&&Ri[1]=="type"?K+(Dt+"="+It+"&"):K+(Dt+"=redacted&")}}}else K=null;else K=j;return"XMLHTTP REQ ("+x+") [attempt "+L+"]: "+m+`
`+y+`
`+K})}function zL(u,m,y,x,L,j,K){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+L+"]: "+m+`
`+y+`
`+j+" "+K})}function Eo(u,m,y,x){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+FL(u,y)+(x?" "+x:"")})}function BL(u,m){u.info(function(){return"TIMEOUT: "+m})}Oc.prototype.info=function(){};function FL(u,m){if(!u.g)return m;if(!m)return null;try{const j=JSON.parse(m);if(j){for(u=0;u<j.length;u++)if(Array.isArray(j[u])){var y=j[u];if(!(y.length<2)){var x=y[1];if(Array.isArray(x)&&!(x.length<1)){var L=x[0];if(L!="noop"&&L!="stop"&&L!="close")for(let K=1;K<x.length;K++)x[K]=""}}}}return $g(j)}catch{return m}}var Fd={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},VE={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},OE;function Wg(){}d(Wg,RE),Wg.prototype.g=function(){return new XMLHttpRequest},OE=new Wg;function Mc(u){return encodeURIComponent(String(u))}function qL(u){var m=1;u=u.split(":");const y=[];for(;m>0&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function Hr(u,m,y,x){this.j=u,this.i=m,this.l=y,this.S=x||1,this.V=new Nc(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ME}function ME(){this.i=null,this.g="",this.h=!1}var LE={},Yg={};function Xg(u,m,y){u.M=1,u.A=Hd(xi(m)),u.u=y,u.R=!0,UE(u,null)}function UE(u,m){u.F=Date.now(),qd(u),u.B=xi(u.A);var y=u.B,x=u.S;Array.isArray(x)||(x=[String(x)]),XE(y.i,"t",x),u.C=0,y=u.j.L,u.h=new ME,u.g=pA(u.j,y?m:null,!u.u),u.P>0&&(u.O=new ML(c(u.Y,u,u.g),u.P)),m=u.V,y=u.g,x=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(IE[0]=L.toString()),L=IE);for(let j=0;j<L.length;j++){const K=wE(y,L[j],x||m.handleEvent,!1,m.h||m);if(!K)break;m.g[K.key]=K}m=u.J?de(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),kc(),jL(u.i,u.v,u.B,u.l,u.S,u.u)}Hr.prototype.ba=function(u){u=u.target;const m=this.O;m&&Kr(u)==3?m.j():this.Y(u)},Hr.prototype.Y=function(u){try{if(u==this.g)e:{const ue=Kr(this.g),It=this.g.ya(),Ve=this.g.ca();if(!(ue<3)&&(ue!=3||this.g&&(this.h.h||this.g.la()||rA(this.g)))){this.K||ue!=4||It==7||(It==8||Ve<=0?kc(3):kc(2)),Jg(this);var m=this.g.ca();this.X=m;var y=HL(this);if(this.o=m==200,zL(this.i,this.v,this.B,this.l,this.S,ue,m),this.o){if(this.U&&!this.L){t:{if(this.g){var x,L=this.g;if((x=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(x)){var j=x;break t}}j=null}if(u=j)Eo(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Zg(this,u);else{this.o=!1,this.m=3,ln(12),oa(this),Lc(this);break e}}if(this.R){u=!0;let Dt;for(;!this.K&&this.C<y.length;)if(Dt=GL(this,y),Dt==Yg){ue==4&&(this.m=4,ln(14),u=!1),Eo(this.i,this.l,null,"[Incomplete Response]");break}else if(Dt==LE){this.m=4,ln(15),Eo(this.i,this.l,y,"[Invalid Chunk]"),u=!1;break}else Eo(this.i,this.l,Dt,null),Zg(this,Dt);if(jE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||y.length!=0||this.h.h||(this.m=1,ln(16),u=!1),this.o=this.o&&u,!u)Eo(this.i,this.l,y,"[Invalid Chunked Response]"),oa(this),Lc(this);else if(y.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),oy(K),K.P=!0,ln(11))}}else Eo(this.i,this.l,y,null),Zg(this,y);ue==4&&oa(this),this.o&&!this.K&&(ue==4?hA(this.j,this):(this.o=!1,qd(this)))}else s4(this.g),m==400&&y.indexOf("Unknown SID")>0?(this.m=3,ln(12)):(this.m=0,ln(13)),oa(this),Lc(this)}}}catch{}finally{}};function HL(u){if(!jE(u))return u.g.la();const m=rA(u.g);if(m==="")return"";let y="";const x=m.length,L=Kr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return oa(u),Lc(u),"";u.h.i=new a.TextDecoder}for(let j=0;j<x;j++)u.h.h=!0,y+=u.h.i.decode(m[j],{stream:!(L&&j==x-1)});return m.length=0,u.h.g+=y,u.C=0,u.h.g}function jE(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function GL(u,m){var y=u.C,x=m.indexOf(`
`,y);return x==-1?Yg:(y=Number(m.substring(y,x)),isNaN(y)?LE:(x+=1,x+y>m.length?Yg:(m=m.slice(x,x+y),u.C=x+y,m)))}Hr.prototype.cancel=function(){this.K=!0,oa(this)};function qd(u){u.T=Date.now()+u.H,zE(u,u.H)}function zE(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Vc(c(u.aa,u),m)}function Jg(u){u.D&&(a.clearTimeout(u.D),u.D=null)}Hr.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(BL(this.i,this.B),this.M!=2&&(kc(),ln(17)),oa(this),this.m=2,Lc(this)):zE(this,this.T-u)};function Lc(u){u.j.I==0||u.K||hA(u.j,u)}function oa(u){Jg(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,xE(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Zg(u,m){try{var y=u.j;if(y.I!=0&&(y.g==u||ey(y.h,u))){if(!u.L&&ey(y.h,u)&&y.I==3){try{var x=y.Ba.g.parse(m)}catch{x=null}if(Array.isArray(x)&&x.length==3){var L=x;if(L[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<u.F)Wd(y),Kd(y);else break e;ay(y),ln(18)}}else y.xa=L[1],0<y.xa-y.K&&L[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Vc(c(y.Va,y),6e3));qE(y.h)<=1&&y.ta&&(y.ta=void 0)}else ca(y,11)}else if((u.L||y.g==u)&&Wd(y),!P(m))for(L=y.Ba.g.parse(m),m=0;m<L.length;m++){let Ve=L[m];const Dt=Ve[0];if(!(Dt<=y.K))if(y.K=Dt,Ve=Ve[1],y.I==2)if(Ve[0]=="c"){y.M=Ve[1],y.ba=Ve[2];const Ri=Ve[3];Ri!=null&&(y.ka=Ri,y.j.info("VER="+y.ka));const ua=Ve[4];ua!=null&&(y.za=ua,y.j.info("SVER="+y.za));const Qr=Ve[5];Qr!=null&&typeof Qr=="number"&&Qr>0&&(x=1.5*Qr,y.O=x,y.j.info("backChannelRequestTimeoutMs_="+x)),x=y;const Wr=u.g;if(Wr){const Xd=Wr.g?Wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xd){var j=x.h;j.g||Xd.indexOf("spdy")==-1&&Xd.indexOf("quic")==-1&&Xd.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(ty(j,j.h),j.h=null))}if(x.G){const ly=Wr.g?Wr.g.getResponseHeader("X-HTTP-Session-Id"):null;ly&&(x.wa=ly,je(x.J,x.G,ly))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-u.F,y.j.info("Handshake RTT: "+y.T+"ms")),x=y;var K=u;if(x.na=mA(x,x.L?x.ba:null,x.W),K.L){HE(x.h,K);var ue=K,It=x.O;It&&(ue.H=It),ue.D&&(Jg(ue),qd(ue)),x.g=K}else cA(x);y.i.length>0&&Qd(y)}else Ve[0]!="stop"&&Ve[0]!="close"||ca(y,7);else y.I==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?ca(y,7):sy(y):Ve[0]!="noop"&&y.l&&y.l.qa(Ve),y.A=0)}}kc(4)}catch{}}var $L=class{constructor(u,m){this.g=u,this.map=m}};function BE(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function FE(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function qE(u){return u.h?1:u.g?u.g.size:0}function ey(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ty(u,m){u.g?u.g.add(m):u.h=m}function HE(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}BE.prototype.cancel=function(){if(this.i=GE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function GE(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.G);return m}return p(u.i)}var $E=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function KL(u,m){if(u){u=u.split("&");for(let y=0;y<u.length;y++){const x=u[y].indexOf("=");let L,j=null;x>=0?(L=u[y].substring(0,x),j=u[y].substring(x+1)):L=u[y],m(L,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Gr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Gr?(this.l=u.l,Uc(this,u.j),this.o=u.o,this.g=u.g,jc(this,u.u),this.h=u.h,ny(this,JE(u.i)),this.m=u.m):u&&(m=String(u).match($E))?(this.l=!1,Uc(this,m[1]||"",!0),this.o=zc(m[2]||""),this.g=zc(m[3]||"",!0),jc(this,m[4]),this.h=zc(m[5]||"",!0),ny(this,m[6]||"",!0),this.m=zc(m[7]||"")):(this.l=!1,this.i=new Fc(null,this.l))}Gr.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Bc(m,KE,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Bc(m,KE,!0),"@"),u.push(Mc(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&u.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Bc(y,y.charAt(0)=="/"?YL:WL,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Bc(y,JL)),u.join("")},Gr.prototype.resolve=function(u){const m=xi(this);let y=!!u.j;y?Uc(m,u.j):y=!!u.o,y?m.o=u.o:y=!!u.g,y?m.g=u.g:y=u.u!=null;var x=u.h;if(y)jc(m,u.u);else if(y=!!u.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var L=m.h.lastIndexOf("/");L!=-1&&(x=m.h.slice(0,L+1)+x)}if(L=x,L==".."||L==".")x="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){x=L.lastIndexOf("/",0)==0,L=L.split("/");const j=[];for(let K=0;K<L.length;){const ue=L[K++];ue=="."?x&&K==L.length&&j.push(""):ue==".."?((j.length>1||j.length==1&&j[0]!="")&&j.pop(),x&&K==L.length&&j.push("")):(j.push(ue),x=!0)}x=j.join("/")}else x=L}return y?m.h=x:y=u.i.toString()!=="",y?ny(m,JE(u.i)):y=!!u.m,y&&(m.m=u.m),m};function xi(u){return new Gr(u)}function Uc(u,m,y){u.j=y?zc(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function jc(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function ny(u,m,y){m instanceof Fc?(u.i=m,ZL(u.i,u.l)):(y||(m=Bc(m,XL)),u.i=new Fc(m,u.l))}function je(u,m,y){u.i.set(m,y)}function Hd(u){return je(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function zc(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Bc(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,QL),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function QL(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var KE=/[#\/\?@]/g,WL=/[#\?:]/g,YL=/[#\?]/g,XL=/[#\?@]/g,JL=/#/g;function Fc(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function la(u){u.g||(u.g=new Map,u.h=0,u.i&&KL(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=Fc.prototype,t.add=function(u,m){la(this),this.i=null,u=Ao(this,u);let y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function QE(u,m){la(u),m=Ao(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function WE(u,m){return la(u),m=Ao(u,m),u.g.has(m)}t.forEach=function(u,m){la(this),this.g.forEach(function(y,x){y.forEach(function(L){u.call(m,L,x,this)},this)},this)};function YE(u,m){la(u);let y=[];if(typeof m=="string")WE(u,m)&&(y=y.concat(u.g.get(Ao(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)y=y.concat(u[m]);return y}t.set=function(u,m){return la(this),this.i=null,u=Ao(this,u),WE(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=YE(this,u),u.length>0?String(u[0]):m):m};function XE(u,m,y){QE(u,m),y.length>0&&(u.i=null,u.g.set(Ao(u,m),p(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let x=0;x<m.length;x++){var y=m[x];const L=Mc(y);y=YE(this,y);for(let j=0;j<y.length;j++){let K=L;y[j]!==""&&(K+="="+Mc(y[j])),u.push(K)}}return this.i=u.join("&")};function JE(u){const m=new Fc;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Ao(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function ZL(u,m){m&&!u.j&&(la(u),u.i=null,u.g.forEach(function(y,x){const L=x.toLowerCase();x!=L&&(QE(this,x),XE(this,L,y))},u)),u.j=m}function e4(u,m){const y=new Oc;if(a.Image){const x=new Image;x.onload=h($r,y,"TestLoadImage: loaded",!0,m,x),x.onerror=h($r,y,"TestLoadImage: error",!1,m,x),x.onabort=h($r,y,"TestLoadImage: abort",!1,m,x),x.ontimeout=h($r,y,"TestLoadImage: timeout",!1,m,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else m(!1)}function t4(u,m){const y=new Oc,x=new AbortController,L=setTimeout(()=>{x.abort(),$r(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:x.signal}).then(j=>{clearTimeout(L),j.ok?$r(y,"TestPingServer: ok",!0,m):$r(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),$r(y,"TestPingServer: error",!1,m)})}function $r(u,m,y,x,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),x(y)}catch{}}function n4(){this.g=new UL}function iy(u){this.i=u.Sb||null,this.h=u.ab||!1}d(iy,RE),iy.prototype.g=function(){return new Gd(this.i,this.h)};function Gd(u,m){Wt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Gd,Wt),t=Gd.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Hc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||a).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qc(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Hc(this)),this.g&&(this.readyState=3,Hc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ZE(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ZE(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?qc(this):Hc(this),this.readyState==3&&ZE(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,qc(this))},t.Na=function(u){this.g&&(this.response=u,qc(this))},t.ga=function(){this.g&&qc(this)};function qc(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Hc(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function Hc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Gd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function eA(u){let m="";return ne(u,function(y,x){m+=x,m+=":",m+=y,m+=`\r
`}),m}function ry(u,m,y){e:{for(x in y){var x=!1;break e}x=!0}x||(y=eA(y),typeof u=="string"?y!=null&&Mc(y):je(u,m,y))}function rt(u){Wt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(rt,Wt);var i4=/^https?$/i,r4=["POST","PUT"];t=rt.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,y,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():OE.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){tA(this,j);return}if(u=y||"",y=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var L in x)y.set(L,x[L]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const j of x.keys())y.set(j,x.get(j));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(y.keys()).find(j=>j.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(Array.prototype.indexOf.call(r4,m,void 0)>=0)||x||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,K]of y)this.g.setRequestHeader(j,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(j){tA(this,j)}};function tA(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,nA(u),$d(u)}function nA(u){u.A||(u.A=!0,on(u,"complete"),on(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,on(this,"complete"),on(this,"abort"),$d(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$d(this,!0)),rt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?iA(this):this.Xa())},t.Xa=function(){iA(this)};function iA(u){if(u.h&&typeof s<"u"){if(u.v&&Kr(u)==4)setTimeout(u.Ca.bind(u),0);else if(on(u,"readystatechange"),Kr(u)==4){u.h=!1;try{const j=u.ca();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var x;if(x=j===0){let K=String(u.D).match($E)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),x=!i4.test(K?K.toLowerCase():"")}y=x}if(y)on(u,"complete"),on(u,"success");else{u.o=6;try{var L=Kr(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",nA(u)}}finally{$d(u)}}}}function $d(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const y=u.g;u.g=null,m||on(u,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Kr(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Kr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),LL(m)}};function rA(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function s4(u){const m={};u=(u.g&&Kr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(P(u[x]))continue;var y=qL(u[x]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const j=m[L]||[];m[L]=j,j.push(y)}Q(m,function(x){return x.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gc(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function sA(u){this.za=0,this.i=[],this.j=new Oc,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Gc("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Gc("baseRetryDelayMs",5e3,u),this.Za=Gc("retryDelaySeedMs",1e4,u),this.Ta=Gc("forwardChannelMaxRetries",2,u),this.va=Gc("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new BE(u&&u.concurrentRequestLimit),this.Ba=new n4,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=sA.prototype,t.ka=8,t.I=1,t.connect=function(u,m,y,x){ln(0),this.W=u,this.H=m||{},y&&x!==void 0&&(this.H.OSID=y,this.H.OAID=x),this.F=this.X,this.J=mA(this,null,this.W),Qd(this)};function sy(u){if(aA(u),u.I==3){var m=u.V++,y=xi(u.J);if(je(y,"SID",u.M),je(y,"RID",m),je(y,"TYPE","terminate"),$c(u,y),m=new Hr(u,u.j,m),m.M=2,m.A=Hd(xi(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(m.A.toString(),"")}catch{}!y&&a.Image&&(new Image().src=m.A,y=!0),y||(m.g=pA(m.j,null),m.g.ea(m.A)),m.F=Date.now(),qd(m)}fA(u)}function Kd(u){u.g&&(oy(u),u.g.cancel(),u.g=null)}function aA(u){Kd(u),u.v&&(a.clearTimeout(u.v),u.v=null),Wd(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&a.clearTimeout(u.m),u.m=null)}function Qd(u){if(!FE(u.h)&&!u.m){u.m=!0;var m=u.Ea;D||T(),V||(D(),V=!0),S.add(m,u),u.D=0}}function a4(u,m){return qE(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Vc(c(u.Ea,u,m),dA(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new Hr(this,this.j,u);let j=this.o;if(this.U&&(j?(j=de(j),St(j,this.U)):j=this.U),this.u!==null||this.R||(L.J=j,j=null),this.S)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var x=this.i[y];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(m+=x,m>4096){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=lA(this,L,m),y=xi(this.J),je(y,"RID",u),je(y,"CVER",22),this.G&&je(y,"X-HTTP-Session-Id",this.G),$c(this,y),j&&(this.R?m="headers="+Mc(eA(j))+"&"+m:this.u&&ry(y,this.u,j)),ty(this.h,L),this.Ra&&je(y,"TYPE","init"),this.S?(je(y,"$req",m),je(y,"SID","null"),L.U=!0,Xg(L,y,null)):Xg(L,y,m),this.I=2}}else this.I==3&&(u?oA(this,u):this.i.length==0||FE(this.h)||oA(this))};function oA(u,m){var y;m?y=m.l:y=u.V++;const x=xi(u.J);je(x,"SID",u.M),je(x,"RID",y),je(x,"AID",u.K),$c(u,x),u.u&&u.o&&ry(x,u.u,u.o),y=new Hr(u,u.j,y,u.D+1),u.u===null&&(y.J=u.o),m&&(u.i=m.G.concat(u.i)),m=lA(u,y,1e3),y.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ty(u.h,y),Xg(y,x,m)}function $c(u,m){u.H&&ne(u.H,function(y,x){je(m,x,y)}),u.l&&ne({},function(y,x){je(m,x,y)})}function lA(u,m,y){y=Math.min(u.i.length,y);const x=u.l?c(u.l.Ka,u.l,u):null;e:{var L=u.i;let ue=-1;for(;;){const It=["count="+y];ue==-1?y>0?(ue=L[0].g,It.push("ofs="+ue)):ue=0:It.push("ofs="+ue);let Ve=!0;for(let Dt=0;Dt<y;Dt++){var j=L[Dt].g;const Ri=L[Dt].map;if(j-=ue,j<0)ue=Math.max(0,L[Dt].g-100),Ve=!1;else try{j="req"+j+"_"||"";try{var K=Ri instanceof Map?Ri:Object.entries(Ri);for(const[ua,Qr]of K){let Wr=Qr;o(Qr)&&(Wr=$g(Qr)),It.push(j+ua+"="+encodeURIComponent(Wr))}}catch(ua){throw It.push(j+"type="+encodeURIComponent("_badmap")),ua}}catch{x&&x(Ri)}}if(Ve){K=It.join("&");break e}}K=void 0}return u=u.i.splice(0,y),m.G=u,K}function cA(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;D||T(),V||(D(),V=!0),S.add(m,u),u.A=0}}function ay(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Vc(c(u.Da,u),dA(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,uA(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Vc(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ln(10),Kd(this),uA(this))};function oy(u){u.B!=null&&(a.clearTimeout(u.B),u.B=null)}function uA(u){u.g=new Hr(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=xi(u.na);je(m,"RID","rpc"),je(m,"SID",u.M),je(m,"AID",u.K),je(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&je(m,"TO",u.ia),je(m,"TYPE","xmlhttp"),$c(u,m),u.u&&u.o&&ry(m,u.u,u.o),u.O&&(u.g.H=u.O);var y=u.g;u=u.ba,y.M=1,y.A=Hd(xi(m)),y.u=null,y.R=!0,UE(y,u)}t.Va=function(){this.C!=null&&(this.C=null,Kd(this),ay(this),ln(19))};function Wd(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function hA(u,m){var y=null;if(u.g==m){Wd(u),oy(u),u.g=null;var x=2}else if(ey(u.h,m))y=m.G,HE(u.h,m),x=1;else return;if(u.I!=0){if(m.o)if(x==1){y=m.u?m.u.length:0,m=Date.now()-m.F;var L=u.D;x=Bd(),on(x,new kE(x,y)),Qd(u)}else cA(u);else if(L=m.m,L==3||L==0&&m.X>0||!(x==1&&a4(u,m)||x==2&&ay(u)))switch(y&&y.length>0&&(m=u.h,m.i=m.i.concat(y)),L){case 1:ca(u,5);break;case 4:ca(u,10);break;case 3:ca(u,6);break;default:ca(u,2)}}}function dA(u,m){let y=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(y*=2),y*m}function ca(u,m){if(u.j.info("Error code "+m),m==2){var y=c(u.bb,u),x=u.Ua;const L=!x;x=new Gr(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Uc(x,"https"),Hd(x),L?e4(x.toString(),y):t4(x.toString(),y)}else ln(2);u.I=0,u.l&&u.l.pa(m),fA(u),aA(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ln(2)):(this.j.info("Failed to ping google.com"),ln(1))};function fA(u){if(u.I=0,u.ja=[],u.l){const m=GE(u.h);(m.length!=0||u.i.length!=0)&&(w(u.ja,m),w(u.ja,u.i),u.h.i.length=0,p(u.i),u.i.length=0),u.l.oa()}}function mA(u,m,y){var x=y instanceof Gr?xi(y):new Gr(y);if(x.g!="")m&&(x.g=m+"."+x.g),jc(x,x.u);else{var L=a.location;x=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;const j=new Gr(null);x&&Uc(j,x),m&&(j.g=m),L&&jc(j,L),y&&(j.h=y),x=j}return y=u.G,m=u.wa,y&&m&&je(x,y,m),je(x,"VER",u.ka),$c(u,x),x}function pA(u,m,y){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new rt(new iy({ab:y})):new rt(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gA(){}t=gA.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Yd(){}Yd.prototype.g=function(u,m){return new Pn(u,m)};function Pn(u,m){Wt.call(this),this.g=new sA(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!P(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!P(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new So(this)}d(Pn,Wt),Pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pn.prototype.close=function(){sy(this.g)},Pn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.v&&(y={},y.__data__=$g(u),u=y);m.i.push(new $L(m.Ya++,u)),m.I==3&&Qd(m)},Pn.prototype.N=function(){this.g.l=null,delete this.j,sy(this.g),delete this.g,Pn.Z.N.call(this)};function yA(u){Kg.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const y in m){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}d(yA,Kg);function _A(){Qg.call(this),this.status=1}d(_A,Qg);function So(u){this.g=u}d(So,gA),So.prototype.ra=function(){on(this.g,"a")},So.prototype.qa=function(u){on(this.g,new yA(u))},So.prototype.pa=function(u){on(this.g,new _A)},So.prototype.oa=function(){on(this.g,"b")},Yd.prototype.createWebChannel=Yd.prototype.g,Pn.prototype.send=Pn.prototype.o,Pn.prototype.open=Pn.prototype.m,Pn.prototype.close=Pn.prototype.close,zD=function(){return new Yd},jD=function(){return Bd()},UD=aa,qv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fd.NO_ERROR=0,Fd.TIMEOUT=8,Fd.HTTP_ERROR=6,em=Fd,VE.COMPLETE="complete",LD=VE,CE.EventType=Dc,Dc.OPEN="a",Dc.CLOSE="b",Dc.ERROR="c",Dc.MESSAGE="d",Wt.prototype.listen=Wt.prototype.J,bu=CE,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,MD=rt}).apply(typeof _f<"u"?_f:typeof self<"u"?self:typeof window<"u"?window:{});const zI="@firebase/firestore",BI="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new $p("@firebase/firestore");function jo(){return js.logLevel}function T8(t){js.setLogLevel(t)}function q(t,...e){if(js.logLevel<=me.DEBUG){const n=e.map(Sw);js.debug(`Firestore (${bc}): ${t}`,...n)}}function mt(t,...e){if(js.logLevel<=me.ERROR){const n=e.map(Sw);js.error(`Firestore (${bc}): ${t}`,...n)}}function Yi(t,...e){if(js.logLevel<=me.WARN){const n=e.map(Sw);js.warn(`Firestore (${bc}): ${t}`,...n)}}function Sw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,BD(t,i,n)}function BD(t,e,n){let i=`FIRESTORE (${bc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw mt(i),new Error(i)}function Z(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||BD(e,r,i)}function E8(t,e){t||X(57014,e)}function W(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends rn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class A8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class S8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class I8{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Z(this.o===void 0,42304);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Kt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Kt,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},o=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Kt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Z(typeof i.accessToken=="string",31837,{l:i}),new FD(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Z(e===null||typeof e=="string",2055,{h:e}),new Ot(e)}}class x8{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class R8{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new x8(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class FI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class C8{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qe(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Z(this.o===void 0,3512);const i=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new FI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Z(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new FI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=P8(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}}function ae(t,e){return t<e?-1:t>e?1:0}function Hv(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),s=e.charAt(i);if(r!==s)return s_(r)===s_(s)?ae(r,s):s_(r)?1:-1}return ae(t.length,e.length)}const N8=55296,D8=57343;function s_(t){const e=t.charCodeAt(0);return e>=N8&&e<=D8}function Ll(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function qD(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="__name__";class Ci{constructor(e,n,i){n===void 0?n=0:n>e.length&&X(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&X(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ci.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ci?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=Ci.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return ae(e.length,n.length)}static compareSegments(e,n){const i=Ci.isNumericId(e),r=Ci.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Ci.extractNumericId(e).compare(Ci.extractNumericId(n)):Hv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cs.fromString(e.substring(4,e.length-2))}}class ge extends Ci{construct(e,n,i){return new ge(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new F(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new ge(n)}static emptyPath(){return new ge([])}}const k8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends Ci{construct(e,n,i){return new Ye(e,n,i)}static isValidIdentifier(e){return k8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qI}static keyField(){return new Ye([qI])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new F(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const o=e[r];if(o==="\\"){if(r+1===e.length)throw new F(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new F(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else o==="`"?(a=!a,r++):o!=="."||a?(i+=o,r++):(s(),r++)}if(s(),a)throw new F(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ye(n)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.path=e}static fromPath(e){return new $(ge.fromString(e))}static fromName(e){return new $(ge.fromString(e).popFirst(5))}static empty(){return new $(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $(new ge(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(t,e,n){if(!n)throw new F(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HD(t,e,n,i){if(e===!0&&i===!0)throw new F(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function HI(t){if(!$.isDocumentKey(t))throw new F(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function GI(t){if($.isDocumentKey(t))throw new F(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function GD(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function rg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X(12329,{type:typeof t})}function Te(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rg(t);throw new F(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function $D(t,e){if(e<=0)throw new F(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t,e){const n={typeString:t};return e&&(n.value=e),n}function wd(t,e){if(!GD(t))throw new F(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new F(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=-62135596800,KI=1e6;class Ie{static now(){return Ie.fromMillis(Date.now())}static fromDate(e){return Ie.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*KI);return new Ie(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<$I)throw new F(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/KI}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ie._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wd(e,Ie._jsonSchema))return new Ie(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$I;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ie._jsonSchemaVersion="firestore/timestamp/1.0",Ie._jsonSchema={type:At("string",Ie._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{static fromTimestamp(e){return new te(e)}static min(){return new te(new Ie(0,0))}static max(){return new te(new Ie(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=-1;class Zm{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}}function Gv(t){return t.fields.find(e=>e.kind===2)}function va(t){return t.fields.filter(e=>e.kind!==2)}Zm.UNKNOWN_ID=-1;class tm{constructor(e,n){this.fieldPath=e,this.kind=n}}class Dh{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Dh(0,Kn.min())}}function KD(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=te.fromTimestamp(i===1e9?new Ie(n+1,0):new Ie(n,i));return new Kn(r,$.empty(),e)}function QD(t){return new Kn(t.readTime,t.key,Ul)}class Kn{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Kn(te.min(),$.empty(),Ul)}static max(){return new Kn(te.max(),$.empty(),Ul)}}function Rw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zs(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==WD)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,i)=>{n(e)})}static reject(e){return new M((n,i)=>{i(e)})}static waitFor(e){return new M((n,i)=>{let r=0,s=0,a=!1;e.forEach(o=>{++r,o.next(()=>{++s,a&&s===r&&n()},l=>i(l))}),a=!0,s===r&&n()})}static or(e){let n=M.resolve(!1);for(const i of e)n=n.next(r=>r?M.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new M((i,r)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{a[c]=h,++o,o===s&&i(a)},h=>r(h))}})}static doWhile(e,n){return new M((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="SimpleDb";class sg{static open(e,n,i,r){try{return new sg(n,e.transaction(r,i))}catch(s){throw new Qu(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Kt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Qu(e,n.error)):this.S.resolve()},this.transaction.onerror=i=>{const r=Cw(i.target.error);this.S.reject(new Qu(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(q(Dn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new O8(n)}}class qi{static delete(e){return q(Dn,"Removing database:",e),Ea(Qb().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Sh())return!1;if(qi.F())return!0;const e=tt(),n=qi.M(e),i=0<n&&n<10,r=XD(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,n,i){this.name=e,this.version=n,this.N=i,this.B=null,qi.M(tt())===12.2&&mt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(q(Dn,"Opening database:",this.name),this.db=await new Promise((n,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{const a=s.target.result;n(a)},r.onblocked=()=>{i(new Qu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{const a=s.target.error;a.name==="VersionError"?i(new F(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?i(new F(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):i(new Qu(e,a))},r.onupgradeneeded=s=>{q(Dn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,r.transaction,s.oldVersion,this.version).next(()=>{q(Dn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,r){const s=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=sg.open(this.db,e,s?"readonly":"readwrite",i),l=r(o).next(c=>(o.C(),c)).catch(c=>(o.abort(c),M.reject(c))).toPromise();return l.catch(()=>{}),await o.D,l}catch(o){const l=o,c=l.name!=="FirebaseError"&&a<3;if(q(Dn,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function XD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class V8{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ea(this.U.delete())}}class Qu extends F{constructor(e,n){super(U.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ea(t){return t.name==="IndexedDbTransactionError"}class O8{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(q(Dn,"PUT",this.store.name,e,n),i=this.store.put(n,e)):(q(Dn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Ea(i)}add(e){return q(Dn,"ADD",this.store.name,e,e),Ea(this.store.add(e))}get(e){return Ea(this.store.get(e)).next(n=>(n===void 0&&(n=null),q(Dn,"GET",this.store.name,e,n),n))}delete(e){return q(Dn,"DELETE",this.store.name,e),Ea(this.store.delete(e))}count(){return q(Dn,"COUNT",this.store.name),Ea(this.store.count())}J(e,n){const i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const s=r.getAll(i.range);return new M((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}})}{const s=this.cursor(i),a=[];return this.H(s,(o,l)=>{a.push(l)}).next(()=>a)}}Y(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new M((r,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{r(a.target.result)}})}Z(e,n){q(Dn,"DELETE ALL",this.store.name);const i=this.options(e,n);i.X=!1;const r=this.cursor(i);return this.H(r,(s,a,o)=>o.delete())}ee(e,n){let i;n?i=e:(i={},n=e);const r=this.cursor(i);return this.H(r,n)}te(e){const n=this.cursor({});return new M((i,r)=>{n.onerror=s=>{const a=Cw(s.target.error);r(a)},n.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():i()}):i()}})}H(e,n){const i=[];return new M((r,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void r();const l=new V8(o),c=n(o.primaryKey,o.value,l);if(c instanceof M){const h=c.catch(d=>(l.done(),M.reject(d)));i.push(h)}l.isDone?r():l.G===null?o.continue():o.continue(l.G)}}).next(()=>M.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ea(t){return new M((e,n)=>{t.onsuccess=i=>{const r=i.target.result;e(r)},t.onerror=i=>{const r=Cw(i.target.error);n(r)}})}let QI=!1;function Cw(t){const e=qi.M(tt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return QI||(QI=!0,setTimeout(()=>{throw i},0)),i}}return t}const Wu="IndexBackfiller";class M8{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){q(Wu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();q(Wu,`Documents written: ${n}`)}catch(n){ea(n)?q(Wu,"Ignoring IndexedDB error during index backfill: ",n):await Zs(n)}await this.re(6e4)})}}class L8{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const i=new Set;let r=n,s=!0;return M.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!i.has(a))return q(Wu,`Processing collection: ${a}`),this.oe(e,a,r).next(o=>{r-=o,i.add(a)});s=!1})).next(()=>n-r)}oe(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this._e(r,s)).next(o=>(q(Wu,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>a.size)}))}_e(e,n){let i=e;return n.changes.forEach((r,s)=>{const a=QD(s);Rw(a,i)>0&&(i=a)}),new Kn(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}En.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=-1;function Td(t){return t==null}function kh(t){return t===0&&1/t==-1/0}function JD(t){return typeof t=="number"&&Number.isInteger(t)&&!kh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="";function sn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=WI(e)),e=U8(t.get(n),e);return WI(e)}function U8(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case ep:n+="";break;default:n+=s}}return n}function WI(t){return t+ep+""}function zi(t){const e=t.length;if(Z(e>=2,64408,{path:t}),e===2)return Z(t.charAt(0)===ep&&t.charAt(1)==="",56145,{path:t}),ge.emptyPath();const n=e-2,i=[];let r="";for(let s=0;s<e;){const a=t.indexOf(ep,s);switch((a<0||a>n)&&X(50515,{path:t}),t.charAt(a+1)){case"":const o=t.substring(s,a);let l;r.length===0?l=o:(r+=o,l=r,r=""),i.push(l);break;case"":r+=t.substring(s,a),r+="\0";break;case"":r+=t.substring(s,a+1);break;default:X(61167,{path:t})}s=a+2}return new ge(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="remoteDocuments",Ed="owner",Co="owner",Vh="mutationQueues",j8="userId",_i="mutations",YI="batchId",Ca="userMutationsIndex",XI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t,e){return[t,sn(e)]}function ZD(t,e,n){return[t,sn(e),n]}const z8={},jl="documentMutations",tp="remoteDocumentsV14",B8=["prefixPath","collectionGroup","readTime","documentId"],im="documentKeyIndex",F8=["prefixPath","collectionGroup","documentId"],ek="collectionGroupIndex",q8=["collectionGroup","readTime","prefixPath","documentId"],Oh="remoteDocumentGlobal",$v="remoteDocumentGlobalKey",zl="targets",tk="queryTargetsIndex",H8=["canonicalId","targetId"],Bl="targetDocuments",G8=["targetId","path"],Pw="documentTargetsIndex",$8=["path","targetId"],np="targetGlobalKey",za="targetGlobal",Mh="collectionParents",K8=["collectionId","parent"],Fl="clientMetadata",Q8="clientId",ag="bundles",W8="bundleId",og="namedQueries",Y8="name",Nw="indexConfiguration",X8="indexId",Kv="collectionGroupIndex",J8="collectionGroup",Yu="indexState",Z8=["indexId","uid"],nk="sequenceNumberIndex",e7=["uid","sequenceNumber"],Xu="indexEntries",t7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ik="documentKeyIndex",n7=["indexId","uid","orderedDocumentKey"],lg="documentOverlays",i7=["userId","collectionPath","documentId"],Qv="collectionPathOverlayIndex",r7=["userId","collectionPath","largestBatchId"],rk="collectionGroupOverlayIndex",s7=["userId","collectionGroup","largestBatchId"],Dw="globals",a7="name",sk=[Vh,_i,jl,ba,zl,Ed,za,Bl,Fl,Oh,Mh,ag,og],o7=[...sk,lg],ak=[Vh,_i,jl,tp,zl,Ed,za,Bl,Fl,Oh,Mh,ag,og,lg],ok=ak,kw=[...ok,Nw,Yu,Xu],l7=kw,lk=[...kw,Dw],c7=lk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv extends YD{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Pt(t,e){const n=W(t);return qi.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ta(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ck(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||Bt.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vf(this.root,e,this.comparator,!1)}getReverseIterator(){return new vf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vf(this.root,e,this.comparator,!0)}}class vf{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??Bt.RED,this.left=r??Bt.EMPTY,this.right=s??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new Bt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Bt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,i,r,s){return this}insert(e,n,i){return new Bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ZI(this.data.getIterator())}getIteratorFrom(e){return new ZI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Pe)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Pe(this.comparator);return n.data=e,n}}class ZI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Po(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new An([])}unionWith(e){let n=new Pe(Ye.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new An(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ll(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u7(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new uk("Invalid base64 string: "+s):s}}(e);return new lt(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const h7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(t){if(Z(!!t,39018),typeof t=="string"){let e=0;const n=h7.exec(t);if(Z(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:We(t.seconds),nanos:We(t.nanos)}}function We(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Dr(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="server_timestamp",dk="__type__",fk="__previous_value__",mk="__local_write_time__";function cg(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[dk])==null?void 0:i.stringValue)===hk}function ug(t){const e=t.mapValue.fields[fk];return cg(e)?ug(e):e}function Lh(t){const e=Nr(t.mapValue.fields[mk].timestampValue);return new Ie(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(e,n,i,r,s,a,o,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const Yv="(default)";class zs{constructor(e,n){this.projectId=e,this.database=n||Yv}static empty(){return new zs("","")}get isDefaultDatabase(){return this.database===Yv}isEqual(e){return e instanceof zs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="__type__",pk="__max__",gs={mapValue:{fields:{__type__:{stringValue:pk}}}},Ow="__vector__",ql="value",rm={nullValue:"NULL_VALUE"};function Bs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cg(t)?4:gk(t)?9007199254740991:hg(t)?10:11:X(28295,{value:t})}function Xi(t,e){if(t===e)return!0;const n=Bs(t);if(n!==Bs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lh(t).isEqual(Lh(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Nr(r.timestampValue),o=Nr(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Dr(r.bytesValue).isEqual(Dr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return We(r.geoPointValue.latitude)===We(s.geoPointValue.latitude)&&We(r.geoPointValue.longitude)===We(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return We(r.integerValue)===We(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=We(r.doubleValue),o=We(s.doubleValue);return a===o?kh(a)===kh(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Ll(t.arrayValue.values||[],e.arrayValue.values||[],Xi);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},o=s.mapValue.fields||{};if(JI(a)!==JI(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Xi(a[l],o[l])))return!1;return!0}(t,e);default:return X(52216,{left:t})}}function Uh(t,e){return(t.values||[]).find(n=>Xi(n,e))!==void 0}function Fs(t,e){if(t===e)return 0;const n=Bs(t),i=Bs(e);if(n!==i)return ae(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=We(s.integerValue||s.doubleValue),l=We(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return e1(t.timestampValue,e.timestampValue);case 4:return e1(Lh(t),Lh(e));case 5:return Hv(t.stringValue,e.stringValue);case 6:return function(s,a){const o=Dr(s),l=Dr(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const h=ae(o[c],l[c]);if(h!==0)return h}return ae(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=ae(We(s.latitude),We(a.latitude));return o!==0?o:ae(We(s.longitude),We(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return t1(t.arrayValue,e.arrayValue);case 10:return function(s,a){var f,p,w,E;const o=s.fields||{},l=a.fields||{},c=(f=o[ql])==null?void 0:f.arrayValue,h=(p=l[ql])==null?void 0:p.arrayValue,d=ae(((w=c==null?void 0:c.values)==null?void 0:w.length)||0,((E=h==null?void 0:h.values)==null?void 0:E.length)||0);return d!==0?d:t1(c,h)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===gs.mapValue&&a===gs.mapValue)return 0;if(s===gs.mapValue)return 1;if(a===gs.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),c=a.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=Hv(l[d],h[d]);if(f!==0)return f;const p=Fs(o[l[d]],c[h[d]]);if(p!==0)return p}return ae(l.length,h.length)}(t.mapValue,e.mapValue);default:throw X(23264,{he:n})}}function e1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Nr(t),i=Nr(e),r=ae(n.seconds,i.seconds);return r!==0?r:ae(n.nanos,i.nanos)}function t1(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Fs(n[r],i[r]);if(s)return s}return ae(n.length,i.length)}function Hl(t){return Xv(t)}function Xv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Nr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Dr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return $.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Xv(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${Xv(n.fields[a])}`;return r+"}"}(t.mapValue):X(61005,{value:t})}function sm(t){switch(Bs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ug(t);return e?16+sm(e):16;case 5:return 2*t.stringValue.length;case 6:return Dr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+sm(s),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return ta(i.fields,(s,a)=>{r+=s.length+sm(a)}),r}(t.mapValue);default:throw X(13486,{value:t})}}function Ja(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Jv(t){return!!t&&"integerValue"in t}function jh(t){return!!t&&"arrayValue"in t}function n1(t){return!!t&&"nullValue"in t}function i1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function am(t){return!!t&&"mapValue"in t}function hg(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Vw])==null?void 0:i.stringValue)===Ow}function Ju(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ta(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Ju(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ju(t.arrayValue.values[n]);return e}return{...t}}function gk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===pk}const yk={mapValue:{fields:{[Vw]:{stringValue:Ow},[ql]:{arrayValue:{}}}}};function f7(t){return"nullValue"in t?rm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ja(zs.empty(),$.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?hg(t)?yk:{mapValue:{}}:X(35942,{value:t})}function m7(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ja(zs.empty(),$.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?yk:"mapValue"in t?hg(t)?{mapValue:{}}:gs:X(61959,{value:t})}function r1(t,e){const n=Fs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function s1(t,e){const n=Fs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.value=e}static empty(){return new Ht({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!am(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ju(n)}setAll(e){let n=Ye.emptyPath(),i={},r=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=o.popLast()}a?i[o.lastSegment()]=Ju(a):r.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());am(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];am(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){ta(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Ht(Ju(this.value))}}function _k(t){const e=[];return ta(t.fields,(n,i)=>{const r=new Ye([n]);if(am(i)){const s=_k(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new An(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n,i,r,s,a,o){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Fe(e,0,te.min(),te.min(),te.min(),Ht.empty(),0)}static newFoundDocument(e,n,i,r){return new Fe(e,1,n,te.min(),i,r,0)}static newNoDocument(e,n){return new Fe(e,2,n,te.min(),te.min(),Ht.empty(),0)}static newUnknownDocument(e,n){return new Fe(e,3,n,te.min(),te.min(),Ht.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n){this.position=e,this.inclusive=n}}function a1(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=$.comparator($.fromName(a.referenceValue),n.key):i=Fs(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function o1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n="asc"){this.field=e,this.dir=n}}function p7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{}class _e extends vk{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new g7(e,n,i):n==="array-contains"?new v7(e,i):n==="in"?new Sk(e,i):n==="not-in"?new b7(e,i):n==="array-contains-any"?new w7(e,i):new _e(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new y7(e,i):new _7(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fs(n,this.value)):n!==null&&Bs(this.value)===Bs(n)&&this.matchesComparison(Fs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ce extends vk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ce(e,n)}matches(e){return Gl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Gl(t){return t.op==="and"}function Zv(t){return t.op==="or"}function Mw(t){return bk(t)&&Gl(t)}function bk(t){for(const e of t.filters)if(e instanceof Ce)return!1;return!0}function e0(t){if(t instanceof _e)return t.field.canonicalString()+t.op.toString()+Hl(t.value);if(Mw(t))return t.filters.map(e=>e0(e)).join(",");{const e=t.filters.map(n=>e0(n)).join(",");return`${t.op}(${e})`}}function wk(t,e){return t instanceof _e?function(i,r){return r instanceof _e&&i.op===r.op&&i.field.isEqual(r.field)&&Xi(i.value,r.value)}(t,e):t instanceof Ce?function(i,r){return r instanceof Ce&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,o)=>s&&wk(a,r.filters[o]),!0):!1}(t,e):void X(19439)}function Tk(t,e){const n=t.filters.concat(e);return Ce.create(n,t.op)}function Ek(t){return t instanceof _e?function(n){return`${n.field.canonicalString()} ${n.op} ${Hl(n.value)}`}(t):t instanceof Ce?function(n){return n.op.toString()+" {"+n.getFilters().map(Ek).join(" ,")+"}"}(t):"Filter"}class g7 extends _e{constructor(e,n,i){super(e,n,i),this.key=$.fromName(i.referenceValue)}matches(e){const n=$.comparator(e.key,this.key);return this.matchesComparison(n)}}class y7 extends _e{constructor(e,n){super(e,"in",n),this.keys=Ak("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class _7 extends _e{constructor(e,n){super(e,"not-in",n),this.keys=Ak("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ak(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>$.fromName(i.referenceValue))}class v7 extends _e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return jh(n)&&Uh(n.arrayValue,this.value)}}class Sk extends _e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Uh(this.value.arrayValue,n)}}class b7 extends _e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Uh(this.value.arrayValue,n)}}class w7 extends _e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!jh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Uh(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(e,n=null,i=[],r=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function t0(t,e=null,n=[],i=[],r=null,s=null,a=null){return new T7(t,e,n,i,r,s,a)}function Za(t){const e=W(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>e0(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Td(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Hl(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Hl(i)).join(",")),e.Te=n}return e.Te}function Ad(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!p7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!o1(t.startAt,e.startAt)&&o1(t.endAt,e.endAt)}function ip(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function rp(t,e){return t.filters.filter(n=>n instanceof _e&&n.field.isEqual(e))}function l1(t,e,n){let i=rm,r=!0;for(const s of rp(t,e)){let a=rm,o=!0;switch(s.op){case"<":case"<=":a=f7(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=rm}r1({value:i,inclusive:r},{value:a,inclusive:o})<0&&(i=a,r=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];r1({value:i,inclusive:r},{value:a,inclusive:n.inclusive})<0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}function c1(t,e,n){let i=gs,r=!0;for(const s of rp(t,e)){let a=gs,o=!0;switch(s.op){case">=":case">":a=m7(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=gs}s1({value:i,inclusive:r},{value:a,inclusive:o})>0&&(i=a,r=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];s1({value:i,inclusive:r},{value:a,inclusive:n.inclusive})>0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n=null,i=[],r=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ik(t,e,n,i,r,s,a,o){return new jr(t,e,n,i,r,s,a,o)}function wc(t){return new jr(t)}function u1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Lw(t){return t.collectionGroup!==null}function vl(t){const e=W(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Pe(Ye.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new zh(s,i))}),n.has(Ye.keyField().canonicalString())||e.Ie.push(new zh(Ye.keyField(),i))}return e.Ie}function pn(t){const e=W(t);return e.Ee||(e.Ee=E7(e,vl(t))),e.Ee}function E7(t,e){if(t.limitType==="F")return t0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new zh(r.field,s)});const n=t.endAt?new qs(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new qs(t.startAt.position,t.startAt.inclusive):null;return t0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function n0(t,e){const n=t.filters.concat([e]);return new jr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sp(t,e,n){return new jr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Sd(t,e){return Ad(pn(t),pn(e))&&t.limitType===e.limitType}function xk(t){return`${Za(pn(t))}|lt:${t.limitType}`}function zo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>Ek(r)).join(", ")}]`),Td(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Hl(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Hl(r)).join(",")),`Target(${i})`}(pn(t))}; limitType=${t.limitType})`}function Id(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):$.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of vl(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,o,l){const c=a1(a,o,l);return a.inclusive?c<=0:c<0}(i.startAt,vl(i),r)||i.endAt&&!function(a,o,l){const c=a1(a,o,l);return a.inclusive?c>=0:c>0}(i.endAt,vl(i),r))}(t,e)}function Rk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ck(t){return(e,n)=>{let i=!1;for(const r of vl(t)){const s=A7(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function A7(t,e,n){const i=t.field.isKeyField()?$.comparator(e.key,n.key):function(s,a,o){const l=a.data.field(s),c=o.data.field(s);return l!==null&&c!==null?Fs(l,c):X(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return X(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ta(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return ck(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S7=new Ue($.comparator);function Sn(){return S7}const Pk=new Ue($.comparator);function wu(...t){let e=Pk;for(const n of t)e=e.insert(n.key,n);return e}function Nk(t){let e=Pk;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Bi(){return Zu()}function Dk(){return Zu()}function Zu(){return new zr(t=>t.toString(),(t,e)=>t.isEqual(e))}const I7=new Ue($.comparator),x7=new Pe($.comparator);function ce(...t){let e=x7;for(const n of t)e=e.add(n);return e}const R7=new Pe(ae);function Uw(){return R7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kh(e)?"-0":e}}function kk(t){return{integerValue:""+t}}function Vk(t,e){return JD(e)?kk(e):jw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(){this._=void 0}}function C7(t,e,n){return t instanceof $l?function(r,s){const a={fields:{[dk]:{stringValue:hk},[mk]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&cg(s)&&(s=ug(s)),s&&(a.fields[fk]=s),{mapValue:a}}(n,e):t instanceof eo?Mk(t,e):t instanceof to?Lk(t,e):function(r,s){const a=Ok(r,s),o=h1(a)+h1(r.Ae);return Jv(a)&&Jv(r.Ae)?kk(o):jw(r.serializer,o)}(t,e)}function P7(t,e,n){return t instanceof eo?Mk(t,e):t instanceof to?Lk(t,e):n}function Ok(t,e){return t instanceof Kl?function(i){return Jv(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class $l extends dg{}class eo extends dg{constructor(e){super(),this.elements=e}}function Mk(t,e){const n=Uk(e);for(const i of t.elements)n.some(r=>Xi(r,i))||n.push(i);return{arrayValue:{values:n}}}class to extends dg{constructor(e){super(),this.elements=e}}function Lk(t,e){let n=Uk(e);for(const i of t.elements)n=n.filter(r=>!Xi(r,i));return{arrayValue:{values:n}}}class Kl extends dg{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function h1(t){return We(t.integerValue||t.doubleValue)}function Uk(t){return jh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n){this.field=e,this.transform=n}}function N7(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof eo&&r instanceof eo||i instanceof to&&r instanceof to?Ll(i.elements,r.elements,Xi):i instanceof Kl&&r instanceof Kl?Xi(i.Ae,r.Ae):i instanceof $l&&r instanceof $l}(t.transform,e.transform)}class D7{constructor(e,n){this.version=e,this.transformResults=n}}class Xe{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xe}static exists(e){return new Xe(void 0,e)}static updateTime(e){return new Xe(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function om(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fg{}function jk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ec(t.key,Xe.none()):new Tc(t.key,t.data,Xe.none());{const n=t.data,i=Ht.empty();let r=new Pe(Ye.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new Br(t.key,i,new An(r.toArray()),Xe.none())}}function k7(t,e,n){t instanceof Tc?function(r,s,a){const o=r.value.clone(),l=f1(r.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Br?function(r,s,a){if(!om(r.precondition,s))return void s.convertToUnknownDocument(a.version);const o=f1(r.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(zk(r)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function eh(t,e,n,i){return t instanceof Tc?function(s,a,o,l){if(!om(s.precondition,a))return o;const c=s.value.clone(),h=m1(s.fieldTransforms,l,a);return c.setAll(h),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof Br?function(s,a,o,l){if(!om(s.precondition,a))return o;const c=m1(s.fieldTransforms,l,a),h=a.data;return h.setAll(zk(s)),h.setAll(c),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,a,o){return om(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function V7(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=Ok(i.transform,r||null);s!=null&&(n===null&&(n=Ht.empty()),n.set(i.field,s))}return n||null}function d1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ll(i,r,(s,a)=>N7(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tc extends fg{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Br extends fg{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function zk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function f1(t,e,n){const i=new Map;Z(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,o=e.data.field(s.field);i.set(s.field,P7(a,o,n[r]))}return i}function m1(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,C7(s,a,e))}return i}class Ec extends fg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zw extends fg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&k7(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=eh(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=eh(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Dk();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(r.key)?null:o;const l=jk(a,o);l!==null&&i.set(r.key,l),a.isValidDocument()||a.convertToNoDocument(te.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Ll(this.mutations,e.mutations,(n,i)=>d1(n,i))&&Ll(this.baseMutations,e.baseMutations,(n,i)=>d1(n,i))}}class Fw{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Z(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return I7}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new Fw(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,we;function Bk(t){switch(t){case U.OK:return X(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return X(15467,{code:t})}}function Fk(t){if(t===void 0)return mt("GRPC error has no .code"),U.UNKNOWN;switch(t){case _t.OK:return U.OK;case _t.CANCELLED:return U.CANCELLED;case _t.UNKNOWN:return U.UNKNOWN;case _t.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case _t.INTERNAL:return U.INTERNAL;case _t.UNAVAILABLE:return U.UNAVAILABLE;case _t.UNAUTHENTICATED:return U.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case _t.NOT_FOUND:return U.NOT_FOUND;case _t.ALREADY_EXISTS:return U.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return U.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case _t.ABORTED:return U.ABORTED;case _t.OUT_OF_RANGE:return U.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return U.UNIMPLEMENTED;case _t.DATA_LOSS:return U.DATA_LOSS;default:return X(39323,{code:t})}}(we=_t||(_t={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7=new Cs([4294967295,4294967295],0);function p1(t){const e=qk().encode(t),n=new OD;return n.update(e),new Uint8Array(n.digest())}function g1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Cs([n,i],0),new Cs([r,s],0)]}class Hw{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Tu(`Invalid padding: ${n}`);if(i<0)throw new Tu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Tu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Tu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Cs.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(Cs.fromNumber(i)));return r.compare(M7)===1&&(r=new Cs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=p1(e),[i,r]=g1(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Hw(s,r,n);return i.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const n=p1(e),[i,r]=g1(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Cd.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Rd(te.min(),r,new Ue(ae),Sn(),ce())}}class Cd{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Cd(i,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class Hk{constructor(e,n){this.targetId=e,this.Ce=n}}class Gk{constructor(e,n,i=lt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class y1{constructor(){this.ve=0,this.Fe=_1(),this.Me=lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ce(),n=ce(),i=ce();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:X(38017,{changeType:s})}}),new Cd(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=_1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Z(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class L7{constructor(e){this.Ge=e,this.ze=new Map,this.je=Sn(),this.Je=bf(),this.He=bf(),this.Ye=new Ue(ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const s=r.target;if(ip(s))if(i===0){const a=new $(s.path);this.et(n,a,Fe.newNoDocument(a,te.min()))}else Z(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,o;try{a=Dr(i).toUint8Array()}catch(l){if(l instanceof uk)return Yi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new Hw(a,r,s)}catch(l){return Yi(l instanceof Tu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(n,s,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&ip(o.target)){const l=new $(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,Fe.newNoDocument(l,e))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=ce();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const r=new Rd(e,n,this.Ye,this.je,i);return this.je=Sn(),this.Je=bf(),this.He=bf(),this.Ye=new Ue(ae),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new y1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Pe(ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Pe(ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new y1),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function bf(){return new Ue($.comparator)}function _1(){return new Ue($.comparator)}const U7={asc:"ASCENDING",desc:"DESCENDING"},j7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z7={and:"AND",or:"OR"};class B7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function i0(t,e){return t.useProto3Json||Td(e)?e:{value:e}}function Ql(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $k(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function F7(t,e){return Ql(t,e.toTimestamp())}function gt(t){return Z(!!t,49232),te.fromTimestamp(function(n){const i=Nr(n);return new Ie(i.seconds,i.nanos)}(t))}function Gw(t,e){return r0(t,e).canonicalString()}function r0(t,e){const n=function(r){return new ge(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Kk(t){const e=ge.fromString(t);return Z(iV(e),10190,{key:e.toString()}),e}function Bh(t,e){return Gw(t.databaseId,e.path)}function Hi(t,e){const n=Kk(e);if(n.get(1)!==t.databaseId.projectId)throw new F(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(Yk(n))}function Qk(t,e){return Gw(t.databaseId,e)}function Wk(t){const e=Kk(t);return e.length===4?ge.emptyPath():Yk(e)}function s0(t){return new ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Yk(t){return Z(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function v1(t,e,n){return{name:Bh(t,e),fields:n.value.mapValue.fields}}function Xk(t,e,n){const i=Hi(t,e.name),r=gt(e.updateTime),s=e.createTime?gt(e.createTime):te.min(),a=new Ht({mapValue:{fields:e.fields}}),o=Fe.newFoundDocument(i,r,s,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function q7(t,e){return"found"in e?function(i,r){Z(!!r.found,43571),r.found.name,r.found.updateTime;const s=Hi(i,r.found.name),a=gt(r.found.updateTime),o=r.found.createTime?gt(r.found.createTime):te.min(),l=new Ht({mapValue:{fields:r.found.fields}});return Fe.newFoundDocument(s,a,o,l)}(t,e):"missing"in e?function(i,r){Z(!!r.missing,3894),Z(!!r.readTime,22933);const s=Hi(i,r.missing),a=gt(r.readTime);return Fe.newNoDocument(s,a)}(t,e):X(7234,{result:e})}function H7(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:X(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Z(h===void 0||typeof h=="string",58123),lt.fromBase64String(h||"")):(Z(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),lt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const h=c.code===void 0?U.UNKNOWN:Fk(c.code);return new F(h,c.message||"")}(a);n=new Gk(i,r,s,o||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Hi(t,i.document.name),s=gt(i.document.updateTime),a=i.document.createTime?gt(i.document.createTime):te.min(),o=new Ht({mapValue:{fields:i.document.fields}}),l=Fe.newFoundDocument(r,s,a,o),c=i.targetIds||[],h=i.removedTargetIds||[];n=new lm(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Hi(t,i.document),s=i.readTime?gt(i.readTime):te.min(),a=Fe.newNoDocument(r,s),o=i.removedTargetIds||[];n=new lm([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Hi(t,i.document),s=i.removedTargetIds||[];n=new lm([],s,r,null)}else{if(!("filter"in e))return X(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new O7(r,s),o=i.targetId;n=new Hk(o,a)}}return n}function Fh(t,e){let n;if(e instanceof Tc)n={update:v1(t,e.key,e.value)};else if(e instanceof Ec)n={delete:Bh(t,e.key)};else if(e instanceof Br)n={update:v1(t,e.key,e.data),updateMask:Y7(e.fieldMask)};else{if(!(e instanceof zw))return X(16599,{Vt:e.type});n={verify:Bh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const o=a.transform;if(o instanceof $l)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof eo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof to)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Kl)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw X(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:F7(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X(27497)}(t,e.precondition)),n}function a0(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Xe.updateTime(gt(s.updateTime)):s.exists!==void 0?Xe.exists(s.exists):Xe.none()}(e.currentDocument):Xe.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(a,o){let l=null;if("setToServerValue"in o)Z(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new $l;else if("appendMissingElements"in o){const h=o.appendMissingElements.values||[];l=new eo(h)}else if("removeAllFromArray"in o){const h=o.removeAllFromArray.values||[];l=new to(h)}else"increment"in o?l=new Kl(a,o.increment):X(16584,{proto:o});const c=Ye.fromServerFormat(o.fieldPath);return new xd(c,l)}(t,r)):[];if(e.update){e.update.name;const r=Hi(t,e.update.name),s=new Ht({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(l){const c=l.fieldPaths||[];return new An(c.map(h=>Ye.fromServerFormat(h)))}(e.updateMask);return new Br(r,s,a,n,i)}return new Tc(r,s,n,i)}if(e.delete){const r=Hi(t,e.delete);return new Ec(r,n)}if(e.verify){const r=Hi(t,e.verify);return new zw(r,n)}return X(1463,{proto:e})}function G7(t,e){return t&&t.length>0?(Z(e!==void 0,14353),t.map(n=>function(r,s){let a=r.updateTime?gt(r.updateTime):gt(s);return a.isEqual(te.min())&&(a=gt(s)),new D7(a,r.transformResults||[])}(n,e))):[]}function Jk(t,e){return{documents:[Qk(t,e.path)]}}function Zk(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Qk(t,r);const s=function(c){if(c.length!==0)return nV(Ce.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(h=>function(f){return{field:Bo(f.field),direction:K7(f.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=i0(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:r}}function eV(t){let e=Wk(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Z(i===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=tV(d);return f instanceof Ce&&Mw(f)?f.getFilters():[f]}(n.where));let a=[];n.orderBy&&(a=function(d){return d.map(f=>function(w){return new zh(Fo(w.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(d){let f;return f=typeof d=="object"?d.value:d,Td(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new qs(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,p=d.values||[];return new qs(p,f)}(n.endAt)),Ik(e,r,a,s,o,"F",l,c)}function $7(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tV(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Fo(n.unaryFilter.field);return _e.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Fo(n.unaryFilter.field);return _e.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Fo(n.unaryFilter.field);return _e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Fo(n.unaryFilter.field);return _e.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(t):t.fieldFilter!==void 0?function(n){return _e.create(Fo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ce.create(n.compositeFilter.filters.map(i=>tV(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(n.compositeFilter.op))}(t):X(30097,{filter:t})}function K7(t){return U7[t]}function Q7(t){return j7[t]}function W7(t){return z7[t]}function Bo(t){return{fieldPath:t.canonicalString()}}function Fo(t){return Ye.fromServerFormat(t.fieldPath)}function nV(t){return t instanceof _e?function(n){if(n.op==="=="){if(i1(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NAN"}};if(n1(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(i1(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NOT_NAN"}};if(n1(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(n.field),op:Q7(n.op),value:n.value}}}(t):t instanceof Ce?function(n){const i=n.getFilters().map(r=>nV(r));return i.length===1?i[0]:{compositeFilter:{op:W7(n.op),filters:i}}}(t):X(54877,{filter:t})}function Y7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function iV(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n,i,r,s=te.min(),a=te.min(),o=lt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.yt=e}}function X7(t,e){let n;if(e.document)n=Xk(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=$.fromSegments(e.noDocument.path),r=io(e.noDocument.readTime);n=Fe.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return X(56709);{const i=$.fromSegments(e.unknownDocument.path),r=io(e.unknownDocument.version);n=Fe.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){const s=new Ie(r[0],r[1]);return te.fromTimestamp(s)}(e.readTime)),n}function b1(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ap(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,a){return{name:Bh(s,a.key),fields:a.data.value.mapValue.fields,updateTime:Ql(s,a.version.toTimestamp()),createTime:Ql(s,a.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:no(e.version)};else{if(!e.isUnknownDocument())return X(57904,{document:e});i.unknownDocument={path:n.path.toArray(),version:no(e.version)}}return i}function ap(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function no(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function io(t){const e=new Ie(t.seconds,t.nanoseconds);return te.fromTimestamp(e)}function Aa(t,e){const n=(e.baseMutations||[]).map(s=>a0(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const i=e.mutations.map(s=>a0(t.yt,s)),r=Ie.fromMillis(e.localWriteTimeMs);return new Bw(e.batchId,r,n,i)}function Eu(t){const e=io(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?io(t.lastLimboFreeSnapshotVersion):te.min();let i;return i=function(s){return s.documents!==void 0}(t.query)?function(s){const a=s.documents.length;return Z(a===1,1966,{count:a}),pn(wc(Wk(s.documents[0])))}(t.query):function(s){return pn(eV(s))}(t.query),new fr(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,lt.fromBase64String(t.resumeToken))}function sV(t,e){const n=no(e.snapshotVersion),i=no(e.lastLimboFreeSnapshotVersion);let r;r=ip(e.target)?Jk(t.yt,e.target):Zk(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Za(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function $w(t){const e=eV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sp(e,e.limit,"L"):e}function a_(t,e){return new qw(e.largestBatchId,a0(t.yt,e.overlayMutation))}function w1(t,e){const n=e.path.lastSegment();return[t,sn(e.path.popLast()),n]}function T1(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:no(i.readTime),documentKey:sn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{getBundleMetadata(e,n){return E1(e).get(n).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:io(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,n){return E1(e).put(function(r){return{bundleId:r.id,createTime:no(gt(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return A1(e).get(n).next(i=>{if(i)return function(s){return{name:s.name,query:$w(s.bundledQuery),readTime:io(s.readTime)}}(i)})}saveNamedQuery(e,n){return A1(e).put(function(r){return{name:r.name,readTime:no(gt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function E1(t){return Pt(t,ag)}function A1(t){return Pt(t,og)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const i=n.uid||"";return new mg(e,i)}getOverlay(e,n){return su(e).get(w1(this.userId,n)).next(i=>i?a_(this.serializer,i):null)}getOverlays(e,n){const i=Bi();return M.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){const r=[];return i.forEach((s,a)=>{const o=new qw(n,a);r.push(this.St(e,o))}),M.waitFor(r)}removeOverlaysForBatchId(e,n,i){const r=new Set;n.forEach(a=>r.add(sn(a.getCollectionPath())));const s=[];return r.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);s.push(su(e).Z(Qv,o))}),M.waitFor(s)}getOverlaysForCollection(e,n,i){const r=Bi(),s=sn(n),a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return su(e).J(Qv,a).next(o=>{for(const l of o){const c=a_(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,n,i,r){const s=Bi();let a;const o=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return su(e).ee({index:rk,range:o},(l,c,h)=>{const d=a_(this.serializer,c);s.size()<r||d.largestBatchId===a?(s.set(d.getKey(),d),a=d.largestBatchId):h.done()}).next(()=>s)}St(e,n){return su(e).put(function(r,s,a){const[o,l,c]=w1(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Fh(r.yt,a.mutation)}}(this.serializer,this.userId,n))}}function su(t){return Pt(t,lg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{bt(e){return Pt(e,Dw)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const i=n==null?void 0:n.value;return i?lt.fromUint8Array(i):lt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(We(e.integerValue));else if("doubleValue"in e){const i=We(e.doubleValue);isNaN(i)?this.Ft(n,13):(this.Ft(n,15),kh(i)?n.Mt(0):n.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(n,20),typeof i=="string"&&(i=Nr(i)),n.xt(`${i.seconds||""}`),n.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Dr(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(n,45),n.Mt(i.latitude||0),n.Mt(i.longitude||0)}else"mapValue"in e?gk(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):hg(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):X(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const i=e.fields||{};this.Ft(n,55);for(const r of Object.keys(i))this.Ot(r,n),this.Ct(i[r],n)}kt(e,n){var a,o;const i=e.fields||{};this.Ft(n,53);const r=ql,s=((o=(a=i[r].arrayValue)==null?void 0:a.values)==null?void 0:o.length)||0;this.Ft(n,15),n.Mt(We(s)),this.Ot(r,n),this.Ct(i[r],n)}Qt(e,n){const i=e.values||[];this.Ft(n,50);for(const r of i)this.Ct(r,n)}Lt(e,n){this.Ft(n,37),$.fromName(e).path.forEach(i=>{this.Ft(n,60),this.Ut(i,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Sa.Kt=new Sa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=255;function eH(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function S1(t){const e=64-function(i){let r=0;for(let s=0;s<8;++s){const a=eH(255&i[s]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}class tH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Gt(i.value),i=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Jt(i.value),i=n.next();this.Ht()}Yt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const r=n.codePointAt(0);this.Gt(240|r>>>18),this.Gt(128|63&r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r)}}this.zt()}Zt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const r=n.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Ht()}Xt(e){const n=this.en(e),i=S1(n);this.tn(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}nn(e){const n=this.en(e),i=S1(n);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}rn(){this.sn(No),this.sn(255)}_n(){this.an(No),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),i=!!(128&n[0]);n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===No?(this.sn(No),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===No?(this.an(No),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class nH{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class iH{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class au{constructor(){this.cn=new tH,this.ln=new nH(this.cn),this.hn=new iH(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n,i,r){this.Tn=e,this.In=n,this.En=i,this.dn=r}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.dn,0),n!==e?i.set([0],this.dn.length):++i[i.length-1],new Ia(this.Tn,this.In,this.En,i)}Rn(e,n,i){return{indexId:this.Tn,uid:e,arrayValue:cm(this.En),directionalValue:cm(this.dn),orderedDocumentKey:cm(n),documentKey:i.path.toArray()}}Vn(e,n,i){const r=this.Rn(e,n,i);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function Jr(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=I1(t.En,e.En),n!==0?n:(n=I1(t.dn,e.dn),n!==0?n:$.comparator(t.In,e.In)))}function I1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}function cm(t){return T2()?function(n){let i="";for(let r=0;r<n.length;r++)i+=String.fromCharCode(n[r]);return i}(t):t}function x1(t){return typeof t!="string"?t:function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(t)}class R1{constructor(e){this.mn=new Pe((n,i)=>Ye.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const i=n;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(Z(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Gv(e);if(n!==void 0&&!this.wn(n))return!1;const i=va(e);let r=new Set,s=0,a=0;for(;s<i.length&&this.wn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!r.has(o.field.canonicalString())){const l=i[s];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++s}for(;s<i.length;++s){const o=i[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new Pe(Ye.comparator);const n=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new tm(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new tm(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new tm(i.field,i.dir==="asc"?0:1)));return new Zm(Zm.UNKNOWN_ID,this.collectionId,n,Dh.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(t){var n,i;if(Z(t instanceof _e||t instanceof Ce,20012),t instanceof _e){if(t instanceof Sk){const r=((i=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:i.map(s=>_e.create(t.field,"==",s)))||[];return Ce.create(r,"or")}return t}const e=t.filters.map(r=>aV(r));return Ce.create(e,t.op)}function rH(t){if(t.getFilters().length===0)return[];const e=c0(aV(t));return Z(oV(e),7391),o0(e)||l0(e)?[e]:e.getFilters()}function o0(t){return t instanceof _e}function l0(t){return t instanceof Ce&&Mw(t)}function oV(t){return o0(t)||l0(t)||function(n){if(n instanceof Ce&&Zv(n)){for(const i of n.getFilters())if(!o0(i)&&!l0(i))return!1;return!0}return!1}(t)}function c0(t){if(Z(t instanceof _e||t instanceof Ce,34018),t instanceof _e)return t;if(t.filters.length===1)return c0(t.filters[0]);const e=t.filters.map(i=>c0(i));let n=Ce.create(e,t.op);return n=op(n),oV(n)?n:(Z(n instanceof Ce,64498),Z(Gl(n),40251),Z(n.filters.length>1,57927),n.filters.reduce((i,r)=>Kw(i,r)))}function Kw(t,e){let n;return Z(t instanceof _e||t instanceof Ce,38388),Z(e instanceof _e||e instanceof Ce,25473),n=t instanceof _e?e instanceof _e?function(r,s){return Ce.create([r,s],"and")}(t,e):C1(t,e):e instanceof _e?C1(e,t):function(r,s){if(Z(r.filters.length>0&&s.filters.length>0,48005),Gl(r)&&Gl(s))return Tk(r,s.getFilters());const a=Zv(r)?r:s,o=Zv(r)?s:r,l=a.filters.map(c=>Kw(c,o));return Ce.create(l,"or")}(t,e),op(n)}function C1(t,e){if(Gl(e))return Tk(e,t.getFilters());{const n=e.filters.map(i=>Kw(t,i));return Ce.create(n,"or")}}function op(t){if(Z(t instanceof _e||t instanceof Ce,11850),t instanceof _e)return t;const e=t.getFilters();if(e.length===1)return op(e[0]);if(bk(t))return t;const n=e.map(r=>op(r)),i=[];return n.forEach(r=>{r instanceof _e?i.push(r):r instanceof Ce&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Ce.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sH{constructor(){this.Cn=new Qw}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Kn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Kn.min())}updateCollectionGroup(e,n,i){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class Qw{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Pe(ge.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Pe(ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1="IndexedDbIndexManager",wf=new Uint8Array(0);class aH{constructor(e,n){this.databaseId=n,this.vn=new Qw,this.Fn=new zr(i=>Za(i),(i,r)=>Ad(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:i,parent:sn(r)};return N1(e).put(s)}return M.resolve()}getCollectionParents(e,n){const i=[],r=IDBKeyRange.bound([n,""],[qD(n),""],!1,!0);return N1(e).J(r).next(s=>{for(const a of s){if(a.collectionId!==n)break;i.push(zi(a.parent))}return i})}addFieldIndex(e,n){const i=ou(e),r=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete r.indexId;const s=i.add(r);if(n.indexState){const a=ko(e);return s.next(o=>{a.put(T1(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const i=ou(e),r=ko(e),s=Do(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=ou(e),i=Do(e),r=ko(e);return n.Z().next(()=>i.Z()).next(()=>r.Z())}createTargetIndexes(e,n){return M.forEach(this.Mn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){const s=new R1(i).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const i=Do(e);let r=!0;const s=new Map;return M.forEach(this.Mn(n),a=>this.xn(e,a).next(o=>{r&&(r=!!o),s.set(a,o)})).next(()=>{if(r){let a=ce();const o=[];return M.forEach(s,(l,c)=>{q(P1,`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(I=>`${I.fieldPath}:${I.kind}`).join(",")}`}(l)} to execute ${Za(n)}`);const h=function(b,I){const D=Gv(I);if(D===void 0)return null;for(const V of rp(b,D.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null}(c,l),d=function(b,I){const D=new Map;for(const V of va(I))for(const S of rp(b,V.fieldPath))switch(S.op){case"==":case"in":D.set(V.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return D.set(V.fieldPath.canonicalString(),S.value),Array.from(D.values())}return null}(c,l),f=function(b,I){const D=[];let V=!0;for(const S of va(I)){const T=S.kind===0?l1(b,S.fieldPath,b.startAt):c1(b,S.fieldPath,b.startAt);D.push(T.value),V&&(V=T.inclusive)}return new qs(D,V)}(c,l),p=function(b,I){const D=[];let V=!0;for(const S of va(I)){const T=S.kind===0?c1(b,S.fieldPath,b.endAt):l1(b,S.fieldPath,b.endAt);D.push(T.value),V&&(V=T.inclusive)}return new qs(D,V)}(c,l),w=this.On(l,c,f),E=this.On(l,c,p),A=this.Nn(l,c,d),v=this.Bn(l.indexId,h,w,f.inclusive,E,p.inclusive,A);return M.forEach(v,_=>i.Y(_,n.limit).next(b=>{b.forEach(I=>{const D=$.fromSegments(I.documentKey);a.has(D)||(a=a.add(D),o.push(D))})}))}).next(()=>o)}return M.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=rH(Ce.create(e.filters,"and")).map(i=>t0(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,i,r,s,a,o){const l=(n!=null?n.length:1)*Math.max(i.length,s.length),c=l/(n!=null?n.length:1),h=[];for(let d=0;d<l;++d){const f=n?this.Ln(n[d/c]):wf,p=this.kn(e,f,i[d%c],r),w=this.qn(e,f,s[d%c],a),E=o.map(A=>this.kn(e,f,A,!0));h.push(...this.createRange(p,w,E))}return h}kn(e,n,i,r){const s=new Ia(e,$.empty(),n,i);return r?s:s.An()}qn(e,n,i,r){const s=new Ia(e,$.empty(),n,i);return r?s.An():s}xn(e,n){const i=new R1(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let a=null;for(const o of s)i.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,n){let i=2;const r=this.Mn(n);return M.forEach(r,s=>this.xn(e,s).next(a=>{a?i!==0&&a.fields.length<function(l){let c=new Pe(Ye.comparator),h=!1;for(const d of l.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?h=!0:c=c.add(f.field));for(const d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(h?1:0)}(s)&&(i=1):i=0})).next(()=>function(a){return a.limit!==null}(n)&&r.length>1&&i===2?1:i)}Qn(e,n){const i=new au;for(const r of va(e)){const s=n.data.field(r.fieldPath);if(s==null)return null;const a=i.Pn(r.kind);Sa.Kt.Dt(s,a)}return i.un()}Ln(e){const n=new au;return Sa.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const i=new au;return Sa.Kt.Dt(Ja(this.databaseId,n),i.Pn(function(s){const a=va(s);return a.length===0?0:a[a.length-1].kind}(e))),i.un()}Nn(e,n,i){if(i===null)return[];let r=[];r.push(new au);let s=0;for(const a of va(e)){const o=i[s++];for(const l of r)if(this.Un(n,a.fieldPath)&&jh(o))r=this.Kn(r,a,o);else{const c=l.Pn(a.kind);Sa.Kt.Dt(o,c)}}return this.Wn(r)}On(e,n,i){return this.Nn(e,n,i.position)}Wn(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].un();return n}Kn(e,n,i){const r=[...e],s=[];for(const a of i.arrayValue.values||[])for(const o of r){const l=new au;l.seed(o.un()),Sa.Kt.Dt(a,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(i=>i instanceof _e&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){const i=ou(e),r=ko(e);return(n?i.J(Kv,IDBKeyRange.bound(n,n)):i.J()).next(s=>{const a=[];return M.forEach(s,o=>r.get([o.indexId,this.uid]).next(l=>{a.push(function(h,d){const f=d?new Dh(d.sequenceNumber,new Kn(io(d.readTime),new $(zi(d.documentKey)),d.largestBatchId)):Dh.empty(),p=h.fields.map(([w,E])=>new tm(Ye.fromServerFormat(w),E));return new Zm(h.indexId,h.collectionGroup,p,f)}(o,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:ae(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){const r=ou(e),s=ko(e);return this.Gn(e).next(a=>r.J(Kv,IDBKeyRange.bound(n,n)).next(o=>M.forEach(o,l=>s.put(T1(l.indexId,this.uid,a,i)))))}updateIndexEntries(e,n){const i=new Map;return M.forEach(n,(r,s)=>{const a=i.get(r.collectionGroup);return(a?M.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(o=>(i.set(r.collectionGroup,o),M.forEach(o,l=>this.zn(e,r,l).next(c=>{const h=this.jn(s,l);return c.isEqual(h)?M.resolve():this.Jn(e,s,l,c,h)}))))})}Hn(e,n,i,r){return Do(e).put(r.Rn(this.uid,this.$n(i,n.key),n.key))}Yn(e,n,i,r){return Do(e).delete(r.Vn(this.uid,this.$n(i,n.key),n.key))}zn(e,n,i){const r=Do(e);let s=new Pe(Jr);return r.ee({index:ik,range:IDBKeyRange.only([i.indexId,this.uid,cm(this.$n(i,n))])},(a,o)=>{s=s.add(new Ia(i.indexId,n,x1(o.arrayValue),x1(o.directionalValue)))}).next(()=>s)}jn(e,n){let i=new Pe(Jr);const r=this.Qn(n,e);if(r==null)return i;const s=Gv(n);if(s!=null){const a=e.data.field(s.fieldPath);if(jh(a))for(const o of a.arrayValue.values||[])i=i.add(new Ia(n.indexId,e.key,this.Ln(o),r))}else i=i.add(new Ia(n.indexId,e.key,wf,r));return i}Jn(e,n,i,r,s){q(P1,"Updating index entries for document '%s'",n.key);const a=[];return function(l,c,h,d,f){const p=l.getIterator(),w=c.getIterator();let E=Po(p),A=Po(w);for(;E||A;){let v=!1,_=!1;if(E&&A){const b=h(E,A);b<0?_=!0:b>0&&(v=!0)}else E!=null?_=!0:v=!0;v?(d(A),A=Po(w)):_?(f(E),E=Po(p)):(E=Po(p),A=Po(w))}}(r,s,Jr,o=>{a.push(this.Hn(e,n,i,o))},o=>{a.push(this.Yn(e,n,i,o))}),M.waitFor(a)}Gn(e){let n=1;return ko(e).ee({index:nk,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((a,o)=>Jr(a,o)).filter((a,o,l)=>!o||Jr(a,l[o-1])!==0);const r=[];r.push(e);for(const a of i){const o=Jr(a,e),l=Jr(a,n);if(o===0)r[0]=e.An();else if(o>0&&l<0)r.push(a),r.push(a.An());else if(l>0)break}r.push(n);const s=[];for(let a=0;a<r.length;a+=2){if(this.Zn(r[a],r[a+1]))return[];const o=r[a].Vn(this.uid,wf,$.empty()),l=r[a+1].Vn(this.uid,wf,$.empty());s.push(IDBKeyRange.bound(o,l))}return s}Zn(e,n){return Jr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(D1)}getMinOffset(e,n){return M.mapArray(this.Mn(n),i=>this.xn(e,i).next(r=>r||X(44426))).next(D1)}}function N1(t){return Pt(t,Mh)}function Do(t){return Pt(t,Xu)}function ou(t){return Pt(t,Nw)}function ko(t){return Pt(t,Yu)}function D1(t){Z(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const r=t[i].indexState.offset;Rw(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Kn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lV=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(t,e,n){const i=t.store(_i),r=t.store(jl),s=[],a=IDBKeyRange.only(n.batchId);let o=0;const l=i.ee({range:a},(h,d,f)=>(o++,f.delete()));s.push(l.next(()=>{Z(o===1,47070,{batchId:n.batchId})}));const c=[];for(const h of n.mutations){const d=ZD(e,h.key.path,n.batchId);s.push(r.delete(d)),c.push(h.key)}return M.waitFor(s).next(()=>c)}function lp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw X(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(lV,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);class pg{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Xn={}}static wt(e,n,i,r){Z(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new pg(s,n,i,r)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zr(e).ee({index:Ca,range:i},(r,s,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,i,r){const s=qo(e),a=Zr(e);return a.add({}).next(o=>{Z(typeof o=="number",49019);const l=new Bw(o,n,i,r),c=function(p,w,E){const A=E.baseMutations.map(_=>Fh(p.yt,_)),v=E.mutations.map(_=>Fh(p.yt,_));return{userId:w,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:A,mutations:v}}(this.serializer,this.userId,l),h=[];let d=new Pe((f,p)=>ae(f.canonicalString(),p.canonicalString()));for(const f of r){const p=ZD(this.userId,f.key.path,o);d=d.add(f.key.path.popLast()),h.push(a.put(c)),h.push(s.put(p,z8))}return d.forEach(f=>{h.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[o]=l.keys()}),M.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return Zr(e).get(n).next(i=>i?(Z(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:n}),Aa(this.serializer,i)):null)}er(e,n){return this.Xn[n]?M.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){const r=i.keys();return this.Xn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Zr(e).ee({index:Ca,range:r},(a,o,l)=>{o.userId===this.userId&&(Z(o.batchId>=i,47524,{tr:i}),s=Aa(this.serializer,o)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Ps;return Zr(e).ee({index:Ca,range:n,reverse:!0},(r,s,a)=>{i=s.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ps],[this.userId,Number.POSITIVE_INFINITY]);return Zr(e).J(Ca,n).next(i=>i.map(r=>Aa(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=nm(this.userId,n.path),r=IDBKeyRange.lowerBound(i),s=[];return qo(e).ee({range:r},(a,o,l)=>{const[c,h,d]=a,f=zi(h);if(c===this.userId&&n.path.isEqual(f))return Zr(e).get(d).next(p=>{if(!p)throw X(61480,{nr:a,batchId:d});Z(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:d}),s.push(Aa(this.serializer,p))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Pe(ae);const r=[];return n.forEach(s=>{const a=nm(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=qo(e).ee({range:o},(c,h,d)=>{const[f,p,w]=c,E=zi(p);f===this.userId&&s.path.isEqual(E)?i=i.add(w):d.done()});r.push(l)}),M.waitFor(r).next(()=>this.rr(e,i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1,s=nm(this.userId,i),a=IDBKeyRange.lowerBound(s);let o=new Pe(ae);return qo(e).ee({range:a},(l,c,h)=>{const[d,f,p]=l,w=zi(f);d===this.userId&&i.isPrefixOf(w)?w.length===r&&(o=o.add(p)):h.done()}).next(()=>this.rr(e,o))}rr(e,n){const i=[],r=[];return n.forEach(s=>{r.push(Zr(e).get(s).next(a=>{if(a===null)throw X(35274,{batchId:s});Z(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),i.push(Aa(this.serializer,a))}))}),M.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return cV(e.le,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),M.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const i=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),r=[];return qo(e).ee({range:i},(s,a,o)=>{if(s[0]===this.userId){const l=zi(s[1]);r.push(l)}else o.done()}).next(()=>{Z(r.length===0,56720,{sr:r.map(s=>s.canonicalString())})})})}containsKey(e,n){return uV(e,this.userId,n)}_r(e){return hV(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ps,lastStreamToken:""})}}function uV(t,e,n){const i=nm(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let a=!1;return qo(t).ee({range:s,X:!0},(o,l,c)=>{const[h,d,f]=o;h===e&&d===r&&(a=!0),c.done()}).next(()=>a)}function Zr(t){return Pt(t,_i)}function qo(t){return Pt(t,jl)}function hV(t){return Pt(t,Vh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ro(0)}static cr(){return new ro(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const i=new ro(n.highestTargetId);return n.highestTargetId=i.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>te.fromTimestamp(new Ie(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.lr(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.hr(e,r)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(i=>(i.targetCount+=1,this.Tr(n,i),this.hr(e,i))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Vo(e).delete(n.targetId)).next(()=>this.lr(e)).next(i=>(Z(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i)))}removeTargets(e,n,i){let r=0;const s=[];return Vo(e).ee((a,o)=>{const l=Eu(o);l.sequenceNumber<=n&&i.get(l.targetId)===null&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(s)).next(()=>r)}forEachTarget(e,n){return Vo(e).ee((i,r)=>{const s=Eu(r);n(s)})}lr(e){return V1(e).get(np).next(n=>(Z(n!==null,2888),n))}hr(e,n){return V1(e).put(np,n)}Pr(e,n){return Vo(e).put(sV(this.serializer,n))}Tr(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const i=Za(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Vo(e).ee({range:r,index:tk},(a,o,l)=>{const c=Eu(o);Ad(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,i){const r=[],s=cs(e);return n.forEach(a=>{const o=sn(a.path);r.push(s.put({targetId:i,path:o})),r.push(this.referenceDelegate.addReference(e,i,a))}),M.waitFor(r)}removeMatchingKeys(e,n,i){const r=cs(e);return M.forEach(n,s=>{const a=sn(s.path);return M.waitFor([r.delete([i,a]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,n){const i=cs(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),r=cs(e);let s=ce();return r.ee({range:i,X:!0},(a,o,l)=>{const c=zi(a[1]),h=new $(c);s=s.add(h)}).next(()=>s)}containsKey(e,n){const i=sn(n.path),r=IDBKeyRange.bound([i],[qD(i)],!1,!0);let s=0;return cs(e).ee({index:Pw,X:!0,range:r},([a,o],l,c)=>{a!==0&&(s++,c.done())}).next(()=>s>0)}At(e,n){return Vo(e).get(n).next(i=>i?Eu(i):null)}}function Vo(t){return Pt(t,zl)}function V1(t){return Pt(t,za)}function cs(t){return Pt(t,Bl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="LruGarbageCollector",lH=1048576;function M1([t,e],[n,i]){const r=ae(t,n);return r===0?ae(e,i):r}class cH{constructor(e){this.Ir=e,this.buffer=new Pe(M1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();M1(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class dV{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){q(O1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ea(n)?q(O1,"Ignoring IndexedDB error during garbage collection: ",n):await Zs(n)}await this.Vr(3e5)})}}class uH{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return M.resolve(En.ce);const i=new cH(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(k1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),k1):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,s,a,o,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,a=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,o=Date.now(),this.removeTargets(e,i,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(c=Date.now(),jo()<=me.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${r} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}function fV(t,e){return new uH(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{constructor(e,n){this.db=e,this.garbageCollector=fV(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(i,r)=>n(r))}addReference(e,n,i){return Tf(e,i)}removeReference(e,n,i){return Tf(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return Tf(e,n)}br(e,n){return function(r,s){let a=!1;return hV(r).te(o=>uV(r,o,s).next(l=>(l&&(a=!0),M.resolve(!l)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Sr(e,(a,o)=>{if(o<=n){const l=this.br(e,a).next(c=>{if(!c)return s++,i.getEntry(e,a).next(()=>(i.removeEntry(a,te.min()),cs(e).delete(function(d){return[0,sn(d.path)]}(a))))});r.push(l)}}).next(()=>M.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return Tf(e,n)}Sr(e,n){const i=cs(e);let r,s=En.ce;return i.ee({index:Pw},([a,o],{path:l,sequenceNumber:c})=>{a===0?(s!==En.ce&&n(new $(zi(r)),s),s=c,r=l):s=En.ce}).next(()=>{s!==En.ce&&n(new $(zi(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Tf(t,e){return cs(t).put(function(i,r){return{targetId:0,path:sn(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(){this.changes=new zr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Fe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?M.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return da(e).put(i)}removeEntry(e,n,i){return da(e).delete(function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],ap(a),o[o.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.Dr(e,i)))}getEntry(e,n){let i=Fe.newInvalidDocument(n);return da(e).ee({index:im,range:IDBKeyRange.only(lu(n))},(r,s)=>{i=this.Cr(n,s)}).next(()=>i)}vr(e,n){let i={size:0,document:Fe.newInvalidDocument(n)};return da(e).ee({index:im,range:IDBKeyRange.only(lu(n))},(r,s)=>{i={document:this.Cr(n,s),size:lp(s)}}).next(()=>i)}getEntries(e,n){let i=Sn();return this.Fr(e,n,(r,s)=>{const a=this.Cr(r,s);i=i.insert(r,a)}).next(()=>i)}Mr(e,n){let i=Sn(),r=new Ue($.comparator);return this.Fr(e,n,(s,a)=>{const o=this.Cr(s,a);i=i.insert(s,o),r=r.insert(s,lp(a))}).next(()=>({documents:i,Or:r}))}Fr(e,n,i){if(n.isEmpty())return M.resolve();let r=new Pe(j1);n.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(lu(r.first()),lu(r.last())),a=r.getIterator();let o=a.getNext();return da(e).ee({index:im,range:s},(l,c,h)=>{const d=$.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&j1(o,d)<0;)i(o,null),o=a.getNext();o&&o.isEqual(d)&&(i(o,c),o=a.hasNext()?a.getNext():null),o?h.j(lu(o)):h.done()}).next(()=>{for(;o;)i(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,s){const a=n.path,o=[a.popLast().toArray(),a.lastSegment(),ap(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return da(e).J(IDBKeyRange.bound(o,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let h=Sn();for(const d of c){const f=this.Cr($.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(Id(n,f)||r.has(f.key))&&(h=h.insert(f.key,f))}return h})}getAllFromCollectionGroup(e,n,i,r){let s=Sn();const a=U1(n,i),o=U1(n,Kn.max());return da(e).ee({index:ek,range:IDBKeyRange.bound(a,o,!0)},(l,c,h)=>{const d=this.Cr($.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===r&&h.done()}).next(()=>s)}newChangeBuffer(e){return new fH(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return L1(e).get($v).next(n=>(Z(!!n,20021),n))}Dr(e,n){return L1(e).put($v,n)}Cr(e,n){if(n){const i=X7(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(te.min())))return i}return Fe.newInvalidDocument(e)}}function pV(t){return new dH(t)}class fH extends mV{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new zr(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const n=[];let i=0,r=new Pe((s,a)=>ae(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const l=b1(this.Nr.serializer,a);r=r.add(s.path.popLast());const c=lp(l);i+=c-o.size,n.push(this.Nr.addEntry(e,s,l))}else if(i-=o.size,this.trackRemovals){const l=b1(this.Nr.serializer,a.convertToNoDocument(te.min()));n.push(this.Nr.addEntry(e,s,l))}}),r.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,i)),M.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(i=>(this.Br.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:i,Or:r})=>(r.forEach((s,a)=>{this.Br.set(s,{size:a,readTime:i.get(s).readTime})}),i))}}function L1(t){return Pt(t,Oh)}function da(t){return Pt(t,tp)}function lu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function U1(t,e){const n=e.documentKey.path.toArray();return[t,ap(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function j1(t,e){const n=t.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=ae(n[s],i[s]),r)return r;return r=ae(n.length,i.length),r||(r=ae(n[n.length-2],i[i.length-2]),r||ae(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&eh(i.mutation,r,An.empty(),Ie.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ce()){const r=Bi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=wu();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Bi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ce()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,i,r){let s=Sn();const a=Zu(),o=function(){return Zu()}();return n.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof Br)?s=s.insert(c.key,c):h!==void 0?(a.set(c.key,h.mutation.getFieldMask()),eh(h.mutation,c,h.mutation.getFieldMask(),Ie.now())):a.set(c.key,An.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>a.set(c,h)),n.forEach((c,h)=>o.set(c,new mH(h,a.get(c)??null))),o))}recalculateAndSaveOverlays(e,n){const i=Zu();let r=new Ue((a,o)=>a-o),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||An.empty();h=o.applyToLocalView(c,h),i.set(l,h);const d=(r.get(o.batchId)||ce()).add(l);r=r.insert(o.batchId,d)})}).next(()=>{const a=[],o=r.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,h=l.value,d=Dk();h.forEach(f=>{if(!s.has(f)){const p=jk(n.get(f),i.get(f));p!==null&&d.set(f,p),s=s.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return M.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return $.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Lw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):M.resolve(Bi());let o=Ul,l=s;return a.next(c=>M.forEach(c,(h,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ce())).next(h=>({batchId:o,changes:Nk(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(i=>{let r=wu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=wu();return this.indexManager.getCollectionParents(e,s).next(o=>M.forEach(o,l=>{const c=function(d,f){return new jr(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((d,f)=>{a=a.insert(d,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(a=>{s.forEach((l,c)=>{const h=c.getKey();a.get(h)===null&&(a=a.insert(h,Fe.newInvalidDocument(h)))});let o=wu();return a.forEach((l,c)=>{const h=s.get(l);h!==void 0&&eh(h.mutation,c,An.empty(),Ie.now()),Id(n,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:gt(r.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:$w(r.bundledQuery),readTime:gt(r.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gH{constructor(){this.overlays=new Ue($.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Bi();return M.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.St(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),M.resolve()}getOverlaysForCollection(e,n,i){const r=Bi(),s=n.length+1,a=new $(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return M.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Ue((c,h)=>c-h);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=Bi(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const o=Bi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>o.set(c,h)),!(o.size()>=r)););return M.resolve(o)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new qw(n,i));let s=this.qr.get(n);s===void 0&&(s=ce(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yH{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(){this.Qr=new Pe(kt.$r),this.Ur=new Pe(kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new kt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new kt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new $(new ge([])),i=new kt(n,e),r=new kt(n,e+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new $(new ge([])),i=new kt(n,e),r=new kt(n,e+1);let s=ce();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new kt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class kt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return $.comparator(e.key,n.key)||ae(e.Yr,n.Yr)}static Kr(e,n){return ae(e.Yr,n.Yr)||$.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _H{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Pe(kt.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Bw(s,n,i,r);this.mutationQueue.push(a);for(const o of r)this.Zr=this.Zr.add(new kt(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return M.resolve(a)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Ps:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new kt(n,0),r=new kt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const o=this.Xr(a.Yr);s.push(o)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Pe(ae);return n.forEach(r=>{const s=new kt(r,0),a=new kt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{i=i.add(o.Yr)})}),M.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;$.isDocumentKey(s)||(s=s.child(""));const a=new kt(new $(s),0);let o=new Pe(ae);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(o=o.add(l.Yr)),!0)},a),M.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Z(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return M.forEach(n.mutations,r=>{const s=new kt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new kt(n,0),r=this.Zr.firstAfterOrEqual(i);return M.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{constructor(e){this.ri=e,this.docs=function(){return new Ue($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return M.resolve(i?i.document.mutableCopy():Fe.newInvalidDocument(n))}getEntries(e,n){let i=Sn();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Fe.newInvalidDocument(r))}),M.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Sn();const a=n.path,o=new $(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Rw(QD(h),i)<=0||(r.has(h.key)||Id(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,i,r){X(9500)}ii(e,n){return M.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new bH(this)}getSize(e){return M.resolve(this.size)}}class bH extends mV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wH{constructor(e){this.persistence=e,this.si=new zr(n=>Za(n),Ad),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.oi=0,this._i=new Ww,this.targetCount=0,this.ai=ro.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ro(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=n&&i.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),M.waitFor(s).next(()=>r)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return M.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),M.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return M.resolve(i)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,n){this.ui={},this.overlays={},this.ci=new En(0),this.li=!1,this.li=!0,this.hi=new yH,this.referenceDelegate=e(this),this.Pi=new wH(this),this.indexManager=new sH,this.remoteDocumentCache=function(r){return new vH(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new rV(n),this.Ii=new pH(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gH,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new _H(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){q("MemoryPersistence","Starting transaction:",e);const r=new TH(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(e,n){return M.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class TH extends YD{constructor(e){super(),this.currentSequenceNumber=e}}class gg{constructor(e){this.persistence=e,this.Ri=new Ww,this.Vi=null}static mi(e){return new gg(e)}get fi(){if(this.Vi)return this.Vi;throw X(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),M.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,i=>{const r=$.fromPath(i);return this.gi(e,r).next(s=>{s||n.removeEntry(r,te.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class cp{constructor(e,n){this.persistence=e,this.pi=new zr(i=>sn(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=fV(this,n)}static mi(e,n){return new cp(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(i,r)=>this.br(e,i,r).next(s=>s?M.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(o=>{o||(i++,s.removeEntry(a,te.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),M.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=sm(e.data.value)),n}br(e,n,i){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return M.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EH{constructor(e){this.serializer=e}k(e,n,i,r){const s=new sg("createOrUpgrade",n);i<1&&r>=1&&(function(l){l.createObjectStore(Ed)}(e),function(l){l.createObjectStore(Vh,{keyPath:j8}),l.createObjectStore(_i,{keyPath:YI,autoIncrement:!0}).createIndex(Ca,XI,{unique:!0}),l.createObjectStore(jl)}(e),z1(e),function(l){l.createObjectStore(ba)}(e));let a=M.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore(Bl),l.deleteObjectStore(zl),l.deleteObjectStore(za)}(e),z1(e)),a=a.next(()=>function(l){const c=l.store(za),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:te.min().toTimestamp(),targetCount:0};return c.put(np,h)}(s))),i<4&&r>=4&&(i!==0&&(a=a.next(()=>function(l,c){return c.store(_i).J().next(d=>{l.deleteObjectStore(_i),l.createObjectStore(_i,{keyPath:YI,autoIncrement:!0}).createIndex(Ca,XI,{unique:!0});const f=c.store(_i),p=d.map(w=>f.put(w));return M.waitFor(p)})}(e,s))),a=a.next(()=>{(function(l){l.createObjectStore(Fl,{keyPath:Q8})})(e)})),i<5&&r>=5&&(a=a.next(()=>this.yi(s))),i<6&&r>=6&&(a=a.next(()=>(function(l){l.createObjectStore(Oh)}(e),this.wi(s)))),i<7&&r>=7&&(a=a.next(()=>this.Si(s))),i<8&&r>=8&&(a=a.next(()=>this.bi(e,s))),i<9&&r>=9&&(a=a.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(a=a.next(()=>this.Di(s))),i<11&&r>=11&&(a=a.next(()=>{(function(l){l.createObjectStore(ag,{keyPath:W8})})(e),function(l){l.createObjectStore(og,{keyPath:Y8})}(e)})),i<12&&r>=12&&(a=a.next(()=>{(function(l){const c=l.createObjectStore(lg,{keyPath:i7});c.createIndex(Qv,r7,{unique:!1}),c.createIndex(rk,s7,{unique:!1})})(e)})),i<13&&r>=13&&(a=a.next(()=>function(l){const c=l.createObjectStore(tp,{keyPath:B8});c.createIndex(im,F8),c.createIndex(ek,q8)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(ba))),i<14&&r>=14&&(a=a.next(()=>this.Fi(e,s))),i<15&&r>=15&&(a=a.next(()=>function(l){l.createObjectStore(Nw,{keyPath:X8,autoIncrement:!0}).createIndex(Kv,J8,{unique:!1}),l.createObjectStore(Yu,{keyPath:Z8}).createIndex(nk,e7,{unique:!1}),l.createObjectStore(Xu,{keyPath:t7}).createIndex(ik,n7,{unique:!1})}(e))),i<16&&r>=16&&(a=a.next(()=>{n.objectStore(Yu).clear()}).next(()=>{n.objectStore(Xu).clear()})),i<17&&r>=17&&(a=a.next(()=>{(function(l){l.createObjectStore(Dw,{keyPath:a7})})(e)})),i<18&&r>=18&&T2()&&(a=a.next(()=>{n.objectStore(Yu).clear()}).next(()=>{n.objectStore(Xu).clear()})),a}wi(e){let n=0;return e.store(ba).ee((i,r)=>{n+=lp(r)}).next(()=>{const i={byteSize:n};return e.store(Oh).put($v,i)})}yi(e){const n=e.store(Vh),i=e.store(_i);return n.J().next(r=>M.forEach(r,s=>{const a=IDBKeyRange.bound([s.userId,Ps],[s.userId,s.lastAcknowledgedBatchId]);return i.J(Ca,a).next(o=>M.forEach(o,l=>{Z(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=Aa(this.serializer,l);return cV(e,s.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(Bl),i=e.store(ba);return e.store(za).get(np).next(r=>{const s=[];return i.ee((a,o)=>{const l=new ge(a),c=function(d){return[0,sn(d)]}(l);s.push(n.get(c).next(h=>h?M.resolve():(d=>n.put({targetId:0,path:sn(d),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(s))})}bi(e,n){e.createObjectStore(Mh,{keyPath:K8});const i=n.store(Mh),r=new Qw,s=a=>{if(r.add(a)){const o=a.lastSegment(),l=a.popLast();return i.put({collectionId:o,parent:sn(l)})}};return n.store(ba).ee({X:!0},(a,o)=>{const l=new ge(a);return s(l.popLast())}).next(()=>n.store(jl).ee({X:!0},([a,o,l],c)=>{const h=zi(o);return s(h.popLast())}))}Di(e){const n=e.store(zl);return n.ee((i,r)=>{const s=Eu(r),a=sV(this.serializer,s);return n.put(a)})}Ci(e,n){const i=n.store(ba),r=[];return i.ee((s,a)=>{const o=n.store(tp),l=function(d){return d.document?new $(ge.fromString(d.document.name).popFirst(5)):d.noDocument?$.fromSegments(d.noDocument.path):d.unknownDocument?$.fromSegments(d.unknownDocument.path):X(36783)}(a).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(o.put(c))}).next(()=>M.waitFor(r))}Fi(e,n){const i=n.store(_i),r=pV(this.serializer),s=new Yw(gg.mi,this.serializer.yt);return i.J().next(a=>{const o=new Map;return a.forEach(l=>{let c=o.get(l.userId)??ce();Aa(this.serializer,l).keys().forEach(h=>c=c.add(h)),o.set(l.userId,c)}),M.forEach(o,(l,c)=>{const h=new Ot(c),d=mg.wt(this.serializer,h),f=s.getIndexManager(h),p=pg.wt(h,this.serializer,f,s.referenceDelegate);return new gV(r,p,d,f).recalculateAndSaveOverlaysForDocumentKeys(new Wv(n,En.ce),l).next()})})}}function z1(t){t.createObjectStore(Bl,{keyPath:G8}).createIndex(Pw,$8,{unique:!0}),t.createObjectStore(zl,{keyPath:"targetId"}).createIndex(tk,H8,{unique:!0}),t.createObjectStore(za)}const es="IndexedDbPersistence",o_=18e5,l_=5e3,c_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yV="main";class Xw{constructor(e,n,i,r,s,a,o,l,c,h,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.Mi=s,this.window=a,this.document=o,this.xi=c,this.Oi=h,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!Xw.v())throw new F(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hH(this,r),this.$i=n+yV,this.serializer=new rV(l),this.Ui=new qi(this.$i,this.Ni,new EH(this.serializer)),this.hi=new Z7,this.Pi=new oH(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pV(this.serializer),this.Ii=new J7,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&mt(es,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(U.FAILED_PRECONDITION,c_);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new En(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ef(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(ea(e))return q(es,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return q(es,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return cu(e).get(Co).next(n=>M.resolve(this.es(n)))}ts(e){return Ef(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,o_)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=Pt(n,Fl);return i.J().next(r=>{const s=this.ss(r,o_),a=r.filter(o=>s.indexOf(o)===-1);return M.forEach(a,o=>i.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?M.resolve(!0):cu(e).get(Co).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,l_)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new F(U.FAILED_PRECONDITION,c_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ef(e).J().next(i=>this.ss(i,l_).find(r=>{if(this.clientId!==r.clientId){const s=!this.networkEnabled&&r.networkEnabled,a=!this.inForeground&&r.inForeground,o=this.networkEnabled===r.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&q(es,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Ed,Fl],e=>{const n=new Wv(e,En.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(i=>this.rs(i.updateTimeMs,n)&&!this.us(i.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Ef(e).J().next(n=>this.ss(n,o_).map(i=>i.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return pg.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new aH(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return mg.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,i){q(es,"Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?c7:l===17?lk:l===16?l7:l===15?kw:l===14?ok:l===13?ak:l===12?o7:l===11?sk:void X(60245)}(this.Ni);let a;return this.Ui.runTransaction(e,r,s,o=>(a=new Wv(o,this.ci?this.ci.next():En.ce),n==="readwrite-primary"?this.Hi(a).next(l=>!!l||this.Yi(a)).next(l=>{if(!l)throw mt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new F(U.FAILED_PRECONDITION,WD);return i(a)}).next(l=>this.Xi(a).next(()=>l)):this.Is(a).next(()=>i(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Is(e){return cu(e).get(Co).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,l_)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new F(U.FAILED_PRECONDITION,c_)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cu(e).put(Co,n)}static v(){return qi.v()}Zi(e){const n=cu(e);return n.get(Co).next(i=>this.es(i)?(q(es,"Releasing primary lease."),n.delete(Co)):M.resolve())}rs(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(mt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;w2()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const i=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return q(es,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return mt(es,"Failed to get zombied client id.",i),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){mt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function cu(t){return Pt(t,Ed)}function Ef(t){return Pt(t,Fl)}function Jw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=ce(),r=ce();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Zw(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AH{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return w2()?8:XD(tt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.ys(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new AH;return this.Ss(e,n,a).next(o=>{if(s.result=o,this.Vs)return this.bs(e,n,a,o.size)})}).next(()=>s.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(jo()<=me.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",zo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(jo()<=me.DEBUG&&q("QueryEngine","Query:",zo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(jo()<=me.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",zo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pn(n))):M.resolve())}ys(e,n){if(u1(n))return M.resolve(null);let i=pn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=sp(n,null,"F"),i=pn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=ce(...s);return this.ps.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Ds(n,o);return this.Cs(n,c,a,l.readTime)?this.ys(e,sp(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,i,r){return u1(n)||r.isEqual(te.min())?M.resolve(null):this.ps.getDocuments(e,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?M.resolve(null):(jo()<=me.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),zo(n)),this.vs(e,a,n,KD(r,Ul)).next(o=>o))})}Ds(e,n){let i=new Pe(Ck(e));return n.forEach((r,s)=>{Id(e,s)&&(i=i.add(s))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,n,i){return jo()<=me.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",zo(n)),this.ps.getDocumentsMatchingQuery(e,n,Kn.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="LocalStore",SH=3e8;class IH{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Ue(ae),this.xs=new zr(s=>Za(s),Ad),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function vV(t,e,n,i){return new IH(t,e,n,i)}async function bV(t,e){const n=W(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],o=[];let l=ce();for(const c of r){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({Ls:c,removedBatchIds:a,addedBatchIds:o}))})})}function xH(t,e){const n=W(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,c,h){const d=c.batch,f=d.keys();let p=M.resolve();return f.forEach(w=>{p=p.next(()=>h.getEntry(l,w)).next(E=>{const A=c.docVersions.get(w);Z(A!==null,48541),E.version.compareTo(A)<0&&(d.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let l=ce();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function wV(t){const e=W(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function RH(t,e){const n=W(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const o=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;o.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,d)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(lt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(h.resumeToken,i)),r=r.insert(d,p),function(E,A,v){return E.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=SH?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,p,h)&&o.push(n.Pi.updateTargetData(s,p))});let l=Sn(),c=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),o.push(TV(s,a,e.documentUpdates).next(h=>{l=h.ks,c=h.qs})),!i.isEqual(te.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));o.push(h)}return M.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ms=r,s))}function TV(t,e,n){let i=ce(),r=ce();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=Sn();return n.forEach((o,l)=>{const c=s.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(o)),l.isNoDocument()&&l.version.isEqual(te.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):q(eT,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{ks:a,qs:r}})}function CH(t,e){const n=W(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Ps),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Wl(t,e){const n=W(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(s=>s?(r=s,M.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new fr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Yl(t,e,n){const i=W(t),r=i.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!ea(a))throw a;q(eT,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function up(t,e,n){const i=W(t);let r=te.min(),s=ce();return i.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,h){const d=W(l),f=d.xs.get(h);return f!==void 0?M.resolve(d.Ms.get(f)):d.Pi.getTargetData(c,h)}(i,a,pn(e)).next(o=>{if(o)return r=o.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:te.min(),n?s:ce())).next(o=>(SV(i,Rk(e),o),{documents:o,Qs:s})))}function EV(t,e){const n=W(t),i=W(n.Pi),r=n.Ms.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",s=>i.At(s,e).next(a=>a?a.target:null))}function AV(t,e){const n=W(t),i=n.Os.get(e)||te.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.Ns.getAllFromCollectionGroup(r,e,KD(i,Ul),Number.MAX_SAFE_INTEGER)).then(r=>(SV(n,e,r),r))}function SV(t,e,n){let i=t.Os.get(e)||te.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.Os.set(e,i)}async function PH(t,e,n,i){const r=W(t);let s=ce(),a=Sn();for(const c of n){const h=e.$s(c.metadata.name);c.document&&(s=s.add(h));const d=e.Us(c);d.setReadTime(e.Ks(c.metadata.readTime)),a=a.insert(h,d)}const o=r.Ns.newChangeBuffer({trackRemovals:!0}),l=await Wl(r,function(h){return pn(wc(ge.fromString(`__bundle__/docs/${h}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>TV(c,o,a).next(h=>(o.apply(c),h)).next(h=>r.Pi.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Pi.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,h.ks,h.qs)).next(()=>h.ks)))}async function NH(t,e,n=ce()){const i=await Wl(t,pn($w(e.bundledQuery))),r=W(t);return r.persistence.runTransaction("Save named query","readwrite",s=>{const a=gt(e.readTime);if(i.snapshotVersion.compareTo(a)>=0)return r.Ii.saveNamedQuery(s,e);const o=i.withResumeToken(lt.EMPTY_BYTE_STRING,a);return r.Ms=r.Ms.insert(o.targetId,o),r.Pi.updateTargetData(s,o).next(()=>r.Pi.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Pi.addMatchingKeys(s,n,i.targetId)).next(()=>r.Ii.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV="firestore_clients";function B1(t,e){return`${IV}_${t}_${e}`}const xV="firestore_mutations";function F1(t,e,n){let i=`${xV}_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const RV="firestore_targets";function u_(t,e){return`${RV}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="SharedClientState";class hp{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Ws(e,n,i){const r=JSON.parse(i);let s,a=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(s=new F(r.error.code,r.error.message))),a?new hp(e,n,r.state,s):(mt(Pi,`Failed to parse mutation state for ID '${n}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class th{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Ws(e,n){const i=JSON.parse(n);let r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new F(i.error.code,i.error.message))),s?new th(e,i.state,r):(mt(Pi,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const i=JSON.parse(n);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=Uw();for(let a=0;r&&a<i.activeTargetIds.length;++a)r=JD(i.activeTargetIds[a]),s=s.add(i.activeTargetIds[a]);return r?new dp(e,s):(mt(Pi,`Failed to parse client data for instance '${e}': ${n}`),null)}}class tT{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new tT(n.clientId,n.onlineState):(mt(Pi,`Failed to parse online state: ${e}`),null)}}class u0{constructor(){this.activeTargetIds=Uw()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class h_{constructor(e,n,i,r,s){this.window=e,this.Mi=n,this.persistenceKey=i,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ue(ae),this.started=!1,this.Xs=[];const a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=B1(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new u0),this.ro=new RegExp(`^${IV}_${a}_([^_]*)$`),this.io=new RegExp(`^${xV}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${RV}_${a}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const r=this.getItem(B1(this.persistenceKey,i));if(r){const s=dp.Ws(i,r);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const i=this.uo(n);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,i){this.ho(e,n,i),this.Po(e)}addLocalQueryTarget(e,n=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(u_(this.persistenceKey,e));if(r){const s=th.Ws(e,r);s&&(i=s.state)}}return n&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(u_(this.persistenceKey,e))}updateQueryState(e,n,i){this.Io(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Po(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return q(Pi,"READ",e,n),n}setItem(e,n){q(Pi,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){q(Pi,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(q(Pi,"EVENT",n.key,n.newValue),n.key===this.eo)return void mt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const i=this.Ro(n.key);return this.Vo(i,null)}{const i=this.mo(n.key,n.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(n.key)){if(n.newValue!==null){const i=this.fo(n.key,n.newValue);if(i)return this.po(i)}}else if(this.so.test(n.key)){if(n.newValue!==null){const i=this.yo(n.key,n.newValue);if(i)return this.wo(i)}}else if(n.key===this.oo){if(n.newValue!==null){const i=this.uo(n.newValue);if(i)return this.co(i)}}else if(n.key===this.no){const i=function(s){let a=En.ce;if(s!=null)try{const o=JSON.parse(s);Z(typeof o=="number",30636,{So:s}),a=o}catch(o){mt(Pi,"Failed to read sequence number from WebStorage",o)}return a}(n.newValue);i!==En.ce&&this.sequenceNumberHandler(i)}else if(n.key===this._o){const i=this.bo(n.newValue);await Promise.all(i.map(r=>this.syncEngine.Do(r)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,i){const r=new hp(this.currentUser,e,n,i),s=F1(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Gs())}Po(e){const n=F1(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,i){const r=u_(this.persistenceKey,e),s=new th(e,n,i);this.setItem(r,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const i=this.Ro(e);return dp.Ws(i,n)}fo(e,n){const i=this.io.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return hp.Ws(new Ot(s),r,n)}yo(e,n){const i=this.so.exec(e),r=Number(i[1]);return th.Ws(r,n)}uo(e){return tT.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);q(Pi,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const i=n?this.Zs.insert(e,n):this.Zs.remove(e),r=this.lo(this.Zs),s=this.lo(i),a=[],o=[];return s.forEach(l=>{r.has(l)||a.push(l)}),r.forEach(l=>{s.has(l)||o.push(l)}),this.syncEngine.Fo(a,o).then(()=>{this.Zs=i})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=Uw();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}}class CV{constructor(){this.Mo=new u0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new u0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DH{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="ConnectivityMonitor";class H1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){q(q1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){q(q1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af=null;function h0(){return Af===null?Af=function(){return 268435456+Math.round(2147483648*Math.random())}():Af++,"0x"+Af.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="RestConnection",kH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VH{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Yv?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,s){const a=h0(),o=this.zo(e,n.toUriEncodedString());q(d_,`Sending RPC '${e}' ${a}:`,o,i);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,s);const{host:c}=new URL(o),h=Xs(c);return this.Jo(e,o,l,i,h).then(d=>(q(d_,`Received RPC '${e}' ${a}: `,d),d),d=>{throw Yi(d_,`RPC '${e}' ${a} failed with error: `,d,"url: ",o,"request:",i),d})}Ho(e,n,i,r,s,a){return this.Go(e,n,i,r,s)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}zo(e,n){const i=kH[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OH{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class MH extends VH{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,s){const a=h0();return new Promise((o,l)=>{const c=new MD;c.setWithCredentials(!0),c.listenOnce(LD.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case em.NO_ERROR:const d=c.getResponseJson();q(Yt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case em.TIMEOUT:q(Yt,`RPC '${e}' ${a} timed out`),l(new F(U.DEADLINE_EXCEEDED,"Request time out"));break;case em.HTTP_ERROR:const f=c.getStatus();if(q(Yt,`RPC '${e}' ${a} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const w=p==null?void 0:p.error;if(w&&w.status&&w.message){const E=function(v){const _=v.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(_)>=0?_:U.UNKNOWN}(w.status);l(new F(E,w.message))}else l(new F(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new F(U.UNAVAILABLE,"Connection failed."));break;default:X(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{q(Yt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(r);q(Yt,`RPC '${e}' ${a} sending request:`,r),c.send(n,"POST",h,i,15)})}T_(e,n,i){const r=h0(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=zD(),o=jD(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");q(Yt,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=a.createWebChannel(h,l);this.I_(d);let f=!1,p=!1;const w=new OH({Yo:A=>{p?q(Yt,`Not sending because RPC '${e}' stream ${r} is closed:`,A):(f||(q(Yt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),q(Yt,`RPC '${e}' stream ${r} sending:`,A),d.send(A))},Zo:()=>d.close()}),E=(A,v,_)=>{A.listen(v,b=>{try{_(b)}catch(I){setTimeout(()=>{throw I},0)}})};return E(d,bu.EventType.OPEN,()=>{p||(q(Yt,`RPC '${e}' stream ${r} transport opened.`),w.o_())}),E(d,bu.EventType.CLOSE,()=>{p||(p=!0,q(Yt,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(d))}),E(d,bu.EventType.ERROR,A=>{p||(p=!0,Yi(Yt,`RPC '${e}' stream ${r} transport errored. Name:`,A.name,"Message:",A.message),w.a_(new F(U.UNAVAILABLE,"The operation could not be completed")))}),E(d,bu.EventType.MESSAGE,A=>{var v;if(!p){const _=A.data[0];Z(!!_,16349);const b=_,I=(b==null?void 0:b.error)||((v=b[0])==null?void 0:v.error);if(I){q(Yt,`RPC '${e}' stream ${r} received error:`,I);const D=I.status;let V=function(C){const N=_t[C];if(N!==void 0)return Fk(N)}(D),S=I.message;V===void 0&&(V=U.INTERNAL,S="Unknown error status: "+D+" with message "+I.message),p=!0,w.a_(new F(V,S)),d.close()}else q(Yt,`RPC '${e}' stream ${r} received:`,_),w.u_(_)}}),E(o,UD.STAT_EVENT,A=>{A.stat===qv.PROXY?q(Yt,`RPC '${e}' stream ${r} detected buffering proxy`):A.stat===qv.NOPROXY&&q(Yt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(){return typeof window<"u"?window:null}function um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(t){return new B7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&q("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="PersistentStream";class NV{constructor(e,n,i,r,s,a,o,l){this.Mi=e,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(mt(n.toString()),mt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new F(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return q(G1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(q(G1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LH extends NV{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=H7(this.serializer,e),i=function(s){if(!("targetChange"in s))return te.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?te.min():a.readTime?gt(a.readTime):te.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=s0(this.serializer),n.addTarget=function(s,a){let o;const l=a.target;if(o=ip(l)?{documents:Jk(s,l)}:{query:Zk(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=$k(s,a.resumeToken);const c=i0(s,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(te.min())>0){o.readTime=Ql(s,a.snapshotVersion.toTimestamp());const c=i0(s,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const i=$7(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=s0(this.serializer),n.removeTarget=e,this.q_(n)}}class UH extends NV{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Z(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Z(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Z(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=G7(e.writeResults,e.commitTime),i=gt(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=s0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>Fh(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jH{}class zH extends jH{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new F(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,r0(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(U.UNKNOWN,s.toString())})}Ho(e,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(e,r0(n,i),r,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new F(U.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class BH{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mt(n),this.aa=!1):q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="RemoteStore";class FH{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{na(this)&&(q(so,"Restarting streams for network reachability change."),await async function(l){const c=W(l);c.Ea.add(4),await Ac(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Nd(c)}(this))})}),this.Ra=new BH(i,r)}}async function Nd(t){if(na(t))for(const e of t.da)await e(!0)}async function Ac(t){for(const e of t.da)await e(!1)}function yg(t,e){const n=W(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),sT(n)?rT(n):Ic(n).O_()&&iT(n,e))}function Xl(t,e){const n=W(t),i=Ic(n);n.Ia.delete(e),i.O_()&&DV(n,e),n.Ia.size===0&&(i.O_()?i.L_():na(n)&&n.Ra.set("Unknown"))}function iT(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ic(t).Y_(e)}function DV(t,e){t.Va.Ue(e),Ic(t).Z_(e)}function rT(t){t.Va=new L7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ic(t).start(),t.Ra.ua()}function sT(t){return na(t)&&!Ic(t).x_()&&t.Ia.size>0}function na(t){return W(t).Ea.size===0}function kV(t){t.Va=void 0}async function qH(t){t.Ra.set("Online")}async function HH(t){t.Ia.forEach((e,n)=>{iT(t,e)})}async function GH(t,e){kV(t),sT(t)?(t.Ra.ha(e),rT(t)):t.Ra.set("Unknown")}async function $H(t,e,n){if(t.Ra.set("Online"),e instanceof Gk&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const o of s.targetIds)r.Ia.has(o)&&(await r.remoteSyncer.rejectListen(o,a),r.Ia.delete(o),r.Va.removeTarget(o))}(t,e)}catch(i){q(so,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await fp(t,i)}else if(e instanceof lm?t.Va.Ze(e):e instanceof Hk?t.Va.st(e):t.Va.tt(e),!n.isEqual(te.min()))try{const i=await wV(t.localStore);n.compareTo(i)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(c);h&&s.Ia.set(c,h.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(lt.EMPTY_BYTE_STRING,h.snapshotVersion)),DV(s,l);const d=new fr(h.target,l,c,h.sequenceNumber);iT(s,d)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(i){q(so,"Failed to raise snapshot:",i),await fp(t,i)}}async function fp(t,e,n){if(!ea(e))throw e;t.Ea.add(1),await Ac(t),t.Ra.set("Offline"),n||(n=()=>wV(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(so,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Nd(t)})}function VV(t,e){return e().catch(n=>fp(t,n,e))}async function Sc(t){const e=W(t),n=Hs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ps;for(;KH(e);)try{const r=await CH(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,QH(e,r)}catch(r){await fp(e,r)}OV(e)&&MV(e)}function KH(t){return na(t)&&t.Ta.length<10}function QH(t,e){t.Ta.push(e);const n=Hs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function OV(t){return na(t)&&!Hs(t).x_()&&t.Ta.length>0}function MV(t){Hs(t).start()}async function WH(t){Hs(t).ra()}async function YH(t){const e=Hs(t);for(const n of t.Ta)e.ea(n.mutations)}async function XH(t,e,n){const i=t.Ta.shift(),r=Fw.from(i,e,n);await VV(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Sc(t)}async function JH(t,e){e&&Hs(t).X_&&await async function(i,r){if(function(a){return Bk(a)&&a!==U.ABORTED}(r.code)){const s=i.Ta.shift();Hs(i).B_(),await VV(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Sc(i)}}(t,e),OV(t)&&MV(t)}async function $1(t,e){const n=W(t);n.asyncQueue.verifyOperationInProgress(),q(so,"RemoteStore received new credentials");const i=na(n);n.Ea.add(3),await Ac(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Nd(n)}async function d0(t,e){const n=W(t);e?(n.Ea.delete(2),await Nd(n)):e||(n.Ea.add(2),await Ac(n),n.Ra.set("Unknown"))}function Ic(t){return t.ma||(t.ma=function(n,i,r){const s=W(n);return s.sa(),new LH(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:qH.bind(null,t),t_:HH.bind(null,t),r_:GH.bind(null,t),H_:$H.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),sT(t)?rT(t):t.Ra.set("Unknown")):(await t.ma.stop(),kV(t))})),t.ma}function Hs(t){return t.fa||(t.fa=function(n,i,r){const s=W(n);return s.sa(),new UH(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:WH.bind(null,t),r_:JH.bind(null,t),ta:YH.bind(null,t),na:XH.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Sc(t)):(await t.fa.stop(),t.Ta.length>0&&(q(so,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Kt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,o=new aT(e,n,a,r,s);return o.start(i),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xc(t,e){if(mt("AsyncQueue",`${e}: ${t}`),ea(t))return new F(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{static emptySet(e){return new bl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||$.comparator(n.key,i.key):(n,i)=>$.comparator(n.key,i.key),this.keyedMap=wu(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new bl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(){this.ga=new Ue($.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):X(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Jl{constructor(e,n,i,r,s,a,o,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new Jl(e,n,bl.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class eG{constructor(){this.queries=Q1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=W(n),s=r.queries;r.queries=Q1(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(i)})})(this,new F(U.ABORTED,"Firestore shutting down"))}}function Q1(){return new zr(t=>xk(t),Sd)}async function oT(t,e){const n=W(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.ba()&&e.Da()&&(i=2):(s=new ZH,i=e.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const o=xc(a,`Initialization of query '${zo(e.query)}' failed`);return void e.onError(o)}n.queries.set(r,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&cT(n)}async function lT(t,e){const n=W(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=e.Da()?0:1:!s.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function tG(t,e){const n=W(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const o of a.Sa)o.Fa(r)&&(i=!0);a.wa=r}}i&&cT(n)}function nG(t,e,n){const i=W(t),r=i.queries.get(e);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(e)}function cT(t){t.Ca.forEach(e=>{e.next()})}var f0,W1;(W1=f0||(f0={})).Ma="default",W1.Cache="cache";class uT{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Jl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Jl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==f0.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e){this.serializer=e}$s(e){return Hi(this.serializer,e)}Us(e){return e.metadata.exists?Xk(this.serializer,e.document,!1):Fe.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return gt(e)}}class rG{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=LV(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const i=ge.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,i=new Y1(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.$s(r.metadata.name);for(const a of r.metadata.queries){const o=(n.get(a)||ce()).add(s);n.set(a,o)}}return n}async ja(e){const n=await PH(e,new Y1(this.serializer),this.Wa,this.Ua.id),i=this.za(this.documents);for(const r of this.Ka)await NH(e,r,i.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function LV(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e){this.key=e}}class jV{constructor(e){this.key=e}}class zV{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ce(),this.mutatedKeys=ce(),this.eu=Ck(e),this.tu=new bl(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new K1,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,o=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),p=Id(this.query,d)?d:null,w=!!f&&this.mutatedKeys.has(f.key),E=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let A=!1;f&&p?f.data.isEqual(p.data)?w!==E&&(i.track({type:3,doc:p}),A=!0):this.su(f,p)||(i.track({type:2,doc:p}),A=!0,(l&&this.eu(p,l)>0||c&&this.eu(p,c)<0)&&(o=!0)):!f&&p?(i.track({type:0,doc:p}),A=!0):f&&!p&&(i.track({type:1,doc:f}),A=!0,(l||c)&&(o=!0)),A&&(p?(a=a.add(p),s=E?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{tu:a,iu:i,Cs:o,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,d)=>function(p,w){const E=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Rt:A})}};return E(p)-E(w)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(i),r=r??!1;const o=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,c=l!==this.Za;return this.Za=l,a.length!==0||c?{snapshot:new Jl(this.query,e.tu,s,a,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new K1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ce(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new jV(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new UV(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Jl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ia="SyncEngine";class sG{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class aG{constructor(e){this.key=e,this.hu=!1}}class oG{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new zr(o=>xk(o),Sd),this.Iu=new Map,this.Eu=new Set,this.du=new Ue($.comparator),this.Au=new Map,this.Ru=new Ww,this.Vu={},this.mu=new Map,this.fu=ro.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function lG(t,e,n=!0){const i=_g(t);let r;const s=i.Tu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await BV(i,e,n,!0),r}async function cG(t,e){const n=_g(t);await BV(n,e,!0,!1)}async function BV(t,e,n,i){const r=await Wl(t.localStore,pn(e)),s=r.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return i&&(o=await hT(t,e,s,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&yg(t.remoteStore,r),o}async function hT(t,e,n,i,r){t.pu=(d,f,p)=>async function(E,A,v,_){let b=A.view.ru(v);b.Cs&&(b=await up(E.localStore,A.query,!1).then(({documents:S})=>A.view.ru(S,b)));const I=_&&_.targetChanges.get(A.targetId),D=_&&_.targetMismatches.get(A.targetId)!=null,V=A.view.applyChanges(b,E.isPrimaryClient,I,D);return m0(E,A.targetId,V.au),V.snapshot}(t,d,f,p);const s=await up(t.localStore,e,!0),a=new zV(e,s.Qs),o=a.ru(s.documents),l=Cd.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=a.applyChanges(o,t.isPrimaryClient,l);m0(t,n,c.au);const h=new sG(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function uG(t,e,n){const i=W(t),r=i.Tu.get(e),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!Sd(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Yl(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Xl(i.remoteStore,r.targetId),Zl(i,r.targetId)}).catch(Zs)):(Zl(i,r.targetId),await Yl(i.localStore,r.targetId,!0))}async function hG(t,e){const n=W(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Xl(n.remoteStore,i.targetId))}async function dG(t,e,n){const i=pT(t);try{const r=await function(a,o){const l=W(a),c=Ie.now(),h=o.reduce((p,w)=>p.add(w.key),ce());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let w=Sn(),E=ce();return l.Ns.getEntries(p,h).next(A=>{w=A,w.forEach((v,_)=>{_.isValidDocument()||(E=E.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,w)).next(A=>{d=A;const v=[];for(const _ of o){const b=V7(_,d.get(_.key).overlayedDocument);b!=null&&v.push(new Br(_.key,b,_k(b.value.mapValue),Xe.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,v,o)}).next(A=>{f=A;const v=A.applyToLocalDocumentSet(d,E);return l.documentOverlayCache.saveOverlays(p,A.batchId,v)})}).then(()=>({batchId:f.batchId,changes:Nk(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,o,l){let c=a.Vu[a.currentUser.toKey()];c||(c=new Ue(ae)),c=c.insert(o,l),a.Vu[a.currentUser.toKey()]=c}(i,r.batchId,n),await Fr(i,r.changes),await Sc(i.remoteStore)}catch(r){const s=xc(r,"Failed to persist write");n.reject(s)}}async function FV(t,e){const n=W(t);try{const i=await RH(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(Z(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Z(a.hu,14607):r.removedDocuments.size>0&&(Z(a.hu,42227),a.hu=!1))}),await Fr(n,i,e)}catch(i){await Zs(i)}}function X1(t,e,n){const i=W(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const o=a.view.va(e);o.snapshot&&r.push(o.snapshot)}),function(a,o){const l=W(a);l.onlineState=o;let c=!1;l.queries.forEach((h,d)=>{for(const f of d.Sa)f.va(o)&&(c=!0)}),c&&cT(l)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function fG(t,e,n){const i=W(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),s=r&&r.key;if(s){let a=new Ue($.comparator);a=a.insert(s,Fe.newNoDocument(s,te.min()));const o=ce().add(s),l=new Rd(te.min(),new Map,new Ue(ae),a,o);await FV(i,l),i.du=i.du.remove(s),i.Au.delete(e),mT(i)}else await Yl(i.localStore,e,!1).then(()=>Zl(i,e,n)).catch(Zs)}async function mG(t,e){const n=W(t),i=e.batch.batchId;try{const r=await xH(n.localStore,e);fT(n,i,null),dT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Fr(n,r)}catch(r){await Zs(r)}}async function pG(t,e,n){const i=W(t);try{const r=await function(a,o){const l=W(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,o).next(d=>(Z(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);fT(i,e,n),dT(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Fr(i,r)}catch(r){await Zs(r)}}async function gG(t,e){const n=W(t);na(n.remoteStore)||q(ia,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(a){const o=W(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>o.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(i===Ps)return void e.resolve();const r=n.mu.get(i)||[];r.push(e),n.mu.set(i,r)}catch(i){const r=xc(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function dT(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function fT(t,e,n){const i=W(t);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Zl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||qV(t,i)})}function qV(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Xl(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),mT(t))}function m0(t,e,n){for(const i of n)i instanceof UV?(t.Ru.addReference(i.key,e),yG(t,i)):i instanceof jV?(q(ia,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||qV(t,i.key)):X(19791,{wu:i})}function yG(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(q(ia,"New document in limbo: "+n),t.Eu.add(i),mT(t))}function mT(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new $(ge.fromString(e)),i=t.fu.next();t.Au.set(i,new aG(n)),t.du=t.du.insert(n,i),yg(t.remoteStore,new fr(pn(wc(n.path)),i,"TargetPurposeLimboResolution",En.ce))}}async function Fr(t,e,n){const i=W(t),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((o,l)=>{a.push(i.pu(l,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=Zw.As(l.targetId,c);s.push(d)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(l,c){const h=W(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>M.forEach(c,f=>M.forEach(f.Es,p=>h.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>M.forEach(f.ds,p=>h.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!ea(d))throw d;q(eT,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const p=h.Ms.get(f),w=p.snapshotVersion,E=p.withLastLimboFreeSnapshotVersion(w);h.Ms=h.Ms.insert(f,E)}}}(i.localStore,s))}async function _G(t,e){const n=W(t);if(!n.currentUser.isEqual(e)){q(ia,"User change. New user:",e.toKey());const i=await bV(n.localStore,e);n.currentUser=e,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new F(U.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Fr(n,i.Ls)}}function vG(t,e){const n=W(t),i=n.Au.get(e);if(i&&i.hu)return ce().add(i.key);{let r=ce();const s=n.Iu.get(e);if(!s)return r;for(const a of s){const o=n.Tu.get(a);r=r.unionWith(o.view.nu)}return r}}async function bG(t,e){const n=W(t),i=await up(n.localStore,e.query,!0),r=e.view.cu(i);return n.isPrimaryClient&&m0(n,e.targetId,r.au),r}async function wG(t,e){const n=W(t);return AV(n.localStore,e).then(i=>Fr(n,i))}async function TG(t,e,n,i){const r=W(t),s=await function(o,l){const c=W(o),h=W(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>h.er(d,l).next(f=>f?c.localDocuments.getDocuments(d,f):M.resolve(null)))}(r.localStore,e);s!==null?(n==="pending"?await Sc(r.remoteStore):n==="acknowledged"||n==="rejected"?(fT(r,e,i||null),dT(r,e),function(o,l){W(W(o).mutationQueue).ir(l)}(r.localStore,e)):X(6720,"Unknown batchState",{Su:n}),await Fr(r,s)):q(ia,"Cannot apply mutation batch with id: "+e)}async function EG(t,e){const n=W(t);if(_g(n),pT(n),e===!0&&n.gu!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),r=await J1(n,i.toArray());n.gu=!0,await d0(n.remoteStore,!0);for(const s of r)yg(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const i=[];let r=Promise.resolve();n.Iu.forEach((s,a)=>{n.sharedClientState.isLocalQueryTarget(a)?i.push(a):r=r.then(()=>(Zl(n,a),Yl(n.localStore,a,!0))),Xl(n.remoteStore,a)}),await r,await J1(n,i),function(a){const o=W(a);o.Au.forEach((l,c)=>{Xl(o.remoteStore,c)}),o.Ru.Jr(),o.Au=new Map,o.du=new Ue($.comparator)}(n),n.gu=!1,await d0(n.remoteStore,!1)}}async function J1(t,e,n){const i=W(t),r=[],s=[];for(const a of e){let o;const l=i.Iu.get(a);if(l&&l.length!==0){o=await Wl(i.localStore,pn(l[0]));for(const c of l){const h=i.Tu.get(c),d=await bG(i,h);d.snapshot&&s.push(d.snapshot)}}else{const c=await EV(i.localStore,a);o=await Wl(i.localStore,c),await hT(i,HV(c),a,!1,o.resumeToken)}r.push(o)}return i.Pu.H_(s),r}function HV(t){return Ik(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function AG(t){return function(n){return W(W(n).persistence).Ts()}(W(t).localStore)}async function SG(t,e,n,i){const r=W(t);if(r.gu)return void q(ia,"Ignoring unexpected query state notification.");const s=r.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const a=await AV(r.localStore,Rk(s[0])),o=Rd.createSynthesizedRemoteEventForCurrentChange(e,n==="current",lt.EMPTY_BYTE_STRING);await Fr(r,a,o);break}case"rejected":await Yl(r.localStore,e,!0),Zl(r,e,i);break;default:X(64155,n)}}async function IG(t,e,n){const i=_g(t);if(i.gu){for(const r of e){if(i.Iu.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){q(ia,"Adding an already active target "+r);continue}const s=await EV(i.localStore,r),a=await Wl(i.localStore,s);await hT(i,HV(s),a.targetId,!1,a.resumeToken),yg(i.remoteStore,a)}for(const r of n)i.Iu.has(r)&&await Yl(i.localStore,r,!1).then(()=>{Xl(i.remoteStore,r),Zl(i,r)}).catch(Zs)}}function _g(t){const e=W(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=FV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fG.bind(null,e),e.Pu.H_=tG.bind(null,e.eventManager),e.Pu.yu=nG.bind(null,e.eventManager),e}function pT(t){const e=W(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pG.bind(null,e),e}function xG(t,e,n){const i=W(t);(async function(s,a,o){try{const l=await a.getMetadata();if(await function(p,w){const E=W(p),A=gt(w.createTime);return E.persistence.runTransaction("hasNewerBundle","readonly",v=>E.Ii.getBundleMetadata(v,w.id)).then(v=>!!v&&v.createTime.compareTo(A)>=0)}(s.localStore,l))return await a.close(),o._completeWith(function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}}(l)),Promise.resolve(new Set);o._updateProgress(LV(l));const c=new rG(l,a.serializer);let h=await a.bu();for(;h;){const f=await c.Ga(h);f&&o._updateProgress(f),h=await a.bu()}const d=await c.ja(s.localStore);return await Fr(s,d.Ha,void 0),await function(p,w){const E=W(p);return E.persistence.runTransaction("Save bundle","readwrite",A=>E.Ii.saveBundleMetadata(A,w))}(s.localStore,l),o._completeWith(d.progress),Promise.resolve(d.Ja)}catch(l){return Yi(ia,`Loading bundle failed with ${l}`),o._failWith(l),Promise.resolve(new Set)}})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}class qh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return vV(this.persistence,new _V,e.initialUser,this.serializer)}Cu(e){return new Yw(gg.mi,this.serializer)}Du(e){return new CV}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qh.provider={build:()=>new qh};class RG extends qh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Z(this.persistence.referenceDelegate instanceof cp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new dV(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new Yw(i=>cp.mi(i,n),this.serializer)}}class GV extends qh{constructor(e,n,i){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await pT(this.xu.syncEngine),await Sc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return vV(this.persistence,new _V,e.initialUser,this.serializer)}Fu(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new dV(i,e.asyncQueue,n)}Mu(e,n){const i=new L8(n,this.persistence);return new M8(e.asyncQueue,i)}Cu(e){const n=Jw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new Xw(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,PV(),um(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new CV}}class CG extends GV{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof h_&&(this.sharedClientState.syncEngine={Co:TG.bind(null,n),vo:SG.bind(null,n),Fo:IG.bind(null,n),Ts:AG.bind(null,n),Do:wG.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async i=>{await EG(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}Du(e){const n=PV();if(!h_.v(n))throw new F(U.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Jw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new h_(n,e.asyncQueue,i,e.clientId,e.initialUser)}}class Hh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>X1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=_G.bind(null,this.syncEngine),await d0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eG}()}createDatastore(e){const n=Pd(e.databaseInfo.databaseId),i=function(s){return new MH(s)}(e.databaseInfo);return function(s,a,o,l){return new zH(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,a,o){return new FH(i,r,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>X1(this.syncEngine,n,0),function(){return H1.v()?new H1:new DH}())}createSyncEngine(e,n){return function(r,s,a,o,l,c,h){const d=new oG(r,s,a,o,l,c);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=W(r);q(so,"RemoteStore shutting down."),s.Ea.add(5),await Ac(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Hh.provider={build:()=>new Hh};function Z1(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PG{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Kt,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(i=>{i&&i.$a()?this.metadata.resolve(i.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Qa)}`))},i=>this.metadata.reject(i))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),i=Number(n);isNaN(i)&&this.Qu(`length string (${n}) is not valid number`);const r=await this.$u(i);return new iG(JSON.parse(r),e.length+i)}Uu(){return this.buffer.findIndex(e=>e===123)}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NG{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new F(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const a=W(r),o={documents:s.map(d=>Bh(a.serializer,d))},l=await a.Ho("BatchGetDocuments",a.serializer.databaseId,ge.emptyPath(),o,s.length),c=new Map;l.forEach(d=>{const f=q7(a.serializer,d);c.set(f.key.toString(),f)});const h=[];return s.forEach(d=>{const f=c.get(d.toString());Z(!!f,55234,{key:d}),h.push(f)}),h}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ec(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=$.fromPath(i);this.mutations.push(new zw(r,this.precondition(r)))}),await async function(i,r){const s=W(i),a={writes:r.map(o=>Fh(s.serializer,o))};await s.Go("Commit",s.serializer.databaseId,ge.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw X(50498,{Gu:e.constructor.name});n=te.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new F(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(te.min())?Xe.exists(!1):Xe.updateTime(n):Xe.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(te.min()))throw new F(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xe.updateTime(n)}return Xe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DG{constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.zu=i.maxAttempts,this.M_=new nT(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new NG(this.datastore),n=this.Hu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Yu(r)}))}).catch(i=>{this.Yu(i)})})}Hu(e){try{const n=this.updateFunction(e);return!Td(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!Bk(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="FirestoreClient";class kG{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Ot.UNAUTHENTICATED,this.clientId=Iw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{q(Gs,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(q(Gs,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=xc(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function f_(t,e){t.asyncQueue.verifyOperationInProgress(),q(Gs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await bV(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ex(t,e){t.asyncQueue.verifyOperationInProgress();const n=await gT(t);q(Gs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>$1(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>$1(e.remoteStore,r)),t._onlineComponents=e}async function gT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(Gs,"Using user provided OfflineComponentProvider");try{await f_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===U.FAILED_PRECONDITION||r.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Yi("Error using user provided cache. Falling back to memory cache: "+n),await f_(t,new qh)}}else q(Gs,"Using default OfflineComponentProvider"),await f_(t,new RG(void 0));return t._offlineComponents}async function bg(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(Gs,"Using user provided OnlineComponentProvider"),await ex(t,t._uninitializedComponentsProvider._online)):(q(Gs,"Using default OnlineComponentProvider"),await ex(t,new Hh))),t._onlineComponents}function $V(t){return gT(t).then(e=>e.persistence)}function yT(t){return gT(t).then(e=>e.localStore)}function KV(t){return bg(t).then(e=>e.remoteStore)}function _T(t){return bg(t).then(e=>e.syncEngine)}function VG(t){return bg(t).then(e=>e.datastore)}async function ec(t){const e=await bg(t),n=e.eventManager;return n.onListen=lG.bind(null,e.syncEngine),n.onUnlisten=uG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=hG.bind(null,e.syncEngine),n}function OG(t){return t.asyncQueue.enqueue(async()=>{const e=await $V(t),n=await KV(t);return e.setNetworkEnabled(!0),function(r){const s=W(r);return s.Ea.delete(0),Nd(s)}(n)})}function MG(t){return t.asyncQueue.enqueue(async()=>{const e=await $V(t),n=await KV(t);return e.setNetworkEnabled(!1),async function(r){const s=W(r);s.Ea.add(0),await Ac(s),s.Ra.set("Offline")}(n)})}function LG(t,e){const n=new Kt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const o=await function(c,h){const d=W(c);return d.persistence.runTransaction("read document","readonly",f=>d.localDocuments.getDocument(f,h))}(r,s);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new F(U.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const l=xc(o,`Failed to get document '${s} from cache`);a.reject(l)}}(await yT(t),e,n)),n.promise}function QV(t,e,n={}){const i=new Kt;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const h=new vg({next:f=>{h.Nu(),a.enqueueAndForget(()=>lT(s,d));const p=f.docs.has(o);!p&&f.fromCache?c.reject(new F(U.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new F(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new uT(wc(o.path),h,{includeMetadataChanges:!0,qa:!0});return oT(s,d)}(await ec(t),t.asyncQueue,e,n,i)),i.promise}function UG(t,e){const n=new Kt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const o=await up(r,s,!0),l=new zV(s,o.Qs),c=l.ru(o.documents),h=l.applyChanges(c,!1);a.resolve(h.snapshot)}catch(o){const l=xc(o,`Failed to execute query '${s} against cache`);a.reject(l)}}(await yT(t),e,n)),n.promise}function WV(t,e,n={}){const i=new Kt;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const h=new vg({next:f=>{h.Nu(),a.enqueueAndForget(()=>lT(s,d)),f.fromCache&&l.source==="server"?c.reject(new F(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new uT(o,h,{includeMetadataChanges:!0,qa:!0});return oT(s,d)}(await ec(t),t.asyncQueue,e,n,i)),i.promise}function jG(t,e){const n=new vg(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,s){W(r).Ca.add(s),s.next()}(await ec(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(r,s){W(r).Ca.delete(s)}(await ec(t),n))}}function zG(t,e,n,i){const r=function(a,o){let l;return l=typeof a=="string"?qk().encode(a):a,function(h,d){return new PG(h,d)}(function(h,d){if(h instanceof Uint8Array)return Z1(h,d);if(h instanceof ArrayBuffer)return Z1(new Uint8Array(h),d);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),o)}(n,Pd(e));t.asyncQueue.enqueueAndForget(async()=>{xG(await _T(t),r,i)})}function BG(t,e){return t.asyncQueue.enqueue(async()=>function(i,r){const s=W(i);return s.persistence.runTransaction("Get named query","readonly",a=>s.Ii.getNamedQuery(a,r))}(await yT(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV="firestore.googleapis.com",nx=!0;class ix{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new F(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XV,this.ssl=nx}else this.host=e.host,this.ssl=e.ssl??nx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lH)throw new F(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YV(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new F(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new F(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new F(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ix({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ix(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new A8;switch(i.type){case"firstParty":return new R8(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new F(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=tx.get(n);i&&(q("ComponentProvider","Removing Datastore"),tx.delete(n),i.terminate())}(this),Promise.resolve()}}function FG(t,e,n,i={}){var c;t=Te(t,Dd);const r=Xs(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;r&&(Xb(`https://${o}`),Jb("Firestore",!0)),s.host!==XV&&s.host!==o&&Yi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:r,emulatorOptions:i};if(!Ms(l,a)&&(t._setSettings(l),i.mockUserToken)){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=Ot.MOCK_USER;else{h=y2(i.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new F(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ot(f)}t._authCredentials=new S8(new FD(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gn=class JV{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new JV(this.firestore,e,this._query)}},Le=class Au{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ns(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Au(this.firestore,e,this._key)}toJSON(){return{type:Au._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(wd(n,Au._jsonSchema))return new Au(e,i||null,new $(ge.fromString(n.referencePath)))}};Le._jsonSchemaVersion="firestore/documentReference/1.0",Le._jsonSchema={type:At("string",Le._jsonSchemaVersion),referencePath:At("string")};let Ns=class ZV extends gn{constructor(e,n,i){super(e,n,wc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new $(e))}withConverter(e){return new ZV(this.firestore,e,this._path)}};function eO(t,e,...n){if(t=ee(t),xw("collection","path",e),t instanceof Dd){const i=ge.fromString(e,...n);return GI(i),new Ns(t,null,i)}{if(!(t instanceof Le||t instanceof Ns))throw new F(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ge.fromString(e,...n));return GI(i),new Ns(t.firestore,null,i)}}function qG(t,e){if(t=Te(t,Dd),xw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new F(U.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gn(t,null,function(i){return new jr(ge.emptyPath(),i)}(e))}function mp(t,e,...n){if(t=ee(t),arguments.length===1&&(e=Iw.newId()),xw("doc","path",e),t instanceof Dd){const i=ge.fromString(e,...n);return HI(i),new Le(t,null,new $(i))}{if(!(t instanceof Le||t instanceof Ns))throw new F(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ge.fromString(e,...n));return HI(i),new Le(t.firestore,t instanceof Ns?t.converter:null,new $(i))}}function tO(t,e){return t=ee(t),e=ee(e),(t instanceof Le||t instanceof Ns)&&(e instanceof Le||e instanceof Ns)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function nO(t,e){return t=ee(t),e=ee(e),t instanceof gn&&e instanceof gn&&t.firestore===e.firestore&&Sd(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="AsyncQueue";class sx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nT(this,"async_queue_retry"),this._c=()=>{const i=um();i&&q(rx,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=um();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=um();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Kt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ea(e))throw e;q(rx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,mt("INTERNAL UNHANDLED ERROR: ",ax(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=aT.createAndSchedule(this,e,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&X(47125,{Pc:ax(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ax(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class HG{constructor(){this._progressObserver={},this._taskCompletionResolver=new Kt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GG=-1;let yt=class extends Dd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new sx,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sx(e),this._firestoreClient=void 0,await e}}};function an(t){if(t._terminated)throw new F(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||iO(t),t._firestoreClient}function iO(t){var i,r,s;const e=t._freezeSettings(),n=function(o,l,c,h){return new d7(o,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,YV(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new kG(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}function $G(t,e){Yi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return rO(t,Hh.provider,{build:i=>new GV(i,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function KG(t){Yi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();rO(t,Hh.provider,{build:n=>new CG(n,e.cacheSizeBytes)})}function rO(t,e,n){if((t=Te(t,yt))._firestoreClient||t._terminated)throw new F(U.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new F(U.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},iO(t)}function QG(t){if(t._initialized&&!t._terminated)throw new F(U.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Kt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(i){if(!qi.v())return Promise.resolve();const r=i+yV;await qi.delete(r)}(Jw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function WG(t){return function(n){const i=new Kt;return n.asyncQueue.enqueueAndForget(async()=>gG(await _T(n),i)),i.promise}(an(t=Te(t,yt)))}function YG(t){return OG(an(t=Te(t,yt)))}function XG(t){return MG(an(t=Te(t,yt)))}function JG(t,e){const n=an(t=Te(t,yt)),i=new HG;return zG(n,t._databaseId,e,i),i}function ZG(t,e){return BG(an(t=Te(t,yt)),e).then(n=>n?new gn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zt(lt.fromBase64String(e))}catch(n){throw new F(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zt(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wd(e,Zt._jsonSchema))return Zt.fromBase64String(e.bytes)}}Zt._jsonSchemaVersion="firestore/bytes/1.0",Zt._jsonSchema={type:At("string",Zt._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $s=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yo=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bi._jsonSchemaVersion}}static fromJSON(e){if(wd(e,bi._jsonSchema))return new bi(e.latitude,e.longitude)}}bi._jsonSchemaVersion="firestore/geoPoint/1.0",bi._jsonSchema={type:At("string",bi._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Gi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wd(e,Gi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Gi(e.vectorValues);throw new F(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gi._jsonSchemaVersion="firestore/vectorValue/1.0",Gi._jsonSchema={type:At("string",Gi._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e$=/^__.*__$/;class t${constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Br(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tc(e,this.data,n,this.fieldTransforms)}}class sO{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Br(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function aO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{Ac:t})}}class wg{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new wg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return pp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(aO(this.Ac)&&e$.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class n${constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Pd(e)}Cc(e,n,i,r=!1){return new wg({Ac:e,methodName:n,Dc:i,path:Ye.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _o(t){const e=t._freezeSettings(),n=Pd(t._databaseId);return new n$(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Tg(t,e,n,i,r,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,n,r);ST("Data must be an object, but it was:",a,i);const o=cO(i,a);let l,c;if(s.merge)l=new An(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=g0(e,d,n);if(!a.contains(f))throw new F(U.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);hO(h,f)||h.push(f)}l=new An(h),c=a.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=a.fieldTransforms;return new t$(new Ht(o),l,c)}class kd extends yo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kd}}function oO(t,e,n){return new wg({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class vT extends yo{_toFieldTransform(e){return new xd(e.path,new $l)}isEqual(e){return e instanceof vT}}class bT extends yo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=oO(this,e,!0),i=this.vc.map(s=>vo(s,n)),r=new eo(i);return new xd(e.path,r)}isEqual(e){return e instanceof bT&&Ms(this.vc,e.vc)}}class wT extends yo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=oO(this,e,!0),i=this.vc.map(s=>vo(s,n)),r=new to(i);return new xd(e.path,r)}isEqual(e){return e instanceof wT&&Ms(this.vc,e.vc)}}class TT extends yo{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Kl(e.serializer,Vk(e.serializer,this.Fc));return new xd(e.path,n)}isEqual(e){return e instanceof TT&&this.Fc===e.Fc}}function ET(t,e,n,i){const r=t.Cc(1,e,n);ST("Data must be an object, but it was:",r,i);const s=[],a=Ht.empty();ta(i,(l,c)=>{const h=IT(e,l,n);c=ee(c);const d=r.yc(h);if(c instanceof kd)s.push(h);else{const f=vo(c,d);f!=null&&(s.push(h),a.set(h,f))}});const o=new An(s);return new sO(a,o,r.fieldTransforms)}function AT(t,e,n,i,r,s){const a=t.Cc(1,e,n),o=[g0(e,i,n)],l=[r];if(s.length%2!=0)throw new F(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)o.push(g0(e,s[f])),l.push(s[f+1]);const c=[],h=Ht.empty();for(let f=o.length-1;f>=0;--f)if(!hO(c,o[f])){const p=o[f];let w=l[f];w=ee(w);const E=a.yc(p);if(w instanceof kd)c.push(p);else{const A=vo(w,E);A!=null&&(c.push(p),h.set(p,A))}}const d=new An(c);return new sO(h,d,a.fieldTransforms)}function lO(t,e,n,i=!1){return vo(n,t.Cc(i?4:3,e))}function vo(t,e){if(uO(t=ee(t)))return ST("Unsupported field value:",e,t),cO(t,e);if(t instanceof yo)return function(i,r){if(!aO(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const o of i){let l=vo(o,r.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=ee(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Vk(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ie.fromDate(i);return{timestampValue:Ql(r.serializer,s)}}if(i instanceof Ie){const s=new Ie(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ql(r.serializer,s)}}if(i instanceof bi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Zt)return{bytesValue:$k(r.serializer,i._byteString)};if(i instanceof Le){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Gw(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Gi)return function(a,o){return{mapValue:{fields:{[Vw]:{stringValue:Ow},[ql]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.Sc("VectorValues must only contain numeric values.");return jw(o.serializer,c)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${rg(i)}`)}(t,e)}function cO(t,e){const n={};return ck(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ta(t,(i,r)=>{const s=vo(r,e.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function uO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ie||t instanceof bi||t instanceof Zt||t instanceof Le||t instanceof yo||t instanceof Gi)}function ST(t,e,n){if(!uO(n)||!GD(n)){const i=rg(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function g0(t,e,n){if((e=ee(e))instanceof $s)return e._internalPath;if(typeof e=="string")return IT(t,e);throw pp("Field path arguments must be of type string or ",t,!1,void 0,n)}const i$=new RegExp("[~\\*/\\[\\]]");function IT(t,e,n){if(e.search(i$)>=0)throw pp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $s(...e.split("."))._internalPath}catch{throw pp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pp(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${i}`),a&&(l+=` in document ${r}`),l+=")"),new F(U.INVALID_ARGUMENT,o+t+l)}function hO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Eg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class r$ extends Gh{data(){return super.data()}}function Eg(t,e){return typeof e=="string"?IT(t,e):e instanceof $s?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xT{}class Vd extends xT{}function ts(t,e,...n){let i=[];e instanceof xT&&i.push(e),i=i.concat(n),function(s){const a=s.filter(l=>l instanceof RT).length,o=s.filter(l=>l instanceof Ag).length;if(a>1||a>0&&o>0)throw new F(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Ag extends Vd{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Ag(e,n,i)}_apply(e){const n=this._parse(e);return mO(e._query,n),new gn(e.firestore,e.converter,n0(e._query,n))}_parse(e){const n=_o(e.firestore);return function(s,a,o,l,c,h,d){let f;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){lx(d,h);const w=[];for(const E of d)w.push(ox(l,s,E));f={arrayValue:{values:w}}}else f=ox(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||lx(d,h),f=lO(o,a,d,h==="in"||h==="not-in");return _e.create(c,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function s$(t,e,n){const i=e,r=Eg("where",t);return Ag._create(r,i,n)}class RT extends xT{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new RT(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Ce.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let a=r;const o=s.getFlattenedFilters();for(const l of o)mO(a,l),a=n0(a,l)}(e._query,n),new gn(e.firestore,e.converter,n0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class CT extends Vd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new CT(e,n)}_apply(e){const n=function(r,s,a){if(r.startAt!==null)throw new F(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new F(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zh(s,a)}(e._query,this._field,this._direction);return new gn(e.firestore,e.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new jr(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function a$(t,e="asc"){const n=e,i=Eg("orderBy",t);return CT._create(i,n)}class Sg extends Vd{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Sg(e,n,i)}_apply(e){return new gn(e.firestore,e.converter,sp(e._query,this._limit,this._limitType))}}function o$(t){return $D("limit",t),Sg._create("limit",t,"F")}function l$(t){return $D("limitToLast",t),Sg._create("limitToLast",t,"L")}class Ig extends Vd{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Ig(e,n,i)}_apply(e){const n=fO(e,this.type,this._docOrFields,this._inclusive);return new gn(e.firestore,e.converter,function(r,s){return new jr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,n))}}function c$(...t){return Ig._create("startAt",t,!0)}function u$(...t){return Ig._create("startAfter",t,!1)}class xg extends Vd{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new xg(e,n,i)}_apply(e){const n=fO(e,this.type,this._docOrFields,this._inclusive);return new gn(e.firestore,e.converter,function(r,s){return new jr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,n))}}function h$(...t){return xg._create("endBefore",t,!1)}function d$(...t){return xg._create("endAt",t,!0)}function fO(t,e,n,i){if(n[0]=ee(n[0]),n[0]instanceof Gh)return function(s,a,o,l,c){if(!l)throw new F(U.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const h=[];for(const d of vl(s))if(d.field.isKeyField())h.push(Ja(a,l.key));else{const f=l.data.field(d.field);if(cg(f))throw new F(U.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const p=d.field.canonicalString();throw new F(U.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}h.push(f)}return new qs(h,c)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=_o(t.firestore);return function(a,o,l,c,h,d){const f=a.explicitOrderBy;if(h.length>f.length)throw new F(U.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let w=0;w<h.length;w++){const E=h[w];if(f[w].field.isKeyField()){if(typeof E!="string")throw new F(U.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof E}`);if(!Lw(a)&&E.indexOf("/")!==-1)throw new F(U.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${E}' contains a slash.`);const A=a.path.child(ge.fromString(E));if(!$.isDocumentKey(A))throw new F(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const v=new $(A);p.push(Ja(o,v))}else{const A=lO(l,c,E);p.push(A)}}return new qs(p,d)}(t._query,t.firestore._databaseId,r,e,n,i)}}function ox(t,e,n){if(typeof(n=ee(n))=="string"){if(n==="")throw new F(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lw(e)&&n.indexOf("/")!==-1)throw new F(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(ge.fromString(n));if(!$.isDocumentKey(i))throw new F(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ja(t,new $(i))}if(n instanceof Le)return Ja(t,n._key);throw new F(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rg(n)}.`)}function lx(t,e){if(!Array.isArray(t)||t.length===0)throw new F(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mO(t,e){const n=function(r,s){for(const a of r)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class PT{convertValue(e,n="none"){switch(Bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ta(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var i,r,s;const n=(s=(r=(i=e.fields)==null?void 0:i[ql].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>We(a.doubleValue));return new Gi(n)}convertGeoPoint(e){return new bi(We(e.latitude),We(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=ug(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Lh(e));default:return null}}convertTimestamp(e){const n=Nr(e);return new Ie(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ge.fromString(e);Z(iV(i),9688,{name:e});const r=new zs(i.get(1),i.get(3)),s=new $(i.popFirst(5));return r.isEqual(n)||mt(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class f$ extends PT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,n)}}class Pa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ci=class pO extends Gh{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Eg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=pO._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ci._jsonSchemaVersion="firestore/documentSnapshot/1.0",ci._jsonSchema={type:At("string",ci._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};let nh=class extends ci{data(e={}){return super.data(e)}},wi=class gO{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Pa(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new nh(this._firestore,this._userDataWriter,i.key,i,new Pa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(o=>{const l=new nh(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Pa(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new nh(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Pa(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:m$(o.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gO._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Iw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function m$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:t})}}function yO(t,e){return t instanceof ci&&e instanceof ci?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof wi&&e instanceof wi&&t._firestore===e._firestore&&nO(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p$(t){t=Te(t,Le);const e=Te(t.firestore,yt);return QV(an(e),t._key).then(n=>NT(e,t,n))}wi._jsonSchemaVersion="firestore/querySnapshot/1.0",wi._jsonSchema={type:At("string",wi._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};class bo extends PT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,n)}}function g$(t){t=Te(t,Le);const e=Te(t.firestore,yt),n=an(e),i=new bo(e);return LG(n,t._key).then(r=>new ci(e,i,t._key,r,new Pa(r!==null&&r.hasLocalMutations,!0),t.converter))}function y$(t){t=Te(t,Le);const e=Te(t.firestore,yt);return QV(an(e),t._key,{source:"server"}).then(n=>NT(e,t,n))}function _$(t){t=Te(t,gn);const e=Te(t.firestore,yt),n=an(e),i=new bo(e);return dO(t._query),WV(n,t._query).then(r=>new wi(e,i,t,r))}function v$(t){t=Te(t,gn);const e=Te(t.firestore,yt),n=an(e),i=new bo(e);return UG(n,t._query).then(r=>new wi(e,i,t,r))}function b$(t){t=Te(t,gn);const e=Te(t.firestore,yt),n=an(e),i=new bo(e);return WV(n,t._query,{source:"server"}).then(r=>new wi(e,i,t,r))}function cx(t,e,n){t=Te(t,Le);const i=Te(t.firestore,yt),r=Rg(t.converter,e,n);return Od(i,[Tg(_o(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Xe.none())])}function ux(t,e,n,...i){t=Te(t,Le);const r=Te(t.firestore,yt),s=_o(r);let a;return a=typeof(e=ee(e))=="string"||e instanceof $s?AT(s,"updateDoc",t._key,e,n,i):ET(s,"updateDoc",t._key,e),Od(r,[a.toMutation(t._key,Xe.exists(!0))])}function w$(t){return Od(Te(t.firestore,yt),[new Ec(t._key,Xe.none())])}function T$(t,e){const n=Te(t.firestore,yt),i=mp(t),r=Rg(t.converter,e);return Od(n,[Tg(_o(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Xe.exists(!1))]).then(()=>i)}function _O(t,...e){var l,c,h;t=ee(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||p0(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(p0(e[i])){const d=e[i];e[i]=(l=d.next)==null?void 0:l.bind(d),e[i+1]=(c=d.error)==null?void 0:c.bind(d),e[i+2]=(h=d.complete)==null?void 0:h.bind(d)}let s,a,o;if(t instanceof Le)a=Te(t.firestore,yt),o=wc(t._key.path),s={next:d=>{e[i]&&e[i](NT(a,t,d))},error:e[i+1],complete:e[i+2]};else{const d=Te(t,gn);a=Te(d.firestore,yt),o=d._query;const f=new bo(a);s={next:p=>{e[i]&&e[i](new wi(a,f,d,p))},error:e[i+1],complete:e[i+2]},dO(t._query)}return function(f,p,w,E){const A=new vg(E),v=new uT(p,A,w);return f.asyncQueue.enqueueAndForget(async()=>oT(await ec(f),v)),()=>{A.Nu(),f.asyncQueue.enqueueAndForget(async()=>lT(await ec(f),v))}}(an(a),o,r,s)}function E$(t,e){return jG(an(t=Te(t,yt)),p0(e)?e:{next:e})}function Od(t,e){return function(i,r){const s=new Kt;return i.asyncQueue.enqueueAndForget(async()=>dG(await _T(i),r,s)),s.promise}(an(t),e)}function NT(t,e,n){const i=n.docs.get(e._key),r=new bo(t);return new ci(t,r,e._key,i,new Pa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A$={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S$=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=_o(e)}set(e,n,i){this._verifyNotCommitted();const r=ys(e,this._firestore),s=Rg(r.converter,n,i),a=Tg(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,Xe.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=ys(e,this._firestore);let a;return a=typeof(n=ee(n))=="string"||n instanceof $s?AT(this._dataReader,"WriteBatch.update",s._key,n,i,r):ET(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,Xe.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ys(e,this._firestore);return this._mutations=this._mutations.concat(new Ec(n._key,Xe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ys(t,e){if((t=ee(t)).firestore!==e)throw new F(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=_o(e)}get(e){const n=ys(e,this._firestore),i=new f$(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return X(24041);const s=r[0];if(s.isFoundDocument())return new Gh(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new Gh(this._firestore,i,n._key,null,n.converter);throw X(18433,{doc:s})})}set(e,n,i){const r=ys(e,this._firestore),s=Rg(r.converter,n,i),a=Tg(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,a),this}update(e,n,i,...r){const s=ys(e,this._firestore);let a;return a=typeof(n=ee(n))=="string"||n instanceof $s?AT(this._dataReader,"Transaction.update",s._key,n,i,r):ET(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(e){const n=ys(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x$=class extends I${constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ys(e,this._firestore),i=new bo(this._firestore);return super.get(e).then(r=>new ci(this._firestore,i,n._key,r._document,new Pa(!1,!1),n.converter))}};function R$(t,e,n){t=Te(t,yt);const i={...A$,...n};return function(s){if(s.maxAttempts<1)throw new F(U.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,o){const l=new Kt;return s.asyncQueue.enqueueAndForget(async()=>{const c=await VG(s);new DG(s.asyncQueue,c,o,a,l).ju()}),l.promise}(an(t),r=>e(new x$(t,r)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C$(){return new kd("deleteField")}function P$(){return new vT("serverTimestamp")}function N$(...t){return new bT("arrayUnion",t)}function D$(...t){return new wT("arrayRemove",t)}function k$(t){return new TT("increment",t)}(function(e,n=!0){(function(r){bc=r})(Mr),Cr(new hi("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),o=new yt(new I8(i.getProvider("auth-internal")),new C8(a,i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new F(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zs(c.options.projectId,h)}(a,r),a);return s={useFetchStreams:n,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),qn(zI,BI,e),qn(zI,BI,"esm2020")})();const V$="@firebase/firestore-compat",O$="0.4.2";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new F("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(){if(typeof Uint8Array>"u")throw new F("unimplemented","Uint8Arrays are not available in this environment.")}function dx(){if(!u7())throw new F("unimplemented","Blobs are unavailable in Firestore in this environment.")}let vO=class y0{constructor(e){this._delegate=e}static fromBase64String(e){return dx(),new y0(Zt.fromBase64String(e))}static fromUint8Array(e){return hx(),new y0(Zt.fromUint8Array(e))}toBase64(){return dx(),this._delegate.toBase64()}toUint8Array(){return hx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(t){return M$(t,["next","error","complete"])}function M$(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${enableIndexedDbPersistence(e,n){return $G(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return KG(e._delegate)}clearIndexedDbPersistence(e){return QG(e._delegate)}}class bO{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof zs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Yi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){FG(this._delegate,e,n,i)}enableNetwork(){return YG(this._delegate)}disableNetwork(){return XG(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,HD("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return WG(this._delegate)}onSnapshotsInSync(e){return E$(this._delegate,e)}get app(){if(!this._appCompat)throw new F("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new tc(this,eO(this._delegate,e))}catch(n){throw dn(n,"collection()","Firestore.collection()")}}doc(e){try{return new si(this,mp(this._delegate,e))}catch(n){throw dn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new hn(this,qG(this._delegate,e))}catch(n){throw dn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return R$(this._delegate,n=>e(new wO(this,n)))}batch(){return an(this._delegate),new TO(new S$(this._delegate,e=>Od(this._delegate,e)))}loadBundle(e){return JG(this._delegate,e)}namedQuery(e){return ZG(this._delegate,e).then(n=>n?new hn(this,n):null)}}class Cg extends PT{constructor(e){super(),this.firestore=e}convertBytes(e){return new vO(new Zt(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return si.forKey(n,this.firestore,null)}}function U$(t){T8(t)}class wO{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Cg(e)}get(e){const n=Na(e);return this._delegate.get(n).then(i=>new $h(this._firestore,new ci(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){const r=Na(e);return i?(DT("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=Na(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=Na(e);return this._delegate.delete(n),this}}class TO{constructor(e){this._delegate=e}set(e,n,i){const r=Na(e);return i?(DT("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=Na(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=Na(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class ao{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){const i=new nh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Kh(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const i=ao.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(n);return s||(s=new ao(e,new Cg(e),n),r.set(n,s)),s}}ao.INSTANCES=new WeakMap;class si{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Cg(e)}static forPath(e,n,i){if(e.length%2!==0)throw new F("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new si(n,new Le(n._delegate,i,new $(e)))}static forKey(e,n,i){return new si(n,new Le(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new tc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new tc(this.firestore,eO(this._delegate,e))}catch(n){throw dn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ee(e),e instanceof Le?tO(this._delegate,e):!1}set(e,n){n=DT("DocumentReference.set",n);try{return n?cx(this._delegate,e,n):cx(this._delegate,e)}catch(i){throw dn(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?ux(this._delegate,e):ux(this._delegate,e,n,...i)}catch(r){throw dn(r,"updateDoc()","DocumentReference.update()")}}delete(){return w$(this._delegate)}onSnapshot(...e){const n=EO(e),i=AO(e,r=>new $h(this.firestore,new ci(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return _O(this._delegate,n,i)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=g$(this._delegate):(e==null?void 0:e.source)==="server"?n=y$(this._delegate):n=p$(this._delegate),n.then(i=>new $h(this.firestore,new ci(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new si(this.firestore,e?this._delegate.withConverter(ao.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function dn(t,e,n){return t.message=t.message.replace(e,n),t}function EO(t){for(const e of t)if(typeof e=="object"&&!_0(e))return e;return{}}function AO(t,e){var i,r;let n;return _0(t[0])?n=t[0]:_0(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:s=>{n.next&&n.next(e(s))},error:(i=n.error)==null?void 0:i.bind(n),complete:(r=n.complete)==null?void 0:r.bind(n)}}class $h{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new si(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return yO(this._delegate,e._delegate)}}class Kh extends $h{data(e){const n=this._delegate.data(e);return this._delegate._converter||E8(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class hn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Cg(e)}where(e,n,i){try{return new hn(this.firestore,ts(this._delegate,s$(e,n,i)))}catch(r){throw dn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new hn(this.firestore,ts(this._delegate,a$(e,n)))}catch(i){throw dn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new hn(this.firestore,ts(this._delegate,o$(e)))}catch(n){throw dn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new hn(this.firestore,ts(this._delegate,l$(e)))}catch(n){throw dn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new hn(this.firestore,ts(this._delegate,c$(...e)))}catch(n){throw dn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new hn(this.firestore,ts(this._delegate,u$(...e)))}catch(n){throw dn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new hn(this.firestore,ts(this._delegate,h$(...e)))}catch(n){throw dn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new hn(this.firestore,ts(this._delegate,d$(...e)))}catch(n){throw dn(n,"endAt()","Query.endAt()")}}isEqual(e){return nO(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=v$(this._delegate):(e==null?void 0:e.source)==="server"?n=b$(this._delegate):n=_$(this._delegate),n.then(i=>new v0(this.firestore,new wi(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const n=EO(e),i=AO(e,r=>new v0(this.firestore,new wi(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return _O(this._delegate,n,i)}withConverter(e){return new hn(this.firestore,e?this._delegate.withConverter(ao.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class j${constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Kh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class v0{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new hn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Kh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new j$(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new Kh(this._firestore,i))})}isEqual(e){return yO(this._delegate,e._delegate)}}class tc extends hn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new si(this.firestore,e):null}doc(e){try{return e===void 0?new si(this.firestore,mp(this._delegate)):new si(this.firestore,mp(this._delegate,e))}catch(n){throw dn(n,"doc()","CollectionReference.doc()")}}add(e){return T$(this._delegate,e).then(n=>new si(this.firestore,n))}isEqual(e){return tO(this._delegate,e._delegate)}withConverter(e){return new tc(this.firestore,e?this._delegate.withConverter(ao.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Na(t){return Te(t,Le)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(...e){this._delegate=new $s(...e)}static documentId(){return new kT(Ye.keyField().canonicalString())}isEqual(e){return e=ee(e),e instanceof $s?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{static serverTimestamp(){const e=P$();return e._methodName="FieldValue.serverTimestamp",new xa(e)}static delete(){const e=C$();return e._methodName="FieldValue.delete",new xa(e)}static arrayUnion(...e){const n=N$(...e);return n._methodName="FieldValue.arrayUnion",new xa(n)}static arrayRemove(...e){const n=D$(...e);return n._methodName="FieldValue.arrayRemove",new xa(n)}static increment(e){const n=k$(e);return n._methodName="FieldValue.increment",new xa(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$={Firestore:bO,GeoPoint:bi,Timestamp:Ie,Blob:vO,Transaction:wO,WriteBatch:TO,DocumentReference:si,DocumentSnapshot:$h,Query:hn,QueryDocumentSnapshot:Kh,QuerySnapshot:v0,CollectionReference:tc,FieldPath:kT,FieldValue:xa,setLogLevel:U$,CACHE_SIZE_UNLIMITED:GG};function B$(t,e){t.INTERNAL.registerComponent(new hi("firestore-compat",n=>{const i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps({...z$}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F$(t){B$(t,(e,n)=>new bO(e,n,new L$)),t.registerVersion(V$,O$)}F$(en);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO="firebasestorage.googleapis.com",IO="storageBucket",q$=2*60*1e3,H$=10*60*1e3,G$=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it extends rn{constructor(e,n,i=0){super(m_(e),`Firebase Storage: ${n} (${m_(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,it.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return m_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ke;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ke||(Ke={}));function m_(t){return"storage/"+t}function VT(){const t="An unknown error occurred, please check the error payload for server response.";return new it(Ke.UNKNOWN,t)}function $$(t){return new it(Ke.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function K$(t){return new it(Ke.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Q$(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new it(Ke.UNAUTHENTICATED,t)}function W$(){return new it(Ke.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Y$(t){return new it(Ke.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function xO(){return new it(Ke.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function RO(){return new it(Ke.CANCELED,"User canceled the upload/download.")}function X$(t){return new it(Ke.INVALID_URL,"Invalid URL '"+t+"'.")}function J$(t){return new it(Ke.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Z$(){return new it(Ke.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+IO+"' property when initializing the app?")}function CO(){return new it(Ke.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function eK(){return new it(Ke.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function tK(){return new it(Ke.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function nK(t){return new it(Ke.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function wl(t){return new it(Ke.INVALID_ARGUMENT,t)}function PO(){return new it(Ke.APP_DELETED,"The Firebase app was deleted.")}function NO(t){return new it(Ke.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ih(t,e){return new it(Ke.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function uu(t){throw new it(Ke.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=tn.makeFromUrl(e,n)}catch{return new tn(e,"")}if(i.path==="")return i;throw J$(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+r+a,"i"),l={bucket:1,path:3};function c(I){I.path_=decodeURIComponent(I.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${h}/b/${r}/o${f}`,"i"),w={bucket:1,path:3},E=n===SO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",v=new RegExp(`^https?://${E}/${r}/${A}`,"i"),b=[{regex:o,indices:l,postModify:s},{regex:p,indices:w,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let I=0;I<b.length;I++){const D=b[I],V=D.regex.exec(e);if(V){const S=V[D.indices.bucket];let T=V[D.indices.path];T||(T=""),i=new tn(S,T),D.postModify(i);break}}if(i==null)throw X$(e);return i}}class iK{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rK(t,e,n){let i=1,r=null,s=null,a=!1,o=0;function l(){return o===2}let c=!1;function h(...A){c||(c=!0,e.apply(null,A))}function d(A){r=setTimeout(()=>{r=null,t(p,l())},A)}function f(){s&&clearTimeout(s)}function p(A,...v){if(c){f();return}if(A){f(),h.call(null,A,...v);return}if(l()||a){f(),h.call(null,A,...v);return}i<64&&(i*=2);let b;o===1?(o=2,b=0):b=(i+Math.random())*1e3,d(b)}let w=!1;function E(A){w||(w=!0,f(),!c&&(r!==null?(A||(o=2),clearTimeout(r),d(0)):A||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,E(!0)},n),E}function sK(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aK(t){return t!==void 0}function oK(t){return typeof t=="function"}function lK(t){return typeof t=="object"&&!Array.isArray(t)}function Pg(t){return typeof t=="string"||t instanceof String}function fx(t){return OT()&&t instanceof Blob}function OT(){return typeof Blob<"u"}function b0(t,e,n,i){if(i<e)throw wl(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw wl(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function DO(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Ba;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ba||(Ba={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cK{constructor(e,n,i,r,s,a,o,l,c,h,d,f=!0,p=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,E)=>{this.resolve_=w,this.reject_=E,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Sf(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===Ba.NO_ERROR,l=s.getStatus();if(!o||kO(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Ba.ABORT;i(!1,new Sf(!1,null,h));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new Sf(c,s))})},n=(i,r)=>{const s=this.resolve_,a=this.reject_,o=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());aK(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=VT();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(r.canceled){const l=this.appDelete_?PO():RO();a(l)}else{const l=xO();a(l)}};this.canceled_?n(!1,new Sf(!1,null,!0)):this.backoffId_=rK(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&sK(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Sf{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function uK(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function hK(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function dK(t,e){e&&(t["X-Firebase-GMPID"]=e)}function fK(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function mK(t,e,n,i,r,s,a=!0,o=!1){const l=DO(t.urlParams),c=t.url+l,h=Object.assign({},t.headers);return dK(h,e),uK(h,n),hK(h,s),fK(h,i),new cK(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pK(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function gK(...t){const e=pK();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(OT())return new Blob(t);throw new it(Ke.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function yK(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _K(t){if(typeof atob>"u")throw nK("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class p_{constructor(e,n){this.data=e,this.contentType=n||null}}function VO(t,e){switch(t){case ai.RAW:return new p_(OO(e));case ai.BASE64:case ai.BASE64URL:return new p_(MO(t,e));case ai.DATA_URL:return new p_(bK(e),wK(e))}throw VT()}function OO(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=i,a=t.charCodeAt(++n);i=65536|(s&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function vK(t){let e;try{e=decodeURIComponent(t)}catch{throw ih(ai.DATA_URL,"Malformed data URL.")}return OO(e)}function MO(t,e){switch(t){case ai.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw ih(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ai.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw ih(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=_K(e)}catch(r){throw r.message.includes("polyfill")?r:ih(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class LO{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ih(ai.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=TK(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function bK(t){const e=new LO(t);return e.base64?MO(ai.BASE64,e.rest):vK(e.rest)}function wK(t){return new LO(t).contentType}function TK(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n){let i=0,r="";fx(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(fx(this.data_)){const i=this.data_,r=yK(i,e,n);return r===null?null:new lr(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new lr(i,!0)}}static getBlob(...e){if(OT()){const n=e.map(i=>i instanceof lr?i.data_:i);return new lr(gK.apply(null,n))}else{const n=e.map(a=>Pg(a)?VO(ai.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)r[s++]=a[o]}),new lr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(t){let e;try{e=JSON.parse(t)}catch{return null}return lK(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EK(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function AK(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function UO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SK(t,e){return e}class cn{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||SK}}let If=null;function IK(t){return!Pg(t)||t.length<2?t:UO(t)}function Ng(){if(If)return If;const t=[];t.push(new cn("bucket")),t.push(new cn("generation")),t.push(new cn("metageneration")),t.push(new cn("name","fullPath",!0));function e(s,a){return IK(a)}const n=new cn("name");n.xform=e,t.push(n);function i(s,a){return a!==void 0?Number(a):a}const r=new cn("size");return r.xform=i,t.push(r),t.push(new cn("timeCreated")),t.push(new cn("updated")),t.push(new cn("md5Hash",null,!0)),t.push(new cn("cacheControl",null,!0)),t.push(new cn("contentDisposition",null,!0)),t.push(new cn("contentEncoding",null,!0)),t.push(new cn("contentLanguage",null,!0)),t.push(new cn("contentType",null,!0)),t.push(new cn("metadata","customMetadata",!0)),If=t,If}function xK(t,e){function n(){const i=t.bucket,r=t.fullPath,s=new tn(i,r);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function RK(t,e,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const a=n[s];i[a.local]=a.xform(i,e[a.server])}return xK(i,t),i}function jO(t,e,n){const i=MT(e);return i===null?null:RK(t,i,n)}function CK(t,e,n,i){const r=MT(e);if(r===null||!Pg(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,d=t.fullPath,f="/b/"+a(h)+"/o/"+a(d),p=ra(f,n,i),w=DO({alt:"media",token:c});return p+w})[0]}function LT(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="prefixes",px="items";function PK(t,e,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[mx])for(const r of n[mx]){const s=r.replace(/\/$/,""),a=t._makeStorageReference(new tn(e,s));i.prefixes.push(a)}if(n[px])for(const r of n[px]){const s=t._makeStorageReference(new tn(e,r.name));i.items.push(s)}return i}function NK(t,e,n){const i=MT(n);return i===null?null:PK(t,e,i)}class qr{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(t){if(!t)throw VT()}function Dg(t,e){function n(i,r){const s=jO(t,r,e);return $i(s!==null),s}return n}function DK(t,e){function n(i,r){const s=NK(t,e,r);return $i(s!==null),s}return n}function kK(t,e){function n(i,r){const s=jO(t,r,e);return $i(s!==null),CK(s,r,t.host,t._protocol)}return n}function Rc(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=W$():r=Q$():n.getStatus()===402?r=K$(t.bucket):n.getStatus()===403?r=Y$(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function kg(t){const e=Rc(t);function n(i,r){let s=e(i,r);return i.getStatus()===404&&(s=$$(t.path)),s.serverResponse=r.serverResponse,s}return n}function zO(t,e,n){const i=e.fullServerUrl(),r=ra(i,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new qr(r,s,Dg(t,n),a);return o.errorHandler=kg(e),o}function VK(t,e,n,i,r){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n.length>0&&(s.delimiter=n),i&&(s.pageToken=i),r&&(s.maxResults=r);const a=e.bucketOnlyServerUrl(),o=ra(a,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,h=new qr(o,l,DK(t,e.bucket),c);return h.urlParams=s,h.errorHandler=Rc(e),h}function OK(t,e,n){const i=e.fullServerUrl(),r=ra(i,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new qr(r,s,kK(t,n),a);return o.errorHandler=kg(e),o}function MK(t,e,n,i){const r=e.fullServerUrl(),s=ra(r,t.host,t._protocol),a="PATCH",o=LT(n,i),l={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,h=new qr(s,a,Dg(t,i),c);return h.headers=l,h.body=o,h.errorHandler=kg(e),h}function LK(t,e){const n=e.fullServerUrl(),i=ra(n,t.host,t._protocol),r="DELETE",s=t.maxOperationRetryTime;function a(l,c){}const o=new qr(i,r,a,s);return o.successCodes=[200,204],o.errorHandler=kg(e),o}function UK(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function BO(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=UK(null,e)),i}function jK(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let b="";for(let I=0;I<2;I++)b=b+Math.random().toString().slice(2);return b}const l=o();a["Content-Type"]="multipart/related; boundary="+l;const c=BO(e,i,r),h=LT(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=lr.getBlob(d,i,f);if(p===null)throw CO();const w={name:c.fullPath},E=ra(s,t.host,t._protocol),A="POST",v=t.maxUploadRetryTime,_=new qr(E,A,Dg(t,n),v);return _.urlParams=w,_.headers=a,_.body=p.uploadData(),_.errorHandler=Rc(e),_}class gp{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}}function UT(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{$i(!1)}return $i(!!n&&(e||["active"]).indexOf(n)!==-1),n}function zK(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),a=BO(e,i,r),o={name:a.fullPath},l=ra(s,t.host,t._protocol),c="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},d=LT(a,n),f=t.maxUploadRetryTime;function p(E){UT(E);let A;try{A=E.getResponseHeader("X-Goog-Upload-URL")}catch{$i(!1)}return $i(Pg(A)),A}const w=new qr(l,c,p,f);return w.urlParams=o,w.headers=h,w.body=d,w.errorHandler=Rc(e),w}function BK(t,e,n,i){const r={"X-Goog-Upload-Command":"query"};function s(c){const h=UT(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{$i(!1)}d||$i(!1);const f=Number(d);return $i(!isNaN(f)),new gp(f,i.size(),h==="final")}const a="POST",o=t.maxUploadRetryTime,l=new qr(n,a,s,o);return l.headers=r,l.errorHandler=Rc(e),l}const gx=256*1024;function FK(t,e,n,i,r,s,a,o){const l=new gp(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw eK();const c=l.total-l.current;let h=c;r>0&&(h=Math.min(h,r));const d=l.current,f=d+h;let p="";h===0?p="finalize":c===h?p="upload, finalize":p="upload";const w={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},E=i.slice(d,f);if(E===null)throw CO();function A(I,D){const V=UT(I,["active","final"]),S=l.current+h,T=i.size();let C;return V==="final"?C=Dg(e,s)(I,D):C=null,new gp(S,T,V==="final",C)}const v="POST",_=e.maxUploadRetryTime,b=new qr(n,v,A,_);return b.headers=w,b.body=E.uploadData(),b.progressCallback=o||null,b.errorHandler=Rc(t),b}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qK={STATE_CHANGED:"state_changed"},fn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function g_(t){switch(t){case"running":case"pausing":case"canceling":return fn.RUNNING;case"paused":return fn.PAUSED;case"success":return fn.SUCCESS;case"canceled":return fn.CANCELED;case"error":return fn.ERROR;default:return fn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(e,n,i){if(oK(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class GK{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ba.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ba.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ba.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,s){if(this.sent_)throw uu("cannot .send() more than once");if(Xs(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw uu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw uu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw uu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw uu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class $K extends GK{initXhr(){this.xhr_.responseType="text"}}function Oi(){return new $K}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=Ng(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Ke.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(kO(r.status,[]))if(s)r=xO();else{this.sleepTime=Math.max(this.sleepTime*2,G$),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Ke.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const i=zK(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Oi,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,i)=>{const r=BK(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,Oi,n,i);this._request=s,s.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=gx*this._chunkMultiplier,n=new gp(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let a;try{a=FK(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const o=this._ref.storage._makeRequest(a,Oi,r,s,!1);this._request=o,o.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){gx*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const i=zO(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Oi,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const i=jK(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Oi,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=RO(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=g_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){const s=new HK(n||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(g_(this._state)){case fn.SUCCESS:Oo(this._resolve.bind(null,this.snapshot))();break;case fn.CANCELED:case fn.ERROR:const n=this._reject;Oo(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(g_(this._state)){case fn.RUNNING:case fn.PAUSED:e.next&&Oo(e.next.bind(e,this.snapshot))();break;case fn.SUCCESS:e.complete&&Oo(e.complete.bind(e))();break;case fn.CANCELED:case fn.ERROR:e.error&&Oo(e.error.bind(e,this._error))();break;default:e.error&&Oo(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){this._service=e,n instanceof tn?this._location=n:this._location=tn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new oo(e,n)}get root(){const e=new tn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return UO(this._location.path)}get storage(){return this._service}get parent(){const e=EK(this._location.path);if(e===null)return null;const n=new tn(this._location.bucket,e);return new oo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw NO(e)}}function KK(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new FO(t,new lr(e),n)}function QK(t){const e={prefixes:[],items:[]};return qO(t,e).then(()=>e)}async function qO(t,e,n){const r=await HO(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&await qO(t,e,r.nextPageToken)}function HO(t,e){e!=null&&typeof e.maxResults=="number"&&b0("options.maxResults",1,1e3,e.maxResults);const n=e||{},i=VK(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(i,Oi)}function WK(t){t._throwIfRoot("getMetadata");const e=zO(t.storage,t._location,Ng());return t.storage.makeRequestWithTokens(e,Oi)}function YK(t,e){t._throwIfRoot("updateMetadata");const n=MK(t.storage,t._location,e,Ng());return t.storage.makeRequestWithTokens(n,Oi)}function XK(t){t._throwIfRoot("getDownloadURL");const e=OK(t.storage,t._location,Ng());return t.storage.makeRequestWithTokens(e,Oi).then(n=>{if(n===null)throw tK();return n})}function JK(t){t._throwIfRoot("deleteObject");const e=LK(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Oi)}function GO(t,e){const n=AK(t._location.path,e),i=new tn(t._location.bucket,n);return new oo(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZK(t){return/^[A-Za-z]+:\/\//.test(t)}function eQ(t,e){return new oo(t,e)}function $O(t,e){if(t instanceof jT){const n=t;if(n._bucket==null)throw Z$();const i=new oo(n,n._bucket);return e!=null?$O(i,e):i}else return e!==void 0?GO(t,e):t}function tQ(t,e){if(e&&ZK(e)){if(t instanceof jT)return eQ(t,e);throw wl("To use ref(service, url), the first argument must be a Storage instance.")}else return $O(t,e)}function yx(t,e){const n=e==null?void 0:e[IO];return n==null?null:tn.makeFromBucketSpec(n,t)}function nQ(t,e,n,i={}){t.host=`${e}:${n}`;const r=Xs(e);r&&(Xb(`https://${t.host}/b`),Jb("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:s}=i;s&&(t._overrideAuthToken=typeof s=="string"?s:y2(s,t.app.options.projectId))}class jT{constructor(e,n,i,r,s,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=SO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=q$,this._maxUploadRetryTime=H$,this._requests=new Set,r!=null?this._bucket=tn.makeFromBucketSpec(r,this._host):this._bucket=yx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=tn.makeFromBucketSpec(this._url,e):this._bucket=yx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){b0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){b0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(qe(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new oo(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new iK(PO());{const a=mK(e,this._appId,i,r,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const _x="@firebase/storage",vx="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iQ="storage";function rQ(t,e,n){return t=ee(t),KK(t,e,n)}function sQ(t){return t=ee(t),WK(t)}function aQ(t,e){return t=ee(t),YK(t,e)}function oQ(t,e){return t=ee(t),HO(t,e)}function lQ(t){return t=ee(t),QK(t)}function cQ(t){return t=ee(t),XK(t)}function uQ(t){return t=ee(t),JK(t)}function bx(t,e){return t=ee(t),tQ(t,e)}function hQ(t,e){return GO(t,e)}function dQ(t,e,n,i={}){nQ(t,e,n,i)}function fQ(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new jT(n,i,r,e,Mr)}function mQ(){Cr(new hi(iQ,fQ,"PUBLIC").setMultipleInstances(!0)),qn(_x,vx,""),qn(_x,vx,"esm2020")}mQ();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n,i){this._delegate=e,this.task=n,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new xf(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(i=>{if(e)return e(new xf(i,this,this._ref))},n)}on(e,n,i,r){let s;return n&&(typeof n=="function"?s=a=>n(new xf(a,this,this._ref)):s={next:n.next?a=>n.next(new xf(a,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}}class Tx{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new vr(e,this._service))}get items(){return this._delegate.items.map(e=>new vr(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=hQ(this._delegate,e);return new vr(n,this.storage)}get root(){return new vr(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new vr(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new wx(rQ(this._delegate,e,n),this)}putString(e,n=ai.RAW,i){this._throwIfRoot("putString");const r=VO(n,e),s={...i};return s.contentType==null&&r.contentType!=null&&(s.contentType=r.contentType),new wx(new FO(this._delegate,new lr(r.data,!0),s),this)}listAll(){return lQ(this._delegate).then(e=>new Tx(e,this.storage))}list(e){return oQ(this._delegate,e||void 0).then(n=>new Tx(n,this.storage))}getMetadata(){return sQ(this._delegate)}updateMetadata(e){return aQ(this._delegate,e)}getDownloadURL(){return cQ(this._delegate)}delete(){return this._throwIfRoot("delete"),uQ(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw NO(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Ex(e))throw wl("ref() expected a child path but got a URL, use refFromURL instead.");return new vr(bx(this._delegate,e),this)}refFromURL(e){if(!Ex(e))throw wl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{tn.makeFromUrl(e,this._delegate.host)}catch{throw wl("refFromUrl() expected a valid full URL but got an invalid one.")}return new vr(bx(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,i={}){dQ(this._delegate,e,n,i)}}function Ex(t){return/^[A-Za-z]+:\/\//.test(t)}const pQ="@firebase/storage-compat",gQ="0.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yQ="storage-compat";function _Q(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("storage").getImmediate({identifier:e});return new KO(n,i)}function vQ(t){const e={TaskState:fn,TaskEvent:qK,StringFormat:ai,Storage:KO,Reference:vr};t.INTERNAL.registerComponent(new hi(yQ,_Q,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(pQ,gQ)}vQ(en);const bQ={apiKey:"AIzaSyDzEay5fGB-2r5_V9UXOO8cOv-nJdHwDRg",authDomain:"rush-coffee.firebaseapp.com",projectId:"rush-coffee",storageBucket:"rush-coffee.appspot.com",messagingSenderId:"423413538635",appId:"1:423413538635:web:ded0369f50c3a9086bd2ce"};en.apps.length||en.initializeApp(bQ);const sr=en.auth(),Ze=en.firestore(),lee=en.storage(),QO=R.createContext(void 0),wo=()=>{const t=R.useContext(QO);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Ax=async t=>{var r,s,a;const e=Ze.collection("users").doc(t),n=await e.get();if(!n.exists){console.log(`Creating missing Firestore profile for user: ${t}`);const o=sr.currentUser;if(!o)throw new Error("User not authenticated");const l=((r=o.displayName)==null?void 0:r.split(" "))||["User",""],c=l[0],h=l.slice(1).join(" ")||"",d={email:o.email||"",displayName:o.displayName||`${c} ${h}`,firstName:c,lastName:h,phone:o.phoneNumber||"",photoURL:o.photoURL||void 0,createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:0,lifetimePoints:0,loyaltyPoints:0,tier:"bronze",rewardsHistory:[],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await e.set(d);const p=(await e.get()).data();return{uid:t,email:p.email,displayName:p.displayName,firstName:p.firstName||"User",lastName:p.lastName||"",phone:p.phone||"",photoURL:p.photoURL,createdAt:((s=p.createdAt)==null?void 0:s.toDate())||new Date,role:p.role,totalOrders:p.totalOrders??0,totalSpent:p.totalSpent??0,currentPoints:p.currentPoints??0,lifetimePoints:p.lifetimePoints??0,loyaltyPoints:p.loyaltyPoints??0,tier:p.tier||"bronze",rewardsHistory:(p.rewardsHistory||[]).map(w=>({...w,date:w.date&&typeof w.date.toDate=="function"?w.date.toDate():w.date})).sort((w,E)=>{const A=w.date instanceof Date?w.date:new Date(w.date);return(E.date instanceof Date?E.date:new Date(E.date)).getTime()-A.getTime()}),preferences:p.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}}}const i=n.data();return{uid:t,email:i.email,displayName:i.displayName||`${i.firstName} ${i.lastName}`,firstName:i.firstName||"User",lastName:i.lastName||"",phone:i.phone||"",photoURL:i.photoURL,createdAt:((a=i.createdAt)==null?void 0:a.toDate())||new Date,role:i.role,totalOrders:i.totalOrders??0,totalSpent:i.totalSpent??0,currentPoints:i.currentPoints??0,lifetimePoints:i.lifetimePoints??0,loyaltyPoints:i.loyaltyPoints??0,tier:i.tier||"bronze",rewardsHistory:(i.rewardsHistory||[]).map(o=>({...o,date:o.date&&typeof o.date.toDate=="function"?o.date.toDate():o.date})).sort((o,l)=>{const c=o.date instanceof Date?o.date:new Date(o.date);return(l.date instanceof Date?l.date:new Date(l.date)).getTime()-c.getTime()}),preferences:i.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}}},wQ=({children:t})=>{const[e,n]=R.useState(null),[i,r]=R.useState(!0);R.useEffect(()=>{let A;const v=sr.onAuthStateChanged(async _=>{A&&A(),_?A=Ze.collection("users").doc(_.uid).onSnapshot(I=>{var D;if(I.exists){const V=I.data(),S={uid:_.uid,email:_.email,firstName:V.firstName||"User",lastName:V.lastName||"",phone:V.phone||"",photoURL:V.photoURL,createdAt:((D=V.createdAt)==null?void 0:D.toDate())||new Date,role:V.role,totalOrders:V.totalOrders??0,totalSpent:V.totalSpent??0,currentPoints:V.currentPoints??0,lifetimePoints:V.lifetimePoints??0,tier:V.tier||"bronze",rewardsHistory:(V.rewardsHistory||[]).map(T=>({...T,date:T.date&&typeof T.date.toDate=="function"?T.date.toDate():T.date})).sort((T,C)=>{const N=T.date instanceof Date?T.date:new Date(T.date);return(C.date instanceof Date?C.date:new Date(C.date)).getTime()-N.getTime()}),preferences:V.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}};n(S)}else{console.log("User document not found for UID:",_.uid," - Using fallback profile");const V={uid:_.uid,email:_.email,firstName:"User",lastName:"",createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:0,lifetimePoints:0,tier:"bronze",rewardsHistory:[],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}};n(V)}r(!1)},I=>{console.error("Error listening to user document:",I," - Using fallback profile");const D={uid:_.uid,email:_.email,firstName:"User",lastName:"",createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:0,lifetimePoints:0,tier:"bronze",rewardsHistory:[],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}};n(D),r(!1)}):(n(null),r(!1))});return()=>{v(),A&&A()}},[]);const E={currentUser:e,loading:i,register:async(A,v,_,b,I)=>{const V=(await sr.createUserWithEmailAndPassword(A,v)).user,S={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},T={firstName:_,lastName:b,phone:I||"",createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[S],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};return await Ze.collection("users").doc(V.uid).set(T),Ax(V.uid)},login:async(A,v,_)=>{var I;if(console.log(" AuthContext.login called with:",{email:A,rememberMe:_}),A==="test@test.com"&&v==="123456"){console.log(" Using MOCK login for test user");const D="test-user-id",V="123456";return sessionStorage.setItem(`dev_verification_code_${D}`,V),sessionStorage.setItem("requires2FA","true"),console.log(` Verification code for ${A}: ${V}`),{needsVerification:!0,userId:D,email:A,role:"customer"}}const b=_?en.auth.Auth.Persistence.LOCAL:en.auth.Auth.Persistence.SESSION;await sr.setPersistence(b),console.log(" Attempting Firebase authentication..."),sessionStorage.setItem("requires2FA","true");try{const V=(await sr.signInWithEmailAndPassword(A,v)).user.uid;console.log(" Firebase auth successful, userId:",V);const S=Math.floor(1e5+Math.random()*9e5).toString(),T=new Date(Date.now()+10*60*1e3);console.log(" Storing verification code in Firestore...");try{await Ze.collection("emailVerifications").doc(V).set({code:S,email:A,createdAt:new Date,expiresAt:T,verified:!1})}catch(N){console.warn(" Firestore write failed (likely permission issue), falling back to sessionStorage for dev:",N),sessionStorage.setItem(`dev_verification_code_${V}`,S)}console.log(` Verification code for ${A}: ${S}`);let C;try{C=(I=(await Ze.collection("users").doc(V).get()).data())==null?void 0:I.role}catch{console.warn("Failed to fetch user role, defaulting to customer"),C="customer"}return console.log(" Returning verification needed response with role:",C),{needsVerification:!0,userId:V,email:A,role:C}}catch(D){throw sessionStorage.removeItem("requires2FA"),console.error("Login failed, cleared 2FA flag:",D),D}},logout:async()=>{await sr.signOut()},sendPasswordReset:async A=>{await sr.sendPasswordResetEmail(A)},signInWithGoogle:async()=>{var I;const A=new en.auth.GoogleAuthProvider,v=await sr.signInWithPopup(A),_=v.user,b=v.additionalUserInfo;if(b!=null&&b.isNewUser){const D=((I=_.displayName)==null?void 0:I.split(" "))||["New","User"],V=D[0],S=D.slice(1).join(" ")||"",T={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},C={firstName:V,lastName:S,photoURL:_.photoURL||void 0,createdAt:new Date,role:"customer",totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[T],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await Ze.collection("users").doc(_.uid).set(C)}return Ax(_.uid)},updateUserProfile:async A=>{if(!e)return;await Ze.collection("users").doc(e.uid).update(A)},updateUserPhoto:async A=>{if(!e)return;await Ze.collection("users").doc(e.uid).update({photoURL:A})},sendEmailVerificationCode:async(A,v)=>{const _=Math.floor(1e5+Math.random()*9e5).toString(),b=new Date(Date.now()+10*60*1e3);try{await Ze.collection("emailVerifications").doc(A).set({code:_,email:v,createdAt:new Date,expiresAt:b})}catch{console.warn("Firestore write failed, using session storage fallback"),sessionStorage.setItem(`dev_verification_code_${A}`,_)}console.log(` Verification code for ${v}: ${_}`)},verifyEmailCode:async(A,v)=>{try{const b=Ze.collection("emailVerifications").doc(A),I=await b.get();if(I.exists){const D=I.data();if(D){const V=new Date,S=D.expiresAt.toDate();if(V>S)return console.error("Verification code expired"),!1;if(D.code===v)return await b.update({verified:!0}),!0}}}catch{console.warn("Firestore read failed, checking session storage fallback")}const _=sessionStorage.getItem(`dev_verification_code_${A}`);return!!(_&&_===v)},updateUserPassword:async(A,v)=>{const _=sr.currentUser;if(!_||!_.email)throw new Error("No user logged in");const b=en.auth.EmailAuthProvider.credential(_.email,A);await _.reauthenticateWithCredential(b),await _.updatePassword(v)}};return g.jsx(QO.Provider,{value:E,children:!i&&t})},he=t=>`/RushCoffee-Capstone/${t}`,Rf=[{id:"cb-01",name:"Spanish Latte",description:"A creamy and sweet latte with a Spanish twist, featuring condensed milk for a rich flavor.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/spanish-latte.png"),available:!0,stock:99,popular:!0,displayOrder:1,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"condensed-milk",quantity:30}]},{id:"cb-02",name:"Rush Coffee Blend",description:"Our signature house blend, perfectly balanced for a smooth and satisfying coffee experience.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:89}],imageUrl:he("coffee-based/rush-coffee-blend.png"),available:!0,stock:99,popular:!0,displayOrder:2,recipe:[{ingredientId:"coffee-beans",quantity:18},{ingredientId:"hot-water",quantity:200}]},{id:"cb-03",name:"Caramel Chocolate Mocha",description:"A decadent mix of rich chocolate, espresso, and creamy caramel for the ultimate treat.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/caramel-chocolate-mocha.jpg"),available:!0,stock:99,popular:!0,displayOrder:3,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"chocolate-sauce",quantity:20},{ingredientId:"caramel-sauce",quantity:15}]},{id:"cb-04",name:"Dark Chocolate Mocha",description:"A bold and intense mocha experience with premium dark chocolate and strong espresso.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/dark-chocolate-mocha.jpg"),available:!0,stock:99,displayOrder:4,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"chocolate-sauce",quantity:25}]},{id:"cb-05",name:"Mocha Latte",description:"A classic blend of smooth espresso, rich chocolate sauce, and steamed milk.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/mocha-latte.jpg"),available:!0,stock:99,displayOrder:5,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"chocolate-sauce",quantity:20}]},{id:"cb-06",name:"Americano",description:"Bold espresso shots topped with hot water to create a light layer of crema.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/americano.jpg"),available:!0,stock:99,displayOrder:6,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"hot-water",quantity:220}]},{id:"cb-07",name:"Biscoff Latte",description:"An indulgent latte infused with the irresistible flavor of caramelized Biscoff cookies.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:199}],imageUrl:he("coffee-based/biscoff-latte.jpg"),available:!0,stock:99,displayOrder:7,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:170},{ingredientId:"biscoff-spread",quantity:30}]},{id:"cb-08",name:"Reeses Latte",description:"The perfect combination of peanut butter, chocolate, and espresso. A candy lover's dream.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("coffee-based/reeses-latte.jpg"),available:!0,stock:99,displayOrder:8,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:160},{ingredientId:"chocolate-sauce",quantity:15},{ingredientId:"peanut-butter",quantity:20}]},{id:"cb-09",name:"Brown Sugar Latte",description:"A comforting latte sweetened with rich, molasses-like brown sugar syrup.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:79}],imageUrl:he("coffee-based/brown-sugar-latte.jpg"),available:!0,stock:99,displayOrder:9,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"brown-sugar-syrup",quantity:25}]},{id:"cb-10",name:"Iced Latte",description:"A simple classic. Chilled espresso with cold milk served over ice.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:69}],imageUrl:he("coffee-based/iced-latte.jpg"),available:!0,stock:99,displayOrder:10,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"ice-cubes",quantity:100}]},{id:"cb-11",name:"Orange Latte",description:"A unique and refreshing latte with a zesty hint of natural orange flavor.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:89}],imageUrl:he("coffee-based/orange-latte.jpg"),available:!0,stock:99,displayOrder:11,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:170},{ingredientId:"orange-syrup",quantity:20}]},{id:"cb-12",name:"Coffee Jelly",description:"A delightful iced coffee drink with chewy, coffee-flavored jelly cubes.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:99}],imageUrl:he("coffee-based/coffee-jelly.jpg"),available:!0,stock:99,displayOrder:12,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"coffee-jelly",quantity:80},{ingredientId:"ice-cubes",quantity:80}]},{id:"nc-01",name:"Red Velvet",description:"A sweet and creamy drink inspired by the classic red velvet cake, with hints of cocoa and vanilla.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/red-velvet.jpg"),available:!0,stock:99,displayOrder:13,recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"red-velvet-powder",quantity:25},{ingredientId:"chocolate-sauce",quantity:10},{ingredientId:"vanilla-syrup",quantity:15}]},{id:"nc-02",name:"Red Velvet Matcha Latte",description:"A beautiful and delicious blend of earthy matcha and sweet red velvet flavors.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/red-velvet-matcha-latte.jpg"),available:!0,stock:99,displayOrder:14,recipe:[{ingredientId:"milk",quantity:180},{ingredientId:"matcha-powder",quantity:5},{ingredientId:"red-velvet-powder",quantity:15},{ingredientId:"vanilla-syrup",quantity:10}]},{id:"nc-03",name:"Milky Choco",description:"A rich and comforting chocolate drink made with high-quality cocoa and fresh milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/milky-choco.jpg"),available:!0,stock:99,displayOrder:15,recipe:[{ingredientId:"milk",quantity:220},{ingredientId:"chocolate-sauce",quantity:30}]},{id:"nc-04",name:"Strawberry Milk",description:"A refreshing and creamy drink made with real strawberries and fresh milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/strawberry-milk.jpg"),available:!0,stock:99,displayOrder:16,recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"strawberry-puree",quantity:50}]},{id:"nc-05",name:"Biscoff Milky",description:"A non-coffee treat blending the sweet, caramelized taste of Biscoff with creamy milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/biscoff-milky.jpg"),available:!0,stock:99,displayOrder:17,recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"biscoff-spread",quantity:35}]},{id:"nc-06",name:"Oreo Latte",description:"A fun and delicious drink packed with the classic cookies and cream flavor of Oreos.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:he("non-coffee/oreo-latte.jpg"),available:!0,stock:99,displayOrder:18,recipe:[{ingredientId:"milk",quantity:180},{ingredientId:"oreo-crumbs",quantity:40},{ingredientId:"chocolate-sauce",quantity:15}]},{id:"ms-01",name:"Matcha Latte",description:"Premium Japanese matcha green tea with steamed milk, a perfect balance of earthy and creamy.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:89}],imageUrl:he("matcha-series/matcha-latte.jpg"),available:!0,stock:99,popular:!0,displayOrder:19,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:200}]},{id:"ms-02",name:"Strawberry Matcha",description:"A delightful pairing of sweet strawberry puree and high-quality matcha green tea.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:109}],imageUrl:he("matcha-series/strawberry-matcha.jpg"),available:!0,stock:99,displayOrder:20,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"strawberry-puree",quantity:40}]},{id:"ms-03",name:"Matcha Cream Cheese",description:"Earthy matcha topped with a rich, savory, and slightly sweet cream cheese foam.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:109}],imageUrl:he("matcha-series/matcha-cream-cheese.jpg"),available:!0,stock:99,displayOrder:21,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"cream-cheese",quantity:30}]},{id:"ms-04",name:"Matcha Oreo",description:"A creative blend of matcha and crushed Oreo cookies for a unique texture and flavor.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("matcha-series/matcha-oreo.jpg"),available:!0,stock:99,displayOrder:22,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"oreo-crumbs",quantity:35}]},{id:"rf-01",name:"Flamangooverload Shake",description:"An explosive mix of flamingo and mango for an overload of fruity goodness.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/flamangooverload.jpg"),available:!0,stock:99,displayOrder:23,recipe:[{ingredientId:"mango-puree",quantity:100},{ingredientId:"strawberry-puree",quantity:50},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-02",name:"Mangoberry Shake",description:"A delightful blend of sweet mangoes and tangy berries, perfectly refreshing.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/mangoberry.jpg"),available:!0,stock:99,displayOrder:24,recipe:[{ingredientId:"mango-puree",quantity:80},{ingredientId:"mixed-berries",quantity:50},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-03",name:"Mango Caramel Shake",description:"Creamy mango shake drizzled with rich, buttery caramel sauce.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/mango-caramel.jpg"),available:!0,stock:99,displayOrder:25,recipe:[{ingredientId:"mango-puree",quantity:100},{ingredientId:"caramel-sauce",quantity:20},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-04",name:"Blueberry Shake",description:"A classic fruit shake made with sweet and juicy blueberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/blueberry-shake.jpg"),available:!0,stock:99,displayOrder:26,recipe:[{ingredientId:"blueberry-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-05",name:"Strawberry Shake",description:"A creamy and delicious shake made with ripe, sweet strawberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/strawberry-shake.jpg"),available:!0,stock:99,displayOrder:27,recipe:[{ingredientId:"strawberry-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-06",name:"Green Apple Shake",description:"A tart and refreshing shake with the crisp taste of green apples.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:he("refreshments/green-apple-shake.jpg"),available:!0,stock:99,displayOrder:28,recipe:[{ingredientId:"green-apple-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-07",name:"Blueberry Soda Pop",description:"Fizzy and fun, this soda pop is bursting with sweet blueberry flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/blueberry-soda.jpg"),available:!0,stock:99,displayOrder:29,recipe:[{ingredientId:"blueberry-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-08",name:"Strawberry Soda Pop",description:"A refreshing soda pop with the sweet taste of summer strawberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/strawberry-soda.jpg"),available:!0,stock:99,displayOrder:30,recipe:[{ingredientId:"strawberry-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-09",name:"Green Apple Soda Pop",description:"A crisp and bubbly soda with a tangy green apple twist.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/green-apple-soda.jpg"),available:!0,stock:99,displayOrder:31,recipe:[{ingredientId:"green-apple-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-10",name:"Lemon Soda Pop",description:"A zesty and invigorating soda pop with a classic lemon flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/lemon-soda.jpg"),available:!0,stock:99,displayOrder:32,recipe:[{ingredientId:"lemon-juice",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-11",name:"Lychee Soda Pop",description:"An exotic and fragrant soda pop with the sweet, floral taste of lychee.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/lychee-soda.jpg"),available:!0,stock:99,displayOrder:33,recipe:[{ingredientId:"lychee-syrup",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-12",name:"Mango Soda Pop",description:"A tropical and bubbly soda bursting with sweet mango flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:he("refreshments/mango-soda.jpg"),available:!0,stock:99,displayOrder:34,recipe:[{ingredientId:"mango-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"ml-01",name:"Breaded Bacon",description:"Crispy breaded bacon served with creamy white sauce and golden fries.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:119},{name:"Combo Meal",size:"w/ Fries & Drink",price:139}],imageUrl:he("menu/ala-carte-breaded-bacon-with-white-sauce and fries.jpg"),comboImageUrl:he("menu/combo-meals-breaded-bacon-with-white-sauce,-fries-and-a-drink.jpg"),available:!0,stock:99,popular:!0,displayOrder:35,recipe:[{ingredientId:"bacon-strips",quantity:.15},{ingredientId:"bread-crumbs",quantity:50},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:100},{ingredientId:"takeout-pack",quantity:1}]},{id:"ml-02",name:"Breaded Porkchop",description:"A juicy breaded porkchop fried to perfection, served with white sauce and fries.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:129},{name:"Combo Meal",size:"w/ Fries & Drink",price:149}],imageUrl:he("menu/ala-carte-breaded-porkchop-with-white-sauce-and-fries.jpg"),comboImageUrl:he("menu/combo-meals-breaded-porkchop-with-white-sauce-and-fries-w-drink.jpg"),available:!0,stock:99,popular:!0,displayOrder:36,recipe:[{ingredientId:"porkchop",quantity:.2},{ingredientId:"bread-crumbs",quantity:60},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:120},{ingredientId:"takeout-pack",quantity:1}]},{id:"ml-03",name:"Breaded Chicken",description:"Tender breaded chicken fillet with a side of fries and our signature white sauce.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:119},{name:"Combo Meal",size:"w/ Fries & Drink",price:139}],imageUrl:he("menu/ala-carte-chicken-with-white-sauce-and-fries.jpg"),comboImageUrl:he("menu/combo-meals-breaded-chicken-with-white-sauce,-fries-and-a-drink.jpg"),available:!0,stock:99,displayOrder:37,recipe:[{ingredientId:"chicken-fillet",quantity:.2},{ingredientId:"bread-crumbs",quantity:55},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:110},{ingredientId:"takeout-pack",quantity:1}]}],WO=R.createContext(void 0),TQ=()=>{const t=R.useContext(WO);if(!t)throw new Error("useProduct must be used within a ProductProvider");return t},EQ=({children:t})=>{const[e,n]=R.useState([]),[i,r]=R.useState(!0),[s,a]=R.useState(null),o=R.useCallback(async()=>{r(!0),a(null);try{const f=Ze.collection("products"),p=f.orderBy("displayOrder","asc"),w=await p.get();if(w.empty){console.log("Products collection is empty. Seeding products with specific IDs...");const _=Ze.batch();Rf.forEach(D=>{const{id:V,...S}=D,T=f.doc(V);_.set(T,S)}),await _.commit(),console.log(`Successfully seeded ${Rf.length} products to Firestore!`);const I=(await p.get()).docs.map(D=>({id:D.id,...D.data()}));n(I);return}const E=w.docs.map(_=>({id:_.id,..._.data()}));n(E);const A=Ze.batch();let v=!1;Rf.forEach(_=>{const b=E.find(I=>I.id===_.id);if(b){const I=JSON.stringify(b.recipe||[]),D=JSON.stringify(_.recipe||[]);if(I!==D){const V=f.doc(_.id);A.update(V,{recipe:_.recipe}),v=!0,console.log(`Syncing recipe for ${_.name}`)}}}),v&&(await A.commit(),console.log(" Recipes synced from code to Firestore"))}catch(f){f.code==="permission-denied"?console.info("Firestore permission denied. This is expected if security rules are not yet configured or if you are offline. Falling back to mock data for demonstration."):console.warn("Error fetching products from Firestore. Falling back to mock data.",f),n(Rf),a(null)}finally{r(!1)}},[]);R.useEffect(()=>{o()},[o]);const d={products:e,isLoading:i,error:s,addProduct:async f=>{try{await Ze.collection("products").add(f),await o()}catch(p){throw console.error("Error adding product: ",p),new Error("Failed to add product.")}},updateProduct:async(f,p)=>{try{await Ze.collection("products").doc(f).update(p),await o()}catch(w){throw console.error("Error updating product: ",w),new Error("Failed to update product.")}},deleteProduct:async f=>{try{await Ze.collection("products").doc(f).delete(),await o()}catch(p){throw console.error("Error deleting product: ",p),new Error("Failed to delete product.")}}};return g.jsx(WO.Provider,{value:d,children:t})},YO=R.createContext(void 0),XO=()=>{const t=R.useContext(YO);if(t===void 0)throw new Error("useCart must be used within a CartProvider");return t},AQ=({children:t})=>{const[e,n]=R.useState([]),[i,r]=R.useState(!1),[s,a]=R.useState(null),[o,l]=R.useState(!0),[c,h]=R.useState([]),{currentUser:d}=wo(),{products:f,isLoading:p}=TQ();R.useEffect(()=>{if(s){const P=setTimeout(()=>a(null),4e3);return()=>clearTimeout(P)}},[s]);const w=R.useCallback(P=>{a(P)},[]);R.useEffect(()=>{d?(async()=>{var H;if(!(!d||p)){l(!0);try{const z=await Ze.collection("users").doc(d.uid).get();if(z.exists){const J=(((H=z.data())==null?void 0:H.cart)||[]).map(ne=>{const Q=f.find(ht=>ht.id===ne.productId);if(!Q)return null;const de=Q.sizes.find(ht=>ht.name===ne.sizeName);if(!de)return null;const Nt=ne.customizations?JSON.stringify(ne.customizations):"";return{id:`${Q.id}-${de.name}-${Nt}`,product:Q,selectedSize:de,quantity:ne.quantity,customizations:ne.customizations}}).filter(ne=>ne!==null);n(J)}}catch(ie){console.error("Error fetching cart from Firestore:",ie),w("Couldn't load your cart.")}finally{l(!1)}}})():(n([]),l(!1))},[d,f,p,w]);const E=R.useCallback(async P=>{if(d)try{const H=Ze.collection("users").doc(d.uid),ie=P.map(z=>{const Y={};return z.customizations&&(z.customizations.sugarLevel!==void 0&&(Y.sugarLevel=z.customizations.sugarLevel),z.customizations.iceLevel!==void 0&&(Y.iceLevel=z.customizations.iceLevel),z.customizations.toppings!==void 0&&(Y.toppings=z.customizations.toppings)),{productId:z.product.id,sizeName:z.selectedSize.name,quantity:z.quantity,...Object.keys(Y).length>0&&{customizations:Y}}});await H.set({cart:ie},{merge:!0})}catch(H){console.error("Error updating Firestore cart:",H),w("Error saving your cart.")}},[d,w]),A=R.useMemo(()=>e.reduce((P,H)=>P+H.quantity,0),[e]),v=()=>r(!0),_=()=>r(!1),b=(P,H,ie,z=1)=>{const Y=ie?JSON.stringify(ie):"",J=`${P.id}-${H.name}-${Y}`;let ne;e.find(de=>de.id===J)?ne=e.map(de=>de.id===J?{...de,quantity:Math.min(de.quantity+z,P.stock)}:de):ne=[...e,{id:J,product:P,selectedSize:H,quantity:Math.min(z,P.stock),customizations:ie}],n(ne),E(ne),w(`${P.name} (${H.name}) added to cart!`),v()},I=P=>{if(!P||P.length===0)return;let H=[...e],ie=0;P.forEach(z=>{const Y=z.customizations?JSON.stringify(z.customizations):"",J=`${z.product.id}-${z.selectedSize.name}-${Y}`,ne=H.findIndex(Q=>Q.id===J);if(ne>-1){const Q=H[ne],de=Q.quantity+z.quantity;H[ne]={...Q,quantity:Math.min(de,z.product.stock)}}else H.push({id:J,product:z.product,selectedSize:z.selectedSize,quantity:Math.min(z.quantity,z.product.stock),customizations:z.customizations});ie+=z.quantity}),n(H),E(H),w(`${ie} item(s) added to your cart!`),v()},D=(P,H)=>{let ie;H<1?ie=e.filter(z=>z.id!==P):ie=e.map(z=>z.id===P?{...z,quantity:Math.min(H,z.product.stock)}:z),n(ie),E(ie)},V=P=>{const H=e.find(z=>z.id===P),ie=e.filter(z=>z.id!==P);n(ie),E(ie),H&&w(`${H.product.name} (${H.selectedSize.name}) removed from cart.`)},S=(P,H,ie,z,Y=1)=>{const J=e.filter(St=>St.id!==P),ne=z?JSON.stringify(z):"",Q=`${H.id}-${ie.name}-${ne}`,de=J.find(St=>St.id===Q);let Nt;de?Nt=J.map(St=>St.id===Q?{...St,quantity:Math.min(St.quantity+Y,H.stock)}:St):Nt=[...J,{id:Q,product:H,selectedSize:ie,quantity:Math.min(Y,H.stock),customizations:z}],n(Nt),E(Nt),w(`${H.name} (${ie.name}) updated!`)},T=()=>{n([]),h([]),E([])},C=P=>{h(H=>H.includes(P)?H.filter(ie=>ie!==P):[...H,P])},N=()=>{h(e.map(P=>P.id))},k=()=>{h([])};R.useEffect(()=>{const P=e.map(H=>H.id);h(H=>{const ie=H.filter(Y=>P.includes(Y)),z=P.filter(Y=>!H.includes(Y));return[...ie,...z]})},[e]);const O={cartItems:e,isCartOpen:i,toastMessage:s,totalCartItems:A,isCartLoading:o,selectedItemIds:c,addToCart:b,addMultipleToCart:I,updateQuantity:D,updateCartItem:S,removeFromCart:V,openCart:v,closeCart:_,showToast:w,toggleItemSelection:C,selectAllItems:N,deselectAllItems:k,clearCart:T};return g.jsx(YO.Provider,{value:O,children:t})},kr=({className:t,...e})=>g.jsxs("svg",{viewBox:"0 0 241 175",xmlns:"http://www.w3.org/2000/svg",className:t,fill:"currentColor",...e,children:[g.jsx("path",{d:"M153.092 78.5C178.275 50.84 210.393 19.4076 222.5 17.5C234.607 15.5924 239.5 30 239.5 30C239.5 30 244.137 46.596 236.388 72.8253C228.64 99.0547 199 128.5 199 128.5C199 128.5 177.5 152.5 147.5 167C147.5 167 114.686 183.001 104.889 169.159C95.0912 155.316 127.909 106.16 153.092 78.5Z"}),g.jsx("path",{d:"M8.99445 86.0801C8.99445 86.0801 -16.2682 31.1886 17.8826 14.4198C33.7618 9.56756 76 55.675 76 64.5C76 70 63.7899 86.337 59 101.5C54.887 114.52 55.557 134.266 52.0896 135.774C48.0468 137.533 37.3644 137.835 8.99445 86.0801Z"}),g.jsx("path",{d:"M47 12.5C41.0274 7.52362 41.5502 -7.59339e-06 52.5 0C63.4498 7.5934e-06 69.3348 2.24286 82.0884 7.45282C95.3718 12.8792 105.888 16.4103 109.463 23.875C111.5 32.5 107.979 33.026 103.5 38.5C99.0205 43.9741 96 44.1666 91 43.5C83.5342 42.5047 52.9726 17.4764 47 12.5Z"}),g.jsx("path",{d:"M200.048 20.8891C212.988 11.4339 207.491 2.52815 200.048 2.97405C192.604 3.41995 127.379 9.72972 89.5542 67.6673C85.4261 73.9905 72.4385 95.2439 69.1452 112.455C65.6022 130.971 65.8681 149.097 73.6272 157.74C81.0528 166.012 88.1891 164.145 92.2823 156.482C96.4277 148.721 97.4982 135.065 100.004 127.882C104.983 113.605 104.907 116.382 109.393 106.379C114.278 95.4879 120.938 86.2377 126.993 78.4363C154.543 42.9442 190.775 27.6646 200.048 20.8891Z"})]}),SQ=({children:t,className:e="",hover:n=!1,variant:i="default",padding:r="md",clickable:s=!1,onClick:a})=>{const o="rounded-2xl transition-all duration-300 ease-out",l={default:"border border-gray-100 bg-white/80 backdrop-blur-sm shadow-lg",elevated:"bg-white shadow-xl border-0",outlined:"border-2 border-primary-200 bg-white",glass:"bg-white/70 backdrop-blur-md border border-white/20 shadow-xl"},c={none:"",sm:"p-4",md:"p-6",lg:"p-8"},h=n?"hover:shadow-2xl hover:-translate-y-1 hover:scale-[1.02]":"",d=s?"cursor-pointer active:scale-[0.98]":"";return g.jsx("div",{className:`${o} ${l[i]} ${c[r]} ${h} ${d} ${e}`,onClick:s?a:void 0,role:s?"button":void 0,tabIndex:s?0:void 0,children:t})},zT=({isOpen:t,onClose:e,title:n,children:i,footer:r,size:s="md",hideHeader:a=!1,hideCloseButton:o=!1,className:l=""})=>{const[c,h]=R.useState(!1);if(R.useEffect(()=>{const f=p=>{p.key==="Escape"&&e()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[e]),R.useEffect(()=>{window.getComputedStyle(document.body).overflow;const f=document.getElementById("admin-main-content");return t?(document.body.style.overflow="hidden",f&&(window.getComputedStyle(f).overflow,f.style.overflow="hidden")):(document.body.style.overflow="",f&&(f.style.overflow="")),()=>{document.body.style.overflow="",f&&(f.style.overflow="")}},[t]),R.useEffect(()=>{if(t){h(!0);const f=setTimeout(()=>{h(!1)},1e3);return()=>clearTimeout(f)}},[t,s,i]),!t)return null;const d={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-2xl"};return typeof document<"u"?oC.createPortal(g.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm animate-fade-in",role:"dialog","aria-modal":"true","aria-labelledby":n?"modal-title":void 0,onClick:e,children:g.jsx("div",{className:`relative w-full transform transition-all ${d[s]} ${l} max-h-[90vh] flex flex-col animate-scale-in`,onClick:f=>f.stopPropagation(),children:g.jsxs(SQ,{variant:"elevated",className:"rounded-3xl p-0 shadow-2xl flex flex-col max-h-full overflow-hidden bg-white",children:[!o&&g.jsx("button",{onClick:e,className:"absolute right-6 top-6 z-10 rounded-full p-2 text-gray-400 transition-all hover:bg-gray-100 hover:text-gray-600 active:scale-95","aria-label":"Close modal",children:g.jsx(fd,{className:"h-6 w-6"})}),!a&&n&&g.jsx("div",{className:"px-8 pt-8 pb-2 flex-shrink-0",children:g.jsx("h3",{id:"modal-title",className:"text-2xl font-bold text-gray-900",children:n})}),g.jsx("div",{className:`${a&&!n?"p-6 pb-10":"px-6 py-6 pb-10"} overflow-y-auto custom-scrollbar ${c?"scrollbar-flash":""} flex-1`,children:i}),r&&g.jsx("div",{className:"flex justify-end gap-3 px-6 pb-2 pt-2 flex-shrink-0",children:r})]})})}),document.body):null},IQ=()=>g.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),g.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),g.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),g.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),xQ=({onForgotPassword:t,onRegister:e,onSuccess:n,onVerificationNeeded:i})=>{const[r,s]=R.useState(""),[a,o]=R.useState(""),[l,c]=R.useState(!1),[h,d]=R.useState(!1),[f,p]=R.useState(!1),[w,E]=R.useState(!1),[A,v]=R.useState(null),{login:_,signInWithGoogle:b}=wo(),I=async V=>{if(V.preventDefault(),!r||!a){v("Please fill in all fields");return}p(!0),v(null),console.log(" LoginForm submitting:",{email:r,password:a,rememberMe:l});try{const S=await _(r,a,l);S.needsVerification&&S.userId?i(r,S.userId,S.role):n(S.role)}catch(S){v(S.message||"Failed to login")}finally{p(!1)}},D=async()=>{E(!0),v(null);try{const V=await b();n(V.role)}catch(V){v(V.message||"Failed to sign in with Google")}finally{E(!1)}};return g.jsxs("div",{className:"w-full max-w-md mx-auto",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx(kr,{className:"mx-auto h-16 w-16 text-coffee-600 mb-4"}),g.jsx("h2",{className:"font-display text-4xl font-bold text-gray-900",children:"Rush Coffee"})]}),g.jsxs("form",{onSubmit:I,className:"space-y-4",children:[A&&g.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-800 border border-red-200",children:[g.jsx(u2,{className:"h-5 w-5 flex-shrink-0"}),g.jsx("span",{children:A})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),g.jsxs("div",{className:"relative",children:[g.jsx(Gb,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:"email",value:r,onChange:V=>s(V.target.value),className:"w-full pl-12 pr-4 py-3.5 bg-coffee-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:border-coffee-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"name@example.com"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),g.jsxs("div",{className:"relative",children:[g.jsx(Cv,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:h?"text":"password",value:a,onChange:V=>o(V.target.value),className:"w-full pl-12 pr-12 py-3.5 bg-coffee-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:border-coffee-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter your password"}),g.jsx("button",{type:"button",onClick:()=>d(!h),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:h?g.jsx(h2,{className:"h-5 w-5"}):g.jsx(d2,{className:"h-5 w-5"})})]})]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("label",{className:"flex items-center cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:l,onChange:V=>c(V.target.checked),className:"w-4 h-4 rounded border-gray-300 text-coffee-600 focus:ring-coffee-500"}),g.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Remember me"})]}),g.jsx("button",{type:"button",onClick:t,className:"text-sm text-coffee-600 hover:text-coffee-700 font-medium transition-colors",children:"Forgot your password?"})]}),g.jsx("button",{type:"submit",disabled:f,className:"w-full bg-coffee-600 hover:bg-coffee-700 text-white font-semibold py-3.5 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:f?g.jsxs("span",{className:"flex items-center justify-center gap-2",children:[g.jsx(Qa,{className:"h-5 w-5 animate-spin"}),"Logging in..."]}):"Login"}),g.jsxs("div",{className:"relative my-6",children:[g.jsx("div",{className:"absolute inset-0 flex items-center",children:g.jsx("div",{className:"w-full border-t border-gray-200"})}),g.jsx("div",{className:"relative flex justify-center text-sm",children:g.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or continue with"})})]}),g.jsxs("button",{type:"button",onClick:D,disabled:w,className:"w-full flex items-center justify-center gap-3 border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 py-3.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[w?g.jsx(Qa,{className:"h-5 w-5 animate-spin"}):g.jsx(IQ,{}),g.jsx("span",{className:"font-semibold text-gray-700",children:"Google"})]}),g.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Don't have an account?"," ",g.jsx("button",{type:"button",onClick:e,className:"text-coffee-600 font-semibold hover:text-coffee-700 transition-colors",children:"Sign up"})]})]})]})},RQ=R.createContext(void 0),CQ=()=>{const t=R.useContext(RQ);return t||{executeRecaptcha:async()=>"mock-token"}},PQ=({onLogin:t,onSuccess:e,onVerificationNeeded:n})=>{const[i,r]=R.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),[s,a]=R.useState(!1),[o,l]=R.useState(!1),[c,h]=R.useState(null),{register:d}=wo(),{executeRecaptcha:f}=CQ(),p=async w=>{if(w.preventDefault(),h(null),i.password!==i.confirmPassword){h("Passwords don't match");return}l(!0);try{await f();const E=await d(i.email,i.password,i.firstName,i.lastName,i.phone);n(i.email,E.uid,E.role)}catch(E){h(E.message||"Failed to register")}finally{l(!1)}};return g.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[g.jsxs("div",{className:"text-center mb-6",children:[g.jsx(kr,{className:"mx-auto h-16 w-16 text-coffee-600 mb-4"}),g.jsx("h2",{className:"font-display text-4xl font-bold text-gray-900",children:"Join Rush Coffee"}),g.jsxs("p",{className:"mt-2 text-gray-600 flex items-center justify-center gap-1",children:["Start skipping the line today ",g.jsx("span",{children:""})]})]}),g.jsxs("form",{onSubmit:p,className:"space-y-4",children:[c&&g.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-800 border border-red-200",children:[g.jsx(u2,{className:"h-5 w-5 flex-shrink-0"}),g.jsx("span",{children:c})]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),g.jsxs("div",{className:"relative",children:[g.jsx(Nv,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:"text",required:!0,value:i.firstName,onChange:w=>r({...i,firstName:w.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-coffee-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:border-coffee-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter first name"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),g.jsxs("div",{className:"relative",children:[g.jsx(Nv,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:"text",required:!0,value:i.lastName,onChange:w=>r({...i,lastName:w.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-coffee-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:border-coffee-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter last name"})]})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),g.jsxs("div",{className:"relative",children:[g.jsx(Gb,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:"email",required:!0,value:i.email,onChange:w=>r({...i,email:w.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-coffee-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:border-coffee-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"name@example.com"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number (Optional)"}),g.jsxs("div",{className:"relative",children:[g.jsx($b,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:"tel",value:i.phone,onChange:w=>r({...i,phone:w.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-coffee-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:border-coffee-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"09xxxxxxxxx"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),g.jsxs("div",{className:"relative",children:[g.jsx(Cv,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:s?"text":"password",required:!0,value:i.password,onChange:w=>r({...i,password:w.target.value}),className:"w-full pl-12 pr-12 py-3.5 bg-coffee-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:border-coffee-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Create a password"}),g.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:s?g.jsx(h2,{className:"h-5 w-5"}):g.jsx(d2,{className:"h-5 w-5"})})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),g.jsxs("div",{className:"relative",children:[g.jsx(Cv,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),g.jsx("input",{type:s?"text":"password",required:!0,value:i.confirmPassword,onChange:w=>r({...i,confirmPassword:w.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-coffee-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:border-coffee-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Confirm your password"})]})]}),g.jsx("button",{type:"submit",disabled:o,className:"w-full bg-coffee-600 hover:bg-coffee-700 text-white font-semibold py-3.5 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:o?g.jsxs("span",{className:"flex items-center justify-center gap-2",children:[g.jsx(Qa,{className:"h-5 w-5 animate-spin"}),"Creating account..."]}):"Create Account"}),g.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Already have an account?"," ",g.jsx("button",{type:"button",onClick:t,className:"text-coffee-600 font-semibold hover:text-coffee-700 transition-colors",children:"Login"})]})]})]})},NQ=({isOpen:t,onClose:e,initialView:n="login",onVerificationNeeded:i,onAuthSuccess:r})=>{const[s,a]=ch.useState(n);return ch.useEffect(()=>{t&&a(n)},[t,n]),g.jsx(zT,{isOpen:t,onClose:e,hideHeader:!0,size:s==="register"?"xl":"md",children:s==="login"?g.jsx(xQ,{onForgotPassword:()=>{},onRegister:()=>a("register"),onSuccess:o=>r(o),onVerificationNeeded:(o,l,c)=>i==null?void 0:i(o,l,c)},"login"):g.jsx(PQ,{onLogin:()=>a("login"),onSuccess:()=>r(),onVerificationNeeded:(o,l,c)=>i==null?void 0:i(o,l,c)},"register")})},DQ=({email:t,onVerify:e,onBack:n,onResend:i})=>{const[r,s]=R.useState(["","","","","",""]),[a,o]=R.useState(!1),[l,c]=R.useState(null),[h,d]=R.useState(30),f=R.useRef([]);R.useEffect(()=>{if(h>0){const _=setTimeout(()=>d(h-1),1e3);return()=>clearTimeout(_)}},[h]);const p=(_,b)=>{var D;if(b.length>1)return;const I=[...r];I[_]=b,s(I),b&&_<5&&((D=f.current[_+1])==null||D.focus())},w=(_,b)=>{var I;b.key==="Backspace"&&!r[_]&&_>0&&((I=f.current[_-1])==null||I.focus())},E=_=>{var D;_.preventDefault();const b=_.clipboardData.getData("text").slice(0,6).split(""),I=[...r];b.forEach((V,S)=>{S<6&&(I[S]=V)}),s(I),b.length===6&&((D=f.current[5])==null||D.focus())},A=async _=>{_.preventDefault();const b=r.join("");if(b.length!==6){c("Please enter the complete 6-digit code");return}o(!0),c(null);try{await e(b)}catch(I){c(I.message||"Verification failed"),o(!1)}},v=async()=>{h>0||(await i(),d(30))};return g.jsxs("form",{onSubmit:A,className:"space-y-8",children:[g.jsxs("div",{className:"text-center",children:[g.jsx(kr,{className:"mx-auto h-16 w-16 text-coffee-600 mb-4"}),g.jsx("h2",{className:"font-display text-3xl font-bold text-gray-900 mb-2",children:"Verify Your Email"}),g.jsx("p",{className:"text-gray-600 mb-2",children:"We've sent a verification code to"}),g.jsx("p",{className:"text-lg font-bold text-coffee-700",children:t})]}),g.jsx("div",{className:"flex justify-center gap-3",children:r.map((_,b)=>g.jsx("input",{ref:I=>f.current[b]=I,type:"text",maxLength:1,value:_,onChange:I=>p(b,I.target.value),onKeyDown:I=>w(b,I),onPaste:E,className:"w-12 h-14 sm:w-14 sm:h-16 text-center text-2xl font-bold bg-coffee-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:border-coffee-500 transition-all placeholder:text-gray-300",placeholder:""},b))}),l&&g.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100",children:[g.jsx(Tj,{className:"h-4 w-4"}),g.jsx("span",{children:l})]}),g.jsx("button",{type:"submit",disabled:a||r.join("").length!==6,className:"w-full bg-coffee-600 hover:bg-coffee-700 text-white font-semibold py-4 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:a?g.jsxs("span",{className:"flex items-center justify-center gap-2",children:[g.jsx(Qa,{className:"h-5 w-5 animate-spin"}),"Verifying..."]}):"Verify Account"}),g.jsxs("div",{className:"flex items-center justify-between text-sm pt-2",children:[g.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-2 text-gray-500 hover:text-gray-900 font-medium transition-colors group",children:[g.jsx(z3,{className:"h-4 w-4 transition-transform group-hover:-translate-x-1"}),"Back to Login"]}),g.jsxs("button",{type:"button",onClick:v,disabled:h>0,className:`flex items-center gap-2 font-medium transition-colors ${h>0?"text-gray-400 cursor-not-allowed":"text-coffee-600 hover:text-coffee-700"}`,children:[g.jsx(_j,{className:`h-4 w-4 ${h>0?"animate-spin":""}`}),h>0?`Resend in ${h}s`:"Resend Code"]})]})]})},kQ=({isOpen:t,onClose:e,email:n,userId:i,onSuccess:r,onBackToLogin:s,onResend:a})=>{const{verifyEmailCode:o}=wo(),l=async()=>{a?await a():(console.log("Resending code for user",i),await new Promise(h=>setTimeout(h,1e3)))},c=async h=>{if(!i)throw new Error("User ID is missing. Cannot verify.");if(await o(i,h))r();else throw new Error("Invalid verification code. Please check the console or try again.")};return g.jsx(zT,{isOpen:t,onClose:e,hideHeader:!0,size:"md",children:g.jsx(DQ,{email:n,onVerify:c,onBack:s||e,onResend:l})})},VQ=[{href:"/",label:"Home"},{href:"/about",label:"About"},{href:"/menu",label:"Menu"},{href:"/contact",label:"Contact"}],OQ=[{href:"/menu",label:"Menu"},{href:"/queue",label:"Queue"},{href:"/rewards",label:"Rewards"}],Sx=[{href:"/profile",label:"My Profile",Icon:Nv},{href:"/rewards",label:"My Rewards",Icon:nj},{href:"/about",label:"About",Icon:f2},{href:"/contact",label:"Contact",Icon:$b}],MQ=()=>{const[t,e]=R.useState(!1),[n,i]=R.useState(!1),r=R.useRef(null),[s,a]=R.useState(!1),[o,l]=R.useState("login"),[c,h]=R.useState(!1),[d,f]=R.useState(""),[p,w]=R.useState(""),{currentUser:E,logout:A}=wo(),{totalCartItems:v,openCart:_}=XO(),b=pc(),I=fi(),[D]=R3(),V=I.pathname==="/auth/verify-email",S=sessionStorage.getItem("requires2FA")==="true",T=E&&!V&&!S&&!s&&I.pathname!=="/",C=T?OQ:VQ,N=()=>e(!1),k=Q=>{l(Q),a(!0),N()};R.useEffect(()=>{const Q=D.get("auth");Q==="login"?(l("login"),a(!0)):Q==="register"&&(l("register"),a(!0))},[D]);const O=(Q,de,Nt)=>{a(!1),f(Q),w(de),h(!0)},P=Q=>{a(!1),h(!1),sessionStorage.removeItem("requires2FA");const de=Q||(E==null?void 0:E.role);b(de==="admin"?"/admin":de==="employee"?"/employee":"/menu")},H=()=>{h(!1),sessionStorage.removeItem("requires2FA"),A()},ie=()=>{h(!1),sessionStorage.removeItem("requires2FA"),A(),l("login"),a(!0)};R.useEffect(()=>{const Q=de=>{r.current&&!r.current.contains(de.target)&&i(!1)};return document.addEventListener("mousedown",Q),()=>document.removeEventListener("mousedown",Q)},[]),R.useEffect(()=>{const Q=()=>{window.innerWidth>=768&&e(!1)};return window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)},[]),R.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[t]);const z=async()=>{await A(),N(),i(!1),b("/")},Y=()=>e(!t),J=(Q=!1)=>{const de="rounded-full text-sm font-semibold transition-colors",Nt="block w-full text-center py-3 text-base",St="px-6 py-2";return T?g.jsxs("div",{className:`relative ${Q?"w-full":""}`,ref:r,children:[g.jsxs("button",{onClick:()=>i(!n),className:`flex w-full items-center justify-center gap-2 rounded-full border border-primary-600 px-4 py-2 text-sm font-semibold text-primary-600 transition-colors hover:bg-primary-50 ${Q?"text-base":""}`,"aria-haspopup":"true","aria-expanded":n,children:[g.jsxs("span",{children:["Welcome, ",E.firstName,"!"]}),g.jsx(G3,{className:`h-4 w-4 transition-transform ${n?"rotate-180":""}`})]}),n&&!Q&&g.jsx("div",{className:"absolute right-0 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none animate-fade-in-up",children:g.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[Sx.map(ht=>g.jsxs(pi,{to:ht.href,onClick:()=>i(!1),className:({isActive:Ii})=>`flex items-center gap-3 px-4 py-2 text-sm transition-colors hover:bg-gray-100 ${Ii?"text-primary-600 font-semibold":"text-gray-700"}`,role:"menuitem",children:[g.jsx(ht.Icon,{className:"h-4 w-4"}),ht.label]},ht.label)),(E.role==="employee"||E.role==="admin")&&g.jsxs(g.Fragment,{children:[g.jsx("hr",{className:"my-1"}),g.jsxs(pi,{to:"/employee",onClick:()=>i(!1),className:"flex items-center gap-3 px-4 py-2 text-sm font-semibold text-blue-700 transition-colors hover:bg-blue-50",role:"menuitem",children:[g.jsx(gf,{className:"h-4 w-4"}),"Employee Portal"]})]}),E.role==="admin"&&g.jsxs(pi,{to:"/admin",onClick:()=>i(!1),className:"flex items-center gap-3 px-4 py-2 text-sm font-semibold text-yellow-700 transition-colors hover:bg-yellow-50",role:"menuitem",children:[g.jsx(gf,{className:"h-4 w-4"}),"Admin Dashboard"]}),g.jsx("hr",{className:"my-1"}),g.jsxs("button",{onClick:z,className:"flex w-full items-center gap-3 px-4 py-2 text-left text-sm text-red-600 transition-colors hover:bg-red-50",role:"menuitem",children:[g.jsx(iI,{className:"h-4 w-4"}),"Logout"]})]})})]}):g.jsxs("div",{className:`flex items-center ${Q?"flex-col space-y-3":"gap-4"}`,children:[g.jsx("button",{onClick:()=>k("login"),className:`${de} border border-primary-600 text-primary-600 hover:bg-primary-50 ${Q?Nt:St}`,children:"Login"}),g.jsx("button",{onClick:()=>k("register"),className:`${de} bg-primary-600 text-white shadow-sm hover:bg-primary-700 ${Q?Nt:St}`,children:"Sign Up"})]})},ne=()=>g.jsxs("button",{onClick:_,className:"relative rounded-full p-2 text-gray-700 transition hover:bg-gray-100","aria-label":`Open cart with ${v} items`,children:[g.jsx(Sj,{className:"h-6 w-6"}),v>0&&g.jsx("span",{className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white","aria-hidden":"true",children:v})]});return g.jsxs(g.Fragment,{children:[g.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-gray-200/80 bg-white/95 shadow-md backdrop-blur-sm",children:g.jsxs("div",{className:"container mx-auto flex h-16 items-center justify-between px-4 sm:h-20 sm:px-6 lg:px-8 md:grid md:grid-cols-3",children:[g.jsxs(pi,{to:"/",className:"flex items-center gap-2 flex-shrink-0 md:justify-self-start",children:[g.jsx(kr,{className:"h-7 w-7 text-primary-600 sm:h-8 sm:w-8"}),g.jsx("span",{className:"text-lg font-bold text-primary-600 whitespace-nowrap sm:text-2xl",children:"Rush Coffee"})]}),g.jsx("nav",{className:"hidden items-center justify-center space-x-8 md:flex md:justify-self-center",children:C.map(Q=>g.jsx(pi,{to:Q.href,className:({isActive:de})=>`relative text-sm font-normal uppercase transition-colors hover:text-primary-600 ${de?"text-primary-600":"text-gray-700"} after:absolute after:bottom-0 after:left-0 after:h-[1px] after:w-full after:origin-center after:transform after:bg-primary-600 after:transition-transform after:duration-300 ${de?"after:scale-x-100":"after:scale-x-0"} hover:after:scale-x-100`,children:Q.label},Q.label))}),g.jsxs("div",{className:"hidden items-center justify-end gap-4 md:flex md:justify-self-end",children:[J(),T&&g.jsx(ne,{})]}),g.jsxs("div",{className:"flex items-center justify-end gap-2 md:hidden",children:[T&&g.jsx(ne,{}),g.jsx("button",{onClick:Y,className:"rounded-md p-2 text-gray-700 transition hover:bg-gray-100","aria-label":"Toggle menu","aria-expanded":t,children:g.jsx(fj,{className:"h-6 w-6"})})]})]})}),g.jsxs("div",{className:`fixed inset-0 z-[60] md:hidden ${t?"pointer-events-auto":"pointer-events-none"}`,children:[g.jsx("div",{className:`absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ${t?"opacity-100":"opacity-0"}`,onClick:N,"aria-hidden":"true"}),g.jsxs("div",{className:`absolute top-0 right-0 h-full w-4/5 max-w-sm transform bg-white shadow-2xl transition-transform duration-300 ease-out ${t?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"mobile-menu-title",children:[g.jsxs("div",{className:"flex items-center justify-between border-b p-4",children:[g.jsxs(pi,{to:"/",className:"flex items-center gap-2",onClick:N,children:[g.jsx(kr,{className:"h-7 w-7 text-primary-600"}),g.jsx("span",{id:"mobile-menu-title",className:"text-xl font-bold text-primary-600",children:"Rush Coffee"})]}),g.jsx("button",{onClick:N,className:"rounded-full p-2 text-gray-500 transition hover:bg-gray-100 hover:text-gray-700","aria-label":"Close menu",children:g.jsx(fd,{className:"h-6 w-6"})})]}),g.jsxs("nav",{className:"flex flex-1 flex-col gap-2 overflow-y-auto p-4",children:[C.map(Q=>g.jsx(pi,{to:Q.href,onClick:N,className:({isActive:de})=>`rounded-xl px-4 py-3 text-lg font-medium transition-all ${de?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:Q.label},Q.label)),T&&g.jsxs("div",{className:"mt-4 border-t pt-4",children:[g.jsx("p",{className:"mb-2 px-4 text-xs font-semibold uppercase tracking-wider text-gray-400",children:"Account"}),Sx.map(Q=>g.jsxs(pi,{to:Q.href,onClick:N,className:({isActive:de})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${de?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[g.jsx(Q.Icon,{className:"h-5 w-5"}),Q.label]},Q.label)),(E.role==="employee"||E.role==="admin")&&g.jsxs(pi,{to:"/employee",onClick:N,className:({isActive:Q})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${Q?"bg-blue-50 text-blue-800":"text-blue-700 hover:bg-blue-50"}`,children:[g.jsx(gf,{className:"h-5 w-5"}),"Employee Portal"]}),E.role==="admin"&&g.jsxs(pi,{to:"/admin",onClick:N,className:({isActive:Q})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${Q?"bg-yellow-50 text-yellow-800":"text-yellow-700 hover:bg-yellow-50"}`,children:[g.jsx(gf,{className:"h-5 w-5"}),"Admin Dashboard"]})]})]}),g.jsx("div",{className:"border-t p-4",children:T?g.jsxs("button",{onClick:z,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-red-50 px-6 py-3 text-base font-semibold text-red-600 transition-colors hover:bg-red-100",children:[g.jsx(iI,{className:"h-5 w-5"}),"Logout"]}):J(!0)})]})]}),g.jsx(NQ,{isOpen:s,onClose:()=>a(!1),initialView:o,onVerificationNeeded:O,onAuthSuccess:P}),g.jsx(kQ,{isOpen:c,onClose:H,email:d,userId:p,onSuccess:()=>P(),onBackToLogin:ie})]})},LQ=()=>g.jsxs("footer",{className:"relative bg-coffee-900 text-coffee-200",children:[g.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),g.jsxs("div",{className:"container relative z-10 mx-auto grid grid-cols-2 gap-8 px-6 py-12 md:grid-cols-2 lg:grid-cols-4",children:[g.jsxs("div",{className:"col-span-2 space-y-4 md:col-span-1 lg:col-span-1",children:[g.jsxs(Xn,{to:"/",className:"flex items-center gap-2",children:[g.jsx(kr,{className:"h-8 w-8 text-primary-500"}),g.jsx("span",{className:"font-display text-2xl font-bold text-white",children:"Rush Coffee"})]}),g.jsx("p",{className:"font-medium text-white",children:"Premium coffee, no waiting."}),g.jsx("p",{className:"text-sm leading-relaxed text-coffee-200/80",children:"Join the digital queue and get your coffee fix faster than ever. Experience the future of coffee ordering."})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Quick Links"}),g.jsxs("ul",{className:"space-y-3",children:[g.jsx("li",{children:g.jsx(Xn,{to:"/",className:"transition-colors hover:text-primary-400 hover:underline",children:"Home"})}),g.jsx("li",{children:g.jsx(Xn,{to:"/about",className:"transition-colors hover:text-primary-400 hover:underline",children:"About Us"})}),g.jsx("li",{children:g.jsx(Xn,{to:"/menu",className:"transition-colors hover:text-primary-400 hover:underline",children:"Menu"})}),g.jsx("li",{children:g.jsx(Xn,{to:"/faq",className:"transition-colors hover:text-primary-400 hover:underline",children:"FAQ"})}),g.jsx("li",{children:g.jsx(Xn,{to:"/contact",className:"transition-colors hover:text-primary-400 hover:underline",children:"Contact"})})]})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Legal"}),g.jsxs("ul",{className:"space-y-3",children:[g.jsx("li",{children:g.jsx(Xn,{to:"/terms",className:"transition-colors hover:text-primary-400 hover:underline",children:"Terms of Service"})}),g.jsx("li",{children:g.jsx(Xn,{to:"/privacy",className:"transition-colors hover:text-primary-400 hover:underline",children:"Privacy Policy"})}),g.jsx("li",{children:g.jsx(Xn,{to:"/cookies",className:"transition-colors hover:text-primary-400 hover:underline",children:"Cookie Policy"})})]})]}),g.jsxs("div",{className:"col-span-2 md:col-span-1 lg:col-span-1",children:[g.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Contact & Connect"}),g.jsx("address",{className:"not-italic",children:g.jsxs("ul",{className:"space-y-4",children:[g.jsxs("li",{className:"flex items-start gap-3",children:[g.jsx(hj,{className:"mt-1 h-5 w-5 flex-shrink-0 text-primary-500"}),g.jsx("span",{children:"11 Visayan Ave. St. Galas, Quezon City, Philippines"})]}),g.jsxs("li",{className:"flex items-center gap-3",children:[g.jsx($b,{className:"h-5 w-5 flex-shrink-0 text-primary-500"}),g.jsx("a",{href:"tel:09304641022",className:"transition-colors hover:text-white",children:"0930 464 1022"})]}),g.jsxs("li",{className:"flex items-center gap-3",children:[g.jsx(Gb,{className:"h-5 w-5 flex-shrink-0 text-primary-500"}),g.jsx("a",{href:"mailto:hello@rushcoffee.ph",className:"transition-colors hover:text-white",children:"hello@rushcoffee.ph"})]})]})}),g.jsxs("div",{className:"mt-8 flex gap-4",children:[g.jsx("a",{href:"https://www.facebook.com/profile.php?id=61551613276320",target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",className:"rounded-full bg-white/5 p-2 transition-colors hover:bg-primary-600 hover:text-white",children:g.jsx(ej,{className:"h-5 w-5"})}),g.jsx("a",{href:"https://www.instagram.com/Rush_Coffee2023/",target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",className:"rounded-full bg-white/5 p-2 transition-colors hover:bg-primary-600 hover:text-white",children:g.jsx(sj,{className:"h-5 w-5"})})]})]})]}),g.jsx("div",{className:"relative z-10 border-t border-white/10 bg-black/20",children:g.jsxs("div",{className:"container mx-auto flex flex-col items-center justify-between gap-4 px-6 py-6 text-center text-sm text-coffee-300 sm:flex-row",children:[g.jsx("p",{children:" 2023 Rush Coffee. All rights reserved."}),g.jsxs("p",{className:"flex items-center gap-1",children:["Made with ",g.jsx("span",{className:"text-red-500",children:""})," and ",g.jsx("span",{className:"text-amber-500",children:""})]})]})})]}),JO=R.createContext(void 0),ZO=()=>{const t=R.useContext(JO);if(t===void 0)throw new Error("useNotification must be used within a NotificationProvider");return t},UQ=({children:t})=>{const[e,n]=R.useState({message:"",type:"info",isVisible:!1}),i=R.useCallback((a,o="info")=>{n({message:a,type:o,isVisible:!0}),setTimeout(()=>{n(l=>({...l,isVisible:!1}))},5e3)},[]),r=R.useCallback(()=>{n(a=>({...a,isVisible:!1}))},[]),s={notification:e,showNotification:i,hideNotification:r};return g.jsx(JO.Provider,{value:s,children:t})},BT=R.createContext({});function FT(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}const Vg=R.createContext(null),qT=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class jQ extends R.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function zQ({children:t,isPresent:e}){const n=R.useId(),i=R.useRef(null),r=R.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=R.useContext(qT);return R.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:c}=r.current;if(e||!i.current||!a||!o)return;i.current.dataset.motionPopId=n;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),g.jsx(jQ,{isPresent:e,childRef:i,sizeRef:r,children:R.cloneElement(t,{ref:i})})}const BQ=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:a})=>{const o=FT(FQ),l=R.useId(),c=R.useCallback(d=>{o.set(d,!0);for(const f of o.values())if(!f)return;i&&i()},[o,i]),h=R.useMemo(()=>({id:l,initial:e,isPresent:n,custom:r,onExitComplete:c,register:d=>(o.set(d,!1),()=>o.delete(d))}),s?[Math.random(),c]:[n,c]);return R.useMemo(()=>{o.forEach((d,f)=>o.set(f,!1))},[n]),R.useEffect(()=>{!n&&!o.size&&i&&i()},[n]),a==="popLayout"&&(t=g.jsx(zQ,{isPresent:n,children:t})),g.jsx(Vg.Provider,{value:h,children:t})};function FQ(){return new Map}function eM(t=!0){const e=R.useContext(Vg);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,s=R.useId();R.useEffect(()=>{t&&r(s)},[t]);const a=R.useCallback(()=>t&&i&&i(s),[s,i,t]);return!n&&i?[!1,a]:[!0]}const Cf=t=>t.key||"";function Ix(t){const e=[];return R.Children.forEach(t,n=>{R.isValidElement(n)&&e.push(n)}),e}const HT=typeof window<"u",tM=HT?R.useLayoutEffect:R.useEffect,qQ=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:a=!1})=>{const[o,l]=eM(a),c=R.useMemo(()=>Ix(t),[t]),h=a&&!o?[]:c.map(Cf),d=R.useRef(!0),f=R.useRef(c),p=FT(()=>new Map),[w,E]=R.useState(c),[A,v]=R.useState(c);tM(()=>{d.current=!1,f.current=c;for(let I=0;I<A.length;I++){const D=Cf(A[I]);h.includes(D)?p.delete(D):p.get(D)!==!0&&p.set(D,!1)}},[A,h.length,h.join("-")]);const _=[];if(c!==w){let I=[...c];for(let D=0;D<A.length;D++){const V=A[D],S=Cf(V);h.includes(S)||(I.splice(D,0,V),_.push(V))}s==="wait"&&_.length&&(I=_),v(Ix(I)),E(c);return}const{forceRender:b}=R.useContext(BT);return g.jsx(g.Fragment,{children:A.map(I=>{const D=Cf(I),V=a&&!o?!1:c===A||h.includes(D),S=()=>{if(p.has(D))p.set(D,!0);else return;let T=!0;p.forEach(C=>{C||(T=!1)}),T&&(b==null||b(),v(f.current),a&&(l==null||l()),i&&i())};return g.jsx(BQ,{isPresent:V,initial:!d.current||n?void 0:!1,custom:V?void 0:e,presenceAffectsLayout:r,mode:s,onExitComplete:V?void 0:S,children:I},D)})})},Hn=t=>t;let nM=Hn;function GT(t){let e;return()=>(e===void 0&&(e=t()),e)}const nc=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},br=t=>t*1e3,wr=t=>t/1e3,HQ={useManualTiming:!1};function GQ(t){let e=new Set,n=new Set,i=!1,r=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(c){s.has(c)&&(l.schedule(c),t()),c(a)}const l={schedule:(c,h=!1,d=!1)=>{const p=d&&i?e:n;return h&&s.add(c),p.has(c)||p.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(a=c,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(o),e.clear(),i=!1,r&&(r=!1,l.process(c))}};return l}const Pf=["read","resolveKeyframes","update","preRender","render","postRender"],$Q=40;function iM(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=Pf.reduce((v,_)=>(v[_]=GQ(s),v),{}),{read:o,resolveKeyframes:l,update:c,preRender:h,render:d,postRender:f}=a,p=()=>{const v=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(v-r.timestamp,$Q),1),r.timestamp=v,r.isProcessing=!0,o.process(r),l.process(r),c.process(r),h.process(r),d.process(r),f.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(p))},w=()=>{n=!0,i=!0,r.isProcessing||t(p)};return{schedule:Pf.reduce((v,_)=>{const b=a[_];return v[_]=(I,D=!1,V=!1)=>(n||w(),b.schedule(I,D,V)),v},{}),cancel:v=>{for(let _=0;_<Pf.length;_++)a[Pf[_]].cancel(v)},state:r,steps:a}}const{schedule:Ge,cancel:Ks,state:jt,steps:y_}=iM(typeof requestAnimationFrame<"u"?requestAnimationFrame:Hn,!0),rM=R.createContext({strict:!1}),xx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ic={};for(const t in xx)ic[t]={isEnabled:e=>xx[t].some(n=>!!e[n])};function KQ(t){for(const e in t)ic[e]={...ic[e],...t[e]}}const QQ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||QQ.has(t)}let sM=t=>!yp(t);function WQ(t){t&&(sM=e=>e.startsWith("on")?!yp(e):t(e))}try{WQ(require("@emotion/is-prop-valid").default)}catch{}function YQ(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(sM(r)||n===!0&&yp(r)||!e&&!yp(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function XQ(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const Og=R.createContext({});function Qh(t){return typeof t=="string"||Array.isArray(t)}function Mg(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const $T=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],KT=["initial",...$T];function Lg(t){return Mg(t.animate)||KT.some(e=>Qh(t[e]))}function aM(t){return!!(Lg(t)||t.variants)}function JQ(t,e){if(Lg(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Qh(n)?n:void 0,animate:Qh(i)?i:void 0}}return t.inherit!==!1?e:{}}function ZQ(t){const{initial:e,animate:n}=JQ(t,R.useContext(Og));return R.useMemo(()=>({initial:e,animate:n}),[Rx(e),Rx(n)])}function Rx(t){return Array.isArray(t)?t.join(" "):t}const eW=Symbol.for("motionComponentSymbol");function il(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function tW(t,e,n){return R.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):il(n)&&(n.current=i))},[e])}const QT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nW="framerAppearId",oM="data-"+QT(nW),{schedule:WT}=iM(queueMicrotask,!1),lM=R.createContext({});function iW(t,e,n,i,r){var s,a;const{visualElement:o}=R.useContext(Og),l=R.useContext(rM),c=R.useContext(Vg),h=R.useContext(qT).reducedMotion,d=R.useRef(null);i=i||l.renderer,!d.current&&i&&(d.current=i(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const f=d.current,p=R.useContext(lM);f&&!f.projection&&r&&(f.type==="html"||f.type==="svg")&&rW(d.current,n,r,p);const w=R.useRef(!1);R.useInsertionEffect(()=>{f&&w.current&&f.update(n,c)});const E=n[oM],A=R.useRef(!!E&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,E))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,E)));return tM(()=>{f&&(w.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),WT.render(f.render),A.current&&f.animationState&&f.animationState.animateChanges())}),R.useEffect(()=>{f&&(!A.current&&f.animationState&&f.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,E)}),A.current=!1))}),f}function rW(t,e,n,i){const{layoutId:r,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:cM(t.parent)),t.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!a||o&&il(o),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function cM(t){if(t)return t.options.allowProjection!==!1?t.projection:cM(t.parent)}function sW({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var s,a;t&&KQ(t);function o(c,h){let d;const f={...R.useContext(qT),...c,layoutId:aW(c)},{isStatic:p}=f,w=ZQ(c),E=i(c,p);if(!p&&HT){oW();const A=lW(f);d=A.MeasureLayout,w.visualElement=iW(r,E,f,e,A.ProjectionNode)}return g.jsxs(Og.Provider,{value:w,children:[d&&w.visualElement?g.jsx(d,{visualElement:w.visualElement,...f}):null,n(r,c,tW(E,w.visualElement,h),E,p,w.visualElement)]})}o.displayName=`motion.${typeof r=="string"?r:`create(${(a=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&a!==void 0?a:""})`}`;const l=R.forwardRef(o);return l[eW]=r,l}function aW({layoutId:t}){const e=R.useContext(BT).id;return e&&t!==void 0?e+"-"+t:t}function oW(t,e){R.useContext(rM).strict}function lW(t){const{drag:e,layout:n}=ic;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const cW=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function YT(t){return typeof t!="string"||t.includes("-")?!1:!!(cW.indexOf(t)>-1||/[A-Z]/u.test(t))}function Cx(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function XT(t,e,n,i){if(typeof e=="function"){const[r,s]=Cx(i);e=e(n!==void 0?n:t.custom,r,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,s]=Cx(i);e=e(n!==void 0?n:t.custom,r,s)}return e}const w0=t=>Array.isArray(t),uW=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),hW=t=>w0(t)?t[t.length-1]||0:t,nn=t=>!!(t&&t.getVelocity);function hm(t){const e=nn(t)?t.get():t;return uW(e)?e.toValue():e}function dW({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,s){const a={latestValues:fW(i,r,s,t),renderState:e()};return n&&(a.onMount=o=>n({props:i,current:o,...a}),a.onUpdate=o=>n(o)),a}const uM=t=>(e,n)=>{const i=R.useContext(Og),r=R.useContext(Vg),s=()=>dW(t,e,i,r);return n?s():FT(s)};function fW(t,e,n,i){const r={},s=i(t,{});for(const f in s)r[f]=hm(s[f]);let{initial:a,animate:o}=t;const l=Lg(t),c=aM(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let h=n?n.initial===!1:!1;h=h||a===!1;const d=h?o:a;if(d&&typeof d!="boolean"&&!Mg(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const w=XT(t,f[p]);if(w){const{transitionEnd:E,transition:A,...v}=w;for(const _ in v){let b=v[_];if(Array.isArray(b)){const I=h?b.length-1:0;b=b[I]}b!==null&&(r[_]=b)}for(const _ in E)r[_]=E[_]}}}return r}const Cc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],To=new Set(Cc),hM=t=>e=>typeof e=="string"&&e.startsWith(t),dM=hM("--"),mW=hM("var(--"),JT=t=>mW(t)?pW.test(t.split("/*")[0].trim()):!1,pW=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,fM=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Vr=(t,e,n)=>n>e?e:n<t?t:n,Pc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Wh={...Pc,transform:t=>Vr(0,1,t)},Nf={...Pc,default:1},Md=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ns=Md("deg"),Ki=Md("%"),re=Md("px"),gW=Md("vh"),yW=Md("vw"),Px={...Ki,parse:t=>Ki.parse(t)/100,transform:t=>Ki.transform(t*100)},_W={borderWidth:re,borderTopWidth:re,borderRightWidth:re,borderBottomWidth:re,borderLeftWidth:re,borderRadius:re,radius:re,borderTopLeftRadius:re,borderTopRightRadius:re,borderBottomRightRadius:re,borderBottomLeftRadius:re,width:re,maxWidth:re,height:re,maxHeight:re,top:re,right:re,bottom:re,left:re,padding:re,paddingTop:re,paddingRight:re,paddingBottom:re,paddingLeft:re,margin:re,marginTop:re,marginRight:re,marginBottom:re,marginLeft:re,backgroundPositionX:re,backgroundPositionY:re},vW={rotate:ns,rotateX:ns,rotateY:ns,rotateZ:ns,scale:Nf,scaleX:Nf,scaleY:Nf,scaleZ:Nf,skew:ns,skewX:ns,skewY:ns,distance:re,translateX:re,translateY:re,translateZ:re,x:re,y:re,z:re,perspective:re,transformPerspective:re,opacity:Wh,originX:Px,originY:Px,originZ:re},Nx={...Pc,transform:Math.round},ZT={..._W,...vW,zIndex:Nx,size:re,fillOpacity:Wh,strokeOpacity:Wh,numOctaves:Nx},bW={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wW=Cc.length;function TW(t,e,n){let i="",r=!0;for(let s=0;s<wW;s++){const a=Cc[s],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=fM(o,ZT[a]);if(!l){r=!1;const h=bW[a]||a;i+=`${h}(${c}) `}n&&(e[a]=c)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function eE(t,e,n){const{style:i,vars:r,transformOrigin:s}=t;let a=!1,o=!1;for(const l in e){const c=e[l];if(To.has(l)){a=!0;continue}else if(dM(l)){r[l]=c;continue}else{const h=fM(c,ZT[l]);l.startsWith("origin")?(o=!0,s[l]=h):i[l]=h}}if(e.transform||(a||n?i.transform=TW(e,t.transform,n):i.transform&&(i.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:h=0}=s;i.transformOrigin=`${l} ${c} ${h}`}}const EW={offset:"stroke-dashoffset",array:"stroke-dasharray"},AW={offset:"strokeDashoffset",array:"strokeDasharray"};function SW(t,e,n=1,i=0,r=!0){t.pathLength=1;const s=r?EW:AW;t[s.offset]=re.transform(-i);const a=re.transform(e),o=re.transform(n);t[s.array]=`${a} ${o}`}function Dx(t,e,n){return typeof t=="string"?t:re.transform(e+n*t)}function IW(t,e,n){const i=Dx(e,t.x,t.width),r=Dx(n,t.y,t.height);return`${i} ${r}`}function tE(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},h,d){if(eE(t,c,d),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p,dimensions:w}=t;f.transform&&(w&&(p.transform=f.transform),delete f.transform),w&&(r!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=IW(w,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),i!==void 0&&(f.scale=i),a!==void 0&&SW(f,a,o,l,!1)}const nE=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),mM=()=>({...nE(),attrs:{}}),iE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function pM(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const s in n)t.style.setProperty(s,n[s])}const gM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function yM(t,e,n,i){pM(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(gM.has(r)?r:QT(r),e.attrs[r])}const _p={};function xW(t){Object.assign(_p,t)}function _M(t,{layout:e,layoutId:n}){return To.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!_p[t]||t==="opacity")}function rE(t,e,n){var i;const{style:r}=t,s={};for(const a in r)(nn(r[a])||e.style&&nn(e.style[a])||_M(a,t)||((i=n==null?void 0:n.getValue(a))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[a]=r[a]);return s}function vM(t,e,n){const i=rE(t,e,n);for(const r in t)if(nn(t[r])||nn(e[r])){const s=Cc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=t[r]}return i}function RW(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const kx=["x","y","width","height","cx","cy","r"],CW={useVisualState:uM({scrapeMotionValuesFromProps:vM,createRenderState:mM,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let s=!!t.drag;if(!s){for(const o in r)if(To.has(o)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let o=0;o<kx.length;o++){const l=kx[o];t[l]!==e[l]&&(a=!0)}a&&Ge.read(()=>{RW(n,i),Ge.render(()=>{tE(i,r,iE(n.tagName),t.transformTemplate),yM(n,i)})})}})},PW={useVisualState:uM({scrapeMotionValuesFromProps:rE,createRenderState:nE})};function bM(t,e,n){for(const i in e)!nn(e[i])&&!_M(i,n)&&(t[i]=e[i])}function NW({transformTemplate:t},e){return R.useMemo(()=>{const n=nE();return eE(n,e,t),Object.assign({},n.vars,n.style)},[e])}function DW(t,e){const n=t.style||{},i={};return bM(i,n,t),Object.assign(i,NW(t,e)),i}function kW(t,e){const n={},i=DW(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function VW(t,e,n,i){const r=R.useMemo(()=>{const s=mM();return tE(s,e,iE(i),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};bM(s,t.style,t),r.style={...s,...r.style}}return r}function OW(t=!1){return(n,i,r,{latestValues:s},a)=>{const l=(YT(n)?VW:kW)(i,s,a,n),c=YQ(i,typeof n=="string",t),h=n!==R.Fragment?{...c,...l,ref:r}:{},{children:d}=i,f=R.useMemo(()=>nn(d)?d.get():d,[d]);return R.createElement(n,{...h,children:f})}}function MW(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...YT(i)?CW:PW,preloadedFeatures:t,useRender:OW(r),createVisualElement:e,Component:i};return sW(a)}}function wM(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function Ug(t,e,n){const i=t.getProps();return XT(i,e,n!==void 0?n:i.custom,t)}const LW=GT(()=>window.ScrollTimeline!==void 0);class UW{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(LW()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class jW extends UW{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function sE(t,e){return t?t[e]||t.default||t:void 0}const T0=2e4;function TM(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<T0;)e+=n,i=t.next(e);return e>=T0?1/0:e}function aE(t){return typeof t=="function"}function Vx(t,e){t.timeline=e,t.onfinish=null}const oE=t=>Array.isArray(t)&&typeof t[0]=="number",zW={linearEasing:void 0};function BW(t,e){const n=GT(t);return()=>{var i;return(i=zW[e])!==null&&i!==void 0?i:n()}}const vp=BW(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),EM=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let s=0;s<r;s++)i+=t(nc(0,r-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function AM(t){return!!(typeof t=="function"&&vp()||!t||typeof t=="string"&&(t in E0||vp())||oE(t)||Array.isArray(t)&&t.every(AM))}const Su=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,E0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Su([0,.65,.55,1]),circOut:Su([.55,0,1,.45]),backIn:Su([.31,.01,.66,-.59]),backOut:Su([.33,1.53,.69,.99])};function SM(t,e){if(t)return typeof t=="function"&&vp()?EM(t,e):oE(t)?Su(t):Array.isArray(t)?t.map(n=>SM(n,e)||E0.easeOut):E0[t]}const gi={x:!1,y:!1};function IM(){return gi.x||gi.y}function FW(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const s=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function xM(t,e){const n=FW(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function Ox(t){return e=>{e.pointerType==="touch"||IM()||t(e)}}function qW(t,e,n={}){const[i,r,s]=xM(t,n),a=Ox(o=>{const{target:l}=o,c=e(o);if(typeof c!="function"||!l)return;const h=Ox(d=>{c(d),l.removeEventListener("pointerleave",h)});l.addEventListener("pointerleave",h,r)});return i.forEach(o=>{o.addEventListener("pointerenter",a,r)}),s}const RM=(t,e)=>e?t===e?!0:RM(t,e.parentElement):!1,lE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,HW=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function GW(t){return HW.has(t.tagName)||t.tabIndex!==-1}const Iu=new WeakSet;function Mx(t){return e=>{e.key==="Enter"&&t(e)}}function __(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const $W=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=Mx(()=>{if(Iu.has(n))return;__(n,"down");const r=Mx(()=>{__(n,"up")}),s=()=>__(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function Lx(t){return lE(t)&&!IM()}function KW(t,e,n={}){const[i,r,s]=xM(t,n),a=o=>{const l=o.currentTarget;if(!Lx(o)||Iu.has(l))return;Iu.add(l);const c=e(o),h=(p,w)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!Lx(p)||!Iu.has(l))&&(Iu.delete(l),typeof c=="function"&&c(p,{success:w}))},d=p=>{h(p,n.useGlobalTarget||RM(l,p.target))},f=p=>{h(p,!1)};window.addEventListener("pointerup",d,r),window.addEventListener("pointercancel",f,r)};return i.forEach(o=>{!GW(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,r),o.addEventListener("focus",c=>$W(c,r),r)}),s}function QW(t){return t==="x"||t==="y"?gi[t]?null:(gi[t]=!0,()=>{gi[t]=!1}):gi.x||gi.y?null:(gi.x=gi.y=!0,()=>{gi.x=gi.y=!1})}const CM=new Set(["width","height","top","left","right","bottom",...Cc]);let dm;function WW(){dm=void 0}const Qi={now:()=>(dm===void 0&&Qi.set(jt.isProcessing||HQ.useManualTiming?jt.timestamp:performance.now()),dm),set:t=>{dm=t,queueMicrotask(WW)}};function cE(t,e){t.indexOf(e)===-1&&t.push(e)}function uE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class hE{constructor(){this.subscriptions=[]}add(e){return cE(this.subscriptions,e),()=>uE(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let s=0;s<r;s++){const a=this.subscriptions[s];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function PM(t,e){return e?t*(1e3/e):0}const Ux=30,YW=t=>!isNaN(parseFloat(t));class XW{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=Qi.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Qi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=YW(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new hE);const i=this.events[e].add(n);return e==="change"?()=>{i(),Ge.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Qi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Ux)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Ux);return PM(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Yh(t,e){return new XW(t,e)}function JW(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Yh(n))}function ZW(t,e){const n=Ug(t,e);let{transitionEnd:i={},transition:r={},...s}=n||{};s={...s,...i};for(const a in s){const o=hW(s[a]);JW(t,a,o)}}function eY(t){return!!(nn(t)&&t.add)}function A0(t,e){const n=t.getValue("willChange");if(eY(n))return n.add(e)}function NM(t){return t.props[oM]}const DM=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,tY=1e-7,nY=12;function iY(t,e,n,i,r){let s,a,o=0;do a=e+(n-e)/2,s=DM(a,i,r)-t,s>0?n=a:e=a;while(Math.abs(s)>tY&&++o<nY);return a}function Ld(t,e,n,i){if(t===e&&n===i)return Hn;const r=s=>iY(s,0,1,t,n);return s=>s===0||s===1?s:DM(r(s),e,i)}const kM=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,VM=t=>e=>1-t(1-e),OM=Ld(.33,1.53,.69,.99),dE=VM(OM),MM=kM(dE),LM=t=>(t*=2)<1?.5*dE(t):.5*(2-Math.pow(2,-10*(t-1))),fE=t=>1-Math.sin(Math.acos(t)),UM=VM(fE),jM=kM(fE),zM=t=>/^0[^.\s]+$/u.test(t);function rY(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||zM(t):!0}const rh=t=>Math.round(t*1e5)/1e5,mE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function sY(t){return t==null}const aY=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pE=(t,e)=>n=>!!(typeof n=="string"&&aY.test(n)&&n.startsWith(t)||e&&!sY(n)&&Object.prototype.hasOwnProperty.call(n,e)),BM=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,s,a,o]=i.match(mE);return{[t]:parseFloat(r),[e]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},oY=t=>Vr(0,255,t),v_={...Pc,transform:t=>Math.round(oY(t))},Da={test:pE("rgb","red"),parse:BM("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+v_.transform(t)+", "+v_.transform(e)+", "+v_.transform(n)+", "+rh(Wh.transform(i))+")"};function lY(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const S0={test:pE("#"),parse:lY,transform:Da.transform},rl={test:pE("hsl","hue"),parse:BM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Ki.transform(rh(e))+", "+Ki.transform(rh(n))+", "+rh(Wh.transform(i))+")"},Xt={test:t=>Da.test(t)||S0.test(t)||rl.test(t),parse:t=>Da.test(t)?Da.parse(t):rl.test(t)?rl.parse(t):S0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Da.transform(t):rl.transform(t)},cY=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function uY(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(mE))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(cY))===null||n===void 0?void 0:n.length)||0)>0}const FM="number",qM="color",hY="var",dY="var(",jx="${}",fY=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Xh(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let s=0;const o=e.replace(fY,l=>(Xt.test(l)?(i.color.push(s),r.push(qM),n.push(Xt.parse(l))):l.startsWith(dY)?(i.var.push(s),r.push(hY),n.push(l)):(i.number.push(s),r.push(FM),n.push(parseFloat(l))),++s,jx)).split(jx);return{values:n,split:o,indexes:i,types:r}}function HM(t){return Xh(t).values}function GM(t){const{split:e,types:n}=Xh(t),i=e.length;return r=>{let s="";for(let a=0;a<i;a++)if(s+=e[a],r[a]!==void 0){const o=n[a];o===FM?s+=rh(r[a]):o===qM?s+=Xt.transform(r[a]):s+=r[a]}return s}}const mY=t=>typeof t=="number"?0:t;function pY(t){const e=HM(t);return GM(t)(e.map(mY))}const Qs={test:uY,parse:HM,createTransformer:GM,getAnimatableNone:pY},gY=new Set(["brightness","contrast","saturate","opacity"]);function yY(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(mE)||[];if(!i)return t;const r=n.replace(i,"");let s=gY.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+r+")"}const _Y=/\b([a-z-]*)\(.*?\)/gu,I0={...Qs,getAnimatableNone:t=>{const e=t.match(_Y);return e?e.map(yY).join(" "):t}},vY={...ZT,color:Xt,backgroundColor:Xt,outlineColor:Xt,fill:Xt,stroke:Xt,borderColor:Xt,borderTopColor:Xt,borderRightColor:Xt,borderBottomColor:Xt,borderLeftColor:Xt,filter:I0,WebkitFilter:I0},gE=t=>vY[t];function $M(t,e){let n=gE(t);return n!==I0&&(n=Qs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const bY=new Set(["auto","none","0"]);function wY(t,e,n){let i=0,r;for(;i<t.length&&!r;){const s=t[i];typeof s=="string"&&!bY.has(s)&&Xh(s).values.length&&(r=t[i]),i++}if(r&&n)for(const s of e)t[s]=$M(n,r)}const zx=t=>t===Pc||t===re,Bx=(t,e)=>parseFloat(t.split(", ")[e]),Fx=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return Bx(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?Bx(s[1],t):0}},TY=new Set(["x","y","z"]),EY=Cc.filter(t=>!TY.has(t));function AY(t){const e=[];return EY.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const rc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Fx(4,13),y:Fx(5,14)};rc.translateX=rc.x;rc.translateY=rc.y;const Fa=new Set;let x0=!1,R0=!1;function KM(){if(R0){const t=Array.from(Fa).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=AY(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([s,a])=>{var o;(o=i.getValue(s))===null||o===void 0||o.set(a)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}R0=!1,x0=!1,Fa.forEach(t=>t.complete()),Fa.clear()}function QM(){Fa.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(R0=!0)})}function SY(){QM(),KM()}class yE{constructor(e,n,i,r,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Fa.add(this),x0||(x0=!0,Ge.read(QM),Ge.resolveKeyframes(KM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=r==null?void 0:r.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&n){const l=i.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),r&&a===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Fa.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Fa.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const WM=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),IY=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function xY(t){const e=IY.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function YM(t,e,n=1){const[i,r]=xY(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const a=s.trim();return WM(a)?parseFloat(a):a}return JT(r)?YM(r,e,n+1):r}const XM=t=>e=>e.test(t),RY={test:t=>t==="auto",parse:t=>t},JM=[Pc,re,Ki,ns,yW,gW,RY],qx=t=>JM.find(XM(t));class ZM extends yE{constructor(e,n,i,r,s){super(e,n,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),JT(c))){const h=YM(c,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!CM.has(i)||e.length!==2)return;const[r,s]=e,a=qx(r),o=qx(s);if(a!==o)if(zx(a)&&zx(o))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)rY(e[r])&&i.push(r);i.length&&wY(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=rc[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const s=n.getValue(i);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=rc[i](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const Hx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Qs.test(t)||t==="0")&&!t.startsWith("url("));function CY(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function PY(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=Hx(r,e),o=Hx(s,e);return!a||!o?!1:CY(t)||(n==="spring"||aE(n))&&i}const NY=t=>t!==null;function jg(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(NY),s=e&&n!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const DY=40;class eL{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Qi.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>DY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&SY(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Qi.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:c}=this.options;if(!c&&!PY(e,i,r,s))if(a)this.options.duration=0;else{l&&l(jg(e,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const et=(t,e,n)=>t+(e-t)*n;function b_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function kY({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,s=0,a=0;if(!e)r=s=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;r=b_(l,o,t+1/3),s=b_(l,o,t),a=b_(l,o,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:i}}function bp(t,e){return n=>n>0?e:t}const w_=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},VY=[S0,Da,rl],OY=t=>VY.find(e=>e.test(t));function Gx(t){const e=OY(t);if(!e)return!1;let n=e.parse(t);return e===rl&&(n=kY(n)),n}const $x=(t,e)=>{const n=Gx(t),i=Gx(e);if(!n||!i)return bp(t,e);const r={...n};return s=>(r.red=w_(n.red,i.red,s),r.green=w_(n.green,i.green,s),r.blue=w_(n.blue,i.blue,s),r.alpha=et(n.alpha,i.alpha,s),Da.transform(r))},MY=(t,e)=>n=>e(t(n)),Ud=(...t)=>t.reduce(MY),C0=new Set(["none","hidden"]);function LY(t,e){return C0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function UY(t,e){return n=>et(t,e,n)}function _E(t){return typeof t=="number"?UY:typeof t=="string"?JT(t)?bp:Xt.test(t)?$x:BY:Array.isArray(t)?tL:typeof t=="object"?Xt.test(t)?$x:jY:bp}function tL(t,e){const n=[...t],i=n.length,r=t.map((s,a)=>_E(s)(s,e[a]));return s=>{for(let a=0;a<i;a++)n[a]=r[a](s);return n}}function jY(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=_E(t[r])(t[r],e[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}}function zY(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][r[a]],l=(n=t.values[o])!==null&&n!==void 0?n:0;i[s]=l,r[a]++}return i}const BY=(t,e)=>{const n=Qs.createTransformer(e),i=Xh(t),r=Xh(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?C0.has(t)&&!r.values.length||C0.has(e)&&!i.values.length?LY(t,e):Ud(tL(zY(i,r),r.values),n):bp(t,e)};function nL(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?et(t,e,n):_E(t)(t,e)}const FY=5;function iL(t,e,n){const i=Math.max(e-FY,0);return PM(n-t(i),e-i)}const at={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},T_=.001;function qY({duration:t=at.duration,bounce:e=at.bounce,velocity:n=at.velocity,mass:i=at.mass}){let r,s,a=1-e;a=Vr(at.minDamping,at.maxDamping,a),t=Vr(at.minDuration,at.maxDuration,wr(t)),a<1?(r=c=>{const h=c*a,d=h*t,f=h-n,p=P0(c,a),w=Math.exp(-d);return T_-f/p*w},s=c=>{const d=c*a*t,f=d*n+n,p=Math.pow(a,2)*Math.pow(c,2)*t,w=Math.exp(-d),E=P0(Math.pow(c,2),a);return(-r(c)+T_>0?-1:1)*((f-p)*w)/E}):(r=c=>{const h=Math.exp(-c*t),d=(c-n)*t+1;return-T_+h*d},s=c=>{const h=Math.exp(-c*t),d=(n-c)*(t*t);return h*d});const o=5/t,l=GY(r,s,o);if(t=br(t),isNaN(l))return{stiffness:at.stiffness,damping:at.damping,duration:t};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:a*2*Math.sqrt(i*c),duration:t}}}const HY=12;function GY(t,e,n){let i=n;for(let r=1;r<HY;r++)i=i-t(i)/e(i);return i}function P0(t,e){return t*Math.sqrt(1-e*e)}const $Y=["duration","bounce"],KY=["stiffness","damping","mass"];function Kx(t,e){return e.some(n=>t[n]!==void 0)}function QY(t){let e={velocity:at.velocity,stiffness:at.stiffness,damping:at.damping,mass:at.mass,isResolvedFromDuration:!1,...t};if(!Kx(t,KY)&&Kx(t,$Y))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,s=2*Vr(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:at.mass,stiffness:r,damping:s}}else{const n=qY(t);e={...e,...n,mass:at.mass},e.isResolvedFromDuration=!0}return e}function rL(t=at.visualDuration,e=at.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:h,duration:d,velocity:f,isResolvedFromDuration:p}=QY({...n,velocity:-wr(n.velocity||0)}),w=f||0,E=c/(2*Math.sqrt(l*h)),A=a-s,v=wr(Math.sqrt(l/h)),_=Math.abs(A)<5;i||(i=_?at.restSpeed.granular:at.restSpeed.default),r||(r=_?at.restDelta.granular:at.restDelta.default);let b;if(E<1){const D=P0(v,E);b=V=>{const S=Math.exp(-E*v*V);return a-S*((w+E*v*A)/D*Math.sin(D*V)+A*Math.cos(D*V))}}else if(E===1)b=D=>a-Math.exp(-v*D)*(A+(w+v*A)*D);else{const D=v*Math.sqrt(E*E-1);b=V=>{const S=Math.exp(-E*v*V),T=Math.min(D*V,300);return a-S*((w+E*v*A)*Math.sinh(T)+D*A*Math.cosh(T))/D}}const I={calculatedDuration:p&&d||null,next:D=>{const V=b(D);if(p)o.done=D>=d;else{let S=0;E<1&&(S=D===0?br(w):iL(b,D,V));const T=Math.abs(S)<=i,C=Math.abs(a-V)<=r;o.done=T&&C}return o.value=o.done?a:V,o},toString:()=>{const D=Math.min(TM(I),T0),V=EM(S=>I.next(D*S).value,D,30);return D+"ms "+V}};return I}function Qx({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:h}){const d=t[0],f={done:!1,value:d},p=T=>o!==void 0&&T<o||l!==void 0&&T>l,w=T=>o===void 0?l:l===void 0||Math.abs(o-T)<Math.abs(l-T)?o:l;let E=n*e;const A=d+E,v=a===void 0?A:a(A);v!==A&&(E=v-d);const _=T=>-E*Math.exp(-T/i),b=T=>v+_(T),I=T=>{const C=_(T),N=b(T);f.done=Math.abs(C)<=c,f.value=f.done?v:N};let D,V;const S=T=>{p(f.value)&&(D=T,V=rL({keyframes:[f.value,w(f.value)],velocity:iL(b,T,f.value),damping:r,stiffness:s,restDelta:c,restSpeed:h}))};return S(0),{calculatedDuration:null,next:T=>{let C=!1;return!V&&D===void 0&&(C=!0,I(T),S(T)),D!==void 0&&T>=D?V.next(T-D):(!C&&I(T),f)}}}const WY=Ld(.42,0,1,1),YY=Ld(0,0,.58,1),sL=Ld(.42,0,.58,1),XY=t=>Array.isArray(t)&&typeof t[0]!="number",JY={linear:Hn,easeIn:WY,easeInOut:sL,easeOut:YY,circIn:fE,circInOut:jM,circOut:UM,backIn:dE,backInOut:MM,backOut:OM,anticipate:LM},Wx=t=>{if(oE(t)){nM(t.length===4);const[e,n,i,r]=t;return Ld(e,n,i,r)}else if(typeof t=="string")return JY[t];return t};function ZY(t,e,n){const i=[],r=n||nL,s=t.length-1;for(let a=0;a<s;a++){let o=r(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Hn:e;o=Ud(l,o)}i.push(o)}return i}function eX(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const s=t.length;if(nM(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=ZY(e,i,r),l=o.length,c=h=>{if(a&&h<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(h<t[d+1]);d++);const f=nc(t[d],t[d+1],h);return o[d](f)};return n?h=>c(Vr(t[0],t[s-1],h)):c}function tX(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=nc(0,e,i);t.push(et(n,1,r))}}function nX(t){const e=[0];return tX(e,t.length-1),e}function iX(t,e){return t.map(n=>n*e)}function rX(t,e){return t.map(()=>e||sL).splice(0,t.length-1)}function wp({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=XY(i)?i.map(Wx):Wx(i),s={done:!1,value:e[0]},a=iX(n&&n.length===e.length?n:nX(e),t),o=eX(a,e,{ease:Array.isArray(r)?r:rX(e,r)});return{calculatedDuration:t,next:l=>(s.value=o(l),s.done=l>=t,s)}}const sX=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ge.update(e,!0),stop:()=>Ks(e),now:()=>jt.isProcessing?jt.timestamp:Qi.now()}},aX={decay:Qx,inertia:Qx,tween:wp,keyframes:wp,spring:rL},oX=t=>t/100;class vE extends eL{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:i,element:r,keyframes:s}=this.options,a=(r==null?void 0:r.KeyframeResolver)||yE,o=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new a(s,o,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:a=0}=this.options,o=aE(n)?n:aX[n]||wp;let l,c;o!==wp&&typeof e[0]!="number"&&(l=Ud(oX,nL(e[0],e[1])),e=[0,100]);const h=o({...this.options,keyframes:e});s==="mirror"&&(c=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=TM(h));const{calculatedDuration:d}=h,f=d+r,p=f*(i+1)-r;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:c,totalDuration:h,resolvedDuration:d}=i;if(this.startTime===null)return s.next(0);const{delay:f,repeat:p,repeatType:w,repeatDelay:E,onUpdate:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-f*(this.speed>=0?1:-1),_=this.speed>=0?v<0:v>h;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let b=this.currentTime,I=s;if(p){const T=Math.min(this.currentTime,h)/d;let C=Math.floor(T),N=T%1;!N&&T>=1&&(N=1),N===1&&C--,C=Math.min(C,p+1),!!(C%2)&&(w==="reverse"?(N=1-N,E&&(N-=E/d)):w==="mirror"&&(I=a)),b=Vr(0,1,N)*d}const D=_?{done:!1,value:l[0]}:I.next(b);o&&(D.value=o(D.value));let{done:V}=D;!_&&c!==null&&(V=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return S&&r!==void 0&&(D.value=jg(l,this.options,r)),A&&A(D.value),S&&this.finish(),D}get duration(){const{resolved:e}=this;return e?wr(e.calculatedDuration):0}get time(){return wr(this.currentTime)}set time(e){e=br(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=wr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=sX,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const lX=new Set(["opacity","clipPath","filter","transform"]);function cX(t,e,n,{delay:i=0,duration:r=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const h=SM(o,r);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:i,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const uX=GT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Tp=10,hX=2e4;function dX(t){return aE(t.type)||t.type==="spring"||!AM(t.ease)}function fX(t,e){const n=new vE({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let s=0;for(;!i.done&&s<hX;)i=n.sample(s),r.push(i.value),s+=Tp;return{times:void 0,keyframes:r,duration:s-Tp,ease:"linear"}}const aL={anticipate:LM,backInOut:MM,circInOut:jM};function mX(t){return t in aL}class Yx extends eL{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new ZM(s,(a,o)=>this.onKeyframesResolved(a,o),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:s,type:a,motionValue:o,name:l,startTime:c}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&vp()&&mX(s)&&(s=aL[s]),dX(this.options)){const{onComplete:d,onUpdate:f,motionValue:p,element:w,...E}=this.options,A=fX(e,E);e=A.keyframes,e.length===1&&(e[1]=e[0]),i=A.duration,r=A.times,s=A.ease,a="keyframes"}const h=cX(o.owner.current,l,e,{...this.options,duration:i,times:r,ease:s});return h.startTime=c??this.calcStartTime(),this.pendingTimeline?(Vx(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:d}=this.options;o.set(jg(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:i,times:r,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return wr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return wr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=br(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Hn;const{animation:i}=n;Vx(i,e)}return Hn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:s,ease:a,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:d,element:f,...p}=this.options,w=new vE({...p,keyframes:i,duration:r,type:s,ease:a,times:o,isGenerator:!0}),E=br(this.time);c.setWithVelocity(w.sample(E-Tp).value,w.sample(E).value,Tp)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:s,damping:a,type:o}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return uX()&&i&&lX.has(i)&&!l&&!c&&!r&&s!=="mirror"&&a!==0&&o!=="inertia"}}const pX={type:"spring",stiffness:500,damping:25,restSpeed:10},gX=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),yX={type:"keyframes",duration:.8},_X={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},vX=(t,{keyframes:e})=>e.length>2?yX:To.has(t)?t.startsWith("scale")?gX(e[1]):pX:_X;function bX({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const bE=(t,e,n,i={},r,s)=>a=>{const o=sE(i,t)||{},l=o.delay||i.delay||0;let{elapsed:c=0}=i;c=c-br(l);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:f=>{e.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:s?void 0:r};bX(o)||(h={...h,...vX(t,h)}),h.duration&&(h.duration=br(h.duration)),h.repeatDelay&&(h.repeatDelay=br(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const f=jg(h.keyframes,o);if(f!==void 0)return Ge.update(()=>{h.onUpdate(f),h.onComplete()}),new jW([])}return!s&&Yx.supports(h)?new Yx(h):new vE(h)};function wX({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function oL(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var s;let{transition:a=t.getDefaultTransition(),transitionEnd:o,...l}=e;i&&(a=i);const c=[],h=r&&t.animationState&&t.animationState.getState()[r];for(const d in l){const f=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),p=l[d];if(p===void 0||h&&wX(h,d))continue;const w={delay:n,...sE(a||{},d)};let E=!1;if(window.MotionHandoffAnimation){const v=NM(t);if(v){const _=window.MotionHandoffAnimation(v,d,Ge);_!==null&&(w.startTime=_,E=!0)}}A0(t,d),f.start(bE(d,f,p,t.shouldReduceMotion&&CM.has(d)?{type:!1}:w,t,E));const A=f.animation;A&&c.push(A)}return o&&Promise.all(c).then(()=>{Ge.update(()=>{o&&ZW(t,o)})}),c}function N0(t,e,n={}){var i;const r=Ug(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(oL(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:f}=s;return TX(t,e,h+c,d,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,h]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>h())}else return Promise.all([a(),o(n.delay)])}function TX(t,e,n=0,i=0,r=1,s){const a=[],o=(t.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>o-c*i;return Array.from(t.variantChildren).sort(EX).forEach((c,h)=>{c.notify("AnimationStart",e),a.push(N0(c,e,{...s,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(a)}function EX(t,e){return t.sortNodePosition(e)}function AX(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>N0(t,s,n));i=Promise.all(r)}else if(typeof e=="string")i=N0(t,e,n);else{const r=typeof e=="function"?Ug(t,e,n.custom):e;i=Promise.all(oL(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const SX=KT.length;function lL(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?lL(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<SX;n++){const i=KT[n],r=t.props[i];(Qh(r)||r===!1)&&(e[i]=r)}return e}const IX=[...$T].reverse(),xX=$T.length;function RX(t){return e=>Promise.all(e.map(({animation:n,options:i})=>AX(t,n,i)))}function CX(t){let e=RX(t),n=Xx(),i=!0;const r=l=>(c,h)=>{var d;const f=Ug(t,h,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:p,transitionEnd:w,...E}=f;c={...c,...E,...w}}return c};function s(l){e=l(t)}function a(l){const{props:c}=t,h=lL(t.parent)||{},d=[],f=new Set;let p={},w=1/0;for(let A=0;A<xX;A++){const v=IX[A],_=n[v],b=c[v]!==void 0?c[v]:h[v],I=Qh(b),D=v===l?_.isActive:null;D===!1&&(w=A);let V=b===h[v]&&b!==c[v]&&I;if(V&&i&&t.manuallyAnimateOnMount&&(V=!1),_.protectedKeys={...p},!_.isActive&&D===null||!b&&!_.prevProp||Mg(b)||typeof b=="boolean")continue;const S=PX(_.prevProp,b);let T=S||v===l&&_.isActive&&!V&&I||A>w&&I,C=!1;const N=Array.isArray(b)?b:[b];let k=N.reduce(r(v),{});D===!1&&(k={});const{prevResolvedValues:O={}}=_,P={...O,...k},H=Y=>{T=!0,f.has(Y)&&(C=!0,f.delete(Y)),_.needsAnimating[Y]=!0;const J=t.getValue(Y);J&&(J.liveStyle=!1)};for(const Y in P){const J=k[Y],ne=O[Y];if(p.hasOwnProperty(Y))continue;let Q=!1;w0(J)&&w0(ne)?Q=!wM(J,ne):Q=J!==ne,Q?J!=null?H(Y):f.add(Y):J!==void 0&&f.has(Y)?H(Y):_.protectedKeys[Y]=!0}_.prevProp=b,_.prevResolvedValues=k,_.isActive&&(p={...p,...k}),i&&t.blockInitialAnimation&&(T=!1),T&&(!(V&&S)||C)&&d.push(...N.map(Y=>({animation:Y,options:{type:v}})))}if(f.size){const A={};f.forEach(v=>{const _=t.getBaseTarget(v),b=t.getValue(v);b&&(b.liveStyle=!0),A[v]=_??null}),d.push({animation:A})}let E=!!d.length;return i&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(E=!1),i=!1,E?e(d):Promise.resolve()}function o(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),n[l].isActive=c;const d=a(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Xx(),i=!0}}}function PX(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!wM(e,t):!1}function fa(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Xx(){return{animate:fa(!0),whileInView:fa(),whileHover:fa(),whileTap:fa(),whileDrag:fa(),whileFocus:fa(),exit:fa()}}class sa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class NX extends sa{constructor(e){super(e),e.animationState||(e.animationState=CX(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Mg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let DX=0;class kX extends sa{constructor(){super(...arguments),this.id=DX++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const VX={animation:{Feature:NX},exit:{Feature:kX}};function Jh(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function jd(t){return{point:{x:t.pageX,y:t.pageY}}}const OX=t=>e=>lE(e)&&t(e,jd(e));function sh(t,e,n,i){return Jh(t,e,OX(n),i)}const Jx=(t,e)=>Math.abs(t-e);function MX(t,e){const n=Jx(t.x,e.x),i=Jx(t.y,e.y);return Math.sqrt(n**2+i**2)}class cL{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=A_(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=MX(d.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:w}=d,{timestamp:E}=jt;this.history.push({...w,timestamp:E});const{onStart:A,onMove:v}=this.handlers;f||(A&&A(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=E_(f,this.transformPagePoint),Ge.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:p,onSessionEnd:w,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=A_(d.type==="pointercancel"?this.lastMoveEventInfo:E_(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,A),w&&w(d,A)},!lE(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=jd(e),o=E_(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=jt;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,A_(o,this.history)),this.removeListeners=Ud(sh(this.contextWindow,"pointermove",this.handlePointerMove),sh(this.contextWindow,"pointerup",this.handlePointerUp),sh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ks(this.updatePoint)}}function E_(t,e){return e?{point:e(t.point)}:t}function Zx(t,e){return{x:t.x-e.x,y:t.y-e.y}}function A_({point:t},e){return{point:t,delta:Zx(t,uL(e)),offset:Zx(t,LX(e)),velocity:UX(e,.1)}}function LX(t){return t[0]}function uL(t){return t[t.length-1]}function UX(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=uL(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>br(e)));)n--;if(!i)return{x:0,y:0};const s=wr(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const a={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const hL=1e-4,jX=1-hL,zX=1+hL,dL=.01,BX=0-dL,FX=0+dL;function Qn(t){return t.max-t.min}function qX(t,e,n){return Math.abs(t-e)<=n}function eR(t,e,n,i=.5){t.origin=i,t.originPoint=et(e.min,e.max,t.origin),t.scale=Qn(n)/Qn(e),t.translate=et(n.min,n.max,t.origin)-t.originPoint,(t.scale>=jX&&t.scale<=zX||isNaN(t.scale))&&(t.scale=1),(t.translate>=BX&&t.translate<=FX||isNaN(t.translate))&&(t.translate=0)}function ah(t,e,n,i){eR(t.x,e.x,n.x,i?i.originX:void 0),eR(t.y,e.y,n.y,i?i.originY:void 0)}function tR(t,e,n){t.min=n.min+e.min,t.max=t.min+Qn(e)}function HX(t,e,n){tR(t.x,e.x,n.x),tR(t.y,e.y,n.y)}function nR(t,e,n){t.min=e.min-n.min,t.max=t.min+Qn(e)}function oh(t,e,n){nR(t.x,e.x,n.x),nR(t.y,e.y,n.y)}function GX(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?et(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?et(n,t,i.max):Math.min(t,n)),t}function iR(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function $X(t,{top:e,left:n,bottom:i,right:r}){return{x:iR(t.x,n,r),y:iR(t.y,e,i)}}function rR(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function KX(t,e){return{x:rR(t.x,e.x),y:rR(t.y,e.y)}}function QX(t,e){let n=.5;const i=Qn(t),r=Qn(e);return r>i?n=nc(e.min,e.max-i,t.min):i>r&&(n=nc(t.min,t.max-r,e.min)),Vr(0,1,n)}function WX(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const D0=.35;function YX(t=D0){return t===!1?t=0:t===!0&&(t=D0),{x:sR(t,"left","right"),y:sR(t,"top","bottom")}}function sR(t,e,n){return{min:aR(t,e),max:aR(t,n)}}function aR(t,e){return typeof t=="number"?t:t[e]||0}const oR=()=>({translate:0,scale:1,origin:0,originPoint:0}),sl=()=>({x:oR(),y:oR()}),lR=()=>({min:0,max:0}),dt=()=>({x:lR(),y:lR()});function Yn(t){return[t("x"),t("y")]}function fL({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function XX({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function JX(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function S_(t){return t===void 0||t===1}function k0({scale:t,scaleX:e,scaleY:n}){return!S_(t)||!S_(e)||!S_(n)}function wa(t){return k0(t)||mL(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function mL(t){return cR(t.x)||cR(t.y)}function cR(t){return t&&t!=="0%"}function Ep(t,e,n){const i=t-n,r=e*i;return n+r}function uR(t,e,n,i,r){return r!==void 0&&(t=Ep(t,r,i)),Ep(t,n,i)+e}function V0(t,e=0,n=1,i,r){t.min=uR(t.min,e,n,i,r),t.max=uR(t.max,e,n,i,r)}function pL(t,{x:e,y:n}){V0(t.x,e.translate,e.scale,e.originPoint),V0(t.y,n.translate,n.scale,n.originPoint)}const hR=.999999999999,dR=1.0000000000001;function ZX(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let s,a;for(let o=0;o<r;o++){s=n[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ol(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,pL(t,a)),i&&wa(s.latestValues)&&ol(t,s.latestValues))}e.x<dR&&e.x>hR&&(e.x=1),e.y<dR&&e.y>hR&&(e.y=1)}function al(t,e){t.min=t.min+e,t.max=t.max+e}function fR(t,e,n,i,r=.5){const s=et(t.min,t.max,r);V0(t,e,n,s,i)}function ol(t,e){fR(t.x,e.x,e.scaleX,e.scale,e.originX),fR(t.y,e.y,e.scaleY,e.scale,e.originY)}function gL(t,e){return fL(JX(t.getBoundingClientRect(),e))}function eJ(t,e,n){const i=gL(t,n),{scroll:r}=e;return r&&(al(i.x,r.offset.x),al(i.y,r.offset.y)),i}const yL=({current:t})=>t?t.ownerDocument.defaultView:null,tJ=new WeakMap;class nJ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=dt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(jd(h).point)},s=(h,d)=>{const{drag:f,dragPropagation:p,onDragStart:w}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=QW(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yn(A=>{let v=this.getAxisMotionValue(A).get()||0;if(Ki.test(v)){const{projection:_}=this.visualElement;if(_&&_.layout){const b=_.layout.layoutBox[A];b&&(v=Qn(b)*(parseFloat(v)/100))}}this.originPoint[A]=v}),w&&Ge.postRender(()=>w(h,d)),A0(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},a=(h,d)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:w,onDrag:E}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:A}=d;if(p&&this.currentDirection===null){this.currentDirection=iJ(A),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",d.point,A),this.updateAxis("y",d.point,A),this.visualElement.render(),E&&E(h,d)},o=(h,d)=>this.stop(h,d),l=()=>Yn(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new cL(e,{onSessionStart:r,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:yL(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Ge.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Df(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=GX(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&il(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=$X(r.layoutBox,n):this.constraints=!1,this.elastic=YX(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Yn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=WX(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!il(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=eJ(i,r.root,this.visualElement.getTransformPagePoint());let a=KX(r.layout.layoutBox,s);if(n){const o=n(XX(a));this.hasMutatedConstraints=!!o,o&&(a=fL(o))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Yn(h=>{if(!Df(h,n,this.currentDirection))return;let d=l&&l[h]||{};a&&(d={min:0,max:0});const f=r?200:1e6,p=r?40:1e7,w={type:"inertia",velocity:i?e[h]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,w)});return Promise.all(c).then(o)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return A0(this.visualElement,e),i.start(bE(e,i,0,n,this.visualElement,!1))}stopAnimation(){Yn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Yn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Yn(n=>{const{drag:i}=this.getProps();if(!Df(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:o}=r.layout.layoutBox[n];s.set(e[n]-et(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!il(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Yn(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();r[a]=QX({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Yn(a=>{if(!Df(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(et(l,c,r[a]))})}addListeners(){if(!this.visualElement.current)return;tJ.set(this.visualElement,this);const e=this.visualElement.current,n=sh(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();il(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Ge.read(i);const a=Jh(window,"resize",()=>this.scalePositionWithinConstraints()),o=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Yn(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:a=D0,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function Df(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function iJ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class rJ extends sa{constructor(e){super(e),this.removeGroupControls=Hn,this.removeListeners=Hn,this.controls=new nJ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Hn}unmount(){this.removeGroupControls(),this.removeListeners()}}const mR=t=>(e,n)=>{t&&Ge.postRender(()=>t(e,n))};class sJ extends sa{constructor(){super(...arguments),this.removePointerDownListener=Hn}onPointerDown(e){this.session=new cL(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yL(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:mR(e),onStart:mR(n),onMove:i,onEnd:(s,a)=>{delete this.session,r&&Ge.postRender(()=>r(s,a))}}}mount(){this.removePointerDownListener=sh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const fm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const hu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(re.test(t))t=parseFloat(t);else return t;const n=pR(t,e.target.x),i=pR(t,e.target.y);return`${n}% ${i}%`}},aJ={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=Qs.parse(t);if(r.length>5)return i;const s=Qs.createTransformer(t),a=typeof r[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;r[0+a]/=o,r[1+a]/=l;const c=et(o,l,.5);return typeof r[2+a]=="number"&&(r[2+a]/=c),typeof r[3+a]=="number"&&(r[3+a]/=c),s(r)}};class oJ extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;xW(lJ),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),fm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,a=i.projection;return a&&(a.isPresent=s,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Ge.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),WT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function _L(t){const[e,n]=eM(),i=R.useContext(BT);return g.jsx(oJ,{...t,layoutGroup:i,switchLayoutGroup:R.useContext(lM),isPresent:e,safeToRemove:n})}const lJ={borderRadius:{...hu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:hu,borderTopRightRadius:hu,borderBottomLeftRadius:hu,borderBottomRightRadius:hu,boxShadow:aJ};function cJ(t,e,n){const i=nn(t)?t:Yh(t);return i.start(bE("",i,e,n)),i.animation}function uJ(t){return t instanceof SVGElement&&t.tagName!=="svg"}const hJ=(t,e)=>t.depth-e.depth;class dJ{constructor(){this.children=[],this.isDirty=!1}add(e){cE(this.children,e),this.isDirty=!0}remove(e){uE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(hJ),this.isDirty=!1,this.children.forEach(e)}}function fJ(t,e){const n=Qi.now(),i=({timestamp:r})=>{const s=r-n;s>=e&&(Ks(i),t(s-e))};return Ge.read(i,!0),()=>Ks(i)}const vL=["TopLeft","TopRight","BottomLeft","BottomRight"],mJ=vL.length,gR=t=>typeof t=="string"?parseFloat(t):t,yR=t=>typeof t=="number"||re.test(t);function pJ(t,e,n,i,r,s){r?(t.opacity=et(0,n.opacity!==void 0?n.opacity:1,gJ(i)),t.opacityExit=et(e.opacity!==void 0?e.opacity:1,0,yJ(i))):s&&(t.opacity=et(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<mJ;a++){const o=`border${vL[a]}Radius`;let l=_R(e,o),c=_R(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||yR(l)===yR(c)?(t[o]=Math.max(et(gR(l),gR(c),i),0),(Ki.test(c)||Ki.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||n.rotate)&&(t.rotate=et(e.rotate||0,n.rotate||0,i))}function _R(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const gJ=bL(0,.5,UM),yJ=bL(.5,.95,Hn);function bL(t,e,n){return i=>i<t?0:i>e?1:n(nc(t,e,i))}function vR(t,e){t.min=e.min,t.max=e.max}function Wn(t,e){vR(t.x,e.x),vR(t.y,e.y)}function bR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function wR(t,e,n,i,r){return t-=e,t=Ep(t,1/n,i),r!==void 0&&(t=Ep(t,1/r,i)),t}function _J(t,e=0,n=1,i=.5,r,s=t,a=t){if(Ki.test(e)&&(e=parseFloat(e),e=et(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=et(s.min,s.max,i);t===s&&(o-=e),t.min=wR(t.min,e,n,o,r),t.max=wR(t.max,e,n,o,r)}function TR(t,e,[n,i,r],s,a){_J(t,e[n],e[i],e[r],e.scale,s,a)}const vJ=["x","scaleX","originX"],bJ=["y","scaleY","originY"];function ER(t,e,n,i){TR(t.x,e,vJ,n?n.x:void 0,i?i.x:void 0),TR(t.y,e,bJ,n?n.y:void 0,i?i.y:void 0)}function AR(t){return t.translate===0&&t.scale===1}function wL(t){return AR(t.x)&&AR(t.y)}function SR(t,e){return t.min===e.min&&t.max===e.max}function wJ(t,e){return SR(t.x,e.x)&&SR(t.y,e.y)}function IR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function TL(t,e){return IR(t.x,e.x)&&IR(t.y,e.y)}function xR(t){return Qn(t.x)/Qn(t.y)}function RR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class TJ{constructor(){this.members=[]}add(e){cE(this.members,e),e.scheduleRender()}remove(e){if(uE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function EJ(t,e,n){let i="";const r=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((r||s||a)&&(i=`translate3d(${r}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:d,rotateY:f,skewX:p,skewY:w}=n;c&&(i=`perspective(${c}px) ${i}`),h&&(i+=`rotate(${h}deg) `),d&&(i+=`rotateX(${d}deg) `),f&&(i+=`rotateY(${f}deg) `),p&&(i+=`skewX(${p}deg) `),w&&(i+=`skewY(${w}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(i+=`scale(${o}, ${l})`),i||"none"}const Ta={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},xu=typeof window<"u"&&window.MotionDebug!==void 0,I_=["","X","Y","Z"],AJ={visibility:"hidden"},CR=1e3;let SJ=0;function x_(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function EL(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=NM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ge,!(r||s))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&EL(i)}function AL({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},o=e==null?void 0:e()){this.id=SJ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,xu&&(Ta.totalNodes=Ta.resolvedTargetDeltas=Ta.recalculatedProjection=0),this.nodes.forEach(RJ),this.nodes.forEach(kJ),this.nodes.forEach(VJ),this.nodes.forEach(CJ),xu&&window.MotionDebug.record(Ta)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new dJ)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new hE),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=uJ(a),this.instance=a;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=fJ(f,250),fm.hasAnimatedSinceResize&&(fm.hasAnimatedSinceResize=!1,this.nodes.forEach(NR))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||h.getDefaultTransition()||jJ,{onLayoutAnimationStart:A,onLayoutAnimationComplete:v}=h.getProps(),_=!this.targetLayout||!TL(this.targetLayout,w)||p,b=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||f&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,b);const I={...sE(E,"layout"),onPlay:A,onComplete:v};(h.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I)}else f||NR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ks(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(OJ),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&EL(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(PR);return}this.isUpdating||this.nodes.forEach(NJ),this.isUpdating=!1,this.nodes.forEach(DJ),this.nodes.forEach(IJ),this.nodes.forEach(xJ),this.clearAllSnapshots();const o=Qi.now();jt.delta=Vr(0,1e3/60,o-jt.timestamp),jt.timestamp=o,jt.isProcessing=!0,y_.update.process(jt),y_.preRender.process(jt),y_.render.process(jt),jt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,WT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(PJ),this.sharedNodes.forEach(MJ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ge.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ge.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!wL(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;a&&(o||wa(this.latestValues)||h)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),zJ(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return dt();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(BJ))){const{scroll:h}=this.root;h&&(al(l.x,h.offset.x),al(l.y,h.offset.y))}return l}removeElementScroll(a){var o;const l=dt();if(Wn(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:d,options:f}=h;h!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Wn(l,a),al(l.x,d.offset.x),al(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=dt();Wn(l,a);for(let c=0;c<this.path.length;c++){const h=this.path[c];!o&&h.options.layoutScroll&&h.scroll&&h!==h.root&&ol(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),wa(h.latestValues)&&ol(l,h.latestValues)}return wa(this.latestValues)&&ol(l,this.latestValues),l}removeTransform(a){const o=dt();Wn(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!wa(c.latestValues))continue;k0(c.latestValues)&&c.updateSnapshot();const h=dt(),d=c.measurePageBox();Wn(h,d),ER(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return wa(this.latestValues)&&ER(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==jt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=jt.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),oh(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Wn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=dt(),this.targetWithTransforms=dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),HX(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Wn(this.target,this.layout.layoutBox),pL(this.target,this.targetDelta)):Wn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),oh(this.relativeTargetOrigin,this.target,p.target),Wn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}xu&&Ta.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||k0(this.parent.latestValues)||mL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===jt.timestamp&&(c=!1),c)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;Wn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;ZX(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=dt());const{target:w}=o;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(bR(this.prevProjectionDelta.x,this.projectionDelta.x),bR(this.prevProjectionDelta.y,this.projectionDelta.y)),ah(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!RR(this.projectionDelta.x,this.prevProjectionDelta.x)||!RR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),xu&&Ta.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=sl(),this.projectionDelta=sl(),this.projectionDeltaWithTransform=sl()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},d=sl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=dt(),p=l?l.source:void 0,w=this.layout?this.layout.source:void 0,E=p!==w,A=this.getStack(),v=!A||A.members.length<=1,_=!!(E&&!v&&this.options.crossfade===!0&&!this.path.some(UJ));this.animationProgress=0;let b;this.mixTargetDelta=I=>{const D=I/1e3;DR(d.x,a.x,D),DR(d.y,a.y,D),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(oh(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),LJ(this.relativeTarget,this.relativeTargetOrigin,f,D),b&&wJ(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=dt()),Wn(b,this.relativeTarget)),E&&(this.animationValues=h,pJ(h,c,this.latestValues,D,_,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ks(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ge.update(()=>{fm.hasAnimatedSinceResize=!0,this.currentAnimation=cJ(0,CR,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(CR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:h}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&SL(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||dt();const d=Qn(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const f=Qn(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}Wn(o,l),ol(o,h),ah(this.projectionDeltaWithTransform,this.layoutCorrected,o,h)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new TJ),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&x_("z",a,c,this.animationValues);for(let h=0;h<I_.length;h++)x_(`rotate${I_[h]}`,a,c,this.animationValues),x_(`skew${I_[h]}`,a,c,this.animationValues);a.render();for(const h in c)a.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return AJ;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=hm(a==null?void 0:a.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const E={};return this.options.layoutId&&(E.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,E.pointerEvents=hm(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!wa(this.latestValues)&&(E.transform=h?h({},""):"none",this.hasProjected=!1),E}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=EJ(this.projectionDeltaWithTransform,this.treeScale,f),h&&(c.transform=h(f,c.transform));const{x:p,y:w}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${w.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const E in _p){if(f[E]===void 0)continue;const{correct:A,applyTo:v}=_p[E],_=c.transform==="none"?f[E]:A(f[E],d);if(v){const b=v.length;for(let I=0;I<b;I++)c[v[I]]=_}else c[E]=_}return this.options.layoutId&&(c.pointerEvents=d===this?hm(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(PR),this.root.sharedNodes.clear()}}}function IJ(t){t.updateLayout()}function xJ(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:s}=t.options,a=n.source!==t.layout.source;s==="size"?Yn(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],p=Qn(f);f.min=i[d].min,f.max=f.min+p}):SL(s,n.layoutBox,i)&&Yn(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],p=Qn(i[d]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const o=sl();ah(o,i,n.layoutBox);const l=sl();a?ah(l,t.applyTransform(r,!0),n.measuredBox):ah(l,i,n.layoutBox);const c=!wL(o);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const w=dt();oh(w,n.layoutBox,f.layoutBox);const E=dt();oh(E,i,p.layoutBox),TL(w,E)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=E,t.relativeTargetOrigin=w,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function RJ(t){xu&&Ta.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function CJ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function PJ(t){t.clearSnapshot()}function PR(t){t.clearMeasurements()}function NJ(t){t.isLayoutDirty=!1}function DJ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function NR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function kJ(t){t.resolveTargetDelta()}function VJ(t){t.calcProjection()}function OJ(t){t.resetSkewAndRotation()}function MJ(t){t.removeLeadSnapshot()}function DR(t,e,n){t.translate=et(e.translate,0,n),t.scale=et(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function kR(t,e,n,i){t.min=et(e.min,n.min,i),t.max=et(e.max,n.max,i)}function LJ(t,e,n,i){kR(t.x,e.x,n.x,i),kR(t.y,e.y,n.y,i)}function UJ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const jJ={duration:.45,ease:[.4,0,.1,1]},VR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),OR=VR("applewebkit/")&&!VR("chrome/")?Math.round:Hn;function MR(t){t.min=OR(t.min),t.max=OR(t.max)}function zJ(t){MR(t.x),MR(t.y)}function SL(t,e,n){return t==="position"||t==="preserve-aspect"&&!qX(xR(e),xR(n),.2)}function BJ(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const FJ=AL({attachResizeListener:(t,e)=>Jh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),R_={current:void 0},IL=AL({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!R_.current){const t=new FJ({});t.mount(window),t.setOptions({layoutScroll:!0}),R_.current=t}return R_.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),qJ={pan:{Feature:sJ},drag:{Feature:rJ,ProjectionNode:IL,MeasureLayout:_L}};function LR(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,s=i[r];s&&Ge.postRender(()=>s(e,jd(e)))}class HJ extends sa{mount(){const{current:e}=this.node;e&&(this.unmount=qW(e,n=>(LR(this.node,n,"Start"),i=>LR(this.node,i,"End"))))}unmount(){}}class GJ extends sa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ud(Jh(this.node.current,"focus",()=>this.onFocus()),Jh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function UR(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),s=i[r];s&&Ge.postRender(()=>s(e,jd(e)))}class $J extends sa{mount(){const{current:e}=this.node;e&&(this.unmount=KW(e,n=>(UR(this.node,n,"Start"),(i,{success:r})=>UR(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const O0=new WeakMap,C_=new WeakMap,KJ=t=>{const e=O0.get(t.target);e&&e(t)},QJ=t=>{t.forEach(KJ)};function WJ({root:t,...e}){const n=t||document;C_.has(n)||C_.set(n,{});const i=C_.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(QJ,{root:t,...e})),i[r]}function YJ(t,e,n){const i=WJ(e);return O0.set(t,n),i.observe(t),()=>{O0.delete(t),i.unobserve(t)}}const XJ={some:0,all:1};class JJ extends sa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:XJ[r]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=c?h:d;f&&f(l)};return YJ(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(ZJ(e,n))&&this.startObserver()}unmount(){}}function ZJ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const eZ={inView:{Feature:JJ},tap:{Feature:$J},focus:{Feature:GJ},hover:{Feature:HJ}},tZ={layout:{ProjectionNode:IL,MeasureLayout:_L}},M0={current:null},xL={current:!1};function nZ(){if(xL.current=!0,!!HT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>M0.current=t.matches;t.addListener(e),e()}else M0.current=!1}const iZ=[...JM,Xt,Qs],rZ=t=>iZ.find(XM(t)),jR=new WeakMap;function sZ(t,e,n){for(const i in e){const r=e[i],s=n[i];if(nn(r))t.addValue(i,r);else if(nn(s))t.addValue(i,Yh(r,{owner:t}));else if(s!==r)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(i);t.addValue(i,Yh(a!==void 0?a:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const zR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class aZ{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=yE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Qi.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Ge.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:h}=a;this.onUpdate=h,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=Lg(n),this.isVariantNode=aM(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const w=f[p];l[p]!==void 0&&nn(w)&&w.set(l[p],!1)}}mount(e){this.current=e,jR.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),xL.current||nZ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:M0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){jR.delete(this.current),this.projection&&this.projection.unmount(),Ks(this.notifyUpdate),Ks(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=To.has(e),r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ge.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ic){const n=ic[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<zR.length;i++){const r=zR[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,a=e[s];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=sZ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Yh(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(WM(r)||zM(r))?r=parseFloat(r):!rZ(r)&&Qs.test(n)&&(r=$M(e,n)),this.setBaseTarget(e,nn(r)?r.get():r)),nn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const a=XT(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(r=a[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!nn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new hE),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class RL extends aZ{constructor(){super(...arguments),this.KeyframeResolver=ZM}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;nn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function oZ(t){return window.getComputedStyle(t)}class lZ extends RL{constructor(){super(...arguments),this.type="html",this.renderInstance=pM}readValueFromInstance(e,n){if(To.has(n)){const i=gE(n);return i&&i.default||0}else{const i=oZ(e),r=(dM(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return gL(e,n)}build(e,n,i){eE(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return rE(e,n,i)}}class cZ extends RL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=dt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(To.has(n)){const i=gE(n);return i&&i.default||0}return n=gM.has(n)?n:QT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return vM(e,n,i)}build(e,n,i){tE(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){yM(e,n,i,r)}mount(e){this.isSVGTag=iE(e.tagName),super.mount(e)}}const uZ=(t,e)=>YT(t)?new cZ(e):new lZ(e,{allowProjection:t!==R.Fragment}),hZ=MW({...VX,...eZ,...qJ,...tZ},uZ),dZ=XQ(hZ),fZ=()=>{const{notification:t,hideNotification:e}=ZO(),n={success:g.jsx(Q3,{className:"h-6 w-6 text-green-500"}),info:g.jsx(f2,{className:"h-6 w-6 text-blue-500"}),warning:g.jsx(Cj,{className:"h-6 w-6 text-amber-500"}),error:g.jsx(Y3,{className:"h-6 w-6 text-red-500"})},i={success:"bg-white border-green-100",info:"bg-white border-blue-100",warning:"bg-white border-amber-100",error:"bg-white border-red-100"};return g.jsx(qQ,{children:t.isVisible&&g.jsxs(dZ.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{type:"spring",stiffness:300,damping:30},className:`fixed top-6 left-0 right-0 z-[100] mx-auto flex w-[90%] max-w-md items-center gap-3 rounded-xl border p-4 shadow-xl ${i[t.type]}`,children:[g.jsx("div",{className:"flex-shrink-0",children:n[t.type]}),g.jsx("div",{className:"flex-1",children:g.jsx("p",{className:"font-medium text-gray-900",children:t.message})}),g.jsx("button",{onClick:e,className:"flex-shrink-0 rounded-full p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-500",children:g.jsx(fd,{className:"h-4 w-4"})})]})})},CL=R.createContext(void 0),uee=()=>{const t=R.useContext(CL);if(t===void 0)throw new Error("useOrder must be used within an OrderProvider");return t},mZ=({children:t})=>{const[e,n]=R.useState(null),[i,r]=R.useState([]),[s,a]=R.useState(!0),{currentUser:o}=wo(),{showNotification:l}=ZO(),c=R.useRef(void 0);R.useEffect(()=>{let f;return o?(a(!0),f=Ze.collection("orders").where("userId","==",o.uid).onSnapshot(E=>{const A=E.docs.map(_=>{var b;return{id:_.id,..._.data(),timestamp:((b=_.data().timestamp)==null?void 0:b.toDate())||new Date}});E.docChanges().forEach(_=>{if(_.type==="modified"){const b=_.doc.data();b.status==="cancelled"&&l(`Your order ${b.orderNumber} has been cancelled. Reason: ${b.cancellationReason||"No reason provided"}`,"error")}}),A.sort((_,b)=>b.timestamp.getTime()-_.timestamp.getTime()),r(A);const v=A.find(_=>_.status!=="completed"&&_.status!=="cancelled")||null;n(v),a(!1)},E=>{console.error("Error listening to order history:",E),a(!1)})):(r([]),n(null),a(!1)),()=>{f&&f()}},[o,l]),R.useEffect(()=>{const f=e==null?void 0:e.status,p=c.current;if(f==="ready"&&p!=="ready"){const w=e==null?void 0:e.orderItems.map(E=>E.productName).join(", ");l(`Your order for ${w} is ready!`,"success")}c.current=f},[e==null?void 0:e.status,e==null?void 0:e.orderItems,l]);const d={activeOrder:e,setActiveOrder:n,orderHistory:i,addOrderToHistory:async f=>{try{const p=await Ze.collection("orders").add({...f,timestamp:en.firestore.FieldValue.serverTimestamp()}),w={...f,id:p.id,timestamp:new Date};r(E=>[w,...E]),n(w)}catch(p){console.error("Error adding order to Firestore:",p)}},isHistoryLoading:s};return g.jsx(CL.Provider,{value:d,children:t})},pZ=({children:t,className:e="",variant:n="solid",color:i="primary",size:r="md"})=>{const s="inline-flex items-center gap-1.5 rounded-full font-medium",a={xs:"px-2 py-0.5 text-xs",sm:"px-2.5 py-1 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-1.5 text-base"},o={primary:"bg-primary-100 text-primary-800",success:"bg-green-100 text-green-800",warning:"bg-amber-100 text-amber-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800",gray:"bg-gray-100 text-gray-800"},l={primary:"border-2 border-primary-300 text-primary-700 bg-transparent",success:"border-2 border-green-300 text-green-700 bg-transparent",warning:"border-2 border-amber-300 text-amber-700 bg-transparent",error:"border-2 border-red-300 text-red-700 bg-transparent",info:"border-2 border-blue-300 text-blue-700 bg-transparent",gray:"border-2 border-gray-300 text-gray-700 bg-transparent"},c={primary:"bg-primary-500",success:"bg-green-500",warning:"bg-amber-500",error:"bg-red-500",info:"bg-blue-500",gray:"bg-gray-500"},h=n==="outline"?l[i]:o[i];return g.jsxs("span",{className:`${s} ${a[r]} ${h} ${e}`,children:[n==="dot"&&g.jsx("span",{className:`h-2 w-2 rounded-full ${c[i]} animate-pulse`}),t]})},PL=()=>{const[t,e]=R.useState([]),[n,i]=R.useState(!0),[r,s]=R.useState(null);return R.useEffect(()=>{(async()=>{try{i(!0);const l=await Ze.collection("ingredients").where("isTopping","==",!0).get(),c=[];l.forEach(h=>{const d=h.data();d.stock>0&&d.toppingPrice!==void 0&&d.portionSize!==void 0&&c.push({id:h.id,name:d.name,price:d.toppingPrice,stock:d.stock,portionSize:d.portionSize})}),c.sort((h,d)=>h.name.localeCompare(d.name)),e(c),s(null)}catch(o){console.error("Error fetching toppings:",o),s("Failed to load toppings"),e([{id:"pearls",name:"Pearls",price:10,stock:3e3,portionSize:30},{id:"pudding",name:"Pudding",price:15,stock:2e3,portionSize:40},{id:"grass-jelly",name:"Grass Jelly",price:15,stock:2500,portionSize:35}])}finally{i(!1)}})()},[]),{toppings:t,isLoading:n,error:r}},gZ=({cartItems:t,isOpen:e,onClose:n,onUpdateQuantity:i,onRemoveItem:r,onCheckout:s,onEditItem:a,selectedItemIds:o,onToggleItemSelection:l,onSelectAll:c,onDeselectAll:h})=>{const d=pc(),f=t.reduce((I,D)=>I+D.quantity,0),{toppings:p}=PL(),w=t.length>0&&o.length===t.length,E=o.length>0&&o.length<t.length,A=I=>I?I.reduce((D,V)=>{const S=p.find(T=>T.name===V);return D+((S==null?void 0:S.price)||0)},0):0,v=t.filter(I=>o.includes(I.id)).reduce((I,D)=>{var S;const V=A((S=D.customizations)==null?void 0:S.toppings);return I+(D.selectedSize.price+V)*D.quantity},0),_=()=>{n(),d("/menu")},b=()=>{w?h():c()};return g.jsxs(g.Fragment,{children:[g.jsx("div",{onClick:n,className:`fixed inset-0 z-40 bg-black/50 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"}`,"aria-hidden":"true"}),g.jsx("aside",{className:`fixed top-0 right-0 z-50 h-full w-full transform bg-white shadow-2xl transition-transform duration-300 ease-in-out sm:w-96 md:w-[450px] ${e?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"cart-heading",children:g.jsxs("div",{className:"flex h-full flex-col",children:[g.jsxs("header",{className:"flex items-center justify-between border-b border-gray-200 p-6",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("h2",{id:"cart-heading",className:"font-display text-xl font-bold text-coffee-900",children:"Your Order"}),f>0&&g.jsxs(pZ,{children:[f," ",f===1?"item":"items"]})]}),g.jsx("button",{onClick:n,className:"rounded-md p-2 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-800","aria-label":"Close cart",children:g.jsx(fd,{className:"h-6 w-6"})})]}),t.length>0&&g.jsx("div",{className:"border-b border-gray-200 px-6 py-3 bg-gray-50/50 backdrop-blur-sm sticky top-0 z-10",children:g.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group select-none",children:[g.jsxs("div",{className:"relative flex items-center justify-center h-5 w-5",children:[g.jsx("input",{type:"checkbox",checked:w,onChange:b,className:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border-2 border-gray-300 bg-white transition-all checked:border-coffee-600 checked:bg-coffee-600 hover:border-coffee-500 focus:ring-2 focus:ring-coffee-500/20"}),g.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 peer-checked:opacity-100 transition-opacity duration-200",children:E&&!w?g.jsx(Pv,{className:"h-3.5 w-3.5 text-white",strokeWidth:3}):g.jsx(nI,{className:"h-3.5 w-3.5 text-white",strokeWidth:3})})]}),g.jsx("span",{className:"text-sm font-semibold text-gray-700 group-hover:text-coffee-700 transition-colors",children:w?"Deselect All":"Select All"}),o.length>0&&g.jsxs("span",{className:"ml-auto text-xs font-medium text-coffee-600 bg-coffee-50 px-2 py-1 rounded-full",children:[o.length," selected"]})]})}),t.length===0?g.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-4 p-6 text-center",children:[g.jsx(kr,{className:"h-24 w-24 text-gray-300 opacity-50"}),g.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Your cart is empty"}),g.jsx("p",{className:"text-gray-500",children:"Looks like you haven't added anything yet."}),g.jsx("button",{onClick:_,className:"mt-4 rounded-full bg-coffee-600 px-6 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-coffee-700",children:"Start Ordering"})]}):g.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:g.jsx("ul",{className:"space-y-3",children:t.map(I=>{var k;const D=I.selectedSize.name==="Combo Meal",V=D?`${I.product.name} (${I.selectedSize.name})`:I.product.name,S=D&&I.product.comboImageUrl?I.product.comboImageUrl:I.product.imageUrl,T=A((k=I.customizations)==null?void 0:k.toppings),C=I.selectedSize.price+T,N=o.includes(I.id);return g.jsxs("li",{className:`relative flex gap-4 p-5 rounded-xl transition-all ${N?"bg-coffee-50 border-2 border-coffee-200":"bg-gray-50/50 border-2 border-transparent hover:border-gray-200"}`,children:[g.jsx("button",{onClick:()=>r(I.id),className:"absolute top-5 right-5 z-10 rounded-full p-2 text-gray-400 transition-all hover:bg-red-50 hover:text-red-600","aria-label":`Remove ${V} from cart`,children:g.jsx(xj,{className:"h-4 w-4"})}),g.jsxs("div",{className:"pt-1 relative flex items-center justify-center h-5 w-5",children:[g.jsx("input",{type:"checkbox",checked:N,onChange:()=>l(I.id),className:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border-2 border-gray-300 bg-white transition-all checked:border-coffee-600 checked:bg-coffee-600 hover:border-coffee-500 focus:ring-2 focus:ring-coffee-500/20"}),g.jsx(nI,{className:"absolute h-3.5 w-3.5 text-white opacity-0 peer-checked:opacity-100 transition-opacity duration-200 pointer-events-none",strokeWidth:3})]}),g.jsx("button",{onClick:()=>a(I),className:"h-20 w-20 flex-shrink-0 overflow-hidden rounded-lg border border-gray-100 shadow-sm hover:border-coffee-300 transition-colors cursor-pointer",children:g.jsx("img",{src:S,alt:V,className:"h-full w-full object-cover object-center"})}),g.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[g.jsxs("button",{onClick:()=>a(I),className:"text-left w-full hover:opacity-75 transition-opacity",children:[g.jsx("h4",{className:"font-bold text-gray-900 truncate text-base pr-8",children:V}),g.jsxs("div",{className:"mt-1.5 flex items-center justify-between",children:[g.jsx("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:I.selectedSize.name}),g.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["",I.selectedSize.price.toFixed(2)]})]})]}),I.customizations&&g.jsxs("div",{className:"mt-2 space-y-1.5",children:[(I.customizations.sugarLevel||I.customizations.iceLevel)&&g.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[I.customizations.sugarLevel&&g.jsxs("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:["Sugar: ",I.customizations.sugarLevel]}),I.customizations.iceLevel&&g.jsxs("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:["Ice: ",I.customizations.iceLevel]})]}),I.customizations.toppings&&I.customizations.toppings.length>0&&g.jsx("div",{className:"flex flex-col gap-1.5",children:I.customizations.toppings.map(O=>{const P=p.find(ie=>ie.name===O),H=(P==null?void 0:P.price)||0;return g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:O}),g.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["+",H.toFixed(2)]})]},O)})})]}),g.jsxs("div",{className:"mt-auto pt-3 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center rounded-full border border-gray-200 bg-white shadow-sm",children:[g.jsx("button",{onClick:()=>i(I.id,I.quantity-1),disabled:I.quantity===1,className:"flex h-8 w-8 items-center justify-center rounded-l-full text-gray-500 transition hover:bg-gray-50 hover:text-gray-700 disabled:cursor-not-allowed disabled:opacity-50","aria-label":`Decrease quantity of ${V}`,children:g.jsx(Pv,{className:"h-3.5 w-3.5"})}),g.jsx("span",{className:"w-8 text-center text-sm font-semibold text-gray-900","aria-live":"polite",children:I.quantity}),g.jsx("button",{onClick:()=>i(I.id,I.quantity+1),className:"flex h-8 w-8 items-center justify-center rounded-r-full text-gray-500 transition hover:bg-gray-50 hover:text-gray-700","aria-label":`Increase quantity of ${V}`,children:g.jsx(m2,{className:"h-3.5 w-3.5"})})]}),g.jsxs("p",{className:"font-bold text-lg text-gray-900",children:["",(C*I.quantity).toFixed(2)]})]})]})]},I.id)})})}),t.length>0&&g.jsxs("footer",{className:"mt-auto border-t border-gray-200 p-6 bg-gray-50/50",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("span",{className:"text-base font-medium text-gray-600",children:"Subtotal"}),g.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["",v.toFixed(2)]})]}),o.length<t.length&&g.jsx("p",{className:"mt-1 text-xs text-amber-600",children:o.length===0?"Please select items to checkout":`${t.length-o.length} item(s) not selected`}),g.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Taxes and service fee calculated at checkout."}),g.jsx("div",{className:"mt-6",children:g.jsxs("button",{onClick:s,disabled:o.length===0,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-coffee-600 to-coffee-700 px-6 py-3.5 text-base font-bold text-white shadow-lg shadow-coffee-600/20 transition-all hover:shadow-xl hover:scale-[1.02] active:scale-[0.98] focus:outline-none focus:ring-2 focus:ring-coffee-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-gray-400 disabled:opacity-50 disabled:shadow-none disabled:scale-100",children:["Proceed to Checkout",g.jsx(F3,{className:"h-5 w-5"})]})})]})]})})]})},lh={sugarLevels:[{value:"0%",label:"No Sugar",sugarAmount:0,sugarIngredientId:"brown-sugar-syrup"},{value:"25%",label:"25% Sweet",sugarAmount:5,sugarIngredientId:"brown-sugar-syrup"},{value:"50%",label:"50% Sweet",sugarAmount:10,sugarIngredientId:"brown-sugar-syrup"},{value:"75%",label:"75% Sweet",sugarAmount:15,sugarIngredientId:"brown-sugar-syrup"},{value:"100%",label:"Regular (100%)",sugarAmount:20,sugarIngredientId:"brown-sugar-syrup"}],iceLevels:[{value:"None",label:"No Ice",iceAmount:0,iceIngredientId:"ice-cubes"},{value:"Less",label:"Less Ice",iceAmount:50,iceIngredientId:"ice-cubes"},{value:"Normal",label:"Normal Ice",iceAmount:100,iceIngredientId:"ice-cubes"},{value:"Extra",label:"Extra Ice",iceAmount:150,iceIngredientId:"ice-cubes"}]},yZ=async()=>{try{const t=Ze.collection("settings").doc("customizationOptions");(await t.get()).exists?console.log(" Customization options already exist in Firestore"):(console.log("Seeding customization options to Firestore..."),await t.set(lh),console.log(" Customization options seeded successfully"))}catch(t){throw console.error(" Error seeding customization options:",t),t}},_Z=async()=>{try{const t=Ze.collection("settings").doc("customizationOptions"),e=await t.get();return e.exists?e.data():(await yZ(),(await t.get()).data())}catch(t){return console.error("Error fetching customization options:",t),lh}},vZ=()=>{const[t,e]=R.useState(lh),[n,i]=R.useState(!0),[r,s]=R.useState(null);return R.useEffect(()=>{(async()=>{try{i(!0);const o=await _Z();o&&o.sugarLevels&&o.iceLevels?(e(o),s(null)):e(lh)}catch(o){console.error("Error fetching customization options:",o),s("Failed to load customization options"),e(lh)}finally{i(!1)}})()},[]),{options:t,isLoading:n,error:r}},bZ=({product:t,selectedSize:e,isOpen:n,onClose:i,onConfirm:r,onBuyNow:s,initialCustomizations:a,initialQuantity:o=1})=>{const[l,c]=R.useState("100%"),[h,d]=R.useState("Normal"),[f,p]=R.useState("None"),[w,E]=R.useState(1),[A,v]=R.useState(e),{toppings:_,isLoading:b}=PL(),{options:I,isLoading:D}=vZ();ch.useEffect(()=>{if(n){if(a){c(a.sugarLevel||"100%"),d(a.iceLevel||"Normal");const H=a.toppings&&a.toppings.length>0?a.toppings[0]:"None";p(H)}else c("100%"),d("Normal"),p("None");E(o),v(e)}},[n,a,o,e]);const V=()=>{const H=["Coffee Based","Non-Coffee Based","Matcha Series","Refreshments"].includes(t.category),ie={toppings:f!=="None"?[f]:[]};return H&&(ie.sugarLevel=l,ie.iceLevel=h),ie},S=()=>{r(V(),w,k/w,A),i()},T=[{id:"none",name:"None",price:0},..._.map(H=>({id:H.id,name:H.name,price:H.price}))],C=T.find(H=>H.name===f),N=(C==null?void 0:C.price)||0,k=(A.price+N)*w,O=b||D,P=g.jsxs("button",{onClick:S,disabled:O,className:"w-full flex items-center justify-between rounded-xl bg-gradient-to-r from-coffee-600 to-coffee-700 px-6 py-3 text-white font-bold shadow-lg hover:shadow-xl hover:scale-[1.01] active:scale-[0.99] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[g.jsx("span",{children:"Add to Order"}),g.jsxs("span",{className:"text-lg tabular-nums",children:["",k.toFixed(2)]})]});return g.jsx(zT,{isOpen:n,onClose:i,hideHeader:!0,hideCloseButton:!0,footer:P,className:"sm:max-w-lg",children:g.jsxs("div",{children:[g.jsxs("div",{className:"-mx-6 -mt-6 mb-2",children:[g.jsxs("div",{className:"bg-[#F5F5F0] w-full h-96 flex items-center justify-center relative overflow-hidden",children:[g.jsx("button",{onClick:i,className:"absolute top-4 right-4 z-10 p-2 rounded-full bg-white/50 hover:bg-white/80 backdrop-blur-sm transition-colors text-gray-600 hover:text-gray-900",children:g.jsx(fd,{className:"h-5 w-5"})}),g.jsx("img",{src:t.imageUrl,alt:t.name,className:"h-full w-full object-cover object-center"})]}),g.jsxs("div",{className:"px-6 pt-4",children:[g.jsx("div",{className:"flex items-center justify-between mb-2",children:g.jsx("span",{className:"text-sm font-medium text-coffee-600 tracking-wide uppercase",children:t.category})}),g.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.name}),g.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:t.description})]})]}),O?g.jsx("div",{className:"flex items-center justify-center py-12",children:g.jsx(Qa,{className:"h-8 w-8 animate-spin text-coffee-600"})}):g.jsxs("div",{className:"space-y-1",children:[g.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[g.jsx("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center gap-2",children:"Size"}),g.jsx("div",{className:"flex flex-wrap gap-2",children:t.sizes.map(H=>g.jsx("button",{onClick:()=>v(H),className:`flex-1 min-w-[80px] rounded-lg py-2 text-sm font-semibold transition-all border ${A.name===H.name?"bg-coffee-600 text-white border-coffee-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:border-coffee-300 hover:bg-coffee-50"}`,children:H.name},H.name))})]}),["Coffee Based","Non-Coffee Based","Matcha Series","Refreshments"].includes(t.category)&&g.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[g.jsx("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center gap-2",children:"Sugar Level"}),g.jsx("div",{className:"flex flex-wrap gap-2",children:I.sugarLevels.map(H=>g.jsx("button",{onClick:()=>c(H.value),className:`flex-1 min-w-[60px] rounded-lg py-2 text-sm font-semibold transition-all border ${l===H.value?"bg-coffee-600 text-white border-coffee-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:border-coffee-300 hover:bg-coffee-50"}`,children:H.value},H.value))})]}),["Coffee Based","Non-Coffee Based","Matcha Series","Refreshments"].includes(t.category)&&g.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[g.jsx("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center gap-2",children:"Ice Level"}),g.jsx("div",{className:"flex flex-wrap gap-2",children:I.iceLevels.map(H=>g.jsx("button",{onClick:()=>d(H.value),className:`flex-1 min-w-[60px] rounded-lg py-2 text-sm font-semibold transition-all border ${h===H.value?"bg-coffee-600 text-white border-coffee-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:border-coffee-300 hover:bg-coffee-50"}`,children:H.value},H.value))})]}),g.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[g.jsxs("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center justify-between",children:[g.jsx("span",{children:"Toppings"}),g.jsx("span",{className:"text-xs font-normal text-gray-500 normal-case",children:"Select one"})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(H=>{const ie=f===H.name;return g.jsxs("button",{onClick:()=>p(H.name),className:`
                                                relative px-3 py-2 rounded-lg text-sm font-medium transition-all border flex items-center gap-2
                                                ${ie?"bg-coffee-50 border-coffee-600 text-coffee-700 shadow-sm ring-1 ring-coffee-600":"bg-white border-gray-200 text-gray-600 hover:border-coffee-300 hover:bg-gray-50"}
                                            `,children:[g.jsx("span",{children:H.name}),H.price>0&&g.jsxs("span",{className:`text-xs font-bold ${ie?"text-coffee-600":"text-gray-400"}`,children:["+",H.price]})]},H.id)})})]}),g.jsxs("div",{className:"flex items-center justify-between py-4 -mx-6 px-6",children:[g.jsx("span",{className:"font-bold text-gray-900",children:"Quantity"}),g.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 rounded-lg p-1 border border-gray-200",children:[g.jsx("button",{onClick:()=>E(Math.max(1,w-1)),className:"h-8 w-8 rounded-md bg-white shadow-sm flex items-center justify-center text-gray-600 hover:text-coffee-600 disabled:opacity-50 transition-colors",disabled:w<=1,children:g.jsx(Pv,{className:"h-4 w-4"})}),g.jsx("span",{className:"w-8 text-center font-bold text-gray-900 tabular-nums",children:w}),g.jsx("button",{onClick:()=>E(w+1),className:"h-8 w-8 rounded-md bg-coffee-600 shadow-sm flex items-center justify-center text-white hover:bg-coffee-700 transition-colors",children:g.jsx(m2,{className:"h-4 w-4"})})]})]})]})]})})},wZ=()=>{const{pathname:t}=fi();return R.useEffect(()=>{window.scrollTo(0,0)},[t]),null},BR=({allowedRoles:t,redirectTo:e})=>{const{currentUser:n,loading:i}=wo(),r=fi();return i?g.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-gray-50",children:g.jsx(Qa,{className:"h-12 w-12 animate-spin text-primary-600"})}):n?!t||t.length===0?g.jsx(ZS,{}):n.role&&t.includes(n.role)?g.jsx(ZS,{}):g.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gradient-to-br from-red-50 to-orange-50 px-4",children:g.jsxs("div",{className:"max-w-md text-center",children:[g.jsx("div",{className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-red-100",children:g.jsx(bj,{className:"h-10 w-10 text-red-600"})}),g.jsx("h1",{className:"mb-3 font-display text-4xl font-bold text-gray-900",children:"Access Denied"}),g.jsx("p",{className:"mb-6 text-lg text-gray-600",children:"You don't have permission to access this page."}),g.jsxs("p",{className:"mb-8 text-sm text-gray-500",children:["Your role: ",g.jsx("span",{className:"font-semibold capitalize",children:n.role||"customer"}),g.jsx("br",{}),"Required role: ",g.jsx("span",{className:"font-semibold capitalize",children:t.join(" or ")})]}),g.jsx("button",{onClick:()=>window.history.back(),className:"rounded-lg bg-primary-600 px-6 py-3 font-semibold text-white transition-colors hover:bg-primary-700",children:"Go Back"})]})}):g.jsx(JU,{to:e||"/auth/login",state:{from:r},replace:!0})},TZ=()=>g.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-coffee-50",children:g.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[g.jsx(kr,{className:"h-16 w-16 text-coffee-600"}),g.jsxs("div",{className:"flex items-center gap-2 text-coffee-800",children:[g.jsx(Qa,{className:"h-6 w-6 animate-spin"}),g.jsx("span",{className:"font-medium",children:"Brewing your page..."})]})]})}),EZ=R.lazy(()=>ke(()=>import("./HomePage-CcrXq0yf.js"),__vite__mapDeps([0,1,2,3,4]))),AZ=R.lazy(()=>ke(()=>import("./LoginPage-BHcyKCt7.js"),[])),SZ=R.lazy(()=>ke(()=>import("./RegisterPage-DPuKjhBK.js"),[])),IZ=R.lazy(()=>ke(()=>import("./ForgotPasswordPage-C2f1dpAk.js"),__vite__mapDeps([5,6]))),xZ=R.lazy(()=>ke(()=>import("./MenuPage-qkdwuwft.js"),__vite__mapDeps([7,8,9,10,11,12]))),RZ=R.lazy(()=>ke(()=>import("./CheckoutPage-BiS99nF_.js"),__vite__mapDeps([13,14,2,15,16,17,18,19]))),CZ=R.lazy(()=>ke(()=>import("./QueuePage-B-4jTMKV.js"),__vite__mapDeps([20,14,21,4,18,1,8,22,17,23,24,9]))),PZ=R.lazy(()=>ke(()=>import("./RewardsPage-CDDGhG7U.js"),__vite__mapDeps([25,14,23,26,27,28,29,10,16,9]))),NZ=R.lazy(()=>ke(()=>import("./ProfilePage-CKT8Pal1.js"),__vite__mapDeps([30,14,18,8,29,27,28,31,17,6,4,32,19,22,33,34,35]))),DZ=R.lazy(()=>ke(()=>import("./AboutPage-D78i9w43.js"),__vite__mapDeps([36,14,18,37,3,1]))),kZ=R.lazy(()=>ke(()=>import("./ContactPage-dBp6iA1H.js"),__vite__mapDeps([38,14,6,39,19,33]))),VZ=R.lazy(()=>ke(()=>import("./FAQPage-5i6Y3o8z.js"),__vite__mapDeps([40,14,11]))),OZ=R.lazy(()=>ke(()=>import("./TermsPage-DFCKb1Yx.js"),__vite__mapDeps([41,42,3,43,23]))),MZ=R.lazy(()=>ke(()=>import("./PrivacyPolicyPage-83Cb9OY7.js"),__vite__mapDeps([44,4,45]))),LZ=R.lazy(()=>ke(()=>import("./CookiePolicyPage-CIGGSC0Y.js"),__vite__mapDeps([46,34,37,47]))),UZ=R.lazy(()=>ke(()=>import("./AdminLayout-D0QlM0dg.js"),__vite__mapDeps([48,49,14,50,18,19,26,3,47,34]))),jZ=R.lazy(()=>ke(()=>import("./AdminDashboardPage-_AREoe56.js"),__vite__mapDeps([51,52,24,50,1,29,12,53,18,3,47,8,37]))),FR=R.lazy(()=>ke(()=>import("./AdminQueuePage-CTWAd0l0.js"),__vite__mapDeps([54,21,14,55,1,18,42]))),qR=R.lazy(()=>ke(()=>import("./AdminInventoryPage-DuR0LuVs.js"),__vite__mapDeps([56,31,14,29,50,9,11,57,18]))),zZ=R.lazy(()=>ke(()=>import("./AdminProductsPage-BIT551_j.js"),__vite__mapDeps([58,14,31,50,8,11,57,18,35]))),BZ=R.lazy(()=>ke(()=>import("./AdminAnalyticsPage-BE_qslYa.js"),__vite__mapDeps([59,52,24,50,1,29,12,19,8,22]))),FZ=R.lazy(()=>ke(()=>import("./AdminFeedbackPage-DmoH6-E9.js"),__vite__mapDeps([60,32,28,8,19,14,33,61]))),qZ=R.lazy(()=>ke(()=>import("./AdminSettingsPage-Dgf9EbWn.js"),__vite__mapDeps([62,14,6,39,63,1,31]))),HR=R.lazy(()=>ke(()=>import("./AdminOrdersHistoryPage-jvp4HjWh.js"),__vite__mapDeps([64,1,50,43,42,11,29,63,15]))),HZ=R.lazy(()=>ke(()=>import("./AdminUsersPage-BdYqktjR.js"),__vite__mapDeps([65,3,11,61,29,24,12]))),GZ=R.lazy(()=>ke(()=>import("./EmployeeLayout-0A0zJiDk.js"),__vite__mapDeps([66,49,14,50,26]))),$Z=R.lazy(()=>ke(()=>import("./POSDashboard-C-sIQsgy.js"),__vite__mapDeps([67,37,24,53,18,50,1]))),KZ=R.lazy(()=>ke(()=>import("./POSPage-BeQM_ZgY.js"),__vite__mapDeps([68,15,43,45,55,11]))),QZ=()=>g.jsxs("div",{className:"flex min-h-screen flex-col",children:[g.jsx(MQ,{}),g.jsx("main",{className:"flex flex-1 items-center justify-center bg-gradient-to-br from-primary-50 to-coffee-50",children:g.jsxs("div",{className:"p-4 text-center",children:[g.jsx(kr,{className:"mx-auto mb-4 h-16 w-16 text-gray-400 opacity-50"}),g.jsx("h1",{className:"mb-4 font-display text-4xl font-bold text-gray-900",children:"404 - Page Not Found"}),g.jsx("p",{className:"mb-8 text-gray-600",children:"This coffee blend doesn't exist on our menu. Maybe it got lost in the daily grind?"}),g.jsx(Xn,{to:"/",className:"font-medium text-primary-600 transition-colors hover:text-primary-700",children:" Back to Home"})]})}),g.jsx(LQ,{})]}),WZ=()=>{const{isCartOpen:t,closeCart:e,cartItems:n,updateQuantity:i,updateCartItem:r,removeFromCart:s,toastMessage:a,selectedItemIds:o,toggleItemSelection:l,selectAllItems:c,deselectAllItems:h}=XO(),d=pc(),[f,p]=R.useState(null),[w,E]=R.useState(!1),A=()=>{e(),d("/checkout")},v=b=>{p(b),E(!0)},_=(b,I,D,V)=>{f&&V&&(r(f.id,f.product,V,b,I),E(!1),p(null))};return g.jsxs(g.Fragment,{children:[g.jsx(wZ,{}),g.jsx(fZ,{}),g.jsx(R.Suspense,{fallback:g.jsx(TZ,{}),children:g.jsxs(e3,{children:[g.jsx(ve,{path:"/",element:g.jsx(EZ,{})}),g.jsx(ve,{path:"/about",element:g.jsx(DZ,{})}),g.jsx(ve,{path:"/menu",element:g.jsx(xZ,{})}),g.jsx(ve,{path:"/contact",element:g.jsx(kZ,{})}),g.jsx(ve,{path:"/auth/login",element:g.jsx(AZ,{})}),g.jsx(ve,{path:"/auth/register",element:g.jsx(SZ,{})}),g.jsx(ve,{path:"/auth/forgot-password",element:g.jsx(IZ,{})}),g.jsx(ve,{path:"/checkout",element:g.jsx(RZ,{})}),g.jsx(ve,{path:"/queue",element:g.jsx(CZ,{})}),g.jsx(ve,{path:"/rewards",element:g.jsx(PZ,{})}),g.jsx(ve,{path:"/profile",element:g.jsx(NZ,{})}),g.jsx(ve,{path:"/faq",element:g.jsx(VZ,{})}),g.jsx(ve,{path:"/terms",element:g.jsx(OZ,{})}),g.jsx(ve,{path:"/privacy",element:g.jsx(MZ,{})}),g.jsx(ve,{path:"/cookies",element:g.jsx(LZ,{})}),g.jsx(ve,{element:g.jsx(BR,{}),children:g.jsxs(ve,{path:"/admin",element:g.jsx(UZ,{}),children:[g.jsx(ve,{index:!0,element:g.jsx(jZ,{})}),g.jsx(ve,{path:"queue",element:g.jsx(FR,{})}),g.jsx(ve,{path:"history",element:g.jsx(HR,{})}),g.jsx(ve,{path:"users",element:g.jsx(HZ,{})}),g.jsx(ve,{path:"inventory",element:g.jsx(qR,{})}),g.jsx(ve,{path:"products",element:g.jsx(zZ,{})}),g.jsx(ve,{path:"analytics",element:g.jsx(BZ,{})}),g.jsx(ve,{path:"feedback",element:g.jsx(FZ,{})}),g.jsx(ve,{path:"settings",element:g.jsx(qZ,{})})]})}),g.jsx(ve,{element:g.jsx(BR,{allowedRoles:["employee","admin"]}),children:g.jsxs(ve,{path:"/employee",element:g.jsx(GZ,{}),children:[g.jsx(ve,{index:!0,element:g.jsx($Z,{})}),g.jsx(ve,{path:"pos",element:g.jsx(KZ,{})}),g.jsx(ve,{path:"queue",element:g.jsx(FR,{})}),g.jsx(ve,{path:"inventory",element:g.jsx(qR,{})}),g.jsx(ve,{path:"history",element:g.jsx(HR,{})})]})}),g.jsx(ve,{path:"*",element:g.jsx(QZ,{})})]})}),g.jsx(gZ,{isOpen:t,onClose:e,cartItems:n,onUpdateQuantity:i,onRemoveItem:s,onCheckout:A,onEditItem:v,selectedItemIds:o,onToggleItemSelection:l,onSelectAll:c,onDeselectAll:h}),f&&g.jsx(bZ,{product:f.product,selectedSize:f.selectedSize,isOpen:w,onClose:()=>{E(!1),p(null)},onConfirm:_,initialCustomizations:f.customizations,initialQuantity:f.quantity}),a&&g.jsx("div",{className:"fixed bottom-4 right-4 z-[100] animate-fade-in-up rounded-lg bg-gray-900 px-4 py-3 text-white shadow-lg",children:a})]})},YZ=()=>g.jsx(wQ,{children:g.jsx(UQ,{children:g.jsx(EQ,{children:g.jsx(mZ,{children:g.jsx(AQ,{children:g.jsx(A3,{children:g.jsx(WZ,{})})})})})})}),NL=document.getElementById("root");if(!NL)throw new Error("Could not find root element to mount to");const XZ=rU.createRoot(NL);XZ.render(g.jsx(ch.StrictMode,{children:g.jsx(YZ,{})}));export{hj as $,F3 as A,pZ as B,SQ as C,qQ as D,G3 as E,LQ as F,nj as G,MQ as H,fi as I,Rf as J,m2 as K,Xn as L,fj as M,Cv as N,Pv as O,bZ as P,zT as Q,kr as R,Sj as S,gf as T,Nv as U,_j as V,xj as W,fd as X,Cj as Y,h2 as Z,d2 as _,eO as a,ej as a0,sj as a1,f2 as a2,ZS as a3,pi as a4,iI as a5,Y3 as a6,ch as a7,yZ as a8,lee as a9,GR as aa,JZ as ab,a$ as ac,_O as ad,lh as ae,p$ as b,Se as c,Ze as d,mp as e,pc as f,_$ as g,u2 as h,Q3 as i,g as j,Gb as k,Qa as l,TQ as m,XO as n,nI as o,dZ as p,ts as q,R as r,uee as s,PL as t,wo as u,z3 as v,s$ as w,$b as x,en as y,oC as z};
