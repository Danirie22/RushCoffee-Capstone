(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function W2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Y2={exports:{}},ug={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bV=Symbol.for("react.transitional.element"),wV=Symbol.for("react.fragment");function Q2(t,e,n){var s=null;if(n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:bV,type:t,key:s,ref:e!==void 0?e:null,props:n}}ug.Fragment=wV;ug.jsx=Q2;ug.jsxs=Q2;Y2.exports=ug;var l=Y2.exports,X2={exports:{}},ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R_=Symbol.for("react.transitional.element"),TV=Symbol.for("react.portal"),EV=Symbol.for("react.fragment"),SV=Symbol.for("react.strict_mode"),AV=Symbol.for("react.profiler"),NV=Symbol.for("react.consumer"),IV=Symbol.for("react.context"),RV=Symbol.for("react.forward_ref"),CV=Symbol.for("react.suspense"),jV=Symbol.for("react.memo"),J2=Symbol.for("react.lazy"),PV=Symbol.for("react.activity"),yE=Symbol.iterator;function kV(t){return t===null||typeof t!="object"?null:(t=yE&&t[yE]||t["@@iterator"],typeof t=="function"?t:null)}var Z2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eR=Object.assign,tR={};function Ic(t,e,n){this.props=t,this.context=e,this.refs=tR,this.updater=n||Z2}Ic.prototype.isReactComponent={};Ic.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ic.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nR(){}nR.prototype=Ic.prototype;function C_(t,e,n){this.props=t,this.context=e,this.refs=tR,this.updater=n||Z2}var j_=C_.prototype=new nR;j_.constructor=C_;eR(j_,Ic.prototype);j_.isPureReactComponent=!0;var vE=Array.isArray;function Tv(){}var We={H:null,A:null,T:null,S:null},sR=Object.prototype.hasOwnProperty;function P_(t,e,n){var s=n.ref;return{$$typeof:R_,type:t,key:e,ref:s!==void 0?s:null,props:n}}function DV(t,e){return P_(t.type,e,t.props)}function k_(t){return typeof t=="object"&&t!==null&&t.$$typeof===R_}function MV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xE=/\/+/g;function e0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?MV(""+t.key):e.toString(36)}function OV(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Tv,Tv):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function sl(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case R_:case TV:a=!0;break;case J2:return a=t._init,sl(a(t._payload),e,n,s,r)}}if(a)return r=r(t),a=s===""?"."+e0(t,0):s,vE(r)?(n="",a!=null&&(n=a.replace(xE,"$&/")+"/"),sl(r,e,n,"",function(u){return u})):r!=null&&(k_(r)&&(r=DV(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(xE,"$&/")+"/")+a)),e.push(r)),1;a=0;var o=s===""?".":s+":";if(vE(t))for(var c=0;c<t.length;c++)s=t[c],i=o+e0(s,c),a+=sl(s,e,n,i,r);else if(c=kV(t),typeof c=="function")for(t=c.call(t),c=0;!(s=t.next()).done;)s=s.value,i=o+e0(s,c++),a+=sl(s,e,n,i,r);else if(i==="object"){if(typeof t.then=="function")return sl(OV(t),e,n,s,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function Cf(t,e,n){if(t==null)return t;var s=[],r=0;return sl(t,s,"","",function(i){return e.call(n,i,r++)}),s}function VV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _E=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},LV={map:Cf,forEach:function(t,e,n){Cf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Cf(t,function(){e++}),e},toArray:function(t){return Cf(t,function(e){return e})||[]},only:function(t){if(!k_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Activity=PV;ie.Children=LV;ie.Component=Ic;ie.Fragment=EV;ie.Profiler=AV;ie.PureComponent=C_;ie.StrictMode=SV;ie.Suspense=CV;ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=We;ie.__COMPILER_RUNTIME={__proto__:null,c:function(t){return We.H.useMemoCache(t)}};ie.cache=function(t){return function(){return t.apply(null,arguments)}};ie.cacheSignal=function(){return null};ie.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var s=eR({},t.props),r=t.key;if(e!=null)for(i in e.key!==void 0&&(r=""+e.key),e)!sR.call(e,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&e.ref===void 0||(s[i]=e[i]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var a=Array(i),o=0;o<i;o++)a[o]=arguments[o+2];s.children=a}return P_(t.type,r,s)};ie.createContext=function(t){return t={$$typeof:IV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:NV,_context:t},t};ie.createElement=function(t,e,n){var s,r={},i=null;if(e!=null)for(s in e.key!==void 0&&(i=""+e.key),e)sR.call(e,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),c=0;c<a;c++)o[c]=arguments[c+2];r.children=o}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return P_(t,i,r)};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:RV,render:t}};ie.isValidElement=k_;ie.lazy=function(t){return{$$typeof:J2,_payload:{_status:-1,_result:t},_init:VV}};ie.memo=function(t,e){return{$$typeof:jV,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=We.T,n={};We.T=n;try{var s=t(),r=We.S;r!==null&&r(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(Tv,_E)}catch(i){_E(i)}finally{e!==null&&n.types!==null&&(e.types=n.types),We.T=e}};ie.unstable_useCacheRefresh=function(){return We.H.useCacheRefresh()};ie.use=function(t){return We.H.use(t)};ie.useActionState=function(t,e,n){return We.H.useActionState(t,e,n)};ie.useCallback=function(t,e){return We.H.useCallback(t,e)};ie.useContext=function(t){return We.H.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t,e){return We.H.useDeferredValue(t,e)};ie.useEffect=function(t,e){return We.H.useEffect(t,e)};ie.useEffectEvent=function(t){return We.H.useEffectEvent(t)};ie.useId=function(){return We.H.useId()};ie.useImperativeHandle=function(t,e,n){return We.H.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return We.H.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return We.H.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return We.H.useMemo(t,e)};ie.useOptimistic=function(t,e){return We.H.useOptimistic(t,e)};ie.useReducer=function(t,e,n){return We.H.useReducer(t,e,n)};ie.useRef=function(t){return We.H.useRef(t)};ie.useState=function(t){return We.H.useState(t)};ie.useSyncExternalStore=function(t,e,n){return We.H.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return We.H.useTransition()};ie.version="19.2.0";X2.exports=ie;var S=X2.exports;const UV=W2(S);var rR={exports:{}},dg={},iR={exports:{}},aR={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,ee){var te=H.length;H.push(ee);e:for(;0<te;){var Ee=te-1>>>1,Je=H[Ee];if(0<r(Je,ee))H[Ee]=ee,H[te]=Je,te=Ee;else break e}}function n(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var ee=H[0],te=H.pop();if(te!==ee){H[0]=te;e:for(var Ee=0,Je=H.length,wa=Je>>>1;Ee<wa;){var Ta=2*(Ee+1)-1,Fo=H[Ta],ns=Ta+1,ni=H[ns];if(0>r(Fo,te))ns<Je&&0>r(ni,Fo)?(H[Ee]=ni,H[ns]=te,Ee=ns):(H[Ee]=Fo,H[Ta]=te,Ee=Ta);else if(ns<Je&&0>r(ni,te))H[Ee]=ni,H[ns]=te,Ee=ns;else break e}}return ee}function r(H,ee){var te=H.sortIndex-ee.sortIndex;return te!==0?te:H.id-ee.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],h=1,f=null,m=3,p=!1,_=!1,w=!1,T=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;function R(H){for(var ee=n(u);ee!==null;){if(ee.callback===null)s(u);else if(ee.startTime<=H)s(u),ee.sortIndex=ee.expirationTime,e(c,ee);else break;ee=n(u)}}function D(H){if(w=!1,R(H),!_)if(n(c)!==null)_=!0,M||(M=!0,k());else{var ee=n(u);ee!==null&&ue(D,ee.startTime-H)}}var M=!1,A=-1,E=5,N=-1;function I(){return T?!0:!(t.unstable_now()-N<E)}function P(){if(T=!1,M){var H=t.unstable_now();N=H;var ee=!0;try{e:{_=!1,w&&(w=!1,v(A),A=-1),p=!0;var te=m;try{t:{for(R(H),f=n(c);f!==null&&!(f.expirationTime>H&&I());){var Ee=f.callback;if(typeof Ee=="function"){f.callback=null,m=f.priorityLevel;var Je=Ee(f.expirationTime<=H);if(H=t.unstable_now(),typeof Je=="function"){f.callback=Je,R(H),ee=!0;break t}f===n(c)&&s(c),R(H)}else s(c);f=n(c)}if(f!==null)ee=!0;else{var wa=n(u);wa!==null&&ue(D,wa.startTime-H),ee=!1}}break e}finally{f=null,m=te,p=!1}ee=void 0}}finally{ee?k():M=!1}}}var k;if(typeof b=="function")k=function(){b(P)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,W=j.port2;j.port1.onmessage=P,k=function(){W.postMessage(null)}}else k=function(){x(P,0)};function ue(H,ee){A=x(function(){H(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(H){switch(m){case 1:case 2:case 3:var ee=3;break;default:ee=m}var te=m;m=ee;try{return H()}finally{m=te}},t.unstable_requestPaint=function(){T=!0},t.unstable_runWithPriority=function(H,ee){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var te=m;m=H;try{return ee()}finally{m=te}},t.unstable_scheduleCallback=function(H,ee,te){var Ee=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?Ee+te:Ee):te=Ee,H){case 1:var Je=-1;break;case 2:Je=250;break;case 5:Je=1073741823;break;case 4:Je=1e4;break;default:Je=5e3}return Je=te+Je,H={id:h++,callback:ee,priorityLevel:H,startTime:te,expirationTime:Je,sortIndex:-1},te>Ee?(H.sortIndex=te,e(u,H),n(c)===null&&H===n(u)&&(w?(v(A),A=-1):w=!0,ue(D,te-Ee))):(H.sortIndex=Je,e(c,H),_||p||(_=!0,M||(M=!0,k()))),H},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(H){var ee=m;return function(){var te=m;m=ee;try{return H.apply(this,arguments)}finally{m=te}}}})(aR);iR.exports=aR;var zV=iR.exports,oR={exports:{}},wn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FV=S;function lR(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ci(){}var xn={d:{f:ci,r:function(){throw Error(lR(522))},D:ci,C:ci,L:ci,m:ci,X:ci,S:ci,M:ci},p:0,findDOMNode:null},BV=Symbol.for("react.portal");function qV(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:BV,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}var td=FV.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function hg(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=xn;wn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(lR(299));return qV(t,e,null,n)};wn.flushSync=function(t){var e=td.T,n=xn.p;try{if(td.T=null,xn.p=2,t)return t()}finally{td.T=e,xn.p=n,xn.d.f()}};wn.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,xn.d.C(t,e))};wn.prefetchDNS=function(t){typeof t=="string"&&xn.d.D(t)};wn.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,s=hg(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,i=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?xn.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:s,integrity:r,fetchPriority:i}):n==="script"&&xn.d.X(t,{crossOrigin:s,integrity:r,fetchPriority:i,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};wn.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=hg(e.as,e.crossOrigin);xn.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&xn.d.M(t)};wn.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,s=hg(n,e.crossOrigin);xn.d.L(t,n,{crossOrigin:s,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};wn.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=hg(e.as,e.crossOrigin);xn.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else xn.d.m(t)};wn.requestFormReset=function(t){xn.d.r(t)};wn.unstable_batchedUpdates=function(t,e){return t(e)};wn.useFormState=function(t,e,n){return td.H.useFormState(t,e,n)};wn.useFormStatus=function(){return td.H.useHostTransitionStatus()};wn.version="19.2.0";function cR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cR)}catch(t){console.error(t)}}cR(),oR.exports=wn;var HV=oR.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mt=zV,uR=S,GV=HV;function z(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function dR(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fR(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function bE(t){if(Nh(t)!==t)throw Error(z(188))}function $V(t){var e=t.alternate;if(!e){if(e=Nh(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return bE(r),t;if(i===s)return bE(r),e;i=i.sibling}throw Error(z(188))}if(n.return!==s.return)n=r,s=i;else{for(var a=!1,o=r.child;o;){if(o===n){a=!0,n=r,s=i;break}if(o===s){a=!0,s=r,n=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===n){a=!0,n=i,s=r;break}if(o===s){a=!0,s=i,n=r;break}o=o.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==s)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function mR(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=mR(t),e!==null)return e;t=t.sibling}return null}var Qe=Object.assign,KV=Symbol.for("react.element"),jf=Symbol.for("react.transitional.element"),Uu=Symbol.for("react.portal"),dl=Symbol.for("react.fragment"),pR=Symbol.for("react.strict_mode"),Ev=Symbol.for("react.profiler"),gR=Symbol.for("react.consumer"),vr=Symbol.for("react.context"),D_=Symbol.for("react.forward_ref"),Sv=Symbol.for("react.suspense"),Av=Symbol.for("react.suspense_list"),M_=Symbol.for("react.memo"),gi=Symbol.for("react.lazy"),Nv=Symbol.for("react.activity"),WV=Symbol.for("react.memo_cache_sentinel"),wE=Symbol.iterator;function yu(t){return t===null||typeof t!="object"?null:(t=wE&&t[wE]||t["@@iterator"],typeof t=="function"?t:null)}var YV=Symbol.for("react.client.reference");function Iv(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===YV?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case dl:return"Fragment";case Ev:return"Profiler";case pR:return"StrictMode";case Sv:return"Suspense";case Av:return"SuspenseList";case Nv:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Uu:return"Portal";case vr:return t.displayName||"Context";case gR:return(t._context.displayName||"Context")+".Consumer";case D_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M_:return e=t.displayName||null,e!==null?e:Iv(t.type)||"Memo";case gi:e=t._payload,t=t._init;try{return Iv(t(e))}catch{}}return null}var zu=Array.isArray,se=uR.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te=GV.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Za={pending:!1,data:null,method:null,action:null},Rv=[],hl=-1;function or(t){return{current:t}}function Bt(t){0>hl||(t.current=Rv[hl],Rv[hl]=null,hl--)}function ze(t,e){hl++,Rv[hl]=t.current,t.current=e}var Qs=or(null),Md=or(null),ji=or(null),Km=or(null);function Wm(t,e){switch(ze(ji,e),ze(Md,t),ze(Qs,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?IS(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=IS(e),t=Oj(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Bt(Qs),ze(Qs,t)}function ql(){Bt(Qs),Bt(Md),Bt(ji)}function Cv(t){t.memoizedState!==null&&ze(Km,t);var e=Qs.current,n=Oj(e,t.type);e!==n&&(ze(Md,t),ze(Qs,n))}function Ym(t){Md.current===t&&(Bt(Qs),Bt(Md)),Km.current===t&&(Bt(Km),$d._currentValue=Za)}var t0,TE;function ka(t){if(t0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);t0=e&&e[1]||"",TE=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+t0+t+TE}var n0=!1;function s0(t,e){if(!t||n0)return"";n0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(p){var m=p}Reflect.construct(t,[],f)}else{try{f.call()}catch(p){m=p}t.call(f.prototype)}}else{try{throw Error()}catch(p){m=p}(f=t())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(p){if(p&&m&&typeof p.stack=="string")return[p.stack,m.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=s.DetermineComponentFrameRoot(),a=i[0],o=i[1];if(a&&o){var c=a.split(`
`),u=o.split(`
`);for(r=s=0;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;for(;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;if(s===c.length||r===u.length)for(s=c.length-1,r=u.length-1;1<=s&&0<=r&&c[s]!==u[r];)r--;for(;1<=s&&0<=r;s--,r--)if(c[s]!==u[r]){if(s!==1||r!==1)do if(s--,r--,0>r||c[s]!==u[r]){var h=`
`+c[s].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=s&&0<=r);break}}}finally{n0=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?ka(n):""}function QV(t,e){switch(t.tag){case 26:case 27:case 5:return ka(t.type);case 16:return ka("Lazy");case 13:return t.child!==e&&e!==null?ka("Suspense Fallback"):ka("Suspense");case 19:return ka("SuspenseList");case 0:case 15:return s0(t.type,!1);case 11:return s0(t.type.render,!1);case 1:return s0(t.type,!0);case 31:return ka("Activity");default:return""}}function EE(t){try{var e="",n=null;do e+=QV(t,n),n=t,t=t.return;while(t);return e}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var jv=Object.prototype.hasOwnProperty,O_=Mt.unstable_scheduleCallback,r0=Mt.unstable_cancelCallback,XV=Mt.unstable_shouldYield,JV=Mt.unstable_requestPaint,qn=Mt.unstable_now,ZV=Mt.unstable_getCurrentPriorityLevel,yR=Mt.unstable_ImmediatePriority,vR=Mt.unstable_UserBlockingPriority,Qm=Mt.unstable_NormalPriority,e5=Mt.unstable_LowPriority,xR=Mt.unstable_IdlePriority,t5=Mt.log,n5=Mt.unstable_setDisableYieldValue,Ih=null,Hn=null;function Ti(t){if(typeof t5=="function"&&n5(t),Hn&&typeof Hn.setStrictMode=="function")try{Hn.setStrictMode(Ih,t)}catch{}}var Gn=Math.clz32?Math.clz32:i5,s5=Math.log,r5=Math.LN2;function i5(t){return t>>>=0,t===0?32:31-(s5(t)/r5|0)|0}var Pf=256,kf=262144,Df=4194304;function Da(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function fg(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=s&134217727;return o!==0?(s=o&~i,s!==0?r=Da(s):(a&=o,a!==0?r=Da(a):n||(n=o&~t,n!==0&&(r=Da(n))))):(o=s&~i,o!==0?r=Da(o):a!==0?r=Da(a):n||(n=s&~t,n!==0&&(r=Da(n)))),r===0?0:e!==0&&e!==r&&!(e&i)&&(i=r&-r,n=e&-e,i>=n||i===32&&(n&4194048)!==0)?e:r}function Rh(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function a5(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _R(){var t=Df;return Df<<=1,!(Df&62914560)&&(Df=4194304),t}function i0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ch(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function o5(t,e,n,s,r,i){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,c=t.expirationTimes,u=t.hiddenUpdates;for(n=a&~n;0<n;){var h=31-Gn(n),f=1<<h;o[h]=0,c[h]=-1;var m=u[h];if(m!==null)for(u[h]=null,h=0;h<m.length;h++){var p=m[h];p!==null&&(p.lane&=-536870913)}n&=~f}s!==0&&bR(t,s,0),i!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=i&~(a&~e))}function bR(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-Gn(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&261930}function wR(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Gn(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}function TR(t,e){var n=e&-e;return n=n&42?1:V_(n),n&(t.suspendedLanes|e)?0:n}function V_(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function L_(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function ER(){var t=Te.p;return t!==0?t:(t=window.event,t===void 0?32:Kj(t.type))}function SE(t,e){var n=Te.p;try{return Te.p=t,e()}finally{Te.p=n}}var ua=Math.random().toString(36).slice(2),Kt="__reactFiber$"+ua,Pn="__reactProps$"+ua,Rc="__reactContainer$"+ua,Pv="__reactEvents$"+ua,l5="__reactListeners$"+ua,c5="__reactHandles$"+ua,AE="__reactResources$"+ua,jh="__reactMarker$"+ua;function U_(t){delete t[Kt],delete t[Pn],delete t[Pv],delete t[l5],delete t[c5]}function fl(t){var e=t[Kt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Rc]||n[Kt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=kS(t);t!==null;){if(n=t[Kt])return n;t=kS(t)}return e}t=n,n=t.parentNode}return null}function Cc(t){if(t=t[Kt]||t[Rc]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Fu(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(z(33))}function Rl(t){var e=t[AE];return e||(e=t[AE]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Ft(t){t[jh]=!0}var SR=new Set,AR={};function Io(t,e){Hl(t,e),Hl(t+"Capture",e)}function Hl(t,e){for(AR[t]=e,t=0;t<e.length;t++)SR.add(e[t])}var u5=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),NE={},IE={};function d5(t){return jv.call(IE,t)?!0:jv.call(NE,t)?!1:u5.test(t)?IE[t]=!0:(NE[t]=!0,!1)}function dm(t,e,n){if(d5(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Mf(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function cr(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}function os(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function NR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function h5(t,e,n){var s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,i=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kv(t){if(!t._valueTracker){var e=NR(t)?"checked":"value";t._valueTracker=h5(t,e,""+t[e])}}function IR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=NR(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Xm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var f5=/[\n"\\]/g;function us(t){return t.replace(f5,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Dv(t,e,n,s,r,i,a,o){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+os(e)):t.value!==""+os(e)&&(t.value=""+os(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?Mv(t,a,os(e)):n!=null?Mv(t,a,os(n)):s!=null&&t.removeAttribute("value"),r==null&&i!=null&&(t.defaultChecked=!!i),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+os(o):t.removeAttribute("name")}function RR(t,e,n,s,r,i,a,o){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(t.type=i),e!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||e!=null)){kv(t);return}n=n!=null?""+os(n):"",e=e!=null?""+os(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}s=s??r,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=o?t.checked:!!s,t.defaultChecked=!!s,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),kv(t)}function Mv(t,e,n){e==="number"&&Xm(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Cl(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+os(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function CR(t,e,n){if(e!=null&&(e=""+os(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+os(n):""}function jR(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(z(92));if(zu(s)){if(1<s.length)throw Error(z(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=os(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s),kv(t)}function Gl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var m5=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function RE(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||m5.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function PR(t,e,n){if(e!=null&&typeof e!="object")throw Error(z(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var r in e)s=e[r],e.hasOwnProperty(r)&&n[r]!==s&&RE(t,r,s)}else for(var i in e)e.hasOwnProperty(i)&&RE(t,i,e[i])}function z_(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var p5=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),g5=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hm(t){return g5.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function xr(){}var Ov=null;function F_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ml=null,jl=null;function CE(t){var e=Cc(t);if(e&&(t=e.stateNode)){var n=t[Pn]||null;e:switch(t=e.stateNode,e.type){case"input":if(Dv(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+us(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=s[Pn]||null;if(!r)throw Error(z(90));Dv(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&IR(s)}break e;case"textarea":CR(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Cl(t,!!n.multiple,e,!1)}}}var a0=!1;function kR(t,e,n){if(a0)return t(e,n);a0=!0;try{var s=t(e);return s}finally{if(a0=!1,(ml!==null||jl!==null)&&(Sg(),ml&&(e=ml,t=jl,jl=ml=null,CE(e),t)))for(e=0;e<t.length;e++)CE(t[e])}}function Od(t,e){var n=t.stateNode;if(n===null)return null;var s=n[Pn]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vv=!1;if(jr)try{var vu={};Object.defineProperty(vu,"passive",{get:function(){Vv=!0}}),window.addEventListener("test",vu,vu),window.removeEventListener("test",vu,vu)}catch{Vv=!1}var Ei=null,B_=null,fm=null;function DR(){if(fm)return fm;var t,e=B_,n=e.length,s,r="value"in Ei?Ei.value:Ei.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(s=1;s<=a&&e[n-s]===r[i-s];s++);return fm=r.slice(t,1<s?1-s:void 0)}function mm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Of(){return!0}function jE(){return!1}function kn(t){function e(n,s,r,i,a){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Of:jE,this.isPropagationStopped=jE,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Of)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Of)},persist:function(){},isPersistent:Of}),e}var Ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mg=kn(Ro),Ph=Qe({},Ro,{view:0,detail:0}),y5=kn(Ph),o0,l0,xu,pg=Qe({},Ph,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:q_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xu&&(xu&&t.type==="mousemove"?(o0=t.screenX-xu.screenX,l0=t.screenY-xu.screenY):l0=o0=0,xu=t),o0)},movementY:function(t){return"movementY"in t?t.movementY:l0}}),PE=kn(pg),v5=Qe({},pg,{dataTransfer:0}),x5=kn(v5),_5=Qe({},Ph,{relatedTarget:0}),c0=kn(_5),b5=Qe({},Ro,{animationName:0,elapsedTime:0,pseudoElement:0}),w5=kn(b5),T5=Qe({},Ro,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),E5=kn(T5),S5=Qe({},Ro,{data:0}),kE=kn(S5),A5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R5(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=I5[t])?!!e[t]:!1}function q_(){return R5}var C5=Qe({},Ph,{key:function(t){if(t.key){var e=A5[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=mm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?N5[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:q_,charCode:function(t){return t.type==="keypress"?mm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),j5=kn(C5),P5=Qe({},pg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),DE=kn(P5),k5=Qe({},Ph,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:q_}),D5=kn(k5),M5=Qe({},Ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),O5=kn(M5),V5=Qe({},pg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),L5=kn(V5),U5=Qe({},Ro,{newState:0,oldState:0}),z5=kn(U5),F5=[9,13,27,32],H_=jr&&"CompositionEvent"in window,nd=null;jr&&"documentMode"in document&&(nd=document.documentMode);var B5=jr&&"TextEvent"in window&&!nd,MR=jr&&(!H_||nd&&8<nd&&11>=nd),ME=" ",OE=!1;function OR(t,e){switch(t){case"keyup":return F5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pl=!1;function q5(t,e){switch(t){case"compositionend":return VR(e);case"keypress":return e.which!==32?null:(OE=!0,ME);case"textInput":return t=e.data,t===ME&&OE?null:t;default:return null}}function H5(t,e){if(pl)return t==="compositionend"||!H_&&OR(t,e)?(t=DR(),fm=B_=Ei=null,pl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return MR&&e.locale!=="ko"?null:e.data;default:return null}}var G5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function VE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!G5[t.type]:e==="textarea"}function LR(t,e,n,s){ml?jl?jl.push(s):jl=[s]:ml=s,e=pp(e,"onChange"),0<e.length&&(n=new mg("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var sd=null,Vd=null;function $5(t){kj(t,0)}function gg(t){var e=Fu(t);if(IR(e))return t}function LE(t,e){if(t==="change")return e}var UR=!1;if(jr){var u0;if(jr){var d0="oninput"in document;if(!d0){var UE=document.createElement("div");UE.setAttribute("oninput","return;"),d0=typeof UE.oninput=="function"}u0=d0}else u0=!1;UR=u0&&(!document.documentMode||9<document.documentMode)}function zE(){sd&&(sd.detachEvent("onpropertychange",zR),Vd=sd=null)}function zR(t){if(t.propertyName==="value"&&gg(Vd)){var e=[];LR(e,Vd,t,F_(t)),kR($5,e)}}function K5(t,e,n){t==="focusin"?(zE(),sd=e,Vd=n,sd.attachEvent("onpropertychange",zR)):t==="focusout"&&zE()}function W5(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gg(Vd)}function Y5(t,e){if(t==="click")return gg(e)}function Q5(t,e){if(t==="input"||t==="change")return gg(e)}function X5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qn=typeof Object.is=="function"?Object.is:X5;function Ld(t,e){if(Qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!jv.call(e,r)||!Qn(t[r],e[r]))return!1}return!0}function FE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function BE(t,e){var n=FE(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=FE(n)}}function FR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?FR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function BR(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Xm(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xm(t.document)}return e}function G_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var J5=jr&&"documentMode"in document&&11>=document.documentMode,gl=null,Lv=null,rd=null,Uv=!1;function qE(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uv||gl==null||gl!==Xm(s)||(s=gl,"selectionStart"in s&&G_(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),rd&&Ld(rd,s)||(rd=s,s=pp(Lv,"onSelect"),0<s.length&&(e=new mg("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=gl)))}function Ra(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yl={animationend:Ra("Animation","AnimationEnd"),animationiteration:Ra("Animation","AnimationIteration"),animationstart:Ra("Animation","AnimationStart"),transitionrun:Ra("Transition","TransitionRun"),transitionstart:Ra("Transition","TransitionStart"),transitioncancel:Ra("Transition","TransitionCancel"),transitionend:Ra("Transition","TransitionEnd")},h0={},qR={};jr&&(qR=document.createElement("div").style,"AnimationEvent"in window||(delete yl.animationend.animation,delete yl.animationiteration.animation,delete yl.animationstart.animation),"TransitionEvent"in window||delete yl.transitionend.transition);function Co(t){if(h0[t])return h0[t];if(!yl[t])return t;var e=yl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qR)return h0[t]=e[n];return t}var HR=Co("animationend"),GR=Co("animationiteration"),$R=Co("animationstart"),Z5=Co("transitionrun"),e3=Co("transitionstart"),t3=Co("transitioncancel"),KR=Co("transitionend"),WR=new Map,zv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zv.push("scrollEnd");function Cs(t,e){WR.set(t,e),Io(e,[t])}var Jm=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},as=[],vl=0,$_=0;function yg(){for(var t=vl,e=$_=vl=0;e<t;){var n=as[e];as[e++]=null;var s=as[e];as[e++]=null;var r=as[e];as[e++]=null;var i=as[e];if(as[e++]=null,s!==null&&r!==null){var a=s.pending;a===null?r.next=r:(r.next=a.next,a.next=r),s.pending=r}i!==0&&YR(n,r,i)}}function vg(t,e,n,s){as[vl++]=t,as[vl++]=e,as[vl++]=n,as[vl++]=s,$_|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function K_(t,e,n,s){return vg(t,e,n,s),Zm(t)}function jo(t,e){return vg(t,null,null,e),Zm(t)}function YR(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var r=!1,i=t.return;i!==null;)i.childLanes|=n,s=i.alternate,s!==null&&(s.childLanes|=n),i.tag===22&&(t=i.stateNode,t===null||t._visibility&1||(r=!0)),t=i,i=i.return;return t.tag===3?(i=t.stateNode,r&&e!==null&&(r=31-Gn(n),t=i.hiddenUpdates,s=t[r],s===null?t[r]=[e]:s.push(e),e.lane=n|536870912),i):null}function Zm(t){if(50<fd)throw fd=0,ox=null,Error(z(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var xl={};function n3(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(t,e,n,s){return new n3(t,e,n,s)}function W_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Tr(t,e){var n=t.alternate;return n===null?(n=zn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function QR(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function pm(t,e,n,s,r,i){var a=0;if(s=t,typeof t=="function")W_(t)&&(a=1);else if(typeof t=="string")a=oL(t,n,Qs.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Nv:return t=zn(31,n,e,r),t.elementType=Nv,t.lanes=i,t;case dl:return eo(n.children,r,i,e);case pR:a=8,r|=24;break;case Ev:return t=zn(12,n,e,r|2),t.elementType=Ev,t.lanes=i,t;case Sv:return t=zn(13,n,e,r),t.elementType=Sv,t.lanes=i,t;case Av:return t=zn(19,n,e,r),t.elementType=Av,t.lanes=i,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vr:a=10;break e;case gR:a=9;break e;case D_:a=11;break e;case M_:a=14;break e;case gi:a=16,s=null;break e}a=29,n=Error(z(130,t===null?"null":typeof t,"")),s=null}return e=zn(a,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function eo(t,e,n,s){return t=zn(7,t,s,e),t.lanes=n,t}function f0(t,e,n){return t=zn(6,t,null,e),t.lanes=n,t}function XR(t){var e=zn(18,null,null,0);return e.stateNode=t,e}function m0(t,e,n){return e=zn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var HE=new WeakMap;function ds(t,e){if(typeof t=="object"&&t!==null){var n=HE.get(t);return n!==void 0?n:(e={value:t,source:e,stack:EE(e)},HE.set(t,e),e)}return{value:t,source:e,stack:EE(e)}}var _l=[],bl=0,ep=null,Ud=0,ls=[],cs=0,Gi=null,Hs=1,Gs="";function pr(t,e){_l[bl++]=Ud,_l[bl++]=ep,ep=t,Ud=e}function JR(t,e,n){ls[cs++]=Hs,ls[cs++]=Gs,ls[cs++]=Gi,Gi=t;var s=Hs;t=Gs;var r=32-Gn(s)-1;s&=~(1<<r),n+=1;var i=32-Gn(e)+r;if(30<i){var a=r-r%5;i=(s&(1<<a)-1).toString(32),s>>=a,r-=a,Hs=1<<32-Gn(e)+r|n<<r|s,Gs=i+t}else Hs=1<<i|n<<r|s,Gs=t}function Y_(t){t.return!==null&&(pr(t,1),JR(t,1,0))}function Q_(t){for(;t===ep;)ep=_l[--bl],_l[bl]=null,Ud=_l[--bl],_l[bl]=null;for(;t===Gi;)Gi=ls[--cs],ls[cs]=null,Gs=ls[--cs],ls[cs]=null,Hs=ls[--cs],ls[cs]=null}function ZR(t,e){ls[cs++]=Hs,ls[cs++]=Gs,ls[cs++]=Gi,Hs=e.id,Gs=e.overflow,Gi=t}var Wt=null,Ge=null,ye=!1,Pi=null,hs=!1,Fv=Error(z(519));function $i(t){var e=Error(z(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw zd(ds(e,t)),Fv}function GE(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[Kt]=t,e[Pn]=s,n){case"dialog":de("cancel",e),de("close",e);break;case"iframe":case"object":case"embed":de("load",e);break;case"video":case"audio":for(n=0;n<Hd.length;n++)de(Hd[n],e);break;case"source":de("error",e);break;case"img":case"image":case"link":de("error",e),de("load",e);break;case"details":de("toggle",e);break;case"input":de("invalid",e),RR(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":de("invalid",e);break;case"textarea":de("invalid",e),jR(e,s.value,s.defaultValue,s.children)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||Mj(e.textContent,n)?(s.popover!=null&&(de("beforetoggle",e),de("toggle",e)),s.onScroll!=null&&de("scroll",e),s.onScrollEnd!=null&&de("scrollend",e),s.onClick!=null&&(e.onclick=xr),e=!0):e=!1,e||$i(t,!0)}function $E(t){for(Wt=t.return;Wt;)switch(Wt.tag){case 5:case 31:case 13:hs=!1;return;case 27:case 3:hs=!0;return;default:Wt=Wt.return}}function Go(t){if(t!==Wt)return!1;if(!ye)return $E(t),ye=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||hx(t.type,t.memoizedProps)),n=!n),n&&Ge&&$i(t),$E(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));Ge=PS(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));Ge=PS(t)}else e===27?(e=Ge,da(t.type)?(t=gx,gx=null,Ge=t):Ge=e):Ge=Wt?gs(t.stateNode.nextSibling):null;return!0}function co(){Ge=Wt=null,ye=!1}function p0(){var t=Pi;return t!==null&&(An===null?An=t:An.push.apply(An,t),Pi=null),t}function zd(t){Pi===null?Pi=[t]:Pi.push(t)}var Bv=or(null),Po=null,_r=null;function vi(t,e,n){ze(Bv,e._currentValue),e._currentValue=n}function Er(t){t._currentValue=Bv.current,Bt(Bv)}function qv(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Hv(t,e,n,s){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var i=r.dependencies;if(i!==null){var a=r.child;i=i.firstContext;e:for(;i!==null;){var o=i;i=r;for(var c=0;c<e.length;c++)if(o.context===e[c]){i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),qv(i.return,n,t),s||(a=null);break e}i=o.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(z(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),qv(a,n,t),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function jc(t,e,n,s){t=null;for(var r=e,i=!1;r!==null;){if(!i){if(r.flags&524288)i=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(z(387));if(a=a.memoizedProps,a!==null){var o=r.type;Qn(r.pendingProps.value,a.value)||(t!==null?t.push(o):t=[o])}}else if(r===Km.current){if(a=r.alternate,a===null)throw Error(z(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push($d):t=[$d])}r=r.return}t!==null&&Hv(e,t,n,s),e.flags|=262144}function tp(t){for(t=t.firstContext;t!==null;){if(!Qn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function uo(t){Po=t,_r=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qt(t){return eC(Po,t)}function Vf(t,e){return Po===null&&uo(t),eC(t,e)}function eC(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},_r===null){if(t===null)throw Error(z(308));_r=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else _r=_r.next=e;return n}var s3=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},r3=Mt.unstable_scheduleCallback,i3=Mt.unstable_NormalPriority,At={$$typeof:vr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function X_(){return{controller:new s3,data:new Map,refCount:0}}function kh(t){t.refCount--,t.refCount===0&&r3(i3,function(){t.controller.abort()})}var id=null,Gv=0,$l=0,Pl=null;function a3(t,e){if(id===null){var n=id=[];Gv=0,$l=wb(),Pl={status:"pending",value:void 0,then:function(s){n.push(s)}}}return Gv++,e.then(KE,KE),e}function KE(){if(--Gv===0&&id!==null){Pl!==null&&(Pl.status="fulfilled");var t=id;id=null,$l=0,Pl=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function o3(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(s.status="rejected",s.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),s}var WE=se.S;se.S=function(t,e){mj=qn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&a3(t,e),WE!==null&&WE(t,e)};var to=or(null);function J_(){var t=to.current;return t!==null?t:Le.pooledCache}function gm(t,e){e===null?ze(to,to.current):ze(to,e.pool)}function tC(){var t=J_();return t===null?null:{parent:At._currentValue,pool:t}}var Pc=Error(z(460)),Z_=Error(z(474)),xg=Error(z(542)),np={then:function(){}};function YE(t){return t=t.status,t==="fulfilled"||t==="rejected"}function nC(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(xr,xr),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,XE(t),t;default:if(typeof e.status=="string")e.then(xr,xr);else{if(t=Le,t!==null&&100<t.shellSuspendCounter)throw Error(z(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=s}},function(s){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,XE(t),t}throw no=e,Pc}}function Ma(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(no=n,Pc):n}}var no=null;function QE(){if(no===null)throw Error(z(459));var t=no;return no=null,t}function XE(t){if(t===Pc||t===xg)throw Error(z(483))}var kl=null,Fd=0;function Lf(t){var e=Fd;return Fd+=1,kl===null&&(kl=[]),nC(kl,t,e)}function _u(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Uf(t,e){throw e.$$typeof===KV?Error(z(525)):(t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function sC(t){function e(x,v){if(t){var b=x.deletions;b===null?(x.deletions=[v],x.flags|=16):b.push(v)}}function n(x,v){if(!t)return null;for(;v!==null;)e(x,v),v=v.sibling;return null}function s(x){for(var v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function r(x,v){return x=Tr(x,v),x.index=0,x.sibling=null,x}function i(x,v,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<v?(x.flags|=67108866,v):b):(x.flags|=67108866,v)):(x.flags|=1048576,v)}function a(x){return t&&x.alternate===null&&(x.flags|=67108866),x}function o(x,v,b,R){return v===null||v.tag!==6?(v=f0(b,x.mode,R),v.return=x,v):(v=r(v,b),v.return=x,v)}function c(x,v,b,R){var D=b.type;return D===dl?h(x,v,b.props.children,R,b.key):v!==null&&(v.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===gi&&Ma(D)===v.type)?(v=r(v,b.props),_u(v,b),v.return=x,v):(v=pm(b.type,b.key,b.props,null,x.mode,R),_u(v,b),v.return=x,v)}function u(x,v,b,R){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=m0(b,x.mode,R),v.return=x,v):(v=r(v,b.children||[]),v.return=x,v)}function h(x,v,b,R,D){return v===null||v.tag!==7?(v=eo(b,x.mode,R,D),v.return=x,v):(v=r(v,b),v.return=x,v)}function f(x,v,b){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=f0(""+v,x.mode,b),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case jf:return b=pm(v.type,v.key,v.props,null,x.mode,b),_u(b,v),b.return=x,b;case Uu:return v=m0(v,x.mode,b),v.return=x,v;case gi:return v=Ma(v),f(x,v,b)}if(zu(v)||yu(v))return v=eo(v,x.mode,b,null),v.return=x,v;if(typeof v.then=="function")return f(x,Lf(v),b);if(v.$$typeof===vr)return f(x,Vf(x,v),b);Uf(x,v)}return null}function m(x,v,b,R){var D=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return D!==null?null:o(x,v,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case jf:return b.key===D?c(x,v,b,R):null;case Uu:return b.key===D?u(x,v,b,R):null;case gi:return b=Ma(b),m(x,v,b,R)}if(zu(b)||yu(b))return D!==null?null:h(x,v,b,R,null);if(typeof b.then=="function")return m(x,v,Lf(b),R);if(b.$$typeof===vr)return m(x,v,Vf(x,b),R);Uf(x,b)}return null}function p(x,v,b,R,D){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return x=x.get(b)||null,o(v,x,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case jf:return x=x.get(R.key===null?b:R.key)||null,c(v,x,R,D);case Uu:return x=x.get(R.key===null?b:R.key)||null,u(v,x,R,D);case gi:return R=Ma(R),p(x,v,b,R,D)}if(zu(R)||yu(R))return x=x.get(b)||null,h(v,x,R,D,null);if(typeof R.then=="function")return p(x,v,b,Lf(R),D);if(R.$$typeof===vr)return p(x,v,b,Vf(v,R),D);Uf(v,R)}return null}function _(x,v,b,R){for(var D=null,M=null,A=v,E=v=0,N=null;A!==null&&E<b.length;E++){A.index>E?(N=A,A=null):N=A.sibling;var I=m(x,A,b[E],R);if(I===null){A===null&&(A=N);break}t&&A&&I.alternate===null&&e(x,A),v=i(I,v,E),M===null?D=I:M.sibling=I,M=I,A=N}if(E===b.length)return n(x,A),ye&&pr(x,E),D;if(A===null){for(;E<b.length;E++)A=f(x,b[E],R),A!==null&&(v=i(A,v,E),M===null?D=A:M.sibling=A,M=A);return ye&&pr(x,E),D}for(A=s(A);E<b.length;E++)N=p(A,x,E,b[E],R),N!==null&&(t&&N.alternate!==null&&A.delete(N.key===null?E:N.key),v=i(N,v,E),M===null?D=N:M.sibling=N,M=N);return t&&A.forEach(function(P){return e(x,P)}),ye&&pr(x,E),D}function w(x,v,b,R){if(b==null)throw Error(z(151));for(var D=null,M=null,A=v,E=v=0,N=null,I=b.next();A!==null&&!I.done;E++,I=b.next()){A.index>E?(N=A,A=null):N=A.sibling;var P=m(x,A,I.value,R);if(P===null){A===null&&(A=N);break}t&&A&&P.alternate===null&&e(x,A),v=i(P,v,E),M===null?D=P:M.sibling=P,M=P,A=N}if(I.done)return n(x,A),ye&&pr(x,E),D;if(A===null){for(;!I.done;E++,I=b.next())I=f(x,I.value,R),I!==null&&(v=i(I,v,E),M===null?D=I:M.sibling=I,M=I);return ye&&pr(x,E),D}for(A=s(A);!I.done;E++,I=b.next())I=p(A,x,E,I.value,R),I!==null&&(t&&I.alternate!==null&&A.delete(I.key===null?E:I.key),v=i(I,v,E),M===null?D=I:M.sibling=I,M=I);return t&&A.forEach(function(k){return e(x,k)}),ye&&pr(x,E),D}function T(x,v,b,R){if(typeof b=="object"&&b!==null&&b.type===dl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case jf:e:{for(var D=b.key;v!==null;){if(v.key===D){if(D=b.type,D===dl){if(v.tag===7){n(x,v.sibling),R=r(v,b.props.children),R.return=x,x=R;break e}}else if(v.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===gi&&Ma(D)===v.type){n(x,v.sibling),R=r(v,b.props),_u(R,b),R.return=x,x=R;break e}n(x,v);break}else e(x,v);v=v.sibling}b.type===dl?(R=eo(b.props.children,x.mode,R,b.key),R.return=x,x=R):(R=pm(b.type,b.key,b.props,null,x.mode,R),_u(R,b),R.return=x,x=R)}return a(x);case Uu:e:{for(D=b.key;v!==null;){if(v.key===D)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(x,v.sibling),R=r(v,b.children||[]),R.return=x,x=R;break e}else{n(x,v);break}else e(x,v);v=v.sibling}R=m0(b,x.mode,R),R.return=x,x=R}return a(x);case gi:return b=Ma(b),T(x,v,b,R)}if(zu(b))return _(x,v,b,R);if(yu(b)){if(D=yu(b),typeof D!="function")throw Error(z(150));return b=D.call(b),w(x,v,b,R)}if(typeof b.then=="function")return T(x,v,Lf(b),R);if(b.$$typeof===vr)return T(x,v,Vf(x,b),R);Uf(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,v!==null&&v.tag===6?(n(x,v.sibling),R=r(v,b),R.return=x,x=R):(n(x,v),R=f0(b,x.mode,R),R.return=x,x=R),a(x)):n(x,v)}return function(x,v,b,R){try{Fd=0;var D=T(x,v,b,R);return kl=null,D}catch(A){if(A===Pc||A===xg)throw A;var M=zn(29,A,null,x.mode);return M.lanes=R,M.return=x,M}finally{}}}var ho=sC(!0),rC=sC(!1),yi=!1;function eb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $v(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ki(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Di(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,we&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,e=Zm(t),YR(t,null,n),e}return vg(t,s,e,n),Zm(t)}function ad(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,wR(t,n)}}function g0(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?r=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Kv=!1;function od(){if(Kv){var t=Pl;if(t!==null)throw t}}function ld(t,e,n,s){Kv=!1;var r=t.updateQueue;yi=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=r.baseState;a=0,h=u=c=null,o=i;do{var m=o.lane&-536870913,p=m!==o.lane;if(p?(pe&m)===m:(s&m)===m){m!==0&&m===$l&&(Kv=!0),h!==null&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var _=t,w=o;m=e;var T=n;switch(w.tag){case 1:if(_=w.payload,typeof _=="function"){f=_.call(T,f,m);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=w.payload,m=typeof _=="function"?_.call(T,f,m):_,m==null)break e;f=Qe({},f,m);break e;case 2:yi=!0}}m=o.callback,m!==null&&(t.flags|=64,p&&(t.flags|=8192),p=r.callbacks,p===null?r.callbacks=[m]:p.push(m))}else p={lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=p,c=f):h=h.next=p,a|=m;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;p=o,o=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);h===null&&(c=f),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=h,i===null&&(r.shared.lanes=0),Wi|=a,t.lanes=a,t.memoizedState=f}}function iC(t,e){if(typeof t!="function")throw Error(z(191,t));t.call(e)}function aC(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)iC(n[t],e)}var Kl=or(null),sp=or(0);function JE(t,e){t=Mr,ze(sp,t),ze(Kl,e),Mr=t|e.baseLanes}function Wv(){ze(sp,Mr),ze(Kl,Kl.current)}function tb(){Mr=sp.current,Bt(Kl),Bt(sp)}var Xn=or(null),ps=null;function xi(t){var e=t.alternate;ze(gt,gt.current&1),ze(Xn,t),ps===null&&(e===null||Kl.current!==null||e.memoizedState!==null)&&(ps=t)}function Yv(t){ze(gt,gt.current),ze(Xn,t),ps===null&&(ps=t)}function oC(t){t.tag===22?(ze(gt,gt.current),ze(Xn,t),ps===null&&(ps=t)):_i()}function _i(){ze(gt,gt.current),ze(Xn,Xn.current)}function Ln(t){Bt(Xn),ps===t&&(ps=null),Bt(gt)}var gt=or(0);function rp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||mx(n)||px(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pr=0,ae=null,ke=null,Et=null,ip=!1,Dl=!1,fo=!1,ap=0,Bd=0,Ml=null,l3=0;function ct(){throw Error(z(321))}function nb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qn(t[n],e[n]))return!1;return!0}function sb(t,e,n,s,r,i){return Pr=i,ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,se.H=t===null||t.memoizedState===null?LC:mb,fo=!1,i=n(s,r),fo=!1,Dl&&(i=cC(e,n,s,r)),lC(t),i}function lC(t){se.H=qd;var e=ke!==null&&ke.next!==null;if(Pr=0,Et=ke=ae=null,ip=!1,Bd=0,Ml=null,e)throw Error(z(300));t===null||Nt||(t=t.dependencies,t!==null&&tp(t)&&(Nt=!0))}function cC(t,e,n,s){ae=t;var r=0;do{if(Dl&&(Ml=null),Bd=0,Dl=!1,25<=r)throw Error(z(301));if(r+=1,Et=ke=null,t.updateQueue!=null){var i=t.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}se.H=UC,i=e(n,s)}while(Dl);return i}function c3(){var t=se.H,e=t.useState()[0];return e=typeof e.then=="function"?Dh(e):e,t=t.useState()[0],(ke!==null?ke.memoizedState:null)!==t&&(ae.flags|=1024),e}function rb(){var t=ap!==0;return ap=0,t}function ib(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function ab(t){if(ip){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}ip=!1}Pr=0,Et=ke=ae=null,Dl=!1,Bd=ap=0,Ml=null}function pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?ae.memoizedState=Et=t:Et=Et.next=t,Et}function vt(){if(ke===null){var t=ae.alternate;t=t!==null?t.memoizedState:null}else t=ke.next;var e=Et===null?ae.memoizedState:Et.next;if(e!==null)Et=e,ke=t;else{if(t===null)throw ae.alternate===null?Error(z(467)):Error(z(310));ke=t,t={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Et===null?ae.memoizedState=Et=t:Et=Et.next=t}return Et}function _g(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dh(t){var e=Bd;return Bd+=1,Ml===null&&(Ml=[]),t=nC(Ml,t,e),e=ae,(Et===null?e.memoizedState:Et.next)===null&&(e=e.alternate,se.H=e===null||e.memoizedState===null?LC:mb),t}function bg(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Dh(t);if(t.$$typeof===vr)return Qt(t)}throw Error(z(438,String(t)))}function ob(t){var e=null,n=ae.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=ae.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=_g(),ae.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=WV;return e.index++,n}function kr(t,e){return typeof e=="function"?e(t):e}function ym(t){var e=vt();return lb(e,ke,t)}function lb(t,e,n){var s=t.queue;if(s===null)throw Error(z(311));s.lastRenderedReducer=n;var r=t.baseQueue,i=s.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}e.baseQueue=r=i,s.pending=null}if(i=t.baseState,r===null)t.memoizedState=i;else{e=r.next;var o=a=null,c=null,u=e,h=!1;do{var f=u.lane&-536870913;if(f!==u.lane?(pe&f)===f:(Pr&f)===f){var m=u.revertLane;if(m===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===$l&&(h=!0);else if((Pr&m)===m){u=u.next,m===$l&&(h=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(o=c=f,a=i):c=c.next=f,ae.lanes|=m,Wi|=m;f=u.action,fo&&n(i,f),i=u.hasEagerState?u.eagerState:n(i,f)}else m={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(o=c=m,a=i):c=c.next=m,ae.lanes|=f,Wi|=f;u=u.next}while(u!==null&&u!==e);if(c===null?a=i:c.next=o,!Qn(i,t.memoizedState)&&(Nt=!0,h&&(n=Pl,n!==null)))throw n;t.memoizedState=i,t.baseState=a,t.baseQueue=c,s.lastRenderedState=i}return r===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function y0(t){var e=vt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do i=t(i,a.action),a=a.next;while(a!==r);Qn(i,e.memoizedState)||(Nt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function uC(t,e,n){var s=ae,r=vt(),i=ye;if(i){if(n===void 0)throw Error(z(407));n=n()}else n=e();var a=!Qn((ke||r).memoizedState,n);if(a&&(r.memoizedState=n,Nt=!0),r=r.queue,cb(fC.bind(null,s,r,t),[t]),r.getSnapshot!==e||a||Et!==null&&Et.memoizedState.tag&1){if(s.flags|=2048,Wl(9,{destroy:void 0},hC.bind(null,s,r,n,e),null),Le===null)throw Error(z(349));i||Pr&127||dC(s,e,n)}return n}function dC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ae.updateQueue,e===null?(e=_g(),ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hC(t,e,n,s){e.value=n,e.getSnapshot=s,mC(e)&&pC(t)}function fC(t,e,n){return n(function(){mC(e)&&pC(t)})}function mC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qn(t,n)}catch{return!0}}function pC(t){var e=jo(t,2);e!==null&&jn(e,t,2)}function Qv(t){var e=pn();if(typeof t=="function"){var n=t;if(t=n(),fo){Ti(!0);try{n()}finally{Ti(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kr,lastRenderedState:t},e}function gC(t,e,n,s){return t.baseState=n,lb(t,ke,typeof s=="function"?s:kr)}function u3(t,e,n,s,r){if(Tg(t))throw Error(z(485));if(t=e.action,t!==null){var i={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){i.listeners.push(a)}};se.T!==null?n(!0):i.isTransition=!1,s(i),n=e.pending,n===null?(i.next=e.pending=i,yC(e,i)):(i.next=n.next,e.pending=n.next=i)}}function yC(t,e){var n=e.action,s=e.payload,r=t.state;if(e.isTransition){var i=se.T,a={};se.T=a;try{var o=n(r,s),c=se.S;c!==null&&c(a,o),ZE(t,e,o)}catch(u){Xv(t,e,u)}finally{i!==null&&a.types!==null&&(i.types=a.types),se.T=i}}else try{i=n(r,s),ZE(t,e,i)}catch(u){Xv(t,e,u)}}function ZE(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){eS(t,e,s)},function(s){return Xv(t,e,s)}):eS(t,e,n)}function eS(t,e,n){e.status="fulfilled",e.value=n,vC(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,yC(t,n)))}function Xv(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,vC(e),e=e.next;while(e!==s)}t.action=null}function vC(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function xC(t,e){return e}function tS(t,e){if(ye){var n=Le.formState;if(n!==null){e:{var s=ae;if(ye){if(Ge){t:{for(var r=Ge,i=hs;r.nodeType!==8;){if(!i){r=null;break t}if(r=gs(r.nextSibling),r===null){r=null;break t}}i=r.data,r=i==="F!"||i==="F"?r:null}if(r){Ge=gs(r.nextSibling),s=r.data==="F!";break e}}$i(s)}s=!1}s&&(e=n[0])}}return n=pn(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xC,lastRenderedState:e},n.queue=s,n=MC.bind(null,ae,s),s.dispatch=n,s=Qv(!1),i=fb.bind(null,ae,!1,s.queue),s=pn(),r={state:e,dispatch:null,action:t,pending:null},s.queue=r,n=u3.bind(null,ae,r,i,n),r.dispatch=n,s.memoizedState=t,[e,n,!1]}function nS(t){var e=vt();return _C(e,ke,t)}function _C(t,e,n){if(e=lb(t,e,xC)[0],t=ym(kr)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=Dh(e)}catch(a){throw a===Pc?xg:a}else s=e;e=vt();var r=e.queue,i=r.dispatch;return n!==e.memoizedState&&(ae.flags|=2048,Wl(9,{destroy:void 0},d3.bind(null,r,n),null)),[s,i,t]}function d3(t,e){t.action=e}function sS(t){var e=vt(),n=ke;if(n!==null)return _C(e,n,t);vt(),e=e.memoizedState,n=vt();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function Wl(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=ae.updateQueue,e===null&&(e=_g(),ae.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function bC(){return vt().memoizedState}function vm(t,e,n,s){var r=pn();ae.flags|=t,r.memoizedState=Wl(1|e,{destroy:void 0},n,s===void 0?null:s)}function wg(t,e,n,s){var r=vt();s=s===void 0?null:s;var i=r.memoizedState.inst;ke!==null&&s!==null&&nb(s,ke.memoizedState.deps)?r.memoizedState=Wl(e,i,n,s):(ae.flags|=t,r.memoizedState=Wl(1|e,i,n,s))}function rS(t,e){vm(8390656,8,t,e)}function cb(t,e){wg(2048,8,t,e)}function h3(t){ae.flags|=4;var e=ae.updateQueue;if(e===null)e=_g(),ae.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function wC(t){var e=vt().memoizedState;return h3({ref:e,nextImpl:t}),function(){if(we&2)throw Error(z(440));return e.impl.apply(void 0,arguments)}}function TC(t,e){return wg(4,2,t,e)}function EC(t,e){return wg(4,4,t,e)}function SC(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function AC(t,e,n){n=n!=null?n.concat([t]):null,wg(4,4,SC.bind(null,e,t),n)}function ub(){}function NC(t,e){var n=vt();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&nb(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function IC(t,e){var n=vt();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&nb(e,s[1]))return s[0];if(s=t(),fo){Ti(!0);try{t()}finally{Ti(!1)}}return n.memoizedState=[s,e],s}function db(t,e,n){return n===void 0||Pr&1073741824&&!(pe&261930)?t.memoizedState=e:(t.memoizedState=n,t=gj(),ae.lanes|=t,Wi|=t,n)}function RC(t,e,n,s){return Qn(n,e)?n:Kl.current!==null?(t=db(t,n,s),Qn(t,e)||(Nt=!0),t):!(Pr&42)||Pr&1073741824&&!(pe&261930)?(Nt=!0,t.memoizedState=n):(t=gj(),ae.lanes|=t,Wi|=t,e)}function CC(t,e,n,s,r){var i=Te.p;Te.p=i!==0&&8>i?i:8;var a=se.T,o={};se.T=o,fb(t,!1,e,n);try{var c=r(),u=se.S;if(u!==null&&u(o,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=o3(c,s);cd(t,e,h,$n(t))}else cd(t,e,s,$n(t))}catch(f){cd(t,e,{then:function(){},status:"rejected",reason:f},$n())}finally{Te.p=i,a!==null&&o.types!==null&&(a.types=o.types),se.T=a}}function f3(){}function Jv(t,e,n,s){if(t.tag!==5)throw Error(z(476));var r=jC(t).queue;CC(t,r,e,Za,n===null?f3:function(){return PC(t),n(s)})}function jC(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Za,baseState:Za,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kr,lastRenderedState:Za},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kr,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function PC(t){var e=jC(t);e.next===null&&(e=t.alternate.memoizedState),cd(t,e.next.queue,{},$n())}function hb(){return Qt($d)}function kC(){return vt().memoizedState}function DC(){return vt().memoizedState}function m3(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=$n();t=ki(n);var s=Di(e,t,n);s!==null&&(jn(s,e,n),ad(s,e,n)),e={cache:X_()},t.payload=e;return}e=e.return}}function p3(t,e,n){var s=$n();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Tg(t)?OC(e,n):(n=K_(t,e,n,s),n!==null&&(jn(n,t,s),VC(n,e,s)))}function MC(t,e,n){var s=$n();cd(t,e,n,s)}function cd(t,e,n,s){var r={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Tg(t))OC(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,n);if(r.hasEagerState=!0,r.eagerState=o,Qn(o,a))return vg(t,e,r,0),Le===null&&yg(),!1}catch{}finally{}if(n=K_(t,e,r,s),n!==null)return jn(n,t,s),VC(n,e,s),!0}return!1}function fb(t,e,n,s){if(s={lane:2,revertLane:wb(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Tg(t)){if(e)throw Error(z(479))}else e=K_(t,n,s,2),e!==null&&jn(e,t,2)}function Tg(t){var e=t.alternate;return t===ae||e!==null&&e===ae}function OC(t,e){Dl=ip=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function VC(t,e,n){if(n&4194048){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,wR(t,n)}}var qd={readContext:Qt,use:bg,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct,useHostTransitionStatus:ct,useFormState:ct,useActionState:ct,useOptimistic:ct,useMemoCache:ct,useCacheRefresh:ct};qd.useEffectEvent=ct;var LC={readContext:Qt,use:bg,useCallback:function(t,e){return pn().memoizedState=[t,e===void 0?null:e],t},useContext:Qt,useEffect:rS,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,vm(4194308,4,SC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return vm(4194308,4,t,e)},useInsertionEffect:function(t,e){vm(4,2,t,e)},useMemo:function(t,e){var n=pn();e=e===void 0?null:e;var s=t();if(fo){Ti(!0);try{t()}finally{Ti(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=pn();if(n!==void 0){var r=n(e);if(fo){Ti(!0);try{n(e)}finally{Ti(!1)}}}else r=e;return s.memoizedState=s.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},s.queue=t,t=t.dispatch=p3.bind(null,ae,t),[s.memoizedState,t]},useRef:function(t){var e=pn();return t={current:t},e.memoizedState=t},useState:function(t){t=Qv(t);var e=t.queue,n=MC.bind(null,ae,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:ub,useDeferredValue:function(t,e){var n=pn();return db(n,t,e)},useTransition:function(){var t=Qv(!1);return t=CC.bind(null,ae,t.queue,!0,!1),pn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=ae,r=pn();if(ye){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Le===null)throw Error(z(349));pe&127||dC(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,rS(fC.bind(null,s,i,t),[t]),s.flags|=2048,Wl(9,{destroy:void 0},hC.bind(null,s,i,n,e),null),n},useId:function(){var t=pn(),e=Le.identifierPrefix;if(ye){var n=Gs,s=Hs;n=(s&~(1<<32-Gn(s)-1)).toString(32)+n,e="_"+e+"R_"+n,n=ap++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=l3++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:hb,useFormState:tS,useActionState:tS,useOptimistic:function(t){var e=pn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=fb.bind(null,ae,!0,n),n.dispatch=e,[t,e]},useMemoCache:ob,useCacheRefresh:function(){return pn().memoizedState=m3.bind(null,ae)},useEffectEvent:function(t){var e=pn(),n={impl:t};return e.memoizedState=n,function(){if(we&2)throw Error(z(440));return n.impl.apply(void 0,arguments)}}},mb={readContext:Qt,use:bg,useCallback:NC,useContext:Qt,useEffect:cb,useImperativeHandle:AC,useInsertionEffect:TC,useLayoutEffect:EC,useMemo:IC,useReducer:ym,useRef:bC,useState:function(){return ym(kr)},useDebugValue:ub,useDeferredValue:function(t,e){var n=vt();return RC(n,ke.memoizedState,t,e)},useTransition:function(){var t=ym(kr)[0],e=vt().memoizedState;return[typeof t=="boolean"?t:Dh(t),e]},useSyncExternalStore:uC,useId:kC,useHostTransitionStatus:hb,useFormState:nS,useActionState:nS,useOptimistic:function(t,e){var n=vt();return gC(n,ke,t,e)},useMemoCache:ob,useCacheRefresh:DC};mb.useEffectEvent=wC;var UC={readContext:Qt,use:bg,useCallback:NC,useContext:Qt,useEffect:cb,useImperativeHandle:AC,useInsertionEffect:TC,useLayoutEffect:EC,useMemo:IC,useReducer:y0,useRef:bC,useState:function(){return y0(kr)},useDebugValue:ub,useDeferredValue:function(t,e){var n=vt();return ke===null?db(n,t,e):RC(n,ke.memoizedState,t,e)},useTransition:function(){var t=y0(kr)[0],e=vt().memoizedState;return[typeof t=="boolean"?t:Dh(t),e]},useSyncExternalStore:uC,useId:kC,useHostTransitionStatus:hb,useFormState:sS,useActionState:sS,useOptimistic:function(t,e){var n=vt();return ke!==null?gC(n,ke,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:ob,useCacheRefresh:DC};UC.useEffectEvent=wC;function v0(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Zv={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=$n(),r=ki(s);r.payload=e,n!=null&&(r.callback=n),e=Di(t,r,s),e!==null&&(jn(e,t,s),ad(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=$n(),r=ki(s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Di(t,r,s),e!==null&&(jn(e,t,s),ad(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$n(),s=ki(n);s.tag=2,e!=null&&(s.callback=e),e=Di(t,s,n),e!==null&&(jn(e,t,n),ad(e,t,n))}};function iS(t,e,n,s,r,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,a):e.prototype&&e.prototype.isPureReactComponent?!Ld(n,s)||!Ld(r,i):!0}function aS(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Zv.enqueueReplaceState(e,e.state,null)}function mo(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=Qe({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function zC(t){Jm(t)}function FC(t){console.error(t)}function BC(t){Jm(t)}function op(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function oS(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function ex(t,e,n){return n=ki(n),n.tag=3,n.payload={element:null},n.callback=function(){op(t,e)},n}function qC(t){return t=ki(t),t.tag=3,t}function HC(t,e,n,s){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=s.value;t.payload=function(){return r(i)},t.callback=function(){oS(e,n,s)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){oS(e,n,s),typeof r!="function"&&(Mi===null?Mi=new Set([this]):Mi.add(this));var o=s.stack;this.componentDidCatch(s.value,{componentStack:o!==null?o:""})})}function g3(t,e,n,s,r){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&jc(e,n,r,!0),n=Xn.current,n!==null){switch(n.tag){case 31:case 13:return ps===null?hp():n.alternate===null&&dt===0&&(dt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,s===np?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),R0(t,s,r)),!1;case 22:return n.flags|=65536,s===np?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),R0(t,s,r)),!1}throw Error(z(435,n.tag))}return R0(t,s,r),hp(),!1}if(ye)return e=Xn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,s!==Fv&&(t=Error(z(422),{cause:s}),zd(ds(t,n)))):(s!==Fv&&(e=Error(z(423),{cause:s}),zd(ds(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,s=ds(s,n),r=ex(t.stateNode,s,r),g0(t,r),dt!==4&&(dt=2)),!1;var i=Error(z(520),{cause:s});if(i=ds(i,n),hd===null?hd=[i]:hd.push(i),dt!==4&&(dt=2),e===null)return!0;s=ds(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=ex(n.stateNode,s,t),g0(n,t),!1;case 1:if(e=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Mi===null||!Mi.has(i))))return n.flags|=65536,r&=-r,n.lanes|=r,r=qC(r),HC(r,t,n,s),g0(n,r),!1}n=n.return}while(n!==null);return!1}var pb=Error(z(461)),Nt=!1;function Gt(t,e,n,s){e.child=t===null?rC(e,null,n,s):ho(e,t.child,n,s)}function lS(t,e,n,s,r){n=n.render;var i=e.ref;if("ref"in s){var a={};for(var o in s)o!=="ref"&&(a[o]=s[o])}else a=s;return uo(e),s=sb(t,e,n,a,i,r),o=rb(),t!==null&&!Nt?(ib(t,e,r),Dr(t,e,r)):(ye&&o&&Y_(e),e.flags|=1,Gt(t,e,s,r),e.child)}function cS(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!W_(i)&&i.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=i,GC(t,e,i,s,r)):(t=pm(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!gb(t,r)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ld,n(a,s)&&t.ref===e.ref)return Dr(t,e,r)}return e.flags|=1,t=Tr(i,s),t.ref=e.ref,t.return=e,e.child=t}function GC(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(Ld(i,s)&&t.ref===e.ref)if(Nt=!1,e.pendingProps=s=i,gb(t,r))t.flags&131072&&(Nt=!0);else return e.lanes=t.lanes,Dr(t,e,r)}return tx(t,e,n,s,r)}function $C(t,e,n,s){var r=s.children,i=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if(e.flags&128){if(i=i!==null?i.baseLanes|n:n,t!==null){for(s=e.child=t.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;s=r&~i}else s=0,e.child=null;return uS(t,e,i,n,s)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&gm(e,i!==null?i.cachePool:null),i!==null?JE(e,i):Wv(),oC(e);else return s=e.lanes=536870912,uS(t,e,i!==null?i.baseLanes|n:n,n,s)}else i!==null?(gm(e,i.cachePool),JE(e,i),_i(),e.memoizedState=null):(t!==null&&gm(e,null),Wv(),_i());return Gt(t,e,r,n),e.child}function Bu(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function uS(t,e,n,s,r){var i=J_();return i=i===null?null:{parent:At._currentValue,pool:i},e.memoizedState={baseLanes:n,cachePool:i},t!==null&&gm(e,null),Wv(),oC(e),t!==null&&jc(t,e,s,!0),e.childLanes=r,null}function xm(t,e){return e=lp({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function dS(t,e,n){return ho(e,t.child,null,n),t=xm(e,e.pendingProps),t.flags|=2,Ln(e),e.memoizedState=null,t}function y3(t,e,n){var s=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(ye){if(s.mode==="hidden")return t=xm(e,s),e.lanes=536870912,Bu(null,t);if(Yv(e),(t=Ge)?(t=Lj(t,hs),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Gi!==null?{id:Hs,overflow:Gs}:null,retryLane:536870912,hydrationErrors:null},n=XR(t),n.return=e,e.child=n,Wt=e,Ge=null)):t=null,t===null)throw $i(e);return e.lanes=536870912,null}return xm(e,s)}var i=t.memoizedState;if(i!==null){var a=i.dehydrated;if(Yv(e),r)if(e.flags&256)e.flags&=-257,e=dS(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(z(558));else if(Nt||jc(t,e,n,!1),r=(n&t.childLanes)!==0,Nt||r){if(s=Le,s!==null&&(a=TR(s,n),a!==0&&a!==i.retryLane))throw i.retryLane=a,jo(t,a),jn(s,t,a),pb;hp(),e=dS(t,e,n)}else t=i.treeContext,Ge=gs(a.nextSibling),Wt=e,ye=!0,Pi=null,hs=!1,t!==null&&ZR(e,t),e=xm(e,s),e.flags|=4096;return e}return t=Tr(t.child,{mode:s.mode,children:s.children}),t.ref=e.ref,e.child=t,t.return=e,t}function _m(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(z(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function tx(t,e,n,s,r){return uo(e),n=sb(t,e,n,s,void 0,r),s=rb(),t!==null&&!Nt?(ib(t,e,r),Dr(t,e,r)):(ye&&s&&Y_(e),e.flags|=1,Gt(t,e,n,r),e.child)}function hS(t,e,n,s,r,i){return uo(e),e.updateQueue=null,n=cC(e,s,n,r),lC(t),s=rb(),t!==null&&!Nt?(ib(t,e,i),Dr(t,e,i)):(ye&&s&&Y_(e),e.flags|=1,Gt(t,e,n,i),e.child)}function fS(t,e,n,s,r){if(uo(e),e.stateNode===null){var i=xl,a=n.contextType;typeof a=="object"&&a!==null&&(i=Qt(a)),i=new n(s,i),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Zv,e.stateNode=i,i._reactInternals=e,i=e.stateNode,i.props=s,i.state=e.memoizedState,i.refs={},eb(e),a=n.contextType,i.context=typeof a=="object"&&a!==null?Qt(a):xl,i.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(v0(e,n,a,s),i.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(a=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),a!==i.state&&Zv.enqueueReplaceState(i,i.state,null),ld(e,s,i,r),od(),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){i=e.stateNode;var o=e.memoizedProps,c=mo(n,o);i.props=c;var u=i.context,h=n.contextType;a=xl,typeof h=="object"&&h!==null&&(a=Qt(h));var f=n.getDerivedStateFromProps;h=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o||u!==a)&&aS(e,i,s,a),yi=!1;var m=e.memoizedState;i.state=m,ld(e,s,i,r),od(),u=e.memoizedState,o||m!==u||yi?(typeof f=="function"&&(v0(e,n,f,s),u=e.memoizedState),(c=yi||iS(e,n,c,s,m,u,a))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=u),i.props=s,i.state=u,i.context=a,s=c):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{i=e.stateNode,$v(t,e),a=e.memoizedProps,h=mo(n,a),i.props=h,f=e.pendingProps,m=i.context,u=n.contextType,c=xl,typeof u=="object"&&u!==null&&(c=Qt(u)),o=n.getDerivedStateFromProps,(u=typeof o=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==f||m!==c)&&aS(e,i,s,c),yi=!1,m=e.memoizedState,i.state=m,ld(e,s,i,r),od();var p=e.memoizedState;a!==f||m!==p||yi||t!==null&&t.dependencies!==null&&tp(t.dependencies)?(typeof o=="function"&&(v0(e,n,o,s),p=e.memoizedState),(h=yi||iS(e,n,h,s,m,p,c)||t!==null&&t.dependencies!==null&&tp(t.dependencies))?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,p,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,p,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=p),i.props=s,i.state=p,i.context=c,s=h):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),s=!1)}return i=s,_m(t,e),s=(e.flags&128)!==0,i||s?(i=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:i.render(),e.flags|=1,t!==null&&s?(e.child=ho(e,t.child,null,r),e.child=ho(e,null,n,r)):Gt(t,e,n,r),e.memoizedState=i.state,t=e.child):t=Dr(t,e,r),t}function mS(t,e,n,s){return co(),e.flags|=256,Gt(t,e,n,s),e.child}var x0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _0(t){return{baseLanes:t,cachePool:tC()}}function b0(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Fn),t}function KC(t,e,n){var s=e.pendingProps,r=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(gt.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(ye){if(r?xi(e):_i(),(t=Ge)?(t=Lj(t,hs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Gi!==null?{id:Hs,overflow:Gs}:null,retryLane:536870912,hydrationErrors:null},n=XR(t),n.return=e,e.child=n,Wt=e,Ge=null)):t=null,t===null)throw $i(e);return px(t)?e.lanes=32:e.lanes=536870912,null}var o=s.children;return s=s.fallback,r?(_i(),r=e.mode,o=lp({mode:"hidden",children:o},r),s=eo(s,r,n,null),o.return=e,s.return=e,o.sibling=s,e.child=o,s=e.child,s.memoizedState=_0(n),s.childLanes=b0(t,a,n),e.memoizedState=x0,Bu(null,s)):(xi(e),nx(e,o))}var c=t.memoizedState;if(c!==null&&(o=c.dehydrated,o!==null)){if(i)e.flags&256?(xi(e),e.flags&=-257,e=w0(t,e,n)):e.memoizedState!==null?(_i(),e.child=t.child,e.flags|=128,e=null):(_i(),o=s.fallback,r=e.mode,s=lp({mode:"visible",children:s.children},r),o=eo(o,r,n,null),o.flags|=2,s.return=e,o.return=e,s.sibling=o,e.child=s,ho(e,t.child,null,n),s=e.child,s.memoizedState=_0(n),s.childLanes=b0(t,a,n),e.memoizedState=x0,e=Bu(null,s));else if(xi(e),px(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var u=a.dgst;a=u,s=Error(z(419)),s.stack="",s.digest=a,zd({value:s,source:null,stack:null}),e=w0(t,e,n)}else if(Nt||jc(t,e,n,!1),a=(n&t.childLanes)!==0,Nt||a){if(a=Le,a!==null&&(s=TR(a,n),s!==0&&s!==c.retryLane))throw c.retryLane=s,jo(t,s),jn(a,t,s),pb;mx(o)||hp(),e=w0(t,e,n)}else mx(o)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,Ge=gs(o.nextSibling),Wt=e,ye=!0,Pi=null,hs=!1,t!==null&&ZR(e,t),e=nx(e,s.children),e.flags|=4096);return e}return r?(_i(),o=s.fallback,r=e.mode,c=t.child,u=c.sibling,s=Tr(c,{mode:"hidden",children:s.children}),s.subtreeFlags=c.subtreeFlags&65011712,u!==null?o=Tr(u,o):(o=eo(o,r,n,null),o.flags|=2),o.return=e,s.return=e,s.sibling=o,e.child=s,Bu(null,s),s=e.child,o=t.child.memoizedState,o===null?o=_0(n):(r=o.cachePool,r!==null?(c=At._currentValue,r=r.parent!==c?{parent:c,pool:c}:r):r=tC(),o={baseLanes:o.baseLanes|n,cachePool:r}),s.memoizedState=o,s.childLanes=b0(t,a,n),e.memoizedState=x0,Bu(t.child,s)):(xi(e),n=t.child,t=n.sibling,n=Tr(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function nx(t,e){return e=lp({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function lp(t,e){return t=zn(22,t,null,e),t.lanes=0,t}function w0(t,e,n){return ho(e,t.child,null,n),t=nx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pS(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),qv(t.return,e,n)}function T0(t,e,n,s,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r,treeForkCount:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=r,a.treeForkCount=i)}function WC(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;s=s.children;var a=gt.current,o=(a&2)!==0;if(o?(a=a&1|2,e.flags|=128):a&=1,ze(gt,a),Gt(t,e,s,n),s=ye?Ud:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pS(t,n,e);else if(t.tag===19)pS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&rp(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),T0(e,!1,r,n,i,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&rp(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}T0(e,!0,n,null,i,s);break;case"together":T0(e,!1,null,null,void 0,s);break;default:e.memoizedState=null}return e.child}function Dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wi|=e.lanes,!(n&e.childLanes))if(t!==null){if(jc(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gb(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&tp(t)))}function v3(t,e,n){switch(e.tag){case 3:Wm(e,e.stateNode.containerInfo),vi(e,At,t.memoizedState.cache),co();break;case 27:case 5:Cv(e);break;case 4:Wm(e,e.stateNode.containerInfo);break;case 10:vi(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Yv(e),null;break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(xi(e),e.flags|=128,null):n&e.child.childLanes?KC(t,e,n):(xi(e),t=Dr(t,e,n),t!==null?t.sibling:null);xi(e);break;case 19:var r=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(jc(t,e,n,!1),s=(n&e.childLanes)!==0),r){if(s)return WC(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ze(gt,gt.current),s)break;return null;case 22:return e.lanes=0,$C(t,e,n,e.pendingProps);case 24:vi(e,At,t.memoizedState.cache)}return Dr(t,e,n)}function YC(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Nt=!0;else{if(!gb(t,n)&&!(e.flags&128))return Nt=!1,v3(t,e,n);Nt=!!(t.flags&131072)}else Nt=!1,ye&&e.flags&1048576&&JR(e,Ud,e.index);switch(e.lanes=0,e.tag){case 16:e:{var s=e.pendingProps;if(t=Ma(e.elementType),e.type=t,typeof t=="function")W_(t)?(s=mo(t,s),e.tag=1,e=fS(null,e,t,s,n)):(e.tag=0,e=tx(null,e,t,s,n));else{if(t!=null){var r=t.$$typeof;if(r===D_){e.tag=11,e=lS(null,e,t,s,n);break e}else if(r===M_){e.tag=14,e=cS(null,e,t,s,n);break e}}throw e=Iv(t)||t,Error(z(306,e,""))}}return e;case 0:return tx(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,r=mo(s,e.pendingProps),fS(t,e,s,r,n);case 3:e:{if(Wm(e,e.stateNode.containerInfo),t===null)throw Error(z(387));s=e.pendingProps;var i=e.memoizedState;r=i.element,$v(t,e),ld(e,s,null,n);var a=e.memoizedState;if(s=a.cache,vi(e,At,s),s!==i.cache&&Hv(e,[At],n,!0),od(),s=a.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){e=mS(t,e,s,n);break e}else if(s!==r){r=ds(Error(z(424)),e),zd(r),e=mS(t,e,s,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ge=gs(t.firstChild),Wt=e,ye=!0,Pi=null,hs=!0,n=rC(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(co(),s===r){e=Dr(t,e,n);break e}Gt(t,e,s,n)}e=e.child}return e;case 26:return _m(t,e),t===null?(n=MS(e.type,null,e.pendingProps,null))?e.memoizedState=n:ye||(n=e.type,t=e.pendingProps,s=gp(ji.current).createElement(n),s[Kt]=e,s[Pn]=t,Jt(s,n,t),Ft(s),e.stateNode=s):e.memoizedState=MS(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Cv(e),t===null&&ye&&(s=e.stateNode=Uj(e.type,e.pendingProps,ji.current),Wt=e,hs=!0,r=Ge,da(e.type)?(gx=r,Ge=gs(s.firstChild)):Ge=r),Gt(t,e,e.pendingProps.children,n),_m(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&ye&&((r=s=Ge)&&(s=W3(s,e.type,e.pendingProps,hs),s!==null?(e.stateNode=s,Wt=e,Ge=gs(s.firstChild),hs=!1,r=!0):r=!1),r||$i(e)),Cv(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,hx(r,i)?s=null:a!==null&&hx(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=sb(t,e,c3,null,null,n),$d._currentValue=r),_m(t,e),Gt(t,e,s,n),e.child;case 6:return t===null&&ye&&((t=n=Ge)&&(n=Y3(n,e.pendingProps,hs),n!==null?(e.stateNode=n,Wt=e,Ge=null,t=!0):t=!1),t||$i(e)),null;case 13:return KC(t,e,n);case 4:return Wm(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=ho(e,null,s,n):Gt(t,e,s,n),e.child;case 11:return lS(t,e,e.type,e.pendingProps,n);case 7:return Gt(t,e,e.pendingProps,n),e.child;case 8:return Gt(t,e,e.pendingProps.children,n),e.child;case 12:return Gt(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,vi(e,e.type,s.value),Gt(t,e,s.children,n),e.child;case 9:return r=e.type._context,s=e.pendingProps.children,uo(e),r=Qt(r),s=s(r),e.flags|=1,Gt(t,e,s,n),e.child;case 14:return cS(t,e,e.type,e.pendingProps,n);case 15:return GC(t,e,e.type,e.pendingProps,n);case 19:return WC(t,e,n);case 31:return y3(t,e,n);case 22:return $C(t,e,n,e.pendingProps);case 24:return uo(e),s=Qt(At),t===null?(r=J_(),r===null&&(r=Le,i=X_(),r.pooledCache=i,i.refCount++,i!==null&&(r.pooledCacheLanes|=n),r=i),e.memoizedState={parent:s,cache:r},eb(e),vi(e,At,r)):(t.lanes&n&&($v(t,e),ld(e,null,null,n),od()),r=t.memoizedState,i=e.memoizedState,r.parent!==s?(r={parent:s,cache:s},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),vi(e,At,s)):(s=i.cache,vi(e,At,s),s!==r.cache&&Hv(e,[At],n,!0))),Gt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(z(156,e.tag))}function ur(t){t.flags|=4}function E0(t,e,n,s,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(xj())t.flags|=8192;else throw no=np,Z_}else t.flags&=-16777217}function gS(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!Bj(e))if(xj())t.flags|=8192;else throw no=np,Z_}function zf(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?_R():536870912,t.lanes|=e,Yl|=e)}function bu(t,e){if(!ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function He(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&65011712,s|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function x3(t,e,n){var s=e.pendingProps;switch(Q_(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(e),null;case 1:return He(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),Er(At),ql(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Go(e)?ur(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,p0())),He(e),null;case 26:var r=e.type,i=e.memoizedState;return t===null?(ur(e),i!==null?(He(e),gS(e,i)):(He(e),E0(e,r,null,s,n))):i?i!==t.memoizedState?(ur(e),He(e),gS(e,i)):(He(e),e.flags&=-16777217):(t=t.memoizedProps,t!==s&&ur(e),He(e),E0(e,r,t,s,n)),null;case 27:if(Ym(e),n=ji.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&ur(e);else{if(!s){if(e.stateNode===null)throw Error(z(166));return He(e),null}t=Qs.current,Go(e)?GE(e):(t=Uj(r,s,n),e.stateNode=t,ur(e))}return He(e),null;case 5:if(Ym(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&ur(e);else{if(!s){if(e.stateNode===null)throw Error(z(166));return He(e),null}if(i=Qs.current,Go(e))GE(e);else{var a=gp(ji.current);switch(i){case 1:i=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:i=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":i=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":i=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":i=a.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof s.is=="string"?a.createElement("select",{is:s.is}):a.createElement("select"),s.multiple?i.multiple=!0:s.size&&(i.size=s.size);break;default:i=typeof s.is=="string"?a.createElement(r,{is:s.is}):a.createElement(r)}}i[Kt]=e,i[Pn]=s;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)i.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=i;e:switch(Jt(i,r,s),r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ur(e)}}return He(e),E0(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&ur(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(z(166));if(t=ji.current,Go(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,r=Wt,r!==null)switch(r.tag){case 27:case 5:s=r.memoizedProps}t[Kt]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||Mj(t.nodeValue,n)),t||$i(e,!0)}else t=gp(t).createTextNode(s),t[Kt]=e,e.stateNode=t}return He(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(s=Go(e),n!==null){if(t===null){if(!s)throw Error(z(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(557));t[Kt]=e}else co(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;He(e),t=!1}else n=p0(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Ln(e),e):(Ln(e),null);if(e.flags&128)throw Error(z(558))}return He(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=Go(e),s!==null&&s.dehydrated!==null){if(t===null){if(!r)throw Error(z(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(z(317));r[Kt]=e}else co(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;He(e),r=!1}else r=p0(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(Ln(e),e):(Ln(e),null)}return Ln(e),e.flags&128?(e.lanes=n,e):(n=s!==null,t=t!==null&&t.memoizedState!==null,n&&(s=e.child,r=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(r=s.alternate.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==r&&(s.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),zf(e,e.updateQueue),He(e),null);case 4:return ql(),t===null&&Tb(e.stateNode.containerInfo),He(e),null;case 10:return Er(e.type),He(e),null;case 19:if(Bt(gt),s=e.memoizedState,s===null)return He(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)bu(s,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=rp(t),i!==null){for(e.flags|=128,bu(s,!1),t=i.updateQueue,e.updateQueue=t,zf(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)QR(n,t),n=n.sibling;return ze(gt,gt.current&1|2),ye&&pr(e,s.treeForkCount),e.child}t=t.sibling}s.tail!==null&&qn()>up&&(e.flags|=128,r=!0,bu(s,!1),e.lanes=4194304)}else{if(!r)if(t=rp(i),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,zf(e,t),bu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!ye)return He(e),null}else 2*qn()-s.renderingStartTime>up&&n!==536870912&&(e.flags|=128,r=!0,bu(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(t=s.last,t!==null?t.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=qn(),t.sibling=null,n=gt.current,ze(gt,r?n&1|2:n&1),ye&&pr(e,s.treeForkCount),t):(He(e),null);case 22:case 23:return Ln(e),tb(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(He(e),e.subtreeFlags&6&&(e.flags|=8192)):He(e),n=e.updateQueue,n!==null&&zf(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&Bt(to),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Er(At),He(e),null;case 25:return null;case 30:return null}throw Error(z(156,e.tag))}function _3(t,e){switch(Q_(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Er(At),ql(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Ym(e),null;case 31:if(e.memoizedState!==null){if(Ln(e),e.alternate===null)throw Error(z(340));co()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Ln(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));co()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Bt(gt),null;case 4:return ql(),null;case 10:return Er(e.type),null;case 22:case 23:return Ln(e),tb(),t!==null&&Bt(to),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Er(At),null;case 25:return null;default:return null}}function QC(t,e){switch(Q_(e),e.tag){case 3:Er(At),ql();break;case 26:case 27:case 5:Ym(e);break;case 4:ql();break;case 31:e.memoizedState!==null&&Ln(e);break;case 13:Ln(e);break;case 19:Bt(gt);break;case 10:Er(e.type);break;case 22:case 23:Ln(e),tb(),t!==null&&Bt(to);break;case 24:Er(At)}}function Mh(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var r=s.next;n=r;do{if((n.tag&t)===t){s=void 0;var i=n.create,a=n.inst;s=i(),a.destroy=s}n=n.next}while(n!==r)}}catch(o){Ie(e,e.return,o)}}function Ki(t,e,n){try{var s=e.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var i=r.next;s=i;do{if((s.tag&t)===t){var a=s.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,r=e;var c=n,u=o;try{u()}catch(h){Ie(r,c,h)}}}s=s.next}while(s!==i)}}catch(h){Ie(e,e.return,h)}}function XC(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{aC(e,n)}catch(s){Ie(t,t.return,s)}}}function JC(t,e,n){n.props=mo(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){Ie(t,e,s)}}function ud(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(r){Ie(t,e,r)}}function $s(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(r){Ie(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Ie(t,e,r)}else n.current=null}function ZC(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(r){Ie(t,t.return,r)}}function S0(t,e,n){try{var s=t.stateNode;B3(s,t.type,n,e),s[Pn]=e}catch(r){Ie(t,t.return,r)}}function ej(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&da(t.type)||t.tag===4}function A0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ej(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&da(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sx(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xr));else if(s!==4&&(s===27&&da(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(sx(t,e,n),t=t.sibling;t!==null;)sx(t,e,n),t=t.sibling}function cp(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&da(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(cp(t,e,n),t=t.sibling;t!==null;)cp(t,e,n),t=t.sibling}function tj(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Jt(e,s,n),e[Kt]=t,e[Pn]=n}catch(i){Ie(t,t.return,i)}}var gr=!1,St=!1,N0=!1,yS=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function b3(t,e){if(t=t.containerInfo,ux=_p,t=BR(t),G_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,o=-1,c=-1,u=0,h=0,f=t,m=null;t:for(;;){for(var p;f!==n||r!==0&&f.nodeType!==3||(o=a+r),f!==i||s!==0&&f.nodeType!==3||(c=a+s),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===t)break t;if(m===n&&++u===r&&(o=a),m===i&&++h===s&&(c=a),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(dx={focusedElem:t,selectionRange:n},_p=!1,Ut=e;Ut!==null;)if(e=Ut,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ut=t;else for(;Ut!==null;){switch(e=Ut,i=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&i!==null){t=void 0,n=e,r=i.memoizedProps,i=i.memoizedState,s=n.stateNode;try{var _=mo(n.type,r);t=s.getSnapshotBeforeUpdate(_,i),s.__reactInternalSnapshotBeforeUpdate=t}catch(w){Ie(n,n.return,w)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)fx(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":fx(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(z(163))}if(t=e.sibling,t!==null){t.return=e.return,Ut=t;break}Ut=e.return}}function nj(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:hr(t,n),s&4&&Mh(5,n);break;case 1:if(hr(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Ie(n,n.return,a)}else{var r=mo(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Ie(n,n.return,a)}}s&64&&XC(n),s&512&&ud(n,n.return);break;case 3:if(hr(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{aC(t,e)}catch(a){Ie(n,n.return,a)}}break;case 27:e===null&&s&4&&tj(n);case 26:case 5:hr(t,n),e===null&&s&4&&ZC(n),s&512&&ud(n,n.return);break;case 12:hr(t,n);break;case 31:hr(t,n),s&4&&ij(t,n);break;case 13:hr(t,n),s&4&&aj(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=C3.bind(null,n),Q3(t,n))));break;case 22:if(s=n.memoizedState!==null||gr,!s){e=e!==null&&e.memoizedState!==null||St,r=gr;var i=St;gr=s,(St=e)&&!i?fr(t,n,(n.subtreeFlags&8772)!==0):hr(t,n),gr=r,St=i}break;case 30:break;default:hr(t,n)}}function sj(t){var e=t.alternate;e!==null&&(t.alternate=null,sj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&U_(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ze=null,Sn=!1;function dr(t,e,n){for(n=n.child;n!==null;)rj(t,e,n),n=n.sibling}function rj(t,e,n){if(Hn&&typeof Hn.onCommitFiberUnmount=="function")try{Hn.onCommitFiberUnmount(Ih,n)}catch{}switch(n.tag){case 26:St||$s(n,e),dr(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:St||$s(n,e);var s=Ze,r=Sn;da(n.type)&&(Ze=n.stateNode,Sn=!1),dr(t,e,n),md(n.stateNode),Ze=s,Sn=r;break;case 5:St||$s(n,e);case 6:if(s=Ze,r=Sn,Ze=null,dr(t,e,n),Ze=s,Sn=r,Ze!==null)if(Sn)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(n.stateNode)}catch(i){Ie(n,e,i)}else try{Ze.removeChild(n.stateNode)}catch(i){Ie(n,e,i)}break;case 18:Ze!==null&&(Sn?(t=Ze,CS(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Zl(t)):CS(Ze,n.stateNode));break;case 4:s=Ze,r=Sn,Ze=n.stateNode.containerInfo,Sn=!0,dr(t,e,n),Ze=s,Sn=r;break;case 0:case 11:case 14:case 15:Ki(2,n,e),St||Ki(4,n,e),dr(t,e,n);break;case 1:St||($s(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&JC(n,e,s)),dr(t,e,n);break;case 21:dr(t,e,n);break;case 22:St=(s=St)||n.memoizedState!==null,dr(t,e,n),St=s;break;default:dr(t,e,n)}}function ij(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Zl(t)}catch(n){Ie(e,e.return,n)}}}function aj(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Zl(t)}catch(n){Ie(e,e.return,n)}}function w3(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new yS),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new yS),e;default:throw Error(z(435,t.tag))}}function Ff(t,e){var n=w3(t);e.forEach(function(s){if(!n.has(s)){n.add(s);var r=j3.bind(null,t,s);s.then(r,r)}})}function Tn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s],i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(da(o.type)){Ze=o.stateNode,Sn=!1;break e}break;case 5:Ze=o.stateNode,Sn=!1;break e;case 3:case 4:Ze=o.stateNode.containerInfo,Sn=!0;break e}o=o.return}if(Ze===null)throw Error(z(160));rj(i,a,r),Ze=null,Sn=!1,i=r.alternate,i!==null&&(i.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)oj(e,t),e=e.sibling}var Ts=null;function oj(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Tn(e,t),En(t),s&4&&(Ki(3,t,t.return),Mh(3,t),Ki(5,t,t.return));break;case 1:Tn(e,t),En(t),s&512&&(St||n===null||$s(n,n.return)),s&64&&gr&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var r=Ts;if(Tn(e,t),En(t),s&512&&(St||n===null||$s(n,n.return)),s&4){var i=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(s){case"title":i=r.getElementsByTagName("title")[0],(!i||i[jh]||i[Kt]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=r.createElement(s),r.head.insertBefore(i,r.querySelector("head > title"))),Jt(i,s,n),i[Kt]=t,Ft(i),s=i;break e;case"link":var a=VS("link","href",r).get(s+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(i=a[o],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}i=r.createElement(s),Jt(i,s,n),r.head.appendChild(i);break;case"meta":if(a=VS("meta","content",r).get(s+(n.content||""))){for(o=0;o<a.length;o++)if(i=a[o],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}i=r.createElement(s),Jt(i,s,n),r.head.appendChild(i);break;default:throw Error(z(468,s))}i[Kt]=t,Ft(i),s=i}t.stateNode=s}else LS(r,t.type,t.stateNode);else t.stateNode=OS(r,s,t.memoizedProps);else i!==s?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,s===null?LS(r,t.type,t.stateNode):OS(r,s,t.memoizedProps)):s===null&&t.stateNode!==null&&S0(t,t.memoizedProps,n.memoizedProps)}break;case 27:Tn(e,t),En(t),s&512&&(St||n===null||$s(n,n.return)),n!==null&&s&4&&S0(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Tn(e,t),En(t),s&512&&(St||n===null||$s(n,n.return)),t.flags&32){r=t.stateNode;try{Gl(r,"")}catch(_){Ie(t,t.return,_)}}s&4&&t.stateNode!=null&&(r=t.memoizedProps,S0(t,r,n!==null?n.memoizedProps:r)),s&1024&&(N0=!0);break;case 6:if(Tn(e,t),En(t),s&4){if(t.stateNode===null)throw Error(z(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(_){Ie(t,t.return,_)}}break;case 3:if(Tm=null,r=Ts,Ts=yp(e.containerInfo),Tn(e,t),Ts=r,En(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Zl(e.containerInfo)}catch(_){Ie(t,t.return,_)}N0&&(N0=!1,lj(t));break;case 4:s=Ts,Ts=yp(t.stateNode.containerInfo),Tn(e,t),En(t),Ts=s;break;case 12:Tn(e,t),En(t);break;case 31:Tn(e,t),En(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Ff(t,s)));break;case 13:Tn(e,t),En(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Eg=qn()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Ff(t,s)));break;case 22:r=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,u=gr,h=St;if(gr=u||r,St=h||c,Tn(e,t),St=h,gr=u,En(t),s&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||c||gr||St||Oa(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(i=c.stateNode,r)a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=c.stateNode;var f=c.memoizedProps.style,m=f!=null&&f.hasOwnProperty("display")?f.display:null;o.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(_){Ie(c,c.return,_)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(_){Ie(c,c.return,_)}}}else if(e.tag===18){if(n===null){c=e;try{var p=c.stateNode;r?jS(p,!0):jS(c.stateNode,!1)}catch(_){Ie(c,c.return,_)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,Ff(t,n))));break;case 19:Tn(e,t),En(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Ff(t,s)));break;case 30:break;case 21:break;default:Tn(e,t),En(t)}}function En(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(ej(s)){n=s;break}s=s.return}if(n==null)throw Error(z(160));switch(n.tag){case 27:var r=n.stateNode,i=A0(t);cp(t,i,r);break;case 5:var a=n.stateNode;n.flags&32&&(Gl(a,""),n.flags&=-33);var o=A0(t);cp(t,o,a);break;case 3:case 4:var c=n.stateNode.containerInfo,u=A0(t);sx(t,u,c);break;default:throw Error(z(161))}}catch(h){Ie(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lj(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;lj(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function hr(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)nj(t,e.alternate,e),e=e.sibling}function Oa(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Ki(4,e,e.return),Oa(e);break;case 1:$s(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&JC(e,e.return,n),Oa(e);break;case 27:md(e.stateNode);case 26:case 5:$s(e,e.return),Oa(e);break;case 22:e.memoizedState===null&&Oa(e);break;case 30:Oa(e);break;default:Oa(e)}t=t.sibling}}function fr(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,r=t,i=e,a=i.flags;switch(i.tag){case 0:case 11:case 15:fr(r,i,n),Mh(4,i);break;case 1:if(fr(r,i,n),s=i,r=s.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(u){Ie(s,s.return,u)}if(s=i,r=s.updateQueue,r!==null){var o=s.stateNode;try{var c=r.shared.hiddenCallbacks;if(c!==null)for(r.shared.hiddenCallbacks=null,r=0;r<c.length;r++)iC(c[r],o)}catch(u){Ie(s,s.return,u)}}n&&a&64&&XC(i),ud(i,i.return);break;case 27:tj(i);case 26:case 5:fr(r,i,n),n&&s===null&&a&4&&ZC(i),ud(i,i.return);break;case 12:fr(r,i,n);break;case 31:fr(r,i,n),n&&a&4&&ij(r,i);break;case 13:fr(r,i,n),n&&a&4&&aj(r,i);break;case 22:i.memoizedState===null&&fr(r,i,n),ud(i,i.return);break;case 30:break;default:fr(r,i,n)}e=e.sibling}}function yb(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&kh(n))}function vb(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&kh(t))}function bs(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)cj(t,e,n,s),e=e.sibling}function cj(t,e,n,s){var r=e.flags;switch(e.tag){case 0:case 11:case 15:bs(t,e,n,s),r&2048&&Mh(9,e);break;case 1:bs(t,e,n,s);break;case 3:bs(t,e,n,s),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&kh(t)));break;case 12:if(r&2048){bs(t,e,n,s),t=e.stateNode;try{var i=e.memoizedProps,a=i.id,o=i.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){Ie(e,e.return,c)}}else bs(t,e,n,s);break;case 31:bs(t,e,n,s);break;case 13:bs(t,e,n,s);break;case 23:break;case 22:i=e.stateNode,a=e.alternate,e.memoizedState!==null?i._visibility&2?bs(t,e,n,s):dd(t,e):i._visibility&2?bs(t,e,n,s):(i._visibility|=2,rl(t,e,n,s,(e.subtreeFlags&10256)!==0||!1)),r&2048&&yb(a,e);break;case 24:bs(t,e,n,s),r&2048&&vb(e.alternate,e);break;default:bs(t,e,n,s)}}function rl(t,e,n,s,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var i=t,a=e,o=n,c=s,u=a.flags;switch(a.tag){case 0:case 11:case 15:rl(i,a,o,c,r),Mh(8,a);break;case 23:break;case 22:var h=a.stateNode;a.memoizedState!==null?h._visibility&2?rl(i,a,o,c,r):dd(i,a):(h._visibility|=2,rl(i,a,o,c,r)),r&&u&2048&&yb(a.alternate,a);break;case 24:rl(i,a,o,c,r),r&&u&2048&&vb(a.alternate,a);break;default:rl(i,a,o,c,r)}e=e.sibling}}function dd(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,r=s.flags;switch(s.tag){case 22:dd(n,s),r&2048&&yb(s.alternate,s);break;case 24:dd(n,s),r&2048&&vb(s.alternate,s);break;default:dd(n,s)}e=e.sibling}}var qu=8192;function $o(t,e,n){if(t.subtreeFlags&qu)for(t=t.child;t!==null;)uj(t,e,n),t=t.sibling}function uj(t,e,n){switch(t.tag){case 26:$o(t,e,n),t.flags&qu&&t.memoizedState!==null&&lL(n,Ts,t.memoizedState,t.memoizedProps);break;case 5:$o(t,e,n);break;case 3:case 4:var s=Ts;Ts=yp(t.stateNode.containerInfo),$o(t,e,n),Ts=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=qu,qu=16777216,$o(t,e,n),qu=s):$o(t,e,n));break;default:$o(t,e,n)}}function dj(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function wu(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Ut=s,fj(s,t)}dj(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)hj(t),t=t.sibling}function hj(t){switch(t.tag){case 0:case 11:case 15:wu(t),t.flags&2048&&Ki(9,t,t.return);break;case 3:wu(t);break;case 12:wu(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,bm(t)):wu(t);break;default:wu(t)}}function bm(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Ut=s,fj(s,t)}dj(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Ki(8,e,e.return),bm(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,bm(e));break;default:bm(e)}t=t.sibling}}function fj(t,e){for(;Ut!==null;){var n=Ut;switch(n.tag){case 0:case 11:case 15:Ki(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:kh(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Ut=s;else e:for(n=t;Ut!==null;){s=Ut;var r=s.sibling,i=s.return;if(sj(s),s===n){Ut=null;break e}if(r!==null){r.return=i,Ut=r;break e}Ut=i}}}var T3={getCacheForType:function(t){var e=Qt(At),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Qt(At).controller.signal}},E3=typeof WeakMap=="function"?WeakMap:Map,we=0,Le=null,fe=null,pe=0,Ne=0,On=null,Si=!1,kc=!1,xb=!1,Mr=0,dt=0,Wi=0,so=0,_b=0,Fn=0,Yl=0,hd=null,An=null,rx=!1,Eg=0,mj=0,up=1/0,dp=null,Mi=null,Pt=0,Oi=null,Ql=null,Sr=0,ix=0,ax=null,pj=null,fd=0,ox=null;function $n(){return we&2&&pe!==0?pe&-pe:se.T!==null?wb():ER()}function gj(){if(Fn===0)if(!(pe&536870912)||ye){var t=kf;kf<<=1,!(kf&3932160)&&(kf=262144),Fn=t}else Fn=536870912;return t=Xn.current,t!==null&&(t.flags|=32),Fn}function jn(t,e,n){(t===Le&&(Ne===2||Ne===9)||t.cancelPendingCommit!==null)&&(Xl(t,0),Ai(t,pe,Fn,!1)),Ch(t,n),(!(we&2)||t!==Le)&&(t===Le&&(!(we&2)&&(so|=n),dt===4&&Ai(t,pe,Fn,!1)),lr(t))}function yj(t,e,n){if(we&6)throw Error(z(327));var s=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Rh(t,e),r=s?N3(t,e):I0(t,e,!0),i=s;do{if(r===0){kc&&!s&&Ai(t,e,0,!1);break}else{if(n=t.current.alternate,i&&!S3(n)){r=I0(t,e,!1),i=!1;continue}if(r===2){if(i=e,t.errorRecoveryDisabledLanes&i)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=t;r=hd;var c=o.current.memoizedState.isDehydrated;if(c&&(Xl(o,a).flags|=256),a=I0(o,a,!1),a!==2){if(xb&&!c){o.errorRecoveryDisabledLanes|=i,so|=i,r=4;break e}i=An,An=r,i!==null&&(An===null?An=i:An.push.apply(An,i))}r=a}if(i=!1,r!==2)continue}}if(r===1){Xl(t,0),Ai(t,e,0,!0);break}e:{switch(s=t,i=r,i){case 0:case 1:throw Error(z(345));case 4:if((e&4194048)!==e)break;case 6:Ai(s,e,Fn,!Si);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(z(329))}if((e&62914560)===e&&(r=Eg+300-qn(),10<r)){if(Ai(s,e,Fn,!Si),fg(s,0,!0)!==0)break e;Sr=e,s.timeoutHandle=Vj(vS.bind(null,s,n,An,dp,rx,e,Fn,so,Yl,Si,i,"Throttled",-0,0),r);break e}vS(s,n,An,dp,rx,e,Fn,so,Yl,Si,i,null,-0,0)}}break}while(!0);lr(t)}function vS(t,e,n,s,r,i,a,o,c,u,h,f,m,p){if(t.timeoutHandle=-1,f=e.subtreeFlags,f&8192||(f&16785408)===16785408){f={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xr},uj(e,i,f);var _=(i&62914560)===i?Eg-qn():(i&4194048)===i?mj-qn():0;if(_=cL(f,_),_!==null){Sr=i,t.cancelPendingCommit=_(_S.bind(null,t,e,i,n,s,r,a,o,c,h,f,null,m,p)),Ai(t,i,a,!u);return}}_S(t,e,i,n,s,r,a,o,c)}function S3(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Qn(i(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ai(t,e,n,s){e&=~_b,e&=~so,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var r=e;0<r;){var i=31-Gn(r),a=1<<i;s[i]=-1,r&=~a}n!==0&&bR(t,n,e)}function Sg(){return we&6?!0:(Oh(0),!1)}function bb(){if(fe!==null){if(Ne===0)var t=fe.return;else t=fe,_r=Po=null,ab(t),kl=null,Fd=0,t=fe;for(;t!==null;)QC(t.alternate,t),t=t.return;fe=null}}function Xl(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,G3(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Sr=0,bb(),Le=t,fe=n=Tr(t.current,null),pe=e,Ne=0,On=null,Si=!1,kc=Rh(t,e),xb=!1,Yl=Fn=_b=so=Wi=dt=0,An=hd=null,rx=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var r=31-Gn(s),i=1<<r;e|=t[r],s&=~i}return Mr=e,yg(),n}function vj(t,e){ae=null,se.H=qd,e===Pc||e===xg?(e=QE(),Ne=3):e===Z_?(e=QE(),Ne=4):Ne=e===pb?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,On=e,fe===null&&(dt=1,op(t,ds(e,t.current)))}function xj(){var t=Xn.current;return t===null?!0:(pe&4194048)===pe?ps===null:(pe&62914560)===pe||pe&536870912?t===ps:!1}function _j(){var t=se.H;return se.H=qd,t===null?qd:t}function bj(){var t=se.A;return se.A=T3,t}function hp(){dt=4,Si||(pe&4194048)!==pe&&Xn.current!==null||(kc=!0),!(Wi&134217727)&&!(so&134217727)||Le===null||Ai(Le,pe,Fn,!1)}function I0(t,e,n){var s=we;we|=2;var r=_j(),i=bj();(Le!==t||pe!==e)&&(dp=null,Xl(t,e)),e=!1;var a=dt;e:do try{if(Ne!==0&&fe!==null){var o=fe,c=On;switch(Ne){case 8:bb(),a=6;break e;case 3:case 2:case 9:case 6:Xn.current===null&&(e=!0);var u=Ne;if(Ne=0,On=null,wl(t,o,c,u),n&&kc){a=0;break e}break;default:u=Ne,Ne=0,On=null,wl(t,o,c,u)}}A3(),a=dt;break}catch(h){vj(t,h)}while(!0);return e&&t.shellSuspendCounter++,_r=Po=null,we=s,se.H=r,se.A=i,fe===null&&(Le=null,pe=0,yg()),a}function A3(){for(;fe!==null;)wj(fe)}function N3(t,e){var n=we;we|=2;var s=_j(),r=bj();Le!==t||pe!==e?(dp=null,up=qn()+500,Xl(t,e)):kc=Rh(t,e);e:do try{if(Ne!==0&&fe!==null){e=fe;var i=On;t:switch(Ne){case 1:Ne=0,On=null,wl(t,e,i,1);break;case 2:case 9:if(YE(i)){Ne=0,On=null,xS(e);break}e=function(){Ne!==2&&Ne!==9||Le!==t||(Ne=7),lr(t)},i.then(e,e);break e;case 3:Ne=7;break e;case 4:Ne=5;break e;case 7:YE(i)?(Ne=0,On=null,xS(e)):(Ne=0,On=null,wl(t,e,i,7));break;case 5:var a=null;switch(fe.tag){case 26:a=fe.memoizedState;case 5:case 27:var o=fe;if(a?Bj(a):o.stateNode.complete){Ne=0,On=null;var c=o.sibling;if(c!==null)fe=c;else{var u=o.return;u!==null?(fe=u,Ag(u)):fe=null}break t}}Ne=0,On=null,wl(t,e,i,5);break;case 6:Ne=0,On=null,wl(t,e,i,6);break;case 8:bb(),dt=6;break e;default:throw Error(z(462))}}I3();break}catch(h){vj(t,h)}while(!0);return _r=Po=null,se.H=s,se.A=r,we=n,fe!==null?0:(Le=null,pe=0,yg(),dt)}function I3(){for(;fe!==null&&!XV();)wj(fe)}function wj(t){var e=YC(t.alternate,t,Mr);t.memoizedProps=t.pendingProps,e===null?Ag(t):fe=e}function xS(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=hS(n,e,e.pendingProps,e.type,void 0,pe);break;case 11:e=hS(n,e,e.pendingProps,e.type.render,e.ref,pe);break;case 5:ab(e);default:QC(n,e),e=fe=QR(e,Mr),e=YC(n,e,Mr)}t.memoizedProps=t.pendingProps,e===null?Ag(t):fe=e}function wl(t,e,n,s){_r=Po=null,ab(e),kl=null,Fd=0;var r=e.return;try{if(g3(t,r,e,n,pe)){dt=1,op(t,ds(n,t.current)),fe=null;return}}catch(i){if(r!==null)throw fe=r,i;dt=1,op(t,ds(n,t.current)),fe=null;return}e.flags&32768?(ye||s===1?t=!0:kc||pe&536870912?t=!1:(Si=t=!0,(s===2||s===9||s===3||s===6)&&(s=Xn.current,s!==null&&s.tag===13&&(s.flags|=16384))),Tj(e,t)):Ag(e)}function Ag(t){var e=t;do{if(e.flags&32768){Tj(e,Si);return}t=e.return;var n=x3(e.alternate,e,Mr);if(n!==null){fe=n;return}if(e=e.sibling,e!==null){fe=e;return}fe=e=t}while(e!==null);dt===0&&(dt=5)}function Tj(t,e){do{var n=_3(t.alternate,t);if(n!==null){n.flags&=32767,fe=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){fe=t;return}fe=t=n}while(t!==null);dt=6,fe=null}function _S(t,e,n,s,r,i,a,o,c){t.cancelPendingCommit=null;do Ng();while(Pt!==0);if(we&6)throw Error(z(327));if(e!==null){if(e===t.current)throw Error(z(177));if(i=e.lanes|e.childLanes,i|=$_,o5(t,n,i,a,o,c),t===Le&&(fe=Le=null,pe=0),Ql=e,Oi=t,Sr=n,ix=i,ax=r,pj=s,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,P3(Qm,function(){return Ij(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,e.subtreeFlags&13878||s){s=se.T,se.T=null,r=Te.p,Te.p=2,a=we,we|=4;try{b3(t,e,n)}finally{we=a,Te.p=r,se.T=s}}Pt=1,Ej(),Sj(),Aj()}}function Ej(){if(Pt===1){Pt=0;var t=Oi,e=Ql,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=se.T,se.T=null;var s=Te.p;Te.p=2;var r=we;we|=4;try{oj(e,t);var i=dx,a=BR(t.containerInfo),o=i.focusedElem,c=i.selectionRange;if(a!==o&&o&&o.ownerDocument&&FR(o.ownerDocument.documentElement,o)){if(c!==null&&G_(o)){var u=c.start,h=c.end;if(h===void 0&&(h=u),"selectionStart"in o)o.selectionStart=u,o.selectionEnd=Math.min(h,o.value.length);else{var f=o.ownerDocument||document,m=f&&f.defaultView||window;if(m.getSelection){var p=m.getSelection(),_=o.textContent.length,w=Math.min(c.start,_),T=c.end===void 0?w:Math.min(c.end,_);!p.extend&&w>T&&(a=T,T=w,w=a);var x=BE(o,w),v=BE(o,T);if(x&&v&&(p.rangeCount!==1||p.anchorNode!==x.node||p.anchorOffset!==x.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var b=f.createRange();b.setStart(x.node,x.offset),p.removeAllRanges(),w>T?(p.addRange(b),p.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),p.addRange(b))}}}}for(f=[],p=o;p=p.parentNode;)p.nodeType===1&&f.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<f.length;o++){var R=f[o];R.element.scrollLeft=R.left,R.element.scrollTop=R.top}}_p=!!ux,dx=ux=null}finally{we=r,Te.p=s,se.T=n}}t.current=e,Pt=2}}function Sj(){if(Pt===2){Pt=0;var t=Oi,e=Ql,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=se.T,se.T=null;var s=Te.p;Te.p=2;var r=we;we|=4;try{nj(t,e.alternate,e)}finally{we=r,Te.p=s,se.T=n}}Pt=3}}function Aj(){if(Pt===4||Pt===3){Pt=0,JV();var t=Oi,e=Ql,n=Sr,s=pj;e.subtreeFlags&10256||e.flags&10256?Pt=5:(Pt=0,Ql=Oi=null,Nj(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(Mi=null),L_(n),e=e.stateNode,Hn&&typeof Hn.onCommitFiberRoot=="function")try{Hn.onCommitFiberRoot(Ih,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=se.T,r=Te.p,Te.p=2,se.T=null;try{for(var i=t.onRecoverableError,a=0;a<s.length;a++){var o=s[a];i(o.value,{componentStack:o.stack})}}finally{se.T=e,Te.p=r}}Sr&3&&Ng(),lr(t),r=t.pendingLanes,n&261930&&r&42?t===ox?fd++:(fd=0,ox=t):fd=0,Oh(0)}}function Nj(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,kh(e)))}function Ng(){return Ej(),Sj(),Aj(),Ij()}function Ij(){if(Pt!==5)return!1;var t=Oi,e=ix;ix=0;var n=L_(Sr),s=se.T,r=Te.p;try{Te.p=32>n?32:n,se.T=null,n=ax,ax=null;var i=Oi,a=Sr;if(Pt=0,Ql=Oi=null,Sr=0,we&6)throw Error(z(331));var o=we;if(we|=4,hj(i.current),cj(i,i.current,a,n),we=o,Oh(0,!1),Hn&&typeof Hn.onPostCommitFiberRoot=="function")try{Hn.onPostCommitFiberRoot(Ih,i)}catch{}return!0}finally{Te.p=r,se.T=s,Nj(t,e)}}function bS(t,e,n){e=ds(n,e),e=ex(t.stateNode,e,2),t=Di(t,e,2),t!==null&&(Ch(t,2),lr(t))}function Ie(t,e,n){if(t.tag===3)bS(t,t,n);else for(;e!==null;){if(e.tag===3){bS(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Mi===null||!Mi.has(s))){t=ds(n,t),n=qC(2),s=Di(e,n,2),s!==null&&(HC(n,s,e,t),Ch(s,2),lr(s));break}}e=e.return}}function R0(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new E3;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(xb=!0,r.add(n),t=R3.bind(null,t,e,n),e.then(t,t))}function R3(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Le===t&&(pe&n)===n&&(dt===4||dt===3&&(pe&62914560)===pe&&300>qn()-Eg?!(we&2)&&Xl(t,0):_b|=n,Yl===pe&&(Yl=0)),lr(t)}function Rj(t,e){e===0&&(e=_R()),t=jo(t,e),t!==null&&(Ch(t,e),lr(t))}function C3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Rj(t,n)}function j3(t,e){var n=0;switch(t.tag){case 31:case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(z(314))}s!==null&&s.delete(e),Rj(t,n)}function P3(t,e){return O_(t,e)}var fp=null,il=null,lx=!1,mp=!1,C0=!1,Ni=0;function lr(t){t!==il&&t.next===null&&(il===null?fp=il=t:il=il.next=t),mp=!0,lx||(lx=!0,D3())}function Oh(t,e){if(!C0&&mp){C0=!0;do for(var n=!1,s=fp;s!==null;){if(t!==0){var r=s.pendingLanes;if(r===0)var i=0;else{var a=s.suspendedLanes,o=s.pingedLanes;i=(1<<31-Gn(42|t)+1)-1,i&=r&~(a&~o),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,wS(s,i))}else i=pe,i=fg(s,s===Le?i:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(i&3)||Rh(s,i)||(n=!0,wS(s,i));s=s.next}while(n);C0=!1}}function k3(){Cj()}function Cj(){mp=lx=!1;var t=0;Ni!==0&&H3()&&(t=Ni);for(var e=qn(),n=null,s=fp;s!==null;){var r=s.next,i=jj(s,e);i===0?(s.next=null,n===null?fp=r:n.next=r,r===null&&(il=n)):(n=s,(t!==0||i&3)&&(mp=!0)),s=r}Pt!==0&&Pt!==5||Oh(t),Ni!==0&&(Ni=0)}function jj(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes&-62914561;0<i;){var a=31-Gn(i),o=1<<a,c=r[a];c===-1?(!(o&n)||o&s)&&(r[a]=a5(o,e)):c<=e&&(t.expiredLanes|=o),i&=~o}if(e=Le,n=pe,n=fg(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(Ne===2||Ne===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&r0(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Rh(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&r0(s),L_(n)){case 2:case 8:n=vR;break;case 32:n=Qm;break;case 268435456:n=xR;break;default:n=Qm}return s=Pj.bind(null,t),n=O_(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&r0(s),t.callbackPriority=2,t.callbackNode=null,2}function Pj(t,e){if(Pt!==0&&Pt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Ng()&&t.callbackNode!==n)return null;var s=pe;return s=fg(t,t===Le?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(yj(t,s,e),jj(t,qn()),t.callbackNode!=null&&t.callbackNode===n?Pj.bind(null,t):null)}function wS(t,e){if(Ng())return null;yj(t,e,!0)}function D3(){$3(function(){we&6?O_(yR,k3):Cj()})}function wb(){if(Ni===0){var t=$l;t===0&&(t=Pf,Pf<<=1,!(Pf&261888)&&(Pf=256)),Ni=t}return Ni}function TS(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:hm(""+t)}function ES(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function M3(t,e,n,s,r){if(e==="submit"&&n&&n.stateNode===r){var i=TS((r[Pn]||null).action),a=s.submitter;a&&(e=(e=a[Pn]||null)?TS(e.formAction):a.getAttribute("formAction"),e!==null&&(i=e,a=null));var o=new mg("action","action",null,s,r);t.push({event:o,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Ni!==0){var c=a?ES(r,a):new FormData(r);Jv(n,{pending:!0,data:c,method:r.method,action:i},null,c)}}else typeof i=="function"&&(o.preventDefault(),c=a?ES(r,a):new FormData(r),Jv(n,{pending:!0,data:c,method:r.method,action:i},i,c))},currentTarget:r}]})}}for(var j0=0;j0<zv.length;j0++){var P0=zv[j0],O3=P0.toLowerCase(),V3=P0[0].toUpperCase()+P0.slice(1);Cs(O3,"on"+V3)}Cs(HR,"onAnimationEnd");Cs(GR,"onAnimationIteration");Cs($R,"onAnimationStart");Cs("dblclick","onDoubleClick");Cs("focusin","onFocus");Cs("focusout","onBlur");Cs(Z5,"onTransitionRun");Cs(e3,"onTransitionStart");Cs(t3,"onTransitionCancel");Cs(KR,"onTransitionEnd");Hl("onMouseEnter",["mouseout","mouseover"]);Hl("onMouseLeave",["mouseout","mouseover"]);Hl("onPointerEnter",["pointerout","pointerover"]);Hl("onPointerLeave",["pointerout","pointerover"]);Io("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Io("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Io("onBeforeInput",["compositionend","keypress","textInput","paste"]);Io("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Io("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Io("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hd));function kj(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var a=s.length-1;0<=a;a--){var o=s[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==i&&r.isPropagationStopped())break e;i=o,r.currentTarget=u;try{i(r)}catch(h){Jm(h)}r.currentTarget=null,i=c}else for(a=0;a<s.length;a++){if(o=s[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==i&&r.isPropagationStopped())break e;i=o,r.currentTarget=u;try{i(r)}catch(h){Jm(h)}r.currentTarget=null,i=c}}}}function de(t,e){var n=e[Pv];n===void 0&&(n=e[Pv]=new Set);var s=t+"__bubble";n.has(s)||(Dj(e,t,2,!1),n.add(s))}function k0(t,e,n){var s=0;e&&(s|=4),Dj(n,t,s,e)}var Bf="_reactListening"+Math.random().toString(36).slice(2);function Tb(t){if(!t[Bf]){t[Bf]=!0,SR.forEach(function(n){n!=="selectionchange"&&(L3.has(n)||k0(n,!1,t),k0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bf]||(e[Bf]=!0,k0("selectionchange",!1,e))}}function Dj(t,e,n,s){switch(Kj(e)){case 2:var r=hL;break;case 8:r=fL;break;default:r=Nb}n=r.bind(null,e,n,t),r=void 0,!Vv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function D0(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var o=s.stateNode.containerInfo;if(o===r)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;o!==null;){if(a=fl(o),a===null)return;if(c=a.tag,c===5||c===6||c===26||c===27){s=i=a;continue e}o=o.parentNode}}s=s.return}kR(function(){var u=i,h=F_(n),f=[];e:{var m=WR.get(t);if(m!==void 0){var p=mg,_=t;switch(t){case"keypress":if(mm(n)===0)break e;case"keydown":case"keyup":p=j5;break;case"focusin":_="focus",p=c0;break;case"focusout":_="blur",p=c0;break;case"beforeblur":case"afterblur":p=c0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=PE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=x5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=D5;break;case HR:case GR:case $R:p=w5;break;case KR:p=O5;break;case"scroll":case"scrollend":p=y5;break;case"wheel":p=L5;break;case"copy":case"cut":case"paste":p=E5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=DE;break;case"toggle":case"beforetoggle":p=z5}var w=(e&4)!==0,T=!w&&(t==="scroll"||t==="scrollend"),x=w?m!==null?m+"Capture":null:m;w=[];for(var v=u,b;v!==null;){var R=v;if(b=R.stateNode,R=R.tag,R!==5&&R!==26&&R!==27||b===null||x===null||(R=Od(v,x),R!=null&&w.push(Gd(v,R,b))),T)break;v=v.return}0<w.length&&(m=new p(m,_,null,n,h),f.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==Ov&&(_=n.relatedTarget||n.fromElement)&&(fl(_)||_[Rc]))break e;if((p||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,p?(_=n.relatedTarget||n.toElement,p=u,_=_?fl(_):null,_!==null&&(T=Nh(_),w=_.tag,_!==T||w!==5&&w!==27&&w!==6)&&(_=null)):(p=null,_=u),p!==_)){if(w=PE,R="onMouseLeave",x="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(w=DE,R="onPointerLeave",x="onPointerEnter",v="pointer"),T=p==null?m:Fu(p),b=_==null?m:Fu(_),m=new w(R,v+"leave",p,n,h),m.target=T,m.relatedTarget=b,R=null,fl(h)===u&&(w=new w(x,v+"enter",_,n,h),w.target=b,w.relatedTarget=T,R=w),T=R,p&&_)t:{for(w=U3,x=p,v=_,b=0,R=x;R;R=w(R))b++;R=0;for(var D=v;D;D=w(D))R++;for(;0<b-R;)x=w(x),b--;for(;0<R-b;)v=w(v),R--;for(;b--;){if(x===v||v!==null&&x===v.alternate){w=x;break t}x=w(x),v=w(v)}w=null}else w=null;p!==null&&SS(f,m,p,w,!1),_!==null&&T!==null&&SS(f,T,_,w,!0)}}e:{if(m=u?Fu(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var M=LE;else if(VE(m))if(UR)M=Q5;else{M=W5;var A=K5}else p=m.nodeName,!p||p.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?u&&z_(u.elementType)&&(M=LE):M=Y5;if(M&&(M=M(t,u))){LR(f,M,n,h);break e}A&&A(t,m,u),t==="focusout"&&u&&m.type==="number"&&u.memoizedProps.value!=null&&Mv(m,"number",m.value)}switch(A=u?Fu(u):window,t){case"focusin":(VE(A)||A.contentEditable==="true")&&(gl=A,Lv=u,rd=null);break;case"focusout":rd=Lv=gl=null;break;case"mousedown":Uv=!0;break;case"contextmenu":case"mouseup":case"dragend":Uv=!1,qE(f,n,h);break;case"selectionchange":if(J5)break;case"keydown":case"keyup":qE(f,n,h)}var E;if(H_)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else pl?OR(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(MR&&n.locale!=="ko"&&(pl||N!=="onCompositionStart"?N==="onCompositionEnd"&&pl&&(E=DR()):(Ei=h,B_="value"in Ei?Ei.value:Ei.textContent,pl=!0)),A=pp(u,N),0<A.length&&(N=new kE(N,t,null,n,h),f.push({event:N,listeners:A}),E?N.data=E:(E=VR(n),E!==null&&(N.data=E)))),(E=B5?q5(t,n):H5(t,n))&&(N=pp(u,"onBeforeInput"),0<N.length&&(A=new kE("onBeforeInput","beforeinput",null,n,h),f.push({event:A,listeners:N}),A.data=E)),M3(f,t,u,n,h)}kj(f,e)})}function Gd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pp(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||i===null||(r=Od(t,n),r!=null&&s.unshift(Gd(t,r,i)),r=Od(t,e),r!=null&&s.push(Gd(t,r,i))),t.tag===3)return s;t=t.return}return[]}function U3(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function SS(t,e,n,s,r){for(var i=e._reactName,a=[];n!==null&&n!==s;){var o=n,c=o.alternate,u=o.stateNode;if(o=o.tag,c!==null&&c===s)break;o!==5&&o!==26&&o!==27||u===null||(c=u,r?(u=Od(n,i),u!=null&&a.unshift(Gd(n,u,c))):r||(u=Od(n,i),u!=null&&a.push(Gd(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var z3=/\r\n?/g,F3=/\u0000|\uFFFD/g;function AS(t){return(typeof t=="string"?t:""+t).replace(z3,`
`).replace(F3,"")}function Mj(t,e){return e=AS(e),AS(t)===e}function je(t,e,n,s,r,i){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||Gl(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&Gl(t,""+s);break;case"className":Mf(t,"class",s);break;case"tabIndex":Mf(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Mf(t,n,s);break;case"style":PR(t,s,i);break;case"data":if(e!=="object"){Mf(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=hm(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(e!=="input"&&je(t,e,"name",r.name,r,null),je(t,e,"formEncType",r.formEncType,r,null),je(t,e,"formMethod",r.formMethod,r,null),je(t,e,"formTarget",r.formTarget,r,null)):(je(t,e,"encType",r.encType,r,null),je(t,e,"method",r.method,r,null),je(t,e,"target",r.target,r,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=hm(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=xr);break;case"onScroll":s!=null&&de("scroll",t);break;case"onScrollEnd":s!=null&&de("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(z(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(z(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=hm(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":de("beforetoggle",t),de("toggle",t),dm(t,"popover",s);break;case"xlinkActuate":cr(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":cr(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":cr(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":cr(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":cr(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":cr(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":cr(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":cr(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":cr(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":dm(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=p5.get(n)||n,dm(t,n,s))}}function cx(t,e,n,s,r,i){switch(n){case"style":PR(t,s,i);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(z(61));if(n=s.__html,n!=null){if(r.children!=null)throw Error(z(60));t.innerHTML=n}}break;case"children":typeof s=="string"?Gl(t,s):(typeof s=="number"||typeof s=="bigint")&&Gl(t,""+s);break;case"onScroll":s!=null&&de("scroll",t);break;case"onScrollEnd":s!=null&&de("scrollend",t);break;case"onClick":s!=null&&(t.onclick=xr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!AR.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),i=t[Pn]||null,i=i!=null?i[n]:null,typeof i=="function"&&t.removeEventListener(e,i,r),typeof s=="function")){typeof i!="function"&&i!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,r);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):dm(t,n,s)}}}function Jt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":de("error",t),de("load",t);var s=!1,r=!1,i;for(i in n)if(n.hasOwnProperty(i)){var a=n[i];if(a!=null)switch(i){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(z(137,e));default:je(t,e,i,a,n,null)}}r&&je(t,e,"srcSet",n.srcSet,n,null),s&&je(t,e,"src",n.src,n,null);return;case"input":de("invalid",t);var o=i=a=r=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var h=n[s];if(h!=null)switch(s){case"name":r=h;break;case"type":a=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":i=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(z(137,e));break;default:je(t,e,s,h,n,null)}}RR(t,i,o,c,u,a,r,!1);return;case"select":de("invalid",t),s=a=i=null;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],o!=null))switch(r){case"value":i=o;break;case"defaultValue":a=o;break;case"multiple":s=o;default:je(t,e,r,o,n,null)}e=i,n=a,t.multiple=!!s,e!=null?Cl(t,!!s,e,!1):n!=null&&Cl(t,!!s,n,!0);return;case"textarea":de("invalid",t),i=r=s=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":s=o;break;case"defaultValue":r=o;break;case"children":i=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(z(91));break;default:je(t,e,a,o,n,null)}jR(t,s,r,i);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:je(t,e,c,s,n,null)}return;case"dialog":de("beforetoggle",t),de("toggle",t),de("cancel",t),de("close",t);break;case"iframe":case"object":de("load",t);break;case"video":case"audio":for(s=0;s<Hd.length;s++)de(Hd[s],t);break;case"image":de("error",t),de("load",t);break;case"details":de("toggle",t);break;case"embed":case"source":case"link":de("error",t),de("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(s=n[u],s!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(z(137,e));default:je(t,e,u,s,n,null)}return;default:if(z_(e)){for(h in n)n.hasOwnProperty(h)&&(s=n[h],s!==void 0&&cx(t,e,h,s,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(s=n[o],s!=null&&je(t,e,o,s,n,null))}function B3(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,i=null,a=null,o=null,c=null,u=null,h=null;for(p in n){var f=n[p];if(n.hasOwnProperty(p)&&f!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":c=f;default:s.hasOwnProperty(p)||je(t,e,p,null,s,f)}}for(var m in s){var p=s[m];if(f=n[m],s.hasOwnProperty(m)&&(p!=null||f!=null))switch(m){case"type":i=p;break;case"name":r=p;break;case"checked":u=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":o=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(z(137,e));break;default:p!==f&&je(t,e,m,p,s,f)}}Dv(t,a,o,c,u,h,i,r);return;case"select":p=a=o=m=null;for(i in n)if(c=n[i],n.hasOwnProperty(i)&&c!=null)switch(i){case"value":break;case"multiple":p=c;default:s.hasOwnProperty(i)||je(t,e,i,null,s,c)}for(r in s)if(i=s[r],c=n[r],s.hasOwnProperty(r)&&(i!=null||c!=null))switch(r){case"value":m=i;break;case"defaultValue":o=i;break;case"multiple":a=i;default:i!==c&&je(t,e,r,i,s,c)}e=o,n=a,s=p,m!=null?Cl(t,!!n,m,!1):!!s!=!!n&&(e!=null?Cl(t,!!n,e,!0):Cl(t,!!n,n?[]:"",!1));return;case"textarea":p=m=null;for(o in n)if(r=n[o],n.hasOwnProperty(o)&&r!=null&&!s.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:je(t,e,o,null,s,r)}for(a in s)if(r=s[a],i=n[a],s.hasOwnProperty(a)&&(r!=null||i!=null))switch(a){case"value":m=r;break;case"defaultValue":p=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(z(91));break;default:r!==i&&je(t,e,a,r,s,i)}CR(t,m,p);return;case"option":for(var _ in n)if(m=n[_],n.hasOwnProperty(_)&&m!=null&&!s.hasOwnProperty(_))switch(_){case"selected":t.selected=!1;break;default:je(t,e,_,null,s,m)}for(c in s)if(m=s[c],p=n[c],s.hasOwnProperty(c)&&m!==p&&(m!=null||p!=null))switch(c){case"selected":t.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:je(t,e,c,m,s,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var w in n)m=n[w],n.hasOwnProperty(w)&&m!=null&&!s.hasOwnProperty(w)&&je(t,e,w,null,s,m);for(u in s)if(m=s[u],p=n[u],s.hasOwnProperty(u)&&m!==p&&(m!=null||p!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(z(137,e));break;default:je(t,e,u,m,s,p)}return;default:if(z_(e)){for(var T in n)m=n[T],n.hasOwnProperty(T)&&m!==void 0&&!s.hasOwnProperty(T)&&cx(t,e,T,void 0,s,m);for(h in s)m=s[h],p=n[h],!s.hasOwnProperty(h)||m===p||m===void 0&&p===void 0||cx(t,e,h,m,s,p);return}}for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!=null&&!s.hasOwnProperty(x)&&je(t,e,x,null,s,m);for(f in s)m=s[f],p=n[f],!s.hasOwnProperty(f)||m===p||m==null&&p==null||je(t,e,f,m,s,p)}function NS(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function q3(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),s=0;s<n.length;s++){var r=n[s],i=r.transferSize,a=r.initiatorType,o=r.duration;if(i&&o&&NS(a)){for(a=0,o=r.responseEnd,s+=1;s<n.length;s++){var c=n[s],u=c.startTime;if(u>o)break;var h=c.transferSize,f=c.initiatorType;h&&NS(f)&&(c=c.responseEnd,a+=h*(c<o?1:(o-u)/(c-u)))}if(--s,e+=8*(i+a)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var ux=null,dx=null;function gp(t){return t.nodeType===9?t:t.ownerDocument}function IS(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Oj(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function hx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var M0=null;function H3(){var t=window.event;return t&&t.type==="popstate"?t===M0?!1:(M0=t,!0):(M0=null,!1)}var Vj=typeof setTimeout=="function"?setTimeout:void 0,G3=typeof clearTimeout=="function"?clearTimeout:void 0,RS=typeof Promise=="function"?Promise:void 0,$3=typeof queueMicrotask=="function"?queueMicrotask:typeof RS<"u"?function(t){return RS.resolve(null).then(t).catch(K3)}:Vj;function K3(t){setTimeout(function(){throw t})}function da(t){return t==="head"}function CS(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(s===0){t.removeChild(r),Zl(e);return}s--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")s++;else if(n==="html")md(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,md(n);for(var i=n.firstChild;i;){var a=i.nextSibling,o=i.nodeName;i[jh]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&i.rel.toLowerCase()==="stylesheet"||n.removeChild(i),i=a}}else n==="body"&&md(t.ownerDocument.body);n=r}while(n);Zl(e)}function jS(t,e){var n=t;t=0;do{var s=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=s}while(n)}function fx(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":fx(n),U_(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function W3(t,e,n,s){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[jh])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(i=t.getAttribute("rel"),i==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(i!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(i=t.getAttribute("src"),(i!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&i&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var i=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===i)return t}else return t;if(t=gs(t.nextSibling),t===null)break}return null}function Y3(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=gs(t.nextSibling),t===null))return null;return t}function Lj(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=gs(t.nextSibling),t===null))return null;return t}function mx(t){return t.data==="$?"||t.data==="$~"}function px(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Q3(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function gs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var gx=null;function PS(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return gs(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function kS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function Uj(t,e,n){switch(e=gp(n),t){case"html":if(t=e.documentElement,!t)throw Error(z(452));return t;case"head":if(t=e.head,!t)throw Error(z(453));return t;case"body":if(t=e.body,!t)throw Error(z(454));return t;default:throw Error(z(451))}}function md(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);U_(t)}var vs=new Map,DS=new Set;function yp(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var $r=Te.d;Te.d={f:X3,r:J3,D:Z3,C:eL,L:tL,m:nL,X:rL,S:sL,M:iL};function X3(){var t=$r.f(),e=Sg();return t||e}function J3(t){var e=Cc(t);e!==null&&e.tag===5&&e.type==="form"?PC(e):$r.r(t)}var Dc=typeof document>"u"?null:document;function zj(t,e,n){var s=Dc;if(s&&typeof e=="string"&&e){var r=us(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),DS.has(r)||(DS.add(r),t={rel:t,crossOrigin:n,href:e},s.querySelector(r)===null&&(e=s.createElement("link"),Jt(e,"link",t),Ft(e),s.head.appendChild(e)))}}function Z3(t){$r.D(t),zj("dns-prefetch",t,null)}function eL(t,e){$r.C(t,e),zj("preconnect",t,e)}function tL(t,e,n){$r.L(t,e,n);var s=Dc;if(s&&t&&e){var r='link[rel="preload"][as="'+us(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+us(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+us(n.imageSizes)+'"]')):r+='[href="'+us(t)+'"]';var i=r;switch(e){case"style":i=Jl(t);break;case"script":i=Mc(t)}vs.has(i)||(t=Qe({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),vs.set(i,t),s.querySelector(r)!==null||e==="style"&&s.querySelector(Vh(i))||e==="script"&&s.querySelector(Lh(i))||(e=s.createElement("link"),Jt(e,"link",t),Ft(e),s.head.appendChild(e)))}}function nL(t,e){$r.m(t,e);var n=Dc;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+us(s)+'"][href="'+us(t)+'"]',i=r;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Mc(t)}if(!vs.has(i)&&(t=Qe({rel:"modulepreload",href:t},e),vs.set(i,t),n.querySelector(r)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Lh(i)))return}s=n.createElement("link"),Jt(s,"link",t),Ft(s),n.head.appendChild(s)}}}function sL(t,e,n){$r.S(t,e,n);var s=Dc;if(s&&t){var r=Rl(s).hoistableStyles,i=Jl(t);e=e||"default";var a=r.get(i);if(!a){var o={loading:0,preload:null};if(a=s.querySelector(Vh(i)))o.loading=5;else{t=Qe({rel:"stylesheet",href:t,"data-precedence":e},n),(n=vs.get(i))&&Eb(t,n);var c=a=s.createElement("link");Ft(c),Jt(c,"link",t),c._p=new Promise(function(u,h){c.onload=u,c.onerror=h}),c.addEventListener("load",function(){o.loading|=1}),c.addEventListener("error",function(){o.loading|=2}),o.loading|=4,wm(a,e,s)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(i,a)}}}function rL(t,e){$r.X(t,e);var n=Dc;if(n&&t){var s=Rl(n).hoistableScripts,r=Mc(t),i=s.get(r);i||(i=n.querySelector(Lh(r)),i||(t=Qe({src:t,async:!0},e),(e=vs.get(r))&&Sb(t,e),i=n.createElement("script"),Ft(i),Jt(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}}function iL(t,e){$r.M(t,e);var n=Dc;if(n&&t){var s=Rl(n).hoistableScripts,r=Mc(t),i=s.get(r);i||(i=n.querySelector(Lh(r)),i||(t=Qe({src:t,async:!0,type:"module"},e),(e=vs.get(r))&&Sb(t,e),i=n.createElement("script"),Ft(i),Jt(i,"link",t),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(r,i))}}function MS(t,e,n,s){var r=(r=ji.current)?yp(r):null;if(!r)throw Error(z(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Jl(n.href),n=Rl(r).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Jl(n.href);var i=Rl(r).hoistableStyles,a=i.get(t);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(t,a),(i=r.querySelector(Vh(t)))&&!i._p&&(a.instance=i,a.state.loading=5),vs.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},vs.set(t,n),i||aL(r,t,n,a.state))),e&&s===null)throw Error(z(528,""));return a}if(e&&s!==null)throw Error(z(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Mc(n),n=Rl(r).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(z(444,t))}}function Jl(t){return'href="'+us(t)+'"'}function Vh(t){return'link[rel="stylesheet"]['+t+"]"}function Fj(t){return Qe({},t,{"data-precedence":t.precedence,precedence:null})}function aL(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),Jt(e,"link",n),Ft(e),t.head.appendChild(e))}function Mc(t){return'[src="'+us(t)+'"]'}function Lh(t){return"script[async]"+t}function OS(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+us(n.href)+'"]');if(s)return e.instance=s,Ft(s),s;var r=Qe({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),Ft(s),Jt(s,"style",r),wm(s,n.precedence,t),e.instance=s;case"stylesheet":r=Jl(n.href);var i=t.querySelector(Vh(r));if(i)return e.state.loading|=4,e.instance=i,Ft(i),i;s=Fj(n),(r=vs.get(r))&&Eb(s,r),i=(t.ownerDocument||t).createElement("link"),Ft(i);var a=i;return a._p=new Promise(function(o,c){a.onload=o,a.onerror=c}),Jt(i,"link",s),e.state.loading|=4,wm(i,n.precedence,t),e.instance=i;case"script":return i=Mc(n.src),(r=t.querySelector(Lh(i)))?(e.instance=r,Ft(r),r):(s=n,(r=vs.get(i))&&(s=Qe({},n),Sb(s,r)),t=t.ownerDocument||t,r=t.createElement("script"),Ft(r),Jt(r,"link",s),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(z(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,wm(s,n.precedence,t));return e.instance}function wm(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=s.length?s[s.length-1]:null,i=r,a=0;a<s.length;a++){var o=s[a];if(o.dataset.precedence===e)i=o;else if(i!==r)break}i?i.parentNode.insertBefore(t,i.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Eb(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Sb(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Tm=null;function VS(t,e,n){if(Tm===null){var s=new Map,r=Tm=new Map;r.set(n,s)}else r=Tm,s=r.get(n),s||(s=new Map,r.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var i=n[r];if(!(i[jh]||i[Kt]||t==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var a=i.getAttribute(e)||"";a=t+a;var o=s.get(a);o?o.push(i):s.set(a,[i])}}return s}function LS(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function oL(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Bj(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function lL(t,e,n,s){if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=Jl(s.href),i=e.querySelector(Vh(r));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=vp.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=i,Ft(i);return}i=e.ownerDocument||e,s=Fj(s),(r=vs.get(r))&&Eb(s,r),i=i.createElement("link"),Ft(i);var a=i;a._p=new Promise(function(o,c){a.onload=o,a.onerror=c}),Jt(i,"link",s),n.instance=i}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=vp.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var O0=0;function cL(t,e){return t.stylesheets&&t.count===0&&Em(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var s=setTimeout(function(){if(t.stylesheets&&Em(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4+e);0<t.imgBytes&&O0===0&&(O0=62500*q3());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Em(t,t.stylesheets),t.unsuspend)){var i=t.unsuspend;t.unsuspend=null,i()}},(t.imgBytes>O0?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s),clearTimeout(r)}}:null}function vp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Em(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var xp=null;function Em(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,xp=new Map,e.forEach(uL,t),xp=null,vp.call(t))}function uL(t,e){if(!(e.state.loading&4)){var n=xp.get(t);if(n)var s=n.get(null);else{n=new Map,xp.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<r.length;i++){var a=r[i];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),s=a)}s&&n.set(null,s)}r=e.instance,a=r.getAttribute("data-precedence"),i=n.get(a)||s,i===s&&n.set(null,r),n.set(a,r),this.count++,s=vp.bind(this),r.addEventListener("load",s),r.addEventListener("error",s),i?i.parentNode.insertBefore(r,i.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var $d={$$typeof:vr,Provider:null,Consumer:null,_currentValue:Za,_currentValue2:Za,_threadCount:0};function dL(t,e,n,s,r,i,a,o,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=i0(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=i0(0),this.hiddenUpdates=i0(null),this.identifierPrefix=s,this.onUncaughtError=r,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function qj(t,e,n,s,r,i,a,o,c,u,h,f){return t=new dL(t,e,n,a,c,u,h,f,o),e=1,i===!0&&(e|=24),i=zn(3,null,null,e),t.current=i,i.stateNode=t,e=X_(),e.refCount++,t.pooledCache=e,e.refCount++,i.memoizedState={element:s,isDehydrated:n,cache:e},eb(i),t}function Hj(t){return t?(t=xl,t):xl}function Gj(t,e,n,s,r,i){r=Hj(r),s.context===null?s.context=r:s.pendingContext=r,s=ki(e),s.payload={element:n},i=i===void 0?null:i,i!==null&&(s.callback=i),n=Di(t,s,e),n!==null&&(jn(n,t,e),ad(n,t,e))}function US(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ab(t,e){US(t,e),(t=t.alternate)&&US(t,e)}function $j(t){if(t.tag===13||t.tag===31){var e=jo(t,67108864);e!==null&&jn(e,t,67108864),Ab(t,67108864)}}function zS(t){if(t.tag===13||t.tag===31){var e=$n();e=V_(e);var n=jo(t,e);n!==null&&jn(n,t,e),Ab(t,e)}}var _p=!0;function hL(t,e,n,s){var r=se.T;se.T=null;var i=Te.p;try{Te.p=2,Nb(t,e,n,s)}finally{Te.p=i,se.T=r}}function fL(t,e,n,s){var r=se.T;se.T=null;var i=Te.p;try{Te.p=8,Nb(t,e,n,s)}finally{Te.p=i,se.T=r}}function Nb(t,e,n,s){if(_p){var r=yx(s);if(r===null)D0(t,e,s,bp,n),FS(t,s);else if(pL(r,t,e,n,s))s.stopPropagation();else if(FS(t,s),e&4&&-1<mL.indexOf(t)){for(;r!==null;){var i=Cc(r);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var a=Da(i.pendingLanes);if(a!==0){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var c=1<<31-Gn(a);o.entanglements[1]|=c,a&=~c}lr(i),!(we&6)&&(up=qn()+500,Oh(0))}}break;case 31:case 13:o=jo(i,2),o!==null&&jn(o,i,2),Sg(),Ab(i,2)}if(i=yx(s),i===null&&D0(t,e,s,bp,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else D0(t,e,s,null,n)}}function yx(t){return t=F_(t),Ib(t)}var bp=null;function Ib(t){if(bp=null,t=fl(t),t!==null){var e=Nh(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=hR(e),t!==null)return t;t=null}else if(n===31){if(t=fR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return bp=t,null}function Kj(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ZV()){case yR:return 2;case vR:return 8;case Qm:case e5:return 32;case xR:return 268435456;default:return 32}default:return 32}}var vx=!1,Vi=null,Li=null,Ui=null,Kd=new Map,Wd=new Map,bi=[],mL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function FS(t,e){switch(t){case"focusin":case"focusout":Vi=null;break;case"dragenter":case"dragleave":Li=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":Kd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wd.delete(e.pointerId)}}function Tu(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Cc(e),e!==null&&$j(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function pL(t,e,n,s,r){switch(e){case"focusin":return Vi=Tu(Vi,t,e,n,s,r),!0;case"dragenter":return Li=Tu(Li,t,e,n,s,r),!0;case"mouseover":return Ui=Tu(Ui,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return Kd.set(i,Tu(Kd.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Wd.set(i,Tu(Wd.get(i)||null,t,e,n,s,r)),!0}return!1}function Wj(t){var e=fl(t.target);if(e!==null){var n=Nh(e);if(n!==null){if(e=n.tag,e===13){if(e=hR(n),e!==null){t.blockedOn=e,SE(t.priority,function(){zS(n)});return}}else if(e===31){if(e=fR(n),e!==null){t.blockedOn=e,SE(t.priority,function(){zS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yx(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Ov=s,n.target.dispatchEvent(s),Ov=null}else return e=Cc(n),e!==null&&$j(e),t.blockedOn=n,!1;e.shift()}return!0}function BS(t,e,n){Sm(t)&&n.delete(e)}function gL(){vx=!1,Vi!==null&&Sm(Vi)&&(Vi=null),Li!==null&&Sm(Li)&&(Li=null),Ui!==null&&Sm(Ui)&&(Ui=null),Kd.forEach(BS),Wd.forEach(BS)}function qf(t,e){t.blockedOn===e&&(t.blockedOn=null,vx||(vx=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,gL)))}var Hf=null;function qS(t){Hf!==t&&(Hf=t,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,function(){Hf===t&&(Hf=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],r=t[e+2];if(typeof s!="function"){if(Ib(s||n)===null)continue;break}var i=Cc(n);i!==null&&(t.splice(e,3),e-=3,Jv(i,{pending:!0,data:r,method:n.method,action:s},s,r))}}))}function Zl(t){function e(c){return qf(c,t)}Vi!==null&&qf(Vi,t),Li!==null&&qf(Li,t),Ui!==null&&qf(Ui,t),Kd.forEach(e),Wd.forEach(e);for(var n=0;n<bi.length;n++){var s=bi[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<bi.length&&(n=bi[0],n.blockedOn===null);)Wj(n),n.blockedOn===null&&bi.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var r=n[s],i=n[s+1],a=r[Pn]||null;if(typeof i=="function")a||qS(n);else if(a){var o=null;if(i&&i.hasAttribute("formAction")){if(r=i,a=i[Pn]||null)o=a.formAction;else if(Ib(r)!==null)continue}else o=a.action;typeof o=="function"?n[s+1]=o:(n.splice(s,3),s-=3),qS(n)}}}function Yj(){function t(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(a){return r=a})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),s||setTimeout(n,20)}function n(){if(!s&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){s=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function Rb(t){this._internalRoot=t}Ig.prototype.render=Rb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));var n=e.current,s=$n();Gj(n,s,t,e,null,null)};Ig.prototype.unmount=Rb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gj(t.current,2,null,t,null,null),Sg(),e[Rc]=null}};function Ig(t){this._internalRoot=t}Ig.prototype.unstable_scheduleHydration=function(t){if(t){var e=ER();t={blockedOn:null,target:t,priority:e};for(var n=0;n<bi.length&&e!==0&&e<bi[n].priority;n++);bi.splice(n,0,t),n===0&&Wj(t)}};var HS=uR.version;if(HS!=="19.2.0")throw Error(z(527,HS,"19.2.0"));Te.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=$V(e),t=t!==null?mR(t):null,t=t===null?null:t.stateNode,t};var yL={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gf.isDisabled&&Gf.supportsFiber)try{Ih=Gf.inject(yL),Hn=Gf}catch{}}dg.createRoot=function(t,e){if(!dR(t))throw Error(z(299));var n=!1,s="",r=zC,i=FC,a=BC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(i=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=qj(t,1,!1,null,null,n,s,null,r,i,a,Yj),t[Rc]=e.current,Tb(t),new Rb(e)};dg.hydrateRoot=function(t,e,n){if(!dR(t))throw Error(z(299));var s=!1,r="",i=zC,a=FC,o=BC,c=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),e=qj(t,1,!0,e,n??null,s,r,c,i,a,o,Yj),e.context=Hj(null),n=e.current,s=$n(),s=V_(s),r=ki(s),r.callback=null,Di(n,r,s),n=s,e.current.lanes=n,Ch(e,n),lr(e),t[Rc]=e.current,Tb(t),new Ig(e)};dg.version="19.2.0";function Qj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qj)}catch(t){console.error(t)}}Qj(),rR.exports=dg;var vL=rR.exports;const xL=W2(vL);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var GS="popstate";function _L(t={}){function e(r,i){let{pathname:a="/",search:o="",hash:c=""}=ko(r.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),xx("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){let a=r.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let c=r.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof i=="string"?i:Yd(i))}function s(r,i){Jn(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return wL(e,n,s,t)}function st(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Jn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bL(){return Math.random().toString(36).substring(2,10)}function $S(t,e){return{usr:t.state,key:t.key,idx:e}}function xx(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ko(e):e,state:n,key:e&&e.key||s||bL()}}function Yd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ko(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function wL(t,e,n,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,a=r.history,o="POP",c=null,u=h();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function h(){return(a.state||{idx:null}).idx}function f(){o="POP";let T=h(),x=T==null?null:T-u;u=T,c&&c({action:o,location:w.location,delta:x})}function m(T,x){o="PUSH";let v=xx(w.location,T,x);n&&n(v,T),u=h()+1;let b=$S(v,u),R=w.createHref(v);try{a.pushState(b,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(R)}i&&c&&c({action:o,location:w.location,delta:1})}function p(T,x){o="REPLACE";let v=xx(w.location,T,x);n&&n(v,T),u=h();let b=$S(v,u),R=w.createHref(v);a.replaceState(b,"",R),i&&c&&c({action:o,location:w.location,delta:0})}function _(T){return TL(T)}let w={get action(){return o},get location(){return t(r,a)},listen(T){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(GS,f),c=T,()=>{r.removeEventListener(GS,f),c=null}},createHref(T){return e(r,T)},createURL:_,encodeLocation(T){let x=_(T);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:p,go(T){return a.go(T)}};return w}function TL(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),st(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:Yd(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function Xj(t,e,n="/"){return EL(t,e,n,!1)}function EL(t,e,n,s){let r=typeof e=="string"?ko(e):e,i=Or(r.pathname||"/",n);if(i==null)return null;let a=Jj(t);SL(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let u=OL(i);o=DL(a[c],u,s)}return o}function Jj(t,e=[],n=[],s="",r=!1){let i=(a,o,c=r,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(s)&&c)return;st(h.relativePath.startsWith(s),`Absolute route path "${h.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(s.length)}let f=Ar([s,h.relativePath]),m=n.concat(h);a.children&&a.children.length>0&&(st(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Jj(a.children,e,m,f,c)),!(a.path==null&&!a.index)&&e.push({path:f,score:PL(f,a.index),routesMeta:m})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,o);else for(let u of Zj(a.path))i(a,o,!0,u)}),e}function Zj(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let a=Zj(s.join("/")),o=[];return o.push(...a.map(c=>c===""?i:[i,c].join("/"))),r&&o.push(...a),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function SL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kL(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var AL=/^:[\w-]+$/,NL=3,IL=2,RL=1,CL=10,jL=-2,KS=t=>t==="*";function PL(t,e){let n=t.split("/"),s=n.length;return n.some(KS)&&(s+=jL),e&&(s+=IL),n.filter(r=>!KS(r)).reduce((r,i)=>r+(AL.test(i)?NL:i===""?RL:CL),s)}function kL(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function DL(t,e,n=!1){let{routesMeta:s}=t,r={},i="/",a=[];for(let o=0;o<s.length;++o){let c=s[o],u=o===s.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=wp({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),m=c.route;if(!f&&u&&n&&!s[s.length-1].route.index&&(f=wp({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(r,f.params),a.push({params:r,pathname:Ar([i,f.pathname]),pathnameBase:FL(Ar([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Ar([i,f.pathnameBase]))}return a}function wp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=ML(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:s.reduce((u,{paramName:h,isOptional:f},m)=>{if(h==="*"){let _=o[m]||"";a=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const p=o[m];return f&&!p?u[h]=void 0:u[h]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:t}}function ML(t,e=!1,n=!0){Jn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function OL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Or(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}var VL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,LL=t=>VL.test(t);function UL(t,e="/"){let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?ko(t):t,i;if(n)if(LL(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Jn(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?i=WS(n.substring(1),"/"):i=WS(n,e)}else i=e;return{pathname:i,search:BL(s),hash:qL(r)}}function WS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function V0(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zL(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Cb(t){let e=zL(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function jb(t,e,n,s=!1){let r;typeof t=="string"?r=ko(t):(r={...t},st(!r.pathname||!r.pathname.includes("?"),V0("?","pathname","search",r)),st(!r.pathname||!r.pathname.includes("#"),V0("#","pathname","hash",r)),st(!r.search||!r.search.includes("#"),V0("#","search","hash",r)));let i=t===""||r.pathname==="",a=i?"/":r.pathname,o;if(a==null)o=n;else{let f=e.length-1;if(!s&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;r.pathname=m.join("/")}o=f>=0?e[f]:"/"}let c=UL(r,o),u=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}var Ar=t=>t.join("/").replace(/\/\/+/g,"/"),FL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function HL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var eP=["POST","PUT","PATCH","DELETE"];new Set(eP);var GL=["GET",...eP];new Set(GL);var Oc=S.createContext(null);Oc.displayName="DataRouter";var Rg=S.createContext(null);Rg.displayName="DataRouterState";S.createContext(!1);var tP=S.createContext({isTransitioning:!1});tP.displayName="ViewTransition";var $L=S.createContext(new Map);$L.displayName="Fetchers";var KL=S.createContext(null);KL.displayName="Await";var js=S.createContext(null);js.displayName="Navigation";var Uh=S.createContext(null);Uh.displayName="Location";var Ps=S.createContext({outlet:null,matches:[],isDataRoute:!1});Ps.displayName="Route";var Pb=S.createContext(null);Pb.displayName="RouteError";function WL(t,{relative:e}={}){st(Vc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=S.useContext(js),{hash:r,pathname:i,search:a}=zh(t,{relative:e}),o=i;return n!=="/"&&(o=i==="/"?n:Ar([n,i])),s.createHref({pathname:o,search:a,hash:r})}function Vc(){return S.useContext(Uh)!=null}function ks(){return st(Vc(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Uh).location}var nP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sP(t){S.useContext(js).static||S.useLayoutEffect(t)}function Ds(){let{isDataRoute:t}=S.useContext(Ps);return t?cU():YL()}function YL(){st(Vc(),"useNavigate() may be used only in the context of a <Router> component.");let t=S.useContext(Oc),{basename:e,navigator:n}=S.useContext(js),{matches:s}=S.useContext(Ps),{pathname:r}=ks(),i=JSON.stringify(Cb(s)),a=S.useRef(!1);return sP(()=>{a.current=!0}),S.useCallback((c,u={})=>{if(Jn(a.current,nP),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=jb(c,JSON.parse(i),r,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ar([e,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[e,n,i,r,t])}var QL=S.createContext(null);function XL(t){let e=S.useContext(Ps).outlet;return S.useMemo(()=>e&&S.createElement(QL.Provider,{value:t},e),[e,t])}function zh(t,{relative:e}={}){let{matches:n}=S.useContext(Ps),{pathname:s}=ks(),r=JSON.stringify(Cb(n));return S.useMemo(()=>jb(t,JSON.parse(r),s,e==="path"),[t,r,s,e])}function JL(t,e){return rP(t,e)}function rP(t,e,n,s,r){var v;st(Vc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=S.useContext(js),{matches:a}=S.useContext(Ps),o=a[a.length-1],c=o?o.params:{},u=o?o.pathname:"/",h=o?o.pathnameBase:"/",f=o&&o.route;{let b=f&&f.path||"";iP(u,!f||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let m=ks(),p;if(e){let b=typeof e=="string"?ko(e):e;st(h==="/"||((v=b.pathname)==null?void 0:v.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${b.pathname}" was given in the \`location\` prop.`),p=b}else p=m;let _=p.pathname||"/",w=_;if(h!=="/"){let b=h.replace(/^\//,"").split("/");w="/"+_.replace(/^\//,"").split("/").slice(b.length).join("/")}let T=Xj(t,{pathname:w});Jn(f||T!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Jn(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=sU(T&&T.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:Ar([h,i.encodeLocation?i.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?h:Ar([h,i.encodeLocation?i.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),a,n,s,r);return e&&x?S.createElement(Uh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},x):x}function ZL(){let t=lU(),e=HL(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:i},"ErrorBoundary")," or"," ",S.createElement("code",{style:i},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:r},n):null,a)}var eU=S.createElement(ZL,null),tU=class extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?S.createElement(Ps.Provider,{value:this.props.routeContext},S.createElement(Pb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function nU({routeContext:t,match:e,children:n}){let s=S.useContext(Oc);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),S.createElement(Ps.Provider,{value:t},n)}function sU(t,e=[],n=null,s=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=n==null?void 0:n.errors;if(a!=null){let h=i.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);st(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let o=!1,c=-1;if(n)for(let h=0;h<i.length;h++){let f=i[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:m,errors:p}=n,_=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||_){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let u=n&&s?(h,f)=>{var m,p;s(h,{location:n.location,params:((p=(m=n.matches)==null?void 0:m[0])==null?void 0:p.params)??{},errorInfo:f})}:void 0;return i.reduceRight((h,f,m)=>{let p,_=!1,w=null,T=null;n&&(p=a&&f.route.id?a[f.route.id]:void 0,w=f.route.errorElement||eU,o&&(c<0&&m===0?(iP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,T=null):c===m&&(_=!0,T=f.route.hydrateFallbackElement||null)));let x=e.concat(i.slice(0,m+1)),v=()=>{let b;return p?b=w:_?b=T:f.route.Component?b=S.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=h,S.createElement(nU,{match:f,routeContext:{outlet:h,matches:x,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?S.createElement(tU,{location:n.location,revalidation:n.revalidation,component:w,error:p,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0},onError:u}):v()},null)}function kb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rU(t){let e=S.useContext(Oc);return st(e,kb(t)),e}function iU(t){let e=S.useContext(Rg);return st(e,kb(t)),e}function aU(t){let e=S.useContext(Ps);return st(e,kb(t)),e}function Db(t){let e=aU(t),n=e.matches[e.matches.length-1];return st(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function oU(){return Db("useRouteId")}function lU(){var s;let t=S.useContext(Pb),e=iU("useRouteError"),n=Db("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[n]}function cU(){let{router:t}=rU("useNavigate"),e=Db("useNavigate"),n=S.useRef(!1);return sP(()=>{n.current=!0}),S.useCallback(async(r,i={})=>{Jn(n.current,nP),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...i}))},[t,e])}var YS={};function iP(t,e,n){!e&&!YS[t]&&(YS[t]=!0,Jn(!1,n))}S.memo(uU);function uU({routes:t,future:e,state:n,unstable_onError:s}){return rP(t,void 0,n,s,e)}function QS({to:t,replace:e,state:n,relative:s}){st(Vc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=S.useContext(js);Jn(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=S.useContext(Ps),{pathname:a}=ks(),o=Ds(),c=jb(t,Cb(i),a,s==="path"),u=JSON.stringify(c);return S.useEffect(()=>{o(JSON.parse(u),{replace:e,state:n,relative:s})},[o,u,s,e,n]),null}function aP(t){return XL(t.context)}function Ue(t){st(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dU({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:r,static:i=!1}){st(!Vc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=S.useMemo(()=>({basename:a,navigator:r,static:i,future:{}}),[a,r,i]);typeof n=="string"&&(n=ko(n));let{pathname:c="/",search:u="",hash:h="",state:f=null,key:m="default"}=n,p=S.useMemo(()=>{let _=Or(c,a);return _==null?null:{location:{pathname:_,search:u,hash:h,state:f,key:m},navigationType:s}},[a,c,u,h,f,m,s]);return Jn(p!=null,`<Router basename="${a}"> is not able to match the URL "${c}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:S.createElement(js.Provider,{value:o},S.createElement(Uh.Provider,{children:e,value:p}))}function hU({children:t,location:e}){return JL(_x(t),e)}function _x(t,e=[]){let n=[];return S.Children.forEach(t,(s,r)=>{if(!S.isValidElement(s))return;let i=[...e,r];if(s.type===S.Fragment){n.push.apply(n,_x(s.props.children,i));return}st(s.type===Ue,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),st(!s.props.index||!s.props.children,"An index route cannot have child routes.");let a={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=_x(s.props.children,i)),n.push(a)}),n}var Am="get",Nm="application/x-www-form-urlencoded";function Cg(t){return t!=null&&typeof t.tagName=="string"}function fU(t){return Cg(t)&&t.tagName.toLowerCase()==="button"}function mU(t){return Cg(t)&&t.tagName.toLowerCase()==="form"}function pU(t){return Cg(t)&&t.tagName.toLowerCase()==="input"}function gU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function yU(t,e){return t.button===0&&(!e||e==="_self")&&!gU(t)}var $f=null;function vU(){if($f===null)try{new FormData(document.createElement("form"),0),$f=!1}catch{$f=!0}return $f}var xU=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function L0(t){return t!=null&&!xU.has(t)?(Jn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Nm}"`),null):t}function _U(t,e){let n,s,r,i,a;if(mU(t)){let o=t.getAttribute("action");s=o?Or(o,e):null,n=t.getAttribute("method")||Am,r=L0(t.getAttribute("enctype"))||Nm,i=new FormData(t)}else if(fU(t)||pU(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(s=c?Or(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Am,r=L0(t.getAttribute("formenctype"))||L0(o.getAttribute("enctype"))||Nm,i=new FormData(o,t),!vU()){let{name:u,type:h,value:f}=t;if(h==="image"){let m=u?`${u}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else u&&i.append(u,f)}}else{if(Cg(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Am,s=null,r=Nm,a=t}return i&&r==="text/plain"&&(a=i,i=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Mb(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bU(t,e,n){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&Or(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function wU(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function TU(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function EU(t,e,n){let s=await Promise.all(t.map(async r=>{let i=e.routes[r.route.id];if(i){let a=await wU(i,n);return a.links?a.links():[]}return[]}));return IU(s.flat(1).filter(TU).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function XS(t,e,n,s,r,i){let a=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,o=(c,u)=>{var h;return n[u].pathname!==c.pathname||((h=n[u].route.path)==null?void 0:h.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,u)=>a(c,u)||o(c,u)):i==="data"?e.filter((c,u)=>{var f;let h=s.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(a(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function SU(t,e,{includeHydrateFallback:n}={}){return AU(t.map(s=>{let r=e.routes[s.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function AU(t){return[...new Set(t)]}function NU(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function IU(t,e){let n=new Set;return new Set(e),t.reduce((s,r)=>{let i=JSON.stringify(NU(r));return n.has(i)||(n.add(i),s.push({key:i,link:r})),s},[])}function oP(){let t=S.useContext(Oc);return Mb(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function RU(){let t=S.useContext(Rg);return Mb(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Ob=S.createContext(void 0);Ob.displayName="FrameworkContext";function lP(){let t=S.useContext(Ob);return Mb(t,"You must render this element inside a <HydratedRouter> element"),t}function CU(t,e){let n=S.useContext(Ob),[s,r]=S.useState(!1),[i,a]=S.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:f}=e,m=S.useRef(null);S.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let w=x=>{x.forEach(v=>{a(v.isIntersecting)})},T=new IntersectionObserver(w,{threshold:.5});return m.current&&T.observe(m.current),()=>{T.disconnect()}}},[t]),S.useEffect(()=>{if(s){let w=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(w)}}},[s]);let p=()=>{r(!0)},_=()=>{r(!1),a(!1)};return n?t!=="intent"?[i,m,{}]:[i,m,{onFocus:Eu(o,p),onBlur:Eu(c,_),onMouseEnter:Eu(u,p),onMouseLeave:Eu(h,_),onTouchStart:Eu(f,p)}]:[!1,m,{}]}function Eu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function jU({page:t,...e}){let{router:n}=oP(),s=S.useMemo(()=>Xj(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?S.createElement(kU,{page:t,matches:s,...e}):null}function PU(t){let{manifest:e,routeModules:n}=lP(),[s,r]=S.useState([]);return S.useEffect(()=>{let i=!1;return EU(t,e,n).then(a=>{i||r(a)}),()=>{i=!0}},[t,e,n]),s}function kU({page:t,matches:e,...n}){let s=ks(),{manifest:r,routeModules:i}=lP(),{basename:a}=oP(),{loaderData:o,matches:c}=RU(),u=S.useMemo(()=>XS(t,e,c,r,s,"data"),[t,e,c,r,s]),h=S.useMemo(()=>XS(t,e,c,r,s,"assets"),[t,e,c,r,s]),f=S.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let _=new Set,w=!1;if(e.forEach(x=>{var b;let v=r.routes[x.route.id];!v||!v.hasLoader||(!u.some(R=>R.route.id===x.route.id)&&x.route.id in o&&((b=i[x.route.id])!=null&&b.shouldRevalidate)||v.hasClientLoader?w=!0:_.add(x.route.id))}),_.size===0)return[];let T=bU(t,a,"data");return w&&_.size>0&&T.searchParams.set("_routes",e.filter(x=>_.has(x.route.id)).map(x=>x.route.id).join(",")),[T.pathname+T.search]},[a,o,s,r,u,e,t,i]),m=S.useMemo(()=>SU(h,r),[h,r]),p=PU(h);return S.createElement(S.Fragment,null,f.map(_=>S.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),m.map(_=>S.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),p.map(({key:_,link:w})=>S.createElement("link",{key:_,nonce:n.nonce,...w})))}function DU(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var cP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cP&&(window.__reactRouterVersion="7.9.6")}catch{}function MU({basename:t,children:e,window:n}){let s=S.useRef();s.current==null&&(s.current=_L({window:n,v5Compat:!0}));let r=s.current,[i,a]=S.useState({action:r.action,location:r.location}),o=S.useCallback(c=>{S.startTransition(()=>a(c))},[a]);return S.useLayoutEffect(()=>r.listen(o),[r,o]),S.createElement(dU,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:r})}var uP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pe=S.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:r,reloadDocument:i,replace:a,state:o,target:c,to:u,preventScrollReset:h,viewTransition:f,...m},p){let{basename:_}=S.useContext(js),w=typeof u=="string"&&uP.test(u),T,x=!1;if(typeof u=="string"&&w&&(T=u,cP))try{let N=new URL(window.location.href),I=u.startsWith("//")?new URL(N.protocol+u):new URL(u),P=Or(I.pathname,_);I.origin===N.origin&&P!=null?u=P+I.search+I.hash:x=!0}catch{Jn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=WL(u,{relative:r}),[b,R,D]=CU(s,m),M=LU(u,{replace:a,state:o,target:c,preventScrollReset:h,relative:r,viewTransition:f});function A(N){e&&e(N),N.defaultPrevented||M(N)}let E=S.createElement("a",{...m,...D,href:T||v,onClick:x||i?e:A,ref:DU(p,R),target:c,"data-discover":!w&&n==="render"?"true":void 0});return b&&!w?S.createElement(S.Fragment,null,E,S.createElement(jU,{page:v})):E});Pe.displayName="Link";var rs=S.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:r=!1,style:i,to:a,viewTransition:o,children:c,...u},h){let f=zh(a,{relative:u.relative}),m=ks(),p=S.useContext(Rg),{navigator:_,basename:w}=S.useContext(js),T=p!=null&&qU(f)&&o===!0,x=_.encodeLocation?_.encodeLocation(f).pathname:f.pathname,v=m.pathname,b=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(v=v.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&w&&(b=Or(b,w)||b);const R=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let D=v===x||!r&&v.startsWith(x)&&v.charAt(R)==="/",M=b!=null&&(b===x||!r&&b.startsWith(x)&&b.charAt(x.length)==="/"),A={isActive:D,isPending:M,isTransitioning:T},E=D?e:void 0,N;typeof s=="function"?N=s(A):N=[s,D?"active":null,M?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let I=typeof i=="function"?i(A):i;return S.createElement(Pe,{...u,"aria-current":E,className:N,ref:h,style:I,to:a,viewTransition:o},typeof c=="function"?c(A):c)});rs.displayName="NavLink";var OU=S.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:r,state:i,method:a=Am,action:o,onSubmit:c,relative:u,preventScrollReset:h,viewTransition:f,...m},p)=>{let _=FU(),w=BU(o,{relative:u}),T=a.toLowerCase()==="get"?"get":"post",x=typeof o=="string"&&uP.test(o),v=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let R=b.nativeEvent.submitter,D=(R==null?void 0:R.getAttribute("formmethod"))||a;_(R||b.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:r,state:i,relative:u,preventScrollReset:h,viewTransition:f})};return S.createElement("form",{ref:p,method:T,action:w,onSubmit:s?c:v,...m,"data-discover":!x&&t==="render"?"true":void 0})});OU.displayName="Form";function VU(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dP(t){let e=S.useContext(Oc);return st(e,VU(t)),e}function LU(t,{target:e,replace:n,state:s,preventScrollReset:r,relative:i,viewTransition:a}={}){let o=Ds(),c=ks(),u=zh(t,{relative:i});return S.useCallback(h=>{if(yU(h,e)){h.preventDefault();let f=n!==void 0?n:Yd(c)===Yd(u);o(t,{replace:f,state:s,preventScrollReset:r,relative:i,viewTransition:a})}},[c,o,u,n,s,e,t,r,i,a])}var UU=0,zU=()=>`__${String(++UU)}__`;function FU(){let{router:t}=dP("useSubmit"),{basename:e}=S.useContext(js),n=oU();return S.useCallback(async(s,r={})=>{let{action:i,method:a,encType:o,formData:c,body:u}=_U(s,e);if(r.navigate===!1){let h=r.fetcherKey||zU();await t.fetch(h,n,r.action||i,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||a,formEncType:r.encType||o,flushSync:r.flushSync})}else await t.navigate(r.action||i,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||a,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function BU(t,{relative:e}={}){let{basename:n}=S.useContext(js),s=S.useContext(Ps);st(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...zh(t||".",{relative:e})},a=ks();if(t==null){i.search=a.search;let o=new URLSearchParams(i.search),c=o.getAll("index");if(c.some(h=>h==="")){o.delete("index"),c.filter(f=>f).forEach(f=>o.append("index",f));let h=o.toString();i.search=h?`?${h}`:""}}return(!t||t===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Ar([n,i.pathname])),Yd(i)}function qU(t,{relative:e}={}){let n=S.useContext(tP);st(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=dP("useViewTransitionState"),r=zh(t,{relative:e});if(!n.isTransitioning)return!1;let i=Or(n.currentLocation.pathname,s)||n.currentLocation.pathname,a=Or(n.nextLocation.pathname,s)||n.nextLocation.pathname;return wp(r.pathname,a)!=null||wp(r.pathname,i)!=null}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),GU=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),JS=t=>{const e=GU(t);return e.charAt(0).toUpperCase()+e.slice(1)},hP=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),$U=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var KU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:a,...o},c)=>S.createElement("svg",{ref:c,...KU,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:hP("lucide",r),...!i&&!$U(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,h])=>S.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=(t,e)=>{const n=S.forwardRef(({className:s,...r},i)=>S.createElement(WU,{ref:i,iconNode:e,className:hP(`lucide-${HU(JS(t))}`,`lucide-${t}`,s),...r}));return n.displayName=JS(t),n};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ec=Y("arrow-right",YU);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],XU=Y("arrow-up-down",QU);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],ZU=Y("award",JU);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],t9=Y("banknote",e9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],jg=Y("bell",n9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],fP=Y("calendar",s9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],i9=Y("camera",r9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],mP=Y("chart-column",a9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],l9=Y("chart-no-axes-column-increasing",o9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Yi=Y("check",c9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Fh=Y("chevron-down",u9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]],h9=Y("chevrons-down",d9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ha=Y("circle-alert",f9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Vb=Y("circle-check-big",m9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],g9=Y("circle-dollar-sign",p9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],v9=Y("circle-question-mark",y9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],_9=Y("circle-x",x9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]],w9=Y("clipboard-copy",b9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],E9=Y("clipboard-list",T9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Pg=Y("clock",S9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],N9=Y("cloud-upload",A9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],As=Y("coffee",I9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],C9=Y("crown",R9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],P9=Y("dollar-sign",j9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],bx=Y("eye-off",k9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],wx=Y("eye",D9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],pP=Y("facebook",M9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O9=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],V9=Y("file-image",O9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Qd=Y("gift",L9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],z9=Y("hash",U9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F9=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],B9=Y("history",F9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],H9=Y("image",q9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],$9=Y("info",G9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],gP=Y("instagram",K9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W9=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Y9=Y("key",W9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],X9=Y("layout-dashboard",Q9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Z9=Y("lightbulb",J9);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],_t=Y("loader-circle",ez);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Tp=Y("lock",tz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ZS=Y("log-out",nz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],sr=Y("mail",sz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Lb=Y("map-pin",rz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],az=Y("medal",iz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],yP=Y("menu",oz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lz=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],cz=Y("message-circle",lz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Lc=Y("message-square",uz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=[["path",{d:"M5 12h14",key:"1ays0h"}]],vP=Y("minus",dz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],fz=Y("package",hz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],pz=Y("palette",mz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gz=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Vr=Y("phone",gz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Bh=Y("plus",yz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],xz=Y("quote",vz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _z=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],xP=Y("refresh-cw",_z);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bz=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ub=Y("save",bz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wz=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ep=Y("search",wz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tz=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],zb=Y("send",Tz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ez=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Fb=Y("settings",Ez);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sz=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Az=Y("share-2",Sz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nz=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Xd=Y("shield",Nz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iz=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Bb=Y("shopping-bag",Iz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rz=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],qb=Y("shopping-cart",Rz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cz=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],_P=Y("square-pen",Cz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jz=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],bP=Y("star",jz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pz=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],kg=Y("trash-2",Pz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kz=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],wP=Y("triangle-alert",kz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dz=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],TP=Y("twitter",Dz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mz=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],eA=Y("upload",Mz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oz=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Lr=Y("user",Oz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Sp=Y("users",Vz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lz=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],EP=Y("wallet",Lz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uz=[["path",{d:"M12 10v2.2l1.6 1",key:"n3r21l"}],["path",{d:"m16.13 7.66-.81-4.05a2 2 0 0 0-2-1.61h-2.68a2 2 0 0 0-2 1.61l-.78 4.05",key:"18k57s"}],["path",{d:"m7.88 16.36.8 4a2 2 0 0 0 2 1.61h2.72a2 2 0 0 0 2-1.61l.81-4.05",key:"16ny36"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}]],zz=Y("watch",Uz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Kr=Y("x",Fz);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bz=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],qz=Y("zap",Bz),ve=({children:t,className:e="",hover:n=!1})=>{const s=n?"hover:shadow-xl transition-all duration-300":"";return l.jsx("div",{className:`rounded-lg border border-gray-100 bg-white p-6 shadow-sm ${s} ${e}`,children:t})},Xt=({children:t,className:e=""})=>{const n="inline-flex items-center rounded-full px-3 py-1 text-sm font-medium",s=e.includes("bg-")?"":"bg-primary-100 text-primary-800";return l.jsx("span",{className:`${n} ${s} ${e}`,children:t})},Hz=()=>{};var tA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Gz=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],a=t[n++],o=t[n++],c=((r&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|a&63)}}return e.join("")},AP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],a=r+1<t.length,o=a?t[r+1]:0,c=r+2<t.length,u=c?t[r+2]:0,h=i>>2,f=(i&3)<<4|o>>4;let m=(o&15)<<2|u>>6,p=u&63;c||(p=64,a||(m=64)),s.push(n[h],n[f],n[m],n[p])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(SP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Gz(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const f=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||o==null||u==null||f==null)throw new $z;const m=i<<2|o>>4;if(s.push(m),u!==64){const p=o<<4&240|u>>2;if(s.push(p),f!==64){const _=u<<6&192|f;s.push(_)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $z extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Kz=function(t){const e=SP(t);return AP.encodeByteArray(e,!0)},Ap=function(t){return Kz(t).replace(/\./g,"")},Hb=function(t){try{return AP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Np(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Wz(n)||(t[n]=Np(t[n],e[n]));return t}function Wz(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yz=()=>Gb().__FIREBASE_DEFAULTS__,Qz=()=>{if(typeof process>"u"||typeof tA>"u")return;const t=tA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Xz=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Hb(t[1]);return e&&JSON.parse(e)},$b=()=>{try{return Hz()||Yz()||Qz()||Xz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Kb=()=>{var t;return(t=$b())==null?void 0:t.config},Jz=t=>{var e;return(e=$b())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Wb(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ap(JSON.stringify(n)),Ap(JSON.stringify(a)),""].join(".")}const pd={};function eF(){const t={prod:[],emulator:[]};for(const e of Object.keys(pd))pd[e]?t.emulator.push(e):t.prod.push(e);return t}function tF(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let nA=!1;function Yb(t,e){if(typeof window>"u"||typeof document>"u"||!fa(window.location.host)||pd[t]===e||pd[t]||nA)return;pd[t]=e;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",i=eF().prod.length>0;function a(){const m=document.getElementById(s);m&&m.remove()}function o(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,p){m.setAttribute("width","24"),m.setAttribute("id",p),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{nA=!0,a()},m}function h(m,p){m.setAttribute("id",p),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=tF(s),p=n("text"),_=document.getElementById(p)||document.createElement("span"),w=n("learnmore"),T=document.getElementById(w)||document.createElement("a"),x=n("preprendIcon"),v=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const b=m.element;o(b),h(T,w);const R=u();c(v,x),b.append(v,_,T,R),document.body.appendChild(b)}i?(_.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function Dg(){var e;const t=(e=$b())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sF(){return typeof window<"u"||IP()}function IP(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function rF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Qb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CP(){const t=it();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function jP(){return!Dg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PP(){return!Dg()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Jd(){try{return typeof indexedDB=="object"}catch{return!1}}function iF(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF="FirebaseError";class cn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=aF,Object.setPrototypeOf(this,cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Do.prototype.create)}}class Do{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?oF(i,s):"Error",o=`${this.serviceName}: ${a} (${r}).`;return new cn(r,o,s)}}function oF(t,e){return t.replace(lF,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const lF=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function cF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qi(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],a=e[r];if(rA(i)&&rA(a)){if(!Qi(i,a))return!1}else if(i!==a)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function rA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Tl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function Hu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function kP(t,e){const n=new uF(t,e);return n.subscribe.bind(n)}class uF{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");dF(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=U0),r.error===void 0&&(r.error=U0),r.complete===void 0&&(r.complete=U0);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function U0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t){return t&&t._delegate?t._delegate:t}class xs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Zz;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mF(e))try{this.getOrInitializeService({instanceIdentifier:Va})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Va){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Va){return this.instances.has(e)}getOptions(e=Va){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);s===o&&a.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:fF(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Va){return this.component?this.component.multipleInstances?e:Va:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fF(t){return t===Va?void 0:t}function mF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hF(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=[];var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const MP={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},pF=he.INFO,gF={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},yF=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=gF[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mg{constructor(e){this.name=e,this._logLevel=pF,this._logHandler=yF,this._userLogHandler=null,Xb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}function vF(t){Xb.forEach(e=>{e.setLogLevel(t)})}function xF(t,e){for(const n of Xb){let s=null;e&&e.level&&(s=MP[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,i,...a)=>{const o=a.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");i>=(s??r.logLevel)&&t({level:he[i].toLowerCase(),message:o,args:a,type:r.name})}}}const _F=(t,e)=>e.some(n=>t instanceof n);let iA,aA;function bF(){return iA||(iA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wF(){return aA||(aA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OP=new WeakMap,Tx=new WeakMap,VP=new WeakMap,z0=new WeakMap,Jb=new WeakMap;function TF(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(zi(t.result)),r()},a=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&OP.set(n,t)}).catch(()=>{}),Jb.set(e,t),e}function EF(t){if(Tx.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),r()},a=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Tx.set(t,e)}let Ex={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tx.get(t);if(e==="objectStoreNames")return t.objectStoreNames||VP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SF(t){Ex=t(Ex)}function AF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(F0(this),e,...n);return VP.set(s,e.sort?e.sort():[e]),zi(s)}:wF().includes(t)?function(...e){return t.apply(F0(this),e),zi(OP.get(this))}:function(...e){return zi(t.apply(F0(this),e))}}function NF(t){return typeof t=="function"?AF(t):(t instanceof IDBTransaction&&EF(t),_F(t,bF())?new Proxy(t,Ex):t)}function zi(t){if(t instanceof IDBRequest)return TF(t);if(z0.has(t))return z0.get(t);const e=NF(t);return e!==t&&(z0.set(t,e),Jb.set(e,t)),e}const F0=t=>Jb.get(t);function IF(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const a=indexedDB.open(t,e),o=zi(a);return s&&a.addEventListener("upgradeneeded",c=>{s(zi(a.result),c.oldVersion,c.newVersion,zi(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const RF=["get","getKey","getAll","getAllKeys","count"],CF=["put","add","delete","clear"],B0=new Map;function oA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(B0.get(e))return B0.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=CF.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||RF.includes(n)))return;const i=async function(a,...o){const c=this.transaction(a,r?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),r&&c.done]))[0]};return B0.set(e,i),i}SF(t=>({...t,get:(e,n,s)=>oA(e,n)||t.get(e,n,s),has:(e,n)=>!!oA(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PF(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function PF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ip="@firebase/app",Sx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new Mg("@firebase/app"),kF="@firebase/app-compat",DF="@firebase/analytics-compat",MF="@firebase/analytics",OF="@firebase/app-check-compat",VF="@firebase/app-check",LF="@firebase/auth",UF="@firebase/auth-compat",zF="@firebase/database",FF="@firebase/data-connect",BF="@firebase/database-compat",qF="@firebase/functions",HF="@firebase/functions-compat",GF="@firebase/installations",$F="@firebase/installations-compat",KF="@firebase/messaging",WF="@firebase/messaging-compat",YF="@firebase/performance",QF="@firebase/performance-compat",XF="@firebase/remote-config",JF="@firebase/remote-config-compat",ZF="@firebase/storage",e8="@firebase/storage-compat",t8="@firebase/firestore",n8="@firebase/ai",s8="@firebase/firestore-compat",r8="firebase",i8="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi="[DEFAULT]",a8={[Ip]:"fire-core",[kF]:"fire-core-compat",[MF]:"fire-analytics",[DF]:"fire-analytics-compat",[VF]:"fire-app-check",[OF]:"fire-app-check-compat",[LF]:"fire-auth",[UF]:"fire-auth-compat",[zF]:"fire-rtdb",[FF]:"fire-data-connect",[BF]:"fire-rtdb-compat",[qF]:"fire-fn",[HF]:"fire-fn-compat",[GF]:"fire-iid",[$F]:"fire-iid-compat",[KF]:"fire-fcm",[WF]:"fire-fcm-compat",[YF]:"fire-perf",[QF]:"fire-perf-compat",[XF]:"fire-rc",[JF]:"fire-rc-compat",[ZF]:"fire-gcs",[e8]:"fire-gcs-compat",[t8]:"fire-fst",[s8]:"fire-fst-compat",[n8]:"fire-vertex","fire-js":"fire-js",[r8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new Map,tc=new Map,nc=new Map;function Zd(t,e){try{t.container.addComponent(e)}catch(n){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function LP(t,e){t.container.addOrOverwriteComponent(e)}function zr(t){const e=t.name;if(nc.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;nc.set(e,t);for(const n of Ji.values())Zd(n,t);for(const n of tc.values())Zd(n,t);return!0}function UP(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function o8(t,e,n=Xi){UP(t,e).clearInstance(n)}function Zb(t){return t.options!==void 0}function zP(t){return Zb(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function Ke(t){return t==null?!1:t.settings!==void 0}function l8(){nc.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kn=new Do("app","Firebase",c8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FP=class{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(t,e){const n=Hb(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const r=JSON.parse(n).exp*1e3,i=new Date().getTime();r-i<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class u8 extends FP{constructor(e,n,s,r){const i=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,a={name:s,automaticDataCollectionEnabled:i};if(e.apiKey!==void 0)super(e,a,r);else{const o=e;super(o.options,a,r)}this._serverConfig={automaticDataCollectionEnabled:i,...n},this._serverConfig.authIdToken&&lA(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&lA(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Wn(Ip,Sx,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){tw(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Kn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=i8;function ew(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Xi,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Kn.create("bad-app-name",{appName:String(r)});if(n||(n=Kb()),!n)throw Kn.create("no-options");const i=Ji.get(r);if(i){if(Qi(n,i.options)&&Qi(s,i.config))return i;throw Kn.create("duplicate-app",{appName:r})}const a=new DP(r);for(const c of nc.values())a.addComponent(c);const o=new FP(n,s,a);return Ji.set(r,o),o}function d8(t,e={}){if(sF()&&!IP())throw Kn.create("invalid-server-app-environment");let n,s=e||{};if(t&&(Zb(t)?n=t.options:zP(t)?s=t:n=t),s.automaticDataCollectionEnabled===void 0&&(s.automaticDataCollectionEnabled=!0),n||(n=Kb()),!n)throw Kn.create("no-options");const r={...s,...n};r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=h=>[...h].reduce((f,m)=>Math.imul(31,f)+m.charCodeAt(0)|0,0);if(s.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Kn.create("finalization-registry-not-supported",{});const a=""+i(JSON.stringify(r)),o=tc.get(a);if(o)return o.incRefCount(s.releaseOnDeref),o;const c=new DP(a);for(const h of nc.values())c.addComponent(h);const u=new u8(n,s,a,c);return tc.set(a,u),u}function h8(t=Xi){const e=Ji.get(t);if(!e&&t===Xi&&Kb())return ew();if(!e)throw Kn.create("no-app",{appName:t});return e}function f8(){return Array.from(Ji.values())}async function tw(t){let e=!1;const n=t.name;Ji.has(n)?(e=!0,Ji.delete(n)):tc.has(n)&&t.decRefCount()<=0&&(tc.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(s=>s.delete())),t.isDeleted=!0)}function Wn(t,e,n){let s=a8[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const a=[`Unable to register library "${s}" with version "${e}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(a.join(" "));return}zr(new xs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function BP(t,e){if(t!==null&&typeof t!="function")throw Kn.create("invalid-log-argument");xF(t,e)}function qP(t){vF(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m8="firebase-heartbeat-database",p8=1,eh="firebase-heartbeat-store";let q0=null;function HP(){return q0||(q0=IF(m8,p8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(eh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Kn.create("idb-open",{originalErrorMessage:t.message})})),q0}async function g8(t){try{const n=(await HP()).transaction(eh),s=await n.objectStore(eh).get(GP(t));return await n.done,s}catch(e){if(e instanceof cn)Ur.warn(e.message);else{const n=Kn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ur.warn(n.message)}}}async function cA(t,e){try{const s=(await HP()).transaction(eh,"readwrite");await s.objectStore(eh).put(e,GP(t)),await s.done}catch(n){if(n instanceof cn)Ur.warn(n.message);else{const s=Kn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ur.warn(s.message)}}}function GP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y8=1024,v8=30;class x8{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new b8(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=uA();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>v8){const a=w8(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ur.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=uA(),{heartbeatsToSend:s,unsentEntries:r}=_8(this._heartbeatsCache.heartbeats),i=Ap(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ur.warn(n),""}}}function uA(){return new Date().toISOString().substring(0,10)}function _8(t,e=y8){const n=[];let s=t.slice();for(const r of t){const i=n.find(a=>a.agent===r.agent);if(i){if(i.dates.push(r.date),dA(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),dA(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class b8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Jd()?iF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await g8(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return cA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return cA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function dA(t){return Ap(JSON.stringify({version:2,heartbeats:t})).length}function w8(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T8(t){zr(new xs("platform-logger",e=>new jF(e),"PRIVATE")),zr(new xs("heartbeat",e=>new x8(e),"PRIVATE")),Wn(Ip,Sx,t),Wn(Ip,Sx,"esm2020"),Wn("fire-js","")}T8("");const E8=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:cn,SDK_VERSION:Wr,_DEFAULT_ENTRY_NAME:Xi,_addComponent:Zd,_addOrOverwriteComponent:LP,_apps:Ji,_clearComponents:l8,_components:nc,_getProvider:UP,_isFirebaseApp:Zb,_isFirebaseServerApp:Ke,_isFirebaseServerAppSettings:zP,_registerComponent:zr,_removeServiceInstance:o8,_serverApps:tc,deleteApp:tw,getApp:h8,getApps:f8,initializeApp:ew,initializeServerApp:d8,onLog:BP,registerVersion:Wn,setLogLevel:qP},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e,n){this._delegate=e,this.firebase=n,Zd(e,new xs("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),tw(this._delegate)))}_getService(e,n=Xi){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())==null?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=Xi){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Zd(this._delegate,e)}_addOrOverwriteComponent(e){LP(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},hA=new Do("app-compat","Firebase",A8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N8(t){const e={},n={__esModule:!0,initializeApp:i,app:r,registerVersion:Wn,setLogLevel:qP,onLog:BP,apps:null,SDK_VERSION:Wr,INTERNAL:{registerComponent:o,removeApp:s,useAsService:c,modularAPIs:E8}};n.default=n,Object.defineProperty(n,"apps",{get:a});function s(u){delete e[u]}function r(u){if(u=u||Xi,!sA(e,u))throw hA.create("no-app",{appName:u});return e[u]}r.App=t;function i(u,h={}){const f=ew(u,h);if(sA(e,f.name))return e[f.name];const m=new t(f,n);return e[f.name]=m,m}function a(){return Object.keys(e).map(u=>e[u])}function o(u){const h=u.name,f=h.replace("-compat","");if(zr(u)&&u.type==="PUBLIC"){const m=(p=r())=>{if(typeof p[f]!="function")throw hA.create("invalid-app-argument",{appName:h});return p[f]()};u.serviceProps!==void 0&&Np(m,u.serviceProps),n[f]=m,t.prototype[f]=function(...p){return this._getService.bind(this,h).apply(this,u.multipleInstances?p:[])}}return u.type==="PUBLIC"?n[f]:null}function c(u,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(){const t=N8(S8);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:$P,extendNamespace:e,createSubscribe:kP,ErrorFactory:Do,deepExtend:Np};function e(n){Np(t,n)}return t}const I8=$P();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=new Mg("@firebase/app-compat"),R8="@firebase/app-compat",C8="0.5.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j8(t){Wn(R8,C8,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=Gb();if(t.firebase!==void 0){fA.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&fA.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Me=I8;j8();var P8="firebase",k8="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Me.registerVersion(P8,k8,"app-compat");const Su={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Ko={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D8(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function KP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const M8=D8,O8=KP,WP=new Do("auth","Firebase",KP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp=new Mg("@firebase/auth");function V8(t,...e){Rp.logLevel<=he.WARN&&Rp.warn(`Auth (${Wr}): ${t}`,...e)}function Im(t,...e){Rp.logLevel<=he.ERROR&&Rp.error(`Auth (${Wr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t,...e){throw sw(t,...e)}function Dt(t,...e){return sw(t,...e)}function nw(t,e,n){const s={...O8(),[e]:n};return new Do("auth","Firebase",s).create(e,{appName:t.name})}function qt(t){return nw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zc(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&en(t,"argument-error"),nw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function sw(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return WP.create(t,...e)}function q(t,e,...n){if(!t)throw sw(e,...n)}function Ks(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Im(e),new Error(e)}function Rs(t,e){t||Ks(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function rw(){return mA()==="http:"||mA()==="https:"}function mA(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rw()||RP()||"connection"in navigator)?navigator.onLine:!0}function U8(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rs(n>e,"Short delay should be less than long delay!"),this.isMobile=nF()||Qb()}get(){return L8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(t,e){Rs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ks("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ks("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ks("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],B8=new qh(3e4,6e4);function ft(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function mt(t,e,n,s,r={}){return QP(t,r,async()=>{let i={},a={};s&&(e==="GET"?a=s:i={body:JSON.stringify(s)});const o=Uc({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return rF()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&fa(t.emulatorConfig.host)&&(u.credentials="include"),YP.fetch()(await XP(t,t.config.apiHost,n,o),u)})}async function QP(t,e,n){t._canInitEmulator=!1;const s={...z8,...e};try{const r=new H8(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Gu(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const o=i.ok?a.errorMessage:a.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gu(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Gu(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Gu(t,"user-disabled",a);const h=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw nw(t,h,u);en(t,h)}}catch(r){if(r instanceof cn)throw r;en(t,"network-request-failed",{message:String(r)})}}async function Yr(t,e,n,s,r={}){const i=await mt(t,e,n,s,r);return"mfaPendingCredential"in i&&en(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function XP(t,e,n,s){const r=`${e}${n}?${s}`,i=t,a=i.config.emulator?iw(t.config,r):`${t.config.apiScheme}://${r}`;return F8.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function q8(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class H8{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Dt(this.auth,"network-request-failed")),B8.get())})}}function Gu(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Dt(t,e,s);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t){return t!==void 0&&t.getResponse!==void 0}function gA(t){return t!==void 0&&t.enterprise!==void 0}class JP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return q8(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G8(t){return(await mt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function ZP(t,e){return mt(t,"GET","/v2/recaptchaConfig",ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $8(t,e){return mt(t,"POST","/v1/accounts:delete",e)}async function K8(t,e){return mt(t,"POST","/v1/accounts:update",e)}async function Cp(t,e){return mt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function W8(t,e=!1){const n=J(t),s=await n.getIdToken(e),r=Og(s);q(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:gd(H0(r.auth_time)),issuedAtTime:gd(H0(r.iat)),expirationTime:gd(H0(r.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function H0(t){return Number(t)*1e3}function Og(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Im("JWT malformed, contained fewer than 3 sections"),null;try{const r=Hb(n);return r?JSON.parse(r):(Im("Failed to decode base64 JWT payload"),null)}catch(r){return Im("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function yA(t){const e=Og(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fr(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof cn&&Y8(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function Y8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gd(this.lastLoginAt),this.creationTime=gd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nh(t){var f;const e=t.auth,n=await t.getIdToken(),s=await Fr(t,Cp(e,{idToken:n}));q(s==null?void 0:s.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=(f=r.providerUserInfo)!=null&&f.length?ek(r.providerUserInfo):[],a=J8(t.providerData,i),o=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),u=o?c:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Ax(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function X8(t){const e=J(t);await nh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function J8(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function ek(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z8(t,e){const n=await QP(t,{},async()=>{const s=Uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,a=await XP(t,r,"/v1/token",`key=${i}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:s};return t.emulatorConfig&&fa(t.emulatorConfig.host)&&(c.credentials="include"),YP.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eB(t,e){return mt(t,"POST","/v2/accounts:revokeToken",ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){q(e.length!==0,"internal-error");const n=yA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await Z8(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,a=new Ol;return s&&(q(typeof s=="string","internal-error",{appName:e}),a.refreshToken=s),r&&(q(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),i&&(q(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ol,this.toJSON())}_performRefresh(){return Ks("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(t,e){q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ss{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new Q8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Ax(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Fr(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return W8(this,e)}reload(){return X8(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ss({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await nh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ke(this.auth.app))return Promise.reject(qt(this.auth));const e=await this.getIdToken();return await Fr(this,$8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,o=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:p,providerData:_,stsTokenManager:w}=n;q(f&&w,e,"internal-error");const T=Ol.fromJSON(this.name,w);q(typeof f=="string",e,"internal-error"),ui(s,e.name),ui(r,e.name),q(typeof m=="boolean",e,"internal-error"),q(typeof p=="boolean",e,"internal-error"),ui(i,e.name),ui(a,e.name),ui(o,e.name),ui(c,e.name),ui(u,e.name),ui(h,e.name);const x=new Ss({uid:f,auth:e,email:r,emailVerified:m,displayName:s,isAnonymous:p,photoURL:a,phoneNumber:i,tenantId:o,stsTokenManager:T,createdAt:u,lastLoginAt:h});return _&&Array.isArray(_)&&(x.providerData=_.map(v=>({...v}))),c&&(x._redirectEventId=c),x}static async _fromIdTokenResponse(e,n,s=!1){const r=new Ol;r.updateFromServerResponse(n);const i=new Ss({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await nh(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];q(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?ek(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),o=new Ol;o.updateFromIdToken(s);const c=new Ss({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Ax(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=new Map;function Bn(t){Rs(t instanceof Function,"Expected a class definition");let e=vA.get(t);return e?(Rs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,vA.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}tk.type="NONE";const sc=tk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t,e,n){return`firebase:${t}:${e}:${n}`}class Vl{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=ro(this.userKey,r.apiKey,i),this.fullPersistenceKey=ro("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Cp(this.auth,{idToken:e}).catch(()=>{});return n?Ss._fromGetAccountInfoResponse(this.auth,n,e):null}return Ss._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Vl(Bn(sc),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||Bn(sc);const a=ro(s,e.config.apiKey,e.name);let o=null;for(const u of n)try{const h=await u._get(a);if(h){let f;if(typeof h=="string"){const m=await Cp(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Ss._fromGetAccountInfoResponse(e,m,h)}else f=Ss._fromJSON(e,h);u!==i&&(o=f),i=u;break}}catch{}const c=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Vl(i,e,s):(i=c[0],o&&await i._set(a,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(a)}catch{}})),new Vl(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ik(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ak(e))return"Blackberry";if(ok(e))return"Webos";if(sk(e))return"Safari";if((e.includes("chrome/")||rk(e))&&!e.includes("edge/"))return"Chrome";if(Hh(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function nk(t=it()){return/firefox\//i.test(t)}function sk(t=it()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rk(t=it()){return/crios\//i.test(t)}function ik(t=it()){return/iemobile/i.test(t)}function Hh(t=it()){return/android/i.test(t)}function ak(t=it()){return/blackberry/i.test(t)}function ok(t=it()){return/webos/i.test(t)}function Gh(t=it()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function tB(t=it()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function nB(t=it()){var e;return Gh(t)&&!!((e=window.navigator)!=null&&e.standalone)}function sB(){return CP()&&document.documentMode===10}function lk(t=it()){return Gh(t)||Hh(t)||ok(t)||ak(t)||/windows phone/i.test(t)||ik(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t,e=[]){let n;switch(t){case"Browser":n=xA(it());break;case"Worker":n=`${xA(it())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wr}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((a,o)=>{try{const c=e(i);a(c)}catch(c){o(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iB(t,e={}){return mt(t,"GET","/v2/passwordPolicy",ft(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB=6;class oB{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??aB,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _A(this),this.idTokenSubscription=new _A(this),this.beforeStateQueue=new rB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Bn(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await Vl.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Cp(this,{idToken:e}),s=await Ss._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Ke(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,o=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&(c!=null&&c.user)&&(s=c.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await nh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=U8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ke(this.app))return Promise.reject(qt(this));const n=e?J(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ke(this.app)?Promise.reject(qt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ke(this.app)?Promise.reject(qt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iB(this),n=new oB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Do("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await eB(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Bn(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=await Vl.create(this,[Bn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(o,this,"internal-error"),o.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ck(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(Ke(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&V8(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function at(t){return J(t)}class _A{constructor(e){this.auth=e,this.observer=null,this.addObserver=kP(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $h={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cB(t){$h=t}function aw(t){return $h.loadJS(t)}function uB(){return $h.recaptchaV2Script}function dB(){return $h.recaptchaEnterpriseScript}function hB(){return $h.gapiScript}function uk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fB=500,mB=6e4,Kf=1e12;class pB{constructor(e){this.auth=e,this.counter=Kf,this._widgets=new Map}render(e,n){const s=this.counter;return this._widgets.set(s,new vB(e,this.auth.name,n||{})),this.counter++,s}reset(e){var s;const n=e||Kf;(s=this._widgets.get(n))==null||s.delete(),this._widgets.delete(n)}getResponse(e){var s;const n=e||Kf;return((s=this._widgets.get(n))==null?void 0:s.getResponse())||""}async execute(e){var s;const n=e||Kf;return(s=this._widgets.get(n))==null||s.execute(),""}}class gB{constructor(){this.enterprise=new yB}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class yB{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class vB{constructor(e,n,s){this.params=s,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;q(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=xB(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},mB)},fB))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function xB(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<t;s++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const _B="recaptcha-enterprise",yd="NO_RECAPTCHA";class dk{constructor(e){this.type=_B,this.auth=at(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,o)=>{ZP(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new JP(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,a(u.siteKey)}}).catch(c=>{o(c)})})}function r(i,a,o){const c=window.grecaptcha;gA(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{a(u)}).catch(()=>{a(yd)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gB().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{s(this.auth).then(o=>{if(!n&&gA(window.grecaptcha))r(o,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=dB();c.length!==0&&(c+=o),aw(c).then(()=>{r(o,i,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function Au(t,e,n,s=!1,r=!1){const i=new dk(t);let a;if(r)a=yd;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return s?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Fi(t,e,n,s,r){var i,a;if(r==="EMAIL_PASSWORD_PROVIDER")if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Au(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Au(t,e,n,n==="getOobCode");return s(t,c)}else return Promise.reject(o)});else if(r==="PHONE_PROVIDER")if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("PHONE_PROVIDER")){const o=await Au(t,e,n);return s(t,o).catch(async c=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await Au(t,e,n,!1,!0);return s(t,h)}return Promise.reject(c)})}else{const o=await Au(t,e,n,!1,!0);return s(t,o)}else return Promise.reject(r+" provider is not supported.")}async function bB(t){const e=at(t),n=await ZP(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),s=new JP(n);e.tenantId==null?e._agentRecaptchaConfig=s:e._tenantRecaptchaConfigs[e.tenantId]=s,s.isAnyProviderEnabled()&&new dk(e).verify()}function wB(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Bn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function TB(t,e,n){const s=at(t);q(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),i=hk(e),{host:a,port:o}=EB(e),c=o===null?"":`:${o}`,u={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){q(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),q(Qi(u,s.config.emulator)&&Qi(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,fa(a)?(Wb(`${i}//${a}${c}`),Yb("Auth",!0)):r||SB()}function hk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function EB(t){const e=hk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:bA(s.substr(i.length+1))}}else{const[i,a]=s.split(":");return{host:i,port:bA(a)}}}function bA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function SB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ks("not implemented")}_getIdTokenResponse(e){return Ks("not implemented")}_linkToIdToken(e,n){return Ks("not implemented")}_getReauthenticationResolver(e){return Ks("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(t,e){return mt(t,"POST","/v1/accounts:resetPassword",ft(t,e))}async function AB(t,e){return mt(t,"POST","/v1/accounts:update",e)}async function NB(t,e){return mt(t,"POST","/v1/accounts:signUp",e)}async function IB(t,e){return mt(t,"POST","/v1/accounts:update",ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RB(t,e){return Yr(t,"POST","/v1/accounts:signInWithPassword",ft(t,e))}async function Vg(t,e){return mt(t,"POST","/v1/accounts:sendOobCode",ft(t,e))}async function CB(t,e){return Vg(t,e)}async function jB(t,e){return Vg(t,e)}async function PB(t,e){return Vg(t,e)}async function kB(t,e){return Vg(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DB(t,e){return Yr(t,"POST","/v1/accounts:signInWithEmailLink",ft(t,e))}async function MB(t,e){return Yr(t,"POST","/v1/accounts:signInWithEmailLink",ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends Fc{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new sh(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new sh(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fi(e,n,"signInWithPassword",RB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return DB(e,{email:this._email,oobCode:this._password});default:en(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fi(e,s,"signUpPassword",NB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return MB(e,{idToken:n,email:this._email,oobCode:this._password});default:en(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nr(t,e){return Yr(t,"POST","/v1/accounts:signInWithIdp",ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB="http://localhost";class rr extends Fc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new rr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):en("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const a=new rr(s,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Nr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Nr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Nr(e,n)}buildRequest(){const e={requestUri:OB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Uc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wA(t,e){return mt(t,"POST","/v1/accounts:sendVerificationCode",ft(t,e))}async function VB(t,e){return Yr(t,"POST","/v1/accounts:signInWithPhoneNumber",ft(t,e))}async function LB(t,e){const n=await Yr(t,"POST","/v1/accounts:signInWithPhoneNumber",ft(t,e));if(n.temporaryProof)throw Gu(t,"account-exists-with-different-credential",n);return n}const UB={USER_NOT_FOUND:"user-not-found"};async function zB(t,e){const n={...e,operation:"REAUTH"};return Yr(t,"POST","/v1/accounts:signInWithPhoneNumber",ft(t,n),UB)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends Fc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new io({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new io({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return VB(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return LB(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return zB(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:s,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:s,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:s,phoneNumber:r,temporaryProof:i}=e;return!s&&!n&&!r&&!i?null:new io({verificationId:n,verificationCode:s,phoneNumber:r,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BB(t){const e=Tl(Hu(t)).link,n=e?Tl(Hu(e)).deep_link_id:null,s=Tl(Hu(t)).deep_link_id;return(s?Tl(Hu(s)).link:null)||s||n||e||t}class Lg{constructor(e){const n=Tl(Hu(e)),s=n.apiKey??null,r=n.oobCode??null,i=FB(n.mode??null);q(s&&r&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=BB(e);try{return new Lg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(){this.providerId=ma.PROVIDER_ID}static credential(e,n){return sh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Lg.parseLink(n);return q(s,"argument-error"),sh._fromEmailAndCode(e,s.code,s.tenantId)}}ma.PROVIDER_ID="password";ma.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ma.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends Qr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ll extends Bc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return q("providerId"in n&&"signInMethod"in n,"argument-error"),rr._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return q(e.idToken||e.accessToken,"argument-error"),rr._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Ll.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ll.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s,oauthTokenSecret:r,pendingToken:i,nonce:a,providerId:o}=e;if(!s&&!r&&!n&&!i||!o)return null;try{return new Ll(o)._credential({idToken:n,accessToken:s,nonce:a,pendingToken:i})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Bc{constructor(){super("facebook.com")}static credential(e){return rr._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Us.credential(e.oauthAccessToken)}catch{return null}}}Us.FACEBOOK_SIGN_IN_METHOD="facebook.com";Us.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends Bc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return rr._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return zs.credential(n,s)}catch{return null}}}zs.GOOGLE_SIGN_IN_METHOD="google.com";zs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends Bc{constructor(){super("github.com")}static credential(e){return rr._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.GITHUB_SIGN_IN_METHOD="github.com";Fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qB="http://localhost";class rc extends Fc{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Nr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Nr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Nr(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,pendingToken:i}=n;return!s||!r||!i||s!==r?null:new rc(s,i)}static _create(e,n){return new rc(e,n)}buildRequest(){return{requestUri:qB,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB="saml.";class jp extends Qr{constructor(e){q(e.startsWith(HB),"argument-error"),super(e)}static credentialFromResult(e){return jp.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return jp.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=rc.fromJSON(e);return q(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:s}=e;if(!n||!s)return null;try{return rc._create(s,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends Bc{constructor(){super("twitter.com")}static credential(e,n){return rr._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Bs.credential(n,s)}catch{return null}}}Bs.TWITTER_SIGN_IN_METHOD="twitter.com";Bs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mk(t,e){return Yr(t,"POST","/v1/accounts:signUp",ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await Ss._fromIdTokenResponse(e,s,r),a=TA(s);return new _s({user:i,providerId:a,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=TA(s);return new _s({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function TA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GB(t){var r;if(Ke(t.app))return Promise.reject(qt(t));const e=at(t);if(await e._initializationPromise,(r=e.currentUser)!=null&&r.isAnonymous)return new _s({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await mk(e,{returnSecureToken:!0}),s=await _s._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp extends cn{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Pp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Pp(e,n,s,r)}}function pk(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Pp._fromErrorAndOperation(t,i,e,s):i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $B(t,e){const n=J(t);await Ug(!0,n,e);const{providerUserInfo:s}=await K8(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),r=gk(s||[]);return n.providerData=n.providerData.filter(i=>r.has(i.providerId)),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function ow(t,e,n=!1){const s=await Fr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return _s._forOperation(t,"link",s)}async function Ug(t,e,n){await nh(e);const s=gk(e.providerData),r=t===!1?"provider-already-linked":"no-such-provider";q(s.has(n)===t,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yk(t,e,n=!1){const{auth:s}=t;if(Ke(s.app))return Promise.reject(qt(s));const r="reauthenticate";try{const i=await Fr(t,pk(s,r,e,t),n);q(i.idToken,s,"internal-error");const a=Og(i.idToken);q(a,s,"internal-error");const{sub:o}=a;return q(t.uid===o,s,"user-mismatch"),_s._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&en(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(t,e,n=!1){if(Ke(t.app))return Promise.reject(qt(t));const s="signIn",r=await pk(t,s,e),i=await _s._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function zg(t,e){return vk(at(t),e)}async function xk(t,e){const n=J(t);return await Ug(!1,n,e.providerId),ow(n,e)}async function _k(t,e){return yk(J(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KB(t,e){return Yr(t,"POST","/v1/accounts:signInWithCustomToken",ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WB(t,e){if(Ke(t.app))return Promise.reject(qt(t));const n=at(t),s=await KB(n,{token:e,returnSecureToken:!0}),r=await _s._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?lw._fromServerResponse(e,n):"totpInfo"in n?cw._fromServerResponse(e,n):en(e,"internal-error")}}class lw extends Kh{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new lw(n)}}class cw extends Kh{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new cw(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(t,e,n){var s;q(((s=n.url)==null?void 0:s.length)>0,t,"invalid-continue-uri"),q(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),q(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(q(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(q(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uw(t){const e=at(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function YB(t,e,n){const s=at(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Fg(s,r,n),await Fi(s,r,"getOobCode",jB,"EMAIL_PASSWORD_PROVIDER")}async function QB(t,e,n){await fk(J(t),{oobCode:e,newPassword:n}).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&uw(t),s})}async function XB(t,e){await IB(J(t),{oobCode:e})}async function bk(t,e){const n=J(t),s=await fk(n,{oobCode:e}),r=s.requestType;switch(q(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(s.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(s.mfaInfo,n,"internal-error");default:q(s.email,n,"internal-error")}let i=null;return s.mfaInfo&&(i=Kh._fromServerResponse(at(n),s.mfaInfo)),{data:{email:(s.requestType==="VERIFY_AND_CHANGE_EMAIL"?s.newEmail:s.email)||null,previousEmail:(s.requestType==="VERIFY_AND_CHANGE_EMAIL"?s.email:s.newEmail)||null,multiFactorInfo:i},operation:r}}async function JB(t,e){const{data:n}=await bk(J(t),e);return n.email}async function ZB(t,e,n){if(Ke(t.app))return Promise.reject(qt(t));const s=at(t),a=await Fi(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mk,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&uw(t),c}),o=await _s._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(o.user),o}function e7(t,e,n){return Ke(t.app)?Promise.reject(qt(t)):zg(J(t),ma.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&uw(t),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t7(t,e,n){const s=at(t),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function i(a,o){q(o.handleCodeInApp,s,"argument-error"),o&&Fg(s,a,o)}i(r,n),await Fi(s,r,"getOobCode",PB,"EMAIL_PASSWORD_PROVIDER")}function n7(t,e){const n=Lg.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function s7(t,e,n){if(Ke(t.app))return Promise.reject(qt(t));const s=J(t),r=ma.credentialWithLink(e,n||th());return q(r._tenantId===(s.tenantId||null),s,"tenant-id-mismatch"),zg(s,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r7(t,e){return mt(t,"POST","/v1/accounts:createAuthUri",ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i7(t,e){const n=rw()?th():"http://localhost",s={identifier:e,continueUri:n},{signinMethods:r}=await r7(J(t),s);return r||[]}async function a7(t,e){const n=J(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Fg(n.auth,r,e);const{email:i}=await CB(n.auth,r);i!==t.email&&await t.reload()}async function o7(t,e,n){const s=J(t),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Fg(s.auth,i,n);const{email:a}=await kB(s.auth,i);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l7(t,e){return mt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c7(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=J(t),i={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Fr(s,l7(s.auth,i));s.displayName=a.displayName||null,s.photoURL=a.photoUrl||null;const o=s.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=s.displayName,o.photoURL=s.photoURL),await s._updateTokensIfNecessary(a)}function u7(t,e){const n=J(t);return Ke(n.auth.app)?Promise.reject(qt(n.auth)):wk(n,e,null)}function d7(t,e){return wk(J(t),null,e)}async function wk(t,e,n){const{auth:s}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const a=await Fr(t,AB(s,i));await t._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h7(t){var r,i;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const a=(i=(r=Og(t.idToken))==null?void 0:r.firebase)==null?void 0:i.sign_in_provider;if(a){const o=a!=="anonymous"&&a!=="custom"?a:null;return new Ul(s,o)}}if(!e)return null;switch(e){case"facebook.com":return new f7(s,n);case"github.com":return new m7(s,n);case"google.com":return new p7(s,n);case"twitter.com":return new g7(s,n,t.screenName||null);case"custom":case"anonymous":return new Ul(s,null);default:return new Ul(s,e,n)}}class Ul{constructor(e,n,s={}){this.isNewUser=e,this.providerId=n,this.profile=s}}class Tk extends Ul{constructor(e,n,s,r){super(e,n,s),this.username=r}}class f7 extends Ul{constructor(e,n){super(e,"facebook.com",n)}}class m7 extends Tk{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class p7 extends Ul{constructor(e,n){super(e,"google.com",n)}}class g7 extends Tk{constructor(e,n,s){super(e,"twitter.com",n,s)}}function y7(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:h7(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n,s){this.type=e,this.credential=n,this.user=s}static _fromIdtoken(e,n){return new Wa("enroll",e,n)}static _fromMfaPendingCredential(e){return new Wa("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,s;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return Wa._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((s=e.multiFactorSession)!=null&&s.idToken)return Wa._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,n,s){this.session=e,this.hints=n,this.signInResolver=s}static _fromError(e,n){const s=at(e),r=n.customData._serverResponse,i=(r.mfaInfo||[]).map(o=>Kh._fromServerResponse(s,o));q(r.mfaPendingCredential,s,"internal-error");const a=Wa._fromMfaPendingCredential(r.mfaPendingCredential);return new dw(a,i,async o=>{const c=await o._process(s,a);delete r.mfaInfo,delete r.mfaPendingCredential;const u={...r,idToken:c.idToken,refreshToken:c.refreshToken};switch(n.operationType){case"signIn":const h=await _s._fromIdTokenResponse(s,n.operationType,u);return await s._updateCurrentUser(h.user),h;case"reauthenticate":return q(n.user,s,"internal-error"),_s._forOperation(n.user,n.operationType,u);default:en(s,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function v7(t,e){var r;const n=J(t),s=e;return q(e.customData.operationType,n,"argument-error"),q((r=s.customData._serverResponse)==null?void 0:r.mfaPendingCredential,n,"argument-error"),dw._fromError(n,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t,e){return mt(t,"POST","/v2/accounts/mfaEnrollment:start",ft(t,e))}function x7(t,e){return mt(t,"POST","/v2/accounts/mfaEnrollment:finalize",ft(t,e))}function _7(t,e){return mt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",ft(t,e))}class hw{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(s=>Kh._fromServerResponse(e.auth,s)))})}static _fromUser(e){return new hw(e)}async getSession(){return Wa._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const s=e,r=await this.getSession(),i=await Fr(this.user,s._process(this.user.auth,r,n));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,s=await this.user.getIdToken();try{const r=await Fr(this.user,_7(this.user.auth,{idToken:s,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:i})=>i!==n),await this.user._updateTokensIfNecessary(r),await this.user.reload()}catch(r){throw r}}}const G0=new WeakMap;function b7(t){const e=J(t);return G0.has(e)||G0.set(e,hw._fromUser(e)),G0.get(e)}const kp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kp,"1"),this.storage.removeItem(kp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w7=1e3,T7=10;class Sk extends Ek{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(s);!n&&this.localCache[s]===a||this.notifyListeners(s,a)},i=this.storage.getItem(s);sB()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,T7):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},w7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Sk.type="LOCAL";const fw=Sk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak extends Ek{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Ak.type="SESSION";const po=Ak;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Bg(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const o=Array.from(a).map(async u=>u(n.origin,i)),c=await E7(o);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,a;return new Promise((o,c)=>{const u=Wh("",20);r.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},s);a={messageChannel:r,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return window}function A7(t){Tt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(){return typeof Tt().WorkerGlobalScope<"u"&&typeof Tt().importScripts=="function"}async function N7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function I7(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function R7(){return mw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk="firebaseLocalStorageDb",C7=1,Dp="firebaseLocalStorage",Ik="fbase_key";class Yh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qg(t,e){return t.transaction([Dp],e?"readwrite":"readonly").objectStore(Dp)}function j7(){const t=indexedDB.deleteDatabase(Nk);return new Yh(t).toPromise()}function Nx(){const t=indexedDB.open(Nk,C7);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(Dp,{keyPath:Ik})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(Dp)?e(s):(s.close(),await j7(),e(await Nx()))})})}async function SA(t,e,n){const s=qg(t,!0).put({[Ik]:e,value:n});return new Yh(s).toPromise()}async function P7(t,e){const n=qg(t,!1).get(e),s=await new Yh(n).toPromise();return s===void 0?null:s.value}function AA(t,e){const n=qg(t,!0).delete(e);return new Yh(n).toPromise()}const k7=800,D7=3;class Rk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Nx(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>D7)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bg._getInstance(R7()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await N7(),!this.activeServiceWorker)return;this.sender=new S7(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||I7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Nx();return await SA(e,kp,"1"),await AA(e,kp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>SA(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>P7(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>AA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=qg(r,!1).getAll();return new Yh(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),k7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Rk.type="LOCAL";const rh=Rk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(t,e){return mt(t,"POST","/v2/accounts/mfaSignIn:start",ft(t,e))}function M7(t,e){return mt(t,"POST","/v2/accounts/mfaSignIn:finalize",ft(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=uk("rcb"),O7=new qh(3e4,6e4);class V7{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Tt().grecaptcha)!=null&&e.render)}load(e,n=""){return q(L7(n),e,"argument-error"),this.shouldResolveImmediately(n)&&pA(Tt().grecaptcha)?Promise.resolve(Tt().grecaptcha):new Promise((s,r)=>{const i=Tt().setTimeout(()=>{r(Dt(e,"network-request-failed"))},O7.get());Tt()[$0]=()=>{Tt().clearTimeout(i),delete Tt()[$0];const o=Tt().grecaptcha;if(!o||!pA(o)){r(Dt(e,"internal-error"));return}const c=o.render;o.render=(u,h)=>{const f=c(u,h);return this.counter++,f},this.hostLanguage=n,s(o)};const a=`${uB()}?${Uc({onload:$0,render:"explicit",hl:n})}`;aw(a).catch(()=>{clearTimeout(i),r(Dt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=Tt().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function L7(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class U7{async load(e){return new pB(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="recaptcha",z7={theme:"light",type:"image"};let F7=class{constructor(e,n,s={...z7}){this.parameters=s,this.type=vd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=at(e),this.isInvisible=this.parameters.size==="invisible",q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof n=="string"?document.getElementById(n):n;q(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new U7:new V7,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),s=n.getResponse(e);return s||new Promise(r=>{const i=a=>{a&&(this.tokenChangeListeners.delete(i),r(a))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(s=>s(n)),typeof e=="function")e(n);else if(typeof e=="string"){const s=Tt()[e];typeof s=="function"&&s(n)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){q(rw()&&!mw(),this.auth,"internal-error"),await B7(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await G8(this.auth);q(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function B7(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=io._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function q7(t,e,n){if(Ke(t.app))return Promise.reject(qt(t));const s=at(t),r=await Hg(s,e,J(n));return new pw(r,i=>zg(s,i))}async function H7(t,e,n){const s=J(t);await Ug(!1,s,"phone");const r=await Hg(s.auth,e,J(n));return new pw(r,i=>xk(s,i))}async function G7(t,e,n){const s=J(t);if(Ke(s.auth.app))return Promise.reject(qt(s.auth));const r=await Hg(s.auth,e,J(n));return new pw(r,i=>_k(s,i))}async function Hg(t,e,n){var s;if(!t._getRecaptchaConfig())try{await bB(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const i=r.session;if("phoneNumber"in r){q(i.type==="enroll",t,"internal-error");const a={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Fi(t,a,"mfaSmsEnrollment",async(h,f)=>{if(f.phoneEnrollmentInfo.captchaResponse===yd){q((n==null?void 0:n.type)===vd,h,"argument-error");const m=await K0(h,f,n);return EA(h,m)}return EA(h,f)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{q(i.type==="signin",t,"internal-error");const a=((s=r.multiFactorHint)==null?void 0:s.uid)||r.multiFactorUid;q(a,t,"missing-multi-factor-info");const o={mfaPendingCredential:i.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Fi(t,o,"mfaSmsSignIn",async(f,m)=>{if(m.phoneSignInInfo.captchaResponse===yd){q((n==null?void 0:n.type)===vd,f,"argument-error");const p=await K0(f,m,n);return NA(f,p)}return NA(f,m)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Fi(t,i,"sendVerificationCode",async(u,h)=>{if(h.captchaResponse===yd){q((n==null?void 0:n.type)===vd,u,"argument-error");const f=await K0(u,h,n);return wA(u,f)}return wA(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{n==null||n._reset()}}async function $7(t,e){const n=J(t);if(Ke(n.auth.app))return Promise.reject(qt(n.auth));await ow(n,e)}async function K0(t,e,n){q(n.type===vd,t,"argument-error");const s=await n.verify();q(typeof s=="string",t,"argument-error");const r={...e};if("phoneEnrollmentInfo"in r){const i=r.phoneEnrollmentInfo.phoneNumber,a=r.phoneEnrollmentInfo.captchaResponse,o=r.phoneEnrollmentInfo.clientType,c=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:s,captchaResponse:a,clientType:o,recaptchaVersion:c}}),r}else if("phoneSignInInfo"in r){const i=r.phoneSignInInfo.captchaResponse,a=r.phoneSignInInfo.clientType,o=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:i,clientType:a,recaptchaVersion:o}}),r}else return Object.assign(r,{recaptchaToken:s}),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go=class Rm{constructor(e){this.providerId=Rm.PROVIDER_ID,this.auth=at(e)}verifyPhoneNumber(e,n){return Hg(this.auth,e,J(n))}static credential(e,n){return io._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Rm.credentialFromTaggedObject(n)}static credentialFromError(e){return Rm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:s}=e;return n&&s?io._fromTokenResponse(n,s):null}};go.PROVIDER_ID="phone";go.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(t,e){return e?Bn(e):(q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw extends Fc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Nr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Nr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function K7(t){return vk(t.auth,new gw(t),t.bypassAuthState)}function W7(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),yk(n,new gw(t),t.bypassAuthState)}async function Y7(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),ow(n,new gw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return K7;case"linkViaPopup":case"linkViaRedirect":return Y7;case"reauthViaPopup":case"reauthViaRedirect":return W7;default:en(this.auth,"internal-error")}}resolve(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q7=new qh(2e3,1e4);async function X7(t,e,n){if(Ke(t.app))return Promise.reject(Dt(t,"operation-not-supported-in-this-environment"));const s=at(t);zc(t,e,Qr);const r=Mo(s,n);return new br(s,"signInViaPopup",e,r).executeNotNull()}async function J7(t,e,n){const s=J(t);if(Ke(s.auth.app))return Promise.reject(Dt(s.auth,"operation-not-supported-in-this-environment"));zc(s.auth,e,Qr);const r=Mo(s.auth,n);return new br(s.auth,"reauthViaPopup",e,r,s).executeNotNull()}async function Z7(t,e,n){const s=J(t);zc(s.auth,e,Qr);const r=Mo(s.auth,n);return new br(s.auth,"linkViaPopup",e,r,s).executeNotNull()}class br extends Ck{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,br.currentPopupAction&&br.currentPopupAction.cancel(),br.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return q(e,this.auth,"internal-error"),e}async onExecution(){Rs(this.filter.length===1,"Popup operations only handle one event");const e=Wh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Dt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Dt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,br.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Q7.get())};e()}}br.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eq="pendingRedirect",xd=new Map;class tq extends Ck{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=xd.get(this.auth._key());if(!e){try{const s=await nq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}xd.set(this.auth._key(),e)}return this.bypassAuthState||xd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nq(t,e){const n=Pk(e),s=jk(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}async function yw(t,e){return jk(t)._set(Pk(e),"true")}function sq(){xd.clear()}function vw(t,e){xd.set(t._key(),e)}function jk(t){return Bn(t._redirectPersistence)}function Pk(t){return ro(eq,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rq(t,e,n){return iq(t,e,n)}async function iq(t,e,n){if(Ke(t.app))return Promise.reject(qt(t));const s=at(t);zc(t,e,Qr),await s._initializationPromise;const r=Mo(s,n);return await yw(r,s),r._openRedirect(s,e,"signInViaRedirect")}function aq(t,e,n){return oq(t,e,n)}async function oq(t,e,n){const s=J(t);if(zc(s.auth,e,Qr),Ke(s.auth.app))return Promise.reject(qt(s.auth));await s.auth._initializationPromise;const r=Mo(s.auth,n);await yw(r,s.auth);const i=await kk(s);return r._openRedirect(s.auth,e,"reauthViaRedirect",i)}function lq(t,e,n){return cq(t,e,n)}async function cq(t,e,n){const s=J(t);zc(s.auth,e,Qr),await s.auth._initializationPromise;const r=Mo(s.auth,n);await Ug(!1,s,e.providerId),await yw(r,s.auth);const i=await kk(s);return r._openRedirect(s.auth,e,"linkViaRedirect",i)}async function uq(t,e){return await at(t)._initializationPromise,Gg(t,e,!1)}async function Gg(t,e,n=!1){if(Ke(t.app))return Promise.reject(qt(t));const s=at(t),r=Mo(s,e),a=await new tq(s,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,e)),a}async function kk(t){const e=Wh(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dq=10*60*1e3;class Dk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hq(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!Mk(e)){const r=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(Dt(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dq&&this.cachedEventUids.clear(),this.cachedEventUids.has(IA(e))}saveEventToCache(e){this.cachedEventUids.add(IA(e)),this.lastProcessedEventTime=Date.now()}}function IA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Mk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(t,e={}){return mt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mq=/^https?/;async function pq(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Ok(t);for(const n of e)try{if(gq(n))return}catch{}en(t,"unauthorized-domain")}function gq(t){const e=th(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===s}if(!mq.test(n))return!1;if(fq.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yq=new qh(3e4,6e4);function RA(){const t=Tt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function vq(t){return new Promise((e,n)=>{var r,i,a;function s(){RA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{RA(),n(Dt(t,"network-request-failed"))},timeout:yq.get()})}if((i=(r=Tt().gapi)==null?void 0:r.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=Tt().gapi)!=null&&a.load)s();else{const o=uk("iframefcb");return Tt()[o]=()=>{gapi.load?s():n(Dt(t,"network-request-failed"))},aw(`${hB()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw Cm=null,e})}let Cm=null;function xq(t){return Cm=Cm||vq(t),Cm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _q=new qh(5e3,15e3),bq="__/auth/iframe",wq="emulator/auth/iframe",Tq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Eq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sq(t){const e=t.config;q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?iw(e,wq):`https://${t.config.authDomain}/${bq}`,s={apiKey:e.apiKey,appName:t.name,v:Wr},r=Eq.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Uc(s).slice(1)}`}async function Aq(t){const e=await xq(t),n=Tt().gapi;return q(n,t,"internal-error"),e.open({where:document.body,url:Sq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tq,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const a=Dt(t,"network-request-failed"),o=Tt().setTimeout(()=>{i(a)},_q.get());function c(){Tt().clearTimeout(o),r(s)}s.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Iq=500,Rq=600,Cq="_blank",jq="http://localhost";class CA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Pq(t,e,n,s=Iq,r=Rq){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let o="";const c={...Nq,width:s.toString(),height:r.toString(),top:i,left:a},u=it().toLowerCase();n&&(o=rk(u)?Cq:n),nk(u)&&(e=e||jq,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[p,_])=>`${m}${p}=${_},`,"");if(nB(u)&&o!=="_self")return kq(e||"",o),new CA(null);const f=window.open(e||"",o,h);q(f,t,"popup-blocked");try{f.focus()}catch{}return new CA(f)}function kq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dq="__/auth/handler",Mq="emulator/auth/handler",Oq=encodeURIComponent("fac");async function Ix(t,e,n,s,r,i){q(t.config.authDomain,t,"auth-domain-config-required"),q(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Wr,eventId:r};if(e instanceof Qr){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",cF(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries(i||{}))a[h]=f}if(e instanceof Bc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const c=await t._getAppCheckToken(),u=c?`#${Oq}=${encodeURIComponent(c)}`:"";return`${Vq(t)}?${Uc(o).slice(1)}${u}`}function Vq({config:t}){return t.emulator?iw(t,Mq):`https://${t.authDomain}/${Dq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="webStorageSupport";class Lq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=po,this._completeRedirectFn=Gg,this._overrideRedirectResult=vw}async _openPopup(e,n,s,r){var a;Rs((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await Ix(e,n,s,th(),r);return Pq(e,i,Wh())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Ix(e,n,s,th(),r);return A7(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(Rs(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await Aq(e),s=new Dk(e);return n.register("authEvent",r=>(q(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(W0,{type:W0},r=>{var a;const i=(a=r==null?void 0:r[0])==null?void 0:a[W0];i!==void 0&&n(!!i),en(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pq(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lk()||sk()||Gh()}}const Uq=Lq;class zq{constructor(e){this.factorId=e}_process(e,n,s){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,s);case"signin":return this._finalizeSignIn(e,n.credential);default:return Ks("unexpected MultiFactorSessionType")}}}class xw extends zq{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new xw(e)}_finalizeEnroll(e,n,s){return x7(e,{idToken:n,displayName:s,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return M7(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Vk{constructor(){}static assertion(e){return xw._fromCredential(e)}}Vk.FACTOR_ID="phone";var jA="@firebase/auth",PA="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qq(t){zr(new xs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=s.options;q(a&&!a.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ck(t)},u=new lB(s,r,i,c);return wB(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),zr(new xs("auth-internal",e=>{const n=at(e.getProvider("auth").getImmediate());return(s=>new Fq(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wn(jA,PA,Bq(t)),Wn(jA,PA,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hq=5*60;Jz("authIdTokenMaxAge");function Gq(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}cB({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Dt("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",Gq().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qq("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $q=2e3;async function Kq(t,e,n){const{BuildInfo:s}=yo();Rs(e.sessionId,"AuthEvent did not contain a session ID");const r=await Jq(e.sessionId),i={};return Gh()?i.ibi=s.packageName:Hh()?i.apn=s.packageName:en(t,"operation-not-supported-in-this-environment"),s.displayName&&(i.appDisplayName=s.displayName),i.sessionId=r,Ix(t,n,e.type,void 0,e.eventId??void 0,i)}async function Wq(t){const{BuildInfo:e}=yo(),n={};Gh()?n.iosBundleId=e.packageName:Hh()?n.androidPackageName=e.packageName:en(t,"operation-not-supported-in-this-environment"),await Ok(t,n)}function Yq(t){const{cordova:e}=yo();return new Promise(n=>{e.plugins.browsertab.isAvailable(s=>{let r=null;s?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,tB()?"_blank":"_system","location=yes"),n(r)})})}async function Qq(t,e,n){const{cordova:s}=yo();let r=()=>{};try{await new Promise((i,a)=>{let o=null;function c(){var m;i();const f=(m=s.plugins.browsertab)==null?void 0:m.close;typeof f=="function"&&f(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function u(){o||(o=window.setTimeout(()=>{a(Dt(t,"redirect-cancelled-by-user"))},$q))}function h(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(c),document.addEventListener("resume",u,!1),Hh()&&document.addEventListener("visibilitychange",h,!1),r=()=>{e.removePassiveListener(c),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",h,!1),o&&window.clearTimeout(o)}})}finally{r()}}function Xq(t){var n,s,r,i,a,o,c,u,h,f;const e=yo();q(typeof((n=e==null?void 0:e.universalLinks)==null?void 0:n.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(typeof((s=e==null?void 0:e.BuildInfo)==null?void 0:s.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q(typeof((a=(i=(r=e==null?void 0:e.cordova)==null?void 0:r.plugins)==null?void 0:i.browsertab)==null?void 0:a.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q(typeof((u=(c=(o=e==null?void 0:e.cordova)==null?void 0:o.plugins)==null?void 0:c.browsertab)==null?void 0:u.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q(typeof((f=(h=e==null?void 0:e.cordova)==null?void 0:h.InAppBrowser)==null?void 0:f.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Jq(t){const e=Zq(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(r=>r.toString(16).padStart(2,"0")).join("")}function Zq(t){if(Rs(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eH=20;class tH extends Dk{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function nH(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:iH(),postBody:null,tenantId:t.tenantId,error:Dt(t,"no-auth-event")}}function sH(t,e){return Rx()._set(Cx(t),e)}async function kA(t){const e=await Rx()._get(Cx(t));return e&&await Rx()._remove(Cx(t)),e}function rH(t,e){var s,r;const n=oH(e);if(n.includes("/__/auth/callback")){const i=jm(n),a=i.firebaseError?aH(decodeURIComponent(i.firebaseError)):null,o=(r=(s=a==null?void 0:a.code)==null?void 0:s.split("auth/"))==null?void 0:r[1],c=o?Dt(o):null;return c?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:n,postBody:null}}return null}function iH(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<eH;n++){const s=Math.floor(Math.random()*e.length);t.push(e.charAt(s))}return t.join("")}function Rx(){return Bn(fw)}function Cx(t){return ro("authEvent",t.config.apiKey,t.name)}function aH(t){try{return JSON.parse(t)}catch{return null}}function oH(t){const e=jm(t),n=e.link?decodeURIComponent(e.link):void 0,s=jm(n).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return jm(r).link||r||s||n||t}function jm(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Tl(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lH=500;class cH{constructor(){this._redirectPersistence=po,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Gg,this._overrideRedirectResult=vw}async _initialize(e){const n=e._key();let s=this.eventManagers.get(n);return s||(s=new tH(e),this.eventManagers.set(n,s),this.attachCallbackListeners(e,s)),s}_openPopup(e){en(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,s,r){Xq(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),sq(),await this._originValidation(e);const a=nH(e,s,r);await sH(e,a);const o=await Kq(e,a,n),c=await Yq(o);return Qq(e,i,c)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Wq(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:s,handleOpenURL:r,BuildInfo:i}=yo(),a=setTimeout(async()=>{await kA(e),n.onEvent(DA())},lH),o=async h=>{clearTimeout(a);const f=await kA(e);let m=null;f&&(h!=null&&h.url)&&(m=rH(f,h.url)),n.onEvent(m||DA())};typeof s<"u"&&typeof s.subscribe=="function"&&s.subscribe(null,o);const c=r,u=`${i.packageName.toLowerCase()}://`;yo().handleOpenURL=async h=>{if(h.toLowerCase().startsWith(u)&&o({url:h}),typeof c=="function")try{c(h)}catch(f){console.error(f)}}}}const uH=cH;function DA(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Dt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dH(t,e){at(t)._logFramework(e)}var hH="@firebase/auth-compat",fH="0.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mH=1e3;function _d(){var t;return((t=self==null?void 0:self.location)==null?void 0:t.protocol)||null}function pH(){return _d()==="http:"||_d()==="https:"}function Lk(t=it()){return!!((_d()==="file:"||_d()==="ionic:"||_d()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function gH(){return Qb()||Dg()}function yH(){return CP()&&(document==null?void 0:document.documentMode)===11}function vH(t=it()){return/Edge\/\d+/.test(t)}function xH(t=it()){return yH()||vH(t)}function Uk(){try{const t=self.localStorage,e=Wh();if(t)return t.setItem(e,"1"),t.removeItem(e),xH()?Jd():!0}catch{return _w()&&Jd()}return!1}function _w(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Y0(){return(pH()||RP()||Lk())&&!gH()&&Uk()&&!_w()}function zk(){return Lk()&&typeof document<"u"}async function _H(){return zk()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},mH);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function bH(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un={LOCAL:"local",NONE:"none",SESSION:"session"},Nu=q,Fk="persistence";function wH(t,e){if(Nu(Object.values(Un).includes(e),t,"invalid-persistence-type"),Qb()){Nu(e!==Un.SESSION,t,"unsupported-persistence-type");return}if(Dg()){Nu(e===Un.NONE,t,"unsupported-persistence-type");return}if(_w()){Nu(e===Un.NONE||e===Un.LOCAL&&Jd(),t,"unsupported-persistence-type");return}Nu(e===Un.NONE||Uk(),t,"unsupported-persistence-type")}async function jx(t){await t._initializationPromise;const e=Bk(),n=ro(Fk,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistenceType())}function TH(t,e){const n=Bk();if(!n)return[];const s=ro(Fk,t,e);switch(n.getItem(s)){case Un.NONE:return[sc];case Un.LOCAL:return[rh,po];case Un.SESSION:return[po];default:return[]}}function Bk(){var t;try{return((t=bH())==null?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EH=q;class Ii{constructor(){this.browserResolver=Bn(Uq),this.cordovaResolver=Bn(uH),this.underlyingResolver=null,this._redirectPersistence=po,this._completeRedirectFn=Gg,this._overrideRedirectResult=vw}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,s,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,s,r)}async _openRedirect(e,n,s,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,s,r)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return zk()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return EH(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await _H();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(t){return t.unwrap()}function SH(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AH(t){return Hk(t)}function NH(t,e){var s;const n=(s=e.customData)==null?void 0:s._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const r=e;r.resolver=new IH(t,v7(t,e))}else if(n){const r=Hk(e),i=e;r&&(i.credential=r,i.tenantId=n.tenantId||void 0,i.email=n.email||void 0,i.phoneNumber=n.phoneNumber||void 0)}}function Hk(t){const{_tokenResponse:e}=t instanceof cn?t.customData:t;if(!e)return null;if(!(t instanceof cn)&&"temporaryProof"in e&&"phoneNumber"in e)return go.credentialFromResult(t);const n=e.providerId;if(!n||n===Su.PASSWORD)return null;let s;switch(n){case Su.GOOGLE:s=zs;break;case Su.FACEBOOK:s=Us;break;case Su.GITHUB:s=Fs;break;case Su.TWITTER:s=Bs;break;default:const{oauthIdToken:r,oauthAccessToken:i,oauthTokenSecret:a,pendingToken:o,nonce:c}=e;return!i&&!a&&!r&&!o?null:o?n.startsWith("saml.")?rc._create(n,o):rr._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:r,accessToken:i}):new Ll(n).credential({idToken:r,accessToken:i,rawNonce:c})}return t instanceof cn?s.credentialFromError(t):s.credentialFromResult(t)}function Nn(t,e){return e.catch(n=>{throw n instanceof cn&&NH(t,n),n}).then(n=>{const s=n.operationType,r=n.user;return{operationType:s,credential:AH(n),additionalUserInfo:y7(n),user:$g.getOrCreate(r)}})}async function Px(t,e){const n=await e;return{verificationId:n.verificationId,confirm:s=>Nn(t,n.confirm(s))}}class IH{constructor(e,n){this.resolver=n,this.auth=SH(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Nn(qk(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $g=class $u{constructor(e){this._delegate=e,this.multiFactor=b7(e)}static getOrCreate(e){return $u.USER_MAP.has(e)||$u.USER_MAP.set(e,new $u(e)),$u.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Nn(this.auth,xk(this._delegate,e))}async linkWithPhoneNumber(e,n){return Px(this.auth,H7(this._delegate,e,n))}async linkWithPopup(e){return Nn(this.auth,Z7(this._delegate,e,Ii))}async linkWithRedirect(e){return await jx(at(this.auth)),lq(this._delegate,e,Ii)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Nn(this.auth,_k(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return Px(this.auth,G7(this._delegate,e,n))}reauthenticateWithPopup(e){return Nn(this.auth,J7(this._delegate,e,Ii))}async reauthenticateWithRedirect(e){return await jx(at(this.auth)),aq(this._delegate,e,Ii)}sendEmailVerification(e){return a7(this._delegate,e)}async unlink(e){return await $B(this._delegate,e),this}updateEmail(e){return u7(this._delegate,e)}updatePassword(e){return d7(this._delegate,e)}updatePhoneNumber(e){return $7(this._delegate,e)}updateProfile(e){return c7(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return o7(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};$g.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu=q;class kx{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:s}=e.options;Iu(s,"invalid-api-key",{appName:e.name}),Iu(s,"invalid-api-key",{appName:e.name});const r=typeof window<"u"?Ii:void 0;this._delegate=n.initialize({options:{persistence:RH(s,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(M8),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?$g.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){TB(this._delegate,e,n)}applyActionCode(e){return XB(this._delegate,e)}checkActionCode(e){return bk(this._delegate,e)}confirmPasswordReset(e,n){return QB(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Nn(this._delegate,ZB(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return i7(this._delegate,e)}isSignInWithEmailLink(e){return n7(this._delegate,e)}async getRedirectResult(){Iu(Y0(),this._delegate,"operation-not-supported-in-this-environment");const e=await uq(this._delegate,Ii);return e?Nn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){dH(this._delegate,e)}onAuthStateChanged(e,n,s){const{next:r,error:i,complete:a}=MA(e,n,s);return this._delegate.onAuthStateChanged(r,i,a)}onIdTokenChanged(e,n,s){const{next:r,error:i,complete:a}=MA(e,n,s);return this._delegate.onIdTokenChanged(r,i,a)}sendSignInLinkToEmail(e,n){return t7(this._delegate,e,n)}sendPasswordResetEmail(e,n){return YB(this._delegate,e,n||void 0)}async setPersistence(e){wH(this._delegate,e);let n;switch(e){case Un.SESSION:n=po;break;case Un.LOCAL:n=await Bn(rh)._isAvailable()?rh:fw;break;case Un.NONE:n=sc;break;default:return en("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Nn(this._delegate,GB(this._delegate))}signInWithCredential(e){return Nn(this._delegate,zg(this._delegate,e))}signInWithCustomToken(e){return Nn(this._delegate,WB(this._delegate,e))}signInWithEmailAndPassword(e,n){return Nn(this._delegate,e7(this._delegate,e,n))}signInWithEmailLink(e,n){return Nn(this._delegate,s7(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Px(this._delegate,q7(this._delegate,e,n))}async signInWithPopup(e){return Iu(Y0(),this._delegate,"operation-not-supported-in-this-environment"),Nn(this._delegate,X7(this._delegate,e,Ii))}async signInWithRedirect(e){return Iu(Y0(),this._delegate,"operation-not-supported-in-this-environment"),await jx(this._delegate),rq(this._delegate,e,Ii)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return JB(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}kx.Persistence=Un;function MA(t,e,n){let s=t;typeof t!="function"&&({next:s,error:e,complete:n}=t);const r=s;return{next:a=>r(a&&$g.getOrCreate(a)),error:e,complete:n}}function RH(t,e){const n=TH(t,e);if(typeof self<"u"&&!n.includes(rh)&&n.push(rh),typeof window<"u")for(const s of[fw,po])n.includes(s)||n.push(s);return n.includes(sc)||n.push(sc),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{static credential(e,n){return go.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new go(qk(Me.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}bw.PHONE_SIGN_IN_METHOD=go.PHONE_SIGN_IN_METHOD;bw.PROVIDER_ID=go.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CH=q;class jH{constructor(e,n,s=Me.app()){var r;CH((r=s.options)==null?void 0:r.apiKey,"invalid-api-key",{appName:s.name}),this._delegate=new F7(s.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PH="auth-compat";function kH(t){t.INTERNAL.registerComponent(new xs(PH,e=>{const n=e.getProvider("app-compat").getImmediate(),s=e.getProvider("auth");return new kx(n,s)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ko.EMAIL_SIGNIN,PASSWORD_RESET:Ko.PASSWORD_RESET,RECOVER_EMAIL:Ko.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ko.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ko.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ko.VERIFY_EMAIL}},EmailAuthProvider:ma,FacebookAuthProvider:Us,GithubAuthProvider:Fs,GoogleAuthProvider:zs,OAuthProvider:Ll,SAMLAuthProvider:jp,PhoneAuthProvider:bw,PhoneMultiFactorGenerator:Vk,RecaptchaVerifier:jH,TwitterAuthProvider:Bs,Auth:kx,AuthCredential:Fc,Error:cn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(hH,fH)}kH(Me);var OA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bi,Gk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,E){function N(){}N.prototype=E.prototype,A.F=E.prototype,A.prototype=new N,A.prototype.constructor=A,A.D=function(I,P,k){for(var j=Array(arguments.length-2),W=2;W<arguments.length;W++)j[W-2]=arguments[W];return E.prototype[P].apply(I,j)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(A,E,N){N||(N=0);const I=Array(16);if(typeof E=="string")for(var P=0;P<16;++P)I[P]=E.charCodeAt(N++)|E.charCodeAt(N++)<<8|E.charCodeAt(N++)<<16|E.charCodeAt(N++)<<24;else for(P=0;P<16;++P)I[P]=E[N++]|E[N++]<<8|E[N++]<<16|E[N++]<<24;E=A.g[0],N=A.g[1],P=A.g[2];let k=A.g[3],j;j=E+(k^N&(P^k))+I[0]+3614090360&4294967295,E=N+(j<<7&4294967295|j>>>25),j=k+(P^E&(N^P))+I[1]+3905402710&4294967295,k=E+(j<<12&4294967295|j>>>20),j=P+(N^k&(E^N))+I[2]+606105819&4294967295,P=k+(j<<17&4294967295|j>>>15),j=N+(E^P&(k^E))+I[3]+3250441966&4294967295,N=P+(j<<22&4294967295|j>>>10),j=E+(k^N&(P^k))+I[4]+4118548399&4294967295,E=N+(j<<7&4294967295|j>>>25),j=k+(P^E&(N^P))+I[5]+1200080426&4294967295,k=E+(j<<12&4294967295|j>>>20),j=P+(N^k&(E^N))+I[6]+2821735955&4294967295,P=k+(j<<17&4294967295|j>>>15),j=N+(E^P&(k^E))+I[7]+4249261313&4294967295,N=P+(j<<22&4294967295|j>>>10),j=E+(k^N&(P^k))+I[8]+1770035416&4294967295,E=N+(j<<7&4294967295|j>>>25),j=k+(P^E&(N^P))+I[9]+2336552879&4294967295,k=E+(j<<12&4294967295|j>>>20),j=P+(N^k&(E^N))+I[10]+4294925233&4294967295,P=k+(j<<17&4294967295|j>>>15),j=N+(E^P&(k^E))+I[11]+2304563134&4294967295,N=P+(j<<22&4294967295|j>>>10),j=E+(k^N&(P^k))+I[12]+1804603682&4294967295,E=N+(j<<7&4294967295|j>>>25),j=k+(P^E&(N^P))+I[13]+4254626195&4294967295,k=E+(j<<12&4294967295|j>>>20),j=P+(N^k&(E^N))+I[14]+2792965006&4294967295,P=k+(j<<17&4294967295|j>>>15),j=N+(E^P&(k^E))+I[15]+1236535329&4294967295,N=P+(j<<22&4294967295|j>>>10),j=E+(P^k&(N^P))+I[1]+4129170786&4294967295,E=N+(j<<5&4294967295|j>>>27),j=k+(N^P&(E^N))+I[6]+3225465664&4294967295,k=E+(j<<9&4294967295|j>>>23),j=P+(E^N&(k^E))+I[11]+643717713&4294967295,P=k+(j<<14&4294967295|j>>>18),j=N+(k^E&(P^k))+I[0]+3921069994&4294967295,N=P+(j<<20&4294967295|j>>>12),j=E+(P^k&(N^P))+I[5]+3593408605&4294967295,E=N+(j<<5&4294967295|j>>>27),j=k+(N^P&(E^N))+I[10]+38016083&4294967295,k=E+(j<<9&4294967295|j>>>23),j=P+(E^N&(k^E))+I[15]+3634488961&4294967295,P=k+(j<<14&4294967295|j>>>18),j=N+(k^E&(P^k))+I[4]+3889429448&4294967295,N=P+(j<<20&4294967295|j>>>12),j=E+(P^k&(N^P))+I[9]+568446438&4294967295,E=N+(j<<5&4294967295|j>>>27),j=k+(N^P&(E^N))+I[14]+3275163606&4294967295,k=E+(j<<9&4294967295|j>>>23),j=P+(E^N&(k^E))+I[3]+4107603335&4294967295,P=k+(j<<14&4294967295|j>>>18),j=N+(k^E&(P^k))+I[8]+1163531501&4294967295,N=P+(j<<20&4294967295|j>>>12),j=E+(P^k&(N^P))+I[13]+2850285829&4294967295,E=N+(j<<5&4294967295|j>>>27),j=k+(N^P&(E^N))+I[2]+4243563512&4294967295,k=E+(j<<9&4294967295|j>>>23),j=P+(E^N&(k^E))+I[7]+1735328473&4294967295,P=k+(j<<14&4294967295|j>>>18),j=N+(k^E&(P^k))+I[12]+2368359562&4294967295,N=P+(j<<20&4294967295|j>>>12),j=E+(N^P^k)+I[5]+4294588738&4294967295,E=N+(j<<4&4294967295|j>>>28),j=k+(E^N^P)+I[8]+2272392833&4294967295,k=E+(j<<11&4294967295|j>>>21),j=P+(k^E^N)+I[11]+1839030562&4294967295,P=k+(j<<16&4294967295|j>>>16),j=N+(P^k^E)+I[14]+4259657740&4294967295,N=P+(j<<23&4294967295|j>>>9),j=E+(N^P^k)+I[1]+2763975236&4294967295,E=N+(j<<4&4294967295|j>>>28),j=k+(E^N^P)+I[4]+1272893353&4294967295,k=E+(j<<11&4294967295|j>>>21),j=P+(k^E^N)+I[7]+4139469664&4294967295,P=k+(j<<16&4294967295|j>>>16),j=N+(P^k^E)+I[10]+3200236656&4294967295,N=P+(j<<23&4294967295|j>>>9),j=E+(N^P^k)+I[13]+681279174&4294967295,E=N+(j<<4&4294967295|j>>>28),j=k+(E^N^P)+I[0]+3936430074&4294967295,k=E+(j<<11&4294967295|j>>>21),j=P+(k^E^N)+I[3]+3572445317&4294967295,P=k+(j<<16&4294967295|j>>>16),j=N+(P^k^E)+I[6]+76029189&4294967295,N=P+(j<<23&4294967295|j>>>9),j=E+(N^P^k)+I[9]+3654602809&4294967295,E=N+(j<<4&4294967295|j>>>28),j=k+(E^N^P)+I[12]+3873151461&4294967295,k=E+(j<<11&4294967295|j>>>21),j=P+(k^E^N)+I[15]+530742520&4294967295,P=k+(j<<16&4294967295|j>>>16),j=N+(P^k^E)+I[2]+3299628645&4294967295,N=P+(j<<23&4294967295|j>>>9),j=E+(P^(N|~k))+I[0]+4096336452&4294967295,E=N+(j<<6&4294967295|j>>>26),j=k+(N^(E|~P))+I[7]+1126891415&4294967295,k=E+(j<<10&4294967295|j>>>22),j=P+(E^(k|~N))+I[14]+2878612391&4294967295,P=k+(j<<15&4294967295|j>>>17),j=N+(k^(P|~E))+I[5]+4237533241&4294967295,N=P+(j<<21&4294967295|j>>>11),j=E+(P^(N|~k))+I[12]+1700485571&4294967295,E=N+(j<<6&4294967295|j>>>26),j=k+(N^(E|~P))+I[3]+2399980690&4294967295,k=E+(j<<10&4294967295|j>>>22),j=P+(E^(k|~N))+I[10]+4293915773&4294967295,P=k+(j<<15&4294967295|j>>>17),j=N+(k^(P|~E))+I[1]+2240044497&4294967295,N=P+(j<<21&4294967295|j>>>11),j=E+(P^(N|~k))+I[8]+1873313359&4294967295,E=N+(j<<6&4294967295|j>>>26),j=k+(N^(E|~P))+I[15]+4264355552&4294967295,k=E+(j<<10&4294967295|j>>>22),j=P+(E^(k|~N))+I[6]+2734768916&4294967295,P=k+(j<<15&4294967295|j>>>17),j=N+(k^(P|~E))+I[13]+1309151649&4294967295,N=P+(j<<21&4294967295|j>>>11),j=E+(P^(N|~k))+I[4]+4149444226&4294967295,E=N+(j<<6&4294967295|j>>>26),j=k+(N^(E|~P))+I[11]+3174756917&4294967295,k=E+(j<<10&4294967295|j>>>22),j=P+(E^(k|~N))+I[2]+718787259&4294967295,P=k+(j<<15&4294967295|j>>>17),j=N+(k^(P|~E))+I[9]+3951481745&4294967295,A.g[0]=A.g[0]+E&4294967295,A.g[1]=A.g[1]+(P+(j<<21&4294967295|j>>>11))&4294967295,A.g[2]=A.g[2]+P&4294967295,A.g[3]=A.g[3]+k&4294967295}s.prototype.v=function(A,E){E===void 0&&(E=A.length);const N=E-this.blockSize,I=this.C;let P=this.h,k=0;for(;k<E;){if(P==0)for(;k<=N;)r(this,A,k),k+=this.blockSize;if(typeof A=="string"){for(;k<E;)if(I[P++]=A.charCodeAt(k++),P==this.blockSize){r(this,I),P=0;break}}else for(;k<E;)if(I[P++]=A[k++],P==this.blockSize){r(this,I),P=0;break}}this.h=P,this.o+=E},s.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var E=1;E<A.length-8;++E)A[E]=0;E=this.o*8;for(var N=A.length-8;N<A.length;++N)A[N]=E&255,E/=256;for(this.v(A),A=Array(16),E=0,N=0;N<4;++N)for(let I=0;I<32;I+=8)A[E++]=this.g[N]>>>I&255;return A};function i(A,E){var N=o;return Object.prototype.hasOwnProperty.call(N,A)?N[A]:N[A]=E(A)}function a(A,E){this.h=E;const N=[];let I=!0;for(let P=A.length-1;P>=0;P--){const k=A[P]|0;I&&k==E||(N[P]=k,I=!1)}this.g=N}var o={};function c(A){return-128<=A&&A<128?i(A,function(E){return new a([E|0],E<0?-1:0)}):new a([A|0],A<0?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return f;if(A<0)return T(u(-A));const E=[];let N=1;for(let I=0;A>=N;I++)E[I]=A/N|0,N*=4294967296;return new a(E,0)}function h(A,E){if(A.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(A.charAt(0)=="-")return T(h(A.substring(1),E));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=u(Math.pow(E,8));let I=f;for(let k=0;k<A.length;k+=8){var P=Math.min(8,A.length-k);const j=parseInt(A.substring(k,k+P),E);P<8?(P=u(Math.pow(E,P)),I=I.j(P).add(u(j))):(I=I.j(N),I=I.add(u(j)))}return I}var f=c(0),m=c(1),p=c(16777216);t=a.prototype,t.m=function(){if(w(this))return-T(this).m();let A=0,E=1;for(let N=0;N<this.g.length;N++){const I=this.i(N);A+=(I>=0?I:4294967296+I)*E,E*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(_(this))return"0";if(w(this))return"-"+T(this).toString(A);const E=u(Math.pow(A,6));var N=this;let I="";for(;;){const P=R(N,E).g;N=x(N,P.j(E));let k=((N.g.length>0?N.g[0]:N.h)>>>0).toString(A);if(N=P,_(N))return k+I;for(;k.length<6;)k="0"+k;I=k+I}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function _(A){if(A.h!=0)return!1;for(let E=0;E<A.g.length;E++)if(A.g[E]!=0)return!1;return!0}function w(A){return A.h==-1}t.l=function(A){return A=x(this,A),w(A)?-1:_(A)?0:1};function T(A){const E=A.g.length,N=[];for(let I=0;I<E;I++)N[I]=~A.g[I];return new a(N,~A.h).add(m)}t.abs=function(){return w(this)?T(this):this},t.add=function(A){const E=Math.max(this.g.length,A.g.length),N=[];let I=0;for(let P=0;P<=E;P++){let k=I+(this.i(P)&65535)+(A.i(P)&65535),j=(k>>>16)+(this.i(P)>>>16)+(A.i(P)>>>16);I=j>>>16,k&=65535,j&=65535,N[P]=j<<16|k}return new a(N,N[N.length-1]&-2147483648?-1:0)};function x(A,E){return A.add(T(E))}t.j=function(A){if(_(this)||_(A))return f;if(w(this))return w(A)?T(this).j(T(A)):T(T(this).j(A));if(w(A))return T(this.j(T(A)));if(this.l(p)<0&&A.l(p)<0)return u(this.m()*A.m());const E=this.g.length+A.g.length,N=[];for(var I=0;I<2*E;I++)N[I]=0;for(I=0;I<this.g.length;I++)for(let P=0;P<A.g.length;P++){const k=this.i(I)>>>16,j=this.i(I)&65535,W=A.i(P)>>>16,ue=A.i(P)&65535;N[2*I+2*P]+=j*ue,v(N,2*I+2*P),N[2*I+2*P+1]+=k*ue,v(N,2*I+2*P+1),N[2*I+2*P+1]+=j*W,v(N,2*I+2*P+1),N[2*I+2*P+2]+=k*W,v(N,2*I+2*P+2)}for(A=0;A<E;A++)N[A]=N[2*A+1]<<16|N[2*A];for(A=E;A<2*E;A++)N[A]=0;return new a(N,0)};function v(A,E){for(;(A[E]&65535)!=A[E];)A[E+1]+=A[E]>>>16,A[E]&=65535,E++}function b(A,E){this.g=A,this.h=E}function R(A,E){if(_(E))throw Error("division by zero");if(_(A))return new b(f,f);if(w(A))return E=R(T(A),E),new b(T(E.g),T(E.h));if(w(E))return E=R(A,T(E)),new b(T(E.g),E.h);if(A.g.length>30){if(w(A)||w(E))throw Error("slowDivide_ only works with positive integers.");for(var N=m,I=E;I.l(A)<=0;)N=D(N),I=D(I);var P=M(N,1),k=M(I,1);for(I=M(I,2),N=M(N,2);!_(I);){var j=k.add(I);j.l(A)<=0&&(P=P.add(N),k=j),I=M(I,1),N=M(N,1)}return E=x(A,P.j(E)),new b(P,E)}for(P=f;A.l(E)>=0;){for(N=Math.max(1,Math.floor(A.m()/E.m())),I=Math.ceil(Math.log(N)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),k=u(N),j=k.j(E);w(j)||j.l(A)>0;)N-=I,k=u(N),j=k.j(E);_(k)&&(k=m),P=P.add(k),A=x(A,j)}return new b(P,A)}t.B=function(A){return R(this,A).h},t.and=function(A){const E=Math.max(this.g.length,A.g.length),N=[];for(let I=0;I<E;I++)N[I]=this.i(I)&A.i(I);return new a(N,this.h&A.h)},t.or=function(A){const E=Math.max(this.g.length,A.g.length),N=[];for(let I=0;I<E;I++)N[I]=this.i(I)|A.i(I);return new a(N,this.h|A.h)},t.xor=function(A){const E=Math.max(this.g.length,A.g.length),N=[];for(let I=0;I<E;I++)N[I]=this.i(I)^A.i(I);return new a(N,this.h^A.h)};function D(A){const E=A.g.length+1,N=[];for(let I=0;I<E;I++)N[I]=A.i(I)<<1|A.i(I-1)>>>31;return new a(N,A.h)}function M(A,E){const N=E>>5;E%=32;const I=A.g.length-N,P=[];for(let k=0;k<I;k++)P[k]=E>0?A.i(k+N)>>>E|A.i(k+N+1)<<32-E:A.i(k+N);return new a(P,A.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Gk=s,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=h,Bi=a}).apply(typeof OA<"u"?OA:typeof self<"u"?self:typeof window<"u"?window:{});var Wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $k,Ku,Kk,Pm,Dx,Wk,Yk,Qk;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wf=="object"&&Wf];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=n(this);function r(d,g){if(g)e:{var y=s;d=d.split(".");for(var C=0;C<d.length-1;C++){var V=d[C];if(!(V in y))break e;y=y[V]}d=d[d.length-1],C=y[d],g=g(C),g!=C&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}r("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(d){return d||function(g){var y=[],C;for(C in g)Object.prototype.hasOwnProperty.call(g,C)&&y.push([C,g[C]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function o(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function c(d,g,y){return d.call.apply(d.bind,arguments)}function u(d,g,y){return u=c,u.apply(null,arguments)}function h(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var C=y.slice();return C.push.apply(C,arguments),d.apply(this,C)}}function f(d,g){function y(){}y.prototype=g.prototype,d.Z=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Ob=function(C,V,U){for(var $=Array(arguments.length-2),le=2;le<arguments.length;le++)$[le-2]=arguments[le];return g.prototype[V].apply(C,$)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function p(d){const g=d.length;if(g>0){const y=Array(g);for(let C=0;C<g;C++)y[C]=d[C];return y}return[]}function _(d,g){for(let C=1;C<arguments.length;C++){const V=arguments[C];var y=typeof V;if(y=y!="object"?y:V?Array.isArray(V)?"array":y:"null",y=="array"||y=="object"&&typeof V.length=="number"){y=d.length||0;const U=V.length||0;d.length=y+U;for(let $=0;$<U;$++)d[y+$]=V[$]}else d.push(V)}}class w{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function T(d){a.setTimeout(()=>{throw d},0)}function x(){var d=A;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class v{constructor(){this.h=this.g=null}add(g,y){const C=b.get();C.set(g,y),this.h?this.h.next=C:this.g=C,this.h=C}}var b=new w(()=>new R,d=>d.reset());class R{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let D,M=!1,A=new v,E=()=>{const d=Promise.resolve(void 0);D=()=>{d.then(N)}};function N(){for(var d;d=x();){try{d.h.call(d.g)}catch(y){T(y)}var g=b;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}M=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const y=()=>{};a.addEventListener("test",y,g),a.removeEventListener("test",y,g)}catch{}return d}();function j(d){return/^[\s\xa0]*$/.test(d)}function W(d,g){P.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}f(W,P),W.prototype.init=function(d,g){const y=this.type=d.type,C=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ue="closure_listenable_"+(Math.random()*1e6|0),H=0;function ee(d,g,y,C,V){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!C,this.ha=V,this.key=++H,this.da=this.fa=!1}function te(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ee(d,g,y){for(const C in d)g.call(y,d[C],C,d)}function Je(d,g){for(const y in d)g.call(void 0,d[y],y,d)}function wa(d){const g={};for(const y in d)g[y]=d[y];return g}const Ta="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Fo(d,g){let y,C;for(let V=1;V<arguments.length;V++){C=arguments[V];for(y in C)d[y]=C[y];for(let U=0;U<Ta.length;U++)y=Ta[U],Object.prototype.hasOwnProperty.call(C,y)&&(d[y]=C[y])}}function ns(d){this.src=d,this.g={},this.h=0}ns.prototype.add=function(d,g,y,C,V){const U=d.toString();d=this.g[U],d||(d=this.g[U]=[],this.h++);const $=jy(d,g,C,V);return $>-1?(g=d[$],y||(g.fa=!1)):(g=new ee(g,this.src,U,!!C,V),g.fa=y,d.push(g)),g};function ni(d,g){const y=g.type;if(y in d.g){var C=d.g[y],V=Array.prototype.indexOf.call(C,g,void 0),U;(U=V>=0)&&Array.prototype.splice.call(C,V,1),U&&(te(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function jy(d,g,y,C){for(let V=0;V<d.length;++V){const U=d[V];if(!U.da&&U.listener==g&&U.capture==!!y&&U.ha==C)return V}return-1}var Py="closure_lm_"+(Math.random()*1e6|0),ky={};function xT(d,g,y,C,V){if(Array.isArray(g)){for(let U=0;U<g.length;U++)xT(d,g[U],y,C,V);return null}return y=wT(y),d&&d[ue]?d.J(g,y,o(C)?!!C.capture:!1,V):$6(d,g,y,!1,C,V)}function $6(d,g,y,C,V,U){if(!g)throw Error("Invalid event type");const $=o(V)?!!V.capture:!!V;let le=My(d);if(le||(d[Py]=le=new ns(d)),y=le.add(g,y,C,$,U),y.proxy)return y;if(C=K6(),y.proxy=C,C.src=d,C.listener=y,d.addEventListener)k||(V=$),V===void 0&&(V=!1),d.addEventListener(g.toString(),C,V);else if(d.attachEvent)d.attachEvent(bT(g.toString()),C);else if(d.addListener&&d.removeListener)d.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return y}function K6(){function d(y){return g.call(d.src,d.listener,y)}const g=W6;return d}function _T(d,g,y,C,V){if(Array.isArray(g))for(var U=0;U<g.length;U++)_T(d,g[U],y,C,V);else C=o(C)?!!C.capture:!!C,y=wT(y),d&&d[ue]?(d=d.i,U=String(g).toString(),U in d.g&&(g=d.g[U],y=jy(g,y,C,V),y>-1&&(te(g[y]),Array.prototype.splice.call(g,y,1),g.length==0&&(delete d.g[U],d.h--)))):d&&(d=My(d))&&(g=d.g[g.toString()],d=-1,g&&(d=jy(g,y,C,V)),(y=d>-1?g[d]:null)&&Dy(y))}function Dy(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[ue])ni(g.i,d);else{var y=d.type,C=d.proxy;g.removeEventListener?g.removeEventListener(y,C,d.capture):g.detachEvent?g.detachEvent(bT(y),C):g.addListener&&g.removeListener&&g.removeListener(C),(y=My(g))?(ni(y,d),y.h==0&&(y.src=null,g[Py]=null)):te(d)}}}function bT(d){return d in ky?ky[d]:ky[d]="on"+d}function W6(d,g){if(d.da)d=!0;else{g=new W(g,this);const y=d.listener,C=d.ha||d.src;d.fa&&Dy(d),d=y.call(C,g)}return d}function My(d){return d=d[Py],d instanceof ns?d:null}var Oy="__closure_events_fn_"+(Math.random()*1e9>>>0);function wT(d){return typeof d=="function"?d:(d[Oy]||(d[Oy]=function(g){return d.handleEvent(g)}),d[Oy])}function tn(){I.call(this),this.i=new ns(this),this.M=this,this.G=null}f(tn,I),tn.prototype[ue]=!0,tn.prototype.removeEventListener=function(d,g,y,C){_T(this,d,g,y,C)};function hn(d,g){var y,C=d.G;if(C)for(y=[];C;C=C.G)y.push(C);if(d=d.M,C=g.type||g,typeof g=="string")g=new P(g,d);else if(g instanceof P)g.target=g.target||d;else{var V=g;g=new P(C,d),Fo(g,V)}V=!0;let U,$;if(y)for($=y.length-1;$>=0;$--)U=g.g=y[$],V=vf(U,C,!0,g)&&V;if(U=g.g=d,V=vf(U,C,!0,g)&&V,V=vf(U,C,!1,g)&&V,y)for($=0;$<y.length;$++)U=g.g=y[$],V=vf(U,C,!1,g)&&V}tn.prototype.N=function(){if(tn.Z.N.call(this),this.i){var d=this.i;for(const g in d.g){const y=d.g[g];for(let C=0;C<y.length;C++)te(y[C]);delete d.g[g],d.h--}}this.G=null},tn.prototype.J=function(d,g,y,C){return this.i.add(String(d),g,!1,y,C)},tn.prototype.K=function(d,g,y,C){return this.i.add(String(d),g,!0,y,C)};function vf(d,g,y,C){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let V=!0;for(let U=0;U<g.length;++U){const $=g[U];if($&&!$.da&&$.capture==y){const le=$.listener,jt=$.ha||$.src;$.fa&&ni(d.i,$),V=le.call(jt,C)!==!1&&V}}return V&&!C.defaultPrevented}function Y6(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:a.setTimeout(d,g||0)}function TT(d){d.g=Y6(()=>{d.g=null,d.i&&(d.i=!1,TT(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class Q6 extends I{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:TT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tu(d){I.call(this),this.h=d,this.g={}}f(tu,I);var ET=[];function ST(d){Ee(d.g,function(g,y){this.g.hasOwnProperty(y)&&Dy(g)},d),d.g={}}tu.prototype.N=function(){tu.Z.N.call(this),ST(this)},tu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vy=a.JSON.stringify,X6=a.JSON.parse,J6=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function AT(){}function NT(){}var nu={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ly(){P.call(this,"d")}f(Ly,P);function Uy(){P.call(this,"c")}f(Uy,P);var Ea={},IT=null;function xf(){return IT=IT||new tn}Ea.Ia="serverreachability";function RT(d){P.call(this,Ea.Ia,d)}f(RT,P);function su(d){const g=xf();hn(g,new RT(g))}Ea.STAT_EVENT="statevent";function CT(d,g){P.call(this,Ea.STAT_EVENT,d),this.stat=g}f(CT,P);function fn(d){const g=xf();hn(g,new CT(g,d))}Ea.Ja="timingevent";function jT(d,g){P.call(this,Ea.Ja,d),this.size=g}f(jT,P);function ru(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function iu(){this.g=!0}iu.prototype.ua=function(){this.g=!1};function Z6(d,g,y,C,V,U){d.info(function(){if(d.g)if(U){var $="",le=U.split("&");for(let De=0;De<le.length;De++){var jt=le[De].split("=");if(jt.length>1){const Vt=jt[0];jt=jt[1];const Os=Vt.split("_");$=Os.length>=2&&Os[1]=="type"?$+(Vt+"="+jt+"&"):$+(Vt+"=redacted&")}}}else $=null;else $=U;return"XMLHTTP REQ ("+C+") [attempt "+V+"]: "+g+`
`+y+`
`+$})}function eV(d,g,y,C,V,U,$){d.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+V+"]: "+g+`
`+y+`
`+U+" "+$})}function Bo(d,g,y,C){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+nV(d,y)+(C?" "+C:"")})}function tV(d,g){d.info(function(){return"TIMEOUT: "+g})}iu.prototype.info=function(){};function nV(d,g){if(!d.g)return g;if(!g)return null;try{const U=JSON.parse(g);if(U){for(d=0;d<U.length;d++)if(Array.isArray(U[d])){var y=U[d];if(!(y.length<2)){var C=y[1];if(Array.isArray(C)&&!(C.length<1)){var V=C[0];if(V!="noop"&&V!="stop"&&V!="close")for(let $=1;$<C.length;$++)C[$]=""}}}}return Vy(U)}catch{return g}}var _f={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},PT={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},kT;function zy(){}f(zy,AT),zy.prototype.g=function(){return new XMLHttpRequest},kT=new zy;function au(d){return encodeURIComponent(String(d))}function sV(d){var g=1;d=d.split(":");const y=[];for(;g>0&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function si(d,g,y,C){this.j=d,this.i=g,this.l=y,this.S=C||1,this.V=new tu(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new DT}function DT(){this.i=null,this.g="",this.h=!1}var MT={},Fy={};function By(d,g,y){d.M=1,d.A=wf(Ms(g)),d.u=y,d.R=!0,OT(d,null)}function OT(d,g){d.F=Date.now(),bf(d),d.B=Ms(d.A);var y=d.B,C=d.S;Array.isArray(C)||(C=[String(C)]),YT(y.i,"t",C),d.C=0,y=d.j.L,d.h=new DT,d.g=fE(d.j,y?g:null,!d.u),d.P>0&&(d.O=new Q6(u(d.Y,d,d.g),d.P)),g=d.V,y=d.g,C=d.ba;var V="readystatechange";Array.isArray(V)||(V&&(ET[0]=V.toString()),V=ET);for(let U=0;U<V.length;U++){const $=xT(y,V[U],C||g.handleEvent,!1,g.h||g);if(!$)break;g.g[$.key]=$}g=d.J?wa(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),su(),Z6(d.i,d.v,d.B,d.l,d.S,d.u)}si.prototype.ba=function(d){d=d.target;const g=this.O;g&&ai(d)==3?g.j():this.Y(d)},si.prototype.Y=function(d){try{if(d==this.g)e:{const le=ai(this.g),jt=this.g.ya(),De=this.g.ca();if(!(le<3)&&(le!=3||this.g&&(this.h.h||this.g.la()||nE(this.g)))){this.K||le!=4||jt==7||(jt==8||De<=0?su(3):su(2)),qy(this);var g=this.g.ca();this.X=g;var y=rV(this);if(this.o=g==200,eV(this.i,this.v,this.B,this.l,this.S,le,g),this.o){if(this.U&&!this.L){t:{if(this.g){var C,V=this.g;if((C=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(C)){var U=C;break t}}U=null}if(d=U)Bo(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Hy(this,d);else{this.o=!1,this.m=3,fn(12),Sa(this),ou(this);break e}}if(this.R){d=!0;let Vt;for(;!this.K&&this.C<y.length;)if(Vt=iV(this,y),Vt==Fy){le==4&&(this.m=4,fn(14),d=!1),Bo(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==MT){this.m=4,fn(15),Bo(this.i,this.l,y,"[Invalid Chunk]"),d=!1;break}else Bo(this.i,this.l,Vt,null),Hy(this,Vt);if(VT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),le!=4||y.length!=0||this.h.h||(this.m=1,fn(16),d=!1),this.o=this.o&&d,!d)Bo(this.i,this.l,y,"[Invalid Chunked Response]"),Sa(this),ou(this);else if(y.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),Jy($),$.P=!0,fn(11))}}else Bo(this.i,this.l,y,null),Hy(this,y);le==4&&Sa(this),this.o&&!this.K&&(le==4?cE(this.j,this):(this.o=!1,bf(this)))}else xV(this.g),g==400&&y.indexOf("Unknown SID")>0?(this.m=3,fn(12)):(this.m=0,fn(13)),Sa(this),ou(this)}}}catch{}finally{}};function rV(d){if(!VT(d))return d.g.la();const g=nE(d.g);if(g==="")return"";let y="";const C=g.length,V=ai(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Sa(d),ou(d),"";d.h.i=new a.TextDecoder}for(let U=0;U<C;U++)d.h.h=!0,y+=d.h.i.decode(g[U],{stream:!(V&&U==C-1)});return g.length=0,d.h.g+=y,d.C=0,d.h.g}function VT(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function iV(d,g){var y=d.C,C=g.indexOf(`
`,y);return C==-1?Fy:(y=Number(g.substring(y,C)),isNaN(y)?MT:(C+=1,C+y>g.length?Fy:(g=g.slice(C,C+y),d.C=C+y,g)))}si.prototype.cancel=function(){this.K=!0,Sa(this)};function bf(d){d.T=Date.now()+d.H,LT(d,d.H)}function LT(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=ru(u(d.aa,d),g)}function qy(d){d.D&&(a.clearTimeout(d.D),d.D=null)}si.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(tV(this.i,this.B),this.M!=2&&(su(),fn(17)),Sa(this),this.m=2,ou(this)):LT(this,this.T-d)};function ou(d){d.j.I==0||d.K||cE(d.j,d)}function Sa(d){qy(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,ST(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function Hy(d,g){try{var y=d.j;if(y.I!=0&&(y.g==d||Gy(y.h,d))){if(!d.L&&Gy(y.h,d)&&y.I==3){try{var C=y.Ba.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var V=C;if(V[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<d.F)Nf(y),Sf(y);else break e;Xy(y),fn(18)}}else y.xa=V[1],0<y.xa-y.K&&V[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=ru(u(y.Va,y),6e3));FT(y.h)<=1&&y.ta&&(y.ta=void 0)}else Na(y,11)}else if((d.L||y.g==d)&&Nf(y),!j(g))for(V=y.Ba.g.parse(g),g=0;g<V.length;g++){let De=V[g];const Vt=De[0];if(!(Vt<=y.K))if(y.K=Vt,De=De[1],y.I==2)if(De[0]=="c"){y.M=De[1],y.ba=De[2];const Os=De[3];Os!=null&&(y.ka=Os,y.j.info("VER="+y.ka));const Ia=De[4];Ia!=null&&(y.za=Ia,y.j.info("SVER="+y.za));const oi=De[5];oi!=null&&typeof oi=="number"&&oi>0&&(C=1.5*oi,y.O=C,y.j.info("backChannelRequestTimeoutMs_="+C)),C=y;const li=d.g;if(li){const Rf=li.g?li.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rf){var U=C.h;U.g||Rf.indexOf("spdy")==-1&&Rf.indexOf("quic")==-1&&Rf.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&($y(U,U.h),U.h=null))}if(C.G){const Zy=li.g?li.g.getResponseHeader("X-HTTP-Session-Id"):null;Zy&&(C.wa=Zy,qe(C.J,C.G,Zy))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-d.F,y.j.info("Handshake RTT: "+y.T+"ms")),C=y;var $=d;if(C.na=hE(C,C.L?C.ba:null,C.W),$.L){BT(C.h,$);var le=$,jt=C.O;jt&&(le.H=jt),le.D&&(qy(le),bf(le)),C.g=$}else oE(C);y.i.length>0&&Af(y)}else De[0]!="stop"&&De[0]!="close"||Na(y,7);else y.I==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?Na(y,7):Qy(y):De[0]!="noop"&&y.l&&y.l.qa(De),y.A=0)}}su(4)}catch{}}var aV=class{constructor(d,g){this.g=d,this.map=g}};function UT(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zT(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function FT(d){return d.h?1:d.g?d.g.size:0}function Gy(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function $y(d,g){d.g?d.g.add(g):d.h=g}function BT(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}UT.prototype.cancel=function(){if(this.i=qT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function qT(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const y of d.g.values())g=g.concat(y.G);return g}return p(d.i)}var HT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oV(d,g){if(d){d=d.split("&");for(let y=0;y<d.length;y++){const C=d[y].indexOf("=");let V,U=null;C>=0?(V=d[y].substring(0,C),U=d[y].substring(C+1)):V=d[y],g(V,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function ri(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof ri?(this.l=d.l,lu(this,d.j),this.o=d.o,this.g=d.g,cu(this,d.u),this.h=d.h,Ky(this,QT(d.i)),this.m=d.m):d&&(g=String(d).match(HT))?(this.l=!1,lu(this,g[1]||"",!0),this.o=uu(g[2]||""),this.g=uu(g[3]||"",!0),cu(this,g[4]),this.h=uu(g[5]||"",!0),Ky(this,g[6]||"",!0),this.m=uu(g[7]||"")):(this.l=!1,this.i=new hu(null,this.l))}ri.prototype.toString=function(){const d=[];var g=this.j;g&&d.push(du(g,GT,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push(du(g,GT,!0),"@"),d.push(au(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&d.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(du(y,y.charAt(0)=="/"?uV:cV,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",du(y,hV)),d.join("")},ri.prototype.resolve=function(d){const g=Ms(this);let y=!!d.j;y?lu(g,d.j):y=!!d.o,y?g.o=d.o:y=!!d.g,y?g.g=d.g:y=d.u!=null;var C=d.h;if(y)cu(g,d.u);else if(y=!!d.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var V=g.h.lastIndexOf("/");V!=-1&&(C=g.h.slice(0,V+1)+C)}if(V=C,V==".."||V==".")C="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){C=V.lastIndexOf("/",0)==0,V=V.split("/");const U=[];for(let $=0;$<V.length;){const le=V[$++];le=="."?C&&$==V.length&&U.push(""):le==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),C&&$==V.length&&U.push("")):(U.push(le),C=!0)}C=U.join("/")}else C=V}return y?g.h=C:y=d.i.toString()!=="",y?Ky(g,QT(d.i)):y=!!d.m,y&&(g.m=d.m),g};function Ms(d){return new ri(d)}function lu(d,g,y){d.j=y?uu(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function cu(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function Ky(d,g,y){g instanceof hu?(d.i=g,fV(d.i,d.l)):(y||(g=du(g,dV)),d.i=new hu(g,d.l))}function qe(d,g,y){d.i.set(g,y)}function wf(d){return qe(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function uu(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function du(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,lV),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function lV(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var GT=/[#\/\?@]/g,cV=/[#\?:]/g,uV=/[#\?]/g,dV=/[#\?@]/g,hV=/#/g;function hu(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Aa(d){d.g||(d.g=new Map,d.h=0,d.i&&oV(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=hu.prototype,t.add=function(d,g){Aa(this),this.i=null,d=qo(this,d);let y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function $T(d,g){Aa(d),g=qo(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function KT(d,g){return Aa(d),g=qo(d,g),d.g.has(g)}t.forEach=function(d,g){Aa(this),this.g.forEach(function(y,C){y.forEach(function(V){d.call(g,V,C,this)},this)},this)};function WT(d,g){Aa(d);let y=[];if(typeof g=="string")KT(d,g)&&(y=y.concat(d.g.get(qo(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)y=y.concat(d[g]);return y}t.set=function(d,g){return Aa(this),this.i=null,d=qo(this,d),KT(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=WT(this,d),d.length>0?String(d[0]):g):g};function YT(d,g,y){$T(d,g),y.length>0&&(d.i=null,d.g.set(qo(d,g),p(y)),d.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(let C=0;C<g.length;C++){var y=g[C];const V=au(y);y=WT(this,y);for(let U=0;U<y.length;U++){let $=V;y[U]!==""&&($+="="+au(y[U])),d.push($)}}return this.i=d.join("&")};function QT(d){const g=new hu;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function qo(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function fV(d,g){g&&!d.j&&(Aa(d),d.i=null,d.g.forEach(function(y,C){const V=C.toLowerCase();C!=V&&($T(this,C),YT(this,V,y))},d)),d.j=g}function mV(d,g){const y=new iu;if(a.Image){const C=new Image;C.onload=h(ii,y,"TestLoadImage: loaded",!0,g,C),C.onerror=h(ii,y,"TestLoadImage: error",!1,g,C),C.onabort=h(ii,y,"TestLoadImage: abort",!1,g,C),C.ontimeout=h(ii,y,"TestLoadImage: timeout",!1,g,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=d}else g(!1)}function pV(d,g){const y=new iu,C=new AbortController,V=setTimeout(()=>{C.abort(),ii(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:C.signal}).then(U=>{clearTimeout(V),U.ok?ii(y,"TestPingServer: ok",!0,g):ii(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),ii(y,"TestPingServer: error",!1,g)})}function ii(d,g,y,C,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),C(y)}catch{}}function gV(){this.g=new J6}function Wy(d){this.i=d.Sb||null,this.h=d.ab||!1}f(Wy,AT),Wy.prototype.g=function(){return new Tf(this.i,this.h)};function Tf(d,g){tn.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Tf,tn),t=Tf.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,mu(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||a).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fu(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,mu(this)),this.g&&(this.readyState=3,mu(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;XT(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function XT(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?fu(this):mu(this),this.readyState==3&&XT(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,fu(this))},t.Na=function(d){this.g&&(this.response=d,fu(this))},t.ga=function(){this.g&&fu(this)};function fu(d){d.readyState=4,d.l=null,d.j=null,d.B=null,mu(d)}t.setRequestHeader=function(d,g){this.A.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function mu(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Tf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function JT(d){let g="";return Ee(d,function(y,C){g+=C,g+=":",g+=y,g+=`\r
`}),g}function Yy(d,g,y){e:{for(C in y){var C=!1;break e}C=!0}C||(y=JT(y),typeof d=="string"?y!=null&&au(y):qe(d,g,y))}function lt(d){tn.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(lt,tn);var yV=/^https?$/i,vV=["POST","PUT"];t=lt.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,g,y,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():kT.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(U){ZT(this,U);return}if(d=y||"",y=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var V in C)y.set(V,C[V]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const U of C.keys())y.set(U,C.get(U));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),V=a.FormData&&d instanceof a.FormData,!(Array.prototype.indexOf.call(vV,g,void 0)>=0)||C||V||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,$]of y)this.g.setRequestHeader(U,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(U){ZT(this,U)}};function ZT(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,eE(d),Ef(d)}function eE(d){d.A||(d.A=!0,hn(d,"complete"),hn(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,hn(this,"complete"),hn(this,"abort"),Ef(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ef(this,!0)),lt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?tE(this):this.Xa())},t.Xa=function(){tE(this)};function tE(d){if(d.h&&typeof i<"u"){if(d.v&&ai(d)==4)setTimeout(d.Ca.bind(d),0);else if(hn(d,"readystatechange"),ai(d)==4){d.h=!1;try{const U=d.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var C;if(C=U===0){let $=String(d.D).match(HT)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),C=!yV.test($?$.toLowerCase():"")}y=C}if(y)hn(d,"complete"),hn(d,"success");else{d.o=6;try{var V=ai(d)>2?d.g.statusText:""}catch{V=""}d.l=V+" ["+d.ca()+"]",eE(d)}}finally{Ef(d)}}}}function Ef(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const y=d.g;d.g=null,g||hn(d,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ai(d){return d.g?d.g.readyState:0}t.ca=function(){try{return ai(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),X6(g)}};function nE(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function xV(d){const g={};d=(d.g&&ai(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<d.length;C++){if(j(d[C]))continue;var y=sV(d[C]);const V=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=g[V]||[];g[V]=U,U.push(y)}Je(g,function(C){return C.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pu(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function sE(d){this.za=0,this.i=[],this.j=new iu,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pu("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pu("baseRetryDelayMs",5e3,d),this.Za=pu("retryDelaySeedMs",1e4,d),this.Ta=pu("forwardChannelMaxRetries",2,d),this.va=pu("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new UT(d&&d.concurrentRequestLimit),this.Ba=new gV,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=sE.prototype,t.ka=8,t.I=1,t.connect=function(d,g,y,C){fn(0),this.W=d,this.H=g||{},y&&C!==void 0&&(this.H.OSID=y,this.H.OAID=C),this.F=this.X,this.J=hE(this,null,this.W),Af(this)};function Qy(d){if(rE(d),d.I==3){var g=d.V++,y=Ms(d.J);if(qe(y,"SID",d.M),qe(y,"RID",g),qe(y,"TYPE","terminate"),gu(d,y),g=new si(d,d.j,g),g.M=2,g.A=wf(Ms(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(g.A.toString(),"")}catch{}!y&&a.Image&&(new Image().src=g.A,y=!0),y||(g.g=fE(g.j,null),g.g.ea(g.A)),g.F=Date.now(),bf(g)}dE(d)}function Sf(d){d.g&&(Jy(d),d.g.cancel(),d.g=null)}function rE(d){Sf(d),d.v&&(a.clearTimeout(d.v),d.v=null),Nf(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&a.clearTimeout(d.m),d.m=null)}function Af(d){if(!zT(d.h)&&!d.m){d.m=!0;var g=d.Ea;D||E(),M||(D(),M=!0),A.add(g,d),d.D=0}}function _V(d,g){return FT(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=ru(u(d.Ea,d,g),uE(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const V=new si(this,this.j,d);let U=this.o;if(this.U&&(U?(U=wa(U),Fo(U,this.U)):U=this.U),this.u!==null||this.R||(V.J=U,U=null),this.S)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var C=this.i[y];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(g+=C,g>4096){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=aE(this,V,g),y=Ms(this.J),qe(y,"RID",d),qe(y,"CVER",22),this.G&&qe(y,"X-HTTP-Session-Id",this.G),gu(this,y),U&&(this.R?g="headers="+au(JT(U))+"&"+g:this.u&&Yy(y,this.u,U)),$y(this.h,V),this.Ra&&qe(y,"TYPE","init"),this.S?(qe(y,"$req",g),qe(y,"SID","null"),V.U=!0,By(V,y,null)):By(V,y,g),this.I=2}}else this.I==3&&(d?iE(this,d):this.i.length==0||zT(this.h)||iE(this))};function iE(d,g){var y;g?y=g.l:y=d.V++;const C=Ms(d.J);qe(C,"SID",d.M),qe(C,"RID",y),qe(C,"AID",d.K),gu(d,C),d.u&&d.o&&Yy(C,d.u,d.o),y=new si(d,d.j,y,d.D+1),d.u===null&&(y.J=d.o),g&&(d.i=g.G.concat(d.i)),g=aE(d,y,1e3),y.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),$y(d.h,y),By(y,C,g)}function gu(d,g){d.H&&Ee(d.H,function(y,C){qe(g,C,y)}),d.l&&Ee({},function(y,C){qe(g,C,y)})}function aE(d,g,y){y=Math.min(d.i.length,y);const C=d.l?u(d.l.Ka,d.l,d):null;e:{var V=d.i;let le=-1;for(;;){const jt=["count="+y];le==-1?y>0?(le=V[0].g,jt.push("ofs="+le)):le=0:jt.push("ofs="+le);let De=!0;for(let Vt=0;Vt<y;Vt++){var U=V[Vt].g;const Os=V[Vt].map;if(U-=le,U<0)le=Math.max(0,V[Vt].g-100),De=!1;else try{U="req"+U+"_"||"";try{var $=Os instanceof Map?Os:Object.entries(Os);for(const[Ia,oi]of $){let li=oi;o(oi)&&(li=Vy(oi)),jt.push(U+Ia+"="+encodeURIComponent(li))}}catch(Ia){throw jt.push(U+"type="+encodeURIComponent("_badmap")),Ia}}catch{C&&C(Os)}}if(De){$=jt.join("&");break e}}$=void 0}return d=d.i.splice(0,y),g.G=d,$}function oE(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;D||E(),M||(D(),M=!0),A.add(g,d),d.A=0}}function Xy(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=ru(u(d.Da,d),uE(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,lE(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=ru(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,fn(10),Sf(this),lE(this))};function Jy(d){d.B!=null&&(a.clearTimeout(d.B),d.B=null)}function lE(d){d.g=new si(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=Ms(d.na);qe(g,"RID","rpc"),qe(g,"SID",d.M),qe(g,"AID",d.K),qe(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&qe(g,"TO",d.ia),qe(g,"TYPE","xmlhttp"),gu(d,g),d.u&&d.o&&Yy(g,d.u,d.o),d.O&&(d.g.H=d.O);var y=d.g;d=d.ba,y.M=1,y.A=wf(Ms(g)),y.u=null,y.R=!0,OT(y,d)}t.Va=function(){this.C!=null&&(this.C=null,Sf(this),Xy(this),fn(19))};function Nf(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function cE(d,g){var y=null;if(d.g==g){Nf(d),Jy(d),d.g=null;var C=2}else if(Gy(d.h,g))y=g.G,BT(d.h,g),C=1;else return;if(d.I!=0){if(g.o)if(C==1){y=g.u?g.u.length:0,g=Date.now()-g.F;var V=d.D;C=xf(),hn(C,new jT(C,y)),Af(d)}else oE(d);else if(V=g.m,V==3||V==0&&g.X>0||!(C==1&&_V(d,g)||C==2&&Xy(d)))switch(y&&y.length>0&&(g=d.h,g.i=g.i.concat(y)),V){case 1:Na(d,5);break;case 4:Na(d,10);break;case 3:Na(d,6);break;default:Na(d,2)}}}function uE(d,g){let y=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(y*=2),y*g}function Na(d,g){if(d.j.info("Error code "+g),g==2){var y=u(d.bb,d),C=d.Ua;const V=!C;C=new ri(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||lu(C,"https"),wf(C),V?mV(C.toString(),y):pV(C.toString(),y)}else fn(2);d.I=0,d.l&&d.l.pa(g),dE(d),rE(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),fn(2)):(this.j.info("Failed to ping google.com"),fn(1))};function dE(d){if(d.I=0,d.ja=[],d.l){const g=qT(d.h);(g.length!=0||d.i.length!=0)&&(_(d.ja,g),_(d.ja,d.i),d.h.i.length=0,p(d.i),d.i.length=0),d.l.oa()}}function hE(d,g,y){var C=y instanceof ri?Ms(y):new ri(y);if(C.g!="")g&&(C.g=g+"."+C.g),cu(C,C.u);else{var V=a.location;C=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;const U=new ri(null);C&&lu(U,C),g&&(U.g=g),V&&cu(U,V),y&&(U.h=y),C=U}return y=d.G,g=d.wa,y&&g&&qe(C,y,g),qe(C,"VER",d.ka),gu(d,C),C}function fE(d,g,y){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new lt(new Wy({ab:y})):new lt(d.ma),g.Fa(d.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mE(){}t=mE.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function If(){}If.prototype.g=function(d,g){return new Mn(d,g)};function Mn(d,g){tn.call(this),this.g=new sE(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!j(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!j(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Ho(this)}f(Mn,tn),Mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){Qy(this.g)},Mn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.v&&(y={},y.__data__=Vy(d),d=y);g.i.push(new aV(g.Ya++,d)),g.I==3&&Af(g)},Mn.prototype.N=function(){this.g.l=null,delete this.j,Qy(this.g),delete this.g,Mn.Z.N.call(this)};function pE(d){Ly.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}f(pE,Ly);function gE(){Uy.call(this),this.status=1}f(gE,Uy);function Ho(d){this.g=d}f(Ho,mE),Ho.prototype.ra=function(){hn(this.g,"a")},Ho.prototype.qa=function(d){hn(this.g,new pE(d))},Ho.prototype.pa=function(d){hn(this.g,new gE)},Ho.prototype.oa=function(){hn(this.g,"b")},If.prototype.createWebChannel=If.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,Qk=function(){return new If},Yk=function(){return xf()},Wk=Ea,Dx={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_f.NO_ERROR=0,_f.TIMEOUT=8,_f.HTTP_ERROR=6,Pm=_f,PT.COMPLETE="complete",Kk=PT,NT.EventType=nu,nu.OPEN="a",nu.CLOSE="b",nu.ERROR="c",nu.MESSAGE="d",tn.prototype.listen=tn.prototype.J,Ku=NT,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,$k=lt}).apply(typeof Wf<"u"?Wf:typeof self<"u"?self:typeof window<"u"?window:{});const VA="@firebase/firestore",LA="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new Mg("@firebase/firestore");function al(){return Zi.logLevel}function DH(t){Zi.setLogLevel(t)}function B(t,...e){if(Zi.logLevel<=he.DEBUG){const n=e.map(ww);Zi.debug(`Firestore (${qc}): ${t}`,...n)}}function yt(t,...e){if(Zi.logLevel<=he.ERROR){const n=e.map(ww);Zi.error(`Firestore (${qc}): ${t}`,...n)}}function ir(t,...e){if(Zi.logLevel<=he.WARN){const n=e.map(ww);Zi.warn(`Firestore (${qc}): ${t}`,...n)}}function ww(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,Xk(t,s,n)}function Xk(t,e,n){let s=`FIRESTORE (${qc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw yt(s),new Error(s)}function X(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||Xk(e,r,s)}function MH(t,e){t||Q(57014,e)}function K(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends cn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OH{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(zt.UNAUTHENTICATED))}shutdown(){}}class VH{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class LH{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){X(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new Zt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zt,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},o=c=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(X(typeof s.accessToken=="string",31837,{l:s}),new Jk(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return X(e===null||typeof e=="string",2055,{h:e}),new zt(e)}}class UH{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class zH{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new UH(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class UA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FH{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ke(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){X(this.o===void 0,3512);const s=i=>{i.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,B("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new UA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(X(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new UA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BH(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=BH(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function re(t,e){return t<e?-1:t>e?1:0}function Mx(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return Q0(r)===Q0(i)?re(r,i):Q0(r)?1:-1}return re(t.length,e.length)}const qH=55296,HH=57343;function Q0(t){const e=t.charCodeAt(0);return e>=qH&&e<=HH}function ic(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}function Zk(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="__name__";class Vs{constructor(e,n,s){n===void 0?n=0:n>e.length&&Q(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Q(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Vs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vs?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Vs.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return re(e.length,n.length)}static compareSegments(e,n){const s=Vs.isNumericId(e),r=Vs.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Vs.extractNumericId(e).compare(Vs.extractNumericId(n)):Mx(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bi.fromString(e.substring(4,e.length-2))}}class me extends Vs{construct(e,n,s){return new me(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new F(L.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new me(n)}static emptyPath(){return new me([])}}const GH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tt extends Vs{construct(e,n,s){return new tt(e,n,s)}static isValidIdentifier(e){return GH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zA}static keyField(){return new tt([zA])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new F(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let a=!1;for(;r<e.length;){const o=e[r];if(o==="\\"){if(r+1===e.length)throw new F(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new F(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else o==="`"?(a=!a,r++):o!=="."||a?(s+=o,r++):(i(),r++)}if(i(),a)throw new F(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tt(n)}static emptyPath(){return new tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(me.fromString(e))}static fromName(e){return new G(me.fromString(e).popFirst(5))}static empty(){return new G(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new me(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(t,e,n){if(!n)throw new F(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function eD(t,e,n,s){if(e===!0&&s===!0)throw new F(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function FA(t){if(!G.isDocumentKey(t))throw new F(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function BA(t){if(G.isDocumentKey(t))throw new F(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tD(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Kg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q(12329,{type:typeof t})}function be(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kg(t);throw new F(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function nD(t,e){if(e<=0)throw new F(L.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t,e){const n={typeString:t};return e&&(n.value=e),n}function Qh(t,e){if(!tD(t))throw new F(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const a=t[s];if(r&&typeof a!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new F(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=-62135596800,HA=1e6;class Se{static now(){return Se.fromMillis(Date.now())}static fromDate(e){return Se.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*HA);return new Se(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<qA)throw new F(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/HA}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Se._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qh(e,Se._jsonSchema))return new Se(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-qA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Se._jsonSchemaVersion="firestore/timestamp/1.0",Se._jsonSchema={type:It("string",Se._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Se(0,0))}static max(){return new Z(new Se(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=-1;class Mp{constructor(e,n,s,r){this.indexId=e,this.collectionGroup=n,this.fields=s,this.indexState=r}}function Ox(t){return t.fields.find(e=>e.kind===2)}function La(t){return t.fields.filter(e=>e.kind!==2)}Mp.UNKNOWN_ID=-1;class km{constructor(e,n){this.fieldPath=e,this.kind=n}}class ih{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ih(0,Zn.min())}}function sD(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=Z.fromTimestamp(s===1e9?new Se(n+1,0):new Se(n,s));return new Zn(r,G.empty(),e)}function rD(t){return new Zn(t.readTime,t.key,ac)}class Zn{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Zn(Z.min(),G.empty(),ac)}static max(){return new Zn(Z.max(),G.empty(),ac)}}function Sw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pa(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==iD)throw t;B("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,s)=>{n(e)})}static reject(e){return new O((n,s)=>{s(e)})}static waitFor(e){return new O((n,s)=>{let r=0,i=0,a=!1;e.forEach(o=>{++r,o.next(()=>{++i,a&&i===r&&n()},c=>s(c))}),a=!0,i===r&&n()})}static or(e){let n=O.resolve(!1);for(const s of e)n=n.next(r=>r?O.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new O((s,r)=>{const i=e.length,a=new Array(i);let o=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{a[u]=h,++o,o===i&&s(a)},h=>r(h))}})}static doWhile(e,n){return new O((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn="SimpleDb";class Wg{static open(e,n,s,r){try{return new Wg(n,e.transaction(r,s))}catch(i){throw new bd(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Zt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new bd(e,n.error)):this.S.resolve()},this.transaction.onerror=s=>{const r=Aw(s.target.error);this.S.reject(new bd(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(B(Vn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new KH(n)}}class Xs{static delete(e){return B(Vn,"Removing database:",e),qa(Gb().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Jd())return!1;if(Xs.F())return!0;const e=it(),n=Xs.M(e),s=0<n&&n<10,r=oD(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,n,s){this.name=e,this.version=n,this.N=s,this.B=null,Xs.M(it())===12.2&&yt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(B(Vn,"Opening database:",this.name),this.db=await new Promise((n,s)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=i=>{const a=i.target.result;n(a)},r.onblocked=()=>{s(new bd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=i=>{const a=i.target.error;a.name==="VersionError"?s(new F(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?s(new F(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):s(new bd(e,a))},r.onupgradeneeded=i=>{B(Vn,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.N.k(a,r.transaction,i.oldVersion,this.version).next(()=>{B(Vn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,s,r){const i=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=Wg.open(this.db,e,i?"readonly":"readwrite",s),c=r(o).next(u=>(o.C(),u)).catch(u=>(o.abort(u),O.reject(u))).toPromise();return c.catch(()=>{}),await o.D,c}catch(o){const c=o,u=c.name!=="FirebaseError"&&a<3;if(B(Vn,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function oD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class $H{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return qa(this.U.delete())}}class bd extends F{constructor(e,n){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ga(t){return t.name==="IndexedDbTransactionError"}class KH{constructor(e){this.store=e}put(e,n){let s;return n!==void 0?(B(Vn,"PUT",this.store.name,e,n),s=this.store.put(n,e)):(B(Vn,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),qa(s)}add(e){return B(Vn,"ADD",this.store.name,e,e),qa(this.store.add(e))}get(e){return qa(this.store.get(e)).next(n=>(n===void 0&&(n=null),B(Vn,"GET",this.store.name,e,n),n))}delete(e){return B(Vn,"DELETE",this.store.name,e),qa(this.store.delete(e))}count(){return B(Vn,"COUNT",this.store.name),qa(this.store.count())}J(e,n){const s=this.options(e,n),r=s.index?this.store.index(s.index):this.store;if(typeof r.getAll=="function"){const i=r.getAll(s.range);return new O((a,o)=>{i.onerror=c=>{o(c.target.error)},i.onsuccess=c=>{a(c.target.result)}})}{const i=this.cursor(s),a=[];return this.H(i,(o,c)=>{a.push(c)}).next(()=>a)}}Y(e,n){const s=this.store.getAll(e,n===null?void 0:n);return new O((r,i)=>{s.onerror=a=>{i(a.target.error)},s.onsuccess=a=>{r(a.target.result)}})}Z(e,n){B(Vn,"DELETE ALL",this.store.name);const s=this.options(e,n);s.X=!1;const r=this.cursor(s);return this.H(r,(i,a,o)=>o.delete())}ee(e,n){let s;n?s=e:(s={},n=e);const r=this.cursor(s);return this.H(r,n)}te(e){const n=this.cursor({});return new O((s,r)=>{n.onerror=i=>{const a=Aw(i.target.error);r(a)},n.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():s()}):s()}})}H(e,n){const s=[];return new O((r,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void r();const c=new $H(o),u=n(o.primaryKey,o.value,c);if(u instanceof O){const h=u.catch(f=>(c.done(),O.reject(f)));s.push(h)}c.isDone?r():c.G===null?o.continue():o.continue(c.G)}}).next(()=>O.waitFor(s))}options(e,n){let s;return e!==void 0&&(typeof e=="string"?s=e:n=e),{index:s,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,n):s.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function qa(t){return new O((e,n)=>{t.onsuccess=s=>{const r=s.target.result;e(r)},t.onerror=s=>{const r=Aw(s.target.error);n(r)}})}let GA=!1;function Aw(t){const e=Xs.M(it());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const s=new F("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return GA||(GA=!0,setTimeout(()=>{throw s},0)),s}}return t}const wd="IndexBackfiller";class WH{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){B(wd,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();B(wd,`Documents written: ${n}`)}catch(n){ga(n)?B(wd,"Ignoring IndexedDB error during index backfill: ",n):await pa(n)}await this.re(6e4)})}}class YH{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const s=new Set;let r=n,i=!0;return O.doWhile(()=>i===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!s.has(a))return B(wd,`Processing collection: ${a}`),this.oe(e,a,r).next(o=>{r-=o,s.add(a)});i=!1})).next(()=>n-r)}oe(e,n,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,s).next(i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this._e(r,i)).next(o=>(B(wd,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>a.size)}))}_e(e,n){let s=e;return n.changes.forEach((r,i)=>{const a=rD(i);Sw(a,s)>0&&(s=a)}),new Zn(s.readTime,s.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}In.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=-1;function Xh(t){return t==null}function ah(t){return t===0&&1/t==-1/0}function lD(t){return typeof t=="number"&&Number.isInteger(t)&&!ah(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="";function un(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$A(e)),e=QH(t.get(n),e);return $A(e)}function QH(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case Op:n+="";break;default:n+=i}}return n}function $A(t){return t+Op+""}function Ws(t){const e=t.length;if(X(e>=2,64408,{path:t}),e===2)return X(t.charAt(0)===Op&&t.charAt(1)==="",56145,{path:t}),me.emptyPath();const n=e-2,s=[];let r="";for(let i=0;i<e;){const a=t.indexOf(Op,i);switch((a<0||a>n)&&Q(50515,{path:t}),t.charAt(a+1)){case"":const o=t.substring(i,a);let c;r.length===0?c=o:(r+=o,c=r,r=""),s.push(c);break;case"":r+=t.substring(i,a),r+="\0";break;case"":r+=t.substring(i,a+1);break;default:Q(61167,{path:t})}i=a+2}return new me(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua="remoteDocuments",Jh="owner",Wo="owner",oh="mutationQueues",XH="userId",Es="mutations",KA="batchId",Ya="userMutationsIndex",WA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t,e){return[t,un(e)]}function cD(t,e,n){return[t,un(e),n]}const JH={},oc="documentMutations",Vp="remoteDocumentsV14",ZH=["prefixPath","collectionGroup","readTime","documentId"],Mm="documentKeyIndex",eG=["prefixPath","collectionGroup","documentId"],uD="collectionGroupIndex",tG=["collectionGroup","readTime","prefixPath","documentId"],lh="remoteDocumentGlobal",Vx="remoteDocumentGlobalKey",lc="targets",dD="queryTargetsIndex",nG=["canonicalId","targetId"],cc="targetDocuments",sG=["targetId","path"],Nw="documentTargetsIndex",rG=["path","targetId"],Lp="targetGlobalKey",ao="targetGlobal",ch="collectionParents",iG=["collectionId","parent"],uc="clientMetadata",aG="clientId",Yg="bundles",oG="bundleId",Qg="namedQueries",lG="name",Iw="indexConfiguration",cG="indexId",Lx="collectionGroupIndex",uG="collectionGroup",Td="indexState",dG=["indexId","uid"],hD="sequenceNumberIndex",hG=["uid","sequenceNumber"],Ed="indexEntries",fG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fD="documentKeyIndex",mG=["indexId","uid","orderedDocumentKey"],Xg="documentOverlays",pG=["userId","collectionPath","documentId"],Ux="collectionPathOverlayIndex",gG=["userId","collectionPath","largestBatchId"],mD="collectionGroupOverlayIndex",yG=["userId","collectionGroup","largestBatchId"],Rw="globals",vG="name",pD=[oh,Es,oc,Ua,lc,Jh,ao,cc,uc,lh,ch,Yg,Qg],xG=[...pD,Xg],gD=[oh,Es,oc,Vp,lc,Jh,ao,cc,uc,lh,ch,Yg,Qg,Xg],yD=gD,Cw=[...yD,Iw,Td,Ed],_G=Cw,vD=[...Cw,Rw],bG=vD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx extends aD{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Ot(t,e){const n=K(t);return Xs.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ya(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){this.comparator=e,this.root=n||$t.EMPTY}insert(e,n){return new Be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new Be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yf(this.root,e,this.comparator,!0)}}class Yf{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??$t.RED,this.left=r??$t.EMPTY,this.right=i??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new $t(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return $t.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new $t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new QA(this.data.getIterator())}getIteratorFrom(e){return new QA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ce)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ce(this.comparator);return n.data=e,n}}class QA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Yo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new Rn([])}unionWith(e){let n=new Ce(tt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ic(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wG(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new _D("Invalid base64 string: "+i):i}}(e);return new ht(n)}static fromUint8Array(e){const n=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const TG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(t){if(X(!!t,39018),typeof t=="string"){let e=0;const n=TG.exec(t);if(X(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qr(t){return typeof t=="string"?ht.fromBase64String(t):ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD="server_timestamp",wD="__type__",TD="__previous_value__",ED="__local_write_time__";function Jg(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[wD])==null?void 0:s.stringValue)===bD}function Zg(t){const e=t.mapValue.fields[TD];return Jg(e)?Zg(e):e}function uh(t){const e=Br(t.mapValue.fields[ED].timestampValue);return new Se(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EG{constructor(e,n,s,r,i,a,o,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Fx="(default)";class ea{constructor(e,n){this.projectId=e,this.database=n||Fx}static empty(){return new ea("","")}get isDefaultDatabase(){return this.database===Fx}isEqual(e){return e instanceof ea&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="__type__",SD="__max__",Ri={mapValue:{fields:{__type__:{stringValue:SD}}}},Pw="__vector__",dc="value",Om={nullValue:"NULL_VALUE"};function ta(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jg(t)?4:AD(t)?9007199254740991:ey(t)?10:11:Q(28295,{value:t})}function ar(t,e){if(t===e)return!0;const n=ta(t);if(n!==ta(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return uh(t).isEqual(uh(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Br(r.timestampValue),o=Br(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return qr(r.bytesValue).isEqual(qr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return et(r.geoPointValue.latitude)===et(i.geoPointValue.latitude)&&et(r.geoPointValue.longitude)===et(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return et(r.integerValue)===et(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=et(r.doubleValue),o=et(i.doubleValue);return a===o?ah(a)===ah(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return ic(t.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:case 11:return function(r,i){const a=r.mapValue.fields||{},o=i.mapValue.fields||{};if(YA(a)!==YA(o))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(o[c]===void 0||!ar(a[c],o[c])))return!1;return!0}(t,e);default:return Q(52216,{left:t})}}function dh(t,e){return(t.values||[]).find(n=>ar(n,e))!==void 0}function na(t,e){if(t===e)return 0;const n=ta(t),s=ta(e);if(n!==s)return re(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(i,a){const o=et(i.integerValue||i.doubleValue),c=et(a.integerValue||a.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(t,e);case 3:return XA(t.timestampValue,e.timestampValue);case 4:return XA(uh(t),uh(e));case 5:return Mx(t.stringValue,e.stringValue);case 6:return function(i,a){const o=qr(i),c=qr(a);return o.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const o=i.split("/"),c=a.split("/");for(let u=0;u<o.length&&u<c.length;u++){const h=re(o[u],c[u]);if(h!==0)return h}return re(o.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const o=re(et(i.latitude),et(a.latitude));return o!==0?o:re(et(i.longitude),et(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return JA(t.arrayValue,e.arrayValue);case 10:return function(i,a){var m,p,_,w;const o=i.fields||{},c=a.fields||{},u=(m=o[dc])==null?void 0:m.arrayValue,h=(p=c[dc])==null?void 0:p.arrayValue,f=re(((_=u==null?void 0:u.values)==null?void 0:_.length)||0,((w=h==null?void 0:h.values)==null?void 0:w.length)||0);return f!==0?f:JA(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Ri.mapValue&&a===Ri.mapValue)return 0;if(i===Ri.mapValue)return 1;if(a===Ri.mapValue)return-1;const o=i.fields||{},c=Object.keys(o),u=a.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=Mx(c[f],h[f]);if(m!==0)return m;const p=na(o[c[f]],u[h[f]]);if(p!==0)return p}return re(c.length,h.length)}(t.mapValue,e.mapValue);default:throw Q(23264,{he:n})}}function XA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);const n=Br(t),s=Br(e),r=re(n.seconds,s.seconds);return r!==0?r:re(n.nanos,s.nanos)}function JA(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=na(n[r],s[r]);if(i)return i}return re(n.length,s.length)}function hc(t){return Bx(t)}function Bx(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Br(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Bx(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const a of s)i?i=!1:r+=",",r+=`${a}:${Bx(n.fields[a])}`;return r+"}"}(t.mapValue):Q(61005,{value:t})}function Vm(t){switch(ta(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zg(t);return e?16+Vm(e):16;case 5:return 2*t.stringValue.length;case 6:return qr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+Vm(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return ya(s.fields,(i,a)=>{r+=i.length+Vm(a)}),r}(t.mapValue);default:throw Q(13486,{value:t})}}function vo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function qx(t){return!!t&&"integerValue"in t}function hh(t){return!!t&&"arrayValue"in t}function ZA(t){return!!t&&"nullValue"in t}function eN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lm(t){return!!t&&"mapValue"in t}function ey(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[jw])==null?void 0:s.stringValue)===Pw}function Sd(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ya(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Sd(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sd(t.arrayValue.values[n]);return e}return{...t}}function AD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===SD}const ND={mapValue:{fields:{[jw]:{stringValue:Pw},[dc]:{arrayValue:{}}}}};function SG(t){return"nullValue"in t?Om:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?vo(ea.empty(),G.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?ey(t)?ND:{mapValue:{}}:Q(35942,{value:t})}function AG(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?vo(ea.empty(),G.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?ND:"mapValue"in t?ey(t)?{mapValue:{}}:Ri:Q(61959,{value:t})}function tN(t,e){const n=na(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function nN(t,e){const n=na(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.value=e}static empty(){return new Yt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Lm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sd(n)}setAll(e){let n=tt.emptyPath(),s={},r=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=o.popLast()}a?s[o.lastSegment()]=Sd(a):r.push(o.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Lm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Lm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){ya(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Yt(Sd(this.value))}}function ID(t){const e=[];return ya(t.fields,(n,s)=>{const r=new tt([n]);if(Lm(s)){const i=ID(s.mapValue).fields;if(i.length===0)e.push(r);else for(const a of i)e.push(r.child(a))}else e.push(r)}),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n,s,r,i,a,o){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new $e(e,0,Z.min(),Z.min(),Z.min(),Yt.empty(),0)}static newFoundDocument(e,n,s,r){return new $e(e,1,n,Z.min(),s,r,0)}static newNoDocument(e,n){return new $e(e,2,n,Z.min(),Z.min(),Yt.empty(),0)}static newUnknownDocument(e,n){return new $e(e,3,n,Z.min(),Z.min(),Yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $e&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.position=e,this.inclusive=n}}function sN(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],a=t.position[r];if(i.field.isKeyField()?s=G.comparator(G.fromName(a.referenceValue),n.key):s=na(a,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function rN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ar(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n="asc"){this.field=e,this.dir=n}}function NG(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{}class ge extends RD{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new IG(e,n,s):n==="array-contains"?new jG(e,s):n==="in"?new MD(e,s):n==="not-in"?new PG(e,s):n==="array-contains-any"?new kG(e,s):new ge(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new RG(e,s):new CG(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(na(n,this.value)):n!==null&&ta(this.value)===ta(n)&&this.matchesComparison(na(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Re extends RD{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Re(e,n)}matches(e){return fc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fc(t){return t.op==="and"}function Hx(t){return t.op==="or"}function kw(t){return CD(t)&&fc(t)}function CD(t){for(const e of t.filters)if(e instanceof Re)return!1;return!0}function Gx(t){if(t instanceof ge)return t.field.canonicalString()+t.op.toString()+hc(t.value);if(kw(t))return t.filters.map(e=>Gx(e)).join(",");{const e=t.filters.map(n=>Gx(n)).join(",");return`${t.op}(${e})`}}function jD(t,e){return t instanceof ge?function(s,r){return r instanceof ge&&s.op===r.op&&s.field.isEqual(r.field)&&ar(s.value,r.value)}(t,e):t instanceof Re?function(s,r){return r instanceof Re&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,a,o)=>i&&jD(a,r.filters[o]),!0):!1}(t,e):void Q(19439)}function PD(t,e){const n=t.filters.concat(e);return Re.create(n,t.op)}function kD(t){return t instanceof ge?function(n){return`${n.field.canonicalString()} ${n.op} ${hc(n.value)}`}(t):t instanceof Re?function(n){return n.op.toString()+" {"+n.getFilters().map(kD).join(" ,")+"}"}(t):"Filter"}class IG extends ge{constructor(e,n,s){super(e,n,s),this.key=G.fromName(s.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class RG extends ge{constructor(e,n){super(e,"in",n),this.keys=DD("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class CG extends ge{constructor(e,n){super(e,"not-in",n),this.keys=DD("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function DD(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(s=>G.fromName(s.referenceValue))}class jG extends ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hh(n)&&dh(n.arrayValue,this.value)}}class MD extends ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&dh(this.value.arrayValue,n)}}class PG extends ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(dh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!dh(this.value.arrayValue,n)}}class kG extends ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>dh(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DG{constructor(e,n=null,s=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}}function $x(t,e=null,n=[],s=[],r=null,i=null,a=null){return new DG(t,e,n,s,r,i,a)}function xo(t){const e=K(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Gx(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>hc(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>hc(s)).join(",")),e.Te=n}return e.Te}function Zh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!NG(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rN(t.startAt,e.startAt)&&rN(t.endAt,e.endAt)}function Up(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function zp(t,e){return t.filters.filter(n=>n instanceof ge&&n.field.isEqual(e))}function iN(t,e,n){let s=Om,r=!0;for(const i of zp(t,e)){let a=Om,o=!0;switch(i.op){case"<":case"<=":a=SG(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,o=!1;break;case"!=":case"not-in":a=Om}tN({value:s,inclusive:r},{value:a,inclusive:o})<0&&(s=a,r=o)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=n.position[i];tN({value:s,inclusive:r},{value:a,inclusive:n.inclusive})<0&&(s=a,r=n.inclusive);break}}return{value:s,inclusive:r}}function aN(t,e,n){let s=Ri,r=!0;for(const i of zp(t,e)){let a=Ri,o=!0;switch(i.op){case">=":case">":a=AG(i.value),o=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,o=!1;break;case"!=":case"not-in":a=Ri}nN({value:s,inclusive:r},{value:a,inclusive:o})>0&&(s=a,r=o)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=n.position[i];nN({value:s,inclusive:r},{value:a,inclusive:n.inclusive})>0&&(s=a,r=n.inclusive);break}}return{value:s,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n=null,s=[],r=[],i=null,a="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function OD(t,e,n,s,r,i,a,o){return new Xr(t,e,n,s,r,i,a,o)}function Hc(t){return new Xr(t)}function oN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Dw(t){return t.collectionGroup!==null}function zl(t){const e=K(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Ce(tt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new fh(i,s))}),n.has(tt.keyField().canonicalString())||e.Ie.push(new fh(tt.keyField(),s))}return e.Ie}function _n(t){const e=K(t);return e.Ee||(e.Ee=MG(e,zl(t))),e.Ee}function MG(t,e){if(t.limitType==="F")return $x(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new fh(r.field,i)});const n=t.endAt?new sa(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new sa(t.startAt.position,t.startAt.inclusive):null;return $x(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Kx(t,e){const n=t.filters.concat([e]);return new Xr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fp(t,e,n){return new Xr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ef(t,e){return Zh(_n(t),_n(e))&&t.limitType===e.limitType}function VD(t){return`${xo(_n(t))}|lt:${t.limitType}`}function ol(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>kD(r)).join(", ")}]`),Xh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>hc(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>hc(r)).join(",")),`Target(${s})`}(_n(t))}; limitType=${t.limitType})`}function tf(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):G.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of zl(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(a,o,c){const u=sN(a,o,c);return a.inclusive?u<=0:u<0}(s.startAt,zl(s),r)||s.endAt&&!function(a,o,c){const u=sN(a,o,c);return a.inclusive?u>=0:u>0}(s.endAt,zl(s),r))}(t,e)}function LD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function UD(t){return(e,n)=>{let s=!1;for(const r of zl(t)){const i=OG(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function OG(t,e,n){const s=t.field.isKeyField()?G.comparator(e.key,n.key):function(i,a,o){const c=a.data.field(i),u=o.data.field(i);return c!==null&&u!==null?na(c,u):Q(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Q(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ya(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return xD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VG=new Be(G.comparator);function Cn(){return VG}const zD=new Be(G.comparator);function Wu(...t){let e=zD;for(const n of t)e=e.insert(n.key,n);return e}function FD(t){let e=zD;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Ys(){return Ad()}function BD(){return Ad()}function Ad(){return new Jr(t=>t.toString(),(t,e)=>t.isEqual(e))}const LG=new Be(G.comparator),UG=new Ce(G.comparator);function oe(...t){let e=UG;for(const n of t)e=e.add(n);return e}const zG=new Ce(re);function Mw(){return zG}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ah(e)?"-0":e}}function qD(t){return{integerValue:""+t}}function HD(t,e){return lD(e)?qD(e):Ow(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(){this._=void 0}}function FG(t,e,n){return t instanceof mc?function(r,i){const a={fields:{[wD]:{stringValue:bD},[ED]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Jg(i)&&(i=Zg(i)),i&&(a.fields[TD]=i),{mapValue:a}}(n,e):t instanceof _o?$D(t,e):t instanceof bo?KD(t,e):function(r,i){const a=GD(r,i),o=lN(a)+lN(r.Ae);return qx(a)&&qx(r.Ae)?qD(o):Ow(r.serializer,o)}(t,e)}function BG(t,e,n){return t instanceof _o?$D(t,e):t instanceof bo?KD(t,e):n}function GD(t,e){return t instanceof pc?function(s){return qx(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class mc extends ty{}class _o extends ty{constructor(e){super(),this.elements=e}}function $D(t,e){const n=WD(e);for(const s of t.elements)n.some(r=>ar(r,s))||n.push(s);return{arrayValue:{values:n}}}class bo extends ty{constructor(e){super(),this.elements=e}}function KD(t,e){let n=WD(e);for(const s of t.elements)n=n.filter(r=>!ar(r,s));return{arrayValue:{values:n}}}class pc extends ty{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function lN(t){return et(t.integerValue||t.doubleValue)}function WD(t){return hh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n){this.field=e,this.transform=n}}function qG(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof _o&&r instanceof _o||s instanceof bo&&r instanceof bo?ic(s.elements,r.elements,ar):s instanceof pc&&r instanceof pc?ar(s.Ae,r.Ae):s instanceof mc&&r instanceof mc}(t.transform,e.transform)}class HG{constructor(e,n){this.version=e,this.transformResults=n}}class nt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nt}static exists(e){return new nt(void 0,e)}static updateTime(e){return new nt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Um(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ny{}function YD(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $c(t.key,nt.none()):new Gc(t.key,t.data,nt.none());{const n=t.data,s=Yt.empty();let r=new Ce(tt.comparator);for(let i of e.fields)if(!r.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?s.delete(i):s.set(i,a),r=r.add(i)}return new Zr(t.key,s,new Rn(r.toArray()),nt.none())}}function GG(t,e,n){t instanceof Gc?function(r,i,a){const o=r.value.clone(),c=uN(r.fieldTransforms,i,a.transformResults);o.setAll(c),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Zr?function(r,i,a){if(!Um(r.precondition,i))return void i.convertToUnknownDocument(a.version);const o=uN(r.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(QD(r)),c.setAll(o),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(r,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Nd(t,e,n,s){return t instanceof Gc?function(i,a,o,c){if(!Um(i.precondition,a))return o;const u=i.value.clone(),h=dN(i.fieldTransforms,c,a);return u.setAll(h),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,s):t instanceof Zr?function(i,a,o,c){if(!Um(i.precondition,a))return o;const u=dN(i.fieldTransforms,c,a),h=a.data;return h.setAll(QD(i)),h.setAll(u),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,s):function(i,a,o){return Um(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function $G(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=GD(s.transform,r||null);i!=null&&(n===null&&(n=Yt.empty()),n.set(s.field,i))}return n||null}function cN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&ic(s,r,(i,a)=>qG(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Gc extends ny{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Zr extends ny{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function QD(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function uN(t,e,n){const s=new Map;X(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],a=i.transform,o=e.data.field(i.field);s.set(i.field,BG(a,o,n[r]))}return s}function dN(t,e,n){const s=new Map;for(const r of t){const i=r.transform,a=n.data.field(r.field);s.set(r.field,FG(i,a,e))}return s}class $c extends ny{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vw extends ny{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&GG(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Nd(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Nd(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=BD();return this.mutations.forEach(r=>{const i=e.get(r.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=n.has(r.key)?null:o;const c=YD(a,o);c!==null&&s.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(Z.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&ic(this.mutations,e.mutations,(n,s)=>cN(n,s))&&ic(this.baseMutations,e.baseMutations,(n,s)=>cN(n,s))}}class Uw{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){X(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=function(){return LG}();const i=e.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,s[a].version);return new Uw(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KG{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,xe;function XD(t){switch(t){case L.OK:return Q(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return Q(15467,{code:t})}}function JD(t){if(t===void 0)return yt("GRPC error has no .code"),L.UNKNOWN;switch(t){case wt.OK:return L.OK;case wt.CANCELLED:return L.CANCELLED;case wt.UNKNOWN:return L.UNKNOWN;case wt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case wt.INTERNAL:return L.INTERNAL;case wt.UNAVAILABLE:return L.UNAVAILABLE;case wt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case wt.NOT_FOUND:return L.NOT_FOUND;case wt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case wt.ABORTED:return L.ABORTED;case wt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case wt.DATA_LOSS:return L.DATA_LOSS;default:return Q(39323,{code:t})}}(xe=wt||(wt={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WG=new Bi([4294967295,4294967295],0);function hN(t){const e=ZD().encode(t),n=new Gk;return n.update(e),new Uint8Array(n.digest())}function fN(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Bi([n,s],0),new Bi([r,i],0)]}class Fw{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Yu(`Invalid padding: ${n}`);if(s<0)throw new Yu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Yu(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Yu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Bi.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(Bi.fromNumber(s)));return r.compare(WG)===1&&(r=new Bi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=hN(e),[s,r]=fN(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(s,r,i);if(!this.we(a))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Fw(i,r,n);return s.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const n=hN(e),[s,r]=fN(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(s,r,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Yu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,rf.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new sf(Z.min(),r,new Be(re),Cn(),oe())}}class rf{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new rf(s,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class eM{constructor(e,n){this.targetId=e,this.Ce=n}}class tM{constructor(e,n,s=ht.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class mN{constructor(){this.ve=0,this.Fe=pN(),this.Me=ht.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=oe(),n=oe(),s=oe();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:Q(38017,{changeType:i})}}),new rf(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=pN()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,X(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class YG{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cn(),this.Je=Qf(),this.He=Qf(),this.Ye=new Be(re)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Up(i))if(s===0){const a=new G(i.path);this.et(n,a,$e.newNoDocument(a,Z.min()))}else X(s===1,20013,{expectedCount:s});else{const a=this._t(n);if(a!==s){const o=this.ut(e),c=o?this.ct(o,e,a):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let a,o;try{a=qr(s).toUint8Array()}catch(c){if(c instanceof _D)return ir("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new Fw(a,r,i)}catch(c){return ir(c instanceof Yu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.et(n,i,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const o=this.ot(a);if(o){if(i.current&&Up(o.target)){const c=new G(o.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,$e.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let s=oe();this.He.forEach((i,a)=>{let o=!0;a.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(s=s.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const r=new sf(e,n,this.Ye,this.je,s);return this.je=Cn(),this.Je=Qf(),this.He=Qf(),this.Ye=new Be(re),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new mN,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ce(re),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ce(re),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mN),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Qf(){return new Be(G.comparator)}function pN(){return new Be(G.comparator)}const QG={asc:"ASCENDING",desc:"DESCENDING"},XG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JG={and:"AND",or:"OR"};class ZG{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wx(t,e){return t.useProto3Json||Xh(e)?e:{value:e}}function gc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function e$(t,e){return gc(t,e.toTimestamp())}function xt(t){return X(!!t,49232),Z.fromTimestamp(function(n){const s=Br(n);return new Se(s.seconds,s.nanos)}(t))}function Bw(t,e){return Yx(t,e).canonicalString()}function Yx(t,e){const n=function(r){return new me(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function sM(t){const e=me.fromString(t);return X(fM(e),10190,{key:e.toString()}),e}function mh(t,e){return Bw(t.databaseId,e.path)}function Js(t,e){const n=sM(e);if(n.get(1)!==t.databaseId.projectId)throw new F(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(aM(n))}function rM(t,e){return Bw(t.databaseId,e)}function iM(t){const e=sM(t);return e.length===4?me.emptyPath():aM(e)}function Qx(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aM(t){return X(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function gN(t,e,n){return{name:mh(t,e),fields:n.value.mapValue.fields}}function oM(t,e,n){const s=Js(t,e.name),r=xt(e.updateTime),i=e.createTime?xt(e.createTime):Z.min(),a=new Yt({mapValue:{fields:e.fields}}),o=$e.newFoundDocument(s,r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function t$(t,e){return"found"in e?function(s,r){X(!!r.found,43571),r.found.name,r.found.updateTime;const i=Js(s,r.found.name),a=xt(r.found.updateTime),o=r.found.createTime?xt(r.found.createTime):Z.min(),c=new Yt({mapValue:{fields:r.found.fields}});return $e.newFoundDocument(i,a,o,c)}(t,e):"missing"in e?function(s,r){X(!!r.missing,3894),X(!!r.readTime,22933);const i=Js(s,r.missing),a=xt(r.readTime);return $e.newNoDocument(i,a)}(t,e):Q(7234,{result:e})}function n$(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Q(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(X(h===void 0||typeof h=="string",58123),ht.fromBase64String(h||"")):(X(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ht.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const h=u.code===void 0?L.UNKNOWN:JD(u.code);return new F(h,u.message||"")}(a);n=new tM(s,r,i,o||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Js(t,s.document.name),i=xt(s.document.updateTime),a=s.document.createTime?xt(s.document.createTime):Z.min(),o=new Yt({mapValue:{fields:s.document.fields}}),c=$e.newFoundDocument(r,i,a,o),u=s.targetIds||[],h=s.removedTargetIds||[];n=new zm(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Js(t,s.document),i=s.readTime?xt(s.readTime):Z.min(),a=$e.newNoDocument(r,i),o=s.removedTargetIds||[];n=new zm([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Js(t,s.document),i=s.removedTargetIds||[];n=new zm([],i,r,null)}else{if(!("filter"in e))return Q(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,a=new KG(r,i),o=s.targetId;n=new eM(o,a)}}return n}function ph(t,e){let n;if(e instanceof Gc)n={update:gN(t,e.key,e.value)};else if(e instanceof $c)n={delete:mh(t,e.key)};else if(e instanceof Zr)n={update:gN(t,e.key,e.data),updateMask:l$(e.fieldMask)};else{if(!(e instanceof Vw))return Q(16599,{Vt:e.type});n={verify:mh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,a){const o=a.transform;if(o instanceof mc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof _o)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof bo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof pc)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw Q(20930,{transform:a.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:e$(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Q(27497)}(t,e.precondition)),n}function Xx(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?nt.updateTime(xt(i.updateTime)):i.exists!==void 0?nt.exists(i.exists):nt.none()}(e.currentDocument):nt.none(),s=e.updateTransforms?e.updateTransforms.map(r=>function(a,o){let c=null;if("setToServerValue"in o)X(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),c=new mc;else if("appendMissingElements"in o){const h=o.appendMissingElements.values||[];c=new _o(h)}else if("removeAllFromArray"in o){const h=o.removeAllFromArray.values||[];c=new bo(h)}else"increment"in o?c=new pc(a,o.increment):Q(16584,{proto:o});const u=tt.fromServerFormat(o.fieldPath);return new nf(u,c)}(t,r)):[];if(e.update){e.update.name;const r=Js(t,e.update.name),i=new Yt({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(c){const u=c.fieldPaths||[];return new Rn(u.map(h=>tt.fromServerFormat(h)))}(e.updateMask);return new Zr(r,i,a,n,s)}return new Gc(r,i,n,s)}if(e.delete){const r=Js(t,e.delete);return new $c(r,n)}if(e.verify){const r=Js(t,e.verify);return new Vw(r,n)}return Q(1463,{proto:e})}function s$(t,e){return t&&t.length>0?(X(e!==void 0,14353),t.map(n=>function(r,i){let a=r.updateTime?xt(r.updateTime):xt(i);return a.isEqual(Z.min())&&(a=xt(i)),new HG(a,r.transformResults||[])}(n,e))):[]}function lM(t,e){return{documents:[rM(t,e.path)]}}function cM(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=rM(t,r);const i=function(u){if(u.length!==0)return hM(Re.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:ll(m.field),direction:i$(m.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Wx(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:r}}function uM(t){let e=iM(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){X(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=dM(f);return m instanceof Re&&kw(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(m=>function(_){return new fh(cl(_.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m))}(n.orderBy));let o=null;n.limit&&(o=function(f){let m;return m=typeof f=="object"?f.value:f,Xh(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,p=f.values||[];return new sa(p,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,p=f.values||[];return new sa(p,m)}(n.endAt)),OD(e,r,a,i,o,"F",c,u)}function r$(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dM(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=cl(n.unaryFilter.field);return ge.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=cl(n.unaryFilter.field);return ge.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=cl(n.unaryFilter.field);return ge.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=cl(n.unaryFilter.field);return ge.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(t):t.fieldFilter!==void 0?function(n){return ge.create(cl(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Re.create(n.compositeFilter.filters.map(s=>dM(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(t):Q(30097,{filter:t})}function i$(t){return QG[t]}function a$(t){return XG[t]}function o$(t){return JG[t]}function ll(t){return{fieldPath:t.canonicalString()}}function cl(t){return tt.fromServerFormat(t.fieldPath)}function hM(t){return t instanceof ge?function(n){if(n.op==="=="){if(eN(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NAN"}};if(ZA(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(eN(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NOT_NAN"}};if(ZA(n.value))return{unaryFilter:{field:ll(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ll(n.field),op:a$(n.op),value:n.value}}}(t):t instanceof Re?function(n){const s=n.getFilters().map(r=>hM(r));return s.length===1?s[0]:{compositeFilter:{op:o$(n.op),filters:s}}}(t):Q(54877,{filter:t})}function l$(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n,s,r,i=Z.min(),a=Z.min(),o=ht.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e){this.yt=e}}function c$(t,e){let n;if(e.document)n=oM(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=G.fromSegments(e.noDocument.path),r=To(e.noDocument.readTime);n=$e.newNoDocument(s,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Q(56709);{const s=G.fromSegments(e.unknownDocument.path),r=To(e.unknownDocument.version);n=$e.newUnknownDocument(s,r)}}return e.readTime&&n.setReadTime(function(r){const i=new Se(r[0],r[1]);return Z.fromTimestamp(i)}(e.readTime)),n}function yN(t,e){const n=e.key,s={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Bp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=function(i,a){return{name:mh(i,a.key),fields:a.data.value.mapValue.fields,updateTime:gc(i,a.version.toTimestamp()),createTime:gc(i,a.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())s.noDocument={path:n.path.toArray(),readTime:wo(e.version)};else{if(!e.isUnknownDocument())return Q(57904,{document:e});s.unknownDocument={path:n.path.toArray(),version:wo(e.version)}}return s}function Bp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function wo(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function To(t){const e=new Se(t.seconds,t.nanoseconds);return Z.fromTimestamp(e)}function Ha(t,e){const n=(e.baseMutations||[]).map(i=>Xx(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const o=e.mutations[i+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const s=e.mutations.map(i=>Xx(t.yt,i)),r=Se.fromMillis(e.localWriteTimeMs);return new Lw(e.batchId,r,n,s)}function Qu(t){const e=To(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?To(t.lastLimboFreeSnapshotVersion):Z.min();let s;return s=function(i){return i.documents!==void 0}(t.query)?function(i){const a=i.documents.length;return X(a===1,1966,{count:a}),_n(Hc(iM(i.documents[0])))}(t.query):function(i){return _n(uM(i))}(t.query),new wr(s,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ht.fromBase64String(t.resumeToken))}function pM(t,e){const n=wo(e.snapshotVersion),s=wo(e.lastLimboFreeSnapshotVersion);let r;r=Up(e.target)?lM(t.yt,e.target):cM(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xo(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:r}}function qw(t){const e=uM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fp(e,e.limit,"L"):e}function X0(t,e){return new zw(e.largestBatchId,Xx(t.yt,e.overlayMutation))}function vN(t,e){const n=e.path.lastSegment();return[t,un(e.path.popLast()),n]}function xN(t,e,n,s){return{indexId:t,uid:e,sequenceNumber:n,readTime:wo(s.readTime),documentKey:un(s.documentKey.path),largestBatchId:s.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u${getBundleMetadata(e,n){return _N(e).get(n).next(s=>{if(s)return function(i){return{id:i.bundleId,createTime:To(i.createTime),version:i.version}}(s)})}saveBundleMetadata(e,n){return _N(e).put(function(r){return{bundleId:r.id,createTime:wo(xt(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return bN(e).get(n).next(s=>{if(s)return function(i){return{name:i.name,query:qw(i.bundledQuery),readTime:To(i.readTime)}}(s)})}saveNamedQuery(e,n){return bN(e).put(function(r){return{name:r.name,readTime:wo(xt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function _N(t){return Ot(t,Yg)}function bN(t){return Ot(t,Qg)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const s=n.uid||"";return new sy(e,s)}getOverlay(e,n){return Ru(e).get(vN(this.userId,n)).next(s=>s?X0(this.serializer,s):null)}getOverlays(e,n){const s=Ys();return O.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){const r=[];return s.forEach((i,a)=>{const o=new zw(n,a);r.push(this.St(e,o))}),O.waitFor(r)}removeOverlaysForBatchId(e,n,s){const r=new Set;n.forEach(a=>r.add(un(a.getCollectionPath())));const i=[];return r.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,s],[this.userId,a,s+1],!1,!0);i.push(Ru(e).Z(Ux,o))}),O.waitFor(i)}getOverlaysForCollection(e,n,s){const r=Ys(),i=un(n),a=IDBKeyRange.bound([this.userId,i,s],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Ru(e).J(Ux,a).next(o=>{for(const c of o){const u=X0(this.serializer,c);r.set(u.getKey(),u)}return r})}getOverlaysForCollectionGroup(e,n,s,r){const i=Ys();let a;const o=IDBKeyRange.bound([this.userId,n,s],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ru(e).ee({index:mD,range:o},(c,u,h)=>{const f=X0(this.serializer,u);i.size()<r||f.largestBatchId===a?(i.set(f.getKey(),f),a=f.largestBatchId):h.done()}).next(()=>i)}St(e,n){return Ru(e).put(function(r,i,a){const[o,c,u]=vN(i,a.mutation.key);return{userId:i,collectionPath:c,documentId:u,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:ph(r.yt,a.mutation)}}(this.serializer,this.userId,n))}}function Ru(t){return Ot(t,Xg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${bt(e){return Ot(e,Rw)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const s=n==null?void 0:n.value;return s?ht.fromUint8Array(s):ht.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(et(e.integerValue));else if("doubleValue"in e){const s=et(e.doubleValue);isNaN(s)?this.Ft(n,13):(this.Ft(n,15),ah(s)?n.Mt(0):n.Mt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Ft(n,20),typeof s=="string"&&(s=Br(s)),n.xt(`${s.seconds||""}`),n.Mt(s.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(qr(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const s=e.geoPointValue;this.Ft(n,45),n.Mt(s.latitude||0),n.Mt(s.longitude||0)}else"mapValue"in e?AD(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):ey(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Q(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const s=e.fields||{};this.Ft(n,55);for(const r of Object.keys(s))this.Ot(r,n),this.Ct(s[r],n)}kt(e,n){var a,o;const s=e.fields||{};this.Ft(n,53);const r=dc,i=((o=(a=s[r].arrayValue)==null?void 0:a.values)==null?void 0:o.length)||0;this.Ft(n,15),n.Mt(et(i)),this.Ot(r,n),this.Ct(s[r],n)}Qt(e,n){const s=e.values||[];this.Ft(n,50);for(const r of s)this.Ct(r,n)}Lt(e,n){this.Ft(n,37),G.fromName(e).path.forEach(s=>{this.Ft(n,60),this.Ut(s,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Ga.Kt=new Ga;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=255;function h$(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function wN(t){const e=64-function(s){let r=0;for(let i=0;i<8;++i){const a=h$(255&s[i]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}class f${constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.Gt(s.value),s=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let s=n.next();for(;!s.done;)this.Jt(s.value),s=n.next();this.Ht()}Yt(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.Gt(s);else if(s<2048)this.Gt(960|s>>>6),this.Gt(128|63&s);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s);else{const r=n.codePointAt(0);this.Gt(240|r>>>18),this.Gt(128|63&r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r)}}this.zt()}Zt(e){for(const n of e){const s=n.charCodeAt(0);if(s<128)this.Jt(s);else if(s<2048)this.Jt(960|s>>>6),this.Jt(128|63&s);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s);else{const r=n.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Ht()}Xt(e){const n=this.en(e),s=wN(n);this.tn(1+s),this.buffer[this.position++]=255&s;for(let r=n.length-s;r<n.length;++r)this.buffer[this.position++]=255&n[r]}nn(e){const n=this.en(e),s=wN(n);this.tn(1+s),this.buffer[this.position++]=~(255&s);for(let r=n.length-s;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}rn(){this.sn(Qo),this.sn(255)}_n(){this.an(Qo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),s=!!(128&n[0]);n[0]^=s?255:128;for(let r=1;r<n.length;++r)n[r]^=s?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Qo?(this.sn(Qo),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Qo?(this.an(Qo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let s=2*this.buffer.length;s<n&&(s=n);const r=new Uint8Array(s);r.set(this.buffer),this.buffer=r}}class m${constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class p${constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Cu{constructor(){this.cn=new f$,this.ln=new m$(this.cn),this.hn=new p$(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,n,s,r){this.Tn=e,this.In=n,this.En=s,this.dn=r}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,s=new Uint8Array(n);return s.set(this.dn,0),n!==e?s.set([0],this.dn.length):++s[s.length-1],new $a(this.Tn,this.In,this.En,s)}Rn(e,n,s){return{indexId:this.Tn,uid:e,arrayValue:Fm(this.En),directionalValue:Fm(this.dn),orderedDocumentKey:Fm(n),documentKey:s.path.toArray()}}Vn(e,n,s){const r=this.Rn(e,n,s);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function di(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=TN(t.En,e.En),n!==0?n:(n=TN(t.dn,e.dn),n!==0?n:G.comparator(t.In,e.In)))}function TN(t,e){for(let n=0;n<t.length&&n<e.length;++n){const s=t[n]-e[n];if(s!==0)return s}return t.length-e.length}function Fm(t){return PP()?function(n){let s="";for(let r=0;r<n.length;r++)s+=String.fromCharCode(n[r]);return s}(t):t}function EN(t){return typeof t!="string"?t:function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(t)}class SN{constructor(e){this.mn=new Ce((n,s)=>tt.comparator(n.field,s.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const s=n;s.isInequality()?this.mn=this.mn.add(s):this.gn.push(s)}}get pn(){return this.mn.size>1}yn(e){if(X(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Ox(e);if(n!==void 0&&!this.wn(n))return!1;const s=La(e);let r=new Set,i=0,a=0;for(;i<s.length&&this.wn(s[i]);++i)r=r.add(s[i].fieldPath.canonicalString());if(i===s.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!r.has(o.field.canonicalString())){const c=s[i];if(!this.Sn(o,c)||!this.bn(this.fn[a++],c))return!1}++i}for(;i<s.length;++i){const o=s[i];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new Ce(tt.comparator);const n=[];for(const s of this.gn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")n.push(new km(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),n.push(new km(s.field,0))}for(const s of this.fn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),n.push(new km(s.field,s.dir==="asc"?0:1)));return new Mp(Mp.UNKNOWN_ID,this.collectionId,n,ih.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===s}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(t){var n,s;if(X(t instanceof ge||t instanceof Re,20012),t instanceof ge){if(t instanceof MD){const r=((s=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:s.map(i=>ge.create(t.field,"==",i)))||[];return Re.create(r,"or")}return t}const e=t.filters.map(r=>gM(r));return Re.create(e,t.op)}function g$(t){if(t.getFilters().length===0)return[];const e=e_(gM(t));return X(yM(e),7391),Jx(e)||Zx(e)?[e]:e.getFilters()}function Jx(t){return t instanceof ge}function Zx(t){return t instanceof Re&&kw(t)}function yM(t){return Jx(t)||Zx(t)||function(n){if(n instanceof Re&&Hx(n)){for(const s of n.getFilters())if(!Jx(s)&&!Zx(s))return!1;return!0}return!1}(t)}function e_(t){if(X(t instanceof ge||t instanceof Re,34018),t instanceof ge)return t;if(t.filters.length===1)return e_(t.filters[0]);const e=t.filters.map(s=>e_(s));let n=Re.create(e,t.op);return n=qp(n),yM(n)?n:(X(n instanceof Re,64498),X(fc(n),40251),X(n.filters.length>1,57927),n.filters.reduce((s,r)=>Hw(s,r)))}function Hw(t,e){let n;return X(t instanceof ge||t instanceof Re,38388),X(e instanceof ge||e instanceof Re,25473),n=t instanceof ge?e instanceof ge?function(r,i){return Re.create([r,i],"and")}(t,e):AN(t,e):e instanceof ge?AN(e,t):function(r,i){if(X(r.filters.length>0&&i.filters.length>0,48005),fc(r)&&fc(i))return PD(r,i.getFilters());const a=Hx(r)?r:i,o=Hx(r)?i:r,c=a.filters.map(u=>Hw(u,o));return Re.create(c,"or")}(t,e),qp(n)}function AN(t,e){if(fc(e))return PD(e,t.getFilters());{const n=e.filters.map(s=>Hw(t,s));return Re.create(n,"or")}}function qp(t){if(X(t instanceof ge||t instanceof Re,11850),t instanceof ge)return t;const e=t.getFilters();if(e.length===1)return qp(e[0]);if(CD(t))return t;const n=e.map(r=>qp(r)),s=[];return n.forEach(r=>{r instanceof ge?s.push(r):r instanceof Re&&(r.op===t.op?s.push(...r.filters):s.push(r))}),s.length===1?s[0]:Re.create(s,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(){this.Cn=new Gw}addToCollectionParentIndex(e,n){return this.Cn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Zn.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Zn.min())}updateCollectionGroup(e,n,s){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class Gw{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Ce(me.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Ce(me.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN="IndexedDbIndexManager",Xf=new Uint8Array(0);class v${constructor(e,n){this.databaseId=n,this.vn=new Gw,this.Fn=new Jr(s=>xo(s),(s,r)=>Zh(s,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const s=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:s,parent:un(r)};return IN(e).put(i)}return O.resolve()}getCollectionParents(e,n){const s=[],r=IDBKeyRange.bound([n,""],[Zk(n),""],!1,!0);return IN(e).J(r).next(i=>{for(const a of i){if(a.collectionId!==n)break;s.push(Ws(a.parent))}return s})}addFieldIndex(e,n){const s=ju(e),r=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;const i=s.add(r);if(n.indexState){const a=Jo(e);return i.next(o=>{a.put(xN(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const s=ju(e),r=Jo(e),i=Xo(e);return s.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=ju(e),s=Xo(e),r=Jo(e);return n.Z().next(()=>s.Z()).next(()=>r.Z())}createTargetIndexes(e,n){return O.forEach(this.Mn(n),s=>this.getIndexType(e,s).next(r=>{if(r===0||r===1){const i=new SN(s).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const s=Xo(e);let r=!0;const i=new Map;return O.forEach(this.Mn(n),a=>this.xn(e,a).next(o=>{r&&(r=!!o),i.set(a,o)})).next(()=>{if(r){let a=oe();const o=[];return O.forEach(i,(c,u)=>{B(NN,`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(c)} to execute ${xo(n)}`);const h=function(b,R){const D=Ox(R);if(D===void 0)return null;for(const M of zp(b,D.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null}(u,c),f=function(b,R){const D=new Map;for(const M of La(R))for(const A of zp(b,M.fieldPath))switch(A.op){case"==":case"in":D.set(M.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return D.set(M.fieldPath.canonicalString(),A.value),Array.from(D.values())}return null}(u,c),m=function(b,R){const D=[];let M=!0;for(const A of La(R)){const E=A.kind===0?iN(b,A.fieldPath,b.startAt):aN(b,A.fieldPath,b.startAt);D.push(E.value),M&&(M=E.inclusive)}return new sa(D,M)}(u,c),p=function(b,R){const D=[];let M=!0;for(const A of La(R)){const E=A.kind===0?aN(b,A.fieldPath,b.endAt):iN(b,A.fieldPath,b.endAt);D.push(E.value),M&&(M=E.inclusive)}return new sa(D,M)}(u,c),_=this.On(c,u,m),w=this.On(c,u,p),T=this.Nn(c,u,f),x=this.Bn(c.indexId,h,_,m.inclusive,w,p.inclusive,T);return O.forEach(x,v=>s.Y(v,n.limit).next(b=>{b.forEach(R=>{const D=G.fromSegments(R.documentKey);a.has(D)||(a=a.add(D),o.push(D))})}))}).next(()=>o)}return O.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=g$(Re.create(e.filters,"and")).map(s=>$x(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,s,r,i,a,o){const c=(n!=null?n.length:1)*Math.max(s.length,i.length),u=c/(n!=null?n.length:1),h=[];for(let f=0;f<c;++f){const m=n?this.Ln(n[f/u]):Xf,p=this.kn(e,m,s[f%u],r),_=this.qn(e,m,i[f%u],a),w=o.map(T=>this.kn(e,m,T,!0));h.push(...this.createRange(p,_,w))}return h}kn(e,n,s,r){const i=new $a(e,G.empty(),n,s);return r?i:i.An()}qn(e,n,s,r){const i=new $a(e,G.empty(),n,s);return r?i.An():i}xn(e,n){const s=new SN(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(i=>{let a=null;for(const o of i)s.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,n){let s=2;const r=this.Mn(n);return O.forEach(r,i=>this.xn(e,i).next(a=>{a?s!==0&&a.fields.length<function(c){let u=new Ce(tt.comparator),h=!1;for(const f of c.filters)for(const m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:u=u.add(m.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)}(i)&&(s=1):s=0})).next(()=>function(a){return a.limit!==null}(n)&&r.length>1&&s===2?1:s)}Qn(e,n){const s=new Cu;for(const r of La(e)){const i=n.data.field(r.fieldPath);if(i==null)return null;const a=s.Pn(r.kind);Ga.Kt.Dt(i,a)}return s.un()}Ln(e){const n=new Cu;return Ga.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const s=new Cu;return Ga.Kt.Dt(vo(this.databaseId,n),s.Pn(function(i){const a=La(i);return a.length===0?0:a[a.length-1].kind}(e))),s.un()}Nn(e,n,s){if(s===null)return[];let r=[];r.push(new Cu);let i=0;for(const a of La(e)){const o=s[i++];for(const c of r)if(this.Un(n,a.fieldPath)&&hh(o))r=this.Kn(r,a,o);else{const u=c.Pn(a.kind);Ga.Kt.Dt(o,u)}}return this.Wn(r)}On(e,n,s){return this.Nn(e,n,s.position)}Wn(e){const n=[];for(let s=0;s<e.length;++s)n[s]=e[s].un();return n}Kn(e,n,s){const r=[...e],i=[];for(const a of s.arrayValue.values||[])for(const o of r){const c=new Cu;c.seed(o.un()),Ga.Kt.Dt(a,c.Pn(n.kind)),i.push(c)}return i}Un(e,n){return!!e.filters.find(s=>s instanceof ge&&s.field.isEqual(n)&&(s.op==="in"||s.op==="not-in"))}getFieldIndexes(e,n){const s=ju(e),r=Jo(e);return(n?s.J(Lx,IDBKeyRange.bound(n,n)):s.J()).next(i=>{const a=[];return O.forEach(i,o=>r.get([o.indexId,this.uid]).next(c=>{a.push(function(h,f){const m=f?new ih(f.sequenceNumber,new Zn(To(f.readTime),new G(Ws(f.documentKey)),f.largestBatchId)):ih.empty(),p=h.fields.map(([_,w])=>new km(tt.fromServerFormat(_),w));return new Mp(h.indexId,h.collectionGroup,p,m)}(o,c))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((s,r)=>{const i=s.indexState.sequenceNumber-r.indexState.sequenceNumber;return i!==0?i:re(s.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,s){const r=ju(e),i=Jo(e);return this.Gn(e).next(a=>r.J(Lx,IDBKeyRange.bound(n,n)).next(o=>O.forEach(o,c=>i.put(xN(c.indexId,this.uid,a,s)))))}updateIndexEntries(e,n){const s=new Map;return O.forEach(n,(r,i)=>{const a=s.get(r.collectionGroup);return(a?O.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(o=>(s.set(r.collectionGroup,o),O.forEach(o,c=>this.zn(e,r,c).next(u=>{const h=this.jn(i,c);return u.isEqual(h)?O.resolve():this.Jn(e,i,c,u,h)}))))})}Hn(e,n,s,r){return Xo(e).put(r.Rn(this.uid,this.$n(s,n.key),n.key))}Yn(e,n,s,r){return Xo(e).delete(r.Vn(this.uid,this.$n(s,n.key),n.key))}zn(e,n,s){const r=Xo(e);let i=new Ce(di);return r.ee({index:fD,range:IDBKeyRange.only([s.indexId,this.uid,Fm(this.$n(s,n))])},(a,o)=>{i=i.add(new $a(s.indexId,n,EN(o.arrayValue),EN(o.directionalValue)))}).next(()=>i)}jn(e,n){let s=new Ce(di);const r=this.Qn(n,e);if(r==null)return s;const i=Ox(n);if(i!=null){const a=e.data.field(i.fieldPath);if(hh(a))for(const o of a.arrayValue.values||[])s=s.add(new $a(n.indexId,e.key,this.Ln(o),r))}else s=s.add(new $a(n.indexId,e.key,Xf,r));return s}Jn(e,n,s,r,i){B(NN,"Updating index entries for document '%s'",n.key);const a=[];return function(c,u,h,f,m){const p=c.getIterator(),_=u.getIterator();let w=Yo(p),T=Yo(_);for(;w||T;){let x=!1,v=!1;if(w&&T){const b=h(w,T);b<0?v=!0:b>0&&(x=!0)}else w!=null?v=!0:x=!0;x?(f(T),T=Yo(_)):v?(m(w),w=Yo(p)):(w=Yo(p),T=Yo(_))}}(r,i,di,o=>{a.push(this.Hn(e,n,s,o))},o=>{a.push(this.Yn(e,n,s,o))}),O.waitFor(a)}Gn(e){let n=1;return Jo(e).ee({index:hD,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,r,i)=>{i.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,s){s=s.sort((a,o)=>di(a,o)).filter((a,o,c)=>!o||di(a,c[o-1])!==0);const r=[];r.push(e);for(const a of s){const o=di(a,e),c=di(a,n);if(o===0)r[0]=e.An();else if(o>0&&c<0)r.push(a),r.push(a.An());else if(c>0)break}r.push(n);const i=[];for(let a=0;a<r.length;a+=2){if(this.Zn(r[a],r[a+1]))return[];const o=r[a].Vn(this.uid,Xf,G.empty()),c=r[a+1].Vn(this.uid,Xf,G.empty());i.push(IDBKeyRange.bound(o,c))}return i}Zn(e,n){return di(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(RN)}getMinOffset(e,n){return O.mapArray(this.Mn(n),s=>this.xn(e,s).next(r=>r||Q(44426))).next(RN)}}function IN(t){return Ot(t,ch)}function Xo(t){return Ot(t,Ed)}function ju(t){return Ot(t,Iw)}function Jo(t){return Ot(t,Td)}function RN(t){X(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let s=1;s<t.length;s++){const r=t[s].indexState.offset;Sw(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Zn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vM=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xM(t,e,n){const s=t.store(Es),r=t.store(oc),i=[],a=IDBKeyRange.only(n.batchId);let o=0;const c=s.ee({range:a},(h,f,m)=>(o++,m.delete()));i.push(c.next(()=>{X(o===1,47070,{batchId:n.batchId})}));const u=[];for(const h of n.mutations){const f=cD(e,h.key.path,n.batchId);i.push(r.delete(f)),u.push(h.key)}return O.waitFor(i).next(()=>u)}function Hp(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Q(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(vM,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class ry{constructor(e,n,s,r){this.userId=e,this.serializer=n,this.indexManager=s,this.referenceDelegate=r,this.Xn={}}static wt(e,n,s,r){X(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new ry(i,n,s,r)}checkEmpty(e){let n=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hi(e).ee({index:Ya,range:s},(r,i,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,s,r){const i=ul(e),a=hi(e);return a.add({}).next(o=>{X(typeof o=="number",49019);const c=new Lw(o,n,s,r),u=function(p,_,w){const T=w.baseMutations.map(v=>ph(p.yt,v)),x=w.mutations.map(v=>ph(p.yt,v));return{userId:_,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:T,mutations:x}}(this.serializer,this.userId,c),h=[];let f=new Ce((m,p)=>re(m.canonicalString(),p.canonicalString()));for(const m of r){const p=cD(this.userId,m.key.path,o);f=f.add(m.key.path.popLast()),h.push(a.put(u)),h.push(i.put(p,JH))}return f.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Xn[o]=c.keys()}),O.waitFor(h).next(()=>c)})}lookupMutationBatch(e,n){return hi(e).get(n).next(s=>s?(X(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:n}),Ha(this.serializer,s)):null)}er(e,n){return this.Xn[n]?O.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(s=>{if(s){const r=s.keys();return this.Xn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=IDBKeyRange.lowerBound([this.userId,s]);let i=null;return hi(e).ee({index:Ya,range:r},(a,o,c)=>{o.userId===this.userId&&(X(o.batchId>=s,47524,{tr:s}),i=Ha(this.serializer,o)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=qi;return hi(e).ee({index:Ya,range:n,reverse:!0},(r,i,a)=>{s=i.batchId,a.done()}).next(()=>s)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,qi],[this.userId,Number.POSITIVE_INFINITY]);return hi(e).J(Ya,n).next(s=>s.map(r=>Ha(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const s=Dm(this.userId,n.path),r=IDBKeyRange.lowerBound(s),i=[];return ul(e).ee({range:r},(a,o,c)=>{const[u,h,f]=a,m=Ws(h);if(u===this.userId&&n.path.isEqual(m))return hi(e).get(f).next(p=>{if(!p)throw Q(61480,{nr:a,batchId:f});X(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:f}),i.push(Ha(this.serializer,p))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ce(re);const r=[];return n.forEach(i=>{const a=Dm(this.userId,i.path),o=IDBKeyRange.lowerBound(a),c=ul(e).ee({range:o},(u,h,f)=>{const[m,p,_]=u,w=Ws(p);m===this.userId&&i.path.isEqual(w)?s=s.add(_):f.done()});r.push(c)}),O.waitFor(r).next(()=>this.rr(e,s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1,i=Dm(this.userId,s),a=IDBKeyRange.lowerBound(i);let o=new Ce(re);return ul(e).ee({range:a},(c,u,h)=>{const[f,m,p]=c,_=Ws(m);f===this.userId&&s.isPrefixOf(_)?_.length===r&&(o=o.add(p)):h.done()}).next(()=>this.rr(e,o))}rr(e,n){const s=[],r=[];return n.forEach(i=>{r.push(hi(e).get(i).next(a=>{if(a===null)throw Q(35274,{batchId:i});X(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:i}),s.push(Ha(this.serializer,a))}))}),O.waitFor(r).next(()=>s)}removeMutationBatch(e,n){return xM(e.le,this.userId,n).next(s=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),O.forEach(s,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();const s=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),r=[];return ul(e).ee({range:s},(i,a,o)=>{if(i[0]===this.userId){const c=Ws(i[1]);r.push(c)}else o.done()}).next(()=>{X(r.length===0,56720,{sr:r.map(i=>i.canonicalString())})})})}containsKey(e,n){return _M(e,this.userId,n)}_r(e){return bM(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:qi,lastStreamToken:""})}}function _M(t,e,n){const s=Dm(e,n.path),r=s[1],i=IDBKeyRange.lowerBound(s);let a=!1;return ul(t).ee({range:i,X:!0},(o,c,u)=>{const[h,f,m]=o;h===e&&f===r&&(a=!0),u.done()}).next(()=>a)}function hi(t){return Ot(t,Es)}function ul(t){return Ot(t,oc)}function bM(t){return Ot(t,oh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Eo(0)}static cr(){return new Eo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const s=new Eo(n.highestTargetId);return n.highestTargetId=s.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>Z.fromTimestamp(new Se(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,s){return this.lr(e).next(r=>(r.highestListenSequenceNumber=n,s&&(r.lastRemoteSnapshotVersion=s.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.hr(e,r)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(s=>(s.targetCount+=1,this.Tr(n,s),this.hr(e,s))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Zo(e).delete(n.targetId)).next(()=>this.lr(e)).next(s=>(X(s.targetCount>0,8065),s.targetCount-=1,this.hr(e,s)))}removeTargets(e,n,s){let r=0;const i=[];return Zo(e).ee((a,o)=>{const c=Qu(o);c.sequenceNumber<=n&&s.get(c.targetId)===null&&(r++,i.push(this.removeTargetData(e,c)))}).next(()=>O.waitFor(i)).next(()=>r)}forEachTarget(e,n){return Zo(e).ee((s,r)=>{const i=Qu(r);n(i)})}lr(e){return jN(e).get(Lp).next(n=>(X(n!==null,2888),n))}hr(e,n){return jN(e).put(Lp,n)}Pr(e,n){return Zo(e).put(pM(this.serializer,n))}Tr(e,n){let s=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,s=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const s=xo(n),r=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let i=null;return Zo(e).ee({range:r,index:dD},(a,o,c)=>{const u=Qu(o);Zh(n,u.target)&&(i=u,c.done())}).next(()=>i)}addMatchingKeys(e,n,s){const r=[],i=wi(e);return n.forEach(a=>{const o=un(a.path);r.push(i.put({targetId:s,path:o})),r.push(this.referenceDelegate.addReference(e,s,a))}),O.waitFor(r)}removeMatchingKeys(e,n,s){const r=wi(e);return O.forEach(n,i=>{const a=un(i.path);return O.waitFor([r.delete([s,a]),this.referenceDelegate.removeReference(e,s,i)])})}removeMatchingKeysForTargetId(e,n){const s=wi(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return s.delete(r)}getMatchingKeysForTargetId(e,n){const s=IDBKeyRange.bound([n],[n+1],!1,!0),r=wi(e);let i=oe();return r.ee({range:s,X:!0},(a,o,c)=>{const u=Ws(a[1]),h=new G(u);i=i.add(h)}).next(()=>i)}containsKey(e,n){const s=un(n.path),r=IDBKeyRange.bound([s],[Zk(s)],!1,!0);let i=0;return wi(e).ee({index:Nw,X:!0,range:r},([a,o],c,u)=>{a!==0&&(i++,u.done())}).next(()=>i>0)}At(e,n){return Zo(e).get(n).next(s=>s?Qu(s):null)}}function Zo(t){return Ot(t,lc)}function jN(t){return Ot(t,ao)}function wi(t){return Ot(t,cc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="LruGarbageCollector",_$=1048576;function kN([t,e],[n,s]){const r=re(t,n);return r===0?re(e,s):r}class b${constructor(e){this.Ir=e,this.buffer=new Ce(kN),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();kN(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class wM{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){B(PN,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ga(n)?B(PN,"Ignoring IndexedDB error during garbage collection: ",n):await pa(n)}await this.Vr(3e5)})}}class w${constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return O.resolve(In.ce);const s=new b$(n);return this.mr.forEachTarget(e,r=>s.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>s.Ar(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(CN)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CN):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,a,o,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,a=Date.now(),this.nthSequenceNumber(e,r))).next(f=>(s=f,o=Date.now(),this.removeTargets(e,s,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(f=>(u=Date.now(),al()<=he.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${r} in `+(o-a)+`ms
	Removed ${i} targets in `+(c-o)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:f})))}}function TM(t,e){return new w$(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(e,n){this.db=e,this.garbageCollector=TM(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(s,r)=>n(r))}addReference(e,n,s){return Jf(e,s)}removeReference(e,n,s){return Jf(e,s)}removeTargets(e,n,s){return this.db.getTargetCache().removeTargets(e,n,s)}markPotentiallyOrphaned(e,n){return Jf(e,n)}br(e,n){return function(r,i){let a=!1;return bM(r).te(o=>_M(r,o,i).next(c=>(c&&(a=!0),O.resolve(!c)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Sr(e,(a,o)=>{if(o<=n){const c=this.br(e,a).next(u=>{if(!u)return i++,s.getEntry(e,a).next(()=>(s.removeEntry(a,Z.min()),wi(e).delete(function(f){return[0,un(f.path)]}(a))))});r.push(c)}}).next(()=>O.waitFor(r)).next(()=>s.apply(e)).next(()=>i)}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,n){return Jf(e,n)}Sr(e,n){const s=wi(e);let r,i=In.ce;return s.ee({index:Nw},([a,o],{path:c,sequenceNumber:u})=>{a===0?(i!==In.ce&&n(new G(Ws(r)),i),i=u,r=c):i=In.ce}).next(()=>{i!==In.ce&&n(new G(Ws(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Jf(t,e){return wi(t).put(function(s,r){return{targetId:0,path:un(s.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(){this.changes=new Jr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$e.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?O.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,s){return Ca(e).put(s)}removeEntry(e,n,s){return Ca(e).delete(function(i,a){const o=i.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Bp(a),o[o.length-1]]}(n,s))}updateMetadata(e,n){return this.getMetadata(e).next(s=>(s.byteSize+=n,this.Dr(e,s)))}getEntry(e,n){let s=$e.newInvalidDocument(n);return Ca(e).ee({index:Mm,range:IDBKeyRange.only(Pu(n))},(r,i)=>{s=this.Cr(n,i)}).next(()=>s)}vr(e,n){let s={size:0,document:$e.newInvalidDocument(n)};return Ca(e).ee({index:Mm,range:IDBKeyRange.only(Pu(n))},(r,i)=>{s={document:this.Cr(n,i),size:Hp(i)}}).next(()=>s)}getEntries(e,n){let s=Cn();return this.Fr(e,n,(r,i)=>{const a=this.Cr(r,i);s=s.insert(r,a)}).next(()=>s)}Mr(e,n){let s=Cn(),r=new Be(G.comparator);return this.Fr(e,n,(i,a)=>{const o=this.Cr(i,a);s=s.insert(i,o),r=r.insert(i,Hp(a))}).next(()=>({documents:s,Or:r}))}Fr(e,n,s){if(n.isEmpty())return O.resolve();let r=new Ce(ON);n.forEach(c=>r=r.add(c));const i=IDBKeyRange.bound(Pu(r.first()),Pu(r.last())),a=r.getIterator();let o=a.getNext();return Ca(e).ee({index:Mm,range:i},(c,u,h)=>{const f=G.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&ON(o,f)<0;)s(o,null),o=a.getNext();o&&o.isEqual(f)&&(s(o,u),o=a.hasNext()?a.getNext():null),o?h.j(Pu(o)):h.done()}).next(()=>{for(;o;)s(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,s,r,i){const a=n.path,o=[a.popLast().toArray(),a.lastSegment(),Bp(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],c=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ca(e).J(IDBKeyRange.bound(o,c,!0)).next(u=>{i==null||i.incrementDocumentReadCount(u.length);let h=Cn();for(const f of u){const m=this.Cr(G.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(tf(n,m)||r.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,s,r){let i=Cn();const a=MN(n,s),o=MN(n,Zn.max());return Ca(e).ee({index:uD,range:IDBKeyRange.bound(a,o,!0)},(c,u,h)=>{const f=this.Cr(G.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(f.key,f),i.size===r&&h.done()}).next(()=>i)}newChangeBuffer(e){return new S$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return DN(e).get(Vx).next(n=>(X(!!n,20021),n))}Dr(e,n){return DN(e).put(Vx,n)}Cr(e,n){if(n){const s=c$(this.serializer,n);if(!(s.isNoDocument()&&s.version.isEqual(Z.min())))return s}return $e.newInvalidDocument(e)}}function SM(t){return new E$(t)}class S$ extends EM{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Jr(s=>s.toString(),(s,r)=>s.isEqual(r))}applyChanges(e){const n=[];let s=0,r=new Ce((i,a)=>re(i.canonicalString(),a.canonicalString()));return this.changes.forEach((i,a)=>{const o=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,o.readTime)),a.isValidDocument()){const c=yN(this.Nr.serializer,a);r=r.add(i.path.popLast());const u=Hp(c);s+=u-o.size,n.push(this.Nr.addEntry(e,i,c))}else if(s-=o.size,this.trackRemovals){const c=yN(this.Nr.serializer,a.convertToNoDocument(Z.min()));n.push(this.Nr.addEntry(e,i,c))}}),r.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,s)),O.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(s=>(this.Br.set(n,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:s,Or:r})=>(r.forEach((i,a)=>{this.Br.set(i,{size:a,readTime:s.get(i).readTime})}),s))}}function DN(t){return Ot(t,lh)}function Ca(t){return Ot(t,Vp)}function Pu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function MN(t,e){const n=e.documentKey.path.toArray();return[t,Bp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ON(t,e){const n=t.path.toArray(),s=e.path.toArray();let r=0;for(let i=0;i<n.length-2&&i<s.length-2;++i)if(r=re(n[i],s[i]),r)return r;return r=re(n.length,s.length),r||(r=re(n[n.length-2],s[s.length-2]),r||re(n[n.length-1],s[s.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Nd(s.mutation,r,Rn.empty(),Se.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,oe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=oe()){const r=Ys();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let a=Wu();return i.forEach((o,c)=>{a=a.insert(o,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const s=Ys();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,oe()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,s,r){let i=Cn();const a=Ad(),o=function(){return Ad()}();return n.forEach((c,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof Zr)?i=i.insert(u.key,u):h!==void 0?(a.set(u.key,h.mutation.getFieldMask()),Nd(h.mutation,u,h.mutation.getFieldMask(),Se.now())):a.set(u.key,Rn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>a.set(u,h)),n.forEach((u,h)=>o.set(u,new A$(h,a.get(u)??null))),o))}recalculateAndSaveOverlays(e,n){const s=Ad();let r=new Be((a,o)=>a-o),i=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=s.get(c)||Rn.empty();h=o.applyToLocalView(u,h),s.set(c,h);const f=(r.get(o.batchId)||oe()).add(c);r=r.insert(o.batchId,f)})}).next(()=>{const a=[],o=r.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,h=c.value,f=BD();h.forEach(m=>{if(!i.has(m)){const p=YD(n.get(m),s.get(m));p!==null&&f.set(m,p),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,f))}return O.waitFor(a)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(a){return G.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Dw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):O.resolve(Ys());let o=ac,c=i;return a.next(u=>O.forEach(u,(h,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),i.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,oe())).next(h=>({batchId:o,changes:FD(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(s=>{let r=Wu();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let a=Wu();return this.indexManager.getCollectionParents(e,i).next(o=>O.forEach(o,c=>{const u=function(f,m){return new Xr(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next(h=>{h.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(a=>{i.forEach((c,u)=>{const h=u.getKey();a.get(h)===null&&(a=a.insert(h,$e.newInvalidDocument(h)))});let o=Wu();return a.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Nd(h.mutation,u,Rn.empty(),Se.now()),tf(n,u)&&(o=o.insert(c,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N${constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return O.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:xt(r.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:qw(r.bundledQuery),readTime:xt(r.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(){this.overlays=new Be(G.comparator),this.qr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ys();return O.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.St(e,n,i)}),O.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(s)),O.resolve()}getOverlaysForCollection(e,n,s){const r=Ys(),i=n.length+1,a=new G(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return O.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Be((u,h)=>u-h);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=Ys(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const o=Ys(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>o.set(u,h)),!(o.size()>=r)););return O.resolve(o)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(s.key,new zw(n,s));let i=this.qr.get(n);i===void 0&&(i=oe(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(){this.Qr=new Ce(Lt.$r),this.Ur=new Ce(Lt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Lt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new Lt(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new G(new me([])),s=new Lt(n,e),r=new Lt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new G(new me([])),s=new Lt(n,e),r=new Lt(n,e+1);let i=oe();return this.Ur.forEachInRange([s,r],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Lt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Lt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return G.comparator(e.key,n.key)||re(e.Yr,n.Yr)}static Kr(e,n){return re(e.Yr,n.Yr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ce(Lt.$r)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Lw(i,n,s,r);this.mutationQueue.push(a);for(const o of r)this.Zr=this.Zr.add(new Lt(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return O.resolve(a)}lookupMutationBatch(e,n){return O.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?qi:this.tr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Lt(n,0),r=new Lt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],a=>{const o=this.Xr(a.Yr);i.push(o)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ce(re);return n.forEach(r=>{const i=new Lt(r,0),a=new Lt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],o=>{s=s.add(o.Yr)})}),O.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;G.isDocumentKey(i)||(i=i.child(""));const a=new Lt(new G(i),0);let o=new Ce(re);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(o=o.add(c.Yr)),!0)},a),O.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(s=>{const r=this.Xr(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){X(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return O.forEach(n.mutations,r=>{const i=new Lt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new Lt(n,0),r=this.Zr.firstAfterOrEqual(s);return O.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(e){this.ri=e,this.docs=function(){return new Be(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return O.resolve(s?s.document.mutableCopy():$e.newInvalidDocument(n))}getEntries(e,n){let s=Cn();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():$e.newInvalidDocument(r))}),O.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Cn();const a=n.path,o=new G(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||Sw(rD(h),s)<=0||(r.has(h.key)||tf(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,s,r){Q(9500)}ii(e,n){return O.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new P$(this)}getSize(e){return O.resolve(this.size)}}class P$ extends EM{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)}),O.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${constructor(e){this.persistence=e,this.si=new Jr(n=>xo(n),Zh),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new $w,this.targetCount=0,this.ai=Eo.ur()}forEachTarget(e,n){return this.si.forEach((s,r)=>n(r)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),O.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Eo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Pr(n),O.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=n&&s.get(o.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),O.waitFor(i).next(()=>r)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return O.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),O.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(a=>{i.push(r.markPotentiallyOrphaned(e,a))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return O.resolve(s)}containsKey(e,n){return O.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,n){this.ui={},this.overlays={},this.ci=new In(0),this.li=!1,this.li=!0,this.hi=new R$,this.referenceDelegate=e(this),this.Pi=new k$(this),this.indexManager=new y$,this.remoteDocumentCache=function(r){return new j$(r)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new mM(n),this.Ii=new N$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new I$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new C$(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){B("MemoryPersistence","Starting transaction:",e);const r=new D$(this.ci.next());return this.referenceDelegate.Ei(),s(r).next(i=>this.referenceDelegate.di(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ai(e,n){return O.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class D$ extends aD{constructor(e){super(),this.currentSequenceNumber=e}}class iy{constructor(e){this.persistence=e,this.Ri=new $w,this.Vi=null}static mi(e){return new iy(e)}get fi(){if(this.Vi)return this.Vi;throw Q(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),O.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.fi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.fi,s=>{const r=G.fromPath(s);return this.gi(e,r).next(i=>{i||n.removeEntry(r,Z.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Gp{constructor(e,n){this.persistence=e,this.pi=new Jr(s=>un(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=TM(this,n)}static mi(e,n){return new Gp(e,n)}Ei(){}di(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return O.forEach(this.pi,(s,r)=>this.br(e,s,r).next(i=>i?O.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(o=>{o||(s++,i.removeEntry(a,Z.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),O.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vm(e.data.value)),n}br(e,n,s){return O.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return O.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(e){this.serializer=e}k(e,n,s,r){const i=new Wg("createOrUpgrade",n);s<1&&r>=1&&(function(c){c.createObjectStore(Jh)}(e),function(c){c.createObjectStore(oh,{keyPath:XH}),c.createObjectStore(Es,{keyPath:KA,autoIncrement:!0}).createIndex(Ya,WA,{unique:!0}),c.createObjectStore(oc)}(e),VN(e),function(c){c.createObjectStore(Ua)}(e));let a=O.resolve();return s<3&&r>=3&&(s!==0&&(function(c){c.deleteObjectStore(cc),c.deleteObjectStore(lc),c.deleteObjectStore(ao)}(e),VN(e)),a=a.next(()=>function(c){const u=c.store(ao),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Z.min().toTimestamp(),targetCount:0};return u.put(Lp,h)}(i))),s<4&&r>=4&&(s!==0&&(a=a.next(()=>function(c,u){return u.store(Es).J().next(f=>{c.deleteObjectStore(Es),c.createObjectStore(Es,{keyPath:KA,autoIncrement:!0}).createIndex(Ya,WA,{unique:!0});const m=u.store(Es),p=f.map(_=>m.put(_));return O.waitFor(p)})}(e,i))),a=a.next(()=>{(function(c){c.createObjectStore(uc,{keyPath:aG})})(e)})),s<5&&r>=5&&(a=a.next(()=>this.yi(i))),s<6&&r>=6&&(a=a.next(()=>(function(c){c.createObjectStore(lh)}(e),this.wi(i)))),s<7&&r>=7&&(a=a.next(()=>this.Si(i))),s<8&&r>=8&&(a=a.next(()=>this.bi(e,i))),s<9&&r>=9&&(a=a.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),s<10&&r>=10&&(a=a.next(()=>this.Di(i))),s<11&&r>=11&&(a=a.next(()=>{(function(c){c.createObjectStore(Yg,{keyPath:oG})})(e),function(c){c.createObjectStore(Qg,{keyPath:lG})}(e)})),s<12&&r>=12&&(a=a.next(()=>{(function(c){const u=c.createObjectStore(Xg,{keyPath:pG});u.createIndex(Ux,gG,{unique:!1}),u.createIndex(mD,yG,{unique:!1})})(e)})),s<13&&r>=13&&(a=a.next(()=>function(c){const u=c.createObjectStore(Vp,{keyPath:ZH});u.createIndex(Mm,eG),u.createIndex(uD,tG)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(Ua))),s<14&&r>=14&&(a=a.next(()=>this.Fi(e,i))),s<15&&r>=15&&(a=a.next(()=>function(c){c.createObjectStore(Iw,{keyPath:cG,autoIncrement:!0}).createIndex(Lx,uG,{unique:!1}),c.createObjectStore(Td,{keyPath:dG}).createIndex(hD,hG,{unique:!1}),c.createObjectStore(Ed,{keyPath:fG}).createIndex(fD,mG,{unique:!1})}(e))),s<16&&r>=16&&(a=a.next(()=>{n.objectStore(Td).clear()}).next(()=>{n.objectStore(Ed).clear()})),s<17&&r>=17&&(a=a.next(()=>{(function(c){c.createObjectStore(Rw,{keyPath:vG})})(e)})),s<18&&r>=18&&PP()&&(a=a.next(()=>{n.objectStore(Td).clear()}).next(()=>{n.objectStore(Ed).clear()})),a}wi(e){let n=0;return e.store(Ua).ee((s,r)=>{n+=Hp(r)}).next(()=>{const s={byteSize:n};return e.store(lh).put(Vx,s)})}yi(e){const n=e.store(oh),s=e.store(Es);return n.J().next(r=>O.forEach(r,i=>{const a=IDBKeyRange.bound([i.userId,qi],[i.userId,i.lastAcknowledgedBatchId]);return s.J(Ya,a).next(o=>O.forEach(o,c=>{X(c.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=Ha(this.serializer,c);return xM(e,i.userId,u).next(()=>{})}))}))}Si(e){const n=e.store(cc),s=e.store(Ua);return e.store(ao).get(Lp).next(r=>{const i=[];return s.ee((a,o)=>{const c=new me(a),u=function(f){return[0,un(f)]}(c);i.push(n.get(u).next(h=>h?O.resolve():(f=>n.put({targetId:0,path:un(f),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>O.waitFor(i))})}bi(e,n){e.createObjectStore(ch,{keyPath:iG});const s=n.store(ch),r=new Gw,i=a=>{if(r.add(a)){const o=a.lastSegment(),c=a.popLast();return s.put({collectionId:o,parent:un(c)})}};return n.store(Ua).ee({X:!0},(a,o)=>{const c=new me(a);return i(c.popLast())}).next(()=>n.store(oc).ee({X:!0},([a,o,c],u)=>{const h=Ws(o);return i(h.popLast())}))}Di(e){const n=e.store(lc);return n.ee((s,r)=>{const i=Qu(r),a=pM(this.serializer,i);return n.put(a)})}Ci(e,n){const s=n.store(Ua),r=[];return s.ee((i,a)=>{const o=n.store(Vp),c=function(f){return f.document?new G(me.fromString(f.document.name).popFirst(5)):f.noDocument?G.fromSegments(f.noDocument.path):f.unknownDocument?G.fromSegments(f.unknownDocument.path):Q(36783)}(a).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(o.put(u))}).next(()=>O.waitFor(r))}Fi(e,n){const s=n.store(Es),r=SM(this.serializer),i=new Kw(iy.mi,this.serializer.yt);return s.J().next(a=>{const o=new Map;return a.forEach(c=>{let u=o.get(c.userId)??oe();Ha(this.serializer,c).keys().forEach(h=>u=u.add(h)),o.set(c.userId,u)}),O.forEach(o,(c,u)=>{const h=new zt(u),f=sy.wt(this.serializer,h),m=i.getIndexManager(h),p=ry.wt(h,this.serializer,m,i.referenceDelegate);return new AM(r,p,f,m).recalculateAndSaveOverlaysForDocumentKeys(new zx(n,In.ce),c).next()})})}}function VN(t){t.createObjectStore(cc,{keyPath:sG}).createIndex(Nw,rG,{unique:!0}),t.createObjectStore(lc,{keyPath:"targetId"}).createIndex(dD,nG,{unique:!0}),t.createObjectStore(ao)}const fi="IndexedDbPersistence",J0=18e5,Z0=5e3,ev="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",NM="main";class Ww{constructor(e,n,s,r,i,a,o,c,u,h,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=s,this.Mi=i,this.window=a,this.document=o,this.xi=u,this.Oi=h,this.Ni=f,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!Ww.v())throw new F(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new T$(this,r),this.$i=n+NM,this.serializer=new mM(c),this.Ui=new Xs(this.$i,this.Ni,new M$(this.serializer)),this.hi=new d$,this.Pi=new x$(this.referenceDelegate,this.serializer),this.remoteDocumentCache=SM(this.serializer),this.Ii=new u$,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&yt(fi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new F(L.FAILED_PRECONDITION,ev);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new In(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Zf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(ga(e))return B(fi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return B(fi,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return ku(e).get(Wo).next(n=>O.resolve(this.es(n)))}ts(e){return Zf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,J0)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const s=Ot(n,uc);return s.J().next(r=>{const i=this.ss(r,J0),a=r.filter(o=>i.indexOf(o)===-1);return O.forEach(a,o=>s.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?O.resolve(!0):ku(e).get(Wo).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Z0)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new F(L.FAILED_PRECONDITION,ev);return!1}}return!(!this.networkEnabled||!this.inForeground)||Zf(e).J().next(s=>this.ss(s,Z0).find(r=>{if(this.clientId!==r.clientId){const i=!this.networkEnabled&&r.networkEnabled,a=!this.inForeground&&r.inForeground,o=this.networkEnabled===r.networkEnabled;if(i||a&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&B(fi,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Jh,uc],e=>{const n=new zx(e,In.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(s=>this.rs(s.updateTimeMs,n)&&!this.us(s.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Zf(e).J().next(n=>this.ss(n,J0).map(s=>s.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return ry.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new v$(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return sy.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,s){B(fi,"Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",i=function(c){return c===18?bG:c===17?vD:c===16?_G:c===15?Cw:c===14?yD:c===13?gD:c===12?xG:c===11?pD:void Q(60245)}(this.Ni);let a;return this.Ui.runTransaction(e,r,i,o=>(a=new zx(o,this.ci?this.ci.next():In.ce),n==="readwrite-primary"?this.Hi(a).next(c=>!!c||this.Yi(a)).next(c=>{if(!c)throw yt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new F(L.FAILED_PRECONDITION,iD);return s(a)}).next(c=>this.Xi(a).next(()=>c)):this.Is(a).next(()=>s(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Is(e){return ku(e).get(Wo).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Z0)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new F(L.FAILED_PRECONDITION,ev)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ku(e).put(Wo,n)}static v(){return Xs.v()}Zi(e){const n=ku(e);return n.get(Wo).next(s=>this.es(s)?(B(fi,"Releasing primary lease."),n.delete(Wo)):O.resolve())}rs(e,n){const s=Date.now();return!(e<s-n)&&(!(e>s)||(yt(`Detected an update time that is in the future: ${e} > ${s}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;jP()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const s=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return B(fi,`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return yt(fi,"Failed to get zombied client id.",s),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){yt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ku(t){return Ot(t,Jh)}function Zf(t){return Ot(t,uc)}function Yw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=oe(),r=oe();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Qw(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return jP()?8:oD(it())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,r,s).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new O$;return this.Ss(e,n,a).next(o=>{if(i.result=o,this.Vs)return this.bs(e,n,a,o.size)})}).next(()=>i.result)}bs(e,n,s,r){return s.documentReadCount<this.fs?(al()<=he.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",ol(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),O.resolve()):(al()<=he.DEBUG&&B("QueryEngine","Query:",ol(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(al()<=he.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",ol(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_n(n))):O.resolve())}ys(e,n){if(oN(n))return O.resolve(null);let s=_n(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Fp(n,null,"F"),s=_n(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const a=oe(...i);return this.ps.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,s).next(c=>{const u=this.Ds(n,o);return this.Cs(n,u,a,c.readTime)?this.ys(e,Fp(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,s,r){return oN(n)||r.isEqual(Z.min())?O.resolve(null):this.ps.getDocuments(e,s).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,s,r)?O.resolve(null):(al()<=he.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ol(n)),this.vs(e,a,n,sD(r,ac)).next(o=>o))})}Ds(e,n){let s=new Ce(UD(e));return n.forEach((r,i)=>{tf(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return al()<=he.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",ol(n)),this.ps.getDocumentsMatchingQuery(e,n,Zn.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="LocalStore",V$=3e8;class L${constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Be(re),this.xs=new Jr(i=>xo(i),Zh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function RM(t,e,n,s){return new L$(t,e,n,s)}async function CM(t,e){const n=K(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const a=[],o=[];let c=oe();for(const u of r){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(s,c).next(u=>({Ls:u,removedBatchIds:a,addedBatchIds:o}))})})}function U$(t,e){const n=K(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,c,u,h){const f=u.batch,m=f.keys();let p=O.resolve();return m.forEach(_=>{p=p.next(()=>h.getEntry(c,_)).next(w=>{const T=u.docVersions.get(_);X(T!==null,48541),w.version.compareTo(T)<0&&(f.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),h.addEntry(w)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(c,f))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let c=oe();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function jM(t){const e=K(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function z$(t,e){const n=K(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const o=[];e.targetChanges.forEach((h,f)=>{const m=r.get(f);if(!m)return;o.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let p=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(ht.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(h.resumeToken,s)),r=r.insert(f,p),function(w,T,x){return w.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=V$?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,p,h)&&o.push(n.Pi.updateTargetData(i,p))});let c=Cn(),u=oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),o.push(PM(i,a,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!s.isEqual(Z.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s));o.push(h)}return O.waitFor(o).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=r,i))}function PM(t,e,n){let s=oe(),r=oe();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let a=Cn();return n.forEach((o,c)=>{const u=i.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(o)),c.isNoDocument()&&c.version.isEqual(Z.min())?(e.removeEntry(o,c.readTime),a=a.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(o,c)):B(Xw,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{ks:a,qs:r}})}function F$(t,e){const n=K(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=qi),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function yc(t,e){const n=K(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Pi.getTargetData(s,e).next(i=>i?(r=i,O.resolve(r)):n.Pi.allocateTargetId(s).next(a=>(r=new wr(e,a,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function vc(t,e,n){const s=K(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,a=>s.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!ga(a))throw a;B(Xw,`Failed to update sequence numbers for target ${e}: ${a}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function $p(t,e,n){const s=K(t);let r=Z.min(),i=oe();return s.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,h){const f=K(c),m=f.xs.get(h);return m!==void 0?O.resolve(f.Ms.get(m)):f.Pi.getTargetData(u,h)}(s,a,_n(e)).next(o=>{if(o)return r=o.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(a,o.targetId).next(c=>{i=c})}).next(()=>s.Fs.getDocumentsMatchingQuery(a,e,n?r:Z.min(),n?i:oe())).next(o=>(MM(s,LD(e),o),{documents:o,Qs:i})))}function kM(t,e){const n=K(t),s=K(n.Pi),r=n.Ms.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",i=>s.At(i,e).next(a=>a?a.target:null))}function DM(t,e){const n=K(t),s=n.Os.get(e)||Z.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.Ns.getAllFromCollectionGroup(r,e,sD(s,ac),Number.MAX_SAFE_INTEGER)).then(r=>(MM(n,e,r),r))}function MM(t,e,n){let s=t.Os.get(e)||Z.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Os.set(e,s)}async function B$(t,e,n,s){const r=K(t);let i=oe(),a=Cn();for(const u of n){const h=e.$s(u.metadata.name);u.document&&(i=i.add(h));const f=e.Us(u);f.setReadTime(e.Ks(u.metadata.readTime)),a=a.insert(h,f)}const o=r.Ns.newChangeBuffer({trackRemovals:!0}),c=await yc(r,function(h){return _n(Hc(me.fromString(`__bundle__/docs/${h}`)))}(s));return r.persistence.runTransaction("Apply bundle documents","readwrite",u=>PM(u,o,a).next(h=>(o.apply(u),h)).next(h=>r.Pi.removeMatchingKeysForTargetId(u,c.targetId).next(()=>r.Pi.addMatchingKeys(u,i,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(u,h.ks,h.qs)).next(()=>h.ks)))}async function q$(t,e,n=oe()){const s=await yc(t,_n(qw(e.bundledQuery))),r=K(t);return r.persistence.runTransaction("Save named query","readwrite",i=>{const a=xt(e.readTime);if(s.snapshotVersion.compareTo(a)>=0)return r.Ii.saveNamedQuery(i,e);const o=s.withResumeToken(ht.EMPTY_BYTE_STRING,a);return r.Ms=r.Ms.insert(o.targetId,o),r.Pi.updateTargetData(i,o).next(()=>r.Pi.removeMatchingKeysForTargetId(i,s.targetId)).next(()=>r.Pi.addMatchingKeys(i,n,s.targetId)).next(()=>r.Ii.saveNamedQuery(i,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM="firestore_clients";function LN(t,e){return`${OM}_${t}_${e}`}const VM="firestore_mutations";function UN(t,e,n){let s=`${VM}_${t}_${n}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}const LM="firestore_targets";function tv(t,e){return`${LM}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="SharedClientState";class Kp{constructor(e,n,s,r){this.user=e,this.batchId=n,this.state=s,this.error=r}static Ws(e,n,s){const r=JSON.parse(s);let i,a=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new F(r.error.code,r.error.message))),a?new Kp(e,n,r.state,i):(yt(Ls,`Failed to parse mutation state for ID '${n}': ${s}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Id{constructor(e,n,s){this.targetId=e,this.state=n,this.error=s}static Ws(e,n){const s=JSON.parse(n);let r,i=typeof s=="object"&&["not-current","current","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return i&&s.error&&(i=typeof s.error.message=="string"&&typeof s.error.code=="string",i&&(r=new F(s.error.code,s.error.message))),i?new Id(e,s.state,r):(yt(Ls,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const s=JSON.parse(n);let r=typeof s=="object"&&s.activeTargetIds instanceof Array,i=Mw();for(let a=0;r&&a<s.activeTargetIds.length;++a)r=lD(s.activeTargetIds[a]),i=i.add(s.activeTargetIds[a]);return r?new Wp(e,i):(yt(Ls,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Jw{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Jw(n.clientId,n.onlineState):(yt(Ls,`Failed to parse online state: ${e}`),null)}}class t_{constructor(){this.activeTargetIds=Mw()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nv{constructor(e,n,s,r,i){this.window=e,this.Mi=n,this.persistenceKey=s,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Be(re),this.started=!1,this.Xs=[];const a=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=LN(this.persistenceKey,this.Js),this.no=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new t_),this.ro=new RegExp(`^${OM}_${a}_([^_]*)$`),this.io=new RegExp(`^${VM}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${LM}_${a}_(\\d+)$`),this.oo=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this._o=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const s of e){if(s===this.Js)continue;const r=this.getItem(LN(this.persistenceKey,s));if(r){const i=Wp.Ws(s,r);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const s=this.uo(n);s&&this.co(s)}for(const s of this.Xs)this.Ys(s);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((s,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,s){this.ho(e,n,s),this.Po(e)}addLocalQueryTarget(e,n=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(tv(this.persistenceKey,e));if(r){const i=Id.Ws(e,r);i&&(s=i.state)}}return n&&this.To.zs(e),this.ao(),s}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tv(this.persistenceKey,e))}updateQueryState(e,n,s){this.Io(e,n,s)}handleUserChange(e,n,s){n.forEach(r=>{this.Po(r)}),this.currentUser=e,s.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return B(Ls,"READ",e,n),n}setItem(e,n){B(Ls,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){B(Ls,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(B(Ls,"EVENT",n.key,n.newValue),n.key===this.eo)return void yt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const s=this.Ro(n.key);return this.Vo(s,null)}{const s=this.mo(n.key,n.newValue);if(s)return this.Vo(s.clientId,s)}}else if(this.io.test(n.key)){if(n.newValue!==null){const s=this.fo(n.key,n.newValue);if(s)return this.po(s)}}else if(this.so.test(n.key)){if(n.newValue!==null){const s=this.yo(n.key,n.newValue);if(s)return this.wo(s)}}else if(n.key===this.oo){if(n.newValue!==null){const s=this.uo(n.newValue);if(s)return this.co(s)}}else if(n.key===this.no){const s=function(i){let a=In.ce;if(i!=null)try{const o=JSON.parse(i);X(typeof o=="number",30636,{So:i}),a=o}catch(o){yt(Ls,"Failed to read sequence number from WebStorage",o)}return a}(n.newValue);s!==In.ce&&this.sequenceNumberHandler(s)}else if(n.key===this._o){const s=this.bo(n.newValue);await Promise.all(s.map(r=>this.syncEngine.Do(r)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,s){const r=new Kp(this.currentUser,e,n,s),i=UN(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Gs())}Po(e){const n=UN(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,s){const r=tv(this.persistenceKey,e),i=new Id(e,n,s);this.setItem(r,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const s=this.Ro(e);return Wp.Ws(s,n)}fo(e,n){const s=this.io.exec(e),r=Number(s[1]),i=s[2]!==void 0?s[2]:null;return Kp.Ws(new zt(i),r,n)}yo(e,n){const s=this.so.exec(e),r=Number(s[1]);return Id.Ws(r,n)}uo(e){return Jw.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);B(Ls,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const s=n?this.Zs.insert(e,n):this.Zs.remove(e),r=this.lo(this.Zs),i=this.lo(s),a=[],o=[];return i.forEach(c=>{r.has(c)||a.push(c)}),r.forEach(c=>{i.has(c)||o.push(c)}),this.syncEngine.Fo(a,o).then(()=>{this.Zs=s})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=Mw();return e.forEach((s,r)=>{n=n.unionWith(r.activeTargetIds)}),n}}class UM{constructor(){this.Mo=new t_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new t_,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="ConnectivityMonitor";class FN{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){B(zN,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){B(zN,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let em=null;function n_(){return em===null?em=function(){return 268435456+Math.round(2147483648*Math.random())}():em++,"0x"+em.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="RestConnection",G$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $${get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===Fx?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const a=n_(),o=this.zo(e,n.toUriEncodedString());B(sv,`Sending RPC '${e}' ${a}:`,o,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:u}=new URL(o),h=fa(u);return this.Jo(e,o,c,s,h).then(f=>(B(sv,`Received RPC '${e}' ${a}: `,f),f),f=>{throw ir(sv,`RPC '${e}' ${a} failed with error: `,f,"url: ",o,"request:",s),f})}Ho(e,n,s,r,i,a){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}zo(e,n){const s=G$[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class W$ extends $${constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const a=n_();return new Promise((o,c)=>{const u=new $k;u.setWithCredentials(!0),u.listenOnce(Kk.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Pm.NO_ERROR:const f=u.getResponseJson();B(nn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),o(f);break;case Pm.TIMEOUT:B(nn,`RPC '${e}' ${a} timed out`),c(new F(L.DEADLINE_EXCEEDED,"Request time out"));break;case Pm.HTTP_ERROR:const m=u.getStatus();if(B(nn,`RPC '${e}' ${a} failed with status:`,m,"response text:",u.getResponseText()),m>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const _=p==null?void 0:p.error;if(_&&_.status&&_.message){const w=function(x){const v=x.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(v)>=0?v:L.UNKNOWN}(_.status);c(new F(w,_.message))}else c(new F(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new F(L.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{B(nn,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(r);B(nn,`RPC '${e}' ${a} sending request:`,r),u.send(n,"POST",h,s,15)})}T_(e,n,s){const r=n_(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Qk(),o=Yk(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const h=i.join("");B(nn,`Creating RPC '${e}' stream ${r}: ${h}`,c);const f=a.createWebChannel(h,c);this.I_(f);let m=!1,p=!1;const _=new K$({Yo:T=>{p?B(nn,`Not sending because RPC '${e}' stream ${r} is closed:`,T):(m||(B(nn,`Opening RPC '${e}' stream ${r} transport.`),f.open(),m=!0),B(nn,`RPC '${e}' stream ${r} sending:`,T),f.send(T))},Zo:()=>f.close()}),w=(T,x,v)=>{T.listen(x,b=>{try{v(b)}catch(R){setTimeout(()=>{throw R},0)}})};return w(f,Ku.EventType.OPEN,()=>{p||(B(nn,`RPC '${e}' stream ${r} transport opened.`),_.o_())}),w(f,Ku.EventType.CLOSE,()=>{p||(p=!0,B(nn,`RPC '${e}' stream ${r} transport closed`),_.a_(),this.E_(f))}),w(f,Ku.EventType.ERROR,T=>{p||(p=!0,ir(nn,`RPC '${e}' stream ${r} transport errored. Name:`,T.name,"Message:",T.message),_.a_(new F(L.UNAVAILABLE,"The operation could not be completed")))}),w(f,Ku.EventType.MESSAGE,T=>{var x;if(!p){const v=T.data[0];X(!!v,16349);const b=v,R=(b==null?void 0:b.error)||((x=b[0])==null?void 0:x.error);if(R){B(nn,`RPC '${e}' stream ${r} received error:`,R);const D=R.status;let M=function(N){const I=wt[N];if(I!==void 0)return JD(I)}(D),A=R.message;M===void 0&&(M=L.INTERNAL,A="Unknown error status: "+D+" with message "+R.message),p=!0,_.a_(new F(M,A)),f.close()}else B(nn,`RPC '${e}' stream ${r} received:`,v),_.u_(v)}}),w(o,Wk.STAT_EVENT,T=>{T.stat===Dx.PROXY?B(nn,`RPC '${e}' stream ${r} detected buffering proxy`):T.stat===Dx.NOPROXY&&B(nn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(){return typeof window<"u"?window:null}function Bm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(t){return new ZG(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&B("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="PersistentStream";class FM{constructor(e,n,s,r,i,a,o,c){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Zw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(yt(n.toString()),yt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.D_===n&&this.G_(s,r)},s=>{e(()=>{const r=new F(L.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{s(()=>this.z_(r))}),this.stream.onMessage(r=>{s(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return B(BN,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(B(BN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Y$ extends FM{constructor(e,n,s,r,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=n$(this.serializer,e),s=function(i){if(!("targetChange"in i))return Z.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?xt(a.readTime):Z.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Qx(this.serializer),n.addTarget=function(i,a){let o;const c=a.target;if(o=Up(c)?{documents:lM(i,c)}:{query:cM(i,c).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=nM(i,a.resumeToken);const u=Wx(i,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(Z.min())>0){o.readTime=gc(i,a.snapshotVersion.toTimestamp());const u=Wx(i,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const s=r$(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Qx(this.serializer),n.removeTarget=e,this.q_(n)}}class Q$ extends FM{constructor(e,n,s,r,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return X(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,X(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){X(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=s$(e.writeResults,e.commitTime),s=xt(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Qx(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>ph(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${}class J$ extends X${constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new F(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,Yx(n,s),r,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new F(L.UNKNOWN,i.toString())})}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(e,Yx(n,s),r,a,o,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new F(L.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Z${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yt(n),this.aa=!1):B("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="RemoteStore";class eK{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{s.enqueueAndForget(async()=>{va(this)&&(B(So,"Restarting streams for network reachability change."),await async function(c){const u=K(c);u.Ea.add(4),await Kc(u),u.Ra.set("Unknown"),u.Ea.delete(4),await of(u)}(this))})}),this.Ra=new Z$(s,r)}}async function of(t){if(va(t))for(const e of t.da)await e(!0)}async function Kc(t){for(const e of t.da)await e(!1)}function ay(t,e){const n=K(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),n1(n)?t1(n):Yc(n).O_()&&e1(n,e))}function xc(t,e){const n=K(t),s=Yc(n);n.Ia.delete(e),s.O_()&&BM(n,e),n.Ia.size===0&&(s.O_()?s.L_():va(n)&&n.Ra.set("Unknown"))}function e1(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yc(t).Y_(e)}function BM(t,e){t.Va.Ue(e),Yc(t).Z_(e)}function t1(t){t.Va=new YG({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Yc(t).start(),t.Ra.ua()}function n1(t){return va(t)&&!Yc(t).x_()&&t.Ia.size>0}function va(t){return K(t).Ea.size===0}function qM(t){t.Va=void 0}async function tK(t){t.Ra.set("Online")}async function nK(t){t.Ia.forEach((e,n)=>{e1(t,e)})}async function sK(t,e){qM(t),n1(t)?(t.Ra.ha(e),t1(t)):t.Ra.set("Unknown")}async function rK(t,e,n){if(t.Ra.set("Online"),e instanceof tM&&e.state===2&&e.cause)try{await async function(r,i){const a=i.cause;for(const o of i.targetIds)r.Ia.has(o)&&(await r.remoteSyncer.rejectListen(o,a),r.Ia.delete(o),r.Va.removeTarget(o))}(t,e)}catch(s){B(So,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Yp(t,s)}else if(e instanceof zm?t.Va.Ze(e):e instanceof eM?t.Va.st(e):t.Va.tt(e),!n.isEqual(Z.min()))try{const s=await jM(t.localStore);n.compareTo(s)>=0&&await function(i,a){const o=i.Va.Tt(a);return o.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,a))}}),o.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(ht.EMPTY_BYTE_STRING,h.snapshotVersion)),BM(i,c);const f=new wr(h.target,c,u,h.sequenceNumber);e1(i,f)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){B(So,"Failed to raise snapshot:",s),await Yp(t,s)}}async function Yp(t,e,n){if(!ga(e))throw e;t.Ea.add(1),await Kc(t),t.Ra.set("Offline"),n||(n=()=>jM(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{B(So,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await of(t)})}function HM(t,e){return e().catch(n=>Yp(t,n,e))}async function Wc(t){const e=K(t),n=ra(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qi;for(;iK(e);)try{const r=await F$(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,aK(e,r)}catch(r){await Yp(e,r)}GM(e)&&$M(e)}function iK(t){return va(t)&&t.Ta.length<10}function aK(t,e){t.Ta.push(e);const n=ra(t);n.O_()&&n.X_&&n.ea(e.mutations)}function GM(t){return va(t)&&!ra(t).x_()&&t.Ta.length>0}function $M(t){ra(t).start()}async function oK(t){ra(t).ra()}async function lK(t){const e=ra(t);for(const n of t.Ta)e.ea(n.mutations)}async function cK(t,e,n){const s=t.Ta.shift(),r=Uw.from(s,e,n);await HM(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Wc(t)}async function uK(t,e){e&&ra(t).X_&&await async function(s,r){if(function(a){return XD(a)&&a!==L.ABORTED}(r.code)){const i=s.Ta.shift();ra(s).B_(),await HM(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Wc(s)}}(t,e),GM(t)&&$M(t)}async function qN(t,e){const n=K(t);n.asyncQueue.verifyOperationInProgress(),B(So,"RemoteStore received new credentials");const s=va(n);n.Ea.add(3),await Kc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await of(n)}async function s_(t,e){const n=K(t);e?(n.Ea.delete(2),await of(n)):e||(n.Ea.add(2),await Kc(n),n.Ra.set("Unknown"))}function Yc(t){return t.ma||(t.ma=function(n,s,r){const i=K(n);return i.sa(),new Y$(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:tK.bind(null,t),t_:nK.bind(null,t),r_:sK.bind(null,t),H_:rK.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),n1(t)?t1(t):t.Ra.set("Unknown")):(await t.ma.stop(),qM(t))})),t.ma}function ra(t){return t.fa||(t.fa=function(n,s,r){const i=K(n);return i.sa(),new Q$(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:oK.bind(null,t),r_:uK.bind(null,t),ta:lK.bind(null,t),na:cK.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Wc(t)):(await t.fa.stop(),t.Ta.length>0&&(B(So,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Zt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const a=Date.now()+s,o=new s1(e,n,a,r,i);return o.start(s),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qc(t,e){if(yt("AsyncQueue",`${e}: ${t}`),ga(t))return new F(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{static emptySet(e){return new Fl(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||G.comparator(n.key,s.key):(n,s)=>G.comparator(n.key,s.key),this.keyedMap=Wu(),this.sortedSet=new Be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Fl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Fl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(){this.ga=new Be(G.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Q(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class _c{constructor(e,n,s,r,i,a,o,c,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new _c(e,n,Fl.emptySet(n),a,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dK{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class hK{constructor(){this.queries=GN(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=K(n),i=r.queries;r.queries=GN(),i.forEach((a,o)=>{for(const c of o.Sa)c.onError(s)})})(this,new F(L.ABORTED,"Firestore shutting down"))}}function GN(){return new Jr(t=>VD(t),ef)}async function r1(t,e){const n=K(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new dK,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const o=Qc(a,`Initialization of query '${ol(e.query)}' failed`);return void e.onError(o)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&a1(n)}async function i1(t,e){const n=K(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function fK(t,e){const n=K(t);let s=!1;for(const r of e){const i=r.query,a=n.queries.get(i);if(a){for(const o of a.Sa)o.Fa(r)&&(s=!0);a.wa=r}}s&&a1(n)}function mK(t,e,n){const s=K(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function a1(t){t.Ca.forEach(e=>{e.next()})}var r_,$N;($N=r_||(r_={})).Ma="default",$N.Cache="cache";class o1{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new _c(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=_c.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==r_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pK{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.serializer=e}$s(e){return Js(this.serializer,e)}Us(e){return e.metadata.exists?oM(this.serializer,e.document,!1):$e.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return xt(e)}}class gK{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=KM(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const s=me.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,s=new KN(this.serializer);for(const r of e)if(r.metadata.queries){const i=s.$s(r.metadata.name);for(const a of r.metadata.queries){const o=(n.get(a)||oe()).add(i);n.set(a,o)}}return n}async ja(e){const n=await B$(e,new KN(this.serializer),this.Wa,this.Ua.id),s=this.za(this.documents);for(const r of this.Ka)await q$(e,r,s.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function KM(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.key=e}}class YM{constructor(e){this.key=e}}class QM{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=oe(),this.mutatedKeys=oe(),this.eu=UD(e),this.tu=new Fl(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new HN,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=r,o=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,f)=>{const m=r.get(h),p=tf(this.query,f)?f:null,_=!!m&&this.mutatedKeys.has(m.key),w=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let T=!1;m&&p?m.data.isEqual(p.data)?_!==w&&(s.track({type:3,doc:p}),T=!0):this.su(m,p)||(s.track({type:2,doc:p}),T=!0,(c&&this.eu(p,c)>0||u&&this.eu(p,u)<0)&&(o=!0)):!m&&p?(s.track({type:0,doc:p}),T=!0):m&&!p&&(s.track({type:1,doc:m}),T=!0,(c||u)&&(o=!0)),T&&(p?(a=a.add(p),i=w?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:a,iu:s,Cs:o,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,f)=>function(p,_){const w=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{Rt:T})}};return w(p)-w(_)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(s),r=r??!1;const o=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,u=c!==this.Za;return this.Za=c,a.length!==0||u?{snapshot:new _c(this.query,e.tu,i,a,e.mutatedKeys,c===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new HN,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=oe(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new YM(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new WM(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=oe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return _c.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const xa="SyncEngine";class yK{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class vK{constructor(e){this.key=e,this.hu=!1}}class xK{constructor(e,n,s,r,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Jr(o=>VD(o),ef),this.Iu=new Map,this.Eu=new Set,this.du=new Be(G.comparator),this.Au=new Map,this.Ru=new $w,this.Vu={},this.mu=new Map,this.fu=Eo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _K(t,e,n=!0){const s=oy(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await XM(s,e,n,!0),r}async function bK(t,e){const n=oy(t);await XM(n,e,!0,!1)}async function XM(t,e,n,s){const r=await yc(t.localStore,_n(e)),i=r.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let o;return s&&(o=await l1(t,e,i,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&ay(t.remoteStore,r),o}async function l1(t,e,n,s,r){t.pu=(f,m,p)=>async function(w,T,x,v){let b=T.view.ru(x);b.Cs&&(b=await $p(w.localStore,T.query,!1).then(({documents:A})=>T.view.ru(A,b)));const R=v&&v.targetChanges.get(T.targetId),D=v&&v.targetMismatches.get(T.targetId)!=null,M=T.view.applyChanges(b,w.isPrimaryClient,R,D);return i_(w,T.targetId,M.au),M.snapshot}(t,f,m,p);const i=await $p(t.localStore,e,!0),a=new QM(e,i.Qs),o=a.ru(i.documents),c=rf.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=a.applyChanges(o,t.isPrimaryClient,c);i_(t,n,u.au);const h=new yK(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function wK(t,e,n){const s=K(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter(a=>!ef(a,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await vc(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&xc(s.remoteStore,r.targetId),bc(s,r.targetId)}).catch(pa)):(bc(s,r.targetId),await vc(s.localStore,r.targetId,!0))}async function TK(t,e){const n=K(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),xc(n.remoteStore,s.targetId))}async function EK(t,e,n){const s=h1(t);try{const r=await function(a,o){const c=K(a),u=Se.now(),h=o.reduce((p,_)=>p.add(_.key),oe());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let _=Cn(),w=oe();return c.Ns.getEntries(p,h).next(T=>{_=T,_.forEach((x,v)=>{v.isValidDocument()||(w=w.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,_)).next(T=>{f=T;const x=[];for(const v of o){const b=$G(v,f.get(v.key).overlayedDocument);b!=null&&x.push(new Zr(v.key,b,ID(b.value.mapValue),nt.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,x,o)}).next(T=>{m=T;const x=T.applyToLocalDocumentSet(f,w);return c.documentOverlayCache.saveOverlays(p,T.batchId,x)})}).then(()=>({batchId:m.batchId,changes:FD(f)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(a,o,c){let u=a.Vu[a.currentUser.toKey()];u||(u=new Be(re)),u=u.insert(o,c),a.Vu[a.currentUser.toKey()]=u}(s,r.batchId,n),await ei(s,r.changes),await Wc(s.remoteStore)}catch(r){const i=Qc(r,"Failed to persist write");n.reject(i)}}async function JM(t,e){const n=K(t);try{const s=await z$(n.localStore,e);e.targetChanges.forEach((r,i)=>{const a=n.Au.get(i);a&&(X(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?X(a.hu,14607):r.removedDocuments.size>0&&(X(a.hu,42227),a.hu=!1))}),await ei(n,s,e)}catch(s){await pa(s)}}function WN(t,e,n){const s=K(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach((i,a)=>{const o=a.view.va(e);o.snapshot&&r.push(o.snapshot)}),function(a,o){const c=K(a);c.onlineState=o;let u=!1;c.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(o)&&(u=!0)}),u&&a1(c)}(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function SK(t,e,n){const s=K(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let a=new Be(G.comparator);a=a.insert(i,$e.newNoDocument(i,Z.min()));const o=oe().add(i),c=new sf(Z.min(),new Map,new Be(re),a,o);await JM(s,c),s.du=s.du.remove(i),s.Au.delete(e),d1(s)}else await vc(s.localStore,e,!1).then(()=>bc(s,e,n)).catch(pa)}async function AK(t,e){const n=K(t),s=e.batch.batchId;try{const r=await U$(n.localStore,e);u1(n,s,null),c1(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ei(n,r)}catch(r){await pa(r)}}async function NK(t,e,n){const s=K(t);try{const r=await function(a,o){const c=K(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,o).next(f=>(X(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(s.localStore,e);u1(s,e,n),c1(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ei(s,r)}catch(r){await pa(r)}}async function IK(t,e){const n=K(t);va(n.remoteStore)||B(xa,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=await function(a){const o=K(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>o.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(s===qi)return void e.resolve();const r=n.mu.get(s)||[];r.push(e),n.mu.set(s,r)}catch(s){const r=Qc(s,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function c1(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function u1(t,e,n){const s=K(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function bc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(s=>{t.Ru.containsKey(s)||ZM(t,s)})}function ZM(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(xc(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),d1(t))}function i_(t,e,n){for(const s of n)s instanceof WM?(t.Ru.addReference(s.key,e),RK(t,s)):s instanceof YM?(B(xa,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||ZM(t,s.key)):Q(19791,{wu:s})}function RK(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(B(xa,"New document in limbo: "+n),t.Eu.add(s),d1(t))}function d1(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new G(me.fromString(e)),s=t.fu.next();t.Au.set(s,new vK(n)),t.du=t.du.insert(n,s),ay(t.remoteStore,new wr(_n(Hc(n.path)),s,"TargetPurposeLimboResolution",In.ce))}}async function ei(t,e,n){const s=K(t),r=[],i=[],a=[];s.Tu.isEmpty()||(s.Tu.forEach((o,c)=>{a.push(s.pu(c,e,n).then(u=>{var h;if((u||n)&&s.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;s.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){r.push(u);const f=Qw.As(c.targetId,u);i.push(f)}}))}),await Promise.all(a),s.Pu.H_(r),await async function(c,u){const h=K(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>O.forEach(u,m=>O.forEach(m.Es,p=>h.persistence.referenceDelegate.addReference(f,m.targetId,p)).next(()=>O.forEach(m.ds,p=>h.persistence.referenceDelegate.removeReference(f,m.targetId,p)))))}catch(f){if(!ga(f))throw f;B(Xw,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const p=h.Ms.get(m),_=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(m,w)}}}(s.localStore,i))}async function CK(t,e){const n=K(t);if(!n.currentUser.isEqual(e)){B(xa,"User change. New user:",e.toKey());const s=await CM(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(o=>{o.forEach(c=>{c.reject(new F(L.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ei(n,s.Ls)}}function jK(t,e){const n=K(t),s=n.Au.get(e);if(s&&s.hu)return oe().add(s.key);{let r=oe();const i=n.Iu.get(e);if(!i)return r;for(const a of i){const o=n.Tu.get(a);r=r.unionWith(o.view.nu)}return r}}async function PK(t,e){const n=K(t),s=await $p(n.localStore,e.query,!0),r=e.view.cu(s);return n.isPrimaryClient&&i_(n,e.targetId,r.au),r}async function kK(t,e){const n=K(t);return DM(n.localStore,e).then(s=>ei(n,s))}async function DK(t,e,n,s){const r=K(t),i=await function(o,c){const u=K(o),h=K(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>h.er(f,c).next(m=>m?u.localDocuments.getDocuments(f,m):O.resolve(null)))}(r.localStore,e);i!==null?(n==="pending"?await Wc(r.remoteStore):n==="acknowledged"||n==="rejected"?(u1(r,e,s||null),c1(r,e),function(o,c){K(K(o).mutationQueue).ir(c)}(r.localStore,e)):Q(6720,"Unknown batchState",{Su:n}),await ei(r,i)):B(xa,"Cannot apply mutation batch with id: "+e)}async function MK(t,e){const n=K(t);if(oy(n),h1(n),e===!0&&n.gu!==!0){const s=n.sharedClientState.getAllActiveQueryTargets(),r=await YN(n,s.toArray());n.gu=!0,await s_(n.remoteStore,!0);for(const i of r)ay(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const s=[];let r=Promise.resolve();n.Iu.forEach((i,a)=>{n.sharedClientState.isLocalQueryTarget(a)?s.push(a):r=r.then(()=>(bc(n,a),vc(n.localStore,a,!0))),xc(n.remoteStore,a)}),await r,await YN(n,s),function(a){const o=K(a);o.Au.forEach((c,u)=>{xc(o.remoteStore,u)}),o.Ru.Jr(),o.Au=new Map,o.du=new Be(G.comparator)}(n),n.gu=!1,await s_(n.remoteStore,!1)}}async function YN(t,e,n){const s=K(t),r=[],i=[];for(const a of e){let o;const c=s.Iu.get(a);if(c&&c.length!==0){o=await yc(s.localStore,_n(c[0]));for(const u of c){const h=s.Tu.get(u),f=await PK(s,h);f.snapshot&&i.push(f.snapshot)}}else{const u=await kM(s.localStore,a);o=await yc(s.localStore,u),await l1(s,e4(u),a,!1,o.resumeToken)}r.push(o)}return s.Pu.H_(i),r}function e4(t){return OD(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function OK(t){return function(n){return K(K(n).persistence).Ts()}(K(t).localStore)}async function VK(t,e,n,s){const r=K(t);if(r.gu)return void B(xa,"Ignoring unexpected query state notification.");const i=r.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const a=await DM(r.localStore,LD(i[0])),o=sf.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ht.EMPTY_BYTE_STRING);await ei(r,a,o);break}case"rejected":await vc(r.localStore,e,!0),bc(r,e,s);break;default:Q(64155,n)}}async function LK(t,e,n){const s=oy(t);if(s.gu){for(const r of e){if(s.Iu.has(r)&&s.sharedClientState.isActiveQueryTarget(r)){B(xa,"Adding an already active target "+r);continue}const i=await kM(s.localStore,r),a=await yc(s.localStore,i);await l1(s,e4(i),a.targetId,!1,a.resumeToken),ay(s.remoteStore,a)}for(const r of n)s.Iu.has(r)&&await vc(s.localStore,r,!1).then(()=>{xc(s.remoteStore,r),bc(s,r)}).catch(pa)}}function oy(t){const e=K(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SK.bind(null,e),e.Pu.H_=fK.bind(null,e.eventManager),e.Pu.yu=mK.bind(null,e.eventManager),e}function h1(t){const e=K(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NK.bind(null,e),e}function UK(t,e,n){const s=K(t);(async function(i,a,o){try{const c=await a.getMetadata();if(await function(p,_){const w=K(p),T=xt(_.createTime);return w.persistence.runTransaction("hasNewerBundle","readonly",x=>w.Ii.getBundleMetadata(x,_.id)).then(x=>!!x&&x.createTime.compareTo(T)>=0)}(i.localStore,c))return await a.close(),o._completeWith(function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}}(c)),Promise.resolve(new Set);o._updateProgress(KM(c));const u=new gK(c,a.serializer);let h=await a.bu();for(;h;){const m=await u.Ga(h);m&&o._updateProgress(m),h=await a.bu()}const f=await u.ja(i.localStore);return await ei(i,f.Ha,void 0),await function(p,_){const w=K(p);return w.persistence.runTransaction("Save bundle","readwrite",T=>w.Ii.saveBundleMetadata(T,_))}(i.localStore,c),o._completeWith(f.progress),Promise.resolve(f.Ja)}catch(c){return ir(xa,`Loading bundle failed with ${c}`),o._failWith(c),Promise.resolve(new Set)}})(s,e,n).then(r=>{s.sharedClientState.notifyBundleLoaded(r)})}class gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=af(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return RM(this.persistence,new IM,e.initialUser,this.serializer)}Cu(e){return new Kw(iy.mi,this.serializer)}Du(e){return new UM}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gh.provider={build:()=>new gh};class zK extends gh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){X(this.persistence.referenceDelegate instanceof Gp,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new wM(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new Kw(s=>Gp.mi(s,n),this.serializer)}}class t4 extends gh{constructor(e,n,s){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await h1(this.xu.syncEngine),await Wc(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return RM(this.persistence,new IM,e.initialUser,this.serializer)}Fu(e,n){const s=this.persistence.referenceDelegate.garbageCollector;return new wM(s,e.asyncQueue,n)}Mu(e,n){const s=new YH(n,this.persistence);return new WH(e.asyncQueue,s)}Cu(e){const n=Yw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new Ww(this.synchronizeTabs,n,e.clientId,s,e.asyncQueue,zM(),Bm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new UM}}class FK extends t4{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof nv&&(this.sharedClientState.syncEngine={Co:DK.bind(null,n),vo:VK.bind(null,n),Fo:LK.bind(null,n),Ts:OK.bind(null,n),Do:kK.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async s=>{await MK(this.xu.syncEngine,s),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start():s||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(s&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():s||this.indexBackfillerScheduler.stop())})}Du(e){const n=zM();if(!nv.v(n))throw new F(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Yw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new nv(n,e.asyncQueue,s,e.clientId,e.initialUser)}}class yh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>WN(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=CK.bind(null,this.syncEngine),await s_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hK}()}createDatastore(e){const n=af(e.databaseInfo.databaseId),s=function(i){return new W$(i)}(e.databaseInfo);return function(i,a,o,c){return new J$(i,a,o,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,a,o){return new eK(s,r,i,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>WN(this.syncEngine,n,0),function(){return FN.v()?new FN:new H$}())}createSyncEngine(e,n){return function(r,i,a,o,c,u,h){const f=new xK(r,i,a,o,c,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=K(r);B(So,"RemoteStore shutting down."),i.Ea.add(5),await Kc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}yh.provider={build:()=>new yh};function QN(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const s={value:t.slice(n,n+e),done:!1};return n+=e,s}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BK{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Zt,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(s=>{s&&s.$a()?this.metadata.resolve(s.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(s==null?void 0:s.Qa)}`))},s=>this.metadata.reject(s))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),s=Number(n);isNaN(s)&&this.Qu(`length string (${n}) is not valid number`);const r=await this.$u(s);return new pK(JSON.parse(r),e.length+s)}Uu(){return this.buffer.findIndex(e=>e===123)}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qK{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new F(L.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,i){const a=K(r),o={documents:i.map(f=>mh(a.serializer,f))},c=await a.Ho("BatchGetDocuments",a.serializer.databaseId,me.emptyPath(),o,i.length),u=new Map;c.forEach(f=>{const m=t$(a.serializer,f);u.set(m.key.toString(),m)});const h=[];return i.forEach(f=>{const m=u.get(f.toString());X(!!m,55234,{key:f}),h.push(m)}),h}(this.datastore,e);return n.forEach(s=>this.recordVersion(s)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new $c(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,s)=>{const r=G.fromPath(s);this.mutations.push(new Vw(r,this.precondition(r)))}),await async function(s,r){const i=K(s),a={writes:r.map(o=>ph(i.serializer,o))};await i.Go("Commit",i.serializer.databaseId,me.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Q(50498,{Gu:e.constructor.name});n=Z.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!n.isEqual(s))throw new F(L.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Z.min())?nt.exists(!1):nt.updateTime(n):nt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Z.min()))throw new F(L.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nt.updateTime(n)}return nt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(e,n,s,r,i){this.asyncQueue=e,this.datastore=n,this.options=s,this.updateFunction=r,this.deferred=i,this.zu=s.maxAttempts,this.M_=new Zw(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new qK(this.datastore),n=this.Hu(e);n&&n.then(s=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(s)}).catch(r=>{this.Yu(r)}))}).catch(s=>{this.Yu(s)})})}Hu(e){try{const n=this.updateFunction(e);return!Xh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!XD(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="FirestoreClient";class GK{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=zt.UNAUTHENTICATED,this.clientId=Tw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async a=>{B(ia,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(s,a=>(B(ia,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Qc(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function rv(t,e){t.asyncQueue.verifyOperationInProgress(),B(ia,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await CM(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function XN(t,e){t.asyncQueue.verifyOperationInProgress();const n=await f1(t);B(ia,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>qN(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>qN(e.remoteStore,r)),t._onlineComponents=e}async function f1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B(ia,"Using user provided OfflineComponentProvider");try{await rv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===L.FAILED_PRECONDITION||r.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;ir("Error using user provided cache. Falling back to memory cache: "+n),await rv(t,new gh)}}else B(ia,"Using default OfflineComponentProvider"),await rv(t,new zK(void 0));return t._offlineComponents}async function cy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(B(ia,"Using user provided OnlineComponentProvider"),await XN(t,t._uninitializedComponentsProvider._online)):(B(ia,"Using default OnlineComponentProvider"),await XN(t,new yh))),t._onlineComponents}function n4(t){return f1(t).then(e=>e.persistence)}function m1(t){return f1(t).then(e=>e.localStore)}function s4(t){return cy(t).then(e=>e.remoteStore)}function p1(t){return cy(t).then(e=>e.syncEngine)}function $K(t){return cy(t).then(e=>e.datastore)}async function wc(t){const e=await cy(t),n=e.eventManager;return n.onListen=_K.bind(null,e.syncEngine),n.onUnlisten=wK.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bK.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=TK.bind(null,e.syncEngine),n}function KK(t){return t.asyncQueue.enqueue(async()=>{const e=await n4(t),n=await s4(t);return e.setNetworkEnabled(!0),function(r){const i=K(r);return i.Ea.delete(0),of(i)}(n)})}function WK(t){return t.asyncQueue.enqueue(async()=>{const e=await n4(t),n=await s4(t);return e.setNetworkEnabled(!1),async function(r){const i=K(r);i.Ea.add(0),await Kc(i),i.Ra.set("Offline")}(n)})}function YK(t,e){const n=new Zt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,a){try{const o=await function(u,h){const f=K(u);return f.persistence.runTransaction("read document","readonly",m=>f.localDocuments.getDocument(m,h))}(r,i);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new F(L.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const c=Qc(o,`Failed to get document '${i} from cache`);a.reject(c)}}(await m1(t),e,n)),n.promise}function r4(t,e,n={}){const s=new Zt;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,c,u){const h=new ly({next:m=>{h.Nu(),a.enqueueAndForget(()=>i1(i,f));const p=m.docs.has(o);!p&&m.fromCache?u.reject(new F(L.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&c&&c.source==="server"?u.reject(new F(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new o1(Hc(o.path),h,{includeMetadataChanges:!0,qa:!0});return r1(i,f)}(await wc(t),t.asyncQueue,e,n,s)),s.promise}function QK(t,e){const n=new Zt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,a){try{const o=await $p(r,i,!0),c=new QM(i,o.Qs),u=c.ru(o.documents),h=c.applyChanges(u,!1);a.resolve(h.snapshot)}catch(o){const c=Qc(o,`Failed to execute query '${i} against cache`);a.reject(c)}}(await m1(t),e,n)),n.promise}function i4(t,e,n={}){const s=new Zt;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,o,c,u){const h=new ly({next:m=>{h.Nu(),a.enqueueAndForget(()=>i1(i,f)),m.fromCache&&c.source==="server"?u.reject(new F(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new o1(o,h,{includeMetadataChanges:!0,qa:!0});return r1(i,f)}(await wc(t),t.asyncQueue,e,n,s)),s.promise}function XK(t,e){const n=new ly(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){K(r).Ca.add(i),i.next()}(await wc(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){K(r).Ca.delete(i)}(await wc(t),n))}}function JK(t,e,n,s){const r=function(a,o){let c;return c=typeof a=="string"?ZD().encode(a):a,function(h,f){return new BK(h,f)}(function(h,f){if(h instanceof Uint8Array)return QN(h,f);if(h instanceof ArrayBuffer)return QN(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),o)}(n,af(e));t.asyncQueue.enqueueAndForget(async()=>{UK(await p1(t),r,s)})}function ZK(t,e){return t.asyncQueue.enqueue(async()=>function(s,r){const i=K(s);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ii.getNamedQuery(a,r))}(await m1(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4="firestore.googleapis.com",ZN=!0;class eI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new F(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=o4,this.ssl=ZN}else this.host=e.host,this.ssl=e.ssl??ZN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_$)throw new F(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=a4(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lf{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new OH;switch(s.type){case"firstParty":return new zH(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new F(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=JN.get(n);s&&(B("ComponentProvider","Removing Datastore"),JN.delete(n),s.terminate())}(this),Promise.resolve()}}function eW(t,e,n,s={}){var u;t=be(t,lf);const r=fa(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;r&&(Wb(`https://${o}`),Yb("Firestore",!0)),i.host!==o4&&i.host!==o&&ir("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:o,ssl:r,emulatorOptions:s};if(!Qi(c,a)&&(t._setSettings(c),s.mockUserToken)){let h,f;if(typeof s.mockUserToken=="string")h=s.mockUserToken,f=zt.MOCK_USER;else{h=NP(s.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=s.mockUserToken.sub||s.mockUserToken.user_id;if(!m)throw new F(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new zt(m)}t._authCredentials=new VH(new Jk(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bn=class l4{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new l4(this.firestore,e,this._query)}},Fe=class Xu{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xu(this.firestore,e,this._key)}toJSON(){return{type:Xu._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Qh(n,Xu._jsonSchema))return new Xu(e,s||null,new G(me.fromString(n.referencePath)))}};Fe._jsonSchemaVersion="firestore/documentReference/1.0",Fe._jsonSchema={type:It("string",Fe._jsonSchemaVersion),referencePath:It("string")};let Hi=class c4 extends bn{constructor(e,n,s){super(e,n,Hc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fe(this.firestore,null,new G(e))}withConverter(e){return new c4(this.firestore,e,this._path)}};function Qp(t,e,...n){if(t=J(t),Ew("collection","path",e),t instanceof lf){const s=me.fromString(e,...n);return BA(s),new Hi(t,null,s)}{if(!(t instanceof Fe||t instanceof Hi))throw new F(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(me.fromString(e,...n));return BA(s),new Hi(t.firestore,null,s)}}function tW(t,e){if(t=be(t,lf),Ew("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new F(L.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new bn(t,null,function(s){return new Xr(me.emptyPath(),s)}(e))}function Xp(t,e,...n){if(t=J(t),arguments.length===1&&(e=Tw.newId()),Ew("doc","path",e),t instanceof lf){const s=me.fromString(e,...n);return FA(s),new Fe(t,null,new G(s))}{if(!(t instanceof Fe||t instanceof Hi))throw new F(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(me.fromString(e,...n));return FA(s),new Fe(t.firestore,t instanceof Hi?t.converter:null,new G(s))}}function u4(t,e){return t=J(t),e=J(e),(t instanceof Fe||t instanceof Hi)&&(e instanceof Fe||e instanceof Hi)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function d4(t,e){return t=J(t),e=J(e),t instanceof bn&&e instanceof bn&&t.firestore===e.firestore&&ef(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="AsyncQueue";class nI{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Zw(this,"async_queue_retry"),this._c=()=>{const s=Bm();s&&B(tI,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Bm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Bm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Zt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ga(e))throw e;B(tI,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,yt("INTERNAL UNHANDLED ERROR: ",sI(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=s1.createAndSchedule(this,e,n,s,i=>this.hc(i));return this.tc.push(r),r}uc(){this.nc&&Q(47125,{Pc:sI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function sI(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const r=n;for(const i of s)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class nW{constructor(){this._progressObserver={},this._taskCompletionResolver=new Zt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,s){this._progressObserver={next:e,error:n,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sW=-1;let bt=class extends lf{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new nI,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nI(e),this._firestoreClient=void 0,await e}}};function dn(t){if(t._terminated)throw new F(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||h4(t),t._firestoreClient}function h4(t){var s,r,i;const e=t._freezeSettings(),n=function(o,c,u,h){return new EG(o,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,a4(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new GK(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(t._componentsProvider))}function rW(t,e){ir("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return f4(t,yh.provider,{build:s=>new t4(s,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function iW(t){ir("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();f4(t,yh.provider,{build:n=>new FK(n,e.cacheSizeBytes)})}function f4(t,e,n){if((t=be(t,bt))._firestoreClient||t._terminated)throw new F(L.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new F(L.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},h4(t)}function aW(t){if(t._initialized&&!t._terminated)throw new F(L.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Zt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(s){if(!Xs.v())return Promise.resolve();const r=s+NM;await Xs.delete(r)}(Yw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function oW(t){return function(n){const s=new Zt;return n.asyncQueue.enqueueAndForget(async()=>IK(await p1(n),s)),s.promise}(dn(t=be(t,bt)))}function lW(t){return KK(dn(t=be(t,bt)))}function cW(t){return WK(dn(t=be(t,bt)))}function uW(t,e){const n=dn(t=be(t,bt)),s=new nW;return JK(n,t._databaseId,e,s),s}function dW(t,e){return ZK(dn(t=be(t,bt)),e).then(n=>n?new bn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this._byteString=e}static fromBase64String(e){try{return new an(ht.fromBase64String(e))}catch(n){throw new F(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new an(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:an._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qh(e,an._jsonSchema))return an.fromBase64String(e.bytes)}}an._jsonSchemaVersion="firestore/bytes/1.0",an._jsonSchema={type:It("string",an._jsonSchemaVersion),bytes:It("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aa=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ns._jsonSchemaVersion}}static fromJSON(e){if(Qh(e,Ns._jsonSchema))return new Ns(e.latitude,e.longitude)}}Ns._jsonSchemaVersion="firestore/geoPoint/1.0",Ns._jsonSchema={type:It("string",Ns._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Zs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qh(e,Zs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Zs(e.vectorValues);throw new F(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zs._jsonSchemaVersion="firestore/vectorValue/1.0",Zs._jsonSchema={type:It("string",Zs._jsonSchemaVersion),vectorValues:It("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hW=/^__.*__$/;class fW{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Gc(e,this.data,n,this.fieldTransforms)}}class m4{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Zr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function p4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ac:t})}}class uy{constructor(e,n,s,r,i,a){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new uy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Jp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(p4(this.Ac)&&hW.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class mW{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||af(e)}Cc(e,n,s,r=!1){return new uy({Ac:e,methodName:n,Dc:s,path:tt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vo(t){const e=t._freezeSettings(),n=af(t._databaseId);return new mW(t._databaseId,!!e.ignoreUndefinedProperties,n)}function dy(t,e,n,s,r,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);w1("Data must be an object, but it was:",a,s);const o=v4(s,a);let c,u;if(i.merge)c=new Rn(a.fieldMask),u=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=o_(e,f,n);if(!a.contains(m))throw new F(L.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);_4(h,m)||h.push(m)}c=new Rn(h),u=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=a.fieldTransforms;return new fW(new Yt(o),c,u)}class cf extends Oo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cf}}function g4(t,e,n){return new uy({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class g1 extends Oo{_toFieldTransform(e){return new nf(e.path,new mc)}isEqual(e){return e instanceof g1}}class y1 extends Oo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=g4(this,e,!0),s=this.vc.map(i=>Lo(i,n)),r=new _o(s);return new nf(e.path,r)}isEqual(e){return e instanceof y1&&Qi(this.vc,e.vc)}}class v1 extends Oo{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=g4(this,e,!0),s=this.vc.map(i=>Lo(i,n)),r=new bo(s);return new nf(e.path,r)}isEqual(e){return e instanceof v1&&Qi(this.vc,e.vc)}}class x1 extends Oo{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new pc(e.serializer,HD(e.serializer,this.Fc));return new nf(e.path,n)}isEqual(e){return e instanceof x1&&this.Fc===e.Fc}}function _1(t,e,n,s){const r=t.Cc(1,e,n);w1("Data must be an object, but it was:",r,s);const i=[],a=Yt.empty();ya(s,(c,u)=>{const h=T1(e,c,n);u=J(u);const f=r.yc(h);if(u instanceof cf)i.push(h);else{const m=Lo(u,f);m!=null&&(i.push(h),a.set(h,m))}});const o=new Rn(i);return new m4(a,o,r.fieldTransforms)}function b1(t,e,n,s,r,i){const a=t.Cc(1,e,n),o=[o_(e,s,n)],c=[r];if(i.length%2!=0)throw new F(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)o.push(o_(e,i[m])),c.push(i[m+1]);const u=[],h=Yt.empty();for(let m=o.length-1;m>=0;--m)if(!_4(u,o[m])){const p=o[m];let _=c[m];_=J(_);const w=a.yc(p);if(_ instanceof cf)u.push(p);else{const T=Lo(_,w);T!=null&&(u.push(p),h.set(p,T))}}const f=new Rn(u);return new m4(h,f,a.fieldTransforms)}function y4(t,e,n,s=!1){return Lo(n,t.Cc(s?4:3,e))}function Lo(t,e){if(x4(t=J(t)))return w1("Unsupported field value:",e,t),v4(t,e);if(t instanceof Oo)return function(s,r){if(!p4(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,r){const i=[];let a=0;for(const o of s){let c=Lo(o,r.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=J(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return HD(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Se.fromDate(s);return{timestampValue:gc(r.serializer,i)}}if(s instanceof Se){const i=new Se(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:gc(r.serializer,i)}}if(s instanceof Ns)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof an)return{bytesValue:nM(r.serializer,s._byteString)};if(s instanceof Fe){const i=r.databaseId,a=s.firestore._databaseId;if(!a.isEqual(i))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Bw(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Zs)return function(a,o){return{mapValue:{fields:{[jw]:{stringValue:Pw},[dc]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return Ow(o.serializer,u)})}}}}}}(s,r);throw r.Sc(`Unsupported field value: ${Kg(s)}`)}(t,e)}function v4(t,e){const n={};return xD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ya(t,(s,r)=>{const i=Lo(r,e.mc(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function x4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Se||t instanceof Ns||t instanceof an||t instanceof Fe||t instanceof Oo||t instanceof Zs)}function w1(t,e,n){if(!x4(n)||!tD(n)){const s=Kg(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function o_(t,e,n){if((e=J(e))instanceof aa)return e._internalPath;if(typeof e=="string")return T1(t,e);throw Jp("Field path arguments must be of type string or ",t,!1,void 0,n)}const pW=new RegExp("[~\\*/\\[\\]]");function T1(t,e,n){if(e.search(pW)>=0)throw Jp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new aa(...e.split("."))._internalPath}catch{throw Jp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jp(t,e,n,s,r){const i=s&&!s.isEmpty(),a=r!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${s}`),a&&(c+=` in document ${r}`),c+=")"),new F(L.INVALID_ARGUMENT,o+t+c)}function _4(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gW extends vh{data(){return super.data()}}function hy(t,e){return typeof e=="string"?T1(t,e):e instanceof aa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class E1{}class uf extends E1{}function mr(t,e,...n){let s=[];e instanceof E1&&s.push(e),s=s.concat(n),function(i){const a=i.filter(c=>c instanceof S1).length,o=i.filter(c=>c instanceof fy).length;if(a>1||a>0&&o>0)throw new F(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class fy extends uf{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new fy(e,n,s)}_apply(e){const n=this._parse(e);return E4(e._query,n),new bn(e.firestore,e.converter,Kx(e._query,n))}_parse(e){const n=Vo(e.firestore);return function(i,a,o,c,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){iI(f,h);const _=[];for(const w of f)_.push(rI(c,i,w));m={arrayValue:{values:_}}}else m=rI(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||iI(f,h),m=y4(o,a,f,h==="in"||h==="not-in");return ge.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function yW(t,e,n){const s=e,r=hy("where",t);return fy._create(r,s,n)}class S1 extends E1{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new S1(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Re.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let a=r;const o=i.getFlattenedFilters();for(const c of o)E4(a,c),a=Kx(a,c)}(e._query,n),new bn(e.firestore,e.converter,Kx(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class A1 extends uf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new A1(e,n)}_apply(e){const n=function(r,i,a){if(r.startAt!==null)throw new F(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new F(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fh(i,a)}(e._query,this._field,this._direction);return new bn(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Xr(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function w4(t,e="asc"){const n=e,s=hy("orderBy",t);return A1._create(s,n)}class my extends uf{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new my(e,n,s)}_apply(e){return new bn(e.firestore,e.converter,Fp(e._query,this._limit,this._limitType))}}function vW(t){return nD("limit",t),my._create("limit",t,"F")}function xW(t){return nD("limitToLast",t),my._create("limitToLast",t,"L")}class py extends uf{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new py(e,n,s)}_apply(e){const n=T4(e,this.type,this._docOrFields,this._inclusive);return new bn(e.firestore,e.converter,function(r,i){return new Xr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function _W(...t){return py._create("startAt",t,!0)}function bW(...t){return py._create("startAfter",t,!1)}class gy extends uf{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new gy(e,n,s)}_apply(e){const n=T4(e,this.type,this._docOrFields,this._inclusive);return new bn(e.firestore,e.converter,function(r,i){return new Xr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function wW(...t){return gy._create("endBefore",t,!1)}function TW(...t){return gy._create("endAt",t,!0)}function T4(t,e,n,s){if(n[0]=J(n[0]),n[0]instanceof vh)return function(i,a,o,c,u){if(!c)throw new F(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const h=[];for(const f of zl(i))if(f.field.isKeyField())h.push(vo(a,c.key));else{const m=c.data.field(f.field);if(Jg(m))throw new F(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const p=f.field.canonicalString();throw new F(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}h.push(m)}return new sa(h,u)}(t._query,t.firestore._databaseId,e,n[0]._document,s);{const r=Vo(t.firestore);return function(a,o,c,u,h,f){const m=a.explicitOrderBy;if(h.length>m.length)throw new F(L.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let _=0;_<h.length;_++){const w=h[_];if(m[_].field.isKeyField()){if(typeof w!="string")throw new F(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof w}`);if(!Dw(a)&&w.indexOf("/")!==-1)throw new F(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${w}' contains a slash.`);const T=a.path.child(me.fromString(w));if(!G.isDocumentKey(T))throw new F(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const x=new G(T);p.push(vo(o,x))}else{const T=y4(c,u,w);p.push(T)}}return new sa(p,f)}(t._query,t.firestore._databaseId,r,e,n,s)}}function rI(t,e,n){if(typeof(n=J(n))=="string"){if(n==="")throw new F(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dw(e)&&n.indexOf("/")!==-1)throw new F(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(me.fromString(n));if(!G.isDocumentKey(s))throw new F(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return vo(t,new G(s))}if(n instanceof Fe)return vo(t,n._key);throw new F(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kg(n)}.`)}function iI(t,e){if(!Array.isArray(t)||t.length===0)throw new F(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function E4(t,e){const n=function(r,i){for(const a of r)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class N1{convertValue(e,n="none"){switch(ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ya(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var s,r,i;const n=(i=(r=(s=e.fields)==null?void 0:s[dc].arrayValue)==null?void 0:r.values)==null?void 0:i.map(a=>et(a.doubleValue));return new Zs(n)}convertGeoPoint(e){return new Ns(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Zg(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(uh(e));default:return null}}convertTimestamp(e){const n=Br(e);return new Se(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=me.fromString(e);X(fM(s),9688,{name:e});const r=new ea(s.get(1),s.get(3)),i=new G(s.popFirst(5));return r.isEqual(n)||yt(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class EW extends N1{constructor(e){super(),this.firestore=e}convertBytes(e){return new an(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Fe(this.firestore,null,n)}}class Qa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ys=class S4 extends vh{constructor(e,n,s,r,i,a){super(e,n,s,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(hy("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=S4._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",ys._jsonSchema={type:It("string",ys._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};let Rd=class extends ys{data(e={}){return super.data(e)}},Is=class A4{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Qa(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Rd(this._firestore,this._userDataWriter,s.key,s,new Qa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(o=>{const c=new Rd(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Qa(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const c=new Rd(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Qa(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:SW(o.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=A4._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function SW(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:t})}}function N4(t,e){return t instanceof ys&&e instanceof ys?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Is&&e instanceof Is&&t._firestore===e._firestore&&d4(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AW(t){t=be(t,Fe);const e=be(t.firestore,bt);return r4(dn(e),t._key).then(n=>R1(e,t,n))}Is._jsonSchemaVersion="firestore/querySnapshot/1.0",Is._jsonSchema={type:It("string",Is._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class Uo extends N1{constructor(e){super(),this.firestore=e}convertBytes(e){return new an(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Fe(this.firestore,null,n)}}function NW(t){t=be(t,Fe);const e=be(t.firestore,bt),n=dn(e),s=new Uo(e);return YK(n,t._key).then(r=>new ys(e,s,t._key,r,new Qa(r!==null&&r.hasLocalMutations,!0),t.converter))}function IW(t){t=be(t,Fe);const e=be(t.firestore,bt);return r4(dn(e),t._key,{source:"server"}).then(n=>R1(e,t,n))}function I4(t){t=be(t,bn);const e=be(t.firestore,bt),n=dn(e),s=new Uo(e);return b4(t._query),i4(n,t._query).then(r=>new Is(e,s,t,r))}function RW(t){t=be(t,bn);const e=be(t.firestore,bt),n=dn(e),s=new Uo(e);return QK(n,t._query).then(r=>new Is(e,s,t,r))}function CW(t){t=be(t,bn);const e=be(t.firestore,bt),n=dn(e),s=new Uo(e);return i4(n,t._query,{source:"server"}).then(r=>new Is(e,s,t,r))}function aI(t,e,n){t=be(t,Fe);const s=be(t.firestore,bt),r=yy(t.converter,e,n);return df(s,[dy(Vo(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,nt.none())])}function oI(t,e,n,...s){t=be(t,Fe);const r=be(t.firestore,bt),i=Vo(r);let a;return a=typeof(e=J(e))=="string"||e instanceof aa?b1(i,"updateDoc",t._key,e,n,s):_1(i,"updateDoc",t._key,e),df(r,[a.toMutation(t._key,nt.exists(!0))])}function jW(t){return df(be(t.firestore,bt),[new $c(t._key,nt.none())])}function PW(t,e){const n=be(t.firestore,bt),s=Xp(t),r=yy(t.converter,e);return df(n,[dy(Vo(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,nt.exists(!1))]).then(()=>s)}function I1(t,...e){var c,u,h;t=J(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||a_(e[s])||(n=e[s++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(a_(e[s])){const f=e[s];e[s]=(c=f.next)==null?void 0:c.bind(f),e[s+1]=(u=f.error)==null?void 0:u.bind(f),e[s+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,a,o;if(t instanceof Fe)a=be(t.firestore,bt),o=Hc(t._key.path),i={next:f=>{e[s]&&e[s](R1(a,t,f))},error:e[s+1],complete:e[s+2]};else{const f=be(t,bn);a=be(f.firestore,bt),o=f._query;const m=new Uo(a);i={next:p=>{e[s]&&e[s](new Is(a,m,f,p))},error:e[s+1],complete:e[s+2]},b4(t._query)}return function(m,p,_,w){const T=new ly(w),x=new o1(p,T,_);return m.asyncQueue.enqueueAndForget(async()=>r1(await wc(m),x)),()=>{T.Nu(),m.asyncQueue.enqueueAndForget(async()=>i1(await wc(m),x))}}(dn(a),o,r,i)}function kW(t,e){return XK(dn(t=be(t,bt)),a_(e)?e:{next:e})}function df(t,e){return function(s,r){const i=new Zt;return s.asyncQueue.enqueueAndForget(async()=>EK(await p1(s),r,i)),i.promise}(dn(t),e)}function R1(t,e,n){const s=n.docs.get(e._key),r=new Uo(t);return new ys(t,r,e._key,s,new Qa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DW={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MW=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Vo(e)}set(e,n,s){this._verifyNotCommitted();const r=Ci(e,this._firestore),i=yy(r.converter,n,s),a=dy(this._dataReader,"WriteBatch.set",r._key,i,r.converter!==null,s);return this._mutations.push(a.toMutation(r._key,nt.none())),this}update(e,n,s,...r){this._verifyNotCommitted();const i=Ci(e,this._firestore);let a;return a=typeof(n=J(n))=="string"||n instanceof aa?b1(this._dataReader,"WriteBatch.update",i._key,n,s,r):_1(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(a.toMutation(i._key,nt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ci(e,this._firestore);return this._mutations=this._mutations.concat(new $c(n._key,nt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new F(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ci(t,e){if((t=J(t)).firestore!==e)throw new F(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Vo(e)}get(e){const n=Ci(e,this._firestore),s=new EW(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return Q(24041);const i=r[0];if(i.isFoundDocument())return new vh(this._firestore,s,i.key,i,n.converter);if(i.isNoDocument())return new vh(this._firestore,s,n._key,null,n.converter);throw Q(18433,{doc:i})})}set(e,n,s){const r=Ci(e,this._firestore),i=yy(r.converter,n,s),a=dy(this._dataReader,"Transaction.set",r._key,i,r.converter!==null,s);return this._transaction.set(r._key,a),this}update(e,n,s,...r){const i=Ci(e,this._firestore);let a;return a=typeof(n=J(n))=="string"||n instanceof aa?b1(this._dataReader,"Transaction.update",i._key,n,s,r):_1(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,a),this}delete(e){const n=Ci(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VW=class extends OW{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ci(e,this._firestore),s=new Uo(this._firestore);return super.get(e).then(r=>new ys(this._firestore,s,n._key,r._document,new Qa(!1,!1),n.converter))}};function LW(t,e,n){t=be(t,bt);const s={...DW,...n};return function(i){if(i.maxAttempts<1)throw new F(L.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(i,a,o){const c=new Zt;return i.asyncQueue.enqueueAndForget(async()=>{const u=await $K(i);new HK(i.asyncQueue,u,o,a,c).ju()}),c.promise}(dn(t),r=>e(new VW(t,r)),s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UW(){return new cf("deleteField")}function zW(){return new g1("serverTimestamp")}function FW(...t){return new y1("arrayUnion",t)}function BW(...t){return new v1("arrayRemove",t)}function qW(t){return new x1("increment",t)}(function(e,n=!0){(function(r){qc=r})(Wr),zr(new xs("firestore",(s,{instanceIdentifier:r,options:i})=>{const a=s.getProvider("app").getImmediate(),o=new bt(new LH(s.getProvider("auth-internal")),new FH(a,s.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new F(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ea(u.options.projectId,h)}(a,r),a);return i={useFetchStreams:n,...i},o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Wn(VA,LA,e),Wn(VA,LA,"esm2020")})();const HW="@firebase/firestore-compat",GW="0.4.2";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new F("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(){if(typeof Uint8Array>"u")throw new F("unimplemented","Uint8Arrays are not available in this environment.")}function cI(){if(!wG())throw new F("unimplemented","Blobs are unavailable in Firestore in this environment.")}let R4=class l_{constructor(e){this._delegate=e}static fromBase64String(e){return cI(),new l_(an.fromBase64String(e))}static fromUint8Array(e){return lI(),new l_(an.fromUint8Array(e))}toBase64(){return cI(),this._delegate.toBase64()}toUint8Array(){return lI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(t){return $W(t,["next","error","complete"])}function $W(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const s of e)if(s in n&&typeof n[s]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KW{enableIndexedDbPersistence(e,n){return rW(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return iW(e._delegate)}clearIndexedDbPersistence(e){return aW(e._delegate)}}class C4{constructor(e,n,s){this._delegate=n,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof ea||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&ir("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,s={}){eW(this._delegate,e,n,s)}enableNetwork(){return lW(this._delegate)}disableNetwork(){return cW(this._delegate)}enablePersistence(e){let n=!1,s=!1;return e&&(n=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,eD("synchronizeTabs",n,"experimentalForceOwningTab",s)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return oW(this._delegate)}onSnapshotsInSync(e){return kW(this._delegate,e)}get app(){if(!this._appCompat)throw new F("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Tc(this,Qp(this._delegate,e))}catch(n){throw yn(n,"collection()","Firestore.collection()")}}doc(e){try{return new fs(this,Xp(this._delegate,e))}catch(n){throw yn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new gn(this,tW(this._delegate,e))}catch(n){throw yn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return LW(this._delegate,n=>e(new j4(this,n)))}batch(){return dn(this._delegate),new P4(new MW(this._delegate,e=>df(this._delegate,e)))}loadBundle(e){return uW(this._delegate,e)}namedQuery(e){return dW(this._delegate,e).then(n=>n?new gn(this,n):null)}}class vy extends N1{constructor(e){super(),this.firestore=e}convertBytes(e){return new R4(new an(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return fs.forKey(n,this.firestore,null)}}function WW(t){DH(t)}class j4{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new vy(e)}get(e){const n=Xa(e);return this._delegate.get(n).then(s=>new xh(this._firestore,new ys(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,n.converter)))}set(e,n,s){const r=Xa(e);return s?(C1("Transaction.set",s),this._delegate.set(r,n,s)):this._delegate.set(r,n),this}update(e,n,s,...r){const i=Xa(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,s,...r),this}delete(e){const n=Xa(e);return this._delegate.delete(n),this}}class P4{constructor(e){this._delegate=e}set(e,n,s){const r=Xa(e);return s?(C1("WriteBatch.set",s),this._delegate.set(r,n,s)):this._delegate.set(r,n),this}update(e,n,s,...r){const i=Xa(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,s,...r),this}delete(e){const n=Xa(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Ao{constructor(e,n,s){this._firestore=e,this._userDataWriter=n,this._delegate=s}fromFirestore(e,n){const s=new Rd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _h(this._firestore,s),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const s=Ao.INSTANCES;let r=s.get(e);r||(r=new WeakMap,s.set(e,r));let i=r.get(n);return i||(i=new Ao(e,new vy(e),n),r.set(n,i)),i}}Ao.INSTANCES=new WeakMap;class fs{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new vy(e)}static forPath(e,n,s){if(e.length%2!==0)throw new F("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new fs(n,new Fe(n._delegate,s,new G(e)))}static forKey(e,n,s){return new fs(n,new Fe(n._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Tc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Tc(this.firestore,Qp(this._delegate,e))}catch(n){throw yn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=J(e),e instanceof Fe?u4(this._delegate,e):!1}set(e,n){n=C1("DocumentReference.set",n);try{return n?aI(this._delegate,e,n):aI(this._delegate,e)}catch(s){throw yn(s,"setDoc()","DocumentReference.set()")}}update(e,n,...s){try{return arguments.length===1?oI(this._delegate,e):oI(this._delegate,e,n,...s)}catch(r){throw yn(r,"updateDoc()","DocumentReference.update()")}}delete(){return jW(this._delegate)}onSnapshot(...e){const n=k4(e),s=D4(e,r=>new xh(this.firestore,new ys(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return I1(this._delegate,n,s)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=NW(this._delegate):(e==null?void 0:e.source)==="server"?n=IW(this._delegate):n=AW(this._delegate),n.then(s=>new xh(this.firestore,new ys(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new fs(this.firestore,e?this._delegate.withConverter(Ao.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function yn(t,e,n){return t.message=t.message.replace(e,n),t}function k4(t){for(const e of t)if(typeof e=="object"&&!c_(e))return e;return{}}function D4(t,e){var s,r;let n;return c_(t[0])?n=t[0]:c_(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:i=>{n.next&&n.next(e(i))},error:(s=n.error)==null?void 0:s.bind(n),complete:(r=n.complete)==null?void 0:r.bind(n)}}class xh{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new fs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return N4(this._delegate,e._delegate)}}class _h extends xh{data(e){const n=this._delegate.data(e);return this._delegate._converter||MH(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class gn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new vy(e)}where(e,n,s){try{return new gn(this.firestore,mr(this._delegate,yW(e,n,s)))}catch(r){throw yn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new gn(this.firestore,mr(this._delegate,w4(e,n)))}catch(s){throw yn(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new gn(this.firestore,mr(this._delegate,vW(e)))}catch(n){throw yn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new gn(this.firestore,mr(this._delegate,xW(e)))}catch(n){throw yn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new gn(this.firestore,mr(this._delegate,_W(...e)))}catch(n){throw yn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new gn(this.firestore,mr(this._delegate,bW(...e)))}catch(n){throw yn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new gn(this.firestore,mr(this._delegate,wW(...e)))}catch(n){throw yn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new gn(this.firestore,mr(this._delegate,TW(...e)))}catch(n){throw yn(n,"endAt()","Query.endAt()")}}isEqual(e){return d4(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=RW(this._delegate):(e==null?void 0:e.source)==="server"?n=CW(this._delegate):n=I4(this._delegate),n.then(s=>new u_(this.firestore,new Is(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const n=k4(e),s=D4(e,r=>new u_(this.firestore,new Is(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return I1(this._delegate,n,s)}withConverter(e){return new gn(this.firestore,e?this._delegate.withConverter(Ao.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class YW{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new _h(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class u_{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new gn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _h(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new YW(this._firestore,n))}forEach(e,n){this._delegate.forEach(s=>{e.call(n,new _h(this._firestore,s))})}isEqual(e){return N4(this._delegate,e._delegate)}}class Tc extends gn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new fs(this.firestore,e):null}doc(e){try{return e===void 0?new fs(this.firestore,Xp(this._delegate)):new fs(this.firestore,Xp(this._delegate,e))}catch(n){throw yn(n,"doc()","CollectionReference.doc()")}}add(e){return PW(this._delegate,e).then(n=>new fs(this.firestore,n))}isEqual(e){return u4(this._delegate,e._delegate)}withConverter(e){return new Tc(this.firestore,e?this._delegate.withConverter(Ao.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Xa(t){return be(t,Fe)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(...e){this._delegate=new aa(...e)}static documentId(){return new j1(tt.keyField().canonicalString())}isEqual(e){return e=J(e),e instanceof aa?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{static serverTimestamp(){const e=zW();return e._methodName="FieldValue.serverTimestamp",new Ka(e)}static delete(){const e=UW();return e._methodName="FieldValue.delete",new Ka(e)}static arrayUnion(...e){const n=FW(...e);return n._methodName="FieldValue.arrayUnion",new Ka(n)}static arrayRemove(...e){const n=BW(...e);return n._methodName="FieldValue.arrayRemove",new Ka(n)}static increment(e){const n=qW(e);return n._methodName="FieldValue.increment",new Ka(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QW={Firestore:C4,GeoPoint:Ns,Timestamp:Se,Blob:R4,Transaction:j4,WriteBatch:P4,DocumentReference:fs,DocumentSnapshot:xh,Query:gn,QueryDocumentSnapshot:_h,QuerySnapshot:u_,CollectionReference:Tc,FieldPath:j1,FieldValue:Ka,setLogLevel:WW,CACHE_SIZE_UNLIMITED:sW};function XW(t,e){t.INTERNAL.registerComponent(new xs("firestore-compat",n=>{const s=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(s,r)},"PUBLIC").setServiceProps({...QW}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JW(t){XW(t,(e,n)=>new C4(e,n,new KW)),t.registerVersion(HW,GW)}JW(Me);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4="firebasestorage.googleapis.com",O4="storageBucket",ZW=2*60*1e3,eY=10*60*1e3,tY=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot extends cn{constructor(e,n,s=0){super(iv(e),`Firebase Storage: ${n} (${iv(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return iv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xe||(Xe={}));function iv(t){return"storage/"+t}function P1(){const t="An unknown error occurred, please check the error payload for server response.";return new ot(Xe.UNKNOWN,t)}function nY(t){return new ot(Xe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function sY(t){return new ot(Xe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function rY(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ot(Xe.UNAUTHENTICATED,t)}function iY(){return new ot(Xe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function aY(t){return new ot(Xe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function V4(){return new ot(Xe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function L4(){return new ot(Xe.CANCELED,"User canceled the upload/download.")}function oY(t){return new ot(Xe.INVALID_URL,"Invalid URL '"+t+"'.")}function lY(t){return new ot(Xe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function cY(){return new ot(Xe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+O4+"' property when initializing the app?")}function U4(){return new ot(Xe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function uY(){return new ot(Xe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function dY(){return new ot(Xe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function hY(t){return new ot(Xe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Bl(t){return new ot(Xe.INVALID_ARGUMENT,t)}function z4(){return new ot(Xe.APP_DELETED,"The Firebase app was deleted.")}function F4(t){return new ot(Xe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cd(t,e){return new ot(Xe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Du(t){throw new ot(Xe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=on.makeFromUrl(e,n)}catch{return new on(e,"")}if(s.path==="")return s;throw lY(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+r+a,"i"),c={bucket:1,path:3};function u(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${h}/b/${r}/o${m}`,"i"),_={bucket:1,path:3},w=n===M4?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",x=new RegExp(`^https?://${w}/${r}/${T}`,"i"),b=[{regex:o,indices:c,postModify:i},{regex:p,indices:_,postModify:u},{regex:x,indices:{bucket:1,path:2},postModify:u}];for(let R=0;R<b.length;R++){const D=b[R],M=D.regex.exec(e);if(M){const A=M[D.indices.bucket];let E=M[D.indices.path];E||(E=""),s=new on(A,E),D.postModify(s);break}}if(s==null)throw oY(e);return s}}class fY{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mY(t,e,n){let s=1,r=null,i=null,a=!1,o=0;function c(){return o===2}let u=!1;function h(...T){u||(u=!0,e.apply(null,T))}function f(T){r=setTimeout(()=>{r=null,t(p,c())},T)}function m(){i&&clearTimeout(i)}function p(T,...x){if(u){m();return}if(T){m(),h.call(null,T,...x);return}if(c()||a){m(),h.call(null,T,...x);return}s<64&&(s*=2);let b;o===1?(o=2,b=0):b=(s+Math.random())*1e3,f(b)}let _=!1;function w(T){_||(_=!0,m(),!u&&(r!==null?(T||(o=2),clearTimeout(r),f(0)):T||(o=1)))}return f(0),i=setTimeout(()=>{a=!0,w(!0)},n),w}function pY(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gY(t){return t!==void 0}function yY(t){return typeof t=="function"}function vY(t){return typeof t=="object"&&!Array.isArray(t)}function xy(t){return typeof t=="string"||t instanceof String}function uI(t){return k1()&&t instanceof Blob}function k1(){return typeof Blob<"u"}function d_(t,e,n,s){if(s<e)throw Bl(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw Bl(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function B4(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var oo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(oo||(oo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||r||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xY{constructor(e,n,s,r,i,a,o,c,u,h,f,m=!0,p=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,w)=>{this.resolve_=_,this.reject_=w,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new tm(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=o=>{const c=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const o=i.getErrorCode()===oo.NO_ERROR,c=i.getStatus();if(!o||q4(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===oo.ABORT;s(!1,new tm(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;s(!0,new tm(u,i))})},n=(s,r)=>{const i=this.resolve_,a=this.reject_,o=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(o,o.getResponse());gY(c)?i(c):i()}catch(c){a(c)}else if(o!==null){const c=P1();c.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,c)):a(c)}else if(r.canceled){const c=this.appDelete_?z4():L4();a(c)}else{const c=V4();a(c)}};this.canceled_?n(!1,new tm(!1,null,!0)):this.backoffId_=mY(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&pY(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tm{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function _Y(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function bY(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function wY(t,e){e&&(t["X-Firebase-GMPID"]=e)}function TY(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function EY(t,e,n,s,r,i,a=!0,o=!1){const c=B4(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return wY(h,e),_Y(h,n),bY(h,i),TY(h,s),new xY(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SY(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function AY(...t){const e=SY();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(k1())return new Blob(t);throw new ot(Xe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function NY(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IY(t){if(typeof atob>"u")throw hY("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class av{constructor(e,n){this.data=e,this.contentType=n||null}}function H4(t,e){switch(t){case ms.RAW:return new av(G4(e));case ms.BASE64:case ms.BASE64URL:return new av($4(t,e));case ms.DATA_URL:return new av(CY(e),jY(e))}throw P1()}function G4(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=s,a=t.charCodeAt(++n);s=65536|(i&1023)<<10|a&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function RY(t){let e;try{e=decodeURIComponent(t)}catch{throw Cd(ms.DATA_URL,"Malformed data URL.")}return G4(e)}function $4(t,e){switch(t){case ms.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw Cd(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ms.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw Cd(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=IY(e)}catch(r){throw r.message.includes("polyfill")?r:Cd(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class K4{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Cd(ms.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=PY(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function CY(t){const e=new K4(t);return e.base64?$4(ms.BASE64,e.rest):RY(e.rest)}function jY(t){return new K4(t).contentType}function PY(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n){let s=0,r="";uI(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(uI(this.data_)){const s=this.data_,r=NY(s,e,n);return r===null?null:new yr(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new yr(s,!0)}}static getBlob(...e){if(k1()){const n=e.map(s=>s instanceof yr?s.data_:s);return new yr(AY.apply(null,n))}else{const n=e.map(a=>xy(a)?H4(ms.RAW,a).data:a.data_);let s=0;n.forEach(a=>{s+=a.byteLength});const r=new Uint8Array(s);let i=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)r[i++]=a[o]}),new yr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(t){let e;try{e=JSON.parse(t)}catch{return null}return vY(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kY(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function DY(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function W4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MY(t,e){return e}class mn{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||MY}}let nm=null;function OY(t){return!xy(t)||t.length<2?t:W4(t)}function _y(){if(nm)return nm;const t=[];t.push(new mn("bucket")),t.push(new mn("generation")),t.push(new mn("metageneration")),t.push(new mn("name","fullPath",!0));function e(i,a){return OY(a)}const n=new mn("name");n.xform=e,t.push(n);function s(i,a){return a!==void 0?Number(a):a}const r=new mn("size");return r.xform=s,t.push(r),t.push(new mn("timeCreated")),t.push(new mn("updated")),t.push(new mn("md5Hash",null,!0)),t.push(new mn("cacheControl",null,!0)),t.push(new mn("contentDisposition",null,!0)),t.push(new mn("contentEncoding",null,!0)),t.push(new mn("contentLanguage",null,!0)),t.push(new mn("contentType",null,!0)),t.push(new mn("metadata","customMetadata",!0)),nm=t,nm}function VY(t,e){function n(){const s=t.bucket,r=t.fullPath,i=new on(s,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function LY(t,e,n){const s={};s.type="file";const r=n.length;for(let i=0;i<r;i++){const a=n[i];s[a.local]=a.xform(s,e[a.server])}return VY(s,t),s}function Y4(t,e,n){const s=D1(e);return s===null?null:LY(t,s,n)}function UY(t,e,n,s){const r=D1(e);if(r===null||!xy(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(u=>{const h=t.bucket,f=t.fullPath,m="/b/"+a(h)+"/o/"+a(f),p=_a(m,n,s),_=B4({alt:"media",token:u});return p+_})[0]}function M1(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI="prefixes",hI="items";function zY(t,e,n){const s={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[dI])for(const r of n[dI]){const i=r.replace(/\/$/,""),a=t._makeStorageReference(new on(e,i));s.prefixes.push(a)}if(n[hI])for(const r of n[hI]){const i=t._makeStorageReference(new on(e,r.name));s.items.push(i)}return s}function FY(t,e,n){const s=D1(n);return s===null?null:zY(t,e,s)}class ti{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t){if(!t)throw P1()}function by(t,e){function n(s,r){const i=Y4(t,r,e);return er(i!==null),i}return n}function BY(t,e){function n(s,r){const i=FY(t,e,r);return er(i!==null),i}return n}function qY(t,e){function n(s,r){const i=Y4(t,r,e);return er(i!==null),UY(i,r,t.host,t._protocol)}return n}function Xc(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=iY():r=rY():n.getStatus()===402?r=sY(t.bucket):n.getStatus()===403?r=aY(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function wy(t){const e=Xc(t);function n(s,r){let i=e(s,r);return s.getStatus()===404&&(i=nY(t.path)),i.serverResponse=r.serverResponse,i}return n}function Q4(t,e,n){const s=e.fullServerUrl(),r=_a(s,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,o=new ti(r,i,by(t,n),a);return o.errorHandler=wy(e),o}function HY(t,e,n,s,r){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n.length>0&&(i.delimiter=n),s&&(i.pageToken=s),r&&(i.maxResults=r);const a=e.bucketOnlyServerUrl(),o=_a(a,t.host,t._protocol),c="GET",u=t.maxOperationRetryTime,h=new ti(o,c,BY(t,e.bucket),u);return h.urlParams=i,h.errorHandler=Xc(e),h}function GY(t,e,n){const s=e.fullServerUrl(),r=_a(s,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,o=new ti(r,i,qY(t,n),a);return o.errorHandler=wy(e),o}function $Y(t,e,n,s){const r=e.fullServerUrl(),i=_a(r,t.host,t._protocol),a="PATCH",o=M1(n,s),c={"Content-Type":"application/json; charset=utf-8"},u=t.maxOperationRetryTime,h=new ti(i,a,by(t,s),u);return h.headers=c,h.body=o,h.errorHandler=wy(e),h}function KY(t,e){const n=e.fullServerUrl(),s=_a(n,t.host,t._protocol),r="DELETE",i=t.maxOperationRetryTime;function a(c,u){}const o=new ti(s,r,a,i);return o.successCodes=[200,204],o.errorHandler=wy(e),o}function WY(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function X4(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=WY(null,e)),s}function YY(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let b="";for(let R=0;R<2;R++)b=b+Math.random().toString().slice(2);return b}const c=o();a["Content-Type"]="multipart/related; boundary="+c;const u=X4(e,s,r),h=M1(u,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+c+"--",p=yr.getBlob(f,s,m);if(p===null)throw U4();const _={name:u.fullPath},w=_a(i,t.host,t._protocol),T="POST",x=t.maxUploadRetryTime,v=new ti(w,T,by(t,n),x);return v.urlParams=_,v.headers=a,v.body=p.uploadData(),v.errorHandler=Xc(e),v}class Zp{constructor(e,n,s,r){this.current=e,this.total=n,this.finalized=!!s,this.metadata=r||null}}function O1(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{er(!1)}return er(!!n&&(e||["active"]).indexOf(n)!==-1),n}function QY(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),a=X4(e,s,r),o={name:a.fullPath},c=_a(i,t.host,t._protocol),u="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},f=M1(a,n),m=t.maxUploadRetryTime;function p(w){O1(w);let T;try{T=w.getResponseHeader("X-Goog-Upload-URL")}catch{er(!1)}return er(xy(T)),T}const _=new ti(c,u,p,m);return _.urlParams=o,_.headers=h,_.body=f,_.errorHandler=Xc(e),_}function XY(t,e,n,s){const r={"X-Goog-Upload-Command":"query"};function i(u){const h=O1(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{er(!1)}f||er(!1);const m=Number(f);return er(!isNaN(m)),new Zp(m,s.size(),h==="final")}const a="POST",o=t.maxUploadRetryTime,c=new ti(n,a,i,o);return c.headers=r,c.errorHandler=Xc(e),c}const fI=256*1024;function JY(t,e,n,s,r,i,a,o){const c=new Zp(0,0);if(a?(c.current=a.current,c.total=a.total):(c.current=0,c.total=s.size()),s.size()!==c.total)throw uY();const u=c.total-c.current;let h=u;r>0&&(h=Math.min(h,r));const f=c.current,m=f+h;let p="";h===0?p="finalize":u===h?p="upload, finalize":p="upload";const _={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${c.current}`},w=s.slice(f,m);if(w===null)throw U4();function T(R,D){const M=O1(R,["active","final"]),A=c.current+h,E=s.size();let N;return M==="final"?N=by(e,i)(R,D):N=null,new Zp(A,E,M==="final",N)}const x="POST",v=e.maxUploadRetryTime,b=new ti(n,x,T,v);return b.headers=_,b.body=w.uploadData(),b.progressCallback=o||null,b.errorHandler=Xc(t),b}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZY={STATE_CHANGED:"state_changed"},vn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ov(t){switch(t){case"running":case"pausing":case"canceling":return vn.RUNNING;case"paused":return vn.PAUSED;case"success":return vn.SUCCESS;case"canceled":return vn.CANCELED;case"error":return vn.ERROR;default:return vn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eQ{constructor(e,n,s){if(yY(e)||n!=null||s!=null)this.next=e,this.error=n??void 0,this.complete=s??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class tQ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=oo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=oo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=oo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r,i){if(this.sent_)throw Du("cannot .send() more than once");if(fa(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Du("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Du("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Du("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Du("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class nQ extends tQ{initXhr(){this.xhr_.responseType="text"}}function qs(){return new nQ}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=s,this._mappings=_y(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Xe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(q4(r.status,[]))if(i)r=V4();else{this.sleepTime=Math.max(this.sleepTime*2,tY),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Xe.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,i)=>{this._resolve=r,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,s])=>{switch(this._state){case"running":e(n,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const s=QY(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(s,qs,e,n);this._request=r,r.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,s)=>{const r=XY(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,qs,n,s);this._request=i,i.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=fI*this._chunkMultiplier,n=new Zp(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((r,i)=>{let a;try{a=JY(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const o=this._ref.storage._makeRequest(a,qs,r,i,!1);this._request=o,o.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){fI*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const s=Q4(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(s,qs,e,n);this._request=r,r.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const s=YY(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(s,qs,e,n);this._request=r,r.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=L4(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=ov(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,s,r){const i=new eQ(n||void 0,s||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(ov(this._state)){case vn.SUCCESS:el(this._resolve.bind(null,this.snapshot))();break;case vn.CANCELED:case vn.ERROR:const n=this._reject;el(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ov(this._state)){case vn.RUNNING:case vn.PAUSED:e.next&&el(e.next.bind(e,this.snapshot))();break;case vn.SUCCESS:e.complete&&el(e.complete.bind(e))();break;case vn.CANCELED:case vn.ERROR:e.error&&el(e.error.bind(e,this._error))();break;default:e.error&&el(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n){this._service=e,n instanceof on?this._location=n:this._location=on.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new No(e,n)}get root(){const e=new on(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return W4(this._location.path)}get storage(){return this._service}get parent(){const e=kY(this._location.path);if(e===null)return null;const n=new on(this._location.bucket,e);return new No(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw F4(e)}}function sQ(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new J4(t,new yr(e),n)}function rQ(t){const e={prefixes:[],items:[]};return Z4(t,e).then(()=>e)}async function Z4(t,e,n){const r=await eO(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&await Z4(t,e,r.nextPageToken)}function eO(t,e){e!=null&&typeof e.maxResults=="number"&&d_("options.maxResults",1,1e3,e.maxResults);const n=e||{},s=HY(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(s,qs)}function iQ(t){t._throwIfRoot("getMetadata");const e=Q4(t.storage,t._location,_y());return t.storage.makeRequestWithTokens(e,qs)}function aQ(t,e){t._throwIfRoot("updateMetadata");const n=$Y(t.storage,t._location,e,_y());return t.storage.makeRequestWithTokens(n,qs)}function oQ(t){t._throwIfRoot("getDownloadURL");const e=GY(t.storage,t._location,_y());return t.storage.makeRequestWithTokens(e,qs).then(n=>{if(n===null)throw dY();return n})}function lQ(t){t._throwIfRoot("deleteObject");const e=KY(t.storage,t._location);return t.storage.makeRequestWithTokens(e,qs)}function tO(t,e){const n=DY(t._location.path,e),s=new on(t._location.bucket,n);return new No(t.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cQ(t){return/^[A-Za-z]+:\/\//.test(t)}function uQ(t,e){return new No(t,e)}function nO(t,e){if(t instanceof V1){const n=t;if(n._bucket==null)throw cY();const s=new No(n,n._bucket);return e!=null?nO(s,e):s}else return e!==void 0?tO(t,e):t}function dQ(t,e){if(e&&cQ(e)){if(t instanceof V1)return uQ(t,e);throw Bl("To use ref(service, url), the first argument must be a Storage instance.")}else return nO(t,e)}function mI(t,e){const n=e==null?void 0:e[O4];return n==null?null:on.makeFromBucketSpec(n,t)}function hQ(t,e,n,s={}){t.host=`${e}:${n}`;const r=fa(e);r&&(Wb(`https://${t.host}/b`),Yb("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:NP(i,t.app.options.projectId))}class V1{constructor(e,n,s,r,i,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=M4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ZW,this._maxUploadRetryTime=eY,this._requests=new Set,r!=null?this._bucket=on.makeFromBucketSpec(r,this._host):this._bucket=mI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=on.makeFromBucketSpec(this._url,e):this._bucket=mI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){d_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){d_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ke(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new No(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new fY(z4());{const a=EY(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const pI="@firebase/storage",gI="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fQ="storage";function mQ(t,e,n){return t=J(t),sQ(t,e,n)}function pQ(t){return t=J(t),iQ(t)}function gQ(t,e){return t=J(t),aQ(t,e)}function yQ(t,e){return t=J(t),eO(t,e)}function vQ(t){return t=J(t),rQ(t)}function xQ(t){return t=J(t),oQ(t)}function _Q(t){return t=J(t),lQ(t)}function yI(t,e){return t=J(t),dQ(t,e)}function bQ(t,e){return tO(t,e)}function wQ(t,e,n,s={}){hQ(t,e,n,s)}function TQ(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new V1(n,s,r,e,Wr)}function EQ(){zr(new xs(fQ,TQ,"PUBLIC").setMultipleInstances(!0)),Wn(pI,gI,""),Wn(pI,gI,"esm2020")}EQ();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,n,s){this._delegate=e,this.task=n,this.ref=s}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new sm(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(s=>{if(e)return e(new sm(s,this,this._ref))},n)}on(e,n,s,r){let i;return n&&(typeof n=="function"?i=a=>n(new sm(a,this,this._ref)):i={next:n.next?a=>n.next(new sm(a,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,i,s||void 0,r||void 0)}}class xI{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Ir(e,this._service))}get items(){return this._delegate.items.map(e=>new Ir(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=bQ(this._delegate,e);return new Ir(n,this.storage)}get root(){return new Ir(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Ir(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new vI(mQ(this._delegate,e,n),this)}putString(e,n=ms.RAW,s){this._throwIfRoot("putString");const r=H4(n,e),i={...s};return i.contentType==null&&r.contentType!=null&&(i.contentType=r.contentType),new vI(new J4(this._delegate,new yr(r.data,!0),i),this)}listAll(){return vQ(this._delegate).then(e=>new xI(e,this.storage))}list(e){return yQ(this._delegate,e||void 0).then(n=>new xI(n,this.storage))}getMetadata(){return pQ(this._delegate)}updateMetadata(e){return gQ(this._delegate,e)}getDownloadURL(){return xQ(this._delegate)}delete(){return this._throwIfRoot("delete"),_Q(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw F4(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(_I(e))throw Bl("ref() expected a child path but got a URL, use refFromURL instead.");return new Ir(yI(this._delegate,e),this)}refFromURL(e){if(!_I(e))throw Bl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{on.makeFromUrl(e,this._delegate.host)}catch{throw Bl("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ir(yI(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,s={}){wQ(this._delegate,e,n,s)}}function _I(t){return/^[A-Za-z]+:\/\//.test(t)}const SQ="@firebase/storage-compat",AQ="0.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NQ="storage-compat";function IQ(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),s=t.getProvider("storage").getImmediate({identifier:e});return new sO(n,s)}function RQ(t){const e={TaskState:vn,TaskEvent:ZY,StringFormat:ms,Storage:sO,Reference:Ir};t.INTERNAL.registerComponent(new xs(NQ,IQ,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(SQ,AQ)}RQ(Me);const CQ={apiKey:"AIzaSyDzEay5fGB-2r5_V9UXOO8cOv-nJdHwDRg",authDomain:"rush-coffee.firebaseapp.com",projectId:"rush-coffee",storageBucket:"rush-coffee.appspot.com",messagingSenderId:"423413538635",appId:"1:423413538635:web:ded0369f50c3a9086bd2ce"};Me.apps.length||Me.initializeApp(CQ);const ja=Me.auth(),_e=Me.firestore(),jQ=Me.storage(),rO=S.createContext(void 0),ts=()=>{const t=S.useContext(rO);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},PQ=({children:t})=>{const[e,n]=S.useState(null),[s,r]=S.useState(!0);S.useEffect(()=>{let p;const _=ja.onAuthStateChanged(async w=>{p&&p(),w?p=_e.collection("users").doc(w.uid).onSnapshot(x=>{var v;if(x.exists){const b=x.data(),R={uid:w.uid,email:w.email,firstName:b.firstName||"User",lastName:b.lastName||"",phone:b.phone||"",photoURL:b.photoURL,createdAt:((v=b.createdAt)==null?void 0:v.toDate())||new Date,role:b.role,totalOrders:b.totalOrders??0,totalSpent:b.totalSpent??0,currentPoints:b.currentPoints??0,lifetimePoints:b.lifetimePoints??0,tier:b.tier||"bronze",rewardsHistory:(b.rewardsHistory||[]).map(D=>({...D,date:D.date.toDate()})).sort((D,M)=>M.date-D.date),preferences:b.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}};n(R)}else console.log("User document not found for UID:",w.uid);r(!1)},x=>{console.error("Error listening to user document:",x),n(null),r(!1)}):(n(null),r(!1))});return()=>{_(),p&&p()}},[]);const m={currentUser:e,loading:s,register:async(p,_,w,T,x)=>{const b=(await ja.createUserWithEmailAndPassword(p,_)).user,R={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},D={firstName:w,lastName:T,phone:x||"",createdAt:new Date,totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[R],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await _e.collection("users").doc(b.uid).set(D)},login:async(p,_,w)=>{const T=w?Me.auth.Auth.Persistence.LOCAL:Me.auth.Auth.Persistence.SESSION;await ja.setPersistence(T),await ja.signInWithEmailAndPassword(p,_)},logout:async()=>{await ja.signOut()},sendPasswordReset:async p=>{await ja.sendPasswordResetEmail(p)},signInWithGoogle:async()=>{var x;const p=new Me.auth.GoogleAuthProvider,_=await ja.signInWithPopup(p),w=_.user,T=_.additionalUserInfo;if(T!=null&&T.isNewUser){const v=((x=w.displayName)==null?void 0:x.split(" "))||["New","User"],b=v[0],R=v.slice(1).join(" ")||"",D={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},M={firstName:b,lastName:R,photoURL:w.photoURL||void 0,createdAt:new Date,totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[D],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await _e.collection("users").doc(w.uid).set(M)}},updateUserProfile:async p=>{if(!e)return;await _e.collection("users").doc(e.uid).update(p)},updateUserPhoto:async p=>{if(!e)return;await _e.collection("users").doc(e.uid).update({photoURL:p})}};return l.jsx(rO.Provider,{value:m,children:!s&&t})},ce=t=>`/RushCoffee-Capstone/${t}`,iO=[{id:"cb-01",name:"Spanish Latte",description:"A creamy and sweet latte with a Spanish twist, featuring condensed milk for a rich flavor.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:ce("coffee-based/spanish-latte.png"),available:!0,stock:99,popular:!0,displayOrder:1,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"condensed-milk",quantity:30}]},{id:"cb-02",name:"Rush Coffee Blend",description:"Our signature house blend, perfectly balanced for a smooth and satisfying coffee experience.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:89}],imageUrl:ce("coffee-based/rush-coffee-blend.png"),available:!0,stock:99,popular:!0,displayOrder:2,recipe:[{ingredientId:"coffee-beans-blend",quantity:18},{ingredientId:"hot-water",quantity:200}]},{id:"cb-03",name:"Caramel Chocolate Mocha",description:"A decadent mix of rich chocolate, espresso, and creamy caramel for the ultimate treat.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:ce("coffee-based/caramel-chocolate-mocha.jpg"),available:!0,stock:99,popular:!0,displayOrder:3,recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"chocolate-sauce",quantity:20},{ingredientId:"caramel-sauce",quantity:15}]},{id:"cb-04",name:"Dark Chocolate Mocha",description:"A bold and intense mocha experience with premium dark chocolate and strong espresso.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:ce("coffee-based/dark-chocolate-mocha.jpg"),available:!0,stock:99,displayOrder:4},{id:"cb-05",name:"Mocha Latte",description:"A classic blend of smooth espresso, rich chocolate sauce, and steamed milk.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:ce("coffee-based/mocha-latte.jpg"),available:!0,stock:99,displayOrder:5},{id:"cb-06",name:"Americano",description:"Bold espresso shots topped with hot water to create a light layer of crema.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:ce("coffee-based/americano.jpg"),available:!0,stock:99,displayOrder:6},{id:"cb-07",name:"Biscoff Latte",description:"An indulgent latte infused with the irresistible flavor of caramelized Biscoff cookies.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:199}],imageUrl:ce("coffee-based/biscoff-latte.jpg"),available:!0,stock:99,displayOrder:7},{id:"cb-08",name:"Reeses Latte",description:"The perfect combination of peanut butter, chocolate, and espresso. A candy lover's dream.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:ce("coffee-based/reeses-latte.jpg"),available:!0,stock:99,displayOrder:8},{id:"cb-09",name:"Brown Sugar Latte",description:"A comforting latte sweetened with rich, molasses-like brown sugar syrup.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:79}],imageUrl:ce("coffee-based/brown-sugar-latte.jpg"),available:!0,stock:99,displayOrder:9},{id:"cb-10",name:"Iced Latte",description:"A simple classic. Chilled espresso with cold milk served over ice.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:69}],imageUrl:ce("coffee-based/iced-latte.jpg"),available:!0,stock:99,displayOrder:10},{id:"cb-11",name:"Orange Latte",description:"A unique and refreshing latte with a zesty hint of natural orange flavor.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:89}],imageUrl:ce("coffee-based/orange-latte.jpg"),available:!0,stock:99,displayOrder:11},{id:"cb-12",name:"Coffee Jelly",description:"A delightful iced coffee drink with chewy, coffee-flavored jelly cubes.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:99}],imageUrl:ce("coffee-based/coffee-jelly.jpg"),available:!0,stock:99,displayOrder:12},{id:"nc-01",name:"Red Velvet",description:"A sweet and creamy drink inspired by the classic red velvet cake, with hints of cocoa and vanilla.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:ce("non-coffee/red-velvet.jpg"),available:!0,stock:99,displayOrder:13},{id:"nc-02",name:"Red Velvet Matcha Latte",description:"A beautiful and delicious blend of earthy matcha and sweet red velvet flavors.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:ce("non-coffee/red-velvet-matcha-latte.jpg"),available:!0,stock:99,displayOrder:14},{id:"nc-03",name:"Milky Choco",description:"A rich and comforting chocolate drink made with high-quality cocoa and fresh milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:ce("non-coffee/milky-choco.jpg"),available:!0,stock:99,displayOrder:15},{id:"nc-04",name:"Strawberry Milk",description:"A refreshing and creamy drink made with real strawberries and fresh milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:ce("non-coffee/strawberry-milk.jpg"),available:!0,stock:99,displayOrder:16},{id:"nc-05",name:"Biscoff Milky",description:"A non-coffee treat blending the sweet, caramelized taste of Biscoff with creamy milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:ce("non-coffee/biscoff-milky.jpg"),available:!0,stock:99,displayOrder:17},{id:"nc-06",name:"Oreo Latte",description:"A fun and delicious drink packed with the classic cookies and cream flavor of Oreos.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:ce("non-coffee/oreo-latte.jpg"),available:!0,stock:99,displayOrder:18},{id:"ms-01",name:"Matcha Latte",description:"Premium Japanese matcha green tea with steamed milk, a perfect balance of earthy and creamy.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:89}],imageUrl:ce("matcha-series/matcha-latte.jpg"),available:!0,stock:99,popular:!0,displayOrder:19,recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:200}]},{id:"ms-02",name:"Strawberry Matcha",description:"A delightful pairing of sweet strawberry puree and high-quality matcha green tea.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:109}],imageUrl:ce("matcha-series/strawberry-matcha.jpg"),available:!0,stock:99,displayOrder:20},{id:"ms-03",name:"Matcha Cream Cheese",description:"Earthy matcha topped with a rich, savory, and slightly sweet cream cheese foam.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:109}],imageUrl:ce("matcha-series/matcha-cream-cheese.jpg"),available:!0,stock:99,displayOrder:21},{id:"ms-04",name:"Matcha Oreo",description:"A creative blend of matcha and crushed Oreo cookies for a unique texture and flavor.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:ce("matcha-series/matcha-oreo.jpg"),available:!0,stock:99,displayOrder:22},{id:"rf-01",name:"Flamangooverload Shake",description:"An explosive mix of flamingo and mango for an overload of fruity goodness.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:ce("refreshments/flamangooverload.jpg"),available:!0,stock:99,displayOrder:23},{id:"rf-02",name:"Mangoberry Shake",description:"A delightful blend of sweet mangoes and tangy berries, perfectly refreshing.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:ce("refreshments/mangoberry.jpg"),available:!0,stock:99,displayOrder:24},{id:"rf-03",name:"Mango Caramel Shake",description:"Creamy mango shake drizzled with rich, buttery caramel sauce.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:ce("refreshments/mango-caramel.jpg"),available:!0,stock:99,displayOrder:25},{id:"rf-04",name:"Blueberry Shake",description:"A classic fruit shake made with sweet and juicy blueberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:ce("refreshments/blueberry-shake.jpg"),available:!0,stock:99,displayOrder:26},{id:"rf-05",name:"Strawberry Shake",description:"A creamy and delicious shake made with ripe, sweet strawberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:ce("refreshments/strawberry-shake.jpg"),available:!0,stock:99,displayOrder:27},{id:"rf-06",name:"Green Apple Shake",description:"A tart and refreshing shake with the crisp taste of green apples.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:ce("refreshments/green-apple-shake.jpg"),available:!0,stock:99,displayOrder:28},{id:"rf-07",name:"Blueberry Soda Pop",description:"Fizzy and fun, this soda pop is bursting with sweet blueberry flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:ce("refreshments/blueberry-soda.jpg"),available:!0,stock:99,displayOrder:29},{id:"rf-08",name:"Strawberry Soda Pop",description:"A refreshing soda pop with the sweet taste of summer strawberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:ce("refreshments/strawberry-soda.jpg"),available:!0,stock:99,displayOrder:30},{id:"rf-09",name:"Green Apple Soda Pop",description:"A crisp and bubbly soda with a tangy green apple twist.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:ce("refreshments/green-apple-soda.jpg"),available:!0,stock:99,displayOrder:31},{id:"rf-10",name:"Lemon Soda Pop",description:"A zesty and invigorating soda pop with a classic lemon flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:ce("refreshments/lemon-soda.jpg"),available:!0,stock:99,displayOrder:32},{id:"rf-11",name:"Lychee Soda Pop",description:"An exotic and fragrant soda pop with the sweet, floral taste of lychee.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:ce("refreshments/lychee-soda.jpg"),available:!0,stock:99,displayOrder:33},{id:"rf-12",name:"Mango Soda Pop",description:"A tropical and bubbly soda bursting with sweet mango flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:ce("refreshments/mango-soda.jpg"),available:!0,stock:99,displayOrder:34},{id:"ml-01",name:"Breaded Bacon",description:"Crispy breaded bacon served with creamy white sauce and golden fries.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:119},{name:"Combo Meal",size:"w/ Fries & Drink",price:139}],imageUrl:ce("menu/ala-carte-breaded-bacon-with-white-sauce and fries.jpg"),comboImageUrl:ce("menu/combo-meals-breaded-bacon-with-white-sauce,-fries-and-a-drink.jpg"),available:!0,stock:99,popular:!0,displayOrder:35},{id:"ml-02",name:"Breaded Porkchop",description:"A juicy breaded porkchop fried to perfection, served with white sauce and fries.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:129},{name:"Combo Meal",size:"w/ Fries & Drink",price:149}],imageUrl:ce("menu/ala-carte-breaded-porkchop-with-white-sauce-and-fries.jpg"),comboImageUrl:ce("menu/combo-meals-breaded-porkchop-with-white-sauce-and-fries-w-drink.jpg"),available:!0,stock:99,popular:!0,displayOrder:36},{id:"ml-03",name:"Breaded Chicken",description:"Tender breaded chicken fillet with a side of fries and our signature white sauce.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:119},{name:"Combo Meal",size:"w/ Fries & Drink",price:139}],imageUrl:ce("menu/ala-carte-chicken-with-white-sauce-and-fries.jpg"),comboImageUrl:ce("menu/combo-meals-breaded-chicken-with-white-sauce,-fries-and-a-drink.jpg"),available:!0,stock:99,displayOrder:37}],aO=S.createContext(void 0),Jc=()=>{const t=S.useContext(aO);if(!t)throw new Error("useProduct must be used within a ProductProvider");return t},kQ=({children:t})=>{const[e,n]=S.useState([]),[s,r]=S.useState(!0),[i,a]=S.useState(null),o=S.useCallback(async()=>{r(!0);try{const w=(await _e.collection("products").orderBy("displayOrder","asc").get()).docs.map(T=>({id:T.id,...T.data()}));n(w)}catch(m){console.error("Error fetching products from Firestore: ",m),a("Could not connect to the database. Please check your connection and try again."),n([])}finally{r(!1)}},[]);S.useEffect(()=>{(async()=>{r(!0);const p=_e.collection("products");console.log("Syncing products with the latest mock data to ensure freshness...");try{const _=_e.batch();iO.forEach(w=>{const{id:T,...x}=w,v=p.doc(T);_.set(v,x)}),await _.commit(),console.log("Product sync complete.")}catch(_){console.error("Error syncing products:",_),a("Failed to sync the product database."),r(!1);return}await o()})()},[o]);const f={products:e,isLoading:s,error:i,addProduct:async m=>{try{await _e.collection("products").add(m),await o()}catch(p){throw console.error("Error adding product: ",p),new Error("Failed to add product.")}},updateProduct:async(m,p)=>{try{await _e.collection("products").doc(m).update(p),await o()}catch(_){throw console.error("Error updating product: ",_),new Error("Failed to update product.")}},deleteProduct:async m=>{try{await _e.collection("products").doc(m).delete(),await o()}catch(p){throw console.error("Error deleting product: ",p),new Error("Failed to delete product.")}}};return l.jsx(aO.Provider,{value:f,children:t})},oO=S.createContext(void 0),Dn=()=>{const t=S.useContext(oO);if(t===void 0)throw new Error("useCart must be used within a CartProvider");return t},DQ=({children:t})=>{const[e,n]=S.useState([]),[s,r]=S.useState(!1),[i,a]=S.useState(null),[o,c]=S.useState(!0),{currentUser:u}=ts(),{products:h,isLoading:f}=Jc();S.useEffect(()=>{if(i){const A=setTimeout(()=>a(null),4e3);return()=>clearTimeout(A)}},[i]);const m=S.useCallback(A=>{a(A)},[]);S.useEffect(()=>{u?(async()=>{var E;if(!(!u||f)){c(!0);try{const I=await _e.collection("users").doc(u.uid).get();if(I.exists){const k=(((E=I.data())==null?void 0:E.cart)||[]).map(j=>{const W=h.find(H=>H.id===j.productId);if(!W)return null;const ue=W.sizes.find(H=>H.name===j.sizeName);return ue?{id:`${W.id}-${ue.name}`,product:W,selectedSize:ue,quantity:j.quantity}:null}).filter(j=>j!==null);n(k)}}catch(N){console.error("Error fetching cart from Firestore:",N),m("Couldn't load your cart.")}finally{c(!1)}}})():(n([]),c(!1))},[u,h,f,m]);const p=S.useCallback(async A=>{if(u)try{const E=_e.collection("users").doc(u.uid),N=A.map(I=>({productId:I.product.id,sizeName:I.selectedSize.name,quantity:I.quantity}));await E.update({cart:N})}catch(E){console.error("Error updating Firestore cart:",E),m("Error saving your cart.")}},[u,m]),_=S.useMemo(()=>e.reduce((A,E)=>A+E.quantity,0),[e]),w=()=>r(!0),M={cartItems:e,isCartOpen:s,toastMessage:i,totalCartItems:_,isCartLoading:o,addToCart:(A,E)=>{const N=`${A.id}-${E.name}`;let I;e.find(k=>k.id===N)?I=e.map(k=>k.id===N?{...k,quantity:Math.min(k.quantity+1,A.stock)}:k):I=[...e,{id:N,product:A,selectedSize:E,quantity:1}],n(I),p(I),m(`${A.name} (${E.name}) added to cart!`),w()},addMultipleToCart:A=>{if(!A||A.length===0)return;let E=[...e],N=0;A.forEach(I=>{const P=`${I.product.id}-${I.selectedSize.name}`,k=E.findIndex(j=>j.id===P);if(k>-1){const j=E[k],W=j.quantity+I.quantity;E[k]={...j,quantity:Math.min(W,I.product.stock)}}else E.push({id:P,product:I.product,selectedSize:I.selectedSize,quantity:Math.min(I.quantity,I.product.stock)});N+=I.quantity}),n(E),p(E),m(`${N} item(s) added to your cart!`),w()},updateQuantity:(A,E)=>{let N;E<1?N=e.filter(I=>I.id!==A):N=e.map(I=>I.id===A?{...I,quantity:Math.min(E,I.product.stock)}:I),n(N),p(N)},removeFromCart:A=>{const E=e.find(I=>I.id===A),N=e.filter(I=>I.id!==A);n(N),p(N),E&&m(`${E.product.name} (${E.selectedSize.name}) removed from cart.`)},openCart:w,closeCart:()=>r(!1),showToast:m,clearCart:()=>{n([]),p([])}};return l.jsx(oO.Provider,{value:M,children:t})},kt=({className:t,...e})=>l.jsxs("svg",{viewBox:"0 0 241 175",xmlns:"http://www.w3.org/2000/svg",className:t,fill:"currentColor",...e,children:[l.jsx("path",{d:"M153.092 78.5C178.275 50.84 210.393 19.4076 222.5 17.5C234.607 15.5924 239.5 30 239.5 30C239.5 30 244.137 46.596 236.388 72.8253C228.64 99.0547 199 128.5 199 128.5C199 128.5 177.5 152.5 147.5 167C147.5 167 114.686 183.001 104.889 169.159C95.0912 155.316 127.909 106.16 153.092 78.5Z"}),l.jsx("path",{d:"M8.99445 86.0801C8.99445 86.0801 -16.2682 31.1886 17.8826 14.4198C33.7618 9.56756 76 55.675 76 64.5C76 70 63.7899 86.337 59 101.5C54.887 114.52 55.557 134.266 52.0896 135.774C48.0468 137.533 37.3644 137.835 8.99445 86.0801Z"}),l.jsx("path",{d:"M47 12.5C41.0274 7.52362 41.5502 -7.59339e-06 52.5 0C63.4498 7.5934e-06 69.3348 2.24286 82.0884 7.45282C95.3718 12.8792 105.888 16.4103 109.463 23.875C111.5 32.5 107.979 33.026 103.5 38.5C99.0205 43.9741 96 44.1666 91 43.5C83.5342 42.5047 52.9726 17.4764 47 12.5Z"}),l.jsx("path",{d:"M200.048 20.8891C212.988 11.4339 207.491 2.52815 200.048 2.97405C192.604 3.41995 127.379 9.72972 89.5542 67.6673C85.4261 73.9905 72.4385 95.2439 69.1452 112.455C65.6022 130.971 65.8681 149.097 73.6272 157.74C81.0528 166.012 88.1891 164.145 92.2823 156.482C96.4277 148.721 97.4982 135.065 100.004 127.882C104.983 113.605 104.907 116.382 109.393 106.379C114.278 95.4879 120.938 86.2377 126.993 78.4363C154.543 42.9442 190.775 27.6646 200.048 20.8891Z"})]}),MQ=[{href:"/",label:"Home"},{href:"/about",label:"About"},{href:"/menu",label:"Menu"},{href:"/contact",label:"Contact"}],OQ=[{href:"/menu",label:"Menu"},{href:"/queue",label:"Queue"},{href:"/rewards",label:"Rewards"}],bI=[{href:"/profile",label:"My Profile",Icon:Lr},{href:"/rewards",label:"My Rewards",Icon:Qd},{href:"/about",label:"About",Icon:$9},{href:"/contact",label:"Contact",Icon:Vr}],Rt=()=>{const[t,e]=S.useState(!1),[n,s]=S.useState(!1),r=S.useRef(null),{currentUser:i,logout:a}=ts(),{totalCartItems:o,openCart:c}=Dn(),u=Ds(),h=i?OQ:MQ,f=()=>e(!1);S.useEffect(()=>{const T=x=>{r.current&&!r.current.contains(x.target)&&s(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]),S.useEffect(()=>{const T=()=>{window.innerWidth>=768&&e(!1)};return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),S.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[t]);const m=async()=>{await a(),f(),s(!1),u("/")},p=()=>e(!t),_=(T=!1)=>{const x="rounded-full text-sm font-semibold transition-colors",v="block w-full text-center py-3 text-base",b="px-6 py-2",R=T?f:void 0;return i?l.jsxs("div",{className:`relative ${T?"w-full":""}`,ref:r,children:[l.jsxs("button",{onClick:()=>s(!n),className:`flex w-full items-center justify-center gap-2 rounded-full border border-primary-600 px-4 py-2 text-sm font-semibold text-primary-600 transition-colors hover:bg-primary-50 ${T?"text-base":""}`,"aria-haspopup":"true","aria-expanded":n,children:[l.jsxs("span",{children:["Welcome, ",i.firstName,"!"]}),l.jsx(Fh,{className:`h-4 w-4 transition-transform ${n?"rotate-180":""}`})]}),n&&!T&&l.jsx("div",{className:"absolute right-0 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:l.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[bI.map(D=>l.jsxs(rs,{to:D.href,onClick:()=>s(!1),className:({isActive:M})=>`flex items-center gap-3 px-4 py-2 text-sm transition-colors hover:bg-gray-100 ${M?"text-primary-600 font-semibold":"text-gray-700"}`,role:"menuitem",children:[l.jsx(D.Icon,{className:"h-4 w-4"}),D.label]},D.label)),i.role==="admin"&&l.jsxs(l.Fragment,{children:[l.jsx("hr",{className:"my-1"}),l.jsxs(rs,{to:"/admin",onClick:()=>s(!1),className:"flex items-center gap-3 px-4 py-2 text-sm font-semibold text-yellow-700 transition-colors hover:bg-yellow-50",role:"menuitem",children:[l.jsx(Xd,{className:"h-4 w-4"}),"Admin Dashboard"]})]}),l.jsx("hr",{className:"my-1"}),l.jsxs("button",{onClick:m,className:"flex w-full items-center gap-3 px-4 py-2 text-left text-sm text-red-600 transition-colors hover:bg-red-50",role:"menuitem",children:[l.jsx(ZS,{className:"h-4 w-4"}),"Logout"]})]})})]}):l.jsxs("div",{className:`flex items-center ${T?"flex-col space-y-3":"gap-4"}`,children:[l.jsx(rs,{to:"/auth/login",onClick:R,className:`${x} border border-primary-600 text-primary-600 hover:bg-primary-50 ${T?v:b}`,children:"Login"}),l.jsx(rs,{to:"/auth/register",onClick:R,className:`${x} bg-primary-600 text-white shadow-sm hover:bg-primary-700 ${T?v:b}`,children:"Sign Up"})]})},w=()=>l.jsxs("button",{onClick:c,className:"relative rounded-full p-2 text-gray-700 transition hover:bg-gray-100","aria-label":`Open cart with ${o} items`,children:[l.jsx(qb,{className:"h-6 w-6"}),o>0&&l.jsx("span",{className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white","aria-hidden":"true",children:o})]});return l.jsxs(l.Fragment,{children:[l.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-gray-200/80 bg-white/95 shadow-md backdrop-blur-sm",children:l.jsxs("div",{className:"container mx-auto flex h-20 items-center justify-between px-4 sm:px-6 lg:px-8",children:[l.jsxs(rs,{to:"/",className:"flex items-center gap-2",children:[l.jsx(kt,{className:"h-8 w-8 text-primary-600"}),l.jsx("span",{className:"text-2xl font-bold text-primary-600",children:"Rush Coffee"})]}),l.jsx("nav",{className:"hidden items-center space-x-8 md:flex",children:h.map(T=>l.jsx(rs,{to:T.href,className:({isActive:x})=>`text-base font-medium transition-colors hover:text-primary-600 ${x?"text-primary-600":"text-gray-700"}`,children:T.label},T.label))}),l.jsxs("div",{className:"hidden items-center gap-2 md:flex",children:[_(),i&&l.jsx(w,{})]}),l.jsxs("div",{className:"flex items-center gap-2 md:hidden",children:[i&&l.jsx(w,{}),l.jsx("button",{onClick:p,className:"rounded-md p-2 text-gray-700 transition hover:bg-gray-100","aria-label":"Toggle menu","aria-expanded":t,children:l.jsx(yP,{className:"h-6 w-6"})})]})]})}),l.jsxs("div",{className:`fixed inset-0 z-40 transform transition-opacity duration-300 md:hidden ${t?"opacity-100":"opacity-0 pointer-events-none"}`,children:[l.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:f,"aria-hidden":"true"}),l.jsxs("div",{className:`fixed top-0 right-0 flex h-full w-4/5 max-w-sm flex-col bg-white shadow-2xl transition-transform duration-300 ease-in-out ${t?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"mobile-menu-title",children:[l.jsxs("div",{className:"flex items-center justify-between border-b p-4",children:[l.jsxs(rs,{to:"/",className:"flex items-center gap-2",onClick:f,children:[l.jsx(kt,{className:"h-7 w-7 text-primary-600"}),l.jsx("span",{id:"mobile-menu-title",className:"text-xl font-bold text-primary-600",children:"Rush Coffee"})]}),l.jsx("button",{onClick:f,className:"rounded-md p-2 text-gray-700 transition hover:bg-gray-100","aria-label":"Close menu",children:l.jsx(Kr,{className:"h-6 w-6"})})]}),l.jsxs("nav",{className:"flex flex-1 flex-col gap-4 overflow-y-auto p-4",children:[h.map(T=>l.jsx(rs,{to:T.href,onClick:f,className:({isActive:x})=>`rounded-md px-3 py-2 text-lg font-medium transition-colors hover:bg-gray-100 ${x?"bg-primary-50 text-primary-600":"text-gray-800"}`,children:T.label},T.label)),i&&l.jsxs("div",{className:"border-t pt-4 mt-2",children:[bI.map(T=>l.jsxs(rs,{to:T.href,onClick:f,className:({isActive:x})=>`flex items-center gap-3 rounded-md px-3 py-2 text-lg font-medium transition-colors hover:bg-gray-100 ${x?"bg-primary-50 text-primary-600":"text-gray-800"}`,children:[l.jsx(T.Icon,{className:"h-5 w-5"}),T.label]},T.label)),i.role==="admin"&&l.jsxs(rs,{to:"/admin",onClick:f,className:({isActive:T})=>`flex items-center gap-3 rounded-md px-3 py-2 text-lg font-medium transition-colors hover:bg-yellow-50 ${T?"bg-yellow-100 text-yellow-800":"text-yellow-700"}`,children:[l.jsx(Xd,{className:"h-5 w-5"}),"Admin Dashboard"]})]})]}),l.jsx("div",{className:"mt-auto border-t p-4 space-y-3",children:i?l.jsxs("button",{onClick:m,className:"flex w-full items-center justify-center gap-2 rounded-full bg-red-500 px-6 py-3 text-base font-semibold text-white shadow-sm transition-colors hover:bg-red-600",children:[l.jsx(ZS,{className:"h-5 w-5"}),"Logout"]}):_(!0)})]})]})]})},Ct=()=>l.jsxs("footer",{className:"bg-coffee-900 text-coffee-100",children:[l.jsxs("div",{className:"container mx-auto grid grid-cols-1 gap-8 px-6 py-12 md:grid-cols-2 lg:grid-cols-4",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs(Pe,{to:"/",className:"flex items-center gap-2",children:[l.jsx(kt,{className:"h-8 w-8 text-primary-400"}),l.jsx("span",{className:"text-2xl font-bold text-primary-400",children:"Rush Coffee"})]}),l.jsx("p",{className:"font-semibold",children:"Premium coffee, no waiting."}),l.jsx("p",{className:"text-sm text-coffee-100/80",children:"Join the digital queue and get your coffee fix faster than ever."})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"mb-4 font-semibold text-primary-400",children:"Quick Links"}),l.jsxs("ul",{className:"space-y-2",children:[l.jsx("li",{children:l.jsx(Pe,{to:"/",className:"transition hover:text-primary-400",children:"Home"})}),l.jsx("li",{children:l.jsx(Pe,{to:"/about",className:"transition hover:text-primary-400",children:"About Us"})}),l.jsx("li",{children:l.jsx(Pe,{to:"/menu",className:"transition hover:text-primary-400",children:"Menu"})}),l.jsx("li",{children:l.jsx(Pe,{to:"/faq",className:"transition hover:text-primary-400",children:"FAQ"})}),l.jsx("li",{children:l.jsx(Pe,{to:"/contact",className:"transition hover:text-primary-400",children:"Contact"})})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"mb-4 font-semibold text-primary-400",children:"Legal"}),l.jsxs("ul",{className:"space-y-2",children:[l.jsx("li",{children:l.jsx(Pe,{to:"/terms",className:"transition hover:text-primary-400",children:"Terms of Service"})}),l.jsx("li",{children:l.jsx(Pe,{to:"/privacy",className:"transition hover:text-primary-400",children:"Privacy Policy"})}),l.jsx("li",{children:l.jsx(Pe,{to:"/cookies",className:"transition hover:text-primary-400",children:"Cookie Policy"})})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"mb-4 font-semibold text-primary-400",children:"Contact & Connect"}),l.jsx("address",{className:"not-italic",children:l.jsxs("ul",{className:"space-y-3",children:[l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx(Lb,{className:"mt-1 h-5 w-5 flex-shrink-0"}),l.jsx("span",{children:"123 Coffee Street, Manila"})]}),l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx(Vr,{className:"h-5 w-5 flex-shrink-0"}),l.jsx("a",{href:"tel:+639171234567",className:"transition hover:text-primary-400",children:"+63 917 123 4567"})]}),l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx(sr,{className:"h-5 w-5 flex-shrink-0"}),l.jsx("a",{href:"mailto:hello@rushcoffee.ph",className:"transition hover:text-primary-400",children:"hello@rushcoffee.ph"})]})]})}),l.jsxs("div",{className:"mt-6 flex gap-4",children:[l.jsx("a",{href:"#","aria-label":"Facebook",className:"transition hover:text-primary-400",children:l.jsx(pP,{className:"h-6 w-6"})}),l.jsx("a",{href:"#","aria-label":"Instagram",className:"transition hover:text-primary-400",children:l.jsx(gP,{className:"h-6 w-6"})}),l.jsx("a",{href:"#","aria-label":"Twitter",className:"transition hover:text-primary-400",children:l.jsx(TP,{className:"h-6 w-6"})})]})]})]}),l.jsx("div",{className:"border-t border-coffee-800 bg-coffee-900/50",children:l.jsxs("div",{className:"container mx-auto flex flex-col items-center justify-between gap-2 px-6 py-4 text-center text-sm sm:flex-row",children:[l.jsxs("p",{children:[" ",new Date().getFullYear()," Rush Coffee. All rights reserved."]}),l.jsx("p",{children:"Made with  and "})]})})]}),VQ=[{Icon:Pg,title:"Live Queue Updates",description:"Track your position in real-time and know exactly when your coffee will be ready. No more waiting around!",iconBgColor:"bg-primary-100",iconTextColor:"text-primary-600"},{Icon:kt,title:"Order Ahead",description:"Browse our menu, customize your drink, and order from anywhere. Your coffee, your way.",iconBgColor:"bg-coffee-100",iconTextColor:"text-coffee-800"},{Icon:Qd,title:"Loyalty Rewards",description:"Earn points with every purchase and redeem for free drinks and exclusive perks.",iconBgColor:"bg-green-100",iconTextColor:"text-green-600"},{Icon:EP,title:"Multiple Payment Options",description:"Pay with GCash or cash on pickupwhatever works best for you.",iconBgColor:"bg-blue-100",iconTextColor:"text-blue-600"}],wI=[{number:1,Icon:yP,title:"Browse & Customize",description:"Explore our menu of premium coffee drinks and customize your order exactly how you like it.",hasAnimation:!0},{number:2,Icon:Sp,title:"Join Virtual Queue",description:"Place your order and automatically join the queue. Get your position and estimated wait time instantly."},{number:3,Icon:jg,title:"Pickup & Enjoy",description:"Receive real-time notifications. When ready, breeze past the line and grab your coffee.",isPulsing:!0}],LQ=[{quote:"Rush Coffee changed my morning routine! No more waiting in long lines. I order on my way and pick up when it's ready. Absolutely love it!",name:"Sarah M.",title:"Regular Customer",initial:"S",avatarBg:"bg-primary-100",avatarText:"text-primary-600"},{quote:"The queue system is genius. I can track exactly when my coffee will be ready. Plus, earning rewards with every purchase is a nice bonus!",name:"Miguel R.",title:"Gold Member",initial:"M",avatarBg:"bg-blue-100",avatarText:"text-blue-600"},{quote:"Best coffee experience in Manila. Fast, convenient, and the coffee is always perfect. The mobile app makes everything so easy!",name:"Ana L.",title:"VIP Member",initial:"A",avatarBg:"bg-green-100",avatarText:"text-green-600"}],UQ=()=>{const{currentUser:t}=ts(),e=t?"/menu":"/auth/register";return l.jsxs("div",{className:"bg-white",children:[l.jsx(Rt,{}),l.jsxs("main",{children:[l.jsxs("section",{className:"relative flex min-h-[calc(100vh-5rem)] items-center overflow-hidden bg-white",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary-50 via-coffee-100 to-white"}),l.jsx("div",{className:"container relative mx-auto max-w-7xl px-6 py-20",children:l.jsxs("div",{className:"grid grid-cols-1 items-center gap-12 lg:grid-cols-2",children:[l.jsxs("div",{className:"animate-fade-in-up text-center lg:text-left",children:[l.jsx("p",{className:"mb-4 font-medium text-primary-600",style:{animationDelay:"100ms",opacity:0},children:" Welcome to Rush Coffee"}),l.jsxs("h1",{className:"font-display text-5xl font-bold text-coffee-900 md:text-6xl lg:text-7xl",children:[l.jsx("span",{className:"block",style:{animation:"fade-in-up 0.8s ease-out 200ms forwards",opacity:0},children:"Skip the Line,"}),l.jsx("span",{className:"block text-primary-600",style:{animation:"fade-in-up 0.8s ease-out 300ms forwards",opacity:0},children:"Get Your Coffee"}),l.jsx("span",{className:"block",style:{animation:"fade-in-up 0.8s ease-out 400ms forwards",opacity:0},children:"Faster."})]}),l.jsx("p",{className:"mx-auto mt-6 max-w-2xl text-lg text-gray-600 md:text-xl lg:mx-0",style:{animation:"fade-in-up 0.8s ease-out 500ms forwards",opacity:0},children:"Join our digital queue system. Order ahead, track your position in real-time, and breeze through pickup. Your perfect cup awaitswithout the wait."}),l.jsxs("div",{className:"mt-8 flex flex-wrap justify-center gap-2 lg:justify-start",style:{animation:"fade-in-up 0.8s ease-out 600ms forwards",opacity:0},children:[l.jsx(Xt,{className:"animate-pulse-slow",children:" Real-Time Queue"}),l.jsx(Xt,{className:"animate-pulse-slow",children:" Mobile Ordering"}),l.jsx(Xt,{className:"animate-pulse-slow",children:" Rewards Program"})]}),l.jsxs("div",{className:"mt-8 flex flex-col items-center gap-4 sm:flex-row sm:justify-center lg:justify-start",style:{animation:"fade-in-up 0.8s ease-out 700ms forwards",opacity:0},children:[l.jsxs(Pe,{to:e,className:"flex w-full items-center justify-center gap-2 rounded-full bg-primary-600 px-8 py-4 text-lg font-semibold text-white shadow-lg transition-transform hover:scale-105 hover:bg-primary-700 sm:w-auto",children:[l.jsx(kt,{className:"h-5 w-5"}),"Order Now"]}),l.jsxs("a",{href:"#features",className:"flex w-full items-center justify-center gap-2 rounded-full border-2 border-primary-600 px-8 py-4 text-lg font-semibold text-primary-600 transition-transform hover:scale-105 hover:bg-primary-50 sm:w-auto",children:[l.jsx(h9,{className:"h-5 w-5"}),"View Features"]})]}),l.jsx("p",{className:"mt-6 text-sm text-gray-500",style:{animation:"fade-in-up 0.8s ease-out 800ms forwards",opacity:0},children:"Join 5,000+ happy customers "})]}),l.jsxs("div",{className:"relative hidden h-96 lg:flex lg:items-center lg:justify-center",children:[l.jsx("div",{className:"absolute h-80 w-80 animate-float rounded-full bg-primary-200/50 blur-3xl"}),l.jsx("div",{className:"absolute bottom-0 right-0 h-64 w-64 animate-float-delay rounded-full bg-coffee-800/10 blur-2xl"}),l.jsx("div",{className:"relative animate-fade-in-up",style:{animationDelay:"500ms",opacity:0},children:l.jsx(kt,{className:"h-auto w-[250px] animate-float drop-shadow-2xl lg:w-[350px]"})})]})]})})]}),l.jsx("section",{id:"features",className:"bg-white px-6 py-20",children:l.jsxs("div",{className:"container mx-auto max-w-7xl",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"mb-2 font-medium text-primary-600",children:"Why Rush Coffee?"}),l.jsx("h2",{className:"mb-4 font-display text-3xl font-bold text-coffee-900 md:text-4xl",children:"Everything You Need for a Seamless Coffee Experience"}),l.jsx("p",{className:"mx-auto mb-12 max-w-2xl text-gray-600",children:"From ordering to pickup, we've got you covered."})]}),l.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:VQ.map((n,s)=>l.jsxs(ve,{hover:!0,className:"text-center",children:[l.jsx("div",{className:`mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-xl ${n.iconBgColor}`,children:l.jsx(n.Icon,{className:`h-8 w-8 ${n.iconTextColor}`})}),l.jsx("h3",{className:"mb-2 font-display text-xl font-semibold text-coffee-900",children:n.title}),l.jsx("p",{className:"text-sm leading-relaxed text-gray-600",children:n.description})]},s))})]})}),l.jsx("section",{id:"how-it-works",className:"bg-gradient-to-b from-coffee-50 to-white px-6 py-20",children:l.jsxs("div",{className:"container mx-auto max-w-7xl",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"mb-2 font-medium text-primary-600",children:"Simple Process"}),l.jsx("h2",{className:"mb-4 font-display text-3xl font-bold text-coffee-900 md:text-4xl",children:"How Rush Coffee Works"}),l.jsx("p",{className:"mx-auto mb-16 max-w-2xl text-gray-600",children:"Get your perfect cup in three easy steps."})]}),l.jsx("div",{className:"flex flex-col items-stretch justify-center gap-16 lg:flex-row lg:items-center lg:gap-8",children:wI.map((n,s)=>l.jsxs(S.Fragment,{children:[l.jsxs("div",{className:"relative w-full max-w-sm flex-1 text-center",children:[l.jsx("div",{className:"absolute -top-4 left-1/2 z-10 flex h-12 w-12 -translate-x-1/2 items-center justify-center rounded-full bg-primary-600 font-display text-xl font-bold text-white shadow-lg",children:n.number}),l.jsxs(ve,{className:"pt-8",children:[l.jsxs("div",{className:"relative mx-auto flex h-20 w-20 items-center justify-center rounded-2xl bg-gradient-to-br from-primary-100 to-coffee-100 p-4",children:[n.hasAnimation&&l.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-2xl",children:[l.jsx("div",{className:"absolute left-1/2 top-2 h-4 w-px -translate-x-1/2 animate-steam-1 rounded-full bg-primary-300/80"}),l.jsx("div",{className:"absolute left-1/3 top-2 h-5 w-px animate-steam-2 rounded-full bg-primary-300/80"}),l.jsx("div",{className:"absolute left-2/3 top-2 h-3 w-px animate-steam-1 rounded-full bg-primary-300/80"})]}),l.jsx(n.Icon,{className:`h-10 w-10 text-primary-600 ${n.isPulsing?"animate-pulse-slow":""}`})]}),l.jsx("h3",{className:"mb-2 mt-4 font-display text-xl font-semibold text-coffee-900",children:n.title}),l.jsx("p",{className:"text-sm text-gray-600",children:n.description})]})]}),s<wI.length-1&&l.jsx("div",{className:"hidden text-primary-400 lg:flex",children:l.jsx(ec,{className:"h-10 w-10"})})]},n.number))})]})}),l.jsx("section",{id:"testimonials",className:"bg-white py-20 px-6",children:l.jsxs("div",{className:"container mx-auto max-w-7xl",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"mb-2 font-medium text-primary-600",children:"Customer Love"}),l.jsx("h2",{className:"mb-4 font-display text-3xl font-bold text-coffee-900 md:text-4xl",children:"What Our Customers Say"}),l.jsx("p",{className:"mx-auto mb-12 max-w-2xl text-gray-600",children:"Join thousands of satisfied coffee lovers."})]}),l.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:LQ.map((n,s)=>l.jsxs(ve,{hover:!0,className:"flex flex-col border-l-4 border-primary-400 transition-transform duration-300 hover:scale-105",children:[l.jsx(xz,{className:"h-8 w-8 text-primary-200"}),l.jsx("div",{className:"my-4 text-yellow-400",children:""}),l.jsxs("p",{className:"flex-grow font-sans italic text-gray-700",children:['"',n.quote,'"']}),l.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[l.jsx("div",{className:`flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full font-bold ${n.avatarBg} ${n.avatarText}`,children:n.initial}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-coffee-900",children:n.name}),l.jsx(Xt,{className:"bg-gray-100 text-gray-600 text-xs px-2 py-0.5",children:n.title})]})]})]},s))})]})}),l.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-r from-primary-600 via-coffee-600 to-primary-700 py-16 px-6",children:[l.jsx("div",{className:"absolute top-0 left-0 -translate-x-1/3 -translate-y-1/3 opacity-10",children:l.jsx(kt,{className:"h-48 w-48 animate-float text-white"})}),l.jsx("div",{className:"absolute bottom-0 right-0 translate-x-1/3 translate-y-1/3 opacity-10",children:l.jsx(kt,{className:"h-64 w-64 animate-float-delay text-white"})}),l.jsxs("div",{className:"relative z-10 mx-auto max-w-4xl text-center",children:[l.jsxs("div",{className:"relative mx-auto mb-4 inline-block",children:[l.jsx("span",{className:"text-5xl",role:"img","aria-label":"Coffee cup",children:""}),l.jsxs("div",{className:"absolute -top-4 left-0 right-0 h-12",children:[l.jsx("div",{className:"absolute left-1/2 h-6 w-px -translate-x-1/2 animate-steam-1 rounded-full bg-white/50"}),l.jsx("div",{className:"absolute left-1/3 h-8 w-px animate-steam-2 rounded-full bg-white/50"}),l.jsx("div",{className:"absolute left-2/3 h-5 w-px animate-steam-1 rounded-full bg-white/50"})]})]}),l.jsx("h2",{className:"mb-4 font-display text-4xl font-bold text-white md:text-5xl",children:"Ready to Rush Through Your Day?"}),l.jsx("p",{className:"mb-2 text-xl text-primary-100",children:"Join 5,000+ customers who've already skipped the line."}),l.jsxs("div",{className:"my-8 flex flex-col items-center justify-center gap-4 sm:flex-row",children:[l.jsx("span",{className:"rounded-full bg-white/10 px-4 py-2 text-sm font-medium text-white backdrop-blur",children:"10,000+ Orders Completed"}),l.jsx("span",{className:"rounded-full bg-white/10 px-4 py-2 text-sm font-medium text-white backdrop-blur",children:"4.9 Average Rating"}),l.jsx("span",{className:"rounded-full bg-white/10 px-4 py-2 text-sm font-medium text-white backdrop-blur",children:"< 5 min Average Wait"})]}),l.jsxs(Pe,{to:e,className:"inline-flex transform items-center justify-center gap-2 rounded-full bg-white px-8 py-4 text-lg font-semibold text-primary-600 shadow-lg transition hover:scale-105 hover:shadow-2xl",children:["Start Ordering Now",l.jsx(ec,{className:"h-5 w-5"})]}),l.jsxs("p",{className:"mt-4 text-sm",children:[l.jsx("span",{className:"text-white/80",children:"Already have an account? "}),l.jsx(Pe,{to:"/auth/login",className:"font-semibold text-white underline transition hover:text-primary-100",children:"Login"})]})]})]})]}),l.jsx(Ct,{})]})},zQ=()=>l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),l.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),l.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),l.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),FQ=()=>{const[t,e]=S.useState(""),[n,s]=S.useState(""),[r,i]=S.useState(!1),[a,o]=S.useState(!1),[c,u]=S.useState({}),[h,f]=S.useState(null),[m,p]=S.useState(!1),[_,w]=S.useState(!1),T=Ds(),{login:x,signInWithGoogle:v}=ts(),b=()=>{const M={};return t?/\S+@\S+\.\S+/.test(t)||(M.email="Email address is invalid"):M.email="Email is required",n||(M.password="Password is required"),M},R=async M=>{M.preventDefault(),f(null);const A=b();if(Object.keys(A).length>0){u(A);return}u({}),p(!0);try{await x(t,n,a),T("/")}catch(E){let N="An unexpected error occurred. Please try again.";switch(E.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":N="Invalid email or password. Please try again.";break;case"auth/too-many-requests":N="Too many failed login attempts. Please try again later.";break}f(N)}finally{p(!1)}},D=async()=>{f(null),w(!0);try{await v(),T("/")}catch(M){console.error("Google Sign-In Error: ",M.code,M.message),f("Failed to sign in with Google. Please try again.")}finally{w(!1)}};return l.jsxs("div",{className:"flex min-h-screen flex-col bg-gradient-to-br from-primary-50 via-coffee-50 to-white",children:[l.jsx(Rt,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center px-4 py-12 sm:px-6 lg:px-8",children:l.jsx("div",{className:"w-full max-w-md",children:l.jsxs(ve,{className:"rounded-2xl p-8 shadow-xl",children:[l.jsxs("div",{className:"mb-6 text-center",children:[l.jsx(kt,{className:"mx-auto h-12 w-12 text-primary-600"}),l.jsx("h2",{className:"mt-4 font-display text-3xl font-bold text-coffee-900",children:"Rush Coffee"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Welcome back! "})]}),h&&l.jsxs("div",{className:"mb-4 flex items-start gap-3 rounded-lg bg-red-50 p-4 text-sm text-red-700",role:"alert",children:[l.jsx(ha,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),l.jsx("div",{children:h})]}),l.jsxs("form",{onSubmit:R,noValidate:!0,className:"space-y-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),l.jsx(sr,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:M=>e(M.target.value),className:`w-full rounded-lg border py-3 pl-10 pr-3 text-gray-900 placeholder:text-gray-400 transition-colors focus:outline-none focus:ring-2 ${c.email?"border-red-500 ring-red-500":"border-gray-300 focus:border-primary-500 focus:ring-primary-500"}`,placeholder:"Email address","aria-invalid":!!c.email,"aria-describedby":"email-error"}),c.email&&l.jsx("p",{id:"email-error",className:"mt-1 text-xs text-red-600",role:"alert",children:c.email})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),l.jsx(Tp,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{id:"password",name:"password",type:r?"text":"password",autoComplete:"current-password",required:!0,value:n,onChange:M=>s(M.target.value),className:`w-full rounded-lg border py-3 pl-10 pr-10 text-gray-900 placeholder:text-gray-400 transition-colors focus:outline-none focus:ring-2 ${c.password?"border-red-500 ring-red-500":"border-gray-300 focus:border-primary-500 focus:ring-primary-500"}`,placeholder:"Password","aria-invalid":!!c.password,"aria-describedby":"password-error"}),l.jsx("button",{type:"button",onClick:()=>i(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600","aria-label":r?"Hide password":"Show password",children:r?l.jsx(bx,{className:"h-5 w-5"}):l.jsx(wx,{className:"h-5 w-5"})}),c.password&&l.jsx("p",{id:"password-error",className:"mt-1 text-xs text-red-600",role:"alert",children:c.password})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:a,onChange:M=>o(M.target.checked),className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),l.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),l.jsx("div",{className:"text-sm",children:l.jsx(Pe,{to:"/auth/forgot-password",className:"font-medium text-primary-600 hover:text-primary-500",children:"Forgot your password?"})})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:m||_,className:"flex w-full justify-center rounded-full bg-primary-600 px-4 py-3 text-base font-semibold text-white shadow-sm transition-colors hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-primary-400",children:m?l.jsx(_t,{className:"h-6 w-6 animate-spin"}):"Login"})})]}),l.jsxs("div",{className:"my-6 flex items-center",children:[l.jsx("div",{className:"flex-grow border-t border-gray-300"}),l.jsx("span",{className:"mx-4 flex-shrink text-sm text-gray-500",children:"or"}),l.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),l.jsxs("button",{type:"button",disabled:m||_,onClick:D,className:"flex w-full items-center justify-center gap-3 rounded-full border border-gray-300 px-4 py-3 text-base font-medium text-gray-700 transition-colors hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-60",children:[_?l.jsx(_t,{className:"h-5 w-5 animate-spin"}):l.jsx(zQ,{}),"Continue with Google"]}),l.jsxs("p",{className:"mt-8 text-center text-sm text-gray-600",children:["Don't have an account?"," ",l.jsx(Pe,{to:"/auth/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign up"})]})]})})}),l.jsx(Ct,{})]})},BQ=()=>l.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),l.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),l.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),l.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),qQ=t=>{let e=0;return t.length>=8&&e++,t.match(/[a-z]/)&&e++,t.match(/[A-Z]/)&&e++,t.match(/[0-9]/)&&e++,t.match(/[^a-zA-Z0-9]/)&&e++,e/5*100},tl=({name:t,label:e,type:n,placeholder:s,Icon:r,children:i,autoComplete:a,value:o,onChange:c,onBlur:u,error:h,touched:f})=>{const m=f&&h,p=f&&!h&&o;return l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:t,className:"sr-only",children:e}),l.jsx(r,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{id:t,name:t,type:n,autoComplete:a,required:!["phone"].includes(t),value:o,onChange:c,onBlur:u,className:`w-full rounded-lg border py-3 pl-10 pr-10 text-gray-900 placeholder:text-gray-400 transition-colors focus:outline-none focus:ring-2 ${m?"border-red-500 ring-red-500":p?"border-green-500":"border-gray-300 focus:border-primary-500 focus:ring-primary-500"}`,placeholder:s,"aria-invalid":!!m,"aria-describedby":`${t}-error`}),i,m?l.jsx(Kr,{className:"absolute right-3 top-1/2 h-5 w-5 -translate-y-1/2 text-red-500"}):null,p?l.jsx(Yi,{className:"absolute right-3 top-1/2 h-5 w-5 -translate-y-1/2 text-green-500"}):null,m&&l.jsx("p",{id:`${t}-error`,className:"mt-1 text-xs text-red-600",role:"alert",children:h})]})},HQ=()=>{const[t,e]=S.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",terms:!1}),[n,s]=S.useState({}),[r,i]=S.useState({}),[a,o]=S.useState(null),[c,u]=S.useState(!1),[h,f]=S.useState(!1),[m,p]=S.useState(!1),[_,w]=S.useState(!1),[T,x]=S.useState(0),v=Ds(),{register:b,signInWithGoogle:R}=ts(),D=S.useCallback(()=>{const k={};return t.firstName?t.firstName.length<2&&(k.firstName="First name must be at least 2 characters"):k.firstName="First name is required",t.lastName?t.lastName.length<2&&(k.lastName="Last name must be at least 2 characters"):k.lastName="Last name is required",t.email?/\S+@\S+\.\S+/.test(t.email)||(k.email="Email address is invalid"):k.email="Email is required",t.phone&&!/^(09|\+639)\d{9}$/.test(t.phone)&&(k.phone="Invalid Philippine phone number"),t.password?t.password.length<8?k.password="Password must be at least 8 characters":/(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])/.test(t.password)||(k.password="Must contain uppercase, lowercase, and a number"):k.password="Password is required",t.confirmPassword?t.password!==t.confirmPassword&&(k.confirmPassword="Passwords do not match"):k.confirmPassword="Please confirm your password",t.terms||(k.terms="You must accept the terms and conditions"),k},[t]);S.useEffect(()=>{r.password&&x(qQ(t.password))},[t.password,r.password]),S.useEffect(()=>{Object.keys(r).length>0&&s(D())},[t,r,D]);const M=k=>{const{name:j,value:W,type:ue,checked:H}=k.target;e(ee=>({...ee,[j]:ue==="checkbox"?H:W}))},A=k=>{const{name:j}=k.target;i(W=>({...W,[j]:!0}))},E=async k=>{k.preventDefault(),o(null),i({firstName:!0,lastName:!0,email:!0,phone:!0,password:!0,confirmPassword:!0,terms:!0});const j=D();if(Object.keys(j).length>0){s(j);return}u(!0);try{await b(t.email,t.password,t.firstName,t.lastName,t.phone),v("/")}catch(W){let ue="An unexpected error occurred. Please try again.";switch(W.code){case"auth/email-already-in-use":ue="This email address is already registered.";break;case"auth/invalid-email":ue="The email address is not valid.";break;case"auth/weak-password":ue="The password is too weak.";break}o(ue)}finally{u(!1)}},N=async()=>{o(null),f(!0);try{await R(),v("/")}catch(k){console.error("Google Sign-Up Error: ",k.code,k.message),o("Failed to sign up with Google. Please try again.")}finally{f(!1)}},I=()=>T<40?"bg-red-500":T<80?"bg-yellow-500":"bg-green-500",P=()=>T<40?"Weak":T<80?"Medium":"Strong";return l.jsxs("div",{className:"flex min-h-screen flex-col bg-gradient-to-br from-primary-50 via-coffee-50 to-white",children:[l.jsx(Rt,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center px-4 py-12 sm:px-6 lg:px-8",children:l.jsx("div",{className:"w-full max-w-2xl",children:l.jsxs(ve,{className:"rounded-2xl p-8 shadow-xl",children:[l.jsxs("div",{className:"mb-6 text-center",children:[l.jsx(kt,{className:"mx-auto h-12 w-12 text-primary-600"}),l.jsx("h2",{className:"mt-4 font-display text-3xl font-bold text-coffee-900",children:"Join Rush Coffee"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Start skipping the line today "})]}),a&&l.jsxs("div",{className:"mb-4 flex items-start gap-3 rounded-lg bg-red-50 p-4 text-sm text-red-700",role:"alert",children:[l.jsx(ha,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),l.jsx("div",{children:a})]}),l.jsxs("form",{onSubmit:E,noValidate:!0,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 gap-x-6 gap-y-6 sm:grid-cols-2",children:[l.jsx(tl,{name:"firstName",label:"First Name",type:"text",placeholder:"First Name",Icon:Lr,autoComplete:"given-name",value:t.firstName,onChange:M,onBlur:A,error:n.firstName,touched:r.firstName}),l.jsx(tl,{name:"lastName",label:"Last Name",type:"text",placeholder:"Last Name",Icon:Lr,autoComplete:"family-name",value:t.lastName,onChange:M,onBlur:A,error:n.lastName,touched:r.lastName})]}),l.jsx(tl,{name:"email",label:"Email address",type:"email",placeholder:"Email address",Icon:sr,autoComplete:"email",value:t.email,onChange:M,onBlur:A,error:n.email,touched:r.email}),l.jsx(tl,{name:"phone",label:"Phone Number (Optional)",type:"tel",placeholder:"Phone Number (e.g., 09xxxxxxxxx)",Icon:Vr,autoComplete:"tel",value:t.phone,onChange:M,onBlur:A,error:n.phone,touched:r.phone}),l.jsxs("div",{className:"relative",children:[l.jsx(tl,{name:"password",label:"Password",type:m?"text":"password",placeholder:"Password",Icon:Tp,autoComplete:"new-password",value:t.password,onChange:M,onBlur:A,error:n.password,touched:r.password,children:l.jsx("button",{type:"button",onClick:()=>p(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 z-10","aria-label":m?"Hide password":"Show password",children:m?l.jsx(bx,{className:"h-5 w-5"}):l.jsx(wx,{className:"h-5 w-5"})})}),r.password&&l.jsxs("div",{className:"mt-2 space-y-1",children:[l.jsx("div",{className:"h-2 w-full rounded-full bg-gray-200",children:l.jsx("div",{className:`h-2 rounded-full ${I()}`,style:{width:`${T}%`,transition:"width 0.3s, background-color 0.3s"}})}),l.jsx("p",{className:"text-xs font-medium",style:{color:I().replace("bg-","text-")},children:P()})]})]}),l.jsx(tl,{name:"confirmPassword",label:"Confirm Password",type:_?"text":"password",placeholder:"Confirm Password",Icon:Tp,autoComplete:"new-password",value:t.confirmPassword,onChange:M,onBlur:A,error:n.confirmPassword,touched:r.confirmPassword,children:l.jsx("button",{type:"button",onClick:()=>w(!_),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 z-10","aria-label":_?"Hide password":"Show password",children:_?l.jsx(bx,{className:"h-5 w-5"}):l.jsx(wx,{className:"h-5 w-5"})})}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex h-6 items-center",children:l.jsx("input",{id:"terms",name:"terms",type:"checkbox",checked:t.terms,onChange:M,onBlur:A,className:`h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500 ${r.terms&&n.terms?"border-red-500":""}`})}),l.jsxs("div",{className:"ml-3 text-sm leading-6",children:[l.jsxs("label",{htmlFor:"terms",className:"font-medium text-gray-900",children:["I agree to the"," ",l.jsx(Pe,{to:"/terms",className:"font-semibold text-primary-600 hover:underline",children:"Terms of Service"})," and ",l.jsx(Pe,{to:"/privacy",className:"font-semibold text-primary-600 hover:underline",children:"Privacy Policy"}),"."]}),r.terms&&n.terms&&l.jsx("p",{className:"mt-1 text-xs text-red-600",children:n.terms})]})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:c||h,className:"flex w-full justify-center rounded-full bg-primary-600 px-4 py-3 text-base font-semibold text-white shadow-sm transition-colors hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-primary-400",children:c?l.jsx(_t,{className:"h-6 w-6 animate-spin"}):"Create Account"})})]}),l.jsxs("div",{className:"my-6 flex items-center",children:[l.jsx("div",{className:"flex-grow border-t border-gray-300"}),l.jsx("span",{className:"mx-4 flex-shrink text-sm text-gray-500",children:"or"}),l.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),l.jsxs("button",{type:"button",disabled:c||h,onClick:N,className:"flex w-full items-center justify-center gap-3 rounded-full border border-gray-300 px-4 py-3 text-base font-medium text-gray-700 transition-colors hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-60",children:[h?l.jsx(_t,{className:"h-5 w-5 animate-spin"}):l.jsx(BQ,{}),"Sign up with Google"]}),l.jsxs("p",{className:"mt-8 text-center text-sm text-gray-600",children:["Already have an account?"," ",l.jsx(Pe,{to:"/auth/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Login"})]})]})})}),l.jsx(Ct,{})]})},GQ=()=>{const[t,e]=S.useState(""),[n,s]=S.useState(null),[r,i]=S.useState(null),[a,o]=S.useState(!1),{sendPasswordReset:c}=ts(),u=async h=>{if(h.preventDefault(),s(null),i(null),t){if(!/\S+@\S+\.\S+/.test(t)){s("Please enter a valid email address");return}}else{s("Email is required");return}o(!0);try{await c(t),i("Password reset link sent to your email. Please check your inbox.")}catch(f){let m="An unexpected error occurred. Please try again.";(f.code==="auth/user-not-found"||f.code==="auth/invalid-email")&&(m="No user found with this email address."),s(m)}finally{o(!1)}};return l.jsxs("div",{className:"flex min-h-screen flex-col bg-gradient-to-br from-primary-50 via-coffee-50 to-white",children:[l.jsx(Rt,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center px-4 py-12 sm:px-6 lg:px-8",children:l.jsx("div",{className:"w-full max-w-md",children:l.jsxs(ve,{className:"rounded-2xl p-8 shadow-xl",children:[l.jsxs("div",{className:"mb-6 text-center",children:[l.jsx(kt,{className:"mx-auto h-12 w-12 text-primary-600"}),l.jsx("h2",{className:"mt-4 font-display text-3xl font-bold text-coffee-900",children:"Reset Password"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Enter your email to receive a reset link."})]}),n&&l.jsxs("div",{className:"mb-4 flex items-center gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-700",role:"alert",children:[l.jsx(ha,{className:"h-5 w-5 flex-shrink-0"}),l.jsx("span",{children:n})]}),r&&l.jsxs("div",{className:"mb-4 flex items-center gap-2 rounded-lg bg-green-50 p-3 text-sm text-green-700",role:"alert",children:[l.jsx(Vb,{className:"h-5 w-5 flex-shrink-0"}),l.jsx("span",{children:r})]}),l.jsxs("form",{onSubmit:u,noValidate:!0,className:"space-y-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),l.jsx(sr,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:h=>e(h.target.value),className:"w-full rounded-lg border border-gray-300 py-3 pl-10 pr-3 text-gray-900 placeholder:text-gray-400 transition-colors focus:outline-none focus:ring-2 focus:border-primary-500 focus:ring-primary-500",placeholder:"Email address"})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:a,className:"flex w-full justify-center rounded-full bg-primary-600 px-4 py-3 text-base font-semibold text-white shadow-sm transition-colors hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-primary-400",children:a?l.jsx(_t,{className:"h-6 w-6 animate-spin"}):"Send Reset Link"})})]}),l.jsxs("p",{className:"mt-8 text-center text-sm text-gray-600",children:["Remember your password?"," ",l.jsx(Pe,{to:"/auth/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Back to Login"})]})]})})}),l.jsx(Ct,{})]})},L1=S.createContext({});function U1(t){const e=S.useRef(null);return e.current===null&&(e.current=t()),e.current}const Ty=S.createContext(null),z1=S.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class $Q extends S.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function KQ({children:t,isPresent:e}){const n=S.useId(),s=S.useRef(null),r=S.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=S.useContext(z1);return S.useInsertionEffect(()=>{const{width:a,height:o,top:c,left:u}=r.current;if(e||!s.current||!a||!o)return;s.current.dataset.motionPopId=n;const h=document.createElement("style");return i&&(h.nonce=i),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${c}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),l.jsx($Q,{isPresent:e,childRef:s,sizeRef:r,children:S.cloneElement(t,{ref:s})})}const WQ=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:a})=>{const o=U1(YQ),c=S.useId(),u=S.useCallback(f=>{o.set(f,!0);for(const m of o.values())if(!m)return;s&&s()},[o,s]),h=S.useMemo(()=>({id:c,initial:e,isPresent:n,custom:r,onExitComplete:u,register:f=>(o.set(f,!1),()=>o.delete(f))}),i?[Math.random(),u]:[n,u]);return S.useMemo(()=>{o.forEach((f,m)=>o.set(m,!1))},[n]),S.useEffect(()=>{!n&&!o.size&&s&&s()},[n]),a==="popLayout"&&(t=l.jsx(KQ,{isPresent:n,children:t})),l.jsx(Ty.Provider,{value:h,children:t})};function YQ(){return new Map}function lO(t=!0){const e=S.useContext(Ty);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:r}=e,i=S.useId();S.useEffect(()=>{t&&r(i)},[t]);const a=S.useCallback(()=>t&&s&&s(i),[i,s,t]);return!n&&s?[!1,a]:[!0]}const rm=t=>t.key||"";function TI(t){const e=[];return S.Children.forEach(t,n=>{S.isValidElement(n)&&e.push(n)}),e}const F1=typeof window<"u",cO=F1?S.useLayoutEffect:S.useEffect,hf=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:r=!0,mode:i="sync",propagate:a=!1})=>{const[o,c]=lO(a),u=S.useMemo(()=>TI(t),[t]),h=a&&!o?[]:u.map(rm),f=S.useRef(!0),m=S.useRef(u),p=U1(()=>new Map),[_,w]=S.useState(u),[T,x]=S.useState(u);cO(()=>{f.current=!1,m.current=u;for(let R=0;R<T.length;R++){const D=rm(T[R]);h.includes(D)?p.delete(D):p.get(D)!==!0&&p.set(D,!1)}},[T,h.length,h.join("-")]);const v=[];if(u!==_){let R=[...u];for(let D=0;D<T.length;D++){const M=T[D],A=rm(M);h.includes(A)||(R.splice(D,0,M),v.push(M))}i==="wait"&&v.length&&(R=v),x(TI(R)),w(u);return}const{forceRender:b}=S.useContext(L1);return l.jsx(l.Fragment,{children:T.map(R=>{const D=rm(R),M=a&&!o?!1:u===T||h.includes(D),A=()=>{if(p.has(D))p.set(D,!0);else return;let E=!0;p.forEach(N=>{N||(E=!1)}),E&&(b==null||b(),x(m.current),a&&(c==null||c()),s&&s())};return l.jsx(WQ,{isPresent:M,initial:!f.current||n?void 0:!1,custom:M?void 0:e,presenceAffectsLayout:r,mode:i,onExitComplete:M?void 0:A,children:R},D)})})},Yn=t=>t;let uO=Yn;function B1(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ec=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s},Rr=t=>t*1e3,Cr=t=>t/1e3,QQ={useManualTiming:!1};function XQ(t){let e=new Set,n=new Set,s=!1,r=!1;const i=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(u){i.has(u)&&(c.schedule(u),t()),u(a)}const c={schedule:(u,h=!1,f=!1)=>{const p=f&&s?e:n;return h&&i.add(u),p.has(u)||p.add(u),u},cancel:u=>{n.delete(u),i.delete(u)},process:u=>{if(a=u,s){r=!0;return}s=!0,[e,n]=[n,e],e.forEach(o),e.clear(),s=!1,r&&(r=!1,c.process(u))}};return c}const im=["read","resolveKeyframes","update","preRender","render","postRender"],JQ=40;function dO(t,e){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=im.reduce((x,v)=>(x[v]=XQ(i),x),{}),{read:o,resolveKeyframes:c,update:u,preRender:h,render:f,postRender:m}=a,p=()=>{const x=performance.now();n=!1,r.delta=s?1e3/60:Math.max(Math.min(x-r.timestamp,JQ),1),r.timestamp=x,r.isProcessing=!0,o.process(r),c.process(r),u.process(r),h.process(r),f.process(r),m.process(r),r.isProcessing=!1,n&&e&&(s=!1,t(p))},_=()=>{n=!0,s=!0,r.isProcessing||t(p)};return{schedule:im.reduce((x,v)=>{const b=a[v];return x[v]=(R,D=!1,M=!1)=>(n||_(),b.schedule(R,D,M)),x},{}),cancel:x=>{for(let v=0;v<im.length;v++)a[im[v]].cancel(x)},state:r,steps:a}}const{schedule:Ye,cancel:oa,state:Ht,steps:lv}=dO(typeof requestAnimationFrame<"u"?requestAnimationFrame:Yn,!0),hO=S.createContext({strict:!1}),EI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Sc={};for(const t in EI)Sc[t]={isEnabled:e=>EI[t].some(n=>!!e[n])};function ZQ(t){for(const e in t)Sc[e]={...Sc[e],...t[e]}}const eX=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function eg(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||eX.has(t)}let fO=t=>!eg(t);function tX(t){t&&(fO=e=>e.startsWith("on")?!eg(e):t(e))}try{tX(require("@emotion/is-prop-valid").default)}catch{}function nX(t,e,n){const s={};for(const r in t)r==="values"&&typeof t.values=="object"||(fO(r)||n===!0&&eg(r)||!e&&!eg(r)||t.draggable&&r.startsWith("onDrag"))&&(s[r]=t[r]);return s}function sX(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...s)=>t(...s);return new Proxy(n,{get:(s,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const Ey=S.createContext({});function bh(t){return typeof t=="string"||Array.isArray(t)}function Sy(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const q1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],H1=["initial",...q1];function Ay(t){return Sy(t.animate)||H1.some(e=>bh(t[e]))}function mO(t){return!!(Ay(t)||t.variants)}function rX(t,e){if(Ay(t)){const{initial:n,animate:s}=t;return{initial:n===!1||bh(n)?n:void 0,animate:bh(s)?s:void 0}}return t.inherit!==!1?e:{}}function iX(t){const{initial:e,animate:n}=rX(t,S.useContext(Ey));return S.useMemo(()=>({initial:e,animate:n}),[SI(e),SI(n)])}function SI(t){return Array.isArray(t)?t.join(" "):t}const aX=Symbol.for("motionComponentSymbol");function El(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function oX(t,e,n){return S.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):El(n)&&(n.current=s))},[e])}const G1=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),lX="framerAppearId",pO="data-"+G1(lX),{schedule:$1}=dO(queueMicrotask,!1),gO=S.createContext({});function cX(t,e,n,s,r){var i,a;const{visualElement:o}=S.useContext(Ey),c=S.useContext(hO),u=S.useContext(Ty),h=S.useContext(z1).reducedMotion,f=S.useRef(null);s=s||c.renderer,!f.current&&s&&(f.current=s(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const m=f.current,p=S.useContext(gO);m&&!m.projection&&r&&(m.type==="html"||m.type==="svg")&&uX(f.current,n,r,p);const _=S.useRef(!1);S.useInsertionEffect(()=>{m&&_.current&&m.update(n,u)});const w=n[pO],T=S.useRef(!!w&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,w))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,w)));return cO(()=>{m&&(_.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),$1.render(m.render),T.current&&m.animationState&&m.animationState.animateChanges())}),S.useEffect(()=>{m&&(!T.current&&m.animationState&&m.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)===null||x===void 0||x.call(window,w)}),T.current=!1))}),m}function uX(t,e,n,s){const{layoutId:r,layout:i,drag:a,dragConstraints:o,layoutScroll:c,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:yO(t.parent)),t.projection.setOptions({layoutId:r,layout:i,alwaysMeasureLayout:!!a||o&&El(o),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,layoutScroll:c,layoutRoot:u})}function yO(t){if(t)return t.options.allowProjection!==!1?t.projection:yO(t.parent)}function dX({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:s,Component:r}){var i,a;t&&ZQ(t);function o(u,h){let f;const m={...S.useContext(z1),...u,layoutId:hX(u)},{isStatic:p}=m,_=iX(u),w=s(u,p);if(!p&&F1){fX();const T=mX(m);f=T.MeasureLayout,_.visualElement=cX(r,w,m,e,T.ProjectionNode)}return l.jsxs(Ey.Provider,{value:_,children:[f&&_.visualElement?l.jsx(f,{visualElement:_.visualElement,...m}):null,n(r,u,oX(w,_.visualElement,h),w,p,_.visualElement)]})}o.displayName=`motion.${typeof r=="string"?r:`create(${(a=(i=r.displayName)!==null&&i!==void 0?i:r.name)!==null&&a!==void 0?a:""})`}`;const c=S.forwardRef(o);return c[aX]=r,c}function hX({layoutId:t}){const e=S.useContext(L1).id;return e&&t!==void 0?e+"-"+t:t}function fX(t,e){S.useContext(hO).strict}function mX(t){const{drag:e,layout:n}=Sc;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const pX=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function K1(t){return typeof t!="string"||t.includes("-")?!1:!!(pX.indexOf(t)>-1||/[A-Z]/u.test(t))}function AI(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function W1(t,e,n,s){if(typeof e=="function"){const[r,i]=AI(s);e=e(n!==void 0?n:t.custom,r,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,i]=AI(s);e=e(n!==void 0?n:t.custom,r,i)}return e}const h_=t=>Array.isArray(t),gX=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),yX=t=>h_(t)?t[t.length-1]||0:t,ln=t=>!!(t&&t.getVelocity);function qm(t){const e=ln(t)?t.get():t;return gX(e)?e.toValue():e}function vX({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},s,r,i){const a={latestValues:xX(s,r,i,t),renderState:e()};return n&&(a.onMount=o=>n({props:s,current:o,...a}),a.onUpdate=o=>n(o)),a}const vO=t=>(e,n)=>{const s=S.useContext(Ey),r=S.useContext(Ty),i=()=>vX(t,e,s,r);return n?i():U1(i)};function xX(t,e,n,s){const r={},i=s(t,{});for(const m in i)r[m]=qm(i[m]);let{initial:a,animate:o}=t;const c=Ay(t),u=mO(t);e&&u&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let h=n?n.initial===!1:!1;h=h||a===!1;const f=h?o:a;if(f&&typeof f!="boolean"&&!Sy(f)){const m=Array.isArray(f)?f:[f];for(let p=0;p<m.length;p++){const _=W1(t,m[p]);if(_){const{transitionEnd:w,transition:T,...x}=_;for(const v in x){let b=x[v];if(Array.isArray(b)){const R=h?b.length-1:0;b=b[R]}b!==null&&(r[v]=b)}for(const v in w)r[v]=w[v]}}}return r}const Zc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],zo=new Set(Zc),xO=t=>e=>typeof e=="string"&&e.startsWith(t),_O=xO("--"),_X=xO("var(--"),Y1=t=>_X(t)?bX.test(t.split("/*")[0].trim()):!1,bX=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,bO=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Hr=(t,e,n)=>n>e?e:n<t?t:n,eu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},wh={...eu,transform:t=>Hr(0,1,t)},am={...eu,default:1},ff=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),pi=ff("deg"),tr=ff("%"),ne=ff("px"),wX=ff("vh"),TX=ff("vw"),NI={...tr,parse:t=>tr.parse(t)/100,transform:t=>tr.transform(t*100)},EX={borderWidth:ne,borderTopWidth:ne,borderRightWidth:ne,borderBottomWidth:ne,borderLeftWidth:ne,borderRadius:ne,radius:ne,borderTopLeftRadius:ne,borderTopRightRadius:ne,borderBottomRightRadius:ne,borderBottomLeftRadius:ne,width:ne,maxWidth:ne,height:ne,maxHeight:ne,top:ne,right:ne,bottom:ne,left:ne,padding:ne,paddingTop:ne,paddingRight:ne,paddingBottom:ne,paddingLeft:ne,margin:ne,marginTop:ne,marginRight:ne,marginBottom:ne,marginLeft:ne,backgroundPositionX:ne,backgroundPositionY:ne},SX={rotate:pi,rotateX:pi,rotateY:pi,rotateZ:pi,scale:am,scaleX:am,scaleY:am,scaleZ:am,skew:pi,skewX:pi,skewY:pi,distance:ne,translateX:ne,translateY:ne,translateZ:ne,x:ne,y:ne,z:ne,perspective:ne,transformPerspective:ne,opacity:wh,originX:NI,originY:NI,originZ:ne},II={...eu,transform:Math.round},Q1={...EX,...SX,zIndex:II,size:ne,fillOpacity:wh,strokeOpacity:wh,numOctaves:II},AX={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},NX=Zc.length;function IX(t,e,n){let s="",r=!0;for(let i=0;i<NX;i++){const a=Zc[i],o=t[a];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(a.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const u=bO(o,Q1[a]);if(!c){r=!1;const h=AX[a]||a;s+=`${h}(${u}) `}n&&(e[a]=u)}}return s=s.trim(),n?s=n(e,r?"":s):r&&(s="none"),s}function X1(t,e,n){const{style:s,vars:r,transformOrigin:i}=t;let a=!1,o=!1;for(const c in e){const u=e[c];if(zo.has(c)){a=!0;continue}else if(_O(c)){r[c]=u;continue}else{const h=bO(u,Q1[c]);c.startsWith("origin")?(o=!0,i[c]=h):s[c]=h}}if(e.transform||(a||n?s.transform=IX(e,t.transform,n):s.transform&&(s.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:h=0}=i;s.transformOrigin=`${c} ${u} ${h}`}}const RX={offset:"stroke-dashoffset",array:"stroke-dasharray"},CX={offset:"strokeDashoffset",array:"strokeDasharray"};function jX(t,e,n=1,s=0,r=!0){t.pathLength=1;const i=r?RX:CX;t[i.offset]=ne.transform(-s);const a=ne.transform(e),o=ne.transform(n);t[i.array]=`${a} ${o}`}function RI(t,e,n){return typeof t=="string"?t:ne.transform(e+n*t)}function PX(t,e,n){const s=RI(e,t.x,t.width),r=RI(n,t.y,t.height);return`${s} ${r}`}function J1(t,{attrX:e,attrY:n,attrScale:s,originX:r,originY:i,pathLength:a,pathSpacing:o=1,pathOffset:c=0,...u},h,f){if(X1(t,u,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:p,dimensions:_}=t;m.transform&&(_&&(p.transform=m.transform),delete m.transform),_&&(r!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=PX(_,r!==void 0?r:.5,i!==void 0?i:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),s!==void 0&&(m.scale=s),a!==void 0&&jX(m,a,o,c,!1)}const Z1=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),wO=()=>({...Z1(),attrs:{}}),eT=t=>typeof t=="string"&&t.toLowerCase()==="svg";function TO(t,{style:e,vars:n},s,r){Object.assign(t.style,e,r&&r.getProjectionStyles(s));for(const i in n)t.style.setProperty(i,n[i])}const EO=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function SO(t,e,n,s){TO(t,e,void 0,s);for(const r in e.attrs)t.setAttribute(EO.has(r)?r:G1(r),e.attrs[r])}const tg={};function kX(t){Object.assign(tg,t)}function AO(t,{layout:e,layoutId:n}){return zo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!tg[t]||t==="opacity")}function tT(t,e,n){var s;const{style:r}=t,i={};for(const a in r)(ln(r[a])||e.style&&ln(e.style[a])||AO(a,t)||((s=n==null?void 0:n.getValue(a))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(i[a]=r[a]);return i}function NO(t,e,n){const s=tT(t,e,n);for(const r in t)if(ln(t[r])||ln(e[r])){const i=Zc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[i]=t[r]}return s}function DX(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const CI=["x","y","width","height","cx","cy","r"],MX={useVisualState:vO({scrapeMotionValuesFromProps:NO,createRenderState:wO,onUpdate:({props:t,prevProps:e,current:n,renderState:s,latestValues:r})=>{if(!n)return;let i=!!t.drag;if(!i){for(const o in r)if(zo.has(o)){i=!0;break}}if(!i)return;let a=!e;if(e)for(let o=0;o<CI.length;o++){const c=CI[o];t[c]!==e[c]&&(a=!0)}a&&Ye.read(()=>{DX(n,s),Ye.render(()=>{J1(s,r,eT(n.tagName),t.transformTemplate),SO(n,s)})})}})},OX={useVisualState:vO({scrapeMotionValuesFromProps:tT,createRenderState:Z1})};function IO(t,e,n){for(const s in e)!ln(e[s])&&!AO(s,n)&&(t[s]=e[s])}function VX({transformTemplate:t},e){return S.useMemo(()=>{const n=Z1();return X1(n,e,t),Object.assign({},n.vars,n.style)},[e])}function LX(t,e){const n=t.style||{},s={};return IO(s,n,t),Object.assign(s,VX(t,e)),s}function UX(t,e){const n={},s=LX(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}function zX(t,e,n,s){const r=S.useMemo(()=>{const i=wO();return J1(i,e,eT(s),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};IO(i,t.style,t),r.style={...i,...r.style}}return r}function FX(t=!1){return(n,s,r,{latestValues:i},a)=>{const c=(K1(n)?zX:UX)(s,i,a,n),u=nX(s,typeof n=="string",t),h=n!==S.Fragment?{...u,...c,ref:r}:{},{children:f}=s,m=S.useMemo(()=>ln(f)?f.get():f,[f]);return S.createElement(n,{...h,children:m})}}function BX(t,e){return function(s,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...K1(s)?MX:OX,preloadedFeatures:t,useRender:FX(r),createVisualElement:e,Component:s};return dX(a)}}function RO(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}function Ny(t,e,n){const s=t.getProps();return W1(s,e,n!==void 0?n:s.custom,t)}const qX=B1(()=>window.ScrollTimeline!==void 0);class HX{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let s=0;s<this.animations.length;s++)this.animations[s][e]=n}attachTimeline(e,n){const s=this.animations.map(r=>{if(qX()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{s.forEach((r,i)=>{r&&r(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class GX extends HX{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function nT(t,e){return t?t[e]||t.default||t:void 0}const f_=2e4;function CO(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<f_;)e+=n,s=t.next(e);return e>=f_?1/0:e}function sT(t){return typeof t=="function"}function jI(t,e){t.timeline=e,t.onfinish=null}const rT=t=>Array.isArray(t)&&typeof t[0]=="number",$X={linearEasing:void 0};function KX(t,e){const n=B1(t);return()=>{var s;return(s=$X[e])!==null&&s!==void 0?s:n()}}const ng=KX(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),jO=(t,e,n=10)=>{let s="";const r=Math.max(Math.round(e/n),2);for(let i=0;i<r;i++)s+=t(Ec(0,r-1,i))+", ";return`linear(${s.substring(0,s.length-2)})`};function PO(t){return!!(typeof t=="function"&&ng()||!t||typeof t=="string"&&(t in m_||ng())||rT(t)||Array.isArray(t)&&t.every(PO))}const Ju=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,m_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ju([0,.65,.55,1]),circOut:Ju([.55,0,1,.45]),backIn:Ju([.31,.01,.66,-.59]),backOut:Ju([.33,1.53,.69,.99])};function kO(t,e){if(t)return typeof t=="function"&&ng()?jO(t,e):rT(t)?Ju(t):Array.isArray(t)?t.map(n=>kO(n,e)||m_.easeOut):m_[t]}const ws={x:!1,y:!1};function DO(){return ws.x||ws.y}function WX(t,e,n){var s;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const i=(s=void 0)!==null&&s!==void 0?s:r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function MO(t,e){const n=WX(t),s=new AbortController,r={passive:!0,...e,signal:s.signal};return[n,r,()=>s.abort()]}function PI(t){return e=>{e.pointerType==="touch"||DO()||t(e)}}function YX(t,e,n={}){const[s,r,i]=MO(t,n),a=PI(o=>{const{target:c}=o,u=e(o);if(typeof u!="function"||!c)return;const h=PI(f=>{u(f),c.removeEventListener("pointerleave",h)});c.addEventListener("pointerleave",h,r)});return s.forEach(o=>{o.addEventListener("pointerenter",a,r)}),i}const OO=(t,e)=>e?t===e?!0:OO(t,e.parentElement):!1,iT=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,QX=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function XX(t){return QX.has(t.tagName)||t.tabIndex!==-1}const Zu=new WeakSet;function kI(t){return e=>{e.key==="Enter"&&t(e)}}function cv(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const JX=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=kI(()=>{if(Zu.has(n))return;cv(n,"down");const r=kI(()=>{cv(n,"up")}),i=()=>cv(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function DI(t){return iT(t)&&!DO()}function ZX(t,e,n={}){const[s,r,i]=MO(t,n),a=o=>{const c=o.currentTarget;if(!DI(o)||Zu.has(c))return;Zu.add(c);const u=e(o),h=(p,_)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),!(!DI(p)||!Zu.has(c))&&(Zu.delete(c),typeof u=="function"&&u(p,{success:_}))},f=p=>{h(p,n.useGlobalTarget||OO(c,p.target))},m=p=>{h(p,!1)};window.addEventListener("pointerup",f,r),window.addEventListener("pointercancel",m,r)};return s.forEach(o=>{!XX(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,r),o.addEventListener("focus",u=>JX(u,r),r)}),i}function eJ(t){return t==="x"||t==="y"?ws[t]?null:(ws[t]=!0,()=>{ws[t]=!1}):ws.x||ws.y?null:(ws.x=ws.y=!0,()=>{ws.x=ws.y=!1})}const VO=new Set(["width","height","top","left","right","bottom",...Zc]);let Hm;function tJ(){Hm=void 0}const nr={now:()=>(Hm===void 0&&nr.set(Ht.isProcessing||QQ.useManualTiming?Ht.timestamp:performance.now()),Hm),set:t=>{Hm=t,queueMicrotask(tJ)}};function aT(t,e){t.indexOf(e)===-1&&t.push(e)}function oT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class lT{constructor(){this.subscriptions=[]}add(e){return aT(this.subscriptions,e),()=>oT(this.subscriptions,e)}notify(e,n,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,s);else for(let i=0;i<r;i++){const a=this.subscriptions[i];a&&a(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function LO(t,e){return e?t*(1e3/e):0}const MI=30,nJ=t=>!isNaN(parseFloat(t));class sJ{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,r=!0)=>{const i=nr.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=nr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=nJ(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new lT);const s=this.events[e].add(n);return e==="change"?()=>{s(),Ye.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=nr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MI)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,MI);return LO(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Th(t,e){return new sJ(t,e)}function rJ(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Th(n))}function iJ(t,e){const n=Ny(t,e);let{transitionEnd:s={},transition:r={},...i}=n||{};i={...i,...s};for(const a in i){const o=yX(i[a]);rJ(t,a,o)}}function aJ(t){return!!(ln(t)&&t.add)}function p_(t,e){const n=t.getValue("willChange");if(aJ(n))return n.add(e)}function UO(t){return t.props[pO]}const zO=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,oJ=1e-7,lJ=12;function cJ(t,e,n,s,r){let i,a,o=0;do a=e+(n-e)/2,i=zO(a,s,r)-t,i>0?n=a:e=a;while(Math.abs(i)>oJ&&++o<lJ);return a}function mf(t,e,n,s){if(t===e&&n===s)return Yn;const r=i=>cJ(i,0,1,t,n);return i=>i===0||i===1?i:zO(r(i),e,s)}const FO=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,BO=t=>e=>1-t(1-e),qO=mf(.33,1.53,.69,.99),cT=BO(qO),HO=FO(cT),GO=t=>(t*=2)<1?.5*cT(t):.5*(2-Math.pow(2,-10*(t-1))),uT=t=>1-Math.sin(Math.acos(t)),$O=BO(uT),KO=FO(uT),WO=t=>/^0[^.\s]+$/u.test(t);function uJ(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||WO(t):!0}const jd=t=>Math.round(t*1e5)/1e5,dT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function dJ(t){return t==null}const hJ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,hT=(t,e)=>n=>!!(typeof n=="string"&&hJ.test(n)&&n.startsWith(t)||e&&!dJ(n)&&Object.prototype.hasOwnProperty.call(n,e)),YO=(t,e,n)=>s=>{if(typeof s!="string")return s;const[r,i,a,o]=s.match(dT);return{[t]:parseFloat(r),[e]:parseFloat(i),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},fJ=t=>Hr(0,255,t),uv={...eu,transform:t=>Math.round(fJ(t))},Ja={test:hT("rgb","red"),parse:YO("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+uv.transform(t)+", "+uv.transform(e)+", "+uv.transform(n)+", "+jd(wh.transform(s))+")"};function mJ(t){let e="",n="",s="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,s+=s,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const g_={test:hT("#"),parse:mJ,transform:Ja.transform},Sl={test:hT("hsl","hue"),parse:YO("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+tr.transform(jd(e))+", "+tr.transform(jd(n))+", "+jd(wh.transform(s))+")"},sn={test:t=>Ja.test(t)||g_.test(t)||Sl.test(t),parse:t=>Ja.test(t)?Ja.parse(t):Sl.test(t)?Sl.parse(t):g_.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ja.transform(t):Sl.transform(t)},pJ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function gJ(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(dT))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(pJ))===null||n===void 0?void 0:n.length)||0)>0}const QO="number",XO="color",yJ="var",vJ="var(",OI="${}",xJ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Eh(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},r=[];let i=0;const o=e.replace(xJ,c=>(sn.test(c)?(s.color.push(i),r.push(XO),n.push(sn.parse(c))):c.startsWith(vJ)?(s.var.push(i),r.push(yJ),n.push(c)):(s.number.push(i),r.push(QO),n.push(parseFloat(c))),++i,OI)).split(OI);return{values:n,split:o,indexes:s,types:r}}function JO(t){return Eh(t).values}function ZO(t){const{split:e,types:n}=Eh(t),s=e.length;return r=>{let i="";for(let a=0;a<s;a++)if(i+=e[a],r[a]!==void 0){const o=n[a];o===QO?i+=jd(r[a]):o===XO?i+=sn.transform(r[a]):i+=r[a]}return i}}const _J=t=>typeof t=="number"?0:t;function bJ(t){const e=JO(t);return ZO(t)(e.map(_J))}const la={test:gJ,parse:JO,createTransformer:ZO,getAnimatableNone:bJ},wJ=new Set(["brightness","contrast","saturate","opacity"]);function TJ(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(dT)||[];if(!s)return t;const r=n.replace(s,"");let i=wJ.has(e)?1:0;return s!==n&&(i*=100),e+"("+i+r+")"}const EJ=/\b([a-z-]*)\(.*?\)/gu,y_={...la,getAnimatableNone:t=>{const e=t.match(EJ);return e?e.map(TJ).join(" "):t}},SJ={...Q1,color:sn,backgroundColor:sn,outlineColor:sn,fill:sn,stroke:sn,borderColor:sn,borderTopColor:sn,borderRightColor:sn,borderBottomColor:sn,borderLeftColor:sn,filter:y_,WebkitFilter:y_},fT=t=>SJ[t];function e6(t,e){let n=fT(t);return n!==y_&&(n=la),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const AJ=new Set(["auto","none","0"]);function NJ(t,e,n){let s=0,r;for(;s<t.length&&!r;){const i=t[s];typeof i=="string"&&!AJ.has(i)&&Eh(i).values.length&&(r=t[s]),s++}if(r&&n)for(const i of e)t[i]=e6(n,r)}const VI=t=>t===eu||t===ne,LI=(t,e)=>parseFloat(t.split(", ")[e]),UI=(t,e)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const r=s.match(/^matrix3d\((.+)\)$/u);if(r)return LI(r[1],e);{const i=s.match(/^matrix\((.+)\)$/u);return i?LI(i[1],t):0}},IJ=new Set(["x","y","z"]),RJ=Zc.filter(t=>!IJ.has(t));function CJ(t){const e=[];return RJ.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const Ac={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:UI(4,13),y:UI(5,14)};Ac.translateX=Ac.x;Ac.translateY=Ac.y;const lo=new Set;let v_=!1,x_=!1;function t6(){if(x_){const t=Array.from(lo).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const r=CJ(s);r.length&&(n.set(s,r),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const r=n.get(s);r&&r.forEach(([i,a])=>{var o;(o=s.getValue(i))===null||o===void 0||o.set(a)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}x_=!1,v_=!1,lo.forEach(t=>t.complete()),lo.clear()}function n6(){lo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(x_=!0)})}function jJ(){n6(),t6()}class mT{constructor(e,n,s,r,i,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=r,this.element=i,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(lo.add(this),v_||(v_=!0,Ye.read(n6),Ye.resolveKeyframes(t6))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:r}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const a=r==null?void 0:r.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(s&&n){const c=s.readValue(n,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),r&&a===void 0&&r.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),lo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,lo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const s6=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),PJ=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function kJ(t){const e=PJ.exec(t);if(!e)return[,];const[,n,s,r]=e;return[`--${n??s}`,r]}function r6(t,e,n=1){const[s,r]=kJ(t);if(!s)return;const i=window.getComputedStyle(e).getPropertyValue(s);if(i){const a=i.trim();return s6(a)?parseFloat(a):a}return Y1(r)?r6(r,e,n+1):r}const i6=t=>e=>e.test(t),DJ={test:t=>t==="auto",parse:t=>t},a6=[eu,ne,tr,pi,TX,wX,DJ],zI=t=>a6.find(i6(t));class o6 extends mT{constructor(e,n,s,r,i){super(e,n,s,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),Y1(u))){const h=r6(u,n.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!VO.has(s)||e.length!==2)return;const[r,i]=e,a=zI(r),o=zI(i);if(a!==o)if(VI(a)&&VI(o))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let r=0;r<e.length;r++)uJ(e[r])&&s.push(r);s.length&&NJ(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ac[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(s,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:s,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const i=n.getValue(s);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=Ac[s](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,u])=>{n.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const FI=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(la.test(t)||t==="0")&&!t.startsWith("url("));function MJ(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function OJ(t,e,n,s){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],a=FI(r,e),o=FI(i,e);return!a||!o?!1:MJ(t)||(n==="spring"||sT(n))&&s}const VJ=t=>t!==null;function Iy(t,{repeat:e,repeatType:n="loop"},s){const r=t.filter(VJ),i=e&&n!=="loop"&&e%2===1?0:r.length-1;return!i||s===void 0?r[i]:s}const LJ=40;class l6{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=nr.now(),this.options={autoplay:e,delay:n,type:s,repeat:r,repeatDelay:i,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>LJ?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&jJ(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=nr.now(),this.hasAttemptedResolve=!0;const{name:s,type:r,velocity:i,delay:a,onComplete:o,onUpdate:c,isGenerator:u}=this.options;if(!u&&!OJ(e,s,r,i))if(a)this.options.duration=0;else{c&&c(Iy(e,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const rt=(t,e,n)=>t+(e-t)*n;function dv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function UJ({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let r=0,i=0,a=0;if(!e)r=i=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;r=dv(c,o,t+1/3),i=dv(c,o,t),a=dv(c,o,t-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:s}}function sg(t,e){return n=>n>0?e:t}const hv=(t,e,n)=>{const s=t*t,r=n*(e*e-s)+s;return r<0?0:Math.sqrt(r)},zJ=[g_,Ja,Sl],FJ=t=>zJ.find(e=>e.test(t));function BI(t){const e=FJ(t);if(!e)return!1;let n=e.parse(t);return e===Sl&&(n=UJ(n)),n}const qI=(t,e)=>{const n=BI(t),s=BI(e);if(!n||!s)return sg(t,e);const r={...n};return i=>(r.red=hv(n.red,s.red,i),r.green=hv(n.green,s.green,i),r.blue=hv(n.blue,s.blue,i),r.alpha=rt(n.alpha,s.alpha,i),Ja.transform(r))},BJ=(t,e)=>n=>e(t(n)),pf=(...t)=>t.reduce(BJ),__=new Set(["none","hidden"]);function qJ(t,e){return __.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function HJ(t,e){return n=>rt(t,e,n)}function pT(t){return typeof t=="number"?HJ:typeof t=="string"?Y1(t)?sg:sn.test(t)?qI:KJ:Array.isArray(t)?c6:typeof t=="object"?sn.test(t)?qI:GJ:sg}function c6(t,e){const n=[...t],s=n.length,r=t.map((i,a)=>pT(i)(i,e[a]));return i=>{for(let a=0;a<s;a++)n[a]=r[a](i);return n}}function GJ(t,e){const n={...t,...e},s={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(s[r]=pT(t[r])(t[r],e[r]));return r=>{for(const i in s)n[i]=s[i](r);return n}}function $J(t,e){var n;const s=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],o=t.indexes[a][r[a]],c=(n=t.values[o])!==null&&n!==void 0?n:0;s[i]=c,r[a]++}return s}const KJ=(t,e)=>{const n=la.createTransformer(e),s=Eh(t),r=Eh(e);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?__.has(t)&&!r.values.length||__.has(e)&&!s.values.length?qJ(t,e):pf(c6($J(s,r),r.values),n):sg(t,e)};function u6(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?rt(t,e,n):pT(t)(t,e)}const WJ=5;function d6(t,e,n){const s=Math.max(e-WJ,0);return LO(n-t(s),e-s)}const ut={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fv=.001;function YJ({duration:t=ut.duration,bounce:e=ut.bounce,velocity:n=ut.velocity,mass:s=ut.mass}){let r,i,a=1-e;a=Hr(ut.minDamping,ut.maxDamping,a),t=Hr(ut.minDuration,ut.maxDuration,Cr(t)),a<1?(r=u=>{const h=u*a,f=h*t,m=h-n,p=b_(u,a),_=Math.exp(-f);return fv-m/p*_},i=u=>{const f=u*a*t,m=f*n+n,p=Math.pow(a,2)*Math.pow(u,2)*t,_=Math.exp(-f),w=b_(Math.pow(u,2),a);return(-r(u)+fv>0?-1:1)*((m-p)*_)/w}):(r=u=>{const h=Math.exp(-u*t),f=(u-n)*t+1;return-fv+h*f},i=u=>{const h=Math.exp(-u*t),f=(n-u)*(t*t);return h*f});const o=5/t,c=XJ(r,i,o);if(t=Rr(t),isNaN(c))return{stiffness:ut.stiffness,damping:ut.damping,duration:t};{const u=Math.pow(c,2)*s;return{stiffness:u,damping:a*2*Math.sqrt(s*u),duration:t}}}const QJ=12;function XJ(t,e,n){let s=n;for(let r=1;r<QJ;r++)s=s-t(s)/e(s);return s}function b_(t,e){return t*Math.sqrt(1-e*e)}const JJ=["duration","bounce"],ZJ=["stiffness","damping","mass"];function HI(t,e){return e.some(n=>t[n]!==void 0)}function eZ(t){let e={velocity:ut.velocity,stiffness:ut.stiffness,damping:ut.damping,mass:ut.mass,isResolvedFromDuration:!1,...t};if(!HI(t,ZJ)&&HI(t,JJ))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),r=s*s,i=2*Hr(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:ut.mass,stiffness:r,damping:i}}else{const n=YJ(t);e={...e,...n,mass:ut.mass},e.isResolvedFromDuration=!0}return e}function h6(t=ut.visualDuration,e=ut.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:r}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:i},{stiffness:c,damping:u,mass:h,duration:f,velocity:m,isResolvedFromDuration:p}=eZ({...n,velocity:-Cr(n.velocity||0)}),_=m||0,w=u/(2*Math.sqrt(c*h)),T=a-i,x=Cr(Math.sqrt(c/h)),v=Math.abs(T)<5;s||(s=v?ut.restSpeed.granular:ut.restSpeed.default),r||(r=v?ut.restDelta.granular:ut.restDelta.default);let b;if(w<1){const D=b_(x,w);b=M=>{const A=Math.exp(-w*x*M);return a-A*((_+w*x*T)/D*Math.sin(D*M)+T*Math.cos(D*M))}}else if(w===1)b=D=>a-Math.exp(-x*D)*(T+(_+x*T)*D);else{const D=x*Math.sqrt(w*w-1);b=M=>{const A=Math.exp(-w*x*M),E=Math.min(D*M,300);return a-A*((_+w*x*T)*Math.sinh(E)+D*T*Math.cosh(E))/D}}const R={calculatedDuration:p&&f||null,next:D=>{const M=b(D);if(p)o.done=D>=f;else{let A=0;w<1&&(A=D===0?Rr(_):d6(b,D,M));const E=Math.abs(A)<=s,N=Math.abs(a-M)<=r;o.done=E&&N}return o.value=o.done?a:M,o},toString:()=>{const D=Math.min(CO(R),f_),M=jO(A=>R.next(D*A).value,D,30);return D+"ms "+M}};return R}function GI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:a,min:o,max:c,restDelta:u=.5,restSpeed:h}){const f=t[0],m={done:!1,value:f},p=E=>o!==void 0&&E<o||c!==void 0&&E>c,_=E=>o===void 0?c:c===void 0||Math.abs(o-E)<Math.abs(c-E)?o:c;let w=n*e;const T=f+w,x=a===void 0?T:a(T);x!==T&&(w=x-f);const v=E=>-w*Math.exp(-E/s),b=E=>x+v(E),R=E=>{const N=v(E),I=b(E);m.done=Math.abs(N)<=u,m.value=m.done?x:I};let D,M;const A=E=>{p(m.value)&&(D=E,M=h6({keyframes:[m.value,_(m.value)],velocity:d6(b,E,m.value),damping:r,stiffness:i,restDelta:u,restSpeed:h}))};return A(0),{calculatedDuration:null,next:E=>{let N=!1;return!M&&D===void 0&&(N=!0,R(E),A(E)),D!==void 0&&E>=D?M.next(E-D):(!N&&R(E),m)}}}const tZ=mf(.42,0,1,1),nZ=mf(0,0,.58,1),f6=mf(.42,0,.58,1),sZ=t=>Array.isArray(t)&&typeof t[0]!="number",rZ={linear:Yn,easeIn:tZ,easeInOut:f6,easeOut:nZ,circIn:uT,circInOut:KO,circOut:$O,backIn:cT,backInOut:HO,backOut:qO,anticipate:GO},$I=t=>{if(rT(t)){uO(t.length===4);const[e,n,s,r]=t;return mf(e,n,s,r)}else if(typeof t=="string")return rZ[t];return t};function iZ(t,e,n){const s=[],r=n||u6,i=t.length-1;for(let a=0;a<i;a++){let o=r(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||Yn:e;o=pf(c,o)}s.push(o)}return s}function aZ(t,e,{clamp:n=!0,ease:s,mixer:r}={}){const i=t.length;if(uO(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=iZ(e,s,r),c=o.length,u=h=>{if(a&&h<t[0])return e[0];let f=0;if(c>1)for(;f<t.length-2&&!(h<t[f+1]);f++);const m=Ec(t[f],t[f+1],h);return o[f](m)};return n?h=>u(Hr(t[0],t[i-1],h)):u}function oZ(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const r=Ec(0,e,s);t.push(rt(n,1,r))}}function lZ(t){const e=[0];return oZ(e,t.length-1),e}function cZ(t,e){return t.map(n=>n*e)}function uZ(t,e){return t.map(()=>e||f6).splice(0,t.length-1)}function rg({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const r=sZ(s)?s.map($I):$I(s),i={done:!1,value:e[0]},a=cZ(n&&n.length===e.length?n:lZ(e),t),o=aZ(a,e,{ease:Array.isArray(r)?r:uZ(e,r)});return{calculatedDuration:t,next:c=>(i.value=o(c),i.done=c>=t,i)}}const dZ=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ye.update(e,!0),stop:()=>oa(e),now:()=>Ht.isProcessing?Ht.timestamp:nr.now()}},hZ={decay:GI,inertia:GI,tween:rg,keyframes:rg,spring:h6},fZ=t=>t/100;class gT extends l6{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:s,element:r,keyframes:i}=this.options,a=(r==null?void 0:r.KeyframeResolver)||mT,o=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new a(i,o,n,s,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:i,velocity:a=0}=this.options,o=sT(n)?n:hZ[n]||rg;let c,u;o!==rg&&typeof e[0]!="number"&&(c=pf(fZ,u6(e[0],e[1])),e=[0,100]);const h=o({...this.options,keyframes:e});i==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=CO(h));const{calculatedDuration:f}=h,m=f+r,p=m*(s+1)-r;return{generator:h,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:f,resolvedDuration:m,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:s}=this;if(!s){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:r,generator:i,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:c,calculatedDuration:u,totalDuration:h,resolvedDuration:f}=s;if(this.startTime===null)return i.next(0);const{delay:m,repeat:p,repeatType:_,repeatDelay:w,onUpdate:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const x=this.currentTime-m*(this.speed>=0?1:-1),v=this.speed>=0?x<0:x>h;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let b=this.currentTime,R=i;if(p){const E=Math.min(this.currentTime,h)/f;let N=Math.floor(E),I=E%1;!I&&E>=1&&(I=1),I===1&&N--,N=Math.min(N,p+1),!!(N%2)&&(_==="reverse"?(I=1-I,w&&(I-=w/f)):_==="mirror"&&(R=a)),b=Hr(0,1,I)*f}const D=v?{done:!1,value:c[0]}:R.next(b);o&&(D.value=o(D.value));let{done:M}=D;!v&&u!==null&&(M=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return A&&r!==void 0&&(D.value=Iy(c,this.options,r)),T&&T(D.value),A&&this.finish(),D}get duration(){const{resolved:e}=this;return e?Cr(e.calculatedDuration):0}get time(){return Cr(this.currentTime)}set time(e){e=Rr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Cr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=dZ,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const mZ=new Set(["opacity","clipPath","filter","transform"]);function pZ(t,e,n,{delay:s=0,duration:r=300,repeat:i=0,repeatType:a="loop",ease:o="easeInOut",times:c}={}){const u={[e]:n};c&&(u.offset=c);const h=kO(o,r);return Array.isArray(h)&&(u.easing=h),t.animate(u,{delay:s,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}const gZ=B1(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ig=10,yZ=2e4;function vZ(t){return sT(t.type)||t.type==="spring"||!PO(t.ease)}function xZ(t,e){const n=new gT({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:t[0]};const r=[];let i=0;for(;!s.done&&i<yZ;)s=n.sample(i),r.push(s.value),i+=ig;return{times:void 0,keyframes:r,duration:i-ig,ease:"linear"}}const m6={anticipate:GO,backInOut:HO,circInOut:KO};function _Z(t){return t in m6}class KI extends l6{constructor(e){super(e);const{name:n,motionValue:s,element:r,keyframes:i}=this.options;this.resolver=new o6(i,(a,o)=>this.onKeyframesResolved(a,o),n,s,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:s=300,times:r,ease:i,type:a,motionValue:o,name:c,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof i=="string"&&ng()&&_Z(i)&&(i=m6[i]),vZ(this.options)){const{onComplete:f,onUpdate:m,motionValue:p,element:_,...w}=this.options,T=xZ(e,w);e=T.keyframes,e.length===1&&(e[1]=e[0]),s=T.duration,r=T.times,i=T.ease,a="keyframes"}const h=pZ(o.owner.current,c,e,{...this.options,duration:s,times:r,ease:i});return h.startTime=u??this.calcStartTime(),this.pendingTimeline?(jI(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:f}=this.options;o.set(Iy(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:s,times:r,type:a,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Cr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Cr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=Rr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Yn;const{animation:s}=n;jI(s,e)}return Yn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:s,duration:r,type:i,ease:a,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:h,onComplete:f,element:m,...p}=this.options,_=new gT({...p,keyframes:s,duration:r,type:i,ease:a,times:o,isGenerator:!0}),w=Rr(this.time);u.setWithVelocity(_.sample(w-ig).value,_.sample(w).value,ig)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:s,repeatDelay:r,repeatType:i,damping:a,type:o}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=n.owner.getProps();return gZ()&&s&&mZ.has(s)&&!c&&!u&&!r&&i!=="mirror"&&a!==0&&o!=="inertia"}}const bZ={type:"spring",stiffness:500,damping:25,restSpeed:10},wZ=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),TZ={type:"keyframes",duration:.8},EZ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},SZ=(t,{keyframes:e})=>e.length>2?TZ:zo.has(t)?t.startsWith("scale")?wZ(e[1]):bZ:EZ;function AZ({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:a,repeatDelay:o,from:c,elapsed:u,...h}){return!!Object.keys(h).length}const yT=(t,e,n,s={},r,i)=>a=>{const o=nT(s,t)||{},c=o.delay||s.delay||0;let{elapsed:u=0}=s;u=u-Rr(c);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:m=>{e.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:i?void 0:r};AZ(o)||(h={...h,...SZ(t,h)}),h.duration&&(h.duration=Rr(h.duration)),h.repeatDelay&&(h.repeatDelay=Rr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),f&&!i&&e.get()!==void 0){const m=Iy(h.keyframes,o);if(m!==void 0)return Ye.update(()=>{h.onUpdate(m),h.onComplete()}),new GX([])}return!i&&KI.supports(h)?new KI(h):new gT(h)};function NZ({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function p6(t,e,{delay:n=0,transitionOverride:s,type:r}={}){var i;let{transition:a=t.getDefaultTransition(),transitionEnd:o,...c}=e;s&&(a=s);const u=[],h=r&&t.animationState&&t.animationState.getState()[r];for(const f in c){const m=t.getValue(f,(i=t.latestValues[f])!==null&&i!==void 0?i:null),p=c[f];if(p===void 0||h&&NZ(h,f))continue;const _={delay:n,...nT(a||{},f)};let w=!1;if(window.MotionHandoffAnimation){const x=UO(t);if(x){const v=window.MotionHandoffAnimation(x,f,Ye);v!==null&&(_.startTime=v,w=!0)}}p_(t,f),m.start(yT(f,m,p,t.shouldReduceMotion&&VO.has(f)?{type:!1}:_,t,w));const T=m.animation;T&&u.push(T)}return o&&Promise.all(u).then(()=>{Ye.update(()=>{o&&iJ(t,o)})}),u}function w_(t,e,n={}){var s;const r=Ny(t,e,n.type==="exit"?(s=t.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(p6(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:m}=i;return IZ(t,e,h+u,f,m,n)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,h]=c==="beforeChildren"?[a,o]:[o,a];return u().then(()=>h())}else return Promise.all([a(),o(n.delay)])}function IZ(t,e,n=0,s=0,r=1,i){const a=[],o=(t.variantChildren.size-1)*s,c=r===1?(u=0)=>u*s:(u=0)=>o-u*s;return Array.from(t.variantChildren).sort(RZ).forEach((u,h)=>{u.notify("AnimationStart",e),a.push(w_(u,e,{...i,delay:n+c(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(a)}function RZ(t,e){return t.sortNodePosition(e)}function CZ(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const r=e.map(i=>w_(t,i,n));s=Promise.all(r)}else if(typeof e=="string")s=w_(t,e,n);else{const r=typeof e=="function"?Ny(t,e,n.custom):e;s=Promise.all(p6(t,r,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}const jZ=H1.length;function g6(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?g6(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<jZ;n++){const s=H1[n],r=t.props[s];(bh(r)||r===!1)&&(e[s]=r)}return e}const PZ=[...q1].reverse(),kZ=q1.length;function DZ(t){return e=>Promise.all(e.map(({animation:n,options:s})=>CZ(t,n,s)))}function MZ(t){let e=DZ(t),n=WI(),s=!0;const r=c=>(u,h)=>{var f;const m=Ny(t,h,c==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(m){const{transition:p,transitionEnd:_,...w}=m;u={...u,...w,..._}}return u};function i(c){e=c(t)}function a(c){const{props:u}=t,h=g6(t.parent)||{},f=[],m=new Set;let p={},_=1/0;for(let T=0;T<kZ;T++){const x=PZ[T],v=n[x],b=u[x]!==void 0?u[x]:h[x],R=bh(b),D=x===c?v.isActive:null;D===!1&&(_=T);let M=b===h[x]&&b!==u[x]&&R;if(M&&s&&t.manuallyAnimateOnMount&&(M=!1),v.protectedKeys={...p},!v.isActive&&D===null||!b&&!v.prevProp||Sy(b)||typeof b=="boolean")continue;const A=OZ(v.prevProp,b);let E=A||x===c&&v.isActive&&!M&&R||T>_&&R,N=!1;const I=Array.isArray(b)?b:[b];let P=I.reduce(r(x),{});D===!1&&(P={});const{prevResolvedValues:k={}}=v,j={...k,...P},W=ee=>{E=!0,m.has(ee)&&(N=!0,m.delete(ee)),v.needsAnimating[ee]=!0;const te=t.getValue(ee);te&&(te.liveStyle=!1)};for(const ee in j){const te=P[ee],Ee=k[ee];if(p.hasOwnProperty(ee))continue;let Je=!1;h_(te)&&h_(Ee)?Je=!RO(te,Ee):Je=te!==Ee,Je?te!=null?W(ee):m.add(ee):te!==void 0&&m.has(ee)?W(ee):v.protectedKeys[ee]=!0}v.prevProp=b,v.prevResolvedValues=P,v.isActive&&(p={...p,...P}),s&&t.blockInitialAnimation&&(E=!1),E&&(!(M&&A)||N)&&f.push(...I.map(ee=>({animation:ee,options:{type:x}})))}if(m.size){const T={};m.forEach(x=>{const v=t.getBaseTarget(x),b=t.getValue(x);b&&(b.liveStyle=!0),T[x]=v??null}),f.push({animation:T})}let w=!!f.length;return s&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(w=!1),s=!1,w?e(f):Promise.resolve()}function o(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(m=>{var p;return(p=m.animationState)===null||p===void 0?void 0:p.setActive(c,u)}),n[c].isActive=u;const f=a(c);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:a,setActive:o,setAnimateFunction:i,getState:()=>n,reset:()=>{n=WI(),s=!0}}}function OZ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!RO(e,t):!1}function Pa(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function WI(){return{animate:Pa(!0),whileInView:Pa(),whileHover:Pa(),whileTap:Pa(),whileDrag:Pa(),whileFocus:Pa(),exit:Pa()}}class ba{constructor(e){this.isMounted=!1,this.node=e}update(){}}class VZ extends ba{constructor(e){super(e),e.animationState||(e.animationState=MZ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Sy(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let LZ=0;class UZ extends ba{constructor(){super(...arguments),this.id=LZ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const zZ={animation:{Feature:VZ},exit:{Feature:UZ}};function Sh(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function gf(t){return{point:{x:t.pageX,y:t.pageY}}}const FZ=t=>e=>iT(e)&&t(e,gf(e));function Pd(t,e,n,s){return Sh(t,e,FZ(n),s)}const YI=(t,e)=>Math.abs(t-e);function BZ(t,e){const n=YI(t.x,e.x),s=YI(t.y,e.y);return Math.sqrt(n**2+s**2)}class y6{constructor(e,n,{transformPagePoint:s,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=pv(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,p=BZ(f.offset,{x:0,y:0})>=3;if(!m&&!p)return;const{point:_}=f,{timestamp:w}=Ht;this.history.push({..._,timestamp:w});const{onStart:T,onMove:x}=this.handlers;m||(T&&T(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=mv(m,this.transformPagePoint),Ye.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:p,onSessionEnd:_,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=pv(f.type==="pointercancel"?this.lastMoveEventInfo:mv(m,this.transformPagePoint),this.history);this.startEvent&&p&&p(f,T),_&&_(f,T)},!iT(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.contextWindow=r||window;const a=gf(e),o=mv(a,this.transformPagePoint),{point:c}=o,{timestamp:u}=Ht;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=n;h&&h(e,pv(o,this.history)),this.removeListeners=pf(Pd(this.contextWindow,"pointermove",this.handlePointerMove),Pd(this.contextWindow,"pointerup",this.handlePointerUp),Pd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),oa(this.updatePoint)}}function mv(t,e){return e?{point:e(t.point)}:t}function QI(t,e){return{x:t.x-e.x,y:t.y-e.y}}function pv({point:t},e){return{point:t,delta:QI(t,v6(e)),offset:QI(t,qZ(e)),velocity:HZ(e,.1)}}function qZ(t){return t[0]}function v6(t){return t[t.length-1]}function HZ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const r=v6(t);for(;n>=0&&(s=t[n],!(r.timestamp-s.timestamp>Rr(e)));)n--;if(!s)return{x:0,y:0};const i=Cr(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const a={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const x6=1e-4,GZ=1-x6,$Z=1+x6,_6=.01,KZ=0-_6,WZ=0+_6;function es(t){return t.max-t.min}function YZ(t,e,n){return Math.abs(t-e)<=n}function XI(t,e,n,s=.5){t.origin=s,t.originPoint=rt(e.min,e.max,t.origin),t.scale=es(n)/es(e),t.translate=rt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=GZ&&t.scale<=$Z||isNaN(t.scale))&&(t.scale=1),(t.translate>=KZ&&t.translate<=WZ||isNaN(t.translate))&&(t.translate=0)}function kd(t,e,n,s){XI(t.x,e.x,n.x,s?s.originX:void 0),XI(t.y,e.y,n.y,s?s.originY:void 0)}function JI(t,e,n){t.min=n.min+e.min,t.max=t.min+es(e)}function QZ(t,e,n){JI(t.x,e.x,n.x),JI(t.y,e.y,n.y)}function ZI(t,e,n){t.min=e.min-n.min,t.max=t.min+es(e)}function Dd(t,e,n){ZI(t.x,e.x,n.x),ZI(t.y,e.y,n.y)}function XZ(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?rt(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?rt(n,t,s.max):Math.min(t,n)),t}function e2(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function JZ(t,{top:e,left:n,bottom:s,right:r}){return{x:e2(t.x,n,r),y:e2(t.y,e,s)}}function t2(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function ZZ(t,e){return{x:t2(t.x,e.x),y:t2(t.y,e.y)}}function eee(t,e){let n=.5;const s=es(t),r=es(e);return r>s?n=Ec(e.min,e.max-s,t.min):s>r&&(n=Ec(t.min,t.max-r,e.min)),Hr(0,1,n)}function tee(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const T_=.35;function nee(t=T_){return t===!1?t=0:t===!0&&(t=T_),{x:n2(t,"left","right"),y:n2(t,"top","bottom")}}function n2(t,e,n){return{min:s2(t,e),max:s2(t,n)}}function s2(t,e){return typeof t=="number"?t:t[e]||0}const r2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Al=()=>({x:r2(),y:r2()}),i2=()=>({min:0,max:0}),pt=()=>({x:i2(),y:i2()});function is(t){return[t("x"),t("y")]}function b6({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function see({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function ree(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function gv(t){return t===void 0||t===1}function E_({scale:t,scaleX:e,scaleY:n}){return!gv(t)||!gv(e)||!gv(n)}function za(t){return E_(t)||w6(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function w6(t){return a2(t.x)||a2(t.y)}function a2(t){return t&&t!=="0%"}function ag(t,e,n){const s=t-n,r=e*s;return n+r}function o2(t,e,n,s,r){return r!==void 0&&(t=ag(t,r,s)),ag(t,n,s)+e}function S_(t,e=0,n=1,s,r){t.min=o2(t.min,e,n,s,r),t.max=o2(t.max,e,n,s,r)}function T6(t,{x:e,y:n}){S_(t.x,e.translate,e.scale,e.originPoint),S_(t.y,n.translate,n.scale,n.originPoint)}const l2=.999999999999,c2=1.0000000000001;function iee(t,e,n,s=!1){const r=n.length;if(!r)return;e.x=e.y=1;let i,a;for(let o=0;o<r;o++){i=n[o],a=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Il(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,T6(t,a)),s&&za(i.latestValues)&&Il(t,i.latestValues))}e.x<c2&&e.x>l2&&(e.x=1),e.y<c2&&e.y>l2&&(e.y=1)}function Nl(t,e){t.min=t.min+e,t.max=t.max+e}function u2(t,e,n,s,r=.5){const i=rt(t.min,t.max,r);S_(t,e,n,i,s)}function Il(t,e){u2(t.x,e.x,e.scaleX,e.scale,e.originX),u2(t.y,e.y,e.scaleY,e.scale,e.originY)}function E6(t,e){return b6(ree(t.getBoundingClientRect(),e))}function aee(t,e,n){const s=E6(t,n),{scroll:r}=e;return r&&(Nl(s.x,r.offset.x),Nl(s.y,r.offset.y)),s}const S6=({current:t})=>t?t.ownerDocument.defaultView:null,oee=new WeakMap;class lee{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(gf(h).point)},i=(h,f)=>{const{drag:m,dragPropagation:p,onDragStart:_}=this.getProps();if(m&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=eJ(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),is(T=>{let x=this.getAxisMotionValue(T).get()||0;if(tr.test(x)){const{projection:v}=this.visualElement;if(v&&v.layout){const b=v.layout.layoutBox[T];b&&(x=es(b)*(parseFloat(x)/100))}}this.originPoint[T]=x}),_&&Ye.postRender(()=>_(h,f)),p_(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},a=(h,f)=>{const{dragPropagation:m,dragDirectionLock:p,onDirectionLock:_,onDrag:w}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:T}=f;if(p&&this.currentDirection===null){this.currentDirection=cee(T),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",f.point,T),this.updateAxis("y",f.point,T),this.visualElement.render(),w&&w(h,f)},o=(h,f)=>this.stop(h,f),c=()=>is(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new y6(e,{onSessionStart:r,onStart:i,onMove:a,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:S6(this.visualElement)})}stop(e,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&Ye.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:r}=this.getProps();if(!s||!om(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(a=XZ(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&El(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=JZ(r.layoutBox,n):this.constraints=!1,this.elastic=nee(s),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&is(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=tee(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!El(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=aee(s,r.root,this.visualElement.getTransformPagePoint());let a=ZZ(r.layout.layoutBox,i);if(n){const o=n(see(a));this.hasMutatedConstraints=!!o,o&&(a=b6(o))}return a}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=is(h=>{if(!om(h,n,this.currentDirection))return;let f=c&&c[h]||{};a&&(f={min:0,max:0});const m=r?200:1e6,p=r?40:1e7,_={type:"inertia",velocity:s?e[h]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(h,_)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return p_(this.visualElement,e),s.start(yT(e,s,0,n,this.visualElement,!1))}stopAnimation(){is(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){is(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),r=s[n];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){is(n=>{const{drag:s}=this.getProps();if(!om(n,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:o}=r.layout.layoutBox[n];i.set(e[n]-rt(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!El(n)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};is(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const c=o.get();r[a]=eee({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),is(a=>{if(!om(a,e,null))return;const o=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];o.set(rt(c,u,r[a]))})}addListeners(){if(!this.visualElement.current)return;oee.set(this.visualElement,this);const e=this.visualElement.current,n=Pd(e,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();El(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Ye.read(s);const a=Sh(window,"resize",()=>this.scalePositionWithinConstraints()),o=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(is(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=c[h].translate,f.set(f.get()+c[h].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:a=T_,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:a,dragMomentum:o}}}function om(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function cee(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class uee extends ba{constructor(e){super(e),this.removeGroupControls=Yn,this.removeListeners=Yn,this.controls=new lee(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yn}unmount(){this.removeGroupControls(),this.removeListeners()}}const d2=t=>(e,n)=>{t&&Ye.postRender(()=>t(e,n))};class dee extends ba{constructor(){super(...arguments),this.removePointerDownListener=Yn}onPointerDown(e){this.session=new y6(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:S6(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:d2(e),onStart:d2(n),onMove:s,onEnd:(i,a)=>{delete this.session,r&&Ye.postRender(()=>r(i,a))}}}mount(){this.removePointerDownListener=Pd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Gm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function h2(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Mu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ne.test(t))t=parseFloat(t);else return t;const n=h2(t,e.target.x),s=h2(t,e.target.y);return`${n}% ${s}%`}},hee={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,r=la.parse(t);if(r.length>5)return s;const i=la.createTransformer(t),a=typeof r[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;r[0+a]/=o,r[1+a]/=c;const u=rt(o,c,.5);return typeof r[2+a]=="number"&&(r[2+a]/=u),typeof r[3+a]=="number"&&(r[3+a]/=u),i(r)}};class fee extends S.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=e;kX(mee),i&&(n.group&&n.group.add(i),s&&s.register&&r&&s.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Gm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:r,isPresent:i}=this.props,a=s.projection;return a&&(a.isPresent=i,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||Ye.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),$1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function A6(t){const[e,n]=lO(),s=S.useContext(L1);return l.jsx(fee,{...t,layoutGroup:s,switchLayoutGroup:S.useContext(gO),isPresent:e,safeToRemove:n})}const mee={borderRadius:{...Mu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Mu,borderTopRightRadius:Mu,borderBottomLeftRadius:Mu,borderBottomRightRadius:Mu,boxShadow:hee};function pee(t,e,n){const s=ln(t)?t:Th(t);return s.start(yT("",s,e,n)),s.animation}function gee(t){return t instanceof SVGElement&&t.tagName!=="svg"}const yee=(t,e)=>t.depth-e.depth;class vee{constructor(){this.children=[],this.isDirty=!1}add(e){aT(this.children,e),this.isDirty=!0}remove(e){oT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(yee),this.isDirty=!1,this.children.forEach(e)}}function xee(t,e){const n=nr.now(),s=({timestamp:r})=>{const i=r-n;i>=e&&(oa(s),t(i-e))};return Ye.read(s,!0),()=>oa(s)}const N6=["TopLeft","TopRight","BottomLeft","BottomRight"],_ee=N6.length,f2=t=>typeof t=="string"?parseFloat(t):t,m2=t=>typeof t=="number"||ne.test(t);function bee(t,e,n,s,r,i){r?(t.opacity=rt(0,n.opacity!==void 0?n.opacity:1,wee(s)),t.opacityExit=rt(e.opacity!==void 0?e.opacity:1,0,Tee(s))):i&&(t.opacity=rt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let a=0;a<_ee;a++){const o=`border${N6[a]}Radius`;let c=p2(e,o),u=p2(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||m2(c)===m2(u)?(t[o]=Math.max(rt(f2(c),f2(u),s),0),(tr.test(u)||tr.test(c))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=rt(e.rotate||0,n.rotate||0,s))}function p2(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const wee=I6(0,.5,$O),Tee=I6(.5,.95,Yn);function I6(t,e,n){return s=>s<t?0:s>e?1:n(Ec(t,e,s))}function g2(t,e){t.min=e.min,t.max=e.max}function ss(t,e){g2(t.x,e.x),g2(t.y,e.y)}function y2(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function v2(t,e,n,s,r){return t-=e,t=ag(t,1/n,s),r!==void 0&&(t=ag(t,1/r,s)),t}function Eee(t,e=0,n=1,s=.5,r,i=t,a=t){if(tr.test(e)&&(e=parseFloat(e),e=rt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=rt(i.min,i.max,s);t===i&&(o-=e),t.min=v2(t.min,e,n,o,r),t.max=v2(t.max,e,n,o,r)}function x2(t,e,[n,s,r],i,a){Eee(t,e[n],e[s],e[r],e.scale,i,a)}const See=["x","scaleX","originX"],Aee=["y","scaleY","originY"];function _2(t,e,n,s){x2(t.x,e,See,n?n.x:void 0,s?s.x:void 0),x2(t.y,e,Aee,n?n.y:void 0,s?s.y:void 0)}function b2(t){return t.translate===0&&t.scale===1}function R6(t){return b2(t.x)&&b2(t.y)}function w2(t,e){return t.min===e.min&&t.max===e.max}function Nee(t,e){return w2(t.x,e.x)&&w2(t.y,e.y)}function T2(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function C6(t,e){return T2(t.x,e.x)&&T2(t.y,e.y)}function E2(t){return es(t.x)/es(t.y)}function S2(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Iee{constructor(){this.members=[]}add(e){aT(this.members,e),e.scheduleRender()}remove(e){if(oT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let s;for(let r=n;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Ree(t,e,n){let s="";const r=t.x.translate/e.x,i=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((r||i||a)&&(s=`translate3d(${r}px, ${i}px, ${a}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:h,rotateX:f,rotateY:m,skewX:p,skewY:_}=n;u&&(s=`perspective(${u}px) ${s}`),h&&(s+=`rotate(${h}deg) `),f&&(s+=`rotateX(${f}deg) `),m&&(s+=`rotateY(${m}deg) `),p&&(s+=`skewX(${p}deg) `),_&&(s+=`skewY(${_}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(s+=`scale(${o}, ${c})`),s||"none"}const Fa={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ed=typeof window<"u"&&window.MotionDebug!==void 0,yv=["","X","Y","Z"],Cee={visibility:"hidden"},A2=1e3;let jee=0;function vv(t,e,n,s){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),s&&(s[t]=0))}function j6(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=UO(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ye,!(r||i))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&j6(s)}function P6({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(a={},o=e==null?void 0:e()){this.id=jee++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ed&&(Fa.totalNodes=Fa.resolvedTargetDeltas=Fa.recalculatedProjection=0),this.nodes.forEach(Dee),this.nodes.forEach(Uee),this.nodes.forEach(zee),this.nodes.forEach(Mee),ed&&window.MotionDebug.record(Fa)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new vee)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new lT),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const c=this.eventHandlers.get(a);c&&c.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=gee(a),this.instance=a;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||c)&&(this.isLayoutDirty=!0),t){let f;const m=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=xee(m,250),Gm.hasAnimatedSinceResize&&(Gm.hasAnimatedSinceResize=!1,this.nodes.forEach(I2))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeTargetChanged:p,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||Gee,{onLayoutAnimationStart:T,onLayoutAnimationComplete:x}=h.getProps(),v=!this.targetLayout||!C6(this.targetLayout,_)||p,b=!m&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||m&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,b);const R={...nT(w,"layout"),onPlay:T,onComplete:x};(h.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else m||I2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,oa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Fee),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&j6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(N2);return}this.isUpdating||this.nodes.forEach(Vee),this.isUpdating=!1,this.nodes.forEach(Lee),this.nodes.forEach(Pee),this.nodes.forEach(kee),this.clearAllSnapshots();const o=nr.now();Ht.delta=Hr(0,1e3/60,o-Ht.timestamp),Ht.timestamp=o,Ht.isProcessing=!0,lv.update.process(Ht),lv.preRender.process(Ht),lv.render.process(Ht),Ht.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,$1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Oee),this.sharedNodes.forEach(Bee)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ye.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ye.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const c=s(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!R6(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;a&&(o||za(this.latestValues)||h)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return a&&(c=this.removeTransform(c)),$ee(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return pt();const c=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(Kee))){const{scroll:h}=this.root;h&&(Nl(c.x,h.offset.x),Nl(c.y,h.offset.y))}return c}removeElementScroll(a){var o;const c=pt();if(ss(c,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return c;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:f,options:m}=h;h!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&ss(c,a),Nl(c.x,f.offset.x),Nl(c.y,f.offset.y))}return c}applyTransform(a,o=!1){const c=pt();ss(c,a);for(let u=0;u<this.path.length;u++){const h=this.path[u];!o&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Il(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),za(h.latestValues)&&Il(c,h.latestValues)}return za(this.latestValues)&&Il(c,this.latestValues),c}removeTransform(a){const o=pt();ss(o,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!za(u.latestValues))continue;E_(u.latestValues)&&u.updateSnapshot();const h=pt(),f=u.measurePageBox();ss(h,f),_2(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return za(this.latestValues)&&_2(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ht.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=Ht.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pt(),this.relativeTargetOrigin=pt(),Dd(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),ss(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=pt(),this.targetWithTransforms=pt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),QZ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ss(this.target,this.layout.layoutBox),T6(this.target,this.targetDelta)):ss(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pt(),this.relativeTargetOrigin=pt(),Dd(this.relativeTargetOrigin,this.target,p.target),ss(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ed&&Fa.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||E_(this.parent.latestValues)||w6(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ht.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;ss(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;iee(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=pt());const{target:_}=o;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(y2(this.prevProjectionDelta.x,this.projectionDelta.x),y2(this.prevProjectionDelta.y,this.projectionDelta.y)),kd(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==p||!S2(this.projectionDelta.x,this.prevProjectionDelta.x)||!S2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),ed&&Fa.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Al(),this.projectionDelta=Al(),this.projectionDeltaWithTransform=Al()}setAnimationOrigin(a,o=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},f=Al();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=pt(),p=c?c.source:void 0,_=this.layout?this.layout.source:void 0,w=p!==_,T=this.getStack(),x=!T||T.members.length<=1,v=!!(w&&!x&&this.options.crossfade===!0&&!this.path.some(Hee));this.animationProgress=0;let b;this.mixTargetDelta=R=>{const D=R/1e3;R2(f.x,a.x,D),R2(f.y,a.y,D),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Dd(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),qee(this.relativeTarget,this.relativeTargetOrigin,m,D),b&&Nee(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=pt()),ss(b,this.relativeTarget)),w&&(this.animationValues=h,bee(h,u,this.latestValues,D,v,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(oa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ye.update(()=>{Gm.hasAnimatedSinceResize=!0,this.currentAnimation=pee(0,A2,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(A2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:h}=a;if(!(!o||!c||!u)){if(this!==a&&this.layout&&u&&k6(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||pt();const f=es(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+f;const m=es(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+m}ss(o,c),Il(o,h),kd(this.projectionDeltaWithTransform,this.layoutCorrected,o,h)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Iee),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&vv("z",a,u,this.animationValues);for(let h=0;h<yv.length;h++)vv(`rotate${yv[h]}`,a,u,this.animationValues),vv(`skew${yv[h]}`,a,u,this.animationValues);a.render();for(const h in u)a.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);a.scheduleRender()}getProjectionStyles(a){var o,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Cee;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=qm(a==null?void 0:a.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=qm(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!za(this.latestValues)&&(w.transform=h?h({},""):"none",this.hasProjected=!1),w}const m=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=Ree(this.projectionDeltaWithTransform,this.treeScale,m),h&&(u.transform=h(m,u.transform));const{x:p,y:_}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${_.origin*100}% 0`,f.animationValues?u.opacity=f===this?(c=(o=m.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const w in tg){if(m[w]===void 0)continue;const{correct:T,applyTo:x}=tg[w],v=u.transform==="none"?m[w]:T(m[w],f);if(x){const b=x.length;for(let R=0;R<b;R++)u[x[R]]=v}else u[w]=v}return this.options.layoutId&&(u.pointerEvents=f===this?qm(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(N2),this.root.sharedNodes.clear()}}}function Pee(t){t.updateLayout()}function kee(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=t.layout,{animationType:i}=t.options,a=n.source!==t.layout.source;i==="size"?is(f=>{const m=a?n.measuredBox[f]:n.layoutBox[f],p=es(m);m.min=s[f].min,m.max=m.min+p}):k6(i,n.layoutBox,s)&&is(f=>{const m=a?n.measuredBox[f]:n.layoutBox[f],p=es(s[f]);m.max=m.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+p)});const o=Al();kd(o,s,n.layoutBox);const c=Al();a?kd(c,t.applyTransform(r,!0),n.measuredBox):kd(c,s,n.layoutBox);const u=!R6(o);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:p}=f;if(m&&p){const _=pt();Dd(_,n.layoutBox,m.layoutBox);const w=pt();Dd(w,s,p.layoutBox),C6(_,w)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=_,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function Dee(t){ed&&Fa.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Mee(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Oee(t){t.clearSnapshot()}function N2(t){t.clearMeasurements()}function Vee(t){t.isLayoutDirty=!1}function Lee(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function I2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Uee(t){t.resolveTargetDelta()}function zee(t){t.calcProjection()}function Fee(t){t.resetSkewAndRotation()}function Bee(t){t.removeLeadSnapshot()}function R2(t,e,n){t.translate=rt(e.translate,0,n),t.scale=rt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function C2(t,e,n,s){t.min=rt(e.min,n.min,s),t.max=rt(e.max,n.max,s)}function qee(t,e,n,s){C2(t.x,e.x,n.x,s),C2(t.y,e.y,n.y,s)}function Hee(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Gee={duration:.45,ease:[.4,0,.1,1]},j2=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),P2=j2("applewebkit/")&&!j2("chrome/")?Math.round:Yn;function k2(t){t.min=P2(t.min),t.max=P2(t.max)}function $ee(t){k2(t.x),k2(t.y)}function k6(t,e,n){return t==="position"||t==="preserve-aspect"&&!YZ(E2(e),E2(n),.2)}function Kee(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const Wee=P6({attachResizeListener:(t,e)=>Sh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xv={current:void 0},D6=P6({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!xv.current){const t=new Wee({});t.mount(window),t.setOptions({layoutScroll:!0}),xv.current=t}return xv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Yee={pan:{Feature:dee},drag:{Feature:uee,ProjectionNode:D6,MeasureLayout:A6}};function D2(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,i=s[r];i&&Ye.postRender(()=>i(e,gf(e)))}class Qee extends ba{mount(){const{current:e}=this.node;e&&(this.unmount=YX(e,n=>(D2(this.node,n,"Start"),s=>D2(this.node,s,"End"))))}unmount(){}}class Xee extends ba{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pf(Sh(this.node.current,"focus",()=>this.onFocus()),Sh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function M2(t,e,n){const{props:s}=t;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),i=s[r];i&&Ye.postRender(()=>i(e,gf(e)))}class Jee extends ba{mount(){const{current:e}=this.node;e&&(this.unmount=ZX(e,n=>(M2(this.node,n,"Start"),(s,{success:r})=>M2(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const A_=new WeakMap,_v=new WeakMap,Zee=t=>{const e=A_.get(t.target);e&&e(t)},ete=t=>{t.forEach(Zee)};function tte({root:t,...e}){const n=t||document;_v.has(n)||_v.set(n,{});const s=_v.get(n),r=JSON.stringify(e);return s[r]||(s[r]=new IntersectionObserver(ete,{root:t,...e})),s[r]}function nte(t,e,n){const s=tte(e);return A_.set(t,n),s.observe(t),()=>{A_.delete(t),s.unobserve(t)}}const ste={some:0,all:1};class rte extends ba{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:r="some",once:i}=e,a={root:n?n.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:ste[r]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),m=u?h:f;m&&m(c)};return nte(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(ite(e,n))&&this.startObserver()}unmount(){}}function ite({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const ate={inView:{Feature:rte},tap:{Feature:Jee},focus:{Feature:Xee},hover:{Feature:Qee}},ote={layout:{ProjectionNode:D6,MeasureLayout:A6}},N_={current:null},M6={current:!1};function lte(){if(M6.current=!0,!!F1)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>N_.current=t.matches;t.addListener(e),e()}else N_.current=!1}const cte=[...a6,sn,la],ute=t=>cte.find(i6(t)),O2=new WeakMap;function dte(t,e,n){for(const s in e){const r=e[s],i=n[s];if(ln(r))t.addValue(s,r);else if(ln(i))t.addValue(s,Th(r,{owner:t}));else if(i!==r)if(t.hasValue(s)){const a=t.getValue(s);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(s);t.addValue(s,Th(a!==void 0?a:r,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const V2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class hte{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:r,blockInitialAnimation:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=mT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=nr.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Ye.render(this.render,!1,!0))};const{latestValues:c,renderState:u,onUpdate:h}=a;this.onUpdate=h,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=Ay(n),this.isVariantNode=mO(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in m){const _=m[p];c[p]!==void 0&&ln(_)&&_.set(c[p],!1)}}mount(e){this.current=e,O2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),M6.current||lte(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:N_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){O2.delete(this.current),this.projection&&this.projection.unmount(),oa(this.notifyUpdate),oa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=zo.has(e),r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ye.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Sc){const n=Sc[e];if(!n)continue;const{isEnabled:s,Feature:r}=n;if(!this.features[e]&&r&&s(this.props)&&(this.features[e]=new r(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<V2.length;s++){const r=V2[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i="on"+r,a=e[i];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=dte(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=Th(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){var s;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(s6(r)||WO(r))?r=parseFloat(r):!ute(r)&&la.test(n)&&(r=e6(e,n)),this.setBaseTarget(e,ln(r)?r.get():r)),ln(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const a=W1(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(r=a[e])}if(s&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ln(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new lT),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class O6 extends hte{constructor(){super(...arguments),this.KeyframeResolver=o6}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ln(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function fte(t){return window.getComputedStyle(t)}class mte extends O6{constructor(){super(...arguments),this.type="html",this.renderInstance=TO}readValueFromInstance(e,n){if(zo.has(n)){const s=fT(n);return s&&s.default||0}else{const s=fte(e),r=(_O(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return E6(e,n)}build(e,n,s){X1(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return tT(e,n,s)}}class pte extends O6{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(zo.has(n)){const s=fT(n);return s&&s.default||0}return n=EO.has(n)?n:G1(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return NO(e,n,s)}build(e,n,s){J1(e,n,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,s,r){SO(e,n,s,r)}mount(e){this.isSVGTag=eT(e.tagName),super.mount(e)}}const gte=(t,e)=>K1(t)?new pte(e):new mte(e,{allowProjection:t!==S.Fragment}),yte=BX({...zZ,...ate,...Yee,...ote},gte),Gr=sX(yte),vte=({product:t,onAddToCart:e,isLoggedIn:n})=>{const{name:s,description:r,category:i,imageUrl:a,comboImageUrl:o,available:c,stock:u,popular:h,new:f}=t,m=Ds(),[p,_]=S.useState(t.sizes[0]),w=p.name==="Combo Meal"&&o?o:a,T=!c||u===0,x=()=>{n?e(t,p):m("/auth/login")},v=()=>T?l.jsx("p",{className:"text-sm font-medium text-red-600",children:"Out of Stock"}):u<5?l.jsxs("p",{className:"text-sm font-medium text-orange-600",children:["Only ",u," left"]}):l.jsx("p",{className:"text-sm font-medium text-green-600",children:"In Stock"});return l.jsxs(ve,{className:"flex flex-col overflow-hidden transition-transform duration-300 hover:-translate-y-1",hover:!0,children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:w,alt:s,className:"h-48 w-full object-cover"}),l.jsxs("div",{className:"absolute top-2 right-2 flex flex-col items-end gap-1",children:[T?l.jsx(Xt,{className:"bg-red-100 text-red-800",children:"Out of Stock"}):u>0&&u<5?l.jsx(Xt,{className:"bg-orange-100 text-orange-800",children:"Low Stock"}):null,h&&!T&&l.jsx(Xt,{className:"bg-primary-100 text-primary-800",children:"Popular"}),f&&!T&&l.jsx(Xt,{className:"bg-blue-100 text-blue-800",children:"New"})]})]}),l.jsxs("div",{className:"flex flex-1 flex-col p-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:i}),l.jsx("h3",{className:"mt-1 text-lg font-semibold text-coffee-900",children:s}),l.jsx("p",{className:"mt-1 h-10 text-sm text-gray-600 line-clamp-2",children:r})]}),l.jsxs("div",{className:"mt-auto pt-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("p",{className:"text-xl font-bold text-primary-600",children:["",p.price.toFixed(2)]}),v()]}),l.jsx("div",{className:"mt-4 flex w-full rounded-full border border-gray-200 bg-gray-50 p-1",children:t.sizes.map(b=>l.jsxs("button",{onClick:()=>_(b),className:`w-1/2 rounded-full py-1.5 text-sm font-semibold transition-colors ${p.name===b.name?"bg-primary-600 text-white shadow":"text-gray-600 hover:bg-primary-50"}`,children:[b.name," (",b.size,")"]},b.name))}),l.jsx("button",{onClick:x,disabled:T,className:"mt-3 flex w-full items-center justify-center gap-2 rounded-full bg-primary-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-gray-400","aria-label":n?`Add ${s} to cart`:`Login to order ${s}`,children:T?"Out of Stock":n?l.jsxs(l.Fragment,{children:[l.jsx(qb,{className:"h-4 w-4"}),"Add to Cart"]}):"Login to Order"})]})]})]})},V6=()=>l.jsxs(ve,{className:"flex animate-pulse flex-col overflow-hidden",children:[l.jsx("div",{className:"relative",children:l.jsx("div",{className:"h-48 w-full bg-gray-300"})}),l.jsxs("div",{className:"flex flex-1 flex-col p-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"h-4 w-1/4 rounded bg-gray-300"}),l.jsx("div",{className:"mt-2 h-6 w-3/4 rounded bg-gray-300"}),l.jsxs("div",{className:"mt-2 space-y-2",children:[l.jsx("div",{className:"h-4 rounded bg-gray-300"}),l.jsx("div",{className:"h-4 w-5/6 rounded bg-gray-300"})]})]}),l.jsxs("div",{className:"mt-auto pt-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"h-8 w-1/3 rounded bg-gray-300"}),l.jsx("div",{className:"h-5 w-1/4 rounded bg-gray-300"})]}),l.jsx("div",{className:"mt-3 h-10 w-full rounded-full bg-gray-300"})]})]})]}),xte=[{value:"default",label:"Default"},{value:"price-asc",label:"Price: Low to High"},{value:"price-desc",label:"Price: High to Low"},{value:"name-asc",label:"Name: A-Z"},{value:"name-desc",label:"Name: Z-A"}],_te={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},bte={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},wte=()=>{const{products:t,isLoading:e,error:n}=Jc(),[s,r]=S.useState("All"),[i,a]=S.useState(""),[o,c]=S.useState("default"),[u,h]=S.useState(!1),f=S.useRef(null),m=S.useRef(null),{addToCart:p}=Dn(),{currentUser:_}=ts(),w=S.useMemo(()=>t.length===0?["All"]:["All",...[...new Set(t.map(v=>v.category))].sort()],[t]);S.useEffect(()=>{const x=v=>{f.current&&!f.current.contains(v.target)&&h(!1)};return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[]);const T=S.useMemo(()=>{const v=[...t.filter(b=>{const R=s==="All"||b.category===s,D=i.trim()===""||b.name.toLowerCase().includes(i.toLowerCase())||b.description.toLowerCase().includes(i.toLowerCase());return R&&D})];switch(o){case"price-asc":v.sort((b,R)=>b.sizes[0].price-R.sizes[0].price);break;case"price-desc":v.sort((b,R)=>R.sizes[0].price-b.sizes[0].price);break;case"name-asc":v.sort((b,R)=>b.name.localeCompare(R.name));break;case"name-desc":v.sort((b,R)=>R.name.localeCompare(b.name));break}return v},[s,i,t,o]);return l.jsxs("div",{className:"flex min-h-screen flex-col bg-white",children:[l.jsx(Rt,{}),l.jsxs("main",{children:[l.jsx("section",{className:"bg-gradient-to-r from-primary-50 to-coffee-50 px-6 py-12 text-center",children:l.jsxs("div",{className:"container mx-auto max-w-4xl",children:[l.jsx("h1",{className:"font-display text-4xl font-bold text-coffee-900 md:text-5xl",children:"Our Menu"}),l.jsx("p",{className:"mt-2 text-lg text-gray-600",children:"Discover your perfect cup "}),l.jsxs("div",{className:"mx-auto mt-6 flex max-w-2xl flex-col items-center gap-4 sm:flex-row",children:[l.jsxs("div",{className:"relative w-full flex-grow",children:[l.jsx(Ep,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",value:i,onChange:x=>a(x.target.value),placeholder:"Search for coffee, matcha...",className:"w-full rounded-full border border-gray-300 py-3 pl-12 pr-4 text-gray-700 placeholder:text-gray-400 shadow-sm focus:border-primary-500 focus:ring-2 focus:ring-primary-500"})]}),l.jsxs("div",{className:"relative flex w-full justify-end sm:w-auto sm:justify-start",ref:f,children:[l.jsx("button",{onClick:()=>h(!u),className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-full border border-primary-600 bg-white shadow-sm transition-colors hover:bg-primary-50","aria-haspopup":"true","aria-expanded":u,"aria-label":"Sort products",children:l.jsx(XU,{className:"h-5 w-5 text-gray-500"})}),l.jsx("div",{className:`absolute right-0 top-full z-40 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none transition-all duration-200 ease-out ${u?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,role:"menu","aria-orientation":"vertical",children:l.jsx("div",{className:"py-1",role:"none",children:xte.map(x=>l.jsxs("button",{onClick:()=>{c(x.value),h(!1)},className:`flex w-full items-center justify-between px-4 py-2 text-sm text-left font-medium transition-colors ${o===x.value?"bg-primary-50 text-primary-600":"text-gray-700 hover:bg-gray-100"}`,role:"menuitem",children:[l.jsx("span",{children:x.label}),o===x.value&&l.jsx(Yi,{className:"h-4 w-4"})]},x.value))})})]})]})]})}),l.jsx("div",{className:"sticky top-20 z-30 border-b border-gray-200 bg-white/95 py-3 backdrop-blur-sm",children:l.jsx("div",{className:"container mx-auto flex max-w-7xl gap-2 overflow-x-auto px-6 pb-2",children:w.map(x=>l.jsx("button",{onClick:()=>{var v;r(x),(v=m.current)==null||v.scrollIntoView({behavior:"smooth"})},className:`flex-shrink-0 rounded-full px-4 py-2 text-sm font-semibold transition-colors ${s===x?"bg-primary-600 text-white shadow":"border border-gray-300 bg-white text-gray-700 hover:bg-gray-100"}`,children:x},x))})}),l.jsx("section",{ref:m,className:"bg-gray-50 px-6 py-8 scroll-mt-36",children:l.jsx("div",{className:"container mx-auto max-w-7xl",children:e?l.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:Array.from({length:8}).map((x,v)=>l.jsx(V6,{},v))}):n?l.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border border-red-200 bg-red-50 py-20 text-center text-red-700",children:[l.jsx(ha,{className:"h-16 w-16"}),l.jsx("h3",{className:"mt-4 text-xl font-semibold",children:"Oops! Something went wrong."}),l.jsx("p",{className:"mt-2",children:n})]}):T.length>0?l.jsx(Gr.div,{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",variants:_te,initial:"hidden",animate:"visible",children:T.map(x=>l.jsx(Gr.div,{variants:bte,layout:!0,className:"flex",children:l.jsx(vte,{product:x,onAddToCart:p,isLoggedIn:!!_})},x.id))}):l.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[l.jsx(Ep,{className:"h-24 w-24 text-gray-300"}),l.jsx("h3",{className:"mt-4 text-xl font-semibold text-gray-800",children:"No products found"}),l.jsx("p",{className:"mt-2 text-gray-500",children:"Try adjusting your filters or search query."})]})})})]}),l.jsx(Ct,{})]})},Tte=({selectedMethod:t,onSelectMethod:e})=>{const n=t==="gcash",s=t==="cash",r=({isSelected:i})=>l.jsx("div",{className:`absolute top-4 right-4 flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full border-2 transition-all ${i?"border-primary-600 bg-primary-600":"border-gray-400 bg-white"}`,children:i&&l.jsx(Yi,{className:"h-4 w-4 text-white"})});return l.jsxs("div",{className:"w-full",children:[l.jsx("h2",{className:"mb-4 font-display text-xl font-bold text-coffee-900",children:"Payment Method"}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",role:"radiogroup",children:[l.jsxs("div",{onClick:()=>e("gcash"),role:"radio","aria-checked":n,tabIndex:0,onKeyDown:i=>(i.key===" "||i.key==="Enter")&&e("gcash"),className:`relative cursor-pointer rounded-xl border-2 p-6 transition-all duration-200 ease-in-out hover:border-primary-300 ${n?"border-primary-600 bg-primary-50 shadow-lg":"border-gray-200 bg-white"}`,children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-lg bg-blue-100",children:l.jsx(EP,{className:"h-7 w-7 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"pr-8 font-display text-lg font-bold text-coffee-900",children:"GCash"}),l.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Pay securely via GCash QR code."})]})]}),l.jsx("div",{className:"mt-4",children:l.jsx(Xt,{className:n?"bg-blue-200 text-blue-800":"bg-gray-100 text-gray-700",children:"Instant confirmation"})}),l.jsx(r,{isSelected:n})]}),l.jsxs("div",{onClick:()=>e("cash"),role:"radio","aria-checked":s,tabIndex:0,onKeyDown:i=>(i.key===" "||i.key==="Enter")&&e("cash"),className:`relative cursor-pointer rounded-xl border-2 p-6 transition-all duration-200 ease-in-out hover:border-primary-300 ${s?"border-primary-600 bg-primary-50 shadow-lg":"border-gray-200 bg-white"}`,children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsx("div",{className:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-lg bg-green-100",children:l.jsx(t9,{className:"h-7 w-7 text-green-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"pr-8 font-display text-lg font-bold text-coffee-900",children:"Cash on Pickup"}),l.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Pay when you collect your order."})]})]}),l.jsx("div",{className:"mt-4",children:l.jsx(Xt,{className:s?"bg-green-200 text-green-800":"bg-gray-100 text-gray-700",children:"Pay at counter"})}),l.jsx(r,{isSelected:s})]})]})]})},Ete=({totalAmount:t,orderNumber:e,receipt:n,onReceiptUpload:s})=>{const[r,i]=S.useState(null);S.useEffect(()=>{if(!n){i(null);return}const c=URL.createObjectURL(n);return i(c),()=>URL.revokeObjectURL(c)},[n]);const a=c=>{c.target.files&&c.target.files[0]&&s(c.target.files[0]),c.target.value=""},o=()=>{s(null)};return l.jsxs("div",{className:"w-full max-w-md mx-auto space-y-6",children:[l.jsx("div",{className:"rounded-lg border-l-4 border-blue-400 bg-blue-50 p-4",role:"alert",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(ha,{className:"h-5 w-5 text-blue-400","aria-hidden":"true"})}),l.jsx("div",{className:"ml-3",children:l.jsx("p",{className:"text-sm text-blue-700",children:"Please scan the QR code, complete the payment, and upload a screenshot of your receipt."})})]})}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mx-auto flex h-64 w-64 items-center justify-center rounded-xl border-4 border-primary-600 bg-white p-4 shadow-lg",children:l.jsx("div",{className:"relative flex h-full w-full items-center justify-center bg-[radial-gradient(#1e1612_1px,transparent_1px),radial-gradient(#1e1612_1px,transparent_1px)] bg-[length:12px_12px] bg-[position:0_0,6px_6px]",children:l.jsx("div",{className:"bg-white p-2 font-mono text-sm font-bold text-coffee-900",children:e})})}),l.jsxs("p",{className:"mt-4 text-sm font-medium text-gray-600",children:["Merchant: ",l.jsx("span",{className:"font-bold text-coffee-900",children:"Rush Coffee"})]}),l.jsxs("p",{className:"font-display text-3xl font-bold text-primary-600",children:["",t.toFixed(2)]})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("input",{type:"file",id:"receipt-upload",className:"hidden",accept:"image/*",onChange:a}),n?l.jsxs("div",{className:"relative rounded-lg border border-gray-300 bg-white p-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[r?l.jsx("img",{src:r,alt:"Receipt preview",className:"h-16 w-16 flex-shrink-0 rounded-md object-cover"}):l.jsx("div",{className:"flex h-16 w-16 flex-shrink-0 items-center justify-center rounded-md bg-gray-100",children:l.jsx(V9,{className:"h-8 w-8 text-gray-400"})}),l.jsxs("div",{className:"flex-1 overflow-hidden",children:[l.jsx("p",{className:"truncate text-sm font-medium text-gray-800",children:n.name}),l.jsxs("p",{className:"text-xs text-gray-500",children:[(n.size/1024).toFixed(2)," KB"]})]})]}),l.jsx("button",{onClick:o,className:"absolute -top-2 -right-2 flex h-6 w-6 items-center justify-center rounded-full bg-red-500 text-white transition-transform hover:scale-110","aria-label":"Remove receipt",children:l.jsx(Kr,{className:"h-4 w-4"})})]}):l.jsxs("label",{htmlFor:"receipt-upload",className:"flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-6 text-center transition hover:bg-gray-100",children:[l.jsx(N9,{className:"h-12 w-12 text-gray-400"}),l.jsx("span",{className:"mt-2 block text-sm font-semibold text-gray-600",children:"Upload Receipt"}),l.jsx("span",{className:"mt-1 block text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})]})]})},Ste=({items:t,subtotal:e,serviceFee:n=0,total:s})=>l.jsx("div",{className:"w-full lg:sticky lg:top-24",children:l.jsxs(ve,{className:"rounded-xl border-gray-200 p-6 shadow-none",children:[l.jsx("h2",{className:"mb-4 font-display text-lg font-semibold text-coffee-900",children:"Order Summary"}),l.jsx("div",{className:"max-h-60 space-y-2 overflow-y-auto pr-2",children:t.map((r,i)=>l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"text-gray-700",children:r.productName}),l.jsxs("span",{className:"ml-2 rounded-md bg-gray-100 px-1.5 py-0.5 text-xs font-medium text-gray-600",children:["",r.quantity]})]}),l.jsxs("span",{className:"font-medium text-gray-900",children:["",(r.price*r.quantity).toFixed(2)]})]},i))}),l.jsx("hr",{className:"my-4 border-gray-200"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Subtotal"}),l.jsxs("span",{className:"font-medium text-gray-900",children:["",e.toFixed(2)]})]}),n>0&&l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Service Fee"}),l.jsxs("span",{className:"font-medium text-gray-900",children:["",n.toFixed(2)]})]})]}),l.jsx("hr",{className:"my-4 border-dashed border-gray-300"}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-base font-bold text-gray-900",children:"Total"}),l.jsxs("span",{className:"font-display text-2xl font-bold text-primary-600",children:["",s.toFixed(2)]})]})]})}),L6=S.createContext(void 0),vT=()=>{const t=S.useContext(L6);if(t===void 0)throw new Error("useOrder must be used within an OrderProvider");return t},Ate=({children:t})=>{const[e,n]=S.useState(null),[s,r]=S.useState([]),[i,a]=S.useState(!0),{currentUser:o}=ts();S.useEffect(()=>{o?(async()=>{a(!0);try{const _=(await _e.collection("orders").where("userId","==",o.uid).get()).docs.map(T=>({id:T.id,...T.data(),timestamp:T.data().timestamp.toDate()}));_.sort((T,x)=>x.timestamp.getTime()-T.timestamp.getTime()),r(_);const w=_.find(T=>T.status!=="completed");n(w||null)}catch(f){console.error("Error fetching order history:",f)}finally{a(!1)}})():(r([]),n(null),a(!1))},[o]),S.useEffect(()=>{if(e&&e.status!=="completed"){const h=["waiting","preparing","ready","completed"],f=e.status,m=h.indexOf(f);if(m===-1||m>=h.length-1)return;const p=setTimeout(()=>{const _=h[m+1];n(w=>w?{...w,status:_}:null)},1e4);return()=>clearTimeout(p)}},[e]);const u={activeOrder:e,setActiveOrder:n,orderHistory:s,addOrderToHistory:async h=>{try{const f=await _e.collection("orders").add({...h,timestamp:Me.firestore.FieldValue.serverTimestamp()}),m={...h,id:f.id,timestamp:new Date};r(p=>[m,...p]),n(m)}catch(f){console.error("Error adding order to Firestore:",f)}},isHistoryLoading:i};return l.jsx(L6.Provider,{value:u,children:t})},Nte=()=>{const t=Ds(),{cartItems:e,showToast:n,totalCartItems:s,clearCart:r}=Dn(),{currentUser:i}=ts(),{setActiveOrder:a,addOrderToHistory:o}=vT(),[c,u]=S.useState(null),[h,f]=S.useState({name:"",phone:""}),[m,p]=S.useState(""),[_,w]=S.useState({}),[T,x]=S.useState(null),[v,b]=S.useState(!1),[R,D]=S.useState(!1),{subtotal:M,serviceFee:A,total:E}=S.useMemo(()=>{const j=e.reduce((ue,H)=>ue+H.selectedSize.price*H.quantity,0),W=15;return{subtotal:j,serviceFee:W,total:j+W}},[e]),N=S.useMemo(()=>e.map(j=>({productName:`${j.product.name} (${j.selectedSize.name})`,quantity:j.quantity,price:j.selectedSize.price})),[e]);S.useEffect(()=>{if(!i){n("Please log in to proceed to checkout."),t("/auth/login",{state:{from:"/checkout"}});return}s===0&&!v&&!R&&(n("Your cart is empty. Add items to checkout."),t("/menu"))},[s,t,n,v,R,i]),S.useEffect(()=>{i&&f({name:`${i.firstName} ${i.lastName}`,phone:i.phone||""})},[i]);const I=()=>{const j={};return h.name.trim().length<2&&(j.name="Name must be at least 2 characters long."),/^(09|\+639)\d{9}$/.test(h.phone)||(j.phone="Please enter a valid Philippine phone number (e.g., 09xxxxxxxxx)."),c||(j.payment="Please select a payment method."),c==="gcash"&&!T&&(j.gcash="Please upload your payment receipt to proceed."),w(j),Object.keys(j).length===0},P=async j=>{if(j.preventDefault(),!i||!I()){n("Please correct the errors before proceeding.");return}b(!0);const W=`RC-2025-${Math.floor(1e3+Math.random()*9e3)}`;setTimeout(async()=>{const ue={userId:i.uid,customerName:h.name,orderNumber:W,position:Math.floor(Math.random()*5)+1,status:"waiting",orderItems:e.map(H=>({productId:H.product.id,productName:`${H.product.name} (${H.selectedSize.name})`,quantity:H.quantity,price:H.selectedSize.price})),totalAmount:E,paymentMethod:c,paymentStatus:c==="gcash"?"paid":"pending",estimatedTime:10};await o(ue),r(),b(!1),D(!0),t("/queue",{state:{fromCheckout:!0,orderNumber:W}})},2e3)},k=v||!c||!h.name||!/^(09|\+639)\d{9}$/.test(h.phone)||c==="gcash"&&!T;return!i||s===0&&!R?l.jsxs("div",{className:"flex min-h-screen flex-col",children:[l.jsx(Rt,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center bg-gray-50 text-center",children:l.jsxs("div",{children:[l.jsx(Bb,{className:"mx-auto h-24 w-24 text-gray-300"}),l.jsx("h1",{className:"mt-4 text-2xl font-bold text-gray-800",children:"Your cart is empty"}),l.jsx("p",{className:"mt-2 text-gray-500",children:"Add some delicious coffee to get started."}),l.jsx("button",{onClick:()=>t("/menu"),className:"mt-6 rounded-full bg-primary-600 px-6 py-2 font-semibold text-white hover:bg-primary-700",children:"Browse Menu"})]})}),l.jsx(Ct,{})]}):l.jsxs("div",{className:"flex min-h-screen flex-col bg-gray-50",children:[l.jsx(Rt,{}),l.jsxs("main",{className:"container mx-auto max-w-7xl px-4 py-8",children:[l.jsx("h1",{className:"mb-6 font-display text-3xl font-bold text-coffee-900",children:"Checkout"}),l.jsxs("form",{onSubmit:P,id:"checkout-form",className:"grid grid-cols-1 gap-8 lg:grid-cols-3",children:[l.jsxs("div",{className:"space-y-8 lg:col-span-2",children:[l.jsxs("div",{className:"rounded-xl border bg-white p-6",children:[l.jsx("h2",{className:"mb-4 font-display text-xl font-bold text-coffee-900",children:"Your Information"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),l.jsx(Lr,{className:"absolute left-3 top-10 h-5 w-5 text-gray-400"}),l.jsx("input",{type:"text",id:"name",value:h.name,onChange:j=>f({...h,name:j.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 py-2 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"Juan dela Cruz"}),_.name&&l.jsx("p",{className:"mt-1 text-xs text-red-500",children:_.name})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),l.jsx(Vr,{className:"absolute left-3 top-10 h-5 w-5 text-gray-400"}),l.jsx("input",{type:"tel",id:"phone",value:h.phone,onChange:j=>f({...h,phone:j.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 py-2 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"09171234567"}),_.phone&&l.jsx("p",{className:"mt-1 text-xs text-red-500",children:_.phone})]})]})]}),l.jsxs("div",{className:"rounded-xl border bg-white p-6",children:[l.jsx(Tte,{selectedMethod:c,onSelectMethod:u}),_.payment&&l.jsx("p",{className:"mt-2 text-xs text-red-500",children:_.payment}),c==="gcash"&&l.jsxs("div",{className:"mt-6 border-t pt-6",children:[l.jsx(Ete,{totalAmount:E,orderNumber:`TEMP-${Date.now()}`,receipt:T,onReceiptUpload:x}),_.gcash&&l.jsx("p",{className:"mt-2 text-xs text-red-500 text-center",children:_.gcash})]}),c==="cash"&&l.jsx("div",{className:"mt-6 rounded-lg border-l-4 border-green-400 bg-green-50 p-4",role:"alert",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(ha,{className:"h-5 w-5 text-green-400"})}),l.jsx("div",{className:"ml-3",children:l.jsx("p",{className:"text-sm text-green-700",children:"Please prepare the exact amount. You can pay at the counter upon pickup."})})]})})]}),l.jsxs("div",{className:"rounded-xl border bg-white p-6",children:[l.jsx("h2",{className:"mb-4 font-display text-xl font-bold text-coffee-900",children:"Special Instructions (Optional)"}),l.jsxs("div",{className:"relative",children:[l.jsx(Lc,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),l.jsx("textarea",{id:"notes",value:m,onChange:j=>p(j.target.value),rows:3,className:"block w-full rounded-md border-gray-300 py-2 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"e.g., less ice, extra shot..."})]})]}),l.jsx("div",{className:"hidden lg:block",children:l.jsx("button",{type:"submit",form:"checkout-form",disabled:k,className:"mt-2 flex w-full max-w-xs justify-center rounded-full bg-primary-600 px-4 py-3 text-base font-semibold text-white shadow-sm transition-colors hover:bg-primary-700 disabled:cursor-not-allowed disabled:bg-primary-400",children:v?l.jsx(_t,{className:"h-6 w-6 animate-spin"}):"Place Order"})})]}),l.jsx("div",{className:"lg:col-span-1",children:l.jsx(Ste,{items:N,subtotal:M,serviceFee:A,total:E})})]})]}),l.jsx("div",{className:"sticky bottom-0 left-0 right-0 border-t border-gray-200 bg-white/90 p-4 backdrop-blur-sm lg:hidden",children:l.jsx("button",{type:"submit",form:"checkout-form",disabled:k,className:"flex w-full justify-center rounded-full bg-primary-600 px-4 py-3 text-base font-semibold text-white shadow-sm transition-colors hover:bg-primary-700 disabled:cursor-not-allowed disabled:bg-primary-400",children:v?l.jsx(_t,{className:"h-6 w-6 animate-spin"}):`Place Order (${E.toFixed(2)})`})}),l.jsx(Ct,{})]})};function Oe(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function ca(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const U6=6048e5,Ite=864e5,lm=43200,L2=1440;let Rte={};function yf(){return Rte}function Ah(t,e){var o,c,u,h;const n=yf(),s=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,r=Oe(t),i=r.getDay(),a=(i<s?7:0)+i-s;return r.setDate(r.getDate()-a),r.setHours(0,0,0,0),r}function og(t){return Ah(t,{weekStartsOn:1})}function z6(t){const e=Oe(t),n=e.getFullYear(),s=ca(t,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const r=og(s),i=ca(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const a=og(i);return e.getTime()>=r.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function U2(t){const e=Oe(t);return e.setHours(0,0,0,0),e}function lg(t){const e=Oe(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Cte(t,e){const n=U2(t),s=U2(e),r=+n-lg(n),i=+s-lg(s);return Math.round((r-i)/Ite)}function jte(t){const e=z6(t),n=ca(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),og(n)}function $m(t,e){const n=Oe(t),s=Oe(e),r=n.getTime()-s.getTime();return r<0?-1:r>0?1:r}function Pte(t){return ca(t,Date.now())}function kte(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Dte(t){if(!kte(t)&&typeof t!="number")return!1;const e=Oe(t);return!isNaN(Number(e))}function Mte(t,e){const n=Oe(t),s=Oe(e),r=n.getFullYear()-s.getFullYear(),i=n.getMonth()-s.getMonth();return r*12+i}function Ote(t){return e=>{const s=(t?Math[t]:Math.trunc)(e);return s===0?0:s}}function Vte(t,e){return+Oe(t)-+Oe(e)}function Lte(t){const e=Oe(t);return e.setHours(23,59,59,999),e}function Ute(t){const e=Oe(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function zte(t){const e=Oe(t);return+Lte(e)==+Ute(e)}function Fte(t,e){const n=Oe(t),s=Oe(e),r=$m(n,s),i=Math.abs(Mte(n,s));let a;if(i<1)a=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-r*i);let o=$m(n,s)===-r;zte(Oe(t))&&i===1&&$m(t,s)===1&&(o=!1),a=r*(i-Number(o))}return a===0?0:a}function Bte(t,e,n){const s=Vte(t,e)/1e3;return Ote(n==null?void 0:n.roundingMethod)(s)}function qte(t){const e=Oe(t),n=ca(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Hte={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Gte=(t,e,n)=>{let s;const r=Hte[t];return typeof r=="string"?s=r:e===1?s=r.one:s=r.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function bv(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const $te={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Kte={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Wte={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Yte={date:bv({formats:$te,defaultWidth:"full"}),time:bv({formats:Kte,defaultWidth:"full"}),dateTime:bv({formats:Wte,defaultWidth:"full"})},Qte={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Xte=(t,e,n,s)=>Qte[t];function Ou(t){return(e,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let r;if(s==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):a;r=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;r=t.values[o]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return r[i]}}const Jte={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Zte={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ene={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},tne={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},nne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},sne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},rne=(t,e)=>{const n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ine={ordinalNumber:rne,era:Ou({values:Jte,defaultWidth:"wide"}),quarter:Ou({values:Zte,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ou({values:ene,defaultWidth:"wide"}),day:Ou({values:tne,defaultWidth:"wide"}),dayPeriod:Ou({values:nne,defaultWidth:"wide",formattingValues:sne,defaultFormattingWidth:"wide"})};function Vu(t){return(e,n={})=>{const s=n.width,r=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],i=e.match(r);if(!i)return null;const a=i[0],o=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?one(o,f=>f.test(a)):ane(o,f=>f.test(a));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const h=e.slice(a.length);return{value:u,rest:h}}}function ane(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function one(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function lne(t){return(e,n={})=>{const s=e.match(t.matchPattern);if(!s)return null;const r=s[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(r.length);return{value:a,rest:o}}}const cne=/^(\d+)(th|st|nd|rd)?/i,une=/\d+/i,dne={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},hne={any:[/^b/i,/^(a|c)/i]},fne={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},mne={any:[/1/i,/2/i,/3/i,/4/i]},pne={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},gne={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},yne={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vne={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},xne={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},_ne={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},bne={ordinalNumber:lne({matchPattern:cne,parsePattern:une,valueCallback:t=>parseInt(t,10)}),era:Vu({matchPatterns:dne,defaultMatchWidth:"wide",parsePatterns:hne,defaultParseWidth:"any"}),quarter:Vu({matchPatterns:fne,defaultMatchWidth:"wide",parsePatterns:mne,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Vu({matchPatterns:pne,defaultMatchWidth:"wide",parsePatterns:gne,defaultParseWidth:"any"}),day:Vu({matchPatterns:yne,defaultMatchWidth:"wide",parsePatterns:vne,defaultParseWidth:"any"}),dayPeriod:Vu({matchPatterns:xne,defaultMatchWidth:"any",parsePatterns:_ne,defaultParseWidth:"any"})},F6={code:"en-US",formatDistance:Gte,formatLong:Yte,formatRelative:Xte,localize:ine,match:bne,options:{weekStartsOn:0,firstWeekContainsDate:1}};function wne(t){const e=Oe(t);return Cte(e,qte(e))+1}function Tne(t){const e=Oe(t),n=+og(e)-+jte(e);return Math.round(n/U6)+1}function B6(t,e){var h,f,m,p;const n=Oe(t),s=n.getFullYear(),r=yf(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(m=r.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,a=ca(t,0);a.setFullYear(s+1,0,i),a.setHours(0,0,0,0);const o=Ah(a,e),c=ca(t,0);c.setFullYear(s,0,i),c.setHours(0,0,0,0);const u=Ah(c,e);return n.getTime()>=o.getTime()?s+1:n.getTime()>=u.getTime()?s:s-1}function Ene(t,e){var o,c,u,h;const n=yf(),s=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,r=B6(t,e),i=ca(t,0);return i.setFullYear(r,0,s),i.setHours(0,0,0,0),Ah(i,e)}function Sne(t,e){const n=Oe(t),s=+Ah(n,e)-+Ene(n,e);return Math.round(s/U6)+1}function Ae(t,e){const n=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return n+s}const mi={y(t,e){const n=t.getFullYear(),s=n>0?n:1-n;return Ae(e==="yy"?s%100:s,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ae(n+1,2)},d(t,e){return Ae(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ae(t.getHours()%12||12,e.length)},H(t,e){return Ae(t.getHours(),e.length)},m(t,e){return Ae(t.getMinutes(),e.length)},s(t,e){return Ae(t.getSeconds(),e.length)},S(t,e){const n=e.length,s=t.getMilliseconds(),r=Math.trunc(s*Math.pow(10,n-3));return Ae(r,e.length)}},nl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},z2={G:function(t,e,n){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const s=t.getFullYear(),r=s>0?s:1-s;return n.ordinalNumber(r,{unit:"year"})}return mi.y(t,e)},Y:function(t,e,n,s){const r=B6(t,s),i=r>0?r:1-r;if(e==="YY"){const a=i%100;return Ae(a,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):Ae(i,e.length)},R:function(t,e){const n=z6(t);return Ae(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ae(n,e.length)},Q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return Ae(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return Ae(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,n){const s=t.getMonth();switch(e){case"M":case"MM":return mi.M(t,e);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,n){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return Ae(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,n,s){const r=Sne(t,s);return e==="wo"?n.ordinalNumber(r,{unit:"week"}):Ae(r,e.length)},I:function(t,e,n){const s=Tne(t);return e==="Io"?n.ordinalNumber(s,{unit:"week"}):Ae(s,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):mi.d(t,e)},D:function(t,e,n){const s=wne(t);return e==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):Ae(s,e.length)},E:function(t,e,n){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,n,s){const r=t.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Ae(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,s){const r=t.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Ae(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){const s=t.getDay(),r=s===0?7:s;switch(e){case"i":return String(r);case"ii":return Ae(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const s=t.getHours();let r;switch(s===12?r=nl.noon:s===0?r=nl.midnight:r=s/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){const s=t.getHours();let r;switch(s>=17?r=nl.evening:s>=12?r=nl.afternoon:s>=4?r=nl.morning:r=nl.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return mi.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):mi.H(t,e)},K:function(t,e,n){const s=t.getHours()%12;return e==="Ko"?n.ordinalNumber(s,{unit:"hour"}):Ae(s,e.length)},k:function(t,e,n){let s=t.getHours();return s===0&&(s=24),e==="ko"?n.ordinalNumber(s,{unit:"hour"}):Ae(s,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):mi.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):mi.s(t,e)},S:function(t,e){return mi.S(t,e)},X:function(t,e,n){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return B2(s);case"XXXX":case"XX":return Ba(s);case"XXXXX":case"XXX":default:return Ba(s,":")}},x:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"x":return B2(s);case"xxxx":case"xx":return Ba(s);case"xxxxx":case"xxx":default:return Ba(s,":")}},O:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+F2(s,":");case"OOOO":default:return"GMT"+Ba(s,":")}},z:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+F2(s,":");case"zzzz":default:return"GMT"+Ba(s,":")}},t:function(t,e,n){const s=Math.trunc(t.getTime()/1e3);return Ae(s,e.length)},T:function(t,e,n){const s=t.getTime();return Ae(s,e.length)}};function F2(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=Math.trunc(s/60),i=s%60;return i===0?n+String(r):n+String(r)+e+Ae(i,2)}function B2(t,e){return t%60===0?(t>0?"-":"+")+Ae(Math.abs(t)/60,2):Ba(t,e)}function Ba(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=Ae(Math.trunc(s/60),2),i=Ae(s%60,2);return n+r+e+i}const q2=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},q6=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Ane=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],s=n[1],r=n[2];if(!r)return q2(t,e);let i;switch(s){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",q2(s,e)).replace("{{time}}",q6(r,e))},Nne={p:q6,P:Ane},Ine=/^D+$/,Rne=/^Y+$/,Cne=["D","DD","YY","YYYY"];function jne(t){return Ine.test(t)}function Pne(t){return Rne.test(t)}function kne(t,e,n){const s=Dne(t,e,n);if(console.warn(s),Cne.includes(t))throw new RangeError(s)}function Dne(t,e,n){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Mne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,One=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Vne=/^'([^]*?)'?$/,Lne=/''/g,Une=/[a-zA-Z]/;function Ry(t,e,n){var h,f,m,p;const s=yf(),r=s.locale??F6,i=s.firstWeekContainsDate??((f=(h=s.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,a=s.weekStartsOn??((p=(m=s.locale)==null?void 0:m.options)==null?void 0:p.weekStartsOn)??0,o=Oe(t);if(!Dte(o))throw new RangeError("Invalid time value");let c=e.match(One).map(_=>{const w=_[0];if(w==="p"||w==="P"){const T=Nne[w];return T(_,r.formatLong)}return _}).join("").match(Mne).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const w=_[0];if(w==="'")return{isToken:!1,value:zne(_)};if(z2[w])return{isToken:!0,value:_};if(w.match(Une))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:_}});r.localize.preprocessor&&(c=r.localize.preprocessor(o,c));const u={firstWeekContainsDate:i,weekStartsOn:a,locale:r};return c.map(_=>{if(!_.isToken)return _.value;const w=_.value;(Pne(w)||jne(w))&&kne(w,e,String(t));const T=z2[w[0]];return T(o,w,r.localize,u)}).join("")}function zne(t){const e=t.match(Vne);return e?e[1].replace(Lne,"'"):t}function Fne(t,e,n){const s=yf(),r=(n==null?void 0:n.locale)??s.locale??F6,i=2520,a=$m(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:a});let c,u;a>0?(c=Oe(e),u=Oe(t)):(c=Oe(t),u=Oe(e));const h=Bte(u,c),f=(lg(u)-lg(c))/1e3,m=Math.round((h-f)/60);let p;if(m<2)return n!=null&&n.includeSeconds?h<5?r.formatDistance("lessThanXSeconds",5,o):h<10?r.formatDistance("lessThanXSeconds",10,o):h<20?r.formatDistance("lessThanXSeconds",20,o):h<40?r.formatDistance("halfAMinute",0,o):h<60?r.formatDistance("lessThanXMinutes",1,o):r.formatDistance("xMinutes",1,o):m===0?r.formatDistance("lessThanXMinutes",1,o):r.formatDistance("xMinutes",m,o);if(m<45)return r.formatDistance("xMinutes",m,o);if(m<90)return r.formatDistance("aboutXHours",1,o);if(m<L2){const _=Math.round(m/60);return r.formatDistance("aboutXHours",_,o)}else{if(m<i)return r.formatDistance("xDays",1,o);if(m<lm){const _=Math.round(m/L2);return r.formatDistance("xDays",_,o)}else if(m<lm*2)return p=Math.round(m/lm),r.formatDistance("aboutXMonths",p,o)}if(p=Fte(u,c),p<12){const _=Math.round(m/lm);return r.formatDistance("xMonths",_,o)}else{const _=p%12,w=Math.trunc(p/12);return _<3?r.formatDistance("aboutXYears",w,o):_<9?r.formatDistance("overXYears",w,o):r.formatDistance("almostXYears",w+1,o)}}function Cy(t,e){return Fne(t,Pte(t),e)}const Bne=({children:t,className:e="",hover:n=!1})=>{const s=n?"hover:shadow-xl transition-all duration-300":"";return l.jsx("div",{className:`rounded-lg border border-gray-100 bg-white p-6 shadow-sm ${s} ${e}`,children:t})},Ve=({children:t,variant:e="primary",size:n="md",className:s="",asChild:r=!1,...i})=>{const a="inline-flex items-center justify-center rounded-full font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-60",o={primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-primary-100 text-primary-700 hover:bg-primary-200 focus:ring-primary-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"},c={sm:"px-4 py-2 text-sm",md:"px-6 py-2.5 text-base",lg:"px-8 py-3 text-lg"},u=r?"span":"button";return S.createElement(u,{className:`${a} ${o[e]} ${c[n]} ${s}`,...i},t)},qne={waiting:{Icon:Pg,text:"Your order is in the queue.",color:"text-yellow-600",bgColor:"bg-yellow-100",progress:10,progressText:"Ordered"},preparing:{Icon:As,text:"Your order is being prepared.",color:"text-blue-600",bgColor:"bg-blue-100",progress:50,progressText:"Preparing"},ready:{Icon:jg,text:"Your order is ready for pickup!",color:"text-green-600",bgColor:"bg-green-100",progress:100,progressText:"Ready"},completed:{Icon:Yi,text:"Your order has been completed.",color:"text-primary-600",bgColor:"bg-primary-100",progress:100,progressText:"Completed"}},Hne=({order:t})=>{const[e,n]=S.useState(!1),s=Ds(),r=qne[t.status],{addMultipleToCart:i,showToast:a}=Dn(),{products:o}=Jc(),c=()=>{const h=[],f=[];for(const m of t.orderItems){const p=o.find(x=>x.id===m.productId);if(!p||!p.available||p.stock===0){f.push(m.productName);continue}const _=m.productName.match(/\((Grande|Venti)\)$/),w=_?_[1]:null;if(!w){f.push(m.productName);continue}const T=p.sizes.find(x=>x.name===w);if(!T){f.push(m.productName);continue}h.push({product:p,selectedSize:T,quantity:m.quantity})}h.length>0&&i(h),f.length>0&&a(`Could not add: ${f.join(", ")}. They may be unavailable.`)},u=()=>{t.status==="completed"?s("/menu"):c()};return l.jsxs(Bne,{className:"w-full max-w-md rounded-2xl p-6 shadow-lg",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full ${r.bgColor}`,children:l.jsx(r.Icon,{className:`h-6 w-6 ${r.color}`})}),l.jsxs("div",{children:[l.jsx("h2",{className:"font-display text-xl font-bold text-coffee-900",children:r.text}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Order #",t.orderNumber]})]})]}),l.jsxs("div",{className:"mt-6 space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm font-medium text-gray-600",children:[l.jsx("span",{children:"Ordered"}),l.jsx("span",{children:"Preparing"}),l.jsx("span",{children:"Ready"})]}),l.jsx("div",{className:"h-2 w-full rounded-full bg-gray-200",children:l.jsx("div",{className:"h-2 rounded-full bg-primary-600 transition-all duration-500 ease-out",style:{width:`${r.progress}%`}})}),l.jsx("p",{className:"text-right text-sm font-semibold text-primary-600",children:r.progressText})]}),l.jsxs("div",{className:"mt-6 border-t border-gray-200 pt-4",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-gray-500",children:"Time Placed"}),l.jsx("span",{className:"font-medium text-gray-800",children:Ry(t.timestamp,"p")})]}),l.jsxs("div",{className:"mt-1 flex justify-between text-sm",children:[l.jsx("span",{className:"text-gray-500",children:"Estimated Wait"}),l.jsxs("span",{className:"font-medium text-gray-800",children:["~",t.estimatedTime," min"]})]}),l.jsxs("div",{className:"mt-3 flex justify-between text-lg font-bold",children:[l.jsx("span",{className:"text-gray-800",children:"Total"}),l.jsxs("span",{className:"text-primary-600",children:["",t.totalAmount.toFixed(2)]})]})]}),l.jsxs("div",{className:"mt-4 border-t border-gray-200",children:[l.jsxs("button",{onClick:()=>n(!e),className:"flex w-full items-center justify-between py-3 text-left font-semibold text-gray-700 hover:text-primary-600",children:[l.jsxs("span",{children:["View Items (",t.orderItems.length,")"]}),l.jsx(Fh,{className:`h-5 w-5 transform transition-transform duration-300 ${e?"rotate-180":""}`})]}),l.jsx(hf,{children:e&&l.jsx(Gr.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:l.jsx("ul",{className:"space-y-2 pb-2",children:t.orderItems.map((h,f)=>l.jsxs("li",{className:"flex justify-between border-b border-gray-100 py-1 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-800",children:h.productName}),l.jsxs("span",{className:"ml-2 text-gray-500",children:["x",h.quantity]})]}),l.jsxs("span",{className:"text-gray-600",children:["",(h.price*h.quantity).toFixed(2)]})]},f))})})})]}),l.jsx("div",{className:"mt-4 border-t border-gray-200 pt-4",children:l.jsx(Ve,{size:"lg",className:"w-full",onClick:u,variant:t.status==="completed"?"primary":"secondary",children:t.status==="completed"?l.jsxs(l.Fragment,{children:[l.jsx(qb,{className:"mr-2 h-5 w-5"}),"Start New Order"]}):l.jsxs(l.Fragment,{children:[l.jsx(xP,{className:"mr-2 h-5 w-5"}),"Reorder Items"]})})})]})},Gne="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQ2IiBoZWlnaHQ9IjE3OCIgdmlld0JveD0iMCAwIDI0NiAxNzgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xNTQuNTAzIDgwQzE4MC41MDMgNTEgMjEzLjAwMyAyMC41IDIyNS41MDMgMTguNUMyMzguMDAzIDE2LjUgMjQ0LjAwMyAyOS41IDI0NC4wMDMgMjkuNUMyNDQuMDAzIDI5LjUgMjQ4LjUwMyA1Mi41IDI0MC41MDMgODBDMjMyLjUwMyAxMDcuNSAyMTEuNTAzIDEyNCAyMTEuNTAzIDEyNEMyMTEuNTAzIDEyNCAxNjYuNTAzIDE3MSAxNDcuMDAzIDE3NUMxNDcuMDAzIDE3NSAxMTkuMDAzIDE4MS41IDEwNy4wMDMgMTcyLjVDOTUuMDAyNSAxNjMuNSAxMjguNTAzIDEwOSAxNTQuNTAzIDgwWiIgZmlsbD0iI0VCNUYxNiIvPgo8cGF0aCBkPSJNMTIuMDAyNSA4OUMxMi4wMDI1IDg5IC0yMS4wMjkzIDIyLjAyMyAyMi41MDI1IDE3QzM1LjUwMjUgMTUuNSA4MC4wMDI1IDU2IDc5LjUwMjUgNTkuNUM4Mi41MDI1IDc1IDcyLjAwMjUgODcgNjQuNTAyNSA5N0M2MS4xMzM2IDEwMS40OTIgNjAuMDAyNSAxMDcuNSA1OC4wMDI1IDExOS41QzU4LjAwMjUgMTM5IDUzLjAwMjUgMTM4LjUgNTMuMDAyNSAxMzguNUM1My4wMDI1IDEzOC41IDQwLjUwMjUgMTQxIDEyLjAwMjUgODlaIiBmaWxsPSIjRUI1RjE2IiIvPgo8cGF0aCBkPSJNNDcuMDAyNSAxN0M0MS4wMDI1IDEyLjAwMDEgNDIuMDAyNSAtNy42MjkzOWUtMDYgNTMuMDAyNSAwQzY0LjAwMjUgNy42Mjk0ZS0wNiA3NC4xOTA0IDQuNzY1MzQgODcuMDAyNSAxMEMxMDAuMzQ3IDE1LjQ1MjEgMTEwLjkxMSAxOSAxMTQuNTAzIDI2LjVDMTE4LjA5NCAzNCAxMTQuNTAzIDM5LjUgMTEwLjAwMyA0NUMxMDUuNTAzIDUwLjUgMTAyLjAwMyA1MiA5NC41MDI1IDUxQzg3LjAwMjUgNTAgNTMuMDAyNSAyMiA0Ny4wMDI1IDE3WiIgZmlsbD0iI0VCNUYxNiIvPgo8cGF0aCBkPSJNMjA1LjUwMyAyMy41QzIxOC41MDMgMTQgMjA1LjUwMyA1LjUgMjA1LjUwMyA1LjVDMTYyLjIzOSAxLjQzMjUyIDEyMi40MDggMzEuOTMyNCA4Mi4wMDI1IDg4LjVDNzEuNjQ1NCAxMDMgNjIuNTU4MyAxNTAuMzIyIDc4LjUwMjUgMTYxQzk3LjE3ODQgMTczLjUwOCAxMDIuNjM0IDE2Ny4xMDkgMTAzLjUwMyAxMzJDMTIxLjUwMyA1MSAxOTIuNTAzIDMzIDIwNS41MDMgMjMuNVoiIGZpbGw9IiNFQjVGMTYiLz4KPC9zdmc+Cg==",$ne=()=>{var h;const{currentUser:t}=ts(),{activeOrder:e}=vT(),n=ks(),s=Ds(),[r,i]=S.useState("default"),[a,o]=S.useState(!1),c=S.useRef(null);S.useEffect(()=>{"Notification"in window&&(i(Notification.permission),Notification.permission==="default"&&o(!0))},[]),S.useEffect(()=>{if(e&&e.status==="ready"&&r==="granted"&&c.current!==e.id){const f="Your Order is Ready! ",m={body:`Your Rush Coffee order (${e.orderNumber}) is now ready for pickup.`,icon:Gne,tag:e.id},p=new Notification(f,m);p.onclick=()=>{window.focus()},c.current=e.id}(!e||e.status==="completed")&&(c.current=null)},[e,r]);const u=async()=>{if(!("Notification"in window)){alert("This browser does not support desktop notification");return}const f=await Notification.requestPermission();i(f),(f==="granted"||f==="denied")&&o(!1)};return t?e?l.jsxs("div",{className:"flex min-h-screen flex-col bg-gray-50",children:[l.jsx(Rt,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center px-4 py-12 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex w-full max-w-md flex-col items-center gap-6",children:[((h=n.state)==null?void 0:h.fromCheckout)&&l.jsxs("div",{className:"w-full rounded-lg bg-green-100 p-4 text-center text-green-800 animate-fade-in-up",children:[l.jsx("h2",{className:"font-bold",children:"Order Placed Successfully!"}),l.jsx("p",{className:"text-sm",children:"You are now in the queue. We'll start preparing your order shortly."})]}),a&&r==="default"&&e.status!=="completed"&&l.jsxs("div",{className:"relative w-full animate-fade-in-up rounded-lg border border-primary-200 bg-white p-4 shadow-sm",children:[l.jsx("button",{onClick:()=>o(!1),className:"absolute top-2 right-2 rounded-full p-1 text-gray-400 transition-colors hover:text-gray-600","aria-label":"Dismiss",children:l.jsx(Kr,{className:"h-4 w-4"})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full bg-primary-100",children:l.jsx(jg,{className:"h-6 w-6 text-primary-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"Get Order Updates"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Know the moment your coffee is ready!"})]})]}),l.jsx("button",{onClick:u,className:"mt-3 w-full rounded-full bg-primary-600 px-4 py-2 text-sm font-semibold text-white transition-colors hover:bg-primary-700",children:"Enable Notifications"})]}),l.jsx(Hne,{order:e})]})}),l.jsx(Ct,{})]}):l.jsxs("div",{className:"flex min-h-screen flex-col bg-gray-50",children:[l.jsx(Rt,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center px-6 py-20 text-center",children:l.jsxs("div",{children:[l.jsx(kt,{className:"mx-auto h-24 w-24 text-gray-300 opacity-50"}),l.jsx("h1",{className:"mt-4 font-display text-2xl font-bold text-coffee-900",children:"Your queue is empty"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Ready for your next coffee fix?"}),l.jsxs("button",{onClick:()=>s("/menu"),className:"mt-8 inline-flex items-center justify-center gap-2 rounded-full bg-primary-600 px-8 py-3 font-semibold text-white shadow-lg transition-transform hover:scale-105",children:["Start a New Order",l.jsx(ec,{className:"h-5 w-5"})]})]})}),l.jsx(Ct,{})]}):l.jsxs("div",{className:"flex min-h-screen flex-col bg-gray-50",children:[l.jsx(Rt,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center px-6 py-20 text-center",children:l.jsxs("div",{children:[l.jsx(kt,{className:"mx-auto h-24 w-24 text-gray-300 opacity-50"}),l.jsx("h1",{className:"mt-4 font-display text-2xl font-bold text-coffee-900",children:"You're not in the queue"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Please log in and place an order to see your queue status."}),l.jsxs("div",{className:"mt-8 flex justify-center gap-4",children:[l.jsx(Pe,{to:"/auth/login",className:"rounded-full bg-primary-600 px-8 py-3 font-semibold text-white transition-transform hover:scale-105",children:"Login"}),l.jsx(Pe,{to:"/menu",className:"rounded-full border-2 border-primary-600 px-8 py-3 font-semibold text-primary-600 transition-transform hover:scale-105 hover:bg-primary-50",children:"View Menu"})]})]})}),l.jsx(Ct,{})]})},Nc=({isOpen:t,onClose:e,title:n,children:s,footer:r,size:i="md"})=>{if(S.useEffect(()=>{const o=c=>{c.key==="Escape"&&e()};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[e]),!t)return null;const a={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg"};return l.jsx("div",{className:"fixed inset-0 z-50 flex animate-fade-in-up items-center justify-center bg-black/60 p-4 backdrop-blur-sm",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",onClick:e,style:{animationDuration:"0.3s"},children:l.jsx("div",{className:`relative w-full transform transition-all ${a[i]}`,onClick:o=>o.stopPropagation(),children:l.jsxs(ve,{className:"rounded-xl p-0 shadow-2xl",children:[l.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 p-4",children:[l.jsx("h3",{id:"modal-title",className:"text-lg font-semibold text-coffee-900",children:n}),l.jsx("button",{onClick:e,className:"rounded-full p-1 text-gray-400 transition-colors hover:bg-gray-100 hover:text-gray-700","aria-label":"Close modal",children:l.jsx(Kr,{className:"h-5 w-5"})})]}),l.jsx("div",{className:"p-6",children:s}),r&&l.jsx("div",{className:"flex justify-end gap-3 rounded-b-xl border-t border-gray-200 bg-gray-50 p-4",children:r})]})})})},Kne={bronze:{Icon:az,name:"Bronze Member",gradient:"from-orange-400 to-orange-600",nextTierName:"Silver",progressColor:"bg-gray-400",minPoints:0},silver:{Icon:ZU,name:"Silver Member",gradient:"from-gray-300 to-gray-500",nextTierName:"Gold",progressColor:"bg-yellow-400",minPoints:300},gold:{Icon:C9,name:"Gold Member",gradient:"from-yellow-400 to-yellow-600",nextTierName:null,progressColor:"",minPoints:1e3}},Wne=({tier:t,currentPoints:e,nextTierPoints:n,showProgress:s=!0})=>{const r=Kne[t],i=n-e,a=t!=="gold"?Math.max(0,Math.min(100,(e-r.minPoints)/(n-r.minPoints)*100)):100;return l.jsxs("div",{className:`relative w-full max-w-sm overflow-hidden rounded-2xl bg-gradient-to-br p-6 text-center text-white shadow-lg md:p-8 ${r.gradient}`,children:[l.jsx("div",{className:"absolute inset-0 -translate-x-full animate-shimmer bg-gradient-to-r from-transparent via-white/30 to-transparent"}),l.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[l.jsx(r.Icon,{className:"h-16 w-16 animate-pulse-slow drop-shadow-lg"}),l.jsx("h2",{className:"mt-4 font-display text-2xl font-bold drop-shadow-md md:text-3xl",children:r.name}),l.jsxs("p",{className:"font-semibold text-white/80",children:[e," points"]})]}),s&&t!=="gold"&&l.jsxs("div",{className:"relative z-10 mt-6 text-left",children:[l.jsxs("p",{className:"text-xs font-semibold md:text-sm",children:[l.jsx("span",{className:"font-bold",children:i>0?i:0})," points to ",r.nextTierName]}),l.jsx("div",{className:"mt-1 h-2.5 w-full overflow-hidden rounded-full bg-black/20",children:l.jsx("div",{className:`h-full rounded-full ${r.progressColor} transition-all duration-500 ease-out`,style:{width:`${a}%`}})})]})]})},Yne={drink:"bg-blue-100 text-blue-800",food:"bg-green-100 text-green-800",discount:"bg-yellow-100 text-yellow-800"},Qne=({reward:t,currentPoints:e,onRedeem:n})=>{const{id:s,name:r,description:i,pointsCost:a,imageUrl:o,category:c,available:u}=t,h=e>=a,f=u&&h,m=a-e,p=()=>u?h?"Redeem Now":l.jsxs(l.Fragment,{children:[l.jsx(Tp,{className:"h-4 w-4"}),"Need ",m," more points"]}):"Unavailable";return l.jsxs(ve,{className:"flex flex-col overflow-hidden transition-transform duration-300 hover:-translate-y-1",hover:!0,children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:o,alt:r,className:`h-40 w-full object-cover ${u?"":"grayscale"}`}),l.jsx(Xt,{className:`absolute top-2 left-2 capitalize ${Yne[c]}`,children:c}),!u&&l.jsx(Xt,{className:"absolute top-2 right-2 bg-gray-500 text-white",children:"Temporarily Unavailable"})]}),l.jsxs("div",{className:"flex flex-1 flex-col p-4",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("h3",{className:"text-lg font-semibold text-coffee-900",children:r}),l.jsx("p",{className:"mt-1 h-10 text-sm text-gray-600 line-clamp-2",children:i})]}),l.jsx("div",{className:"mt-4 flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-2 text-primary-600",children:[l.jsx(Qd,{className:"h-5 w-5"}),l.jsxs("p",{className:"text-lg font-bold",children:[a," points"]})]})}),l.jsx("button",{onClick:()=>n(s),disabled:!f,className:"mt-4 flex w-full items-center justify-center gap-2 rounded-full bg-primary-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-gray-400 disabled:text-gray-100","aria-label":f?`Redeem ${r}`:`Cannot redeem ${r}`,children:p()})]})]})},Xne=({history:t})=>{const[e,n]=S.useState("all"),s=S.useMemo(()=>e==="all"?t:t.filter(a=>a.type===e),[t,e]),r=S.useMemo(()=>[...s].sort((a,o)=>o.date.getTime()-a.date.getTime()),[s]),i=a=>a==="earned"?l.jsx("div",{className:"absolute left-0 top-0 flex h-10 w-10 -translate-x-1/2 items-center justify-center rounded-full bg-green-100 ring-8 ring-white",children:l.jsx(Bh,{className:"h-5 w-5 text-green-600"})}):l.jsx("div",{className:"absolute left-0 top-0 flex h-10 w-10 -translate-x-1/2 items-center justify-center rounded-full bg-red-100 ring-8 ring-white",children:l.jsx(vP,{className:"h-5 w-5 text-red-600"})});return l.jsxs(ve,{children:[l.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center",children:[l.jsx("h2",{className:"font-display text-2xl font-bold text-coffee-900",children:"Points History"}),l.jsx("div",{className:"flex gap-2 rounded-full bg-gray-100 p-1",children:["all","earned","redeemed"].map(a=>l.jsx("button",{onClick:()=>n(a),className:`rounded-full px-3 py-1 text-sm font-semibold capitalize transition-colors ${e===a?"bg-primary-600 text-white shadow":"text-gray-600 hover:bg-primary-50"}`,children:a},a))})]}),l.jsx("div",{className:"mt-6 max-h-96 overflow-y-auto pr-2",children:r.length>0?l.jsx("div",{className:"relative border-l-2 border-gray-200 pl-8",children:r.map((a,o)=>l.jsxs("div",{className:`relative ${o<r.length-1?"pb-8":""}`,children:[i(a.type),l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-gray-800",children:a.description}),l.jsx("p",{className:"text-sm text-gray-500",children:Cy(a.date,{addSuffix:!0})})]}),l.jsxs("p",{className:`text-lg font-bold ${a.type==="earned"?"text-green-600":"text-red-600"}`,children:[a.type==="earned"?"+":"",a.points]})]})]},a.id))}):l.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 py-10 text-center",children:[l.jsx(B9,{className:"h-12 w-12 text-gray-300"}),l.jsx("p",{className:"font-semibold text-gray-700",children:"No transactions yet"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Your points history for this filter will appear here."})]})})]})},I_={bronze:{min:0,max:299,name:"Bronze"},silver:{min:300,max:999,name:"Silver"},gold:{min:1e3,max:1/0,name:"Gold"}},Jne=[{name:"Free Grande Drink",description:"Redeem your points for any Grande-sized drink on our menu. A perfect treat!",pointsCost:200,imageUrl:"/Menu/free-grande-drink.jpg",category:"drink",available:!0,displayOrder:1},{name:"10% Off Total Order",description:"Get a 10% discount on your entire order. Great for when you're treating friends!",pointsCost:300,imageUrl:"/Menu/10-off-total-order.jpg",category:"discount",available:!0,displayOrder:2},{name:"Free Pastry Item",description:"Choose any delicious pastry from our selection to complement your coffee.",pointsCost:150,imageUrl:"/Menu/free-pastry-item.jpg",category:"food",available:!0,displayOrder:3},{name:"Upgrade to Venti",description:"Get a free size upgrade from Grande to Venti on any drink.",pointsCost:100,imageUrl:"/Menu/upgrade-to-venti.jpg",category:"drink",available:!0,displayOrder:4}],Zne=()=>{var R;const{currentUser:t}=ts(),{showToast:e}=Dn(),[n,s]=S.useState([]),[r,i]=S.useState(!0),[a,o]=S.useState(!1),[c,u]=S.useState(null),[h,f]=S.useState(!1),[m,p]=S.useState("");S.useEffect(()=>{(async()=>{i(!0);const M=_e.collection("rewards");if((await M.get()).empty){console.log("Seeding available rewards...");const P=Jne.map(k=>M.add(k));await Promise.all(P)}const I=(await M.orderBy("displayOrder").get()).docs.map(P=>({id:P.id,...P.data()}));s(I),i(!1)})()},[]);const _=(t==null?void 0:t.tier)==="bronze"?"silver":"gold",w=t&&((R=I_[_])==null?void 0:R.min)||0,T=D=>{u(D),o(!0)},x=async()=>{if(!(!t||!c)){f(!0);try{if(t.currentPoints<c.pointsCost)throw new Error("You don't have enough points.");const D=_e.collection("users").doc(t.uid),M={id:`rh-${Date.now()}`,type:"redeemed",points:-c.pointsCost,description:`Redeemed: ${c.name}`,date:new Date};await D.update({currentPoints:Me.firestore.FieldValue.increment(-c.pointsCost),rewardsHistory:Me.firestore.FieldValue.arrayUnion(M)}),p(`RC-REDEEM-${Math.random().toString(36).substr(2,9).toUpperCase()}`)}catch(D){e(D.message||"Failed to redeem reward."),f(!1)}}},v=()=>{navigator.clipboard&&(navigator.clipboard.writeText(m),e("Code copied to clipboard!"))},b=()=>{o(!1),u(null),f(!1),p("")};return t?l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(Rt,{}),l.jsxs("main",{children:[l.jsx("section",{className:"bg-gradient-to-r from-primary-50 to-coffee-50 px-6 py-12",children:l.jsx("div",{className:"container mx-auto max-w-7xl",children:l.jsxs("div",{className:"grid grid-cols-1 items-center gap-8 md:grid-cols-3",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("h1",{className:"font-display text-4xl font-bold text-coffee-900 md:text-5xl",children:["Welcome, ",t.firstName,"!"]}),l.jsx("p",{className:"mt-2 text-lg text-gray-600",children:"You're doing great! Keep earning points for amazing rewards."})]}),l.jsx("div",{className:"flex justify-center md:justify-end",children:l.jsx(Wne,{tier:t.tier,currentPoints:t.currentPoints,nextTierPoints:w})})]})})}),l.jsx("section",{className:"px-6 py-16",children:l.jsxs("div",{className:"container mx-auto max-w-7xl",children:[l.jsxs("div",{className:"mb-8 flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"font-display text-3xl font-bold text-coffee-900",children:"Redeem Your Points"}),l.jsx("p",{className:"mt-1 text-gray-600",children:"Use your points to claim these exciting rewards."})]}),l.jsxs("div",{className:"rounded-full bg-white px-4 py-2 text-lg font-semibold text-primary-600 shadow-md",children:["Your Points: ",l.jsx("span",{className:"font-bold",children:t.currentPoints})]})]}),r?l.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:Array.from({length:4}).map((D,M)=>l.jsx(V6,{},M))}):n.length>0?l.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:n.map(D=>l.jsx(Qne,{reward:D,currentPoints:t.currentPoints,onRedeem:()=>T(D)},D.id))}):l.jsxs(ve,{className:"py-20 text-center",children:[l.jsx(Qd,{className:"mx-auto h-16 w-16 text-gray-300"}),l.jsx("h3",{className:"mt-4 font-semibold text-gray-800",children:"No Rewards Available"}),l.jsx("p",{className:"mt-1 text-gray-500",children:"Please check back later for new rewards."})]})]})}),l.jsx("section",{className:"bg-white px-6 py-16",children:l.jsx("div",{className:"container mx-auto max-w-4xl",children:l.jsx(Xne,{history:t.rewardsHistory})})})]}),l.jsx(Ct,{}),l.jsx(Nc,{isOpen:a,onClose:b,title:m?"Reward Claimed!":`Redeem: ${(c==null?void 0:c.name)||""}`,children:m?l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-green-100",children:l.jsx(Yi,{className:"h-8 w-8 text-green-600"})}),l.jsx("h3",{className:"mt-4 text-lg font-semibold text-gray-900",children:"Success!"}),l.jsx("p",{className:"mt-1 text-gray-600",children:"Show this code at the counter to claim your reward:"}),l.jsxs("div",{className:"relative my-4 rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-4",children:[l.jsx("p",{className:"font-mono text-2xl font-bold text-primary-700 tracking-widest",children:m}),l.jsx("button",{onClick:v,className:"absolute top-2 right-2 text-gray-400 hover:text-primary-600",children:l.jsx(w9,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"mt-2 flex items-center justify-center gap-2 rounded-lg bg-yellow-50 p-3 text-sm text-yellow-800",children:[l.jsx(ha,{className:"h-5 w-5 flex-shrink-0"}),l.jsx("span",{children:"This code is for one-time use only."})]}),l.jsx("div",{className:"mt-6",children:l.jsx(Ve,{onClick:b,children:"Close"})})]}):l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"text-center text-gray-600",children:["Are you sure you want to spend ",l.jsxs("span",{className:"font-bold text-primary-600",children:[c==null?void 0:c.pointsCost," points"]})," to redeem this reward?"]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx(Ve,{variant:"ghost",onClick:b,children:"Cancel"}),l.jsxs(Ve,{onClick:x,disabled:h,children:[h?l.jsx(_t,{className:"mr-2 h-4 w-4 animate-spin"}):l.jsx(Yi,{className:"mr-2 h-4 w-4"}),"Confirm"]})]})]})})]}):l.jsxs("div",{className:"flex min-h-screen flex-col bg-gray-50",children:[l.jsx(Rt,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center px-6 py-20 text-center",children:l.jsxs("div",{children:[l.jsx(Qd,{className:"mx-auto h-24 w-24 text-gray-300 opacity-50"}),l.jsx("h1",{className:"mt-4 font-display text-2xl font-bold text-coffee-900",children:"Join Our Rewards Program"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Log in or create an account to start earning points and get free coffee!"}),l.jsxs("div",{className:"mt-8 flex justify-center gap-4",children:[l.jsx(Pe,{to:"/auth/login",className:"rounded-full bg-primary-600 px-8 py-3 font-semibold text-white transition-transform hover:scale-105",children:"Login"}),l.jsx(Pe,{to:"/auth/register",className:"rounded-full border-2 border-primary-600 px-8 py-3 font-semibold text-primary-600 transition-transform hover:scale-105 hover:bg-primary-50",children:"Sign Up"})]})]})}),l.jsx(Ct,{})]})},ese=({user:t,onEditPhoto:e})=>{const n=(s,r)=>`${s.charAt(0)}${r.charAt(0)}`.toUpperCase();return l.jsxs("div",{className:"w-full",children:[l.jsx("div",{className:"relative h-48 w-full bg-gradient-to-r from-primary-500 to-coffee-600"}),l.jsxs("div",{className:"-mt-16 px-6",children:[l.jsxs("div",{className:"relative mx-auto h-32 w-32",children:[t.photoURL?l.jsx("img",{src:t.photoURL,alt:`${t.firstName} ${t.lastName}`,className:"h-full w-full rounded-full border-4 border-white object-cover shadow-lg"}):l.jsx("div",{className:"flex h-full w-full items-center justify-center rounded-full border-4 border-white bg-gradient-to-br from-primary-400 to-primary-600 text-white shadow-lg",children:l.jsx("span",{className:"font-display text-4xl font-bold",children:n(t.firstName,t.lastName)})}),l.jsx("button",{onClick:e,className:"absolute bottom-0 right-0 flex h-10 w-10 items-center justify-center rounded-full bg-primary-600 text-white shadow-lg transition-colors hover:bg-primary-700","aria-label":"Edit profile photo",children:l.jsx(i9,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"mt-4 text-center",children:[l.jsxs("h1",{className:"font-display text-3xl font-bold text-coffee-900",children:[t.firstName," ",t.lastName]}),l.jsx("p",{className:"text-gray-600",children:t.email}),t.role&&l.jsxs(Xt,{className:"mt-2 bg-yellow-100 text-yellow-800 capitalize",children:[l.jsx(Xd,{className:"mr-1 h-3 w-3"}),t.role]})]})]}),l.jsxs("div",{className:"mt-8 grid grid-cols-3 gap-4 border-y border-gray-200 bg-gray-50/50 px-6 py-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx(As,{className:"mx-auto mb-1 h-6 w-6 text-primary-600"}),l.jsx("p",{className:"text-xl font-bold text-coffee-900",children:t.totalOrders}),l.jsx("p",{className:"text-xs text-gray-500",children:"Total Orders"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx(g9,{className:"mx-auto mb-1 h-6 w-6 text-primary-600"}),l.jsxs("p",{className:"text-xl font-bold text-coffee-900",children:["",t.totalSpent.toLocaleString()]}),l.jsx("p",{className:"text-xs text-gray-500",children:"Total Spent"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx(fP,{className:"mx-auto mb-1 h-6 w-6 text-primary-600"}),l.jsx("p",{className:"text-xl font-bold text-coffee-900",children:Ry(t.createdAt,"MMMM yyyy")}),l.jsx("p",{className:"text-xs text-gray-500",children:"Member Since"})]})]})]})},tse=({user:t,onSave:e,onCancel:n})=>{const[s,r]=S.useState({firstName:t.firstName,lastName:t.lastName,phone:t.phone||""}),[i,a]=S.useState({}),[o,c]=S.useState(!1),[u,h]=S.useState(!1),{showToast:f}=Dn();S.useEffect(()=>{const w=s.firstName!==t.firstName||s.lastName!==t.lastName||s.phone!==(t.phone||"");h(w)},[s,t]);const m=()=>{const w={};return s.firstName.length<2&&(w.firstName="First name must be at least 2 characters."),s.lastName.length<2&&(w.lastName="Last name must be at least 2 characters."),s.phone&&!/^(09|\+639)\d{9}$/.test(s.phone)&&(w.phone="Invalid Philippine phone number format."),a(w),Object.keys(w).length===0},p=w=>{r({...s,[w.target.name]:w.target.value})},_=w=>{w.preventDefault(),m()&&(c(!0),setTimeout(()=>{e(s),c(!1),f("Profile updated successfully!")},1e3))};return l.jsxs(ve,{className:"w-full",children:[l.jsx("h2",{className:"mb-4 font-display text-xl font-bold text-coffee-900",children:"Edit Profile Information"}),l.jsxs("form",{onSubmit:_,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(Lr,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",name:"firstName",id:"firstName",value:s.firstName,onChange:p,className:"w-full rounded-md border-gray-300 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500",required:!0})]}),i.firstName&&l.jsx("p",{className:"mt-1 text-xs text-red-500",children:i.firstName})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last Name"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(Lr,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",name:"lastName",id:"lastName",value:s.lastName,onChange:p,className:"w-full rounded-md border-gray-300 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500",required:!0})]}),i.lastName&&l.jsx("p",{className:"mt-1 text-xs text-red-500",children:i.lastName})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(Vr,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"tel",name:"phone",id:"phone",value:s.phone,onChange:p,className:"w-full rounded-md border-gray-300 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]}),i.phone&&l.jsx("p",{className:"mt-1 text-xs text-red-500",children:i.phone})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),l.jsxs("div",{className:"relative mt-1",children:[l.jsx(sr,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"email",name:"email",id:"email",value:t.email||"",className:"w-full rounded-md border-gray-300 bg-gray-100 pl-10 text-gray-500 shadow-sm",disabled:!0,readOnly:!0})]}),l.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Contact support to change your email address."})]}),l.jsxs("div",{className:"flex justify-end gap-3 border-t border-gray-200 pt-4",children:[l.jsxs(Ve,{type:"button",variant:"ghost",onClick:n,children:[l.jsx(Kr,{className:"mr-2 h-4 w-4"}),"Cancel"]}),l.jsxs(Ve,{type:"submit",variant:"primary",disabled:!u||o,children:[o?l.jsx(_t,{className:"mr-2 h-4 w-4 animate-spin"}):l.jsx(Ub,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]})]})},H2={completed:{icon:Yi,color:"bg-green-100 text-green-800"},cancelled:{icon:Kr,color:"bg-red-100 text-red-800"},preparing:{icon:As,color:"bg-blue-100 text-blue-800"},waiting:{icon:As,color:"bg-yellow-100 text-yellow-800"},ready:{icon:As,color:"bg-purple-100 text-purple-800"}},nse={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},sse={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},rse=({order:t})=>{var c,u;const e=((c=H2[t.status])==null?void 0:c.icon)||As,n=((u=H2[t.status])==null?void 0:u.color)||"bg-gray-100 text-gray-800",{addMultipleToCart:s,showToast:r}=Dn(),{products:i}=Jc(),a=()=>{const h=[],f=[];for(const m of t.orderItems){const p=i.find(x=>x.id===m.productId);if(!p||!p.available||p.stock===0){f.push(m.productName);continue}const _=m.productName.match(/\((Grande|Venti)\)$/),w=_?_[1]:null;if(!w){f.push(m.productName);continue}const T=p.sizes.find(x=>x.name===w);if(!T){f.push(m.productName);continue}h.push({product:p,selectedSize:T,quantity:m.quantity})}h.length>0&&s(h),f.length>0&&r(`Could not add: ${f.join(", ")}. They may be unavailable.`)},o=()=>{const h=t.orderItems;return h.length<=2?h.map(m=>`${m.quantity}x ${m.productName}`).join(", "):`${h.slice(0,2).map(m=>m.productName).join(", ")}, and ${h.length-2} more item(s)`};return l.jsx(ve,{hover:!0,className:"transition-shadow duration-300",children:l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"font-mono text-sm font-semibold text-primary-700",children:t.orderNumber}),l.jsxs(Xt,{className:`capitalize ${n}`,children:[l.jsx(e,{className:"mr-1 h-3 w-3"}),t.status]})]}),l.jsx("p",{className:"mt-1 text-xs text-gray-500",children:Ry(t.timestamp,"MMM dd, yyyy  hh:mm a")}),l.jsx("p",{className:"mt-2 text-sm text-gray-700",children:o()})]}),l.jsxs("div",{className:"flex-shrink-0 text-right sm:ml-4",children:[l.jsxs("p",{className:"font-display text-2xl font-bold text-coffee-900",children:["",t.totalAmount.toFixed(2)]}),l.jsxs(Ve,{size:"sm",variant:"secondary",className:"mt-2",onClick:a,children:[l.jsx(xP,{className:"mr-2 h-4 w-4"}),"Reorder"]})]})]})})},G2=({orders:t,limit:e,showViewAll:n,onViewAll:s})=>{const r=[...t].sort((a,o)=>o.timestamp.getTime()-a.timestamp.getTime()),i=e?r.slice(0,e):r;return t.length===0?l.jsxs("div",{className:"py-16 text-center",children:[l.jsx(Bb,{className:"mx-auto h-16 w-16 text-gray-300"}),l.jsx("h3",{className:"mt-4 text-xl font-semibold text-gray-800",children:"No Orders Yet"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Your past orders will appear here."}),l.jsx(Ve,{size:"lg",className:"mt-6",children:"Browse Menu"})]}):l.jsxs("div",{children:[l.jsx(Gr.div,{className:"space-y-4",variants:nse,initial:"hidden",animate:"visible",children:i.map(a=>l.jsx(Gr.div,{variants:sse,layout:!0,children:l.jsx(rse,{order:a})},a.id))}),n&&r.length>(e||0)&&l.jsx("div",{className:"mt-6 text-center",children:l.jsx(Ve,{variant:"ghost",onClick:s,children:"View All Orders"})})]})},Lu=({label:t,description:e,enabled:n,onChange:s,Icon:r})=>l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(r,{className:"h-5 w-5 text-gray-500"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-800",children:t}),l.jsx("p",{className:"text-sm text-gray-500",children:e})]})]}),l.jsx("button",{type:"button",className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 ${n?"bg-primary-600":"bg-gray-200"}`,role:"switch","aria-checked":n,onClick:()=>s(!n),children:l.jsx("span",{"aria-hidden":"true",className:`inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${n?"translate-x-5":"translate-x-0"}`})})]}),ise=({preferences:t,onUpdatePreferences:e})=>{const[n,s]=S.useState(t),[r,i]=S.useState(!1),[a,o]=S.useState(!1),{showToast:c}=Dn(),u=(R,D,M)=>{const A={...n,[R]:{...n[R],[D]:M}};s(A),e({[R]:A[R]}),c("Preferences updated!")},[h,f]=S.useState({current:"",new:"",confirm:""}),[m,p]=S.useState({current:!1,new:!1,confirm:!1}),[_,w]=S.useState(!1),[T,x]=S.useState({password:"",checkbox:!1}),[v,b]=S.useState(!1);return l.jsxs(l.Fragment,{children:[l.jsxs(ve,{children:[l.jsx("h2",{className:"mb-4 font-display text-2xl font-bold text-coffee-900",children:"Preferences & Settings"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-gray-500",children:"Notifications"}),l.jsx(Lu,{Icon:jg,label:"Push Notifications",description:"Get notified when order is ready",enabled:n.notifications.push,onChange:R=>u("notifications","push",R)}),l.jsx(Lu,{Icon:sr,label:"Email Updates",description:"Receive order updates via email",enabled:n.notifications.emailUpdates,onChange:R=>u("notifications","emailUpdates",R)}),l.jsx(Lu,{Icon:sr,label:"Marketing Emails",description:"Get news and promotions",enabled:n.notifications.marketing,onChange:R=>u("notifications","marketing",R)})]}),l.jsx("hr",{className:"my-6"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(pz,{className:"h-5 w-5 text-gray-500"}),l.jsx("h3",{className:"font-semibold text-gray-800",children:"Appearance"})]}),l.jsx("div",{className:"flex gap-2 rounded-full bg-gray-100 p-1",children:["light","dark","auto"].map(R=>l.jsx("button",{onClick:()=>u("theme","theme",R),className:`w-full rounded-full py-1.5 text-sm font-semibold capitalize transition-colors ${n.theme===R?"bg-primary-600 text-white shadow":"text-gray-600 hover:bg-primary-50"}`,children:R},R))})]}),l.jsx("hr",{className:"my-6"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-semibold text-gray-500",children:"Privacy"}),l.jsx(Lu,{Icon:Xd,label:"Share anonymous usage data",description:"Help us improve our services",enabled:n.privacy.shareUsageData,onChange:R=>u("privacy","shareUsageData",R)}),l.jsx(Lu,{Icon:Xd,label:"Personalized recommendations",description:"Get recommendations based on your activity",enabled:n.privacy.personalizedRecs,onChange:R=>u("privacy","personalizedRecs",R)})]})]}),l.jsxs(ve,{className:"mt-6 border-l-4 border-red-500",children:[l.jsx("h2",{className:"mb-4 font-display text-xl font-bold text-red-700",children:"Account Management"}),l.jsxs("div",{className:"flex flex-col items-start gap-4 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"Change Password"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Update your password for better security."})]}),l.jsxs(Ve,{variant:"secondary",onClick:()=>i(!0),children:[l.jsx(Y9,{className:"mr-2 h-4 w-4"}),"Change Password"]})]}),l.jsx("hr",{className:"my-4"}),l.jsxs("div",{className:"flex flex-col items-start gap-4 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:"Delete Account"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Permanently delete your account and all data."})]}),l.jsxs(Ve,{variant:"danger",onClick:()=>o(!0),children:[l.jsx(kg,{className:"mr-2 h-4 w-4"}),"Delete Account"]})]})]}),l.jsx(Nc,{isOpen:r,onClose:()=>i(!1),title:"Change Password",children:l.jsx("form",{className:"space-y-4",children:l.jsx("p",{className:"text-sm text-gray-600",children:"Password change functionality is coming soon."})})}),l.jsx(Nc,{isOpen:a,onClose:()=>o(!1),title:"Delete Account",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-red-100",children:l.jsx(wP,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),l.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Are you absolutely sure?"}),l.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"This action cannot be undone. This will permanently delete your account, orders, and rewards."}),l.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Account deletion functionality is coming soon."})]})})]})},ase=["Poor","Fair","Good","Very Good","Excellent"],ose={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"},cg=({rating:t,onRatingChange:e,readonly:n=!1,size:s="md",className:r=""})=>{const[i,a]=S.useState(0),o=!n&&e,c=p=>{o&&e(p)},u=p=>{o&&a(p)},h=()=>{o&&a(0)},f=i||t,m=f>0?ase[f-1]:"";return l.jsxs("div",{className:`flex flex-col items-center gap-2 ${r}`,children:[l.jsx("div",{className:"flex",onMouseLeave:h,role:o?"radiogroup":"img","aria-label":o?"Star rating":`Rating: ${t} out of 5 stars`,children:[...Array(5)].map((p,_)=>{const w=_+1,T=w<=f;return l.jsx("button",{type:"button",disabled:!o,onClick:()=>c(w),onMouseEnter:()=>u(w),className:`transition-colors duration-200 ${o?"cursor-pointer":"cursor-default"}`,"aria-label":o?`${w} star`:void 0,"aria-checked":o?t===w:void 0,role:o?"radio":void 0,children:l.jsx(bP,{className:`
                  ${ose[s]}
                  ${T?"text-yellow-400":"text-gray-300"}
                  transition-transform duration-200
                  ${o&&T?"hover:scale-110":""}
                `,fill:T?"currentColor":"none"})},_)})}),o&&l.jsx("div",{className:"h-5 text-sm font-medium text-gray-600",children:m})]})},lse=({user:t})=>{const[e,n]=S.useState(0),[s,r]=S.useState("food"),[i,a]=S.useState(""),[o,c]=S.useState(!1),[u,h]=S.useState([]),[f,m]=S.useState(!0),[p,_]=S.useState(null),{showToast:w}=Dn();S.useEffect(()=>{if(!t)return;const b=_e.collection("feedback").where("userId","==",t.uid).onSnapshot(R=>{const D=[];R.forEach(M=>{var E,N;const A=M.data();D.push({id:M.id,...A,createdAt:(E=A.createdAt)==null?void 0:E.toDate(),updatedAt:(N=A.updatedAt)==null?void 0:N.toDate()})}),D.sort((M,A)=>{var E,N;return(((E=A.createdAt)==null?void 0:E.getTime())||0)-(((N=M.createdAt)==null?void 0:N.getTime())||0)}),h(D),m(!1)});return()=>b()},[t]);const T=async v=>{if(v.preventDefault(),e===0||i.trim().length<10){w("Please provide a rating and a comment (at least 10 characters).");return}c(!0);try{await _e.collection("feedback").add({userId:t.uid,rating:e,category:s,comment:i,status:"pending",createdAt:Me.firestore.FieldValue.serverTimestamp(),updatedAt:Me.firestore.FieldValue.serverTimestamp()}),w("Feedback submitted successfully!"),n(0),r("food"),a("")}catch(b){console.error("Error submitting feedback: ",b),w("Failed to submit feedback. Please try again.")}finally{c(!1)}},x={pending:"bg-yellow-100 text-yellow-800",reviewed:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800"};return l.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[l.jsx("div",{className:"lg:col-span-2",children:l.jsxs(ve,{children:[l.jsx("h2",{className:"mb-4 font-display text-2xl font-bold text-coffee-900",children:"Your Feedback History"}),f?l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx(_t,{className:"h-8 w-8 animate-spin text-primary-600"})}):u.length>0?l.jsx("div",{className:"space-y-3",children:u.map(v=>l.jsxs("div",{className:"rounded-lg border border-gray-200",children:[l.jsxs("button",{onClick:()=>_(p===v.id?null:v.id),className:"flex w-full items-center justify-between p-4 text-left",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(cg,{rating:v.rating,size:"sm",readonly:!0}),l.jsxs("div",{className:"flex-1 overflow-hidden",children:[l.jsx("p",{className:"font-semibold text-gray-800 truncate",children:v.comment}),l.jsx("p",{className:"text-xs text-gray-500",children:v.createdAt?Cy(v.createdAt,{addSuffix:!0}):"Just now"})]})]}),l.jsx(Fh,{className:`h-5 w-5 transform transition-transform ${p===v.id?"rotate-180":""}`})]}),l.jsx(hf,{children:p===v.id&&l.jsx(Gr.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:l.jsxs("div",{className:"border-t p-4",children:[l.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:v.comment}),v.response&&l.jsxs("div",{className:"mt-4 rounded-md border-l-4 border-primary-400 bg-primary-50 p-3",children:[l.jsx("p",{className:"font-semibold text-primary-800",children:"Response from Rush Coffee:"}),l.jsxs("p",{className:"mt-1 text-sm text-primary-700 italic",children:['"',v.response,'"']})]}),l.jsx("div",{className:"mt-3",children:l.jsx(Xt,{className:`capitalize ${x[v.status]}`,children:v.status})})]})})})]},v.id))}):l.jsxs("div",{className:"py-10 text-center text-gray-500",children:[l.jsx(Lc,{className:"mx-auto h-12 w-12 text-gray-300"}),l.jsx("p",{className:"mt-2 font-semibold",children:"No feedback history found."}),l.jsx("p",{className:"text-sm",children:"Share your thoughts with us using the form!"})]})]})}),l.jsx("div",{children:l.jsxs(ve,{children:[l.jsx("h2",{className:"mb-4 font-display text-2xl font-bold text-coffee-900",children:"Leave Feedback"}),l.jsxs("form",{onSubmit:T,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Overall Rating"}),l.jsx(cg,{rating:e,onRatingChange:n})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category"}),l.jsxs("select",{id:"category",value:s,onChange:v=>r(v.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[l.jsx("option",{value:"food",children:"Food & Drinks"}),l.jsx("option",{value:"service",children:"Service"}),l.jsx("option",{value:"system",children:"App/Website"}),l.jsx("option",{value:"other",children:"Other"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700",children:"Comments"}),l.jsx("textarea",{id:"comment",value:i,onChange:v=>a(v.target.value),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"Tell us more about your experience..."})]}),l.jsxs(Ve,{type:"submit",disabled:o,className:"w-full",children:[o?l.jsx(_t,{className:"mr-2 h-4 w-4 animate-spin"}):l.jsx(zb,{className:"mr-2 h-4 w-4"}),o?"Submitting...":"Submit Feedback"]})]})]})})]})},$2=()=>l.jsx(ve,{className:"animate-pulse",children:l.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"flex-grow space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"h-4 w-1/3 rounded bg-gray-300"}),l.jsx("div",{className:"h-5 w-1/4 rounded-full bg-gray-300"})]}),l.jsx("div",{className:"h-3 w-1/4 rounded bg-gray-300"}),l.jsx("div",{className:"h-4 w-1/2 rounded bg-gray-300"})]}),l.jsxs("div",{className:"flex-shrink-0 space-y-2 text-right sm:ml-4",children:[l.jsx("div",{className:"h-8 w-24 rounded bg-gray-300 ml-auto"}),l.jsx("div",{className:"h-8 w-28 rounded-full bg-gray-300 ml-auto"})]})]})}),cse=()=>{const{currentUser:t,updateUserProfile:e,updateUserPhoto:n}=ts(),{orderHistory:s,isHistoryLoading:r}=vT(),[i,a]=S.useState(null),[o,c]=S.useState("overview"),[u,h]=S.useState(!1),[f,m]=S.useState(!1),[p,_]=S.useState(null),[w,T]=S.useState(null),[x,v]=S.useState(!1),b=S.useRef(null),{showToast:R,addToCart:D}=Dn();S.useEffect(()=>{a(t)},[t]),S.useEffect(()=>{if(!p){T(null);return}const W=URL.createObjectURL(p);return T(W),()=>URL.revokeObjectURL(W)},[p]);const M=S.useMemo(()=>i?iO.find(W=>W.id==="cb-01"):null,[i]),A=W=>{i&&e&&(e(W),h(!1))},E=W=>{i&&a(ue=>ue?{...ue,preferences:{...ue.preferences,...W}}:null)},N=W=>{if(W.target.files&&W.target.files[0]){if(W.target.files[0].size>2*1024*1024){R("File size should not exceed 2MB.");return}_(W.target.files[0])}},I=()=>{if(!p||!i||!n)return;v(!0);const W=new FileReader;W.readAsDataURL(p),W.onloadend=async()=>{const ue=W.result;try{await n(ue),v(!1),m(!1),_(null),R("Profile photo updated!")}catch(H){console.error("Error updating photo:",H),R("Failed to update photo."),v(!1)}}},P=()=>{M&&D(M,M.sizes[0])};if(!i)return l.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50",children:l.jsx(_t,{className:"h-12 w-12 animate-spin text-primary-600"})});const k=[{id:"overview",label:"Overview",Icon:Lr},{id:"orders",label:"Order History",Icon:Bb},{id:"feedback",label:"My Feedback",Icon:Lc},{id:"settings",label:"Settings",Icon:Fb}],j=()=>{switch(o){case"orders":return r?l.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((W,ue)=>l.jsx($2,{},ue))}):l.jsx(G2,{orders:s});case"settings":return l.jsx(ise,{preferences:i.preferences,onUpdatePreferences:E});case"feedback":return l.jsx(lse,{user:i});case"overview":default:return l.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[l.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[u?l.jsx(tse,{user:i,onSave:A,onCancel:()=>h(!1)}):l.jsxs(ve,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"font-display text-xl font-bold text-coffee-900",children:"Quick Info"}),l.jsxs(Ve,{variant:"ghost",size:"sm",onClick:()=>h(!0),children:[l.jsx(_P,{className:"mr-2 h-4 w-4"})," Edit Profile"]})]}),l.jsxs("ul",{className:"mt-4 space-y-3 text-gray-700",children:[l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx(sr,{className:"h-5 w-5 text-gray-400"})," ",i.email]}),l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx(Vr,{className:"h-5 w-5 text-gray-400"})," ",i.phone||"Not provided"]}),l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx(fP,{className:"h-5 w-5 text-gray-400"})," Member since ",Ry(i.createdAt,"MMMM dd, yyyy")]})]})]}),r?l.jsxs(ve,{children:[l.jsx("h3",{className:"font-display text-xl font-bold text-coffee-900",children:"Recent Orders"}),l.jsx("div",{className:"mt-4 space-y-4",children:Array.from({length:3}).map((W,ue)=>l.jsx($2,{},ue))})]}):l.jsx(G2,{orders:s,limit:3,showViewAll:!0,onViewAll:()=>c("orders")})]}),l.jsxs("div",{className:"space-y-6 lg:col-span-1",children:[M&&l.jsxs(ve,{children:[l.jsx("h3",{className:"font-display text-xl font-bold text-coffee-900",children:"Your Favorite"}),l.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[l.jsx("img",{src:M.imageUrl,alt:M.name,className:"h-20 w-20 rounded-lg object-cover"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-gray-800",children:M.name}),l.jsx("p",{className:"text-sm text-gray-500",children:M.category}),l.jsx(Ve,{size:"sm",variant:"secondary",className:"mt-2",onClick:P,children:"Order Again"})]})]})]}),l.jsxs(ve,{children:[l.jsx("h3",{className:"font-display text-xl font-bold text-coffee-900",children:"Quick Stats"}),l.jsxs("ul",{className:"mt-4 space-y-3 text-gray-700",children:[l.jsxs("li",{className:"flex justify-between",children:[l.jsx("span",{children:"Orders this week:"})," ",l.jsx("span",{className:"font-bold",children:"5"})]}),l.jsxs("li",{className:"flex justify-between",children:[l.jsx("span",{children:"Orders this month:"})," ",l.jsx("span",{className:"font-bold",children:"12"})]}),l.jsxs("li",{className:"flex justify-between",children:[l.jsx("span",{children:"Total Savings:"})," ",l.jsx("span",{className:"font-bold text-green-600",children:"250.00"})]})]})]})]})]})}};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(Rt,{}),l.jsxs("main",{children:[l.jsx(ese,{user:i,onEditPhoto:()=>m(!0)}),l.jsx("div",{className:"sticky top-20 z-30 border-b border-gray-200 bg-white/95 backdrop-blur-sm",children:l.jsx("div",{className:"container mx-auto max-w-7xl px-6",children:l.jsx("nav",{className:"-mb-px flex space-x-6 overflow-x-auto",children:k.map(W=>l.jsxs("button",{onClick:()=>c(W.id),className:`group inline-flex shrink-0 items-center gap-2 whitespace-nowrap border-b-2 px-1 py-4 text-sm font-medium transition-colors ${o===W.id?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:[l.jsx(W.Icon,{className:`h-5 w-5 ${o!==W.id&&"text-gray-400 group-hover:text-gray-500"}`}),W.label]},W.id))})})}),l.jsx("div",{className:"container mx-auto max-w-7xl p-6",children:j()})]}),l.jsx(Ct,{}),l.jsx(Nc,{isOpen:f,onClose:()=>m(!1),title:"Upload New Photo",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{type:"file",ref:b,onChange:N,accept:"image/*",className:"hidden"}),l.jsx("div",{className:"flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-6 text-center transition hover:bg-gray-100",onClick:()=>{var W;return(W=b.current)==null?void 0:W.click()},children:w?l.jsx("img",{src:w,alt:"Preview",className:"h-32 w-32 rounded-full object-cover"}):l.jsxs(l.Fragment,{children:[l.jsx(eA,{className:"h-12 w-12 text-gray-400"}),l.jsx("span",{className:"mt-2 block text-sm font-semibold text-gray-600",children:"Click to upload"}),l.jsx("span",{className:"mt-1 block text-xs text-gray-500",children:"PNG or JPG (MAX. 2MB)"})]})}),x&&l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:l.jsx("div",{className:"bg-primary-600 h-2.5 rounded-full animate-pulse",style:{width:"100%"}})}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx(Ve,{variant:"ghost",onClick:()=>m(!1),children:"Cancel"}),l.jsxs(Ve,{onClick:I,disabled:!p||x,children:[x?l.jsx(_t,{className:"mr-2 h-4 w-4 animate-spin"}):l.jsx(eA,{className:"mr-2 h-4 w-4"}),"Upload Photo"]})]})]})})]})},use=(t,e=2e3)=>{const[n,s]=S.useState(0),r=S.useRef(null),i=t%1!==0?1:0;return S.useEffect(()=>{const a=new IntersectionObserver(([c])=>{if(c.isIntersecting){let u=0;const h=t;if(u===h){s(h);return}const f=Math.round(e/(1e3/60)),m=(h-u)/f,p=()=>{u+=m,u<h?(s(u),requestAnimationFrame(p)):s(h)};requestAnimationFrame(p),a.disconnect()}},{threshold:.1}),o=r.current;return o&&a.observe(o),()=>{o&&a.unobserve(o)}},[t,e]),{count:n.toFixed(i),ref:r}},cm=({icon:t,value:e,label:n,suffix:s=""})=>{const{count:r,ref:i}=use(e),a=r.includes(".");return l.jsxs("div",{className:"flex flex-col items-center text-center",children:[l.jsx(t,{className:"mb-2 h-10 w-10 text-primary-600"}),l.jsxs("span",{ref:i,className:"font-display text-4xl font-bold text-coffee-900",children:[Number(r).toLocaleString(void 0,{minimumFractionDigits:a?1:0,maximumFractionDigits:a?1:0}),s]}),l.jsx("p",{className:"mt-1 text-gray-600",children:n})]})},dse=()=>l.jsxs("div",{className:"bg-white",children:[l.jsx(Rt,{}),l.jsxs("main",{children:[l.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-primary-50 via-coffee-100 to-white px-6 py-24 text-center",children:[l.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/az-subtle.png')] opacity-30"}),l.jsxs("div",{className:"relative z-10 mx-auto max-w-4xl",children:[l.jsx("h1",{className:"animate-fade-in-up font-display text-5xl font-bold text-coffee-900 md:text-6xl",style:{animationDelay:"100ms",opacity:0},children:"About Rush Coffee"}),l.jsx("p",{className:"animate-fade-in-up mt-4 text-xl text-gray-700 md:text-2xl",style:{animationDelay:"300ms",opacity:0},children:"More than just coffee, it's a revolution in your daily ritual."})]})]}),l.jsx("section",{className:"px-6 py-20",children:l.jsxs("div",{className:"container mx-auto grid max-w-7xl items-center gap-12 md:grid-cols-2",children:[l.jsxs("div",{className:"animate-fade-in-up",children:[l.jsx("h2",{className:"font-display text-3xl font-bold text-coffee-900 md:text-4xl",children:"Our Story"}),l.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Founded in 2023 by a group of passionate coffee aficionados and tech enthusiasts, Rush Coffee was born from a simple yet powerful idea: your coffee break should be a moment of joy, not a test of patience."}),l.jsx("p",{className:"mt-4 text-gray-600",children:"We saw the long lines, the rushed orders, and the precious minutes slipping away from people's days. Our mission became clear: to blend the rich tradition of artisanal coffee with the seamless efficiency of modern technology. We're not just serving coffee; we're giving you back your time, one perfectly brewed cup at a time."})]}),l.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:"200ms",opacity:0},children:l.jsx("img",{src:"/Menu/free-pastry-item.jpg",alt:"Inside Rush Coffee shop",className:"h-80 w-full rounded-lg object-cover shadow-xl"})})]})}),l.jsx("section",{className:"bg-gray-50 px-6 py-20",children:l.jsxs("div",{className:"container mx-auto max-w-7xl",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"font-display text-3xl font-bold text-coffee-900 md:text-4xl",children:"What We Stand For"}),l.jsx("p",{className:"mx-auto mt-4 max-w-2xl text-gray-600",children:"Our core values guide every bean we roast and every line of code we write."})]}),l.jsxs("div",{className:"mt-12 grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsxs(ve,{hover:!0,className:"text-center",children:[l.jsx(As,{className:"mx-auto mb-4 h-12 w-12 text-primary-600"}),l.jsx("h3",{className:"font-display text-xl font-semibold text-coffee-900",children:"Quality"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"From ethically sourced, premium beans to the perfect extraction, excellence is in every cup."})]}),l.jsxs(ve,{hover:!0,className:"text-center",children:[l.jsx(qz,{className:"mx-auto mb-4 h-12 w-12 text-primary-600"}),l.jsx("h3",{className:"font-display text-xl font-semibold text-coffee-900",children:"Speed"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Our digital queue system ensures your order is ready when you are. Fast, efficient, and always fresh."})]}),l.jsxs(ve,{hover:!0,className:"text-center",children:[l.jsx(Sp,{className:"mx-auto mb-4 h-12 w-12 text-primary-600"}),l.jsx("h3",{className:"font-display text-xl font-semibold text-coffee-900",children:"Community"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"We're more than a coffee shop; we're a hub for connection, creativity, and caffeine lovers."})]}),l.jsxs(ve,{hover:!0,className:"text-center",children:[l.jsx(Z9,{className:"mx-auto mb-4 h-12 w-12 text-primary-600"}),l.jsx("h3",{className:"font-display text-xl font-semibold text-coffee-900",children:"Innovation"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Continuously improving your experience by thoughtfully integrating technology with tradition."})]})]})]})}),l.jsx("section",{className:"bg-white px-6 py-20",children:l.jsx("div",{className:"container mx-auto max-w-7xl",children:l.jsxs("div",{className:"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsx(cm,{icon:Sp,value:1e4,label:"Happy Customers",suffix:"+"}),l.jsx(cm,{icon:As,value:5e4,label:"Coffees Served",suffix:"+"}),l.jsx(cm,{icon:bP,value:4.9,label:"Average Rating"}),l.jsx(cm,{icon:zz,value:5,label:"Minutes Average Wait"})]})})}),l.jsx("section",{className:"bg-gray-50 px-6 py-20",children:l.jsxs("div",{className:"container mx-auto grid max-w-7xl items-center gap-12 lg:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"font-display text-3xl font-bold text-coffee-900 md:text-4xl",children:"Visit Us"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Experience the Rush Coffee difference in person. We're ready to serve you."}),l.jsxs("ul",{className:"mt-6 space-y-4",children:[l.jsxs("li",{className:"flex items-start gap-4",children:[l.jsx(Lb,{className:"mt-1 h-6 w-6 flex-shrink-0 text-primary-600"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-coffee-900",children:"Address"}),l.jsx("p",{className:"text-gray-600",children:"123 Coffee Street, Malate, Manila, 1004 Metro Manila"})]})]}),l.jsxs("li",{className:"flex items-start gap-4",children:[l.jsx(Pg,{className:"mt-1 h-6 w-6 flex-shrink-0 text-primary-600"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-coffee-900",children:"Operating Hours"}),l.jsx("p",{className:"text-gray-600",children:"Monday - Friday: 7:00 AM - 8:00 PM"}),l.jsx("p",{className:"text-gray-600",children:"Saturday - Sunday: 8:00 AM - 6:00 PM"})]})]}),l.jsxs("li",{className:"flex items-start gap-4",children:[l.jsx(Vr,{className:"mt-1 h-6 w-6 flex-shrink-0 text-primary-600"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-coffee-900",children:"Contact"}),l.jsx("a",{href:"tel:+639171234567",className:"text-primary-600 transition hover:text-primary-700",children:"+63 917 123 4567"})]})]})]}),l.jsx(Ve,{size:"lg",className:"mt-8",children:"Get Directions"})]}),l.jsx("div",{className:"h-96 overflow-hidden rounded-lg shadow-xl",children:l.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gray-300 bg-cover bg-center",style:{backgroundImage:"url('/Coffee Based/coffee-jelly.jpg')"},children:l.jsx("span",{className:"rounded bg-white/80 px-4 py-2 font-semibold text-gray-700 backdrop-blur-sm",children:"[Google Maps Placeholder]"})})})]})}),l.jsxs("section",{className:"relative bg-gradient-to-r from-primary-600 via-coffee-600 to-primary-700 px-6 py-20",children:[l.jsx("div",{className:"absolute -left-1/4 -top-1/4 opacity-10",children:l.jsx(kt,{className:"h-64 w-64 animate-float text-white"})}),l.jsx("div",{className:"absolute -bottom-1/4 -right-1/4 opacity-10",children:l.jsx(kt,{className:"h-80 w-80 animate-float-delay text-white"})}),l.jsxs("div",{className:"relative z-10 mx-auto max-w-4xl text-center",children:[l.jsx("h2",{className:"font-display text-4xl font-bold text-white md:text-5xl",children:"Ready to Experience the Rush?"}),l.jsx("p",{className:"mb-8 mt-4 text-xl text-primary-100",children:"Join thousands of customers who've already skipped the line."}),l.jsx(Pe,{to:"/menu",children:l.jsxs(Ve,{size:"lg",className:"bg-white text-primary-600 transition-transform hover:scale-105 hover:bg-primary-50",children:["Order Now ",l.jsx(ec,{className:"ml-2 h-5 w-5"})]})})]})]})]}),l.jsx(Ct,{})]}),hse=[{question:"What are your operating hours?",answer:"We are open Monday to Friday from 7:00 AM to 8:00 PM, and Saturday to Sunday from 8:00 AM to 6:00 PM."},{question:"How does the digital queue system work?",answer:"Simply place your order through our app or website. You'll be added to our virtual queue and receive real-time updates on your order status, including your position and estimated wait time. You'll get a notification when it's ready for pickup!"},{question:"Can I customize my drink?",answer:"Absolutely! Most of our drinks can be customized. You can choose your milk, sweetness level, add extra shots, and more right from the order page."},{question:"Do you offer catering services for events?",answer:"Yes, we do! We offer a range of catering options for meetings, parties, and events. Please use the contact form and select 'Partnership' as the subject to discuss your needs with us."},{question:"How do I earn and redeem rewards points?",answer:"You earn points with every purchase made through your account. You can view your points balance and redeem available rewards on the 'Rewards' page in the app."}],fse=({question:t,answer:e,isOpen:n,onClick:s})=>l.jsxs("div",{className:"border-b border-gray-200",children:[l.jsxs("button",{onClick:s,className:"flex w-full items-center justify-between py-4 text-left text-lg font-medium text-gray-800 focus:outline-none",children:[l.jsx("span",{children:t}),l.jsx(Fh,{className:`h-6 w-6 transform transition-transform duration-300 ${n?"rotate-180":""}`})]}),l.jsx(hf,{children:n&&l.jsx(Gr.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:l.jsx("p",{className:"pb-4 text-gray-600",children:e})})})]}),um=({icon:t,title:e,children:n})=>l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"mt-1 flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-lg bg-primary-100",children:l.jsx(t,{className:"h-6 w-6 text-primary-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-display text-xl font-bold text-coffee-900",children:e}),n]})]}),mse=()=>{const[t,e]=S.useState(0),[n,s]=S.useState({name:"",email:"",phone:"",subject:"",message:""}),[r,i]=S.useState({}),[a,o]=S.useState(!1),[c,u]=S.useState(!1),h=()=>{const p={};return n.name.length<2&&(p.name="Name must be at least 2 characters."),/\S+@\S+\.\S+/.test(n.email)||(p.email="Please enter a valid email address."),n.subject||(p.subject="Please select a subject."),n.message.length<10&&(p.message="Message must be at least 10 characters."),i(p),Object.keys(p).length===0},f=p=>{p.preventDefault(),h()&&(o(!0),u(!1),setTimeout(()=>{o(!1),u(!0),s({name:"",email:"",phone:"",subject:"",message:""}),setTimeout(()=>u(!1),5e3)},1500))},m=p=>{s({...n,[p.target.name]:p.target.value})};return l.jsxs("div",{className:"bg-white",children:[l.jsx(Rt,{}),l.jsxs("main",{children:[l.jsxs("section",{className:"bg-gradient-to-br from-primary-50 to-coffee-50 px-6 py-20 text-center",children:[l.jsx("h1",{className:"font-display text-5xl font-bold text-coffee-900 md:text-6xl",children:"Get in Touch"}),l.jsx("p",{className:"mt-4 text-xl text-gray-700",children:"We're here to help and answer any question you might have."})]}),l.jsx("section",{className:"px-6 py-20",children:l.jsxs("div",{className:"container mx-auto grid max-w-7xl gap-12 lg:grid-cols-5",children:[l.jsx("div",{className:"lg:col-span-3",children:l.jsxs(ve,{className:"p-8",children:[l.jsx("h2",{className:"font-display text-3xl font-bold text-coffee-900",children:"Send us a Message"}),c&&l.jsxs("div",{className:"mt-4 flex items-center gap-2 rounded-lg bg-green-50 p-4 text-green-700",children:[l.jsx(Vb,{className:"h-5 w-5"}),l.jsx("p",{children:"Thanks for your message! We'll get back to you soon."})]}),l.jsxs("form",{onSubmit:f,className:"mt-6 space-y-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"name",className:"sr-only",children:"Name"}),l.jsx(Lr,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",name:"name",id:"name",value:n.name,onChange:m,placeholder:"Full Name",required:!0,className:"w-full rounded-md border-gray-300 py-3 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),r.name&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.name})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),l.jsx(sr,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"email",name:"email",id:"email",value:n.email,onChange:m,placeholder:"Email Address",required:!0,className:"w-full rounded-md border-gray-300 py-3 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),r.email&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.email})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"phone",className:"sr-only",children:"Phone"}),l.jsx(Vr,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"tel",name:"phone",id:"phone",value:n.phone,onChange:m,placeholder:"Phone Number (Optional)",className:"w-full rounded-md border-gray-300 py-3 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"subject",className:"sr-only",children:"Subject"}),l.jsx(z9,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),l.jsxs("select",{name:"subject",id:"subject",value:n.subject,onChange:m,required:!0,className:"w-full appearance-none rounded-md border-gray-300 bg-white py-3 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[l.jsx("option",{value:"",disabled:!0,children:"Select a subject..."}),l.jsx("option",{children:"General Inquiry"}),l.jsx("option",{children:"Feedback"}),l.jsx("option",{children:"Partnership"}),l.jsx("option",{children:"Support"})]}),r.subject&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.subject})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"message",className:"sr-only",children:"Message"}),l.jsx(Lc,{className:"absolute left-3 top-4 h-5 w-5 text-gray-400"}),l.jsx("textarea",{name:"message",id:"message",value:n.message,onChange:m,placeholder:"Your Message",rows:5,required:!0,className:"w-full rounded-md border-gray-300 py-3 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),r.message&&l.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.message})]}),l.jsxs(Ve,{type:"submit",size:"lg",disabled:a,className:"w-full",children:[a?l.jsx(_t,{className:"mr-2 h-5 w-5 animate-spin"}):l.jsx(zb,{className:"mr-2 h-5 w-5"}),a?"Sending...":"Send Message"]})]})]})}),l.jsxs("div",{className:"space-y-8 lg:col-span-2",children:[l.jsxs(um,{icon:Lb,title:"Visit Us",children:[l.jsx("p",{className:"mt-1 text-gray-600",children:"123 Coffee Street, Malate, Manila"}),l.jsx(Ve,{variant:"secondary",size:"sm",className:"mt-2",children:"Get Directions"})]}),l.jsxs(um,{icon:Vr,title:"Call Us",children:[l.jsx("a",{href:"tel:+639171234567",className:"mt-1 text-primary-600 transition hover:text-primary-700",children:"+63 917 123 4567"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Mon-Sun: 7AM - 8PM"})]}),l.jsxs(um,{icon:sr,title:"Email Us",children:[l.jsx("a",{href:"mailto:hello@rushcoffee.ph",className:"mt-1 text-primary-600 transition hover:text-primary-700",children:"hello@rushcoffee.ph"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Responds within 24 hours"})]}),l.jsx(um,{icon:Az,title:"Follow Us",children:l.jsxs("div",{className:"mt-2 flex gap-4",children:[l.jsx("a",{href:"#","aria-label":"Facebook",className:"text-gray-500 transition hover:text-primary-600",children:l.jsx(pP,{})}),l.jsx("a",{href:"#","aria-label":"Instagram",className:"text-gray-500 transition hover:text-primary-600",children:l.jsx(gP,{})}),l.jsx("a",{href:"#","aria-label":"Twitter",className:"text-gray-500 transition hover:text-primary-600",children:l.jsx(TP,{})})]})})]})]})}),l.jsx("section",{className:"bg-gray-50 px-6 py-20",children:l.jsxs("div",{className:"container mx-auto max-w-4xl",children:[l.jsx("h2",{className:"text-center font-display text-3xl font-bold text-coffee-900 md:text-4xl",children:"Frequently Asked Questions"}),l.jsx("div",{className:"mt-8",children:hse.map((p,_)=>l.jsx(fse,{...p,isOpen:t===_,onClick:()=>e(t===_?null:_)},_))})]})}),l.jsx("section",{children:l.jsx("div",{className:"h-96 w-full bg-gray-300 flex items-center justify-center",children:l.jsx("p",{className:"text-gray-600 font-semibold",children:"[Google Maps Embed Placeholder]"})})})]}),l.jsx(Ct,{})]})},H6=[{category:"Ordering & Queue",question:"How do I join the virtual queue?",answer:"Simply place an order through our website or app. You'll automatically join the queue and receive your position number."},{category:"Ordering & Queue",question:"Can I see my queue position in real-time?",answer:"Yes! Your queue page updates in real-time showing your current position and estimated wait time."},{category:"Ordering & Queue",question:"What happens if I miss my turn?",answer:"Don't worry! You have a 10-minute grace period to pick up your order once it's ready. After that, your order will be held for you, but you may need to wait briefly if we are busy."},{category:"Ordering & Queue",question:"Can I cancel my order?",answer:"Yes, you can cancel an order directly from your order history as long as its status is still 'waiting'. Once it moves to 'preparing', it can no longer be canceled. Refunds for successful cancellations are processed within 3-5 business days."},{category:"Payments",question:"What payment methods do you accept?",answer:"We currently accept GCash for pre-payment and cash on pickup. We are working on adding more digital payment options soon!"},{category:"Payments",question:"Is it safe to pay via GCash?",answer:"Absolutely! We use a secure payment process, and your payment information is encrypted and handled safely."},{category:"Payments",question:"Do I need to pay upfront?",answer:"For GCash payments, yes, payment is required upon placing the order. For cash payments, you can pay at the counter when you pick up your order."},{category:"Rewards",question:"How do I earn rewards points?",answer:"You earn points with every purchase made through your Rush Coffee account! The current rate is 1 point for every 10 spent. Keep an eye out for special promotions to earn bonus points."},{category:"Rewards",question:"When do my points expire?",answer:"Good news - your points never expire! You can save them up for as long as you like and redeem them for rewards whenever you're ready."},{category:"Rewards",question:"What are the tier benefits?",answer:"We have three tiers! Bronze (0-299pts): Earn 1x points. Silver (300-999pts): Earn 1.5x points and get access to exclusive silver rewards. Gold (1000+pts): Earn 2x points, get VIP perks, and early access to new items."},{category:"Account",question:"Do I need an account to order?",answer:"Yes, creating an account is necessary. It allows us to manage your orders in the queue, track your rewards points, and save your preferences for a faster checkout next time."},{category:"Account",question:"How do I reset my password?",answer:"On the login page, click the 'Forgot your password?' link. We'll send a password reset link to the email address associated with your account."},{category:"Account",question:"Can I change my email address?",answer:"To update the email address on your account, please contact our support team at hello@rushcoffee.ph, and we'll be happy to assist you."},{category:"Technical",question:"The website isn't working correctly. What should I do?",answer:"First, try refreshing the page. If that doesn't work, clearing your browser's cache and cookies often resolves the issue. If you're still experiencing problems, please contact our support team with details about the issue."},{category:"Technical",question:"Do you have a mobile app?",answer:"A dedicated mobile app for iOS and Android is currently in development and will be launching soon! For now, our website is fully responsive and works great on all mobile browsers."},{category:"General",question:"What are your operating hours?",answer:"We're open Monday to Sunday, from 7:00 AM to 10:00 PM. Hours may vary on public holidays."},{category:"General",question:"Do you offer WiFi in your store?",answer:"Yes, we offer complimentary high-speed WiFi for all our customers. Just ask our staff for the network details."},{category:"General",question:"Can I customize my drink?",answer:"Absolutely! You can customize aspects like milk type, sweetness level, add extra espresso shots, and choose from various syrups and toppings directly on the product page before adding an item to your cart."}],pse=["All",...Array.from(new Set(H6.map(t=>t.category)))],gse=({question:t,answer:e,isOpen:n,onClick:s,highlight:r})=>{const i=(a,o)=>{if(!o.trim())return a;const c=new RegExp(`(${o})`,"gi");return a.split(c).map((u,h)=>c.test(u)?l.jsx("mark",{className:"bg-primary-100 text-primary-700 rounded-sm",children:u},h):u)};return l.jsxs("div",{className:"border-b border-gray-200",children:[l.jsxs("button",{onClick:s,className:"flex w-full items-center justify-between py-5 text-left text-lg font-medium text-gray-800 focus:outline-none focus:bg-gray-50 rounded-md",children:[l.jsx("span",{className:"flex-1 pr-4",children:i(t,r)}),l.jsx(Fh,{className:`h-6 w-6 transform text-primary-600 transition-transform duration-300 ${n?"rotate-180":""}`})]}),l.jsx(hf,{children:n&&l.jsx(Gr.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:l.jsx("div",{className:"pb-5 pr-6 text-gray-600 leading-relaxed",children:i(e,r)})})})]})},yse=()=>{const[t,e]=S.useState(""),[n,s]=S.useState("All"),[r,i]=S.useState(0),a=S.useMemo(()=>H6.filter(o=>{const c=n==="All"||o.category===n,u=t.trim()===""||o.question.toLowerCase().includes(t.toLowerCase())||o.answer.toLowerCase().includes(t.toLowerCase());return c&&u}),[t,n]);return l.jsxs("div",{className:"bg-white",children:[l.jsx(Rt,{}),l.jsxs("main",{children:[l.jsx("section",{className:"bg-gradient-to-br from-primary-50 to-coffee-50 px-6 py-16",children:l.jsxs("div",{className:"container mx-auto max-w-4xl text-center",children:[l.jsx("h1",{className:"font-display text-5xl font-bold text-coffee-900 md:text-6xl",children:"Frequently Asked Questions"}),l.jsx("p",{className:"mt-4 text-xl text-gray-700",children:"Everything you need to know about Rush Coffee"}),l.jsxs("div",{className:"relative mx-auto mt-8 max-w-2xl",children:[l.jsx(Ep,{className:"absolute left-6 top-1/2 h-6 w-6 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"search",placeholder:"Search for answers...",value:t,onChange:o=>e(o.target.value),className:"w-full rounded-full border border-gray-300 bg-white py-4 pl-16 pr-6 text-lg shadow-sm focus:border-primary-500 focus:ring-2 focus:ring-primary-500"})]})]})}),l.jsx("div",{className:"sticky top-20 z-30 border-b border-gray-200 bg-white/95 py-3 backdrop-blur-sm",children:l.jsx("div",{className:"container mx-auto flex max-w-7xl gap-2 overflow-x-auto px-6 pb-2",children:pse.map(o=>l.jsx("button",{onClick:()=>s(o),className:`flex-shrink-0 rounded-full px-4 py-2 text-sm font-semibold transition-colors ${n===o?"bg-primary-600 text-white shadow":"border border-gray-300 bg-white text-gray-700 hover:bg-gray-100"}`,children:o},o))})}),l.jsx("section",{className:"px-6 py-16",children:l.jsx("div",{className:"container mx-auto max-w-4xl",children:a.length>0?l.jsxs("div",{children:[l.jsxs("p",{className:"mb-4 text-sm text-gray-500",children:[a.length," question(s) found"]}),a.map((o,c)=>l.jsx(gse,{question:o.question,answer:o.answer,isOpen:r===c,onClick:()=>i(r===c?null:c),highlight:t},`${o.category}-${c}`))]}):l.jsxs("div",{className:"py-20 text-center",children:[l.jsx(Ep,{className:"mx-auto h-16 w-16 text-gray-300"}),l.jsx("h3",{className:"mt-4 text-xl font-semibold text-gray-800",children:"No Results Found"}),l.jsxs("p",{className:"mt-2 text-gray-500",children:[`We couldn't find any answers for "`,t,'". Try a different search term or category.']})]})})}),l.jsx("section",{className:"bg-gray-50 px-6 py-20",children:l.jsx("div",{className:"container mx-auto max-w-4xl",children:l.jsxs(ve,{className:"text-center",children:[l.jsx(v9,{className:"mx-auto h-12 w-12 text-primary-600"}),l.jsx("h2",{className:"mt-4 font-display text-3xl font-bold text-coffee-900",children:"Still have questions?"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"If you can't find the answer you're looking for, please get in touch with our support team."}),l.jsx("div",{className:"mt-6 flex flex-col items-center justify-center gap-4 sm:flex-row",children:l.jsx(Pe,{to:"/contact",children:l.jsxs(Ve,{size:"lg",children:[l.jsx(cz,{className:"mr-2 h-5 w-5"}),"Contact Support"]})})})]})})})]}),l.jsx(Ct,{})]})},vse=({cartItems:t,isOpen:e,onClose:n,onUpdateQuantity:s,onRemoveItem:r,onCheckout:i})=>{const a=Ds(),o=t.reduce((h,f)=>h+f.quantity,0),c=t.reduce((h,f)=>h+f.selectedSize.price*f.quantity,0),u=()=>{n(),a("/menu")};return l.jsxs(l.Fragment,{children:[l.jsx("div",{onClick:n,className:`fixed inset-0 z-40 bg-black/50 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"}`,"aria-hidden":"true"}),l.jsx("aside",{className:`fixed top-0 right-0 z-50 h-full w-full transform bg-white shadow-2xl transition-transform duration-300 ease-in-out sm:w-96 md:w-[450px] ${e?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"cart-heading",children:l.jsxs("div",{className:"flex h-full flex-col",children:[l.jsxs("header",{className:"flex items-center justify-between border-b border-gray-200 p-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("h2",{id:"cart-heading",className:"font-display text-xl font-bold text-coffee-900",children:"Your Order"}),o>0&&l.jsxs(Xt,{children:[o," ",o===1?"item":"items"]})]}),l.jsx("button",{onClick:n,className:"rounded-md p-2 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-800","aria-label":"Close cart",children:l.jsx(Kr,{className:"h-6 w-6"})})]}),t.length===0?l.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-4 p-6 text-center",children:[l.jsx(kt,{className:"h-24 w-24 text-gray-300 opacity-50"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Your cart is empty"}),l.jsx("p",{className:"text-gray-500",children:"Looks like you haven't added anything yet."}),l.jsx("button",{onClick:u,className:"mt-4 rounded-full bg-primary-600 px-6 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-primary-700",children:"Start Ordering"})]}):l.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:l.jsx("ul",{className:"-my-4 divide-y divide-gray-200",children:t.map(h=>{const f=h.selectedSize.name==="Combo Meal",m=f?`${h.product.name} (${h.selectedSize.name})`:h.product.name,p=f&&h.product.comboImageUrl?h.product.comboImageUrl:h.product.imageUrl;return l.jsxs("li",{className:"relative flex items-center gap-4 py-4",children:[l.jsx("div",{className:"h-16 w-16 flex-shrink-0 overflow-hidden rounded-md border border-gray-200",children:l.jsx("img",{src:p,alt:m,className:"h-full w-full object-cover object-center"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-gray-800",children:m}),l.jsxs("p",{className:"text-sm text-gray-500",children:[h.selectedSize.size," - ",h.selectedSize.price.toFixed(2)]}),l.jsxs("div",{className:"mt-2 flex items-center",children:[l.jsx("button",{onClick:()=>s(h.id,h.quantity-1),disabled:h.quantity===1,className:"flex h-8 w-8 items-center justify-center rounded-full border border-gray-300 text-gray-600 transition hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50","aria-label":`Decrease quantity of ${m}`,children:l.jsx(vP,{className:"h-4 w-4"})}),l.jsx("span",{className:"w-12 text-center font-semibold text-gray-800","aria-live":"polite",children:h.quantity}),l.jsx("button",{onClick:()=>s(h.id,h.quantity+1),className:"flex h-8 w-8 items-center justify-center rounded-full border border-gray-300 text-gray-600 transition hover:bg-gray-100","aria-label":`Increase quantity of ${m}`,children:l.jsx(Bh,{className:"h-4 w-4"})})]})]}),l.jsxs("p",{className:"font-semibold text-gray-900",children:["",(h.selectedSize.price*h.quantity).toFixed(2)]}),l.jsx("button",{onClick:()=>r(h.id),className:"absolute top-4 right-0 p-1 text-gray-400 transition-colors hover:text-red-600","aria-label":`Remove ${m} from cart`,children:l.jsx(kg,{className:"h-5 w-5"})})]},h.id)})})}),t.length>0&&l.jsxs("footer",{className:"mt-auto border-t border-gray-200 p-6",children:[l.jsxs("div",{className:"flex items-center justify-between text-lg font-semibold text-gray-900",children:[l.jsx("span",{children:"Subtotal"}),l.jsxs("span",{children:["",c.toFixed(2)]})]}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Taxes and service fee calculated at checkout."}),l.jsx("div",{className:"mt-6",children:l.jsxs("button",{onClick:i,disabled:t.length===0,className:"flex w-full items-center justify-center gap-2 rounded-full bg-primary-600 px-6 py-3 text-base font-semibold text-white shadow-sm transition-colors hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-gray-400",children:["Proceed to Checkout",l.jsx(ec,{className:"h-5 w-5"})]})})]})]})})]})},xse=()=>{const{pathname:t}=ks();return S.useEffect(()=>{window.scrollTo(0,0)},[t]),null},_se=()=>{const{currentUser:t,loading:e}=ts(),n=ks();return e?l.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-gray-50",children:l.jsx(_t,{className:"h-12 w-12 animate-spin text-primary-600"})}):t?t.role!=="admin"?l.jsx(QS,{to:"/",replace:!0}):l.jsx(aP,{}):l.jsx(QS,{to:"/auth/login",state:{from:n},replace:!0})},bse=()=>l.jsxs("div",{children:[l.jsx("h1",{className:"mb-6 font-display text-3xl font-bold text-gray-800",children:"Admin Dashboard"}),l.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsxs(ve,{className:"flex items-center gap-4 p-6",children:[l.jsx("div",{className:"rounded-full bg-blue-100 p-3",children:l.jsx(P9,{className:"h-6 w-6 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),l.jsx("p",{className:"text-2xl font-bold text-gray-800",children:"12,450.00"})]})]}),l.jsxs(ve,{className:"flex items-center gap-4 p-6",children:[l.jsx("div",{className:"rounded-full bg-green-100 p-3",children:l.jsx(As,{className:"h-6 w-6 text-green-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Orders Today"}),l.jsx("p",{className:"text-2xl font-bold text-gray-800",children:"78"})]})]}),l.jsxs(ve,{className:"flex items-center gap-4 p-6",children:[l.jsx("div",{className:"rounded-full bg-yellow-100 p-3",children:l.jsx(Sp,{className:"h-6 w-6 text-yellow-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"New Customers"}),l.jsx("p",{className:"text-2xl font-bold text-gray-800",children:"12"})]})]}),l.jsxs(ve,{className:"flex items-center gap-4 p-6",children:[l.jsx("div",{className:"rounded-full bg-purple-100 p-3",children:l.jsx(l9,{className:"h-6 w-6 text-purple-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-500",children:"Pending Orders"}),l.jsx("p",{className:"text-2xl font-bold text-gray-800",children:"5"})]})]})]}),l.jsx("div",{className:"mt-8",children:l.jsxs(ve,{children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Sales Overview"}),l.jsx("div",{className:"mt-4 flex h-64 items-center justify-center bg-gray-100",children:l.jsx("p",{className:"text-gray-500",children:"[Chart Placeholder]"})})]})})]}),wse={waiting:{text:"Start Preparing",nextStatus:"preparing",color:"bg-blue-500 hover:bg-blue-600"},preparing:{text:"Mark as Ready",nextStatus:"ready",color:"bg-green-500 hover:bg-green-600"},ready:{text:"Complete Order",nextStatus:"completed",color:"bg-primary-600 hover:bg-primary-700"}},Tse=({order:t,onUpdateStatus:e})=>{const n=wse[t.status],s=Cy(t.timestamp,{addSuffix:!0});return l.jsxs("div",{className:"rounded-lg border bg-white p-4 shadow-sm transition-shadow hover:shadow-md",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"font-mono text-sm font-bold text-primary-700",children:t.orderNumber}),l.jsxs("p",{className:"font-display text-lg font-bold text-gray-800",children:["",t.totalAmount.toFixed(2)]})]}),l.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Lr,{className:"h-4 w-4"}),l.jsx("span",{children:t.customerName})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Pg,{className:"h-4 w-4"}),l.jsx("span",{children:s})]})]}),l.jsx("div",{className:"mt-3 border-t pt-2",children:l.jsx("ul",{className:"text-xs text-gray-500",children:t.orderItems.map((r,i)=>l.jsxs("li",{children:[r.quantity,"x ",r.productName]},i))})}),n&&l.jsxs("button",{onClick:()=>e(t.id,n.nextStatus),className:`mt-4 flex w-full items-center justify-center gap-2 rounded-full px-4 py-2 text-sm font-semibold text-white shadow-sm transition-colors ${n.color}`,children:[l.jsx("span",{children:n.text}),n.nextStatus==="completed"?l.jsx(Yi,{className:"h-4 w-4"}):l.jsx(ec,{className:"h-4 w-4"})]})]})},Ese={yellow:"border-yellow-400",blue:"border-blue-400",green:"border-green-400"},wv=({title:t,orders:e,onUpdateStatus:n,color:s})=>l.jsxs("div",{className:"flex flex-col rounded-lg bg-gray-100 p-4",children:[l.jsxs("h2",{className:`mb-4 border-b-4 pb-2 font-display text-xl font-bold text-gray-700 ${Ese[s]}`,children:[t," ",l.jsxs("span",{className:"text-base font-medium text-gray-500",children:["(",e.length,")"]})]}),l.jsxs("div",{className:"flex-grow space-y-4 overflow-y-auto",children:[l.jsx(hf,{children:e.map(r=>l.jsx(Gr.div,{layout:!0,initial:{opacity:0,y:50,scale:.3},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.5,transition:{duration:.2}},children:l.jsx(Tse,{order:r,onUpdateStatus:n})},r.id))}),e.length===0&&l.jsx("div",{className:"flex h-32 items-center justify-center text-sm text-gray-500",children:"No orders in this stage."})]})]}),Sse=()=>{const[t,e]=S.useState([]),[n,s]=S.useState(!0),{showToast:r}=Dn();S.useEffect(()=>{const h=_e.collection("orders").where("status","in",["waiting","preparing","ready"]).onSnapshot(f=>{const m=[];f.forEach(p=>{m.push({id:p.id,...p.data(),timestamp:p.data().timestamp.toDate()})}),m.sort((p,_)=>p.timestamp.getTime()-_.timestamp.getTime()),e(m),s(!1)},f=>{console.error("Error fetching real-time orders: ",f),s(!1)});return()=>h()},[]);const i=async(u,h)=>{try{await _e.runTransaction(async f=>{const m=_e.collection("orders").doc(u),p=await f.get(m);if(!p.exists)throw new Error("Order does not exist!");const _=p.data(),w=_.status;if(w==="waiting"&&h==="preparing")for(const T of _.orderItems){const x=_e.collection("products").doc(T.productId),v=await f.get(x);if(v.exists&&v.data().recipe)for(const b of v.data().recipe){const R=_e.collection("ingredients").doc(b.ingredientId),D=b.quantity*T.quantity,M=await f.get(R);if(!M.exists)throw new Error(`Ingredient '${b.ingredientId}' not found.`);if(M.data().stock<D)throw new Error(`Insufficient stock for '${M.data().name}'.`);f.update(R,{stock:Me.firestore.FieldValue.increment(-D)})}}if(h==="completed"&&w!=="completed"){const T=_e.collection("users").doc(_.userId),x=await f.get(T);if(x.exists){const v=x.data();let b=0;for(const N of _.orderItems)N.productName.includes("(Grande)")?b+=4*N.quantity:N.productName.includes("(Venti)")&&(b+=5*N.quantity);let R=1;v.tier==="silver"&&(R=1.5),v.tier==="gold"&&(R=2);const D=Math.floor(b*R),M=v.lifetimePoints+D;let A=v.tier;A==="bronze"&&M>=I_.silver.min&&(A="silver"),A==="silver"&&M>=I_.gold.min&&(A="gold");const E={id:`rh-${Date.now()}`,type:"earned",points:D,description:`Order #${_.orderNumber}`,date:new Date};f.update(T,{totalOrders:Me.firestore.FieldValue.increment(1),totalSpent:Me.firestore.FieldValue.increment(_.totalAmount),currentPoints:Me.firestore.FieldValue.increment(D),lifetimePoints:Me.firestore.FieldValue.increment(D),tier:A,rewardsHistory:Me.firestore.FieldValue.arrayUnion(E)})}}f.update(m,{status:h})})}catch(f){console.error("Error updating order status and stock: ",f),r(f.message||"Failed to update order. Please check inventory.")}},a=S.useMemo(()=>t.filter(u=>u.status==="waiting"),[t]),o=S.useMemo(()=>t.filter(u=>u.status==="preparing"),[t]),c=S.useMemo(()=>t.filter(u=>u.status==="ready"),[t]);return n?l.jsx("div",{className:"flex h-full items-center justify-center",children:l.jsx(_t,{className:"h-12 w-12 animate-spin text-primary-600"})}):l.jsxs("div",{children:[l.jsx("h1",{className:"mb-6 font-display text-3xl font-bold text-gray-800",children:"Live Order Queue"}),t.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border-2 border-dashed bg-gray-50 p-12 text-center",children:[l.jsx(As,{className:"h-16 w-16 text-gray-400"}),l.jsx("h2",{className:"mt-4 text-xl font-semibold text-gray-700",children:"No Active Orders"}),l.jsx("p",{className:"mt-1 text-gray-500",children:"New orders will appear here in real-time."})]}):l.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[l.jsx(wv,{title:"Waiting",orders:a,onUpdateStatus:i,color:"yellow"}),l.jsx(wv,{title:"Preparing",orders:o,onUpdateStatus:i,color:"blue"}),l.jsx(wv,{title:"Ready for Pickup",orders:c,onUpdateStatus:i,color:"green"})]})]})},Ase=[{to:"/admin",text:"Dashboard",icon:X9},{to:"/admin/queue",text:"Queue Management",icon:E9},{to:"/admin/inventory",text:"Inventory",icon:fz},{to:"/admin/products",text:"Products",icon:As},{to:"/admin/feedback",text:"Feedback",icon:Lc},{to:"/admin/analytics",text:"Analytics",icon:mP},{to:"/admin/settings",text:"Settings",icon:Fb}],Nse=()=>l.jsxs("div",{className:"flex h-screen bg-gray-100",children:[l.jsxs("aside",{className:"hidden w-64 flex-shrink-0 bg-gray-800 p-4 text-white md:flex md:flex-col",children:[l.jsxs("div",{className:"mb-8 flex items-center gap-2 px-2",children:[l.jsx(kt,{className:"h-8 w-8 text-primary-400"}),l.jsx("span",{className:"text-xl font-bold text-white",children:"Admin Panel"})]}),l.jsx("nav",{className:"flex-grow",children:l.jsx("ul",{children:Ase.map(({to:t,text:e,icon:n})=>l.jsx("li",{children:l.jsxs(rs,{to:t,end:t==="/admin",className:({isActive:s})=>`flex items-center gap-3 rounded-md px-3 py-2 transition-colors ${s?"bg-primary-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:[l.jsx(n,{className:"h-5 w-5"}),l.jsx("span",{children:e})]})},t))})}),l.jsx("div",{className:"mt-auto text-center text-xs text-gray-400",children:l.jsxs("p",{children:[" ",new Date().getFullYear()," Rush Coffee"]})})]}),l.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[l.jsx("header",{className:"border-b bg-white shadow-sm",children:l.jsxs("div",{className:"flex h-16 items-center justify-between px-6",children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"Dashboard"}),l.jsx("div",{})]})}),l.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:l.jsx(aP,{})})]})]}),Ise=({ingredient:t,onClose:e,onUpdate:n})=>{const[s,r]=S.useState("add"),[i,a]=S.useState(""),o=c=>{c.preventDefault(),typeof i=="number"&&i>=0&&n(t.id,i,s)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:e,children:l.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white p-6 shadow-xl",onClick:c=>c.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h2",{className:"font-display text-xl font-bold text-gray-800",children:["Update Stock: ",t.name]}),l.jsx("button",{onClick:e,className:"rounded-full p-1 text-gray-500 hover:bg-gray-100",children:l.jsx(Kr,{})})]}),l.jsx("div",{className:"mt-4 text-sm",children:l.jsxs("p",{children:["Current Stock: ",l.jsxs("span",{className:"font-bold",children:[t.stock.toLocaleString()," ",t.unit]})]})}),l.jsxs("form",{onSubmit:o,className:"mt-6",children:[l.jsxs("div",{className:"flex gap-2 rounded-full bg-gray-100 p-1",children:[l.jsx("button",{type:"button",onClick:()=>r("add"),className:`w-full rounded-full py-2 text-sm font-semibold transition-colors ${s==="add"?"bg-primary-600 text-white shadow":"text-gray-600 hover:bg-primary-50"}`,children:"Add Stock"}),l.jsx("button",{type:"button",onClick:()=>r("set"),className:`w-full rounded-full py-2 text-sm font-semibold transition-colors ${s==="set"?"bg-primary-600 text-white shadow":"text-gray-600 hover:bg-primary-50"}`,children:"Set New Total"})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700",children:s==="add"?`Amount to Add (${t.unit})`:`New Total Stock (${t.unit})`}),l.jsx("input",{type:"number",id:"amount",value:i,onChange:c=>a(c.target.value===""?"":Number(c.target.value)),min:"0",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",required:!0,autoFocus:!0})]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:e,className:"rounded-full bg-gray-200 px-4 py-2 text-sm font-semibold text-gray-800 hover:bg-gray-300",children:"Cancel"}),l.jsxs("button",{type:"submit",className:"flex items-center gap-2 rounded-full bg-primary-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primary-700 disabled:bg-primary-400",disabled:i===""||i<0,children:[l.jsx(Ub,{className:"h-4 w-4"}),"Update Stock"]})]})]})]})})},Rse=[{name:"Espresso Shot",stock:1e3,unit:"pcs",lowStockThreshold:100},{name:"Milk",stock:2e4,unit:"ml",lowStockThreshold:2e3},{name:"Condensed Milk",stock:5e3,unit:"ml",lowStockThreshold:500},{name:"Coffee Beans (Blend)",stock:1e4,unit:"g",lowStockThreshold:1e3},{name:"Hot Water",stock:99999,unit:"ml",lowStockThreshold:1e4},{name:"Chocolate Sauce",stock:3e3,unit:"ml",lowStockThreshold:300},{name:"Caramel Sauce",stock:3e3,unit:"ml",lowStockThreshold:300},{name:"Matcha Powder",stock:2e3,unit:"g",lowStockThreshold:200}],Cse=()=>{const[t,e]=S.useState([]),[n,s]=S.useState(!0),[r,i]=S.useState(!1),[a,o]=S.useState(null);S.useEffect(()=>{const m=async()=>{const _=_e.collection("ingredients");if((await _.get()).empty){console.log("Seeding ingredients...");const v=Rse.map(b=>_.add(b));await Promise.all(v)}return _e.collection("ingredients").orderBy("name","asc").onSnapshot(v=>{const b=[];v.forEach(R=>{b.push({id:R.id,...R.data()})}),e(b),s(!1)},v=>{console.error("Error fetching inventory: ",v),s(!1)})};let p;return m().then(_=>{_&&(p=_)}),()=>{p&&p()}},[]);const c=m=>{o(m),i(!0)},u=()=>{i(!1),o(null)},h=async(m,p,_)=>{const w=_e.collection("ingredients").doc(m);try{_==="add"?await w.update({stock:Me.firestore.FieldValue.increment(p)}):await w.update({stock:p}),u()}catch(T){console.error("Error updating stock: ",T)}},f=m=>m.stock<=0?{text:"Out of Stock",color:"text-red-600",Icon:_9}:m.stock<=m.lowStockThreshold?{text:"Low Stock",color:"text-yellow-600",Icon:wP}:{text:"In Stock",color:"text-green-600",Icon:Vb};return n?l.jsx("div",{className:"flex h-full items-center justify-center",children:l.jsx(_t,{className:"h-12 w-12 animate-spin text-primary-600"})}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h1",{className:"font-display text-3xl font-bold text-gray-800",children:"Inventory Management"}),l.jsxs("button",{className:"flex items-center gap-2 rounded-full bg-primary-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-primary-700",children:[l.jsx(Bh,{className:"h-4 w-4"}),"Add Ingredient"]})]}),l.jsx("div",{className:"overflow-x-auto rounded-lg border bg-white shadow-sm",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Ingredient"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Current Stock"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Status"}),l.jsx("th",{scope:"col",className:"relative px-6 py-3",children:l.jsx("span",{className:"sr-only",children:"Edit"})})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:t.map(m=>{const p=f(m);return l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.name})}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:l.jsxs("div",{className:"text-sm text-gray-900",children:[m.stock.toLocaleString()," ",l.jsx("span",{className:"text-gray-500",children:m.unit})]})}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:l.jsxs("div",{className:`inline-flex items-center gap-1 text-sm font-semibold ${p.color}`,children:[l.jsx(p.Icon,{className:"h-4 w-4"}),p.text]})}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right text-sm font-medium",children:l.jsx("button",{onClick:()=>c(m),className:"text-primary-600 hover:text-primary-800",children:"Update Stock"})})]},m.id)})})]})}),r&&a&&l.jsx(Ise,{ingredient:a,onClose:u,onUpdate:h})]})},K2={name:"",description:"",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:0},{name:"Venti",size:"22oz",price:0}],imageUrl:"",available:!0,stock:0,popular:!1,new:!1,displayOrder:99,recipe:[]},jse=({isOpen:t,onClose:e,productToEdit:n})=>{var E,N;const[s,r]=S.useState(K2),[i,a]=S.useState([]),[o,c]=S.useState(!1),{addProduct:u,updateProduct:h}=Jc(),{showToast:f}=Dn(),[m,p]=S.useState(null),[_,w]=S.useState(null),T=S.useRef(null);S.useEffect(()=>{t&&(async()=>{const k=(await _e.collection("ingredients").get()).docs.map(j=>({id:j.id,...j.data()}));a(k)})()},[t]),S.useEffect(()=>{n?(r(n),w(n.imageUrl)):(r(K2),w(null)),p(null)},[n,t]);const x=I=>{if(I.target.files&&I.target.files[0]){const P=I.target.files[0];if(P.size>2*1024*1024){f("Image file should be less than 2MB.");return}p(P);const k=URL.createObjectURL(P);w(k)}},v=I=>{const{name:P,value:k,type:j}=I.target,W=I.target.checked;r(ue=>({...ue,[P]:j==="checkbox"?W:k}))},b=(I,P)=>{r(k=>({...k,sizes:k.sizes.map(j=>j.name===I?{...j,price:P}:j)}))},R=(I,P,k)=>{const j=[...s.recipe||[]];j[I][P]=k,r(W=>({...W,recipe:j}))},D=()=>{const I=[...s.recipe||[],{ingredientId:"",quantity:0}];r(P=>({...P,recipe:I}))},M=I=>{const P=[...s.recipe||[]];P.splice(I,1),r(k=>({...k,recipe:P}))},A=async I=>{I.preventDefault(),c(!0);let P=s.imageUrl;if(m)try{P=await(await jQ.ref(`product_images/${Date.now()}-${m.name}`).put(m)).ref.getDownloadURL()}catch(j){console.error("Error uploading image:",j),f("Failed to upload image. Please try again."),c(!1);return}const k={...s,imageUrl:P};try{if(n){const{id:j,...W}={...k,id:n.id};await h(j,W),f("Product updated successfully!")}else await u(k),f("Product added successfully!");e()}catch(j){console.error(j),f("An error occurred. Please try again.")}finally{c(!1)}};return l.jsx(Nc,{isOpen:t,onClose:e,title:n?"Edit Product":"Add New Product",size:"lg",children:l.jsxs("form",{onSubmit:A,className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),l.jsx("input",{type:"text",name:"name",id:"name",value:s.name,onChange:v,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category"}),l.jsxs("select",{name:"category",id:"category",value:s.category,onChange:v,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",children:[l.jsx("option",{children:"Coffee Based"}),l.jsx("option",{children:"Non-Coffee Based"}),l.jsx("option",{children:"Matcha Series"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),l.jsx("textarea",{name:"description",id:"description",value:s.description,onChange:v,rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product Image"}),l.jsxs("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md cursor-pointer hover:border-primary-500 bg-gray-50",onClick:()=>{var I;return(I=T.current)==null?void 0:I.click()},children:[l.jsx("input",{ref:T,id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:"image/png, image/jpeg",onChange:x}),_?l.jsx("img",{src:_,alt:"Product preview",className:"max-h-40 rounded-lg object-contain"}):l.jsxs("div",{className:"space-y-1 text-center",children:[l.jsx(H9,{className:"mx-auto h-12 w-12 text-gray-400"}),l.jsxs("p",{className:"text-sm text-gray-600",children:[l.jsx("span",{className:"font-medium text-primary-600",children:"Click to upload"})," or drag and drop"]}),l.jsx("p",{className:"text-xs text-gray-500",children:"PNG or JPG up to 2MB"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Grande Price ()"}),l.jsx("input",{type:"number",value:(E=s.sizes.find(I=>I.name==="Grande"))==null?void 0:E.price,onChange:I=>b("Grande",+I.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Venti Price ()"}),l.jsx("input",{type:"number",value:(N=s.sizes.find(I=>I.name==="Venti"))==null?void 0:N.price,onChange:I=>b("Venti",+I.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"stock",className:"block text-sm font-medium text-gray-700",children:"Stock"}),l.jsx("input",{type:"number",name:"stock",id:"stock",value:s.stock,onChange:I=>r(P=>({...P,stock:+I.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"displayOrder",className:"block text-sm font-medium text-gray-700",children:"Display Order"}),l.jsx("input",{type:"number",name:"displayOrder",id:"displayOrder",value:s.displayOrder,onChange:I=>r(P=>({...P,displayOrder:+I.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]}),l.jsxs("div",{className:"flex items-center space-x-6",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",name:"available",checked:s.available,onChange:v,className:"h-4 w-4 rounded"}),l.jsx("label",{className:"ml-2 text-sm",children:"Available"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",name:"popular",checked:s.popular,onChange:v,className:"h-4 w-4 rounded"}),l.jsx("label",{className:"ml-2 text-sm",children:"Popular"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",name:"new",checked:s.new,onChange:v,className:"h-4 w-4 rounded"}),l.jsx("label",{className:"ml-2 text-sm",children:"New"})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-md font-medium text-gray-800",children:"Recipe"}),l.jsxs("div",{className:"mt-2 space-y-2 rounded-md border bg-gray-50 p-3",children:[(s.recipe||[]).map((I,P)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:I.ingredientId,onChange:k=>R(P,"ingredientId",k.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm",children:[l.jsx("option",{value:"",disabled:!0,children:"Select Ingredient"}),i.map(k=>l.jsx("option",{value:k.id,children:k.name},k.id))]}),l.jsx("input",{type:"number",value:I.quantity,onChange:k=>R(P,"quantity",+k.target.value),className:"block w-32 rounded-md border-gray-300 shadow-sm",placeholder:"Qty"}),l.jsx(Ve,{type:"button",variant:"ghost",size:"sm",onClick:()=>M(P),className:"px-2",children:l.jsx(kg,{className:"h-4 w-4 text-red-500"})})]},P)),l.jsxs(Ve,{type:"button",variant:"secondary",size:"sm",onClick:D,children:[l.jsx(Bh,{className:"mr-1 h-4 w-4"}),"Add Ingredient"]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx(Ve,{type:"button",variant:"ghost",onClick:e,children:"Cancel"}),l.jsxs(Ve,{type:"submit",disabled:o,children:[o?l.jsx(_t,{className:"mr-2 h-4 w-4 animate-spin"}):l.jsx(Ub,{className:"mr-2 h-4 w-4"}),n?"Save Changes":"Add Product"]})]})]})})},Pse=()=>{const{products:t,isLoading:e,error:n,deleteProduct:s}=Jc(),[r,i]=S.useState(!1),[a,o]=S.useState(null),{showToast:c}=Dn(),u=(m=null)=>{o(m),i(!0)},h=()=>{i(!1),o(null)},f=async(m,p)=>{if(window.confirm(`Are you sure you want to delete "${p}"? This action cannot be undone.`))try{await s(m),c(`"${p}" has been deleted.`)}catch{c(`Failed to delete "${p}".`)}};return e?l.jsx("div",{className:"flex h-full items-center justify-center",children:l.jsx(_t,{className:"h-12 w-12 animate-spin text-primary-600"})}):n?l.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border border-red-200 bg-red-50 py-20 text-center text-red-700",children:[l.jsx(ha,{className:"h-16 w-16"}),l.jsx("h3",{className:"mt-4 text-xl font-semibold",children:"Oops! Something went wrong."}),l.jsx("p",{className:"mt-2",children:n})]}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h1",{className:"font-display text-3xl font-bold text-gray-800",children:"Product Management"}),l.jsxs("button",{onClick:()=>u(),className:"flex items-center gap-2 rounded-full bg-primary-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-primary-700",children:[l.jsx(Bh,{className:"h-4 w-4"}),"Add New Product"]})]}),l.jsx("div",{className:"overflow-x-auto rounded-lg border bg-white shadow-sm",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Product"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Category"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Price (G/V)"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Stock"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Status"}),l.jsx("th",{scope:"col",className:"relative px-6 py-3",children:l.jsx("span",{className:"sr-only",children:"Actions"})})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:t.map(m=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:l.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:m.imageUrl,alt:m.name})}),l.jsx("div",{className:"ml-4",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.name})})]})}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:m.category}),l.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:["",m.sizes[0].price.toFixed(2)," / ",m.sizes[1].price.toFixed(2)]}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:m.stock}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:m.available?l.jsx("span",{className:"inline-flex rounded-full bg-green-100 px-2 text-xs font-semibold leading-5 text-green-800",children:"Available"}):l.jsx("span",{className:"inline-flex rounded-full bg-red-100 px-2 text-xs font-semibold leading-5 text-red-800",children:"Unavailable"})}),l.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-right text-sm font-medium",children:[l.jsx("button",{onClick:()=>u(m),className:"p-1 text-primary-600 hover:text-primary-800",children:l.jsx(_P,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>f(m.id,m.name),className:"ml-2 p-1 text-red-600 hover:text-red-800",children:l.jsx(kg,{className:"h-4 w-4"})})]})]},m.id))})]})}),l.jsx(jse,{isOpen:r,onClose:h,productToEdit:a})]})},kse=()=>l.jsxs("div",{children:[l.jsx("h1",{className:"mb-6 font-display text-3xl font-bold text-gray-800",children:"Analytics & Reports"}),l.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border-2 border-dashed bg-gray-50 p-12 text-center",children:[l.jsx(mP,{className:"h-16 w-16 text-gray-400"}),l.jsx("h2",{className:"mt-4 text-xl font-semibold text-gray-700",children:"Coming Soon"}),l.jsx("p",{className:"mt-1 text-gray-500",children:"This is where you'll find detailed charts and reports on sales, customers, and product performance."})]})]}),Dse={pending:"bg-yellow-100 text-yellow-800",reviewed:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800"},Mse=({feedback:t,onRespond:e})=>{const n=t.user?`${t.user.firstName} ${t.user.lastName}`:`User ${t.userId.substring(0,6)}`;return l.jsxs("div",{className:"flex flex-col rounded-lg border bg-white p-4 shadow-sm transition-shadow hover:shadow-md",children:[l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:n}),l.jsx("p",{className:"text-xs text-gray-500",children:t.createdAt?Cy(t.createdAt,{addSuffix:!0}):"Just now"})]}),l.jsx(Xt,{className:`capitalize ${Dse[t.status]}`,children:t.status})]}),l.jsx("div",{className:"my-3 flex justify-start",children:l.jsx(cg,{rating:t.rating,readonly:!0,size:"sm"})}),l.jsxs("p",{className:"flex-grow text-sm text-gray-600 line-clamp-3",children:['"',t.comment,'"']}),l.jsx("div",{className:"mt-4 border-t pt-3",children:l.jsx("button",{onClick:e,className:"w-full rounded-full bg-primary-100 px-4 py-2 text-sm font-semibold text-primary-700 transition-colors hover:bg-primary-200",children:"View & Respond"})})]})},Ose=({isOpen:t,onClose:e,feedback:n})=>{const[s,r]=S.useState(n.response||""),[i,a]=S.useState(n.status),[o,c]=S.useState(!1);S.useEffect(()=>{t&&(r(n.response||""),a(n.status))},[t,n]);const u=async f=>{f.preventDefault(),c(!0);try{await _e.collection("feedback").doc(n.id).update({response:s,status:i,updatedAt:Me.firestore.FieldValue.serverTimestamp()}),e()}catch(m){console.error("Error updating feedback: ",m)}finally{c(!1)}},h=n.user?`${n.user.firstName} ${n.user.lastName}`:`User ID: ${n.userId}`;return l.jsx(Nc,{isOpen:t,onClose:e,title:`Feedback from ${h}`,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-500",children:"Rating"}),l.jsx(cg,{rating:n.rating,readonly:!0})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-gray-500",children:"Comment"}),l.jsx("p",{className:"mt-1 max-h-40 overflow-y-auto rounded-md bg-gray-50 p-3 text-gray-700 whitespace-pre-wrap",children:n.comment})]}),l.jsxs("form",{onSubmit:u,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"response",className:"block text-sm font-medium text-gray-700",children:"Your Response"}),l.jsx("textarea",{id:"response",value:s,onChange:f=>r(f.target.value),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"Write a response to the customer..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Update Status"}),l.jsx("div",{className:"mt-2 flex gap-2 rounded-full bg-gray-100 p-1",children:["pending","reviewed","resolved"].map(f=>l.jsx("button",{type:"button",onClick:()=>a(f),className:`w-full rounded-full py-1.5 text-sm font-semibold capitalize transition-colors ${i===f?"bg-primary-600 text-white shadow":"text-gray-600 hover:bg-primary-50"}`,children:f},f))})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx(Ve,{type:"button",variant:"ghost",onClick:e,children:"Cancel"}),l.jsxs(Ve,{type:"submit",disabled:o,children:[o?l.jsx(_t,{className:"mr-2 h-4 w-4 animate-spin"}):l.jsx(zb,{className:"mr-2 h-4 w-4"}),"Save Response"]})]})]})]})})},Vse=()=>{const[t,e]=S.useState([]),[n,s]=S.useState(!0),[r,i]=S.useState("pending"),[a,o]=S.useState(!1),[c,u]=S.useState(null);S.useEffect(()=>{const p=new Map,_=async()=>{if(p.size>0)return p;const x=Qp(_e,"users");return(await I4(x)).forEach(b=>{const R=b.data();p.set(b.id,{firstName:R.firstName,lastName:R.lastName,email:R.email})}),p},w=mr(Qp(_e,"feedback"),w4("createdAt","desc")),T=I1(w,async x=>{const v=await _(),b=[];x.forEach(R=>{var M,A;const D=R.data();b.push({id:R.id,...D,createdAt:(M=D.createdAt)==null?void 0:M.toDate(),updatedAt:(A=D.updatedAt)==null?void 0:A.toDate(),user:v.get(D.userId)})}),e(b),s(!1)},x=>{console.error("Error fetching feedback: ",x),s(!1)});return()=>T()},[]);const h=S.useMemo(()=>r==="all"?t:t.filter(p=>p.status===r),[r,t]),f=p=>{u(p),o(!0)},m=()=>{o(!1),u(null)};return n?l.jsx("div",{className:"flex h-full items-center justify-center",children:l.jsx(_t,{className:"h-12 w-12 animate-spin text-primary-600"})}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[l.jsx("h1",{className:"font-display text-3xl font-bold text-gray-800",children:"Customer Feedback"}),l.jsx("div",{className:"flex mt-4 md:mt-0 gap-2 rounded-full bg-gray-200 p-1",children:["pending","reviewed","resolved","all"].map(p=>l.jsx("button",{onClick:()=>i(p),className:`rounded-full px-3 py-1.5 text-sm font-semibold capitalize transition-colors ${r===p?"bg-primary-600 text-white shadow":"text-gray-600 hover:bg-primary-50"}`,children:p},p))})]}),h.length>0?l.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:h.map(p=>l.jsx(Mse,{feedback:p,onRespond:()=>f(p)},p.id))}):l.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border-2 border-dashed bg-gray-50 p-12 text-center",children:[l.jsx(Lc,{className:"h-16 w-16 text-gray-400"}),l.jsx("h2",{className:"mt-4 text-xl font-semibold text-gray-700",children:"No Feedback Here"}),l.jsxs("p",{className:"mt-1 text-gray-500",children:['No feedback matching the "',r,'" filter.']})]}),c&&l.jsx(Ose,{isOpen:a,onClose:m,feedback:c})]})},Lse=()=>l.jsxs("div",{children:[l.jsx("h1",{className:"mb-6 font-display text-3xl font-bold text-gray-800",children:"Shop Settings"}),l.jsxs("div",{className:"mt-6 flex flex-col items-center justify-center rounded-lg border-2 border-dashed bg-gray-50 p-12 text-center",children:[l.jsx(Fb,{className:"h-16 w-16 text-gray-400"}),l.jsx("h2",{className:"mt-4 text-xl font-semibold text-gray-700",children:"More Settings Coming Soon"}),l.jsx("p",{className:"mt-1 text-gray-500",children:"This is where you'll manage your shop's information, hours, and other system settings."})]})]}),Use=()=>l.jsxs("div",{className:"bg-white",children:[l.jsx(Rt,{}),l.jsxs("main",{children:[l.jsxs("section",{className:"bg-gradient-to-br from-primary-50 to-coffee-50 px-6 py-20 text-center",children:[l.jsx("h1",{className:"font-display text-5xl font-bold text-coffee-900 md:text-6xl",children:"Terms of Service"}),l.jsxs("p",{className:"mt-4 text-xl text-gray-700",children:["Last updated: ",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),l.jsx("section",{className:"px-6 py-16",children:l.jsxs("div",{className:"prose prose-lg mx-auto max-w-4xl text-gray-700 prose-headings:font-display prose-headings:text-coffee-900 prose-a:text-primary-600 hover:prose-a:text-primary-700",children:[l.jsx("h2",{children:"1. Introduction"}),l.jsx("p",{children:'Welcome to Rush Coffee ("we," "our," or "us"). These Terms of Service govern your use of our website, mobile application, and services (collectively, the "Services"). By accessing or using our Services, you agree to be bound by these terms.'}),l.jsx("h2",{children:"2. User Accounts"}),l.jsx("p",{children:"To use certain features of our Services, you must register for an account. You agree to provide accurate, current, and complete information during the registration process and to update such information to keep it accurate, current, and complete. You are responsible for safeguarding your password and for all activities that occur under your account."}),l.jsx("h2",{children:"3. Orders and Payments"}),l.jsx("p",{children:"When you place an order through our Services, you are making an offer to purchase the products you have selected. All orders are subject to our acceptance. We reserve the right to refuse or cancel any order for any reason, including limitations on quantities available for purchase, inaccuracies, or errors in product or pricing information."}),l.jsx("p",{children:'Payment for all orders must be made at the time of placing the order, unless you select "Cash on Pickup." We accept payment through GCash and other methods as may be made available from time to time.'}),l.jsx("h2",{children:"4. Rewards Program"}),l.jsx("p",{children:"Our rewards program allows you to earn points for purchases and redeem them for rewards. Points are non-transferable and have no cash value. We reserve the right to modify, suspend, or terminate the rewards program at any time without notice."}),l.jsx("h2",{children:"5. Limitation of Liability"}),l.jsx("p",{children:"To the fullest extent permitted by applicable law, Rush Coffee shall not be liable for any indirect, incidental, special, consequential, or punitive damages, or any loss of profits or revenues, whether incurred directly or indirectly, or any loss of data, use, goodwill, or other intangible losses, resulting from (a) your access to or use of or inability to access or use the services; (b) any conduct or content of any third party on the services; or (c) unauthorized access, use, or alteration of your transmissions or content."}),l.jsx("h2",{children:"6. Changes to Terms"}),l.jsx("p",{children:"We may modify these Terms of Service from time to time. We will provide notice of any changes by posting the new Terms of Service on this page. You are advised to review these Terms of Service periodically for any changes."}),l.jsx("h2",{children:"7. Contact Us"}),l.jsxs("p",{children:["If you have any questions about these Terms of Service, please contact us at ",l.jsx("a",{href:"mailto:hello@rushcoffee.ph",children:"hello@rushcoffee.ph"}),"."]})]})})]}),l.jsx(Ct,{})]}),zse=()=>l.jsxs("div",{className:"bg-white",children:[l.jsx(Rt,{}),l.jsxs("main",{children:[l.jsxs("section",{className:"bg-gradient-to-br from-primary-50 to-coffee-50 px-6 py-20 text-center",children:[l.jsx("h1",{className:"font-display text-5xl font-bold text-coffee-900 md:text-6xl",children:"Privacy Policy"}),l.jsx("p",{className:"mt-4 text-xl text-gray-700",children:"Your privacy is important to us."}),l.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),l.jsx("section",{className:"px-6 py-16",children:l.jsxs("div",{className:"prose prose-lg mx-auto max-w-4xl text-gray-700 prose-headings:font-display prose-headings:text-coffee-900 prose-a:text-primary-600 hover:prose-a:text-primary-700",children:[l.jsx("h2",{children:"1. Information We Collect"}),l.jsx("p",{children:"We collect information you provide directly to us when you create an account, place an order, or communicate with us. This information may include your name, email address, phone number, and order details."}),l.jsx("h2",{children:"2. How We Use Your Information"}),l.jsx("p",{children:"We use the information we collect to:"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Process your transactions and fulfill your orders."}),l.jsx("li",{children:"Communicate with you about your orders, account, and our services."}),l.jsx("li",{children:"Operate and improve our Services, including our rewards program."}),l.jsx("li",{children:"Personalize your experience."})]}),l.jsx("h2",{children:"3. Information Sharing"}),l.jsx("p",{children:"We do not share your personal information with third parties except as necessary to provide our Services (e.g., with payment processors) or as required by law. We do not sell your personal data."}),l.jsx("h2",{children:"4. Data Security"}),l.jsx("p",{children:"We implement reasonable security measures to protect your information from unauthorized access, alteration, disclosure, or destruction. However, no internet-based service is 100% secure, so we cannot guarantee absolute security."}),l.jsx("h2",{children:"5. Your Choices"}),l.jsx("p",{children:"You may review and update your account information at any time by logging into your account and visiting your profile page. You can also unsubscribe from our marketing emails by following the instructions in those emails."}),l.jsx("h2",{children:"6. Contact Us"}),l.jsxs("p",{children:["If you have any questions about this Privacy Policy, please contact us at ",l.jsx("a",{href:"mailto:hello@rushcoffee.ph",children:"hello@rushcoffee.ph"}),"."]})]})})]}),l.jsx(Ct,{})]}),Fse=({title:t})=>l.jsxs("div",{className:"flex min-h-screen flex-col",children:[l.jsx(Rt,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center bg-gradient-to-br from-primary-50 to-coffee-50",children:l.jsxs("div",{className:"p-4 text-center",children:[l.jsx(kt,{className:"mx-auto mb-4 h-16 w-16 text-gray-400 opacity-50"}),l.jsx("h1",{className:"mb-4 font-display text-4xl font-bold text-gray-900",children:t}),l.jsx("p",{className:"mb-8 text-gray-600",children:"We're brewing something special. Check back soon!"}),l.jsx(Pe,{to:"/",className:"font-medium text-primary-600 transition-colors hover:text-primary-700",children:" Back to Home"})]})}),l.jsx(Ct,{})]}),Bse=()=>l.jsxs("div",{className:"flex min-h-screen flex-col",children:[l.jsx(Rt,{}),l.jsx("main",{className:"flex flex-1 items-center justify-center bg-gradient-to-br from-primary-50 to-coffee-50",children:l.jsxs("div",{className:"p-4 text-center",children:[l.jsx(kt,{className:"mx-auto mb-4 h-16 w-16 text-gray-400 opacity-50"}),l.jsx("h1",{className:"mb-4 font-display text-4xl font-bold text-gray-900",children:"404 - Page Not Found"}),l.jsx("p",{className:"mb-8 text-gray-600",children:"This coffee blend doesn't exist on our menu. Maybe it got lost in the daily grind?"}),l.jsx(Pe,{to:"/",className:"font-medium text-primary-600 transition-colors hover:text-primary-700",children:" Back to Home"})]})}),l.jsx(Ct,{})]}),qse=()=>{const{isCartOpen:t,closeCart:e,cartItems:n,updateQuantity:s,removeFromCart:r,toastMessage:i}=Dn(),a=Ds(),o=()=>{e(),a("/checkout")};return l.jsxs(l.Fragment,{children:[l.jsx(xse,{}),l.jsxs(hU,{children:[l.jsx(Ue,{path:"/",element:l.jsx(UQ,{})}),l.jsx(Ue,{path:"/about",element:l.jsx(dse,{})}),l.jsx(Ue,{path:"/menu",element:l.jsx(wte,{})}),l.jsx(Ue,{path:"/contact",element:l.jsx(mse,{})}),l.jsx(Ue,{path:"/auth/login",element:l.jsx(FQ,{})}),l.jsx(Ue,{path:"/auth/register",element:l.jsx(HQ,{})}),l.jsx(Ue,{path:"/auth/forgot-password",element:l.jsx(GQ,{})}),l.jsx(Ue,{path:"/checkout",element:l.jsx(Nte,{})}),l.jsx(Ue,{path:"/queue",element:l.jsx($ne,{})}),l.jsx(Ue,{path:"/rewards",element:l.jsx(Zne,{})}),l.jsx(Ue,{path:"/profile",element:l.jsx(cse,{})}),l.jsx(Ue,{path:"/faq",element:l.jsx(yse,{})}),l.jsx(Ue,{path:"/terms",element:l.jsx(Use,{})}),l.jsx(Ue,{path:"/privacy",element:l.jsx(zse,{})}),l.jsx(Ue,{path:"/cookies",element:l.jsx(Fse,{title:"Cookie Policy"})}),l.jsx(Ue,{element:l.jsx(_se,{}),children:l.jsxs(Ue,{path:"/admin",element:l.jsx(Nse,{}),children:[l.jsx(Ue,{index:!0,element:l.jsx(bse,{})}),l.jsx(Ue,{path:"queue",element:l.jsx(Sse,{})}),l.jsx(Ue,{path:"inventory",element:l.jsx(Cse,{})}),l.jsx(Ue,{path:"products",element:l.jsx(Pse,{})}),l.jsx(Ue,{path:"analytics",element:l.jsx(kse,{})}),l.jsx(Ue,{path:"feedback",element:l.jsx(Vse,{})}),l.jsx(Ue,{path:"settings",element:l.jsx(Lse,{})})]})}),l.jsx(Ue,{path:"*",element:l.jsx(Bse,{})})]}),l.jsx(vse,{isOpen:t,onClose:e,cartItems:n,onUpdateQuantity:s,onRemoveItem:r,onCheckout:o}),i&&l.jsx("div",{className:"fixed bottom-4 right-4 z-[100] animate-fade-in-up rounded-lg bg-gray-900 px-4 py-3 text-white shadow-lg",children:i})]})},Hse=()=>l.jsx(PQ,{children:l.jsx(kQ,{children:l.jsx(Ate,{children:l.jsx(DQ,{children:l.jsx(MU,{children:l.jsx(qse,{})})})})})}),G6=document.getElementById("root");if(!G6)throw new Error("Could not find root element to mount to");const Gse=xL.createRoot(G6);Gse.render(l.jsx(UV.StrictMode,{children:l.jsx(Hse,{})}));
