import{c as S,r as o,d as I,j as e,i as w,U as k,T as y,k as V,o as se,x as D,O as te,z as ae,X as le}from"./index-B98AaP7u.js";import{U as L}from"./users-CBRQxc-K.js";import{S as re}from"./search-OeahFFPL.js";import{F as ie}from"./funnel-Bd5Vv8ca.js";import{C as H}from"./calendar-DQbSpyTb.js";import{T as oe}from"./trending-up-DLkhUWFK.js";import{A as ne}from"./arrow-up-down-B2HLxGeN.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],C=S("briefcase",ce);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],J=S("copy",de);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],B=S("ellipsis-vertical",xe);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],he=S("trending-down",me),P=a=>{switch(a){case"admin":return e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-medium bg-purple-50 text-purple-700 ring-1 ring-inset ring-purple-700/10",children:[e.jsx(y,{className:"w-3.5 h-3.5"})," Admin"]});case"employee":return e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-medium bg-blue-50 text-blue-700 ring-1 ring-inset ring-blue-700/10",children:[e.jsx(C,{className:"w-3.5 h-3.5"})," Employee"]});default:return e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-medium bg-green-50 text-green-700 ring-1 ring-inset ring-green-600/20",children:[e.jsx(k,{className:"w-3.5 h-3.5"})," Customer"]})}},X=a=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(a),ge=({user:a,onClose:U})=>{var g,p;o.useEffect(()=>{const c=window.getComputedStyle(document.body).overflow;document.body.style.overflow="hidden";const n=document.getElementById("admin-main-content");let j="";return n&&(j=window.getComputedStyle(n).overflow,n.style.overflow="hidden"),()=>{document.body.style.overflow=c,n&&(n.style.overflow=j||"auto")}},[]);const h=async c=>{try{await navigator.clipboard.writeText(c)}catch(n){console.error("Failed to copy:",n)}};return a&&typeof document<"u"?ae.createPortal(e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"relative h-32 bg-gradient-to-r from-coffee-600 to-coffee-800 flex-shrink-0",children:[e.jsx("button",{onClick:U,className:"absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 text-white rounded-full transition-colors backdrop-blur-md z-10",children:e.jsx(le,{className:"w-5 h-5"})}),e.jsx("div",{className:"absolute -bottom-12 left-8",children:e.jsx("div",{className:"w-24 h-24 rounded-full bg-white p-1 shadow-lg",children:e.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-coffee-400 to-coffee-600 flex items-center justify-center text-white text-2xl font-bold overflow-hidden",children:a.photoURL?e.jsx("img",{src:a.photoURL,alt:a.firstName,className:"w-full h-full object-cover"}):e.jsxs("span",{children:[(g=a.firstName)==null?void 0:g[0],(p=a.lastName)==null?void 0:p[0]]})})})})]}),e.jsxs("div",{className:"pt-16 pb-8 px-8 overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[a.firstName," ",a.lastName]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:a.email}),P(a.role)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider mb-1",children:"Customer Since"}),e.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center justify-end gap-1",children:[e.jsx(H,{className:"w-4 h-4 text-coffee-500"}),X(a.createdAt)]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Total Orders"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.totalOrders})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Total Spent"}),e.jsxs("div",{className:"text-2xl font-bold text-coffee-700",children:["₱",a.totalSpent.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Loyalty Points"}),e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:a.loyaltyPoints||0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wider border-b border-gray-100 pb-2",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-50 flex items-center justify-center text-blue-600 group-hover:bg-blue-100 transition-colors",children:e.jsx(V,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Email Address"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",title:a.email,children:a.email})]}),e.jsx("button",{onClick:c=>{c.stopPropagation(),h(a.email||"")},className:"p-2 text-gray-400 hover:text-coffee-600 transition-colors",children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-50 flex items-center justify-center text-green-600 group-hover:bg-green-100 transition-colors",children:e.jsx(D,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Phone Number"}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.phone||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-colors group",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-50 flex items-center justify-center text-purple-600 group-hover:bg-purple-100 transition-colors",children:e.jsx(y,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"User ID"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 font-mono",children:a.uid})]})]})]})]})]})]})}),document.body):null},we=()=>{const[a,U]=o.useState([]),[h,g]=o.useState(!0),[p,c]=o.useState(""),[n,j]=o.useState("all"),[d,N]=o.useState(null),[b,q]=o.useState("joined"),[A,F]=o.useState("desc"),[G,R]=o.useState(null),[E,O]=o.useState(null),[M,T]=o.useState(null),$=(s,t)=>{O({message:s,type:t}),setTimeout(()=>O(null),3e3)};o.useEffect(()=>{const s=t=>{d&&!t.target.closest(".action-menu")&&N(null)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[d]),o.useEffect(()=>{const s=I.collection("users").onSnapshot(t=>{const l=t.docs.map(r=>{var u;const i=r.data();return{uid:r.id,...i,totalSpent:i.totalSpent??0,totalOrders:i.totalOrders??0,createdAt:((u=i.createdAt)==null?void 0:u.toDate())||new Date}});U(l),g(!1)},t=>{console.error("Error fetching users:",t),g(!1),$("Failed to load users","error")});return()=>s()},[]);const x=[...a].sort((s,t)=>{let l=0;switch(b){case"name":l=`${s.firstName} ${s.lastName}`.localeCompare(`${t.firstName} ${t.lastName}`);break;case"role":l=(s.role||"customer").localeCompare(t.role||"customer");break;case"email":l=(s.email||"").localeCompare(t.email||"");break;case"orders":l=s.totalOrders-t.totalOrders;break;case"spent":l=s.totalSpent-t.totalSpent;break;case"joined":l=s.createdAt.getTime()-t.createdAt.getTime();break}return A==="asc"?l:-l}).filter(s=>{var i,u,_,z;const t=n==="all"||s.role===n,l=p.toLowerCase(),r=(((i=s.firstName)==null?void 0:i.toLowerCase())||"").includes(l)||(((u=s.lastName)==null?void 0:u.toLowerCase())||"").includes(l)||(((_=s.email)==null?void 0:_.toLowerCase())||"").includes(l)||(((z=s.phone)==null?void 0:z.toLowerCase())||"").includes(l);return t&&r}),K=s=>{b===s?F(A==="asc"?"desc":"asc"):(q(s),F("asc"))},Q=a.length,W=a.filter(s=>s.role==="customer"||!s.role).length,Y=a.filter(s=>s.role==="employee").length,Z=a.filter(s=>s.role==="admin").length,m=async(s,t)=>{try{await I.collection("users").doc(s).update({role:t}),N(null),$(`Role updated to ${t} successfully!`,"success")}catch(l){console.error("Error updating user role:",l),$("Failed to update role","error")}},ee=async s=>{try{await navigator.clipboard.writeText(s),R(s),setTimeout(()=>R(null),2e3)}catch(t){console.error("Failed to copy:",t)}},v=({title:s,value:t,icon:l,color:r,trend:i})=>e.jsxs("div",{className:"group bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4 transition-all duration-300 hover:shadow-md hover:-translate-y-0.5 cursor-pointer",children:[e.jsx("div",{className:`p-3 rounded-xl ${r} bg-opacity-10 transition-transform duration-300 group-hover:scale-110`,children:e.jsx(l,{className:`w-6 h-6 ${r.replace("bg-","text-")}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium mb-1",children:s}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:t}),i!==void 0&&e.jsxs("span",{className:`text-xs font-medium flex items-center gap-0.5 ${i>0?"text-green-600":i<0?"text-red-600":"text-gray-400"}`,children:[i>0?e.jsx(oe,{className:"w-3 h-3"}):i<0?e.jsx(he,{className:"w-3 h-3"}):e.jsx(te,{className:"w-3 h-3"}),i!==0&&`${Math.abs(i)}%`]})]})]})]}),f=({field:s,children:t})=>e.jsxs("button",{onClick:()=>K(s),className:"flex items-center gap-1 hover:text-gray-700 transition-colors group",children:[t,e.jsx(ne,{className:`w-3.5 h-3.5 transition-opacity ${b===s?"opacity-100 text-coffee-600":"opacity-0 group-hover:opacity-50"}`})]});return e.jsxs("div",{className:"space-y-8 pb-10 max-w-[1600px] mx-auto",children:[E&&e.jsxs("div",{className:`fixed top-4 right-4 z-50 px-4 py-3 rounded-lg shadow-lg flex items-center gap-2 animate-in slide-in-from-top-5 ${E.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[e.jsx(w,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:E.message})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:"User Management"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage access, roles, and view user statistics."})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(v,{title:"Total Users",value:Q,icon:L,color:"bg-gray-600",trend:0}),e.jsx(v,{title:"Customers",value:W,icon:k,color:"bg-green-600",trend:12}),e.jsx(v,{title:"Employees",value:Y,icon:C,color:"bg-blue-600",trend:0}),e.jsx(v,{title:"Admins",value:Z,icon:y,color:"bg-purple-600",trend:0})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-5 border-b border-gray-100 flex flex-col sm:flex-row gap-4 justify-between bg-gradient-to-r from-gray-50/50 to-white items-center",children:[e.jsxs("div",{className:"relative w-full sm:max-w-md",children:[e.jsx(re,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or phone...",value:p,onChange:s=>c(s.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-coffee-500 focus:border-transparent outline-none transition-all shadow-sm"})]}),e.jsx("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:e.jsxs("div",{className:"relative w-full sm:w-48",children:[e.jsxs("select",{value:n,onChange:s=>j(s.target.value),className:"w-full appearance-none bg-white border border-gray-200 text-gray-700 py-2.5 px-4 pr-10 rounded-lg focus:outline-none focus:ring-2 focus:ring-coffee-500 cursor-pointer font-medium text-sm shadow-sm",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"customer",children:"Customers"}),e.jsx("option",{value:"employee",children:"Employees"}),e.jsx("option",{value:"admin",children:"Admins"})]}),e.jsx(ie,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})})]}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"sticky top-0 bg-gray-50 z-10 shadow-sm",children:e.jsxs("tr",{className:"border-b border-gray-200 text-xs uppercase tracking-wider text-gray-500 font-semibold",children:[e.jsx("th",{className:"px-6 py-4 w-[25%]",children:e.jsx(f,{field:"name",children:"User Details"})}),e.jsx("th",{className:"px-6 py-4 w-[15%]",children:e.jsx(f,{field:"role",children:"Role"})}),e.jsx("th",{className:"px-6 py-4 w-[25%]",children:e.jsx(f,{field:"email",children:"Contact Info"})}),e.jsx("th",{className:"px-6 py-4 w-[15%]",children:e.jsx(f,{field:"orders",children:"Activity"})}),e.jsx("th",{className:"px-6 py-4 w-[15%]",children:e.jsx(f,{field:"joined",children:"Joined"})}),e.jsx("th",{className:"px-6 py-4 w-[5%] text-right"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:h?Array.from({length:5}).map((s,t)=>e.jsxs("tr",{className:"animate-pulse",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"h-10 w-10 bg-gray-200 rounded-full inline-block mr-3"}),e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded inline-block"})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-6 w-20 bg-gray-200 rounded-full"})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded"})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"h-4 w-16 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 w-12 bg-gray-200 rounded"})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded"})}),e.jsx("td",{className:"px-6 py-4"})]},t)):x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-16 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"bg-gray-100 p-4 rounded-full mb-4",children:e.jsx(L,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No users found"}),e.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your search or filters."})]})})}):x.map(s=>{var t,l;return e.jsxs("tr",{onClick:()=>T(s),className:"group hover:bg-gradient-to-r hover:from-coffee-50/30 hover:to-transparent transition-all duration-200 cursor-pointer",children:[e.jsx("td",{className:"px-6 py-4 align-top",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-coffee-400 to-coffee-600 flex items-center justify-center text-white font-bold shadow-sm overflow-hidden flex-shrink-0 ring-2 ring-white group-hover:ring-coffee-200 transition-all",children:s.photoURL?e.jsx("img",{src:s.photoURL,alt:s.firstName,className:"w-full h-full object-cover"}):e.jsxs("span",{className:"text-sm",children:[(t=s.firstName)==null?void 0:t[0],(l=s.lastName)==null?void 0:l[0]]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsxs("div",{className:"text-xs text-gray-400 font-mono mt-1 flex items-center gap-1",children:[e.jsx("span",{className:"bg-gray-100 px-1.5 py-0.5 rounded text-[10px]",children:"ID"}),s.uid.slice(0,8)]})]})]})}),e.jsx("td",{className:"px-6 py-4 align-top pt-5",children:P(s.role)}),e.jsx("td",{className:"px-6 py-4 align-top",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 group-hover:text-gray-900 transition-colors group/email",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-50 flex items-center justify-center flex-shrink-0",children:e.jsx(V,{className:"w-3 h-3 text-gray-400"})}),e.jsx("span",{className:"truncate max-w-[140px]",title:s.email||"",children:s.email}),e.jsx("button",{onClick:r=>{r.stopPropagation(),ee(s.email||"")},className:"opacity-0 group-hover/email:opacity-100 transition-opacity p-1 hover:bg-gray-100 rounded",children:G===s.email?e.jsx(se,{className:"w-3 h-3 text-green-600"}):e.jsx(J,{className:"w-3 h-3 text-gray-400"})})]}),s.phone?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 group-hover:text-gray-900 transition-colors",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-50 flex items-center justify-center flex-shrink-0",children:e.jsx(D,{className:"w-3 h-3 text-gray-400"})}),e.jsx("span",{children:s.phone})]}):e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-50 flex items-center justify-center flex-shrink-0",children:e.jsx(D,{className:"w-3 h-3 text-gray-300"})}),e.jsx("span",{className:"italic text-xs",children:"No phone"})]})]})}),e.jsx("td",{className:"px-6 py-4 align-top",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-medium",children:"Orders"}),e.jsx("span",{className:"font-semibold text-gray-900 bg-gray-100 px-2 py-0.5 rounded-md min-w-[2rem] text-center",children:s.totalOrders})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-medium",children:"Spent"}),e.jsxs("span",{className:"font-medium text-coffee-700",children:["₱",s.totalSpent.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase font-medium",children:"Points"}),e.jsxs("span",{className:"font-medium text-amber-600",children:[s.loyaltyPoints||0," pts"]})]})]})}),e.jsx("td",{className:"px-6 py-4 align-top pt-5",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(H,{className:"w-3.5 h-3.5 text-gray-400"}),X(s.createdAt)]})}),e.jsxs("td",{className:"px-6 py-4 text-right align-top pt-4 relative action-menu",children:[e.jsx("button",{onClick:r=>{r.stopPropagation(),N(d===s.uid?null:s.uid)},className:`p-2 rounded-lg transition-all ${d===s.uid?"bg-coffee-50 text-coffee-600 ring-1 ring-coffee-200":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,children:e.jsx(B,{className:"w-5 h-5"})}),d===s.uid&&e.jsx("div",{className:"absolute right-8 top-8 w-56 bg-white rounded-xl shadow-xl border border-gray-100 z-50 animate-in fade-in zoom-in-95 duration-100 origin-top-right",onClick:r=>r.stopPropagation(),children:e.jsxs("div",{className:"p-1.5",children:[e.jsx("div",{className:"px-3 py-2 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Change Role"}),e.jsxs("button",{onClick:()=>m(s.uid,"admin"),className:`w-full text-left px-3 py-2.5 rounded-lg text-sm flex items-center gap-3 transition-colors ${s.role==="admin"?"bg-purple-50 text-purple-700 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${s.role==="admin"?"bg-purple-100":"bg-gray-100"}`,children:e.jsx(y,{className:"w-3.5 h-3.5"})}),"Admin",s.role==="admin"&&e.jsx(w,{className:"w-4 h-4 ml-auto text-purple-600"})]}),e.jsxs("button",{onClick:()=>m(s.uid,"employee"),className:`w-full text-left px-3 py-2.5 rounded-lg text-sm flex items-center gap-3 transition-colors ${s.role==="employee"?"bg-blue-50 text-blue-700 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${s.role==="employee"?"bg-blue-100":"bg-gray-100"}`,children:e.jsx(C,{className:"w-3.5 h-3.5"})}),"Employee",s.role==="employee"&&e.jsx(w,{className:"w-4 h-4 ml-auto text-blue-600"})]}),e.jsxs("button",{onClick:()=>m(s.uid,"customer"),className:`w-full text-left px-3 py-2.5 rounded-lg text-sm flex items-center gap-3 transition-colors ${!s.role||s.role==="customer"?"bg-green-50 text-green-700 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${!s.role||s.role==="customer"?"bg-green-100":"bg-gray-100"}`,children:e.jsx(k,{className:"w-3.5 h-3.5"})}),"Customer",(!s.role||s.role==="customer")&&e.jsx(w,{className:"w-4 h-4 ml-auto text-green-600"})]})]})})]})]},s.uid)})})]})}),e.jsx("div",{className:"lg:hidden p-4 space-y-4",children:h?Array.from({length:3}).map((s,t)=>e.jsx("div",{className:"bg-gray-50 p-4 rounded-xl animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 w-24 bg-gray-200 rounded"})]})]})},t)):x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(L,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No users found"})]}):x.map(s=>{var t,l;return e.jsxs("div",{onClick:()=>T(s),className:"bg-white border border-gray-200 p-4 rounded-xl shadow-sm hover:shadow-md transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-coffee-400 to-coffee-600 flex items-center justify-center text-white font-bold shadow-sm overflow-hidden flex-shrink-0 ring-2 ring-white",children:s.photoURL?e.jsx("img",{src:s.photoURL,alt:s.firstName,className:"w-full h-full object-cover"}):e.jsxs("span",{children:[(t=s.firstName)==null?void 0:t[0],(l=s.lastName)==null?void 0:l[0]]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:s.email}),e.jsx("div",{className:"mt-2",children:P(s.role)})]}),e.jsx("button",{onClick:r=>{r.stopPropagation(),N(d===s.uid?null:s.uid)},className:"p-2 rounded-lg text-gray-400 hover:bg-gray-100",children:e.jsx(B,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-3 border-t border-gray-100",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Orders"}),e.jsx("div",{className:"font-semibold text-gray-900",children:s.totalOrders})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Spent"}),e.jsxs("div",{className:"font-semibold text-coffee-700 text-sm",children:["₱",s.totalSpent.toFixed(0)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Points"}),e.jsx("div",{className:"font-semibold text-amber-600",children:s.loyaltyPoints||0})]})]}),d===s.uid&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 space-y-1",onClick:r=>r.stopPropagation(),children:[e.jsxs("button",{onClick:()=>m(s.uid,"admin"),className:"w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"})," Set as Admin"]}),e.jsxs("button",{onClick:()=>m(s.uid,"employee"),className:"w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"})," Set as Employee"]}),e.jsxs("button",{onClick:()=>m(s.uid,"customer"),className:"w-full text-left px-3 py-2 rounded-lg text-sm hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"})," Set as Customer"]})]})]},s.uid)})}),!h&&x.length>0&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 flex justify-between items-center text-sm text-gray-600 bg-gray-50",children:[e.jsxs("span",{className:"font-medium",children:["Showing ",e.jsx("span",{className:"text-gray-900",children:x.length})," of ",e.jsx("span",{className:"text-gray-900",children:a.length})," users"]}),e.jsx("div",{className:"flex items-center gap-2 text-xs",children:e.jsxs("span",{className:"text-gray-500",children:["Sorted by: ",e.jsx("span",{className:"font-medium text-gray-700",children:b})," (",A,")"]})})]})]}),M&&e.jsx(ge,{user:M,onClose:()=>T(null)})]})};export{we as default};
