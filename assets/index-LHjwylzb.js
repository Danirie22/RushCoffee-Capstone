const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-0m3mY_JB.js","assets/clock-BokvIW9m.js","assets/wallet-Cv8Zlevi.js","assets/users-Deik1mBz.js","assets/bell-0-m0T600.js","assets/ForgotPasswordPage-BnTnYGnz.js","assets/Input-Do0pid_i.js","assets/MenuPage-D0wGD5Re.js","assets/star-BLUEBzkS.js","assets/sparkles-BFoT4hoD.js","assets/ProductCardSkeleton-hEV1UmAW.js","assets/search-CS44MvxN.js","assets/arrow-up-down-Cc4M_QHt.js","assets/CheckoutPage-BzbNQ5Jj.js","assets/banknote-DBglTuJv.js","assets/mockAvailableRewards-2NOuBi-T.js","assets/shopping-bag-DVE8aW7y.js","assets/coffee-DYJFl-fZ.js","assets/message-square-4vSFEQcY.js","assets/QueuePage-Dt7IBP-G.js","assets/DigitalReceipt-BgvlPBRK.js","assets/thumbs-up-BEX5cSy0.js","assets/award-DfippjFs.js","assets/RewardsPage-DYFQ7yqv.js","assets/history-DYSA3F1m.js","assets/format-BoV-TgZi.js","assets/en-US-wfBU2YNu.js","assets/calendar-DIxtHoS8.js","assets/ProfilePage-DYGwoA1k.js","assets/save-CdU7XiZR.js","assets/chevron-right-BwMBwSj-.js","assets/StarRating-MPLhanEQ.js","assets/settings-6sSEtVXt.js","assets/square-pen-CFwRswOf.js","assets/FlavorProfilePage-CChUPZNc.js","assets/AboutPage-Bzd0tniM.js","assets/ContactPage-0Mz48uaE.js","assets/Textarea-Bhq0G_ON.js","assets/FAQPage-CB31dOsy.js","assets/TermsPage-BODAEVAx.js","assets/file-text-BJbto3HQ.js","assets/credit-card-BqKW0GqV.js","assets/PrivacyPolicyPage-Dq_WZoww.js","assets/CookiePolicyPage-Du6A2AYS.js","assets/chart-column-DTOiqjez.js","assets/AdminLayout-CDkxSv2F.js","assets/ConfirmLogoutModal-EyTyJf-K.js","assets/package-CEjsrJoz.js","assets/AdminDashboardPage-cOfhn6Zw.js","assets/SalesOverview-DKhQWGik.js","assets/activity-CtxLBaYd.js","assets/AdminQueuePage-BdhsxFqQ.js","assets/inventoryDeduction-DFJMLZBI.js","assets/AdminInventoryPage-Ra3Cvvub.js","assets/snowflake-BGfqXqX2.js","assets/AdminProductsPage-BRCQd5Yy.js","assets/AdminAnalyticsPage-BSnFQ-cR.js","assets/AdminFeedbackPage-DJcjRO4x.js","assets/funnel-BAPZ_bbc.js","assets/AdminSettingsPage-CruWIXEk.js","assets/store-DncLG92i.js","assets/AdminOrdersHistoryPage-Ckel9alj.js","assets/AdminUsersPage-Bk7EjmCY.js","assets/EmployeeLayout-C-lATLl_.js","assets/POSDashboard-BQqbycYA.js","assets/POSPage-C0NLFK57.js"])))=>i.map(i=>d[i]);
function MH(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Lf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iM(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sM={exports:{}},Pv={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VH=Symbol.for("react.transitional.element"),LH=Symbol.for("react.fragment");function aM(t,e,n){var r=null;if(n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:VH,type:t,key:r,ref:e!==void 0?e:null,props:n}}Pv.Fragment=LH;Pv.jsx=aM;Pv.jsxs=aM;sM.exports=Pv;var y=sM.exports,oM={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx=Symbol.for("react.transitional.element"),UH=Symbol.for("react.portal"),jH=Symbol.for("react.fragment"),FH=Symbol.for("react.strict_mode"),zH=Symbol.for("react.profiler"),BH=Symbol.for("react.consumer"),qH=Symbol.for("react.context"),HH=Symbol.for("react.forward_ref"),GH=Symbol.for("react.suspense"),$H=Symbol.for("react.memo"),lM=Symbol.for("react.lazy"),KH=Symbol.for("react.activity"),E2=Symbol.iterator;function WH(t){return t===null||typeof t!="object"?null:(t=E2&&t[E2]||t["@@iterator"],typeof t=="function"?t:null)}var cM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uM=Object.assign,hM={};function Td(t,e,n){this.props=t,this.context=e,this.refs=hM,this.updater=n||cM}Td.prototype.isReactComponent={};Td.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Td.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dM(){}dM.prototype=Td.prototype;function qx(t,e,n){this.props=t,this.context=e,this.refs=hM,this.updater=n||cM}var Hx=qx.prototype=new dM;Hx.constructor=qx;uM(Hx,Td.prototype);Hx.isPureReactComponent=!0;var x2=Array.isArray;function DE(){}var Pt={H:null,A:null,T:null,S:null},fM=Object.prototype.hasOwnProperty;function Gx(t,e,n){var r=n.ref;return{$$typeof:Bx,type:t,key:e,ref:r!==void 0?r:null,props:n}}function YH(t,e){return Gx(t.type,e,t.props)}function $x(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bx}function QH(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var A2=/\/+/g;function aT(t,e){return typeof t=="object"&&t!==null&&t.key!=null?QH(""+t.key):e.toString(36)}function XH(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(DE,DE):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Ju(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Bx:case UH:a=!0;break;case lM:return a=t._init,Ju(a(t._payload),e,n,r,i)}}if(a)return i=i(t),a=r===""?"."+aT(t,0):r,x2(i)?(n="",a!=null&&(n=a.replace(A2,"$&/")+"/"),Ju(i,e,n,"",function(h){return h})):i!=null&&($x(i)&&(i=YH(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(A2,"$&/")+"/")+a)),e.push(i)),1;a=0;var o=r===""?".":r+":";if(x2(t))for(var c=0;c<t.length;c++)r=t[c],s=o+aT(r,c),a+=Ju(r,e,n,s,i);else if(c=WH(t),typeof c=="function")for(t=c.call(t),c=0;!(r=t.next()).done;)r=r.value,s=o+aT(r,c++),a+=Ju(r,e,n,s,i);else if(s==="object"){if(typeof t.then=="function")return Ju(XH(t),e,n,r,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function Wy(t,e,n){if(t==null)return t;var r=[],i=0;return Ju(t,r,"","",function(s){return e.call(n,s,i++)}),r}function JH(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var S2=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ZH={map:Wy,forEach:function(t,e,n){Wy(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wy(t,function(){e++}),e},toArray:function(t){return Wy(t,function(e){return e})||[]},only:function(t){if(!$x(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Activity=KH;Pe.Children=ZH;Pe.Component=Td;Pe.Fragment=jH;Pe.Profiler=zH;Pe.PureComponent=qx;Pe.StrictMode=FH;Pe.Suspense=GH;Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Pt;Pe.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Pt.H.useMemoCache(t)}};Pe.cache=function(t){return function(){return t.apply(null,arguments)}};Pe.cacheSignal=function(){return null};Pe.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var r=uM({},t.props),i=t.key;if(e!=null)for(s in e.key!==void 0&&(i=""+e.key),e)!fM.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(r[s]=e[s]);var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];r.children=a}return Gx(t.type,i,r)};Pe.createContext=function(t){return t={$$typeof:qH,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:BH,_context:t},t};Pe.createElement=function(t,e,n){var r,i={},s=null;if(e!=null)for(r in e.key!==void 0&&(s=""+e.key),e)fM.call(e,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var o=Array(a),c=0;c<a;c++)o[c]=arguments[c+2];i.children=o}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return Gx(t,s,i)};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:HH,render:t}};Pe.isValidElement=$x;Pe.lazy=function(t){return{$$typeof:lM,_payload:{_status:-1,_result:t},_init:JH}};Pe.memo=function(t,e){return{$$typeof:$H,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=Pt.T,n={};Pt.T=n;try{var r=t(),i=Pt.S;i!==null&&i(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(DE,S2)}catch(s){S2(s)}finally{e!==null&&n.types!==null&&(e.types=n.types),Pt.T=e}};Pe.unstable_useCacheRefresh=function(){return Pt.H.useCacheRefresh()};Pe.use=function(t){return Pt.H.use(t)};Pe.useActionState=function(t,e,n){return Pt.H.useActionState(t,e,n)};Pe.useCallback=function(t,e){return Pt.H.useCallback(t,e)};Pe.useContext=function(t){return Pt.H.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t,e){return Pt.H.useDeferredValue(t,e)};Pe.useEffect=function(t,e){return Pt.H.useEffect(t,e)};Pe.useEffectEvent=function(t){return Pt.H.useEffectEvent(t)};Pe.useId=function(){return Pt.H.useId()};Pe.useImperativeHandle=function(t,e,n){return Pt.H.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return Pt.H.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return Pt.H.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return Pt.H.useMemo(t,e)};Pe.useOptimistic=function(t,e){return Pt.H.useOptimistic(t,e)};Pe.useReducer=function(t,e,n){return Pt.H.useReducer(t,e,n)};Pe.useRef=function(t){return Pt.H.useRef(t)};Pe.useState=function(t){return Pt.H.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return Pt.H.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return Pt.H.useTransition()};Pe.version="19.2.0";oM.exports=Pe;var P=oM.exports;const oi=iM(P),Lme=MH({__proto__:null,default:oi},[P]);var mM={exports:{}},Dv={},pM={exports:{}},gM={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ie,se){var ue=ie.length;ie.push(se);e:for(;0<ue;){var Te=ue-1>>>1,_e=ie[Te];if(0<i(_e,se))ie[Te]=se,ie[ue]=_e,ue=Te;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var se=ie[0],ue=ie.pop();if(ue!==se){ie[0]=ue;e:for(var Te=0,_e=ie.length,Ve=_e>>>1;Te<Ve;){var St=2*(Te+1)-1,hr=ie[St],Mt=St+1,Tn=ie[Mt];if(0>i(hr,ue))Mt<_e&&0>i(Tn,hr)?(ie[Te]=Tn,ie[Mt]=ue,Te=Mt):(ie[Te]=hr,ie[St]=ue,Te=St);else if(Mt<_e&&0>i(Tn,ue))ie[Te]=Tn,ie[Mt]=ue,Te=Mt;else break e}}return se}function i(ie,se){var ue=ie.sortIndex-se.sortIndex;return ue!==0?ue:ie.id-se.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],h=[],f=1,p=null,g=3,_=!1,R=!1,N=!1,A=!1,b=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function O(ie){for(var se=n(h);se!==null;){if(se.callback===null)r(h);else if(se.startTime<=ie)r(h),se.sortIndex=se.expirationTime,e(c,se);else break;se=n(h)}}function j(ie){if(N=!1,O(ie),!R)if(n(c)!==null)R=!0,q||(q=!0,B());else{var se=n(h);se!==null&&me(j,se.startTime-ie)}}var q=!1,S=-1,C=5,k=-1;function M(){return A?!0:!(t.unstable_now()-k<C)}function U(){if(A=!1,q){var ie=t.unstable_now();k=ie;var se=!0;try{e:{R=!1,N&&(N=!1,T(S),S=-1),_=!0;var ue=g;try{t:{for(O(ie),p=n(c);p!==null&&!(p.expirationTime>ie&&M());){var Te=p.callback;if(typeof Te=="function"){p.callback=null,g=p.priorityLevel;var _e=Te(p.expirationTime<=ie);if(ie=t.unstable_now(),typeof _e=="function"){p.callback=_e,O(ie),se=!0;break t}p===n(c)&&r(c),O(ie)}else r(c);p=n(c)}if(p!==null)se=!0;else{var Ve=n(h);Ve!==null&&me(j,Ve.startTime-ie),se=!1}}break e}finally{p=null,g=ue,_=!1}se=void 0}}finally{se?B():q=!1}}}var B;if(typeof E=="function")B=function(){E(U)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,ne=F.port2;F.port1.onmessage=U,B=function(){ne.postMessage(null)}}else B=function(){b(U,0)};function me(ie,se){S=b(function(){ie(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(ie){switch(g){case 1:case 2:case 3:var se=3;break;default:se=g}var ue=g;g=se;try{return ie()}finally{g=ue}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(ie,se){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ue=g;g=ie;try{return se()}finally{g=ue}},t.unstable_scheduleCallback=function(ie,se,ue){var Te=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Te+ue:Te):ue=Te,ie){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ue+_e,ie={id:f++,callback:se,priorityLevel:ie,startTime:ue,expirationTime:_e,sortIndex:-1},ue>Te?(ie.sortIndex=ue,e(h,ie),n(c)===null&&ie===n(h)&&(N?(T(S),S=-1):N=!0,me(j,ue-Te))):(ie.sortIndex=_e,e(c,ie),R||_||(R=!0,q||(q=!0,B()))),ie},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(ie){var se=g;return function(){var ue=g;g=se;try{return ie.apply(this,arguments)}finally{g=ue}}}})(gM);pM.exports=gM;var eG=pM.exports,yM={exports:{}},xr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tG=P;function _M(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function wo(){}var wr={d:{f:wo,r:function(){throw Error(_M(522))},D:wo,C:wo,L:wo,m:wo,X:wo,S:wo,M:wo},p:0,findDOMNode:null},nG=Symbol.for("react.portal");function rG(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nG,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}var bm=tG.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function kv(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}xr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=wr;xr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(_M(299));return rG(t,e,null,n)};xr.flushSync=function(t){var e=bm.T,n=wr.p;try{if(bm.T=null,wr.p=2,t)return t()}finally{bm.T=e,wr.p=n,wr.d.f()}};xr.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,wr.d.C(t,e))};xr.prefetchDNS=function(t){typeof t=="string"&&wr.d.D(t)};xr.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,r=kv(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?wr.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):n==="script"&&wr.d.X(t,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};xr.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=kv(e.as,e.crossOrigin);wr.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&wr.d.M(t)};xr.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,r=kv(n,e.crossOrigin);wr.d.L(t,n,{crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};xr.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=kv(e.as,e.crossOrigin);wr.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else wr.d.m(t)};xr.requestFormReset=function(t){wr.d.r(t)};xr.unstable_batchedUpdates=function(t,e){return t(e)};xr.useFormState=function(t,e,n){return bm.H.useFormState(t,e,n)};xr.useFormStatus=function(){return bm.H.useHostTransitionStatus()};xr.version="19.2.0";function vM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vM)}catch(t){console.error(t)}}vM(),yM.exports=xr;var wM=yM.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var In=eG,bM=P,iG=wM;function ee(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function TM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qp(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function EM(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xM(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function I2(t){if(Qp(t)!==t)throw Error(ee(188))}function sG(t){var e=t.alternate;if(!e){if(e=Qp(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return I2(i),t;if(s===r)return I2(i),e;s=s.sibling}throw Error(ee(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function AM(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=AM(t),e!==null)return e;t=t.sibling}return null}var kt=Object.assign,aG=Symbol.for("react.element"),Yy=Symbol.for("react.transitional.element"),im=Symbol.for("react.portal"),ah=Symbol.for("react.fragment"),SM=Symbol.for("react.strict_mode"),kE=Symbol.for("react.profiler"),IM=Symbol.for("react.consumer"),Ea=Symbol.for("react.context"),Kx=Symbol.for("react.forward_ref"),OE=Symbol.for("react.suspense"),ME=Symbol.for("react.suspense_list"),Wx=Symbol.for("react.memo"),Ro=Symbol.for("react.lazy"),VE=Symbol.for("react.activity"),oG=Symbol.for("react.memo_cache_sentinel"),R2=Symbol.iterator;function Uf(t){return t===null||typeof t!="object"?null:(t=R2&&t[R2]||t["@@iterator"],typeof t=="function"?t:null)}var lG=Symbol.for("react.client.reference");function LE(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===lG?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ah:return"Fragment";case kE:return"Profiler";case SM:return"StrictMode";case OE:return"Suspense";case ME:return"SuspenseList";case VE:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case im:return"Portal";case Ea:return t.displayName||"Context";case IM:return(t._context.displayName||"Context")+".Consumer";case Kx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wx:return e=t.displayName||null,e!==null?e:LE(t.type)||"Memo";case Ro:e=t._payload,t=t._init;try{return LE(t(e))}catch{}}return null}var sm=Array.isArray,Ie=bM.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=iG.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ac={pending:!1,data:null,method:null,action:null},UE=[],oh=-1;function $s(t){return{current:t}}function Un(t){0>oh||(t.current=UE[oh],UE[oh]=null,oh--)}function Et(t,e){oh++,UE[oh]=t.current,t.current=e}var Vs=$s(null),ap=$s(null),Ho=$s(null),d0=$s(null);function f0(t,e){switch(Et(Ho,e),Et(ap,t),Et(Vs,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?ON(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=ON(e),t=KL(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Un(Vs),Et(Vs,t)}function jh(){Un(Vs),Un(ap),Un(Ho)}function jE(t){t.memoizedState!==null&&Et(d0,t);var e=Vs.current,n=KL(e,t.type);e!==n&&(Et(ap,t),Et(Vs,n))}function m0(t){ap.current===t&&(Un(Vs),Un(ap)),d0.current===t&&(Un(d0),yp._currentValue=Ac)}var oT,C2;function sc(t){if(oT===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);oT=e&&e[1]||"",C2=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oT+t+C2}var lT=!1;function cT(t,e){if(!t||lT)return"";lT=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(e){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(_){var g=_}Reflect.construct(t,[],p)}else{try{p.call()}catch(_){g=_}t.call(p.prototype)}}else{try{throw Error()}catch(_){g=_}(p=t())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(_){if(_&&g&&typeof _.stack=="string")return[_.stack,g.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var c=a.split(`
`),h=o.split(`
`);for(i=r=0;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;for(;i<h.length&&!h[i].includes("DetermineComponentFrameRoot");)i++;if(r===c.length||i===h.length)for(r=c.length-1,i=h.length-1;1<=r&&0<=i&&c[r]!==h[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==h[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==h[i]){var f=`
`+c[r].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=r&&0<=i);break}}}finally{lT=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?sc(n):""}function cG(t,e){switch(t.tag){case 26:case 27:case 5:return sc(t.type);case 16:return sc("Lazy");case 13:return t.child!==e&&e!==null?sc("Suspense Fallback"):sc("Suspense");case 19:return sc("SuspenseList");case 0:case 15:return cT(t.type,!1);case 11:return cT(t.type.render,!1);case 1:return cT(t.type,!0);case 31:return sc("Activity");default:return""}}function N2(t){try{var e="",n=null;do e+=cG(t,n),n=t,t=t.return;while(t);return e}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var FE=Object.prototype.hasOwnProperty,Yx=In.unstable_scheduleCallback,uT=In.unstable_cancelCallback,uG=In.unstable_shouldYield,hG=In.unstable_requestPaint,li=In.unstable_now,dG=In.unstable_getCurrentPriorityLevel,RM=In.unstable_ImmediatePriority,CM=In.unstable_UserBlockingPriority,p0=In.unstable_NormalPriority,fG=In.unstable_LowPriority,NM=In.unstable_IdlePriority,mG=In.log,pG=In.unstable_setDisableYieldValue,Xp=null,ci=null;function Vo(t){if(typeof mG=="function"&&pG(t),ci&&typeof ci.setStrictMode=="function")try{ci.setStrictMode(Xp,t)}catch{}}var ui=Math.clz32?Math.clz32:_G,gG=Math.log,yG=Math.LN2;function _G(t){return t>>>=0,t===0?32:31-(gG(t)/yG|0)|0}var Qy=256,Xy=262144,Jy=4194304;function ac(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ov(t,e,n){var r=t.pendingLanes;if(r===0)return 0;var i=0,s=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=r&134217727;return o!==0?(r=o&~s,r!==0?i=ac(r):(a&=o,a!==0?i=ac(a):n||(n=o&~t,n!==0&&(i=ac(n))))):(o=r&~s,o!==0?i=ac(o):a!==0?i=ac(a):n||(n=r&~t,n!==0&&(i=ac(n)))),i===0?0:e!==0&&e!==i&&!(e&s)&&(s=i&-i,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:i}function Jp(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function vG(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PM(){var t=Jy;return Jy<<=1,!(Jy&62914560)&&(Jy=4194304),t}function hT(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Zp(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function wG(t,e,n,r,i,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,c=t.expirationTimes,h=t.hiddenUpdates;for(n=a&~n;0<n;){var f=31-ui(n),p=1<<f;o[f]=0,c[f]=-1;var g=h[f];if(g!==null)for(h[f]=null,f=0;f<g.length;f++){var _=g[f];_!==null&&(_.lane&=-536870913)}n&=~p}r!==0&&DM(t,r,0),s!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=s&~(a&~e))}function DM(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var r=31-ui(e);t.entangledLanes|=e,t.entanglements[r]=t.entanglements[r]|1073741824|n&261930}function kM(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ui(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}function OM(t,e){var n=e&-e;return n=n&42?1:Qx(n),n&(t.suspendedLanes|e)?0:n}function Qx(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Xx(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function MM(){var t=at.p;return t!==0?t:(t=window.event,t===void 0?32:i5(t.type))}function P2(t,e){var n=at.p;try{return at.p=t,e()}finally{at.p=n}}var Tl=Math.random().toString(36).slice(2),Gn="__reactFiber$"+Tl,zr="__reactProps$"+Tl,Ed="__reactContainer$"+Tl,zE="__reactEvents$"+Tl,bG="__reactListeners$"+Tl,TG="__reactHandles$"+Tl,D2="__reactResources$"+Tl,eg="__reactMarker$"+Tl;function Jx(t){delete t[Gn],delete t[zr],delete t[zE],delete t[bG],delete t[TG]}function lh(t){var e=t[Gn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ed]||n[Gn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jN(t);t!==null;){if(n=t[Gn])return n;t=jN(t)}return e}t=n,n=t.parentNode}return null}function xd(t){if(t=t[Gn]||t[Ed]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function am(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(ee(33))}function Ah(t){var e=t[D2];return e||(e=t[D2]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Vn(t){t[eg]=!0}var VM=new Set,LM={};function Zc(t,e){Fh(t,e),Fh(t+"Capture",e)}function Fh(t,e){for(LM[t]=e,t=0;t<e.length;t++)VM.add(e[t])}var EG=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),k2={},O2={};function xG(t){return FE.call(O2,t)?!0:FE.call(k2,t)?!1:EG.test(t)?O2[t]=!0:(k2[t]=!0,!1)}function I_(t,e,n){if(xG(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var r=e.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Zy(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function pa(t,e,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+r)}}function Ni(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function UM(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function AG(t,e,n){var r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function BE(t){if(!t._valueTracker){var e=UM(t)?"checked":"value";t._valueTracker=AG(t,e,""+t[e])}}function jM(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=UM(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function g0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var SG=/[\n"\\]/g;function ki(t){return t.replace(SG,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function qE(t,e,n,r,i,s,a,o){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Ni(e)):t.value!==""+Ni(e)&&(t.value=""+Ni(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?HE(t,a,Ni(e)):n!=null?HE(t,a,Ni(n)):r!=null&&t.removeAttribute("value"),i==null&&s!=null&&(t.defaultChecked=!!s),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+Ni(o):t.removeAttribute("name")}function FM(t,e,n,r,i,s,a,o){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){BE(t);return}n=n!=null?""+Ni(n):"",e=e!=null?""+Ni(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}r=r??i,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=o?t.checked:!!r,t.defaultChecked=!!r,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),BE(t)}function HE(t,e,n){e==="number"&&g0(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Sh(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ni(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function zM(t,e,n){if(e!=null&&(e=""+Ni(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Ni(n):""}function BM(t,e,n,r){if(e==null){if(r!=null){if(n!=null)throw Error(ee(92));if(sm(r)){if(1<r.length)throw Error(ee(93));r=r[0]}n=r}n==null&&(n=""),e=n}n=Ni(e),t.defaultValue=n,r=t.textContent,r===n&&r!==""&&r!==null&&(t.value=r),BE(t)}function zh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var IG=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function M2(t,e,n){var r=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":r?t.setProperty(e,n):typeof n!="number"||n===0||IG.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function qM(t,e,n){if(e!=null&&typeof e!="object")throw Error(ee(62));if(t=t.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||e!=null&&e.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var i in e)r=e[i],e.hasOwnProperty(i)&&n[i]!==r&&M2(t,i,r)}else for(var s in e)e.hasOwnProperty(s)&&M2(t,s,e[s])}function Zx(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RG=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),CG=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function R_(t){return CG.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function xa(){}var GE=null;function eA(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ch=null,Ih=null;function V2(t){var e=xd(t);if(e&&(t=e.stateNode)){var n=t[zr]||null;e:switch(t=e.stateNode,e.type){case"input":if(qE(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ki(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=r[zr]||null;if(!i)throw Error(ee(90));qE(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)r=n[e],r.form===t.form&&jM(r)}break e;case"textarea":zM(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Sh(t,!!n.multiple,e,!1)}}}var dT=!1;function HM(t,e,n){if(dT)return t(e,n);dT=!0;try{var r=t(e);return r}finally{if(dT=!1,(ch!==null||Ih!==null)&&($v(),ch&&(e=ch,t=Ih,Ih=ch=null,V2(e),t)))for(e=0;e<t.length;e++)V2(t[e])}}function op(t,e){var n=t.stateNode;if(n===null)return null;var r=n[zr]||null;if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var Va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$E=!1;if(Va)try{var jf={};Object.defineProperty(jf,"passive",{get:function(){$E=!0}}),window.addEventListener("test",jf,jf),window.removeEventListener("test",jf,jf)}catch{$E=!1}var Lo=null,tA=null,C_=null;function GM(){if(C_)return C_;var t,e=tA,n=e.length,r,i="value"in Lo?Lo.value:Lo.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return C_=i.slice(t,1<r?1-r:void 0)}function N_(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function e_(){return!0}function L2(){return!1}function Hr(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?e_:L2,this.isPropagationStopped=L2,this}return kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=e_)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=e_)},persist:function(){},isPersistent:e_}),e}var eu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mv=Hr(eu),tg=kt({},eu,{view:0,detail:0}),NG=Hr(tg),fT,mT,Ff,Vv=kt({},tg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nA,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ff&&(Ff&&t.type==="mousemove"?(fT=t.screenX-Ff.screenX,mT=t.screenY-Ff.screenY):mT=fT=0,Ff=t),fT)},movementY:function(t){return"movementY"in t?t.movementY:mT}}),U2=Hr(Vv),PG=kt({},Vv,{dataTransfer:0}),DG=Hr(PG),kG=kt({},tg,{relatedTarget:0}),pT=Hr(kG),OG=kt({},eu,{animationName:0,elapsedTime:0,pseudoElement:0}),MG=Hr(OG),VG=kt({},eu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),LG=Hr(VG),UG=kt({},eu,{data:0}),j2=Hr(UG),jG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BG(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zG[t])?!!e[t]:!1}function nA(){return BG}var qG=kt({},tg,{key:function(t){if(t.key){var e=jG[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=N_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FG[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nA,charCode:function(t){return t.type==="keypress"?N_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?N_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),HG=Hr(qG),GG=kt({},Vv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),F2=Hr(GG),$G=kt({},tg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nA}),KG=Hr($G),WG=kt({},eu,{propertyName:0,elapsedTime:0,pseudoElement:0}),YG=Hr(WG),QG=kt({},Vv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),XG=Hr(QG),JG=kt({},eu,{newState:0,oldState:0}),ZG=Hr(JG),e$=[9,13,27,32],rA=Va&&"CompositionEvent"in window,Tm=null;Va&&"documentMode"in document&&(Tm=document.documentMode);var t$=Va&&"TextEvent"in window&&!Tm,$M=Va&&(!rA||Tm&&8<Tm&&11>=Tm),z2=" ",B2=!1;function KM(t,e){switch(t){case"keyup":return e$.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function WM(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var uh=!1;function n$(t,e){switch(t){case"compositionend":return WM(e);case"keypress":return e.which!==32?null:(B2=!0,z2);case"textInput":return t=e.data,t===z2&&B2?null:t;default:return null}}function r$(t,e){if(uh)return t==="compositionend"||!rA&&KM(t,e)?(t=GM(),C_=tA=Lo=null,uh=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $M&&e.locale!=="ko"?null:e.data;default:return null}}var i$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function q2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!i$[t.type]:e==="textarea"}function YM(t,e,n,r){ch?Ih?Ih.push(r):Ih=[r]:ch=r,e=O0(e,"onChange"),0<e.length&&(n=new Mv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Em=null,lp=null;function s$(t){HL(t,0)}function Lv(t){var e=am(t);if(jM(e))return t}function H2(t,e){if(t==="change")return e}var QM=!1;if(Va){var gT;if(Va){var yT="oninput"in document;if(!yT){var G2=document.createElement("div");G2.setAttribute("oninput","return;"),yT=typeof G2.oninput=="function"}gT=yT}else gT=!1;QM=gT&&(!document.documentMode||9<document.documentMode)}function $2(){Em&&(Em.detachEvent("onpropertychange",XM),lp=Em=null)}function XM(t){if(t.propertyName==="value"&&Lv(lp)){var e=[];YM(e,lp,t,eA(t)),HM(s$,e)}}function a$(t,e,n){t==="focusin"?($2(),Em=e,lp=n,Em.attachEvent("onpropertychange",XM)):t==="focusout"&&$2()}function o$(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lv(lp)}function l$(t,e){if(t==="click")return Lv(e)}function c$(t,e){if(t==="input"||t==="change")return Lv(e)}function u$(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mi=typeof Object.is=="function"?Object.is:u$;function cp(t,e){if(mi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!FE.call(e,i)||!mi(t[i],e[i]))return!1}return!0}function K2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function W2(t,e){var n=K2(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=K2(n)}}function JM(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?JM(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZM(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=g0(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=g0(t.document)}return e}function iA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var h$=Va&&"documentMode"in document&&11>=document.documentMode,hh=null,KE=null,xm=null,WE=!1;function Y2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;WE||hh==null||hh!==g0(r)||(r=hh,"selectionStart"in r&&iA(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xm&&cp(xm,r)||(xm=r,r=O0(KE,"onSelect"),0<r.length&&(e=new Mv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=hh)))}function nc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var dh={animationend:nc("Animation","AnimationEnd"),animationiteration:nc("Animation","AnimationIteration"),animationstart:nc("Animation","AnimationStart"),transitionrun:nc("Transition","TransitionRun"),transitionstart:nc("Transition","TransitionStart"),transitioncancel:nc("Transition","TransitionCancel"),transitionend:nc("Transition","TransitionEnd")},_T={},eV={};Va&&(eV=document.createElement("div").style,"AnimationEvent"in window||(delete dh.animationend.animation,delete dh.animationiteration.animation,delete dh.animationstart.animation),"TransitionEvent"in window||delete dh.transitionend.transition);function tu(t){if(_T[t])return _T[t];if(!dh[t])return t;var e=dh[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in eV)return _T[t]=e[n];return t}var tV=tu("animationend"),nV=tu("animationiteration"),rV=tu("animationstart"),d$=tu("transitionrun"),f$=tu("transitionstart"),m$=tu("transitioncancel"),iV=tu("transitionend"),sV=new Map,YE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");YE.push("scrollEnd");function cs(t,e){sV.set(t,e),Zc(e,[t])}var y0=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ci=[],fh=0,sA=0;function Uv(){for(var t=fh,e=sA=fh=0;e<t;){var n=Ci[e];Ci[e++]=null;var r=Ci[e];Ci[e++]=null;var i=Ci[e];Ci[e++]=null;var s=Ci[e];if(Ci[e++]=null,r!==null&&i!==null){var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}s!==0&&aV(n,i,s)}}function jv(t,e,n,r){Ci[fh++]=t,Ci[fh++]=e,Ci[fh++]=n,Ci[fh++]=r,sA|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function aA(t,e,n,r){return jv(t,e,n,r),_0(t)}function nu(t,e){return jv(t,null,null,e),_0(t)}function aV(t,e,n){t.lanes|=n;var r=t.alternate;r!==null&&(r.lanes|=n);for(var i=!1,s=t.return;s!==null;)s.childLanes|=n,r=s.alternate,r!==null&&(r.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(i=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,i&&e!==null&&(i=31-ui(n),t=s.hiddenUpdates,r=t[i],r===null?t[i]=[e]:r.push(e),e.lane=n|536870912),s):null}function _0(t){if(50<km)throw km=0,g1=null,Error(ee(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var mh={};function p$(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(t,e,n,r){return new p$(t,e,n,r)}function oA(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ra(t,e){var n=t.alternate;return n===null?(n=ri(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function oV(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function P_(t,e,n,r,i,s){var a=0;if(r=t,typeof t=="function")oA(t)&&(a=1);else if(typeof t=="string")a=wK(t,n,Vs.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case VE:return t=ri(31,n,e,i),t.elementType=VE,t.lanes=s,t;case ah:return Sc(n.children,i,s,e);case SM:a=8,i|=24;break;case kE:return t=ri(12,n,e,i|2),t.elementType=kE,t.lanes=s,t;case OE:return t=ri(13,n,e,i),t.elementType=OE,t.lanes=s,t;case ME:return t=ri(19,n,e,i),t.elementType=ME,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ea:a=10;break e;case IM:a=9;break e;case Kx:a=11;break e;case Wx:a=14;break e;case Ro:a=16,r=null;break e}a=29,n=Error(ee(130,t===null?"null":typeof t,"")),r=null}return e=ri(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Sc(t,e,n,r){return t=ri(7,t,r,e),t.lanes=n,t}function vT(t,e,n){return t=ri(6,t,null,e),t.lanes=n,t}function lV(t){var e=ri(18,null,null,0);return e.stateNode=t,e}function wT(t,e,n){return e=ri(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Q2=new WeakMap;function Oi(t,e){if(typeof t=="object"&&t!==null){var n=Q2.get(t);return n!==void 0?n:(e={value:t,source:e,stack:N2(e)},Q2.set(t,e),e)}return{value:t,source:e,stack:N2(e)}}var ph=[],gh=0,v0=null,up=0,Pi=[],Di=0,il=null,Cs=1,Ns="";function wa(t,e){ph[gh++]=up,ph[gh++]=v0,v0=t,up=e}function cV(t,e,n){Pi[Di++]=Cs,Pi[Di++]=Ns,Pi[Di++]=il,il=t;var r=Cs;t=Ns;var i=32-ui(r)-1;r&=~(1<<i),n+=1;var s=32-ui(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Cs=1<<32-ui(e)+i|n<<i|r,Ns=s+t}else Cs=1<<s|n<<i|r,Ns=t}function lA(t){t.return!==null&&(wa(t,1),cV(t,1,0))}function cA(t){for(;t===v0;)v0=ph[--gh],ph[gh]=null,up=ph[--gh],ph[gh]=null;for(;t===il;)il=Pi[--Di],Pi[Di]=null,Ns=Pi[--Di],Pi[Di]=null,Cs=Pi[--Di],Pi[Di]=null}function uV(t,e){Pi[Di++]=Cs,Pi[Di++]=Ns,Pi[Di++]=il,Cs=e.id,Ns=e.overflow,il=t}var $n=null,Ct=null,Je=!1,Go=null,Mi=!1,QE=Error(ee(519));function sl(t){var e=Error(ee(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hp(Oi(e,t)),QE}function X2(t){var e=t.stateNode,n=t.type,r=t.memoizedProps;switch(e[Gn]=t,e[zr]=r,n){case"dialog":He("cancel",e),He("close",e);break;case"iframe":case"object":case"embed":He("load",e);break;case"video":case"audio":for(n=0;n<pp.length;n++)He(pp[n],e);break;case"source":He("error",e);break;case"img":case"image":case"link":He("error",e),He("load",e);break;case"details":He("toggle",e);break;case"input":He("invalid",e),FM(e,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":He("invalid",e);break;case"textarea":He("invalid",e),BM(e,r.value,r.defaultValue,r.children)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||r.suppressHydrationWarning===!0||$L(e.textContent,n)?(r.popover!=null&&(He("beforetoggle",e),He("toggle",e)),r.onScroll!=null&&He("scroll",e),r.onScrollEnd!=null&&He("scrollend",e),r.onClick!=null&&(e.onclick=xa),e=!0):e=!1,e||sl(t,!0)}function J2(t){for($n=t.return;$n;)switch($n.tag){case 5:case 31:case 13:Mi=!1;return;case 27:case 3:Mi=!0;return;default:$n=$n.return}}function zu(t){if(t!==$n)return!1;if(!Je)return J2(t),Je=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||b1(t.type,t.memoizedProps)),n=!n),n&&Ct&&sl(t),J2(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));Ct=UN(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));Ct=UN(t)}else e===27?(e=Ct,El(t.type)?(t=A1,A1=null,Ct=t):Ct=e):Ct=$n?ji(t.stateNode.nextSibling):null;return!0}function Mc(){Ct=$n=null,Je=!1}function bT(){var t=Go;return t!==null&&(Mr===null?Mr=t:Mr.push.apply(Mr,t),Go=null),t}function hp(t){Go===null?Go=[t]:Go.push(t)}var XE=$s(null),ru=null,Aa=null;function Po(t,e,n){Et(XE,e._currentValue),e._currentValue=n}function Ca(t){t._currentValue=XE.current,Un(XE)}function JE(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ZE(t,e,n,r){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){var a=i.child;s=s.firstContext;e:for(;s!==null;){var o=s;s=i;for(var c=0;c<e.length;c++)if(o.context===e[c]){s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),JE(s.return,n,t),r||(a=null);break e}s=o.next}}else if(i.tag===18){if(a=i.return,a===null)throw Error(ee(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),JE(a,n,t),a=null}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}}function Ad(t,e,n,r){t=null;for(var i=e,s=!1;i!==null;){if(!s){if(i.flags&524288)s=!0;else if(i.flags&262144)break}if(i.tag===10){var a=i.alternate;if(a===null)throw Error(ee(387));if(a=a.memoizedProps,a!==null){var o=i.type;mi(i.pendingProps.value,a.value)||(t!==null?t.push(o):t=[o])}}else if(i===d0.current){if(a=i.alternate,a===null)throw Error(ee(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(yp):t=[yp])}i=i.return}t!==null&&ZE(e,t,n,r),e.flags|=262144}function w0(t){for(t=t.firstContext;t!==null;){if(!mi(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Vc(t){ru=t,Aa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Wn(t){return hV(ru,t)}function t_(t,e){return ru===null&&Vc(t),hV(t,e)}function hV(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Aa===null){if(t===null)throw Error(ee(308));Aa=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Aa=Aa.next=e;return n}var g$=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,r){t.push(r)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},y$=In.unstable_scheduleCallback,_$=In.unstable_NormalPriority,_n={$$typeof:Ea,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uA(){return{controller:new g$,data:new Map,refCount:0}}function ng(t){t.refCount--,t.refCount===0&&y$(_$,function(){t.controller.abort()})}var Am=null,e1=0,Bh=0,Rh=null;function v$(t,e){if(Am===null){var n=Am=[];e1=0,Bh=MA(),Rh={status:"pending",value:void 0,then:function(r){n.push(r)}}}return e1++,e.then(Z2,Z2),e}function Z2(){if(--e1===0&&Am!==null){Rh!==null&&(Rh.status="fulfilled");var t=Am;Am=null,Bh=0,Rh=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function w$(t,e){var n=[],r={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){r.status="fulfilled",r.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(r.status="rejected",r.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),r}var eN=Ie.S;Ie.S=function(t,e){AL=li(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&v$(t,e),eN!==null&&eN(t,e)};var Ic=$s(null);function hA(){var t=Ic.current;return t!==null?t:Tt.pooledCache}function D_(t,e){e===null?Et(Ic,Ic.current):Et(Ic,e.pool)}function dV(){var t=hA();return t===null?null:{parent:_n._currentValue,pool:t}}var Sd=Error(ee(460)),dA=Error(ee(474)),Fv=Error(ee(542)),b0={then:function(){}};function tN(t){return t=t.status,t==="fulfilled"||t==="rejected"}function fV(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(xa,xa),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,rN(t),t;default:if(typeof e.status=="string")e.then(xa,xa);else{if(t=Tt,t!==null&&100<t.shellSuspendCounter)throw Error(ee(482));t=e,t.status="pending",t.then(function(r){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=r}},function(r){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=r}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,rN(t),t}throw Rc=e,Sd}}function oc(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Rc=n,Sd):n}}var Rc=null;function nN(){if(Rc===null)throw Error(ee(459));var t=Rc;return Rc=null,t}function rN(t){if(t===Sd||t===Fv)throw Error(ee(483))}var Ch=null,dp=0;function n_(t){var e=dp;return dp+=1,Ch===null&&(Ch=[]),fV(Ch,t,e)}function zf(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function r_(t,e){throw e.$$typeof===aG?Error(ee(525)):(t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function mV(t){function e(b,T){if(t){var E=b.deletions;E===null?(b.deletions=[T],b.flags|=16):E.push(T)}}function n(b,T){if(!t)return null;for(;T!==null;)e(b,T),T=T.sibling;return null}function r(b){for(var T=new Map;b!==null;)b.key!==null?T.set(b.key,b):T.set(b.index,b),b=b.sibling;return T}function i(b,T){return b=Ra(b,T),b.index=0,b.sibling=null,b}function s(b,T,E){return b.index=E,t?(E=b.alternate,E!==null?(E=E.index,E<T?(b.flags|=67108866,T):E):(b.flags|=67108866,T)):(b.flags|=1048576,T)}function a(b){return t&&b.alternate===null&&(b.flags|=67108866),b}function o(b,T,E,O){return T===null||T.tag!==6?(T=vT(E,b.mode,O),T.return=b,T):(T=i(T,E),T.return=b,T)}function c(b,T,E,O){var j=E.type;return j===ah?f(b,T,E.props.children,O,E.key):T!==null&&(T.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ro&&oc(j)===T.type)?(T=i(T,E.props),zf(T,E),T.return=b,T):(T=P_(E.type,E.key,E.props,null,b.mode,O),zf(T,E),T.return=b,T)}function h(b,T,E,O){return T===null||T.tag!==4||T.stateNode.containerInfo!==E.containerInfo||T.stateNode.implementation!==E.implementation?(T=wT(E,b.mode,O),T.return=b,T):(T=i(T,E.children||[]),T.return=b,T)}function f(b,T,E,O,j){return T===null||T.tag!==7?(T=Sc(E,b.mode,O,j),T.return=b,T):(T=i(T,E),T.return=b,T)}function p(b,T,E){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=vT(""+T,b.mode,E),T.return=b,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Yy:return E=P_(T.type,T.key,T.props,null,b.mode,E),zf(E,T),E.return=b,E;case im:return T=wT(T,b.mode,E),T.return=b,T;case Ro:return T=oc(T),p(b,T,E)}if(sm(T)||Uf(T))return T=Sc(T,b.mode,E,null),T.return=b,T;if(typeof T.then=="function")return p(b,n_(T),E);if(T.$$typeof===Ea)return p(b,t_(b,T),E);r_(b,T)}return null}function g(b,T,E,O){var j=T!==null?T.key:null;if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return j!==null?null:o(b,T,""+E,O);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Yy:return E.key===j?c(b,T,E,O):null;case im:return E.key===j?h(b,T,E,O):null;case Ro:return E=oc(E),g(b,T,E,O)}if(sm(E)||Uf(E))return j!==null?null:f(b,T,E,O,null);if(typeof E.then=="function")return g(b,T,n_(E),O);if(E.$$typeof===Ea)return g(b,T,t_(b,E),O);r_(b,E)}return null}function _(b,T,E,O,j){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return b=b.get(E)||null,o(T,b,""+O,j);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Yy:return b=b.get(O.key===null?E:O.key)||null,c(T,b,O,j);case im:return b=b.get(O.key===null?E:O.key)||null,h(T,b,O,j);case Ro:return O=oc(O),_(b,T,E,O,j)}if(sm(O)||Uf(O))return b=b.get(E)||null,f(T,b,O,j,null);if(typeof O.then=="function")return _(b,T,E,n_(O),j);if(O.$$typeof===Ea)return _(b,T,E,t_(T,O),j);r_(T,O)}return null}function R(b,T,E,O){for(var j=null,q=null,S=T,C=T=0,k=null;S!==null&&C<E.length;C++){S.index>C?(k=S,S=null):k=S.sibling;var M=g(b,S,E[C],O);if(M===null){S===null&&(S=k);break}t&&S&&M.alternate===null&&e(b,S),T=s(M,T,C),q===null?j=M:q.sibling=M,q=M,S=k}if(C===E.length)return n(b,S),Je&&wa(b,C),j;if(S===null){for(;C<E.length;C++)S=p(b,E[C],O),S!==null&&(T=s(S,T,C),q===null?j=S:q.sibling=S,q=S);return Je&&wa(b,C),j}for(S=r(S);C<E.length;C++)k=_(S,b,C,E[C],O),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?C:k.key),T=s(k,T,C),q===null?j=k:q.sibling=k,q=k);return t&&S.forEach(function(U){return e(b,U)}),Je&&wa(b,C),j}function N(b,T,E,O){if(E==null)throw Error(ee(151));for(var j=null,q=null,S=T,C=T=0,k=null,M=E.next();S!==null&&!M.done;C++,M=E.next()){S.index>C?(k=S,S=null):k=S.sibling;var U=g(b,S,M.value,O);if(U===null){S===null&&(S=k);break}t&&S&&U.alternate===null&&e(b,S),T=s(U,T,C),q===null?j=U:q.sibling=U,q=U,S=k}if(M.done)return n(b,S),Je&&wa(b,C),j;if(S===null){for(;!M.done;C++,M=E.next())M=p(b,M.value,O),M!==null&&(T=s(M,T,C),q===null?j=M:q.sibling=M,q=M);return Je&&wa(b,C),j}for(S=r(S);!M.done;C++,M=E.next())M=_(S,b,C,M.value,O),M!==null&&(t&&M.alternate!==null&&S.delete(M.key===null?C:M.key),T=s(M,T,C),q===null?j=M:q.sibling=M,q=M);return t&&S.forEach(function(B){return e(b,B)}),Je&&wa(b,C),j}function A(b,T,E,O){if(typeof E=="object"&&E!==null&&E.type===ah&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Yy:e:{for(var j=E.key;T!==null;){if(T.key===j){if(j=E.type,j===ah){if(T.tag===7){n(b,T.sibling),O=i(T,E.props.children),O.return=b,b=O;break e}}else if(T.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ro&&oc(j)===T.type){n(b,T.sibling),O=i(T,E.props),zf(O,E),O.return=b,b=O;break e}n(b,T);break}else e(b,T);T=T.sibling}E.type===ah?(O=Sc(E.props.children,b.mode,O,E.key),O.return=b,b=O):(O=P_(E.type,E.key,E.props,null,b.mode,O),zf(O,E),O.return=b,b=O)}return a(b);case im:e:{for(j=E.key;T!==null;){if(T.key===j)if(T.tag===4&&T.stateNode.containerInfo===E.containerInfo&&T.stateNode.implementation===E.implementation){n(b,T.sibling),O=i(T,E.children||[]),O.return=b,b=O;break e}else{n(b,T);break}else e(b,T);T=T.sibling}O=wT(E,b.mode,O),O.return=b,b=O}return a(b);case Ro:return E=oc(E),A(b,T,E,O)}if(sm(E))return R(b,T,E,O);if(Uf(E)){if(j=Uf(E),typeof j!="function")throw Error(ee(150));return E=j.call(E),N(b,T,E,O)}if(typeof E.then=="function")return A(b,T,n_(E),O);if(E.$$typeof===Ea)return A(b,T,t_(b,E),O);r_(b,E)}return typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint"?(E=""+E,T!==null&&T.tag===6?(n(b,T.sibling),O=i(T,E),O.return=b,b=O):(n(b,T),O=vT(E,b.mode,O),O.return=b,b=O),a(b)):n(b,T)}return function(b,T,E,O){try{dp=0;var j=A(b,T,E,O);return Ch=null,j}catch(S){if(S===Sd||S===Fv)throw S;var q=ri(29,S,null,b.mode);return q.lanes=O,q.return=b,q}finally{}}}var Lc=mV(!0),pV=mV(!1),Co=!1;function fA(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function t1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function $o(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ko(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,st&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,e=_0(t),aV(t,null,n),e}return jv(t,r,e,n),_0(t)}function Sm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kM(t,n)}}function TT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var n1=!1;function Im(){if(n1){var t=Rh;if(t!==null)throw t}}function Rm(t,e,n,r){n1=!1;var i=t.updateQueue;Co=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,h=c.next;c.next=null,a===null?s=h:a.next=h,a=c;var f=t.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==a&&(o===null?f.firstBaseUpdate=h:o.next=h,f.lastBaseUpdate=c))}if(s!==null){var p=i.baseState;a=0,f=h=c=null,o=s;do{var g=o.lane&-536870913,_=g!==o.lane;if(_?(Ye&g)===g:(r&g)===g){g!==0&&g===Bh&&(n1=!0),f!==null&&(f=f.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var R=t,N=o;g=e;var A=n;switch(N.tag){case 1:if(R=N.payload,typeof R=="function"){p=R.call(A,p,g);break e}p=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=N.payload,g=typeof R=="function"?R.call(A,p,g):R,g==null)break e;p=kt({},p,g);break e;case 2:Co=!0}}g=o.callback,g!==null&&(t.flags|=64,_&&(t.flags|=8192),_=i.callbacks,_===null?i.callbacks=[g]:_.push(g))}else _={lane:g,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(h=f=_,c=p):f=f.next=_,a|=g;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;_=o,o=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);f===null&&(c=p),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=f,s===null&&(i.shared.lanes=0),ol|=a,t.lanes=a,t.memoizedState=p}}function gV(t,e){if(typeof t!="function")throw Error(ee(191,t));t.call(e)}function yV(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)gV(n[t],e)}var qh=$s(null),T0=$s(0);function iN(t,e){t=Fa,Et(T0,t),Et(qh,e),Fa=t|e.baseLanes}function r1(){Et(T0,Fa),Et(qh,qh.current)}function mA(){Fa=T0.current,Un(qh),Un(T0)}var pi=$s(null),Ui=null;function Do(t){var e=t.alternate;Et(ln,ln.current&1),Et(pi,t),Ui===null&&(e===null||qh.current!==null||e.memoizedState!==null)&&(Ui=t)}function i1(t){Et(ln,ln.current),Et(pi,t),Ui===null&&(Ui=t)}function _V(t){t.tag===22?(Et(ln,ln.current),Et(pi,t),Ui===null&&(Ui=t)):ko()}function ko(){Et(ln,ln.current),Et(pi,pi.current)}function ti(t){Un(pi),Ui===t&&(Ui=null),Un(ln)}var ln=$s(0);function E0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||E1(n)||x1(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var La=0,ke=null,wt=null,gn=null,x0=!1,Nh=!1,Uc=!1,A0=0,fp=0,Ph=null,b$=0;function Qt(){throw Error(ee(321))}function pA(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mi(t[n],e[n]))return!1;return!0}function gA(t,e,n,r,i,s){return La=s,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ie.H=t===null||t.memoizedState===null?YV:IA,Uc=!1,s=n(r,i),Uc=!1,Nh&&(s=wV(e,n,r,i)),vV(t),s}function vV(t){Ie.H=mp;var e=wt!==null&&wt.next!==null;if(La=0,gn=wt=ke=null,x0=!1,fp=0,Ph=null,e)throw Error(ee(300));t===null||wn||(t=t.dependencies,t!==null&&w0(t)&&(wn=!0))}function wV(t,e,n,r){ke=t;var i=0;do{if(Nh&&(Ph=null),fp=0,Nh=!1,25<=i)throw Error(ee(301));if(i+=1,gn=wt=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}Ie.H=QV,s=e(n,r)}while(Nh);return s}function T$(){var t=Ie.H,e=t.useState()[0];return e=typeof e.then=="function"?rg(e):e,t=t.useState()[0],(wt!==null?wt.memoizedState:null)!==t&&(ke.flags|=1024),e}function yA(){var t=A0!==0;return A0=0,t}function _A(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function vA(t){if(x0){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}x0=!1}La=0,gn=wt=ke=null,Nh=!1,fp=A0=0,Ph=null}function gr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?ke.memoizedState=gn=t:gn=gn.next=t,gn}function un(){if(wt===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=wt.next;var e=gn===null?ke.memoizedState:gn.next;if(e!==null)gn=e,wt=t;else{if(t===null)throw ke.alternate===null?Error(ee(467)):Error(ee(310));wt=t,t={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},gn===null?ke.memoizedState=gn=t:gn=gn.next=t}return gn}function zv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rg(t){var e=fp;return fp+=1,Ph===null&&(Ph=[]),t=fV(Ph,t,e),e=ke,(gn===null?e.memoizedState:gn.next)===null&&(e=e.alternate,Ie.H=e===null||e.memoizedState===null?YV:IA),t}function Bv(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return rg(t);if(t.$$typeof===Ea)return Wn(t)}throw Error(ee(438,String(t)))}function wA(t){var e=null,n=ke.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var r=ke.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(e={data:r.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=zv(),ke.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),r=0;r<t;r++)n[r]=oG;return e.index++,n}function Ua(t,e){return typeof e=="function"?e(t):e}function k_(t){var e=un();return bA(e,wt,t)}function bA(t,e,n){var r=t.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=n;var i=t.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}e.baseQueue=i=s,r.pending=null}if(s=t.baseState,i===null)t.memoizedState=s;else{e=i.next;var o=a=null,c=null,h=e,f=!1;do{var p=h.lane&-536870913;if(p!==h.lane?(Ye&p)===p:(La&p)===p){var g=h.revertLane;if(g===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),p===Bh&&(f=!0);else if((La&g)===g){h=h.next,g===Bh&&(f=!0);continue}else p={lane:0,revertLane:h.revertLane,gesture:null,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},c===null?(o=c=p,a=s):c=c.next=p,ke.lanes|=g,ol|=g;p=h.action,Uc&&n(s,p),s=h.hasEagerState?h.eagerState:n(s,p)}else g={lane:p,revertLane:h.revertLane,gesture:h.gesture,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},c===null?(o=c=g,a=s):c=c.next=g,ke.lanes|=p,ol|=p;h=h.next}while(h!==null&&h!==e);if(c===null?a=s:c.next=o,!mi(s,t.memoizedState)&&(wn=!0,f&&(n=Rh,n!==null)))throw n;t.memoizedState=s,t.baseState=a,t.baseQueue=c,r.lastRenderedState=s}return i===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function ET(t){var e=un(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);mi(s,e.memoizedState)||(wn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function bV(t,e,n){var r=ke,i=un(),s=Je;if(s){if(n===void 0)throw Error(ee(407));n=n()}else n=e();var a=!mi((wt||i).memoizedState,n);if(a&&(i.memoizedState=n,wn=!0),i=i.queue,TA(xV.bind(null,r,i,t),[t]),i.getSnapshot!==e||a||gn!==null&&gn.memoizedState.tag&1){if(r.flags|=2048,Hh(9,{destroy:void 0},EV.bind(null,r,i,n,e),null),Tt===null)throw Error(ee(349));s||La&127||TV(r,e,n)}return n}function TV(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ke.updateQueue,e===null?(e=zv(),ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function EV(t,e,n,r){e.value=n,e.getSnapshot=r,AV(e)&&SV(t)}function xV(t,e,n){return n(function(){AV(e)&&SV(t)})}function AV(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mi(t,n)}catch{return!0}}function SV(t){var e=nu(t,2);e!==null&&Fr(e,t,2)}function s1(t){var e=gr();if(typeof t=="function"){var n=t;if(t=n(),Uc){Vo(!0);try{n()}finally{Vo(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:t},e}function IV(t,e,n,r){return t.baseState=n,bA(t,wt,typeof r=="function"?r:Ua)}function E$(t,e,n,r,i){if(Hv(t))throw Error(ee(485));if(t=e.action,t!==null){var s={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};Ie.T!==null?n(!0):s.isTransition=!1,r(s),n=e.pending,n===null?(s.next=e.pending=s,RV(e,s)):(s.next=n.next,e.pending=n.next=s)}}function RV(t,e){var n=e.action,r=e.payload,i=t.state;if(e.isTransition){var s=Ie.T,a={};Ie.T=a;try{var o=n(i,r),c=Ie.S;c!==null&&c(a,o),sN(t,e,o)}catch(h){a1(t,e,h)}finally{s!==null&&a.types!==null&&(s.types=a.types),Ie.T=s}}else try{s=n(i,r),sN(t,e,s)}catch(h){a1(t,e,h)}}function sN(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){aN(t,e,r)},function(r){return a1(t,e,r)}):aN(t,e,n)}function aN(t,e,n){e.status="fulfilled",e.value=n,CV(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,RV(t,n)))}function a1(t,e,n){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do e.status="rejected",e.reason=n,CV(e),e=e.next;while(e!==r)}t.action=null}function CV(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function NV(t,e){return e}function oN(t,e){if(Je){var n=Tt.formState;if(n!==null){e:{var r=ke;if(Je){if(Ct){t:{for(var i=Ct,s=Mi;i.nodeType!==8;){if(!s){i=null;break t}if(i=ji(i.nextSibling),i===null){i=null;break t}}s=i.data,i=s==="F!"||s==="F"?i:null}if(i){Ct=ji(i.nextSibling),r=i.data==="F!";break e}}sl(r)}r=!1}r&&(e=n[0])}}return n=gr(),n.memoizedState=n.baseState=e,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:NV,lastRenderedState:e},n.queue=r,n=$V.bind(null,ke,r),r.dispatch=n,r=s1(!1),s=SA.bind(null,ke,!1,r.queue),r=gr(),i={state:e,dispatch:null,action:t,pending:null},r.queue=i,n=E$.bind(null,ke,i,s,n),i.dispatch=n,r.memoizedState=t,[e,n,!1]}function lN(t){var e=un();return PV(e,wt,t)}function PV(t,e,n){if(e=bA(t,e,NV)[0],t=k_(Ua)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var r=rg(e)}catch(a){throw a===Sd?Fv:a}else r=e;e=un();var i=e.queue,s=i.dispatch;return n!==e.memoizedState&&(ke.flags|=2048,Hh(9,{destroy:void 0},x$.bind(null,i,n),null)),[r,s,t]}function x$(t,e){t.action=e}function cN(t){var e=un(),n=wt;if(n!==null)return PV(e,n,t);un(),e=e.memoizedState,n=un();var r=n.queue.dispatch;return n.memoizedState=t,[e,r,!1]}function Hh(t,e,n,r){return t={tag:t,create:n,deps:r,inst:e,next:null},e=ke.updateQueue,e===null&&(e=zv(),ke.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function DV(){return un().memoizedState}function O_(t,e,n,r){var i=gr();ke.flags|=t,i.memoizedState=Hh(1|e,{destroy:void 0},n,r===void 0?null:r)}function qv(t,e,n,r){var i=un();r=r===void 0?null:r;var s=i.memoizedState.inst;wt!==null&&r!==null&&pA(r,wt.memoizedState.deps)?i.memoizedState=Hh(e,s,n,r):(ke.flags|=t,i.memoizedState=Hh(1|e,s,n,r))}function uN(t,e){O_(8390656,8,t,e)}function TA(t,e){qv(2048,8,t,e)}function A$(t){ke.flags|=4;var e=ke.updateQueue;if(e===null)e=zv(),ke.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function kV(t){var e=un().memoizedState;return A$({ref:e,nextImpl:t}),function(){if(st&2)throw Error(ee(440));return e.impl.apply(void 0,arguments)}}function OV(t,e){return qv(4,2,t,e)}function MV(t,e){return qv(4,4,t,e)}function VV(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function LV(t,e,n){n=n!=null?n.concat([t]):null,qv(4,4,VV.bind(null,e,t),n)}function EA(){}function UV(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return e!==null&&pA(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function jV(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;if(e!==null&&pA(e,r[1]))return r[0];if(r=t(),Uc){Vo(!0);try{t()}finally{Vo(!1)}}return n.memoizedState=[r,e],r}function xA(t,e,n){return n===void 0||La&1073741824&&!(Ye&261930)?t.memoizedState=e:(t.memoizedState=n,t=IL(),ke.lanes|=t,ol|=t,n)}function FV(t,e,n,r){return mi(n,e)?n:qh.current!==null?(t=xA(t,n,r),mi(t,e)||(wn=!0),t):!(La&42)||La&1073741824&&!(Ye&261930)?(wn=!0,t.memoizedState=n):(t=IL(),ke.lanes|=t,ol|=t,e)}function zV(t,e,n,r,i){var s=at.p;at.p=s!==0&&8>s?s:8;var a=Ie.T,o={};Ie.T=o,SA(t,!1,e,n);try{var c=i(),h=Ie.S;if(h!==null&&h(o,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=w$(c,r);Cm(t,e,f,hi(t))}else Cm(t,e,r,hi(t))}catch(p){Cm(t,e,{then:function(){},status:"rejected",reason:p},hi())}finally{at.p=s,a!==null&&o.types!==null&&(a.types=o.types),Ie.T=a}}function S$(){}function o1(t,e,n,r){if(t.tag!==5)throw Error(ee(476));var i=BV(t).queue;zV(t,i,e,Ac,n===null?S$:function(){return qV(t),n(r)})}function BV(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Ac,baseState:Ac,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:Ac},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function qV(t){var e=BV(t);e.next===null&&(e=t.alternate.memoizedState),Cm(t,e.next.queue,{},hi())}function AA(){return Wn(yp)}function HV(){return un().memoizedState}function GV(){return un().memoizedState}function I$(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=hi();t=$o(n);var r=Ko(e,t,n);r!==null&&(Fr(r,e,n),Sm(r,e,n)),e={cache:uA()},t.payload=e;return}e=e.return}}function R$(t,e,n){var r=hi();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Hv(t)?KV(e,n):(n=aA(t,e,n,r),n!==null&&(Fr(n,t,r),WV(n,e,r)))}function $V(t,e,n){var r=hi();Cm(t,e,n,r)}function Cm(t,e,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hv(t))KV(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,mi(o,a))return jv(t,e,i,0),Tt===null&&Uv(),!1}catch{}finally{}if(n=aA(t,e,i,r),n!==null)return Fr(n,t,r),WV(n,e,r),!0}return!1}function SA(t,e,n,r){if(r={lane:2,revertLane:MA(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Hv(t)){if(e)throw Error(ee(479))}else e=aA(t,n,r,2),e!==null&&Fr(e,t,2)}function Hv(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function KV(t,e){Nh=x0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function WV(t,e,n){if(n&4194048){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kM(t,n)}}var mp={readContext:Wn,use:Bv,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt};mp.useEffectEvent=Qt;var YV={readContext:Wn,use:Bv,useCallback:function(t,e){return gr().memoizedState=[t,e===void 0?null:e],t},useContext:Wn,useEffect:uN,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,O_(4194308,4,VV.bind(null,e,t),n)},useLayoutEffect:function(t,e){return O_(4194308,4,t,e)},useInsertionEffect:function(t,e){O_(4,2,t,e)},useMemo:function(t,e){var n=gr();e=e===void 0?null:e;var r=t();if(Uc){Vo(!0);try{t()}finally{Vo(!1)}}return n.memoizedState=[r,e],r},useReducer:function(t,e,n){var r=gr();if(n!==void 0){var i=n(e);if(Uc){Vo(!0);try{n(e)}finally{Vo(!1)}}}else i=e;return r.memoizedState=r.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},r.queue=t,t=t.dispatch=R$.bind(null,ke,t),[r.memoizedState,t]},useRef:function(t){var e=gr();return t={current:t},e.memoizedState=t},useState:function(t){t=s1(t);var e=t.queue,n=$V.bind(null,ke,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:EA,useDeferredValue:function(t,e){var n=gr();return xA(n,t,e)},useTransition:function(){var t=s1(!1);return t=zV.bind(null,ke,t.queue,!0,!1),gr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var r=ke,i=gr();if(Je){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Tt===null)throw Error(ee(349));Ye&127||TV(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,uN(xV.bind(null,r,s,t),[t]),r.flags|=2048,Hh(9,{destroy:void 0},EV.bind(null,r,s,n,e),null),n},useId:function(){var t=gr(),e=Tt.identifierPrefix;if(Je){var n=Ns,r=Cs;n=(r&~(1<<32-ui(r)-1)).toString(32)+n,e="_"+e+"R_"+n,n=A0++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=b$++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:AA,useFormState:oN,useActionState:oN,useOptimistic:function(t){var e=gr();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=SA.bind(null,ke,!0,n),n.dispatch=e,[t,e]},useMemoCache:wA,useCacheRefresh:function(){return gr().memoizedState=I$.bind(null,ke)},useEffectEvent:function(t){var e=gr(),n={impl:t};return e.memoizedState=n,function(){if(st&2)throw Error(ee(440));return n.impl.apply(void 0,arguments)}}},IA={readContext:Wn,use:Bv,useCallback:UV,useContext:Wn,useEffect:TA,useImperativeHandle:LV,useInsertionEffect:OV,useLayoutEffect:MV,useMemo:jV,useReducer:k_,useRef:DV,useState:function(){return k_(Ua)},useDebugValue:EA,useDeferredValue:function(t,e){var n=un();return FV(n,wt.memoizedState,t,e)},useTransition:function(){var t=k_(Ua)[0],e=un().memoizedState;return[typeof t=="boolean"?t:rg(t),e]},useSyncExternalStore:bV,useId:HV,useHostTransitionStatus:AA,useFormState:lN,useActionState:lN,useOptimistic:function(t,e){var n=un();return IV(n,wt,t,e)},useMemoCache:wA,useCacheRefresh:GV};IA.useEffectEvent=kV;var QV={readContext:Wn,use:Bv,useCallback:UV,useContext:Wn,useEffect:TA,useImperativeHandle:LV,useInsertionEffect:OV,useLayoutEffect:MV,useMemo:jV,useReducer:ET,useRef:DV,useState:function(){return ET(Ua)},useDebugValue:EA,useDeferredValue:function(t,e){var n=un();return wt===null?xA(n,t,e):FV(n,wt.memoizedState,t,e)},useTransition:function(){var t=ET(Ua)[0],e=un().memoizedState;return[typeof t=="boolean"?t:rg(t),e]},useSyncExternalStore:bV,useId:HV,useHostTransitionStatus:AA,useFormState:cN,useActionState:cN,useOptimistic:function(t,e){var n=un();return wt!==null?IV(n,wt,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:wA,useCacheRefresh:GV};QV.useEffectEvent=kV;function xT(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:kt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var l1={enqueueSetState:function(t,e,n){t=t._reactInternals;var r=hi(),i=$o(r);i.payload=e,n!=null&&(i.callback=n),e=Ko(t,i,r),e!==null&&(Fr(e,t,r),Sm(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=hi(),i=$o(r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ko(t,i,r),e!==null&&(Fr(e,t,r),Sm(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hi(),r=$o(n);r.tag=2,e!=null&&(r.callback=e),e=Ko(t,r,n),e!==null&&(Fr(e,t,n),Sm(e,t,n))}};function hN(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!cp(n,r)||!cp(i,s):!0}function dN(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&l1.enqueueReplaceState(e,e.state,null)}function jc(t,e){var n=e;if("ref"in e){n={};for(var r in e)r!=="ref"&&(n[r]=e[r])}if(t=t.defaultProps){n===e&&(n=kt({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}function XV(t){y0(t)}function JV(t){console.error(t)}function ZV(t){y0(t)}function S0(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(r){setTimeout(function(){throw r})}}function fN(t,e,n){try{var r=t.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function c1(t,e,n){return n=$o(n),n.tag=3,n.payload={element:null},n.callback=function(){S0(t,e)},n}function eL(t){return t=$o(t),t.tag=3,t}function tL(t,e,n,r){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=r.value;t.payload=function(){return i(s)},t.callback=function(){fN(e,n,r)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){fN(e,n,r),typeof i!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var o=r.stack;this.componentDidCatch(r.value,{componentStack:o!==null?o:""})})}function C$(t,e,n,r,i){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(e=n.alternate,e!==null&&Ad(e,n,i,!0),n=pi.current,n!==null){switch(n.tag){case 31:case 13:return Ui===null?P0():n.alternate===null&&Zt===0&&(Zt=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===b0?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([r]):e.add(r),MT(t,r,i)),!1;case 22:return n.flags|=65536,r===b0?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([r]):n.add(r)),MT(t,r,i)),!1}throw Error(ee(435,n.tag))}return MT(t,r,i),P0(),!1}if(Je)return e=pi.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,r!==QE&&(t=Error(ee(422),{cause:r}),hp(Oi(t,n)))):(r!==QE&&(e=Error(ee(423),{cause:r}),hp(Oi(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,r=Oi(r,n),i=c1(t.stateNode,r,i),TT(t,i),Zt!==4&&(Zt=2)),!1;var s=Error(ee(520),{cause:r});if(s=Oi(s,n),Dm===null?Dm=[s]:Dm.push(s),Zt!==4&&(Zt=2),e===null)return!0;r=Oi(r,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=c1(n.stateNode,r,t),TT(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Wo===null||!Wo.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,i=eL(i),tL(i,t,n,r),TT(n,i),!1}n=n.return}while(n!==null);return!1}var RA=Error(ee(461)),wn=!1;function qn(t,e,n,r){e.child=t===null?pV(e,null,n,r):Lc(e,t.child,n,r)}function mN(t,e,n,r,i){n=n.render;var s=e.ref;if("ref"in r){var a={};for(var o in r)o!=="ref"&&(a[o]=r[o])}else a=r;return Vc(e),r=gA(t,e,n,a,s,i),o=yA(),t!==null&&!wn?(_A(t,e,i),ja(t,e,i)):(Je&&o&&lA(e),e.flags|=1,qn(t,e,r,i),e.child)}function pN(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!oA(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,nL(t,e,s,r,i)):(t=P_(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!CA(t,i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:cp,n(a,r)&&t.ref===e.ref)return ja(t,e,i)}return e.flags|=1,t=Ra(s,r),t.ref=e.ref,t.return=e,e.child=t}function nL(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(cp(s,r)&&t.ref===e.ref)if(wn=!1,e.pendingProps=r=s,CA(t,i))t.flags&131072&&(wn=!0);else return e.lanes=t.lanes,ja(t,e,i)}return u1(t,e,n,r,i)}function rL(t,e,n,r){var i=r.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if(e.flags&128){if(s=s!==null?s.baseLanes|n:n,t!==null){for(r=e.child=t.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~s}else r=0,e.child=null;return gN(t,e,s,n,r)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&D_(e,s!==null?s.cachePool:null),s!==null?iN(e,s):r1(),_V(e);else return r=e.lanes=536870912,gN(t,e,s!==null?s.baseLanes|n:n,n,r)}else s!==null?(D_(e,s.cachePool),iN(e,s),ko(),e.memoizedState=null):(t!==null&&D_(e,null),r1(),ko());return qn(t,e,i,n),e.child}function om(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function gN(t,e,n,r,i){var s=hA();return s=s===null?null:{parent:_n._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&D_(e,null),r1(),_V(e),t!==null&&Ad(t,e,r,!0),e.childLanes=i,null}function M_(t,e){return e=I0({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function yN(t,e,n){return Lc(e,t.child,null,n),t=M_(e,e.pendingProps),t.flags|=2,ti(e),e.memoizedState=null,t}function N$(t,e,n){var r=e.pendingProps,i=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(Je){if(r.mode==="hidden")return t=M_(e,r),e.lanes=536870912,om(null,t);if(i1(e),(t=Ct)?(t=YL(t,Mi),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:il!==null?{id:Cs,overflow:Ns}:null,retryLane:536870912,hydrationErrors:null},n=lV(t),n.return=e,e.child=n,$n=e,Ct=null)):t=null,t===null)throw sl(e);return e.lanes=536870912,null}return M_(e,r)}var s=t.memoizedState;if(s!==null){var a=s.dehydrated;if(i1(e),i)if(e.flags&256)e.flags&=-257,e=yN(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(ee(558));else if(wn||Ad(t,e,n,!1),i=(n&t.childLanes)!==0,wn||i){if(r=Tt,r!==null&&(a=OM(r,n),a!==0&&a!==s.retryLane))throw s.retryLane=a,nu(t,a),Fr(r,t,a),RA;P0(),e=yN(t,e,n)}else t=s.treeContext,Ct=ji(a.nextSibling),$n=e,Je=!0,Go=null,Mi=!1,t!==null&&uV(e,t),e=M_(e,r),e.flags|=4096;return e}return t=Ra(t.child,{mode:r.mode,children:r.children}),t.ref=e.ref,e.child=t,t.return=e,t}function V_(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(ee(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function u1(t,e,n,r,i){return Vc(e),n=gA(t,e,n,r,void 0,i),r=yA(),t!==null&&!wn?(_A(t,e,i),ja(t,e,i)):(Je&&r&&lA(e),e.flags|=1,qn(t,e,n,i),e.child)}function _N(t,e,n,r,i,s){return Vc(e),e.updateQueue=null,n=wV(e,r,n,i),vV(t),r=yA(),t!==null&&!wn?(_A(t,e,s),ja(t,e,s)):(Je&&r&&lA(e),e.flags|=1,qn(t,e,n,s),e.child)}function vN(t,e,n,r,i){if(Vc(e),e.stateNode===null){var s=mh,a=n.contextType;typeof a=="object"&&a!==null&&(s=Wn(a)),s=new n(r,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=l1,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=r,s.state=e.memoizedState,s.refs={},fA(e),a=n.contextType,s.context=typeof a=="object"&&a!==null?Wn(a):mh,s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(xT(e,n,a,r),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&l1.enqueueReplaceState(s,s.state,null),Rm(e,r,s,i),Im(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!0}else if(t===null){s=e.stateNode;var o=e.memoizedProps,c=jc(n,o);s.props=c;var h=s.context,f=n.contextType;a=mh,typeof f=="object"&&f!==null&&(a=Wn(f));var p=n.getDerivedStateFromProps;f=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o||h!==a)&&dN(e,s,r,a),Co=!1;var g=e.memoizedState;s.state=g,Rm(e,r,s,i),Im(),h=e.memoizedState,o||g!==h||Co?(typeof p=="function"&&(xT(e,n,p,r),h=e.memoizedState),(c=Co||hN(e,n,c,r,g,h,a))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),s.props=r,s.state=h,s.context=a,r=c):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,t1(t,e),a=e.memoizedProps,f=jc(n,a),s.props=f,p=e.pendingProps,g=s.context,h=n.contextType,c=mh,typeof h=="object"&&h!==null&&(c=Wn(h)),o=n.getDerivedStateFromProps,(h=typeof o=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||g!==c)&&dN(e,s,r,c),Co=!1,g=e.memoizedState,s.state=g,Rm(e,r,s,i),Im();var _=e.memoizedState;a!==p||g!==_||Co||t!==null&&t.dependencies!==null&&w0(t.dependencies)?(typeof o=="function"&&(xT(e,n,o,r),_=e.memoizedState),(f=Co||hN(e,n,f,r,g,_,c)||t!==null&&t.dependencies!==null&&w0(t.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,_,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,_,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),s.props=r,s.state=_,s.context=c,r=f):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return s=r,V_(t,e),r=(e.flags&128)!==0,s||r?(s=e.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&r?(e.child=Lc(e,t.child,null,i),e.child=Lc(e,null,n,i)):qn(t,e,n,i),e.memoizedState=s.state,t=e.child):t=ja(t,e,i),t}function wN(t,e,n,r){return Mc(),e.flags|=256,qn(t,e,n,r),e.child}var AT={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ST(t){return{baseLanes:t,cachePool:dV()}}function IT(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=ii),t}function iL(t,e,n){var r=e.pendingProps,i=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(ln.current&2)!==0),a&&(i=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(Je){if(i?Do(e):ko(),(t=Ct)?(t=YL(t,Mi),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:il!==null?{id:Cs,overflow:Ns}:null,retryLane:536870912,hydrationErrors:null},n=lV(t),n.return=e,e.child=n,$n=e,Ct=null)):t=null,t===null)throw sl(e);return x1(t)?e.lanes=32:e.lanes=536870912,null}var o=r.children;return r=r.fallback,i?(ko(),i=e.mode,o=I0({mode:"hidden",children:o},i),r=Sc(r,i,n,null),o.return=e,r.return=e,o.sibling=r,e.child=o,r=e.child,r.memoizedState=ST(n),r.childLanes=IT(t,a,n),e.memoizedState=AT,om(null,r)):(Do(e),h1(e,o))}var c=t.memoizedState;if(c!==null&&(o=c.dehydrated,o!==null)){if(s)e.flags&256?(Do(e),e.flags&=-257,e=RT(t,e,n)):e.memoizedState!==null?(ko(),e.child=t.child,e.flags|=128,e=null):(ko(),o=r.fallback,i=e.mode,r=I0({mode:"visible",children:r.children},i),o=Sc(o,i,n,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,Lc(e,t.child,null,n),r=e.child,r.memoizedState=ST(n),r.childLanes=IT(t,a,n),e.memoizedState=AT,e=om(null,r));else if(Do(e),x1(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var h=a.dgst;a=h,r=Error(ee(419)),r.stack="",r.digest=a,hp({value:r,source:null,stack:null}),e=RT(t,e,n)}else if(wn||Ad(t,e,n,!1),a=(n&t.childLanes)!==0,wn||a){if(a=Tt,a!==null&&(r=OM(a,n),r!==0&&r!==c.retryLane))throw c.retryLane=r,nu(t,r),Fr(a,t,r),RA;E1(o)||P0(),e=RT(t,e,n)}else E1(o)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,Ct=ji(o.nextSibling),$n=e,Je=!0,Go=null,Mi=!1,t!==null&&uV(e,t),e=h1(e,r.children),e.flags|=4096);return e}return i?(ko(),o=r.fallback,i=e.mode,c=t.child,h=c.sibling,r=Ra(c,{mode:"hidden",children:r.children}),r.subtreeFlags=c.subtreeFlags&65011712,h!==null?o=Ra(h,o):(o=Sc(o,i,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,om(null,r),r=e.child,o=t.child.memoizedState,o===null?o=ST(n):(i=o.cachePool,i!==null?(c=_n._currentValue,i=i.parent!==c?{parent:c,pool:c}:i):i=dV(),o={baseLanes:o.baseLanes|n,cachePool:i}),r.memoizedState=o,r.childLanes=IT(t,a,n),e.memoizedState=AT,om(t.child,r)):(Do(e),n=t.child,t=n.sibling,n=Ra(n,{mode:"visible",children:r.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function h1(t,e){return e=I0({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function I0(t,e){return t=ri(22,t,null,e),t.lanes=0,t}function RT(t,e,n){return Lc(e,t.child,null,n),t=h1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bN(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),JE(t.return,e,n)}function CT(t,e,n,r,i,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.treeForkCount=s)}function sL(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;r=r.children;var a=ln.current,o=(a&2)!==0;if(o?(a=a&1|2,e.flags|=128):a&=1,Et(ln,a),qn(t,e,r,n),r=Je?up:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bN(t,n,e);else if(t.tag===19)bN(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&E0(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),CT(e,!1,i,n,s,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&E0(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}CT(e,!0,n,null,s,r);break;case"together":CT(e,!1,null,null,void 0,r);break;default:e.memoizedState=null}return e.child}function ja(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ol|=e.lanes,!(n&e.childLanes))if(t!==null){if(Ad(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=Ra(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ra(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function CA(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&w0(t)))}function P$(t,e,n){switch(e.tag){case 3:f0(e,e.stateNode.containerInfo),Po(e,_n,t.memoizedState.cache),Mc();break;case 27:case 5:jE(e);break;case 4:f0(e,e.stateNode.containerInfo);break;case 10:Po(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,i1(e),null;break;case 13:var r=e.memoizedState;if(r!==null)return r.dehydrated!==null?(Do(e),e.flags|=128,null):n&e.child.childLanes?iL(t,e,n):(Do(e),t=ja(t,e,n),t!==null?t.sibling:null);Do(e);break;case 19:var i=(t.flags&128)!==0;if(r=(n&e.childLanes)!==0,r||(Ad(t,e,n,!1),r=(n&e.childLanes)!==0),i){if(r)return sL(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Et(ln,ln.current),r)break;return null;case 22:return e.lanes=0,rL(t,e,n,e.pendingProps);case 24:Po(e,_n,t.memoizedState.cache)}return ja(t,e,n)}function aL(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)wn=!0;else{if(!CA(t,n)&&!(e.flags&128))return wn=!1,P$(t,e,n);wn=!!(t.flags&131072)}else wn=!1,Je&&e.flags&1048576&&cV(e,up,e.index);switch(e.lanes=0,e.tag){case 16:e:{var r=e.pendingProps;if(t=oc(e.elementType),e.type=t,typeof t=="function")oA(t)?(r=jc(t,r),e.tag=1,e=vN(null,e,t,r,n)):(e.tag=0,e=u1(null,e,t,r,n));else{if(t!=null){var i=t.$$typeof;if(i===Kx){e.tag=11,e=mN(null,e,t,r,n);break e}else if(i===Wx){e.tag=14,e=pN(null,e,t,r,n);break e}}throw e=LE(t)||t,Error(ee(306,e,""))}}return e;case 0:return u1(t,e,e.type,e.pendingProps,n);case 1:return r=e.type,i=jc(r,e.pendingProps),vN(t,e,r,i,n);case 3:e:{if(f0(e,e.stateNode.containerInfo),t===null)throw Error(ee(387));r=e.pendingProps;var s=e.memoizedState;i=s.element,t1(t,e),Rm(e,r,null,n);var a=e.memoizedState;if(r=a.cache,Po(e,_n,r),r!==s.cache&&ZE(e,[_n],n,!0),Im(),r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=wN(t,e,r,n);break e}else if(r!==i){i=Oi(Error(ee(424)),e),hp(i),e=wN(t,e,r,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ct=ji(t.firstChild),$n=e,Je=!0,Go=null,Mi=!0,n=pV(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Mc(),r===i){e=ja(t,e,n);break e}qn(t,e,r,n)}e=e.child}return e;case 26:return V_(t,e),t===null?(n=zN(e.type,null,e.pendingProps,null))?e.memoizedState=n:Je||(n=e.type,t=e.pendingProps,r=M0(Ho.current).createElement(n),r[Gn]=e,r[zr]=t,Yn(r,n,t),Vn(r),e.stateNode=r):e.memoizedState=zN(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return jE(e),t===null&&Je&&(r=e.stateNode=QL(e.type,e.pendingProps,Ho.current),$n=e,Mi=!0,i=Ct,El(e.type)?(A1=i,Ct=ji(r.firstChild)):Ct=i),qn(t,e,e.pendingProps.children,n),V_(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Je&&((i=r=Ct)&&(r=oK(r,e.type,e.pendingProps,Mi),r!==null?(e.stateNode=r,$n=e,Ct=ji(r.firstChild),Mi=!1,i=!0):i=!1),i||sl(e)),jE(e),i=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,r=s.children,b1(i,s)?r=null:a!==null&&b1(i,a)&&(e.flags|=32),e.memoizedState!==null&&(i=gA(t,e,T$,null,null,n),yp._currentValue=i),V_(t,e),qn(t,e,r,n),e.child;case 6:return t===null&&Je&&((t=n=Ct)&&(n=lK(n,e.pendingProps,Mi),n!==null?(e.stateNode=n,$n=e,Ct=null,t=!0):t=!1),t||sl(e)),null;case 13:return iL(t,e,n);case 4:return f0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Lc(e,null,r,n):qn(t,e,r,n),e.child;case 11:return mN(t,e,e.type,e.pendingProps,n);case 7:return qn(t,e,e.pendingProps,n),e.child;case 8:return qn(t,e,e.pendingProps.children,n),e.child;case 12:return qn(t,e,e.pendingProps.children,n),e.child;case 10:return r=e.pendingProps,Po(e,e.type,r.value),qn(t,e,r.children,n),e.child;case 9:return i=e.type._context,r=e.pendingProps.children,Vc(e),i=Wn(i),r=r(i),e.flags|=1,qn(t,e,r,n),e.child;case 14:return pN(t,e,e.type,e.pendingProps,n);case 15:return nL(t,e,e.type,e.pendingProps,n);case 19:return sL(t,e,n);case 31:return N$(t,e,n);case 22:return rL(t,e,n,e.pendingProps);case 24:return Vc(e),r=Wn(_n),t===null?(i=hA(),i===null&&(i=Tt,s=uA(),i.pooledCache=s,s.refCount++,s!==null&&(i.pooledCacheLanes|=n),i=s),e.memoizedState={parent:r,cache:i},fA(e),Po(e,_n,i)):(t.lanes&n&&(t1(t,e),Rm(e,null,null,n),Im()),i=t.memoizedState,s=e.memoizedState,i.parent!==r?(i={parent:r,cache:r},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),Po(e,_n,r)):(r=s.cache,Po(e,_n,r),r!==i.cache&&ZE(e,[_n],n,!0))),qn(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(ee(156,e.tag))}function ga(t){t.flags|=4}function NT(t,e,n,r,i){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(i&335544128)===i)if(t.stateNode.complete)t.flags|=8192;else if(NL())t.flags|=8192;else throw Rc=b0,dA}else t.flags&=-16777217}function TN(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!ZL(e))if(NL())t.flags|=8192;else throw Rc=b0,dA}function i_(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?PM():536870912,t.lanes|=e,Gh|=e)}function Bf(t,e){if(!Je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function It(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function D$(t,e,n){var r=e.pendingProps;switch(cA(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(e),null;case 1:return It(e),null;case 3:return n=e.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),Ca(_n),jh(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(zu(e)?ga(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bT())),It(e),null;case 26:var i=e.type,s=e.memoizedState;return t===null?(ga(e),s!==null?(It(e),TN(e,s)):(It(e),NT(e,i,null,r,n))):s?s!==t.memoizedState?(ga(e),It(e),TN(e,s)):(It(e),e.flags&=-16777217):(t=t.memoizedProps,t!==r&&ga(e),It(e),NT(e,i,t,r,n)),null;case 27:if(m0(e),n=Ho.current,i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==r&&ga(e);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return It(e),null}t=Vs.current,zu(e)?X2(e):(t=QL(i,r,n),e.stateNode=t,ga(e))}return It(e),null;case 5:if(m0(e),i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==r&&ga(e);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return It(e),null}if(s=Vs.current,zu(e))X2(e);else{var a=M0(Ho.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":s=a.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof r.is=="string"?a.createElement("select",{is:r.is}):a.createElement("select"),r.multiple?s.multiple=!0:r.size&&(s.size=r.size);break;default:s=typeof r.is=="string"?a.createElement(i,{is:r.is}):a.createElement(i)}}s[Gn]=e,s[zr]=r;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=s;e:switch(Yn(s,i,r),i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ga(e)}}return It(e),NT(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==r&&ga(e);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(t=Ho.current,zu(e)){if(t=e.stateNode,n=e.memoizedProps,r=null,i=$n,i!==null)switch(i.tag){case 27:case 5:r=i.memoizedProps}t[Gn]=e,t=!!(t.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||$L(t.nodeValue,n)),t||sl(e,!0)}else t=M0(t).createTextNode(r),t[Gn]=e,e.stateNode=t}return It(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(r=zu(e),n!==null){if(t===null){if(!r)throw Error(ee(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(557));t[Gn]=e}else Mc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;It(e),t=!1}else n=bT(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(ti(e),e):(ti(e),null);if(e.flags&128)throw Error(ee(558))}return It(e),null;case 13:if(r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=zu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ee(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ee(317));i[Gn]=e}else Mc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;It(e),i=!1}else i=bT(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(ti(e),e):(ti(e),null)}return ti(e),e.flags&128?(e.lanes=n,e):(n=r!==null,t=t!==null&&t.memoizedState!==null,n&&(r=e.child,i=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(i=r.alternate.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),i_(e,e.updateQueue),It(e),null);case 4:return jh(),t===null&&VA(e.stateNode.containerInfo),It(e),null;case 10:return Ca(e.type),It(e),null;case 19:if(Un(ln),r=e.memoizedState,r===null)return It(e),null;if(i=(e.flags&128)!==0,s=r.rendering,s===null)if(i)Bf(r,!1);else{if(Zt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=E0(t),s!==null){for(e.flags|=128,Bf(r,!1),t=s.updateQueue,e.updateQueue=t,i_(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)oV(n,t),n=n.sibling;return Et(ln,ln.current&1|2),Je&&wa(e,r.treeForkCount),e.child}t=t.sibling}r.tail!==null&&li()>C0&&(e.flags|=128,i=!0,Bf(r,!1),e.lanes=4194304)}else{if(!i)if(t=E0(s),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,i_(e,t),Bf(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!Je)return It(e),null}else 2*li()-r.renderingStartTime>C0&&n!==536870912&&(e.flags|=128,i=!0,Bf(r,!1),e.lanes=4194304);r.isBackwards?(s.sibling=e.child,e.child=s):(t=r.last,t!==null?t.sibling=s:e.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=li(),t.sibling=null,n=ln.current,Et(ln,i?n&1|2:n&1),Je&&wa(e,r.treeForkCount),t):(It(e),null);case 22:case 23:return ti(e),mA(),r=e.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(e.flags|=8192):r&&(e.flags|=8192),r?n&536870912&&!(e.flags&128)&&(It(e),e.subtreeFlags&6&&(e.flags|=8192)):It(e),n=e.updateQueue,n!==null&&i_(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),r=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),r!==n&&(e.flags|=2048),t!==null&&Un(Ic),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Ca(_n),It(e),null;case 25:return null;case 30:return null}throw Error(ee(156,e.tag))}function k$(t,e){switch(cA(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ca(_n),jh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return m0(e),null;case 31:if(e.memoizedState!==null){if(ti(e),e.alternate===null)throw Error(ee(340));Mc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(ti(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));Mc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Un(ln),null;case 4:return jh(),null;case 10:return Ca(e.type),null;case 22:case 23:return ti(e),mA(),t!==null&&Un(Ic),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Ca(_n),null;case 25:return null;default:return null}}function oL(t,e){switch(cA(e),e.tag){case 3:Ca(_n),jh();break;case 26:case 27:case 5:m0(e);break;case 4:jh();break;case 31:e.memoizedState!==null&&ti(e);break;case 13:ti(e);break;case 19:Un(ln);break;case 10:Ca(e.type);break;case 22:case 23:ti(e),mA(),t!==null&&Un(Ic);break;case 24:Ca(_n)}}function ig(t,e){try{var n=e.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var i=r.next;n=i;do{if((n.tag&t)===t){r=void 0;var s=n.create,a=n.inst;r=s(),a.destroy=r}n=n.next}while(n!==i)}}catch(o){ft(e,e.return,o)}}function al(t,e,n){try{var r=e.updateQueue,i=r!==null?r.lastEffect:null;if(i!==null){var s=i.next;r=s;do{if((r.tag&t)===t){var a=r.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,i=e;var c=n,h=o;try{h()}catch(f){ft(i,c,f)}}}r=r.next}while(r!==s)}}catch(f){ft(e,e.return,f)}}function lL(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{yV(e,n)}catch(r){ft(t,t.return,r)}}}function cL(t,e,n){n.props=jc(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(r){ft(t,e,r)}}function Nm(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof n=="function"?t.refCleanup=n(r):n.current=r}}catch(i){ft(t,e,i)}}function Ps(t,e){var n=t.ref,r=t.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(i){ft(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){ft(t,e,i)}else n.current=null}function uL(t){var e=t.type,n=t.memoizedProps,r=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){ft(t,t.return,i)}}function PT(t,e,n){try{var r=t.stateNode;tK(r,t.type,n,e),r[zr]=e}catch(i){ft(t,t.return,i)}}function hL(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&El(t.type)||t.tag===4}function DT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hL(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&El(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function d1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xa));else if(r!==4&&(r===27&&El(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(d1(t,e,n),t=t.sibling;t!==null;)d1(t,e,n),t=t.sibling}function R0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(r===27&&El(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(R0(t,e,n),t=t.sibling;t!==null;)R0(t,e,n),t=t.sibling}function dL(t){var e=t.stateNode,n=t.memoizedProps;try{for(var r=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Yn(e,r,n),e[Gn]=t,e[zr]=n}catch(s){ft(t,t.return,s)}}var ba=!1,yn=!1,kT=!1,EN=typeof WeakSet=="function"?WeakSet:Set,On=null;function O$(t,e){if(t=t.containerInfo,v1=j0,t=ZM(t),iA(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,c=-1,h=0,f=0,p=t,g=null;t:for(;;){for(var _;p!==n||i!==0&&p.nodeType!==3||(o=a+i),p!==s||r!==0&&p.nodeType!==3||(c=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(_=p.firstChild)!==null;)g=p,p=_;for(;;){if(p===t)break t;if(g===n&&++h===i&&(o=a),g===s&&++f===r&&(c=a),(_=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=_}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(w1={focusedElem:t,selectionRange:n},j0=!1,On=e;On!==null;)if(e=On,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,On=t;else for(;On!==null;){switch(e=On,s=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)i=t[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var R=jc(n.type,i);t=r.getSnapshotBeforeUpdate(R,s),r.__reactInternalSnapshotBeforeUpdate=t}catch(N){ft(n,n.return,N)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)T1(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":T1(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(ee(163))}if(t=e.sibling,t!==null){t.return=e.return,On=t;break}On=e.return}}function fL(t,e,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:_a(t,n),r&4&&ig(5,n);break;case 1:if(_a(t,n),r&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){ft(n,n.return,a)}else{var i=jc(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){ft(n,n.return,a)}}r&64&&lL(n),r&512&&Nm(n,n.return);break;case 3:if(_a(t,n),r&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{yV(t,e)}catch(a){ft(n,n.return,a)}}break;case 27:e===null&&r&4&&dL(n);case 26:case 5:_a(t,n),e===null&&r&4&&uL(n),r&512&&Nm(n,n.return);break;case 12:_a(t,n);break;case 31:_a(t,n),r&4&&gL(t,n);break;case 13:_a(t,n),r&4&&yL(t,n),r&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=q$.bind(null,n),cK(t,n))));break;case 22:if(r=n.memoizedState!==null||ba,!r){e=e!==null&&e.memoizedState!==null||yn,i=ba;var s=yn;ba=r,(yn=e)&&!s?va(t,n,(n.subtreeFlags&8772)!==0):_a(t,n),ba=i,yn=s}break;case 30:break;default:_a(t,n)}}function mL(t){var e=t.alternate;e!==null&&(t.alternate=null,mL(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Jx(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Lt=null,Or=!1;function ya(t,e,n){for(n=n.child;n!==null;)pL(t,e,n),n=n.sibling}function pL(t,e,n){if(ci&&typeof ci.onCommitFiberUnmount=="function")try{ci.onCommitFiberUnmount(Xp,n)}catch{}switch(n.tag){case 26:yn||Ps(n,e),ya(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:yn||Ps(n,e);var r=Lt,i=Or;El(n.type)&&(Lt=n.stateNode,Or=!1),ya(t,e,n),Om(n.stateNode),Lt=r,Or=i;break;case 5:yn||Ps(n,e);case 6:if(r=Lt,i=Or,Lt=null,ya(t,e,n),Lt=r,Or=i,Lt!==null)if(Or)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(n.stateNode)}catch(s){ft(n,e,s)}else try{Lt.removeChild(n.stateNode)}catch(s){ft(n,e,s)}break;case 18:Lt!==null&&(Or?(t=Lt,VN(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Yh(t)):VN(Lt,n.stateNode));break;case 4:r=Lt,i=Or,Lt=n.stateNode.containerInfo,Or=!0,ya(t,e,n),Lt=r,Or=i;break;case 0:case 11:case 14:case 15:al(2,n,e),yn||al(4,n,e),ya(t,e,n);break;case 1:yn||(Ps(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"&&cL(n,e,r)),ya(t,e,n);break;case 21:ya(t,e,n);break;case 22:yn=(r=yn)||n.memoizedState!==null,ya(t,e,n),yn=r;break;default:ya(t,e,n)}}function gL(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Yh(t)}catch(n){ft(e,e.return,n)}}}function yL(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Yh(t)}catch(n){ft(e,e.return,n)}}function M$(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new EN),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new EN),e;default:throw Error(ee(435,t.tag))}}function s_(t,e){var n=M$(t);e.forEach(function(r){if(!n.has(r)){n.add(r);var i=H$.bind(null,t,r);r.then(i,i)}})}function Dr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r],s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(El(o.type)){Lt=o.stateNode,Or=!1;break e}break;case 5:Lt=o.stateNode,Or=!1;break e;case 3:case 4:Lt=o.stateNode.containerInfo,Or=!0;break e}o=o.return}if(Lt===null)throw Error(ee(160));pL(s,a,i),Lt=null,Or=!1,s=i.alternate,s!==null&&(s.return=null),i.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)_L(e,t),e=e.sibling}var ns=null;function _L(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Dr(e,t),kr(t),r&4&&(al(3,t,t.return),ig(3,t),al(5,t,t.return));break;case 1:Dr(e,t),kr(t),r&512&&(yn||n===null||Ps(n,n.return)),r&64&&ba&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var i=ns;if(Dr(e,t),kr(t),r&512&&(yn||n===null||Ps(n,n.return)),r&4){var s=n!==null?n.memoizedState:null;if(r=t.memoizedState,n===null)if(r===null)if(t.stateNode===null){e:{r=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":s=i.getElementsByTagName("title")[0],(!s||s[eg]||s[Gn]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),Yn(s,r,n),s[Gn]=t,Vn(s),r=s;break e;case"link":var a=qN("link","href",i).get(r+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(s=a[o],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}s=i.createElement(r),Yn(s,r,n),i.head.appendChild(s);break;case"meta":if(a=qN("meta","content",i).get(r+(n.content||""))){for(o=0;o<a.length;o++)if(s=a[o],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}s=i.createElement(r),Yn(s,r,n),i.head.appendChild(s);break;default:throw Error(ee(468,r))}s[Gn]=t,Vn(s),r=s}t.stateNode=r}else HN(i,t.type,t.stateNode);else t.stateNode=BN(i,r,t.memoizedProps);else s!==r?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,r===null?HN(i,t.type,t.stateNode):BN(i,r,t.memoizedProps)):r===null&&t.stateNode!==null&&PT(t,t.memoizedProps,n.memoizedProps)}break;case 27:Dr(e,t),kr(t),r&512&&(yn||n===null||Ps(n,n.return)),n!==null&&r&4&&PT(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Dr(e,t),kr(t),r&512&&(yn||n===null||Ps(n,n.return)),t.flags&32){i=t.stateNode;try{zh(i,"")}catch(R){ft(t,t.return,R)}}r&4&&t.stateNode!=null&&(i=t.memoizedProps,PT(t,i,n!==null?n.memoizedProps:i)),r&1024&&(kT=!0);break;case 6:if(Dr(e,t),kr(t),r&4){if(t.stateNode===null)throw Error(ee(162));r=t.memoizedProps,n=t.stateNode;try{n.nodeValue=r}catch(R){ft(t,t.return,R)}}break;case 3:if(j_=null,i=ns,ns=V0(e.containerInfo),Dr(e,t),ns=i,kr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Yh(e.containerInfo)}catch(R){ft(t,t.return,R)}kT&&(kT=!1,vL(t));break;case 4:r=ns,ns=V0(t.stateNode.containerInfo),Dr(e,t),kr(t),ns=r;break;case 12:Dr(e,t),kr(t);break;case 31:Dr(e,t),kr(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,s_(t,r)));break;case 13:Dr(e,t),kr(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Gv=li()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,s_(t,r)));break;case 22:i=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,h=ba,f=yn;if(ba=h||i,yn=f||c,Dr(e,t),yn=f,ba=h,kr(t),r&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||c||ba||yn||lc(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(s=c.stateNode,i)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=c.stateNode;var p=c.memoizedProps.style,g=p!=null&&p.hasOwnProperty("display")?p.display:null;o.style.display=g==null||typeof g=="boolean"?"":(""+g).trim()}}catch(R){ft(c,c.return,R)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(R){ft(c,c.return,R)}}}else if(e.tag===18){if(n===null){c=e;try{var _=c.stateNode;i?LN(_,!0):LN(c.stateNode,!1)}catch(R){ft(c,c.return,R)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}r&4&&(r=t.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,s_(t,n))));break;case 19:Dr(e,t),kr(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,s_(t,r)));break;case 30:break;case 21:break;default:Dr(e,t),kr(t)}}function kr(t){var e=t.flags;if(e&2){try{for(var n,r=t.return;r!==null;){if(hL(r)){n=r;break}r=r.return}if(n==null)throw Error(ee(160));switch(n.tag){case 27:var i=n.stateNode,s=DT(t);R0(t,s,i);break;case 5:var a=n.stateNode;n.flags&32&&(zh(a,""),n.flags&=-33);var o=DT(t);R0(t,o,a);break;case 3:case 4:var c=n.stateNode.containerInfo,h=DT(t);d1(t,h,c);break;default:throw Error(ee(161))}}catch(f){ft(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vL(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;vL(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function _a(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)fL(t,e.alternate,e),e=e.sibling}function lc(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:al(4,e,e.return),lc(e);break;case 1:Ps(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&cL(e,e.return,n),lc(e);break;case 27:Om(e.stateNode);case 26:case 5:Ps(e,e.return),lc(e);break;case 22:e.memoizedState===null&&lc(e);break;case 30:lc(e);break;default:lc(e)}t=t.sibling}}function va(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var r=e.alternate,i=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:va(i,s,n),ig(4,s);break;case 1:if(va(i,s,n),r=s,i=r.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(h){ft(r,r.return,h)}if(r=s,i=r.updateQueue,i!==null){var o=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)gV(c[i],o)}catch(h){ft(r,r.return,h)}}n&&a&64&&lL(s),Nm(s,s.return);break;case 27:dL(s);case 26:case 5:va(i,s,n),n&&r===null&&a&4&&uL(s),Nm(s,s.return);break;case 12:va(i,s,n);break;case 31:va(i,s,n),n&&a&4&&gL(i,s);break;case 13:va(i,s,n),n&&a&4&&yL(i,s);break;case 22:s.memoizedState===null&&va(i,s,n),Nm(s,s.return);break;case 30:break;default:va(i,s,n)}e=e.sibling}}function NA(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&ng(n))}function PA(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ng(t))}function es(t,e,n,r){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)wL(t,e,n,r),e=e.sibling}function wL(t,e,n,r){var i=e.flags;switch(e.tag){case 0:case 11:case 15:es(t,e,n,r),i&2048&&ig(9,e);break;case 1:es(t,e,n,r);break;case 3:es(t,e,n,r),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ng(t)));break;case 12:if(i&2048){es(t,e,n,r),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,o=s.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){ft(e,e.return,c)}}else es(t,e,n,r);break;case 31:es(t,e,n,r);break;case 13:es(t,e,n,r);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?es(t,e,n,r):Pm(t,e):s._visibility&2?es(t,e,n,r):(s._visibility|=2,Zu(t,e,n,r,(e.subtreeFlags&10256)!==0||!1)),i&2048&&NA(a,e);break;case 24:es(t,e,n,r),i&2048&&PA(e.alternate,e);break;default:es(t,e,n,r)}}function Zu(t,e,n,r,i){for(i=i&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,a=e,o=n,c=r,h=a.flags;switch(a.tag){case 0:case 11:case 15:Zu(s,a,o,c,i),ig(8,a);break;case 23:break;case 22:var f=a.stateNode;a.memoizedState!==null?f._visibility&2?Zu(s,a,o,c,i):Pm(s,a):(f._visibility|=2,Zu(s,a,o,c,i)),i&&h&2048&&NA(a.alternate,a);break;case 24:Zu(s,a,o,c,i),i&&h&2048&&PA(a.alternate,a);break;default:Zu(s,a,o,c,i)}e=e.sibling}}function Pm(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,r=e,i=r.flags;switch(r.tag){case 22:Pm(n,r),i&2048&&NA(r.alternate,r);break;case 24:Pm(n,r),i&2048&&PA(r.alternate,r);break;default:Pm(n,r)}e=e.sibling}}var lm=8192;function Bu(t,e,n){if(t.subtreeFlags&lm)for(t=t.child;t!==null;)bL(t,e,n),t=t.sibling}function bL(t,e,n){switch(t.tag){case 26:Bu(t,e,n),t.flags&lm&&t.memoizedState!==null&&bK(n,ns,t.memoizedState,t.memoizedProps);break;case 5:Bu(t,e,n);break;case 3:case 4:var r=ns;ns=V0(t.stateNode.containerInfo),Bu(t,e,n),ns=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=lm,lm=16777216,Bu(t,e,n),lm=r):Bu(t,e,n));break;default:Bu(t,e,n)}}function TL(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function qf(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];On=r,xL(r,t)}TL(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)EL(t),t=t.sibling}function EL(t){switch(t.tag){case 0:case 11:case 15:qf(t),t.flags&2048&&al(9,t,t.return);break;case 3:qf(t);break;case 12:qf(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,L_(t)):qf(t);break;default:qf(t)}}function L_(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];On=r,xL(r,t)}TL(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:al(8,e,e.return),L_(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,L_(e));break;default:L_(e)}t=t.sibling}}function xL(t,e){for(;On!==null;){var n=On;switch(n.tag){case 0:case 11:case 15:al(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:ng(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,On=r;else e:for(n=t;On!==null;){r=On;var i=r.sibling,s=r.return;if(mL(r),r===n){On=null;break e}if(i!==null){i.return=s,On=i;break e}On=s}}}var V$={getCacheForType:function(t){var e=Wn(_n),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Wn(_n).controller.signal}},L$=typeof WeakMap=="function"?WeakMap:Map,st=0,Tt=null,Ge=null,Ye=0,dt=0,Zr=null,Uo=!1,Id=!1,DA=!1,Fa=0,Zt=0,ol=0,Cc=0,kA=0,ii=0,Gh=0,Dm=null,Mr=null,f1=!1,Gv=0,AL=0,C0=1/0,N0=null,Wo=null,An=0,Yo=null,$h=null,Na=0,m1=0,p1=null,SL=null,km=0,g1=null;function hi(){return st&2&&Ye!==0?Ye&-Ye:Ie.T!==null?MA():MM()}function IL(){if(ii===0)if(!(Ye&536870912)||Je){var t=Xy;Xy<<=1,!(Xy&3932160)&&(Xy=262144),ii=t}else ii=536870912;return t=pi.current,t!==null&&(t.flags|=32),ii}function Fr(t,e,n){(t===Tt&&(dt===2||dt===9)||t.cancelPendingCommit!==null)&&(Kh(t,0),jo(t,Ye,ii,!1)),Zp(t,n),(!(st&2)||t!==Tt)&&(t===Tt&&(!(st&2)&&(Cc|=n),Zt===4&&jo(t,Ye,ii,!1)),Ks(t))}function RL(t,e,n){if(st&6)throw Error(ee(327));var r=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Jp(t,e),i=r?F$(t,e):OT(t,e,!0),s=r;do{if(i===0){Id&&!r&&jo(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!U$(n)){i=OT(t,e,!1),s=!1;continue}if(i===2){if(s=e,t.errorRecoveryDisabledLanes&s)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=t;i=Dm;var c=o.current.memoizedState.isDehydrated;if(c&&(Kh(o,a).flags|=256),a=OT(o,a,!1),a!==2){if(DA&&!c){o.errorRecoveryDisabledLanes|=s,Cc|=s,i=4;break e}s=Mr,Mr=i,s!==null&&(Mr===null?Mr=s:Mr.push.apply(Mr,s))}i=a}if(s=!1,i!==2)continue}}if(i===1){Kh(t,0),jo(t,e,0,!0);break}e:{switch(r=t,s=i,s){case 0:case 1:throw Error(ee(345));case 4:if((e&4194048)!==e)break;case 6:jo(r,e,ii,!Uo);break e;case 2:Mr=null;break;case 3:case 5:break;default:throw Error(ee(329))}if((e&62914560)===e&&(i=Gv+300-li(),10<i)){if(jo(r,e,ii,!Uo),Ov(r,0,!0)!==0)break e;Na=e,r.timeoutHandle=WL(xN.bind(null,r,n,Mr,N0,f1,e,ii,Cc,Gh,Uo,s,"Throttled",-0,0),i);break e}xN(r,n,Mr,N0,f1,e,ii,Cc,Gh,Uo,s,null,-0,0)}}break}while(!0);Ks(t)}function xN(t,e,n,r,i,s,a,o,c,h,f,p,g,_){if(t.timeoutHandle=-1,p=e.subtreeFlags,p&8192||(p&16785408)===16785408){p={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xa},bL(e,s,p);var R=(s&62914560)===s?Gv-li():(s&4194048)===s?AL-li():0;if(R=TK(p,R),R!==null){Na=s,t.cancelPendingCommit=R(SN.bind(null,t,e,s,n,r,i,a,o,c,f,p,null,g,_)),jo(t,s,a,!h);return}}SN(t,e,s,n,r,i,a,o,c)}function U$(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!mi(s(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jo(t,e,n,r){e&=~kA,e&=~Cc,t.suspendedLanes|=e,t.pingedLanes&=~e,r&&(t.warmLanes|=e),r=t.expirationTimes;for(var i=e;0<i;){var s=31-ui(i),a=1<<s;r[s]=-1,i&=~a}n!==0&&DM(t,n,e)}function $v(){return st&6?!0:(sg(0),!1)}function OA(){if(Ge!==null){if(dt===0)var t=Ge.return;else t=Ge,Aa=ru=null,vA(t),Ch=null,dp=0,t=Ge;for(;t!==null;)oL(t.alternate,t),t=t.return;Ge=null}}function Kh(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,iK(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Na=0,OA(),Tt=t,Ge=n=Ra(t.current,null),Ye=e,dt=0,Zr=null,Uo=!1,Id=Jp(t,e),DA=!1,Gh=ii=kA=Cc=ol=Zt=0,Mr=Dm=null,f1=!1,e&8&&(e|=e&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=e;0<r;){var i=31-ui(r),s=1<<i;e|=t[i],r&=~s}return Fa=e,Uv(),n}function CL(t,e){ke=null,Ie.H=mp,e===Sd||e===Fv?(e=nN(),dt=3):e===dA?(e=nN(),dt=4):dt=e===RA?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Zr=e,Ge===null&&(Zt=1,S0(t,Oi(e,t.current)))}function NL(){var t=pi.current;return t===null?!0:(Ye&4194048)===Ye?Ui===null:(Ye&62914560)===Ye||Ye&536870912?t===Ui:!1}function PL(){var t=Ie.H;return Ie.H=mp,t===null?mp:t}function DL(){var t=Ie.A;return Ie.A=V$,t}function P0(){Zt=4,Uo||(Ye&4194048)!==Ye&&pi.current!==null||(Id=!0),!(ol&134217727)&&!(Cc&134217727)||Tt===null||jo(Tt,Ye,ii,!1)}function OT(t,e,n){var r=st;st|=2;var i=PL(),s=DL();(Tt!==t||Ye!==e)&&(N0=null,Kh(t,e)),e=!1;var a=Zt;e:do try{if(dt!==0&&Ge!==null){var o=Ge,c=Zr;switch(dt){case 8:OA(),a=6;break e;case 3:case 2:case 9:case 6:pi.current===null&&(e=!0);var h=dt;if(dt=0,Zr=null,yh(t,o,c,h),n&&Id){a=0;break e}break;default:h=dt,dt=0,Zr=null,yh(t,o,c,h)}}j$(),a=Zt;break}catch(f){CL(t,f)}while(!0);return e&&t.shellSuspendCounter++,Aa=ru=null,st=r,Ie.H=i,Ie.A=s,Ge===null&&(Tt=null,Ye=0,Uv()),a}function j$(){for(;Ge!==null;)kL(Ge)}function F$(t,e){var n=st;st|=2;var r=PL(),i=DL();Tt!==t||Ye!==e?(N0=null,C0=li()+500,Kh(t,e)):Id=Jp(t,e);e:do try{if(dt!==0&&Ge!==null){e=Ge;var s=Zr;t:switch(dt){case 1:dt=0,Zr=null,yh(t,e,s,1);break;case 2:case 9:if(tN(s)){dt=0,Zr=null,AN(e);break}e=function(){dt!==2&&dt!==9||Tt!==t||(dt=7),Ks(t)},s.then(e,e);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:tN(s)?(dt=0,Zr=null,AN(e)):(dt=0,Zr=null,yh(t,e,s,7));break;case 5:var a=null;switch(Ge.tag){case 26:a=Ge.memoizedState;case 5:case 27:var o=Ge;if(a?ZL(a):o.stateNode.complete){dt=0,Zr=null;var c=o.sibling;if(c!==null)Ge=c;else{var h=o.return;h!==null?(Ge=h,Kv(h)):Ge=null}break t}}dt=0,Zr=null,yh(t,e,s,5);break;case 6:dt=0,Zr=null,yh(t,e,s,6);break;case 8:OA(),Zt=6;break e;default:throw Error(ee(462))}}z$();break}catch(f){CL(t,f)}while(!0);return Aa=ru=null,Ie.H=r,Ie.A=i,st=n,Ge!==null?0:(Tt=null,Ye=0,Uv(),Zt)}function z$(){for(;Ge!==null&&!uG();)kL(Ge)}function kL(t){var e=aL(t.alternate,t,Fa);t.memoizedProps=t.pendingProps,e===null?Kv(t):Ge=e}function AN(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=_N(n,e,e.pendingProps,e.type,void 0,Ye);break;case 11:e=_N(n,e,e.pendingProps,e.type.render,e.ref,Ye);break;case 5:vA(e);default:oL(n,e),e=Ge=oV(e,Fa),e=aL(n,e,Fa)}t.memoizedProps=t.pendingProps,e===null?Kv(t):Ge=e}function yh(t,e,n,r){Aa=ru=null,vA(e),Ch=null,dp=0;var i=e.return;try{if(C$(t,i,e,n,Ye)){Zt=1,S0(t,Oi(n,t.current)),Ge=null;return}}catch(s){if(i!==null)throw Ge=i,s;Zt=1,S0(t,Oi(n,t.current)),Ge=null;return}e.flags&32768?(Je||r===1?t=!0:Id||Ye&536870912?t=!1:(Uo=t=!0,(r===2||r===9||r===3||r===6)&&(r=pi.current,r!==null&&r.tag===13&&(r.flags|=16384))),OL(e,t)):Kv(e)}function Kv(t){var e=t;do{if(e.flags&32768){OL(e,Uo);return}t=e.return;var n=D$(e.alternate,e,Fa);if(n!==null){Ge=n;return}if(e=e.sibling,e!==null){Ge=e;return}Ge=e=t}while(e!==null);Zt===0&&(Zt=5)}function OL(t,e){do{var n=k$(t.alternate,t);if(n!==null){n.flags&=32767,Ge=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Ge=t;return}Ge=t=n}while(t!==null);Zt=6,Ge=null}function SN(t,e,n,r,i,s,a,o,c){t.cancelPendingCommit=null;do Wv();while(An!==0);if(st&6)throw Error(ee(327));if(e!==null){if(e===t.current)throw Error(ee(177));if(s=e.lanes|e.childLanes,s|=sA,wG(t,n,s,a,o,c),t===Tt&&(Ge=Tt=null,Ye=0),$h=e,Yo=t,Na=n,m1=s,p1=i,SL=r,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,G$(p0,function(){return jL(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(e.flags&13878)!==0,e.subtreeFlags&13878||r){r=Ie.T,Ie.T=null,i=at.p,at.p=2,a=st,st|=4;try{O$(t,e,n)}finally{st=a,at.p=i,Ie.T=r}}An=1,ML(),VL(),LL()}}function ML(){if(An===1){An=0;var t=Yo,e=$h,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=Ie.T,Ie.T=null;var r=at.p;at.p=2;var i=st;st|=4;try{_L(e,t);var s=w1,a=ZM(t.containerInfo),o=s.focusedElem,c=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&JM(o.ownerDocument.documentElement,o)){if(c!==null&&iA(o)){var h=c.start,f=c.end;if(f===void 0&&(f=h),"selectionStart"in o)o.selectionStart=h,o.selectionEnd=Math.min(f,o.value.length);else{var p=o.ownerDocument||document,g=p&&p.defaultView||window;if(g.getSelection){var _=g.getSelection(),R=o.textContent.length,N=Math.min(c.start,R),A=c.end===void 0?N:Math.min(c.end,R);!_.extend&&N>A&&(a=A,A=N,N=a);var b=W2(o,N),T=W2(o,A);if(b&&T&&(_.rangeCount!==1||_.anchorNode!==b.node||_.anchorOffset!==b.offset||_.focusNode!==T.node||_.focusOffset!==T.offset)){var E=p.createRange();E.setStart(b.node,b.offset),_.removeAllRanges(),N>A?(_.addRange(E),_.extend(T.node,T.offset)):(E.setEnd(T.node,T.offset),_.addRange(E))}}}}for(p=[],_=o;_=_.parentNode;)_.nodeType===1&&p.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<p.length;o++){var O=p[o];O.element.scrollLeft=O.left,O.element.scrollTop=O.top}}j0=!!v1,w1=v1=null}finally{st=i,at.p=r,Ie.T=n}}t.current=e,An=2}}function VL(){if(An===2){An=0;var t=Yo,e=$h,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=Ie.T,Ie.T=null;var r=at.p;at.p=2;var i=st;st|=4;try{fL(t,e.alternate,e)}finally{st=i,at.p=r,Ie.T=n}}An=3}}function LL(){if(An===4||An===3){An=0,hG();var t=Yo,e=$h,n=Na,r=SL;e.subtreeFlags&10256||e.flags&10256?An=5:(An=0,$h=Yo=null,UL(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(Wo=null),Xx(n),e=e.stateNode,ci&&typeof ci.onCommitFiberRoot=="function")try{ci.onCommitFiberRoot(Xp,e,void 0,(e.current.flags&128)===128)}catch{}if(r!==null){e=Ie.T,i=at.p,at.p=2,Ie.T=null;try{for(var s=t.onRecoverableError,a=0;a<r.length;a++){var o=r[a];s(o.value,{componentStack:o.stack})}}finally{Ie.T=e,at.p=i}}Na&3&&Wv(),Ks(t),i=t.pendingLanes,n&261930&&i&42?t===g1?km++:(km=0,g1=t):km=0,sg(0)}}function UL(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,ng(e)))}function Wv(){return ML(),VL(),LL(),jL()}function jL(){if(An!==5)return!1;var t=Yo,e=m1;m1=0;var n=Xx(Na),r=Ie.T,i=at.p;try{at.p=32>n?32:n,Ie.T=null,n=p1,p1=null;var s=Yo,a=Na;if(An=0,$h=Yo=null,Na=0,st&6)throw Error(ee(331));var o=st;if(st|=4,EL(s.current),wL(s,s.current,a,n),st=o,sg(0,!1),ci&&typeof ci.onPostCommitFiberRoot=="function")try{ci.onPostCommitFiberRoot(Xp,s)}catch{}return!0}finally{at.p=i,Ie.T=r,UL(t,e)}}function IN(t,e,n){e=Oi(n,e),e=c1(t.stateNode,e,2),t=Ko(t,e,2),t!==null&&(Zp(t,2),Ks(t))}function ft(t,e,n){if(t.tag===3)IN(t,t,n);else for(;e!==null;){if(e.tag===3){IN(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wo===null||!Wo.has(r))){t=Oi(n,t),n=eL(2),r=Ko(e,n,2),r!==null&&(tL(n,r,e,t),Zp(r,2),Ks(r));break}}e=e.return}}function MT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new L$;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(DA=!0,i.add(n),t=B$.bind(null,t,e,n),e.then(t,t))}function B$(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Tt===t&&(Ye&n)===n&&(Zt===4||Zt===3&&(Ye&62914560)===Ye&&300>li()-Gv?!(st&2)&&Kh(t,0):kA|=n,Gh===Ye&&(Gh=0)),Ks(t)}function FL(t,e){e===0&&(e=PM()),t=nu(t,e),t!==null&&(Zp(t,e),Ks(t))}function q$(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),FL(t,n)}function H$(t,e){var n=0;switch(t.tag){case 31:case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(ee(314))}r!==null&&r.delete(e),FL(t,n)}function G$(t,e){return Yx(t,e)}var D0=null,eh=null,y1=!1,k0=!1,VT=!1,Fo=0;function Ks(t){t!==eh&&t.next===null&&(eh===null?D0=eh=t:eh=eh.next=t),k0=!0,y1||(y1=!0,K$())}function sg(t,e){if(!VT&&k0){VT=!0;do for(var n=!1,r=D0;r!==null;){if(t!==0){var i=r.pendingLanes;if(i===0)var s=0;else{var a=r.suspendedLanes,o=r.pingedLanes;s=(1<<31-ui(42|t)+1)-1,s&=i&~(a&~o),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,RN(r,s))}else s=Ye,s=Ov(r,r===Tt?s:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(s&3)||Jp(r,s)||(n=!0,RN(r,s));r=r.next}while(n);VT=!1}}function $$(){zL()}function zL(){k0=y1=!1;var t=0;Fo!==0&&rK()&&(t=Fo);for(var e=li(),n=null,r=D0;r!==null;){var i=r.next,s=BL(r,e);s===0?(r.next=null,n===null?D0=i:n.next=i,i===null&&(eh=n)):(n=r,(t!==0||s&3)&&(k0=!0)),r=i}An!==0&&An!==5||sg(t),Fo!==0&&(Fo=0)}function BL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var a=31-ui(s),o=1<<a,c=i[a];c===-1?(!(o&n)||o&r)&&(i[a]=vG(o,e)):c<=e&&(t.expiredLanes|=o),s&=~o}if(e=Tt,n=Ye,n=Ov(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,n===0||t===e&&(dt===2||dt===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&uT(r),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Jp(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(r!==null&&uT(r),Xx(n)){case 2:case 8:n=CM;break;case 32:n=p0;break;case 268435456:n=NM;break;default:n=p0}return r=qL.bind(null,t),n=Yx(n,r),t.callbackPriority=e,t.callbackNode=n,e}return r!==null&&r!==null&&uT(r),t.callbackPriority=2,t.callbackNode=null,2}function qL(t,e){if(An!==0&&An!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Wv()&&t.callbackNode!==n)return null;var r=Ye;return r=Ov(t,t===Tt?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(RL(t,r,e),BL(t,li()),t.callbackNode!=null&&t.callbackNode===n?qL.bind(null,t):null)}function RN(t,e){if(Wv())return null;RL(t,e,!0)}function K$(){sK(function(){st&6?Yx(RM,$$):zL()})}function MA(){if(Fo===0){var t=Bh;t===0&&(t=Qy,Qy<<=1,!(Qy&261888)&&(Qy=256)),Fo=t}return Fo}function CN(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:R_(""+t)}function NN(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function W$(t,e,n,r,i){if(e==="submit"&&n&&n.stateNode===i){var s=CN((i[zr]||null).action),a=r.submitter;a&&(e=(e=a[zr]||null)?CN(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var o=new Mv("action","action",null,r,i);t.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Fo!==0){var c=a?NN(i,a):new FormData(i);o1(n,{pending:!0,data:c,method:i.method,action:s},null,c)}}else typeof s=="function"&&(o.preventDefault(),c=a?NN(i,a):new FormData(i),o1(n,{pending:!0,data:c,method:i.method,action:s},s,c))},currentTarget:i}]})}}for(var LT=0;LT<YE.length;LT++){var UT=YE[LT],Y$=UT.toLowerCase(),Q$=UT[0].toUpperCase()+UT.slice(1);cs(Y$,"on"+Q$)}cs(tV,"onAnimationEnd");cs(nV,"onAnimationIteration");cs(rV,"onAnimationStart");cs("dblclick","onDoubleClick");cs("focusin","onFocus");cs("focusout","onBlur");cs(d$,"onTransitionRun");cs(f$,"onTransitionStart");cs(m$,"onTransitionCancel");cs(iV,"onTransitionEnd");Fh("onMouseEnter",["mouseout","mouseover"]);Fh("onMouseLeave",["mouseout","mouseover"]);Fh("onPointerEnter",["pointerout","pointerover"]);Fh("onPointerLeave",["pointerout","pointerover"]);Zc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X$=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pp));function HL(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,h=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=h;try{s(i)}catch(f){y0(f)}i.currentTarget=null,s=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,h=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=h;try{s(i)}catch(f){y0(f)}i.currentTarget=null,s=c}}}}function He(t,e){var n=e[zE];n===void 0&&(n=e[zE]=new Set);var r=t+"__bubble";n.has(r)||(GL(e,t,2,!1),n.add(r))}function jT(t,e,n){var r=0;e&&(r|=4),GL(n,t,r,e)}var a_="_reactListening"+Math.random().toString(36).slice(2);function VA(t){if(!t[a_]){t[a_]=!0,VM.forEach(function(n){n!=="selectionchange"&&(X$.has(n)||jT(n,!1,t),jT(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[a_]||(e[a_]=!0,jT("selectionchange",!1,e))}}function GL(t,e,n,r){switch(i5(e)){case 2:var i=AK;break;case 8:i=SK;break;default:i=FA}n=i.bind(null,e,n,t),i=void 0,!$E||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function FT(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&a.stateNode.containerInfo===i)return;a=a.return}for(;o!==null;){if(a=lh(o),a===null)return;if(c=a.tag,c===5||c===6||c===26||c===27){r=s=a;continue e}o=o.parentNode}}r=r.return}HM(function(){var h=s,f=eA(n),p=[];e:{var g=sV.get(t);if(g!==void 0){var _=Mv,R=t;switch(t){case"keypress":if(N_(n)===0)break e;case"keydown":case"keyup":_=HG;break;case"focusin":R="focus",_=pT;break;case"focusout":R="blur",_=pT;break;case"beforeblur":case"afterblur":_=pT;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=U2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=DG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=KG;break;case tV:case nV:case rV:_=MG;break;case iV:_=YG;break;case"scroll":case"scrollend":_=NG;break;case"wheel":_=XG;break;case"copy":case"cut":case"paste":_=LG;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=F2;break;case"toggle":case"beforetoggle":_=ZG}var N=(e&4)!==0,A=!N&&(t==="scroll"||t==="scrollend"),b=N?g!==null?g+"Capture":null:g;N=[];for(var T=h,E;T!==null;){var O=T;if(E=O.stateNode,O=O.tag,O!==5&&O!==26&&O!==27||E===null||b===null||(O=op(T,b),O!=null&&N.push(gp(T,O,E))),A)break;T=T.return}0<N.length&&(g=new _(g,R,null,n,f),p.push({event:g,listeners:N}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==GE&&(R=n.relatedTarget||n.fromElement)&&(lh(R)||R[Ed]))break e;if((_||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,_?(R=n.relatedTarget||n.toElement,_=h,R=R?lh(R):null,R!==null&&(A=Qp(R),N=R.tag,R!==A||N!==5&&N!==27&&N!==6)&&(R=null)):(_=null,R=h),_!==R)){if(N=U2,O="onMouseLeave",b="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(N=F2,O="onPointerLeave",b="onPointerEnter",T="pointer"),A=_==null?g:am(_),E=R==null?g:am(R),g=new N(O,T+"leave",_,n,f),g.target=A,g.relatedTarget=E,O=null,lh(f)===h&&(N=new N(b,T+"enter",R,n,f),N.target=E,N.relatedTarget=A,O=N),A=O,_&&R)t:{for(N=J$,b=_,T=R,E=0,O=b;O;O=N(O))E++;O=0;for(var j=T;j;j=N(j))O++;for(;0<E-O;)b=N(b),E--;for(;0<O-E;)T=N(T),O--;for(;E--;){if(b===T||T!==null&&b===T.alternate){N=b;break t}b=N(b),T=N(T)}N=null}else N=null;_!==null&&PN(p,g,_,N,!1),R!==null&&A!==null&&PN(p,A,R,N,!0)}}e:{if(g=h?am(h):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var q=H2;else if(q2(g))if(QM)q=c$;else{q=o$;var S=a$}else _=g.nodeName,!_||_.toLowerCase()!=="input"||g.type!=="checkbox"&&g.type!=="radio"?h&&Zx(h.elementType)&&(q=H2):q=l$;if(q&&(q=q(t,h))){YM(p,q,n,f);break e}S&&S(t,g,h),t==="focusout"&&h&&g.type==="number"&&h.memoizedProps.value!=null&&HE(g,"number",g.value)}switch(S=h?am(h):window,t){case"focusin":(q2(S)||S.contentEditable==="true")&&(hh=S,KE=h,xm=null);break;case"focusout":xm=KE=hh=null;break;case"mousedown":WE=!0;break;case"contextmenu":case"mouseup":case"dragend":WE=!1,Y2(p,n,f);break;case"selectionchange":if(h$)break;case"keydown":case"keyup":Y2(p,n,f)}var C;if(rA)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else uh?KM(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&($M&&n.locale!=="ko"&&(uh||k!=="onCompositionStart"?k==="onCompositionEnd"&&uh&&(C=GM()):(Lo=f,tA="value"in Lo?Lo.value:Lo.textContent,uh=!0)),S=O0(h,k),0<S.length&&(k=new j2(k,t,null,n,f),p.push({event:k,listeners:S}),C?k.data=C:(C=WM(n),C!==null&&(k.data=C)))),(C=t$?n$(t,n):r$(t,n))&&(k=O0(h,"onBeforeInput"),0<k.length&&(S=new j2("onBeforeInput","beforeinput",null,n,f),p.push({event:S,listeners:k}),S.data=C)),W$(p,t,h,n,f)}HL(p,e)})}function gp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function O0(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||s===null||(i=op(t,n),i!=null&&r.unshift(gp(t,i,s)),i=op(t,e),i!=null&&r.push(gp(t,i,s))),t.tag===3)return r;t=t.return}return[]}function J$(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function PN(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,c=o.alternate,h=o.stateNode;if(o=o.tag,c!==null&&c===r)break;o!==5&&o!==26&&o!==27||h===null||(c=h,i?(h=op(n,s),h!=null&&a.unshift(gp(n,h,c))):i||(h=op(n,s),h!=null&&a.push(gp(n,h,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Z$=/\r\n?/g,eK=/\u0000|\uFFFD/g;function DN(t){return(typeof t=="string"?t:""+t).replace(Z$,`
`).replace(eK,"")}function $L(t,e){return e=DN(e),DN(t)===e}function vt(t,e,n,r,i,s){switch(n){case"children":typeof r=="string"?e==="body"||e==="textarea"&&r===""||zh(t,r):(typeof r=="number"||typeof r=="bigint")&&e!=="body"&&zh(t,""+r);break;case"className":Zy(t,"class",r);break;case"tabIndex":Zy(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Zy(t,n,r);break;case"style":qM(t,r,s);break;case"data":if(e!=="object"){Zy(t,"data",r);break}case"src":case"href":if(r===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=R_(""+r),t.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&vt(t,e,"name",i.name,i,null),vt(t,e,"formEncType",i.formEncType,i,null),vt(t,e,"formMethod",i.formMethod,i,null),vt(t,e,"formTarget",i.formTarget,i,null)):(vt(t,e,"encType",i.encType,i,null),vt(t,e,"method",i.method,i,null),vt(t,e,"target",i.target,i,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=R_(""+r),t.setAttribute(n,r);break;case"onClick":r!=null&&(t.onclick=xa);break;case"onScroll":r!=null&&He("scroll",t);break;case"onScrollEnd":r!=null&&He("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(ee(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(ee(60));t.innerHTML=n}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}n=R_(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""+r):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":r===!0?t.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,r):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(n,r):t.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(n):t.setAttribute(n,r);break;case"popover":He("beforetoggle",t),He("toggle",t),I_(t,"popover",r);break;case"xlinkActuate":pa(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":pa(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":pa(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":pa(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":pa(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":pa(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":pa(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":pa(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":pa(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":I_(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=RG.get(n)||n,I_(t,n,r))}}function _1(t,e,n,r,i,s){switch(n){case"style":qM(t,r,s);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(ee(61));if(n=r.__html,n!=null){if(i.children!=null)throw Error(ee(60));t.innerHTML=n}}break;case"children":typeof r=="string"?zh(t,r):(typeof r=="number"||typeof r=="bigint")&&zh(t,""+r);break;case"onScroll":r!=null&&He("scroll",t);break;case"onScrollEnd":r!=null&&He("scrollend",t);break;case"onClick":r!=null&&(t.onclick=xa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!LM.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),s=t[zr]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,i),typeof r=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,r,i);break e}n in t?t[n]=r:r===!0?t.setAttribute(n,""):I_(t,n,r)}}}function Yn(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",t),He("load",t);var r=!1,i=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":r=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(ee(137,e));default:vt(t,e,s,a,n,null)}}i&&vt(t,e,"srcSet",n.srcSet,n,null),r&&vt(t,e,"src",n.src,n,null);return;case"input":He("invalid",t);var o=s=a=i=null,c=null,h=null;for(r in n)if(n.hasOwnProperty(r)){var f=n[r];if(f!=null)switch(r){case"name":i=f;break;case"type":a=f;break;case"checked":c=f;break;case"defaultChecked":h=f;break;case"value":s=f;break;case"defaultValue":o=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(ee(137,e));break;default:vt(t,e,r,f,n,null)}}FM(t,s,o,c,h,a,i,!1);return;case"select":He("invalid",t),r=a=s=null;for(i in n)if(n.hasOwnProperty(i)&&(o=n[i],o!=null))switch(i){case"value":s=o;break;case"defaultValue":a=o;break;case"multiple":r=o;default:vt(t,e,i,o,n,null)}e=s,n=a,t.multiple=!!r,e!=null?Sh(t,!!r,e,!1):n!=null&&Sh(t,!!r,n,!0);return;case"textarea":He("invalid",t),s=i=r=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":r=o;break;case"defaultValue":i=o;break;case"children":s=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(ee(91));break;default:vt(t,e,a,o,n,null)}BM(t,r,i,s);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(r=n[c],r!=null))switch(c){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:vt(t,e,c,r,n,null)}return;case"dialog":He("beforetoggle",t),He("toggle",t),He("cancel",t),He("close",t);break;case"iframe":case"object":He("load",t);break;case"video":case"audio":for(r=0;r<pp.length;r++)He(pp[r],t);break;case"image":He("error",t),He("load",t);break;case"details":He("toggle",t);break;case"embed":case"source":case"link":He("error",t),He("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(r=n[h],r!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(ee(137,e));default:vt(t,e,h,r,n,null)}return;default:if(Zx(e)){for(f in n)n.hasOwnProperty(f)&&(r=n[f],r!==void 0&&_1(t,e,f,r,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(r=n[o],r!=null&&vt(t,e,o,r,n,null))}function tK(t,e,n,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,o=null,c=null,h=null,f=null;for(_ in n){var p=n[_];if(n.hasOwnProperty(_)&&p!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":c=p;default:r.hasOwnProperty(_)||vt(t,e,_,null,r,p)}}for(var g in r){var _=r[g];if(p=n[g],r.hasOwnProperty(g)&&(_!=null||p!=null))switch(g){case"type":s=_;break;case"name":i=_;break;case"checked":h=_;break;case"defaultChecked":f=_;break;case"value":a=_;break;case"defaultValue":o=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(ee(137,e));break;default:_!==p&&vt(t,e,g,_,r,p)}}qE(t,a,o,c,h,f,s,i);return;case"select":_=a=o=g=null;for(s in n)if(c=n[s],n.hasOwnProperty(s)&&c!=null)switch(s){case"value":break;case"multiple":_=c;default:r.hasOwnProperty(s)||vt(t,e,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(s!=null||c!=null))switch(i){case"value":g=s;break;case"defaultValue":o=s;break;case"multiple":a=s;default:s!==c&&vt(t,e,i,s,r,c)}e=o,n=a,r=_,g!=null?Sh(t,!!n,g,!1):!!r!=!!n&&(e!=null?Sh(t,!!n,e,!0):Sh(t,!!n,n?[]:"",!1));return;case"textarea":_=g=null;for(o in n)if(i=n[o],n.hasOwnProperty(o)&&i!=null&&!r.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:vt(t,e,o,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(i!=null||s!=null))switch(a){case"value":g=i;break;case"defaultValue":_=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(ee(91));break;default:i!==s&&vt(t,e,a,i,r,s)}zM(t,g,_);return;case"option":for(var R in n)if(g=n[R],n.hasOwnProperty(R)&&g!=null&&!r.hasOwnProperty(R))switch(R){case"selected":t.selected=!1;break;default:vt(t,e,R,null,r,g)}for(c in r)if(g=r[c],_=n[c],r.hasOwnProperty(c)&&g!==_&&(g!=null||_!=null))switch(c){case"selected":t.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:vt(t,e,c,g,r,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var N in n)g=n[N],n.hasOwnProperty(N)&&g!=null&&!r.hasOwnProperty(N)&&vt(t,e,N,null,r,g);for(h in r)if(g=r[h],_=n[h],r.hasOwnProperty(h)&&g!==_&&(g!=null||_!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(ee(137,e));break;default:vt(t,e,h,g,r,_)}return;default:if(Zx(e)){for(var A in n)g=n[A],n.hasOwnProperty(A)&&g!==void 0&&!r.hasOwnProperty(A)&&_1(t,e,A,void 0,r,g);for(f in r)g=r[f],_=n[f],!r.hasOwnProperty(f)||g===_||g===void 0&&_===void 0||_1(t,e,f,g,r,_);return}}for(var b in n)g=n[b],n.hasOwnProperty(b)&&g!=null&&!r.hasOwnProperty(b)&&vt(t,e,b,null,r,g);for(p in r)g=r[p],_=n[p],!r.hasOwnProperty(p)||g===_||g==null&&_==null||vt(t,e,p,g,r,_)}function kN(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function nK(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var i=n[r],s=i.transferSize,a=i.initiatorType,o=i.duration;if(s&&o&&kN(a)){for(a=0,o=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],h=c.startTime;if(h>o)break;var f=c.transferSize,p=c.initiatorType;f&&kN(p)&&(c=c.responseEnd,a+=f*(c<o?1:(o-h)/(c-h)))}if(--r,e+=8*(s+a)/(i.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var v1=null,w1=null;function M0(t){return t.nodeType===9?t:t.ownerDocument}function ON(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function KL(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function b1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zT=null;function rK(){var t=window.event;return t&&t.type==="popstate"?t===zT?!1:(zT=t,!0):(zT=null,!1)}var WL=typeof setTimeout=="function"?setTimeout:void 0,iK=typeof clearTimeout=="function"?clearTimeout:void 0,MN=typeof Promise=="function"?Promise:void 0,sK=typeof queueMicrotask=="function"?queueMicrotask:typeof MN<"u"?function(t){return MN.resolve(null).then(t).catch(aK)}:WL;function aK(t){setTimeout(function(){throw t})}function El(t){return t==="head"}function VN(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(r===0){t.removeChild(i),Yh(e);return}r--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")r++;else if(n==="html")Om(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Om(n);for(var s=n.firstChild;s;){var a=s.nextSibling,o=s.nodeName;s[eg]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=a}}else n==="body"&&Om(t.ownerDocument.body);n=i}while(n);Yh(e)}function LN(t,e){var n=t;t=0;do{var r=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=r}while(n)}function T1(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":T1(n),Jx(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function oK(t,e,n,r){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[eg])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=ji(t.nextSibling),t===null)break}return null}function lK(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=ji(t.nextSibling),t===null))return null;return t}function YL(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=ji(t.nextSibling),t===null))return null;return t}function E1(t){return t.data==="$?"||t.data==="$~"}function x1(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function cK(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var r=function(){e(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function ji(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var A1=null;function UN(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return ji(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function jN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function QL(t,e,n){switch(e=M0(n),t){case"html":if(t=e.documentElement,!t)throw Error(ee(452));return t;case"head":if(t=e.head,!t)throw Error(ee(453));return t;case"body":if(t=e.body,!t)throw Error(ee(454));return t;default:throw Error(ee(451))}}function Om(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Jx(t)}var zi=new Map,FN=new Set;function V0(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ka=at.d;at.d={f:uK,r:hK,D:dK,C:fK,L:mK,m:pK,X:yK,S:gK,M:_K};function uK(){var t=Ka.f(),e=$v();return t||e}function hK(t){var e=xd(t);e!==null&&e.tag===5&&e.type==="form"?qV(e):Ka.r(t)}var Rd=typeof document>"u"?null:document;function XL(t,e,n){var r=Rd;if(r&&typeof e=="string"&&e){var i=ki(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),FN.has(i)||(FN.add(i),t={rel:t,crossOrigin:n,href:e},r.querySelector(i)===null&&(e=r.createElement("link"),Yn(e,"link",t),Vn(e),r.head.appendChild(e)))}}function dK(t){Ka.D(t),XL("dns-prefetch",t,null)}function fK(t,e){Ka.C(t,e),XL("preconnect",t,e)}function mK(t,e,n){Ka.L(t,e,n);var r=Rd;if(r&&t&&e){var i='link[rel="preload"][as="'+ki(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+ki(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+ki(n.imageSizes)+'"]')):i+='[href="'+ki(t)+'"]';var s=i;switch(e){case"style":s=Wh(t);break;case"script":s=Cd(t)}zi.has(s)||(t=kt({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),zi.set(s,t),r.querySelector(i)!==null||e==="style"&&r.querySelector(ag(s))||e==="script"&&r.querySelector(og(s))||(e=r.createElement("link"),Yn(e,"link",t),Vn(e),r.head.appendChild(e)))}}function pK(t,e){Ka.m(t,e);var n=Rd;if(n&&t){var r=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+ki(r)+'"][href="'+ki(t)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Cd(t)}if(!zi.has(s)&&(t=kt({rel:"modulepreload",href:t},e),zi.set(s,t),n.querySelector(i)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(og(s)))return}r=n.createElement("link"),Yn(r,"link",t),Vn(r),n.head.appendChild(r)}}}function gK(t,e,n){Ka.S(t,e,n);var r=Rd;if(r&&t){var i=Ah(r).hoistableStyles,s=Wh(t);e=e||"default";var a=i.get(s);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(ag(s)))o.loading=5;else{t=kt({rel:"stylesheet",href:t,"data-precedence":e},n),(n=zi.get(s))&&LA(t,n);var c=a=r.createElement("link");Vn(c),Yn(c,"link",t),c._p=new Promise(function(h,f){c.onload=h,c.onerror=f}),c.addEventListener("load",function(){o.loading|=1}),c.addEventListener("error",function(){o.loading|=2}),o.loading|=4,U_(a,e,r)}a={type:"stylesheet",instance:a,count:1,state:o},i.set(s,a)}}}function yK(t,e){Ka.X(t,e);var n=Rd;if(n&&t){var r=Ah(n).hoistableScripts,i=Cd(t),s=r.get(i);s||(s=n.querySelector(og(i)),s||(t=kt({src:t,async:!0},e),(e=zi.get(i))&&UA(t,e),s=n.createElement("script"),Vn(s),Yn(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}function _K(t,e){Ka.M(t,e);var n=Rd;if(n&&t){var r=Ah(n).hoistableScripts,i=Cd(t),s=r.get(i);s||(s=n.querySelector(og(i)),s||(t=kt({src:t,async:!0,type:"module"},e),(e=zi.get(i))&&UA(t,e),s=n.createElement("script"),Vn(s),Yn(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}function zN(t,e,n,r){var i=(i=Ho.current)?V0(i):null;if(!i)throw Error(ee(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Wh(n.href),n=Ah(i).hoistableStyles,r=n.get(e),r||(r={type:"style",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Wh(n.href);var s=Ah(i).hoistableStyles,a=s.get(t);if(a||(i=i.ownerDocument||i,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,a),(s=i.querySelector(ag(t)))&&!s._p&&(a.instance=s,a.state.loading=5),zi.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},zi.set(t,n),s||vK(i,t,n,a.state))),e&&r===null)throw Error(ee(528,""));return a}if(e&&r!==null)throw Error(ee(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Cd(n),n=Ah(i).hoistableScripts,r=n.get(e),r||(r={type:"script",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(ee(444,t))}}function Wh(t){return'href="'+ki(t)+'"'}function ag(t){return'link[rel="stylesheet"]['+t+"]"}function JL(t){return kt({},t,{"data-precedence":t.precedence,precedence:null})}function vK(t,e,n,r){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?r.loading=1:(e=t.createElement("link"),r.preload=e,e.addEventListener("load",function(){return r.loading|=1}),e.addEventListener("error",function(){return r.loading|=2}),Yn(e,"link",n),Vn(e),t.head.appendChild(e))}function Cd(t){return'[src="'+ki(t)+'"]'}function og(t){return"script[async]"+t}function BN(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var r=t.querySelector('style[data-href~="'+ki(n.href)+'"]');if(r)return e.instance=r,Vn(r),r;var i=kt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),Vn(r),Yn(r,"style",i),U_(r,n.precedence,t),e.instance=r;case"stylesheet":i=Wh(n.href);var s=t.querySelector(ag(i));if(s)return e.state.loading|=4,e.instance=s,Vn(s),s;r=JL(n),(i=zi.get(i))&&LA(r,i),s=(t.ownerDocument||t).createElement("link"),Vn(s);var a=s;return a._p=new Promise(function(o,c){a.onload=o,a.onerror=c}),Yn(s,"link",r),e.state.loading|=4,U_(s,n.precedence,t),e.instance=s;case"script":return s=Cd(n.src),(i=t.querySelector(og(s)))?(e.instance=i,Vn(i),i):(r=n,(i=zi.get(s))&&(r=kt({},n),UA(r,i)),t=t.ownerDocument||t,i=t.createElement("script"),Vn(i),Yn(i,"link",r),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(ee(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(r=e.instance,e.state.loading|=4,U_(r,n.precedence,t));return e.instance}function U_(t,e,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===e)s=o;else if(s!==i)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function LA(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function UA(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var j_=null;function qN(t,e,n){if(j_===null){var r=new Map,i=j_=new Map;i.set(n,r)}else i=j_,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(t))return r;for(r.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var s=n[i];if(!(s[eg]||s[Gn]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=t+a;var o=r.get(a);o?o.push(s):r.set(a,[s])}}return r}function HN(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function wK(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function ZL(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function bK(t,e,n,r){if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var i=Wh(r.href),s=e.querySelector(ag(i));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=L0.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=s,Vn(s);return}s=e.ownerDocument||e,r=JL(r),(i=zi.get(i))&&LA(r,i),s=s.createElement("link"),Vn(s);var a=s;a._p=new Promise(function(o,c){a.onload=o,a.onerror=c}),Yn(s,"link",r),n.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=L0.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var BT=0;function TK(t,e){return t.stylesheets&&t.count===0&&F_(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var r=setTimeout(function(){if(t.stylesheets&&F_(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&BT===0&&(BT=62500*nK());var i=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&F_(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>BT?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function L0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)F_(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var U0=null;function F_(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,U0=new Map,e.forEach(EK,t),U0=null,L0.call(t))}function EK(t,e){if(!(e.state.loading&4)){var n=U0.get(t);if(n)var r=n.get(null);else{n=new Map,U0.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var a=i[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}i=e.instance,a=i.getAttribute("data-precedence"),s=n.get(a)||r,s===r&&n.set(null,i),n.set(a,i),this.count++,r=L0.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var yp={$$typeof:Ea,Provider:null,Consumer:null,_currentValue:Ac,_currentValue2:Ac,_threadCount:0};function xK(t,e,n,r,i,s,a,o,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hT(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hT(0),this.hiddenUpdates=hT(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function e5(t,e,n,r,i,s,a,o,c,h,f,p){return t=new xK(t,e,n,a,c,h,f,p,o),e=1,s===!0&&(e|=24),s=ri(3,null,null,e),t.current=s,s.stateNode=t,e=uA(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:e},fA(s),t}function t5(t){return t?(t=mh,t):mh}function n5(t,e,n,r,i,s){i=t5(i),r.context===null?r.context=i:r.pendingContext=i,r=$o(e),r.payload={element:n},s=s===void 0?null:s,s!==null&&(r.callback=s),n=Ko(t,r,e),n!==null&&(Fr(n,t,e),Sm(n,t,e))}function GN(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jA(t,e){GN(t,e),(t=t.alternate)&&GN(t,e)}function r5(t){if(t.tag===13||t.tag===31){var e=nu(t,67108864);e!==null&&Fr(e,t,67108864),jA(t,67108864)}}function $N(t){if(t.tag===13||t.tag===31){var e=hi();e=Qx(e);var n=nu(t,e);n!==null&&Fr(n,t,e),jA(t,e)}}var j0=!0;function AK(t,e,n,r){var i=Ie.T;Ie.T=null;var s=at.p;try{at.p=2,FA(t,e,n,r)}finally{at.p=s,Ie.T=i}}function SK(t,e,n,r){var i=Ie.T;Ie.T=null;var s=at.p;try{at.p=8,FA(t,e,n,r)}finally{at.p=s,Ie.T=i}}function FA(t,e,n,r){if(j0){var i=S1(r);if(i===null)FT(t,e,r,F0,n),KN(t,r);else if(RK(i,t,e,n,r))r.stopPropagation();else if(KN(t,r),e&4&&-1<IK.indexOf(t)){for(;i!==null;){var s=xd(i);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=ac(s.pendingLanes);if(a!==0){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var c=1<<31-ui(a);o.entanglements[1]|=c,a&=~c}Ks(s),!(st&6)&&(C0=li()+500,sg(0))}}break;case 31:case 13:o=nu(s,2),o!==null&&Fr(o,s,2),$v(),jA(s,2)}if(s=S1(r),s===null&&FT(t,e,r,F0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else FT(t,e,r,null,n)}}function S1(t){return t=eA(t),zA(t)}var F0=null;function zA(t){if(F0=null,t=lh(t),t!==null){var e=Qp(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=EM(e),t!==null)return t;t=null}else if(n===31){if(t=xM(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return F0=t,null}function i5(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dG()){case RM:return 2;case CM:return 8;case p0:case fG:return 32;case NM:return 268435456;default:return 32}default:return 32}}var I1=!1,Qo=null,Xo=null,Jo=null,_p=new Map,vp=new Map,Oo=[],IK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function KN(t,e){switch(t){case"focusin":case"focusout":Qo=null;break;case"dragenter":case"dragleave":Xo=null;break;case"mouseover":case"mouseout":Jo=null;break;case"pointerover":case"pointerout":_p.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vp.delete(e.pointerId)}}function Hf(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=xd(e),e!==null&&r5(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function RK(t,e,n,r,i){switch(e){case"focusin":return Qo=Hf(Qo,t,e,n,r,i),!0;case"dragenter":return Xo=Hf(Xo,t,e,n,r,i),!0;case"mouseover":return Jo=Hf(Jo,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return _p.set(s,Hf(_p.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,vp.set(s,Hf(vp.get(s)||null,t,e,n,r,i)),!0}return!1}function s5(t){var e=lh(t.target);if(e!==null){var n=Qp(e);if(n!==null){if(e=n.tag,e===13){if(e=EM(n),e!==null){t.blockedOn=e,P2(t.priority,function(){$N(n)});return}}else if(e===31){if(e=xM(n),e!==null){t.blockedOn=e,P2(t.priority,function(){$N(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function z_(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=S1(t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);GE=r,n.target.dispatchEvent(r),GE=null}else return e=xd(n),e!==null&&r5(e),t.blockedOn=n,!1;e.shift()}return!0}function WN(t,e,n){z_(t)&&n.delete(e)}function CK(){I1=!1,Qo!==null&&z_(Qo)&&(Qo=null),Xo!==null&&z_(Xo)&&(Xo=null),Jo!==null&&z_(Jo)&&(Jo=null),_p.forEach(WN),vp.forEach(WN)}function o_(t,e){t.blockedOn===e&&(t.blockedOn=null,I1||(I1=!0,In.unstable_scheduleCallback(In.unstable_NormalPriority,CK)))}var l_=null;function YN(t){l_!==t&&(l_=t,In.unstable_scheduleCallback(In.unstable_NormalPriority,function(){l_===t&&(l_=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],i=t[e+2];if(typeof r!="function"){if(zA(r||n)===null)continue;break}var s=xd(n);s!==null&&(t.splice(e,3),e-=3,o1(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Yh(t){function e(c){return o_(c,t)}Qo!==null&&o_(Qo,t),Xo!==null&&o_(Xo,t),Jo!==null&&o_(Jo,t),_p.forEach(e),vp.forEach(e);for(var n=0;n<Oo.length;n++){var r=Oo[n];r.blockedOn===t&&(r.blockedOn=null)}for(;0<Oo.length&&(n=Oo[0],n.blockedOn===null);)s5(n),n.blockedOn===null&&Oo.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],a=i[zr]||null;if(typeof s=="function")a||YN(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(i=s,a=s[zr]||null)o=a.formAction;else if(zA(i)!==null)continue}else o=a.action;typeof o=="function"?n[r+1]=o:(n.splice(r,3),r-=3),YN(n)}}}function a5(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(a){return i=a})},focusReset:"manual",scroll:"manual"})}function e(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,i=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),i!==null&&(i(),i=null)}}}function BA(t){this._internalRoot=t}Yv.prototype.render=BA.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));var n=e.current,r=hi();n5(n,r,t,e,null,null)};Yv.prototype.unmount=BA.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;n5(t.current,2,null,t,null,null),$v(),e[Ed]=null}};function Yv(t){this._internalRoot=t}Yv.prototype.unstable_scheduleHydration=function(t){if(t){var e=MM();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Oo.length&&e!==0&&e<Oo[n].priority;n++);Oo.splice(n,0,t),n===0&&s5(t)}};var QN=bM.version;if(QN!=="19.2.0")throw Error(ee(527,QN,"19.2.0"));at.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=sG(e),t=t!==null?AM(t):null,t=t===null?null:t.stateNode,t};var NK={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Ie,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var c_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!c_.isDisabled&&c_.supportsFiber)try{Xp=c_.inject(NK),ci=c_}catch{}}Dv.createRoot=function(t,e){if(!TM(t))throw Error(ee(299));var n=!1,r="",i=XV,s=JV,a=ZV;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=e5(t,1,!1,null,null,n,r,null,i,s,a,a5),t[Ed]=e.current,VA(t),new BA(e)};Dv.hydrateRoot=function(t,e,n){if(!TM(t))throw Error(ee(299));var r=!1,i="",s=XV,a=JV,o=ZV,c=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),e=e5(t,1,!0,e,n??null,r,i,c,s,a,o,a5),e.context=t5(null),n=e.current,r=hi(),r=Qx(r),i=$o(r),i.callback=null,Ko(n,i,r),n=r,e.current.lanes=n,Zp(e,n),Ks(e),t[Ed]=e.current,VA(t),new Yv(e)};Dv.version="19.2.0";function o5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o5)}catch(t){console.error(t)}}o5(),mM.exports=Dv;var PK=mM.exports;const DK=iM(PK),kK="modulepreload",OK=function(t){return"/RushCoffee-Capstone/"+t},XN={},gt=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=OK(c),c in XN)return;XN[c]=!0;const h=c.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":kK,h||(p.as="script"),p.crossOrigin="",p.href=c,o&&p.setAttribute("nonce",o),document.head.appendChild(p),h)return new Promise((g,_)=>{p.addEventListener("load",g),p.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var JN="popstate";function MK(t={}){function e(i,s){let{pathname:a="/",search:o="",hash:c=""}=iu(i.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),R1("",{pathname:a,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let a=i.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let c=i.location.href,h=c.indexOf("#");o=h===-1?c:c.slice(0,h)}return o+"#"+(typeof s=="string"?s:wp(s))}function r(i,s){Br(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return LK(e,n,r,t)}function zt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Br(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function VK(){return Math.random().toString(36).substring(2,10)}function ZN(t,e){return{usr:t.state,key:t.key,idx:e}}function R1(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?iu(e):e,state:n,key:e&&e.key||r||VK()}}function wp({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function iu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function LK(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o="POP",c=null,h=f();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function f(){return(a.state||{idx:null}).idx}function p(){o="POP";let A=f(),b=A==null?null:A-h;h=A,c&&c({action:o,location:N.location,delta:b})}function g(A,b){o="PUSH";let T=R1(N.location,A,b);n&&n(T,A),h=f()+1;let E=ZN(T,h),O=N.createHref(T);try{a.pushState(E,"",O)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(O)}s&&c&&c({action:o,location:N.location,delta:1})}function _(A,b){o="REPLACE";let T=R1(N.location,A,b);n&&n(T,A),h=f();let E=ZN(T,h),O=N.createHref(T);a.replaceState(E,"",O),s&&c&&c({action:o,location:N.location,delta:0})}function R(A){return UK(A)}let N={get action(){return o},get location(){return t(i,a)},listen(A){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(JN,p),c=A,()=>{i.removeEventListener(JN,p),c=null}},createHref(A){return e(i,A)},createURL:R,encodeLocation(A){let b=R(A);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:g,replace:_,go(A){return a.go(A)}};return N}function UK(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),zt(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:wp(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function l5(t,e,n="/"){return jK(t,e,n,!1)}function jK(t,e,n,r){let i=typeof e=="string"?iu(e):e,s=za(i.pathname||"/",n);if(s==null)return null;let a=c5(t);FK(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let h=XK(s);o=YK(a[c],h,r)}return o}function c5(t,e=[],n=[],r="",i=!1){let s=(a,o,c=i,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&c)return;zt(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let p=Pa([r,f.relativePath]),g=n.concat(f);a.children&&a.children.length>0&&(zt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),c5(a.children,e,g,p,c)),!(a.path==null&&!a.index)&&e.push({path:p,score:KK(p,a.index),routesMeta:g})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))s(a,o);else for(let h of u5(a.path))s(a,o,!0,h)}),e}function u5(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=u5(r.join("/")),o=[];return o.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&o.push(...a),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function FK(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:WK(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var zK=/^:[\w-]+$/,BK=3,qK=2,HK=1,GK=10,$K=-2,eP=t=>t==="*";function KK(t,e){let n=t.split("/"),r=n.length;return n.some(eP)&&(r+=$K),e&&(r+=qK),n.filter(i=>!eP(i)).reduce((i,s)=>i+(zK.test(s)?BK:s===""?HK:GK),r)}function WK(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function YK(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",a=[];for(let o=0;o<r.length;++o){let c=r[o],h=o===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=z0({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},f),g=c.route;if(!p&&h&&n&&!r[r.length-1].route.index&&(p=z0({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Pa([s,p.pathname]),pathnameBase:nW(Pa([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Pa([s,p.pathnameBase]))}return a}function z0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=QK(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((h,{paramName:f,isOptional:p},g)=>{if(f==="*"){let R=o[g]||"";a=s.slice(0,s.length-R.length).replace(/(.)\/+$/,"$1")}const _=o[g];return p&&!_?h[f]=void 0:h[f]=(_||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:a,pattern:t}}function QK(t,e=!1,n=!0){Br(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function XK(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Br(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function za(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var JK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ZK=t=>JK.test(t);function eW(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?iu(t):t,s;if(n)if(ZK(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Br(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?s=tP(n.substring(1),"/"):s=tP(n,e)}else s=e;return{pathname:s,search:rW(r),hash:iW(i)}}function tP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function qT(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tW(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function qA(t){let e=tW(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function HA(t,e,n,r=!1){let i;typeof t=="string"?i=iu(t):(i={...t},zt(!i.pathname||!i.pathname.includes("?"),qT("?","pathname","search",i)),zt(!i.pathname||!i.pathname.includes("#"),qT("#","pathname","hash",i)),zt(!i.search||!i.search.includes("#"),qT("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let p=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}o=p>=0?e[p]:"/"}let c=eW(i,o),h=a&&a!=="/"&&a.endsWith("/"),f=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(h||f)&&(c.pathname+="/"),c}var Pa=t=>t.join("/").replace(/\/\/+/g,"/"),nW=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),rW=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,iW=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function sW(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var h5=["POST","PUT","PATCH","DELETE"];new Set(h5);var aW=["GET",...h5];new Set(aW);var Nd=P.createContext(null);Nd.displayName="DataRouter";var Qv=P.createContext(null);Qv.displayName="DataRouterState";P.createContext(!1);var d5=P.createContext({isTransitioning:!1});d5.displayName="ViewTransition";var oW=P.createContext(new Map);oW.displayName="Fetchers";var lW=P.createContext(null);lW.displayName="Await";var us=P.createContext(null);us.displayName="Navigation";var lg=P.createContext(null);lg.displayName="Location";var hs=P.createContext({outlet:null,matches:[],isDataRoute:!1});hs.displayName="Route";var GA=P.createContext(null);GA.displayName="RouteError";function cW(t,{relative:e}={}){zt(Pd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=P.useContext(us),{hash:i,pathname:s,search:a}=cg(t,{relative:e}),o=s;return n!=="/"&&(o=s==="/"?n:Pa([n,s])),r.createHref({pathname:o,search:a,hash:i})}function Pd(){return P.useContext(lg)!=null}function qi(){return zt(Pd(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(lg).location}var f5="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function m5(t){P.useContext(us).static||P.useLayoutEffect(t)}function su(){let{isDataRoute:t}=P.useContext(hs);return t?xW():uW()}function uW(){zt(Pd(),"useNavigate() may be used only in the context of a <Router> component.");let t=P.useContext(Nd),{basename:e,navigator:n}=P.useContext(us),{matches:r}=P.useContext(hs),{pathname:i}=qi(),s=JSON.stringify(qA(r)),a=P.useRef(!1);return m5(()=>{a.current=!0}),P.useCallback((c,h={})=>{if(Br(a.current,f5),!a.current)return;if(typeof c=="number"){n.go(c);return}let f=HA(c,JSON.parse(s),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Pa([e,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[e,n,s,i,t])}var hW=P.createContext(null);function dW(t){let e=P.useContext(hs).outlet;return P.useMemo(()=>e&&P.createElement(hW.Provider,{value:t},e),[e,t])}function cg(t,{relative:e}={}){let{matches:n}=P.useContext(hs),{pathname:r}=qi(),i=JSON.stringify(qA(n));return P.useMemo(()=>HA(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function fW(t,e){return p5(t,e)}function p5(t,e,n,r,i){var T;zt(Pd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=P.useContext(us),{matches:a}=P.useContext(hs),o=a[a.length-1],c=o?o.params:{},h=o?o.pathname:"/",f=o?o.pathnameBase:"/",p=o&&o.route;{let E=p&&p.path||"";g5(h,!p||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let g=qi(),_;if(e){let E=typeof e=="string"?iu(e):e;zt(f==="/"||((T=E.pathname)==null?void 0:T.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${E.pathname}" was given in the \`location\` prop.`),_=E}else _=g;let R=_.pathname||"/",N=R;if(f!=="/"){let E=f.replace(/^\//,"").split("/");N="/"+R.replace(/^\//,"").split("/").slice(E.length).join("/")}let A=l5(t,{pathname:N});Br(p||A!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),Br(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=_W(A&&A.map(E=>Object.assign({},E,{params:Object.assign({},c,E.params),pathname:Pa([f,s.encodeLocation?s.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?f:Pa([f,s.encodeLocation?s.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),a,n,r,i);return e&&b?P.createElement(lg.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},b):b}function mW(){let t=EW(),e=sW(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:s},"ErrorBoundary")," or"," ",P.createElement("code",{style:s},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:i},n):null,a)}var pW=P.createElement(mW,null),gW=class extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?P.createElement(hs.Provider,{value:this.props.routeContext},P.createElement(GA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function yW({routeContext:t,match:e,children:n}){let r=P.useContext(Nd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(hs.Provider,{value:t},n)}function _W(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n==null?void 0:n.errors;if(a!=null){let f=s.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);zt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let o=!1,c=-1;if(n)for(let f=0;f<s.length;f++){let p=s[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=f),p.route.id){let{loaderData:g,errors:_}=n,R=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!_||_[p.route.id]===void 0);if(p.route.lazy||R){o=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}let h=n&&r?(f,p)=>{var g,_;r(f,{location:n.location,params:((_=(g=n.matches)==null?void 0:g[0])==null?void 0:_.params)??{},errorInfo:p})}:void 0;return s.reduceRight((f,p,g)=>{let _,R=!1,N=null,A=null;n&&(_=a&&p.route.id?a[p.route.id]:void 0,N=p.route.errorElement||pW,o&&(c<0&&g===0?(g5("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,A=null):c===g&&(R=!0,A=p.route.hydrateFallbackElement||null)));let b=e.concat(s.slice(0,g+1)),T=()=>{let E;return _?E=N:R?E=A:p.route.Component?E=P.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=f,P.createElement(yW,{match:p,routeContext:{outlet:f,matches:b,isDataRoute:n!=null},children:E})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?P.createElement(gW,{location:n.location,revalidation:n.revalidation,component:N,error:_,children:T(),routeContext:{outlet:null,matches:b,isDataRoute:!0},onError:h}):T()},null)}function $A(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vW(t){let e=P.useContext(Nd);return zt(e,$A(t)),e}function wW(t){let e=P.useContext(Qv);return zt(e,$A(t)),e}function bW(t){let e=P.useContext(hs);return zt(e,$A(t)),e}function KA(t){let e=bW(t),n=e.matches[e.matches.length-1];return zt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function TW(){return KA("useRouteId")}function EW(){var r;let t=P.useContext(GA),e=wW("useRouteError"),n=KA("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function xW(){let{router:t}=vW("useNavigate"),e=KA("useNavigate"),n=P.useRef(!1);return m5(()=>{n.current=!0}),P.useCallback(async(i,s={})=>{Br(n.current,f5),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var nP={};function g5(t,e,n){!e&&!nP[t]&&(nP[t]=!0,Br(!1,n))}P.memo(AW);function AW({routes:t,future:e,state:n,unstable_onError:r}){return p5(t,void 0,n,r,e)}function SW({to:t,replace:e,state:n,relative:r}){zt(Pd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=P.useContext(us);Br(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=P.useContext(hs),{pathname:a}=qi(),o=su(),c=HA(t,qA(s),a,r==="path"),h=JSON.stringify(c);return P.useEffect(()=>{o(JSON.parse(h),{replace:e,state:n,relative:r})},[o,h,r,e,n]),null}function rP(t){return dW(t.context)}function We(t){zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function IW({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){zt(!Pd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=P.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof n=="string"&&(n=iu(n));let{pathname:c="/",search:h="",hash:f="",state:p=null,key:g="default"}=n,_=P.useMemo(()=>{let R=za(c,a);return R==null?null:{location:{pathname:R,search:h,hash:f,state:p,key:g},navigationType:r}},[a,c,h,f,p,g,r]);return Br(_!=null,`<Router basename="${a}"> is not able to match the URL "${c}${h}${f}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:P.createElement(us.Provider,{value:o},P.createElement(lg.Provider,{children:e,value:_}))}function RW({children:t,location:e}){return fW(C1(t),e)}function C1(t,e=[]){let n=[];return P.Children.forEach(t,(r,i)=>{if(!P.isValidElement(r))return;let s=[...e,i];if(r.type===P.Fragment){n.push.apply(n,C1(r.props.children,s));return}zt(r.type===We,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=C1(r.props.children,s)),n.push(a)}),n}var B_="get",q_="application/x-www-form-urlencoded";function Xv(t){return t!=null&&typeof t.tagName=="string"}function CW(t){return Xv(t)&&t.tagName.toLowerCase()==="button"}function NW(t){return Xv(t)&&t.tagName.toLowerCase()==="form"}function PW(t){return Xv(t)&&t.tagName.toLowerCase()==="input"}function DW(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function kW(t,e){return t.button===0&&(!e||e==="_self")&&!DW(t)}function N1(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function OW(t,e){let n=N1(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}var u_=null;function MW(){if(u_===null)try{new FormData(document.createElement("form"),0),u_=!1}catch{u_=!0}return u_}var VW=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function HT(t){return t!=null&&!VW.has(t)?(Br(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${q_}"`),null):t}function LW(t,e){let n,r,i,s,a;if(NW(t)){let o=t.getAttribute("action");r=o?za(o,e):null,n=t.getAttribute("method")||B_,i=HT(t.getAttribute("enctype"))||q_,s=new FormData(t)}else if(CW(t)||PW(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(r=c?za(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||B_,i=HT(t.getAttribute("formenctype"))||HT(o.getAttribute("enctype"))||q_,s=new FormData(o,t),!MW()){let{name:h,type:f,value:p}=t;if(f==="image"){let g=h?`${h}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else h&&s.append(h,p)}}else{if(Xv(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=B_,r=null,i=q_,a=t}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function WA(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function UW(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&za(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function jW(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function FW(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function zW(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await jW(s,n);return a.links?a.links():[]}return[]}));return GW(r.flat(1).filter(FW).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function iP(t,e,n,r,i,s){let a=(c,h)=>n[h]?c.route.id!==n[h].route.id:!0,o=(c,h)=>{var f;return n[h].pathname!==c.pathname||((f=n[h].route.path)==null?void 0:f.endsWith("*"))&&n[h].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,h)=>a(c,h)||o(c,h)):s==="data"?e.filter((c,h)=>{var p;let f=r.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(a(c,h)||o(c,h))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function BW(t,e,{includeHydrateFallback:n}={}){return qW(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function qW(t){return[...new Set(t)]}function HW(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function GW(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(HW(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function y5(){let t=P.useContext(Nd);return WA(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function $W(){let t=P.useContext(Qv);return WA(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var YA=P.createContext(void 0);YA.displayName="FrameworkContext";function _5(){let t=P.useContext(YA);return WA(t,"You must render this element inside a <HydratedRouter> element"),t}function KW(t,e){let n=P.useContext(YA),[r,i]=P.useState(!1),[s,a]=P.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:h,onMouseLeave:f,onTouchStart:p}=e,g=P.useRef(null);P.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let N=b=>{b.forEach(T=>{a(T.isIntersecting)})},A=new IntersectionObserver(N,{threshold:.5});return g.current&&A.observe(g.current),()=>{A.disconnect()}}},[t]),P.useEffect(()=>{if(r){let N=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(N)}}},[r]);let _=()=>{i(!0)},R=()=>{i(!1),a(!1)};return n?t!=="intent"?[s,g,{}]:[s,g,{onFocus:Gf(o,_),onBlur:Gf(c,R),onMouseEnter:Gf(h,_),onMouseLeave:Gf(f,R),onTouchStart:Gf(p,_)}]:[!1,g,{}]}function Gf(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function WW({page:t,...e}){let{router:n}=y5(),r=P.useMemo(()=>l5(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?P.createElement(QW,{page:t,matches:r,...e}):null}function YW(t){let{manifest:e,routeModules:n}=_5(),[r,i]=P.useState([]);return P.useEffect(()=>{let s=!1;return zW(t,e,n).then(a=>{s||i(a)}),()=>{s=!0}},[t,e,n]),r}function QW({page:t,matches:e,...n}){let r=qi(),{manifest:i,routeModules:s}=_5(),{basename:a}=y5(),{loaderData:o,matches:c}=$W(),h=P.useMemo(()=>iP(t,e,c,i,r,"data"),[t,e,c,i,r]),f=P.useMemo(()=>iP(t,e,c,i,r,"assets"),[t,e,c,i,r]),p=P.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let R=new Set,N=!1;if(e.forEach(b=>{var E;let T=i.routes[b.route.id];!T||!T.hasLoader||(!h.some(O=>O.route.id===b.route.id)&&b.route.id in o&&((E=s[b.route.id])!=null&&E.shouldRevalidate)||T.hasClientLoader?N=!0:R.add(b.route.id))}),R.size===0)return[];let A=UW(t,a,"data");return N&&R.size>0&&A.searchParams.set("_routes",e.filter(b=>R.has(b.route.id)).map(b=>b.route.id).join(",")),[A.pathname+A.search]},[a,o,r,i,h,e,t,s]),g=P.useMemo(()=>BW(f,i),[f,i]),_=YW(f);return P.createElement(P.Fragment,null,p.map(R=>P.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...n})),g.map(R=>P.createElement("link",{key:R,rel:"modulepreload",href:R,...n})),_.map(({key:R,link:N})=>P.createElement("link",{key:R,nonce:n.nonce,...N})))}function XW(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var v5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{v5&&(window.__reactRouterVersion="7.9.6")}catch{}function JW({basename:t,children:e,window:n}){let r=P.useRef();r.current==null&&(r.current=MK({window:n,v5Compat:!0}));let i=r.current,[s,a]=P.useState({action:i.action,location:i.location}),o=P.useCallback(c=>{P.startTransition(()=>a(c))},[a]);return P.useLayoutEffect(()=>i.listen(o),[i,o]),P.createElement(IW,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var w5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ri=P.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:o,target:c,to:h,preventScrollReset:f,viewTransition:p,...g},_){let{basename:R}=P.useContext(us),N=typeof h=="string"&&w5.test(h),A,b=!1;if(typeof h=="string"&&N&&(A=h,v5))try{let k=new URL(window.location.href),M=h.startsWith("//")?new URL(k.protocol+h):new URL(h),U=za(M.pathname,R);M.origin===k.origin&&U!=null?h=U+M.search+M.hash:b=!0}catch{Br(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=cW(h,{relative:i}),[E,O,j]=KW(r,g),q=tY(h,{replace:a,state:o,target:c,preventScrollReset:f,relative:i,viewTransition:p});function S(k){e&&e(k),k.defaultPrevented||q(k)}let C=P.createElement("a",{...g,...j,href:A||T,onClick:b||s?e:S,ref:XW(_,O),target:c,"data-discover":!N&&n==="render"?"true":void 0});return E&&!N?P.createElement(P.Fragment,null,C,P.createElement(WW,{page:T})):C});Ri.displayName="Link";var is=P.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:o,children:c,...h},f){let p=cg(a,{relative:h.relative}),g=qi(),_=P.useContext(Qv),{navigator:R,basename:N}=P.useContext(us),A=_!=null&&oY(p)&&o===!0,b=R.encodeLocation?R.encodeLocation(p).pathname:p.pathname,T=g.pathname,E=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;n||(T=T.toLowerCase(),E=E?E.toLowerCase():null,b=b.toLowerCase()),E&&N&&(E=za(E,N)||E);const O=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let j=T===b||!i&&T.startsWith(b)&&T.charAt(O)==="/",q=E!=null&&(E===b||!i&&E.startsWith(b)&&E.charAt(b.length)==="/"),S={isActive:j,isPending:q,isTransitioning:A},C=j?e:void 0,k;typeof r=="function"?k=r(S):k=[r,j?"active":null,q?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let M=typeof s=="function"?s(S):s;return P.createElement(Ri,{...h,"aria-current":C,className:k,ref:f,style:M,to:a,viewTransition:o},typeof c=="function"?c(S):c)});is.displayName="NavLink";var ZW=P.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:a=B_,action:o,onSubmit:c,relative:h,preventScrollReset:f,viewTransition:p,...g},_)=>{let R=sY(),N=aY(o,{relative:h}),A=a.toLowerCase()==="get"?"get":"post",b=typeof o=="string"&&w5.test(o),T=E=>{if(c&&c(E),E.defaultPrevented)return;E.preventDefault();let O=E.nativeEvent.submitter,j=(O==null?void 0:O.getAttribute("formmethod"))||a;R(O||E.currentTarget,{fetcherKey:e,method:j,navigate:n,replace:i,state:s,relative:h,preventScrollReset:f,viewTransition:p})};return P.createElement("form",{ref:_,method:A,action:N,onSubmit:r?c:T,...g,"data-discover":!b&&t==="render"?"true":void 0})});ZW.displayName="Form";function eY(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function b5(t){let e=P.useContext(Nd);return zt(e,eY(t)),e}function tY(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a}={}){let o=su(),c=qi(),h=cg(t,{relative:s});return P.useCallback(f=>{if(kW(f,e)){f.preventDefault();let p=n!==void 0?n:wp(c)===wp(h);o(t,{replace:p,state:r,preventScrollReset:i,relative:s,viewTransition:a})}},[c,o,h,n,r,e,t,i,s,a])}function nY(t){Br(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef(N1(t)),n=P.useRef(!1),r=qi(),i=P.useMemo(()=>OW(r.search,n.current?null:e.current),[r.search]),s=su(),a=P.useCallback((o,c)=>{const h=N1(typeof o=="function"?o(new URLSearchParams(i)):o);n.current=!0,s("?"+h,c)},[s,i]);return[i,a]}var rY=0,iY=()=>`__${String(++rY)}__`;function sY(){let{router:t}=b5("useSubmit"),{basename:e}=P.useContext(us),n=TW();return P.useCallback(async(r,i={})=>{let{action:s,method:a,encType:o,formData:c,body:h}=LW(r,e);if(i.navigate===!1){let f=i.fetcherKey||iY();await t.fetch(f,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:h,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:h,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function aY(t,{relative:e}={}){let{basename:n}=P.useContext(us),r=P.useContext(hs);zt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...cg(t||".",{relative:e})},a=qi();if(t==null){s.search=a.search;let o=new URLSearchParams(s.search),c=o.getAll("index");if(c.some(f=>f==="")){o.delete("index"),c.filter(p=>p).forEach(p=>o.append("index",p));let f=o.toString();s.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Pa([n,s.pathname])),wp(s)}function oY(t,{relative:e}={}){let n=P.useContext(d5);zt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=b5("useViewTransitionState"),i=cg(t,{relative:e});if(!n.isTransitioning)return!1;let s=za(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=za(n.nextLocation.pathname,r)||n.nextLocation.pathname;return z0(i.pathname,a)!=null||z0(i.pathname,s)!=null}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lY=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cY=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),sP=t=>{const e=cY(t);return e.charAt(0).toUpperCase()+e.slice(1)},T5=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),uY=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dY=P.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},c)=>P.createElement("svg",{ref:c,...hY,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:T5("lucide",i),...!s&&!uY(o)&&{"aria-hidden":"true"},...o},[...a.map(([h,f])=>P.createElement(h,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=(t,e)=>{const n=P.forwardRef(({className:r,...i},s)=>P.createElement(dY,{ref:s,iconNode:e,className:T5(`lucide-${lY(sP(t))}`,`lucide-${t}`,r),...i}));return n.displayName=sP(t),n};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fY=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],E5=je("arrow-left",fY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],pY=je("arrow-right",mY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gY=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],aP=je("check",gY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yY=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],_Y=je("chevron-down",yY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Mm=je("circle-alert",vY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wY=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],x5=je("circle-check-big",wY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],TY=je("circle-check",bY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],xY=je("circle-x",EY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],SY=je("external-link",AY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IY=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],A5=je("eye-off",IY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RY=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],S5=je("eye",RY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CY=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],NY=je("facebook",CY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PY=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],DY=je("gift",PY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kY=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],OY=je("house",kY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],I5=je("info",MY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],LY=je("instagram",VY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UY=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],si=je("loader-circle",UY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jY=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],P1=je("lock",jY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FY=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],R5=je("log-out",FY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zY=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],bp=je("mail",zY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BY=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],qY=je("map-pin",BY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HY=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],GY=je("menu",HY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Y=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],oP=je("message-circle",$Y);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KY=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],WY=je("minimize-2",KY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YY=[["path",{d:"M5 12h14",key:"1ays0h"}]],D1=je("minus",YY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QY=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],QA=je("phone",QY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],C5=je("plus",XY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JY=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],N5=je("refresh-cw",JY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZY=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],eQ=je("send",ZY);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tQ=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],nQ=je("share-2",tQ);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rQ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],iQ=je("shield-alert",rQ);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sQ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],aQ=je("shield-check",sQ);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oQ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],B0=je("shield",oQ);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lQ=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],cQ=je("shopping-cart",lQ);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uQ=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],hQ=je("trash-2",uQ);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dQ=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],P5=je("trending-up",dQ);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fQ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],D5=je("triangle-alert",fQ);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mQ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],k1=je("user",mQ);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pQ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ll=je("x",pQ);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gQ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],q0=je("zap",gQ),Ws=({className:t,...e})=>y.jsxs("svg",{viewBox:"0 0 241 175",xmlns:"http://www.w3.org/2000/svg",className:t,fill:"currentColor",...e,children:[y.jsx("path",{d:"M153.092 78.5C178.275 50.84 210.393 19.4076 222.5 17.5C234.607 15.5924 239.5 30 239.5 30C239.5 30 244.137 46.596 236.388 72.8253C228.64 99.0547 199 128.5 199 128.5C199 128.5 177.5 152.5 147.5 167C147.5 167 114.686 183.001 104.889 169.159C95.0912 155.316 127.909 106.16 153.092 78.5Z"}),y.jsx("path",{d:"M8.99445 86.0801C8.99445 86.0801 -16.2682 31.1886 17.8826 14.4198C33.7618 9.56756 76 55.675 76 64.5C76 70 63.7899 86.337 59 101.5C54.887 114.52 55.557 134.266 52.0896 135.774C48.0468 137.533 37.3644 137.835 8.99445 86.0801Z"}),y.jsx("path",{d:"M47 12.5C41.0274 7.52362 41.5502 -7.59339e-06 52.5 0C63.4498 7.5934e-06 69.3348 2.24286 82.0884 7.45282C95.3718 12.8792 105.888 16.4103 109.463 23.875C111.5 32.5 107.979 33.026 103.5 38.5C99.0205 43.9741 96 44.1666 91 43.5C83.5342 42.5047 52.9726 17.4764 47 12.5Z"}),y.jsx("path",{d:"M200.048 20.8891C212.988 11.4339 207.491 2.52815 200.048 2.97405C192.604 3.41995 127.379 9.72972 89.5542 67.6673C85.4261 73.9905 72.4385 95.2439 69.1452 112.455C65.6022 130.971 65.8681 149.097 73.6272 157.74C81.0528 166.012 88.1891 164.145 92.2823 156.482C96.4277 148.721 97.4982 135.065 100.004 127.882C104.983 113.605 104.907 116.382 109.393 106.379C114.278 95.4879 120.938 86.2377 126.993 78.4363C154.543 42.9442 190.775 27.6646 200.048 20.8891Z"})]}),yQ=({children:t,className:e="",hover:n=!1,variant:r="default",padding:i="md",clickable:s=!1,onClick:a})=>{const o="rounded-2xl transition-all duration-300 ease-out",c={default:"border border-gray-100 bg-white/80 backdrop-blur-sm shadow-lg",elevated:"bg-white shadow-xl border-0",outlined:"border-2 border-primary-200 bg-white",glass:"bg-white/70 backdrop-blur-md border border-white/20 shadow-xl"},h={none:"",sm:"p-4",md:"p-6",lg:"p-8"},f=n?"hover:shadow-2xl hover:-translate-y-1 hover:scale-[1.02]":"",p=s?"cursor-pointer active:scale-[0.98]":"";return y.jsx("div",{className:`${o} ${c[r]} ${h[i]} ${f} ${p} ${e}`,onClick:s?a:void 0,role:s?"button":void 0,tabIndex:s?0:void 0,children:t})},XA=({isOpen:t,onClose:e,title:n,children:r,footer:i,size:s="md",hideHeader:a=!1,hideCloseButton:o=!1,className:c=""})=>{const[h,f]=P.useState(!1);if(P.useEffect(()=>{const g=_=>{_.key==="Escape"&&e()};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[e]),P.useEffect(()=>{window.getComputedStyle(document.body).overflow;const g=document.getElementById("admin-main-content");return t?(document.body.style.overflow="hidden",g&&(window.getComputedStyle(g).overflow,g.style.overflow="hidden")):(document.body.style.overflow="",g&&(g.style.overflow="")),()=>{document.body.style.overflow="",g&&(g.style.overflow="")}},[t]),P.useEffect(()=>{if(t){f(!0);const g=setTimeout(()=>{f(!1)},1e3);return()=>clearTimeout(g)}},[t,s,r]),!t)return null;const p={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-2xl"};return typeof document<"u"?wM.createPortal(y.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm animate-fade-in",role:"dialog","aria-modal":"true","aria-labelledby":n?"modal-title":void 0,onClick:e,children:y.jsx("div",{className:`relative w-full transform transition-all ${p[s]} ${c} max-h-[90vh] flex flex-col animate-scale-in`,onClick:g=>g.stopPropagation(),children:y.jsxs(yQ,{variant:"elevated",className:"rounded-3xl p-0 shadow-2xl flex flex-col max-h-full overflow-hidden bg-white",children:[!o&&y.jsx("button",{onClick:e,className:"absolute right-6 top-6 z-10 rounded-full p-2 text-gray-400 transition-all hover:bg-gray-100 hover:text-gray-600 active:scale-95","aria-label":"Close modal",children:y.jsx(ll,{className:"h-6 w-6"})}),!a&&n&&y.jsx("div",{className:"px-8 pt-8 pb-2 flex-shrink-0",children:y.jsx("h3",{id:"modal-title",className:"text-2xl font-bold text-gray-900",children:n})}),y.jsx("div",{className:`${a&&!n?"p-6 pb-10":"px-6 py-6 pb-10"} overflow-y-auto custom-scrollbar ${h?"scrollbar-flash":""} flex-1`,children:r}),i&&y.jsx("div",{className:"flex justify-end gap-3 px-6 pb-2 pt-2 flex-shrink-0",children:i})]})})}),document.body):null},_Q=()=>{};var lP={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},vQ=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],o=t[n++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},O5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,c=i+2<t.length,h=c?t[i+2]:0,f=s>>2,p=(s&3)<<4|o>>4;let g=(o&15)<<2|h>>6,_=h&63;c||(_=64,a||(g=64)),r.push(n[f],n[p],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(k5(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vQ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||o==null||h==null||p==null)throw new wQ;const g=s<<2|o>>4;if(r.push(g),h!==64){const _=o<<4&240|h>>2;if(r.push(_),p!==64){const R=h<<6&192|p;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wQ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bQ=function(t){const e=k5(t);return O5.encodeByteArray(e,!0)},H0=function(t){return bQ(t).replace(/\./g,"")},Jv=function(t){try{return O5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function G0(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!TQ(n)||(t[n]=G0(t[n],e[n]));return t}function TQ(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EQ=()=>JA().__FIREBASE_DEFAULTS__,xQ=()=>{if(typeof process>"u"||typeof lP>"u")return;const t=lP.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},AQ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Jv(t[1]);return e&&JSON.parse(e)},ZA=()=>{try{return _Q()||EQ()||xQ()||AQ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},eS=()=>{var t;return(t=ZA())==null?void 0:t.config},M5=t=>{var e;return(e=ZA())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SQ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function tS(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[H0(JSON.stringify(n)),H0(JSON.stringify(a)),""].join(".")}const Vm={};function IQ(){const t={prod:[],emulator:[]};for(const e of Object.keys(Vm))Vm[e]?t.emulator.push(e):t.prod.push(e);return t}function RQ(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let cP=!1;function nS(t,e){if(typeof window>"u"||typeof document>"u"||!Ys(window.location.host)||Vm[t]===e||Vm[t]||cP)return;Vm[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=IQ().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,_){g.setAttribute("width","24"),g.setAttribute("id",_),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{cP=!0,a()},g}function f(g,_){g.setAttribute("id",_),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=RQ(r),_=n("text"),R=document.getElementById(_)||document.createElement("span"),N=n("learnmore"),A=document.getElementById(N)||document.createElement("a"),b=n("preprendIcon"),T=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const E=g.element;o(E),f(A,N);const O=h();c(T,b),E.append(T,R,A,O),document.body.appendChild(E)}s?(R.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function L5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function Zv(){var e;const t=(e=ZA())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CQ(){return typeof window<"u"||U5()}function U5(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function j5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ew(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function F5(){const t=tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function z5(){return!Zv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B5(){return!Zv()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Tp(){try{return typeof indexedDB=="object"}catch{return!1}}function NQ(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PQ="FirebaseError";class jn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=PQ,Object.setPrototypeOf(this,jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qs.prototype.create)}}class Qs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?DQ(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new jn(i,o,r)}}function DQ(t,e){return t.replace(kQ,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const kQ=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function OQ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(hP(s)&&hP(a)){if(!cl(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function hP(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _h(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function cm(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function iS(t,e){const n=new MQ(t,e);return n.subscribe.bind(n)}class MQ{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");VQ(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=GT),i.error===void 0&&(i.error=GT),i.complete===void 0&&(i.complete=GT);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VQ(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function GT(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t){return t&&t._delegate?t._delegate:t}class qr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LQ{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new SQ;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jQ(e))try{this.getOrInitializeService({instanceIdentifier:cc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=cc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cc){return this.instances.has(e)}getOptions(e=cc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:UQ(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=cc){return this.component?this.component.multipleInstances?e:cc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UQ(t){return t===cc?void 0:t}function jQ(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new LQ(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=[];var ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ze||(ze={}));const H5={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},FQ=ze.INFO,zQ={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},BQ=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=zQ[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ug{constructor(e){this.name=e,this._logLevel=FQ,this._logHandler=BQ,this._userLogHandler=null,sS.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?H5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}function qQ(t){sS.forEach(e=>{e.setLogLevel(t)})}function HQ(t,e){for(const n of sS){let r=null;e&&e.level&&(r=H5[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...a)=>{const o=a.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");s>=(r??i.logLevel)&&t({level:ze[s].toLowerCase(),message:o,args:a,type:i.name})}}}const GQ=(t,e)=>e.some(n=>t instanceof n);let dP,fP;function $Q(){return dP||(dP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KQ(){return fP||(fP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const G5=new WeakMap,O1=new WeakMap,$5=new WeakMap,$T=new WeakMap,aS=new WeakMap;function WQ(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Zo(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&G5.set(n,t)}).catch(()=>{}),aS.set(e,t),e}function YQ(t){if(O1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});O1.set(t,e)}let M1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return O1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$5.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QQ(t){M1=t(M1)}function XQ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(KT(this),e,...n);return $5.set(r,e.sort?e.sort():[e]),Zo(r)}:KQ().includes(t)?function(...e){return t.apply(KT(this),e),Zo(G5.get(this))}:function(...e){return Zo(t.apply(KT(this),e))}}function JQ(t){return typeof t=="function"?XQ(t):(t instanceof IDBTransaction&&YQ(t),GQ(t,$Q())?new Proxy(t,M1):t)}function Zo(t){if(t instanceof IDBRequest)return WQ(t);if($T.has(t))return $T.get(t);const e=JQ(t);return e!==t&&($T.set(t,e),aS.set(e,t)),e}const KT=t=>aS.get(t);function ZQ(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=Zo(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Zo(a.result),c.oldVersion,c.newVersion,Zo(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),o}const eX=["get","getKey","getAll","getAllKeys","count"],tX=["put","add","delete","clear"],WT=new Map;function mP(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(WT.get(e))return WT.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=tX.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||eX.includes(n)))return;const s=async function(a,...o){const c=this.transaction(a,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(o.shift())),(await Promise.all([h[n](...o),i&&c.done]))[0]};return WT.set(e,s),s}QQ(t=>({...t,get:(e,n,r)=>mP(e,n)||t.get(e,n,r),has:(e,n)=>!!mP(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nX{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rX(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rX(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $0="@firebase/app",V1="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=new ug("@firebase/app"),iX="@firebase/app-compat",sX="@firebase/analytics-compat",aX="@firebase/analytics",oX="@firebase/app-check-compat",lX="@firebase/app-check",cX="@firebase/auth",uX="@firebase/auth-compat",hX="@firebase/database",dX="@firebase/data-connect",fX="@firebase/database-compat",mX="@firebase/functions",pX="@firebase/functions-compat",gX="@firebase/installations",yX="@firebase/installations-compat",_X="@firebase/messaging",vX="@firebase/messaging-compat",wX="@firebase/performance",bX="@firebase/performance-compat",TX="@firebase/remote-config",EX="@firebase/remote-config-compat",xX="@firebase/storage",AX="@firebase/storage-compat",SX="@firebase/firestore",IX="@firebase/ai",RX="@firebase/firestore-compat",CX="firebase",NX="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul="[DEFAULT]",PX={[$0]:"fire-core",[iX]:"fire-core-compat",[aX]:"fire-analytics",[sX]:"fire-analytics-compat",[lX]:"fire-app-check",[oX]:"fire-app-check-compat",[cX]:"fire-auth",[uX]:"fire-auth-compat",[hX]:"fire-rtdb",[dX]:"fire-data-connect",[fX]:"fire-rtdb-compat",[mX]:"fire-fn",[pX]:"fire-fn-compat",[gX]:"fire-iid",[yX]:"fire-iid-compat",[_X]:"fire-fcm",[vX]:"fire-fcm-compat",[wX]:"fire-perf",[bX]:"fire-perf-compat",[TX]:"fire-rc",[EX]:"fire-rc-compat",[xX]:"fire-gcs",[AX]:"fire-gcs-compat",[SX]:"fire-fst",[RX]:"fire-fst-compat",[IX]:"fire-vertex","fire-js":"fire-js",[CX]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=new Map,Qh=new Map,Xh=new Map;function Ep(t,e){try{t.container.addComponent(e)}catch(n){Ba.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function K5(t,e){t.container.addOrOverwriteComponent(e)}function os(t){const e=t.name;if(Xh.has(e))return Ba.debug(`There were multiple attempts to register component ${e}.`),!1;Xh.set(e,t);for(const n of hl.values())Ep(n,t);for(const n of Qh.values())Ep(n,t);return!0}function W5(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function DX(t,e,n=ul){W5(t,e).clearInstance(n)}function oS(t){return t.options!==void 0}function Y5(t){return oS(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function it(t){return t==null?!1:t.settings!==void 0}function kX(){Xh.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OX={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},di=new Qs("app","Firebase",OX);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q5=class{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw di.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(t,e){const n=Jv(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(n).exp*1e3,s=new Date().getTime();i-s<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class MX extends Q5{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,a={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,a,i);else{const o=e;super(o.options,a,i)}this._serverConfig={automaticDataCollectionEnabled:s,...n},this._serverConfig.authIdToken&&pP(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&pP(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,br($0,V1,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){cS(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw di.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=NX;function lS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ul,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw di.create("bad-app-name",{appName:String(i)});if(n||(n=eS()),!n)throw di.create("no-options");const s=hl.get(i);if(s){if(cl(n,s.options)&&cl(r,s.config))return s;throw di.create("duplicate-app",{appName:i})}const a=new q5(i);for(const c of Xh.values())a.addComponent(c);const o=new Q5(n,r,a);return hl.set(i,o),o}function VX(t,e={}){if(CQ()&&!U5())throw di.create("invalid-server-app-environment");let n,r=e||{};if(t&&(oS(t)?n=t.options:Y5(t)?r=t:n=t),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),n||(n=eS()),!n)throw di.create("no-options");const i={...r,...n};i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const s=f=>[...f].reduce((p,g)=>Math.imul(31,p)+g.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw di.create("finalization-registry-not-supported",{});const a=""+s(JSON.stringify(i)),o=Qh.get(a);if(o)return o.incRefCount(r.releaseOnDeref),o;const c=new q5(a);for(const f of Xh.values())c.addComponent(f);const h=new MX(n,r,a,c);return Qh.set(a,h),h}function LX(t=ul){const e=hl.get(t);if(!e&&t===ul&&eS())return lS();if(!e)throw di.create("no-app",{appName:t});return e}function UX(){return Array.from(hl.values())}async function cS(t){let e=!1;const n=t.name;hl.has(n)?(e=!0,hl.delete(n)):Qh.has(n)&&t.decRefCount()<=0&&(Qh.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function br(t,e,n){let r=PX[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ba.warn(a.join(" "));return}os(new qr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function X5(t,e){if(t!==null&&typeof t!="function")throw di.create("invalid-log-argument");HQ(t,e)}function J5(t){qQ(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jX="firebase-heartbeat-database",FX=1,xp="firebase-heartbeat-store";let YT=null;function Z5(){return YT||(YT=ZQ(jX,FX,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xp)}catch(n){console.warn(n)}}}}).catch(t=>{throw di.create("idb-open",{originalErrorMessage:t.message})})),YT}async function zX(t){try{const n=(await Z5()).transaction(xp),r=await n.objectStore(xp).get(e4(t));return await n.done,r}catch(e){if(e instanceof jn)Ba.warn(e.message);else{const n=di.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ba.warn(n.message)}}}async function gP(t,e){try{const r=(await Z5()).transaction(xp,"readwrite");await r.objectStore(xp).put(e,e4(t)),await r.done}catch(n){if(n instanceof jn)Ba.warn(n.message);else{const r=di.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ba.warn(r.message)}}}function e4(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BX=1024,qX=30;class HX{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $X(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=yP();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>qX){const a=KX(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ba.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=yP(),{heartbeatsToSend:r,unsentEntries:i}=GX(this._heartbeatsCache.heartbeats),s=H0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ba.warn(n),""}}}function yP(){return new Date().toISOString().substring(0,10)}function GX(t,e=BX){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),_P(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),_P(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $X{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tp()?NQ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zX(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return gP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return gP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function _P(t){return H0(JSON.stringify({version:2,heartbeats:t})).length}function KX(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WX(t){os(new qr("platform-logger",e=>new nX(e),"PRIVATE")),os(new qr("heartbeat",e=>new HX(e),"PRIVATE")),br($0,V1,t),br($0,V1,"esm2020"),br("fire-js","")}WX("");const YX=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:jn,SDK_VERSION:Hi,_DEFAULT_ENTRY_NAME:ul,_addComponent:Ep,_addOrOverwriteComponent:K5,_apps:hl,_clearComponents:kX,_components:Xh,_getProvider:W5,_isFirebaseApp:oS,_isFirebaseServerApp:it,_isFirebaseServerAppSettings:Y5,_registerComponent:os,_removeServiceInstance:DX,_serverApps:Qh,deleteApp:cS,getApp:LX,getApps:UX,initializeApp:lS,initializeServerApp:VX,onLog:X5,registerVersion:br,setLogLevel:J5},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QX{constructor(e,n){this._delegate=e,this.firebase=n,Ep(e,new qr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),cS(this._delegate)))}_getService(e,n=ul){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())==null?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=ul){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Ep(this._delegate,e)}_addOrOverwriteComponent(e){K5(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XX={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},vP=new Qs("app-compat","Firebase",XX);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JX(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:br,setLogLevel:J5,onLog:X5,apps:null,SDK_VERSION:Hi,INTERNAL:{registerComponent:o,removeApp:r,useAsService:c,modularAPIs:YX}};n.default=n,Object.defineProperty(n,"apps",{get:a});function r(h){delete e[h]}function i(h){if(h=h||ul,!uP(e,h))throw vP.create("no-app",{appName:h});return e[h]}i.App=t;function s(h,f={}){const p=lS(h,f);if(uP(e,p.name))return e[p.name];const g=new t(p,n);return e[p.name]=g,g}function a(){return Object.keys(e).map(h=>e[h])}function o(h){const f=h.name,p=f.replace("-compat","");if(os(h)&&h.type==="PUBLIC"){const g=(_=i())=>{if(typeof _[p]!="function")throw vP.create("invalid-app-argument",{appName:f});return _[p]()};h.serviceProps!==void 0&&G0(g,h.serviceProps),n[p]=g,t.prototype[p]=function(..._){return this._getService.bind(this,f).apply(this,h.multipleInstances?_:[])}}return h.type==="PUBLIC"?n[p]:null}function c(h,f){return f==="serverAuth"?null:f}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(){const t=JX(QX);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:t4,extendNamespace:e,createSubscribe:iS,ErrorFactory:Qs,deepExtend:G0};function e(n){G0(t,n)}return t}const ZX=t4();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=new ug("@firebase/app-compat"),eJ="@firebase/app-compat",tJ="0.5.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nJ(t){br(eJ,tJ,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=JA();if(t.firebase!==void 0){wP.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&wP.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Ln=ZX;nJ();var rJ="firebase",iJ="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln.registerVersion(rJ,iJ,"app-compat");const $f={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},qu={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sJ(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function n4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aJ=sJ,oJ=n4,r4=new Qs("auth","Firebase",n4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=new ug("@firebase/auth");function lJ(t,...e){K0.logLevel<=ze.WARN&&K0.warn(`Auth (${Hi}): ${t}`,...e)}function H_(t,...e){K0.logLevel<=ze.ERROR&&K0.error(`Auth (${Hi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t,...e){throw hS(t,...e)}function Sn(t,...e){return hS(t,...e)}function uS(t,e,n){const r={...oJ(),[e]:n};return new Qs("auth","Firebase",r).create(e,{appName:t.name})}function Fn(t){return uS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dd(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Xn(t,"argument-error"),uS(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hS(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return r4.create(t,...e)}function le(t,e,...n){if(!t)throw hS(e,...n)}function Ds(t){const e="INTERNAL ASSERTION FAILED: "+t;throw H_(e),new Error(e)}function ls(t,e){t||Ds(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function dS(){return bP()==="http:"||bP()==="https:"}function bP(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cJ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dS()||rS()||"connection"in navigator)?navigator.onLine:!0}function uJ(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hg=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ls(n>e,"Short delay should be less than long delay!"),this.isMobile=L5()||ew()}get(){return cJ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(t,e){ls(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i4=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hJ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dJ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fJ=new hg(3e4,6e4);function tn(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function nn(t,e,n,r,i={}){return s4(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=xl({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:c,...s};return j5()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Ys(t.emulatorConfig.host)&&(h.credentials="include"),i4.fetch()(await a4(t,t.config.apiHost,n,o),h)})}async function s4(t,e,n){t._canInitEmulator=!1;const r={...hJ,...e};try{const i=new pJ(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw um(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[c,h]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw um(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw um(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw um(t,"user-disabled",a);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw uS(t,f,h);Xn(t,f)}}catch(i){if(i instanceof jn)throw i;Xn(t,"network-request-failed",{message:String(i)})}}async function Wa(t,e,n,r,i={}){const s=await nn(t,e,n,r,i);return"mfaPendingCredential"in s&&Xn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function a4(t,e,n,r){const i=`${e}${n}?${r}`,s=t,a=s.config.emulator?fS(t.config,i):`${t.config.apiScheme}://${i}`;return dJ.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function mJ(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}let pJ=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sn(this.auth,"network-request-failed")),fJ.get())})}};function um(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Sn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t){return t!==void 0&&t.getResponse!==void 0}function EP(t){return t!==void 0&&t.enterprise!==void 0}class o4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return mJ(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gJ(t){return(await nn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function l4(t,e){return nn(t,"GET","/v2/recaptchaConfig",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yJ(t,e){return nn(t,"POST","/v1/accounts:delete",e)}async function _J(t,e){return nn(t,"POST","/v1/accounts:update",e)}async function W0(t,e){return nn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vJ(t,e=!1){const n=ye(t),r=await n.getIdToken(e),i=tw(r);le(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Lm(QT(i.auth_time)),issuedAtTime:Lm(QT(i.iat)),expirationTime:Lm(QT(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function QT(t){return Number(t)*1e3}function tw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return H_("JWT malformed, contained fewer than 3 sections"),null;try{const i=Jv(n);return i?JSON.parse(i):(H_("Failed to decode base64 JWT payload"),null)}catch(i){return H_("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function xP(t){const e=tw(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof jn&&wJ(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function wJ({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bJ=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L1=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lm(this.lastLoginAt),this.creationTime=Lm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sp(t){var p;const e=t.auth,n=await t.getIdToken(),r=await qa(t,W0(e,{idToken:n}));le(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(p=i.providerUserInfo)!=null&&p.length?c4(i.providerUserInfo):[],a=EJ(t.providerData,s),o=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=o?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new L1(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function TJ(t){const e=ye(t);await Sp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EJ(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function c4(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xJ(t,e){const n=await s4(t,{},async()=>{const r=xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=await a4(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return t.emulatorConfig&&Ys(t.emulatorConfig.host)&&(c.credentials="include"),i4.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function AJ(t,e){return nn(t,"POST","/v2/accounts:revokeToken",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XT=class U1{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=xP(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await xJ(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new U1;return r&&(le(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(le(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new U1,this.toJSON())}_performRefresh(){return Ds("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}let vh=class hm{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new bJ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new L1(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await qa(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vJ(this,e)}reload(){return TJ(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new hm({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Sp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(it(this.auth.app))return Promise.reject(Fn(this.auth));const e=await this.getIdToken();return await qa(this,yJ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,o=n.tenantId??void 0,c=n._redirectEventId??void 0,h=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:_,providerData:R,stsTokenManager:N}=n;le(p&&N,e,"internal-error");const A=XT.fromJSON(this.name,N);le(typeof p=="string",e,"internal-error"),bo(r,e.name),bo(i,e.name),le(typeof g=="boolean",e,"internal-error"),le(typeof _=="boolean",e,"internal-error"),bo(s,e.name),bo(a,e.name),bo(o,e.name),bo(c,e.name),bo(h,e.name),bo(f,e.name);const b=new hm({uid:p,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:_,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:A,createdAt:h,lastLoginAt:f});return R&&Array.isArray(R)&&(b.providerData=R.map(T=>({...T}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,n,r=!1){const i=new XT;i.updateFromServerResponse(n);const s=new hm({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Sp(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];le(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?c4(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new XT;o.updateFromIdToken(r);const c=new hm({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new L1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,h),c}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=new Map;function ai(t){ls(t instanceof Function,"Expected a class definition");let e=AP.get(t);return e?(ls(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,AP.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let u4=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}};u4.type="NONE";const Jh=u4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(t,e,n){return`firebase:${t}:${e}:${n}`}let SP=class G_{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Nc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Nc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await W0(this.auth,{idToken:e}).catch(()=>{});return n?vh._fromGetAccountInfoResponse(this.auth,n,e):null}return vh._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new G_(ai(Jh),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||ai(Jh);const a=Nc(r,e.config.apiKey,e.name);let o=null;for(const h of n)try{const f=await h._get(a);if(f){let p;if(typeof f=="string"){const g=await W0(e,{idToken:f}).catch(()=>{});if(!g)break;p=await vh._fromGetAccountInfoResponse(e,g,f)}else p=vh._fromJSON(e,f);h!==s&&(o=p),s=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new G_(s,e,r):(s=c[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new G_(s,e,r))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(h4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(p4(e))return"Blackberry";if(g4(e))return"Webos";if(d4(e))return"Safari";if((e.includes("chrome/")||f4(e))&&!e.includes("edge/"))return"Chrome";if(dg(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function h4(t=tt()){return/firefox\//i.test(t)}function d4(t=tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function f4(t=tt()){return/crios\//i.test(t)}function m4(t=tt()){return/iemobile/i.test(t)}function dg(t=tt()){return/android/i.test(t)}function p4(t=tt()){return/blackberry/i.test(t)}function g4(t=tt()){return/webos/i.test(t)}function fg(t=tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function SJ(t=tt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function IJ(t=tt()){var e;return fg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function RJ(){return F5()&&document.documentMode===10}function y4(t=tt()){return fg(t)||dg(t)||g4(t)||p4(t)||/windows phone/i.test(t)||m4(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(t,e=[]){let n;switch(t){case"Browser":n=IP(tt());break;case"Worker":n=`${IP(tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CJ=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,o)=>{try{const c=e(s);a(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NJ(t,e={}){return nn(t,"GET","/v2/passwordPolicy",tn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PJ=6;let DJ=class{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??PJ,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kJ=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new RP(this),this.idTokenSubscription=new RP(this),this.beforeStateQueue=new CJ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=r4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ai(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await SP.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await W0(this,{idToken:e}),r=await vh._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(it(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uJ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(it(this.app))return Promise.reject(Fn(this));const n=e?ye(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return it(this.app)?Promise.reject(Fn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return it(this.app)?Promise.reject(Fn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NJ(this),n=new DJ(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await AJ(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ai(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await SP.create(this,[ai(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(it(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&lJ(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}};function Ht(t){return ye(t)}let RP=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=iS(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OJ(t){mg=t}function mS(t){return mg.loadJS(t)}function MJ(){return mg.recaptchaV2Script}function VJ(){return mg.recaptchaEnterpriseScript}function LJ(){return mg.gapiScript}function v4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UJ=500,jJ=6e4,h_=1e12;class FJ{constructor(e){this.auth=e,this.counter=h_,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new qJ(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||h_;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||h_;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||h_;return(r=this._widgets.get(n))==null||r.execute(),""}}class zJ{constructor(){this.enterprise=new BJ}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class BJ{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class qJ{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;le(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=HJ(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},jJ)},UJ))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function HJ(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const GJ="recaptcha-enterprise",Um="NO_RECAPTCHA";class w4{constructor(e){this.type=GJ,this.auth=Ht(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{l4(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const h=new o4(c);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(c=>{o(c)})})}function i(s,a,o){const c=window.grecaptcha;EP(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(h=>{a(h)}).catch(()=>{a(Um)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zJ().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(o=>{if(!n&&EP(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=VJ();c.length!==0&&(c+=o),mS(c).then(()=>{i(o,s,a)}).catch(h=>{a(h)})}}).catch(o=>{a(o)})})}}async function Kf(t,e,n,r=!1,i=!1){const s=new w4(t);let a;if(i)a=Um;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,h=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function el(t,e,n,r,i){var s,a;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Kf(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Kf(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(o)});else if(i==="PHONE_PROVIDER")if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("PHONE_PROVIDER")){const o=await Kf(t,e,n);return r(t,o).catch(async c=>{var h;if(((h=t._getRecaptchaConfig())==null?void 0:h.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const f=await Kf(t,e,n,!1,!0);return r(t,f)}return Promise.reject(c)})}else{const o=await Kf(t,e,n,!1,!0);return r(t,o)}else return Promise.reject(i+" provider is not supported.")}async function $J(t){const e=Ht(t),n=await l4(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new o4(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new w4(e).verify()}function KJ(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ai);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function WJ(t,e,n){const r=Ht(t);le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=b4(e),{host:a,port:o}=YJ(e),c=o===null?"":`:${o}`,h={url:`${s}//${a}${c}/`},f=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),le(cl(h,r.config.emulator)&&cl(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Ys(a)?(tS(`${s}//${a}${c}`),nS("Auth",!0)):i||QJ()}function b4(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function YJ(t){const e=b4(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:CP(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:CP(a)}}}function CP(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function QJ(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ds("not implemented")}_getIdTokenResponse(e){return Ds("not implemented")}_linkToIdToken(e,n){return Ds("not implemented")}_getReauthenticationResolver(e){return Ds("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4(t,e){return nn(t,"POST","/v1/accounts:resetPassword",tn(t,e))}async function XJ(t,e){return nn(t,"POST","/v1/accounts:update",e)}async function JJ(t,e){return nn(t,"POST","/v1/accounts:signUp",e)}async function ZJ(t,e){return nn(t,"POST","/v1/accounts:update",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eZ(t,e){return Wa(t,"POST","/v1/accounts:signInWithPassword",tn(t,e))}async function nw(t,e){return nn(t,"POST","/v1/accounts:sendOobCode",tn(t,e))}async function tZ(t,e){return nw(t,e)}async function nZ(t,e){return nw(t,e)}async function rZ(t,e){return nw(t,e)}async function iZ(t,e){return nw(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sZ(t,e){return Wa(t,"POST","/v1/accounts:signInWithEmailLink",tn(t,e))}async function aZ(t,e){return Wa(t,"POST","/v1/accounts:signInWithEmailLink",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip extends kd{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ip(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ip(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return el(e,n,"signInWithPassword",eZ,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return sZ(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return el(e,r,"signUpPassword",JJ,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return aZ(e,{idToken:n,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(t,e){return Wa(t,"POST","/v1/accounts:signInWithIdp",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oZ="http://localhost";class qs extends kd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new qs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const a=new qs(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Da(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Da(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Da(e,n)}buildRequest(){const e={requestUri:oZ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NP(t,e){return nn(t,"POST","/v1/accounts:sendVerificationCode",tn(t,e))}async function lZ(t,e){return Wa(t,"POST","/v1/accounts:signInWithPhoneNumber",tn(t,e))}async function cZ(t,e){const n=await Wa(t,"POST","/v1/accounts:signInWithPhoneNumber",tn(t,e));if(n.temporaryProof)throw um(t,"account-exists-with-different-credential",n);return n}const uZ={USER_NOT_FOUND:"user-not-found"};async function hZ(t,e){const n={...e,operation:"REAUTH"};return Wa(t,"POST","/v1/accounts:signInWithPhoneNumber",tn(t,n),uZ)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends kd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Pc({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Pc({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return lZ(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return cZ(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return hZ(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Pc({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dZ(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fZ(t){const e=_h(cm(t)).link,n=e?_h(cm(e)).deep_link_id:null,r=_h(cm(t)).deep_link_id;return(r?_h(cm(r)).link:null)||r||n||e||t}class rw{constructor(e){const n=_h(cm(e)),r=n.apiKey??null,i=n.oobCode??null,s=dZ(n.mode??null);le(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=fZ(e);try{return new rw(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(){this.providerId=Al.PROVIDER_ID}static credential(e,n){return Ip._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=rw.parseLink(n);return le(r,"argument-error"),Ip._fromEmailAndCode(e,r.code,r.tenantId)}}Al.PROVIDER_ID="password";Al.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Al.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od extends Ya{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Dh extends Od{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return le("providerId"in n&&"signInMethod"in n,"argument-error"),qs._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return le(e.idToken||e.accessToken,"argument-error"),qs._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Dh.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Dh.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:o}=e;if(!r&&!i&&!n&&!s||!o)return null;try{return new Dh(o)._credential({idToken:n,accessToken:r,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends Od{constructor(){super("facebook.com")}static credential(e){return qs._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xs.credential(e.oauthAccessToken)}catch{return null}}}xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";xs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Od{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return qs._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return As.credential(n,r)}catch{return null}}}As.GOOGLE_SIGN_IN_METHOD="google.com";As.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends Od{constructor(){super("github.com")}static credential(e){return qs._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.GITHUB_SIGN_IN_METHOD="github.com";Ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mZ="http://localhost";class Zh extends kd{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Da(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Da(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Da(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Zh(r,s)}static _create(e,n){return new Zh(e,n)}buildRequest(){return{requestUri:mZ,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pZ="saml.";class Y0 extends Ya{constructor(e){le(e.startsWith(pZ),"argument-error"),super(e)}static credentialFromResult(e){return Y0.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Y0.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Zh.fromJSON(e);return le(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Zh._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends Od{constructor(){super("twitter.com")}static credential(e,n){return qs._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Is.credential(n,r)}catch{return null}}}Is.TWITTER_SIGN_IN_METHOD="twitter.com";Is.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E4(t,e){return Wa(t,"POST","/v1/accounts:signUp",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await vh._fromIdTokenResponse(e,r,i),a=PP(r);return new Bi({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=PP(r);return new Bi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function PP(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gZ(t){var i;if(it(t.app))return Promise.reject(Fn(t));const e=Ht(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new Bi({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await E4(e,{returnSecureToken:!0}),r=await Bi._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0 extends jn{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Q0.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Q0(e,n,r,i)}}function x4(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Q0._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yZ(t,e){const n=ye(t);await iw(!0,n,e);const{providerUserInfo:r}=await _J(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=A4(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function pS(t,e,n=!1){const r=await qa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bi._forOperation(t,"link",r)}async function iw(t,e,n){await Sp(e);const r=A4(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";le(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S4(t,e,n=!1){const{auth:r}=t;if(it(r.app))return Promise.reject(Fn(r));const i="reauthenticate";try{const s=await qa(t,x4(r,i,e,t),n);le(s.idToken,r,"internal-error");const a=tw(s.idToken);le(a,r,"internal-error");const{sub:o}=a;return le(t.uid===o,r,"user-mismatch"),Bi._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Xn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I4(t,e,n=!1){if(it(t.app))return Promise.reject(Fn(t));const r="signIn",i=await x4(t,r,e),s=await Bi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function sw(t,e){return I4(Ht(t),e)}async function R4(t,e){const n=ye(t);return await iw(!1,n,e.providerId),pS(n,e)}async function C4(t,e){return S4(ye(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _Z(t,e){return Wa(t,"POST","/v1/accounts:signInWithCustomToken",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vZ(t,e){if(it(t.app))return Promise.reject(Fn(t));const n=Ht(t),r=await _Z(n,{token:e,returnSecureToken:!0}),i=await Bi._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?gS._fromServerResponse(e,n):"totpInfo"in n?yS._fromServerResponse(e,n):Xn(e,"internal-error")}}class gS extends pg{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new gS(n)}}class yS extends pg{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new yS(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t,e,n){var r;le(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),le(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),le(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(le(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(le(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _S(t){const e=Ht(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function wZ(t,e,n){const r=Ht(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&aw(r,i,n),await el(r,i,"getOobCode",nZ,"EMAIL_PASSWORD_PROVIDER")}async function bZ(t,e,n){await T4(ye(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_S(t),r})}async function TZ(t,e){await ZJ(ye(t),{oobCode:e})}async function N4(t,e){const n=ye(t),r=await T4(n,{oobCode:e}),i=r.requestType;switch(le(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(r.mfaInfo,n,"internal-error");default:le(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=pg._fromServerResponse(Ht(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function EZ(t,e){const{data:n}=await N4(ye(t),e);return n.email}async function xZ(t,e,n){if(it(t.app))return Promise.reject(Fn(t));const r=Ht(t),a=await el(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",E4,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&_S(t),c}),o=await Bi._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function AZ(t,e,n){return it(t.app)?Promise.reject(Fn(t)):sw(ye(t),Al.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_S(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SZ(t,e,n){const r=Ht(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(a,o){le(o.handleCodeInApp,r,"argument-error"),o&&aw(r,a,o)}s(i,n),await el(r,i,"getOobCode",rZ,"EMAIL_PASSWORD_PROVIDER")}function IZ(t,e){const n=rw.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function RZ(t,e,n){if(it(t.app))return Promise.reject(Fn(t));const r=ye(t),i=Al.credentialWithLink(e,n||Ap());return le(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),sw(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CZ(t,e){return nn(t,"POST","/v1/accounts:createAuthUri",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NZ(t,e){const n=dS()?Ap():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await CZ(ye(t),r);return i||[]}async function PZ(t,e){const n=ye(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&aw(n.auth,i,e);const{email:s}=await tZ(n.auth,i);s!==t.email&&await t.reload()}async function DZ(t,e,n){const r=ye(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&aw(r.auth,s,n);const{email:a}=await iZ(r.auth,s);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kZ(t,e){return nn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OZ(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ye(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await qa(r,kZ(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const o=r.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function MZ(t,e){const n=ye(t);return it(n.auth.app)?Promise.reject(Fn(n.auth)):P4(n,e,null)}function VZ(t,e){return P4(ye(t),null,e)}async function P4(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const a=await qa(t,XJ(r,s));await t._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LZ(t){var i,s;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const a=(s=(i=tw(t.idToken))==null?void 0:i.firebase)==null?void 0:s.sign_in_provider;if(a){const o=a!=="anonymous"&&a!=="custom"?a:null;return new kh(r,o)}}if(!e)return null;switch(e){case"facebook.com":return new UZ(r,n);case"github.com":return new jZ(r,n);case"google.com":return new FZ(r,n);case"twitter.com":return new zZ(r,n,t.screenName||null);case"custom":case"anonymous":return new kh(r,null);default:return new kh(r,e,n)}}class kh{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class D4 extends kh{constructor(e,n,r,i){super(e,n,r),this.username=i}}class UZ extends kh{constructor(e,n){super(e,"facebook.com",n)}}class jZ extends D4{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class FZ extends kh{constructor(e,n){super(e,"google.com",n)}}class zZ extends D4{constructor(e,n,r){super(e,"twitter.com",n,r)}}function BZ(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:LZ(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new vc("enroll",e,n)}static _fromMfaPendingCredential(e){return new vc("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return vc._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return vc._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Ht(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(o=>pg._fromServerResponse(r,o));le(i.mfaPendingCredential,r,"internal-error");const a=vc._fromMfaPendingCredential(i.mfaPendingCredential);return new vS(a,s,async o=>{const c=await o._process(r,a);delete i.mfaInfo,delete i.mfaPendingCredential;const h={...i,idToken:c.idToken,refreshToken:c.refreshToken};switch(n.operationType){case"signIn":const f=await Bi._fromIdTokenResponse(r,n.operationType,h);return await r._updateCurrentUser(f.user),f;case"reauthenticate":return le(n.user,r,"internal-error"),Bi._forOperation(n.user,n.operationType,h);default:Xn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function qZ(t,e){var i;const n=ye(t),r=e;return le(e.customData.operationType,n,"argument-error"),le((i=r.customData._serverResponse)==null?void 0:i.mfaPendingCredential,n,"argument-error"),vS._fromError(n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(t,e){return nn(t,"POST","/v2/accounts/mfaEnrollment:start",tn(t,e))}function HZ(t,e){return nn(t,"POST","/v2/accounts/mfaEnrollment:finalize",tn(t,e))}function GZ(t,e){return nn(t,"POST","/v2/accounts/mfaEnrollment:withdraw",tn(t,e))}class wS{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>pg._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new wS(e)}async getSession(){return vc._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await qa(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await qa(this.user,GZ(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const JT=new WeakMap;function $Z(t){const e=ye(t);return JT.has(e)||JT.set(e,wS._fromUser(e)),JT.get(e)}const X0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(X0,"1"),this.storage.removeItem(X0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KZ=1e3,WZ=10;class O4 extends k4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=y4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);RJ()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,WZ):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},KZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}O4.type="LOCAL";const bS=O4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4 extends k4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}M4.type="SESSION";const Fc=M4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YZ(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new ow(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async h=>h(n.origin,s)),c=await YZ(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ow.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QZ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,c)=>{const h=gg("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(g.data.response);break;default:clearTimeout(f),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return window}function XZ(t){pn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(){return typeof pn().WorkerGlobalScope<"u"&&typeof pn().importScripts=="function"}async function JZ(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZZ(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function eee(){return TS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4="firebaseLocalStorageDb",tee=1,J0="firebaseLocalStorage",L4="fbase_key";class yg{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lw(t,e){return t.transaction([J0],e?"readwrite":"readonly").objectStore(J0)}function nee(){const t=indexedDB.deleteDatabase(V4);return new yg(t).toPromise()}function j1(){const t=indexedDB.open(V4,tee);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(J0,{keyPath:L4})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(J0)?e(r):(r.close(),await nee(),e(await j1()))})})}async function kP(t,e,n){const r=lw(t,!0).put({[L4]:e,value:n});return new yg(r).toPromise()}async function ree(t,e){const n=lw(t,!1).get(e),r=await new yg(n).toPromise();return r===void 0?null:r.value}function OP(t,e){const n=lw(t,!0).delete(e);return new yg(n).toPromise()}const iee=800,see=3;class U4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await j1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>see)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ow._getInstance(eee()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await JZ(),!this.activeServiceWorker)return;this.sender=new QZ(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZZ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await j1();return await kP(e,X0,"1"),await OP(e,X0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>kP(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ree(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>OP(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=lw(i,!1).getAll();return new yg(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}U4.type="LOCAL";const Rp=U4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(t,e){return nn(t,"POST","/v2/accounts/mfaSignIn:start",tn(t,e))}function aee(t,e){return nn(t,"POST","/v2/accounts/mfaSignIn:finalize",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=v4("rcb"),oee=new hg(3e4,6e4);class lee{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=pn().grecaptcha)!=null&&e.render)}load(e,n=""){return le(cee(n),e,"argument-error"),this.shouldResolveImmediately(n)&&TP(pn().grecaptcha)?Promise.resolve(pn().grecaptcha):new Promise((r,i)=>{const s=pn().setTimeout(()=>{i(Sn(e,"network-request-failed"))},oee.get());pn()[ZT]=()=>{pn().clearTimeout(s),delete pn()[ZT];const o=pn().grecaptcha;if(!o||!TP(o)){i(Sn(e,"internal-error"));return}const c=o.render;o.render=(h,f)=>{const p=c(h,f);return this.counter++,p},this.hostLanguage=n,r(o)};const a=`${MJ()}?${xl({onload:ZT,render:"explicit",hl:n})}`;mS(a).catch(()=>{clearTimeout(s),i(Sn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=pn().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function cee(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class uee{async load(e){return new FJ(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="recaptcha",hee={theme:"light",type:"image"};let dee=class{constructor(e,n,r={...hee}){this.parameters=r,this.type=jm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ht(e),this.isInvisible=this.parameters.size==="invisible",le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;le(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new uee:new lee,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=a=>{a&&(this.tokenChangeListeners.delete(s),i(a))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=pn()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){le(dS()&&!TS(),this.auth,"internal-error"),await fee(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await gJ(this.auth);le(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function fee(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Pc._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function mee(t,e,n){if(it(t.app))return Promise.reject(Fn(t));const r=Ht(t),i=await cw(r,e,ye(n));return new ES(i,s=>sw(r,s))}async function pee(t,e,n){const r=ye(t);await iw(!1,r,"phone");const i=await cw(r.auth,e,ye(n));return new ES(i,s=>R4(r,s))}async function gee(t,e,n){const r=ye(t);if(it(r.auth.app))return Promise.reject(Fn(r.auth));const i=await cw(r.auth,e,ye(n));return new ES(i,s=>C4(r,s))}async function cw(t,e,n){var r;if(!t._getRecaptchaConfig())try{await $J(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){le(s.type==="enroll",t,"internal-error");const a={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await el(t,a,"mfaSmsEnrollment",async(f,p)=>{if(p.phoneEnrollmentInfo.captchaResponse===Um){le((n==null?void 0:n.type)===jm,f,"argument-error");const g=await eE(f,p,n);return DP(f,g)}return DP(f,p)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneSessionInfo.sessionInfo}else{le(s.type==="signin",t,"internal-error");const a=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;le(a,t,"missing-multi-factor-info");const o={mfaPendingCredential:s.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await el(t,o,"mfaSmsSignIn",async(p,g)=>{if(g.phoneSignInInfo.captchaResponse===Um){le((n==null?void 0:n.type)===jm,p,"argument-error");const _=await eE(p,g,n);return MP(p,_)}return MP(p,g)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await el(t,s,"sendVerificationCode",async(h,f)=>{if(f.captchaResponse===Um){le((n==null?void 0:n.type)===jm,h,"argument-error");const p=await eE(h,f,n);return NP(h,p)}return NP(h,f)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).sessionInfo}}finally{n==null||n._reset()}}async function yee(t,e){const n=ye(t);if(it(n.auth.app))return Promise.reject(Fn(n.auth));await pS(n,e)}async function eE(t,e,n){le(n.type===jm,t,"argument-error");const r=await n.verify();le(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,a=i.phoneEnrollmentInfo.captchaResponse,o=i.phoneEnrollmentInfo.clientType,c=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:a,clientType:o,recaptchaVersion:c}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,a=i.phoneSignInInfo.clientType,o=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:a,recaptchaVersion:o}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc=class $_{constructor(e){this.providerId=$_.PROVIDER_ID,this.auth=Ht(e)}verifyPhoneNumber(e,n){return cw(this.auth,e,ye(n))}static credential(e,n){return Pc._fromVerification(e,n)}static credentialFromResult(e){const n=e;return $_.credentialFromTaggedObject(n)}static credentialFromError(e){return $_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Pc._fromTokenResponse(n,r):null}};zc.PROVIDER_ID="phone";zc.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t,e){return e?ai(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS extends kd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Da(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Da(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Da(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _ee(t){return I4(t.auth,new xS(t),t.bypassAuthState)}function vee(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),S4(n,new xS(t),t.bypassAuthState)}async function wee(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),pS(n,new xS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _ee;case"linkViaPopup":case"linkViaRedirect":return wee;case"reauthViaPopup":case"reauthViaRedirect":return vee;default:Xn(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bee=new hg(2e3,1e4);async function Tee(t,e,n){if(it(t.app))return Promise.reject(Sn(t,"operation-not-supported-in-this-environment"));const r=Ht(t);Dd(t,e,Ya);const i=au(r,n);return new Sa(r,"signInViaPopup",e,i).executeNotNull()}async function Eee(t,e,n){const r=ye(t);if(it(r.auth.app))return Promise.reject(Sn(r.auth,"operation-not-supported-in-this-environment"));Dd(r.auth,e,Ya);const i=au(r.auth,n);return new Sa(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function xee(t,e,n){const r=ye(t);Dd(r.auth,e,Ya);const i=au(r.auth,n);return new Sa(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Sa extends j4{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Sa.currentPopupAction&&Sa.currentPopupAction.cancel(),Sa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const e=gg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bee.get())};e()}}Sa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aee="pendingRedirect",Fm=new Map;class See extends j4{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Fm.get(this.auth._key());if(!e){try{const r=await Iee(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fm.set(this.auth._key(),e)}return this.bypassAuthState||Fm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Iee(t,e){const n=z4(e),r=F4(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function AS(t,e){return F4(t)._set(z4(e),"true")}function Ree(){Fm.clear()}function SS(t,e){Fm.set(t._key(),e)}function F4(t){return ai(t._redirectPersistence)}function z4(t){return Nc(Aee,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cee(t,e,n){return Nee(t,e,n)}async function Nee(t,e,n){if(it(t.app))return Promise.reject(Fn(t));const r=Ht(t);Dd(t,e,Ya),await r._initializationPromise;const i=au(r,n);return await AS(i,r),i._openRedirect(r,e,"signInViaRedirect")}function Pee(t,e,n){return Dee(t,e,n)}async function Dee(t,e,n){const r=ye(t);if(Dd(r.auth,e,Ya),it(r.auth.app))return Promise.reject(Fn(r.auth));await r.auth._initializationPromise;const i=au(r.auth,n);await AS(i,r.auth);const s=await B4(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function kee(t,e,n){return Oee(t,e,n)}async function Oee(t,e,n){const r=ye(t);Dd(r.auth,e,Ya),await r.auth._initializationPromise;const i=au(r.auth,n);await iw(!1,r,e.providerId),await AS(i,r.auth);const s=await B4(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function Mee(t,e){return await Ht(t)._initializationPromise,uw(t,e,!1)}async function uw(t,e,n=!1){if(it(t.app))return Promise.reject(Fn(t));const r=Ht(t),i=au(r,e),a=await new See(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}async function B4(t){const e=gg(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vee=10*60*1e3;class q4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Lee(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!H4(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Sn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Vee&&this.cachedEventUids.clear(),this.cachedEventUids.has(VP(e))}saveEventToCache(e){this.cachedEventUids.add(VP(e)),this.lastProcessedEventTime=Date.now()}}function VP(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function H4({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Lee(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return H4(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G4(t,e={}){return nn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uee=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jee=/^https?/;async function Fee(t){if(t.config.emulator)return;const{authorizedDomains:e}=await G4(t);for(const n of e)try{if(zee(n))return}catch{}Xn(t,"unauthorized-domain")}function zee(t){const e=Ap(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!jee.test(n))return!1;if(Uee.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bee=new hg(3e4,6e4);function LP(){const t=pn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function qee(t){return new Promise((e,n)=>{var i,s,a;function r(){LP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{LP(),n(Sn(t,"network-request-failed"))},timeout:Bee.get()})}if((s=(i=pn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=pn().gapi)!=null&&a.load)r();else{const o=v4("iframefcb");return pn()[o]=()=>{gapi.load?r():n(Sn(t,"network-request-failed"))},mS(`${LJ()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw K_=null,e})}let K_=null;function Hee(t){return K_=K_||qee(t),K_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gee=new hg(5e3,15e3),$ee="__/auth/iframe",Kee="emulator/auth/iframe",Wee={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yee=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qee(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fS(e,Kee):`https://${t.config.authDomain}/${$ee}`,r={apiKey:e.apiKey,appName:t.name,v:Hi},i=Yee.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${xl(r).slice(1)}`}async function Xee(t){const e=await Hee(t),n=pn().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:Qee(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wee,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Sn(t,"network-request-failed"),o=pn().setTimeout(()=>{s(a)},Gee.get());function c(){pn().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jee={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Zee=500,ete=600,tte="_blank",nte="http://localhost";class UP{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rte(t,e,n,r=Zee,i=ete){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c={...Jee,width:r.toString(),height:i.toString(),top:s,left:a},h=tt().toLowerCase();n&&(o=f4(h)?tte:n),h4(h)&&(e=e||nte,c.scrollbars="yes");const f=Object.entries(c).reduce((g,[_,R])=>`${g}${_}=${R},`,"");if(IJ(h)&&o!=="_self")return ite(e||"",o),new UP(null);const p=window.open(e||"",o,f);le(p,t,"popup-blocked");try{p.focus()}catch{}return new UP(p)}function ite(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ste="__/auth/handler",ate="emulator/auth/handler",ote=encodeURIComponent("fac");async function F1(t,e,n,r,i,s){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Hi,eventId:i};if(e instanceof Ya){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",OQ(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries(s||{}))a[f]=p}if(e instanceof Od){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const c=await t._getAppCheckToken(),h=c?`#${ote}=${encodeURIComponent(c)}`:"";return`${lte(t)}?${xl(o).slice(1)}${h}`}function lte({config:t}){return t.emulator?fS(t,ate):`https://${t.authDomain}/${ste}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="webStorageSupport";class cte{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fc,this._completeRedirectFn=uw,this._overrideRedirectResult=SS}async _openPopup(e,n,r,i){var a;ls((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await F1(e,n,r,Ap(),i);return rte(e,s,gg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await F1(e,n,r,Ap(),i);return XZ(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ls(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Xee(e),r=new q4(e);return n.register("authEvent",i=>(le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tE,{type:tE},i=>{var a;const s=(a=i==null?void 0:i[0])==null?void 0:a[tE];s!==void 0&&n(!!s),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Fee(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return y4()||d4()||fg()}}const ute=cte;class hte{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Ds("unexpected MultiFactorSessionType")}}}class IS extends hte{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new IS(e)}_finalizeEnroll(e,n,r){return HZ(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return aee(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class $4{constructor(){}static assertion(e){return IS._fromCredential(e)}}$4.FACTOR_ID="phone";var jP="@firebase/auth",FP="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dte=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fte(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mte(t){os(new qr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;le(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_4(t)},h=new kJ(r,i,s,c);return KJ(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),os(new qr("auth-internal",e=>{const n=Ht(e.getProvider("auth").getImmediate());return(r=>new dte(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),br(jP,FP,fte(t)),br(jP,FP,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pte=5*60;M5("authIdTokenMaxAge");function gte(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}OJ({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Sn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",gte().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mte("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yte=2e3;async function _te(t,e,n){const{BuildInfo:r}=Bc();ls(e.sessionId,"AuthEvent did not contain a session ID");const i=await Ete(e.sessionId),s={};return fg()?s.ibi=r.packageName:dg()?s.apn=r.packageName:Xn(t,"operation-not-supported-in-this-environment"),r.displayName&&(s.appDisplayName=r.displayName),s.sessionId=i,F1(t,n,e.type,void 0,e.eventId??void 0,s)}async function vte(t){const{BuildInfo:e}=Bc(),n={};fg()?n.iosBundleId=e.packageName:dg()?n.androidPackageName=e.packageName:Xn(t,"operation-not-supported-in-this-environment"),await G4(t,n)}function wte(t){const{cordova:e}=Bc();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,SJ()?"_blank":"_system","location=yes"),n(i)})})}async function bte(t,e,n){const{cordova:r}=Bc();let i=()=>{};try{await new Promise((s,a)=>{let o=null;function c(){var g;s();const p=(g=r.plugins.browsertab)==null?void 0:g.close;typeof p=="function"&&p(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function h(){o||(o=window.setTimeout(()=>{a(Sn(t,"redirect-cancelled-by-user"))},yte))}function f(){(document==null?void 0:document.visibilityState)==="visible"&&h()}e.addPassiveListener(c),document.addEventListener("resume",h,!1),dg()&&document.addEventListener("visibilitychange",f,!1),i=()=>{e.removePassiveListener(c),document.removeEventListener("resume",h,!1),document.removeEventListener("visibilitychange",f,!1),o&&window.clearTimeout(o)}})}finally{i()}}function Tte(t){var n,r,i,s,a,o,c,h,f,p;const e=Bc();le(typeof((n=e==null?void 0:e.universalLinks)==null?void 0:n.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),le(typeof((r=e==null?void 0:e.BuildInfo)==null?void 0:r.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),le(typeof((a=(s=(i=e==null?void 0:e.cordova)==null?void 0:i.plugins)==null?void 0:s.browsertab)==null?void 0:a.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le(typeof((h=(c=(o=e==null?void 0:e.cordova)==null?void 0:o.plugins)==null?void 0:c.browsertab)==null?void 0:h.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le(typeof((p=(f=e==null?void 0:e.cordova)==null?void 0:f.InAppBrowser)==null?void 0:p.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Ete(t){const e=xte(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function xte(t){if(ls(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ate=20;class Ste extends q4{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function Ite(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:Nte(),postBody:null,tenantId:t.tenantId,error:Sn(t,"no-auth-event")}}function Rte(t,e){return z1()._set(B1(t),e)}async function zP(t){const e=await z1()._get(B1(t));return e&&await z1()._remove(B1(t)),e}function Cte(t,e){var r,i;const n=Dte(e);if(n.includes("/__/auth/callback")){const s=W_(n),a=s.firebaseError?Pte(decodeURIComponent(s.firebaseError)):null,o=(i=(r=a==null?void 0:a.code)==null?void 0:r.split("auth/"))==null?void 0:i[1],c=o?Sn(o):null;return c?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:n,postBody:null}}return null}function Nte(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Ate;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function z1(){return ai(bS)}function B1(t){return Nc("authEvent",t.config.apiKey,t.name)}function Pte(t){try{return JSON.parse(t)}catch{return null}}function Dte(t){const e=W_(t),n=e.link?decodeURIComponent(e.link):void 0,r=W_(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return W_(i).link||i||r||n||t}function W_(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return _h(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kte=500;class Ote{constructor(){this._redirectPersistence=Fc,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=uw,this._overrideRedirectResult=SS}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new Ste(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Xn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){Tte(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),Ree(),await this._originValidation(e);const a=Ite(e,r,i);await Rte(e,a);const o=await _te(e,a,n),c=await wte(o);return bte(e,s,c)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=vte(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Bc(),a=setTimeout(async()=>{await zP(e),n.onEvent(BP())},kte),o=async f=>{clearTimeout(a);const p=await zP(e);let g=null;p&&(f!=null&&f.url)&&(g=Cte(p,f.url)),n.onEvent(g||BP())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,o);const c=i,h=`${s.packageName.toLowerCase()}://`;Bc().handleOpenURL=async f=>{if(f.toLowerCase().startsWith(h)&&o({url:f}),typeof c=="function")try{c(f)}catch(p){console.error(p)}}}}const Mte=Ote;function BP(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Sn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vte(t,e){Ht(t)._logFramework(e)}var Lte="@firebase/auth-compat",Ute="0.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jte=1e3;function zm(){var t;return((t=self==null?void 0:self.location)==null?void 0:t.protocol)||null}function Fte(){return zm()==="http:"||zm()==="https:"}function K4(t=tt()){return!!((zm()==="file:"||zm()==="ionic:"||zm()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function zte(){return ew()||Zv()}function Bte(){return F5()&&(document==null?void 0:document.documentMode)===11}function qte(t=tt()){return/Edge\/\d+/.test(t)}function Hte(t=tt()){return Bte()||qte(t)}function W4(){try{const t=self.localStorage,e=gg();if(t)return t.setItem(e,"1"),t.removeItem(e),Hte()?Tp():!0}catch{return RS()&&Tp()}return!1}function RS(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function nE(){return(Fte()||rS()||K4())&&!zte()&&W4()&&!RS()}function Y4(){return K4()&&typeof document<"u"}async function Gte(){return Y4()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},jte);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function $te(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni={LOCAL:"local",NONE:"none",SESSION:"session"},Wf=le,Q4="persistence";function Kte(t,e){if(Wf(Object.values(ni).includes(e),t,"invalid-persistence-type"),ew()){Wf(e!==ni.SESSION,t,"unsupported-persistence-type");return}if(Zv()){Wf(e===ni.NONE,t,"unsupported-persistence-type");return}if(RS()){Wf(e===ni.NONE||e===ni.LOCAL&&Tp(),t,"unsupported-persistence-type");return}Wf(e===ni.NONE||W4(),t,"unsupported-persistence-type")}async function q1(t){await t._initializationPromise;const e=X4(),n=Nc(Q4,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistenceType())}function Wte(t,e){const n=X4();if(!n)return[];const r=Nc(Q4,t,e);switch(n.getItem(r)){case ni.NONE:return[Jh];case ni.LOCAL:return[Rp,Fc];case ni.SESSION:return[Fc];default:return[]}}function X4(){var t;try{return((t=$te())==null?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yte=le;class zo{constructor(){this.browserResolver=ai(ute),this.cordovaResolver=ai(Mte),this.underlyingResolver=null,this._redirectPersistence=Fc,this._completeRedirectFn=uw,this._overrideRedirectResult=SS}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Y4()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Yte(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await Gte();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(t){return t.unwrap()}function Qte(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xte(t){return Z4(t)}function Jte(t,e){var r;const n=(r=e.customData)==null?void 0:r._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new Zte(t,qZ(t,e))}else if(n){const i=Z4(e),s=e;i&&(s.credential=i,s.tenantId=n.tenantId||void 0,s.email=n.email||void 0,s.phoneNumber=n.phoneNumber||void 0)}}function Z4(t){const{_tokenResponse:e}=t instanceof jn?t.customData:t;if(!e)return null;if(!(t instanceof jn)&&"temporaryProof"in e&&"phoneNumber"in e)return zc.credentialFromResult(t);const n=e.providerId;if(!n||n===$f.PASSWORD)return null;let r;switch(n){case $f.GOOGLE:r=As;break;case $f.FACEBOOK:r=xs;break;case $f.GITHUB:r=Ss;break;case $f.TWITTER:r=Is;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:o,nonce:c}=e;return!s&&!a&&!i&&!o?null:o?n.startsWith("saml.")?Zh._create(n,o):qs._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:i,accessToken:s}):new Dh(n).credential({idToken:i,accessToken:s,rawNonce:c})}return t instanceof jn?r.credentialFromError(t):r.credentialFromResult(t)}function Vr(t,e){return e.catch(n=>{throw n instanceof jn&&Jte(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:Xte(n),additionalUserInfo:BZ(n),user:hw.getOrCreate(i)}})}async function H1(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Vr(t,n.confirm(r))}}class Zte{constructor(e,n){this.resolver=n,this.auth=Qte(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Vr(J4(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hw=class dm{constructor(e){this._delegate=e,this.multiFactor=$Z(e)}static getOrCreate(e){return dm.USER_MAP.has(e)||dm.USER_MAP.set(e,new dm(e)),dm.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Vr(this.auth,R4(this._delegate,e))}async linkWithPhoneNumber(e,n){return H1(this.auth,pee(this._delegate,e,n))}async linkWithPopup(e){return Vr(this.auth,xee(this._delegate,e,zo))}async linkWithRedirect(e){return await q1(Ht(this.auth)),kee(this._delegate,e,zo)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Vr(this.auth,C4(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return H1(this.auth,gee(this._delegate,e,n))}reauthenticateWithPopup(e){return Vr(this.auth,Eee(this._delegate,e,zo))}async reauthenticateWithRedirect(e){return await q1(Ht(this.auth)),Pee(this._delegate,e,zo)}sendEmailVerification(e){return PZ(this._delegate,e)}async unlink(e){return await yZ(this._delegate,e),this}updateEmail(e){return MZ(this._delegate,e)}updatePassword(e){return VZ(this._delegate,e)}updatePhoneNumber(e){return yee(this._delegate,e)}updateProfile(e){return OZ(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return DZ(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};hw.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf=le;class G1{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Yf(r,"invalid-api-key",{appName:e.name}),Yf(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?zo:void 0;this._delegate=n.initialize({options:{persistence:ene(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(aJ),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?hw.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){WJ(this._delegate,e,n)}applyActionCode(e){return TZ(this._delegate,e)}checkActionCode(e){return N4(this._delegate,e)}confirmPasswordReset(e,n){return bZ(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Vr(this._delegate,xZ(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return NZ(this._delegate,e)}isSignInWithEmailLink(e){return IZ(this._delegate,e)}async getRedirectResult(){Yf(nE(),this._delegate,"operation-not-supported-in-this-environment");const e=await Mee(this._delegate,zo);return e?Vr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){Vte(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:a}=qP(e,n,r);return this._delegate.onAuthStateChanged(i,s,a)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:a}=qP(e,n,r);return this._delegate.onIdTokenChanged(i,s,a)}sendSignInLinkToEmail(e,n){return SZ(this._delegate,e,n)}sendPasswordResetEmail(e,n){return wZ(this._delegate,e,n||void 0)}async setPersistence(e){Kte(this._delegate,e);let n;switch(e){case ni.SESSION:n=Fc;break;case ni.LOCAL:n=await ai(Rp)._isAvailable()?Rp:bS;break;case ni.NONE:n=Jh;break;default:return Xn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Vr(this._delegate,gZ(this._delegate))}signInWithCredential(e){return Vr(this._delegate,sw(this._delegate,e))}signInWithCustomToken(e){return Vr(this._delegate,vZ(this._delegate,e))}signInWithEmailAndPassword(e,n){return Vr(this._delegate,AZ(this._delegate,e,n))}signInWithEmailLink(e,n){return Vr(this._delegate,RZ(this._delegate,e,n))}signInWithPhoneNumber(e,n){return H1(this._delegate,mee(this._delegate,e,n))}async signInWithPopup(e){return Yf(nE(),this._delegate,"operation-not-supported-in-this-environment"),Vr(this._delegate,Tee(this._delegate,e,zo))}async signInWithRedirect(e){return Yf(nE(),this._delegate,"operation-not-supported-in-this-environment"),await q1(this._delegate),Cee(this._delegate,e,zo)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return EZ(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}G1.Persistence=ni;function qP(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:a=>i(a&&hw.getOrCreate(a)),error:e,complete:n}}function ene(t,e){const n=Wte(t,e);if(typeof self<"u"&&!n.includes(Rp)&&n.push(Rp),typeof window<"u")for(const r of[bS,Fc])n.includes(r)||n.push(r);return n.includes(Jh)||n.push(Jh),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{static credential(e,n){return zc.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new zc(J4(Ln.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}CS.PHONE_SIGN_IN_METHOD=zc.PHONE_SIGN_IN_METHOD;CS.PROVIDER_ID=zc.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tne=le;class nne{constructor(e,n,r=Ln.app()){var i;tne((i=r.options)==null?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new dee(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rne="auth-compat";function ine(t){t.INTERNAL.registerComponent(new qr(rne,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new G1(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:qu.EMAIL_SIGNIN,PASSWORD_RESET:qu.PASSWORD_RESET,RECOVER_EMAIL:qu.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:qu.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:qu.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:qu.VERIFY_EMAIL}},EmailAuthProvider:Al,FacebookAuthProvider:xs,GithubAuthProvider:Ss,GoogleAuthProvider:As,OAuthProvider:Dh,SAMLAuthProvider:Y0,PhoneAuthProvider:CS,PhoneMultiFactorGenerator:$4,RecaptchaVerifier:nne,TwitterAuthProvider:Is,Auth:G1,AuthCredential:kd,Error:jn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(Lte,Ute)}ine(Ln);var HP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tl,e6;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,C){function k(){}k.prototype=C.prototype,S.F=C.prototype,S.prototype=new k,S.prototype.constructor=S,S.D=function(M,U,B){for(var F=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)F[ne-2]=arguments[ne];return C.prototype[U].apply(M,F)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,C,k){k||(k=0);const M=Array(16);if(typeof C=="string")for(var U=0;U<16;++U)M[U]=C.charCodeAt(k++)|C.charCodeAt(k++)<<8|C.charCodeAt(k++)<<16|C.charCodeAt(k++)<<24;else for(U=0;U<16;++U)M[U]=C[k++]|C[k++]<<8|C[k++]<<16|C[k++]<<24;C=S.g[0],k=S.g[1],U=S.g[2];let B=S.g[3],F;F=C+(B^k&(U^B))+M[0]+3614090360&4294967295,C=k+(F<<7&4294967295|F>>>25),F=B+(U^C&(k^U))+M[1]+3905402710&4294967295,B=C+(F<<12&4294967295|F>>>20),F=U+(k^B&(C^k))+M[2]+606105819&4294967295,U=B+(F<<17&4294967295|F>>>15),F=k+(C^U&(B^C))+M[3]+3250441966&4294967295,k=U+(F<<22&4294967295|F>>>10),F=C+(B^k&(U^B))+M[4]+4118548399&4294967295,C=k+(F<<7&4294967295|F>>>25),F=B+(U^C&(k^U))+M[5]+1200080426&4294967295,B=C+(F<<12&4294967295|F>>>20),F=U+(k^B&(C^k))+M[6]+2821735955&4294967295,U=B+(F<<17&4294967295|F>>>15),F=k+(C^U&(B^C))+M[7]+4249261313&4294967295,k=U+(F<<22&4294967295|F>>>10),F=C+(B^k&(U^B))+M[8]+1770035416&4294967295,C=k+(F<<7&4294967295|F>>>25),F=B+(U^C&(k^U))+M[9]+2336552879&4294967295,B=C+(F<<12&4294967295|F>>>20),F=U+(k^B&(C^k))+M[10]+4294925233&4294967295,U=B+(F<<17&4294967295|F>>>15),F=k+(C^U&(B^C))+M[11]+2304563134&4294967295,k=U+(F<<22&4294967295|F>>>10),F=C+(B^k&(U^B))+M[12]+1804603682&4294967295,C=k+(F<<7&4294967295|F>>>25),F=B+(U^C&(k^U))+M[13]+4254626195&4294967295,B=C+(F<<12&4294967295|F>>>20),F=U+(k^B&(C^k))+M[14]+2792965006&4294967295,U=B+(F<<17&4294967295|F>>>15),F=k+(C^U&(B^C))+M[15]+1236535329&4294967295,k=U+(F<<22&4294967295|F>>>10),F=C+(U^B&(k^U))+M[1]+4129170786&4294967295,C=k+(F<<5&4294967295|F>>>27),F=B+(k^U&(C^k))+M[6]+3225465664&4294967295,B=C+(F<<9&4294967295|F>>>23),F=U+(C^k&(B^C))+M[11]+643717713&4294967295,U=B+(F<<14&4294967295|F>>>18),F=k+(B^C&(U^B))+M[0]+3921069994&4294967295,k=U+(F<<20&4294967295|F>>>12),F=C+(U^B&(k^U))+M[5]+3593408605&4294967295,C=k+(F<<5&4294967295|F>>>27),F=B+(k^U&(C^k))+M[10]+38016083&4294967295,B=C+(F<<9&4294967295|F>>>23),F=U+(C^k&(B^C))+M[15]+3634488961&4294967295,U=B+(F<<14&4294967295|F>>>18),F=k+(B^C&(U^B))+M[4]+3889429448&4294967295,k=U+(F<<20&4294967295|F>>>12),F=C+(U^B&(k^U))+M[9]+568446438&4294967295,C=k+(F<<5&4294967295|F>>>27),F=B+(k^U&(C^k))+M[14]+3275163606&4294967295,B=C+(F<<9&4294967295|F>>>23),F=U+(C^k&(B^C))+M[3]+4107603335&4294967295,U=B+(F<<14&4294967295|F>>>18),F=k+(B^C&(U^B))+M[8]+1163531501&4294967295,k=U+(F<<20&4294967295|F>>>12),F=C+(U^B&(k^U))+M[13]+2850285829&4294967295,C=k+(F<<5&4294967295|F>>>27),F=B+(k^U&(C^k))+M[2]+4243563512&4294967295,B=C+(F<<9&4294967295|F>>>23),F=U+(C^k&(B^C))+M[7]+1735328473&4294967295,U=B+(F<<14&4294967295|F>>>18),F=k+(B^C&(U^B))+M[12]+2368359562&4294967295,k=U+(F<<20&4294967295|F>>>12),F=C+(k^U^B)+M[5]+4294588738&4294967295,C=k+(F<<4&4294967295|F>>>28),F=B+(C^k^U)+M[8]+2272392833&4294967295,B=C+(F<<11&4294967295|F>>>21),F=U+(B^C^k)+M[11]+1839030562&4294967295,U=B+(F<<16&4294967295|F>>>16),F=k+(U^B^C)+M[14]+4259657740&4294967295,k=U+(F<<23&4294967295|F>>>9),F=C+(k^U^B)+M[1]+2763975236&4294967295,C=k+(F<<4&4294967295|F>>>28),F=B+(C^k^U)+M[4]+1272893353&4294967295,B=C+(F<<11&4294967295|F>>>21),F=U+(B^C^k)+M[7]+4139469664&4294967295,U=B+(F<<16&4294967295|F>>>16),F=k+(U^B^C)+M[10]+3200236656&4294967295,k=U+(F<<23&4294967295|F>>>9),F=C+(k^U^B)+M[13]+681279174&4294967295,C=k+(F<<4&4294967295|F>>>28),F=B+(C^k^U)+M[0]+3936430074&4294967295,B=C+(F<<11&4294967295|F>>>21),F=U+(B^C^k)+M[3]+3572445317&4294967295,U=B+(F<<16&4294967295|F>>>16),F=k+(U^B^C)+M[6]+76029189&4294967295,k=U+(F<<23&4294967295|F>>>9),F=C+(k^U^B)+M[9]+3654602809&4294967295,C=k+(F<<4&4294967295|F>>>28),F=B+(C^k^U)+M[12]+3873151461&4294967295,B=C+(F<<11&4294967295|F>>>21),F=U+(B^C^k)+M[15]+530742520&4294967295,U=B+(F<<16&4294967295|F>>>16),F=k+(U^B^C)+M[2]+3299628645&4294967295,k=U+(F<<23&4294967295|F>>>9),F=C+(U^(k|~B))+M[0]+4096336452&4294967295,C=k+(F<<6&4294967295|F>>>26),F=B+(k^(C|~U))+M[7]+1126891415&4294967295,B=C+(F<<10&4294967295|F>>>22),F=U+(C^(B|~k))+M[14]+2878612391&4294967295,U=B+(F<<15&4294967295|F>>>17),F=k+(B^(U|~C))+M[5]+4237533241&4294967295,k=U+(F<<21&4294967295|F>>>11),F=C+(U^(k|~B))+M[12]+1700485571&4294967295,C=k+(F<<6&4294967295|F>>>26),F=B+(k^(C|~U))+M[3]+2399980690&4294967295,B=C+(F<<10&4294967295|F>>>22),F=U+(C^(B|~k))+M[10]+4293915773&4294967295,U=B+(F<<15&4294967295|F>>>17),F=k+(B^(U|~C))+M[1]+2240044497&4294967295,k=U+(F<<21&4294967295|F>>>11),F=C+(U^(k|~B))+M[8]+1873313359&4294967295,C=k+(F<<6&4294967295|F>>>26),F=B+(k^(C|~U))+M[15]+4264355552&4294967295,B=C+(F<<10&4294967295|F>>>22),F=U+(C^(B|~k))+M[6]+2734768916&4294967295,U=B+(F<<15&4294967295|F>>>17),F=k+(B^(U|~C))+M[13]+1309151649&4294967295,k=U+(F<<21&4294967295|F>>>11),F=C+(U^(k|~B))+M[4]+4149444226&4294967295,C=k+(F<<6&4294967295|F>>>26),F=B+(k^(C|~U))+M[11]+3174756917&4294967295,B=C+(F<<10&4294967295|F>>>22),F=U+(C^(B|~k))+M[2]+718787259&4294967295,U=B+(F<<15&4294967295|F>>>17),F=k+(B^(U|~C))+M[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(U+(F<<21&4294967295|F>>>11))&4294967295,S.g[2]=S.g[2]+U&4294967295,S.g[3]=S.g[3]+B&4294967295}r.prototype.v=function(S,C){C===void 0&&(C=S.length);const k=C-this.blockSize,M=this.C;let U=this.h,B=0;for(;B<C;){if(U==0)for(;B<=k;)i(this,S,B),B+=this.blockSize;if(typeof S=="string"){for(;B<C;)if(M[U++]=S.charCodeAt(B++),U==this.blockSize){i(this,M),U=0;break}}else for(;B<C;)if(M[U++]=S[B++],U==this.blockSize){i(this,M),U=0;break}}this.h=U,this.o+=C},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;C=this.o*8;for(var k=S.length-8;k<S.length;++k)S[k]=C&255,C/=256;for(this.v(S),S=Array(16),C=0,k=0;k<4;++k)for(let M=0;M<32;M+=8)S[C++]=this.g[k]>>>M&255;return S};function s(S,C){var k=o;return Object.prototype.hasOwnProperty.call(k,S)?k[S]:k[S]=C(S)}function a(S,C){this.h=C;const k=[];let M=!0;for(let U=S.length-1;U>=0;U--){const B=S[U]|0;M&&B==C||(k[U]=B,M=!1)}this.g=k}var o={};function c(S){return-128<=S&&S<128?s(S,function(C){return new a([C|0],C<0?-1:0)}):new a([S|0],S<0?-1:0)}function h(S){if(isNaN(S)||!isFinite(S))return p;if(S<0)return A(h(-S));const C=[];let k=1;for(let M=0;S>=k;M++)C[M]=S/k|0,k*=4294967296;return new a(C,0)}function f(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return A(f(S.substring(1),C));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=h(Math.pow(C,8));let M=p;for(let B=0;B<S.length;B+=8){var U=Math.min(8,S.length-B);const F=parseInt(S.substring(B,B+U),C);U<8?(U=h(Math.pow(C,U)),M=M.j(U).add(h(F))):(M=M.j(k),M=M.add(h(F)))}return M}var p=c(0),g=c(1),_=c(16777216);t=a.prototype,t.m=function(){if(N(this))return-A(this).m();let S=0,C=1;for(let k=0;k<this.g.length;k++){const M=this.i(k);S+=(M>=0?M:4294967296+M)*C,C*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(R(this))return"0";if(N(this))return"-"+A(this).toString(S);const C=h(Math.pow(S,6));var k=this;let M="";for(;;){const U=O(k,C).g;k=b(k,U.j(C));let B=((k.g.length>0?k.g[0]:k.h)>>>0).toString(S);if(k=U,R(k))return B+M;for(;B.length<6;)B="0"+B;M=B+M}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function R(S){if(S.h!=0)return!1;for(let C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function N(S){return S.h==-1}t.l=function(S){return S=b(this,S),N(S)?-1:R(S)?0:1};function A(S){const C=S.g.length,k=[];for(let M=0;M<C;M++)k[M]=~S.g[M];return new a(k,~S.h).add(g)}t.abs=function(){return N(this)?A(this):this},t.add=function(S){const C=Math.max(this.g.length,S.g.length),k=[];let M=0;for(let U=0;U<=C;U++){let B=M+(this.i(U)&65535)+(S.i(U)&65535),F=(B>>>16)+(this.i(U)>>>16)+(S.i(U)>>>16);M=F>>>16,B&=65535,F&=65535,k[U]=F<<16|B}return new a(k,k[k.length-1]&-2147483648?-1:0)};function b(S,C){return S.add(A(C))}t.j=function(S){if(R(this)||R(S))return p;if(N(this))return N(S)?A(this).j(A(S)):A(A(this).j(S));if(N(S))return A(this.j(A(S)));if(this.l(_)<0&&S.l(_)<0)return h(this.m()*S.m());const C=this.g.length+S.g.length,k=[];for(var M=0;M<2*C;M++)k[M]=0;for(M=0;M<this.g.length;M++)for(let U=0;U<S.g.length;U++){const B=this.i(M)>>>16,F=this.i(M)&65535,ne=S.i(U)>>>16,me=S.i(U)&65535;k[2*M+2*U]+=F*me,T(k,2*M+2*U),k[2*M+2*U+1]+=B*me,T(k,2*M+2*U+1),k[2*M+2*U+1]+=F*ne,T(k,2*M+2*U+1),k[2*M+2*U+2]+=B*ne,T(k,2*M+2*U+2)}for(S=0;S<C;S++)k[S]=k[2*S+1]<<16|k[2*S];for(S=C;S<2*C;S++)k[S]=0;return new a(k,0)};function T(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function E(S,C){this.g=S,this.h=C}function O(S,C){if(R(C))throw Error("division by zero");if(R(S))return new E(p,p);if(N(S))return C=O(A(S),C),new E(A(C.g),A(C.h));if(N(C))return C=O(S,A(C)),new E(A(C.g),C.h);if(S.g.length>30){if(N(S)||N(C))throw Error("slowDivide_ only works with positive integers.");for(var k=g,M=C;M.l(S)<=0;)k=j(k),M=j(M);var U=q(k,1),B=q(M,1);for(M=q(M,2),k=q(k,2);!R(M);){var F=B.add(M);F.l(S)<=0&&(U=U.add(k),B=F),M=q(M,1),k=q(k,1)}return C=b(S,U.j(C)),new E(U,C)}for(U=p;S.l(C)>=0;){for(k=Math.max(1,Math.floor(S.m()/C.m())),M=Math.ceil(Math.log(k)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),B=h(k),F=B.j(C);N(F)||F.l(S)>0;)k-=M,B=h(k),F=B.j(C);R(B)&&(B=g),U=U.add(B),S=b(S,F)}return new E(U,S)}t.B=function(S){return O(this,S).h},t.and=function(S){const C=Math.max(this.g.length,S.g.length),k=[];for(let M=0;M<C;M++)k[M]=this.i(M)&S.i(M);return new a(k,this.h&S.h)},t.or=function(S){const C=Math.max(this.g.length,S.g.length),k=[];for(let M=0;M<C;M++)k[M]=this.i(M)|S.i(M);return new a(k,this.h|S.h)},t.xor=function(S){const C=Math.max(this.g.length,S.g.length),k=[];for(let M=0;M<C;M++)k[M]=this.i(M)^S.i(M);return new a(k,this.h^S.h)};function j(S){const C=S.g.length+1,k=[];for(let M=0;M<C;M++)k[M]=S.i(M)<<1|S.i(M-1)>>>31;return new a(k,S.h)}function q(S,C){const k=C>>5;C%=32;const M=S.g.length-k,U=[];for(let B=0;B<M;B++)U[B]=C>0?S.i(B+k)>>>C|S.i(B+k+1)<<32-C:S.i(B+k);return new a(U,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,e6=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,tl=a}).apply(typeof HP<"u"?HP:typeof self<"u"?self:typeof window<"u"?window:{});var d_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var t6,fm,n6,Y_,$1,r6,i6,s6;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof d_=="object"&&d_];for(var w=0;w<d.length;++w){var x=d[w];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function i(d,w){if(w)e:{var x=r;d=d.split(".");for(var L=0;L<d.length-1;L++){var W=d[L];if(!(W in x))break e;x=x[W]}d=d[d.length-1],L=x[d],w=w(L),w!=L&&w!=null&&e(x,d,{configurable:!0,writable:!0,value:w})}}i("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(d){return d||function(w){var x=[],L;for(L in w)Object.prototype.hasOwnProperty.call(w,L)&&x.push([L,w[L]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function o(d){var w=typeof d;return w=="object"&&d!=null||w=="function"}function c(d,w,x){return d.call.apply(d.bind,arguments)}function h(d,w,x){return h=c,h.apply(null,arguments)}function f(d,w){var x=Array.prototype.slice.call(arguments,1);return function(){var L=x.slice();return L.push.apply(L,arguments),d.apply(this,L)}}function p(d,w){function x(){}x.prototype=w.prototype,d.Z=w.prototype,d.prototype=new x,d.prototype.constructor=d,d.Ob=function(L,W,Y){for(var ce=Array(arguments.length-2),De=2;De<arguments.length;De++)ce[De-2]=arguments[De];return w.prototype[W].apply(L,ce)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function _(d){const w=d.length;if(w>0){const x=Array(w);for(let L=0;L<w;L++)x[L]=d[L];return x}return[]}function R(d,w){for(let L=1;L<arguments.length;L++){const W=arguments[L];var x=typeof W;if(x=x!="object"?x:W?Array.isArray(W)?"array":x:"null",x=="array"||x=="object"&&typeof W.length=="number"){x=d.length||0;const Y=W.length||0;d.length=x+Y;for(let ce=0;ce<Y;ce++)d[x+ce]=W[ce]}else d.push(W)}}class N{constructor(w,x){this.i=w,this.j=x,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function A(d){a.setTimeout(()=>{throw d},0)}function b(){var d=S;let w=null;return d.g&&(w=d.g,d.g=d.g.next,d.g||(d.h=null),w.next=null),w}class T{constructor(){this.h=this.g=null}add(w,x){const L=E.get();L.set(w,x),this.h?this.h.next=L:this.g=L,this.h=L}}var E=new N(()=>new O,d=>d.reset());class O{constructor(){this.next=this.g=this.h=null}set(w,x){this.h=w,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let j,q=!1,S=new T,C=()=>{const d=Promise.resolve(void 0);j=()=>{d.then(k)}};function k(){for(var d;d=b();){try{d.h.call(d.g)}catch(x){A(x)}var w=E;w.j(d),w.h<100&&(w.h++,d.next=w.g,w.g=d)}q=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(d,w){this.type=d,this.g=this.target=w,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,w=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};a.addEventListener("test",x,w),a.removeEventListener("test",x,w)}catch{}return d}();function F(d){return/^[\s\xa0]*$/.test(d)}function ne(d,w){U.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,w)}p(ne,U),ne.prototype.init=function(d,w){const x=this.type=d.type,L=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=w,w=d.relatedTarget,w||(x=="mouseover"?w=d.fromElement:x=="mouseout"&&(w=d.toElement)),this.relatedTarget=w,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&ne.Z.h.call(this)},ne.prototype.h=function(){ne.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var me="closure_listenable_"+(Math.random()*1e6|0),ie=0;function se(d,w,x,L,W){this.listener=d,this.proxy=null,this.src=w,this.type=x,this.capture=!!L,this.ha=W,this.key=++ie,this.da=this.fa=!1}function ue(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Te(d,w,x){for(const L in d)w.call(x,d[L],L,d)}function _e(d,w){for(const x in d)w.call(void 0,d[x],x,d)}function Ve(d){const w={};for(const x in d)w[x]=d[x];return w}const St="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hr(d,w){let x,L;for(let W=1;W<arguments.length;W++){L=arguments[W];for(x in L)d[x]=L[x];for(let Y=0;Y<St.length;Y++)x=St[Y],Object.prototype.hasOwnProperty.call(L,x)&&(d[x]=L[x])}}function Mt(d){this.src=d,this.g={},this.h=0}Mt.prototype.add=function(d,w,x,L,W){const Y=d.toString();d=this.g[Y],d||(d=this.g[Y]=[],this.h++);const ce=to(d,w,L,W);return ce>-1?(w=d[ce],x||(w.fa=!1)):(w=new se(w,this.src,Y,!!L,W),w.fa=x,d.push(w)),w};function Tn(d,w){const x=w.type;if(x in d.g){var L=d.g[x],W=Array.prototype.indexOf.call(L,w,void 0),Y;(Y=W>=0)&&Array.prototype.splice.call(L,W,1),Y&&(ue(w),d.g[x].length==0&&(delete d.g[x],d.h--))}}function to(d,w,x,L){for(let W=0;W<d.length;++W){const Y=d[W];if(!Y.da&&Y.listener==w&&Y.capture==!!x&&Y.ha==L)return W}return-1}var $d="closure_lm_"+(Math.random()*1e6|0),Js={};function no(d,w,x,L,W){if(Array.isArray(w)){for(let Y=0;Y<w.length;Y++)no(d,w[Y],x,L,W);return null}return x=Wd(x),d&&d[me]?d.J(w,x,o(L)?!!L.capture:!1,W):Ww(d,w,x,!1,L,W)}function Ww(d,w,x,L,W,Y){if(!w)throw Error("Invalid event type");const ce=o(W)?!!W.capture:!!W;let De=Kd(d);if(De||(d[$d]=De=new Mt(d)),x=De.add(w,x,L,ce,Y),x.proxy)return x;if(L=du(),x.proxy=L,L.src=d,L.listener=x,d.addEventListener)B||(W=ce),W===void 0&&(W=!1),d.addEventListener(w.toString(),L,W);else if(d.attachEvent)d.attachEvent(Ar(w.toString()),L);else if(d.addListener&&d.removeListener)d.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return x}function du(){function d(x){return w.call(d.src,d.listener,x)}const w=Ol;return d}function kl(d,w,x,L,W){if(Array.isArray(w))for(var Y=0;Y<w.length;Y++)kl(d,w[Y],x,L,W);else L=o(L)?!!L.capture:!!L,x=Wd(x),d&&d[me]?(d=d.i,Y=String(w).toString(),Y in d.g&&(w=d.g[Y],x=to(w,x,L,W),x>-1&&(ue(w[x]),Array.prototype.splice.call(w,x,1),w.length==0&&(delete d.g[Y],d.h--)))):d&&(d=Kd(d))&&(w=d.g[w.toString()],d=-1,w&&(d=to(w,x,L,W)),(x=d>-1?w[d]:null)&&fu(x))}function fu(d){if(typeof d!="number"&&d&&!d.da){var w=d.src;if(w&&w[me])Tn(w.i,d);else{var x=d.type,L=d.proxy;w.removeEventListener?w.removeEventListener(x,L,d.capture):w.detachEvent?w.detachEvent(Ar(x),L):w.addListener&&w.removeListener&&w.removeListener(L),(x=Kd(w))?(Tn(x,d),x.h==0&&(x.src=null,w[$d]=null)):ue(d)}}}function Ar(d){return d in Js?Js[d]:Js[d]="on"+d}function Ol(d,w){if(d.da)d=!0;else{w=new ne(w,this);const x=d.listener,L=d.ha||d.src;d.fa&&fu(d),d=x.call(L,w)}return d}function Kd(d){return d=d[$d],d instanceof Mt?d:null}var Gr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wd(d){return typeof d=="function"?d:(d[Gr]||(d[Gr]=function(w){return d.handleEvent(w)}),d[Gr])}function Cn(){M.call(this),this.i=new Mt(this),this.M=this,this.G=null}p(Cn,M),Cn.prototype[me]=!0,Cn.prototype.removeEventListener=function(d,w,x,L){kl(this,d,w,x,L)};function rn(d,w){var x,L=d.G;if(L)for(x=[];L;L=L.G)x.push(L);if(d=d.M,L=w.type||w,typeof w=="string")w=new U(w,d);else if(w instanceof U)w.target=w.target||d;else{var W=w;w=new U(L,d),hr(w,W)}W=!0;let Y,ce;if(x)for(ce=x.length-1;ce>=0;ce--)Y=w.g=x[ce],W=Jn(Y,L,!0,w)&&W;if(Y=w.g=d,W=Jn(Y,L,!0,w)&&W,W=Jn(Y,L,!1,w)&&W,x)for(ce=0;ce<x.length;ce++)Y=w.g=x[ce],W=Jn(Y,L,!1,w)&&W}Cn.prototype.N=function(){if(Cn.Z.N.call(this),this.i){var d=this.i;for(const w in d.g){const x=d.g[w];for(let L=0;L<x.length;L++)ue(x[L]);delete d.g[w],d.h--}}this.G=null},Cn.prototype.J=function(d,w,x,L){return this.i.add(String(d),w,!1,x,L)},Cn.prototype.K=function(d,w,x,L){return this.i.add(String(d),w,!0,x,L)};function Jn(d,w,x,L){if(w=d.i.g[String(w)],!w)return!0;w=w.concat();let W=!0;for(let Y=0;Y<w.length;++Y){const ce=w[Y];if(ce&&!ce.da&&ce.capture==x){const De=ce.listener,Kt=ce.ha||ce.src;ce.fa&&Tn(d.i,ce),W=De.call(Kt,L)!==!1&&W}}return W&&!L.defaultPrevented}function Ml(d,w){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=h(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:a.setTimeout(d,w||0)}function Vl(d){d.g=Ml(()=>{d.g=null,d.i&&(d.i=!1,Vl(d))},d.l);const w=d.h;d.h=null,d.m.apply(null,w)}class Yw extends M{constructor(w,x){super(),this.m=w,this.l=x,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Vl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gi(d){M.call(this),this.h=d,this.g={}}p(Gi,M);var jg=[];function ro(d){Te(d.g,function(w,x){this.g.hasOwnProperty(x)&&fu(w)},d),d.g={}}Gi.prototype.N=function(){Gi.Z.N.call(this),ro(this)},Gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ds=a.JSON.stringify,Yd=a.JSON.parse,Qd=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function mu(){}function pu(){}var Zs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ll(){U.call(this,"d")}p(Ll,U);function Ul(){U.call(this,"c")}p(Ul,U);var $i={},gu=null;function yu(){return gu=gu||new Cn}$i.Ia="serverreachability";function Fg(d){U.call(this,$i.Ia,d)}p(Fg,U);function jl(d){const w=yu();rn(w,new Fg(w))}$i.STAT_EVENT="statevent";function Xd(d,w){U.call(this,$i.STAT_EVENT,d),this.stat=w}p(Xd,U);function Nn(d){const w=yu();rn(w,new Xd(w,d))}$i.Ja="timingevent";function zg(d,w){U.call(this,$i.Ja,d),this.size=w}p(zg,U);function Fl(d,w){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},w)}function zl(){this.g=!0}zl.prototype.ua=function(){this.g=!1};function Qw(d,w,x,L,W,Y){d.info(function(){if(d.g)if(Y){var ce="",De=Y.split("&");for(let ot=0;ot<De.length;ot++){var Kt=De[ot].split("=");if(Kt.length>1){const Wt=Kt[0];Kt=Kt[1];const Ir=Wt.split("_");ce=Ir.length>=2&&Ir[1]=="type"?ce+(Wt+"="+Kt+"&"):ce+(Wt+"=redacted&")}}}else ce=null;else ce=Y;return"XMLHTTP REQ ("+L+") [attempt "+W+"]: "+w+`
`+x+`
`+ce})}function Bg(d,w,x,L,W,Y,ce){d.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+W+"]: "+w+`
`+x+`
`+Y+" "+ce})}function io(d,w,x,L){d.info(function(){return"XMLHTTP TEXT ("+w+"): "+Jw(d,x)+(L?" "+L:"")})}function Xw(d,w){d.info(function(){return"TIMEOUT: "+w})}zl.prototype.info=function(){};function Jw(d,w){if(!d.g)return w;if(!w)return null;try{const Y=JSON.parse(w);if(Y){for(d=0;d<Y.length;d++)if(Array.isArray(Y[d])){var x=Y[d];if(!(x.length<2)){var L=x[1];if(Array.isArray(L)&&!(L.length<1)){var W=L[0];if(W!="noop"&&W!="stop"&&W!="close")for(let ce=1;ce<L.length;ce++)L[ce]=""}}}}return ds(Y)}catch{return w}}var so={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},qg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},_u;function Jd(){}p(Jd,mu),Jd.prototype.g=function(){return new XMLHttpRequest},_u=new Jd;function Bl(d){return encodeURIComponent(String(d))}function Zw(d){var w=1;d=d.split(":");const x=[];for(;w>0&&d.length;)x.push(d.shift()),w--;return d.length&&x.push(d.join(":")),x}function fs(d,w,x,L){this.j=d,this.i=w,this.l=x,this.S=L||1,this.V=new Gi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Hg}function Hg(){this.i=null,this.g="",this.h=!1}var Gg={},Zd={};function ef(d,w,x){d.M=1,d.A=na($r(w)),d.u=x,d.R=!0,tf(d,null)}function tf(d,w){d.F=Date.now(),vu(d),d.B=$r(d.A);var x=d.B,L=d.S;Array.isArray(L)||(L=[String(L)]),hf(x.i,"t",L),d.C=0,x=d.j.L,d.h=new Hg,d.g=Wi(d.j,x?w:null,!d.u),d.P>0&&(d.O=new Yw(h(d.Y,d,d.g),d.P)),w=d.V,x=d.g,L=d.ba;var W="readystatechange";Array.isArray(W)||(W&&(jg[0]=W.toString()),W=jg);for(let Y=0;Y<W.length;Y++){const ce=no(x,W[Y],L||w.handleEvent,!1,w.h||w);if(!ce)break;w.g[ce.key]=ce}w=d.J?Ve(d.J):{},d.u?(d.v||(d.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,w)):(d.v="GET",d.g.ea(d.B,d.v,null,w)),jl(),Qw(d.i,d.v,d.B,d.l,d.S,d.u)}fs.prototype.ba=function(d){d=d.target;const w=this.O;w&&gs(d)==3?w.j():this.Y(d)},fs.prototype.Y=function(d){try{if(d==this.g)e:{const De=gs(this.g),Kt=this.g.ya(),ot=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||oy(this.g)))){this.K||De!=4||Kt==7||(Kt==8||ot<=0?jl(3):jl(2)),nf(this);var w=this.g.ca();this.X=w;var x=eb(this);if(this.o=w==200,Bg(this.i,this.v,this.B,this.l,this.S,De,w),this.o){if(this.U&&!this.L){t:{if(this.g){var L,W=this.g;if((L=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(L)){var Y=L;break t}}Y=null}if(d=Y)io(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ao(this,d);else{this.o=!1,this.m=3,Nn(12),ea(this),ms(this);break e}}if(this.R){d=!0;let Wt;for(;!this.K&&this.C<x.length;)if(Wt=tb(this,x),Wt==Zd){De==4&&(this.m=4,Nn(14),d=!1),io(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==Gg){this.m=4,Nn(15),io(this.i,this.l,x,"[Invalid Chunk]"),d=!1;break}else io(this.i,this.l,Wt,null),ao(this,Wt);if($g(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||x.length!=0||this.h.h||(this.m=1,Nn(16),d=!1),this.o=this.o&&d,!d)io(this.i,this.l,x,"[Invalid Chunked Response]"),ea(this),ms(this);else if(x.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Iu(ce),ce.P=!0,Nn(11))}}else io(this.i,this.l,x,null),ao(this,x);De==4&&ea(this),this.o&&!this.K&&(De==4?Zn(this.j,this):(this.o=!1,vu(this)))}else cb(this.g),w==400&&x.indexOf("Unknown SID")>0?(this.m=3,Nn(12)):(this.m=0,Nn(13)),ea(this),ms(this)}}}catch{}finally{}};function eb(d){if(!$g(d))return d.g.la();const w=oy(d.g);if(w==="")return"";let x="";const L=w.length,W=gs(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return ea(d),ms(d),"";d.h.i=new a.TextDecoder}for(let Y=0;Y<L;Y++)d.h.h=!0,x+=d.h.i.decode(w[Y],{stream:!(W&&Y==L-1)});return w.length=0,d.h.g+=x,d.C=0,d.h.g}function $g(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function tb(d,w){var x=d.C,L=w.indexOf(`
`,x);return L==-1?Zd:(x=Number(w.substring(x,L)),isNaN(x)?Gg:(L+=1,L+x>w.length?Zd:(w=w.slice(L,L+x),d.C=L+x,w)))}fs.prototype.cancel=function(){this.K=!0,ea(this)};function vu(d){d.T=Date.now()+d.H,Kg(d,d.H)}function Kg(d,w){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Fl(h(d.aa,d),w)}function nf(d){d.D&&(a.clearTimeout(d.D),d.D=null)}fs.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Xw(this.i,this.B),this.M!=2&&(jl(),Nn(17)),ea(this),this.m=2,ms(this)):Kg(this,this.T-d)};function ms(d){d.j.I==0||d.K||Zn(d.j,d)}function ea(d){nf(d);var w=d.O;w&&typeof w.dispose=="function"&&w.dispose(),d.O=null,ro(d.V),d.g&&(w=d.g,d.g=null,w.abort(),w.dispose())}function ao(d,w){try{var x=d.j;if(x.I!=0&&(x.g==d||wu(x.h,d))){if(!d.L&&wu(x.h,d)&&x.I==3){try{var L=x.Ba.g.parse(w)}catch{L=null}if(Array.isArray(L)&&L.length==3){var W=L;if(W[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<d.F)$l(x),$t(x);else break e;Su(x),Nn(18)}}else x.xa=W[1],0<x.xa-x.K&&W[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Fl(h(x.Va,x),6e3));rf(x.h)<=1&&x.ta&&(x.ta=void 0)}else fn(x,11)}else if((d.L||x.g==d)&&$l(x),!F(w))for(W=x.Ba.g.parse(w),w=0;w<W.length;w++){let ot=W[w];const Wt=ot[0];if(!(Wt<=x.K))if(x.K=Wt,ot=ot[1],x.I==2)if(ot[0]=="c"){x.M=ot[1],x.ba=ot[2];const Ir=ot[3];Ir!=null&&(x.ka=Ir,x.j.info("VER="+x.ka));const ys=ot[4];ys!=null&&(x.za=ys,x.j.info("SVER="+x.za));const _s=ot[5];_s!=null&&typeof _s=="number"&&_s>0&&(L=1.5*_s,x.O=L,x.j.info("backChannelRequestTimeoutMs_="+L)),L=x;const vi=d.g;if(vi){const ho=vi.g?vi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ho){var Y=L.h;Y.g||ho.indexOf("spdy")==-1&&ho.indexOf("quic")==-1&&ho.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(bu(Y,Y.h),Y.h=null))}if(L.G){const bf=vi.g?vi.g.getResponseHeader("X-HTTP-Session-Id"):null;bf&&(L.wa=bf,yt(L.J,L.G,bf))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-d.F,x.j.info("Handshake RTT: "+x.T+"ms")),L=x;var ce=d;if(L.na=wf(L,L.L?L.ba:null,L.W),ce.L){Qg(L.h,ce);var De=ce,Kt=L.O;Kt&&(De.H=Kt),De.D&&(nf(De),vu(De)),L.g=ce}else _f(L);x.i.length>0&&_i(x)}else ot[0]!="stop"&&ot[0]!="close"||fn(x,7);else x.I==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?fn(x,7):gf(x):ot[0]!="noop"&&x.l&&x.l.qa(ot),x.A=0)}}jl(4)}catch{}}var nb=class{constructor(d,w){this.g=d,this.map=w}};function Wg(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Yg(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function rf(d){return d.h?1:d.g?d.g.size:0}function wu(d,w){return d.h?d.h==w:d.g?d.g.has(w):!1}function bu(d,w){d.g?d.g.add(w):d.h=w}function Qg(d,w){d.h&&d.h==w?d.h=null:d.g&&d.g.has(w)&&d.g.delete(w)}Wg.prototype.cancel=function(){if(this.i=Xg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Xg(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let w=d.i;for(const x of d.g.values())w=w.concat(x.G);return w}return _(d.i)}var Jg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rb(d,w){if(d){d=d.split("&");for(let x=0;x<d.length;x++){const L=d[x].indexOf("=");let W,Y=null;L>=0?(W=d[x].substring(0,L),Y=d[x].substring(L+1)):W=d[x],w(W,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Ki(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;d instanceof Ki?(this.l=d.l,oo(this,d.j),this.o=d.o,this.g=d.g,ta(this,d.u),this.h=d.h,sf(this,df(d.i)),this.m=d.m):d&&(w=String(d).match(Jg))?(this.l=!1,oo(this,w[1]||"",!0),this.o=lo(w[2]||""),this.g=lo(w[3]||"",!0),ta(this,w[4]),this.h=lo(w[5]||"",!0),sf(this,w[6]||"",!0),this.m=lo(w[7]||"")):(this.l=!1,this.i=new ra(null,this.l))}Ki.prototype.toString=function(){const d=[];var w=this.j;w&&d.push(ql(w,af,!0),":");var x=this.g;return(x||w=="file")&&(d.push("//"),(w=this.o)&&d.push(ql(w,af,!0),"@"),d.push(Bl(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&d.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(ql(x,x.charAt(0)=="/"?ib:of,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",ql(x,lf)),d.join("")},Ki.prototype.resolve=function(d){const w=$r(this);let x=!!d.j;x?oo(w,d.j):x=!!d.o,x?w.o=d.o:x=!!d.g,x?w.g=d.g:x=d.u!=null;var L=d.h;if(x)ta(w,d.u);else if(x=!!d.h){if(L.charAt(0)!="/")if(this.g&&!this.h)L="/"+L;else{var W=w.h.lastIndexOf("/");W!=-1&&(L=w.h.slice(0,W+1)+L)}if(W=L,W==".."||W==".")L="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){L=W.lastIndexOf("/",0)==0,W=W.split("/");const Y=[];for(let ce=0;ce<W.length;){const De=W[ce++];De=="."?L&&ce==W.length&&Y.push(""):De==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),L&&ce==W.length&&Y.push("")):(Y.push(De),L=!0)}L=Y.join("/")}else L=W}return x?w.h=L:x=d.i.toString()!=="",x?sf(w,df(d.i)):x=!!d.m,x&&(w.m=d.m),w};function $r(d){return new Ki(d)}function oo(d,w,x){d.j=x?lo(w,!0):w,d.j&&(d.j=d.j.replace(/:$/,""))}function ta(d,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);d.u=w}else d.u=null}function sf(d,w,x){w instanceof ra?(d.i=w,ny(d.i,d.l)):(x||(w=ql(w,ey)),d.i=new ra(w,d.l))}function yt(d,w,x){d.i.set(w,x)}function na(d){return yt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function lo(d,w){return d?w?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ql(d,w,x){return typeof d=="string"?(d=encodeURI(d).replace(w,Zg),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Zg(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var af=/[#\/\?@]/g,of=/[#\?:]/g,ib=/[#\?]/g,ey=/[#\?@]/g,lf=/#/g;function ra(d,w){this.h=this.g=null,this.i=d||null,this.j=!!w}function Sr(d){d.g||(d.g=new Map,d.h=0,d.i&&rb(d.i,function(w,x){d.add(decodeURIComponent(w.replace(/\+/g," ")),x)}))}t=ra.prototype,t.add=function(d,w){Sr(this),this.i=null,d=ia(this,d);let x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(w),this.h+=1,this};function cf(d,w){Sr(d),w=ia(d,w),d.g.has(w)&&(d.i=null,d.h-=d.g.get(w).length,d.g.delete(w))}function uf(d,w){return Sr(d),w=ia(d,w),d.g.has(w)}t.forEach=function(d,w){Sr(this),this.g.forEach(function(x,L){x.forEach(function(W){d.call(w,W,L,this)},this)},this)};function ty(d,w){Sr(d);let x=[];if(typeof w=="string")uf(d,w)&&(x=x.concat(d.g.get(ia(d,w))));else for(d=Array.from(d.g.values()),w=0;w<d.length;w++)x=x.concat(d[w]);return x}t.set=function(d,w){return Sr(this),this.i=null,d=ia(this,d),uf(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[w]),this.h+=1,this},t.get=function(d,w){return d?(d=ty(this,d),d.length>0?String(d[0]):w):w};function hf(d,w,x){cf(d,w),x.length>0&&(d.i=null,d.g.set(ia(d,w),_(x)),d.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],w=Array.from(this.g.keys());for(let L=0;L<w.length;L++){var x=w[L];const W=Bl(x);x=ty(this,x);for(let Y=0;Y<x.length;Y++){let ce=W;x[Y]!==""&&(ce+="="+Bl(x[Y])),d.push(ce)}}return this.i=d.join("&")};function df(d){const w=new ra;return w.i=d.i,d.g&&(w.g=new Map(d.g),w.h=d.h),w}function ia(d,w){return w=String(w),d.j&&(w=w.toLowerCase()),w}function ny(d,w){w&&!d.j&&(Sr(d),d.i=null,d.g.forEach(function(x,L){const W=L.toLowerCase();L!=W&&(cf(this,L),hf(this,W,x))},d)),d.j=w}function sb(d,w){const x=new zl;if(a.Image){const L=new Image;L.onload=f(ps,x,"TestLoadImage: loaded",!0,w,L),L.onerror=f(ps,x,"TestLoadImage: error",!1,w,L),L.onabort=f(ps,x,"TestLoadImage: abort",!1,w,L),L.ontimeout=f(ps,x,"TestLoadImage: timeout",!1,w,L),a.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=d}else w(!1)}function ab(d,w){const x=new zl,L=new AbortController,W=setTimeout(()=>{L.abort(),ps(x,"TestPingServer: timeout",!1,w)},1e4);fetch(d,{signal:L.signal}).then(Y=>{clearTimeout(W),Y.ok?ps(x,"TestPingServer: ok",!0,w):ps(x,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(W),ps(x,"TestPingServer: error",!1,w)})}function ps(d,w,x,L,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),L(x)}catch{}}function ry(){this.g=new Qd}function ff(d){this.i=d.Sb||null,this.h=d.ab||!1}p(ff,mu),ff.prototype.g=function(){return new Tu(this.i,this.h)};function Tu(d,w){Cn.call(this),this.H=d,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Tu,Cn),t=Tu.prototype,t.open=function(d,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=w,this.readyState=1,sa(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(w.body=d),(this.H||a).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Hl(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,sa(this)),this.g&&(this.readyState=3,sa(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;iy(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function iy(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var w=d.value?d.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!d.done}))&&(this.response=this.responseText+=w)}d.done?Hl(this):sa(this),this.readyState==3&&iy(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,Hl(this))},t.Na=function(d){this.g&&(this.response=d,Hl(this))},t.ga=function(){this.g&&Hl(this)};function Hl(d){d.readyState=4,d.l=null,d.j=null,d.B=null,sa(d)}t.setRequestHeader=function(d,w){this.A.append(d,w)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],w=this.h.entries();for(var x=w.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=w.next();return d.join(`\r
`)};function sa(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Tu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function sy(d){let w="";return Te(d,function(x,L){w+=L,w+=":",w+=x,w+=`\r
`}),w}function mf(d,w,x){e:{for(L in x){var L=!1;break e}L=!0}L||(x=sy(x),typeof d=="string"?x!=null&&Bl(x):yt(d,w,x))}function Vt(d){Cn.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Vt,Cn);var ob=/^https?$/i,lb=["POST","PUT"];t=Vt.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,w,x,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);w=w?w.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():_u.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(w,String(d),!0),this.B=!1}catch(Y){_t(this,Y);return}if(d=x||"",x=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var W in L)x.set(W,L[W]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const Y of L.keys())x.set(Y,L.get(Y));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(x.keys()).find(Y=>Y.toLowerCase()=="content-type"),W=a.FormData&&d instanceof a.FormData,!(Array.prototype.indexOf.call(lb,w,void 0)>=0)||L||W||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ce]of x)this.g.setRequestHeader(Y,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Y){_t(this,Y)}};function _t(d,w){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=w,d.o=5,ut(d),Eu(d)}function ut(d){d.A||(d.A=!0,rn(d,"complete"),rn(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,rn(this,"complete"),rn(this,"abort"),Eu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Eu(this,!0)),Vt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ay(this):this.Xa())},t.Xa=function(){ay(this)};function ay(d){if(d.h&&typeof s<"u"){if(d.v&&gs(d)==4)setTimeout(d.Ca.bind(d),0);else if(rn(d,"readystatechange"),gs(d)==4){d.h=!1;try{const Y=d.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var x;if(!(x=w)){var L;if(L=Y===0){let ce=String(d.D).match(Jg)[1]||null;!ce&&a.self&&a.self.location&&(ce=a.self.location.protocol.slice(0,-1)),L=!ob.test(ce?ce.toLowerCase():"")}x=L}if(x)rn(d,"complete"),rn(d,"success");else{d.o=6;try{var W=gs(d)>2?d.g.statusText:""}catch{W=""}d.l=W+" ["+d.ca()+"]",ut(d)}}finally{Eu(d)}}}}function Eu(d,w){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const x=d.g;d.g=null,w||rn(d,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function gs(d){return d.g?d.g.readyState:0}t.ca=function(){try{return gs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var w=this.g.responseText;return d&&w.indexOf(d)==0&&(w=w.substring(d.length)),Yd(w)}};function oy(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function cb(d){const w={};d=(d.g&&gs(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<d.length;L++){if(F(d[L]))continue;var x=Zw(d[L]);const W=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Y=w[W]||[];w[W]=Y,Y.push(x)}_e(w,function(L){return L.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gl(d,w,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||w}function pf(d){this.za=0,this.i=[],this.j=new zl,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Gl("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Gl("baseRetryDelayMs",5e3,d),this.Za=Gl("retryDelaySeedMs",1e4,d),this.Ta=Gl("forwardChannelMaxRetries",2,d),this.va=Gl("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Wg(d&&d.concurrentRequestLimit),this.Ba=new ry,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=pf.prototype,t.ka=8,t.I=1,t.connect=function(d,w,x,L){Nn(0),this.W=d,this.H=w||{},x&&L!==void 0&&(this.H.OSID=x,this.H.OAID=L),this.F=this.X,this.J=wf(this,null,this.W),_i(this)};function gf(d){if(xu(d),d.I==3){var w=d.V++,x=$r(d.J);if(yt(x,"SID",d.M),yt(x,"RID",w),yt(x,"TYPE","terminate"),Pn(d,x),w=new fs(d,d.j,w),w.M=2,w.A=na($r(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(w.A.toString(),"")}catch{}!x&&a.Image&&(new Image().src=w.A,x=!0),x||(w.g=Wi(w.j,null),w.g.ea(w.A)),w.F=Date.now(),vu(w)}uy(d)}function $t(d){d.g&&(Iu(d),d.g.cancel(),d.g=null)}function xu(d){$t(d),d.v&&(a.clearTimeout(d.v),d.v=null),$l(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&a.clearTimeout(d.m),d.m=null)}function _i(d){if(!Yg(d.h)&&!d.m){d.m=!0;var w=d.Ea;j||C(),q||(j(),q=!0),S.add(w,d),d.D=0}}function ly(d,w){return rf(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=w.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Fl(h(d.Ea,d,w),cy(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const W=new fs(this,this.j,d);let Y=this.o;if(this.U&&(Y?(Y=Ve(Y),hr(Y,this.U)):Y=this.U),this.u!==null||this.R||(W.J=Y,Y=null),this.S)e:{for(var w=0,x=0;x<this.i.length;x++){t:{var L=this.i[x];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(w+=L,w>4096){w=x;break e}if(w===4096||x===this.i.length-1){w=x+1;break e}}w=1e3}else w=1e3;w=yf(this,W,w),x=$r(this.J),yt(x,"RID",d),yt(x,"CVER",22),this.G&&yt(x,"X-HTTP-Session-Id",this.G),Pn(this,x),Y&&(this.R?w="headers="+Bl(sy(Y))+"&"+w:this.u&&mf(x,this.u,Y)),bu(this.h,W),this.Ra&&yt(x,"TYPE","init"),this.S?(yt(x,"$req",w),yt(x,"SID","null"),W.U=!0,ef(W,x,null)):ef(W,x,w),this.I=2}}else this.I==3&&(d?Au(this,d):this.i.length==0||Yg(this.h)||Au(this))};function Au(d,w){var x;w?x=w.l:x=d.V++;const L=$r(d.J);yt(L,"SID",d.M),yt(L,"RID",x),yt(L,"AID",d.K),Pn(d,L),d.u&&d.o&&mf(L,d.u,d.o),x=new fs(d,d.j,x,d.D+1),d.u===null&&(x.J=d.o),w&&(d.i=w.G.concat(d.i)),w=yf(d,x,1e3),x.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),bu(d.h,x),ef(x,L,w)}function Pn(d,w){d.H&&Te(d.H,function(x,L){yt(w,L,x)}),d.l&&Te({},function(x,L){yt(w,L,x)})}function yf(d,w,x){x=Math.min(d.i.length,x);const L=d.l?h(d.l.Ka,d.l,d):null;e:{var W=d.i;let De=-1;for(;;){const Kt=["count="+x];De==-1?x>0?(De=W[0].g,Kt.push("ofs="+De)):De=0:Kt.push("ofs="+De);let ot=!0;for(let Wt=0;Wt<x;Wt++){var Y=W[Wt].g;const Ir=W[Wt].map;if(Y-=De,Y<0)De=Math.max(0,W[Wt].g-100),ot=!1;else try{Y="req"+Y+"_"||"";try{var ce=Ir instanceof Map?Ir:Object.entries(Ir);for(const[ys,_s]of ce){let vi=_s;o(_s)&&(vi=ds(_s)),Kt.push(Y+ys+"="+encodeURIComponent(vi))}}catch(ys){throw Kt.push(Y+"type="+encodeURIComponent("_badmap")),ys}}catch{L&&L(Ir)}}if(ot){ce=Kt.join("&");break e}}ce=void 0}return d=d.i.splice(0,x),w.G=d,ce}function _f(d){if(!d.g&&!d.v){d.Y=1;var w=d.Da;j||C(),q||(j(),q=!0),S.add(w,d),d.A=0}}function Su(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Fl(h(d.Da,d),cy(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,vf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Fl(h(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nn(10),$t(this),vf(this))};function Iu(d){d.B!=null&&(a.clearTimeout(d.B),d.B=null)}function vf(d){d.g=new fs(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var w=$r(d.na);yt(w,"RID","rpc"),yt(w,"SID",d.M),yt(w,"AID",d.K),yt(w,"CI",d.F?"0":"1"),!d.F&&d.ia&&yt(w,"TO",d.ia),yt(w,"TYPE","xmlhttp"),Pn(d,w),d.u&&d.o&&mf(w,d.u,d.o),d.O&&(d.g.H=d.O);var x=d.g;d=d.ba,x.M=1,x.A=na($r(w)),x.u=null,x.R=!0,tf(x,d)}t.Va=function(){this.C!=null&&(this.C=null,$t(this),Su(this),Nn(19))};function $l(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function Zn(d,w){var x=null;if(d.g==w){$l(d),Iu(d),d.g=null;var L=2}else if(wu(d.h,w))x=w.G,Qg(d.h,w),L=1;else return;if(d.I!=0){if(w.o)if(L==1){x=w.u?w.u.length:0,w=Date.now()-w.F;var W=d.D;L=yu(),rn(L,new zg(L,x)),_i(d)}else _f(d);else if(W=w.m,W==3||W==0&&w.X>0||!(L==1&&ly(d,w)||L==2&&Su(d)))switch(x&&x.length>0&&(w=d.h,w.i=w.i.concat(x)),W){case 1:fn(d,5);break;case 4:fn(d,10);break;case 3:fn(d,6);break;default:fn(d,2)}}}function cy(d,w){let x=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(x*=2),x*w}function fn(d,w){if(d.j.info("Error code "+w),w==2){var x=h(d.bb,d),L=d.Ua;const W=!L;L=new Ki(L||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||oo(L,"https"),na(L),W?sb(L.toString(),x):ab(L.toString(),x)}else Nn(2);d.I=0,d.l&&d.l.pa(w),uy(d),xu(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Nn(2)):(this.j.info("Failed to ping google.com"),Nn(1))};function uy(d){if(d.I=0,d.ja=[],d.l){const w=Xg(d.h);(w.length!=0||d.i.length!=0)&&(R(d.ja,w),R(d.ja,d.i),d.h.i.length=0,_(d.i),d.i.length=0),d.l.oa()}}function wf(d,w,x){var L=x instanceof Ki?$r(x):new Ki(x);if(L.g!="")w&&(L.g=w+"."+L.g),ta(L,L.u);else{var W=a.location;L=W.protocol,w=w?w+"."+W.hostname:W.hostname,W=+W.port;const Y=new Ki(null);L&&oo(Y,L),w&&(Y.g=w),W&&ta(Y,W),x&&(Y.h=x),L=Y}return x=d.G,w=d.wa,x&&w&&yt(L,x,w),yt(L,"VER",d.ka),Pn(d,L),L}function Wi(d,w,x){if(w&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=d.Aa&&!d.ma?new Vt(new ff({ab:x})):new Vt(d.ma),w.Fa(d.L),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kl(){}t=Kl.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function co(){}co.prototype.g=function(d,w){return new Be(d,w)};function Be(d,w){Cn.call(this),this.g=new pf(w),this.l=d,this.h=w&&w.messageUrlParams||null,d=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(d?d["X-WebChannel-Content-Type"]=w.messageContentType:d={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(d?d["X-WebChannel-Client-Profile"]=w.sa:d={"X-WebChannel-Client-Profile":w.sa}),this.g.U=d,(d=w&&w.Qb)&&!F(d)&&(this.g.u=d),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!F(w)&&(this.g.G=w,d=this.h,d!==null&&w in d&&(d=this.h,w in d&&delete d[w])),this.j=new uo(this)}p(Be,Cn),Be.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Be.prototype.close=function(){gf(this.g)},Be.prototype.o=function(d){var w=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.v&&(x={},x.__data__=ds(d),d=x);w.i.push(new nb(w.Ya++,d)),w.I==3&&_i(w)},Be.prototype.N=function(){this.g.l=null,delete this.j,gf(this.g),delete this.g,Be.Z.N.call(this)};function Yi(d){Ll.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var w=d.__sm__;if(w){e:{for(const x in w){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,w=w!==null&&d in w?w[d]:void 0),this.data=w}else this.data=d}p(Yi,Ll);function Ru(){Ul.call(this),this.status=1}p(Ru,Ul);function uo(d){this.g=d}p(uo,Kl),uo.prototype.ra=function(){rn(this.g,"a")},uo.prototype.qa=function(d){rn(this.g,new Yi(d))},uo.prototype.pa=function(d){rn(this.g,new Ru)},uo.prototype.oa=function(){rn(this.g,"b")},co.prototype.createWebChannel=co.prototype.g,Be.prototype.send=Be.prototype.o,Be.prototype.open=Be.prototype.m,Be.prototype.close=Be.prototype.close,s6=function(){return new co},i6=function(){return yu()},r6=$i,$1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},so.NO_ERROR=0,so.TIMEOUT=8,so.HTTP_ERROR=6,Y_=so,qg.COMPLETE="complete",n6=qg,pu.EventType=Zs,Zs.OPEN="a",Zs.CLOSE="b",Zs.ERROR="c",Zs.MESSAGE="d",Cn.prototype.listen=Cn.prototype.J,fm=pu,Vt.prototype.listenOnce=Vt.prototype.K,Vt.prototype.getLastError=Vt.prototype.Ha,Vt.prototype.getLastErrorCode=Vt.prototype.ya,Vt.prototype.getStatus=Vt.prototype.ca,Vt.prototype.getResponseJson=Vt.prototype.La,Vt.prototype.getResponseText=Vt.prototype.la,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Fa,t6=Vt}).apply(typeof d_<"u"?d_:typeof self<"u"?self:typeof window<"u"?window:{});const GP="@firebase/firestore",$P="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Md="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=new ug("@firebase/firestore");function th(){return dl.logLevel}function sne(t){dl.setLogLevel(t)}function oe(t,...e){if(dl.logLevel<=ze.DEBUG){const n=e.map(NS);dl.debug(`Firestore (${Md}): ${t}`,...n)}}function cn(t,...e){if(dl.logLevel<=ze.ERROR){const n=e.map(NS);dl.error(`Firestore (${Md}): ${t}`,...n)}}function Hs(t,...e){if(dl.logLevel<=ze.WARN){const n=e.map(NS);dl.warn(`Firestore (${Md}): ${t}`,...n)}}function NS(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,a6(t,r,n)}function a6(t,e,n){let r=`FIRESTORE (${Md}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw cn(r),new Error(r)}function ve(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||a6(e,i,r)}function ane(t,e){t||pe(57014,e)}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends jn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class one{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mn.UNAUTHENTICATED))}shutdown(){}}class lne{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class cne{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new Qn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Qn,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},o=c=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Qn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new o6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new Mn(e)}}class une{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class hne{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new une(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class KP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dne{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,it(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ve(this.o===void 0,3512);const r=s=>{s.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,oe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new KP(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new KP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fne(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=fne(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function Re(t,e){return t<e?-1:t>e?1:0}function K1(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return rE(i)===rE(s)?Re(i,s):rE(i)?1:-1}return Re(t.length,e.length)}const mne=55296,pne=57343;function rE(t){const e=t.charCodeAt(0);return e>=mne&&e<=pne}function ed(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function l6(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP="__name__";class Ts{constructor(e,n,r){n===void 0?n=0:n>e.length&&pe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&pe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ts.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ts?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Ts.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Re(e.length,n.length)}static compareSegments(e,n){const r=Ts.isNumericId(e),i=Ts.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ts.extractNumericId(e).compare(Ts.extractNumericId(n)):K1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return tl.fromString(e.substring(4,e.length-2))}}class $e extends Ts{construct(e,n,r){return new $e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new $e(n)}static emptyPath(){return new $e([])}}const gne=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends Ts{construct(e,n,r){return new jt(e,n,r)}static isValidIdentifier(e){return gne.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===WP}static keyField(){return new jt([WP])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new re(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new re(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new re(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new re(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(n)}static emptyPath(){return new jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he($e.fromString(e))}static fromName(e){return new he($e.fromString(e).popFirst(5))}static empty(){return new he($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new $e(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t,e,n){if(!n)throw new re(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function c6(t,e,n,r){if(e===!0&&r===!0)throw new re(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function YP(t){if(!he.isDocumentKey(t))throw new re(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function QP(t){if(he.isDocumentKey(t))throw new re(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function u6(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function dw(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe(12329,{type:typeof t})}function et(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dw(t);throw new re(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function h6(t,e){if(e<=0)throw new re(Q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(t,e){const n={typeString:t};return e&&(n.value=e),n}function _g(t,e){if(!u6(t))throw new re(Q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new re(Q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=-62135596800,JP=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*JP);return new ct(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<XP)throw new re(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/JP}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_g(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-XP;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:bn("string",ct._jsonSchemaVersion),seconds:bn("number"),nanoseconds:bn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new ct(0,0))}static max(){return new be(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=-1;class Z0{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function W1(t){return t.fields.find(e=>e.kind===2)}function uc(t){return t.fields.filter(e=>e.kind!==2)}Z0.UNKNOWN_ID=-1;class Q_{constructor(e,n){this.fieldPath=e,this.kind=n}}class Cp{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Cp(0,gi.min())}}function d6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=be.fromTimestamp(r===1e9?new ct(n+1,0):new ct(n,r));return new gi(i,he.empty(),e)}function f6(t){return new gi(t.readTime,t.key,td)}class gi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gi(be.min(),he.empty(),td)}static max(){return new gi(be.max(),he.empty(),td)}}function kS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class p6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==m6)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,r)=>{n(e)})}static reject(e){return new K((n,r)=>{r(e)})}static waitFor(e){return new K((n,r)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&n()},c=>r(c))}),a=!0,s===i&&n()})}static or(e){let n=K.resolve(!1);for(const r of e)n=n.next(i=>i?K.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new K((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let c=0;c<s;c++){const h=c;n(e[h]).next(f=>{a[h]=f,++o,o===s&&r(a)},f=>i(f))}})}static doWhile(e,n){return new K((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei="SimpleDb";class fw{static open(e,n,r,i){try{return new fw(n,e.transaction(i,r))}catch(s){throw new Bm(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Qn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Bm(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=OS(r.target.error);this.S.reject(new Bm(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(oe(ei,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new _ne(n)}}class Ls{static delete(e){return oe(ei,"Removing database:",e),mc(JA().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Tp())return!1;if(Ls.F())return!0;const e=tt(),n=Ls.M(e),r=0<n&&n<10,i=g6(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Ls.M(tt())===12.2&&cn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(oe(ei,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;n(a)},i.onblocked=()=>{r(new Bm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new re(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new re(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Bm(e,a))},i.onupgradeneeded=s=>{oe(ei,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next(()=>{oe(ei,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=fw.open(this.db,e,s?"readonly":"readwrite",r),c=i(o).next(h=>(o.C(),h)).catch(h=>(o.abort(h),K.reject(h))).toPromise();return c.catch(()=>{}),await o.D,c}catch(o){const c=o,h=c.name!=="FirebaseError"&&a<3;if(oe(ei,"Transaction failed with error:",c.message,"Retrying:",h),this.close(),!h)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function g6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class yne{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return mc(this.U.delete())}}class Bm extends re{constructor(e,n){super(Q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Il(t){return t.name==="IndexedDbTransactionError"}class _ne{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(oe(ei,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(oe(ei,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),mc(r)}add(e){return oe(ei,"ADD",this.store.name,e,e),mc(this.store.add(e))}get(e){return mc(this.store.get(e)).next(n=>(n===void 0&&(n=null),oe(ei,"GET",this.store.name,e,n),n))}delete(e){return oe(ei,"DELETE",this.store.name,e),mc(this.store.delete(e))}count(){return oe(ei,"COUNT",this.store.name),mc(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new K((a,o)=>{s.onerror=c=>{o(c.target.error)},s.onsuccess=c=>{a(c.target.result)}})}{const s=this.cursor(r),a=[];return this.H(s,(o,c)=>{a.push(c)}).next(()=>a)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new K((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}Z(e,n){oe(ei,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,a,o)=>o.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new K((r,i)=>{n.onerror=s=>{const a=OS(s.target.error);i(a)},n.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():r()}):r()}})}H(e,n){const r=[];return new K((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const c=new yne(o),h=n(o.primaryKey,o.value,c);if(h instanceof K){const f=h.catch(p=>(c.done(),K.reject(p)));r.push(f)}c.isDone?i():c.G===null?o.continue():o.continue(c.G)}}).next(()=>K.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function mc(t){return new K((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=OS(r.target.error);n(i)}})}let ZP=!1;function OS(t){const e=Ls.M(tt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ZP||(ZP=!0,setTimeout(()=>{throw r},0)),r}}return t}const qm="IndexBackfiller";class vne{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){oe(qm,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();oe(qm,`Documents written: ${n}`)}catch(n){Il(n)?oe(qm,"Ignoring IndexedDB error during index backfill: ",n):await Sl(n)}await this.re(6e4)})}}class wne{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let i=n,s=!0;return K.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!r.has(a))return oe(qm,`Processing collection: ${a}`),this.oe(e,a,i).next(o=>{i-=o,r.add(a)});s=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this._e(i,s)).next(o=>(oe(qm,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>a.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,s)=>{const a=f6(s);kS(a,r)>0&&(r=a)}),new gi(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Lr.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=-1;function vg(t){return t==null}function Np(t){return t===0&&1/t==-1/0}function y6(t){return typeof t=="number"&&Number.isInteger(t)&&!Np(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="";function cr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=eD(e)),e=bne(t.get(n),e);return eD(e)}function bne(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case ev:n+="";break;default:n+=s}}return n}function eD(t){return t+ev+""}function ks(t){const e=t.length;if(ve(e>=2,64408,{path:t}),e===2)return ve(t.charAt(0)===ev&&t.charAt(1)==="",56145,{path:t}),$e.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const a=t.indexOf(ev,s);switch((a<0||a>n)&&pe(50515,{path:t}),t.charAt(a+1)){case"":const o=t.substring(s,a);let c;i.length===0?c=o:(i+=o,c=i,i=""),r.push(c);break;case"":i+=t.substring(s,a),i+="\0";break;case"":i+=t.substring(s,a+1);break;default:pe(61167,{path:t})}s=a+2}return new $e(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc="remoteDocuments",wg="owner",Hu="owner",Pp="mutationQueues",Tne="userId",rs="mutations",tD="batchId",wc="userMutationsIndex",nD=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(t,e){return[t,cr(e)]}function _6(t,e,n){return[t,cr(e),n]}const Ene={},nd="documentMutations",tv="remoteDocumentsV14",xne=["prefixPath","collectionGroup","readTime","documentId"],J_="documentKeyIndex",Ane=["prefixPath","collectionGroup","documentId"],v6="collectionGroupIndex",Sne=["collectionGroup","readTime","prefixPath","documentId"],Dp="remoteDocumentGlobal",Y1="remoteDocumentGlobalKey",rd="targets",w6="queryTargetsIndex",Ine=["canonicalId","targetId"],id="targetDocuments",Rne=["targetId","path"],MS="documentTargetsIndex",Cne=["path","targetId"],nv="targetGlobalKey",Dc="targetGlobal",kp="collectionParents",Nne=["collectionId","parent"],sd="clientMetadata",Pne="clientId",mw="bundles",Dne="bundleId",pw="namedQueries",kne="name",VS="indexConfiguration",One="indexId",Q1="collectionGroupIndex",Mne="collectionGroup",Hm="indexState",Vne=["indexId","uid"],b6="sequenceNumberIndex",Lne=["uid","sequenceNumber"],Gm="indexEntries",Une=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],T6="documentKeyIndex",jne=["indexId","uid","orderedDocumentKey"],gw="documentOverlays",Fne=["userId","collectionPath","documentId"],X1="collectionPathOverlayIndex",zne=["userId","collectionPath","largestBatchId"],E6="collectionGroupOverlayIndex",Bne=["userId","collectionGroup","largestBatchId"],LS="globals",qne="name",x6=[Pp,rs,nd,hc,rd,wg,Dc,id,sd,Dp,kp,mw,pw],Hne=[...x6,gw],A6=[Pp,rs,nd,tv,rd,wg,Dc,id,sd,Dp,kp,mw,pw,gw],S6=A6,US=[...S6,VS,Hm,Gm],Gne=US,I6=[...US,LS],$ne=I6;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1 extends p6{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Rn(t,e){const n=de(t);return Ls.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function R6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){this.comparator=e,this.root=n||Hn.EMPTY}insert(e,n){return new At(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Hn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new f_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new f_(this.root,e,this.comparator,!1)}getReverseIterator(){return new f_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new f_(this.root,e,this.comparator,!0)}}class f_{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Hn.RED,this.left=i??Hn.EMPTY,this.right=s??Hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Hn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Hn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}Hn.EMPTY=null,Hn.RED=!0,Hn.BLACK=!1;Hn.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new iD(this.data.getIterator())}getIteratorFrom(e){return new iD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class iD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Gu(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new Ur([])}unionWith(e){let n=new pt(jt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ur(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ed(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kne(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new C6("Invalid base64 string: "+s):s}}(e);return new en(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new en(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const Wne=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ha(t){if(ve(!!t,39018),typeof t=="string"){let e=0;const n=Wne.exec(t);if(ve(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ut(t.seconds),nanos:Ut(t.nanos)}}function Ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ga(t){return typeof t=="string"?en.fromBase64String(t):en.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6="server_timestamp",P6="__type__",D6="__previous_value__",k6="__local_write_time__";function yw(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[P6])==null?void 0:r.stringValue)===N6}function _w(t){const e=t.mapValue.fields[D6];return yw(e)?_w(e):e}function Op(t){const e=Ha(t.mapValue.fields[k6].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yne{constructor(e,n,r,i,s,a,o,c,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=f}}const Z1="(default)";class fl{constructor(e,n){this.projectId=e,this.database=n||Z1}static empty(){return new fl("","")}get isDefaultDatabase(){return this.database===Z1}isEqual(e){return e instanceof fl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="__type__",O6="__max__",Bo={mapValue:{fields:{__type__:{stringValue:O6}}}},FS="__vector__",ad="value",Z_={nullValue:"NULL_VALUE"};function ml(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yw(t)?4:M6(t)?9007199254740991:vw(t)?10:11:pe(28295,{value:t})}function Gs(t,e){if(t===e)return!0;const n=ml(t);if(n!==ml(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Op(t).isEqual(Op(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Ha(i.timestampValue),o=Ha(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ga(i.bytesValue).isEqual(Ga(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ut(i.geoPointValue.latitude)===Ut(s.geoPointValue.latitude)&&Ut(i.geoPointValue.longitude)===Ut(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ut(i.integerValue)===Ut(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Ut(i.doubleValue),o=Ut(s.doubleValue);return a===o?Np(a)===Np(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return ed(t.arrayValue.values||[],e.arrayValue.values||[],Gs);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(rD(a)!==rD(o))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(o[c]===void 0||!Gs(a[c],o[c])))return!1;return!0}(t,e);default:return pe(52216,{left:t})}}function Mp(t,e){return(t.values||[]).find(n=>Gs(n,e))!==void 0}function pl(t,e){if(t===e)return 0;const n=ml(t),r=ml(e);if(n!==r)return Re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=Ut(s.integerValue||s.doubleValue),c=Ut(a.integerValue||a.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(t,e);case 3:return sD(t.timestampValue,e.timestampValue);case 4:return sD(Op(t),Op(e));case 5:return K1(t.stringValue,e.stringValue);case 6:return function(s,a){const o=Ga(s),c=Ga(a);return o.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),c=a.split("/");for(let h=0;h<o.length&&h<c.length;h++){const f=Re(o[h],c[h]);if(f!==0)return f}return Re(o.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=Re(Ut(s.latitude),Ut(a.latitude));return o!==0?o:Re(Ut(s.longitude),Ut(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return aD(t.arrayValue,e.arrayValue);case 10:return function(s,a){var g,_,R,N;const o=s.fields||{},c=a.fields||{},h=(g=o[ad])==null?void 0:g.arrayValue,f=(_=c[ad])==null?void 0:_.arrayValue,p=Re(((R=h==null?void 0:h.values)==null?void 0:R.length)||0,((N=f==null?void 0:f.values)==null?void 0:N.length)||0);return p!==0?p:aD(h,f)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Bo.mapValue&&a===Bo.mapValue)return 0;if(s===Bo.mapValue)return 1;if(a===Bo.mapValue)return-1;const o=s.fields||{},c=Object.keys(o),h=a.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let p=0;p<c.length&&p<f.length;++p){const g=K1(c[p],f[p]);if(g!==0)return g;const _=pl(o[c[p]],h[f[p]]);if(_!==0)return _}return Re(c.length,f.length)}(t.mapValue,e.mapValue);default:throw pe(23264,{he:n})}}function sD(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);const n=Ha(t),r=Ha(e),i=Re(n.seconds,r.seconds);return i!==0?i:Re(n.nanos,r.nanos)}function aD(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=pl(n[i],r[i]);if(s)return s}return Re(n.length,r.length)}function od(t){return ex(t)}function ex(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ha(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ga(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=ex(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${ex(n.fields[a])}`;return i+"}"}(t.mapValue):pe(61005,{value:t})}function e0(t){switch(ml(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_w(t);return e?16+e0(e):16;case 5:return 2*t.stringValue.length;case 6:return Ga(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+e0(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Rl(r.fields,(s,a)=>{i+=s.length+e0(a)}),i}(t.mapValue);default:throw pe(13486,{value:t})}}function qc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function tx(t){return!!t&&"integerValue"in t}function Vp(t){return!!t&&"arrayValue"in t}function oD(t){return!!t&&"nullValue"in t}function lD(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function t0(t){return!!t&&"mapValue"in t}function vw(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[jS])==null?void 0:r.stringValue)===FS}function $m(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Rl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=$m(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$m(t.arrayValue.values[n]);return e}return{...t}}function M6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===O6}const V6={mapValue:{fields:{[jS]:{stringValue:FS},[ad]:{arrayValue:{}}}}};function Qne(t){return"nullValue"in t?Z_:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?qc(fl.empty(),he.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?vw(t)?V6:{mapValue:{}}:pe(35942,{value:t})}function Xne(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?qc(fl.empty(),he.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?V6:"mapValue"in t?vw(t)?{mapValue:{}}:Bo:pe(61959,{value:t})}function cD(t,e){const n=pl(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function uD(t,e){const n=pl(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!t0(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$m(n)}setAll(e){let n=jt.emptyPath(),r={},i=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=o.popLast()}a?r[o.lastSegment()]=$m(a):i.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());t0(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Gs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];t0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Rl(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Kn($m(this.value))}}function L6(t){const e=[];return Rl(t.fields,(n,r)=>{const i=new jt([n]);if(t0(r)){const s=L6(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Ur(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n,r,i,s,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Nt(e,0,be.min(),be.min(),be.min(),Kn.empty(),0)}static newFoundDocument(e,n,r,i){return new Nt(e,1,n,be.min(),r,i,0)}static newNoDocument(e,n){return new Nt(e,2,n,be.min(),be.min(),Kn.empty(),0)}static newUnknownDocument(e,n){return new Nt(e,3,n,be.min(),be.min(),Kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n){this.position=e,this.inclusive=n}}function hD(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=he.comparator(he.fromName(a.referenceValue),n.key):r=pl(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function dD(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Gs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n="asc"){this.field=e,this.dir=n}}function Jne(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{}class Qe extends U6{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Zne(e,n,r):n==="array-contains"?new nre(e,r):n==="in"?new H6(e,r):n==="not-in"?new rre(e,r):n==="array-contains-any"?new ire(e,r):new Qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ere(e,r):new tre(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(pl(n,this.value)):n!==null&&ml(this.value)===ml(n)&&this.matchesComparison(pl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mt extends U6{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new mt(e,n)}matches(e){return ld(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ld(t){return t.op==="and"}function nx(t){return t.op==="or"}function zS(t){return j6(t)&&ld(t)}function j6(t){for(const e of t.filters)if(e instanceof mt)return!1;return!0}function rx(t){if(t instanceof Qe)return t.field.canonicalString()+t.op.toString()+od(t.value);if(zS(t))return t.filters.map(e=>rx(e)).join(",");{const e=t.filters.map(n=>rx(n)).join(",");return`${t.op}(${e})`}}function F6(t,e){return t instanceof Qe?function(r,i){return i instanceof Qe&&r.op===i.op&&r.field.isEqual(i.field)&&Gs(r.value,i.value)}(t,e):t instanceof mt?function(r,i){return i instanceof mt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&F6(a,i.filters[o]),!0):!1}(t,e):void pe(19439)}function z6(t,e){const n=t.filters.concat(e);return mt.create(n,t.op)}function B6(t){return t instanceof Qe?function(n){return`${n.field.canonicalString()} ${n.op} ${od(n.value)}`}(t):t instanceof mt?function(n){return n.op.toString()+" {"+n.getFilters().map(B6).join(" ,")+"}"}(t):"Filter"}class Zne extends Qe{constructor(e,n,r){super(e,n,r),this.key=he.fromName(r.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class ere extends Qe{constructor(e,n){super(e,"in",n),this.keys=q6("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class tre extends Qe{constructor(e,n){super(e,"not-in",n),this.keys=q6("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function q6(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>he.fromName(r.referenceValue))}class nre extends Qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vp(n)&&Mp(n.arrayValue,this.value)}}class H6 extends Qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Mp(this.value.arrayValue,n)}}class rre extends Qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Mp(this.value.arrayValue,n)}}class ire extends Qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Mp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sre{constructor(e,n=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function ix(t,e=null,n=[],r=[],i=null,s=null,a=null){return new sre(t,e,n,r,i,s,a)}function Hc(t){const e=de(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>rx(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),vg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>od(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>od(r)).join(",")),e.Te=n}return e.Te}function bg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Jne(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!F6(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!dD(t.startAt,e.startAt)&&dD(t.endAt,e.endAt)}function rv(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function iv(t,e){return t.filters.filter(n=>n instanceof Qe&&n.field.isEqual(e))}function fD(t,e,n){let r=Z_,i=!0;for(const s of iv(t,e)){let a=Z_,o=!0;switch(s.op){case"<":case"<=":a=Qne(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=Z_}cD({value:r,inclusive:i},{value:a,inclusive:o})<0&&(r=a,i=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];cD({value:r,inclusive:i},{value:a,inclusive:n.inclusive})<0&&(r=a,i=n.inclusive);break}}return{value:r,inclusive:i}}function mD(t,e,n){let r=Bo,i=!0;for(const s of iv(t,e)){let a=Bo,o=!0;switch(s.op){case">=":case">":a=Xne(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=Bo}uD({value:r,inclusive:i},{value:a,inclusive:o})>0&&(r=a,i=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];uD({value:r,inclusive:i},{value:a,inclusive:n.inclusive})>0&&(r=a,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n=null,r=[],i=[],s=null,a="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function G6(t,e,n,r,i,s,a,o){return new Qa(t,e,n,r,i,s,a,o)}function Vd(t){return new Qa(t)}function pD(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function BS(t){return t.collectionGroup!==null}function Oh(t){const e=de(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new pt(jt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(o=o.add(h.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Lp(s,r))}),n.has(jt.keyField().canonicalString())||e.Ie.push(new Lp(jt.keyField(),r))}return e.Ie}function Tr(t){const e=de(t);return e.Ee||(e.Ee=are(e,Oh(t))),e.Ee}function are(t,e){if(t.limitType==="F")return ix(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Lp(i.field,s)});const n=t.endAt?new gl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new gl(t.startAt.position,t.startAt.inclusive):null;return ix(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sx(t,e){const n=t.filters.concat([e]);return new Qa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sv(t,e,n){return new Qa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Tg(t,e){return bg(Tr(t),Tr(e))&&t.limitType===e.limitType}function $6(t){return`${Hc(Tr(t))}|lt:${t.limitType}`}function nh(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>B6(i)).join(", ")}]`),vg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>od(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>od(i)).join(",")),`Target(${r})`}(Tr(t))}; limitType=${t.limitType})`}function Eg(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):he.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Oh(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,o,c){const h=hD(a,o,c);return a.inclusive?h<=0:h<0}(r.startAt,Oh(r),i)||r.endAt&&!function(a,o,c){const h=hD(a,o,c);return a.inclusive?h>=0:h>0}(r.endAt,Oh(r),i))}(t,e)}function K6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function W6(t){return(e,n)=>{let r=!1;for(const i of Oh(t)){const s=ore(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ore(t,e,n){const r=t.field.isKeyField()?he.comparator(e.key,n.key):function(s,a,o){const c=a.data.field(s),h=o.data.field(s);return c!==null&&h!==null?pl(c,h):pe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Rl(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return R6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lre=new At(he.comparator);function jr(){return lre}const Y6=new At(he.comparator);function mm(...t){let e=Y6;for(const n of t)e=e.insert(n.key,n);return e}function Q6(t){let e=Y6;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Os(){return Km()}function X6(){return Km()}function Km(){return new Xa(t=>t.toString(),(t,e)=>t.isEqual(e))}const cre=new At(he.comparator),ure=new pt(he.comparator);function Oe(...t){let e=ure;for(const n of t)e=e.add(n);return e}const hre=new pt(Re);function qS(){return hre}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Np(e)?"-0":e}}function J6(t){return{integerValue:""+t}}function Z6(t,e){return y6(e)?J6(e):HS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(){this._=void 0}}function dre(t,e,n){return t instanceof cd?function(i,s){const a={fields:{[P6]:{stringValue:N6},[k6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&yw(s)&&(s=_w(s)),s&&(a.fields[D6]=s),{mapValue:a}}(n,e):t instanceof Gc?tU(t,e):t instanceof $c?nU(t,e):function(i,s){const a=eU(i,s),o=gD(a)+gD(i.Ae);return tx(a)&&tx(i.Ae)?J6(o):HS(i.serializer,o)}(t,e)}function fre(t,e,n){return t instanceof Gc?tU(t,e):t instanceof $c?nU(t,e):n}function eU(t,e){return t instanceof ud?function(r){return tx(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class cd extends ww{}class Gc extends ww{constructor(e){super(),this.elements=e}}function tU(t,e){const n=rU(e);for(const r of t.elements)n.some(i=>Gs(i,r))||n.push(r);return{arrayValue:{values:n}}}class $c extends ww{constructor(e){super(),this.elements=e}}function nU(t,e){let n=rU(e);for(const r of t.elements)n=n.filter(i=>!Gs(i,r));return{arrayValue:{values:n}}}class ud extends ww{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function gD(t){return Ut(t.integerValue||t.doubleValue)}function rU(t){return Vp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n){this.field=e,this.transform=n}}function mre(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Gc&&i instanceof Gc||r instanceof $c&&i instanceof $c?ed(r.elements,i.elements,Gs):r instanceof ud&&i instanceof ud?Gs(r.Ae,i.Ae):r instanceof cd&&i instanceof cd}(t.transform,e.transform)}class pre{constructor(e,n){this.version=e,this.transformResults=n}}class Ft{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ft}static exists(e){return new Ft(void 0,e)}static updateTime(e){return new Ft(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function n0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bw{}function iU(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ud(t.key,Ft.none()):new Ld(t.key,t.data,Ft.none());{const n=t.data,r=Kn.empty();let i=new pt(jt.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Ja(t.key,r,new Ur(i.toArray()),Ft.none())}}function gre(t,e,n){t instanceof Ld?function(i,s,a){const o=i.value.clone(),c=_D(i.fieldTransforms,s,a.transformResults);o.setAll(c),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Ja?function(i,s,a){if(!n0(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=_D(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(sU(i)),c.setAll(o),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Wm(t,e,n,r){return t instanceof Ld?function(s,a,o,c){if(!n0(s.precondition,a))return o;const h=s.value.clone(),f=vD(s.fieldTransforms,c,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ja?function(s,a,o,c){if(!n0(s.precondition,a))return o;const h=vD(s.fieldTransforms,c,a),f=a.data;return f.setAll(sU(s)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,a,o){return n0(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function yre(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=eU(r.transform,i||null);s!=null&&(n===null&&(n=Kn.empty()),n.set(r.field,s))}return n||null}function yD(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ed(r,i,(s,a)=>mre(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ld extends bw{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ja extends bw{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function sU(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function _D(t,e,n){const r=new Map;ve(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,fre(a,o,n[i]))}return r}function vD(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,dre(s,a,e))}return r}class Ud extends bw{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GS extends bw{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&gre(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Wm(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Wm(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=X6();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(i.key)?null:o;const c=iU(a,o);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Oe())}isEqual(e){return this.batchId===e.batchId&&ed(this.mutations,e.mutations,(n,r)=>yD(n,r))&&ed(this.baseMutations,e.baseMutations,(n,r)=>yD(n,r))}}class KS{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ve(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return cre}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new KS(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _re{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mn,Ze;function aU(t){switch(t){case Q.OK:return pe(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return pe(15467,{code:t})}}function oU(t){if(t===void 0)return cn("GRPC error has no .code"),Q.UNKNOWN;switch(t){case mn.OK:return Q.OK;case mn.CANCELLED:return Q.CANCELLED;case mn.UNKNOWN:return Q.UNKNOWN;case mn.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case mn.INTERNAL:return Q.INTERNAL;case mn.UNAVAILABLE:return Q.UNAVAILABLE;case mn.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case mn.NOT_FOUND:return Q.NOT_FOUND;case mn.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case mn.ABORTED:return Q.ABORTED;case mn.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case mn.DATA_LOSS:return Q.DATA_LOSS;default:return pe(39323,{code:t})}}(Ze=mn||(mn={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vre=new tl([4294967295,4294967295],0);function wD(t){const e=lU().encode(t),n=new e6;return n.update(e),new Uint8Array(n.digest())}function bD(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new tl([n,r],0),new tl([i,s],0)]}class YS{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new pm(`Invalid padding: ${n}`);if(r<0)throw new pm(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pm(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new pm(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=tl.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(tl.fromNumber(r)));return i.compare(vre)===1&&(i=new tl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=wD(e),[r,i]=bD(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new YS(s,i,n);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const n=wD(e),[r,i]=bD(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class pm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Sg.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ag(be.min(),i,new At(Re),jr(),Oe())}}class Sg{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Sg(r,n,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class cU{constructor(e,n){this.targetId=e,this.Ce=n}}class uU{constructor(e,n,r=en.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class TD{constructor(){this.ve=0,this.Fe=ED(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),n=Oe(),r=Oe();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:pe(38017,{changeType:s})}}),new Sg(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=ED()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wre{constructor(e){this.Ge=e,this.ze=new Map,this.je=jr(),this.Je=m_(),this.He=m_(),this.Ye=new At(Re)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(rv(s))if(r===0){const a=new he(s.path);this.et(n,a,Nt.newNoDocument(a,be.min()))}else ve(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const o=this.ut(e),c=o?this.ct(o,e,a):1;if(c!==0){this.it(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,o;try{a=Ga(r).toUint8Array()}catch(c){if(c instanceof C6)return Hs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new YS(a,i,s)}catch(c){return Hs(c instanceof pm?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&rv(o.target)){const c=new he(o.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,Nt.newNoDocument(c,e))}s.Be&&(n.set(a,s.ke()),s.qe())}});let r=Oe();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const i=new Ag(e,n,this.Ye,this.je,r);return this.je=jr(),this.Je=m_(),this.He=m_(),this.Ye=new At(Re),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new TD,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new pt(Re),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new pt(Re),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new TD),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function m_(){return new At(he.comparator)}function ED(){return new At(he.comparator)}const bre={asc:"ASCENDING",desc:"DESCENDING"},Tre={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ere={and:"AND",or:"OR"};class xre{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ax(t,e){return t.useProto3Json||vg(e)?e:{value:e}}function hd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hU(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Are(t,e){return hd(t,e.toTimestamp())}function hn(t){return ve(!!t,49232),be.fromTimestamp(function(n){const r=Ha(n);return new ct(r.seconds,r.nanos)}(t))}function QS(t,e){return ox(t,e).canonicalString()}function ox(t,e){const n=function(i){return new $e(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function dU(t){const e=$e.fromString(t);return ve(TU(e),10190,{key:e.toString()}),e}function Up(t,e){return QS(t.databaseId,e.path)}function Us(t,e){const n=dU(e);if(n.get(1)!==t.databaseId.projectId)throw new re(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(pU(n))}function fU(t,e){return QS(t.databaseId,e)}function mU(t){const e=dU(t);return e.length===4?$e.emptyPath():pU(e)}function lx(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pU(t){return ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function xD(t,e,n){return{name:Up(t,e),fields:n.value.mapValue.fields}}function gU(t,e,n){const r=Us(t,e.name),i=hn(e.updateTime),s=e.createTime?hn(e.createTime):be.min(),a=new Kn({mapValue:{fields:e.fields}}),o=Nt.newFoundDocument(r,i,s,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Sre(t,e){return"found"in e?function(r,i){ve(!!i.found,43571),i.found.name,i.found.updateTime;const s=Us(r,i.found.name),a=hn(i.found.updateTime),o=i.found.createTime?hn(i.found.createTime):be.min(),c=new Kn({mapValue:{fields:i.found.fields}});return Nt.newFoundDocument(s,a,o,c)}(t,e):"missing"in e?function(r,i){ve(!!i.missing,3894),ve(!!i.readTime,22933);const s=Us(r,i.missing),a=hn(i.readTime);return Nt.newNoDocument(s,a)}(t,e):pe(7234,{result:e})}function Ire(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:pe(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(ve(f===void 0||typeof f=="string",58123),en.fromBase64String(f||"")):(ve(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),en.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(h){const f=h.code===void 0?Q.UNKNOWN:oU(h.code);return new re(f,h.message||"")}(a);n=new uU(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Us(t,r.document.name),s=hn(r.document.updateTime),a=r.document.createTime?hn(r.document.createTime):be.min(),o=new Kn({mapValue:{fields:r.document.fields}}),c=Nt.newFoundDocument(i,s,a,o),h=r.targetIds||[],f=r.removedTargetIds||[];n=new r0(h,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Us(t,r.document),s=r.readTime?hn(r.readTime):be.min(),a=Nt.newNoDocument(i,s),o=r.removedTargetIds||[];n=new r0([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Us(t,r.document),s=r.removedTargetIds||[];n=new r0([],s,i,null)}else{if(!("filter"in e))return pe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new _re(i,s),o=r.targetId;n=new cU(o,a)}}return n}function jp(t,e){let n;if(e instanceof Ld)n={update:xD(t,e.key,e.value)};else if(e instanceof Ud)n={delete:Up(t,e.key)};else if(e instanceof Ja)n={update:xD(t,e.key,e.data),updateMask:kre(e.fieldMask)};else{if(!(e instanceof GS))return pe(16599,{Vt:e.type});n={verify:Up(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof cd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Gc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof $c)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ud)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw pe(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Are(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:pe(27497)}(t,e.precondition)),n}function cx(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Ft.updateTime(hn(s.updateTime)):s.exists!==void 0?Ft.exists(s.exists):Ft.none()}(e.currentDocument):Ft.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,o){let c=null;if("setToServerValue"in o)ve(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),c=new cd;else if("appendMissingElements"in o){const f=o.appendMissingElements.values||[];c=new Gc(f)}else if("removeAllFromArray"in o){const f=o.removeAllFromArray.values||[];c=new $c(f)}else"increment"in o?c=new ud(a,o.increment):pe(16584,{proto:o});const h=jt.fromServerFormat(o.fieldPath);return new xg(h,c)}(t,i)):[];if(e.update){e.update.name;const i=Us(t,e.update.name),s=new Kn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(c){const h=c.fieldPaths||[];return new Ur(h.map(f=>jt.fromServerFormat(f)))}(e.updateMask);return new Ja(i,s,a,n,r)}return new Ld(i,s,n,r)}if(e.delete){const i=Us(t,e.delete);return new Ud(i,n)}if(e.verify){const i=Us(t,e.verify);return new GS(i,n)}return pe(1463,{proto:e})}function Rre(t,e){return t&&t.length>0?(ve(e!==void 0,14353),t.map(n=>function(i,s){let a=i.updateTime?hn(i.updateTime):hn(s);return a.isEqual(be.min())&&(a=hn(s)),new pre(a,i.transformResults||[])}(n,e))):[]}function yU(t,e){return{documents:[fU(t,e.path)]}}function _U(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fU(t,i);const s=function(h){if(h.length!==0)return bU(mt.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(f=>function(g){return{field:rh(g.field),direction:Nre(g.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=ax(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:i}}function vU(t){let e=mU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ve(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){const g=wU(p);return g instanceof mt&&zS(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(g=>function(R){return new Lp(ih(R.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(g))}(n.orderBy));let o=null;n.limit&&(o=function(p){let g;return g=typeof p=="object"?p.value:p,vg(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,_=p.values||[];return new gl(_,g)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const g=!p.before,_=p.values||[];return new gl(_,g)}(n.endAt)),G6(e,i,a,s,o,"F",c,h)}function Cre(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wU(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ih(n.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ih(n.unaryFilter.field);return Qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ih(n.unaryFilter.field);return Qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ih(n.unaryFilter.field);return Qe.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}}(t):t.fieldFilter!==void 0?function(n){return Qe.create(ih(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return mt.create(n.compositeFilter.filters.map(r=>wU(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pe(1026)}}(n.compositeFilter.op))}(t):pe(30097,{filter:t})}function Nre(t){return bre[t]}function Pre(t){return Tre[t]}function Dre(t){return Ere[t]}function rh(t){return{fieldPath:t.canonicalString()}}function ih(t){return jt.fromServerFormat(t.fieldPath)}function bU(t){return t instanceof Qe?function(n){if(n.op==="=="){if(lD(n.value))return{unaryFilter:{field:rh(n.field),op:"IS_NAN"}};if(oD(n.value))return{unaryFilter:{field:rh(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lD(n.value))return{unaryFilter:{field:rh(n.field),op:"IS_NOT_NAN"}};if(oD(n.value))return{unaryFilter:{field:rh(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rh(n.field),op:Pre(n.op),value:n.value}}}(t):t instanceof mt?function(n){const r=n.getFilters().map(i=>bU(i));return r.length===1?r[0]:{compositeFilter:{op:Dre(n.op),filters:r}}}(t):pe(54877,{filter:t})}function kre(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function TU(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n,r,i,s=be.min(),a=be.min(),o=en.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new Ia(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ia(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(e){this.yt=e}}function Ore(t,e){let n;if(e.document)n=gU(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=he.fromSegments(e.noDocument.path),i=Wc(e.noDocument.readTime);n=Nt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return pe(56709);{const r=he.fromSegments(e.unknownDocument.path),i=Wc(e.unknownDocument.version);n=Nt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new ct(i[0],i[1]);return be.fromTimestamp(s)}(e.readTime)),n}function AD(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:av(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,a){return{name:Up(s,a.key),fields:a.data.value.mapValue.fields,updateTime:hd(s,a.version.toTimestamp()),createTime:hd(s,a.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Kc(e.version)};else{if(!e.isUnknownDocument())return pe(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Kc(e.version)}}return r}function av(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Kc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wc(t){const e=new ct(t.seconds,t.nanoseconds);return be.fromTimestamp(e)}function pc(t,e){const n=(e.baseMutations||[]).map(s=>cx(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>cx(t.yt,s)),i=ct.fromMillis(e.localWriteTimeMs);return new $S(e.batchId,i,n,r)}function gm(t){const e=Wc(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Wc(t.lastLimboFreeSnapshotVersion):be.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const a=s.documents.length;return ve(a===1,1966,{count:a}),Tr(Vd(mU(s.documents[0])))}(t.query):function(s){return Tr(vU(s))}(t.query),new Ia(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,en.fromBase64String(t.resumeToken))}function xU(t,e){const n=Kc(e.snapshotVersion),r=Kc(e.lastLimboFreeSnapshotVersion);let i;i=rv(e.target)?yU(t.yt,e.target):_U(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Hc(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function XS(t){const e=vU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sv(e,e.limit,"L"):e}function iE(t,e){return new WS(e.largestBatchId,cx(t.yt,e.overlayMutation))}function SD(t,e){const n=e.path.lastSegment();return[t,cr(e.path.popLast()),n]}function ID(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Kc(r.readTime),documentKey:cr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mre{getBundleMetadata(e,n){return RD(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Wc(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return RD(e).put(function(i){return{bundleId:i.id,createTime:Kc(hn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return CD(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:XS(s.bundledQuery),readTime:Wc(s.readTime)}}(r)})}saveNamedQuery(e,n){return CD(e).put(function(i){return{name:i.name,readTime:Kc(hn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function RD(t){return Rn(t,mw)}function CD(t){return Rn(t,pw)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Tw(e,r)}getOverlay(e,n){return Qf(e).get(SD(this.userId,n)).next(r=>r?iE(this.serializer,r):null)}getOverlays(e,n){const r=Os();return K.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,a)=>{const o=new WS(n,a);i.push(this.St(e,o))}),K.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(a=>i.add(cr(a.getCollectionPath())));const s=[];return i.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Qf(e).Z(X1,o))}),K.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Os(),s=cr(n),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Qf(e).J(X1,a).next(o=>{for(const c of o){const h=iE(this.serializer,c);i.set(h.getKey(),h)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Os();let a;const o=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Qf(e).ee({index:E6,range:o},(c,h,f)=>{const p=iE(this.serializer,h);s.size()<i||p.largestBatchId===a?(s.set(p.getKey(),p),a=p.largestBatchId):f.done()}).next(()=>s)}St(e,n){return Qf(e).put(function(i,s,a){const[o,c,h]=SD(s,a.mutation.key);return{userId:s,collectionPath:c,documentId:h,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:jp(i.yt,a.mutation)}}(this.serializer,this.userId,n))}}function Qf(t){return Rn(t,gw)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vre{bt(e){return Rn(e,LS)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?en.fromUint8Array(r):en.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ut(e.integerValue));else if("doubleValue"in e){const r=Ut(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Np(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Ha(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Ga(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?M6(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):vw(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):pe(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var a,o;const r=e.fields||{};this.Ft(n,53);const i=ad,s=((o=(a=r[i].arrayValue)==null?void 0:a.values)==null?void 0:o.length)||0;this.Ft(n,15),n.Mt(Ut(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),he.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}gc.Kt=new gc;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u=255;function Lre(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function ND(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const a=Lre(255&r[s]);if(i+=a,a!==8)break}return i}(t);return Math.ceil(e/8)}class Ure{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=ND(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=ND(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn($u),this.sn(255)}_n(){this.an($u),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===$u?(this.sn($u),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===$u?(this.an($u),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class jre{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Fre{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Xf{constructor(){this.cn=new Ure,this.ln=new jre(this.cn),this.hn=new Fre(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new yc(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:i0(this.En),directionalValue:i0(this.dn),orderedDocumentKey:i0(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function To(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=PD(t.En,e.En),n!==0?n:(n=PD(t.dn,e.dn),n!==0?n:he.comparator(t.In,e.In)))}function PD(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function i0(t){return B5()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function DD(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class kD{constructor(e){this.mn=new pt((n,r)=>jt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ve(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=W1(e);if(n!==void 0&&!this.wn(n))return!1;const r=uc(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const c=r[s];if(!this.Sn(o,c)||!this.bn(this.fn[a++],c))return!1}++s}for(;s<r.length;++s){const o=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new pt(jt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Q_(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Q_(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Q_(r.field,r.dir==="asc"?0:1)));return new Z0(Z0.UNKNOWN_ID,this.collectionId,n,Cp.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(t){var n,r;if(ve(t instanceof Qe||t instanceof mt,20012),t instanceof Qe){if(t instanceof H6){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(s=>Qe.create(t.field,"==",s)))||[];return mt.create(i,"or")}return t}const e=t.filters.map(i=>AU(i));return mt.create(e,t.op)}function zre(t){if(t.getFilters().length===0)return[];const e=dx(AU(t));return ve(SU(e),7391),ux(e)||hx(e)?[e]:e.getFilters()}function ux(t){return t instanceof Qe}function hx(t){return t instanceof mt&&zS(t)}function SU(t){return ux(t)||hx(t)||function(n){if(n instanceof mt&&nx(n)){for(const r of n.getFilters())if(!ux(r)&&!hx(r))return!1;return!0}return!1}(t)}function dx(t){if(ve(t instanceof Qe||t instanceof mt,34018),t instanceof Qe)return t;if(t.filters.length===1)return dx(t.filters[0]);const e=t.filters.map(r=>dx(r));let n=mt.create(e,t.op);return n=ov(n),SU(n)?n:(ve(n instanceof mt,64498),ve(ld(n),40251),ve(n.filters.length>1,57927),n.filters.reduce((r,i)=>JS(r,i)))}function JS(t,e){let n;return ve(t instanceof Qe||t instanceof mt,38388),ve(e instanceof Qe||e instanceof mt,25473),n=t instanceof Qe?e instanceof Qe?function(i,s){return mt.create([i,s],"and")}(t,e):OD(t,e):e instanceof Qe?OD(e,t):function(i,s){if(ve(i.filters.length>0&&s.filters.length>0,48005),ld(i)&&ld(s))return z6(i,s.getFilters());const a=nx(i)?i:s,o=nx(i)?s:i,c=a.filters.map(h=>JS(h,o));return mt.create(c,"or")}(t,e),ov(n)}function OD(t,e){if(ld(e))return z6(e,t.getFilters());{const n=e.filters.map(r=>JS(t,r));return mt.create(n,"or")}}function ov(t){if(ve(t instanceof Qe||t instanceof mt,11850),t instanceof Qe)return t;const e=t.getFilters();if(e.length===1)return ov(e[0]);if(j6(t))return t;const n=e.map(i=>ov(i)),r=[];return n.forEach(i=>{i instanceof Qe?r.push(i):i instanceof mt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:mt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bre{constructor(){this.Cn=new ZS}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(gi.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(gi.min())}updateCollectionGroup(e,n,r){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class ZS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new pt($e.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pt($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD="IndexedDbIndexManager",p_=new Uint8Array(0);class qre{constructor(e,n){this.databaseId=n,this.vn=new ZS,this.Fn=new Xa(r=>Hc(r),(r,i)=>bg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:r,parent:cr(i)};return VD(e).put(s)}return K.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[l6(n),""],!1,!0);return VD(e).J(i).next(s=>{for(const a of s){if(a.collectionId!==n)break;r.push(ks(a.parent))}return r})}addFieldIndex(e,n){const r=Jf(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const a=Wu(e);return s.next(o=>{a.put(ID(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Jf(e),i=Wu(e),s=Ku(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Jf(e),r=Ku(e),i=Wu(e);return n.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,n){return K.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new kD(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Ku(e);let i=!0;const s=new Map;return K.forEach(this.Mn(n),a=>this.xn(e,a).next(o=>{i&&(i=!!o),s.set(a,o)})).next(()=>{if(i){let a=Oe();const o=[];return K.forEach(s,(c,h)=>{oe(MD,`Using index ${function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(O=>`${O.fieldPath}:${O.kind}`).join(",")}`}(c)} to execute ${Hc(n)}`);const f=function(E,O){const j=W1(O);if(j===void 0)return null;for(const q of iv(E,j.fieldPath))switch(q.op){case"array-contains-any":return q.value.arrayValue.values||[];case"array-contains":return[q.value]}return null}(h,c),p=function(E,O){const j=new Map;for(const q of uc(O))for(const S of iv(E,q.fieldPath))switch(S.op){case"==":case"in":j.set(q.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return j.set(q.fieldPath.canonicalString(),S.value),Array.from(j.values())}return null}(h,c),g=function(E,O){const j=[];let q=!0;for(const S of uc(O)){const C=S.kind===0?fD(E,S.fieldPath,E.startAt):mD(E,S.fieldPath,E.startAt);j.push(C.value),q&&(q=C.inclusive)}return new gl(j,q)}(h,c),_=function(E,O){const j=[];let q=!0;for(const S of uc(O)){const C=S.kind===0?mD(E,S.fieldPath,E.endAt):fD(E,S.fieldPath,E.endAt);j.push(C.value),q&&(q=C.inclusive)}return new gl(j,q)}(h,c),R=this.On(c,h,g),N=this.On(c,h,_),A=this.Nn(c,h,p),b=this.Bn(c.indexId,f,R,g.inclusive,N,_.inclusive,A);return K.forEach(b,T=>r.Y(T,n.limit).next(E=>{E.forEach(O=>{const j=he.fromSegments(O.documentKey);a.has(j)||(a=a.add(j),o.push(j))})}))}).next(()=>o)}return K.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=zre(mt.create(e.filters,"and")).map(r=>ix(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,a,o){const c=(n!=null?n.length:1)*Math.max(r.length,s.length),h=c/(n!=null?n.length:1),f=[];for(let p=0;p<c;++p){const g=n?this.Ln(n[p/h]):p_,_=this.kn(e,g,r[p%h],i),R=this.qn(e,g,s[p%h],a),N=o.map(A=>this.kn(e,g,A,!0));f.push(...this.createRange(_,R,N))}return f}kn(e,n,r,i){const s=new yc(e,he.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new yc(e,he.empty(),n,r);return i?s.An():s}xn(e,n){const r=new kD(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let a=null;for(const o of s)r.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,n){let r=2;const i=this.Mn(n);return K.forEach(i,s=>this.xn(e,s).next(a=>{a?r!==0&&a.fields.length<function(c){let h=new pt(jt.comparator),f=!1;for(const p of c.filters)for(const g of p.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:h=h.add(g.field));for(const p of c.orderBy)p.field.isKeyField()||(h=h.add(p.field));return h.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(n)&&i.length>1&&r===2?1:r)}Qn(e,n){const r=new Xf;for(const i of uc(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);gc.Kt.Dt(s,a)}return r.un()}Ln(e){const n=new Xf;return gc.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new Xf;return gc.Kt.Dt(qc(this.databaseId,n),r.Pn(function(s){const a=uc(s);return a.length===0?0:a[a.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new Xf);let s=0;for(const a of uc(e)){const o=r[s++];for(const c of i)if(this.Un(n,a.fieldPath)&&Vp(o))i=this.Kn(i,a,o);else{const h=c.Pn(a.kind);gc.Kt.Dt(o,h)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const o of i){const c=new Xf;c.seed(o.un()),gc.Kt.Dt(a,c.Pn(n.kind)),s.push(c)}return s}Un(e,n){return!!e.filters.find(r=>r instanceof Qe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Jf(e),i=Wu(e);return(n?r.J(Q1,IDBKeyRange.bound(n,n)):r.J()).next(s=>{const a=[];return K.forEach(s,o=>i.get([o.indexId,this.uid]).next(c=>{a.push(function(f,p){const g=p?new Cp(p.sequenceNumber,new gi(Wc(p.readTime),new he(ks(p.documentKey)),p.largestBatchId)):Cp.empty(),_=f.fields.map(([R,N])=>new Q_(jt.fromServerFormat(R),N));return new Z0(f.indexId,f.collectionGroup,_,g)}(o,c))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Re(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Jf(e),s=Wu(e);return this.Gn(e).next(a=>i.J(Q1,IDBKeyRange.bound(n,n)).next(o=>K.forEach(o,c=>s.put(ID(c.indexId,this.uid,a,r)))))}updateIndexEntries(e,n){const r=new Map;return K.forEach(n,(i,s)=>{const a=r.get(i.collectionGroup);return(a?K.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next(o=>(r.set(i.collectionGroup,o),K.forEach(o,c=>this.zn(e,i,c).next(h=>{const f=this.jn(s,c);return h.isEqual(f)?K.resolve():this.Jn(e,s,c,h,f)}))))})}Hn(e,n,r,i){return Ku(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return Ku(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=Ku(e);let s=new pt(To);return i.ee({index:T6,range:IDBKeyRange.only([r.indexId,this.uid,i0(this.$n(r,n))])},(a,o)=>{s=s.add(new yc(r.indexId,n,DD(o.arrayValue),DD(o.directionalValue)))}).next(()=>s)}jn(e,n){let r=new pt(To);const i=this.Qn(n,e);if(i==null)return r;const s=W1(n);if(s!=null){const a=e.data.field(s.fieldPath);if(Vp(a))for(const o of a.arrayValue.values||[])r=r.add(new yc(n.indexId,e.key,this.Ln(o),i))}else r=r.add(new yc(n.indexId,e.key,p_,i));return r}Jn(e,n,r,i,s){oe(MD,"Updating index entries for document '%s'",n.key);const a=[];return function(c,h,f,p,g){const _=c.getIterator(),R=h.getIterator();let N=Gu(_),A=Gu(R);for(;N||A;){let b=!1,T=!1;if(N&&A){const E=f(N,A);E<0?T=!0:E>0&&(b=!0)}else N!=null?T=!0:b=!0;b?(p(A),A=Gu(R)):T?(g(N),N=Gu(_)):(N=Gu(_),A=Gu(R))}}(i,s,To,o=>{a.push(this.Hn(e,n,r,o))},o=>{a.push(this.Yn(e,n,r,o))}),K.waitFor(a)}Gn(e){let n=1;return Wu(e).ee({index:b6,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((a,o)=>To(a,o)).filter((a,o,c)=>!o||To(a,c[o-1])!==0);const i=[];i.push(e);for(const a of r){const o=To(a,e),c=To(a,n);if(o===0)i[0]=e.An();else if(o>0&&c<0)i.push(a),i.push(a.An());else if(c>0)break}i.push(n);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const o=i[a].Vn(this.uid,p_,he.empty()),c=i[a+1].Vn(this.uid,p_,he.empty());s.push(IDBKeyRange.bound(o,c))}return s}Zn(e,n){return To(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(LD)}getMinOffset(e,n){return K.mapArray(this.Mn(n),r=>this.xn(e,r).next(i=>i||pe(44426))).next(LD)}}function VD(t){return Rn(t,kp)}function Ku(t){return Rn(t,Gm)}function Jf(t){return Rn(t,VS)}function Wu(t){return Rn(t,Hm)}function LD(t){ve(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;kS(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new gi(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},IU=41943040;class sr{static withCacheSize(e){return new sr(e,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RU(t,e,n){const r=t.store(rs),i=t.store(nd),s=[],a=IDBKeyRange.only(n.batchId);let o=0;const c=r.ee({range:a},(f,p,g)=>(o++,g.delete()));s.push(c.next(()=>{ve(o===1,47070,{batchId:n.batchId})}));const h=[];for(const f of n.mutations){const p=_6(e,f.key.path,n.batchId);s.push(i.delete(p)),h.push(f.key)}return K.waitFor(s).next(()=>h)}function lv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw pe(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr.DEFAULT_COLLECTION_PERCENTILE=10,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sr.DEFAULT=new sr(IU,sr.DEFAULT_COLLECTION_PERCENTILE,sr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sr.DISABLED=new sr(-1,0,0);class Ew{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){ve(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new Ew(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Eo(e).ee({index:wc,range:r},(i,s,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=sh(e),a=Eo(e);return a.add({}).next(o=>{ve(typeof o=="number",49019);const c=new $S(o,n,r,i),h=function(_,R,N){const A=N.baseMutations.map(T=>jp(_.yt,T)),b=N.mutations.map(T=>jp(_.yt,T));return{userId:R,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:A,mutations:b}}(this.serializer,this.userId,c),f=[];let p=new pt((g,_)=>Re(g.canonicalString(),_.canonicalString()));for(const g of i){const _=_6(this.userId,g.key.path,o);p=p.add(g.key.path.popLast()),f.push(a.put(h)),f.push(s.put(_,Ene))}return p.forEach(g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Xn[o]=c.keys()}),K.waitFor(f).next(()=>c)})}lookupMutationBatch(e,n){return Eo(e).get(n).next(r=>r?(ve(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),pc(this.serializer,r)):null)}er(e,n){return this.Xn[n]?K.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Eo(e).ee({index:wc,range:i},(a,o,c)=>{o.userId===this.userId&&(ve(o.batchId>=r,47524,{tr:r}),s=pc(this.serializer,o)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=nl;return Eo(e).ee({index:wc,range:n,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,nl],[this.userId,Number.POSITIVE_INFINITY]);return Eo(e).J(wc,n).next(r=>r.map(i=>pc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=X_(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return sh(e).ee({range:i},(a,o,c)=>{const[h,f,p]=a,g=ks(f);if(h===this.userId&&n.path.isEqual(g))return Eo(e).get(p).next(_=>{if(!_)throw pe(61480,{nr:a,batchId:p});ve(_.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:_.userId,batchId:p}),s.push(pc(this.serializer,_))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pt(Re);const i=[];return n.forEach(s=>{const a=X_(this.userId,s.path),o=IDBKeyRange.lowerBound(a),c=sh(e).ee({range:o},(h,f,p)=>{const[g,_,R]=h,N=ks(_);g===this.userId&&s.path.isEqual(N)?r=r.add(R):p.done()});i.push(c)}),K.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=X_(this.userId,r),a=IDBKeyRange.lowerBound(s);let o=new pt(Re);return sh(e).ee({range:a},(c,h,f)=>{const[p,g,_]=c,R=ks(g);p===this.userId&&r.isPrefixOf(R)?R.length===i&&(o=o.add(_)):f.done()}).next(()=>this.rr(e,o))}rr(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Eo(e).get(s).next(a=>{if(a===null)throw pe(35274,{batchId:s});ve(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(pc(this.serializer,a))}))}),K.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return RU(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),K.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return K.resolve();const r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return sh(e).ee({range:r},(s,a,o)=>{if(s[0]===this.userId){const c=ks(s[1]);i.push(c)}else o.done()}).next(()=>{ve(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,n){return CU(e,this.userId,n)}_r(e){return NU(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:nl,lastStreamToken:""})}}function CU(t,e,n){const r=X_(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return sh(t).ee({range:s,X:!0},(o,c,h)=>{const[f,p,g]=o;f===e&&p===i&&(a=!0),h.done()}).next(()=>a)}function Eo(t){return Rn(t,rs)}function sh(t){return Rn(t,nd)}function NU(t){return Rn(t,Pp)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Yc(0)}static cr(){return new Yc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hre{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new Yc(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>be.fromTimestamp(new ct(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Yu(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(ve(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Yu(e).ee((a,o)=>{const c=gm(o);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>K.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Yu(e).ee((r,i)=>{const s=gm(i);n(s)})}lr(e){return jD(e).get(nv).next(n=>(ve(n!==null,2888),n))}hr(e,n){return jD(e).put(nv,n)}Pr(e,n){return Yu(e).put(xU(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Hc(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Yu(e).ee({range:i,index:w6},(a,o,c)=>{const h=gm(o);bg(n,h.target)&&(s=h,c.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Mo(e);return n.forEach(a=>{const o=cr(a.path);i.push(s.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,a))}),K.waitFor(i)}removeMatchingKeys(e,n,r){const i=Mo(e);return K.forEach(n,s=>{const a=cr(s.path);return K.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Mo(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Mo(e);let s=Oe();return i.ee({range:r,X:!0},(a,o,c)=>{const h=ks(a[1]),f=new he(h);s=s.add(f)}).next(()=>s)}containsKey(e,n){const r=cr(n.path),i=IDBKeyRange.bound([r],[l6(r)],!1,!0);let s=0;return Mo(e).ee({index:MS,X:!0,range:i},([a,o],c,h)=>{a!==0&&(s++,h.done())}).next(()=>s>0)}At(e,n){return Yu(e).get(n).next(r=>r?gm(r):null)}}function Yu(t){return Rn(t,rd)}function jD(t){return Rn(t,Dc)}function Mo(t){return Rn(t,id)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="LruGarbageCollector",Gre=1048576;function zD([t,e],[n,r]){const i=Re(t,n);return i===0?Re(e,r):i}class $re{constructor(e){this.Ir=e,this.buffer=new pt(zD),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();zD(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class PU{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(FD,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Il(n)?oe(FD,"Ignoring IndexedDB error during garbage collection: ",n):await Sl(n)}await this.Vr(3e5)})}}class Kre{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return K.resolve(Lr.ce);const r=new $re(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(UD)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UD):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,a,o,c,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,a=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,o=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),th()<=ze.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(c-o)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-f}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function DU(t,e){return new Kre(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wre{constructor(e,n){this.db=e,this.garbageCollector=DU(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,i)=>n(i))}addReference(e,n,r){return g_(e,r)}removeReference(e,n,r){return g_(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return g_(e,n)}br(e,n){return function(i,s){let a=!1;return NU(i).te(o=>CU(i,o,s).next(c=>(c&&(a=!0),K.resolve(!c)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(a,o)=>{if(o<=n){const c=this.br(e,a).next(h=>{if(!h)return s++,r.getEntry(e,a).next(()=>(r.removeEntry(a,be.min()),Mo(e).delete(function(p){return[0,cr(p.path)]}(a))))});i.push(c)}}).next(()=>K.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return g_(e,n)}Sr(e,n){const r=Mo(e);let i,s=Lr.ce;return r.ee({index:MS},([a,o],{path:c,sequenceNumber:h})=>{a===0?(s!==Lr.ce&&n(new he(ks(i)),s),s=h,i=c):s=Lr.ce}).next(()=>{s!==Lr.ce&&n(new he(ks(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function g_(t,e){return Mo(t).put(function(r,i){return{targetId:0,path:cr(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(){this.changes=new Xa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?K.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yre{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return rc(e).put(r)}removeEntry(e,n,r){return rc(e).delete(function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],av(a),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=Nt.newInvalidDocument(n);return rc(e).ee({index:J_,range:IDBKeyRange.only(Zf(n))},(i,s)=>{r=this.Cr(n,s)}).next(()=>r)}vr(e,n){let r={size:0,document:Nt.newInvalidDocument(n)};return rc(e).ee({index:J_,range:IDBKeyRange.only(Zf(n))},(i,s)=>{r={document:this.Cr(n,s),size:lv(s)}}).next(()=>r)}getEntries(e,n){let r=jr();return this.Fr(e,n,(i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)}).next(()=>r)}Mr(e,n){let r=jr(),i=new At(he.comparator);return this.Fr(e,n,(s,a)=>{const o=this.Cr(s,a);r=r.insert(s,o),i=i.insert(s,lv(a))}).next(()=>({documents:r,Or:i}))}Fr(e,n,r){if(n.isEmpty())return K.resolve();let i=new pt(HD);n.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(Zf(i.first()),Zf(i.last())),a=i.getIterator();let o=a.getNext();return rc(e).ee({index:J_,range:s},(c,h,f)=>{const p=he.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;o&&HD(o,p)<0;)r(o,null),o=a.getNext();o&&o.isEqual(p)&&(r(o,h),o=a.hasNext()?a.getNext():null),o?f.j(Zf(o)):f.done()}).next(()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const a=n.path,o=[a.popLast().toArray(),a.lastSegment(),av(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return rc(e).J(IDBKeyRange.bound(o,c,!0)).next(h=>{s==null||s.incrementDocumentReadCount(h.length);let f=jr();for(const p of h){const g=this.Cr(he.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(Eg(n,g)||i.has(g.key))&&(f=f.insert(g.key,g))}return f})}getAllFromCollectionGroup(e,n,r,i){let s=jr();const a=qD(n,r),o=qD(n,gi.max());return rc(e).ee({index:v6,range:IDBKeyRange.bound(a,o,!0)},(c,h,f)=>{const p=this.Cr(he.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(p.key,p),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new Qre(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return BD(e).get(Y1).next(n=>(ve(!!n,20021),n))}Dr(e,n){return BD(e).put(Y1,n)}Cr(e,n){if(n){const r=Ore(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(be.min())))return r}return Nt.newInvalidDocument(e)}}function OU(t){return new Yre(t)}class Qre extends kU{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Xa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new pt((s,a)=>Re(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const c=AD(this.Nr.serializer,a);i=i.add(s.path.popLast());const h=lv(c);r+=h-o.size,n.push(this.Nr.addEntry(e,s,c))}else if(r-=o.size,this.trackRemovals){const c=AD(this.Nr.serializer,a.convertToNoDocument(be.min()));n.push(this.Nr.addEntry(e,s,c))}}),i.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,r)),K.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:i})=>(i.forEach((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})}),r))}}function BD(t){return Rn(t,Dp)}function rc(t){return Rn(t,tv)}function Zf(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qD(t,e){const n=e.documentKey.path.toArray();return[t,av(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function HD(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Re(n[s],r[s]),i)return i;return i=Re(n.length,r.length),i||(i=Re(n[n.length-2],r[r.length-2]),i||Re(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xre{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Wm(r.mutation,i,Ur.empty(),ct.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Oe()){const i=Os();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=mm();return s.forEach((o,c)=>{a=a.insert(o,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Os();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Oe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,i){let s=jr();const a=Km(),o=function(){return Km()}();return n.forEach((c,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof Ja)?s=s.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),Wm(f.mutation,h,f.mutation.getFieldMask(),ct.now())):a.set(h.key,Ur.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((h,f)=>a.set(h,f)),n.forEach((h,f)=>o.set(h,new Xre(f,a.get(h)??null))),o))}recalculateAndSaveOverlays(e,n){const r=Km();let i=new At((a,o)=>a-o),s=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let f=r.get(c)||Ur.empty();f=o.applyToLocalView(h,f),r.set(c,f);const p=(i.get(o.batchId)||Oe()).add(c);i=i.insert(o.batchId,p)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),h=c.key,f=c.value,p=X6();f.forEach(g=>{if(!s.has(g)){const _=iU(n.get(g),r.get(g));_!==null&&p.set(g,_),s=s.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,p))}return K.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return he.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):K.resolve(Os());let o=td,c=s;return a.next(h=>K.forEach(h,(f,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),s.get(f)?K.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{c=c.insert(f,g)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,c,h,Oe())).next(f=>({batchId:o,changes:Q6(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(r=>{let i=mm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=mm();return this.indexManager.getCollectionParents(e,s).next(o=>K.forEach(o,c=>{const h=function(p,g){return new Qa(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((p,g)=>{a=a.insert(p,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((c,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,Nt.newInvalidDocument(f)))});let o=mm();return a.forEach((c,h)=>{const f=s.get(c);f!==void 0&&Wm(f.mutation,h,Ur.empty(),ct.now()),Eg(n,h)&&(o=o.insert(c,h))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jre{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:hn(i.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:XS(i.bundledQuery),readTime:hn(i.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zre{constructor(){this.overlays=new At(he.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Os();return K.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),K.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),K.resolve()}getOverlaysForCollection(e,n,r){const i=Os(),s=n.length+1,a=new he(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const c=o.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return K.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new At((h,f)=>h-f);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=Os(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const o=Os(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,f)=>o.set(h,f)),!(o.size()>=i)););return K.resolve(o)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new WS(n,r));let s=this.qr.get(n);s===void 0&&(s=Oe(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eie{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.Qr=new pt(kn.$r),this.Ur=new pt(kn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new kn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new kn(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new he(new $e([])),r=new kn(n,e),i=new kn(n,e+1),s=[];return this.Ur.forEachInRange([r,i],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new he(new $e([])),r=new kn(n,e),i=new kn(n,e+1);let s=Oe();return this.Ur.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new kn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class kn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return he.comparator(e.key,n.key)||Re(e.Yr,n.Yr)}static Kr(e,n){return Re(e.Yr,n.Yr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tie{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new pt(kn.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new $S(s,n,r,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new kn(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return K.resolve(a)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return K.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?nl:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new kn(n,0),i=new kn(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],a=>{const o=this.Xr(a.Yr);s.push(o)}),K.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pt(Re);return n.forEach(i=>{const s=new kn(i,0),a=new kn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{r=r.add(o.Yr)})}),K.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;he.isDocumentKey(s)||(s=s.child(""));const a=new kn(new he(s),0);let o=new pt(Re);return this.Zr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(o=o.add(c.Yr)),!0)},a),K.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ve(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return K.forEach(n.mutations,i=>{const s=new kn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new kn(n,0),i=this.Zr.firstAfterOrEqual(r);return K.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nie{constructor(e){this.ri=e,this.docs=function(){return new At(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return K.resolve(r?r.document.mutableCopy():Nt.newInvalidDocument(n))}getEntries(e,n){let r=jr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Nt.newInvalidDocument(i))}),K.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=jr();const a=n.path,o=new he(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:h,value:{document:f}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||kS(f6(f),r)<=0||(i.has(f.key)||Eg(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return K.resolve(s)}getAllFromCollectionGroup(e,n,r,i){pe(9500)}ii(e,n){return K.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new rie(this)}getSize(e){return K.resolve(this.size)}}class rie extends kU{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iie{constructor(e){this.persistence=e,this.si=new Xa(n=>Hc(n),bg),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.oi=0,this._i=new eI,this.targetCount=0,this.ai=Yc.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Yc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),K.waitFor(s).next(()=>i)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return K.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),K.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),K.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return K.resolve(r)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,n){this.ui={},this.overlays={},this.ci=new Lr(0),this.li=!1,this.li=!0,this.hi=new eie,this.referenceDelegate=e(this),this.Pi=new iie(this),this.indexManager=new Bre,this.remoteDocumentCache=function(i){return new nie(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new EU(n),this.Ii=new Jre(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Zre,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new tie(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const i=new sie(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return K.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class sie extends p6{constructor(e){super(),this.currentSequenceNumber=e}}class xw{constructor(e){this.persistence=e,this.Ri=new eI,this.Vi=null}static mi(e){return new xw(e)}get fi(){if(this.Vi)return this.Vi;throw pe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),K.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,r=>{const i=he.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,be.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class cv{constructor(e,n){this.persistence=e,this.pi=new Xa(r=>cr(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=DU(this,n)}static mi(e,n){return new cv(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?K.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,a=>this.br(e,a,n).next(o=>{o||(r++,s.removeEntry(a,be.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),K.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=e0(e.data.value)),n}br(e,n,r){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return K.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aie{constructor(e){this.serializer=e}k(e,n,r,i){const s=new fw("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore(wg)}(e),function(c){c.createObjectStore(Pp,{keyPath:Tne}),c.createObjectStore(rs,{keyPath:tD,autoIncrement:!0}).createIndex(wc,nD,{unique:!0}),c.createObjectStore(nd)}(e),GD(e),function(c){c.createObjectStore(hc)}(e));let a=K.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore(id),c.deleteObjectStore(rd),c.deleteObjectStore(Dc)}(e),GD(e)),a=a.next(()=>function(c){const h=c.store(Dc),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:be.min().toTimestamp(),targetCount:0};return h.put(nv,f)}(s))),r<4&&i>=4&&(r!==0&&(a=a.next(()=>function(c,h){return h.store(rs).J().next(p=>{c.deleteObjectStore(rs),c.createObjectStore(rs,{keyPath:tD,autoIncrement:!0}).createIndex(wc,nD,{unique:!0});const g=h.store(rs),_=p.map(R=>g.put(R));return K.waitFor(_)})}(e,s))),a=a.next(()=>{(function(c){c.createObjectStore(sd,{keyPath:Pne})})(e)})),r<5&&i>=5&&(a=a.next(()=>this.yi(s))),r<6&&i>=6&&(a=a.next(()=>(function(c){c.createObjectStore(Dp)}(e),this.wi(s)))),r<7&&i>=7&&(a=a.next(()=>this.Si(s))),r<8&&i>=8&&(a=a.next(()=>this.bi(e,s))),r<9&&i>=9&&(a=a.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(a=a.next(()=>this.Di(s))),r<11&&i>=11&&(a=a.next(()=>{(function(c){c.createObjectStore(mw,{keyPath:Dne})})(e),function(c){c.createObjectStore(pw,{keyPath:kne})}(e)})),r<12&&i>=12&&(a=a.next(()=>{(function(c){const h=c.createObjectStore(gw,{keyPath:Fne});h.createIndex(X1,zne,{unique:!1}),h.createIndex(E6,Bne,{unique:!1})})(e)})),r<13&&i>=13&&(a=a.next(()=>function(c){const h=c.createObjectStore(tv,{keyPath:xne});h.createIndex(J_,Ane),h.createIndex(v6,Sne)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(hc))),r<14&&i>=14&&(a=a.next(()=>this.Fi(e,s))),r<15&&i>=15&&(a=a.next(()=>function(c){c.createObjectStore(VS,{keyPath:One,autoIncrement:!0}).createIndex(Q1,Mne,{unique:!1}),c.createObjectStore(Hm,{keyPath:Vne}).createIndex(b6,Lne,{unique:!1}),c.createObjectStore(Gm,{keyPath:Une}).createIndex(T6,jne,{unique:!1})}(e))),r<16&&i>=16&&(a=a.next(()=>{n.objectStore(Hm).clear()}).next(()=>{n.objectStore(Gm).clear()})),r<17&&i>=17&&(a=a.next(()=>{(function(c){c.createObjectStore(LS,{keyPath:qne})})(e)})),r<18&&i>=18&&B5()&&(a=a.next(()=>{n.objectStore(Hm).clear()}).next(()=>{n.objectStore(Gm).clear()})),a}wi(e){let n=0;return e.store(hc).ee((r,i)=>{n+=lv(i)}).next(()=>{const r={byteSize:n};return e.store(Dp).put(Y1,r)})}yi(e){const n=e.store(Pp),r=e.store(rs);return n.J().next(i=>K.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,nl],[s.userId,s.lastAcknowledgedBatchId]);return r.J(wc,a).next(o=>K.forEach(o,c=>{ve(c.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const h=pc(this.serializer,c);return RU(e,s.userId,h).next(()=>{})}))}))}Si(e){const n=e.store(id),r=e.store(hc);return e.store(Dc).get(nv).next(i=>{const s=[];return r.ee((a,o)=>{const c=new $e(a),h=function(p){return[0,cr(p)]}(c);s.push(n.get(h).next(f=>f?K.resolve():(p=>n.put({targetId:0,path:cr(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>K.waitFor(s))})}bi(e,n){e.createObjectStore(kp,{keyPath:Nne});const r=n.store(kp),i=new ZS,s=a=>{if(i.add(a)){const o=a.lastSegment(),c=a.popLast();return r.put({collectionId:o,parent:cr(c)})}};return n.store(hc).ee({X:!0},(a,o)=>{const c=new $e(a);return s(c.popLast())}).next(()=>n.store(nd).ee({X:!0},([a,o,c],h)=>{const f=ks(o);return s(f.popLast())}))}Di(e){const n=e.store(rd);return n.ee((r,i)=>{const s=gm(i),a=xU(this.serializer,s);return n.put(a)})}Ci(e,n){const r=n.store(hc),i=[];return r.ee((s,a)=>{const o=n.store(tv),c=function(p){return p.document?new he($e.fromString(p.document.name).popFirst(5)):p.noDocument?he.fromSegments(p.noDocument.path):p.unknownDocument?he.fromSegments(p.unknownDocument.path):pe(36783)}(a).path.toArray(),h={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(h))}).next(()=>K.waitFor(i))}Fi(e,n){const r=n.store(rs),i=OU(this.serializer),s=new tI(xw.mi,this.serializer.yt);return r.J().next(a=>{const o=new Map;return a.forEach(c=>{let h=o.get(c.userId)??Oe();pc(this.serializer,c).keys().forEach(f=>h=h.add(f)),o.set(c.userId,h)}),K.forEach(o,(c,h)=>{const f=new Mn(h),p=Tw.wt(this.serializer,f),g=s.getIndexManager(f),_=Ew.wt(f,this.serializer,g,s.referenceDelegate);return new MU(i,_,p,g).recalculateAndSaveOverlaysForDocumentKeys(new J1(n,Lr.ce),c).next()})})}}function GD(t){t.createObjectStore(id,{keyPath:Rne}).createIndex(MS,Cne,{unique:!0}),t.createObjectStore(rd,{keyPath:"targetId"}).createIndex(w6,Ine,{unique:!0}),t.createObjectStore(Dc)}const xo="IndexedDbPersistence",sE=18e5,aE=5e3,oE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",VU="main";class nI{constructor(e,n,r,i,s,a,o,c,h,f,p=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=a,this.document=o,this.xi=h,this.Oi=f,this.Ni=p,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=g=>Promise.resolve(),!nI.v())throw new re(Q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Wre(this,i),this.$i=n+VU,this.serializer=new EU(c),this.Ui=new Ls(this.$i,this.Ni,new aie(this.serializer)),this.hi=new Vre,this.Pi=new Hre(this.referenceDelegate,this.serializer),this.remoteDocumentCache=OU(this.serializer),this.Ii=new Mre,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,f===!1&&cn(xo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new re(Q.FAILED_PRECONDITION,oE);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Lr(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>y_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Il(e))return oe(xo,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return oe(xo,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return em(e).get(Hu).next(n=>K.resolve(this.es(n)))}ts(e){return y_(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,sE)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Rn(n,sd);return r.J().next(i=>{const s=this.ss(i,sE),a=i.filter(o=>s.indexOf(o)===-1);return K.forEach(a,o=>r.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?K.resolve(!0):em(e).get(Hu).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,aE)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new re(Q.FAILED_PRECONDITION,oE);return!1}}return!(!this.networkEnabled||!this.inForeground)||y_(e).J().next(r=>this.ss(r,aE).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&oe(xo,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[wg,sd],e=>{const n=new J1(e,Lr.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>y_(e).J().next(n=>this.ss(n,sE).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Ew.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qre(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Tw.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){oe(xo,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(c){return c===18?$ne:c===17?I6:c===16?Gne:c===15?US:c===14?S6:c===13?A6:c===12?Hne:c===11?x6:void pe(60245)}(this.Ni);let a;return this.Ui.runTransaction(e,i,s,o=>(a=new J1(o,this.ci?this.ci.next():Lr.ce),n==="readwrite-primary"?this.Hi(a).next(c=>!!c||this.Yi(a)).next(c=>{if(!c)throw cn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new re(Q.FAILED_PRECONDITION,m6);return r(a)}).next(c=>this.Xi(a).next(()=>c)):this.Is(a).next(()=>r(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Is(e){return em(e).get(Hu).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,aE)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new re(Q.FAILED_PRECONDITION,oE)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return em(e).put(Hu,n)}static v(){return Ls.v()}Zi(e){const n=em(e);return n.get(Hu).next(r=>this.es(r)?(oe(xo,"Releasing primary lease."),n.delete(Hu)):K.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(cn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;z5()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return oe(xo,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return cn(xo,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){cn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function em(t){return Rn(t,wg)}function y_(t){return Rn(t,sd)}function rI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Oe(),i=Oe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new iI(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oie{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return z5()?8:g6(tt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new oie;return this.Ss(e,n,a).next(o=>{if(s.result=o,this.Vs)return this.bs(e,n,a,o.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(th()<=ze.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",nh(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(th()<=ze.DEBUG&&oe("QueryEngine","Query:",nh(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(th()<=ze.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",nh(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tr(n))):K.resolve())}ys(e,n){if(pD(n))return K.resolve(null);let r=Tr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=sv(n,null,"F"),r=Tr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=Oe(...s);return this.ps.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.Ds(n,o);return this.Cs(n,h,a,c.readTime)?this.ys(e,sv(n,null,"F")):this.vs(e,h,n,c)}))})))}ws(e,n,r,i){return pD(n)||i.isEqual(be.min())?K.resolve(null):this.ps.getDocuments(e,r).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,r,i)?K.resolve(null):(th()<=ze.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),nh(n)),this.vs(e,a,n,d6(i,td)).next(o=>o))})}Ds(e,n){let r=new pt(W6(e));return n.forEach((i,s)=>{Eg(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return th()<=ze.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",nh(n)),this.ps.getDocumentsMatchingQuery(e,n,gi.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="LocalStore",lie=3e8;class cie{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new At(Re),this.xs=new Xa(s=>Hc(s),bg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MU(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function UU(t,e,n,r){return new cie(t,e,n,r)}async function jU(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let c=Oe();for(const h of i){a.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}for(const h of s){o.push(h.batchId);for(const f of h.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:o}))})})}function uie(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,c,h,f){const p=h.batch,g=p.keys();let _=K.resolve();return g.forEach(R=>{_=_.next(()=>f.getEntry(c,R)).next(N=>{const A=h.docVersions.get(R);ve(A!==null,48541),N.version.compareTo(A)<0&&(p.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),f.addEntry(N)))})}),_.next(()=>o.mutationQueue.removeMutationBatch(c,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let c=Oe();for(let h=0;h<o.mutationResults.length;++h)o.mutationResults[h].transformResults.length>0&&(c=c.add(o.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function FU(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function hie(t,e){const n=de(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];e.targetChanges.forEach((f,p)=>{const g=i.get(p);if(!g)return;o.push(n.Pi.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(s,f.addedDocuments,p)));let _=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(en.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),i=i.insert(p,_),function(N,A,b){return N.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=lie?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(g,_,f)&&o.push(n.Pi.updateTargetData(s,_))});let c=jr(),h=Oe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),o.push(zU(s,a,e.documentUpdates).next(f=>{c=f.ks,h=f.qs})),!r.isEqual(be.min())){const f=n.Pi.getLastRemoteSnapshotVersion(s).next(p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(f)}return K.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,h)).next(()=>c)}).then(s=>(n.Ms=i,s))}function zU(t,e,n){let r=Oe(),i=Oe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=jr();return n.forEach((o,c)=>{const h=s.get(o);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(be.min())?(e.removeEntry(o,c.readTime),a=a.insert(o,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),a=a.insert(o,c)):oe(sI,"Ignoring outdated watch update for ",o,". Current version:",h.version," Watch version:",c.version)}),{ks:a,qs:i}})}function die(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=nl),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dd(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,K.resolve(i)):n.Pi.allocateTargetId(r).next(a=>(i=new Ia(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function fd(t,e,n){const r=de(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Il(a))throw a;oe(sI,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function uv(t,e,n){const r=de(t);let i=be.min(),s=Oe();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,h,f){const p=de(c),g=p.xs.get(f);return g!==void 0?K.resolve(p.Ms.get(g)):p.Pi.getTargetData(h,f)}(r,a,Tr(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,o.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?i:be.min(),n?s:Oe())).next(o=>(HU(r,K6(e),o),{documents:o,Qs:s})))}function BU(t,e){const n=de(t),r=de(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.At(s,e).next(a=>a?a.target:null))}function qU(t,e){const n=de(t),r=n.Os.get(e)||be.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ns.getAllFromCollectionGroup(i,e,d6(r,td),Number.MAX_SAFE_INTEGER)).then(i=>(HU(n,e,i),i))}function HU(t,e,n){let r=t.Os.get(e)||be.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}async function fie(t,e,n,r){const i=de(t);let s=Oe(),a=jr();for(const h of n){const f=e.$s(h.metadata.name);h.document&&(s=s.add(f));const p=e.Us(h);p.setReadTime(e.Ks(h.metadata.readTime)),a=a.insert(f,p)}const o=i.Ns.newChangeBuffer({trackRemovals:!0}),c=await dd(i,function(f){return Tr(Vd($e.fromString(`__bundle__/docs/${f}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",h=>zU(h,o,a).next(f=>(o.apply(h),f)).next(f=>i.Pi.removeMatchingKeysForTargetId(h,c.targetId).next(()=>i.Pi.addMatchingKeys(h,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,f.ks,f.qs)).next(()=>f.ks)))}async function mie(t,e,n=Oe()){const r=await dd(t,Tr(XS(e.bundledQuery))),i=de(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const a=hn(e.readTime);if(r.snapshotVersion.compareTo(a)>=0)return i.Ii.saveNamedQuery(s,e);const o=r.withResumeToken(en.EMPTY_BYTE_STRING,a);return i.Ms=i.Ms.insert(o.targetId,o),i.Pi.updateTargetData(s,o).next(()=>i.Pi.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Pi.addMatchingKeys(s,n,r.targetId)).next(()=>i.Ii.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU="firestore_clients";function $D(t,e){return`${GU}_${t}_${e}`}const $U="firestore_mutations";function KD(t,e,n){let r=`${$U}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const KU="firestore_targets";function lE(t,e){return`${KU}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="SharedClientState";class hv{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new re(i.error.code,i.error.message))),a?new hv(e,n,i.state,s):(cn(Es,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ym{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new re(r.error.code,r.error.message))),s?new Ym(e,r.state,i):(cn(Es,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dv{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=qS();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=y6(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new dv(e,s):(cn(Es,`Failed to parse client data for instance '${e}': ${n}`),null)}}class aI{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new aI(n.clientId,n.onlineState):(cn(Es,`Failed to parse online state: ${e}`),null)}}class fx{constructor(){this.activeTargetIds=qS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cE{constructor(e,n,r,i,s){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new At(Re),this.started=!1,this.Xs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=$D(this.persistenceKey,this.Js),this.no=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new fx),this.ro=new RegExp(`^${GU}_${a}_([^_]*)$`),this.io=new RegExp(`^${$U}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${KU}_${a}_(\\d+)$`),this.oo=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this._o=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem($D(this.persistenceKey,r));if(i){const s=dv.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(lE(this.persistenceKey,e));if(i){const s=Ym.Ws(e,i);s&&(r=s.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(lE(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Po(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return oe(Es,"READ",e,n),n}setItem(e,n){oe(Es,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){oe(Es,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(oe(Es,"EVENT",n.key,n.newValue),n.key===this.eo)return void cn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(s){let a=Lr.ce;if(s!=null)try{const o=JSON.parse(s);ve(typeof o=="number",30636,{So:s}),a=o}catch(o){cn(Es,"Failed to read sequence number from WebStorage",o)}return a}(n.newValue);r!==Lr.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new hv(this.currentUser,e,n,r),s=KD(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const n=KD(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=lE(this.persistenceKey,e),s=new Ym(e,n,r);this.setItem(i,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return dv.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return hv.Ws(new Mn(s),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return Ym.Ws(i,n)}uo(e){return aI.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);oe(Es,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),a=[],o=[];return s.forEach(c=>{i.has(c)||a.push(c)}),i.forEach(c=>{s.has(c)||o.push(c)}),this.syncEngine.Fo(a,o).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=qS();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class WU{constructor(){this.Mo=new fx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new fx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pie{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD="ConnectivityMonitor";class YD{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(WD,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(WD,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __=null;function mx(){return __===null?__=function(){return 268435456+Math.round(2147483648*Math.random())}():__++,"0x"+__.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="RestConnection",gie={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yie{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Z1?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const a=mx(),o=this.zo(e,n.toUriEncodedString());oe(uE,`Sending RPC '${e}' ${a}:`,o,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:h}=new URL(o),f=Ys(h);return this.Jo(e,o,c,r,f).then(p=>(oe(uE,`Received RPC '${e}' ${a}: `,p),p),p=>{throw Hs(uE,`RPC '${e}' ${a} failed with error: `,p,"url: ",o,"request:",r),p})}Ho(e,n,r,i,s,a){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Md}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=gie[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ie{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr="WebChannelConnection";class vie extends yie{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const a=mx();return new Promise((o,c)=>{const h=new t6;h.setWithCredentials(!0),h.listenOnce(n6.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Y_.NO_ERROR:const p=h.getResponseJson();oe(nr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),o(p);break;case Y_.TIMEOUT:oe(nr,`RPC '${e}' ${a} timed out`),c(new re(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Y_.HTTP_ERROR:const g=h.getStatus();if(oe(nr,`RPC '${e}' ${a} failed with status:`,g,"response text:",h.getResponseText()),g>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const R=_==null?void 0:_.error;if(R&&R.status&&R.message){const N=function(b){const T=b.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(T)>=0?T:Q.UNKNOWN}(R.status);c(new re(N,R.message))}else c(new re(Q.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new re(Q.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{oe(nr,`RPC '${e}' ${a} completed.`)}});const f=JSON.stringify(i);oe(nr,`RPC '${e}' ${a} sending request:`,i),h.send(n,"POST",f,r,15)})}T_(e,n,r){const i=mx(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=s6(),o=i6(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=s.join("");oe(nr,`Creating RPC '${e}' stream ${i}: ${f}`,c);const p=a.createWebChannel(f,c);this.I_(p);let g=!1,_=!1;const R=new _ie({Yo:A=>{_?oe(nr,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||(oe(nr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),oe(nr,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Zo:()=>p.close()}),N=(A,b,T)=>{A.listen(b,E=>{try{T(E)}catch(O){setTimeout(()=>{throw O},0)}})};return N(p,fm.EventType.OPEN,()=>{_||(oe(nr,`RPC '${e}' stream ${i} transport opened.`),R.o_())}),N(p,fm.EventType.CLOSE,()=>{_||(_=!0,oe(nr,`RPC '${e}' stream ${i} transport closed`),R.a_(),this.E_(p))}),N(p,fm.EventType.ERROR,A=>{_||(_=!0,Hs(nr,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),R.a_(new re(Q.UNAVAILABLE,"The operation could not be completed")))}),N(p,fm.EventType.MESSAGE,A=>{var b;if(!_){const T=A.data[0];ve(!!T,16349);const E=T,O=(E==null?void 0:E.error)||((b=E[0])==null?void 0:b.error);if(O){oe(nr,`RPC '${e}' stream ${i} received error:`,O);const j=O.status;let q=function(k){const M=mn[k];if(M!==void 0)return oU(M)}(j),S=O.message;q===void 0&&(q=Q.INTERNAL,S="Unknown error status: "+j+" with message "+O.message),_=!0,R.a_(new re(q,S)),p.close()}else oe(nr,`RPC '${e}' stream ${i} received:`,T),R.u_(T)}}),N(o,r6.STAT_EVENT,A=>{A.stat===$1.PROXY?oe(nr,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===$1.NOPROXY&&oe(nr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.__()},0),R}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(){return typeof window<"u"?window:null}function s0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(t){return new xre(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD="PersistentStream";class QU{constructor(e,n,r,i,s,a,o,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new oI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(cn(n.toString()),cn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new re(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oe(QD,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(oe(QD,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wie extends QU{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Ire(this.serializer,e),r=function(s){if(!("targetChange"in s))return be.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?be.min():a.readTime?hn(a.readTime):be.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=lx(this.serializer),n.addTarget=function(s,a){let o;const c=a.target;if(o=rv(c)?{documents:yU(s,c)}:{query:_U(s,c).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=hU(s,a.resumeToken);const h=ax(s,a.expectedCount);h!==null&&(o.expectedCount=h)}else if(a.snapshotVersion.compareTo(be.min())>0){o.readTime=hd(s,a.snapshotVersion.toTimestamp());const h=ax(s,a.expectedCount);h!==null&&(o.expectedCount=h)}return o}(this.serializer,e);const r=Cre(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=lx(this.serializer),n.removeTarget=e,this.q_(n)}}class bie extends QU{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Rre(e.writeResults,e.commitTime),r=hn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=lx(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>jp(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tie{}class Eie extends Tie{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new re(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,ox(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re(Q.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(e,ox(n,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new re(Q.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class xie{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(cn(n),this.aa=!1):oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc="RemoteStore";class Aie{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{Cl(this)&&(oe(Qc,"Restarting streams for network reachability change."),await async function(c){const h=de(c);h.Ea.add(4),await jd(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Rg(h)}(this))})}),this.Ra=new xie(r,i)}}async function Rg(t){if(Cl(t))for(const e of t.da)await e(!0)}async function jd(t){for(const e of t.da)await e(!1)}function Aw(t,e){const n=de(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),uI(n)?cI(n):zd(n).O_()&&lI(n,e))}function md(t,e){const n=de(t),r=zd(n);n.Ia.delete(e),r.O_()&&XU(n,e),n.Ia.size===0&&(r.O_()?r.L_():Cl(n)&&n.Ra.set("Unknown"))}function lI(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zd(t).Y_(e)}function XU(t,e){t.Va.Ue(e),zd(t).Z_(e)}function cI(t){t.Va=new wre({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),zd(t).start(),t.Ra.ua()}function uI(t){return Cl(t)&&!zd(t).x_()&&t.Ia.size>0}function Cl(t){return de(t).Ea.size===0}function JU(t){t.Va=void 0}async function Sie(t){t.Ra.set("Online")}async function Iie(t){t.Ia.forEach((e,n)=>{lI(t,e)})}async function Rie(t,e){JU(t),uI(t)?(t.Ra.ha(e),cI(t)):t.Ra.set("Unknown")}async function Cie(t,e,n){if(t.Ra.set("Online"),e instanceof uU&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))}(t,e)}catch(r){oe(Qc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await fv(t,r)}else if(e instanceof r0?t.Va.Ze(e):e instanceof cU?t.Va.st(e):t.Va.tt(e),!n.isEqual(be.min()))try{const r=await FU(t.localStore);n.compareTo(r)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const f=s.Ia.get(h);f&&s.Ia.set(h,f.withResumeToken(c.resumeToken,a))}}),o.targetMismatches.forEach((c,h)=>{const f=s.Ia.get(c);if(!f)return;s.Ia.set(c,f.withResumeToken(en.EMPTY_BYTE_STRING,f.snapshotVersion)),XU(s,c);const p=new Ia(f.target,c,h,f.sequenceNumber);lI(s,p)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){oe(Qc,"Failed to raise snapshot:",r),await fv(t,r)}}async function fv(t,e,n){if(!Il(e))throw e;t.Ea.add(1),await jd(t),t.Ra.set("Offline"),n||(n=()=>FU(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(Qc,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Rg(t)})}function ZU(t,e){return e().catch(n=>fv(t,n,e))}async function Fd(t){const e=de(t),n=yl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:nl;for(;Nie(e);)try{const i=await die(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Pie(e,i)}catch(i){await fv(e,i)}e3(e)&&t3(e)}function Nie(t){return Cl(t)&&t.Ta.length<10}function Pie(t,e){t.Ta.push(e);const n=yl(t);n.O_()&&n.X_&&n.ea(e.mutations)}function e3(t){return Cl(t)&&!yl(t).x_()&&t.Ta.length>0}function t3(t){yl(t).start()}async function Die(t){yl(t).ra()}async function kie(t){const e=yl(t);for(const n of t.Ta)e.ea(n.mutations)}async function Oie(t,e,n){const r=t.Ta.shift(),i=KS.from(r,e,n);await ZU(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Fd(t)}async function Mie(t,e){e&&yl(t).X_&&await async function(r,i){if(function(a){return aU(a)&&a!==Q.ABORTED}(i.code)){const s=r.Ta.shift();yl(r).B_(),await ZU(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Fd(r)}}(t,e),e3(t)&&t3(t)}async function XD(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),oe(Qc,"RemoteStore received new credentials");const r=Cl(n);n.Ea.add(3),await jd(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Rg(n)}async function px(t,e){const n=de(t);e?(n.Ea.delete(2),await Rg(n)):e||(n.Ea.add(2),await jd(n),n.Ra.set("Unknown"))}function zd(t){return t.ma||(t.ma=function(n,r,i){const s=de(n);return s.sa(),new wie(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:Sie.bind(null,t),t_:Iie.bind(null,t),r_:Rie.bind(null,t),H_:Cie.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),uI(t)?cI(t):t.Ra.set("Unknown")):(await t.ma.stop(),JU(t))})),t.ma}function yl(t){return t.fa||(t.fa=function(n,r,i){const s=de(n);return s.sa(),new bie(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Die.bind(null,t),r_:Mie.bind(null,t),ta:kie.bind(null,t),na:Oie.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Fd(t)):(await t.fa.stop(),t.Ta.length>0&&(oe(Qc,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,o=new hI(e,n,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bd(t,e){if(cn("AsyncQueue",`${e}: ${t}`),Il(t))return new re(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{static emptySet(e){return new Mh(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||he.comparator(n.key,r.key):(n,r)=>he.comparator(n.key,r.key),this.keyedMap=mm(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Mh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Mh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(){this.ga=new At(he.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):pe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class pd{constructor(e,n,r,i,s,a,o,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new pd(e,n,Mh.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vie{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Lie{constructor(){this.queries=ZD(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=de(n),s=i.queries;i.queries=ZD(),s.forEach((a,o)=>{for(const c of o.Sa)c.onError(r)})})(this,new re(Q.ABORTED,"Firestore shutting down"))}}function ZD(){return new Xa(t=>$6(t),Tg)}async function dI(t,e){const n=de(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new Vie,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const o=Bd(a,`Initialization of query '${nh(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&mI(n)}async function fI(t,e){const n=de(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Uie(t,e){const n=de(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(r=!0);a.wa=i}}r&&mI(n)}function jie(t,e,n){const r=de(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function mI(t){t.Ca.forEach(e=>{e.next()})}var gx,ek;(ek=gx||(gx={})).Ma="default",ek.Cache="cache";class pI{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new pd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=pd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gx.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fie{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.serializer=e}$s(e){return Us(this.serializer,e)}Us(e){return e.metadata.exists?gU(this.serializer,e.document,!1):Nt.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return hn(e)}}class zie{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=n3(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=$e.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new tk(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.$s(i.metadata.name);for(const a of i.metadata.queries){const o=(n.get(a)||Oe()).add(s);n.set(a,o)}}return n}async ja(e){const n=await fie(e,new tk(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await mie(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function n3(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e){this.key=e}}class i3{constructor(e){this.key=e}}class s3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=W6(e),this.tu=new Mh(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new JD,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const g=i.get(f),_=Eg(this.query,p)?p:null,R=!!g&&this.mutatedKeys.has(g.key),N=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let A=!1;g&&_?g.data.isEqual(_.data)?R!==N&&(r.track({type:3,doc:_}),A=!0):this.su(g,_)||(r.track({type:2,doc:_}),A=!0,(c&&this.eu(_,c)>0||h&&this.eu(_,h)<0)&&(o=!0)):!g&&_?(r.track({type:0,doc:_}),A=!0):g&&!_&&(r.track({type:1,doc:g}),A=!0,(c||h)&&(o=!0)),A&&(_?(a=a.add(_),s=N?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{tu:a,iu:r,Cs:o,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((f,p)=>function(_,R){const N=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Rt:A})}};return N(_)-N(R)}(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(r),i=i??!1;const o=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,h=c!==this.Za;return this.Za=c,a.length!==0||h?{snapshot:new pd(this.query,e.tu,s,a,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new JD,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new i3(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new r3(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Oe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return pd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Nl="SyncEngine";class Bie{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class qie{constructor(e){this.key=e,this.hu=!1}}class Hie{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Xa(o=>$6(o),Tg),this.Iu=new Map,this.Eu=new Set,this.du=new At(he.comparator),this.Au=new Map,this.Ru=new eI,this.Vu={},this.mu=new Map,this.fu=Yc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Gie(t,e,n=!0){const r=Sw(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await a3(r,e,n,!0),i}async function $ie(t,e){const n=Sw(t);await a3(n,e,!0,!1)}async function a3(t,e,n,r){const i=await dd(t.localStore,Tr(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await gI(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&Aw(t.remoteStore,i),o}async function gI(t,e,n,r,i){t.pu=(p,g,_)=>async function(N,A,b,T){let E=A.view.ru(b);E.Cs&&(E=await uv(N.localStore,A.query,!1).then(({documents:S})=>A.view.ru(S,E)));const O=T&&T.targetChanges.get(A.targetId),j=T&&T.targetMismatches.get(A.targetId)!=null,q=A.view.applyChanges(E,N.isPrimaryClient,O,j);return yx(N,A.targetId,q.au),q.snapshot}(t,p,g,_);const s=await uv(t.localStore,e,!0),a=new s3(e,s.Qs),o=a.ru(s.documents),c=Sg.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=a.applyChanges(o,t.isPrimaryClient,c);yx(t,n,h.au);const f=new Bie(e,n,a);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function Kie(t,e,n){const r=de(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(a=>!Tg(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await fd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&md(r.remoteStore,i.targetId),gd(r,i.targetId)}).catch(Sl)):(gd(r,i.targetId),await fd(r.localStore,i.targetId,!0))}async function Wie(t,e){const n=de(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),md(n.remoteStore,r.targetId))}async function Yie(t,e,n){const r=wI(t);try{const i=await function(a,o){const c=de(a),h=ct.now(),f=o.reduce((_,R)=>_.add(R.key),Oe());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let R=jr(),N=Oe();return c.Ns.getEntries(_,f).next(A=>{R=A,R.forEach((b,T)=>{T.isValidDocument()||(N=N.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,R)).next(A=>{p=A;const b=[];for(const T of o){const E=yre(T,p.get(T.key).overlayedDocument);E!=null&&b.push(new Ja(T.key,E,L6(E.value.mapValue),Ft.exists(!0)))}return c.mutationQueue.addMutationBatch(_,h,b,o)}).next(A=>{g=A;const b=A.applyToLocalDocumentSet(p,N);return c.documentOverlayCache.saveOverlays(_,A.batchId,b)})}).then(()=>({batchId:g.batchId,changes:Q6(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,c){let h=a.Vu[a.currentUser.toKey()];h||(h=new At(Re)),h=h.insert(o,c),a.Vu[a.currentUser.toKey()]=h}(r,i.batchId,n),await Za(r,i.changes),await Fd(r.remoteStore)}catch(i){const s=Bd(i,"Failed to persist write");n.reject(s)}}async function o3(t,e){const n=de(t);try{const r=await hie(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Au.get(s);a&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?ve(a.hu,14607):i.removedDocuments.size>0&&(ve(a.hu,42227),a.hu=!1))}),await Za(n,r,e)}catch(r){await Sl(r)}}function nk(t,e,n){const r=de(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,a)=>{const o=a.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const c=de(a);c.onlineState=o;let h=!1;c.queries.forEach((f,p)=>{for(const g of p.Sa)g.va(o)&&(h=!0)}),h&&mI(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Qie(t,e,n){const r=de(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new At(he.comparator);a=a.insert(s,Nt.newNoDocument(s,be.min()));const o=Oe().add(s),c=new Ag(be.min(),new Map,new At(Re),a,o);await o3(r,c),r.du=r.du.remove(s),r.Au.delete(e),vI(r)}else await fd(r.localStore,e,!1).then(()=>gd(r,e,n)).catch(Sl)}async function Xie(t,e){const n=de(t),r=e.batch.batchId;try{const i=await uie(n.localStore,e);_I(n,r,null),yI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Za(n,i)}catch(i){await Sl(i)}}async function Jie(t,e,n){const r=de(t);try{const i=await function(a,o){const c=de(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return c.mutationQueue.lookupMutationBatch(h,o).next(p=>(ve(p!==null,37113),f=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,f,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>c.localDocuments.getDocuments(h,f))})}(r.localStore,e);_I(r,e,n),yI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Za(r,i)}catch(i){await Sl(i)}}async function Zie(t,e){const n=de(t);Cl(n.remoteStore)||oe(Nl,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(a){const o=de(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>o.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===nl)return void e.resolve();const i=n.mu.get(r)||[];i.push(e),n.mu.set(r,i)}catch(r){const i=Bd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function yI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function _I(t,e,n){const r=de(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function gd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||l3(t,r)})}function l3(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(md(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),vI(t))}function yx(t,e,n){for(const r of n)r instanceof r3?(t.Ru.addReference(r.key,e),ese(t,r)):r instanceof i3?(oe(Nl,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||l3(t,r.key)):pe(19791,{wu:r})}function ese(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(oe(Nl,"New document in limbo: "+n),t.Eu.add(r),vI(t))}function vI(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new he($e.fromString(e)),r=t.fu.next();t.Au.set(r,new qie(n)),t.du=t.du.insert(n,r),Aw(t.remoteStore,new Ia(Tr(Vd(n.path)),r,"TargetPurposeLimboResolution",Lr.ce))}}async function Za(t,e,n){const r=de(t),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((o,c)=>{a.push(r.pu(c,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(h){i.push(h);const p=iI.As(c.targetId,h);s.push(p)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(c,h){const f=de(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>K.forEach(h,g=>K.forEach(g.Es,_=>f.persistence.referenceDelegate.addReference(p,g.targetId,_)).next(()=>K.forEach(g.ds,_=>f.persistence.referenceDelegate.removeReference(p,g.targetId,_)))))}catch(p){if(!Il(p))throw p;oe(sI,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const _=f.Ms.get(g),R=_.snapshotVersion,N=_.withLastLimboFreeSnapshotVersion(R);f.Ms=f.Ms.insert(g,N)}}}(r.localStore,s))}async function tse(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){oe(Nl,"User change. New user:",e.toKey());const r=await jU(n.localStore,e);n.currentUser=e,function(s,a){s.mu.forEach(o=>{o.forEach(c=>{c.reject(new re(Q.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Za(n,r.Ls)}}function nse(t,e){const n=de(t),r=n.Au.get(e);if(r&&r.hu)return Oe().add(r.key);{let i=Oe();const s=n.Iu.get(e);if(!s)return i;for(const a of s){const o=n.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}async function rse(t,e){const n=de(t),r=await uv(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&yx(n,e.targetId,i.au),i}async function ise(t,e){const n=de(t);return qU(n.localStore,e).then(r=>Za(n,r))}async function sse(t,e,n,r){const i=de(t),s=await function(o,c){const h=de(o),f=de(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",p=>f.er(p,c).next(g=>g?h.localDocuments.getDocuments(p,g):K.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Fd(i.remoteStore):n==="acknowledged"||n==="rejected"?(_I(i,e,r||null),yI(i,e),function(o,c){de(de(o).mutationQueue).ir(c)}(i.localStore,e)):pe(6720,"Unknown batchState",{Su:n}),await Za(i,s)):oe(Nl,"Cannot apply mutation batch with id: "+e)}async function ase(t,e){const n=de(t);if(Sw(n),wI(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await rk(n,r.toArray());n.gu=!0,await px(n.remoteStore,!0);for(const s of i)Aw(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach((s,a)=>{n.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then(()=>(gd(n,a),fd(n.localStore,a,!0))),md(n.remoteStore,a)}),await i,await rk(n,r),function(a){const o=de(a);o.Au.forEach((c,h)=>{md(o.remoteStore,h)}),o.Ru.Jr(),o.Au=new Map,o.du=new At(he.comparator)}(n),n.gu=!1,await px(n.remoteStore,!1)}}async function rk(t,e,n){const r=de(t),i=[],s=[];for(const a of e){let o;const c=r.Iu.get(a);if(c&&c.length!==0){o=await dd(r.localStore,Tr(c[0]));for(const h of c){const f=r.Tu.get(h),p=await rse(r,f);p.snapshot&&s.push(p.snapshot)}}else{const h=await BU(r.localStore,a);o=await dd(r.localStore,h),await gI(r,c3(h),a,!1,o.resumeToken)}i.push(o)}return r.Pu.H_(s),i}function c3(t){return G6(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ose(t){return function(n){return de(de(n).persistence).Ts()}(de(t).localStore)}async function lse(t,e,n,r){const i=de(t);if(i.gu)return void oe(Nl,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const a=await qU(i.localStore,K6(s[0])),o=Ag.createSynthesizedRemoteEventForCurrentChange(e,n==="current",en.EMPTY_BYTE_STRING);await Za(i,a,o);break}case"rejected":await fd(i.localStore,e,!0),gd(i,e,r);break;default:pe(64155,n)}}async function cse(t,e,n){const r=Sw(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){oe(Nl,"Adding an already active target "+i);continue}const s=await BU(r.localStore,i),a=await dd(r.localStore,s);await gI(r,c3(s),a.targetId,!1,a.resumeToken),Aw(r.remoteStore,a)}for(const i of n)r.Iu.has(i)&&await fd(r.localStore,i,!1).then(()=>{md(r.remoteStore,i),gd(r,i)}).catch(Sl)}}function Sw(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=o3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nse.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Qie.bind(null,e),e.Pu.H_=Uie.bind(null,e.eventManager),e.Pu.yu=jie.bind(null,e.eventManager),e}function wI(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xie.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jie.bind(null,e),e}function use(t,e,n){const r=de(t);(async function(s,a,o){try{const c=await a.getMetadata();if(await function(_,R){const N=de(_),A=hn(R.createTime);return N.persistence.runTransaction("hasNewerBundle","readonly",b=>N.Ii.getBundleMetadata(b,R.id)).then(b=>!!b&&b.createTime.compareTo(A)>=0)}(s.localStore,c))return await a.close(),o._completeWith(function(_){return{taskState:"Success",documentsLoaded:_.totalDocuments,bytesLoaded:_.totalBytes,totalDocuments:_.totalDocuments,totalBytes:_.totalBytes}}(c)),Promise.resolve(new Set);o._updateProgress(n3(c));const h=new zie(c,a.serializer);let f=await a.bu();for(;f;){const g=await h.Ga(f);g&&o._updateProgress(g),f=await a.bu()}const p=await h.ja(s.localStore);return await Za(s,p.Ha,void 0),await function(_,R){const N=de(_);return N.persistence.runTransaction("Save bundle","readwrite",A=>N.Ii.saveBundleMetadata(A,R))}(s.localStore,c),o._completeWith(p.progress),Promise.resolve(p.Ja)}catch(c){return Hs(Nl,`Loading bundle failed with ${c}`),o._failWith(c),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class Fp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ig(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return UU(this.persistence,new LU,e.initialUser,this.serializer)}Cu(e){return new tI(xw.mi,this.serializer)}Du(e){return new WU}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fp.provider={build:()=>new Fp};class hse extends Fp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ve(this.persistence.referenceDelegate instanceof cv,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new PU(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?sr.withCacheSize(this.cacheSizeBytes):sr.DEFAULT;return new tI(r=>cv.mi(r,n),this.serializer)}}class u3 extends Fp{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await wI(this.xu.syncEngine),await Fd(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return UU(this.persistence,new LU,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new PU(r,e.asyncQueue,n)}Mu(e,n){const r=new wne(n,this.persistence);return new vne(e.asyncQueue,r)}Cu(e){const n=rI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?sr.withCacheSize(this.cacheSizeBytes):sr.DEFAULT;return new nI(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,YU(),s0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new WU}}class dse extends u3{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof cE&&(this.sharedClientState.syncEngine={Co:sse.bind(null,n),vo:lse.bind(null,n),Fo:cse.bind(null,n),Ts:ose.bind(null,n),Do:ise.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await ase(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=YU();if(!cE.v(n))throw new re(Q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=rI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cE(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class zp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tse.bind(null,this.syncEngine),await px(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Lie}()}createDatastore(e){const n=Ig(e.databaseInfo.databaseId),r=function(s){return new vie(s)}(e.databaseInfo);return function(s,a,o,c){return new Eie(s,a,o,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,o){return new Aie(r,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>nk(this.syncEngine,n,0),function(){return YD.v()?new YD:new pie}())}createSyncEngine(e,n){return function(i,s,a,o,c,h,f){const p=new Hie(i,s,a,o,c,h);return f&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=de(i);oe(Qc,"RemoteStore shutting down."),s.Ea.add(5),await jd(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}zp.provider={build:()=>new zp};function ik(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):cn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fse{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Qn,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))},r=>this.metadata.reject(r))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const i=await this.$u(r);return new Fie(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex(e=>e===123)}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mse{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new re(Q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const a=de(i),o={documents:s.map(p=>Up(a.serializer,p))},c=await a.Ho("BatchGetDocuments",a.serializer.databaseId,$e.emptyPath(),o,s.length),h=new Map;c.forEach(p=>{const g=Sre(a.serializer,p);h.set(g.key.toString(),g)});const f=[];return s.forEach(p=>{const g=h.get(p.toString());ve(!!g,55234,{key:p}),f.push(g)}),f}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ud(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=he.fromPath(r);this.mutations.push(new GS(i,this.precondition(i)))}),await async function(r,i){const s=de(r),a={writes:i.map(o=>jp(s.serializer,o))};await s.Go("Commit",s.serializer.databaseId,$e.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw pe(50498,{Gu:e.constructor.name});n=be.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new re(Q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(be.min())?Ft.exists(!1):Ft.updateTime(n):Ft.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(be.min()))throw new re(Q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ft.updateTime(n)}return Ft.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pse{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.zu=r.maxAttempts,this.M_=new oI(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new mse(this.datastore),n=this.Hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Yu(i)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{const n=this.updateFunction(e);return!vg(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!aU(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l="FirestoreClient";class gse{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Mn.UNAUTHENTICATED,this.clientId=PS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{oe(_l,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(oe(_l,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Bd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function hE(t,e){t.asyncQueue.verifyOperationInProgress(),oe(_l,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await jU(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function sk(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bI(t);oe(_l,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>XD(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>XD(e.remoteStore,i)),t._onlineComponents=e}async function bI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(_l,"Using user provided OfflineComponentProvider");try{await hE(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Q.FAILED_PRECONDITION||i.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Hs("Error using user provided cache. Falling back to memory cache: "+n),await hE(t,new Fp)}}else oe(_l,"Using default OfflineComponentProvider"),await hE(t,new hse(void 0));return t._offlineComponents}async function Rw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(_l,"Using user provided OnlineComponentProvider"),await sk(t,t._uninitializedComponentsProvider._online)):(oe(_l,"Using default OnlineComponentProvider"),await sk(t,new zp))),t._onlineComponents}function h3(t){return bI(t).then(e=>e.persistence)}function TI(t){return bI(t).then(e=>e.localStore)}function d3(t){return Rw(t).then(e=>e.remoteStore)}function EI(t){return Rw(t).then(e=>e.syncEngine)}function yse(t){return Rw(t).then(e=>e.datastore)}async function yd(t){const e=await Rw(t),n=e.eventManager;return n.onListen=Gie.bind(null,e.syncEngine),n.onUnlisten=Kie.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$ie.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Wie.bind(null,e.syncEngine),n}function _se(t){return t.asyncQueue.enqueue(async()=>{const e=await h3(t),n=await d3(t);return e.setNetworkEnabled(!0),function(i){const s=de(i);return s.Ea.delete(0),Rg(s)}(n)})}function vse(t){return t.asyncQueue.enqueue(async()=>{const e=await h3(t),n=await d3(t);return e.setNetworkEnabled(!1),async function(i){const s=de(i);s.Ea.add(0),await jd(s),s.Ra.set("Offline")}(n)})}function wse(t,e){const n=new Qn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,a){try{const o=await function(h,f){const p=de(h);return p.persistence.runTransaction("read document","readonly",g=>p.localDocuments.getDocument(g,f))}(i,s);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new re(Q.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const c=Bd(o,`Failed to get document '${s} from cache`);a.reject(c)}}(await TI(t),e,n)),n.promise}function f3(t,e,n={}){const r=new Qn;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,c,h){const f=new Iw({next:g=>{f.Nu(),a.enqueueAndForget(()=>fI(s,p));const _=g.docs.has(o);!_&&g.fromCache?h.reject(new re(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&c&&c.source==="server"?h.reject(new re(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new pI(Vd(o.path),f,{includeMetadataChanges:!0,qa:!0});return dI(s,p)}(await yd(t),t.asyncQueue,e,n,r)),r.promise}function bse(t,e){const n=new Qn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,a){try{const o=await uv(i,s,!0),c=new s3(s,o.Qs),h=c.ru(o.documents),f=c.applyChanges(h,!1);a.resolve(f.snapshot)}catch(o){const c=Bd(o,`Failed to execute query '${s} against cache`);a.reject(c)}}(await TI(t),e,n)),n.promise}function m3(t,e,n={}){const r=new Qn;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,c,h){const f=new Iw({next:g=>{f.Nu(),a.enqueueAndForget(()=>fI(s,p)),g.fromCache&&c.source==="server"?h.reject(new re(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new pI(o,f,{includeMetadataChanges:!0,qa:!0});return dI(s,p)}(await yd(t),t.asyncQueue,e,n,r)),r.promise}function Tse(t,e){const n=new Iw(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){de(i).Ca.add(s),s.next()}(await yd(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){de(i).Ca.delete(s)}(await yd(t),n))}}function Ese(t,e,n,r){const i=function(a,o){let c;return c=typeof a=="string"?lU().encode(a):a,function(f,p){return new fse(f,p)}(function(f,p){if(f instanceof Uint8Array)return ik(f,p);if(f instanceof ArrayBuffer)return ik(new Uint8Array(f),p);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),o)}(n,Ig(e));t.asyncQueue.enqueueAndForget(async()=>{use(await EI(t),i,r)})}function xse(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=de(r);return s.persistence.runTransaction("Get named query","readonly",a=>s.Ii.getNamedQuery(a,i))}(await TI(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p3(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3="firestore.googleapis.com",ok=!0;class lk{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=g3,this.ssl=ok}else this.host=e.host,this.ssl=e.ssl??ok;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=IU;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Gre)throw new re(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}c6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=p3(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new re(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new re(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new re(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lk({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lk(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new one;switch(r.type){case"firstParty":return new hne(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ak.get(n);r&&(oe("ComponentProvider","Removing Datastore"),ak.delete(n),r.terminate())}(this),Promise.resolve()}}function Ase(t,e,n,r={}){var h;t=et(t,Cg);const i=Ys(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;i&&(tS(`https://${o}`),nS("Firestore",!0)),s.host!==g3&&s.host!==o&&Hs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:o,ssl:i,emulatorOptions:r};if(!cl(c,a)&&(t._setSettings(c),r.mockUserToken)){let f,p;if(typeof r.mockUserToken=="string")f=r.mockUserToken,p=Mn.MOCK_USER;else{f=V5(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new re(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Mn(g)}t._authCredentials=new lne(new o6(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Er=class y3{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new y3(this.firestore,e,this._query)}},xt=class ym{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ym(this.firestore,e,this._key)}toJSON(){return{type:ym._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(_g(n,ym._jsonSchema))return new ym(e,r||null,new he($e.fromString(n.referencePath)))}};xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:bn("string",xt._jsonSchemaVersion),referencePath:bn("string")};let rl=class _3 extends Er{constructor(e,n,r){super(e,n,Vd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new he(e))}withConverter(e){return new _3(this.firestore,e,this._path)}};function v3(t,e,...n){if(t=ye(t),DS("collection","path",e),t instanceof Cg){const r=$e.fromString(e,...n);return QP(r),new rl(t,null,r)}{if(!(t instanceof xt||t instanceof rl))throw new re(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return QP(r),new rl(t.firestore,null,r)}}function Sse(t,e){if(t=et(t,Cg),DS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new re(Q.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Er(t,null,function(r){return new Qa($e.emptyPath(),r)}(e))}function mv(t,e,...n){if(t=ye(t),arguments.length===1&&(e=PS.newId()),DS("doc","path",e),t instanceof Cg){const r=$e.fromString(e,...n);return YP(r),new xt(t,null,new he(r))}{if(!(t instanceof xt||t instanceof rl))throw new re(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return YP(r),new xt(t.firestore,t instanceof rl?t.converter:null,new he(r))}}function w3(t,e){return t=ye(t),e=ye(e),(t instanceof xt||t instanceof rl)&&(e instanceof xt||e instanceof rl)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function b3(t,e){return t=ye(t),e=ye(e),t instanceof Er&&e instanceof Er&&t.firestore===e.firestore&&Tg(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck="AsyncQueue";class uk{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new oI(this,"async_queue_retry"),this._c=()=>{const r=s0();r&&oe(ck,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=s0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=s0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Qn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Il(e))throw e;oe(ck,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,cn("INTERNAL UNHANDLED ERROR: ",hk(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=hI.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&pe(47125,{Pc:hk(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function hk(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ise{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rse=-1;let dn=class extends Cg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new uk,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uk(e),this._firestoreClient=void 0,await e}}};function ur(t){if(t._terminated)throw new re(Q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||T3(t),t._firestoreClient}function T3(t){var r,i,s;const e=t._freezeSettings(),n=function(o,c,h,f){return new Yne(o,c,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,p3(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new gse(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(t._componentsProvider))}function Cse(t,e){Hs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return E3(t,zp.provider,{build:r=>new u3(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Nse(t){Hs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();E3(t,zp.provider,{build:n=>new dse(n,e.cacheSizeBytes)})}function E3(t,e,n){if((t=et(t,dn))._firestoreClient||t._terminated)throw new re(Q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new re(Q.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},T3(t)}function Pse(t){if(t._initialized&&!t._terminated)throw new re(Q.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Ls.v())return Promise.resolve();const i=r+VU;await Ls.delete(i)}(rI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function Dse(t){return function(n){const r=new Qn;return n.asyncQueue.enqueueAndForget(async()=>Zie(await EI(n),r)),r.promise}(ur(t=et(t,dn)))}function kse(t){return _se(ur(t=et(t,dn)))}function Ose(t){return vse(ur(t=et(t,dn)))}function Mse(t,e){const n=ur(t=et(t,dn)),r=new Ise;return Ese(n,t._databaseId,e,r),r}function Vse(t,e){return xse(ur(t=et(t,dn)),e).then(n=>n?new Er(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ar(en.fromBase64String(e))}catch(n){throw new re(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ar(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ar._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_g(e,ar._jsonSchema))return ar.fromBase64String(e.bytes)}}ar._jsonSchemaVersion="firestore/bytes/1.0",ar._jsonSchema={type:bn("string",ar._jsonSchemaVersion),bytes:bn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vl=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ou=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ss._jsonSchemaVersion}}static fromJSON(e){if(_g(e,ss._jsonSchema))return new ss(e.latitude,e.longitude)}}ss._jsonSchemaVersion="firestore/geoPoint/1.0",ss._jsonSchema={type:bn("string",ss._jsonSchemaVersion),latitude:bn("number"),longitude:bn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:js._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_g(e,js._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new js(e.vectorValues);throw new re(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}js._jsonSchemaVersion="firestore/vectorValue/1.0",js._jsonSchema={type:bn("string",js._jsonSchemaVersion),vectorValues:bn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lse=/^__.*__$/;class Use{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ja(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ld(e,this.data,n,this.fieldTransforms)}}class x3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ja(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function A3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ac:t})}}class Cw{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Cw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return pv(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(A3(this.Ac)&&Lse.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class jse{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ig(e)}Cc(e,n,r,i=!1){return new Cw({Ac:e,methodName:n,Dc:r,path:jt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lu(t){const e=t._freezeSettings(),n=Ig(t._databaseId);return new jse(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Nw(t,e,n,r,i,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);NI("Data must be an object, but it was:",a,r);const o=R3(r,a);let c,h;if(s.merge)c=new Ur(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const g=vx(e,p,n);if(!a.contains(g))throw new re(Q.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);N3(f,g)||f.push(g)}c=new Ur(f),h=a.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=a.fieldTransforms;return new Use(new Kn(o),c,h)}class Ng extends ou{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ng}}function S3(t,e,n){return new Cw({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class xI extends ou{_toFieldTransform(e){return new xg(e.path,new cd)}isEqual(e){return e instanceof xI}}class AI extends ou{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=S3(this,e,!0),r=this.vc.map(s=>cu(s,n)),i=new Gc(r);return new xg(e.path,i)}isEqual(e){return e instanceof AI&&cl(this.vc,e.vc)}}class SI extends ou{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=S3(this,e,!0),r=this.vc.map(s=>cu(s,n)),i=new $c(r);return new xg(e.path,i)}isEqual(e){return e instanceof SI&&cl(this.vc,e.vc)}}class II extends ou{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new ud(e.serializer,Z6(e.serializer,this.Fc));return new xg(e.path,n)}isEqual(e){return e instanceof II&&this.Fc===e.Fc}}function RI(t,e,n,r){const i=t.Cc(1,e,n);NI("Data must be an object, but it was:",i,r);const s=[],a=Kn.empty();Rl(r,(c,h)=>{const f=PI(e,c,n);h=ye(h);const p=i.yc(f);if(h instanceof Ng)s.push(f);else{const g=cu(h,p);g!=null&&(s.push(f),a.set(f,g))}});const o=new Ur(s);return new x3(a,o,i.fieldTransforms)}function CI(t,e,n,r,i,s){const a=t.Cc(1,e,n),o=[vx(e,r,n)],c=[i];if(s.length%2!=0)throw new re(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)o.push(vx(e,s[g])),c.push(s[g+1]);const h=[],f=Kn.empty();for(let g=o.length-1;g>=0;--g)if(!N3(h,o[g])){const _=o[g];let R=c[g];R=ye(R);const N=a.yc(_);if(R instanceof Ng)h.push(_);else{const A=cu(R,N);A!=null&&(h.push(_),f.set(_,A))}}const p=new Ur(h);return new x3(f,p,a.fieldTransforms)}function I3(t,e,n,r=!1){return cu(n,t.Cc(r?4:3,e))}function cu(t,e){if(C3(t=ye(t)))return NI("Unsupported field value:",e,t),R3(t,e);if(t instanceof ou)return function(r,i){if(!A3(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let c=cu(o,i.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Z6(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ct.fromDate(r);return{timestampValue:hd(i.serializer,s)}}if(r instanceof ct){const s=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hd(i.serializer,s)}}if(r instanceof ss)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ar)return{bytesValue:hU(i.serializer,r._byteString)};if(r instanceof xt){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:QS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof js)return function(a,o){return{mapValue:{fields:{[jS]:{stringValue:FS},[ad]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw o.Sc("VectorValues must only contain numeric values.");return HS(o.serializer,h)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${dw(r)}`)}(t,e)}function R3(t,e){const n={};return R6(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rl(t,(r,i)=>{const s=cu(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function C3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ct||t instanceof ss||t instanceof ar||t instanceof xt||t instanceof ou||t instanceof js)}function NI(t,e,n){if(!C3(n)||!u6(n)){const r=dw(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function vx(t,e,n){if((e=ye(e))instanceof vl)return e._internalPath;if(typeof e=="string")return PI(t,e);throw pv("Field path arguments must be of type string or ",t,!1,void 0,n)}const Fse=new RegExp("[~\\*/\\[\\]]");function PI(t,e,n){if(e.search(Fse)>=0)throw pv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vl(...e.split("."))._internalPath}catch{throw pv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pv(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new re(Q.INVALID_ARGUMENT,o+t+c)}function N3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zse(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Pw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zse extends Bp{data(){return super.data()}}function Pw(t,e){return typeof e=="string"?PI(t,e):e instanceof vl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class DI{}class Pg extends DI{}function Ao(t,e,...n){let r=[];e instanceof DI&&r.push(e),r=r.concat(n),function(s){const a=s.filter(c=>c instanceof kI).length,o=s.filter(c=>c instanceof Dw).length;if(a>1||a>0&&o>0)throw new re(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Dw extends Pg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Dw(e,n,r)}_apply(e){const n=this._parse(e);return k3(e._query,n),new Er(e.firestore,e.converter,sx(e._query,n))}_parse(e){const n=lu(e.firestore);return function(s,a,o,c,h,f,p){let g;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new re(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){fk(p,f);const R=[];for(const N of p)R.push(dk(c,s,N));g={arrayValue:{values:R}}}else g=dk(c,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||fk(p,f),g=I3(o,a,p,f==="in"||f==="not-in");return Qe.create(h,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Bse(t,e,n){const r=e,i=Pw("where",t);return Dw._create(i,r,n)}class kI extends DI{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new kI(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:mt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const c of o)k3(a,c),a=sx(a,c)}(e._query,n),new Er(e.firestore,e.converter,sx(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class OI extends Pg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new OI(e,n)}_apply(e){const n=function(i,s,a){if(i.startAt!==null)throw new re(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new re(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lp(s,a)}(e._query,this._field,this._direction);return new Er(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new Qa(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function qse(t,e="asc"){const n=e,r=Pw("orderBy",t);return OI._create(r,n)}class kw extends Pg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new kw(e,n,r)}_apply(e){return new Er(e.firestore,e.converter,sv(e._query,this._limit,this._limitType))}}function Hse(t){return h6("limit",t),kw._create("limit",t,"F")}function Gse(t){return h6("limitToLast",t),kw._create("limitToLast",t,"L")}class Ow extends Pg{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Ow(e,n,r)}_apply(e){const n=D3(e,this.type,this._docOrFields,this._inclusive);return new Er(e.firestore,e.converter,function(i,s){return new Qa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function $se(...t){return Ow._create("startAt",t,!0)}function Kse(...t){return Ow._create("startAfter",t,!1)}class Mw extends Pg{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Mw(e,n,r)}_apply(e){const n=D3(e,this.type,this._docOrFields,this._inclusive);return new Er(e.firestore,e.converter,function(i,s){return new Qa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function Wse(...t){return Mw._create("endBefore",t,!1)}function Yse(...t){return Mw._create("endAt",t,!0)}function D3(t,e,n,r){if(n[0]=ye(n[0]),n[0]instanceof Bp)return function(s,a,o,c,h){if(!c)throw new re(Q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const f=[];for(const p of Oh(s))if(p.field.isKeyField())f.push(qc(a,c.key));else{const g=c.data.field(p.field);if(yw(g))throw new re(Q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const _=p.field.canonicalString();throw new re(Q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}f.push(g)}return new gl(f,h)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=lu(t.firestore);return function(a,o,c,h,f,p){const g=a.explicitOrderBy;if(f.length>g.length)throw new re(Q.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let R=0;R<f.length;R++){const N=f[R];if(g[R].field.isKeyField()){if(typeof N!="string")throw new re(Q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof N}`);if(!BS(a)&&N.indexOf("/")!==-1)throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${N}' contains a slash.`);const A=a.path.child($e.fromString(N));if(!he.isDocumentKey(A))throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const b=new he(A);_.push(qc(o,b))}else{const A=I3(c,h,N);_.push(A)}}return new gl(_,p)}(t._query,t.firestore._databaseId,i,e,n,r)}}function dk(t,e,n){if(typeof(n=ye(n))=="string"){if(n==="")throw new re(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BS(e)&&n.indexOf("/")!==-1)throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child($e.fromString(n));if(!he.isDocumentKey(r))throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qc(t,new he(r))}if(n instanceof xt)return qc(t,n._key);throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dw(n)}.`)}function fk(t,e){if(!Array.isArray(t)||t.length===0)throw new re(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function k3(t,e){const n=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class MI{convertValue(e,n="none"){switch(ml(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ga(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Rl(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[ad].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>Ut(a.doubleValue));return new js(n)}convertGeoPoint(e){return new ss(Ut(e.latitude),Ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=_w(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Op(e));default:return null}}convertTimestamp(e){const n=Ha(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=$e.fromString(e);ve(TU(r),9688,{name:e});const i=new fl(r.get(1),r.get(3)),s=new he(r.popFirst(5));return i.isEqual(n)||cn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Qse extends MI{constructor(e){super(),this.firestore=e}convertBytes(e){return new ar(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}class bc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Fi=class O3 extends Bp{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Pw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=O3._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Fi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fi._jsonSchema={type:bn("string",Fi._jsonSchemaVersion),bundleSource:bn("string","DocumentSnapshot"),bundleName:bn("string"),bundle:bn("string")};let Qm=class extends Fi{data(e={}){return super.data(e)}},as=class M3{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new bc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Qm(this._firestore,this._userDataWriter,r.key,r,new bc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const c=new Qm(i._firestore,i._userDataWriter,o.doc.key,o.doc,new bc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const c=new Qm(i._firestore,i._userDataWriter,o.doc.key,o.doc,new bc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return o.type!==0&&(h=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),f=a.indexOf(o.doc.key)),{type:Xse(o.type),doc:c,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=M3._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=PS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Xse(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:t})}}function V3(t,e){return t instanceof Fi&&e instanceof Fi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof as&&e instanceof as&&t._firestore===e._firestore&&b3(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jse(t){t=et(t,xt);const e=et(t.firestore,dn);return f3(ur(e),t._key).then(n=>VI(e,t,n))}as._jsonSchemaVersion="firestore/querySnapshot/1.0",as._jsonSchema={type:bn("string",as._jsonSchemaVersion),bundleSource:bn("string","QuerySnapshot"),bundleName:bn("string"),bundle:bn("string")};class uu extends MI{constructor(e){super(),this.firestore=e}convertBytes(e){return new ar(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function Zse(t){t=et(t,xt);const e=et(t.firestore,dn),n=ur(e),r=new uu(e);return wse(n,t._key).then(i=>new Fi(e,r,t._key,i,new bc(i!==null&&i.hasLocalMutations,!0),t.converter))}function eae(t){t=et(t,xt);const e=et(t.firestore,dn);return f3(ur(e),t._key,{source:"server"}).then(n=>VI(e,t,n))}function tae(t){t=et(t,Er);const e=et(t.firestore,dn),n=ur(e),r=new uu(e);return P3(t._query),m3(n,t._query).then(i=>new as(e,r,t,i))}function nae(t){t=et(t,Er);const e=et(t.firestore,dn),n=ur(e),r=new uu(e);return bse(n,t._query).then(i=>new as(e,r,t,i))}function rae(t){t=et(t,Er);const e=et(t.firestore,dn),n=ur(e),r=new uu(e);return m3(n,t._query,{source:"server"}).then(i=>new as(e,r,t,i))}function mk(t,e,n){t=et(t,xt);const r=et(t.firestore,dn),i=Vw(t.converter,e,n);return Dg(r,[Nw(lu(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ft.none())])}function pk(t,e,n,...r){t=et(t,xt);const i=et(t.firestore,dn),s=lu(i);let a;return a=typeof(e=ye(e))=="string"||e instanceof vl?CI(s,"updateDoc",t._key,e,n,r):RI(s,"updateDoc",t._key,e),Dg(i,[a.toMutation(t._key,Ft.exists(!0))])}function iae(t){return Dg(et(t.firestore,dn),[new Ud(t._key,Ft.none())])}function sae(t,e){const n=et(t.firestore,dn),r=mv(t),i=Vw(t.converter,e);return Dg(n,[Nw(lu(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ft.exists(!1))]).then(()=>r)}function L3(t,...e){var c,h,f;t=ye(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||_x(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(_x(e[r])){const p=e[r];e[r]=(c=p.next)==null?void 0:c.bind(p),e[r+1]=(h=p.error)==null?void 0:h.bind(p),e[r+2]=(f=p.complete)==null?void 0:f.bind(p)}let s,a,o;if(t instanceof xt)a=et(t.firestore,dn),o=Vd(t._key.path),s={next:p=>{e[r]&&e[r](VI(a,t,p))},error:e[r+1],complete:e[r+2]};else{const p=et(t,Er);a=et(p.firestore,dn),o=p._query;const g=new uu(a);s={next:_=>{e[r]&&e[r](new as(a,g,p,_))},error:e[r+1],complete:e[r+2]},P3(t._query)}return function(g,_,R,N){const A=new Iw(N),b=new pI(_,A,R);return g.asyncQueue.enqueueAndForget(async()=>dI(await yd(g),b)),()=>{A.Nu(),g.asyncQueue.enqueueAndForget(async()=>fI(await yd(g),b))}}(ur(a),o,i,s)}function aae(t,e){return Tse(ur(t=et(t,dn)),_x(e)?e:{next:e})}function Dg(t,e){return function(r,i){const s=new Qn;return r.asyncQueue.enqueueAndForget(async()=>Yie(await EI(r),i,s)),s.promise}(ur(t),e)}function VI(t,e,n){const r=n.docs.get(e._key),i=new uu(t);return new Fi(t,i,e._key,r,new bc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oae={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lae=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=lu(e)}set(e,n,r){this._verifyNotCommitted();const i=qo(e,this._firestore),s=Vw(i.converter,n,r),a=Nw(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,Ft.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=qo(e,this._firestore);let a;return a=typeof(n=ye(n))=="string"||n instanceof vl?CI(this._dataReader,"WriteBatch.update",s._key,n,r,i):RI(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,Ft.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=qo(e,this._firestore);return this._mutations=this._mutations.concat(new Ud(n._key,Ft.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new re(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function qo(t,e){if((t=ye(t)).firestore!==e)throw new re(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cae{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=lu(e)}get(e){const n=qo(e,this._firestore),r=new Qse(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return pe(24041);const s=i[0];if(s.isFoundDocument())return new Bp(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new Bp(this._firestore,r,n._key,null,n.converter);throw pe(18433,{doc:s})})}set(e,n,r){const i=qo(e,this._firestore),s=Vw(i.converter,n,r),a=Nw(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,a),this}update(e,n,r,...i){const s=qo(e,this._firestore);let a;return a=typeof(n=ye(n))=="string"||n instanceof vl?CI(this._dataReader,"Transaction.update",s._key,n,r,i):RI(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(e){const n=qo(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uae=class extends cae{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=qo(e,this._firestore),r=new uu(this._firestore);return super.get(e).then(i=>new Fi(this._firestore,r,n._key,i._document,new bc(!1,!1),n.converter))}};function hae(t,e,n){t=et(t,dn);const r={...oae,...n};return function(s){if(s.maxAttempts<1)throw new re(Q.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,a,o){const c=new Qn;return s.asyncQueue.enqueueAndForget(async()=>{const h=await yse(s);new pse(s.asyncQueue,h,o,a,c).ju()}),c.promise}(ur(t),i=>e(new uae(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dae(){return new Ng("deleteField")}function fae(){return new xI("serverTimestamp")}function mae(...t){return new AI("arrayUnion",t)}function pae(...t){return new SI("arrayRemove",t)}function gae(t){return new II("increment",t)}(function(e,n=!0){(function(i){Md=i})(Hi),os(new qr("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new dn(new cne(r.getProvider("auth-internal")),new dne(a,r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new re(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(h.options.projectId,f)}(a,i),a);return s={useFetchStreams:n,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),br(GP,$P,e),br(GP,$P,"esm2020")})();const yae="@firebase/firestore-compat",_ae="0.4.2";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new re("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(){if(typeof Uint8Array>"u")throw new re("unimplemented","Uint8Arrays are not available in this environment.")}function yk(){if(!Kne())throw new re("unimplemented","Blobs are unavailable in Firestore in this environment.")}let U3=class wx{constructor(e){this._delegate=e}static fromBase64String(e){return yk(),new wx(ar.fromBase64String(e))}static fromUint8Array(e){return gk(),new wx(ar.fromUint8Array(e))}toBase64(){return yk(),this._delegate.toBase64()}toUint8Array(){return gk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t){return vae(t,["next","error","complete"])}function vae(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wae{enableIndexedDbPersistence(e,n){return Cse(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Nse(e._delegate)}clearIndexedDbPersistence(e){return Pse(e._delegate)}}class j3{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof fl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Hs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){Ase(this._delegate,e,n,r)}enableNetwork(){return kse(this._delegate)}disableNetwork(){return Ose(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,c6("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Dse(this._delegate)}onSnapshotsInSync(e){return aae(this._delegate,e)}get app(){if(!this._appCompat)throw new re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new _d(this,v3(this._delegate,e))}catch(n){throw _r(n,"collection()","Firestore.collection()")}}doc(e){try{return new Vi(this,mv(this._delegate,e))}catch(n){throw _r(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new yr(this,Sse(this._delegate,e))}catch(n){throw _r(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return hae(this._delegate,n=>e(new F3(this,n)))}batch(){return ur(this._delegate),new z3(new lae(this._delegate,e=>Dg(this._delegate,e)))}loadBundle(e){return Mse(this._delegate,e)}namedQuery(e){return Vse(this._delegate,e).then(n=>n?new yr(this,n):null)}}class Lw extends MI{constructor(e){super(),this.firestore=e}convertBytes(e){return new U3(new ar(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Vi.forKey(n,this.firestore,null)}}function bae(t){sne(t)}class F3{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Lw(e)}get(e){const n=Tc(e);return this._delegate.get(n).then(r=>new qp(this._firestore,new Fi(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Tc(e);return r?(LI("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Tc(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Tc(e);return this._delegate.delete(n),this}}class z3{constructor(e){this._delegate=e}set(e,n,r){const i=Tc(e);return r?(LI("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Tc(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Tc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Xc{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Qm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Hp(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Xc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Xc(e,new Lw(e),n),i.set(n,s)),s}}Xc.INSTANCES=new WeakMap;class Vi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Lw(e)}static forPath(e,n,r){if(e.length%2!==0)throw new re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Vi(n,new xt(n._delegate,r,new he(e)))}static forKey(e,n,r){return new Vi(n,new xt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new _d(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new _d(this.firestore,v3(this._delegate,e))}catch(n){throw _r(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ye(e),e instanceof xt?w3(this._delegate,e):!1}set(e,n){n=LI("DocumentReference.set",n);try{return n?mk(this._delegate,e,n):mk(this._delegate,e)}catch(r){throw _r(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?pk(this._delegate,e):pk(this._delegate,e,n,...r)}catch(i){throw _r(i,"updateDoc()","DocumentReference.update()")}}delete(){return iae(this._delegate)}onSnapshot(...e){const n=B3(e),r=q3(e,i=>new qp(this.firestore,new Fi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return L3(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Zse(this._delegate):(e==null?void 0:e.source)==="server"?n=eae(this._delegate):n=Jse(this._delegate),n.then(r=>new qp(this.firestore,new Fi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Vi(this.firestore,e?this._delegate.withConverter(Xc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function _r(t,e,n){return t.message=t.message.replace(e,n),t}function B3(t){for(const e of t)if(typeof e=="object"&&!bx(e))return e;return{}}function q3(t,e){var r,i;let n;return bx(t[0])?n=t[0]:bx(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:s=>{n.next&&n.next(e(s))},error:(r=n.error)==null?void 0:r.bind(n),complete:(i=n.complete)==null?void 0:i.bind(n)}}class qp{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Vi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return V3(this._delegate,e._delegate)}}class Hp extends qp{data(e){const n=this._delegate.data(e);return this._delegate._converter||ane(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class yr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Lw(e)}where(e,n,r){try{return new yr(this.firestore,Ao(this._delegate,Bse(e,n,r)))}catch(i){throw _r(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new yr(this.firestore,Ao(this._delegate,qse(e,n)))}catch(r){throw _r(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new yr(this.firestore,Ao(this._delegate,Hse(e)))}catch(n){throw _r(n,"limit()","Query.limit()")}}limitToLast(e){try{return new yr(this.firestore,Ao(this._delegate,Gse(e)))}catch(n){throw _r(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new yr(this.firestore,Ao(this._delegate,$se(...e)))}catch(n){throw _r(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new yr(this.firestore,Ao(this._delegate,Kse(...e)))}catch(n){throw _r(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new yr(this.firestore,Ao(this._delegate,Wse(...e)))}catch(n){throw _r(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new yr(this.firestore,Ao(this._delegate,Yse(...e)))}catch(n){throw _r(n,"endAt()","Query.endAt()")}}isEqual(e){return b3(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=nae(this._delegate):(e==null?void 0:e.source)==="server"?n=rae(this._delegate):n=tae(this._delegate),n.then(r=>new Tx(this.firestore,new as(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=B3(e),r=q3(e,i=>new Tx(this.firestore,new as(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return L3(this._delegate,n,r)}withConverter(e){return new yr(this.firestore,e?this._delegate.withConverter(Xc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Tae{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Hp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Tx{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new yr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Hp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Tae(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Hp(this._firestore,r))})}isEqual(e){return V3(this._delegate,e._delegate)}}class _d extends yr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Vi(this.firestore,e):null}doc(e){try{return e===void 0?new Vi(this.firestore,mv(this._delegate)):new Vi(this.firestore,mv(this._delegate,e))}catch(n){throw _r(n,"doc()","CollectionReference.doc()")}}add(e){return sae(this._delegate,e).then(n=>new Vi(this.firestore,n))}isEqual(e){return w3(this._delegate,e._delegate)}withConverter(e){return new _d(this.firestore,e?this._delegate.withConverter(Xc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Tc(t){return et(t,xt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(...e){this._delegate=new vl(...e)}static documentId(){return new UI(jt.keyField().canonicalString())}isEqual(e){return e=ye(e),e instanceof vl?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{static serverTimestamp(){const e=fae();return e._methodName="FieldValue.serverTimestamp",new _c(e)}static delete(){const e=dae();return e._methodName="FieldValue.delete",new _c(e)}static arrayUnion(...e){const n=mae(...e);return n._methodName="FieldValue.arrayUnion",new _c(n)}static arrayRemove(...e){const n=pae(...e);return n._methodName="FieldValue.arrayRemove",new _c(n)}static increment(e){const n=gae(e);return n._methodName="FieldValue.increment",new _c(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eae={Firestore:j3,GeoPoint:ss,Timestamp:ct,Blob:U3,Transaction:F3,WriteBatch:z3,DocumentReference:Vi,DocumentSnapshot:qp,Query:yr,QueryDocumentSnapshot:Hp,QuerySnapshot:Tx,CollectionReference:_d,FieldPath:UI,FieldValue:_c,setLogLevel:bae,CACHE_SIZE_UNLIMITED:Rse};function xae(t,e){t.INTERNAL.registerComponent(new qr("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps({...Eae}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aae(t){xae(t,(e,n)=>new j3(e,n,new wae)),t.registerVersion(yae,_ae)}Aae(Ln);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3="firebasestorage.googleapis.com",G3="storageBucket",Sae=2*60*1e3,Iae=10*60*1e3,Rae=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt extends jn{constructor(e,n,r=0){super(dE(e),`Firebase Storage: ${n} (${dE(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dE(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ot;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ot||(Ot={}));function dE(t){return"storage/"+t}function jI(){const t="An unknown error occurred, please check the error payload for server response.";return new Gt(Ot.UNKNOWN,t)}function Cae(t){return new Gt(Ot.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Nae(t){return new Gt(Ot.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Pae(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Gt(Ot.UNAUTHENTICATED,t)}function Dae(){return new Gt(Ot.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function kae(t){return new Gt(Ot.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function $3(){return new Gt(Ot.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function K3(){return new Gt(Ot.CANCELED,"User canceled the upload/download.")}function Oae(t){return new Gt(Ot.INVALID_URL,"Invalid URL '"+t+"'.")}function Mae(t){return new Gt(Ot.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Vae(){return new Gt(Ot.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+G3+"' property when initializing the app?")}function W3(){return new Gt(Ot.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Lae(){return new Gt(Ot.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Uae(){return new Gt(Ot.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function jae(t){return new Gt(Ot.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Vh(t){return new Gt(Ot.INVALID_ARGUMENT,t)}function Y3(){return new Gt(Ot.APP_DELETED,"The Firebase app was deleted.")}function Q3(t){return new Gt(Ot.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xm(t,e){return new Gt(Ot.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function tm(t){throw new Gt(Ot.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=or.makeFromUrl(e,n)}catch{return new or(e,"")}if(r.path==="")return r;throw Mae(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),c={bucket:1,path:3};function h(O){O.path_=decodeURIComponent(O.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${p}/${f}/b/${i}/o${g}`,"i"),R={bucket:1,path:3},N=n===H3?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",b=new RegExp(`^https?://${N}/${i}/${A}`,"i"),E=[{regex:o,indices:c,postModify:s},{regex:_,indices:R,postModify:h},{regex:b,indices:{bucket:1,path:2},postModify:h}];for(let O=0;O<E.length;O++){const j=E[O],q=j.regex.exec(e);if(q){const S=q[j.indices.bucket];let C=q[j.indices.path];C||(C=""),r=new or(S,C),j.postModify(r);break}}if(r==null)throw Oae(e);return r}}class Fae{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zae(t,e,n){let r=1,i=null,s=null,a=!1,o=0;function c(){return o===2}let h=!1;function f(...A){h||(h=!0,e.apply(null,A))}function p(A){i=setTimeout(()=>{i=null,t(_,c())},A)}function g(){s&&clearTimeout(s)}function _(A,...b){if(h){g();return}if(A){g(),f.call(null,A,...b);return}if(c()||a){g(),f.call(null,A,...b);return}r<64&&(r*=2);let E;o===1?(o=2,E=0):E=(r+Math.random())*1e3,p(E)}let R=!1;function N(A){R||(R=!0,g(),!h&&(i!==null?(A||(o=2),clearTimeout(i),p(0)):A||(o=1)))}return p(0),s=setTimeout(()=>{a=!0,N(!0)},n),N}function Bae(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qae(t){return t!==void 0}function Hae(t){return typeof t=="function"}function Gae(t){return typeof t=="object"&&!Array.isArray(t)}function Uw(t){return typeof t=="string"||t instanceof String}function _k(t){return FI()&&t instanceof Blob}function FI(){return typeof Blob<"u"}function Ex(t,e,n,r){if(r<e)throw Vh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Vh(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function X3(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var kc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(kc||(kc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J3(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ae{constructor(e,n,r,i,s,a,o,c,h,f,p,g=!0,_=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=c,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,N)=>{this.resolve_=R,this.reject_=N,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new v_(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const c=o.loaded,h=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,h)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===kc.NO_ERROR,c=s.getStatus();if(!o||J3(c,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===kc.ABORT;r(!1,new v_(!1,null,f));return}const h=this.successCodes_.indexOf(c)!==-1;r(!0,new v_(h,s))})},n=(r,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(o,o.getResponse());qae(c)?s(c):s()}catch(c){a(c)}else if(o!==null){const c=jI();c.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,c)):a(c)}else if(i.canceled){const c=this.appDelete_?Y3():K3();a(c)}else{const c=$3();a(c)}};this.canceled_?n(!1,new v_(!1,null,!0)):this.backoffId_=zae(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Bae(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class v_{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Kae(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Wae(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Yae(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Qae(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Xae(t,e,n,r,i,s,a=!0,o=!1){const c=X3(t.urlParams),h=t.url+c,f=Object.assign({},t.headers);return Yae(f,e),Kae(f,n),Wae(f,s),Qae(f,r),new $ae(h,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jae(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Zae(...t){const e=Jae();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(FI())return new Blob(t);throw new Gt(Ot.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function eoe(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function toe(t){if(typeof atob>"u")throw jae("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class fE{constructor(e,n){this.data=e,this.contentType=n||null}}function Z3(t,e){switch(t){case Li.RAW:return new fE(ej(e));case Li.BASE64:case Li.BASE64URL:return new fE(tj(t,e));case Li.DATA_URL:return new fE(roe(e),ioe(e))}throw jI()}function ej(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=t.charCodeAt(++n);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function noe(t){let e;try{e=decodeURIComponent(t)}catch{throw Xm(Li.DATA_URL,"Malformed data URL.")}return ej(e)}function tj(t,e){switch(t){case Li.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Xm(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Li.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Xm(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=toe(e)}catch(i){throw i.message.includes("polyfill")?i:Xm(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class nj{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Xm(Li.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=soe(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function roe(t){const e=new nj(t);return e.base64?tj(Li.BASE64,e.rest):noe(e.rest)}function ioe(t){return new nj(t).contentType}function soe(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n){let r=0,i="";_k(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(_k(this.data_)){const r=this.data_,i=eoe(r,e,n);return i===null?null:new Ta(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ta(r,!0)}}static getBlob(...e){if(FI()){const n=e.map(r=>r instanceof Ta?r.data_:r);return new Ta(Zae.apply(null,n))}else{const n=e.map(a=>Uw(a)?Z3(Li.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(a=>{for(let o=0;o<a.length;o++)i[s++]=a[o]}),new Ta(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t){let e;try{e=JSON.parse(t)}catch{return null}return Gae(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aoe(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function ooe(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function rj(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function loe(t,e){return e}class pr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||loe}}let w_=null;function coe(t){return!Uw(t)||t.length<2?t:rj(t)}function jw(){if(w_)return w_;const t=[];t.push(new pr("bucket")),t.push(new pr("generation")),t.push(new pr("metageneration")),t.push(new pr("name","fullPath",!0));function e(s,a){return coe(a)}const n=new pr("name");n.xform=e,t.push(n);function r(s,a){return a!==void 0?Number(a):a}const i=new pr("size");return i.xform=r,t.push(i),t.push(new pr("timeCreated")),t.push(new pr("updated")),t.push(new pr("md5Hash",null,!0)),t.push(new pr("cacheControl",null,!0)),t.push(new pr("contentDisposition",null,!0)),t.push(new pr("contentEncoding",null,!0)),t.push(new pr("contentLanguage",null,!0)),t.push(new pr("contentType",null,!0)),t.push(new pr("metadata","customMetadata",!0)),w_=t,w_}function uoe(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new or(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function hoe(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const a=n[s];r[a.local]=a.xform(r,e[a.server])}return uoe(r,t),r}function ij(t,e,n){const r=zI(e);return r===null?null:hoe(t,r,n)}function doe(t,e,n,r){const i=zI(e);if(i===null||!Uw(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(h=>{const f=t.bucket,p=t.fullPath,g="/b/"+a(f)+"/o/"+a(p),_=Pl(g,n,r),R=X3({alt:"media",token:h});return _+R})[0]}function BI(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="prefixes",wk="items";function foe(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[vk])for(const i of n[vk]){const s=i.replace(/\/$/,""),a=t._makeStorageReference(new or(e,s));r.prefixes.push(a)}if(n[wk])for(const i of n[wk]){const s=t._makeStorageReference(new or(e,i.name));r.items.push(s)}return r}function moe(t,e,n){const r=zI(n);return r===null?null:foe(t,e,r)}class eo{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t){if(!t)throw jI()}function Fw(t,e){function n(r,i){const s=ij(t,i,e);return Fs(s!==null),s}return n}function poe(t,e){function n(r,i){const s=moe(t,e,i);return Fs(s!==null),s}return n}function goe(t,e){function n(r,i){const s=ij(t,i,e);return Fs(s!==null),doe(s,i,t.host,t._protocol)}return n}function qd(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Dae():i=Pae():n.getStatus()===402?i=Nae(t.bucket):n.getStatus()===403?i=kae(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function zw(t){const e=qd(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Cae(t.path)),s.serverResponse=i.serverResponse,s}return n}function sj(t,e,n){const r=e.fullServerUrl(),i=Pl(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new eo(i,s,Fw(t,n),a);return o.errorHandler=zw(e),o}function yoe(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=e.bucketOnlyServerUrl(),o=Pl(a,t.host,t._protocol),c="GET",h=t.maxOperationRetryTime,f=new eo(o,c,poe(t,e.bucket),h);return f.urlParams=s,f.errorHandler=qd(e),f}function _oe(t,e,n){const r=e.fullServerUrl(),i=Pl(r,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,o=new eo(i,s,goe(t,n),a);return o.errorHandler=zw(e),o}function voe(t,e,n,r){const i=e.fullServerUrl(),s=Pl(i,t.host,t._protocol),a="PATCH",o=BI(n,r),c={"Content-Type":"application/json; charset=utf-8"},h=t.maxOperationRetryTime,f=new eo(s,a,Fw(t,r),h);return f.headers=c,f.body=o,f.errorHandler=zw(e),f}function woe(t,e){const n=e.fullServerUrl(),r=Pl(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function a(c,h){}const o=new eo(r,i,a,s);return o.successCodes=[200,204],o.errorHandler=zw(e),o}function boe(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function aj(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=boe(null,e)),r}function Toe(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let E="";for(let O=0;O<2;O++)E=E+Math.random().toString().slice(2);return E}const c=o();a["Content-Type"]="multipart/related; boundary="+c;const h=aj(e,r,i),f=BI(h,n),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+c+`\r
Content-Type: `+h.contentType+`\r
\r
`,g=`\r
--`+c+"--",_=Ta.getBlob(p,r,g);if(_===null)throw W3();const R={name:h.fullPath},N=Pl(s,t.host,t._protocol),A="POST",b=t.maxUploadRetryTime,T=new eo(N,A,Fw(t,n),b);return T.urlParams=R,T.headers=a,T.body=_.uploadData(),T.errorHandler=qd(e),T}class gv{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function qI(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Fs(!1)}return Fs(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Eoe(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),a=aj(e,r,i),o={name:a.fullPath},c=Pl(s,t.host,t._protocol),h="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},p=BI(a,n),g=t.maxUploadRetryTime;function _(N){qI(N);let A;try{A=N.getResponseHeader("X-Goog-Upload-URL")}catch{Fs(!1)}return Fs(Uw(A)),A}const R=new eo(c,h,_,g);return R.urlParams=o,R.headers=f,R.body=p,R.errorHandler=qd(e),R}function xoe(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(h){const f=qI(h,["active","final"]);let p=null;try{p=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Fs(!1)}p||Fs(!1);const g=Number(p);return Fs(!isNaN(g)),new gv(g,r.size(),f==="final")}const a="POST",o=t.maxUploadRetryTime,c=new eo(n,a,s,o);return c.headers=i,c.errorHandler=qd(e),c}const bk=256*1024;function Aoe(t,e,n,r,i,s,a,o){const c=new gv(0,0);if(a?(c.current=a.current,c.total=a.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw Lae();const h=c.total-c.current;let f=h;i>0&&(f=Math.min(f,i));const p=c.current,g=p+f;let _="";f===0?_="finalize":h===f?_="upload, finalize":_="upload";const R={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":`${c.current}`},N=r.slice(p,g);if(N===null)throw W3();function A(O,j){const q=qI(O,["active","final"]),S=c.current+f,C=r.size();let k;return q==="final"?k=Fw(e,s)(O,j):k=null,new gv(S,C,q==="final",k)}const b="POST",T=e.maxUploadRetryTime,E=new eo(n,b,A,T);return E.headers=R,E.body=N.uploadData(),E.progressCallback=o||null,E.errorHandler=qd(t),E}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Soe={STATE_CHANGED:"state_changed"},vr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function mE(t){switch(t){case"running":case"pausing":case"canceling":return vr.RUNNING;case"paused":return vr.PAUSED;case"success":return vr.SUCCESS;case"canceled":return vr.CANCELED;case"error":return vr.ERROR;default:return vr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ioe{constructor(e,n,r){if(Hae(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Roe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=kc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=kc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=kc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw tm("cannot .send() more than once");if(Ys(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tm("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tm("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw tm("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tm("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Coe extends Roe{initXhr(){this.xhr_.responseType="text"}}function Rs(){return new Coe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=jw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Ot.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(J3(i.status,[]))if(s)i=$3();else{this.sleepTime=Math.max(this.sleepTime*2,Rae),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Ot.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Eoe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Rs,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=xoe(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Rs,n,r);this._request=s,s.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=bk*this._chunkMultiplier,n=new gv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let a;try{a=Aoe(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const o=this._ref.storage._makeRequest(a,Rs,i,s,!1);this._request=o,o.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){bk*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=sj(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Rs,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=Toe(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Rs,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=K3(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=mE(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new Ioe(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(mE(this._state)){case vr.SUCCESS:Qu(this._resolve.bind(null,this.snapshot))();break;case vr.CANCELED:case vr.ERROR:const n=this._reject;Qu(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(mE(this._state)){case vr.RUNNING:case vr.PAUSED:e.next&&Qu(e.next.bind(e,this.snapshot))();break;case vr.SUCCESS:e.complete&&Qu(e.complete.bind(e))();break;case vr.CANCELED:case vr.ERROR:e.error&&Qu(e.error.bind(e,this._error))();break;default:e.error&&Qu(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n){this._service=e,n instanceof or?this._location=n:this._location=or.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Jc(e,n)}get root(){const e=new or(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rj(this._location.path)}get storage(){return this._service}get parent(){const e=aoe(this._location.path);if(e===null)return null;const n=new or(this._location.bucket,e);return new Jc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Q3(e)}}function Noe(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new oj(t,new Ta(e),n)}function Poe(t){const e={prefixes:[],items:[]};return lj(t,e).then(()=>e)}async function lj(t,e,n){const i=await cj(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await lj(t,e,i.nextPageToken)}function cj(t,e){e!=null&&typeof e.maxResults=="number"&&Ex("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=yoe(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,Rs)}function Doe(t){t._throwIfRoot("getMetadata");const e=sj(t.storage,t._location,jw());return t.storage.makeRequestWithTokens(e,Rs)}function koe(t,e){t._throwIfRoot("updateMetadata");const n=voe(t.storage,t._location,e,jw());return t.storage.makeRequestWithTokens(n,Rs)}function Ooe(t){t._throwIfRoot("getDownloadURL");const e=_oe(t.storage,t._location,jw());return t.storage.makeRequestWithTokens(e,Rs).then(n=>{if(n===null)throw Uae();return n})}function Moe(t){t._throwIfRoot("deleteObject");const e=woe(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Rs)}function uj(t,e){const n=ooe(t._location.path,e),r=new or(t._location.bucket,n);return new Jc(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Voe(t){return/^[A-Za-z]+:\/\//.test(t)}function Loe(t,e){return new Jc(t,e)}function hj(t,e){if(t instanceof HI){const n=t;if(n._bucket==null)throw Vae();const r=new Jc(n,n._bucket);return e!=null?hj(r,e):r}else return e!==void 0?uj(t,e):t}function Uoe(t,e){if(e&&Voe(e)){if(t instanceof HI)return Loe(t,e);throw Vh("To use ref(service, url), the first argument must be a Storage instance.")}else return hj(t,e)}function Tk(t,e){const n=e==null?void 0:e[G3];return n==null?null:or.makeFromBucketSpec(n,t)}function joe(t,e,n,r={}){t.host=`${e}:${n}`;const i=Ys(e);i&&(tS(`https://${t.host}/b`),nS("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:V5(s,t.app.options.projectId))}class HI{constructor(e,n,r,i,s,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=H3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Sae,this._maxUploadRetryTime=Iae,this._requests=new Set,i!=null?this._bucket=or.makeFromBucketSpec(i,this._host):this._bucket=Tk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=or.makeFromBucketSpec(this._url,e):this._bucket=Tk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ex("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ex("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(it(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jc(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Fae(Y3());{const a=Xae(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Ek="@firebase/storage",xk="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Foe="storage";function zoe(t,e,n){return t=ye(t),Noe(t,e,n)}function Boe(t){return t=ye(t),Doe(t)}function qoe(t,e){return t=ye(t),koe(t,e)}function Hoe(t,e){return t=ye(t),cj(t,e)}function Goe(t){return t=ye(t),Poe(t)}function $oe(t){return t=ye(t),Ooe(t)}function Koe(t){return t=ye(t),Moe(t)}function Ak(t,e){return t=ye(t),Uoe(t,e)}function Woe(t,e){return uj(t,e)}function Yoe(t,e,n,r={}){joe(t,e,n,r)}function Qoe(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new HI(n,r,i,e,Hi)}function Xoe(){os(new qr(Foe,Qoe,"PUBLIC").setMultipleInstances(!0)),br(Ek,xk,""),br(Ek,xk,"esm2020")}Xoe();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new b_(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new b_(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=a=>n(new b_(a,this,this._ref)):s={next:n.next?a=>n.next(new b_(a,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class Ik{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new ka(e,this._service))}get items(){return this._delegate.items.map(e=>new ka(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=Woe(this._delegate,e);return new ka(n,this.storage)}get root(){return new ka(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new ka(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new Sk(zoe(this._delegate,e,n),this)}putString(e,n=Li.RAW,r){this._throwIfRoot("putString");const i=Z3(n,e),s={...r};return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new Sk(new oj(this._delegate,new Ta(i.data,!0),s),this)}listAll(){return Goe(this._delegate).then(e=>new Ik(e,this.storage))}list(e){return Hoe(this._delegate,e||void 0).then(n=>new Ik(n,this.storage))}getMetadata(){return Boe(this._delegate)}updateMetadata(e){return qoe(this._delegate,e)}getDownloadURL(){return $oe(this._delegate)}delete(){return this._throwIfRoot("delete"),Koe(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw Q3(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Rk(e))throw Vh("ref() expected a child path but got a URL, use refFromURL instead.");return new ka(Ak(this._delegate,e),this)}refFromURL(e){if(!Rk(e))throw Vh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{or.makeFromUrl(e,this._delegate.host)}catch{throw Vh("refFromUrl() expected a valid full URL but got an invalid one.")}return new ka(Ak(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){Yoe(this._delegate,e,n,r)}}function Rk(t){return/^[A-Za-z]+:\/\//.test(t)}const Joe="@firebase/storage-compat",Zoe="0.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ele="storage-compat";function tle(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new dj(n,r)}function nle(t){const e={TaskState:vr,TaskEvent:Soe,StringFormat:Li,Storage:dj,Reference:ka};t.INTERNAL.registerComponent(new qr(ele,tle,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(Joe,Zoe)}nle(Ln);const rle={apiKey:"AIzaSyDzEay5fGB-2r5_V9UXOO8cOv-nJdHwDRg",authDomain:"rush-coffee.firebaseapp.com",projectId:"rush-coffee",storageBucket:"rush-coffee.appspot.com",messagingSenderId:"423413538635",appId:"1:423413538635:web:ded0369f50c3a9086bd2ce"};Ln.apps.length||Ln.initializeApp(rle);const ir=Ln.auth(),Rt=Ln.firestore(),ipe=Ln.storage();var vn=(t=>(t.ADMIN="admin",t.EMPLOYEE="employee",t.CUSTOMER="customer",t))(vn||{});const fj=P.createContext(void 0),Xs=()=>{const t=P.useContext(fj);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},pE=async t=>{var i,s,a;const e=Rt.collection("users").doc(t),n=await e.get();if(!n.exists){console.log(`Creating missing Firestore profile for user: ${t}`);const o=ir.currentUser;if(!o)throw new Error("User not authenticated");const c=((i=o.displayName)==null?void 0:i.split(" "))||["User",""],h=c[0],f=c.slice(1).join(" ")||"",p={email:o.email||"",displayName:o.displayName||`${h} ${f}`,firstName:h,lastName:f,phone:o.phoneNumber||"",photoURL:o.photoURL||void 0,createdAt:new Date,role:vn.CUSTOMER,totalOrders:0,totalSpent:0,currentPoints:0,lifetimePoints:0,loyaltyPoints:0,tier:"bronze",rewardsHistory:[],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await e.set(p);const _=(await e.get()).data();return{uid:t,email:_.email,displayName:_.displayName,firstName:_.firstName||"User",lastName:_.lastName||"",phone:_.phone||"",photoURL:_.photoURL,createdAt:((s=_.createdAt)==null?void 0:s.toDate())||new Date,role:_.role,totalOrders:_.totalOrders??0,totalSpent:_.totalSpent??0,currentPoints:_.currentPoints??0,lifetimePoints:_.lifetimePoints??0,loyaltyPoints:_.loyaltyPoints??0,tier:_.tier||"bronze",rewardsHistory:(_.rewardsHistory||[]).map(R=>({...R,date:R.date&&typeof R.date.toDate=="function"?R.date.toDate():R.date})).sort((R,N)=>{const A=R.date instanceof Date?R.date:new Date(R.date);return(N.date instanceof Date?N.date:new Date(N.date)).getTime()-A.getTime()}),preferences:_.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}}}const r=n.data();return{uid:t,email:r.email,displayName:r.displayName||`${r.firstName} ${r.lastName}`,firstName:r.firstName||"User",lastName:r.lastName||"",phone:r.phone||"",photoURL:r.photoURL,createdAt:((a=r.createdAt)==null?void 0:a.toDate())||new Date,role:r.role,totalOrders:r.totalOrders??0,totalSpent:r.totalSpent??0,currentPoints:r.currentPoints??0,lifetimePoints:r.lifetimePoints??0,loyaltyPoints:r.loyaltyPoints??0,tier:r.tier||"bronze",rewardsHistory:(r.rewardsHistory||[]).map(o=>({...o,date:o.date&&typeof o.date.toDate=="function"?o.date.toDate():o.date})).sort((o,c)=>{const h=o.date instanceof Date?o.date:new Date(o.date);return(c.date instanceof Date?c.date:new Date(c.date)).getTime()-h.getTime()}),preferences:r.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}}},ile=({children:t})=>{const[e,n]=P.useState(null),[r,i]=P.useState(!0);P.useEffect(()=>{let b;const T=ir.onAuthStateChanged(async E=>{b&&b(),E?b=Rt.collection("users").doc(E.uid).onSnapshot(j=>{var q;if(j.exists){const S=j.data(),C={uid:E.uid,email:E.email,firstName:S.firstName||"User",lastName:S.lastName||"",phone:S.phone||"",photoURL:S.photoURL,createdAt:((q=S.createdAt)==null?void 0:q.toDate())||new Date,role:S.role,totalOrders:S.totalOrders??0,totalSpent:S.totalSpent??0,currentPoints:S.currentPoints??0,lifetimePoints:S.lifetimePoints??0,tier:S.tier||"bronze",rewardsHistory:(S.rewardsHistory||[]).map(k=>({...k,date:k.date&&typeof k.date.toDate=="function"?k.date.toDate():k.date})).sort((k,M)=>{const U=k.date instanceof Date?k.date:new Date(k.date);return(M.date instanceof Date?M.date:new Date(M.date)).getTime()-U.getTime()}),preferences:S.preferences||{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}};n(C)}else{const S={uid:E.uid,email:E.email,firstName:"User",lastName:"",createdAt:new Date,role:vn.CUSTOMER,totalOrders:0,totalSpent:0,currentPoints:0,lifetimePoints:0,tier:"bronze",rewardsHistory:[],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}}};n(S)}i(!1)},j=>{console.error("Error listening to user document:",j),i(!1)}):(n(null),i(!1))});return()=>{T(),b&&b()}},[]);const A={currentUser:e,loading:r,register:async(b,T,E,O,j)=>{const S=(await ir.createUserWithEmailAndPassword(b,T)).user,C={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},k={firstName:E,lastName:O,phone:j||"",createdAt:new Date,role:vn.CUSTOMER,totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[C],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};return await Rt.collection("users").doc(S.uid).set(k),pE(S.uid)},login:async(b,T,E)=>{var j;if(b==="test@test.com"&&T==="123456"){const q="test-user-id";return sessionStorage.setItem(`dev_verification_code_${q}`,"123456"),sessionStorage.setItem("requires2FA","true"),{needsVerification:!0,userId:q,email:b,role:vn.CUSTOMER}}const O=E?Ln.auth.Auth.Persistence.LOCAL:Ln.auth.Auth.Persistence.SESSION;await ir.setPersistence(O),sessionStorage.setItem("requires2FA","true");try{const S=(await ir.signInWithEmailAndPassword(b,T)).user.uid,C=Math.floor(1e5+Math.random()*9e5).toString(),k=new Date(Date.now()+10*60*1e3);try{await Rt.collection("emailVerifications").doc(S).set({code:C,email:b,createdAt:new Date,expiresAt:k,verified:!1})}catch{sessionStorage.setItem(`dev_verification_code_${S}`,C)}console.log(` Verification code for ${b}: ${C}`);let M;try{M=(j=(await Rt.collection("users").doc(S).get()).data())==null?void 0:j.role}catch{M=vn.CUSTOMER}return{needsVerification:!0,userId:S,email:b,role:M}}catch(q){throw sessionStorage.removeItem("requires2FA"),q}},logout:async()=>{await ir.signOut()},sendPasswordReset:async b=>{await ir.sendPasswordResetEmail(b)},signInWithGoogle:async()=>{var j;const b=new Ln.auth.GoogleAuthProvider;b.setCustomParameters({prompt:"select_account"});const T=await ir.signInWithPopup(b),E=T.user,O=T.additionalUserInfo;if(O!=null&&O.isNewUser){const q=((j=E.displayName)==null?void 0:j.split(" "))||["New","User"],S=q[0],C=q.slice(1).join(" ")||"",k={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},M={firstName:S,lastName:C,photoURL:E.photoURL||void 0,createdAt:new Date,role:vn.CUSTOMER,totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[k],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await Rt.collection("users").doc(E.uid).set(M)}return pE(E.uid)},signInWithFacebook:async()=>{var j;const b=new Ln.auth.FacebookAuthProvider,T=await ir.signInWithPopup(b),E=T.user,O=T.additionalUserInfo;if(O!=null&&O.isNewUser){const q=((j=E.displayName)==null?void 0:j.split(" "))||["New","User"],S=q[0],C=q.slice(1).join(" ")||"",k={id:`rh-${Date.now()}`,type:"earned",points:25,description:"Welcome Bonus",date:new Date},M={firstName:S,lastName:C,photoURL:E.photoURL||void 0,createdAt:new Date,role:vn.CUSTOMER,totalOrders:0,totalSpent:0,currentPoints:25,lifetimePoints:25,tier:"bronze",rewardsHistory:[k],preferences:{notifications:{push:!0,emailUpdates:!0,marketing:!1},theme:"auto",privacy:{shareUsageData:!0,personalizedRecs:!0}},cart:[]};await Rt.collection("users").doc(E.uid).set(M)}return pE(E.uid)},updateUserProfile:async b=>{e&&await Rt.collection("users").doc(e.uid).update(b)},updateUserPhoto:async b=>{e&&await Rt.collection("users").doc(e.uid).update({photoURL:b})},sendEmailVerificationCode:async(b,T)=>{const E=Math.floor(1e5+Math.random()*9e5).toString(),O=new Date(Date.now()+10*60*1e3);try{await Rt.collection("emailVerifications").doc(b).set({code:E,email:T,createdAt:new Date,expiresAt:O})}catch{sessionStorage.setItem(`dev_verification_code_${b}`,E)}console.log(` Verification code for ${T}: ${E}`)},verifyEmailCode:async(b,T)=>{try{const O=Rt.collection("emailVerifications").doc(b),j=await O.get();if(j.exists){const q=j.data();if(q){const S=new Date,C=q.expiresAt.toDate();if(S>C)return!1;if(q.code===T)return await O.update({verified:!0}),!0}}}catch{}return sessionStorage.getItem(`dev_verification_code_${b}`)===T},updateUserPassword:async(b,T)=>{const E=ir.currentUser;if(!E||!E.email)throw new Error("No user logged in");const O=Ln.auth.EmailAuthProvider.credential(E.email,b);await E.reauthenticateWithCredential(O),await E.updatePassword(T)}};return y.jsx(fj.Provider,{value:A,children:!r&&t})},sle=()=>y.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),y.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),y.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),y.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),ale=()=>y.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"#1877F2",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),ole=({onForgotPassword:t,onRegister:e,onSuccess:n,onVerificationNeeded:r})=>{const[i,s]=P.useState(""),[a,o]=P.useState(""),[c,h]=P.useState(!1),[f,p]=P.useState(!1),[g,_]=P.useState(!1),[R,N]=P.useState(!1),[A,b]=P.useState(!1),[T,E]=P.useState(null),{login:O,signInWithGoogle:j,signInWithFacebook:q}=Xs(),S=async M=>{if(M.preventDefault(),!i||!a){E("Please fill in all fields");return}_(!0),E(null),console.log(" LoginForm submitting:",{email:i,password:a,rememberMe:c});try{const U=await O(i,a,c);sessionStorage.removeItem("requires2FA"),n(U.role)}catch(U){console.error("Login error:",U),U.code==="auth/invalid-credential"||U.code==="auth/user-not-found"||U.code==="auth/wrong-password"?E("Incorrect email or password."):E("Failed to login. Please try again.")}finally{_(!1)}},C=async()=>{N(!0),E(null);try{const M=await j();n(M.role)}catch(M){console.error("Google Sign-In Error:",M),M.code==="auth/popup-closed-by-user"?E("Sign-in cancelled."):M.code==="auth/popup-blocked"?E("Pop-up blocked. Please allow pop-ups for this site."):M.code==="auth/operation-not-allowed"?E("Google Sign-In is not enabled in Firebase Console."):E(M.message||"Failed to sign in with Google")}finally{N(!1)}},k=async()=>{b(!0),E(null);try{const M=await q();n(M.role)}catch(M){console.error("Facebook Sign-In Error:",M),M.code==="auth/popup-closed-by-user"?E("Sign-in cancelled."):M.code==="auth/popup-blocked"?E("Pop-up blocked. Please allow pop-ups for this site."):M.code==="auth/operation-not-allowed"?E("Facebook Sign-In is not enabled in Firebase Console."):M.code==="auth/account-exists-with-different-credential"?E("An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."):E(M.message||"Failed to sign in with Facebook")}finally{b(!1)}};return y.jsxs("div",{className:"w-full max-w-md mx-auto",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx(Ws,{className:"mx-auto h-16 w-16 text-primary-600 mb-4"}),y.jsx("h2",{className:"font-display text-4xl font-bold text-gray-900",children:"Rush Coffee"})]}),y.jsxs("form",{onSubmit:S,className:"space-y-4",children:[T&&y.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-800 border border-red-200",children:[y.jsx(Mm,{className:"h-5 w-5 flex-shrink-0"}),y.jsx("span",{children:T})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),y.jsxs("div",{className:"relative",children:[y.jsx(bp,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),y.jsx("input",{type:"email",value:i,onChange:M=>s(M.target.value),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"name@example.com"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),y.jsxs("div",{className:"relative",children:[y.jsx(P1,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),y.jsx("input",{type:f?"text":"password",value:a,onChange:M=>o(M.target.value),className:"w-full pl-12 pr-12 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter your password"}),y.jsx("button",{type:"button",onClick:()=>p(!f),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:f?y.jsx(A5,{className:"h-5 w-5"}):y.jsx(S5,{className:"h-5 w-5"})})]})]}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("label",{className:"flex items-center cursor-pointer",children:[y.jsx("input",{type:"checkbox",checked:c,onChange:M=>h(M.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),y.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Remember me"})]}),y.jsx("button",{type:"button",onClick:()=>t(i),className:"text-sm text-primary-600 hover:text-primary-700 font-medium transition-colors",children:"Forgot your password?"})]}),y.jsx("button",{type:"submit",disabled:g,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3.5 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:g?y.jsxs("span",{className:"flex items-center justify-center gap-2",children:[y.jsx(si,{className:"h-5 w-5 animate-spin"}),"Logging in..."]}):"Login"}),y.jsxs("div",{className:"relative my-6",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-gray-200"})}),y.jsx("div",{className:"relative flex justify-center text-sm",children:y.jsx("span",{className:"px-4 bg-white text-gray-500",children:"Or continue with"})})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("button",{type:"button",onClick:C,disabled:R||A,className:"flex items-center justify-center gap-2 border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 py-3.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[R?y.jsx(si,{className:"h-5 w-5 animate-spin"}):y.jsx(sle,{}),y.jsx("span",{className:"font-semibold text-gray-700",children:"Google"})]}),y.jsxs("button",{type:"button",onClick:k,disabled:R||A,className:"flex items-center justify-center gap-2 border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 py-3.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[A?y.jsx(si,{className:"h-5 w-5 animate-spin"}):y.jsx(ale,{}),y.jsx("span",{className:"font-semibold text-gray-700",children:"Facebook"})]})]}),y.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Don't have an account?"," ",y.jsx("button",{type:"button",onClick:e,className:"text-primary-600 font-semibold hover:text-primary-700 transition-colors",children:"Sign up"})]})]})]})},mj=P.createContext(void 0),lle=()=>{const t=P.useContext(mj);return t||{executeRecaptcha:async()=>"mock-token"}},cle=({children:t})=>{const e=async()=>(console.log("ReCaptcha executed (mock)"),"mock-recaptcha-token");return y.jsx(mj.Provider,{value:{executeRecaptcha:e},children:t})};function pj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ule=pj,gj=new Qs("auth","Firebase",pj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=new ug("@firebase/auth");function hle(t,...e){yv.logLevel<=ze.WARN&&yv.warn(`Auth (${Hi}): ${t}`,...e)}function a0(t,...e){yv.logLevel<=ze.ERROR&&yv.error(`Auth (${Hi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(t,...e){throw GI(t,...e)}function yj(t,...e){return GI(t,...e)}function _j(t,e,n){const r={...ule(),[e]:n};return new Qs("auth","Firebase",r).create(e,{appName:t.name})}function o0(t){return _j(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function GI(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gj.create(t,...e)}function rt(t,e,...n){if(!t)throw GI(e,...n)}function Jm(t){const e="INTERNAL ASSERTION FAILED: "+t;throw a0(e),new Error(e)}function _v(t,e){t||Jm(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dle(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function vj(){return Nk()==="http:"||Nk()==="https:"}function Nk(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fle(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vj()||rS()||"connection"in navigator)?navigator.onLine:!0}function mle(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,n){this.shortDelay=e,this.longDelay=n,_v(n>e,"Short delay should be less than long delay!"),this.isMobile=L5()||ew()}get(){return fle()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ple(t,e){_v(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jm("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jm("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jm("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gle={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yle=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_le=new kg(3e4,6e4);function $I(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Og(t,e,n,r,i={}){return bj(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=xl({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:c,...s};return j5()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Ys(t.emulatorConfig.host)&&(h.credentials="include"),wj.fetch()(await Tj(t,t.config.apiHost,n,o),h)})}async function bj(t,e,n){t._canInitEmulator=!1;const r={...gle,...e};try{const i=new vle(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw T_(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[c,h]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw T_(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw T_(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw T_(t,"user-disabled",a);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw _j(t,f,h);Ck(t,f)}}catch(i){if(i instanceof jn)throw i;Ck(t,"network-request-failed",{message:String(i)})}}async function Tj(t,e,n,r){const i=`${e}${n}?${r}`,s=t,a=s.config.emulator?ple(t.config,i):`${t.config.apiScheme}://${i}`;return yle.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class vle{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yj(this.auth,"network-request-failed")),_le.get())})}}function T_(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=yj(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wle(t,e){return Og(t,"POST","/v1/accounts:delete",e)}async function vv(t,e){return Og(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ble(t,e=!1){const n=ye(t),r=await n.getIdToken(e),i=Ej(r);rt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Zm(gE(i.auth_time)),issuedAtTime:Zm(gE(i.iat)),expirationTime:Zm(gE(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function gE(t){return Number(t)*1e3}function Ej(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return a0("JWT malformed, contained fewer than 3 sections"),null;try{const i=Jv(n);return i?JSON.parse(i):(a0("Failed to decode base64 JWT payload"),null)}catch(i){return a0("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Pk(t){const e=Ej(t);return rt(e,"internal-error"),rt(typeof e.exp<"u","internal-error"),rt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xx(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof jn&&Tle(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Tle({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ele{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zm(this.lastLoginAt),this.creationTime=Zm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wv(t){var p;const e=t.auth,n=await t.getIdToken(),r=await xx(t,vv(e,{idToken:n}));rt(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(p=i.providerUserInfo)!=null&&p.length?xj(i.providerUserInfo):[],a=Ale(t.providerData,s),o=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=o?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Ax(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function xle(t){const e=ye(t);await wv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ale(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function xj(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sle(t,e){const n=await bj(t,{},async()=>{const r=xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=await Tj(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return t.emulatorConfig&&Ys(t.emulatorConfig.host)&&(c.credentials="include"),wj.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ile(t,e){return Og(t,"POST","/v2/accounts:revokeToken",$I(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){rt(e.idToken,"internal-error"),rt(typeof e.idToken<"u","internal-error"),rt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){rt(e.length!==0,"internal-error");const n=Pk(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(rt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Sle(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new Lh;return r&&(rt(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(rt(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(rt(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lh,this.toJSON())}_performRefresh(){return Jm("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(t,e){rt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ms{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Ele(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ax(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await xx(this,this.stsTokenManager.getToken(this.auth,e));return rt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ble(this,e)}reload(){return xle(this)}_assign(e){this!==e&&(rt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ms({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await wv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(it(this.auth.app))return Promise.reject(o0(this.auth));const e=await this.getIdToken();return await xx(this,wle(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,o=n.tenantId??void 0,c=n._redirectEventId??void 0,h=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:_,providerData:R,stsTokenManager:N}=n;rt(p&&N,e,"internal-error");const A=Lh.fromJSON(this.name,N);rt(typeof p=="string",e,"internal-error"),So(r,e.name),So(i,e.name),rt(typeof g=="boolean",e,"internal-error"),rt(typeof _=="boolean",e,"internal-error"),So(s,e.name),So(a,e.name),So(o,e.name),So(c,e.name),So(h,e.name),So(f,e.name);const b=new Ms({uid:p,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:_,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:A,createdAt:h,lastLoginAt:f});return R&&Array.isArray(R)&&(b.providerData=R.map(T=>({...T}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,n,r=!1){const i=new Lh;i.updateFromServerResponse(n);const s=new Ms({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await wv(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];rt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?xj(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new Lh;o.updateFromIdToken(r);const c=new Ms({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ax(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=new Map;function Ec(t){_v(t instanceof Function,"Expected a class definition");let e=Dk.get(t);return e?(_v(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Dk.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Aj.type="NONE";const kk=Aj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t,e,n){return`firebase:${t}:${e}:${n}`}class Uh{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=yE(this.userKey,i.apiKey,s),this.fullPersistenceKey=yE("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await vv(this.auth,{idToken:e}).catch(()=>{});return n?Ms._fromGetAccountInfoResponse(this.auth,n,e):null}return Ms._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Uh(Ec(kk),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Ec(kk);const a=yE(r,e.config.apiKey,e.name);let o=null;for(const h of n)try{const f=await h._get(a);if(f){let p;if(typeof f=="string"){const g=await vv(e,{idToken:f}).catch(()=>{});if(!g)break;p=await Ms._fromGetAccountInfoResponse(e,g,f)}else p=Ms._fromJSON(e,f);h!==s&&(o=p),s=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Uh(s,e,r):(s=c[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Uh(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ple(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Rle(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kle(e))return"Blackberry";if(Ole(e))return"Webos";if(Cle(e))return"Safari";if((e.includes("chrome/")||Nle(e))&&!e.includes("edge/"))return"Chrome";if(Dle(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Rle(t=tt()){return/firefox\//i.test(t)}function Cle(t=tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Nle(t=tt()){return/crios\//i.test(t)}function Ple(t=tt()){return/iemobile/i.test(t)}function Dle(t=tt()){return/android/i.test(t)}function kle(t=tt()){return/blackberry/i.test(t)}function Ole(t=tt()){return/webos/i.test(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sj(t,e=[]){let n;switch(t){case"Browser":n=Ok(tt());break;case"Worker":n=`${Ok(tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mle{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,o)=>{try{const c=e(s);a(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vle(t,e={}){return Og(t,"GET","/v2/passwordPolicy",$I(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lle=6;class Ule{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Lle,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jle{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mk(this),this.idTokenSubscription=new Mk(this),this.beforeStateQueue=new Mle(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ec(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Uh.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await vv(this,{idToken:e}),r=await Ms._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(it(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return rt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await wv(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mle()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(it(this.app))return Promise.reject(o0(this));const n=e?ye(e):null;return n&&rt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&rt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return it(this.app)?Promise.reject(o0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return it(this.app)?Promise.reject(o0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ec(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Vle(this),n=new Ule(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Ile(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ec(e)||this._popupRedirectResolver;rt(n,this,"argument-error"),this.redirectPersistenceManager=await Uh.create(this,[Ec(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(rt(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(it(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&hle(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Fle(t){return ye(t)}class Mk{constructor(e){this.auth=e,this.observer=null,this.addObserver=iS(n=>this.observer=n)}get next(){return rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function zle(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ec);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ble(t,e){return Og(t,"POST","/v1/accounts:createAuthUri",$I(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qle(t,e){const n=vj()?dle():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await Ble(ye(t),r);return i||[]}new kg(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new kg(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new kg(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new kg(5e3,15e3);var Vk="@firebase/auth",Lk="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hle{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gle(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $le(t){os(new qr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;rt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sj(t)},h=new jle(r,i,s,c);return zle(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),os(new qr("auth-internal",e=>{const n=Fle(e.getProvider("auth").getImmediate());return(r=>new Hle(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),br(Vk,Lk,Gle(t)),br(Vk,Lk,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kle=5*60;M5("authIdTokenMaxAge");$le("Browser");const Wle=({onLogin:t,onSuccess:e,onVerificationNeeded:n})=>{const[r,i]=P.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""}),[s,a]=P.useState(!1),[o,c]=P.useState(!1),[h,f]=P.useState(null),[p,g]=P.useState(!1),[_,R]=P.useState(!1),[N,A]=P.useState("idle"),[b,T]=P.useState({score:0,label:"",color:"bg-gray-200"}),[E,O]=P.useState({email:"",password:"",phone:""}),{register:j}=Xs(),{executeRecaptcha:q}=lle();oi.useEffect(()=>{window.debugRegister=j},[j]),oi.useEffect(()=>{const U=setTimeout(async()=>{if(!r.email||!r.email.includes("@")){A("idle");return}A("checking");try{(await qle(ir,r.email)).length>0?(A("taken"),O(F=>({...F,email:"This email is already in use."}))):(A("available"),O(F=>({...F,email:""})))}catch(B){console.error("Error checking email:",B),A("idle")}},500);return()=>clearTimeout(U)},[r.email]);const S=M=>{let U=0;return M?(M.length>=6&&U++,M.length>=10&&U++,/[A-Z]/.test(M)&&U++,/[0-9]/.test(M)&&U++,/[^A-Za-z0-9]/.test(M)&&U++,U<=2?{score:U,label:"Weak",color:"bg-red-500"}:U<=4?{score:U,label:"Good",color:"bg-yellow-500"}:{score:U,label:"Strong",color:"bg-green-500"}):{score:0,label:"",color:"bg-gray-200"}},C=M=>{const U=M.target.value;i({...r,password:U}),T(S(U)),E.password&&O(B=>({...B,password:""}))};oi.useEffect(()=>{if(!p)return;let M,U;return M=setInterval(async()=>{if(ir.currentUser)try{await ir.currentUser.reload();const F=["admin@rushcoffee.ph","sa@gmail.com"];(ir.currentUser.emailVerified||F.includes(ir.currentUser.email||""))&&(R(!0),clearInterval(M),clearTimeout(U),setTimeout(()=>{window.location.href="#/menu"},1e3))}catch(F){console.error("Error checking verification:",F)}},3e3),U=setTimeout(()=>{clearInterval(M)},6e5),()=>{clearInterval(M),clearTimeout(U)}},[p]);const k=async M=>{try{if(f(""),c(!0),r.password!==r.confirmPassword){O(me=>({...me,password:"Passwords do not match"})),c(!1);return}if(!r.email.endsWith("@gmail.com")){O(me=>({...me,email:"Please use a valid @gmail.com address"})),c(!1);return}if(N==="taken"){O(me=>({...me,email:"This email is already registered."})),c(!1);return}if(r.phone&&!/^\+63 9\d{2} \d{3} \d{4}$/.test(r.phone)){O(ie=>({...ie,phone:"Please enter a valid PH phone number (+63 9xx xxx xxxx)."})),c(!1);return}const U=await q();console.log("ReCaptcha token:",U);const B=r.email.trim();console.log(`Attempting registration with email: '${B}'`);const F=await j(B,r.password,r.firstName,r.lastName,r.phone),ne=ir.currentUser;ne&&(await ne.sendEmailVerification(),console.log(" Verification email sent to:",B)),f(""),c(!1),g(!0)}catch(U){console.error("Registration error:",U);let B="Failed to create account. Please try again.",F=!1;U.code==="auth/email-already-in-use"?(O(ne=>({...ne,email:"This email is already registered. Please login or use a different email."})),F=!0):U.code==="auth/invalid-email"?(O(ne=>({...ne,email:"Please enter a valid email address."})),F=!0):U.code==="auth/weak-password"?(O(ne=>({...ne,password:"Password is too weak. Please use at least 6 characters."})),F=!0):U.code==="auth/missing-password"?(O(ne=>({...ne,password:"Please enter a password."})),F=!0):U.message&&(B=U.message.replace("Firebase: ","").replace(/\(auth\/.*\)\.?/,"").trim()),F||f(B),c(!1)}};return p?_?y.jsxs("div",{className:"w-full max-w-md mx-auto text-center py-8",children:[y.jsx("div",{className:"mb-6 flex justify-center",children:y.jsx("div",{className:"rounded-full bg-green-100 p-4 animate-pulse",children:y.jsx(TY,{className:"h-12 w-12 text-green-600"})})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Email Verified!"}),y.jsx("p",{className:"text-gray-600 mb-6",children:"Taking you to the menu..."}),y.jsx("div",{className:"flex justify-center",children:y.jsx(si,{className:"h-8 w-8 animate-spin text-primary-600"})})]}):y.jsxs("div",{className:"w-full max-w-md mx-auto text-center py-8",children:[y.jsx("div",{className:"mb-6 flex justify-center",children:y.jsx("div",{className:"rounded-full bg-blue-100 p-4 animate-bounce-slow",children:y.jsx(bp,{className:"h-12 w-12 text-blue-600"})})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Check your email"}),y.jsxs("p",{className:"text-gray-600 mb-6",children:["We've sent a verification link to ",y.jsx("span",{className:"font-semibold text-gray-900",children:r.email})]}),y.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-5 mb-6",children:[y.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[y.jsx(si,{className:"h-5 w-5 animate-spin text-blue-600"}),y.jsx("h4",{className:"font-semibold text-blue-900",children:"Waiting for verification..."})]}),y.jsx("p",{className:"text-sm text-blue-800",children:"Click the link in your email and we'll automatically log you in!"})]}),y.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4 mb-8 text-left",children:[y.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[y.jsx(Mm,{className:"h-4 w-4 text-gray-600"}),"Next Steps:"]}),y.jsxs("ol",{className:"list-decimal list-inside text-sm text-gray-700 space-y-1.5 ml-1",children:[y.jsx("li",{children:"Check your email inbox (and spam folder)"}),y.jsx("li",{children:"Click the verification link"}),y.jsx("li",{children:"Close the verification tab and return here"}),y.jsx("li",{children:"You'll be automatically logged in!"})]})]}),y.jsxs("p",{className:"text-sm text-gray-500",children:["Didn't receive the email? ",y.jsx("button",{className:"text-primary-600 font-medium hover:underline",children:"Resend"})]})]}):y.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[y.jsxs("div",{className:"text-center mb-6",children:[y.jsx(Ws,{className:"mx-auto h-16 w-16 text-primary-600 mb-4"}),y.jsx("h2",{className:"font-display text-4xl font-bold text-gray-900",children:"Join Rush Coffee"}),y.jsxs("p",{className:"mt-2 text-gray-600 flex items-center justify-center gap-1",children:["Start skipping the line today ",y.jsx("span",{children:""})]})]}),y.jsxs("div",{onKeyDown:M=>M.key==="Enter"&&k(),className:"space-y-4",children:[h&&y.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-800 border border-red-200",children:[y.jsx(Mm,{className:"h-5 w-5 flex-shrink-0"}),y.jsx("span",{children:h})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),y.jsxs("div",{className:"relative",children:[y.jsx(k1,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),y.jsx("input",{type:"text",required:!0,value:r.firstName,onChange:M=>i({...r,firstName:M.target.value.replace(/[^a-zA-Z\s]/g,"")}),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter first name"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),y.jsxs("div",{className:"relative",children:[y.jsx(k1,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),y.jsx("input",{type:"text",required:!0,value:r.lastName,onChange:M=>i({...r,lastName:M.target.value.replace(/[^a-zA-Z\s]/g,"")}),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Enter last name"})]})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),y.jsxs("div",{className:"relative",children:[y.jsx(bp,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),y.jsx("input",{type:"email",required:!0,value:r.email,onChange:M=>{const U=M.target.value;i({...r,email:U}),E.email&&O(B=>({...B,email:""})),U&&U.endsWith("@gmail.com")},className:`w-full pl-12 pr-4 py-3.5 bg-primary-50 border ${E.email?"border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-primary-500"} rounded-xl focus:outline-none focus:ring-2 focus:bg-white transition-all placeholder:text-gray-400`,placeholder:"name@gmail.com"}),N==="checking"&&y.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:y.jsx(si,{className:"h-4 w-4 animate-spin text-gray-400"})})]}),E.email&&y.jsxs("p",{className:"text-xs text-red-600 mt-1 ml-1 flex items-center gap-1",children:[y.jsx(Mm,{className:"h-3 w-3"}),E.email]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number (Optional)"}),y.jsxs("div",{className:"relative",children:[y.jsx(QA,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),y.jsx("input",{type:"tel",name:"phone",autoComplete:"off",value:r.phone,onFocus:()=>{r.phone||i(M=>({...M,phone:"+63 9"}))},onBlur:()=>{r.phone==="+63 9"&&i(M=>({...M,phone:""}))},onChange:M=>{const U=M.target.value;if(U===""){i({...r,phone:""}),E.phone&&O(ne=>({...ne,phone:""}));return}let B=U.replace(/\D/g,"");B.startsWith("0")&&(B="63"+B.substring(1)),B.startsWith("63")||(B="63"+B),B.length>=2&&B[2]!=="9"?B="639"+B.substring(2):B.length===2&&(B="639"),B=B.substring(0,12);let F="+63 9";B.length>2&&(F+=" "+B.substring(2,5)),B.length>5&&(F+=" "+B.substring(5,8)),B.length>8&&(F+=" "+B.substring(8,12)),i({...r,phone:F}),E.phone&&O(ne=>({...ne,phone:""}))},className:`w-full pl-12 pr-4 py-3.5 bg-primary-50 border ${E.phone?"border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-primary-500"} rounded-xl focus:outline-none focus:ring-2 focus:bg-white transition-all placeholder:text-gray-400`,placeholder:"+63 9xx xxx xxxx"})]}),E.phone&&y.jsx("p",{className:"text-xs text-red-600 mt-1 ml-1",children:E.phone})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),y.jsxs("div",{className:"relative",children:[y.jsx(P1,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),y.jsx("input",{type:s?"text":"password",name:"password",autoComplete:"new-password",required:!0,value:r.password,onChange:C,className:`w-full pl-12 pr-12 py-3.5 bg-primary-50 border ${E.password?"border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-primary-500"} rounded-xl focus:outline-none focus:ring-2 focus:bg-white transition-all placeholder:text-gray-400`,placeholder:"Create a password"}),y.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:s?y.jsx(A5,{className:"h-5 w-5"}):y.jsx(S5,{className:"h-5 w-5"})})]}),E.password&&y.jsx("p",{className:"text-xs text-red-600 mt-1 ml-1",children:E.password}),r.password&&y.jsxs("div",{className:"mt-2",children:[y.jsx("div",{className:"flex justify-between items-center mb-1",children:y.jsx("span",{className:`text-xs font-medium ${b.color.replace("bg-","text-")}`,children:b.label})}),y.jsx("div",{className:"h-1.5 w-full bg-gray-200 rounded-full overflow-hidden",children:y.jsx("div",{className:`h-full ${b.color} transition-all duration-300`,style:{width:`${b.score/5*100}%`}})})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),y.jsxs("div",{className:"relative",children:[y.jsx(P1,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),y.jsx("input",{type:s?"text":"password",name:"confirmPassword",autoComplete:"new-password",required:!0,value:r.confirmPassword,onChange:M=>i({...r,confirmPassword:M.target.value}),className:"w-full pl-12 pr-4 py-3.5 bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 focus:bg-white transition-all placeholder:text-gray-400",placeholder:"Confirm your password"})]})]}),y.jsx("button",{type:"button",onClick:()=>k(),disabled:o,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3.5 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:o?y.jsxs("span",{className:"flex items-center justify-center gap-2",children:[y.jsx(si,{className:"h-5 w-5 animate-spin"}),"Creating account..."]}):"Create Account"}),y.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Already have an account?"," ",y.jsx("button",{type:"button",onClick:t,className:"text-primary-600 font-semibold hover:text-primary-700 transition-colors",children:"Login"})]})]})]})},Yle=({onBack:t,initialEmail:e=""})=>{const[n,r]=P.useState(e),[i,s]=P.useState(!1),[a,o]=P.useState(null),[c,h]=P.useState(null),{sendPasswordReset:f}=Xs(),p=async g=>{if(g.preventDefault(),!n){h("Email is required");return}s(!0),h(null),o(null),console.log("Attempting to send password reset email to:",n);try{await f(n),console.log("Password reset email sent successfully"),o("Password reset link sent! Please check your email.")}catch(_){console.error("Password reset error:",_),_.code==="auth/user-not-found"?h("No account found with this email address."):_.code==="auth/invalid-email"?h("Please enter a valid email address."):h(_.message||"Failed to send reset link")}finally{s(!1)}};return y.jsxs("form",{onSubmit:p,className:"space-y-4",children:[y.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter your email address and we'll send you a link to reset your password."}),c&&y.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-red-50 p-3 text-sm text-red-800",children:[y.jsx(Mm,{className:"h-5 w-5 flex-shrink-0"}),y.jsx("span",{children:c})]}),a&&y.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-green-50 p-3 text-sm text-green-800",children:[y.jsx(x5,{className:"h-5 w-5 flex-shrink-0"}),y.jsx("span",{children:a})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email address"}),y.jsxs("div",{className:"relative",children:[y.jsx(bp,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),y.jsx("input",{type:"email",value:n,onChange:g=>r(g.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"admin@rushcoffee.ph"})]})]}),y.jsx("button",{type:"submit",disabled:i||!!a,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3 rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?y.jsxs("span",{className:"flex items-center justify-center gap-2",children:[y.jsx(si,{className:"h-5 w-5 animate-spin"}),"Sending Link..."]}):a?"Link Sent":"Send Reset Link"}),y.jsxs("button",{type:"button",onClick:t,className:"w-full flex items-center justify-center gap-2 text-gray-600 hover:text-gray-900 font-medium py-2 transition-colors",children:[y.jsx(E5,{className:"h-4 w-4"}),"Back to Login"]})]})},Qle=({isOpen:t,onClose:e,initialView:n="login",onVerificationNeeded:r,onAuthSuccess:i})=>{const[s,a]=oi.useState(n),[o,c]=oi.useState("");return oi.useEffect(()=>{t&&(a(n),c(""))},[t,n]),y.jsxs(XA,{isOpen:t,onClose:e,hideHeader:!0,size:s==="register"?"xl":"md",children:[s==="login"&&y.jsx(ole,{onForgotPassword:h=>{c(h),a("forgot-password")},onRegister:()=>a("register"),onSuccess:h=>i(h),onVerificationNeeded:(h,f,p)=>r==null?void 0:r(h,f,p)},"login"),s==="register"&&y.jsx(Wle,{onLogin:()=>a("login"),onSuccess:()=>i(),onVerificationNeeded:(h,f,p)=>r==null?void 0:r(h,f,p)},"register"),s==="forgot-password"&&y.jsx(Yle,{initialEmail:o,onBack:()=>a("login")},"forgot-password")]})},Xle=({email:t,onVerify:e,onBack:n,onResend:r})=>{const[i,s]=P.useState(["","","","","",""]),[a,o]=P.useState(!1),[c,h]=P.useState(null),[f,p]=P.useState(30),g=P.useRef([]);P.useEffect(()=>{if(f>0){const T=setTimeout(()=>p(f-1),1e3);return()=>clearTimeout(T)}},[f]);const _=(T,E)=>{var j;if(E.length>1)return;const O=[...i];O[T]=E,s(O),E&&T<5&&((j=g.current[T+1])==null||j.focus())},R=(T,E)=>{var O;E.key==="Backspace"&&!i[T]&&T>0&&((O=g.current[T-1])==null||O.focus())},N=T=>{var j;T.preventDefault();const E=T.clipboardData.getData("text").slice(0,6).split(""),O=[...i];E.forEach((q,S)=>{S<6&&(O[S]=q)}),s(O),E.length===6&&((j=g.current[5])==null||j.focus())},A=async T=>{T.preventDefault();const E=i.join("");if(E.length!==6){h("Please enter the complete 6-digit code");return}o(!0),h(null);try{await e(E)}catch(O){h(O.message||"Verification failed"),o(!1)}},b=async()=>{f>0||(await r(),p(30))};return y.jsxs("form",{onSubmit:A,className:"space-y-8",children:[y.jsxs("div",{className:"text-center",children:[y.jsx(Ws,{className:"mx-auto h-16 w-16 text-primary-600 mb-4"}),y.jsx("h2",{className:"font-display text-3xl font-bold text-gray-900 mb-2",children:"Verify Your Email"}),y.jsx("p",{className:"text-gray-600 mb-2",children:"We've sent a verification code to"}),y.jsx("p",{className:"text-lg font-bold text-primary-700",children:t})]}),y.jsx("div",{className:"flex justify-center gap-3",children:i.map((T,E)=>y.jsx("input",{ref:O=>g.current[E]=O,type:"text",maxLength:1,value:T,onChange:O=>_(E,O.target.value),onKeyDown:O=>R(E,O),onPaste:N,className:"w-12 h-14 sm:w-14 sm:h-16 text-center text-2xl font-bold bg-primary-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all placeholder:text-gray-300",placeholder:""},E))}),c&&y.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-100",children:[y.jsx(aQ,{className:"h-4 w-4"}),y.jsx("span",{children:c})]}),y.jsx("button",{type:"submit",disabled:a||i.join("").length!==6,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-4 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-md hover:shadow-lg",children:a?y.jsxs("span",{className:"flex items-center justify-center gap-2",children:[y.jsx(si,{className:"h-5 w-5 animate-spin"}),"Verifying..."]}):"Verify Account"}),y.jsxs("div",{className:"flex items-center justify-between text-sm pt-2",children:[y.jsxs("button",{type:"button",onClick:n,className:"flex items-center gap-2 text-gray-500 hover:text-gray-900 font-medium transition-colors group",children:[y.jsx(E5,{className:"h-4 w-4 transition-transform group-hover:-translate-x-1"}),"Back to Login"]}),y.jsxs("button",{type:"button",onClick:b,disabled:f>0,className:`flex items-center gap-2 font-medium transition-colors ${f>0?"text-gray-400 cursor-not-allowed":"text-primary-600 hover:text-primary-700"}`,children:[y.jsx(N5,{className:`h-4 w-4 ${f>0?"animate-spin":""}`}),f>0?`Resend in ${f}s`:"Resend Code"]})]})]})},Jle=({isOpen:t,onClose:e,email:n,userId:r,onSuccess:i,onBackToLogin:s,onResend:a})=>{const{verifyEmailCode:o}=Xs(),c=async()=>{a?await a():(console.log("Resending code for user",r),await new Promise(f=>setTimeout(f,1e3)))},h=async f=>{if(!r)throw new Error("User ID is missing. Cannot verify.");if(await o(r,f))i();else throw new Error("Invalid verification code. Please check the console or try again.")};return y.jsx(XA,{isOpen:t,onClose:e,hideHeader:!0,size:"md",children:y.jsx(Xle,{email:n,onVerify:h,onBack:s||e,onResend:c})})},KI=P.createContext({});function WI(t){const e=P.useRef(null);return e.current===null&&(e.current=t()),e.current}const Bw=P.createContext(null),YI=P.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Zle extends P.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ece({children:t,isPresent:e}){const n=P.useId(),r=P.useRef(null),i=P.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=P.useContext(YI);return P.useInsertionEffect(()=>{const{width:a,height:o,top:c,left:h}=i.current;if(e||!r.current||!a||!o)return;r.current.dataset.motionPopId=n;const f=document.createElement("style");return s&&(f.nonce=s),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${c}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),y.jsx(Zle,{isPresent:e,childRef:r,sizeRef:i,children:P.cloneElement(t,{ref:r})})}const tce=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a})=>{const o=WI(nce),c=P.useId(),h=P.useCallback(p=>{o.set(p,!0);for(const g of o.values())if(!g)return;r&&r()},[o,r]),f=P.useMemo(()=>({id:c,initial:e,isPresent:n,custom:i,onExitComplete:h,register:p=>(o.set(p,!1),()=>o.delete(p))}),s?[Math.random(),h]:[n,h]);return P.useMemo(()=>{o.forEach((p,g)=>o.set(g,!1))},[n]),P.useEffect(()=>{!n&&!o.size&&r&&r()},[n]),a==="popLayout"&&(t=y.jsx(ece,{isPresent:n,children:t})),y.jsx(Bw.Provider,{value:f,children:t})};function nce(){return new Map}function Ij(t=!0){const e=P.useContext(Bw);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=P.useId();P.useEffect(()=>{t&&i(s)},[t]);const a=P.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,a]:[!0]}const E_=t=>t.key||"";function Uk(t){const e=[];return P.Children.forEach(t,n=>{P.isValidElement(n)&&e.push(n)}),e}const QI=typeof window<"u",Rj=QI?P.useLayoutEffect:P.useEffect,bv=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1})=>{const[o,c]=Ij(a),h=P.useMemo(()=>Uk(t),[t]),f=a&&!o?[]:h.map(E_),p=P.useRef(!0),g=P.useRef(h),_=WI(()=>new Map),[R,N]=P.useState(h),[A,b]=P.useState(h);Rj(()=>{p.current=!1,g.current=h;for(let O=0;O<A.length;O++){const j=E_(A[O]);f.includes(j)?_.delete(j):_.get(j)!==!0&&_.set(j,!1)}},[A,f.length,f.join("-")]);const T=[];if(h!==R){let O=[...h];for(let j=0;j<A.length;j++){const q=A[j],S=E_(q);f.includes(S)||(O.splice(j,0,q),T.push(q))}s==="wait"&&T.length&&(O=T),b(Uk(O)),N(h);return}const{forceRender:E}=P.useContext(KI);return y.jsx(y.Fragment,{children:A.map(O=>{const j=E_(O),q=a&&!o?!1:h===A||f.includes(j),S=()=>{if(_.has(j))_.set(j,!0);else return;let C=!0;_.forEach(k=>{k||(C=!1)}),C&&(E==null||E(),b(g.current),a&&(c==null||c()),r&&r())};return y.jsx(tce,{isPresent:q,initial:!p.current||n?void 0:!1,custom:q?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:q?void 0:S,children:O},j)})})},fi=t=>t;let Cj=fi;function XI(t){let e;return()=>(e===void 0&&(e=t()),e)}const vd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Oa=t=>t*1e3,Ma=t=>t/1e3,rce={useManualTiming:!1};function ice(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(h){s.has(h)&&(c.schedule(h),t()),h(a)}const c={schedule:(h,f=!1,p=!1)=>{const _=p&&r?e:n;return f&&s.add(h),_.has(h)||_.add(h),h},cancel:h=>{n.delete(h),s.delete(h)},process:h=>{if(a=h,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(o),e.clear(),r=!1,i&&(i=!1,c.process(h))}};return c}const x_=["read","resolveKeyframes","update","preRender","render","postRender"],sce=40;function Nj(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=x_.reduce((b,T)=>(b[T]=ice(s),b),{}),{read:o,resolveKeyframes:c,update:h,preRender:f,render:p,postRender:g}=a,_=()=>{const b=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(b-i.timestamp,sce),1),i.timestamp=b,i.isProcessing=!0,o.process(i),c.process(i),h.process(i),f.process(i),p.process(i),g.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(_))},R=()=>{n=!0,r=!0,i.isProcessing||t(_)};return{schedule:x_.reduce((b,T)=>{const E=a[T];return b[T]=(O,j=!1,q=!1)=>(n||R(),E.schedule(O,j,q)),b},{}),cancel:b=>{for(let T=0;T<x_.length;T++)a[x_[T]].cancel(b)},state:i,steps:a}}const{schedule:Dt,cancel:wl,state:Bn,steps:_E}=Nj(typeof requestAnimationFrame<"u"?requestAnimationFrame:fi,!0),Pj=P.createContext({strict:!1}),jk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},wd={};for(const t in jk)wd[t]={isEnabled:e=>jk[t].some(n=>!!e[n])};function ace(t){for(const e in t)wd[e]={...wd[e],...t[e]}}const oce=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Tv(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||oce.has(t)}let Dj=t=>!Tv(t);function lce(t){t&&(Dj=e=>e.startsWith("on")?!Tv(e):t(e))}try{lce(require("@emotion/is-prop-valid").default)}catch{}function cce(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Dj(i)||n===!0&&Tv(i)||!e&&!Tv(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function uce(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const qw=P.createContext({});function Gp(t){return typeof t=="string"||Array.isArray(t)}function Hw(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const JI=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ZI=["initial",...JI];function Gw(t){return Hw(t.animate)||ZI.some(e=>Gp(t[e]))}function kj(t){return!!(Gw(t)||t.variants)}function hce(t,e){if(Gw(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Gp(n)?n:void 0,animate:Gp(r)?r:void 0}}return t.inherit!==!1?e:{}}function dce(t){const{initial:e,animate:n}=hce(t,P.useContext(qw));return P.useMemo(()=>({initial:e,animate:n}),[Fk(e),Fk(n)])}function Fk(t){return Array.isArray(t)?t.join(" "):t}const fce=Symbol.for("motionComponentSymbol");function wh(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function mce(t,e,n){return P.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):wh(n)&&(n.current=r))},[e])}const eR=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),pce="framerAppearId",Oj="data-"+eR(pce),{schedule:tR}=Nj(queueMicrotask,!1),Mj=P.createContext({});function gce(t,e,n,r,i){var s,a;const{visualElement:o}=P.useContext(qw),c=P.useContext(Pj),h=P.useContext(Bw),f=P.useContext(YI).reducedMotion,p=P.useRef(null);r=r||c.renderer,!p.current&&r&&(p.current=r(t,{visualState:e,parent:o,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:f}));const g=p.current,_=P.useContext(Mj);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&yce(p.current,n,i,_);const R=P.useRef(!1);P.useInsertionEffect(()=>{g&&R.current&&g.update(n,h)});const N=n[Oj],A=P.useRef(!!N&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,N))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,N)));return Rj(()=>{g&&(R.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),tR.render(g.render),A.current&&g.animationState&&g.animationState.animateChanges())}),P.useEffect(()=>{g&&(!A.current&&g.animationState&&g.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)===null||b===void 0||b.call(window,N)}),A.current=!1))}),g}function yce(t,e,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:c,layoutRoot:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Vj(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&wh(o),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:h})}function Vj(t){if(t)return t.options.allowProjection!==!1?t.projection:Vj(t.parent)}function _ce({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,a;t&&ace(t);function o(h,f){let p;const g={...P.useContext(YI),...h,layoutId:vce(h)},{isStatic:_}=g,R=dce(h),N=r(h,_);if(!_&&QI){wce();const A=bce(g);p=A.MeasureLayout,R.visualElement=gce(i,N,g,e,A.ProjectionNode)}return y.jsxs(qw.Provider,{value:R,children:[p&&R.visualElement?y.jsx(p,{visualElement:R.visualElement,...g}):null,n(i,h,mce(N,R.visualElement,f),N,_,R.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(a=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&a!==void 0?a:""})`}`;const c=P.forwardRef(o);return c[fce]=i,c}function vce({layoutId:t}){const e=P.useContext(KI).id;return e&&t!==void 0?e+"-"+t:t}function wce(t,e){P.useContext(Pj).strict}function bce(t){const{drag:e,layout:n}=wd;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Tce=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function nR(t){return typeof t!="string"||t.includes("-")?!1:!!(Tce.indexOf(t)>-1||/[A-Z]/u.test(t))}function zk(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function rR(t,e,n,r){if(typeof e=="function"){const[i,s]=zk(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=zk(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const Sx=t=>Array.isArray(t),Ece=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),xce=t=>Sx(t)?t[t.length-1]||0:t,lr=t=>!!(t&&t.getVelocity);function l0(t){const e=lr(t)?t.get():t;return Ece(e)?e.toValue():e}function Ace({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const a={latestValues:Sce(r,i,s,t),renderState:e()};return n&&(a.onMount=o=>n({props:r,current:o,...a}),a.onUpdate=o=>n(o)),a}const Lj=t=>(e,n)=>{const r=P.useContext(qw),i=P.useContext(Bw),s=()=>Ace(t,e,r,i);return n?s():WI(s)};function Sce(t,e,n,r){const i={},s=r(t,{});for(const g in s)i[g]=l0(s[g]);let{initial:a,animate:o}=t;const c=Gw(t),h=kj(t);e&&h&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let f=n?n.initial===!1:!1;f=f||a===!1;const p=f?o:a;if(p&&typeof p!="boolean"&&!Hw(p)){const g=Array.isArray(p)?p:[p];for(let _=0;_<g.length;_++){const R=rR(t,g[_]);if(R){const{transitionEnd:N,transition:A,...b}=R;for(const T in b){let E=b[T];if(Array.isArray(E)){const O=f?E.length-1:0;E=E[O]}E!==null&&(i[T]=E)}for(const T in N)i[T]=N[T]}}}return i}const Hd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],hu=new Set(Hd),Uj=t=>e=>typeof e=="string"&&e.startsWith(t),jj=Uj("--"),Ice=Uj("var(--"),iR=t=>Ice(t)?Rce.test(t.split("/*")[0].trim()):!1,Rce=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Fj=(t,e)=>e&&typeof t=="number"?e.transform(t):t,$a=(t,e,n)=>n>e?e:n<t?t:n,Gd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},$p={...Gd,transform:t=>$a(0,1,t)},A_={...Gd,default:1},Mg=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Io=Mg("deg"),zs=Mg("%"),Se=Mg("px"),Cce=Mg("vh"),Nce=Mg("vw"),Bk={...zs,parse:t=>zs.parse(t)/100,transform:t=>zs.transform(t*100)},Pce={borderWidth:Se,borderTopWidth:Se,borderRightWidth:Se,borderBottomWidth:Se,borderLeftWidth:Se,borderRadius:Se,radius:Se,borderTopLeftRadius:Se,borderTopRightRadius:Se,borderBottomRightRadius:Se,borderBottomLeftRadius:Se,width:Se,maxWidth:Se,height:Se,maxHeight:Se,top:Se,right:Se,bottom:Se,left:Se,padding:Se,paddingTop:Se,paddingRight:Se,paddingBottom:Se,paddingLeft:Se,margin:Se,marginTop:Se,marginRight:Se,marginBottom:Se,marginLeft:Se,backgroundPositionX:Se,backgroundPositionY:Se},Dce={rotate:Io,rotateX:Io,rotateY:Io,rotateZ:Io,scale:A_,scaleX:A_,scaleY:A_,scaleZ:A_,skew:Io,skewX:Io,skewY:Io,distance:Se,translateX:Se,translateY:Se,translateZ:Se,x:Se,y:Se,z:Se,perspective:Se,transformPerspective:Se,opacity:$p,originX:Bk,originY:Bk,originZ:Se},qk={...Gd,transform:Math.round},sR={...Pce,...Dce,zIndex:qk,size:Se,fillOpacity:$p,strokeOpacity:$p,numOctaves:qk},kce={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Oce=Hd.length;function Mce(t,e,n){let r="",i=!0;for(let s=0;s<Oce;s++){const a=Hd[s],o=t[a];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(a.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const h=Fj(o,sR[a]);if(!c){i=!1;const f=kce[a]||a;r+=`${f}(${h}) `}n&&(e[a]=h)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function aR(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let a=!1,o=!1;for(const c in e){const h=e[c];if(hu.has(c)){a=!0;continue}else if(jj(c)){i[c]=h;continue}else{const f=Fj(h,sR[c]);c.startsWith("origin")?(o=!0,s[c]=f):r[c]=f}}if(e.transform||(a||n?r.transform=Mce(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:h="50%",originZ:f=0}=s;r.transformOrigin=`${c} ${h} ${f}`}}const Vce={offset:"stroke-dashoffset",array:"stroke-dasharray"},Lce={offset:"strokeDashoffset",array:"strokeDasharray"};function Uce(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Vce:Lce;t[s.offset]=Se.transform(-r);const a=Se.transform(e),o=Se.transform(n);t[s.array]=`${a} ${o}`}function Hk(t,e,n){return typeof t=="string"?t:Se.transform(e+n*t)}function jce(t,e,n){const r=Hk(e,t.x,t.width),i=Hk(n,t.y,t.height);return`${r} ${i}`}function oR(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:c=0,...h},f,p){if(aR(t,h,p),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:_,dimensions:R}=t;g.transform&&(R&&(_.transform=g.transform),delete g.transform),R&&(i!==void 0||s!==void 0||_.transform)&&(_.transformOrigin=jce(R,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),a!==void 0&&Uce(g,a,o,c,!1)}const lR=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),zj=()=>({...lR(),attrs:{}}),cR=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Bj(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const qj=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Hj(t,e,n,r){Bj(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(qj.has(i)?i:eR(i),e.attrs[i])}const Ev={};function Fce(t){Object.assign(Ev,t)}function Gj(t,{layout:e,layoutId:n}){return hu.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ev[t]||t==="opacity")}function uR(t,e,n){var r;const{style:i}=t,s={};for(const a in i)(lr(i[a])||e.style&&lr(e.style[a])||Gj(a,t)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function $j(t,e,n){const r=uR(t,e,n);for(const i in t)if(lr(t[i])||lr(e[i])){const s=Hd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function zce(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Gk=["x","y","width","height","cx","cy","r"],Bce={useVisualState:Lj({scrapeMotionValuesFromProps:$j,createRenderState:zj,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const o in i)if(hu.has(o)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let o=0;o<Gk.length;o++){const c=Gk[o];t[c]!==e[c]&&(a=!0)}a&&Dt.read(()=>{zce(n,r),Dt.render(()=>{oR(r,i,cR(n.tagName),t.transformTemplate),Hj(n,r)})})}})},qce={useVisualState:Lj({scrapeMotionValuesFromProps:uR,createRenderState:lR})};function Kj(t,e,n){for(const r in e)!lr(e[r])&&!Gj(r,n)&&(t[r]=e[r])}function Hce({transformTemplate:t},e){return P.useMemo(()=>{const n=lR();return aR(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Gce(t,e){const n=t.style||{},r={};return Kj(r,n,t),Object.assign(r,Hce(t,e)),r}function $ce(t,e){const n={},r=Gce(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function Kce(t,e,n,r){const i=P.useMemo(()=>{const s=zj();return oR(s,e,cR(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};Kj(s,t.style,t),i.style={...s,...i.style}}return i}function Wce(t=!1){return(n,r,i,{latestValues:s},a)=>{const c=(nR(n)?Kce:$ce)(r,s,a,n),h=cce(r,typeof n=="string",t),f=n!==P.Fragment?{...h,...c,ref:i}:{},{children:p}=r,g=P.useMemo(()=>lr(p)?p.get():p,[p]);return P.createElement(n,{...f,children:g})}}function Yce(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...nR(r)?Bce:qce,preloadedFeatures:t,useRender:Wce(i),createVisualElement:e,Component:r};return _ce(a)}}function Wj(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function $w(t,e,n){const r=t.getProps();return rR(r,e,n!==void 0?n:r.custom,t)}const Qce=XI(()=>window.ScrollTimeline!==void 0);class Xce{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(Qce()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Jce extends Xce{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function hR(t,e){return t?t[e]||t.default||t:void 0}const Ix=2e4;function Yj(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Ix;)e+=n,r=t.next(e);return e>=Ix?1/0:e}function dR(t){return typeof t=="function"}function $k(t,e){t.timeline=e,t.onfinish=null}const fR=t=>Array.isArray(t)&&typeof t[0]=="number",Zce={linearEasing:void 0};function eue(t,e){const n=XI(t);return()=>{var r;return(r=Zce[e])!==null&&r!==void 0?r:n()}}const xv=eue(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Qj=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(vd(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function Xj(t){return!!(typeof t=="function"&&xv()||!t||typeof t=="string"&&(t in Rx||xv())||fR(t)||Array.isArray(t)&&t.every(Xj))}const _m=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Rx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_m([0,.65,.55,1]),circOut:_m([.55,0,1,.45]),backIn:_m([.31,.01,.66,-.59]),backOut:_m([.33,1.53,.69,.99])};function Jj(t,e){if(t)return typeof t=="function"&&xv()?Qj(t,e):fR(t)?_m(t):Array.isArray(t)?t.map(n=>Jj(n,e)||Rx.easeOut):Rx[t]}const ts={x:!1,y:!1};function Zj(){return ts.x||ts.y}function tue(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function e9(t,e){const n=tue(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Kk(t){return e=>{e.pointerType==="touch"||Zj()||t(e)}}function nue(t,e,n={}){const[r,i,s]=e9(t,n),a=Kk(o=>{const{target:c}=o,h=e(o);if(typeof h!="function"||!c)return;const f=Kk(p=>{h(p),c.removeEventListener("pointerleave",f)});c.addEventListener("pointerleave",f,i)});return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const t9=(t,e)=>e?t===e?!0:t9(t,e.parentElement):!1,mR=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,rue=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function iue(t){return rue.has(t.tagName)||t.tabIndex!==-1}const vm=new WeakSet;function Wk(t){return e=>{e.key==="Enter"&&t(e)}}function vE(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const sue=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Wk(()=>{if(vm.has(n))return;vE(n,"down");const i=Wk(()=>{vE(n,"up")}),s=()=>vE(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Yk(t){return mR(t)&&!Zj()}function aue(t,e,n={}){const[r,i,s]=e9(t,n),a=o=>{const c=o.currentTarget;if(!Yk(o)||vm.has(c))return;vm.add(c);const h=e(o),f=(_,R)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),!(!Yk(_)||!vm.has(c))&&(vm.delete(c),typeof h=="function"&&h(_,{success:R}))},p=_=>{f(_,n.useGlobalTarget||t9(c,_.target))},g=_=>{f(_,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",g,i)};return r.forEach(o=>{!iue(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o.addEventListener("focus",h=>sue(h,i),i)}),s}function oue(t){return t==="x"||t==="y"?ts[t]?null:(ts[t]=!0,()=>{ts[t]=!1}):ts.x||ts.y?null:(ts.x=ts.y=!0,()=>{ts.x=ts.y=!1})}const n9=new Set(["width","height","top","left","right","bottom",...Hd]);let c0;function lue(){c0=void 0}const Bs={now:()=>(c0===void 0&&Bs.set(Bn.isProcessing||rce.useManualTiming?Bn.timestamp:performance.now()),c0),set:t=>{c0=t,queueMicrotask(lue)}};function pR(t,e){t.indexOf(e)===-1&&t.push(e)}function gR(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class yR{constructor(){this.subscriptions=[]}add(e){return pR(this.subscriptions,e),()=>gR(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function r9(t,e){return e?t*(1e3/e):0}const Qk=30,cue=t=>!isNaN(parseFloat(t));class uue{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Bs.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Bs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=cue(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new yR);const r=this.events[e].add(n);return e==="change"?()=>{r(),Dt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Bs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Qk)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Qk);return r9(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Kp(t,e){return new uue(t,e)}function hue(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Kp(n))}function due(t,e){const n=$w(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const o=xce(s[a]);hue(t,a,o)}}function fue(t){return!!(lr(t)&&t.add)}function Cx(t,e){const n=t.getValue("willChange");if(fue(n))return n.add(e)}function i9(t){return t.props[Oj]}const s9=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,mue=1e-7,pue=12;function gue(t,e,n,r,i){let s,a,o=0;do a=e+(n-e)/2,s=s9(a,r,i)-t,s>0?n=a:e=a;while(Math.abs(s)>mue&&++o<pue);return a}function Vg(t,e,n,r){if(t===e&&n===r)return fi;const i=s=>gue(s,0,1,t,n);return s=>s===0||s===1?s:s9(i(s),e,r)}const a9=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,o9=t=>e=>1-t(1-e),l9=Vg(.33,1.53,.69,.99),_R=o9(l9),c9=a9(_R),u9=t=>(t*=2)<1?.5*_R(t):.5*(2-Math.pow(2,-10*(t-1))),vR=t=>1-Math.sin(Math.acos(t)),h9=o9(vR),d9=a9(vR),f9=t=>/^0[^.\s]+$/u.test(t);function yue(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||f9(t):!0}const ep=t=>Math.round(t*1e5)/1e5,wR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function _ue(t){return t==null}const vue=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,bR=(t,e)=>n=>!!(typeof n=="string"&&vue.test(n)&&n.startsWith(t)||e&&!_ue(n)&&Object.prototype.hasOwnProperty.call(n,e)),m9=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(wR);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},wue=t=>$a(0,255,t),wE={...Gd,transform:t=>Math.round(wue(t))},xc={test:bR("rgb","red"),parse:m9("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+wE.transform(t)+", "+wE.transform(e)+", "+wE.transform(n)+", "+ep($p.transform(r))+")"};function bue(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Nx={test:bR("#"),parse:bue,transform:xc.transform},bh={test:bR("hsl","hue"),parse:m9("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+zs.transform(ep(e))+", "+zs.transform(ep(n))+", "+ep($p.transform(r))+")"},rr={test:t=>xc.test(t)||Nx.test(t)||bh.test(t),parse:t=>xc.test(t)?xc.parse(t):bh.test(t)?bh.parse(t):Nx.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?xc.transform(t):bh.transform(t)},Tue=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Eue(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(wR))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Tue))===null||n===void 0?void 0:n.length)||0)>0}const p9="number",g9="color",xue="var",Aue="var(",Xk="${}",Sue=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wp(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(Sue,c=>(rr.test(c)?(r.color.push(s),i.push(g9),n.push(rr.parse(c))):c.startsWith(Aue)?(r.var.push(s),i.push(xue),n.push(c)):(r.number.push(s),i.push(p9),n.push(parseFloat(c))),++s,Xk)).split(Xk);return{values:n,split:o,indexes:r,types:i}}function y9(t){return Wp(t).values}function _9(t){const{split:e,types:n}=Wp(t),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const o=n[a];o===p9?s+=ep(i[a]):o===g9?s+=rr.transform(i[a]):s+=i[a]}return s}}const Iue=t=>typeof t=="number"?0:t;function Rue(t){const e=y9(t);return _9(t)(e.map(Iue))}const bl={test:Eue,parse:y9,createTransformer:_9,getAnimatableNone:Rue},Cue=new Set(["brightness","contrast","saturate","opacity"]);function Nue(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(wR)||[];if(!r)return t;const i=n.replace(r,"");let s=Cue.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const Pue=/\b([a-z-]*)\(.*?\)/gu,Px={...bl,getAnimatableNone:t=>{const e=t.match(Pue);return e?e.map(Nue).join(" "):t}},Due={...sR,color:rr,backgroundColor:rr,outlineColor:rr,fill:rr,stroke:rr,borderColor:rr,borderTopColor:rr,borderRightColor:rr,borderBottomColor:rr,borderLeftColor:rr,filter:Px,WebkitFilter:Px},TR=t=>Due[t];function v9(t,e){let n=TR(t);return n!==Px&&(n=bl),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const kue=new Set(["auto","none","0"]);function Oue(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!kue.has(s)&&Wp(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=v9(n,i)}const Jk=t=>t===Gd||t===Se,Zk=(t,e)=>parseFloat(t.split(", ")[e]),eO=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return Zk(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?Zk(s[1],t):0}},Mue=new Set(["x","y","z"]),Vue=Hd.filter(t=>!Mue.has(t));function Lue(t){const e=[];return Vue.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const bd={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:eO(4,13),y:eO(5,14)};bd.translateX=bd.x;bd.translateY=bd.y;const Oc=new Set;let Dx=!1,kx=!1;function w9(){if(kx){const t=Array.from(Oc).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Lue(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))===null||o===void 0||o.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}kx=!1,Dx=!1,Oc.forEach(t=>t.complete()),Oc.clear()}function b9(){Oc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(kx=!0)})}function Uue(){b9(),w9()}class ER{constructor(e,n,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Oc.add(this),Dx||(Dx=!0,Dt.read(b9),Dt.resolveKeyframes(w9))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=i==null?void 0:i.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const c=r.readValue(n,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Oc.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Oc.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const T9=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),jue=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Fue(t){const e=jue.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function E9(t,e,n=1){const[r,i]=Fue(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return T9(a)?parseFloat(a):a}return iR(i)?E9(i,e,n+1):i}const x9=t=>e=>e.test(t),zue={test:t=>t==="auto",parse:t=>t},A9=[Gd,Se,zs,Io,Nce,Cce,zue],tO=t=>A9.find(x9(t));class S9 extends ER{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let h=e[c];if(typeof h=="string"&&(h=h.trim(),iR(h))){const f=E9(h,n.current);f!==void 0&&(e[c]=f),c===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!n9.has(r)||e.length!==2)return;const[i,s]=e,a=tO(i),o=tO(s);if(a!==o)if(Jk(a)&&Jk(o))for(let c=0;c<e.length;c++){const h=e[c];typeof h=="string"&&(e[c]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)yue(e[i])&&r.push(i);r.length&&Oue(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bd[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=bd[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,h])=>{n.getValue(c).set(h)}),this.resolveNoneKeyframes()}}const nO=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(bl.test(t)||t==="0")&&!t.startsWith("url("));function Bue(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function que(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=nO(i,e),o=nO(s,e);return!a||!o?!1:Bue(t)||(n==="spring"||dR(n))&&r}const Hue=t=>t!==null;function Kw(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Hue),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const Gue=40;class I9{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Bs.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Gue?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Uue(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Bs.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:o,onUpdate:c,isGenerator:h}=this.options;if(!h&&!que(e,r,i,s))if(a)this.options.duration=0;else{c&&c(Kw(e,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const f=this.initPlayback(e,n);f!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...f},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const qt=(t,e,n)=>t+(e-t)*n;function bE(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function $ue({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,a=0;if(!e)i=s=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;i=bE(c,o,t+1/3),s=bE(c,o,t),a=bE(c,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Av(t,e){return n=>n>0?e:t}const TE=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Kue=[Nx,xc,bh],Wue=t=>Kue.find(e=>e.test(t));function rO(t){const e=Wue(t);if(!e)return!1;let n=e.parse(t);return e===bh&&(n=$ue(n)),n}const iO=(t,e)=>{const n=rO(t),r=rO(e);if(!n||!r)return Av(t,e);const i={...n};return s=>(i.red=TE(n.red,r.red,s),i.green=TE(n.green,r.green,s),i.blue=TE(n.blue,r.blue,s),i.alpha=qt(n.alpha,r.alpha,s),xc.transform(i))},Yue=(t,e)=>n=>e(t(n)),Lg=(...t)=>t.reduce(Yue),Ox=new Set(["none","hidden"]);function Que(t,e){return Ox.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Xue(t,e){return n=>qt(t,e,n)}function xR(t){return typeof t=="number"?Xue:typeof t=="string"?iR(t)?Av:rr.test(t)?iO:ehe:Array.isArray(t)?R9:typeof t=="object"?rr.test(t)?iO:Jue:Av}function R9(t,e){const n=[...t],r=n.length,i=t.map((s,a)=>xR(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function Jue(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=xR(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function Zue(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][i[a]],c=(n=t.values[o])!==null&&n!==void 0?n:0;r[s]=c,i[a]++}return r}const ehe=(t,e)=>{const n=bl.createTransformer(e),r=Wp(t),i=Wp(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Ox.has(t)&&!i.values.length||Ox.has(e)&&!r.values.length?Que(t,e):Lg(R9(Zue(r,i),i.values),n):Av(t,e)};function C9(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?qt(t,e,n):xR(t)(t,e)}const the=5;function N9(t,e,n){const r=Math.max(e-the,0);return r9(n-t(r),e-r)}const Xt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},EE=.001;function nhe({duration:t=Xt.duration,bounce:e=Xt.bounce,velocity:n=Xt.velocity,mass:r=Xt.mass}){let i,s,a=1-e;a=$a(Xt.minDamping,Xt.maxDamping,a),t=$a(Xt.minDuration,Xt.maxDuration,Ma(t)),a<1?(i=h=>{const f=h*a,p=f*t,g=f-n,_=Mx(h,a),R=Math.exp(-p);return EE-g/_*R},s=h=>{const p=h*a*t,g=p*n+n,_=Math.pow(a,2)*Math.pow(h,2)*t,R=Math.exp(-p),N=Mx(Math.pow(h,2),a);return(-i(h)+EE>0?-1:1)*((g-_)*R)/N}):(i=h=>{const f=Math.exp(-h*t),p=(h-n)*t+1;return-EE+f*p},s=h=>{const f=Math.exp(-h*t),p=(n-h)*(t*t);return f*p});const o=5/t,c=ihe(i,s,o);if(t=Oa(t),isNaN(c))return{stiffness:Xt.stiffness,damping:Xt.damping,duration:t};{const h=Math.pow(c,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:t}}}const rhe=12;function ihe(t,e,n){let r=n;for(let i=1;i<rhe;i++)r=r-t(r)/e(r);return r}function Mx(t,e){return t*Math.sqrt(1-e*e)}const she=["duration","bounce"],ahe=["stiffness","damping","mass"];function sO(t,e){return e.some(n=>t[n]!==void 0)}function ohe(t){let e={velocity:Xt.velocity,stiffness:Xt.stiffness,damping:Xt.damping,mass:Xt.mass,isResolvedFromDuration:!1,...t};if(!sO(t,ahe)&&sO(t,she))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*$a(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Xt.mass,stiffness:i,damping:s}}else{const n=nhe(t);e={...e,...n,mass:Xt.mass},e.isResolvedFromDuration=!0}return e}function P9(t=Xt.visualDuration,e=Xt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:c,damping:h,mass:f,duration:p,velocity:g,isResolvedFromDuration:_}=ohe({...n,velocity:-Ma(n.velocity||0)}),R=g||0,N=h/(2*Math.sqrt(c*f)),A=a-s,b=Ma(Math.sqrt(c/f)),T=Math.abs(A)<5;r||(r=T?Xt.restSpeed.granular:Xt.restSpeed.default),i||(i=T?Xt.restDelta.granular:Xt.restDelta.default);let E;if(N<1){const j=Mx(b,N);E=q=>{const S=Math.exp(-N*b*q);return a-S*((R+N*b*A)/j*Math.sin(j*q)+A*Math.cos(j*q))}}else if(N===1)E=j=>a-Math.exp(-b*j)*(A+(R+b*A)*j);else{const j=b*Math.sqrt(N*N-1);E=q=>{const S=Math.exp(-N*b*q),C=Math.min(j*q,300);return a-S*((R+N*b*A)*Math.sinh(C)+j*A*Math.cosh(C))/j}}const O={calculatedDuration:_&&p||null,next:j=>{const q=E(j);if(_)o.done=j>=p;else{let S=0;N<1&&(S=j===0?Oa(R):N9(E,j,q));const C=Math.abs(S)<=r,k=Math.abs(a-q)<=i;o.done=C&&k}return o.value=o.done?a:q,o},toString:()=>{const j=Math.min(Yj(O),Ix),q=Qj(S=>O.next(j*S).value,j,30);return j+"ms "+q}};return O}function aO({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:c,restDelta:h=.5,restSpeed:f}){const p=t[0],g={done:!1,value:p},_=C=>o!==void 0&&C<o||c!==void 0&&C>c,R=C=>o===void 0?c:c===void 0||Math.abs(o-C)<Math.abs(c-C)?o:c;let N=n*e;const A=p+N,b=a===void 0?A:a(A);b!==A&&(N=b-p);const T=C=>-N*Math.exp(-C/r),E=C=>b+T(C),O=C=>{const k=T(C),M=E(C);g.done=Math.abs(k)<=h,g.value=g.done?b:M};let j,q;const S=C=>{_(g.value)&&(j=C,q=P9({keyframes:[g.value,R(g.value)],velocity:N9(E,C,g.value),damping:i,stiffness:s,restDelta:h,restSpeed:f}))};return S(0),{calculatedDuration:null,next:C=>{let k=!1;return!q&&j===void 0&&(k=!0,O(C),S(C)),j!==void 0&&C>=j?q.next(C-j):(!k&&O(C),g)}}}const lhe=Vg(.42,0,1,1),che=Vg(0,0,.58,1),D9=Vg(.42,0,.58,1),uhe=t=>Array.isArray(t)&&typeof t[0]!="number",hhe={linear:fi,easeIn:lhe,easeInOut:D9,easeOut:che,circIn:vR,circInOut:d9,circOut:h9,backIn:_R,backInOut:c9,backOut:l9,anticipate:u9},oO=t=>{if(fR(t)){Cj(t.length===4);const[e,n,r,i]=t;return Vg(e,n,r,i)}else if(typeof t=="string")return hhe[t];return t};function dhe(t,e,n){const r=[],i=n||C9,s=t.length-1;for(let a=0;a<s;a++){let o=i(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||fi:e;o=Lg(c,o)}r.push(o)}return r}function fhe(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Cj(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=dhe(e,r,i),c=o.length,h=f=>{if(a&&f<t[0])return e[0];let p=0;if(c>1)for(;p<t.length-2&&!(f<t[p+1]);p++);const g=vd(t[p],t[p+1],f);return o[p](g)};return n?f=>h($a(t[0],t[s-1],f)):h}function mhe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=vd(0,e,r);t.push(qt(n,1,i))}}function phe(t){const e=[0];return mhe(e,t.length-1),e}function ghe(t,e){return t.map(n=>n*e)}function yhe(t,e){return t.map(()=>e||D9).splice(0,t.length-1)}function Sv({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=uhe(r)?r.map(oO):oO(r),s={done:!1,value:e[0]},a=ghe(n&&n.length===e.length?n:phe(e),t),o=fhe(a,e,{ease:Array.isArray(i)?i:yhe(e,i)});return{calculatedDuration:t,next:c=>(s.value=o(c),s.done=c>=t,s)}}const _he=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Dt.update(e,!0),stop:()=>wl(e),now:()=>Bn.isProcessing?Bn.timestamp:Bs.now()}},vhe={decay:aO,inertia:aO,tween:Sv,keyframes:Sv,spring:P9},whe=t=>t/100;class AR extends I9{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,a=(i==null?void 0:i.KeyframeResolver)||ER,o=(c,h)=>this.onKeyframesResolved(c,h);this.resolver=new a(s,o,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=dR(n)?n:vhe[n]||Sv;let c,h;o!==Sv&&typeof e[0]!="number"&&(c=Lg(whe,C9(e[0],e[1])),e=[0,100]);const f=o({...this.options,keyframes:e});s==="mirror"&&(h=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=Yj(f));const{calculatedDuration:p}=f,g=p+i,_=g*(r+1)-i;return{generator:f,mirroredGenerator:h,mapPercentToKeyframes:c,calculatedDuration:p,resolvedDuration:g,totalDuration:_}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:c,calculatedDuration:h,totalDuration:f,resolvedDuration:p}=r;if(this.startTime===null)return s.next(0);const{delay:g,repeat:_,repeatType:R,repeatDelay:N,onUpdate:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-f/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const b=this.currentTime-g*(this.speed>=0?1:-1),T=this.speed>=0?b<0:b>f;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let E=this.currentTime,O=s;if(_){const C=Math.min(this.currentTime,f)/p;let k=Math.floor(C),M=C%1;!M&&C>=1&&(M=1),M===1&&k--,k=Math.min(k,_+1),!!(k%2)&&(R==="reverse"?(M=1-M,N&&(M-=N/p)):R==="mirror"&&(O=a)),E=$a(0,1,M)*p}const j=T?{done:!1,value:c[0]}:O.next(E);o&&(j.value=o(j.value));let{done:q}=j;!T&&h!==null&&(q=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&q);return S&&i!==void 0&&(j.value=Kw(c,this.options,i)),A&&A(j.value),S&&this.finish(),j}get duration(){const{resolved:e}=this;return e?Ma(e.calculatedDuration):0}get time(){return Ma(this.currentTime)}set time(e){e=Oa(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ma(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=_he,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const bhe=new Set(["opacity","clipPath","filter","transform"]);function The(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:c}={}){const h={[e]:n};c&&(h.offset=c);const f=Jj(o,i);return Array.isArray(f)&&(h.easing=f),t.animate(h,{delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const Ehe=XI(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Iv=10,xhe=2e4;function Ahe(t){return dR(t.type)||t.type==="spring"||!Xj(t.ease)}function She(t,e){const n=new AR({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<xhe;)r=n.sample(s),i.push(r.value),s+=Iv;return{times:void 0,keyframes:i,duration:s-Iv,ease:"linear"}}const k9={anticipate:u9,backInOut:c9,circInOut:d9};function Ihe(t){return t in k9}class lO extends I9{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new S9(s,(a,o)=>this.onKeyframesResolved(a,o),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:a,motionValue:o,name:c,startTime:h}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&xv()&&Ihe(s)&&(s=k9[s]),Ahe(this.options)){const{onComplete:p,onUpdate:g,motionValue:_,element:R,...N}=this.options,A=She(e,N);e=A.keyframes,e.length===1&&(e[1]=e[0]),r=A.duration,i=A.times,s=A.ease,a="keyframes"}const f=The(o.owner.current,c,e,{...this.options,duration:r,times:i,ease:s});return f.startTime=h??this.calcStartTime(),this.pendingTimeline?($k(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:p}=this.options;o.set(Kw(e,this.options,n)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:r,times:i,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Ma(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Ma(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Oa(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return fi;const{animation:r}=n;$k(r,e)}return fi}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:a,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:f,onComplete:p,element:g,..._}=this.options,R=new AR({..._,keyframes:r,duration:i,type:s,ease:a,times:o,isGenerator:!0}),N=Oa(this.time);h.setWithVelocity(R.sample(N-Iv).value,R.sample(N).value,Iv)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:a,type:o}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:h}=n.owner.getProps();return Ehe()&&r&&bhe.has(r)&&!c&&!h&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const Rhe={type:"spring",stiffness:500,damping:25,restSpeed:10},Che=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Nhe={type:"keyframes",duration:.8},Phe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Dhe=(t,{keyframes:e})=>e.length>2?Nhe:hu.has(t)?t.startsWith("scale")?Che(e[1]):Rhe:Phe;function khe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:c,elapsed:h,...f}){return!!Object.keys(f).length}const SR=(t,e,n,r={},i,s)=>a=>{const o=hR(r,t)||{},c=o.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Oa(c);let f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-h,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:s?void 0:i};khe(o)||(f={...f,...Dhe(t,f)}),f.duration&&(f.duration=Oa(f.duration)),f.repeatDelay&&(f.repeatDelay=Oa(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(p=!0)),p&&!s&&e.get()!==void 0){const g=Kw(f.keyframes,o);if(g!==void 0)return Dt.update(()=>{f.onUpdate(g),f.onComplete()}),new Jce([])}return!s&&lO.supports(f)?new lO(f):new AR(f)};function Ohe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function O9(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:a=t.getDefaultTransition(),transitionEnd:o,...c}=e;r&&(a=r);const h=[],f=i&&t.animationState&&t.animationState.getState()[i];for(const p in c){const g=t.getValue(p,(s=t.latestValues[p])!==null&&s!==void 0?s:null),_=c[p];if(_===void 0||f&&Ohe(f,p))continue;const R={delay:n,...hR(a||{},p)};let N=!1;if(window.MotionHandoffAnimation){const b=i9(t);if(b){const T=window.MotionHandoffAnimation(b,p,Dt);T!==null&&(R.startTime=T,N=!0)}}Cx(t,p),g.start(SR(p,g,_,t.shouldReduceMotion&&n9.has(p)?{type:!1}:R,t,N));const A=g.animation;A&&h.push(A)}return o&&Promise.all(h).then(()=>{Dt.update(()=>{o&&due(t,o)})}),h}function Vx(t,e,n={}){var r;const i=$w(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const a=i?()=>Promise.all(O9(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:g}=s;return Mhe(t,e,f+h,p,g,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[h,f]=c==="beforeChildren"?[a,o]:[o,a];return h().then(()=>f())}else return Promise.all([a(),o(n.delay)])}function Mhe(t,e,n=0,r=0,i=1,s){const a=[],o=(t.variantChildren.size-1)*r,c=i===1?(h=0)=>h*r:(h=0)=>o-h*r;return Array.from(t.variantChildren).sort(Vhe).forEach((h,f)=>{h.notify("AnimationStart",e),a.push(Vx(h,e,{...s,delay:n+c(f)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(a)}function Vhe(t,e){return t.sortNodePosition(e)}function Lhe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Vx(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Vx(t,e,n);else{const i=typeof e=="function"?$w(t,e,n.custom):e;r=Promise.all(O9(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const Uhe=ZI.length;function M9(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?M9(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Uhe;n++){const r=ZI[n],i=t.props[r];(Gp(i)||i===!1)&&(e[r]=i)}return e}const jhe=[...JI].reverse(),Fhe=JI.length;function zhe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Lhe(t,n,r)))}function Bhe(t){let e=zhe(t),n=cO(),r=!0;const i=c=>(h,f)=>{var p;const g=$w(t,f,c==="exit"?(p=t.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(g){const{transition:_,transitionEnd:R,...N}=g;h={...h,...N,...R}}return h};function s(c){e=c(t)}function a(c){const{props:h}=t,f=M9(t.parent)||{},p=[],g=new Set;let _={},R=1/0;for(let A=0;A<Fhe;A++){const b=jhe[A],T=n[b],E=h[b]!==void 0?h[b]:f[b],O=Gp(E),j=b===c?T.isActive:null;j===!1&&(R=A);let q=E===f[b]&&E!==h[b]&&O;if(q&&r&&t.manuallyAnimateOnMount&&(q=!1),T.protectedKeys={..._},!T.isActive&&j===null||!E&&!T.prevProp||Hw(E)||typeof E=="boolean")continue;const S=qhe(T.prevProp,E);let C=S||b===c&&T.isActive&&!q&&O||A>R&&O,k=!1;const M=Array.isArray(E)?E:[E];let U=M.reduce(i(b),{});j===!1&&(U={});const{prevResolvedValues:B={}}=T,F={...B,...U},ne=se=>{C=!0,g.has(se)&&(k=!0,g.delete(se)),T.needsAnimating[se]=!0;const ue=t.getValue(se);ue&&(ue.liveStyle=!1)};for(const se in F){const ue=U[se],Te=B[se];if(_.hasOwnProperty(se))continue;let _e=!1;Sx(ue)&&Sx(Te)?_e=!Wj(ue,Te):_e=ue!==Te,_e?ue!=null?ne(se):g.add(se):ue!==void 0&&g.has(se)?ne(se):T.protectedKeys[se]=!0}T.prevProp=E,T.prevResolvedValues=U,T.isActive&&(_={..._,...U}),r&&t.blockInitialAnimation&&(C=!1),C&&(!(q&&S)||k)&&p.push(...M.map(se=>({animation:se,options:{type:b}})))}if(g.size){const A={};g.forEach(b=>{const T=t.getBaseTarget(b),E=t.getValue(b);E&&(E.liveStyle=!0),A[b]=T??null}),p.push({animation:A})}let N=!!p.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(N=!1),r=!1,N?e(p):Promise.resolve()}function o(c,h){var f;if(n[c].isActive===h)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(g=>{var _;return(_=g.animationState)===null||_===void 0?void 0:_.setActive(c,h)}),n[c].isActive=h;const p=a(c);for(const g in n)n[g].protectedKeys={};return p}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=cO(),r=!0}}}function qhe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Wj(e,t):!1}function ic(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function cO(){return{animate:ic(!0),whileInView:ic(),whileHover:ic(),whileTap:ic(),whileDrag:ic(),whileFocus:ic(),exit:ic()}}class Dl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Hhe extends Dl{constructor(e){super(e),e.animationState||(e.animationState=Bhe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Hw(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Ghe=0;class $he extends Dl{constructor(){super(...arguments),this.id=Ghe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Khe={animation:{Feature:Hhe},exit:{Feature:$he}};function Yp(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Ug(t){return{point:{x:t.pageX,y:t.pageY}}}const Whe=t=>e=>mR(e)&&t(e,Ug(e));function tp(t,e,n,r){return Yp(t,e,Whe(n),r)}const uO=(t,e)=>Math.abs(t-e);function Yhe(t,e){const n=uO(t.x,e.x),r=uO(t.y,e.y);return Math.sqrt(n**2+r**2)}class V9{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=AE(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,_=Yhe(p.offset,{x:0,y:0})>=3;if(!g&&!_)return;const{point:R}=p,{timestamp:N}=Bn;this.history.push({...R,timestamp:N});const{onStart:A,onMove:b}=this.handlers;g||(A&&A(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=xE(g,this.transformPagePoint),Dt.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:_,onSessionEnd:R,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=AE(p.type==="pointercancel"?this.lastMoveEventInfo:xE(g,this.transformPagePoint),this.history);this.startEvent&&_&&_(p,A),R&&R(p,A)},!mR(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=Ug(e),o=xE(a,this.transformPagePoint),{point:c}=o,{timestamp:h}=Bn;this.history=[{...c,timestamp:h}];const{onSessionStart:f}=n;f&&f(e,AE(o,this.history)),this.removeListeners=Lg(tp(this.contextWindow,"pointermove",this.handlePointerMove),tp(this.contextWindow,"pointerup",this.handlePointerUp),tp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),wl(this.updatePoint)}}function xE(t,e){return e?{point:e(t.point)}:t}function hO(t,e){return{x:t.x-e.x,y:t.y-e.y}}function AE({point:t},e){return{point:t,delta:hO(t,L9(e)),offset:hO(t,Qhe(e)),velocity:Xhe(e,.1)}}function Qhe(t){return t[0]}function L9(t){return t[t.length-1]}function Xhe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=L9(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Oa(e)));)n--;if(!r)return{x:0,y:0};const s=Ma(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const U9=1e-4,Jhe=1-U9,Zhe=1+U9,j9=.01,ede=0-j9,tde=0+j9;function yi(t){return t.max-t.min}function nde(t,e,n){return Math.abs(t-e)<=n}function dO(t,e,n,r=.5){t.origin=r,t.originPoint=qt(e.min,e.max,t.origin),t.scale=yi(n)/yi(e),t.translate=qt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Jhe&&t.scale<=Zhe||isNaN(t.scale))&&(t.scale=1),(t.translate>=ede&&t.translate<=tde||isNaN(t.translate))&&(t.translate=0)}function np(t,e,n,r){dO(t.x,e.x,n.x,r?r.originX:void 0),dO(t.y,e.y,n.y,r?r.originY:void 0)}function fO(t,e,n){t.min=n.min+e.min,t.max=t.min+yi(e)}function rde(t,e,n){fO(t.x,e.x,n.x),fO(t.y,e.y,n.y)}function mO(t,e,n){t.min=e.min-n.min,t.max=t.min+yi(e)}function rp(t,e,n){mO(t.x,e.x,n.x),mO(t.y,e.y,n.y)}function ide(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?qt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?qt(n,t,r.max):Math.min(t,n)),t}function pO(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function sde(t,{top:e,left:n,bottom:r,right:i}){return{x:pO(t.x,n,i),y:pO(t.y,e,r)}}function gO(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function ade(t,e){return{x:gO(t.x,e.x),y:gO(t.y,e.y)}}function ode(t,e){let n=.5;const r=yi(t),i=yi(e);return i>r?n=vd(e.min,e.max-r,t.min):r>i&&(n=vd(t.min,t.max-i,e.min)),$a(0,1,n)}function lde(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Lx=.35;function cde(t=Lx){return t===!1?t=0:t===!0&&(t=Lx),{x:yO(t,"left","right"),y:yO(t,"top","bottom")}}function yO(t,e,n){return{min:_O(t,e),max:_O(t,n)}}function _O(t,e){return typeof t=="number"?t:t[e]||0}const vO=()=>({translate:0,scale:1,origin:0,originPoint:0}),Th=()=>({x:vO(),y:vO()}),wO=()=>({min:0,max:0}),on=()=>({x:wO(),y:wO()});function Ii(t){return[t("x"),t("y")]}function F9({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function ude({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function hde(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function SE(t){return t===void 0||t===1}function Ux({scale:t,scaleX:e,scaleY:n}){return!SE(t)||!SE(e)||!SE(n)}function dc(t){return Ux(t)||z9(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function z9(t){return bO(t.x)||bO(t.y)}function bO(t){return t&&t!=="0%"}function Rv(t,e,n){const r=t-n,i=e*r;return n+i}function TO(t,e,n,r,i){return i!==void 0&&(t=Rv(t,i,r)),Rv(t,n,r)+e}function jx(t,e=0,n=1,r,i){t.min=TO(t.min,e,n,r,i),t.max=TO(t.max,e,n,r,i)}function B9(t,{x:e,y:n}){jx(t.x,e.translate,e.scale,e.originPoint),jx(t.y,n.translate,n.scale,n.originPoint)}const EO=.999999999999,xO=1.0000000000001;function dde(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&xh(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,B9(t,a)),r&&dc(s.latestValues)&&xh(t,s.latestValues))}e.x<xO&&e.x>EO&&(e.x=1),e.y<xO&&e.y>EO&&(e.y=1)}function Eh(t,e){t.min=t.min+e,t.max=t.max+e}function AO(t,e,n,r,i=.5){const s=qt(t.min,t.max,i);jx(t,e,n,s,r)}function xh(t,e){AO(t.x,e.x,e.scaleX,e.scale,e.originX),AO(t.y,e.y,e.scaleY,e.scale,e.originY)}function q9(t,e){return F9(hde(t.getBoundingClientRect(),e))}function fde(t,e,n){const r=q9(t,n),{scroll:i}=e;return i&&(Eh(r.x,i.offset.x),Eh(r.y,i.offset.y)),r}const H9=({current:t})=>t?t.ownerDocument.defaultView:null,mde=new WeakMap;class pde{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=on(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ug(f).point)},s=(f,p)=>{const{drag:g,dragPropagation:_,onDragStart:R}=this.getProps();if(g&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=oue(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ii(A=>{let b=this.getAxisMotionValue(A).get()||0;if(zs.test(b)){const{projection:T}=this.visualElement;if(T&&T.layout){const E=T.layout.layoutBox[A];E&&(b=yi(E)*(parseFloat(b)/100))}}this.originPoint[A]=b}),R&&Dt.postRender(()=>R(f,p)),Cx(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},a=(f,p)=>{const{dragPropagation:g,dragDirectionLock:_,onDirectionLock:R,onDrag:N}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:A}=p;if(_&&this.currentDirection===null){this.currentDirection=gde(A),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",p.point,A),this.updateAxis("y",p.point,A),this.visualElement.render(),N&&N(f,p)},o=(f,p)=>this.stop(f,p),c=()=>Ii(f=>{var p;return this.getAnimationState(f)==="paused"&&((p=this.getAxisMotionValue(f).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new V9(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:H9(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Dt.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!S_(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=ide(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&wh(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=sde(i.layoutBox,n):this.constraints=!1,this.elastic=cde(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ii(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=lde(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!wh(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=fde(r,i.root,this.visualElement.getTransformPagePoint());let a=ade(i.layout.layoutBox,s);if(n){const o=n(ude(a));this.hasMutatedConstraints=!!o,o&&(a=F9(o))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},h=Ii(f=>{if(!S_(f,n,this.currentDirection))return;let p=c&&c[f]||{};a&&(p={min:0,max:0});const g=i?200:1e6,_=i?40:1e7,R={type:"inertia",velocity:r?e[f]:0,bounceStiffness:g,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(f,R)});return Promise.all(h).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Cx(this.visualElement,e),r.start(SR(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ii(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ii(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ii(n=>{const{drag:r}=this.getProps();if(!S_(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[n];s.set(e[n]-qt(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!wh(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ii(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const c=o.get();i[a]=ode({min:c,max:c},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ii(a=>{if(!S_(a,e,null))return;const o=this.getAxisMotionValue(a),{min:c,max:h}=this.constraints[a];o.set(qt(c,h,i[a]))})}addListeners(){if(!this.visualElement.current)return;mde.set(this.visualElement,this);const e=this.visualElement.current,n=tp(e,"pointerdown",c=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();wh(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Dt.read(r);const a=Yp(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h})=>{this.isDragging&&h&&(Ii(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=c[f].translate,p.set(p.get()+c[f].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=Lx,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function S_(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function gde(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class yde extends Dl{constructor(e){super(e),this.removeGroupControls=fi,this.removeListeners=fi,this.controls=new pde(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||fi}unmount(){this.removeGroupControls(),this.removeListeners()}}const SO=t=>(e,n)=>{t&&Dt.postRender(()=>t(e,n))};class _de extends Dl{constructor(){super(...arguments),this.removePointerDownListener=fi}onPointerDown(e){this.session=new V9(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:H9(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:SO(e),onStart:SO(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&Dt.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=tp(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const u0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function IO(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const nm={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Se.test(t))t=parseFloat(t);else return t;const n=IO(t,e.target.x),r=IO(t,e.target.y);return`${n}% ${r}%`}},vde={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=bl.parse(t);if(i.length>5)return r;const s=bl.createTransformer(t),a=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;i[0+a]/=o,i[1+a]/=c;const h=qt(o,c,.5);return typeof i[2+a]=="number"&&(i[2+a]/=h),typeof i[3+a]=="number"&&(i[3+a]/=h),s(i)}};class wde extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Fce(bde),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),u0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Dt.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),tR.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function G9(t){const[e,n]=Ij(),r=P.useContext(KI);return y.jsx(wde,{...t,layoutGroup:r,switchLayoutGroup:P.useContext(Mj),isPresent:e,safeToRemove:n})}const bde={borderRadius:{...nm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:nm,borderTopRightRadius:nm,borderBottomLeftRadius:nm,borderBottomRightRadius:nm,boxShadow:vde};function Tde(t,e,n){const r=lr(t)?t:Kp(t);return r.start(SR("",r,e,n)),r.animation}function Ede(t){return t instanceof SVGElement&&t.tagName!=="svg"}const xde=(t,e)=>t.depth-e.depth;class Ade{constructor(){this.children=[],this.isDirty=!1}add(e){pR(this.children,e),this.isDirty=!0}remove(e){gR(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(xde),this.isDirty=!1,this.children.forEach(e)}}function Sde(t,e){const n=Bs.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(wl(r),t(s-e))};return Dt.read(r,!0),()=>wl(r)}const $9=["TopLeft","TopRight","BottomLeft","BottomRight"],Ide=$9.length,RO=t=>typeof t=="string"?parseFloat(t):t,CO=t=>typeof t=="number"||Se.test(t);function Rde(t,e,n,r,i,s){i?(t.opacity=qt(0,n.opacity!==void 0?n.opacity:1,Cde(r)),t.opacityExit=qt(e.opacity!==void 0?e.opacity:1,0,Nde(r))):s&&(t.opacity=qt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<Ide;a++){const o=`border${$9[a]}Radius`;let c=NO(e,o),h=NO(n,o);if(c===void 0&&h===void 0)continue;c||(c=0),h||(h=0),c===0||h===0||CO(c)===CO(h)?(t[o]=Math.max(qt(RO(c),RO(h),r),0),(zs.test(h)||zs.test(c))&&(t[o]+="%")):t[o]=h}(e.rotate||n.rotate)&&(t.rotate=qt(e.rotate||0,n.rotate||0,r))}function NO(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Cde=K9(0,.5,h9),Nde=K9(.5,.95,fi);function K9(t,e,n){return r=>r<t?0:r>e?1:n(vd(t,e,r))}function PO(t,e){t.min=e.min,t.max=e.max}function Si(t,e){PO(t.x,e.x),PO(t.y,e.y)}function DO(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function kO(t,e,n,r,i){return t-=e,t=Rv(t,1/n,r),i!==void 0&&(t=Rv(t,1/i,r)),t}function Pde(t,e=0,n=1,r=.5,i,s=t,a=t){if(zs.test(e)&&(e=parseFloat(e),e=qt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=qt(s.min,s.max,r);t===s&&(o-=e),t.min=kO(t.min,e,n,o,i),t.max=kO(t.max,e,n,o,i)}function OO(t,e,[n,r,i],s,a){Pde(t,e[n],e[r],e[i],e.scale,s,a)}const Dde=["x","scaleX","originX"],kde=["y","scaleY","originY"];function MO(t,e,n,r){OO(t.x,e,Dde,n?n.x:void 0,r?r.x:void 0),OO(t.y,e,kde,n?n.y:void 0,r?r.y:void 0)}function VO(t){return t.translate===0&&t.scale===1}function W9(t){return VO(t.x)&&VO(t.y)}function LO(t,e){return t.min===e.min&&t.max===e.max}function Ode(t,e){return LO(t.x,e.x)&&LO(t.y,e.y)}function UO(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Y9(t,e){return UO(t.x,e.x)&&UO(t.y,e.y)}function jO(t){return yi(t.x)/yi(t.y)}function FO(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Mde{constructor(){this.members=[]}add(e){pR(this.members,e),e.scheduleRender()}remove(e){if(gR(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Vde(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:f,rotateX:p,rotateY:g,skewX:_,skewY:R}=n;h&&(r=`perspective(${h}px) ${r}`),f&&(r+=`rotate(${f}deg) `),p&&(r+=`rotateX(${p}deg) `),g&&(r+=`rotateY(${g}deg) `),_&&(r+=`skewX(${_}deg) `),R&&(r+=`skewY(${R}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const fc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},wm=typeof window<"u"&&window.MotionDebug!==void 0,IE=["","X","Y","Z"],Lde={visibility:"hidden"},zO=1e3;let Ude=0;function RE(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Q9(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=i9(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Dt,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Q9(r)}function X9({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=e==null?void 0:e()){this.id=Ude++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,wm&&(fc.totalNodes=fc.resolvedTargetDeltas=fc.recalculatedProjection=0),this.nodes.forEach(zde),this.nodes.forEach($de),this.nodes.forEach(Kde),this.nodes.forEach(Bde),wm&&window.MotionDebug.record(fc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ade)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new yR),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const c=this.eventHandlers.get(a);c&&c.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Ede(a),this.instance=a;const{layoutId:c,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(h||c)&&(this.isLayoutDirty=!0),t){let p;const g=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=Sde(g,250),u0.hasAnimatedSinceResize&&(u0.hasAnimatedSinceResize=!1,this.nodes.forEach(qO))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeTargetChanged:_,layout:R})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||f.getDefaultTransition()||Jde,{onLayoutAnimationStart:A,onLayoutAnimationComplete:b}=f.getProps(),T=!this.targetLayout||!Y9(this.targetLayout,R)||_,E=!g&&_;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||g&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,E);const O={...hR(N,"layout"),onPlay:A,onComplete:b};(f.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O)}else g||qO(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=R})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,wl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Wde),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Q9(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(BO);return}this.isUpdating||this.nodes.forEach(Hde),this.isUpdating=!1,this.nodes.forEach(Gde),this.nodes.forEach(jde),this.nodes.forEach(Fde),this.clearAllSnapshots();const o=Bs.now();Bn.delta=$a(0,1e3/60,o-Bn.timestamp),Bn.timestamp=o,Bn.isProcessing=!0,_E.update.process(Bn),_E.preRender.process(Bn),_E.render.process(Bn),Bn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,tR.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(qde),this.sharedNodes.forEach(Yde)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Dt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Dt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=on(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!W9(this.projectionDelta),c=this.getTransformTemplate(),h=c?c(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;a&&(o||dc(this.latestValues)||f)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return a&&(c=this.removeTransform(c)),Zde(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return on();const c=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(efe))){const{scroll:f}=this.root;f&&(Eh(c.x,f.offset.x),Eh(c.y,f.offset.y))}return c}removeElementScroll(a){var o;const c=on();if(Si(c,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return c;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:p,options:g}=f;f!==this.root&&p&&g.layoutScroll&&(p.wasRoot&&Si(c,a),Eh(c.x,p.offset.x),Eh(c.y,p.offset.y))}return c}applyTransform(a,o=!1){const c=on();Si(c,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&xh(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),dc(f.latestValues)&&xh(c,f.latestValues)}return dc(this.latestValues)&&xh(c,this.latestValues),c}removeTransform(a){const o=on();Si(o,a);for(let c=0;c<this.path.length;c++){const h=this.path[c];if(!h.instance||!dc(h.latestValues))continue;Ux(h.latestValues)&&h.updateSnapshot();const f=on(),p=h.measurePageBox();Si(f,p),MO(o,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return dc(this.latestValues)&&MO(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Bn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==c;if(!(a||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!(!this.layout||!(p||g))){if(this.resolvedRelativeTargetAt=Bn.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=on(),this.relativeTargetOrigin=on(),rp(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),Si(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=on(),this.targetWithTransforms=on()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rde(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Si(this.target,this.layout.layoutBox),B9(this.target,this.targetDelta)):Si(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=on(),this.relativeTargetOrigin=on(),rp(this.relativeTargetOrigin,this.target,_.target),Si(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}wm&&fc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ux(this.parent.latestValues)||z9(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let h=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(h=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Bn.timestamp&&(h=!1),h)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;Si(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,_=this.treeScale.y;dde(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=on());const{target:R}=o;if(!R){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(DO(this.prevProjectionDelta.x,this.projectionDelta.x),DO(this.prevProjectionDelta.y,this.projectionDelta.y)),np(this.projectionDelta,this.layoutCorrected,R,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==_||!FO(this.projectionDelta.x,this.prevProjectionDelta.x)||!FO(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",R)),wm&&fc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Th(),this.projectionDelta=Th(),this.projectionDeltaWithTransform=Th()}setAnimationOrigin(a,o=!1){const c=this.snapshot,h=c?c.latestValues:{},f={...this.latestValues},p=Th();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=on(),_=c?c.source:void 0,R=this.layout?this.layout.source:void 0,N=_!==R,A=this.getStack(),b=!A||A.members.length<=1,T=!!(N&&!b&&this.options.crossfade===!0&&!this.path.some(Xde));this.animationProgress=0;let E;this.mixTargetDelta=O=>{const j=O/1e3;HO(p.x,a.x,j),HO(p.y,a.y,j),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rp(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Qde(this.relativeTarget,this.relativeTargetOrigin,g,j),E&&Ode(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=on()),Si(E,this.relativeTarget)),N&&(this.animationValues=f,Rde(f,h,this.latestValues,j,T,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(wl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Dt.update(()=>{u0.hasAnimatedSinceResize=!0,this.currentAnimation=Tde(0,zO,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(zO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:c,layout:h,latestValues:f}=a;if(!(!o||!c||!h)){if(this!==a&&this.layout&&h&&J9(this.options.animationType,this.layout.layoutBox,h.layoutBox)){c=this.target||on();const p=yi(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+p;const g=yi(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+g}Si(o,c),xh(o,f),np(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Mde),this.sharedNodes.get(a).add(o);const h=o.options.initialPromotionConfig;o.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:c}={}){const h=this.getStack();h&&h.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const h={};c.z&&RE("z",a,h,this.animationValues);for(let f=0;f<IE.length;f++)RE(`rotate${IE[f]}`,a,h,this.animationValues),RE(`skew${IE[f]}`,a,h,this.animationValues);a.render();for(const f in h)a.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);a.scheduleRender()}getProjectionStyles(a){var o,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Lde;const h={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=l0(a==null?void 0:a.pointerEvents)||"",h.transform=f?f(this.latestValues,""):"none",h;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const N={};return this.options.layoutId&&(N.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,N.pointerEvents=l0(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!dc(this.latestValues)&&(N.transform=f?f({},""):"none",this.hasProjected=!1),N}const g=p.animationValues||p.latestValues;this.applyTransformsToTarget(),h.transform=Vde(this.projectionDeltaWithTransform,this.treeScale,g),f&&(h.transform=f(g,h.transform));const{x:_,y:R}=this.projectionDelta;h.transformOrigin=`${_.origin*100}% ${R.origin*100}% 0`,p.animationValues?h.opacity=p===this?(c=(o=g.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:h.opacity=p===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const N in Ev){if(g[N]===void 0)continue;const{correct:A,applyTo:b}=Ev[N],T=h.transform==="none"?g[N]:A(g[N],p);if(b){const E=b.length;for(let O=0;O<E;O++)h[b[O]]=T}else h[N]=T}return this.options.layoutId&&(h.pointerEvents=p===this?l0(a==null?void 0:a.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(BO),this.root.sharedNodes.clear()}}}function jde(t){t.updateLayout()}function Fde(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,a=n.source!==t.layout.source;s==="size"?Ii(p=>{const g=a?n.measuredBox[p]:n.layoutBox[p],_=yi(g);g.min=r[p].min,g.max=g.min+_}):J9(s,n.layoutBox,r)&&Ii(p=>{const g=a?n.measuredBox[p]:n.layoutBox[p],_=yi(r[p]);g.max=g.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+_)});const o=Th();np(o,r,n.layoutBox);const c=Th();a?np(c,t.applyTransform(i,!0),n.measuredBox):np(c,r,n.layoutBox);const h=!W9(o);let f=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:g,layout:_}=p;if(g&&_){const R=on();rp(R,n.layoutBox,g.layoutBox);const N=on();rp(N,r,_.layoutBox),Y9(R,N)||(f=!0),p.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=R,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:o,hasLayoutChanged:h,hasRelativeTargetChanged:f})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function zde(t){wm&&fc.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Bde(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function qde(t){t.clearSnapshot()}function BO(t){t.clearMeasurements()}function Hde(t){t.isLayoutDirty=!1}function Gde(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function qO(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function $de(t){t.resolveTargetDelta()}function Kde(t){t.calcProjection()}function Wde(t){t.resetSkewAndRotation()}function Yde(t){t.removeLeadSnapshot()}function HO(t,e,n){t.translate=qt(e.translate,0,n),t.scale=qt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function GO(t,e,n,r){t.min=qt(e.min,n.min,r),t.max=qt(e.max,n.max,r)}function Qde(t,e,n,r){GO(t.x,e.x,n.x,r),GO(t.y,e.y,n.y,r)}function Xde(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Jde={duration:.45,ease:[.4,0,.1,1]},$O=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),KO=$O("applewebkit/")&&!$O("chrome/")?Math.round:fi;function WO(t){t.min=KO(t.min),t.max=KO(t.max)}function Zde(t){WO(t.x),WO(t.y)}function J9(t,e,n){return t==="position"||t==="preserve-aspect"&&!nde(jO(e),jO(n),.2)}function efe(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const tfe=X9({attachResizeListener:(t,e)=>Yp(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),CE={current:void 0},Z9=X9({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!CE.current){const t=new tfe({});t.mount(window),t.setOptions({layoutScroll:!0}),CE.current=t}return CE.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),nfe={pan:{Feature:_de},drag:{Feature:yde,ProjectionNode:Z9,MeasureLayout:G9}};function YO(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Dt.postRender(()=>s(e,Ug(e)))}class rfe extends Dl{mount(){const{current:e}=this.node;e&&(this.unmount=nue(e,n=>(YO(this.node,n,"Start"),r=>YO(this.node,r,"End"))))}unmount(){}}class ife extends Dl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Lg(Yp(this.node.current,"focus",()=>this.onFocus()),Yp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function QO(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Dt.postRender(()=>s(e,Ug(e)))}class sfe extends Dl{mount(){const{current:e}=this.node;e&&(this.unmount=aue(e,n=>(QO(this.node,n,"Start"),(r,{success:i})=>QO(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Fx=new WeakMap,NE=new WeakMap,afe=t=>{const e=Fx.get(t.target);e&&e(t)},ofe=t=>{t.forEach(afe)};function lfe({root:t,...e}){const n=t||document;NE.has(n)||NE.set(n,{});const r=NE.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(ofe,{root:t,...e})),r[i]}function cfe(t,e,n){const r=lfe(e);return Fx.set(t,n),r.observe(t),()=>{Fx.delete(t),r.unobserve(t)}}const ufe={some:0,all:1};class hfe extends Dl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:ufe[i]},o=c=>{const{isIntersecting:h}=c;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),g=h?f:p;g&&g(c)};return cfe(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(dfe(e,n))&&this.startObserver()}unmount(){}}function dfe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const ffe={inView:{Feature:hfe},tap:{Feature:sfe},focus:{Feature:ife},hover:{Feature:rfe}},mfe={layout:{ProjectionNode:Z9,MeasureLayout:G9}},zx={current:null},eF={current:!1};function pfe(){if(eF.current=!0,!!QI)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>zx.current=t.matches;t.addListener(e),e()}else zx.current=!1}const gfe=[...A9,rr,bl],yfe=t=>gfe.find(x9(t)),XO=new WeakMap;function _fe(t,e,n){for(const r in e){const i=e[r],s=n[r];if(lr(i))t.addValue(r,i);else if(lr(s))t.addValue(r,Kp(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,Kp(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const JO=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class vfe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ER,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Bs.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Dt.render(this.render,!1,!0))};const{latestValues:c,renderState:h,onUpdate:f}=a;this.onUpdate=f,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=Gw(n),this.isVariantNode=kj(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const _ in g){const R=g[_];c[_]!==void 0&&lr(R)&&R.set(c[_],!1)}}mount(e){this.current=e,XO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),eF.current||pfe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:zx.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){XO.delete(this.current),this.projection&&this.projection.unmount(),wl(this.notifyUpdate),wl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=hu.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Dt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in wd){const n=wd[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):on()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<JO.length;r++){const i=JO[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=_fe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Kp(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(T9(i)||f9(i))?i=parseFloat(i):!yfe(i)&&bl.test(n)&&(i=v9(e,n)),this.setBaseTarget(e,lr(i)?i.get():i)),lr(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=rR(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!lr(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new yR),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class tF extends vfe{constructor(){super(...arguments),this.KeyframeResolver=S9}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;lr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function wfe(t){return window.getComputedStyle(t)}class bfe extends tF{constructor(){super(...arguments),this.type="html",this.renderInstance=Bj}readValueFromInstance(e,n){if(hu.has(n)){const r=TR(n);return r&&r.default||0}else{const r=wfe(e),i=(jj(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return q9(e,n)}build(e,n,r){aR(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return uR(e,n,r)}}class Tfe extends tF{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=on}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(hu.has(n)){const r=TR(n);return r&&r.default||0}return n=qj.has(n)?n:eR(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return $j(e,n,r)}build(e,n,r){oR(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){Hj(e,n,r,i)}mount(e){this.isSVGTag=cR(e.tagName),super.mount(e)}}const Efe=(t,e)=>nR(t)?new Tfe(e):new bfe(e,{allowProjection:t!==P.Fragment}),xfe=Yce({...Khe,...ffe,...nfe,...mfe},Efe),Jt=uce(xfe),nF=()=>{const t=P.useRef(null),e=P.useCallback(()=>{t.current||(t.current=new(window.AudioContext||window.webkitAudioContext)),t.current.state==="suspended"&&t.current.resume().catch(o=>console.error("Audio resume failed:",o))},[]),n=P.useCallback(()=>{e();const o=t.current;if(!o)return;const c=o.createOscillator(),h=o.createGain();c.connect(h),h.connect(o.destination),c.type="triangle",c.frequency.setValueAtTime(800,o.currentTime),c.frequency.exponentialRampToValueAtTime(100,o.currentTime+.05),h.gain.setValueAtTime(.3,o.currentTime),h.gain.exponentialRampToValueAtTime(.01,o.currentTime+.05),c.start(o.currentTime),c.stop(o.currentTime+.05)},[e]),r=P.useCallback(()=>{e();const o=t.current;if(!o)return;[523.25,659.25,783.99,1046.5].forEach((h,f)=>{const p=o.createOscillator(),g=o.createGain();p.connect(g),g.connect(o.destination),p.type="sine",p.frequency.value=h;const _=o.currentTime+f*.1,R=.8;g.gain.setValueAtTime(0,_),g.gain.linearRampToValueAtTime(.3,_+.05),g.gain.exponentialRampToValueAtTime(.01,_+R),p.start(_),p.stop(_+R)})},[e]),i=P.useCallback(()=>{e();const o=t.current;if(!o)return;const c=o.createOscillator(),h=o.createGain();c.connect(h),h.connect(o.destination),c.type="sine",c.frequency.setValueAtTime(200,o.currentTime),c.frequency.linearRampToValueAtTime(600,o.currentTime+.3),h.gain.setValueAtTime(.2,o.currentTime),h.gain.linearRampToValueAtTime(0,o.currentTime+.3),c.start(o.currentTime),c.stop(o.currentTime+.3)},[e]),s=P.useCallback(()=>{e();const o=t.current;if(!o)return;const c=o.sampleRate*.1,h=o.createBuffer(1,c,o.sampleRate),f=h.getChannelData(0);for(let N=0;N<c;N++){const A=Math.random()*2-1,b=1-N/c;f[N]=A*b}const p=N=>{const A=o.createBufferSource();A.buffer=h;const b=o.createBiquadFilter();b.type="bandpass",b.frequency.value=800+Math.random()*600,b.Q.value=1;const T=o.createGain();T.gain.value=.1+Math.random()*.1,A.connect(b),b.connect(T),T.connect(o.destination),A.start(N)},g=o.currentTime,_=2,R=30;for(let N=0;N<_*R;N++){const A=g+Math.random()*_;Math.random()>.3&&p(A)}for(let N=0;N<5;N++)p(g+Math.random()*.1)},[e]),a=P.useCallback(()=>{e();const o=t.current;if(!o)return;const c=o.createOscillator(),h=o.createGain();c.connect(h),h.connect(o.destination),c.type="triangle",c.frequency.setValueAtTime(150,o.currentTime),c.frequency.exponentialRampToValueAtTime(40,o.currentTime+.1),h.gain.setValueAtTime(.5,o.currentTime),h.gain.exponentialRampToValueAtTime(.01,o.currentTime+.15),c.start(o.currentTime),c.stop(o.currentTime+.15);const f=o.sampleRate*.5,p=o.createBuffer(1,f,o.sampleRate),g=p.getChannelData(0);for(let A=0;A<f;A++)g[A]=Math.random()*2-1;const _=o.createBufferSource();_.buffer=p;const R=o.createBiquadFilter();R.type="highpass",R.frequency.value=1e3;const N=o.createGain();_.connect(R),R.connect(N),N.connect(o.destination),N.gain.setValueAtTime(.3,o.currentTime),N.gain.exponentialRampToValueAtTime(.01,o.currentTime+.3),_.start(o.currentTime),_.stop(o.currentTime+.3)},[e]);return{playTick:n,playWin:r,playSpinStart:i,playCheer:s,playConfettiPop:a}},Xu=[{id:"1",label:"5% OFF",value:5,type:"discount",color:"#F97316",textColor:"#FFFFFF"},{id:"2",label:"25% OFF",value:25,type:"discount",color:"#FBBF24",textColor:"#000000"},{id:"3",label:"10% OFF",value:10,type:"discount",color:"#FB923C",textColor:"#FFFFFF"},{id:"4",label:"50% OFF",value:50,type:"discount",color:"#FFD700",textColor:"#000000"},{id:"5",label:"15% OFF",value:15,type:"discount",color:"#EF4444",textColor:"#FFFFFF"},{id:"6",label:"FREE!",value:100,type:"freebie",color:"#10B981",textColor:"#FFFFFF"},{id:"7",label:"20% OFF",value:20,type:"discount",color:"#F59E0B",textColor:"#FFFFFF"},{id:"8",label:"30% OFF",value:30,type:"discount",color:"#DC2626",textColor:"#FFFFFF"}],Afe=()=>{const t=[20,15,25,1,18,.5,12,7],e=t.reduce((r,i)=>r+i,0);let n=Math.random()*e;for(let r=0;r<t.length;r++)if(n-=t[r],n<=0)return r;return 0},Sfe=({onSpinComplete:t,isSpinning:e})=>{const n=P.useRef(null),[r,i]=P.useState(0),[s,a]=P.useState(!1),o=P.useRef(),c=P.useRef(0),{playTick:h,playSpinStart:f}=nF();P.useEffect(()=>{p()},[r]),P.useEffect(()=>{e&&!s&&R()},[e]);const p=()=>{const N=n.current;if(!N)return;const A=N.getContext("2d");if(!A)return;const b=N.width/2,T=N.height/2,E=Math.min(b,T)-20;A.clearRect(0,0,N.width,N.height),A.save(),A.shadowColor="rgba(251, 146, 60, 0.5)",A.shadowBlur=30,A.beginPath(),A.arc(b,T,E+10,0,2*Math.PI),A.strokeStyle="rgba(251, 146, 60, 0.3)",A.lineWidth=20,A.stroke(),A.restore();const O=2*Math.PI/Xu.length;Xu.forEach((S,C)=>{const k=C*O+r,M=k+O;A.save(),A.beginPath(),A.moveTo(b+3,T+3),A.arc(b+3,T+3,E,k,M),A.closePath(),A.fillStyle="rgba(0, 0, 0, 0.2)",A.fill(),A.restore(),A.beginPath(),A.moveTo(b,T),A.arc(b,T,E,k,M),A.closePath();const U=A.createRadialGradient(b,T,0,b,T,E);U.addColorStop(0,g(S.color,30)),U.addColorStop(.7,S.color),U.addColorStop(1,_(S.color,20)),A.fillStyle=U,A.fill(),A.save(),A.clip();const B=A.createRadialGradient(b,T-E*.3,0,b,T-E*.3,E*.8);B.addColorStop(0,"rgba(255, 255, 255, 0.4)"),B.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),B.addColorStop(1,"rgba(255, 255, 255, 0)"),A.fillStyle=B,A.fill(),A.restore(),A.strokeStyle="rgba(255, 255, 255, 0.5)",A.lineWidth=2,A.stroke(),A.save(),A.translate(b,T),A.rotate(k+O/2),A.textAlign="center",A.textBaseline="middle",A.shadowColor="rgba(0, 0, 0, 0.5)",A.shadowBlur=4,A.shadowOffsetX=2,A.shadowOffsetY=2,A.fillStyle=S.textColor,A.font="bold 24px Inter, sans-serif",A.fillText(S.label,E*.7,0),A.restore()}),Xu.forEach((S,C)=>{const k=C*O+r,M=b+Math.cos(k)*E,U=T+Math.sin(k)*E;A.beginPath(),A.arc(M,U,6,0,2*Math.PI);const B=A.createRadialGradient(M-2,U-2,0,M,U,6);B.addColorStop(0,"#FFFFFF"),B.addColorStop(.4,"#D1D5DB"),B.addColorStop(1,"#4B5563"),A.fillStyle=B,A.shadowColor="rgba(0,0,0,0.4)",A.shadowBlur=4,A.fill(),A.strokeStyle="#1F2937",A.lineWidth=1,A.stroke()});const j=A.createRadialGradient(b,T,0,b,T,50);j.addColorStop(0,"#FFFFFF"),j.addColorStop(.7,"#F3F4F6"),j.addColorStop(1,"#D1D5DB"),A.beginPath(),A.arc(b,T,50,0,2*Math.PI),A.fillStyle=j,A.fill(),A.strokeStyle="#F97316",A.lineWidth=6,A.stroke(),A.beginPath(),A.arc(b,T,20,0,2*Math.PI);const q=A.createRadialGradient(b-5,T-5,0,b,T,20);q.addColorStop(0,"#FFA500"),q.addColorStop(1,"#FF6B00"),A.fillStyle=q,A.fill(),A.beginPath(),A.arc(b-5,T-5,8,0,2*Math.PI),A.fillStyle="rgba(255, 255, 255, 0.6)",A.fill()},g=(N,A)=>{const b=parseInt(N.replace("#",""),16),T=Math.min(255,(b>>16&255)+A),E=Math.min(255,(b>>8&255)+A),O=Math.min(255,(b&255)+A);return`#${(T<<16|E<<8|O).toString(16).padStart(6,"0")}`},_=(N,A)=>{const b=parseInt(N.replace("#",""),16),T=Math.max(0,(b>>16&255)-A),E=Math.max(0,(b>>8&255)-A),O=Math.max(0,(b&255)-A);return`#${(T<<16|E<<8|O).toString(16).padStart(6,"0")}`},R=()=>{a(!0),f();const N=Afe(),A=2*Math.PI/Xu.length,b=5+Math.floor(Math.random()*5),T=2*Math.PI*b-N*A-A/2-Math.PI/2,E=5e3,O=Date.now(),j=r,q=()=>{const C=Date.now()-O,k=Math.min(C/E,1),M=1-Math.pow(1-k,3),U=j+(T-j)*M,B=Math.PI*2/Xu.length,F=Math.floor(U/B);F>c.current&&(h(),c.current=F),i(U),k<1?o.current=requestAnimationFrame(q):(a(!1),setTimeout(()=>{t(Xu[N])},300))};o.current=requestAnimationFrame(q)};return P.useEffect(()=>()=>{o.current&&cancelAnimationFrame(o.current)},[]),y.jsxs("div",{className:"relative flex items-center justify-center py-4",children:[y.jsx(Jt.div,{className:"absolute w-[450px] h-[450px] rounded-full bg-gradient-to-br from-orange-200/30 via-yellow-200/30 to-red-200/30 blur-2xl",animate:s?{scale:[1,1.1,1],opacity:[.3,.5,.3]}:{},transition:{duration:2,repeat:s?1/0:0}}),y.jsxs(Jt.div,{className:"relative",animate:s?{scale:[1,1.02,1]}:{scale:1},transition:{duration:.5,repeat:s?1/0:0},children:[y.jsx("div",{className:"absolute inset-0 bg-white/10 backdrop-blur-md rounded-full -m-8"}),y.jsx("canvas",{ref:n,width:450,height:450,className:"relative drop-shadow-2xl"}),y.jsx(Jt.div,{className:"absolute top-[-10px] left-1/2 z-10",style:{x:"-50%"},animate:s?{y:[0,5,0]}:{y:0},transition:{duration:.3,repeat:s?1/0:0},children:y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-0 blur-md",children:y.jsx("div",{className:"w-0 h-0 border-l-[25px] border-l-transparent border-r-[25px] border-r-transparent border-t-[50px] border-t-red-500"})}),y.jsx("div",{className:"relative w-0 h-0 border-l-[25px] border-l-transparent border-r-[25px] border-r-transparent border-t-[50px] border-t-gradient-to-b from-red-500 to-red-600 drop-shadow-2xl"}),y.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 w-0 h-0 border-l-[8px] border-l-transparent border-r-[8px] border-r-transparent border-t-[16px] border-t-white/40"})]})}),s&&y.jsx(Jt.div,{className:"absolute inset-0 rounded-full border-4 border-orange-400/50",animate:{scale:[1,1.1,1],opacity:[.5,.8,.5]},transition:{duration:1,repeat:1/0}})]})]})};var h0={linear:function(t,e,n,r){var i=n-e;return i*t/r+e},easeInQuad:function(t,e,n,r){var i=n-e;return i*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var i=n-e;return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var i=n-e;return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var i=n-e;return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var i=n-e;return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var i=n-e;return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,n,r){var i=n-e;return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var i=n-e;return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var i=n-e;return t==0?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var i=n-e;return t==r?e+i:i*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var i=n-e;return t===0?e:t===r?e+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var i=n-e;return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var i=n-e;return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var i=n-e;return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var i=n-e,s,a,o;return o=1.70158,a=0,s=i,t===0?e:(t/=r)===1?e+i:(a||(a=r*.3),s<Math.abs(i)?(s=i,o=a/4):o=a/(2*Math.PI)*Math.asin(i/s),-(s*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a))+e)},easeOutElastic:function(t,e,n,r){var i=n-e,s,a,o;return o=1.70158,a=0,s=i,t===0?e:(t/=r)===1?e+i:(a||(a=r*.3),s<Math.abs(i)?(s=i,o=a/4):o=a/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*t)*Math.sin((t*r-o)*(2*Math.PI)/a)+i+e)},easeInOutElastic:function(t,e,n,r){var i=n-e,s,a,o;return o=1.70158,a=0,s=i,t===0?e:(t/=r/2)===2?e+i:(a||(a=r*(.3*1.5)),s<Math.abs(i)?(s=i,o=a/4):o=a/(2*Math.PI)*Math.asin(i/s),t<1?-.5*(s*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a))+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a)*.5+i+e)},easeInBack:function(t,e,n,r,i){var s=n-e;return i===void 0&&(i=1.70158),s*(t/=r)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,n,r,i){var s=n-e;return i===void 0&&(i=1.70158),s*((t=t/r-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,n,r,i){var s=n-e;return i===void 0&&(i=1.70158),(t/=r/2)<1?s/2*(t*t*(((i*=1.525)+1)*t-i))+e:s/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},easeInBounce:function(t,e,n,r){var i=n-e,s;return s=h0.easeOutBounce(r-t,0,i,r),i-s+e},easeOutBounce:function(t,e,n,r){var i=n-e;return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var i=n-e,s;return t<r/2?(s=h0.easeInBounce(t*2,0,i,r),s*.5+e):(s=h0.easeOutBounce(t*2-r,0,i,r),s*.5+i*.5+e)}},Ife=h0;function Rfe(t){return t*Math.PI/180}function Jr(t,e){return t+Math.random()*(e-t)}function Cfe(t,e){return Math.floor(t+Math.random()*(e-t+1))}var ip;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(ip||(ip={}));var No;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(No||(No={}));const Nfe=1e3/60;class Pfe{constructor(e,n,r,i){this.getOptions=n;const{colors:s,initialVelocityX:a,initialVelocityY:o}=this.getOptions();this.context=e,this.x=r,this.y=i,this.w=Jr(5,20),this.h=Jr(5,20),this.radius=Jr(5,10),this.vx=typeof a=="number"?Jr(-a,a):Jr(a.min,a.max),this.vy=typeof o=="number"?Jr(-o,0):Jr(o.min,o.max),this.shape=Cfe(0,2),this.angle=Rfe(Jr(0,360)),this.angularSpin=Jr(-.2,.2),this.color=s[Math.floor(Math.random()*s.length)],this.rotateY=Jr(0,1),this.rotationDirection=Jr(0,1)?No.Positive:No.Negative}update(e){const{gravity:n,wind:r,friction:i,opacity:s,drawShape:a}=this.getOptions(),o=e/Nfe;this.x+=this.vx*o,this.y+=this.vy*o,this.vy+=n*o,this.vx+=r*o,this.vx*=i**o,this.vy*=i**o,this.rotateY>=1&&this.rotationDirection===No.Positive?this.rotationDirection=No.Negative:this.rotateY<=-1&&this.rotationDirection===No.Negative&&(this.rotationDirection=No.Positive);const c=.1*this.rotationDirection*o;if(this.rotateY+=c,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=s,this.context.lineCap="round",this.context.lineWidth=2,a&&typeof a=="function")a.call(this,this.context);else switch(this.shape){case ip.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case ip.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case ip.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class Dfe{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=i=>{this.particles.splice(i,1)},this.getParticle=()=>{const i=Jr(this.x,this.w+this.x),s=Jr(this.y,this.h+this.y);return new Pfe(this.context,this.getOptions,i,s)},this.animate=i=>{const{canvas:s,context:a,particlesGenerated:o,lastNumberOfPieces:c}=this,{run:h,recycle:f,numberOfPieces:p,debug:g,tweenFunction:_,tweenDuration:R}=this.getOptions();if(!h)return!1;const N=this.particles.length,A=f?N:o;if(A<p){c!==p&&(this.tweenProgress=0,this.tweenFrom=A,this.lastNumberOfPieces=p),this.tweenProgress=Math.min(R,Math.max(0,this.tweenProgress+i));const b=_(this.tweenProgress,this.tweenFrom,p,R),T=Math.round(b-A);for(let E=0;E<T;E++)this.particles.push(this.getParticle());this.particlesGenerated+=T}g&&(a.font="12px sans-serif",a.fillStyle="#333",a.textAlign="right",a.fillText(`Particles: ${N}`,s.width-10,s.height-20));for(let b=this.particles.length-1;b>=0;b--){const T=this.particles[b];T.update(i),(T.y>s.height||T.y<-100||T.x>s.width+100||T.x<-100)&&(f&&A<=p?this.particles[b]=this.getParticle():this.removeParticleAt(b))}return N>0||A<p},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const IR={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:Ife.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class kfe{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=i=>{const s={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...s,...IR,...i},Object.assign(this,i.confettiSource)},this.update=(i=0)=>{const{options:{run:s,onConfettiComplete:a,frameRate:o},canvas:c,context:h}=this,f=Math.min(i-this.lastFrameTime,50);if(o&&f<1e3/o){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=i-(o?f%o:0),s&&(h.fillStyle="white",h.clearRect(0,0,c.width,c.height)),this.generator.animate(f)?this.rafId=requestAnimationFrame(this.update):(a&&typeof a=="function"&&this.generator.particlesGenerated>0&&a.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new Dfe(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var i,s;const n=(i=this._options)==null?void 0:i.run,r=(s=this._options)==null?void 0:s.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const Ofe=oi.createRef();class RR extends oi.Component{constructor(e){super(e),this.canvas=oi.createRef(),this.canvas=e.canvasRef||Ofe}componentDidMount(){if(this.canvas.current){const e=PE(this.props)[0];this.confetti=new kfe(this.canvas.current,e)}}componentDidUpdate(){const e=PE(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=PE(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return y.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}RR.defaultProps={...IR};RR.displayName="ReactConfetti";function PE(t){const e={},n={},r={},i=[...Object.keys(IR),"confettiSource","drawShape","onConfettiComplete","frameRate"],s=["canvasRef"];for(const a in t){const o=t[a];i.includes(a)?e[a]=o:s.includes(a)?s[a]=o:r[a]=o}return[e,r,n]}const Mfe=oi.forwardRef((t,e)=>y.jsx(RR,{canvasRef:e,...t})),Vfe=({isOpen:t,onClose:e})=>{const{currentUser:n}=Xs(),[r,i]=P.useState(null),[s,a]=P.useState(!1),[o,c]=P.useState(!0),[h,f]=P.useState(3),[p,g]=P.useState(!0),[_,R]=P.useState(!1),{playWin:N,playCheer:A,playConfettiPop:b}=nF();P.useEffect(()=>{t&&n&&T()},[t,n]);const T=async()=>{if(n){g(!0);try{f(3),c(!0)}catch(S){console.error("Error checking spin availability:",S),c(!0)}finally{g(!1)}}},E=()=>{!o||_||h<=0||(R(!0),i(null))},O=async S=>{if(R(!1),i(S),N(),A(),b(),a(!0),setTimeout(()=>a(!1),6e3),n)try{const C=Rt.collection("users").doc(n.uid),M=(await C.get()).data(),U=(M==null?void 0:M.spinStats)||{totalSpins:0,totalWins:0,totalDiscountWon:0,biggestWin:0},B={lastSpinDate:Ln.firestore.FieldValue.serverTimestamp(),spinStats:{totalSpins:U.totalSpins+1,totalWins:U.totalWins+1,totalDiscountWon:S.type==="discount"?U.totalDiscountWon+S.value:U.totalDiscountWon,biggestWin:S.type==="discount"?Math.max(U.biggestWin,S.value):U.biggestWin}};S.type==="discount"&&(B.activeDiscount={type:"discount",value:S.value,label:S.label,expiresAt:new Date(Date.now()+24*60*60*1e3),source:"wheel"}),await C.update(B)}catch(C){console.error("Error saving spin result:",C)}},j=()=>{r&&navigator.share&&navigator.share({title:"I just won at Rush Coffee Spin Wheel!",text:` I spun the wheel and won ${r.label}! Try your luck at Rush Coffee!`,url:window.location.origin}).catch(()=>{navigator.clipboard.writeText(` I just won ${r.label} at Rush Coffee!`)})},q=()=>{i(null),a(!1),R(!1),e()};return y.jsx(bv,{children:t&&y.jsxs(Jt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:q,children:[s&&y.jsx(Mfe,{recycle:!1,numberOfPieces:500}),y.jsxs(Jt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:S=>S.stopPropagation(),className:"bg-gradient-to-br from-yellow-50 via-white to-orange-50 rounded-3xl max-w-3xl w-full p-4 md:p-8 relative shadow-2xl max-h-[90vh] overflow-y-auto border border-orange-200",children:[y.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-gradient-to-br from-yellow-200/20 to-transparent rounded-full blur-3xl pointer-events-none"}),y.jsx("div",{className:"absolute bottom-0 right-0 w-32 h-32 bg-gradient-to-tl from-orange-200/20 to-transparent rounded-full blur-3xl pointer-events-none"}),y.jsx("button",{onClick:q,className:"absolute top-4 right-4 z-10 w-10 h-10 rounded-full bg-white/80 backdrop-blur-sm hover:bg-white shadow-lg text-gray-500 hover:text-gray-700 transition-all hover:scale-110 flex items-center justify-center",children:y.jsx(ll,{className:"w-5 h-5"})}),y.jsxs("div",{className:"text-center mb-6 relative",children:[y.jsxs(Jt.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-yellow-500 via-orange-600 to-red-600 rounded-full mb-4 shadow-xl relative",children:[y.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-yellow-400 to-red-500 blur-md opacity-50"}),y.jsx(q0,{className:"w-10 h-10 text-white relative z-10 drop-shadow-lg"})]}),y.jsx("h2",{className:"text-4xl md:text-5xl font-display font-black bg-clip-text text-transparent bg-gradient-to-r from-yellow-600 via-orange-700 to-red-600 mb-3",children:r?" Winner!":"Spin the Wheel"}),y.jsx("p",{className:"text-base md:text-lg text-gray-700 font-medium",children:p?"Loading your luck...":o?r?`You won ${r.label}!`:" Spin for amazing prizes!":" Come back tomorrow!"})]}),!p&&y.jsxs(y.Fragment,{children:[!r&&o&&y.jsxs("div",{className:"space-y-6",children:[y.jsx("div",{className:"relative flex justify-center",children:y.jsx(Sfe,{onSpinComplete:O,isSpinning:_})}),y.jsx("div",{className:"text-center",children:y.jsxs("p",{className:"text-sm font-semibold text-gray-600 flex items-center justify-center gap-2",children:[y.jsx(P5,{className:"w-4 h-4"}),"Spins Remaining: ",y.jsx("span",{className:"text-orange-600 text-lg",children:h}),"/3"]})}),y.jsxs(Jt.button,{onClick:E,disabled:_||!o,whileHover:!_&&o?{scale:1.02}:{},whileTap:!_&&o?{scale:.98}:{},className:`w-full max-w-md mx-auto block px-8 py-5 rounded-2xl font-black text-xl transition-all shadow-2xl relative overflow-hidden ${_||!o?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-yellow-600 via-orange-700 to-red-600 hover:from-yellow-700 hover:via-orange-800 hover:to-red-700 text-white"}`,children:[!_&&o&&y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12"}),y.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2",children:_?y.jsxs(y.Fragment,{children:[y.jsx(Jt.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:""}),"SPINNING..."]}):y.jsxs(y.Fragment,{children:[y.jsx(q0,{className:"w-6 h-6"}),"SPIN NOW!"]})})]})]}),r&&y.jsxs(Jt.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center",children:[y.jsxs("div",{className:"mb-8 p-10 bg-gradient-to-br from-yellow-100 via-white to-orange-100 rounded-3xl border-4 border-orange-300 shadow-2xl relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-radial from-yellow-200/20 via-transparent to-transparent"}),y.jsxs(Jt.div,{initial:{rotate:-10,scale:0},animate:{rotate:0,scale:1},transition:{type:"spring",stiffness:200,delay:.2},className:"relative z-10",children:[y.jsx("div",{className:"text-8xl md:text-9xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-600 via-orange-700 to-red-600 mb-4 drop-shadow-lg",children:r.label}),y.jsxs("div",{className:"flex items-center justify-center gap-2 text-lg md:text-xl text-gray-700 font-semibold",children:[y.jsx("span",{className:"inline-block w-3 h-3 bg-green-500 rounded-full animate-pulse"}),"Applied to your next order! Valid for 24 hours."]})]})]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsxs(Jt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:j,className:"flex-1 px-6 py-4 border-2 border-orange-600 text-orange-600 rounded-2xl font-bold hover:bg-orange-50 transition-all flex items-center justify-center gap-2 shadow-lg",children:[y.jsx(nQ,{className:"w-5 h-5"}),"Share"]}),y.jsx(Jt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:q,className:"flex-1 px-6 py-4 bg-gradient-to-r from-yellow-600 to-orange-600 text-white rounded-2xl font-bold hover:from-yellow-700 hover:to-orange-700 transition-all shadow-xl",children:"Start Shopping"})]})]})]}),!r&&y.jsxs("div",{className:"text-center mt-6 space-y-1",children:[y.jsx("p",{className:"text-xs text-gray-500 font-medium",children:" TESTING MODE: Unlimited spins enabled"}),y.jsx("p",{className:"text-xs text-gray-400",children:"Weighted probability  All prizes guaranteed  Discounts expire in 24h"})]})]})]})})},Ue=t=>`/RushCoffee-Capstone/${t}`,rm=[{id:"cb-01",name:"Spanish Latte",description:"A creamy and sweet latte with a Spanish twist, featuring condensed milk for a rich flavor.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:Ue("coffee-based/spanish-latte.png"),available:!0,stock:99,popular:!0,displayOrder:1,aliases:["spanish","spanish coffee"],recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"condensed-milk",quantity:30}]},{id:"cb-02",name:"Rush Coffee Blend",description:"Our signature house blend, perfectly balanced for a smooth and satisfying coffee experience.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:89}],imageUrl:Ue("coffee-based/rush-coffee-blend.png"),available:!0,stock:99,popular:!0,displayOrder:2,aliases:["rush coffee","house blend"],recipe:[{ingredientId:"coffee-beans",quantity:18},{ingredientId:"hot-water",quantity:200}]},{id:"cb-03",name:"Caramel Chocolate Mocha",description:"A decadent mix of rich chocolate, espresso, and creamy caramel for the ultimate treat.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:Ue("coffee-based/caramel-chocolate-mocha.jpg"),available:!0,stock:99,popular:!0,displayOrder:3,aliases:["caramel mocha","caramel choco","caramel chocolate"],recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"chocolate-sauce",quantity:20},{ingredientId:"caramel-sauce",quantity:15}]},{id:"cb-04",name:"Dark Chocolate Mocha",description:"A bold and intense mocha experience with premium dark chocolate and strong espresso.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:Ue("coffee-based/dark-chocolate-mocha.jpg"),available:!0,stock:99,displayOrder:4,aliases:["dark mocha","dark chocolate","dark choco"],recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"chocolate-sauce",quantity:25}]},{id:"cb-05",name:"Mocha Latte",description:"A classic blend of smooth espresso, rich chocolate sauce, and steamed milk.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:Ue("coffee-based/mocha-latte.jpg"),available:!0,stock:99,displayOrder:5,aliases:["mocha","chocolate latte","choco latte"],recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"chocolate-sauce",quantity:20}]},{id:"cb-06",name:"Americano",description:"Bold espresso shots topped with hot water to create a light layer of crema.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:69}],imageUrl:Ue("coffee-based/americano.jpg"),available:!0,stock:99,displayOrder:6,aliases:["black coffee","cafe americano"],recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"hot-water",quantity:220}]},{id:"cb-07",name:"Biscoff Latte",description:"An indulgent latte infused with the irresistible flavor of caramelized Biscoff cookies.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:199}],imageUrl:Ue("coffee-based/biscoff-latte.jpg"),available:!0,stock:99,displayOrder:7,aliases:["biscoff","cookie butter latte"],recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:170},{ingredientId:"biscoff-spread",quantity:30}]},{id:"cb-08",name:"Reeses Latte",description:"The perfect combination of peanut butter, chocolate, and espresso. A candy lover's dream.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:Ue("coffee-based/reeses-latte.jpg"),available:!0,stock:99,displayOrder:8,aliases:["reese","reese's","reeses","rhys","rhys latte"],recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:160},{ingredientId:"chocolate-sauce",quantity:15},{ingredientId:"peanut-butter",quantity:20}]},{id:"cb-09",name:"Brown Sugar Latte",description:"A comforting latte sweetened with rich, molasses-like brown sugar syrup.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:59},{name:"Venti",size:"22oz",price:79}],imageUrl:Ue("coffee-based/brown-sugar-latte.jpg"),available:!0,stock:99,displayOrder:9,aliases:["brown sugar","brown sugar coffee"],recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"brown-sugar-syrup",quantity:25}]},{id:"cb-10",name:"Iced Latte",description:"A simple classic. Chilled espresso with cold milk served over ice.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:69}],imageUrl:Ue("coffee-based/iced-latte.jpg"),available:!0,stock:99,displayOrder:10,aliases:["ice latte","ice coffee","iced coffee","iced latte"],recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:180},{ingredientId:"ice-cubes",quantity:100}]},{id:"cb-11",name:"Orange Latte",description:"A unique and refreshing latte with a zesty hint of natural orange flavor.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:89}],imageUrl:Ue("coffee-based/orange-latte.jpg"),available:!0,stock:99,displayOrder:11,aliases:["orange coffee","orange"],recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:170},{ingredientId:"orange-syrup",quantity:20}]},{id:"cb-12",name:"Coffee Jelly",description:"A delightful iced coffee drink with chewy, coffee-flavored jelly cubes.",category:"Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:99}],imageUrl:Ue("coffee-based/coffee-jelly.jpg"),available:!0,stock:99,displayOrder:12,aliases:["jelly","coffee jelly drink"],recipe:[{ingredientId:"espresso-shot",quantity:2},{ingredientId:"milk",quantity:150},{ingredientId:"coffee-jelly",quantity:80},{ingredientId:"ice-cubes",quantity:80}]},{id:"nc-01",name:"Red Velvet",description:"A sweet and creamy drink inspired by the classic red velvet cake, with hints of cocoa and vanilla.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:Ue("non-coffee/red-velvet.jpg"),available:!0,stock:99,displayOrder:13,aliases:["red velvet cake drink","red velvet latte"],recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"red-velvet-powder",quantity:25},{ingredientId:"chocolate-sauce",quantity:10},{ingredientId:"vanilla-syrup",quantity:15}]},{id:"nc-02",name:"Red Velvet Matcha Latte",description:"A beautiful and delicious blend of earthy matcha and sweet red velvet flavors.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:Ue("non-coffee/red-velvet-matcha-latte.jpg"),available:!0,stock:99,displayOrder:14,aliases:["red velvet matcha","matcha red velvet"],recipe:[{ingredientId:"milk",quantity:180},{ingredientId:"matcha-powder",quantity:5},{ingredientId:"red-velvet-powder",quantity:15},{ingredientId:"vanilla-syrup",quantity:10}]},{id:"nc-03",name:"Milky Choco",description:"A rich and comforting chocolate drink made with high-quality cocoa and fresh milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:Ue("non-coffee/milky-choco.jpg"),available:!0,stock:99,displayOrder:15,aliases:["chocolate milk","choco milk","milky chocolate"],recipe:[{ingredientId:"milk",quantity:220},{ingredientId:"chocolate-sauce",quantity:30}]},{id:"nc-04",name:"Strawberry Milk",description:"A refreshing and creamy drink made with real strawberries and fresh milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:Ue("non-coffee/strawberry-milk.jpg"),available:!0,stock:99,displayOrder:16,aliases:["strawberry milk drink","pink milk"],recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"strawberry-puree",quantity:50}]},{id:"nc-05",name:"Biscoff Milky",description:"A non-coffee treat blending the sweet, caramelized taste of Biscoff with creamy milk.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:Ue("non-coffee/biscoff-milky.jpg"),available:!0,stock:99,displayOrder:17,aliases:["biscoff milk","biscoff drink"],recipe:[{ingredientId:"milk",quantity:200},{ingredientId:"biscoff-spread",quantity:35}]},{id:"nc-06",name:"Oreo Latte",description:"A fun and delicious drink packed with the classic cookies and cream flavor of Oreos.",category:"Non-Coffee Based",sizes:[{name:"Grande",size:"16oz",price:89},{name:"Venti",size:"22oz",price:109}],imageUrl:Ue("non-coffee/oreo-latte.jpg"),available:!0,stock:99,displayOrder:18,aliases:["oreo","cookies and cream","oreo drink"],recipe:[{ingredientId:"milk",quantity:180},{ingredientId:"oreo-crumbs",quantity:40},{ingredientId:"chocolate-sauce",quantity:15}]},{id:"ms-01",name:"Matcha Latte",description:"Premium Japanese matcha green tea with steamed milk, a perfect balance of earthy and creamy.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:89}],imageUrl:Ue("matcha-series/matcha-latte.jpg"),available:!0,stock:99,popular:!0,displayOrder:19,aliases:["green tea latte","matcha"],recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:200}]},{id:"ms-02",name:"Strawberry Matcha",description:"A delightful pairing of sweet strawberry puree and high-quality matcha green tea.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:109}],imageUrl:Ue("matcha-series/strawberry-matcha.jpg"),available:!0,stock:99,displayOrder:20,aliases:["strawberry green tea","pink matcha"],recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"strawberry-puree",quantity:40}]},{id:"ms-03",name:"Matcha Cream Cheese",description:"Earthy matcha topped with a rich, savory, and slightly sweet cream cheese foam.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:99},{name:"Venti",size:"22oz",price:109}],imageUrl:Ue("matcha-series/matcha-cream-cheese.jpg"),available:!0,stock:99,displayOrder:21,aliases:["matcha cheese","cheese matcha"],recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"cream-cheese",quantity:30}]},{id:"ms-04",name:"Matcha Oreo",description:"A creative blend of matcha and crushed Oreo cookies for a unique texture and flavor.",category:"Matcha Series",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:Ue("matcha-series/matcha-oreo.jpg"),available:!0,stock:99,displayOrder:22,aliases:["oreo matcha","matcha cookies"],recipe:[{ingredientId:"matcha-powder",quantity:5},{ingredientId:"milk",quantity:180},{ingredientId:"oreo-crumbs",quantity:35}]},{id:"rf-01",name:"Flamangooverload Shake",description:"An explosive mix of flamingo and mango for an overload of fruity goodness.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:Ue("refreshments/flamangooverload.jpg"),available:!0,stock:99,displayOrder:23,aliases:["flamingo","flamango","overload","flamango overload","flamango overload shake"],recipe:[{ingredientId:"mango-puree",quantity:100},{ingredientId:"strawberry-puree",quantity:50},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-02",name:"Mangoberry Shake",description:"A delightful blend of sweet mangoes and tangy berries, perfectly refreshing.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:Ue("refreshments/mangoberry.jpg"),available:!0,stock:99,displayOrder:24,aliases:["mango berry","mango berry shake"],recipe:[{ingredientId:"mango-puree",quantity:80},{ingredientId:"mixed-berries",quantity:50},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-03",name:"Mango Caramel Shake",description:"Creamy mango shake drizzled with rich, buttery caramel sauce.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:Ue("refreshments/mango-caramel.jpg"),available:!0,stock:99,displayOrder:25,aliases:["mango caramel","caramel mango"],recipe:[{ingredientId:"mango-puree",quantity:100},{ingredientId:"caramel-sauce",quantity:20},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:80}]},{id:"rf-04",name:"Blueberry Shake",description:"A classic fruit shake made with sweet and juicy blueberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:Ue("refreshments/blueberry-shake.jpg"),available:!0,stock:99,displayOrder:26,aliases:["blueberry","blueberry drink"],recipe:[{ingredientId:"blueberry-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-05",name:"Strawberry Shake",description:"A creamy and delicious shake made with ripe, sweet strawberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:Ue("refreshments/strawberry-shake.jpg"),available:!0,stock:99,displayOrder:27,aliases:["strawberry","strawberry drink"],recipe:[{ingredientId:"strawberry-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-06",name:"Green Apple Shake",description:"A tart and refreshing shake with the crisp taste of green apples.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:79},{name:"Venti",size:"22oz",price:99}],imageUrl:Ue("refreshments/green-apple-shake.jpg"),available:!0,stock:99,displayOrder:28,aliases:["green apple","apple shake"],recipe:[{ingredientId:"green-apple-puree",quantity:100},{ingredientId:"ice-cubes",quantity:120},{ingredientId:"milk",quantity:100}]},{id:"rf-07",name:"Blueberry Soda Pop",description:"Fizzy and fun, this soda pop is bursting with sweet blueberry flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:Ue("refreshments/blueberry-soda.jpg"),available:!0,stock:99,displayOrder:29,aliases:["blueberry soda"],recipe:[{ingredientId:"blueberry-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-08",name:"Strawberry Soda Pop",description:"A refreshing soda pop with the sweet taste of summer strawberries.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:Ue("refreshments/strawberry-soda.jpg"),available:!0,stock:99,displayOrder:30,aliases:["strawberry soda"],recipe:[{ingredientId:"strawberry-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-09",name:"Green Apple Soda Pop",description:"A crisp and bubbly soda with a tangy green apple twist.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:Ue("refreshments/green-apple-soda.jpg"),available:!0,stock:99,displayOrder:31,aliases:["green apple soda"],recipe:[{ingredientId:"green-apple-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-10",name:"Lemon Soda Pop",description:"A zesty and invigorating soda pop with a classic lemon flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:Ue("refreshments/lemon-soda.jpg"),available:!0,stock:99,displayOrder:32,aliases:["lemon soda"],recipe:[{ingredientId:"lemon-juice",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-11",name:"Lychee Soda Pop",description:"An exotic and fragrant soda pop with the sweet, floral taste of lychee.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:Ue("refreshments/lychee-soda.jpg"),available:!0,stock:99,displayOrder:33,aliases:["lychee soda"],recipe:[{ingredientId:"lychee-syrup",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"rf-12",name:"Mango Soda Pop",description:"A tropical and bubbly soda bursting with sweet mango flavor.",category:"Refreshments",sizes:[{name:"Grande",size:"16oz",price:69},{name:"Venti",size:"22oz",price:79}],imageUrl:Ue("refreshments/mango-soda.jpg"),available:!0,stock:99,displayOrder:34,aliases:["mango soda"],recipe:[{ingredientId:"mango-puree",quantity:60},{ingredientId:"soda-water",quantity:200},{ingredientId:"ice-cubes",quantity:100}]},{id:"ml-01",name:"Breaded Bacon",description:"Crispy breaded bacon served with creamy white sauce and golden fries.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:119},{name:"Combo Meal",size:"w/ Fries & Drink",price:139}],imageUrl:Ue("menu/ala-carte-breaded-bacon-with-white-sauce and fries.jpg"),comboImageUrl:Ue("menu/combo-meals-breaded-bacon-with-white-sauce,-fries-and-a-drink.jpg"),available:!0,stock:99,popular:!0,displayOrder:35,aliases:["bacon"],recipe:[{ingredientId:"bacon-strips",quantity:.15},{ingredientId:"bread-crumbs",quantity:50},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:100},{ingredientId:"takeout-pack",quantity:1}]},{id:"ml-02",name:"Breaded Porkchop",description:"A juicy breaded porkchop fried to perfection, served with white sauce and fries.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:129},{name:"Combo Meal",size:"w/ Fries & Drink",price:149}],imageUrl:Ue("menu/ala-carte-breaded-porkchop-with-white-sauce-and-fries.jpg"),comboImageUrl:Ue("menu/combo-meals-breaded-porkchop-with-white-sauce-and-fries-w-drink.jpg"),available:!0,stock:99,popular:!0,displayOrder:36,aliases:["porkchop","pork chop"],recipe:[{ingredientId:"porkchop",quantity:.2},{ingredientId:"bread-crumbs",quantity:60},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:120},{ingredientId:"takeout-pack",quantity:1}]},{id:"ml-03",name:"Breaded Chicken",description:"Tender breaded chicken fillet with a side of fries and our signature white sauce.",category:"Meals",sizes:[{name:"Ala Carte",size:"w/ Fries",price:119},{name:"Combo Meal",size:"w/ Fries & Drink",price:139}],imageUrl:Ue("menu/ala-carte-chicken-with-white-sauce-and-fries.jpg"),comboImageUrl:Ue("menu/combo-meals-breaded-chicken-with-white-sauce,-fries-and-a-drink.jpg"),available:!0,stock:99,displayOrder:37,aliases:["chicken","chicken fillet"],recipe:[{ingredientId:"chicken-fillet",quantity:.2},{ingredientId:"bread-crumbs",quantity:55},{ingredientId:"french-fries",quantity:.15},{ingredientId:"white-sauce",quantity:30},{ingredientId:"cooking-oil",quantity:110},{ingredientId:"takeout-pack",quantity:1}]}],rF=P.createContext(void 0),Lfe=()=>{const t=P.useContext(rF);if(!t)throw new Error("useProduct must be used within a ProductProvider");return t},Ufe=({children:t})=>{const[e,n]=P.useState([]),[r,i]=P.useState(!0),[s,a]=P.useState(null),o=P.useCallback(async()=>{i(!0),a(null);try{const g=Rt.collection("products"),_=g.orderBy("displayOrder","asc"),R=await _.get();if(R.empty){console.log("Products collection is empty. Seeding products with specific IDs...");const T=Rt.batch();rm.forEach(j=>{const{id:q,...S}=j,C=g.doc(q);T.set(C,S)}),await T.commit(),console.log(`Successfully seeded ${rm.length} products to Firestore!`);const O=(await _.get()).docs.map(j=>({id:j.id,...j.data()}));n(O);return}const N=R.docs.map(T=>{const E=T.data(),O=rm.find(j=>j.id===T.id);return O?{id:T.id,...E,aliases:O.aliases,recipe:O.recipe}:{id:T.id,...E}});n(N);const A=Rt.batch();let b=!1;rm.forEach(T=>{const E=N.find(O=>O.id===T.id);if(E){const O=JSON.stringify(E.recipe||[]),j=JSON.stringify(T.recipe||[]),q=JSON.stringify(E.aliases||[]),S=JSON.stringify(T.aliases||[]),C={};if(O!==j&&(C.recipe=T.recipe),q!==S&&(C.aliases=T.aliases),Object.keys(C).length>0){const k=g.doc(T.id);A.update(k,C),b=!0,console.log(`Syncing updates for ${T.name}`)}}}),b&&(await A.commit(),console.log(" Recipes synced from code to Firestore"))}catch(g){g.code==="permission-denied"?console.info("Firestore permission denied. This is expected if security rules are not yet configured or if you are offline. Falling back to mock data for demonstration."):console.warn("Error fetching products from Firestore. Falling back to mock data.",g),n(rm),a(null)}finally{i(!1)}},[]);P.useEffect(()=>{o()},[o]);const p={products:e,isLoading:r,error:s,addProduct:async g=>{try{await Rt.collection("products").add(g),await o()}catch(_){throw console.error("Error adding product: ",_),new Error("Failed to add product.")}},updateProduct:async(g,_)=>{try{await Rt.collection("products").doc(g).update(_),await o()}catch(R){throw console.error("Error updating product: ",R),new Error("Failed to update product.")}},deleteProduct:async g=>{try{await Rt.collection("products").doc(g).delete(),await o()}catch(_){throw console.error("Error deleting product: ",_),new Error("Failed to delete product.")}}};return y.jsx(rF.Provider,{value:p,children:t})};var Cv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Cv.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",h=500,f="__lodash_placeholder__",p=1,g=2,_=4,R=1,N=2,A=1,b=2,T=4,E=8,O=16,j=32,q=64,S=128,C=256,k=512,M=30,U="...",B=800,F=16,ne=1,me=2,ie=3,se=1/0,ue=9007199254740991,Te=17976931348623157e292,_e=NaN,Ve=4294967295,St=Ve-1,hr=Ve>>>1,Mt=[["ary",S],["bind",A],["bindKey",b],["curry",E],["curryRight",O],["flip",k],["partial",j],["partialRight",q],["rearg",C]],Tn="[object Arguments]",to="[object Array]",$d="[object AsyncFunction]",Js="[object Boolean]",no="[object Date]",Ww="[object DOMException]",du="[object Error]",kl="[object Function]",fu="[object GeneratorFunction]",Ar="[object Map]",Ol="[object Number]",Kd="[object Null]",Gr="[object Object]",Wd="[object Promise]",Cn="[object Proxy]",rn="[object RegExp]",Jn="[object Set]",Ml="[object String]",Vl="[object Symbol]",Yw="[object Undefined]",Gi="[object WeakMap]",jg="[object WeakSet]",ro="[object ArrayBuffer]",ds="[object DataView]",Yd="[object Float32Array]",Qd="[object Float64Array]",mu="[object Int8Array]",pu="[object Int16Array]",Zs="[object Int32Array]",Ll="[object Uint8Array]",Ul="[object Uint8ClampedArray]",$i="[object Uint16Array]",gu="[object Uint32Array]",yu=/\b__p \+= '';/g,Fg=/\b(__p \+=) '' \+/g,jl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xd=/&(?:amp|lt|gt|quot|#39);/g,Nn=/[&<>"']/g,zg=RegExp(Xd.source),Fl=RegExp(Nn.source),zl=/<%-([\s\S]+?)%>/g,Qw=/<%([\s\S]+?)%>/g,Bg=/<%=([\s\S]+?)%>/g,io=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xw=/^\w*$/,Jw=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,so=/[\\^$.*+?()[\]{}|]/g,qg=RegExp(so.source),_u=/^\s+/,Jd=/\s/,Bl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Zw=/\{\n\/\* \[wrapped with (.+)\] \*/,fs=/,? & /,Hg=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Gg=/[()=,{}\[\]\/\s]/,Zd=/\\(\\)?/g,ef=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,tf=/\w*$/,eb=/^[-+]0x[0-9a-f]+$/i,$g=/^0b[01]+$/i,tb=/^\[object .+?Constructor\]$/,vu=/^0o[0-7]+$/i,Kg=/^(?:0|[1-9]\d*)$/,nf=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ms=/($^)/,ea=/['\n\r\u2028\u2029\\]/g,ao="\\ud800-\\udfff",nb="\\u0300-\\u036f",Wg="\\ufe20-\\ufe2f",Yg="\\u20d0-\\u20ff",rf=nb+Wg+Yg,wu="\\u2700-\\u27bf",bu="a-z\\xdf-\\xf6\\xf8-\\xff",Qg="\\xac\\xb1\\xd7\\xf7",Xg="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Jg="\\u2000-\\u206f",rb=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ki="A-Z\\xc0-\\xd6\\xd8-\\xde",$r="\\ufe0e\\ufe0f",oo=Qg+Xg+Jg+rb,ta="[']",sf="["+ao+"]",yt="["+oo+"]",na="["+rf+"]",lo="\\d+",ql="["+wu+"]",Zg="["+bu+"]",af="[^"+ao+oo+lo+wu+bu+Ki+"]",of="\\ud83c[\\udffb-\\udfff]",ib="(?:"+na+"|"+of+")",ey="[^"+ao+"]",lf="(?:\\ud83c[\\udde6-\\uddff]){2}",ra="[\\ud800-\\udbff][\\udc00-\\udfff]",Sr="["+Ki+"]",cf="\\u200d",uf="(?:"+Zg+"|"+af+")",ty="(?:"+Sr+"|"+af+")",hf="(?:"+ta+"(?:d|ll|m|re|s|t|ve))?",df="(?:"+ta+"(?:D|LL|M|RE|S|T|VE))?",ia=ib+"?",ny="["+$r+"]?",sb="(?:"+cf+"(?:"+[ey,lf,ra].join("|")+")"+ny+ia+")*",ab="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ps="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ry=ny+ia+sb,ff="(?:"+[ql,lf,ra].join("|")+")"+ry,Tu="(?:"+[ey+na+"?",na,lf,ra,sf].join("|")+")",iy=RegExp(ta,"g"),Hl=RegExp(na,"g"),sa=RegExp(of+"(?="+of+")|"+Tu+ry,"g"),sy=RegExp([Sr+"?"+Zg+"+"+hf+"(?="+[yt,Sr,"$"].join("|")+")",ty+"+"+df+"(?="+[yt,Sr+uf,"$"].join("|")+")",Sr+"?"+uf+"+"+hf,Sr+"+"+df,ps,ab,lo,ff].join("|"),"g"),mf=RegExp("["+cf+ao+rf+$r+"]"),Vt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ob=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],lb=-1,_t={};_t[Yd]=_t[Qd]=_t[mu]=_t[pu]=_t[Zs]=_t[Ll]=_t[Ul]=_t[$i]=_t[gu]=!0,_t[Tn]=_t[to]=_t[ro]=_t[Js]=_t[ds]=_t[no]=_t[du]=_t[kl]=_t[Ar]=_t[Ol]=_t[Gr]=_t[rn]=_t[Jn]=_t[Ml]=_t[Gi]=!1;var ut={};ut[Tn]=ut[to]=ut[ro]=ut[ds]=ut[Js]=ut[no]=ut[Yd]=ut[Qd]=ut[mu]=ut[pu]=ut[Zs]=ut[Ar]=ut[Ol]=ut[Gr]=ut[rn]=ut[Jn]=ut[Ml]=ut[Vl]=ut[Ll]=ut[Ul]=ut[$i]=ut[gu]=!0,ut[du]=ut[kl]=ut[Gi]=!1;var ay={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Eu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},gs={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},oy={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},cb=parseFloat,Gl=parseInt,pf=typeof Lf=="object"&&Lf&&Lf.Object===Object&&Lf,gf=typeof self=="object"&&self&&self.Object===Object&&self,$t=pf||gf||Function("return this")(),xu=e&&!e.nodeType&&e,_i=xu&&!0&&t&&!t.nodeType&&t,ly=_i&&_i.exports===xu,Au=ly&&pf.process,Pn=function(){try{var G=_i&&_i.require&&_i.require("util").types;return G||Au&&Au.binding&&Au.binding("util")}catch{}}(),yf=Pn&&Pn.isArrayBuffer,_f=Pn&&Pn.isDate,Su=Pn&&Pn.isMap,Iu=Pn&&Pn.isRegExp,vf=Pn&&Pn.isSet,$l=Pn&&Pn.isTypedArray;function Zn(G,J,X){switch(X.length){case 0:return G.call(J);case 1:return G.call(J,X[0]);case 2:return G.call(J,X[0],X[1]);case 3:return G.call(J,X[0],X[1],X[2])}return G.apply(J,X)}function cy(G,J,X,ge){for(var Ce=-1,nt=G==null?0:G.length;++Ce<nt;){var En=G[Ce];J(ge,En,X(En),G)}return ge}function fn(G,J){for(var X=-1,ge=G==null?0:G.length;++X<ge&&J(G[X],X,G)!==!1;);return G}function uy(G,J){for(var X=G==null?0:G.length;X--&&J(G[X],X,G)!==!1;);return G}function wf(G,J){for(var X=-1,ge=G==null?0:G.length;++X<ge;)if(!J(G[X],X,G))return!1;return!0}function Wi(G,J){for(var X=-1,ge=G==null?0:G.length,Ce=0,nt=[];++X<ge;){var En=G[X];J(En,X,G)&&(nt[Ce++]=En)}return nt}function Kl(G,J){var X=G==null?0:G.length;return!!X&&ce(G,J,0)>-1}function co(G,J,X){for(var ge=-1,Ce=G==null?0:G.length;++ge<Ce;)if(X(J,G[ge]))return!0;return!1}function Be(G,J){for(var X=-1,ge=G==null?0:G.length,Ce=Array(ge);++X<ge;)Ce[X]=J(G[X],X,G);return Ce}function Yi(G,J){for(var X=-1,ge=J.length,Ce=G.length;++X<ge;)G[Ce+X]=J[X];return G}function Ru(G,J,X,ge){var Ce=-1,nt=G==null?0:G.length;for(ge&&nt&&(X=G[++Ce]);++Ce<nt;)X=J(X,G[Ce],Ce,G);return X}function uo(G,J,X,ge){var Ce=G==null?0:G.length;for(ge&&Ce&&(X=G[--Ce]);Ce--;)X=J(X,G[Ce],Ce,G);return X}function d(G,J){for(var X=-1,ge=G==null?0:G.length;++X<ge;)if(J(G[X],X,G))return!0;return!1}var w=Wt("length");function x(G){return G.split("")}function L(G){return G.match(Hg)||[]}function W(G,J,X){var ge;return X(G,function(Ce,nt,En){if(J(Ce,nt,En))return ge=nt,!1}),ge}function Y(G,J,X,ge){for(var Ce=G.length,nt=X+(ge?1:-1);ge?nt--:++nt<Ce;)if(J(G[nt],nt,G))return nt;return-1}function ce(G,J,X){return J===J?bF(G,J,X):Y(G,Kt,X)}function De(G,J,X,ge){for(var Ce=X-1,nt=G.length;++Ce<nt;)if(ge(G[Ce],J))return Ce;return-1}function Kt(G){return G!==G}function ot(G,J){var X=G==null?0:G.length;return X?vi(G,J)/X:_e}function Wt(G){return function(J){return J==null?n:J[G]}}function Ir(G){return function(J){return G==null?n:G[J]}}function ys(G,J,X,ge,Ce){return Ce(G,function(nt,En,bt){X=ge?(ge=!1,nt):J(X,nt,En,bt)}),X}function _s(G,J){var X=G.length;for(G.sort(J);X--;)G[X]=G[X].value;return G}function vi(G,J){for(var X,ge=-1,Ce=G.length;++ge<Ce;){var nt=J(G[ge]);nt!==n&&(X=X===n?nt:X+nt)}return X}function ho(G,J){for(var X=-1,ge=Array(G);++X<G;)ge[X]=J(X);return ge}function bf(G,J){return Be(J,function(X){return[X,G[X]]})}function CR(G){return G&&G.slice(0,kR(G)+1).replace(_u,"")}function Kr(G){return function(J){return G(J)}}function ub(G,J){return Be(J,function(X){return G[X]})}function Tf(G,J){return G.has(J)}function NR(G,J){for(var X=-1,ge=G.length;++X<ge&&ce(J,G[X],0)>-1;);return X}function PR(G,J){for(var X=G.length;X--&&ce(J,G[X],0)>-1;);return X}function fF(G,J){for(var X=G.length,ge=0;X--;)G[X]===J&&++ge;return ge}var mF=Ir(ay),pF=Ir(Eu);function gF(G){return"\\"+oy[G]}function yF(G,J){return G==null?n:G[J]}function Cu(G){return mf.test(G)}function _F(G){return Vt.test(G)}function vF(G){for(var J,X=[];!(J=G.next()).done;)X.push(J.value);return X}function hb(G){var J=-1,X=Array(G.size);return G.forEach(function(ge,Ce){X[++J]=[Ce,ge]}),X}function DR(G,J){return function(X){return G(J(X))}}function fo(G,J){for(var X=-1,ge=G.length,Ce=0,nt=[];++X<ge;){var En=G[X];(En===J||En===f)&&(G[X]=f,nt[Ce++]=X)}return nt}function hy(G){var J=-1,X=Array(G.size);return G.forEach(function(ge){X[++J]=ge}),X}function wF(G){var J=-1,X=Array(G.size);return G.forEach(function(ge){X[++J]=[ge,ge]}),X}function bF(G,J,X){for(var ge=X-1,Ce=G.length;++ge<Ce;)if(G[ge]===J)return ge;return-1}function TF(G,J,X){for(var ge=X+1;ge--;)if(G[ge]===J)return ge;return ge}function Nu(G){return Cu(G)?xF(G):w(G)}function Qi(G){return Cu(G)?AF(G):x(G)}function kR(G){for(var J=G.length;J--&&Jd.test(G.charAt(J)););return J}var EF=Ir(gs);function xF(G){for(var J=sa.lastIndex=0;sa.test(G);)++J;return J}function AF(G){return G.match(sa)||[]}function SF(G){return G.match(sy)||[]}var IF=function G(J){J=J==null?$t:Pu.defaults($t.Object(),J,Pu.pick($t,ob));var X=J.Array,ge=J.Date,Ce=J.Error,nt=J.Function,En=J.Math,bt=J.Object,db=J.RegExp,RF=J.String,wi=J.TypeError,dy=X.prototype,CF=nt.prototype,Du=bt.prototype,fy=J["__core-js_shared__"],my=CF.toString,ht=Du.hasOwnProperty,NF=0,OR=function(){var l=/[^.]+$/.exec(fy&&fy.keys&&fy.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),py=Du.toString,PF=my.call(bt),DF=$t._,kF=db("^"+my.call(ht).replace(so,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gy=ly?J.Buffer:n,mo=J.Symbol,yy=J.Uint8Array,MR=gy?gy.allocUnsafe:n,_y=DR(bt.getPrototypeOf,bt),VR=bt.create,LR=Du.propertyIsEnumerable,vy=dy.splice,UR=mo?mo.isConcatSpreadable:n,Ef=mo?mo.iterator:n,Wl=mo?mo.toStringTag:n,wy=function(){try{var l=Zl(bt,"defineProperty");return l({},"",{}),l}catch{}}(),OF=J.clearTimeout!==$t.clearTimeout&&J.clearTimeout,MF=ge&&ge.now!==$t.Date.now&&ge.now,VF=J.setTimeout!==$t.setTimeout&&J.setTimeout,by=En.ceil,Ty=En.floor,fb=bt.getOwnPropertySymbols,LF=gy?gy.isBuffer:n,jR=J.isFinite,UF=dy.join,jF=DR(bt.keys,bt),xn=En.max,er=En.min,FF=ge.now,zF=J.parseInt,FR=En.random,BF=dy.reverse,mb=Zl(J,"DataView"),xf=Zl(J,"Map"),pb=Zl(J,"Promise"),ku=Zl(J,"Set"),Af=Zl(J,"WeakMap"),Sf=Zl(bt,"create"),Ey=Af&&new Af,Ou={},qF=ec(mb),HF=ec(xf),GF=ec(pb),$F=ec(ku),KF=ec(Af),xy=mo?mo.prototype:n,If=xy?xy.valueOf:n,zR=xy?xy.toString:n;function D(l){if(Yt(l)&&!Ne(l)&&!(l instanceof Ke)){if(l instanceof bi)return l;if(ht.call(l,"__wrapped__"))return BC(l)}return new bi(l)}var Mu=function(){function l(){}return function(u){if(!Bt(u))return{};if(VR)return VR(u);l.prototype=u;var m=new l;return l.prototype=n,m}}();function Ay(){}function bi(l,u){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=n}D.templateSettings={escape:zl,evaluate:Qw,interpolate:Bg,variable:"",imports:{_:D}},D.prototype=Ay.prototype,D.prototype.constructor=D,bi.prototype=Mu(Ay.prototype),bi.prototype.constructor=bi;function Ke(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ve,this.__views__=[]}function WF(){var l=new Ke(this.__wrapped__);return l.__actions__=Rr(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=Rr(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=Rr(this.__views__),l}function YF(){if(this.__filtered__){var l=new Ke(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function QF(){var l=this.__wrapped__.value(),u=this.__dir__,m=Ne(l),v=u<0,I=m?l.length:0,V=lB(0,I,this.__views__),z=V.start,H=V.end,$=H-z,Z=v?H:z-1,te=this.__iteratees__,ae=te.length,fe=0,we=er($,this.__takeCount__);if(!m||!v&&I==$&&we==$)return hC(l,this.__actions__);var xe=[];e:for(;$--&&fe<we;){Z+=u;for(var Le=-1,Ae=l[Z];++Le<ae;){var qe=te[Le],Xe=qe.iteratee,Qr=qe.type,mr=Xe(Ae);if(Qr==me)Ae=mr;else if(!mr){if(Qr==ne)continue e;break e}}xe[fe++]=Ae}return xe}Ke.prototype=Mu(Ay.prototype),Ke.prototype.constructor=Ke;function Yl(l){var u=-1,m=l==null?0:l.length;for(this.clear();++u<m;){var v=l[u];this.set(v[0],v[1])}}function XF(){this.__data__=Sf?Sf(null):{},this.size=0}function JF(l){var u=this.has(l)&&delete this.__data__[l];return this.size-=u?1:0,u}function ZF(l){var u=this.__data__;if(Sf){var m=u[l];return m===c?n:m}return ht.call(u,l)?u[l]:n}function ez(l){var u=this.__data__;return Sf?u[l]!==n:ht.call(u,l)}function tz(l,u){var m=this.__data__;return this.size+=this.has(l)?0:1,m[l]=Sf&&u===n?c:u,this}Yl.prototype.clear=XF,Yl.prototype.delete=JF,Yl.prototype.get=ZF,Yl.prototype.has=ez,Yl.prototype.set=tz;function aa(l){var u=-1,m=l==null?0:l.length;for(this.clear();++u<m;){var v=l[u];this.set(v[0],v[1])}}function nz(){this.__data__=[],this.size=0}function rz(l){var u=this.__data__,m=Sy(u,l);if(m<0)return!1;var v=u.length-1;return m==v?u.pop():vy.call(u,m,1),--this.size,!0}function iz(l){var u=this.__data__,m=Sy(u,l);return m<0?n:u[m][1]}function sz(l){return Sy(this.__data__,l)>-1}function az(l,u){var m=this.__data__,v=Sy(m,l);return v<0?(++this.size,m.push([l,u])):m[v][1]=u,this}aa.prototype.clear=nz,aa.prototype.delete=rz,aa.prototype.get=iz,aa.prototype.has=sz,aa.prototype.set=az;function oa(l){var u=-1,m=l==null?0:l.length;for(this.clear();++u<m;){var v=l[u];this.set(v[0],v[1])}}function oz(){this.size=0,this.__data__={hash:new Yl,map:new(xf||aa),string:new Yl}}function lz(l){var u=Uy(this,l).delete(l);return this.size-=u?1:0,u}function cz(l){return Uy(this,l).get(l)}function uz(l){return Uy(this,l).has(l)}function hz(l,u){var m=Uy(this,l),v=m.size;return m.set(l,u),this.size+=m.size==v?0:1,this}oa.prototype.clear=oz,oa.prototype.delete=lz,oa.prototype.get=cz,oa.prototype.has=uz,oa.prototype.set=hz;function Ql(l){var u=-1,m=l==null?0:l.length;for(this.__data__=new oa;++u<m;)this.add(l[u])}function dz(l){return this.__data__.set(l,c),this}function fz(l){return this.__data__.has(l)}Ql.prototype.add=Ql.prototype.push=dz,Ql.prototype.has=fz;function Xi(l){var u=this.__data__=new aa(l);this.size=u.size}function mz(){this.__data__=new aa,this.size=0}function pz(l){var u=this.__data__,m=u.delete(l);return this.size=u.size,m}function gz(l){return this.__data__.get(l)}function yz(l){return this.__data__.has(l)}function _z(l,u){var m=this.__data__;if(m instanceof aa){var v=m.__data__;if(!xf||v.length<i-1)return v.push([l,u]),this.size=++m.size,this;m=this.__data__=new oa(v)}return m.set(l,u),this.size=m.size,this}Xi.prototype.clear=mz,Xi.prototype.delete=pz,Xi.prototype.get=gz,Xi.prototype.has=yz,Xi.prototype.set=_z;function BR(l,u){var m=Ne(l),v=!m&&tc(l),I=!m&&!v&&vo(l),V=!m&&!v&&!I&&ju(l),z=m||v||I||V,H=z?ho(l.length,RF):[],$=H.length;for(var Z in l)(u||ht.call(l,Z))&&!(z&&(Z=="length"||I&&(Z=="offset"||Z=="parent")||V&&(Z=="buffer"||Z=="byteLength"||Z=="byteOffset")||ha(Z,$)))&&H.push(Z);return H}function qR(l){var u=l.length;return u?l[Sb(0,u-1)]:n}function vz(l,u){return jy(Rr(l),Xl(u,0,l.length))}function wz(l){return jy(Rr(l))}function gb(l,u,m){(m!==n&&!Ji(l[u],m)||m===n&&!(u in l))&&la(l,u,m)}function Rf(l,u,m){var v=l[u];(!(ht.call(l,u)&&Ji(v,m))||m===n&&!(u in l))&&la(l,u,m)}function Sy(l,u){for(var m=l.length;m--;)if(Ji(l[m][0],u))return m;return-1}function bz(l,u,m,v){return po(l,function(I,V,z){u(v,I,m(I),z)}),v}function HR(l,u){return l&&ws(u,Dn(u),l)}function Tz(l,u){return l&&ws(u,Nr(u),l)}function la(l,u,m){u=="__proto__"&&wy?wy(l,u,{configurable:!0,enumerable:!0,value:m,writable:!0}):l[u]=m}function yb(l,u){for(var m=-1,v=u.length,I=X(v),V=l==null;++m<v;)I[m]=V?n:Xb(l,u[m]);return I}function Xl(l,u,m){return l===l&&(m!==n&&(l=l<=m?l:m),u!==n&&(l=l>=u?l:u)),l}function Ti(l,u,m,v,I,V){var z,H=u&p,$=u&g,Z=u&_;if(m&&(z=I?m(l,v,I,V):m(l)),z!==n)return z;if(!Bt(l))return l;var te=Ne(l);if(te){if(z=uB(l),!H)return Rr(l,z)}else{var ae=tr(l),fe=ae==kl||ae==fu;if(vo(l))return mC(l,H);if(ae==Gr||ae==Tn||fe&&!I){if(z=$||fe?{}:kC(l),!H)return $?Zz(l,Tz(z,l)):Jz(l,HR(z,l))}else{if(!ut[ae])return I?l:{};z=hB(l,ae,H)}}V||(V=new Xi);var we=V.get(l);if(we)return we;V.set(l,z),l2(l)?l.forEach(function(Ae){z.add(Ti(Ae,u,m,Ae,l,V))}):a2(l)&&l.forEach(function(Ae,qe){z.set(qe,Ti(Ae,u,m,qe,l,V))});var xe=Z?$?Lb:Vb:$?Nr:Dn,Le=te?n:xe(l);return fn(Le||l,function(Ae,qe){Le&&(qe=Ae,Ae=l[qe]),Rf(z,qe,Ti(Ae,u,m,qe,l,V))}),z}function Ez(l){var u=Dn(l);return function(m){return GR(m,l,u)}}function GR(l,u,m){var v=m.length;if(l==null)return!v;for(l=bt(l);v--;){var I=m[v],V=u[I],z=l[I];if(z===n&&!(I in l)||!V(z))return!1}return!0}function $R(l,u,m){if(typeof l!="function")throw new wi(a);return Mf(function(){l.apply(n,m)},u)}function Cf(l,u,m,v){var I=-1,V=Kl,z=!0,H=l.length,$=[],Z=u.length;if(!H)return $;m&&(u=Be(u,Kr(m))),v?(V=co,z=!1):u.length>=i&&(V=Tf,z=!1,u=new Ql(u));e:for(;++I<H;){var te=l[I],ae=m==null?te:m(te);if(te=v||te!==0?te:0,z&&ae===ae){for(var fe=Z;fe--;)if(u[fe]===ae)continue e;$.push(te)}else V(u,ae,v)||$.push(te)}return $}var po=vC(vs),KR=vC(vb,!0);function xz(l,u){var m=!0;return po(l,function(v,I,V){return m=!!u(v,I,V),m}),m}function Iy(l,u,m){for(var v=-1,I=l.length;++v<I;){var V=l[v],z=u(V);if(z!=null&&(H===n?z===z&&!Yr(z):m(z,H)))var H=z,$=V}return $}function Az(l,u,m,v){var I=l.length;for(m=Me(m),m<0&&(m=-m>I?0:I+m),v=v===n||v>I?I:Me(v),v<0&&(v+=I),v=m>v?0:u2(v);m<v;)l[m++]=u;return l}function WR(l,u){var m=[];return po(l,function(v,I,V){u(v,I,V)&&m.push(v)}),m}function zn(l,u,m,v,I){var V=-1,z=l.length;for(m||(m=fB),I||(I=[]);++V<z;){var H=l[V];u>0&&m(H)?u>1?zn(H,u-1,m,v,I):Yi(I,H):v||(I[I.length]=H)}return I}var _b=wC(),YR=wC(!0);function vs(l,u){return l&&_b(l,u,Dn)}function vb(l,u){return l&&YR(l,u,Dn)}function Ry(l,u){return Wi(u,function(m){return da(l[m])})}function Jl(l,u){u=yo(u,l);for(var m=0,v=u.length;l!=null&&m<v;)l=l[bs(u[m++])];return m&&m==v?l:n}function QR(l,u,m){var v=u(l);return Ne(l)?v:Yi(v,m(l))}function dr(l){return l==null?l===n?Yw:Kd:Wl&&Wl in bt(l)?oB(l):wB(l)}function wb(l,u){return l>u}function Sz(l,u){return l!=null&&ht.call(l,u)}function Iz(l,u){return l!=null&&u in bt(l)}function Rz(l,u,m){return l>=er(u,m)&&l<xn(u,m)}function bb(l,u,m){for(var v=m?co:Kl,I=l[0].length,V=l.length,z=V,H=X(V),$=1/0,Z=[];z--;){var te=l[z];z&&u&&(te=Be(te,Kr(u))),$=er(te.length,$),H[z]=!m&&(u||I>=120&&te.length>=120)?new Ql(z&&te):n}te=l[0];var ae=-1,fe=H[0];e:for(;++ae<I&&Z.length<$;){var we=te[ae],xe=u?u(we):we;if(we=m||we!==0?we:0,!(fe?Tf(fe,xe):v(Z,xe,m))){for(z=V;--z;){var Le=H[z];if(!(Le?Tf(Le,xe):v(l[z],xe,m)))continue e}fe&&fe.push(xe),Z.push(we)}}return Z}function Cz(l,u,m,v){return vs(l,function(I,V,z){u(v,m(I),V,z)}),v}function Nf(l,u,m){u=yo(u,l),l=LC(l,u);var v=l==null?l:l[bs(xi(u))];return v==null?n:Zn(v,l,m)}function XR(l){return Yt(l)&&dr(l)==Tn}function Nz(l){return Yt(l)&&dr(l)==ro}function Pz(l){return Yt(l)&&dr(l)==no}function Pf(l,u,m,v,I){return l===u?!0:l==null||u==null||!Yt(l)&&!Yt(u)?l!==l&&u!==u:Dz(l,u,m,v,Pf,I)}function Dz(l,u,m,v,I,V){var z=Ne(l),H=Ne(u),$=z?to:tr(l),Z=H?to:tr(u);$=$==Tn?Gr:$,Z=Z==Tn?Gr:Z;var te=$==Gr,ae=Z==Gr,fe=$==Z;if(fe&&vo(l)){if(!vo(u))return!1;z=!0,te=!1}if(fe&&!te)return V||(V=new Xi),z||ju(l)?NC(l,u,m,v,I,V):sB(l,u,$,m,v,I,V);if(!(m&R)){var we=te&&ht.call(l,"__wrapped__"),xe=ae&&ht.call(u,"__wrapped__");if(we||xe){var Le=we?l.value():l,Ae=xe?u.value():u;return V||(V=new Xi),I(Le,Ae,m,v,V)}}return fe?(V||(V=new Xi),aB(l,u,m,v,I,V)):!1}function kz(l){return Yt(l)&&tr(l)==Ar}function Tb(l,u,m,v){var I=m.length,V=I,z=!v;if(l==null)return!V;for(l=bt(l);I--;){var H=m[I];if(z&&H[2]?H[1]!==l[H[0]]:!(H[0]in l))return!1}for(;++I<V;){H=m[I];var $=H[0],Z=l[$],te=H[1];if(z&&H[2]){if(Z===n&&!($ in l))return!1}else{var ae=new Xi;if(v)var fe=v(Z,te,$,l,u,ae);if(!(fe===n?Pf(te,Z,R|N,v,ae):fe))return!1}}return!0}function JR(l){if(!Bt(l)||pB(l))return!1;var u=da(l)?kF:tb;return u.test(ec(l))}function Oz(l){return Yt(l)&&dr(l)==rn}function Mz(l){return Yt(l)&&tr(l)==Jn}function Vz(l){return Yt(l)&&Gy(l.length)&&!!_t[dr(l)]}function ZR(l){return typeof l=="function"?l:l==null?Pr:typeof l=="object"?Ne(l)?nC(l[0],l[1]):tC(l):b2(l)}function Eb(l){if(!Of(l))return jF(l);var u=[];for(var m in bt(l))ht.call(l,m)&&m!="constructor"&&u.push(m);return u}function Lz(l){if(!Bt(l))return vB(l);var u=Of(l),m=[];for(var v in l)v=="constructor"&&(u||!ht.call(l,v))||m.push(v);return m}function xb(l,u){return l<u}function eC(l,u){var m=-1,v=Cr(l)?X(l.length):[];return po(l,function(I,V,z){v[++m]=u(I,V,z)}),v}function tC(l){var u=jb(l);return u.length==1&&u[0][2]?MC(u[0][0],u[0][1]):function(m){return m===l||Tb(m,l,u)}}function nC(l,u){return zb(l)&&OC(u)?MC(bs(l),u):function(m){var v=Xb(m,l);return v===n&&v===u?Jb(m,l):Pf(u,v,R|N)}}function Cy(l,u,m,v,I){l!==u&&_b(u,function(V,z){if(I||(I=new Xi),Bt(V))Uz(l,u,z,m,Cy,v,I);else{var H=v?v(qb(l,z),V,z+"",l,u,I):n;H===n&&(H=V),gb(l,z,H)}},Nr)}function Uz(l,u,m,v,I,V,z){var H=qb(l,m),$=qb(u,m),Z=z.get($);if(Z){gb(l,m,Z);return}var te=V?V(H,$,m+"",l,u,z):n,ae=te===n;if(ae){var fe=Ne($),we=!fe&&vo($),xe=!fe&&!we&&ju($);te=$,fe||we||xe?Ne(H)?te=H:sn(H)?te=Rr(H):we?(ae=!1,te=mC($,!0)):xe?(ae=!1,te=pC($,!0)):te=[]:Vf($)||tc($)?(te=H,tc(H)?te=h2(H):(!Bt(H)||da(H))&&(te=kC($))):ae=!1}ae&&(z.set($,te),I(te,$,v,V,z),z.delete($)),gb(l,m,te)}function rC(l,u){var m=l.length;if(m)return u+=u<0?m:0,ha(u,m)?l[u]:n}function iC(l,u,m){u.length?u=Be(u,function(V){return Ne(V)?function(z){return Jl(z,V.length===1?V[0]:V)}:V}):u=[Pr];var v=-1;u=Be(u,Kr(Ee()));var I=eC(l,function(V,z,H){var $=Be(u,function(Z){return Z(V)});return{criteria:$,index:++v,value:V}});return _s(I,function(V,z){return Xz(V,z,m)})}function jz(l,u){return sC(l,u,function(m,v){return Jb(l,v)})}function sC(l,u,m){for(var v=-1,I=u.length,V={};++v<I;){var z=u[v],H=Jl(l,z);m(H,z)&&Df(V,yo(z,l),H)}return V}function Fz(l){return function(u){return Jl(u,l)}}function Ab(l,u,m,v){var I=v?De:ce,V=-1,z=u.length,H=l;for(l===u&&(u=Rr(u)),m&&(H=Be(l,Kr(m)));++V<z;)for(var $=0,Z=u[V],te=m?m(Z):Z;($=I(H,te,$,v))>-1;)H!==l&&vy.call(H,$,1),vy.call(l,$,1);return l}function aC(l,u){for(var m=l?u.length:0,v=m-1;m--;){var I=u[m];if(m==v||I!==V){var V=I;ha(I)?vy.call(l,I,1):Cb(l,I)}}return l}function Sb(l,u){return l+Ty(FR()*(u-l+1))}function zz(l,u,m,v){for(var I=-1,V=xn(by((u-l)/(m||1)),0),z=X(V);V--;)z[v?V:++I]=l,l+=m;return z}function Ib(l,u){var m="";if(!l||u<1||u>ue)return m;do u%2&&(m+=l),u=Ty(u/2),u&&(l+=l);while(u);return m}function Fe(l,u){return Hb(VC(l,u,Pr),l+"")}function Bz(l){return qR(Fu(l))}function qz(l,u){var m=Fu(l);return jy(m,Xl(u,0,m.length))}function Df(l,u,m,v){if(!Bt(l))return l;u=yo(u,l);for(var I=-1,V=u.length,z=V-1,H=l;H!=null&&++I<V;){var $=bs(u[I]),Z=m;if($==="__proto__"||$==="constructor"||$==="prototype")return l;if(I!=z){var te=H[$];Z=v?v(te,$,H):n,Z===n&&(Z=Bt(te)?te:ha(u[I+1])?[]:{})}Rf(H,$,Z),H=H[$]}return l}var oC=Ey?function(l,u){return Ey.set(l,u),l}:Pr,Hz=wy?function(l,u){return wy(l,"toString",{configurable:!0,enumerable:!1,value:eT(u),writable:!0})}:Pr;function Gz(l){return jy(Fu(l))}function Ei(l,u,m){var v=-1,I=l.length;u<0&&(u=-u>I?0:I+u),m=m>I?I:m,m<0&&(m+=I),I=u>m?0:m-u>>>0,u>>>=0;for(var V=X(I);++v<I;)V[v]=l[v+u];return V}function $z(l,u){var m;return po(l,function(v,I,V){return m=u(v,I,V),!m}),!!m}function Ny(l,u,m){var v=0,I=l==null?v:l.length;if(typeof u=="number"&&u===u&&I<=hr){for(;v<I;){var V=v+I>>>1,z=l[V];z!==null&&!Yr(z)&&(m?z<=u:z<u)?v=V+1:I=V}return I}return Rb(l,u,Pr,m)}function Rb(l,u,m,v){var I=0,V=l==null?0:l.length;if(V===0)return 0;u=m(u);for(var z=u!==u,H=u===null,$=Yr(u),Z=u===n;I<V;){var te=Ty((I+V)/2),ae=m(l[te]),fe=ae!==n,we=ae===null,xe=ae===ae,Le=Yr(ae);if(z)var Ae=v||xe;else Z?Ae=xe&&(v||fe):H?Ae=xe&&fe&&(v||!we):$?Ae=xe&&fe&&!we&&(v||!Le):we||Le?Ae=!1:Ae=v?ae<=u:ae<u;Ae?I=te+1:V=te}return er(V,St)}function lC(l,u){for(var m=-1,v=l.length,I=0,V=[];++m<v;){var z=l[m],H=u?u(z):z;if(!m||!Ji(H,$)){var $=H;V[I++]=z===0?0:z}}return V}function cC(l){return typeof l=="number"?l:Yr(l)?_e:+l}function Wr(l){if(typeof l=="string")return l;if(Ne(l))return Be(l,Wr)+"";if(Yr(l))return zR?zR.call(l):"";var u=l+"";return u=="0"&&1/l==-se?"-0":u}function go(l,u,m){var v=-1,I=Kl,V=l.length,z=!0,H=[],$=H;if(m)z=!1,I=co;else if(V>=i){var Z=u?null:rB(l);if(Z)return hy(Z);z=!1,I=Tf,$=new Ql}else $=u?[]:H;e:for(;++v<V;){var te=l[v],ae=u?u(te):te;if(te=m||te!==0?te:0,z&&ae===ae){for(var fe=$.length;fe--;)if($[fe]===ae)continue e;u&&$.push(ae),H.push(te)}else I($,ae,m)||($!==H&&$.push(ae),H.push(te))}return H}function Cb(l,u){return u=yo(u,l),l=LC(l,u),l==null||delete l[bs(xi(u))]}function uC(l,u,m,v){return Df(l,u,m(Jl(l,u)),v)}function Py(l,u,m,v){for(var I=l.length,V=v?I:-1;(v?V--:++V<I)&&u(l[V],V,l););return m?Ei(l,v?0:V,v?V+1:I):Ei(l,v?V+1:0,v?I:V)}function hC(l,u){var m=l;return m instanceof Ke&&(m=m.value()),Ru(u,function(v,I){return I.func.apply(I.thisArg,Yi([v],I.args))},m)}function Nb(l,u,m){var v=l.length;if(v<2)return v?go(l[0]):[];for(var I=-1,V=X(v);++I<v;)for(var z=l[I],H=-1;++H<v;)H!=I&&(V[I]=Cf(V[I]||z,l[H],u,m));return go(zn(V,1),u,m)}function dC(l,u,m){for(var v=-1,I=l.length,V=u.length,z={};++v<I;){var H=v<V?u[v]:n;m(z,l[v],H)}return z}function Pb(l){return sn(l)?l:[]}function Db(l){return typeof l=="function"?l:Pr}function yo(l,u){return Ne(l)?l:zb(l,u)?[l]:zC(lt(l))}var Kz=Fe;function _o(l,u,m){var v=l.length;return m=m===n?v:m,!u&&m>=v?l:Ei(l,u,m)}var fC=OF||function(l){return $t.clearTimeout(l)};function mC(l,u){if(u)return l.slice();var m=l.length,v=MR?MR(m):new l.constructor(m);return l.copy(v),v}function kb(l){var u=new l.constructor(l.byteLength);return new yy(u).set(new yy(l)),u}function Wz(l,u){var m=u?kb(l.buffer):l.buffer;return new l.constructor(m,l.byteOffset,l.byteLength)}function Yz(l){var u=new l.constructor(l.source,tf.exec(l));return u.lastIndex=l.lastIndex,u}function Qz(l){return If?bt(If.call(l)):{}}function pC(l,u){var m=u?kb(l.buffer):l.buffer;return new l.constructor(m,l.byteOffset,l.length)}function gC(l,u){if(l!==u){var m=l!==n,v=l===null,I=l===l,V=Yr(l),z=u!==n,H=u===null,$=u===u,Z=Yr(u);if(!H&&!Z&&!V&&l>u||V&&z&&$&&!H&&!Z||v&&z&&$||!m&&$||!I)return 1;if(!v&&!V&&!Z&&l<u||Z&&m&&I&&!v&&!V||H&&m&&I||!z&&I||!$)return-1}return 0}function Xz(l,u,m){for(var v=-1,I=l.criteria,V=u.criteria,z=I.length,H=m.length;++v<z;){var $=gC(I[v],V[v]);if($){if(v>=H)return $;var Z=m[v];return $*(Z=="desc"?-1:1)}}return l.index-u.index}function yC(l,u,m,v){for(var I=-1,V=l.length,z=m.length,H=-1,$=u.length,Z=xn(V-z,0),te=X($+Z),ae=!v;++H<$;)te[H]=u[H];for(;++I<z;)(ae||I<V)&&(te[m[I]]=l[I]);for(;Z--;)te[H++]=l[I++];return te}function _C(l,u,m,v){for(var I=-1,V=l.length,z=-1,H=m.length,$=-1,Z=u.length,te=xn(V-H,0),ae=X(te+Z),fe=!v;++I<te;)ae[I]=l[I];for(var we=I;++$<Z;)ae[we+$]=u[$];for(;++z<H;)(fe||I<V)&&(ae[we+m[z]]=l[I++]);return ae}function Rr(l,u){var m=-1,v=l.length;for(u||(u=X(v));++m<v;)u[m]=l[m];return u}function ws(l,u,m,v){var I=!m;m||(m={});for(var V=-1,z=u.length;++V<z;){var H=u[V],$=v?v(m[H],l[H],H,m,l):n;$===n&&($=l[H]),I?la(m,H,$):Rf(m,H,$)}return m}function Jz(l,u){return ws(l,Fb(l),u)}function Zz(l,u){return ws(l,PC(l),u)}function Dy(l,u){return function(m,v){var I=Ne(m)?cy:bz,V=u?u():{};return I(m,l,Ee(v,2),V)}}function Vu(l){return Fe(function(u,m){var v=-1,I=m.length,V=I>1?m[I-1]:n,z=I>2?m[2]:n;for(V=l.length>3&&typeof V=="function"?(I--,V):n,z&&fr(m[0],m[1],z)&&(V=I<3?n:V,I=1),u=bt(u);++v<I;){var H=m[v];H&&l(u,H,v,V)}return u})}function vC(l,u){return function(m,v){if(m==null)return m;if(!Cr(m))return l(m,v);for(var I=m.length,V=u?I:-1,z=bt(m);(u?V--:++V<I)&&v(z[V],V,z)!==!1;);return m}}function wC(l){return function(u,m,v){for(var I=-1,V=bt(u),z=v(u),H=z.length;H--;){var $=z[l?H:++I];if(m(V[$],$,V)===!1)break}return u}}function eB(l,u,m){var v=u&A,I=kf(l);function V(){var z=this&&this!==$t&&this instanceof V?I:l;return z.apply(v?m:this,arguments)}return V}function bC(l){return function(u){u=lt(u);var m=Cu(u)?Qi(u):n,v=m?m[0]:u.charAt(0),I=m?_o(m,1).join(""):u.slice(1);return v[l]()+I}}function Lu(l){return function(u){return Ru(v2(_2(u).replace(iy,"")),l,"")}}function kf(l){return function(){var u=arguments;switch(u.length){case 0:return new l;case 1:return new l(u[0]);case 2:return new l(u[0],u[1]);case 3:return new l(u[0],u[1],u[2]);case 4:return new l(u[0],u[1],u[2],u[3]);case 5:return new l(u[0],u[1],u[2],u[3],u[4]);case 6:return new l(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new l(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var m=Mu(l.prototype),v=l.apply(m,u);return Bt(v)?v:m}}function tB(l,u,m){var v=kf(l);function I(){for(var V=arguments.length,z=X(V),H=V,$=Uu(I);H--;)z[H]=arguments[H];var Z=V<3&&z[0]!==$&&z[V-1]!==$?[]:fo(z,$);if(V-=Z.length,V<m)return SC(l,u,ky,I.placeholder,n,z,Z,n,n,m-V);var te=this&&this!==$t&&this instanceof I?v:l;return Zn(te,this,z)}return I}function TC(l){return function(u,m,v){var I=bt(u);if(!Cr(u)){var V=Ee(m,3);u=Dn(u),m=function(H){return V(I[H],H,I)}}var z=l(u,m,v);return z>-1?I[V?u[z]:z]:n}}function EC(l){return ua(function(u){var m=u.length,v=m,I=bi.prototype.thru;for(l&&u.reverse();v--;){var V=u[v];if(typeof V!="function")throw new wi(a);if(I&&!z&&Ly(V)=="wrapper")var z=new bi([],!0)}for(v=z?v:m;++v<m;){V=u[v];var H=Ly(V),$=H=="wrapper"?Ub(V):n;$&&Bb($[0])&&$[1]==(S|E|j|C)&&!$[4].length&&$[9]==1?z=z[Ly($[0])].apply(z,$[3]):z=V.length==1&&Bb(V)?z[H]():z.thru(V)}return function(){var Z=arguments,te=Z[0];if(z&&Z.length==1&&Ne(te))return z.plant(te).value();for(var ae=0,fe=m?u[ae].apply(this,Z):te;++ae<m;)fe=u[ae].call(this,fe);return fe}})}function ky(l,u,m,v,I,V,z,H,$,Z){var te=u&S,ae=u&A,fe=u&b,we=u&(E|O),xe=u&k,Le=fe?n:kf(l);function Ae(){for(var qe=arguments.length,Xe=X(qe),Qr=qe;Qr--;)Xe[Qr]=arguments[Qr];if(we)var mr=Uu(Ae),Xr=fF(Xe,mr);if(v&&(Xe=yC(Xe,v,I,we)),V&&(Xe=_C(Xe,V,z,we)),qe-=Xr,we&&qe<Z){var an=fo(Xe,mr);return SC(l,u,ky,Ae.placeholder,m,Xe,an,H,$,Z-qe)}var Zi=ae?m:this,ma=fe?Zi[l]:l;return qe=Xe.length,H?Xe=bB(Xe,H):xe&&qe>1&&Xe.reverse(),te&&$<qe&&(Xe.length=$),this&&this!==$t&&this instanceof Ae&&(ma=Le||kf(ma)),ma.apply(Zi,Xe)}return Ae}function xC(l,u){return function(m,v){return Cz(m,l,u(v),{})}}function Oy(l,u){return function(m,v){var I;if(m===n&&v===n)return u;if(m!==n&&(I=m),v!==n){if(I===n)return v;typeof m=="string"||typeof v=="string"?(m=Wr(m),v=Wr(v)):(m=cC(m),v=cC(v)),I=l(m,v)}return I}}function Ob(l){return ua(function(u){return u=Be(u,Kr(Ee())),Fe(function(m){var v=this;return l(u,function(I){return Zn(I,v,m)})})})}function My(l,u){u=u===n?" ":Wr(u);var m=u.length;if(m<2)return m?Ib(u,l):u;var v=Ib(u,by(l/Nu(u)));return Cu(u)?_o(Qi(v),0,l).join(""):v.slice(0,l)}function nB(l,u,m,v){var I=u&A,V=kf(l);function z(){for(var H=-1,$=arguments.length,Z=-1,te=v.length,ae=X(te+$),fe=this&&this!==$t&&this instanceof z?V:l;++Z<te;)ae[Z]=v[Z];for(;$--;)ae[Z++]=arguments[++H];return Zn(fe,I?m:this,ae)}return z}function AC(l){return function(u,m,v){return v&&typeof v!="number"&&fr(u,m,v)&&(m=v=n),u=fa(u),m===n?(m=u,u=0):m=fa(m),v=v===n?u<m?1:-1:fa(v),zz(u,m,v,l)}}function Vy(l){return function(u,m){return typeof u=="string"&&typeof m=="string"||(u=Ai(u),m=Ai(m)),l(u,m)}}function SC(l,u,m,v,I,V,z,H,$,Z){var te=u&E,ae=te?z:n,fe=te?n:z,we=te?V:n,xe=te?n:V;u|=te?j:q,u&=~(te?q:j),u&T||(u&=-4);var Le=[l,u,I,we,ae,xe,fe,H,$,Z],Ae=m.apply(n,Le);return Bb(l)&&UC(Ae,Le),Ae.placeholder=v,jC(Ae,l,u)}function Mb(l){var u=En[l];return function(m,v){if(m=Ai(m),v=v==null?0:er(Me(v),292),v&&jR(m)){var I=(lt(m)+"e").split("e"),V=u(I[0]+"e"+(+I[1]+v));return I=(lt(V)+"e").split("e"),+(I[0]+"e"+(+I[1]-v))}return u(m)}}var rB=ku&&1/hy(new ku([,-0]))[1]==se?function(l){return new ku(l)}:rT;function IC(l){return function(u){var m=tr(u);return m==Ar?hb(u):m==Jn?wF(u):bf(u,l(u))}}function ca(l,u,m,v,I,V,z,H){var $=u&b;if(!$&&typeof l!="function")throw new wi(a);var Z=v?v.length:0;if(Z||(u&=-97,v=I=n),z=z===n?z:xn(Me(z),0),H=H===n?H:Me(H),Z-=I?I.length:0,u&q){var te=v,ae=I;v=I=n}var fe=$?n:Ub(l),we=[l,u,m,v,I,te,ae,V,z,H];if(fe&&_B(we,fe),l=we[0],u=we[1],m=we[2],v=we[3],I=we[4],H=we[9]=we[9]===n?$?0:l.length:xn(we[9]-Z,0),!H&&u&(E|O)&&(u&=-25),!u||u==A)var xe=eB(l,u,m);else u==E||u==O?xe=tB(l,u,H):(u==j||u==(A|j))&&!I.length?xe=nB(l,u,m,v):xe=ky.apply(n,we);var Le=fe?oC:UC;return jC(Le(xe,we),l,u)}function RC(l,u,m,v){return l===n||Ji(l,Du[m])&&!ht.call(v,m)?u:l}function CC(l,u,m,v,I,V){return Bt(l)&&Bt(u)&&(V.set(u,l),Cy(l,u,n,CC,V),V.delete(u)),l}function iB(l){return Vf(l)?n:l}function NC(l,u,m,v,I,V){var z=m&R,H=l.length,$=u.length;if(H!=$&&!(z&&$>H))return!1;var Z=V.get(l),te=V.get(u);if(Z&&te)return Z==u&&te==l;var ae=-1,fe=!0,we=m&N?new Ql:n;for(V.set(l,u),V.set(u,l);++ae<H;){var xe=l[ae],Le=u[ae];if(v)var Ae=z?v(Le,xe,ae,u,l,V):v(xe,Le,ae,l,u,V);if(Ae!==n){if(Ae)continue;fe=!1;break}if(we){if(!d(u,function(qe,Xe){if(!Tf(we,Xe)&&(xe===qe||I(xe,qe,m,v,V)))return we.push(Xe)})){fe=!1;break}}else if(!(xe===Le||I(xe,Le,m,v,V))){fe=!1;break}}return V.delete(l),V.delete(u),fe}function sB(l,u,m,v,I,V,z){switch(m){case ds:if(l.byteLength!=u.byteLength||l.byteOffset!=u.byteOffset)return!1;l=l.buffer,u=u.buffer;case ro:return!(l.byteLength!=u.byteLength||!V(new yy(l),new yy(u)));case Js:case no:case Ol:return Ji(+l,+u);case du:return l.name==u.name&&l.message==u.message;case rn:case Ml:return l==u+"";case Ar:var H=hb;case Jn:var $=v&R;if(H||(H=hy),l.size!=u.size&&!$)return!1;var Z=z.get(l);if(Z)return Z==u;v|=N,z.set(l,u);var te=NC(H(l),H(u),v,I,V,z);return z.delete(l),te;case Vl:if(If)return If.call(l)==If.call(u)}return!1}function aB(l,u,m,v,I,V){var z=m&R,H=Vb(l),$=H.length,Z=Vb(u),te=Z.length;if($!=te&&!z)return!1;for(var ae=$;ae--;){var fe=H[ae];if(!(z?fe in u:ht.call(u,fe)))return!1}var we=V.get(l),xe=V.get(u);if(we&&xe)return we==u&&xe==l;var Le=!0;V.set(l,u),V.set(u,l);for(var Ae=z;++ae<$;){fe=H[ae];var qe=l[fe],Xe=u[fe];if(v)var Qr=z?v(Xe,qe,fe,u,l,V):v(qe,Xe,fe,l,u,V);if(!(Qr===n?qe===Xe||I(qe,Xe,m,v,V):Qr)){Le=!1;break}Ae||(Ae=fe=="constructor")}if(Le&&!Ae){var mr=l.constructor,Xr=u.constructor;mr!=Xr&&"constructor"in l&&"constructor"in u&&!(typeof mr=="function"&&mr instanceof mr&&typeof Xr=="function"&&Xr instanceof Xr)&&(Le=!1)}return V.delete(l),V.delete(u),Le}function ua(l){return Hb(VC(l,n,GC),l+"")}function Vb(l){return QR(l,Dn,Fb)}function Lb(l){return QR(l,Nr,PC)}var Ub=Ey?function(l){return Ey.get(l)}:rT;function Ly(l){for(var u=l.name+"",m=Ou[u],v=ht.call(Ou,u)?m.length:0;v--;){var I=m[v],V=I.func;if(V==null||V==l)return I.name}return u}function Uu(l){var u=ht.call(D,"placeholder")?D:l;return u.placeholder}function Ee(){var l=D.iteratee||tT;return l=l===tT?ZR:l,arguments.length?l(arguments[0],arguments[1]):l}function Uy(l,u){var m=l.__data__;return mB(u)?m[typeof u=="string"?"string":"hash"]:m.map}function jb(l){for(var u=Dn(l),m=u.length;m--;){var v=u[m],I=l[v];u[m]=[v,I,OC(I)]}return u}function Zl(l,u){var m=yF(l,u);return JR(m)?m:n}function oB(l){var u=ht.call(l,Wl),m=l[Wl];try{l[Wl]=n;var v=!0}catch{}var I=py.call(l);return v&&(u?l[Wl]=m:delete l[Wl]),I}var Fb=fb?function(l){return l==null?[]:(l=bt(l),Wi(fb(l),function(u){return LR.call(l,u)}))}:iT,PC=fb?function(l){for(var u=[];l;)Yi(u,Fb(l)),l=_y(l);return u}:iT,tr=dr;(mb&&tr(new mb(new ArrayBuffer(1)))!=ds||xf&&tr(new xf)!=Ar||pb&&tr(pb.resolve())!=Wd||ku&&tr(new ku)!=Jn||Af&&tr(new Af)!=Gi)&&(tr=function(l){var u=dr(l),m=u==Gr?l.constructor:n,v=m?ec(m):"";if(v)switch(v){case qF:return ds;case HF:return Ar;case GF:return Wd;case $F:return Jn;case KF:return Gi}return u});function lB(l,u,m){for(var v=-1,I=m.length;++v<I;){var V=m[v],z=V.size;switch(V.type){case"drop":l+=z;break;case"dropRight":u-=z;break;case"take":u=er(u,l+z);break;case"takeRight":l=xn(l,u-z);break}}return{start:l,end:u}}function cB(l){var u=l.match(Zw);return u?u[1].split(fs):[]}function DC(l,u,m){u=yo(u,l);for(var v=-1,I=u.length,V=!1;++v<I;){var z=bs(u[v]);if(!(V=l!=null&&m(l,z)))break;l=l[z]}return V||++v!=I?V:(I=l==null?0:l.length,!!I&&Gy(I)&&ha(z,I)&&(Ne(l)||tc(l)))}function uB(l){var u=l.length,m=new l.constructor(u);return u&&typeof l[0]=="string"&&ht.call(l,"index")&&(m.index=l.index,m.input=l.input),m}function kC(l){return typeof l.constructor=="function"&&!Of(l)?Mu(_y(l)):{}}function hB(l,u,m){var v=l.constructor;switch(u){case ro:return kb(l);case Js:case no:return new v(+l);case ds:return Wz(l,m);case Yd:case Qd:case mu:case pu:case Zs:case Ll:case Ul:case $i:case gu:return pC(l,m);case Ar:return new v;case Ol:case Ml:return new v(l);case rn:return Yz(l);case Jn:return new v;case Vl:return Qz(l)}}function dB(l,u){var m=u.length;if(!m)return l;var v=m-1;return u[v]=(m>1?"& ":"")+u[v],u=u.join(m>2?", ":" "),l.replace(Bl,`{
/* [wrapped with `+u+`] */
`)}function fB(l){return Ne(l)||tc(l)||!!(UR&&l&&l[UR])}function ha(l,u){var m=typeof l;return u=u??ue,!!u&&(m=="number"||m!="symbol"&&Kg.test(l))&&l>-1&&l%1==0&&l<u}function fr(l,u,m){if(!Bt(m))return!1;var v=typeof u;return(v=="number"?Cr(m)&&ha(u,m.length):v=="string"&&u in m)?Ji(m[u],l):!1}function zb(l,u){if(Ne(l))return!1;var m=typeof l;return m=="number"||m=="symbol"||m=="boolean"||l==null||Yr(l)?!0:Xw.test(l)||!io.test(l)||u!=null&&l in bt(u)}function mB(l){var u=typeof l;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?l!=="__proto__":l===null}function Bb(l){var u=Ly(l),m=D[u];if(typeof m!="function"||!(u in Ke.prototype))return!1;if(l===m)return!0;var v=Ub(m);return!!v&&l===v[0]}function pB(l){return!!OR&&OR in l}var gB=fy?da:sT;function Of(l){var u=l&&l.constructor,m=typeof u=="function"&&u.prototype||Du;return l===m}function OC(l){return l===l&&!Bt(l)}function MC(l,u){return function(m){return m==null?!1:m[l]===u&&(u!==n||l in bt(m))}}function yB(l){var u=qy(l,function(v){return m.size===h&&m.clear(),v}),m=u.cache;return u}function _B(l,u){var m=l[1],v=u[1],I=m|v,V=I<(A|b|S),z=v==S&&m==E||v==S&&m==C&&l[7].length<=u[8]||v==(S|C)&&u[7].length<=u[8]&&m==E;if(!(V||z))return l;v&A&&(l[2]=u[2],I|=m&A?0:T);var H=u[3];if(H){var $=l[3];l[3]=$?yC($,H,u[4]):H,l[4]=$?fo(l[3],f):u[4]}return H=u[5],H&&($=l[5],l[5]=$?_C($,H,u[6]):H,l[6]=$?fo(l[5],f):u[6]),H=u[7],H&&(l[7]=H),v&S&&(l[8]=l[8]==null?u[8]:er(l[8],u[8])),l[9]==null&&(l[9]=u[9]),l[0]=u[0],l[1]=I,l}function vB(l){var u=[];if(l!=null)for(var m in bt(l))u.push(m);return u}function wB(l){return py.call(l)}function VC(l,u,m){return u=xn(u===n?l.length-1:u,0),function(){for(var v=arguments,I=-1,V=xn(v.length-u,0),z=X(V);++I<V;)z[I]=v[u+I];I=-1;for(var H=X(u+1);++I<u;)H[I]=v[I];return H[u]=m(z),Zn(l,this,H)}}function LC(l,u){return u.length<2?l:Jl(l,Ei(u,0,-1))}function bB(l,u){for(var m=l.length,v=er(u.length,m),I=Rr(l);v--;){var V=u[v];l[v]=ha(V,m)?I[V]:n}return l}function qb(l,u){if(!(u==="constructor"&&typeof l[u]=="function")&&u!="__proto__")return l[u]}var UC=FC(oC),Mf=VF||function(l,u){return $t.setTimeout(l,u)},Hb=FC(Hz);function jC(l,u,m){var v=u+"";return Hb(l,dB(v,TB(cB(v),m)))}function FC(l){var u=0,m=0;return function(){var v=FF(),I=F-(v-m);if(m=v,I>0){if(++u>=B)return arguments[0]}else u=0;return l.apply(n,arguments)}}function jy(l,u){var m=-1,v=l.length,I=v-1;for(u=u===n?v:u;++m<u;){var V=Sb(m,I),z=l[V];l[V]=l[m],l[m]=z}return l.length=u,l}var zC=yB(function(l){var u=[];return l.charCodeAt(0)===46&&u.push(""),l.replace(Jw,function(m,v,I,V){u.push(I?V.replace(Zd,"$1"):v||m)}),u});function bs(l){if(typeof l=="string"||Yr(l))return l;var u=l+"";return u=="0"&&1/l==-se?"-0":u}function ec(l){if(l!=null){try{return my.call(l)}catch{}try{return l+""}catch{}}return""}function TB(l,u){return fn(Mt,function(m){var v="_."+m[0];u&m[1]&&!Kl(l,v)&&l.push(v)}),l.sort()}function BC(l){if(l instanceof Ke)return l.clone();var u=new bi(l.__wrapped__,l.__chain__);return u.__actions__=Rr(l.__actions__),u.__index__=l.__index__,u.__values__=l.__values__,u}function EB(l,u,m){(m?fr(l,u,m):u===n)?u=1:u=xn(Me(u),0);var v=l==null?0:l.length;if(!v||u<1)return[];for(var I=0,V=0,z=X(by(v/u));I<v;)z[V++]=Ei(l,I,I+=u);return z}function xB(l){for(var u=-1,m=l==null?0:l.length,v=0,I=[];++u<m;){var V=l[u];V&&(I[v++]=V)}return I}function AB(){var l=arguments.length;if(!l)return[];for(var u=X(l-1),m=arguments[0],v=l;v--;)u[v-1]=arguments[v];return Yi(Ne(m)?Rr(m):[m],zn(u,1))}var SB=Fe(function(l,u){return sn(l)?Cf(l,zn(u,1,sn,!0)):[]}),IB=Fe(function(l,u){var m=xi(u);return sn(m)&&(m=n),sn(l)?Cf(l,zn(u,1,sn,!0),Ee(m,2)):[]}),RB=Fe(function(l,u){var m=xi(u);return sn(m)&&(m=n),sn(l)?Cf(l,zn(u,1,sn,!0),n,m):[]});function CB(l,u,m){var v=l==null?0:l.length;return v?(u=m||u===n?1:Me(u),Ei(l,u<0?0:u,v)):[]}function NB(l,u,m){var v=l==null?0:l.length;return v?(u=m||u===n?1:Me(u),u=v-u,Ei(l,0,u<0?0:u)):[]}function PB(l,u){return l&&l.length?Py(l,Ee(u,3),!0,!0):[]}function DB(l,u){return l&&l.length?Py(l,Ee(u,3),!0):[]}function kB(l,u,m,v){var I=l==null?0:l.length;return I?(m&&typeof m!="number"&&fr(l,u,m)&&(m=0,v=I),Az(l,u,m,v)):[]}function qC(l,u,m){var v=l==null?0:l.length;if(!v)return-1;var I=m==null?0:Me(m);return I<0&&(I=xn(v+I,0)),Y(l,Ee(u,3),I)}function HC(l,u,m){var v=l==null?0:l.length;if(!v)return-1;var I=v-1;return m!==n&&(I=Me(m),I=m<0?xn(v+I,0):er(I,v-1)),Y(l,Ee(u,3),I,!0)}function GC(l){var u=l==null?0:l.length;return u?zn(l,1):[]}function OB(l){var u=l==null?0:l.length;return u?zn(l,se):[]}function MB(l,u){var m=l==null?0:l.length;return m?(u=u===n?1:Me(u),zn(l,u)):[]}function VB(l){for(var u=-1,m=l==null?0:l.length,v={};++u<m;){var I=l[u];v[I[0]]=I[1]}return v}function $C(l){return l&&l.length?l[0]:n}function LB(l,u,m){var v=l==null?0:l.length;if(!v)return-1;var I=m==null?0:Me(m);return I<0&&(I=xn(v+I,0)),ce(l,u,I)}function UB(l){var u=l==null?0:l.length;return u?Ei(l,0,-1):[]}var jB=Fe(function(l){var u=Be(l,Pb);return u.length&&u[0]===l[0]?bb(u):[]}),FB=Fe(function(l){var u=xi(l),m=Be(l,Pb);return u===xi(m)?u=n:m.pop(),m.length&&m[0]===l[0]?bb(m,Ee(u,2)):[]}),zB=Fe(function(l){var u=xi(l),m=Be(l,Pb);return u=typeof u=="function"?u:n,u&&m.pop(),m.length&&m[0]===l[0]?bb(m,n,u):[]});function BB(l,u){return l==null?"":UF.call(l,u)}function xi(l){var u=l==null?0:l.length;return u?l[u-1]:n}function qB(l,u,m){var v=l==null?0:l.length;if(!v)return-1;var I=v;return m!==n&&(I=Me(m),I=I<0?xn(v+I,0):er(I,v-1)),u===u?TF(l,u,I):Y(l,Kt,I,!0)}function HB(l,u){return l&&l.length?rC(l,Me(u)):n}var GB=Fe(KC);function KC(l,u){return l&&l.length&&u&&u.length?Ab(l,u):l}function $B(l,u,m){return l&&l.length&&u&&u.length?Ab(l,u,Ee(m,2)):l}function KB(l,u,m){return l&&l.length&&u&&u.length?Ab(l,u,n,m):l}var WB=ua(function(l,u){var m=l==null?0:l.length,v=yb(l,u);return aC(l,Be(u,function(I){return ha(I,m)?+I:I}).sort(gC)),v});function YB(l,u){var m=[];if(!(l&&l.length))return m;var v=-1,I=[],V=l.length;for(u=Ee(u,3);++v<V;){var z=l[v];u(z,v,l)&&(m.push(z),I.push(v))}return aC(l,I),m}function Gb(l){return l==null?l:BF.call(l)}function QB(l,u,m){var v=l==null?0:l.length;return v?(m&&typeof m!="number"&&fr(l,u,m)?(u=0,m=v):(u=u==null?0:Me(u),m=m===n?v:Me(m)),Ei(l,u,m)):[]}function XB(l,u){return Ny(l,u)}function JB(l,u,m){return Rb(l,u,Ee(m,2))}function ZB(l,u){var m=l==null?0:l.length;if(m){var v=Ny(l,u);if(v<m&&Ji(l[v],u))return v}return-1}function e8(l,u){return Ny(l,u,!0)}function t8(l,u,m){return Rb(l,u,Ee(m,2),!0)}function n8(l,u){var m=l==null?0:l.length;if(m){var v=Ny(l,u,!0)-1;if(Ji(l[v],u))return v}return-1}function r8(l){return l&&l.length?lC(l):[]}function i8(l,u){return l&&l.length?lC(l,Ee(u,2)):[]}function s8(l){var u=l==null?0:l.length;return u?Ei(l,1,u):[]}function a8(l,u,m){return l&&l.length?(u=m||u===n?1:Me(u),Ei(l,0,u<0?0:u)):[]}function o8(l,u,m){var v=l==null?0:l.length;return v?(u=m||u===n?1:Me(u),u=v-u,Ei(l,u<0?0:u,v)):[]}function l8(l,u){return l&&l.length?Py(l,Ee(u,3),!1,!0):[]}function c8(l,u){return l&&l.length?Py(l,Ee(u,3)):[]}var u8=Fe(function(l){return go(zn(l,1,sn,!0))}),h8=Fe(function(l){var u=xi(l);return sn(u)&&(u=n),go(zn(l,1,sn,!0),Ee(u,2))}),d8=Fe(function(l){var u=xi(l);return u=typeof u=="function"?u:n,go(zn(l,1,sn,!0),n,u)});function f8(l){return l&&l.length?go(l):[]}function m8(l,u){return l&&l.length?go(l,Ee(u,2)):[]}function p8(l,u){return u=typeof u=="function"?u:n,l&&l.length?go(l,n,u):[]}function $b(l){if(!(l&&l.length))return[];var u=0;return l=Wi(l,function(m){if(sn(m))return u=xn(m.length,u),!0}),ho(u,function(m){return Be(l,Wt(m))})}function WC(l,u){if(!(l&&l.length))return[];var m=$b(l);return u==null?m:Be(m,function(v){return Zn(u,n,v)})}var g8=Fe(function(l,u){return sn(l)?Cf(l,u):[]}),y8=Fe(function(l){return Nb(Wi(l,sn))}),_8=Fe(function(l){var u=xi(l);return sn(u)&&(u=n),Nb(Wi(l,sn),Ee(u,2))}),v8=Fe(function(l){var u=xi(l);return u=typeof u=="function"?u:n,Nb(Wi(l,sn),n,u)}),w8=Fe($b);function b8(l,u){return dC(l||[],u||[],Rf)}function T8(l,u){return dC(l||[],u||[],Df)}var E8=Fe(function(l){var u=l.length,m=u>1?l[u-1]:n;return m=typeof m=="function"?(l.pop(),m):n,WC(l,m)});function YC(l){var u=D(l);return u.__chain__=!0,u}function x8(l,u){return u(l),l}function Fy(l,u){return u(l)}var A8=ua(function(l){var u=l.length,m=u?l[0]:0,v=this.__wrapped__,I=function(V){return yb(V,l)};return u>1||this.__actions__.length||!(v instanceof Ke)||!ha(m)?this.thru(I):(v=v.slice(m,+m+(u?1:0)),v.__actions__.push({func:Fy,args:[I],thisArg:n}),new bi(v,this.__chain__).thru(function(V){return u&&!V.length&&V.push(n),V}))});function S8(){return YC(this)}function I8(){return new bi(this.value(),this.__chain__)}function R8(){this.__values__===n&&(this.__values__=c2(this.value()));var l=this.__index__>=this.__values__.length,u=l?n:this.__values__[this.__index__++];return{done:l,value:u}}function C8(){return this}function N8(l){for(var u,m=this;m instanceof Ay;){var v=BC(m);v.__index__=0,v.__values__=n,u?I.__wrapped__=v:u=v;var I=v;m=m.__wrapped__}return I.__wrapped__=l,u}function P8(){var l=this.__wrapped__;if(l instanceof Ke){var u=l;return this.__actions__.length&&(u=new Ke(this)),u=u.reverse(),u.__actions__.push({func:Fy,args:[Gb],thisArg:n}),new bi(u,this.__chain__)}return this.thru(Gb)}function D8(){return hC(this.__wrapped__,this.__actions__)}var k8=Dy(function(l,u,m){ht.call(l,m)?++l[m]:la(l,m,1)});function O8(l,u,m){var v=Ne(l)?wf:xz;return m&&fr(l,u,m)&&(u=n),v(l,Ee(u,3))}function M8(l,u){var m=Ne(l)?Wi:WR;return m(l,Ee(u,3))}var V8=TC(qC),L8=TC(HC);function U8(l,u){return zn(zy(l,u),1)}function j8(l,u){return zn(zy(l,u),se)}function F8(l,u,m){return m=m===n?1:Me(m),zn(zy(l,u),m)}function QC(l,u){var m=Ne(l)?fn:po;return m(l,Ee(u,3))}function XC(l,u){var m=Ne(l)?uy:KR;return m(l,Ee(u,3))}var z8=Dy(function(l,u,m){ht.call(l,m)?l[m].push(u):la(l,m,[u])});function B8(l,u,m,v){l=Cr(l)?l:Fu(l),m=m&&!v?Me(m):0;var I=l.length;return m<0&&(m=xn(I+m,0)),$y(l)?m<=I&&l.indexOf(u,m)>-1:!!I&&ce(l,u,m)>-1}var q8=Fe(function(l,u,m){var v=-1,I=typeof u=="function",V=Cr(l)?X(l.length):[];return po(l,function(z){V[++v]=I?Zn(u,z,m):Nf(z,u,m)}),V}),H8=Dy(function(l,u,m){la(l,m,u)});function zy(l,u){var m=Ne(l)?Be:eC;return m(l,Ee(u,3))}function G8(l,u,m,v){return l==null?[]:(Ne(u)||(u=u==null?[]:[u]),m=v?n:m,Ne(m)||(m=m==null?[]:[m]),iC(l,u,m))}var $8=Dy(function(l,u,m){l[m?0:1].push(u)},function(){return[[],[]]});function K8(l,u,m){var v=Ne(l)?Ru:ys,I=arguments.length<3;return v(l,Ee(u,4),m,I,po)}function W8(l,u,m){var v=Ne(l)?uo:ys,I=arguments.length<3;return v(l,Ee(u,4),m,I,KR)}function Y8(l,u){var m=Ne(l)?Wi:WR;return m(l,Hy(Ee(u,3)))}function Q8(l){var u=Ne(l)?qR:Bz;return u(l)}function X8(l,u,m){(m?fr(l,u,m):u===n)?u=1:u=Me(u);var v=Ne(l)?vz:qz;return v(l,u)}function J8(l){var u=Ne(l)?wz:Gz;return u(l)}function Z8(l){if(l==null)return 0;if(Cr(l))return $y(l)?Nu(l):l.length;var u=tr(l);return u==Ar||u==Jn?l.size:Eb(l).length}function eq(l,u,m){var v=Ne(l)?d:$z;return m&&fr(l,u,m)&&(u=n),v(l,Ee(u,3))}var tq=Fe(function(l,u){if(l==null)return[];var m=u.length;return m>1&&fr(l,u[0],u[1])?u=[]:m>2&&fr(u[0],u[1],u[2])&&(u=[u[0]]),iC(l,zn(u,1),[])}),By=MF||function(){return $t.Date.now()};function nq(l,u){if(typeof u!="function")throw new wi(a);return l=Me(l),function(){if(--l<1)return u.apply(this,arguments)}}function JC(l,u,m){return u=m?n:u,u=l&&u==null?l.length:u,ca(l,S,n,n,n,n,u)}function ZC(l,u){var m;if(typeof u!="function")throw new wi(a);return l=Me(l),function(){return--l>0&&(m=u.apply(this,arguments)),l<=1&&(u=n),m}}var Kb=Fe(function(l,u,m){var v=A;if(m.length){var I=fo(m,Uu(Kb));v|=j}return ca(l,v,u,m,I)}),e2=Fe(function(l,u,m){var v=A|b;if(m.length){var I=fo(m,Uu(e2));v|=j}return ca(u,v,l,m,I)});function t2(l,u,m){u=m?n:u;var v=ca(l,E,n,n,n,n,n,u);return v.placeholder=t2.placeholder,v}function n2(l,u,m){u=m?n:u;var v=ca(l,O,n,n,n,n,n,u);return v.placeholder=n2.placeholder,v}function r2(l,u,m){var v,I,V,z,H,$,Z=0,te=!1,ae=!1,fe=!0;if(typeof l!="function")throw new wi(a);u=Ai(u)||0,Bt(m)&&(te=!!m.leading,ae="maxWait"in m,V=ae?xn(Ai(m.maxWait)||0,u):V,fe="trailing"in m?!!m.trailing:fe);function we(an){var Zi=v,ma=I;return v=I=n,Z=an,z=l.apply(ma,Zi),z}function xe(an){return Z=an,H=Mf(qe,u),te?we(an):z}function Le(an){var Zi=an-$,ma=an-Z,T2=u-Zi;return ae?er(T2,V-ma):T2}function Ae(an){var Zi=an-$,ma=an-Z;return $===n||Zi>=u||Zi<0||ae&&ma>=V}function qe(){var an=By();if(Ae(an))return Xe(an);H=Mf(qe,Le(an))}function Xe(an){return H=n,fe&&v?we(an):(v=I=n,z)}function Qr(){H!==n&&fC(H),Z=0,v=$=I=H=n}function mr(){return H===n?z:Xe(By())}function Xr(){var an=By(),Zi=Ae(an);if(v=arguments,I=this,$=an,Zi){if(H===n)return xe($);if(ae)return fC(H),H=Mf(qe,u),we($)}return H===n&&(H=Mf(qe,u)),z}return Xr.cancel=Qr,Xr.flush=mr,Xr}var rq=Fe(function(l,u){return $R(l,1,u)}),iq=Fe(function(l,u,m){return $R(l,Ai(u)||0,m)});function sq(l){return ca(l,k)}function qy(l,u){if(typeof l!="function"||u!=null&&typeof u!="function")throw new wi(a);var m=function(){var v=arguments,I=u?u.apply(this,v):v[0],V=m.cache;if(V.has(I))return V.get(I);var z=l.apply(this,v);return m.cache=V.set(I,z)||V,z};return m.cache=new(qy.Cache||oa),m}qy.Cache=oa;function Hy(l){if(typeof l!="function")throw new wi(a);return function(){var u=arguments;switch(u.length){case 0:return!l.call(this);case 1:return!l.call(this,u[0]);case 2:return!l.call(this,u[0],u[1]);case 3:return!l.call(this,u[0],u[1],u[2])}return!l.apply(this,u)}}function aq(l){return ZC(2,l)}var oq=Kz(function(l,u){u=u.length==1&&Ne(u[0])?Be(u[0],Kr(Ee())):Be(zn(u,1),Kr(Ee()));var m=u.length;return Fe(function(v){for(var I=-1,V=er(v.length,m);++I<V;)v[I]=u[I].call(this,v[I]);return Zn(l,this,v)})}),Wb=Fe(function(l,u){var m=fo(u,Uu(Wb));return ca(l,j,n,u,m)}),i2=Fe(function(l,u){var m=fo(u,Uu(i2));return ca(l,q,n,u,m)}),lq=ua(function(l,u){return ca(l,C,n,n,n,u)});function cq(l,u){if(typeof l!="function")throw new wi(a);return u=u===n?u:Me(u),Fe(l,u)}function uq(l,u){if(typeof l!="function")throw new wi(a);return u=u==null?0:xn(Me(u),0),Fe(function(m){var v=m[u],I=_o(m,0,u);return v&&Yi(I,v),Zn(l,this,I)})}function hq(l,u,m){var v=!0,I=!0;if(typeof l!="function")throw new wi(a);return Bt(m)&&(v="leading"in m?!!m.leading:v,I="trailing"in m?!!m.trailing:I),r2(l,u,{leading:v,maxWait:u,trailing:I})}function dq(l){return JC(l,1)}function fq(l,u){return Wb(Db(u),l)}function mq(){if(!arguments.length)return[];var l=arguments[0];return Ne(l)?l:[l]}function pq(l){return Ti(l,_)}function gq(l,u){return u=typeof u=="function"?u:n,Ti(l,_,u)}function yq(l){return Ti(l,p|_)}function _q(l,u){return u=typeof u=="function"?u:n,Ti(l,p|_,u)}function vq(l,u){return u==null||GR(l,u,Dn(u))}function Ji(l,u){return l===u||l!==l&&u!==u}var wq=Vy(wb),bq=Vy(function(l,u){return l>=u}),tc=XR(function(){return arguments}())?XR:function(l){return Yt(l)&&ht.call(l,"callee")&&!LR.call(l,"callee")},Ne=X.isArray,Tq=yf?Kr(yf):Nz;function Cr(l){return l!=null&&Gy(l.length)&&!da(l)}function sn(l){return Yt(l)&&Cr(l)}function Eq(l){return l===!0||l===!1||Yt(l)&&dr(l)==Js}var vo=LF||sT,xq=_f?Kr(_f):Pz;function Aq(l){return Yt(l)&&l.nodeType===1&&!Vf(l)}function Sq(l){if(l==null)return!0;if(Cr(l)&&(Ne(l)||typeof l=="string"||typeof l.splice=="function"||vo(l)||ju(l)||tc(l)))return!l.length;var u=tr(l);if(u==Ar||u==Jn)return!l.size;if(Of(l))return!Eb(l).length;for(var m in l)if(ht.call(l,m))return!1;return!0}function Iq(l,u){return Pf(l,u)}function Rq(l,u,m){m=typeof m=="function"?m:n;var v=m?m(l,u):n;return v===n?Pf(l,u,n,m):!!v}function Yb(l){if(!Yt(l))return!1;var u=dr(l);return u==du||u==Ww||typeof l.message=="string"&&typeof l.name=="string"&&!Vf(l)}function Cq(l){return typeof l=="number"&&jR(l)}function da(l){if(!Bt(l))return!1;var u=dr(l);return u==kl||u==fu||u==$d||u==Cn}function s2(l){return typeof l=="number"&&l==Me(l)}function Gy(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=ue}function Bt(l){var u=typeof l;return l!=null&&(u=="object"||u=="function")}function Yt(l){return l!=null&&typeof l=="object"}var a2=Su?Kr(Su):kz;function Nq(l,u){return l===u||Tb(l,u,jb(u))}function Pq(l,u,m){return m=typeof m=="function"?m:n,Tb(l,u,jb(u),m)}function Dq(l){return o2(l)&&l!=+l}function kq(l){if(gB(l))throw new Ce(s);return JR(l)}function Oq(l){return l===null}function Mq(l){return l==null}function o2(l){return typeof l=="number"||Yt(l)&&dr(l)==Ol}function Vf(l){if(!Yt(l)||dr(l)!=Gr)return!1;var u=_y(l);if(u===null)return!0;var m=ht.call(u,"constructor")&&u.constructor;return typeof m=="function"&&m instanceof m&&my.call(m)==PF}var Qb=Iu?Kr(Iu):Oz;function Vq(l){return s2(l)&&l>=-ue&&l<=ue}var l2=vf?Kr(vf):Mz;function $y(l){return typeof l=="string"||!Ne(l)&&Yt(l)&&dr(l)==Ml}function Yr(l){return typeof l=="symbol"||Yt(l)&&dr(l)==Vl}var ju=$l?Kr($l):Vz;function Lq(l){return l===n}function Uq(l){return Yt(l)&&tr(l)==Gi}function jq(l){return Yt(l)&&dr(l)==jg}var Fq=Vy(xb),zq=Vy(function(l,u){return l<=u});function c2(l){if(!l)return[];if(Cr(l))return $y(l)?Qi(l):Rr(l);if(Ef&&l[Ef])return vF(l[Ef]());var u=tr(l),m=u==Ar?hb:u==Jn?hy:Fu;return m(l)}function fa(l){if(!l)return l===0?l:0;if(l=Ai(l),l===se||l===-se){var u=l<0?-1:1;return u*Te}return l===l?l:0}function Me(l){var u=fa(l),m=u%1;return u===u?m?u-m:u:0}function u2(l){return l?Xl(Me(l),0,Ve):0}function Ai(l){if(typeof l=="number")return l;if(Yr(l))return _e;if(Bt(l)){var u=typeof l.valueOf=="function"?l.valueOf():l;l=Bt(u)?u+"":u}if(typeof l!="string")return l===0?l:+l;l=CR(l);var m=$g.test(l);return m||vu.test(l)?Gl(l.slice(2),m?2:8):eb.test(l)?_e:+l}function h2(l){return ws(l,Nr(l))}function Bq(l){return l?Xl(Me(l),-ue,ue):l===0?l:0}function lt(l){return l==null?"":Wr(l)}var qq=Vu(function(l,u){if(Of(u)||Cr(u)){ws(u,Dn(u),l);return}for(var m in u)ht.call(u,m)&&Rf(l,m,u[m])}),d2=Vu(function(l,u){ws(u,Nr(u),l)}),Ky=Vu(function(l,u,m,v){ws(u,Nr(u),l,v)}),Hq=Vu(function(l,u,m,v){ws(u,Dn(u),l,v)}),Gq=ua(yb);function $q(l,u){var m=Mu(l);return u==null?m:HR(m,u)}var Kq=Fe(function(l,u){l=bt(l);var m=-1,v=u.length,I=v>2?u[2]:n;for(I&&fr(u[0],u[1],I)&&(v=1);++m<v;)for(var V=u[m],z=Nr(V),H=-1,$=z.length;++H<$;){var Z=z[H],te=l[Z];(te===n||Ji(te,Du[Z])&&!ht.call(l,Z))&&(l[Z]=V[Z])}return l}),Wq=Fe(function(l){return l.push(n,CC),Zn(f2,n,l)});function Yq(l,u){return W(l,Ee(u,3),vs)}function Qq(l,u){return W(l,Ee(u,3),vb)}function Xq(l,u){return l==null?l:_b(l,Ee(u,3),Nr)}function Jq(l,u){return l==null?l:YR(l,Ee(u,3),Nr)}function Zq(l,u){return l&&vs(l,Ee(u,3))}function e7(l,u){return l&&vb(l,Ee(u,3))}function t7(l){return l==null?[]:Ry(l,Dn(l))}function n7(l){return l==null?[]:Ry(l,Nr(l))}function Xb(l,u,m){var v=l==null?n:Jl(l,u);return v===n?m:v}function r7(l,u){return l!=null&&DC(l,u,Sz)}function Jb(l,u){return l!=null&&DC(l,u,Iz)}var i7=xC(function(l,u,m){u!=null&&typeof u.toString!="function"&&(u=py.call(u)),l[u]=m},eT(Pr)),s7=xC(function(l,u,m){u!=null&&typeof u.toString!="function"&&(u=py.call(u)),ht.call(l,u)?l[u].push(m):l[u]=[m]},Ee),a7=Fe(Nf);function Dn(l){return Cr(l)?BR(l):Eb(l)}function Nr(l){return Cr(l)?BR(l,!0):Lz(l)}function o7(l,u){var m={};return u=Ee(u,3),vs(l,function(v,I,V){la(m,u(v,I,V),v)}),m}function l7(l,u){var m={};return u=Ee(u,3),vs(l,function(v,I,V){la(m,I,u(v,I,V))}),m}var c7=Vu(function(l,u,m){Cy(l,u,m)}),f2=Vu(function(l,u,m,v){Cy(l,u,m,v)}),u7=ua(function(l,u){var m={};if(l==null)return m;var v=!1;u=Be(u,function(V){return V=yo(V,l),v||(v=V.length>1),V}),ws(l,Lb(l),m),v&&(m=Ti(m,p|g|_,iB));for(var I=u.length;I--;)Cb(m,u[I]);return m});function h7(l,u){return m2(l,Hy(Ee(u)))}var d7=ua(function(l,u){return l==null?{}:jz(l,u)});function m2(l,u){if(l==null)return{};var m=Be(Lb(l),function(v){return[v]});return u=Ee(u),sC(l,m,function(v,I){return u(v,I[0])})}function f7(l,u,m){u=yo(u,l);var v=-1,I=u.length;for(I||(I=1,l=n);++v<I;){var V=l==null?n:l[bs(u[v])];V===n&&(v=I,V=m),l=da(V)?V.call(l):V}return l}function m7(l,u,m){return l==null?l:Df(l,u,m)}function p7(l,u,m,v){return v=typeof v=="function"?v:n,l==null?l:Df(l,u,m,v)}var p2=IC(Dn),g2=IC(Nr);function g7(l,u,m){var v=Ne(l),I=v||vo(l)||ju(l);if(u=Ee(u,4),m==null){var V=l&&l.constructor;I?m=v?new V:[]:Bt(l)?m=da(V)?Mu(_y(l)):{}:m={}}return(I?fn:vs)(l,function(z,H,$){return u(m,z,H,$)}),m}function y7(l,u){return l==null?!0:Cb(l,u)}function _7(l,u,m){return l==null?l:uC(l,u,Db(m))}function v7(l,u,m,v){return v=typeof v=="function"?v:n,l==null?l:uC(l,u,Db(m),v)}function Fu(l){return l==null?[]:ub(l,Dn(l))}function w7(l){return l==null?[]:ub(l,Nr(l))}function b7(l,u,m){return m===n&&(m=u,u=n),m!==n&&(m=Ai(m),m=m===m?m:0),u!==n&&(u=Ai(u),u=u===u?u:0),Xl(Ai(l),u,m)}function T7(l,u,m){return u=fa(u),m===n?(m=u,u=0):m=fa(m),l=Ai(l),Rz(l,u,m)}function E7(l,u,m){if(m&&typeof m!="boolean"&&fr(l,u,m)&&(u=m=n),m===n&&(typeof u=="boolean"?(m=u,u=n):typeof l=="boolean"&&(m=l,l=n)),l===n&&u===n?(l=0,u=1):(l=fa(l),u===n?(u=l,l=0):u=fa(u)),l>u){var v=l;l=u,u=v}if(m||l%1||u%1){var I=FR();return er(l+I*(u-l+cb("1e-"+((I+"").length-1))),u)}return Sb(l,u)}var x7=Lu(function(l,u,m){return u=u.toLowerCase(),l+(m?y2(u):u)});function y2(l){return Zb(lt(l).toLowerCase())}function _2(l){return l=lt(l),l&&l.replace(nf,mF).replace(Hl,"")}function A7(l,u,m){l=lt(l),u=Wr(u);var v=l.length;m=m===n?v:Xl(Me(m),0,v);var I=m;return m-=u.length,m>=0&&l.slice(m,I)==u}function S7(l){return l=lt(l),l&&Fl.test(l)?l.replace(Nn,pF):l}function I7(l){return l=lt(l),l&&qg.test(l)?l.replace(so,"\\$&"):l}var R7=Lu(function(l,u,m){return l+(m?"-":"")+u.toLowerCase()}),C7=Lu(function(l,u,m){return l+(m?" ":"")+u.toLowerCase()}),N7=bC("toLowerCase");function P7(l,u,m){l=lt(l),u=Me(u);var v=u?Nu(l):0;if(!u||v>=u)return l;var I=(u-v)/2;return My(Ty(I),m)+l+My(by(I),m)}function D7(l,u,m){l=lt(l),u=Me(u);var v=u?Nu(l):0;return u&&v<u?l+My(u-v,m):l}function k7(l,u,m){l=lt(l),u=Me(u);var v=u?Nu(l):0;return u&&v<u?My(u-v,m)+l:l}function O7(l,u,m){return m||u==null?u=0:u&&(u=+u),zF(lt(l).replace(_u,""),u||0)}function M7(l,u,m){return(m?fr(l,u,m):u===n)?u=1:u=Me(u),Ib(lt(l),u)}function V7(){var l=arguments,u=lt(l[0]);return l.length<3?u:u.replace(l[1],l[2])}var L7=Lu(function(l,u,m){return l+(m?"_":"")+u.toLowerCase()});function U7(l,u,m){return m&&typeof m!="number"&&fr(l,u,m)&&(u=m=n),m=m===n?Ve:m>>>0,m?(l=lt(l),l&&(typeof u=="string"||u!=null&&!Qb(u))&&(u=Wr(u),!u&&Cu(l))?_o(Qi(l),0,m):l.split(u,m)):[]}var j7=Lu(function(l,u,m){return l+(m?" ":"")+Zb(u)});function F7(l,u,m){return l=lt(l),m=m==null?0:Xl(Me(m),0,l.length),u=Wr(u),l.slice(m,m+u.length)==u}function z7(l,u,m){var v=D.templateSettings;m&&fr(l,u,m)&&(u=n),l=lt(l),u=Ky({},u,v,RC);var I=Ky({},u.imports,v.imports,RC),V=Dn(I),z=ub(I,V),H,$,Z=0,te=u.interpolate||ms,ae="__p += '",fe=db((u.escape||ms).source+"|"+te.source+"|"+(te===Bg?ef:ms).source+"|"+(u.evaluate||ms).source+"|$","g"),we="//# sourceURL="+(ht.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++lb+"]")+`
`;l.replace(fe,function(Ae,qe,Xe,Qr,mr,Xr){return Xe||(Xe=Qr),ae+=l.slice(Z,Xr).replace(ea,gF),qe&&(H=!0,ae+=`' +
__e(`+qe+`) +
'`),mr&&($=!0,ae+=`';
`+mr+`;
__p += '`),Xe&&(ae+=`' +
((__t = (`+Xe+`)) == null ? '' : __t) +
'`),Z=Xr+Ae.length,Ae}),ae+=`';
`;var xe=ht.call(u,"variable")&&u.variable;if(!xe)ae=`with (obj) {
`+ae+`
}
`;else if(Gg.test(xe))throw new Ce(o);ae=($?ae.replace(yu,""):ae).replace(Fg,"$1").replace(jl,"$1;"),ae="function("+(xe||"obj")+`) {
`+(xe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(H?", __e = _.escape":"")+($?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ae+`return __p
}`;var Le=w2(function(){return nt(V,we+"return "+ae).apply(n,z)});if(Le.source=ae,Yb(Le))throw Le;return Le}function B7(l){return lt(l).toLowerCase()}function q7(l){return lt(l).toUpperCase()}function H7(l,u,m){if(l=lt(l),l&&(m||u===n))return CR(l);if(!l||!(u=Wr(u)))return l;var v=Qi(l),I=Qi(u),V=NR(v,I),z=PR(v,I)+1;return _o(v,V,z).join("")}function G7(l,u,m){if(l=lt(l),l&&(m||u===n))return l.slice(0,kR(l)+1);if(!l||!(u=Wr(u)))return l;var v=Qi(l),I=PR(v,Qi(u))+1;return _o(v,0,I).join("")}function $7(l,u,m){if(l=lt(l),l&&(m||u===n))return l.replace(_u,"");if(!l||!(u=Wr(u)))return l;var v=Qi(l),I=NR(v,Qi(u));return _o(v,I).join("")}function K7(l,u){var m=M,v=U;if(Bt(u)){var I="separator"in u?u.separator:I;m="length"in u?Me(u.length):m,v="omission"in u?Wr(u.omission):v}l=lt(l);var V=l.length;if(Cu(l)){var z=Qi(l);V=z.length}if(m>=V)return l;var H=m-Nu(v);if(H<1)return v;var $=z?_o(z,0,H).join(""):l.slice(0,H);if(I===n)return $+v;if(z&&(H+=$.length-H),Qb(I)){if(l.slice(H).search(I)){var Z,te=$;for(I.global||(I=db(I.source,lt(tf.exec(I))+"g")),I.lastIndex=0;Z=I.exec(te);)var ae=Z.index;$=$.slice(0,ae===n?H:ae)}}else if(l.indexOf(Wr(I),H)!=H){var fe=$.lastIndexOf(I);fe>-1&&($=$.slice(0,fe))}return $+v}function W7(l){return l=lt(l),l&&zg.test(l)?l.replace(Xd,EF):l}var Y7=Lu(function(l,u,m){return l+(m?" ":"")+u.toUpperCase()}),Zb=bC("toUpperCase");function v2(l,u,m){return l=lt(l),u=m?n:u,u===n?_F(l)?SF(l):L(l):l.match(u)||[]}var w2=Fe(function(l,u){try{return Zn(l,n,u)}catch(m){return Yb(m)?m:new Ce(m)}}),Q7=ua(function(l,u){return fn(u,function(m){m=bs(m),la(l,m,Kb(l[m],l))}),l});function X7(l){var u=l==null?0:l.length,m=Ee();return l=u?Be(l,function(v){if(typeof v[1]!="function")throw new wi(a);return[m(v[0]),v[1]]}):[],Fe(function(v){for(var I=-1;++I<u;){var V=l[I];if(Zn(V[0],this,v))return Zn(V[1],this,v)}})}function J7(l){return Ez(Ti(l,p))}function eT(l){return function(){return l}}function Z7(l,u){return l==null||l!==l?u:l}var eH=EC(),tH=EC(!0);function Pr(l){return l}function tT(l){return ZR(typeof l=="function"?l:Ti(l,p))}function nH(l){return tC(Ti(l,p))}function rH(l,u){return nC(l,Ti(u,p))}var iH=Fe(function(l,u){return function(m){return Nf(m,l,u)}}),sH=Fe(function(l,u){return function(m){return Nf(l,m,u)}});function nT(l,u,m){var v=Dn(u),I=Ry(u,v);m==null&&!(Bt(u)&&(I.length||!v.length))&&(m=u,u=l,l=this,I=Ry(u,Dn(u)));var V=!(Bt(m)&&"chain"in m)||!!m.chain,z=da(l);return fn(I,function(H){var $=u[H];l[H]=$,z&&(l.prototype[H]=function(){var Z=this.__chain__;if(V||Z){var te=l(this.__wrapped__),ae=te.__actions__=Rr(this.__actions__);return ae.push({func:$,args:arguments,thisArg:l}),te.__chain__=Z,te}return $.apply(l,Yi([this.value()],arguments))})}),l}function aH(){return $t._===this&&($t._=DF),this}function rT(){}function oH(l){return l=Me(l),Fe(function(u){return rC(u,l)})}var lH=Ob(Be),cH=Ob(wf),uH=Ob(d);function b2(l){return zb(l)?Wt(bs(l)):Fz(l)}function hH(l){return function(u){return l==null?n:Jl(l,u)}}var dH=AC(),fH=AC(!0);function iT(){return[]}function sT(){return!1}function mH(){return{}}function pH(){return""}function gH(){return!0}function yH(l,u){if(l=Me(l),l<1||l>ue)return[];var m=Ve,v=er(l,Ve);u=Ee(u),l-=Ve;for(var I=ho(v,u);++m<l;)u(m);return I}function _H(l){return Ne(l)?Be(l,bs):Yr(l)?[l]:Rr(zC(lt(l)))}function vH(l){var u=++NF;return lt(l)+u}var wH=Oy(function(l,u){return l+u},0),bH=Mb("ceil"),TH=Oy(function(l,u){return l/u},1),EH=Mb("floor");function xH(l){return l&&l.length?Iy(l,Pr,wb):n}function AH(l,u){return l&&l.length?Iy(l,Ee(u,2),wb):n}function SH(l){return ot(l,Pr)}function IH(l,u){return ot(l,Ee(u,2))}function RH(l){return l&&l.length?Iy(l,Pr,xb):n}function CH(l,u){return l&&l.length?Iy(l,Ee(u,2),xb):n}var NH=Oy(function(l,u){return l*u},1),PH=Mb("round"),DH=Oy(function(l,u){return l-u},0);function kH(l){return l&&l.length?vi(l,Pr):0}function OH(l,u){return l&&l.length?vi(l,Ee(u,2)):0}return D.after=nq,D.ary=JC,D.assign=qq,D.assignIn=d2,D.assignInWith=Ky,D.assignWith=Hq,D.at=Gq,D.before=ZC,D.bind=Kb,D.bindAll=Q7,D.bindKey=e2,D.castArray=mq,D.chain=YC,D.chunk=EB,D.compact=xB,D.concat=AB,D.cond=X7,D.conforms=J7,D.constant=eT,D.countBy=k8,D.create=$q,D.curry=t2,D.curryRight=n2,D.debounce=r2,D.defaults=Kq,D.defaultsDeep=Wq,D.defer=rq,D.delay=iq,D.difference=SB,D.differenceBy=IB,D.differenceWith=RB,D.drop=CB,D.dropRight=NB,D.dropRightWhile=PB,D.dropWhile=DB,D.fill=kB,D.filter=M8,D.flatMap=U8,D.flatMapDeep=j8,D.flatMapDepth=F8,D.flatten=GC,D.flattenDeep=OB,D.flattenDepth=MB,D.flip=sq,D.flow=eH,D.flowRight=tH,D.fromPairs=VB,D.functions=t7,D.functionsIn=n7,D.groupBy=z8,D.initial=UB,D.intersection=jB,D.intersectionBy=FB,D.intersectionWith=zB,D.invert=i7,D.invertBy=s7,D.invokeMap=q8,D.iteratee=tT,D.keyBy=H8,D.keys=Dn,D.keysIn=Nr,D.map=zy,D.mapKeys=o7,D.mapValues=l7,D.matches=nH,D.matchesProperty=rH,D.memoize=qy,D.merge=c7,D.mergeWith=f2,D.method=iH,D.methodOf=sH,D.mixin=nT,D.negate=Hy,D.nthArg=oH,D.omit=u7,D.omitBy=h7,D.once=aq,D.orderBy=G8,D.over=lH,D.overArgs=oq,D.overEvery=cH,D.overSome=uH,D.partial=Wb,D.partialRight=i2,D.partition=$8,D.pick=d7,D.pickBy=m2,D.property=b2,D.propertyOf=hH,D.pull=GB,D.pullAll=KC,D.pullAllBy=$B,D.pullAllWith=KB,D.pullAt=WB,D.range=dH,D.rangeRight=fH,D.rearg=lq,D.reject=Y8,D.remove=YB,D.rest=cq,D.reverse=Gb,D.sampleSize=X8,D.set=m7,D.setWith=p7,D.shuffle=J8,D.slice=QB,D.sortBy=tq,D.sortedUniq=r8,D.sortedUniqBy=i8,D.split=U7,D.spread=uq,D.tail=s8,D.take=a8,D.takeRight=o8,D.takeRightWhile=l8,D.takeWhile=c8,D.tap=x8,D.throttle=hq,D.thru=Fy,D.toArray=c2,D.toPairs=p2,D.toPairsIn=g2,D.toPath=_H,D.toPlainObject=h2,D.transform=g7,D.unary=dq,D.union=u8,D.unionBy=h8,D.unionWith=d8,D.uniq=f8,D.uniqBy=m8,D.uniqWith=p8,D.unset=y7,D.unzip=$b,D.unzipWith=WC,D.update=_7,D.updateWith=v7,D.values=Fu,D.valuesIn=w7,D.without=g8,D.words=v2,D.wrap=fq,D.xor=y8,D.xorBy=_8,D.xorWith=v8,D.zip=w8,D.zipObject=b8,D.zipObjectDeep=T8,D.zipWith=E8,D.entries=p2,D.entriesIn=g2,D.extend=d2,D.extendWith=Ky,nT(D,D),D.add=wH,D.attempt=w2,D.camelCase=x7,D.capitalize=y2,D.ceil=bH,D.clamp=b7,D.clone=pq,D.cloneDeep=yq,D.cloneDeepWith=_q,D.cloneWith=gq,D.conformsTo=vq,D.deburr=_2,D.defaultTo=Z7,D.divide=TH,D.endsWith=A7,D.eq=Ji,D.escape=S7,D.escapeRegExp=I7,D.every=O8,D.find=V8,D.findIndex=qC,D.findKey=Yq,D.findLast=L8,D.findLastIndex=HC,D.findLastKey=Qq,D.floor=EH,D.forEach=QC,D.forEachRight=XC,D.forIn=Xq,D.forInRight=Jq,D.forOwn=Zq,D.forOwnRight=e7,D.get=Xb,D.gt=wq,D.gte=bq,D.has=r7,D.hasIn=Jb,D.head=$C,D.identity=Pr,D.includes=B8,D.indexOf=LB,D.inRange=T7,D.invoke=a7,D.isArguments=tc,D.isArray=Ne,D.isArrayBuffer=Tq,D.isArrayLike=Cr,D.isArrayLikeObject=sn,D.isBoolean=Eq,D.isBuffer=vo,D.isDate=xq,D.isElement=Aq,D.isEmpty=Sq,D.isEqual=Iq,D.isEqualWith=Rq,D.isError=Yb,D.isFinite=Cq,D.isFunction=da,D.isInteger=s2,D.isLength=Gy,D.isMap=a2,D.isMatch=Nq,D.isMatchWith=Pq,D.isNaN=Dq,D.isNative=kq,D.isNil=Mq,D.isNull=Oq,D.isNumber=o2,D.isObject=Bt,D.isObjectLike=Yt,D.isPlainObject=Vf,D.isRegExp=Qb,D.isSafeInteger=Vq,D.isSet=l2,D.isString=$y,D.isSymbol=Yr,D.isTypedArray=ju,D.isUndefined=Lq,D.isWeakMap=Uq,D.isWeakSet=jq,D.join=BB,D.kebabCase=R7,D.last=xi,D.lastIndexOf=qB,D.lowerCase=C7,D.lowerFirst=N7,D.lt=Fq,D.lte=zq,D.max=xH,D.maxBy=AH,D.mean=SH,D.meanBy=IH,D.min=RH,D.minBy=CH,D.stubArray=iT,D.stubFalse=sT,D.stubObject=mH,D.stubString=pH,D.stubTrue=gH,D.multiply=NH,D.nth=HB,D.noConflict=aH,D.noop=rT,D.now=By,D.pad=P7,D.padEnd=D7,D.padStart=k7,D.parseInt=O7,D.random=E7,D.reduce=K8,D.reduceRight=W8,D.repeat=M7,D.replace=V7,D.result=f7,D.round=PH,D.runInContext=G,D.sample=Q8,D.size=Z8,D.snakeCase=L7,D.some=eq,D.sortedIndex=XB,D.sortedIndexBy=JB,D.sortedIndexOf=ZB,D.sortedLastIndex=e8,D.sortedLastIndexBy=t8,D.sortedLastIndexOf=n8,D.startCase=j7,D.startsWith=F7,D.subtract=DH,D.sum=kH,D.sumBy=OH,D.template=z7,D.times=yH,D.toFinite=fa,D.toInteger=Me,D.toLength=u2,D.toLower=B7,D.toNumber=Ai,D.toSafeInteger=Bq,D.toString=lt,D.toUpper=q7,D.trim=H7,D.trimEnd=G7,D.trimStart=$7,D.truncate=K7,D.unescape=W7,D.uniqueId=vH,D.upperCase=Y7,D.upperFirst=Zb,D.each=QC,D.eachRight=XC,D.first=$C,nT(D,function(){var l={};return vs(D,function(u,m){ht.call(D.prototype,m)||(l[m]=u)}),l}(),{chain:!1}),D.VERSION=r,fn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){D[l].placeholder=D}),fn(["drop","take"],function(l,u){Ke.prototype[l]=function(m){m=m===n?1:xn(Me(m),0);var v=this.__filtered__&&!u?new Ke(this):this.clone();return v.__filtered__?v.__takeCount__=er(m,v.__takeCount__):v.__views__.push({size:er(m,Ve),type:l+(v.__dir__<0?"Right":"")}),v},Ke.prototype[l+"Right"]=function(m){return this.reverse()[l](m).reverse()}}),fn(["filter","map","takeWhile"],function(l,u){var m=u+1,v=m==ne||m==ie;Ke.prototype[l]=function(I){var V=this.clone();return V.__iteratees__.push({iteratee:Ee(I,3),type:m}),V.__filtered__=V.__filtered__||v,V}}),fn(["head","last"],function(l,u){var m="take"+(u?"Right":"");Ke.prototype[l]=function(){return this[m](1).value()[0]}}),fn(["initial","tail"],function(l,u){var m="drop"+(u?"":"Right");Ke.prototype[l]=function(){return this.__filtered__?new Ke(this):this[m](1)}}),Ke.prototype.compact=function(){return this.filter(Pr)},Ke.prototype.find=function(l){return this.filter(l).head()},Ke.prototype.findLast=function(l){return this.reverse().find(l)},Ke.prototype.invokeMap=Fe(function(l,u){return typeof l=="function"?new Ke(this):this.map(function(m){return Nf(m,l,u)})}),Ke.prototype.reject=function(l){return this.filter(Hy(Ee(l)))},Ke.prototype.slice=function(l,u){l=Me(l);var m=this;return m.__filtered__&&(l>0||u<0)?new Ke(m):(l<0?m=m.takeRight(-l):l&&(m=m.drop(l)),u!==n&&(u=Me(u),m=u<0?m.dropRight(-u):m.take(u-l)),m)},Ke.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},Ke.prototype.toArray=function(){return this.take(Ve)},vs(Ke.prototype,function(l,u){var m=/^(?:filter|find|map|reject)|While$/.test(u),v=/^(?:head|last)$/.test(u),I=D[v?"take"+(u=="last"?"Right":""):u],V=v||/^find/.test(u);I&&(D.prototype[u]=function(){var z=this.__wrapped__,H=v?[1]:arguments,$=z instanceof Ke,Z=H[0],te=$||Ne(z),ae=function(qe){var Xe=I.apply(D,Yi([qe],H));return v&&fe?Xe[0]:Xe};te&&m&&typeof Z=="function"&&Z.length!=1&&($=te=!1);var fe=this.__chain__,we=!!this.__actions__.length,xe=V&&!fe,Le=$&&!we;if(!V&&te){z=Le?z:new Ke(this);var Ae=l.apply(z,H);return Ae.__actions__.push({func:Fy,args:[ae],thisArg:n}),new bi(Ae,fe)}return xe&&Le?l.apply(this,H):(Ae=this.thru(ae),xe?v?Ae.value()[0]:Ae.value():Ae)})}),fn(["pop","push","shift","sort","splice","unshift"],function(l){var u=dy[l],m=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",v=/^(?:pop|shift)$/.test(l);D.prototype[l]=function(){var I=arguments;if(v&&!this.__chain__){var V=this.value();return u.apply(Ne(V)?V:[],I)}return this[m](function(z){return u.apply(Ne(z)?z:[],I)})}}),vs(Ke.prototype,function(l,u){var m=D[u];if(m){var v=m.name+"";ht.call(Ou,v)||(Ou[v]=[]),Ou[v].push({name:u,func:m})}}),Ou[ky(n,b).name]=[{name:"wrapper",func:n}],Ke.prototype.clone=WF,Ke.prototype.reverse=YF,Ke.prototype.value=QF,D.prototype.at=A8,D.prototype.chain=S8,D.prototype.commit=I8,D.prototype.next=R8,D.prototype.plant=N8,D.prototype.reverse=P8,D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=D8,D.prototype.first=D.prototype.head,Ef&&(D.prototype[Ef]=C8),D},Pu=IF();_i?((_i.exports=Pu)._=Pu,xu._=Pu):$t._=Pu}).call(Lf)})(Cv,Cv.exports);var jfe=Cv.exports;const iF=P.createContext(void 0),sF=()=>{const t=P.useContext(iF);if(t===void 0)throw new Error("useCart must be used within a CartProvider");return t},Ffe=({children:t})=>{const[e,n]=P.useState([]),[r,i]=P.useState(!1),[s,a]=P.useState(null),[o,c]=P.useState(!0),[h,f]=P.useState([]),{currentUser:p}=Xs(),{products:g,isLoading:_}=Lfe();P.useEffect(()=>{if(s){const ne=setTimeout(()=>a(null),4e3);return()=>clearTimeout(ne)}},[s]);const R=P.useCallback(ne=>{a(ne)},[]);P.useEffect(()=>{p?(async()=>{var me;if(!(!p||_)){c(!0);try{const se=await Rt.collection("users").doc(p.uid).get();if(se.exists){const Te=(((me=se.data())==null?void 0:me.cart)||[]).map(_e=>{const Ve=g.find(Tn=>Tn.id===_e.productId);if(!Ve)return null;const St=Ve.sizes.find(Tn=>Tn.name===_e.sizeName);if(!St)return null;const hr=_e.customizations?JSON.stringify(_e.customizations):"";return{id:`${Ve.id}-${St.name}-${hr}`,product:Ve,selectedSize:St,quantity:_e.quantity,customizations:_e.customizations}}).filter(_e=>_e!==null);n(Te)}}catch(ie){console.error("Error fetching cart from Firestore:",ie),R("Couldn't load your cart.")}finally{c(!1)}}})():(n([]),c(!1))},[p,g,_,R]);const N=P.useMemo(()=>jfe.debounce(async(ne,me)=>{try{const ie=Rt.collection("users").doc(me),se=ne.map(ue=>{const Te={};return ue.customizations&&(ue.customizations.sugarLevel!==void 0&&(Te.sugarLevel=ue.customizations.sugarLevel),ue.customizations.iceLevel!==void 0&&(Te.iceLevel=ue.customizations.iceLevel),ue.customizations.toppings!==void 0&&(Te.toppings=ue.customizations.toppings)),{productId:ue.product.id,sizeName:ue.selectedSize.name,quantity:ue.quantity,...Object.keys(Te).length>0&&{customizations:Te}}});await ie.set({cart:se},{merge:!0})}catch(ie){console.error("Error updating Firestore cart:",ie)}},1e3),[]),A=P.useCallback(ne=>{p&&N(ne,p.uid)},[p,N]),b=P.useMemo(()=>e.reduce((ne,me)=>ne+me.quantity,0),[e]),T=()=>i(!0),E=()=>i(!1),O=(ne,me,ie,se=1)=>{const ue=ie?JSON.stringify(ie):"",Te=`${ne.id}-${me.name}-${ue}`;let _e;e.find(St=>St.id===Te)?_e=e.map(St=>St.id===Te?{...St,quantity:Math.min(St.quantity+se,ne.stock)}:St):_e=[...e,{id:Te,product:ne,selectedSize:me,quantity:Math.min(se,ne.stock),customizations:ie}],n(_e),A(_e),R(`${ne.name} (${me.name}) added to cart!`),T()},j=ne=>{if(!ne||ne.length===0)return;let me=[...e],ie=0;ne.forEach(se=>{const ue=se.customizations?JSON.stringify(se.customizations):"",Te=`${se.product.id}-${se.selectedSize.name}-${ue}`,_e=me.findIndex(Ve=>Ve.id===Te);if(_e>-1){const Ve=me[_e],St=Ve.quantity+se.quantity;me[_e]={...Ve,quantity:Math.min(St,se.product.stock)}}else me.push({id:Te,product:se.product,selectedSize:se.selectedSize,quantity:Math.min(se.quantity,se.product.stock),customizations:se.customizations});ie+=se.quantity}),n(me),A(me),R(`${ie} item(s) added to your cart!`),T()},q=(ne,me)=>{let ie;me<1?ie=e.filter(se=>se.id!==ne):ie=e.map(se=>se.id===ne?{...se,quantity:Math.min(me,se.product.stock)}:se),n(ie),A(ie)},S=ne=>{const me=e.find(se=>se.id===ne),ie=e.filter(se=>se.id!==ne);n(ie),A(ie),me&&R(`${me.product.name} (${me.selectedSize.name}) removed from cart.`)},C=(ne,me,ie,se,ue=1)=>{const Te=e.filter(Mt=>Mt.id!==ne),_e=se?JSON.stringify(se):"",Ve=`${me.id}-${ie.name}-${_e}`,St=Te.find(Mt=>Mt.id===Ve);let hr;St?hr=Te.map(Mt=>Mt.id===Ve?{...Mt,quantity:Math.min(Mt.quantity+ue,me.stock)}:Mt):hr=[...Te,{id:Ve,product:me,selectedSize:ie,quantity:Math.min(ue,me.stock),customizations:se}],n(hr),A(hr),R(`${me.name} (${ie.name}) updated!`)},k=()=>{n([]),f([]),A([])},M=ne=>{f(me=>me.includes(ne)?me.filter(ie=>ie!==ne):[...me,ne])},U=()=>{f(e.map(ne=>ne.id))},B=()=>{f([])};P.useEffect(()=>{const ne=e.map(me=>me.id);f(me=>{const ie=me.filter(ue=>ne.includes(ue)),se=ne.filter(ue=>!me.includes(ue));return[...ie,...se]})},[e]);const F={cartItems:e,isCartOpen:r,toastMessage:s,totalCartItems:b,isCartLoading:o,selectedItemIds:h,addToCart:O,addMultipleToCart:j,updateQuantity:q,updateCartItem:C,removeFromCart:S,openCart:T,closeCart:E,showToast:R,toggleItemSelection:M,selectAllItems:U,deselectAllItems:B,clearCart:k};return y.jsx(iF.Provider,{value:F,children:t})},zfe=[{href:"/",label:"Home"},{href:"/about",label:"About"},{href:"/menu",label:"Menu"},{href:"/contact",label:"Contact"}],Bfe=[{href:"/menu",label:"Menu"},{href:"/queue",label:"Queue"},{href:"/rewards",label:"Rewards"}],aF=[{href:"/profile",label:"My Profile",Icon:k1},{href:"/flavor-profile",label:"My Flavor Profile",Icon:P5},{href:"/rewards",label:"My Rewards",Icon:DY},{href:"/about",label:"About",Icon:I5},{href:"/contact",label:"Contact",Icon:QA}],qfe=()=>{const[t,e]=P.useState(!1),[n,r]=P.useState(!1),i=P.useRef(null),[s,a]=P.useState(!1),[o,c]=P.useState("login"),[h,f]=P.useState(!1),[p,g]=P.useState(""),[_,R]=P.useState(""),[N,A]=P.useState(!1),{currentUser:b,logout:T}=Xs(),{totalCartItems:E,openCart:O}=sF(),j=su(),q=qi(),[S]=nY(),C=q.pathname==="/auth/verify-email",k=sessionStorage.getItem("requires2FA")==="true",M=b&&!C&&!k&&!s&&q.pathname!=="/",U=M?Bfe:zfe,B=()=>e(!1),F=_e=>{c(_e),a(!0),B()};P.useEffect(()=>{const _e=S.get("auth");_e==="login"?(c("login"),a(!0)):_e==="register"&&(c("register"),a(!0))},[S]);const ne=(_e,Ve,St)=>{a(!1),g(_e),R(Ve),f(!0)},me=_e=>{a(!1),f(!1),sessionStorage.removeItem("requires2FA");const Ve=_e||(b==null?void 0:b.role);Ve===vn.ADMIN?j("/admin"):Ve===vn.EMPLOYEE?j("/employee"):j("/menu")},ie=()=>{f(!1),sessionStorage.removeItem("requires2FA"),T()},se=()=>{f(!1),sessionStorage.removeItem("requires2FA"),T(),c("login"),a(!0)};return P.useEffect(()=>{const _e=Ve=>{i.current&&!i.current.contains(Ve.target)&&r(!1)};return document.addEventListener("mousedown",_e),()=>document.removeEventListener("mousedown",_e)},[]),P.useEffect(()=>{const _e=()=>{window.innerWidth>=768&&e(!1)};return window.addEventListener("resize",_e),()=>window.removeEventListener("resize",_e)},[]),P.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[t]),{isMobileMenuOpen:t,isUserMenuOpen:n,setIsUserMenuOpen:r,userMenuRef:i,isAuthModalOpen:s,setIsAuthModalOpen:a,authModalView:o,isVerifyModalOpen:h,setIsVerifyModalOpen:f,verifyEmail:p,verifyUserId:_,isSpinWheelOpen:N,setIsSpinWheelOpen:A,currentUser:b,totalCartItems:E,openCart:O,showLoggedInState:M,navLinks:U,closeMobileMenu:B,toggleMobileMenu:()=>e(!t),openAuthModal:F,handleVerificationNeeded:ne,handleVerificationSuccess:me,handleVerificationClose:ie,handleBackToLogin:se,handleLogout:async()=>{await T(),B(),r(!1),j("/")}}},Hfe=({links:t})=>y.jsx("nav",{className:"hidden items-center justify-center space-x-8 md:flex md:justify-self-center",children:t.map(e=>y.jsx(is,{to:e.href,className:({isActive:n})=>`relative text-sm font-normal uppercase transition-colors hover:text-primary-600 ${n?"text-primary-600":"text-gray-700"} after:absolute after:bottom-0 after:left-0 after:h-[1px] after:w-full after:origin-center after:transform after:bg-primary-600 after:transition-transform after:duration-300 ${n?"after:scale-x-100":"after:scale-x-0"} hover:after:scale-x-100`,children:e.label},e.label))}),oF=({isAuthenticated:t,currentUser:e,isMobile:n=!1,isUserMenuOpen:r,setIsUserMenuOpen:i,onLoginClick:s,onRegisterClick:a,onLogoutClick:o,userMenuRef:c})=>{var g,_;const h="rounded-full text-sm font-semibold transition-colors",f="block w-full text-center py-3 text-base",p="px-6 py-2";if(t&&e){const R=`${((g=e.firstName)==null?void 0:g.charAt(0))||""}${((_=e.lastName)==null?void 0:_.charAt(0))||""}`.toUpperCase();return y.jsxs("div",{className:`relative ${n?"w-full":""}`,ref:c,children:[y.jsx("button",{onClick:()=>i(!r),className:`flex items-center justify-center transition-colors focus:outline-none ${n?"w-full gap-3 rounded-xl border border-gray-200 p-3 hover:bg-gray-50":`h-10 w-10 rounded-full ${e.photoURL?"ring-2 ring-primary-100":"bg-primary-600 text-white hover:bg-primary-700"} shadow-sm overflow-hidden`}`,"aria-label":"User menu","aria-haspopup":"true","aria-expanded":r,children:n?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:`flex h-10 w-10 items-center justify-center rounded-full ${e.photoURL?"":"bg-primary-600 text-white"} overflow-hidden`,children:e.photoURL?y.jsx("img",{src:e.photoURL,alt:"Profile",className:"h-full w-full object-cover"}):y.jsx("span",{className:"text-sm font-bold",children:R})}),y.jsxs("div",{className:"flex flex-col items-start",children:[y.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[e.firstName," ",e.lastName]}),y.jsx("span",{className:"text-xs text-gray-500",children:e.email})]}),y.jsx(_Y,{className:`ml-auto h-4 w-4 text-gray-400 transition-transform ${r?"rotate-180":""}`})]}):e.photoURL?y.jsx("img",{src:e.photoURL,alt:"Profile",className:"h-full w-full object-cover"}):y.jsx("span",{className:"text-sm font-bold",children:R})}),r&&!n&&y.jsx("div",{className:"absolute right-0 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none animate-fade-in-up",children:y.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[y.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[y.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),y.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.email})]}),aF.map(N=>y.jsxs(is,{to:N.href,onClick:()=>i(!1),className:({isActive:A})=>`flex items-center gap-3 px-4 py-2 text-sm transition-colors hover:bg-gray-100 ${A?"text-primary-600 font-semibold":"text-gray-700"}`,role:"menuitem",children:[y.jsx(N.Icon,{className:"h-4 w-4"}),N.label]},N.label)),(e.role===vn.EMPLOYEE||e.role===vn.ADMIN)&&y.jsxs(y.Fragment,{children:[y.jsx("hr",{className:"my-1"}),y.jsxs(is,{to:"/employee",onClick:()=>i(!1),className:"flex items-center gap-3 px-4 py-2 text-sm font-semibold text-blue-700 transition-colors hover:bg-blue-50",role:"menuitem",children:[y.jsx(B0,{className:"h-4 w-4"}),"Employee Portal"]})]}),e.role===vn.ADMIN&&y.jsxs(is,{to:"/admin",onClick:()=>i(!1),className:"flex items-center gap-3 px-4 py-2 text-sm font-semibold text-yellow-700 transition-colors hover:bg-yellow-50",role:"menuitem",children:[y.jsx(B0,{className:"h-4 w-4"}),"Admin Dashboard"]}),y.jsx("hr",{className:"my-1"}),y.jsxs("button",{onClick:o,className:"flex w-full items-center gap-3 px-4 py-2 text-left text-sm text-red-600 transition-colors hover:bg-red-50",role:"menuitem",children:[y.jsx(R5,{className:"h-4 w-4"}),"Logout"]})]})})]})}return y.jsxs("div",{className:`flex items-center ${n?"flex-col space-y-3":"gap-4"}`,children:[y.jsx("button",{onClick:s,className:`${h} border border-primary-600 text-primary-600 hover:bg-primary-50 ${n?f:p}`,children:"Login"}),y.jsx("button",{onClick:a,className:`${h} bg-primary-600 text-white shadow-sm hover:bg-primary-700 ${n?f:p}`,children:"Sign Up"})]})},ZO=({totalItems:t,onClick:e})=>y.jsxs("button",{onClick:e,className:"relative rounded-full p-2 text-gray-700 transition hover:bg-gray-100","aria-label":`Open cart with ${t} items`,children:[y.jsx(cQ,{className:"h-6 w-6"}),t>0&&y.jsx("span",{className:"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white","aria-hidden":"true",children:t})]}),Gfe=({isOpen:t,onClose:e,currentUser:n,isAuthenticated:r,navLinks:i,onLoginClick:s,onRegisterClick:a,onLogoutClick:o})=>y.jsxs("div",{className:`fixed inset-0 z-[60] md:hidden ${t?"pointer-events-auto":"pointer-events-none"}`,children:[y.jsx("div",{className:`absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ${t?"opacity-100":"opacity-0"}`,onClick:e,"aria-hidden":"true"}),y.jsxs("div",{className:`absolute top-0 right-0 h-full w-4/5 max-w-sm transform bg-white shadow-2xl transition-transform duration-300 ease-out ${t?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"mobile-menu-title",children:[y.jsxs("div",{className:"flex items-center justify-between border-b p-4",children:[y.jsxs(is,{to:n?"/menu":"/",className:"flex items-center gap-2",onClick:e,children:[y.jsx(Ws,{className:"h-7 w-7 text-primary-600"}),y.jsx("span",{id:"mobile-menu-title",className:"text-xl font-bold text-primary-600",children:"Rush Coffee"})]}),y.jsx("button",{onClick:e,className:"rounded-full p-2 text-gray-500 transition hover:bg-gray-100 hover:text-gray-700","aria-label":"Close menu",children:y.jsx(ll,{className:"h-6 w-6"})})]}),y.jsxs("nav",{className:"flex flex-1 flex-col gap-2 overflow-y-auto p-4",children:[i.map(c=>y.jsx(is,{to:c.href,onClick:e,className:({isActive:h})=>`rounded-xl px-4 py-3 text-lg font-medium transition-all ${h?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:c.label},c.label)),r&&n&&y.jsxs("div",{className:"mt-4 border-t pt-4",children:[y.jsx("p",{className:"mb-2 px-4 text-xs font-semibold uppercase tracking-wider text-gray-400",children:"Account"}),aF.map(c=>y.jsxs(is,{to:c.href,onClick:e,className:({isActive:h})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${h?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[y.jsx(c.Icon,{className:"h-5 w-5"}),c.label]},c.label)),(n.role===vn.EMPLOYEE||n.role===vn.ADMIN)&&y.jsxs(is,{to:"/employee",onClick:e,className:({isActive:c})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${c?"bg-blue-50 text-blue-800":"text-blue-700 hover:bg-blue-50"}`,children:[y.jsx(B0,{className:"h-5 w-5"}),"Employee Portal"]}),n.role===vn.ADMIN&&y.jsxs(is,{to:"/admin",onClick:e,className:({isActive:c})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-base font-medium transition-all ${c?"bg-yellow-50 text-yellow-800":"text-yellow-700 hover:bg-yellow-50"}`,children:[y.jsx(B0,{className:"h-5 w-5"}),"Admin Dashboard"]})]})]}),y.jsx("div",{className:"border-t p-4",children:r?y.jsxs("button",{onClick:o,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-red-50 px-6 py-3 text-base font-semibold text-red-600 transition-colors hover:bg-red-100",children:[y.jsx(R5,{className:"h-5 w-5"}),"Logout"]}):y.jsx(oF,{isAuthenticated:!1,currentUser:null,isMobile:!0,isUserMenuOpen:!1,setIsUserMenuOpen:()=>{},onLoginClick:s,onRegisterClick:a,onLogoutClick:o})})]})]}),$fe=()=>{const{isMobileMenuOpen:t,isUserMenuOpen:e,setIsUserMenuOpen:n,userMenuRef:r,isAuthModalOpen:i,setIsAuthModalOpen:s,authModalView:a,isVerifyModalOpen:o,verifyEmail:c,verifyUserId:h,isSpinWheelOpen:f,setIsSpinWheelOpen:p,currentUser:g,totalCartItems:_,openCart:R,showLoggedInState:N,navLinks:A,closeMobileMenu:b,toggleMobileMenu:T,openAuthModal:E,handleVerificationNeeded:O,handleVerificationSuccess:j,handleVerificationClose:q,handleBackToLogin:S,handleLogout:C}=qfe();return y.jsxs(y.Fragment,{children:[y.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-gray-200/80 bg-white/95 shadow-md backdrop-blur-sm",children:y.jsxs("div",{className:"container mx-auto flex h-16 items-center justify-between px-4 sm:h-20 sm:px-6 lg:px-8 md:grid md:grid-cols-3",children:[y.jsxs(is,{to:g?"/menu":"/",className:"flex items-center gap-2 flex-shrink-0 md:justify-self-start",children:[y.jsx(Ws,{className:"h-7 w-7 text-primary-600 sm:h-8 sm:w-8"}),y.jsx("span",{className:"text-lg font-bold text-primary-600 whitespace-nowrap sm:text-2xl",children:"Rush Coffee"})]}),y.jsx(Hfe,{links:A}),y.jsxs("div",{className:"hidden items-center justify-end gap-4 md:flex md:justify-self-end",children:[y.jsx(oF,{isAuthenticated:!!(N&&g),currentUser:g,isUserMenuOpen:e,setIsUserMenuOpen:n,onLoginClick:()=>E("login"),onRegisterClick:()=>E("register"),onLogoutClick:C,userMenuRef:r}),N&&y.jsxs(y.Fragment,{children:[y.jsxs("button",{onClick:()=>p(!0),className:"relative flex items-center justify-center h-10 w-10 rounded-full bg-gradient-to-r from-yellow-500 to-red-600 text-white hover:from-yellow-600 hover:to-red-700 transition-all hover:scale-110 shadow-lg","aria-label":"Spin Wheel",title:"Spin to win!",children:[y.jsx(q0,{className:"h-5 w-5"}),y.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-blue-500 rounded-full animate-pulse"})]}),y.jsx(ZO,{totalItems:_,onClick:R})]})]}),y.jsxs("div",{className:"flex items-center justify-end gap-2 md:hidden",children:[N&&y.jsxs(y.Fragment,{children:[y.jsxs("button",{onClick:()=>p(!0),className:"relative flex items-center justify-center h-10 w-10 rounded-full bg-gradient-to-r from-yellow-500 to-red-600 text-white hover:from-yellow-600 hover:to-red-700 transition-all hover:scale-110 shadow-lg","aria-label":"Spin Wheel",children:[y.jsx(q0,{className:"h-5 w-5"}),y.jsx("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-blue-500 rounded-full animate-pulse"})]}),y.jsx(ZO,{totalItems:_,onClick:R})]}),y.jsx("button",{onClick:T,className:"rounded-md p-2 text-gray-700 transition hover:bg-gray-100","aria-label":"Toggle menu","aria-expanded":t,children:y.jsx(GY,{className:"h-6 w-6"})})]})]})}),y.jsx(Gfe,{isOpen:t,onClose:b,currentUser:g,isAuthenticated:!!(N&&g),navLinks:A,onLoginClick:()=>E("login"),onRegisterClick:()=>E("register"),onLogoutClick:C}),y.jsx(Qle,{isOpen:i,onClose:()=>s(!1),initialView:a,onVerificationNeeded:O,onAuthSuccess:j}),y.jsx(Jle,{isOpen:o,onClose:q,email:c,userId:h,onSuccess:()=>j(),onBackToLogin:S}),y.jsx(Vfe,{isOpen:f,onClose:()=>p(!1)})]})},Kfe=()=>{const{currentUser:t}=Xs();let e="/";return t&&(t.role===vn.ADMIN?e="/admin":t.role===vn.EMPLOYEE?e="/employee":e="/menu"),y.jsxs("footer",{className:"relative bg-primary-900 text-primary-100",children:[y.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5"}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),y.jsxs("div",{className:"container relative z-10 mx-auto grid grid-cols-2 gap-8 px-6 py-12 md:grid-cols-2 lg:grid-cols-4",children:[y.jsxs("div",{className:"col-span-2 space-y-4 md:col-span-1 lg:col-span-1",children:[y.jsxs(Ri,{to:"/",className:"flex items-center gap-2",children:[y.jsx(Ws,{className:"h-8 w-8 text-primary-500"}),y.jsx("span",{className:"font-display text-2xl font-bold text-white",children:"Rush Coffee"})]}),y.jsx("p",{className:"font-medium text-white",children:"Premium coffee, no waiting."}),y.jsx("p",{className:"text-sm leading-relaxed text-primary-200/80",children:"Join the digital queue and get your coffee fix faster than ever. Experience the future of coffee ordering."})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Quick Links"}),y.jsxs("ul",{className:"space-y-3",children:[y.jsx("li",{children:y.jsx(Ri,{to:e,className:"transition-colors hover:text-primary-400 hover:underline",children:"Home"})}),y.jsx("li",{children:y.jsx(Ri,{to:"/about",className:"transition-colors hover:text-primary-400 hover:underline",children:"About Us"})}),y.jsx("li",{children:y.jsx(Ri,{to:"/menu",className:"transition-colors hover:text-primary-400 hover:underline",children:"Menu"})}),y.jsx("li",{children:y.jsx(Ri,{to:"/faq",className:"transition-colors hover:text-primary-400 hover:underline",children:"FAQ"})}),y.jsx("li",{children:y.jsx(Ri,{to:"/contact",className:"transition-colors hover:text-primary-400 hover:underline",children:"Contact"})})]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Legal"}),y.jsxs("ul",{className:"space-y-3",children:[y.jsx("li",{children:y.jsx(Ri,{to:"/terms",className:"transition-colors hover:text-primary-400 hover:underline",children:"Terms of Service"})}),y.jsx("li",{children:y.jsx(Ri,{to:"/privacy",className:"transition-colors hover:text-primary-400 hover:underline",children:"Privacy Policy"})}),y.jsx("li",{children:y.jsx(Ri,{to:"/cookies",className:"transition-colors hover:text-primary-400 hover:underline",children:"Cookie Policy"})})]})]}),y.jsxs("div",{className:"col-span-2 md:col-span-1 lg:col-span-1",children:[y.jsx("h3",{className:"mb-6 font-display text-lg font-bold text-white",children:"Contact & Connect"}),y.jsx("address",{className:"not-italic",children:y.jsxs("ul",{className:"space-y-4",children:[y.jsxs("li",{className:"flex items-start gap-3",children:[y.jsx(qY,{className:"mt-1 h-5 w-5 flex-shrink-0 text-primary-500"}),y.jsx("span",{children:"11 Visayan Ave. St. Galas, Quezon City, Philippines"})]}),y.jsxs("li",{className:"flex items-center gap-3",children:[y.jsx(QA,{className:"h-5 w-5 flex-shrink-0 text-primary-500"}),y.jsx("a",{href:"tel:09304641022",className:"transition-colors hover:text-white",children:"0930 464 1022"})]}),y.jsxs("li",{className:"flex items-center gap-3",children:[y.jsx(bp,{className:"h-5 w-5 flex-shrink-0 text-primary-500"}),y.jsx("a",{href:"mailto:hello@rushcoffee.ph",className:"transition-colors hover:text-white",children:"hello@rushcoffee.ph"})]})]})}),y.jsxs("div",{className:"mt-8 flex gap-4",children:[y.jsx("a",{href:"https://www.facebook.com/profile.php?id=61551613276320",target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",className:"rounded-full bg-white/5 p-2 transition-colors hover:bg-primary-600 hover:text-white",children:y.jsx(NY,{className:"h-5 w-5"})}),y.jsx("a",{href:"https://www.instagram.com/Rush_Coffee2023/",target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",className:"rounded-full bg-white/5 p-2 transition-colors hover:bg-primary-600 hover:text-white",children:y.jsx(LY,{className:"h-5 w-5"})})]})]})]}),y.jsx("div",{className:"relative z-10 border-t border-white/10 bg-black/20",children:y.jsxs("div",{className:"container mx-auto flex flex-col items-center justify-between gap-4 px-6 py-6 text-center text-sm text-primary-300 sm:flex-row",children:[y.jsx("p",{children:" 2023 Rush Coffee. All rights reserved."}),y.jsxs("p",{className:"flex items-center gap-1",children:["Made with ",y.jsx("span",{className:"text-red-500",children:""})," and ",y.jsx("span",{className:"text-amber-500",children:""})]})]})})]})},lF=P.createContext(void 0),cF=()=>{const t=P.useContext(lF);if(t===void 0)throw new Error("useNotification must be used within a NotificationProvider");return t},Wfe=({children:t})=>{const[e,n]=P.useState({message:"",type:"info",isVisible:!1}),r=P.useCallback((a,o="info")=>{n({message:a,type:o,isVisible:!0}),setTimeout(()=>{n(c=>({...c,isVisible:!1}))},5e3)},[]),i=P.useCallback(()=>{n(a=>({...a,isVisible:!1}))},[]),s={notification:e,showNotification:r,hideNotification:i};return y.jsx(lF.Provider,{value:s,children:t})},Yfe=()=>{const{notification:t,hideNotification:e}=cF(),n={success:y.jsx(x5,{className:"h-6 w-6 text-green-500"}),info:y.jsx(I5,{className:"h-6 w-6 text-blue-500"}),warning:y.jsx(D5,{className:"h-6 w-6 text-amber-500"}),error:y.jsx(xY,{className:"h-6 w-6 text-red-500"})},r={success:"bg-white border-green-100",info:"bg-white border-blue-100",warning:"bg-white border-amber-100",error:"bg-white border-red-100"};return y.jsx(bv,{children:t.isVisible&&y.jsxs(Jt.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{type:"spring",stiffness:300,damping:30},className:`fixed top-6 left-0 right-0 z-[100] mx-auto flex w-[90%] max-w-md items-center gap-3 rounded-xl border p-4 shadow-xl ${r[t.type]}`,children:[y.jsx("div",{className:"flex-shrink-0",children:n[t.type]}),y.jsx("div",{className:"flex-1",children:y.jsx("p",{className:"font-medium text-gray-900",children:t.message})}),y.jsx("button",{onClick:e,className:"flex-shrink-0 rounded-full p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-500",children:y.jsx(ll,{className:"h-4 w-4"})})]})})},uF=P.createContext(void 0),ape=()=>{const t=P.useContext(uF);if(t===void 0)throw new Error("useOrder must be used within an OrderProvider");return t},Qfe=({children:t})=>{const[e,n]=P.useState(null),[r,i]=P.useState([]),[s,a]=P.useState(!0),{currentUser:o}=Xs(),{showNotification:c}=cF(),h=P.useRef(void 0);P.useEffect(()=>{let g;return o?(a(!0),g=Rt.collection("orders").where("userId","==",o.uid).onSnapshot(N=>{const A=N.docs.map(T=>{var E;return{id:T.id,...T.data(),timestamp:((E=T.data().timestamp)==null?void 0:E.toDate())||new Date}});N.docChanges().forEach(T=>{if(T.type==="modified"){const E=T.doc.data();E.status==="cancelled"&&c(`Your order ${E.orderNumber} has been cancelled. Reason: ${E.cancellationReason||"No reason provided"}`,"error")}}),A.sort((T,E)=>E.timestamp.getTime()-T.timestamp.getTime()),i(A);const b=A.find(T=>T.status!=="completed"&&T.status!=="cancelled")||null;n(b),a(!1)},N=>{console.error("Error listening to order history:",N),a(!1)})):(i([]),n(null),a(!1)),()=>{g&&g()}},[o,c]),P.useEffect(()=>{const g=e==null?void 0:e.status,_=h.current;if(g==="ready"&&_!=="ready"){const R=e==null?void 0:e.orderItems.map(N=>N.productName).join(", ");c(`Your order for ${R} is ready!`,"success")}h.current=g},[e==null?void 0:e.status,e==null?void 0:e.orderItems,c]);const p={activeOrder:e,setActiveOrder:n,orderHistory:r,addOrderToHistory:async g=>{try{const _=await Rt.collection("orders").add({...g,timestamp:Ln.firestore.FieldValue.serverTimestamp()}),R={...g,id:_.id,timestamp:new Date};i(N=>[R,...N]),n(R)}catch(_){console.error("Error adding order to Firestore:",_)}},isHistoryLoading:s};return y.jsx(uF.Provider,{value:p,children:t})},Xfe=({children:t,className:e="",variant:n="solid",color:r="primary",size:i="md"})=>{const s="inline-flex items-center gap-1.5 rounded-full font-medium",a={xs:"px-2 py-0.5 text-xs",sm:"px-2.5 py-1 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-1.5 text-base"},o={primary:"bg-primary-100 text-primary-800",success:"bg-green-100 text-green-800",warning:"bg-amber-100 text-amber-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800",gray:"bg-gray-100 text-gray-800"},c={primary:"border-2 border-primary-300 text-primary-700 bg-transparent",success:"border-2 border-green-300 text-green-700 bg-transparent",warning:"border-2 border-amber-300 text-amber-700 bg-transparent",error:"border-2 border-red-300 text-red-700 bg-transparent",info:"border-2 border-blue-300 text-blue-700 bg-transparent",gray:"border-2 border-gray-300 text-gray-700 bg-transparent"},h={primary:"bg-primary-500",success:"bg-green-500",warning:"bg-amber-500",error:"bg-red-500",info:"bg-blue-500",gray:"bg-gray-500"},f=n==="outline"?c[r]:o[r];return y.jsxs("span",{className:`${s} ${a[i]} ${f} ${e}`,children:[n==="dot"&&y.jsx("span",{className:`h-2 w-2 rounded-full ${h[r]} animate-pulse`}),t]})},hF=()=>{const[t,e]=P.useState([]),[n,r]=P.useState(!0),[i,s]=P.useState(null);return P.useEffect(()=>{(async()=>{try{r(!0);const c=await Rt.collection("ingredients").where("isTopping","==",!0).get(),h=[];c.forEach(f=>{const p=f.data();p.stock>0&&p.toppingPrice!==void 0&&p.portionSize!==void 0&&h.push({id:f.id,name:p.name,price:p.toppingPrice,stock:p.stock,portionSize:p.portionSize})}),h.sort((f,p)=>f.name.localeCompare(p.name)),e(h),s(null)}catch(o){console.error("Error fetching toppings:",o),s("Failed to load toppings"),e([{id:"pearls",name:"Pearls",price:10,stock:3e3,portionSize:30},{id:"pudding",name:"Pudding",price:15,stock:2e3,portionSize:40},{id:"grass-jelly",name:"Grass Jelly",price:15,stock:2500,portionSize:35}])}finally{r(!1)}})()},[]),{toppings:t,isLoading:n,error:i}},Jfe=({cartItems:t,isOpen:e,onClose:n,onUpdateQuantity:r,onRemoveItem:i,onCheckout:s,onEditItem:a,selectedItemIds:o,onToggleItemSelection:c,onSelectAll:h,onDeselectAll:f,isLoading:p=!1})=>{const g=su(),_=t.reduce((j,q)=>j+q.quantity,0),{toppings:R}=hF(),N=t.length>0&&o.length===t.length,A=o.length>0&&o.length<t.length,b=j=>j?j.reduce((q,S)=>{const C=R.find(k=>k.name===S);return q+((C==null?void 0:C.price)||0)},0):0,T=t.filter(j=>o.includes(j.id)).reduce((j,q)=>{var C;const S=b((C=q.customizations)==null?void 0:C.toppings);return j+(q.selectedSize.price+S)*q.quantity},0),E=()=>{n(),g("/menu")},O=()=>{N?f():h()};return y.jsxs(y.Fragment,{children:[y.jsx("div",{onClick:n,className:`fixed inset-0 z-40 bg-black/50 transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"}`,"aria-hidden":"true"}),y.jsx("aside",{className:`fixed top-0 right-0 z-[60] h-full w-full transform bg-white shadow-2xl transition-transform duration-300 ease-in-out sm:w-96 md:w-[450px] ${e?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"cart-heading",children:y.jsxs("div",{className:"flex h-full flex-col",children:[y.jsxs("header",{className:"flex items-center justify-between border-b border-gray-200 p-6",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("h2",{id:"cart-heading",className:"font-display text-xl font-bold text-coffee-900",children:"Your Order"}),_>0&&y.jsxs(Xfe,{children:[_," ",_===1?"item":"items"]})]}),y.jsx("button",{onClick:n,className:"rounded-md p-2 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-800","aria-label":"Close cart",children:y.jsx(ll,{className:"h-6 w-6"})})]}),!p&&t.length>0&&y.jsx("div",{className:"border-b border-gray-200 px-6 py-3 bg-gray-50/50 backdrop-blur-sm sticky top-0 z-10",children:y.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group select-none",children:[y.jsxs("div",{className:"relative flex items-center justify-center h-5 w-5",children:[y.jsx("input",{type:"checkbox",checked:N,onChange:O,className:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border-2 border-gray-300 bg-white transition-all checked:border-primary-600 checked:bg-primary-600 hover:border-primary-500 focus:ring-2 focus:ring-primary-500/20"}),y.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 peer-checked:opacity-100 transition-opacity duration-200",children:A&&!N?y.jsx(D1,{className:"h-3.5 w-3.5 text-white",strokeWidth:3}):y.jsx(aP,{className:"h-3.5 w-3.5 text-white",strokeWidth:3})})]}),y.jsx("span",{className:"text-sm font-semibold text-gray-700 group-hover:text-primary-700 transition-colors",children:N?"Deselect All":"Select All"}),o.length>0&&y.jsxs("span",{className:"ml-auto text-xs font-medium text-primary-600 bg-primary-50 px-2 py-1 rounded-full",children:[o.length," selected"]})]})}),p?y.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-4 p-6 text-center",children:[y.jsx(si,{className:"h-12 w-12 animate-spin text-primary-600"}),y.jsx("p",{className:"text-gray-500",children:"Loading your cart..."})]}):t.length===0?y.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-4 p-6 text-center",children:[y.jsx(Ws,{className:"h-24 w-24 text-gray-300 opacity-50"}),y.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Your cart is empty"}),y.jsx("p",{className:"text-gray-500",children:"Looks like you haven't added anything yet."}),y.jsx("button",{onClick:E,className:"mt-4 rounded-full bg-primary-600 px-6 py-2 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-primary-700",children:"Start Ordering"})]}):y.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:y.jsx("ul",{className:"space-y-3",children:t.map(j=>{var B;const q=j.selectedSize.name==="Combo Meal",S=q?`${j.product.name} (${j.selectedSize.name})`:j.product.name,C=q&&j.product.comboImageUrl?j.product.comboImageUrl:j.product.imageUrl,k=b((B=j.customizations)==null?void 0:B.toppings),M=j.selectedSize.price+k,U=o.includes(j.id);return y.jsxs("li",{className:`relative flex gap-4 p-5 rounded-xl transition-all ${U?"bg-coffee-50 border-2 border-coffee-200":"bg-gray-50/50 border-2 border-transparent hover:border-gray-200"}`,children:[y.jsx("button",{onClick:()=>i(j.id),className:"absolute top-5 right-5 z-10 rounded-full p-2 text-gray-400 transition-all hover:bg-red-50 hover:text-red-600","aria-label":`Remove ${S} from cart`,children:y.jsx(hQ,{className:"h-4 w-4"})}),y.jsxs("div",{className:"pt-1 relative flex items-center justify-center h-5 w-5",children:[y.jsx("input",{type:"checkbox",checked:U,onChange:()=>c(j.id),className:"peer h-5 w-5 cursor-pointer appearance-none rounded-md border-2 border-gray-300 bg-white transition-all checked:border-primary-600 checked:bg-primary-600 hover:border-primary-500 focus:ring-2 focus:ring-primary-500/20"}),y.jsx(aP,{className:"absolute h-3.5 w-3.5 text-white opacity-0 peer-checked:opacity-100 transition-opacity duration-200 pointer-events-none",strokeWidth:3})]}),y.jsx("button",{onClick:()=>a(j),className:"h-20 w-20 flex-shrink-0 overflow-hidden rounded-lg border border-gray-100 shadow-sm hover:border-primary-300 transition-colors cursor-pointer",children:y.jsx("img",{src:C,alt:S,className:"h-full w-full object-cover object-center"})}),y.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[y.jsxs("button",{onClick:()=>a(j),className:"text-left w-full hover:opacity-75 transition-opacity",children:[y.jsx("h4",{className:"font-bold text-gray-900 truncate text-base pr-8",children:S}),y.jsxs("div",{className:"mt-1.5 flex items-center justify-between",children:[y.jsx("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:j.selectedSize.name}),y.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["",j.selectedSize.price.toFixed(2)]})]})]}),j.customizations&&y.jsxs("div",{className:"mt-2 space-y-1.5",children:[(j.customizations.sugarLevel||j.customizations.iceLevel)&&y.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[j.customizations.sugarLevel&&y.jsxs("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:["Sugar: ",j.customizations.sugarLevel]}),j.customizations.iceLevel&&y.jsxs("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:["Ice: ",j.customizations.iceLevel]})]}),j.customizations.toppings&&j.customizations.toppings.length>0&&y.jsx("div",{className:"flex flex-col gap-1.5",children:j.customizations.toppings.map(F=>{const ne=R.find(ie=>ie.name===F),me=(ne==null?void 0:ne.price)||0;return y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"inline-flex items-center rounded-md bg-white px-2.5 py-1 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-200",children:F}),y.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["+",me.toFixed(2)]})]},F)})})]}),y.jsxs("div",{className:"mt-auto pt-3 flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center rounded-full border border-gray-200 bg-white shadow-sm",children:[y.jsx("button",{onClick:()=>r(j.id,j.quantity-1),disabled:j.quantity===1,className:"flex h-8 w-8 items-center justify-center rounded-l-full text-gray-500 transition hover:bg-gray-50 hover:text-gray-700 disabled:cursor-not-allowed disabled:opacity-50","aria-label":`Decrease quantity of ${S}`,children:y.jsx(D1,{className:"h-3.5 w-3.5"})}),y.jsx("span",{className:"w-8 text-center text-sm font-semibold text-gray-900","aria-live":"polite",children:j.quantity}),y.jsx("button",{onClick:()=>r(j.id,j.quantity+1),className:"flex h-8 w-8 items-center justify-center rounded-r-full text-gray-500 transition hover:bg-gray-50 hover:text-gray-700","aria-label":`Increase quantity of ${S}`,children:y.jsx(C5,{className:"h-3.5 w-3.5"})})]}),y.jsxs("p",{className:"font-bold text-lg text-gray-900",children:["",(M*j.quantity).toFixed(2)]})]})]})]},j.id)})})}),!p&&t.length>0&&y.jsxs("footer",{className:"mt-auto border-t border-gray-200 p-6 bg-gray-50/50",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-base font-medium text-gray-600",children:"Subtotal"}),y.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["",T.toFixed(2)]})]}),o.length<t.length&&y.jsx("p",{className:"mt-1 text-xs text-amber-600",children:o.length===0?"Please select items to checkout":`${t.length-o.length} item(s) not selected`}),y.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Taxes and service fee calculated at checkout."}),y.jsx("div",{className:"mt-6",children:y.jsxs("button",{onClick:s,disabled:o.length===0,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-primary-600 px-6 py-3.5 text-base font-bold text-white shadow-lg shadow-primary-600/20 transition-all hover:bg-primary-700 hover:shadow-xl hover:scale-[1.02] active:scale-[0.98] focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:bg-gray-400 disabled:opacity-50 disabled:shadow-none disabled:scale-100",children:["Proceed to Checkout",y.jsx(pY,{className:"h-5 w-5"})]})})]})]})})]})},sp={sugarLevels:[{value:"0%",label:"No Sugar",sugarAmount:0,sugarIngredientId:"brown-sugar-syrup"},{value:"25%",label:"25% Sweet",sugarAmount:5,sugarIngredientId:"brown-sugar-syrup"},{value:"50%",label:"50% Sweet",sugarAmount:10,sugarIngredientId:"brown-sugar-syrup"},{value:"75%",label:"75% Sweet",sugarAmount:15,sugarIngredientId:"brown-sugar-syrup"},{value:"100%",label:"Regular (100%)",sugarAmount:20,sugarIngredientId:"brown-sugar-syrup"}],iceLevels:[{value:"None",label:"No Ice",iceAmount:0,iceIngredientId:"ice-cubes"},{value:"Less",label:"Less Ice",iceAmount:50,iceIngredientId:"ice-cubes"},{value:"Normal",label:"Normal Ice",iceAmount:100,iceIngredientId:"ice-cubes"},{value:"Extra",label:"Extra Ice",iceAmount:150,iceIngredientId:"ice-cubes"}]},Zfe=async()=>{try{const t=Rt.collection("settings").doc("customizationOptions");(await t.get()).exists?console.log(" Customization options already exist in Firestore"):(console.log("Seeding customization options to Firestore..."),await t.set(sp),console.log(" Customization options seeded successfully"))}catch(t){throw console.error(" Error seeding customization options:",t),t}},eme=async()=>{try{const t=Rt.collection("settings").doc("customizationOptions"),e=await t.get();return e.exists?e.data():(await Zfe(),(await t.get()).data())}catch(t){return console.error("Error fetching customization options:",t),sp}},tme=()=>{const[t,e]=P.useState(sp),[n,r]=P.useState(!0),[i,s]=P.useState(null);return P.useEffect(()=>{(async()=>{try{r(!0);const o=await eme();o&&o.sugarLevels&&o.iceLevels?(e(o),s(null)):e(sp)}catch(o){console.error("Error fetching customization options:",o),s("Failed to load customization options"),e(sp)}finally{r(!1)}})()},[]),{options:t,isLoading:n,error:i}},nme=({product:t,selectedSize:e,isOpen:n,onClose:r,onConfirm:i,onBuyNow:s,initialCustomizations:a,initialQuantity:o=1})=>{const[c,h]=P.useState("100%"),[f,p]=P.useState("Normal"),[g,_]=P.useState("None"),[R,N]=P.useState(1),[A,b]=P.useState(e),{toppings:T,isLoading:E}=hF(),{options:O,isLoading:j}=tme();oi.useEffect(()=>{if(n){if(a){h(a.sugarLevel||"100%"),p(a.iceLevel||"Normal");const ne=a.toppings&&a.toppings.length>0?a.toppings[0]:"None";_(ne)}else h("100%"),p("Normal"),_("None");N(o),b(e)}},[n,a,o,e]);const q=()=>{const ne=["Coffee Based","Non-Coffee Based","Matcha Series","Refreshments"].includes(t.category),me={toppings:g!=="None"?[g]:[]};return ne&&(me.sugarLevel=c,me.iceLevel=f),me},S=()=>{i(q(),R,U/R,A),r()},C=[{id:"none",name:"None",price:0},...T.map(ne=>({id:ne.id,name:ne.name,price:ne.price}))],k=C.find(ne=>ne.name===g),M=(k==null?void 0:k.price)||0,U=(A.price+M)*R,B=E||j,F=y.jsxs("button",{onClick:S,disabled:B,className:"w-full flex items-center justify-between rounded-xl bg-primary-600 px-6 py-3 text-white font-bold shadow-lg hover:bg-primary-700 hover:shadow-xl hover:scale-[1.01] active:scale-[0.99] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[y.jsx("span",{children:"Add to Order"}),y.jsxs("span",{className:"text-lg tabular-nums",children:["",U.toFixed(2)]})]});return y.jsx(XA,{isOpen:n,onClose:r,hideHeader:!0,hideCloseButton:!0,footer:F,className:"sm:max-w-lg",children:y.jsxs("div",{children:[y.jsxs("div",{className:"-mx-6 -mt-6 mb-2",children:[y.jsxs("div",{className:"bg-[#F5F5F0] w-full h-96 flex items-center justify-center relative overflow-hidden",children:[y.jsx("button",{onClick:r,className:"absolute top-4 right-4 z-10 p-2 rounded-full bg-white/50 hover:bg-white/80 backdrop-blur-sm transition-colors text-gray-600 hover:text-gray-900",children:y.jsx(ll,{className:"h-5 w-5"})}),y.jsx("img",{src:t.imageUrl,alt:t.name,className:"h-full w-full object-cover object-center"})]}),y.jsxs("div",{className:"px-6 pt-4",children:[y.jsx("div",{className:"flex items-center justify-between mb-2",children:y.jsx("span",{className:"text-sm font-medium text-coffee-600 tracking-wide uppercase",children:t.category})}),y.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.name}),y.jsx("p",{className:"text-gray-500 leading-relaxed text-sm",children:t.description})]})]}),B?y.jsx("div",{className:"flex items-center justify-center py-12",children:y.jsx(si,{className:"h-8 w-8 animate-spin text-coffee-600"})}):y.jsxs("div",{className:"space-y-1",children:[y.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[y.jsx("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center gap-2",children:"Size"}),y.jsx("div",{className:"flex flex-wrap gap-2",children:t.sizes.map(ne=>y.jsx("button",{onClick:()=>b(ne),className:`flex-1 min-w-[80px] rounded-lg py-2 text-sm font-semibold transition-all border ${A.name===ne.name?"bg-primary-600 text-white border-primary-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:border-primary-300 hover:bg-primary-50"}`,children:ne.name},ne.name))})]}),["Coffee Based","Non-Coffee Based","Matcha Series","Refreshments"].includes(t.category)&&y.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[y.jsx("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center gap-2",children:"Sugar Level"}),y.jsx("div",{className:"flex flex-wrap gap-2",children:O.sugarLevels.map(ne=>y.jsx("button",{onClick:()=>h(ne.value),className:`flex-1 min-w-[60px] rounded-lg py-2 text-sm font-semibold transition-all border ${c===ne.value?"bg-primary-600 text-white border-primary-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:border-primary-300 hover:bg-primary-50"}`,children:ne.value},ne.value))})]}),["Coffee Based","Non-Coffee Based","Matcha Series","Refreshments"].includes(t.category)&&y.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[y.jsx("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center gap-2",children:"Ice Level"}),y.jsx("div",{className:"flex flex-wrap gap-2",children:O.iceLevels.map(ne=>y.jsx("button",{onClick:()=>p(ne.value),className:`flex-1 min-w-[60px] rounded-lg py-2 text-sm font-semibold transition-all border ${f===ne.value?"bg-primary-600 text-white border-primary-600 shadow-md":"bg-white text-gray-600 border-gray-200 hover:border-primary-300 hover:bg-primary-50"}`,children:ne.value},ne.value))})]}),y.jsxs("div",{className:"py-4 border-b border-gray-100 -mx-6 px-6",children:[y.jsxs("h4",{className:"mb-3 text-sm font-bold text-gray-900 uppercase tracking-wide flex items-center justify-between",children:[y.jsx("span",{children:"Toppings"}),y.jsx("span",{className:"text-xs font-normal text-gray-500 normal-case",children:"Select one"})]}),y.jsx("div",{className:"flex flex-wrap gap-2",children:C.map(ne=>{const me=g===ne.name;return y.jsxs("button",{onClick:()=>_(ne.name),className:`
                                                relative px-3 py-2 rounded-lg text-sm font-medium transition-all border flex items-center gap-2
                                                ${me?"bg-primary-50 border-primary-600 text-primary-700 shadow-sm ring-1 ring-primary-600":"bg-white border-gray-200 text-gray-600 hover:border-primary-300 hover:bg-gray-50"}
                                            `,children:[y.jsx("span",{children:ne.name}),ne.price>0&&y.jsxs("span",{className:`text-xs font-bold ${me?"text-primary-600":"text-gray-400"}`,children:["+",ne.price]})]},ne.id)})})]}),y.jsxs("div",{className:"flex items-center justify-between py-4 -mx-6 px-6",children:[y.jsx("span",{className:"font-bold text-gray-900",children:"Quantity"}),y.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 rounded-lg p-1 border border-gray-200",children:[y.jsx("button",{onClick:()=>N(Math.max(1,R-1)),className:"h-8 w-8 rounded-md bg-white shadow-sm flex items-center justify-center text-gray-600 hover:text-coffee-600 disabled:opacity-50 transition-colors",disabled:R<=1,children:y.jsx(D1,{className:"h-4 w-4"})}),y.jsx("span",{className:"w-8 text-center font-bold text-gray-900 tabular-nums",children:R}),y.jsx("button",{onClick:()=>N(R+1),className:"h-8 w-8 rounded-md bg-primary-600 shadow-sm flex items-center justify-center text-white hover:bg-primary-700 transition-colors",children:y.jsx(C5,{className:"h-4 w-4"})})]})]})]})]})})},rme=()=>{const{pathname:t}=qi();return P.useEffect(()=>{window.scrollTo(0,0)},[t]),null},eM=({allowedRoles:t,redirectTo:e})=>{const{currentUser:n,loading:r}=Xs(),i=qi();return r?y.jsx("div",{className:"flex h-screen w-full items-center justify-center bg-gray-50",children:y.jsx(si,{className:"h-12 w-12 animate-spin text-primary-600"})}):n?!t||t.length===0?y.jsx(rP,{}):n.role&&t.includes(n.role)?y.jsx(rP,{}):y.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gradient-to-br from-red-50 to-orange-50 px-4",children:y.jsxs("div",{className:"max-w-md text-center",children:[y.jsx("div",{className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-red-100",children:y.jsx(iQ,{className:"h-10 w-10 text-red-600"})}),y.jsx("h1",{className:"mb-3 font-display text-4xl font-bold text-gray-900",children:"Access Denied"}),y.jsx("p",{className:"mb-6 text-lg text-gray-600",children:"You don't have permission to access this page."}),y.jsxs("p",{className:"mb-8 text-sm text-gray-500",children:["Your role: ",y.jsx("span",{className:"font-semibold capitalize",children:n.role||"customer"}),y.jsx("br",{}),"Required role: ",y.jsx("span",{className:"font-semibold capitalize",children:t.join(" or ")})]}),y.jsx("button",{onClick:()=>window.history.back(),className:"rounded-lg bg-primary-600 px-6 py-3 font-semibold text-white transition-colors hover:bg-primary-700",children:"Go Back"})]})}):y.jsx(SW,{to:e||"/auth/login",state:{from:i},replace:!0})},ime=()=>y.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center bg-primary-50",children:y.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[y.jsx(Ws,{className:"h-16 w-16 text-primary-600"}),y.jsxs("div",{className:"flex items-center gap-2 text-primary-800",children:[y.jsx(si,{className:"h-6 w-6 animate-spin"}),y.jsx("span",{className:"font-medium",children:"Brewing your page..."})]})]})}),Nv=P.forwardRef(({children:t,variant:e="primary",size:n="md",className:r="",asChild:i=!1,isLoading:s=!1,startIcon:a,endIcon:o,fullWidth:c=!1,disabled:h,...f},p)=>{const g="inline-flex items-center justify-center gap-2 rounded-full font-semibold transition-all duration-200 ease-in-out focus:outline-none focus:ring-4 disabled:cursor-not-allowed disabled:opacity-60 active:scale-95",_={primary:"bg-primary-600 text-white shadow-lg hover:bg-primary-700 hover:shadow-xl focus:ring-primary-500/30 active:bg-primary-800",secondary:"bg-primary-600 text-white shadow-lg hover:bg-primary-700 hover:shadow-xl focus:ring-primary-500/30 active:bg-primary-800",outline:"border-2 border-primary-600 bg-transparent text-primary-600 hover:bg-primary-50 focus:ring-primary-500/20 active:bg-primary-100",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500/20 active:bg-gray-200",danger:"bg-red-600 text-white shadow-lg hover:bg-red-700 hover:shadow-xl focus:ring-red-500/30 active:bg-red-800"},R={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg",xl:"px-10 py-5 text-xl"},N=c?"w-full":"",A=`${g} ${_[e]} ${R[n]} ${N} ${r}`,b=y.jsxs(y.Fragment,{children:[s&&y.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[y.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),y.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!s&&a&&y.jsx("span",{className:"inline-flex items-center flex-shrink-0",children:a}),y.jsx("span",{className:"inline-flex items-center",children:t}),!s&&o&&y.jsx("span",{className:"inline-flex items-center flex-shrink-0",children:o})]});return i?y.jsx("span",{className:A,children:b}):y.jsx("button",{ref:p,className:A,disabled:h||s,...f,children:b})});Nv.displayName="Button";class sme extends P.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Uncaught error:",e,n)}render(){return this.state.hasError?y.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gray-50 p-4 text-center",children:[y.jsx("div",{className:"mb-6 rounded-full bg-red-100 p-4 animate-bounce-soft",children:y.jsx(D5,{className:"h-12 w-12 text-red-600"})}),y.jsx(Ws,{className:"mb-6 h-16 w-16 text-gray-400 opacity-50"}),y.jsx("h1",{className:"mb-2 font-display text-3xl font-bold text-gray-900",children:"Oops! Something went wrong."}),y.jsx("p",{className:"mb-8 max-w-md text-gray-600",children:"We encountered an unexpected error. Our team has been notified. Please try refreshing the page."}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[y.jsx(Nv,{variant:"outline",onClick:()=>window.location.reload(),startIcon:y.jsx(N5,{className:"h-4 w-4"}),children:"Refresh Page"}),y.jsx(Nv,{variant:"primary",onClick:()=>{this.setState({hasError:!1,error:null}),window.location.href="/"},startIcon:y.jsx(OY,{className:"h-4 w-4"}),children:"Go Home"})]}),!1]}):this.props.children}}const ame=()=>{const t=su(),[e,n]=P.useState(!1),[r,i]=P.useState(!1),[s,a]=P.useState(""),[o,c]=P.useState(()=>{const q=localStorage.getItem("chat_history");return q?JSON.parse(q,(S,C)=>S==="timestamp"?new Date(C):C):[{id:"1",text:"Hello, welcome to Rush Coffee!  I'm Rush Bot. How can I help you today?",sender:"bot",timestamp:new Date}]}),[h,f]=P.useState(!1),[p,g]=P.useState(!1),[_,R]=P.useState(!0),N=P.useRef(null),A=[{id:2,text:" Store Hours",message:"hours"},{id:4,text:" Location",message:"location"},{id:5,text:" Contact Us",message:"contact"},{id:7,text:" Payment Methods",message:"payment"}],b=()=>{var q;(q=N.current)==null||q.scrollIntoView({behavior:"smooth"})};P.useEffect(()=>{b(),localStorage.setItem("chat_history",JSON.stringify(o))},[o,h]),P.useEffect(()=>{const q=S=>{S.key==="Escape"&&e&&n(!1)};return window.addEventListener("keydown",q),()=>window.removeEventListener("keydown",q)},[e]),P.useEffect(()=>{const q=setTimeout(()=>{g(!0)},2e3);return()=>clearTimeout(q)},[]),P.useEffect(()=>{if(p){const q=setTimeout(()=>{g(!1)},5e3);return()=>clearTimeout(q)}},[p]);const T=()=>{n(!e),g(!1)},E=q=>{const S={id:Date.now().toString(),text:q,sender:"user",timestamp:new Date};c(C=>[...C,S]),f(!0),setTimeout(()=>{const C=O(q),k={id:(Date.now()+1).toString(),text:C.text,sender:"bot",timestamp:new Date,action:C.action};c(M=>[...M,k]),f(!1)},1e3)},O=q=>{const S=q.toLowerCase();return S.includes("hello")||S.includes("hi")||S.includes("hey")?{text:"Hello! Welcome to Rush Coffee. What can I get for you? "}:S.includes("menu")||S.includes("order")||S.includes("drink")||S.includes("food")?{text:"You can explore our delicious menu by clicking the button below. We have Coffee, Non-Coffee, Matcha, and Meals! ",action:{label:" See Menu",path:"/menu"}}:S.includes("hours")||S.includes("open")||S.includes("close")||S.includes("time")?{text:"We are open daily from 7:00 AM to 10:00 PM. See you soon! "}:S.includes("location")||S.includes("where")||S.includes("address")?{text:"We are located at 11 Visayan Ave. St. Galas, Quezon City, Philippines. Come visit us for a fresh brew! "}:S.includes("recommend")||S.includes("best")||S.includes("suggestion")?{text:"I highly recommend our signature Spanish Latte!  It's a customer favorite. If you love matcha, our Dirty Matcha is a must-try!",action:{label:" View Recommendations",path:"/menu"}}:S.includes("contact")||S.includes("call")||S.includes("phone")||S.includes("email")?{text:"You can reach us at 0912-345-6789 or email us at hello@rushcoffee.com. We'd love to hear from you! "}:S.includes("bestseller")||S.includes("best")||S.includes("favorite")||S.includes("popular")?{text:"Our customer favorites are the Spanish Latte, Dirty Matcha, and Caramel Macchiato!  You have to try them!",action:{label:" Order Now",path:"/menu"}}:S.includes("payment")||S.includes("pay")||S.includes("gcash")||S.includes("cash")?{text:"We only accept Over-the-Counter Cash payments at the moment. "}:S.includes("thank")?{text:"You're welcome! Let me know if you need anything else. "}:S.includes("bye")?{text:"Goodbye! Have a wonderful day! "}:{text:"I'm not sure about that, but I'd love to help! You can ask me about our menu, opening hours, or location."}},j=q=>{if(q==null||q.preventDefault(),!s.trim())return;const S={id:Date.now().toString(),text:s,sender:"user",timestamp:new Date};c(C=>[...C,S]),a(""),f(!0),setTimeout(()=>{const C=O(S.text),k={id:(Date.now()+1).toString(),text:C.text,sender:"bot",timestamp:new Date,action:C.action};c(M=>[...M,k]),f(!1)},1e3)};return y.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end pointer-events-none",children:[y.jsxs(bv,{children:[p&&!e&&y.jsx(Jt.div,{initial:{opacity:0,y:10,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.9},className:"pointer-events-auto mb-4 mr-2 max-w-[200px] cursor-pointer rounded-2xl rounded-br-none bg-white p-4 shadow-xl dark:bg-gray-800",onClick:T,children:y.jsxs("div",{className:"relative",children:[y.jsx("button",{onClick:q=>{q.stopPropagation(),g(!1)},className:"absolute -right-2 -top-2 rounded-full bg-gray-100 p-1 hover:bg-gray-200 dark:bg-gray-700",children:y.jsx(ll,{className:"h-3 w-3 text-gray-500"})}),y.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:"Hello, welcome to Rush Coffee!  I'm Rush Bot."})]})}),e&&y.jsxs(Jt.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.2},className:"pointer-events-auto mb-4 flex h-[500px] w-[350px] flex-col overflow-hidden rounded-2xl border border-white/20 bg-white/90 shadow-2xl backdrop-blur-md dark:bg-gray-900/90 sm:w-[380px]",children:[y.jsxs("div",{className:"flex items-center justify-between bg-primary-600 px-4 py-3 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-white/20",children:y.jsx(oP,{className:"h-5 w-5 text-white"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-bold text-sm",children:"Rush Assistant"}),y.jsxs("p",{className:"text-[10px] text-primary-100 flex items-center gap-1",children:[y.jsx("span",{className:"block h-1.5 w-1.5 rounded-full bg-green-400 animate-pulse"}),"Online"]})]})]}),y.jsx("button",{onClick:()=>n(!1),className:"rounded-full p-1 hover:bg-white/20 transition-colors",children:y.jsx(WY,{className:"h-4 w-4"})})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:[o.map(q=>y.jsx("div",{className:`flex ${q.sender==="user"?"justify-end":"justify-start"}`,children:y.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-2 text-sm shadow-sm ${q.sender==="user"?"bg-primary-600 text-white rounded-br-none":"bg-white text-gray-800 border border-gray-100 rounded-bl-none"}`,children:[y.jsx("p",{children:q.text}),q.action&&y.jsxs("button",{onClick:()=>{t(q.action.path),n(!1)},className:"mt-2 flex items-center gap-1 rounded-lg bg-primary-50 px-3 py-1.5 text-xs font-medium text-primary-700 hover:bg-primary-100 transition-colors w-full justify-center border border-primary-100",children:[q.action.label,y.jsx(SY,{className:"h-3 w-3"})]}),y.jsx("p",{className:`mt-1 text-[9px] ${q.sender==="user"?"text-primary-100":"text-gray-400"}`,children:q.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},q.id)),h&&y.jsx("div",{className:"flex justify-start",children:y.jsx("div",{className:"bg-white border border-gray-100 rounded-2xl rounded-bl-none px-4 py-3 shadow-sm",children:y.jsxs("div",{className:"flex gap-1",children:[y.jsx("span",{className:"h-2 w-2 rounded-full bg-gray-400 animate-bounce [animation-delay:-0.3s]"}),y.jsx("span",{className:"h-2 w-2 rounded-full bg-gray-400 animate-bounce [animation-delay:-0.15s]"}),y.jsx("span",{className:"h-2 w-2 rounded-full bg-gray-400 animate-bounce"})]})})}),y.jsx("div",{ref:N})]}),y.jsxs(Jt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"border-t border-gray-100 bg-white p-2",children:[y.jsx("p",{className:"text-[10px] font-semibold text-gray-600 mb-2",children:"Quick Actions"}),y.jsx("div",{className:"flex flex-wrap gap-1.5",children:A.map(q=>y.jsx(Jt.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>E(q.message),className:"px-3 py-1.5 text-[10px] font-semibold text-primary-700 bg-white border-2 border-primary-200 rounded-full hover:bg-primary-50 hover:border-primary-400 transition-all duration-200 shadow-sm hover:shadow-md",children:q.text},q.id))})]}),y.jsx("form",{onSubmit:j,className:"border-t-2 border-primary-200 bg-gray-50 p-3 shadow-inner",children:y.jsxs("div",{className:"relative flex items-center gap-2",children:[y.jsx("input",{type:"text",value:s,onChange:q=>a(q.target.value),placeholder:"Type a message...",className:"flex-1 rounded-full border-2 border-primary-200 bg-white px-4 py-2 text-sm focus:border-primary-500 focus:bg-white focus:outline-none focus:ring-2 focus:ring-primary-500/20"}),y.jsx("button",{type:"submit",disabled:!s.trim(),className:"flex h-9 w-9 items-center justify-center rounded-full bg-primary-600 text-white transition-colors hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:y.jsx(eQ,{className:"h-4 w-4"})})]})})]})]}),y.jsxs("div",{className:"relative flex items-center justify-center",children:[!e&&y.jsx(Jt.div,{initial:{scale:.8,opacity:.5},animate:{scale:1.5,opacity:0},transition:{duration:2,repeat:1/0,ease:"easeOut"},className:"absolute h-14 w-14 rounded-full bg-primary-500/30"}),y.jsx(Jt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:T,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),className:`pointer-events-auto flex h-14 w-14 items-center justify-center rounded-full shadow-xl shadow-primary-600/20 transition-all duration-300 ${e?"bg-gray-800 text-white rotate-90":"bg-gradient-to-br from-primary-600 to-primary-500 text-white hover:shadow-2xl hover:shadow-primary-600/30"}`,children:y.jsx(bv,{mode:"wait",children:e?y.jsx(Jt.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:.2},children:y.jsx(ll,{className:"h-6 w-6"})},"close"):y.jsx(Jt.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.5,opacity:0},transition:{duration:.2},children:y.jsx(oP,{className:"h-7 w-7"})},"chat")})})]})]})},ome=P.lazy(()=>gt(()=>import("./HomePage-0m3mY_JB.js"),__vite__mapDeps([0,1,2,3,4]))),lme=P.lazy(()=>gt(()=>import("./LoginPage-C6UiDcGD.js"),[])),cme=P.lazy(()=>gt(()=>import("./RegisterPage-DoebN1Vj.js"),[])),ume=P.lazy(()=>gt(()=>import("./ForgotPasswordPage-BnTnYGnz.js"),__vite__mapDeps([5,6]))),hme=P.lazy(()=>gt(()=>import("./MenuPage-D0wGD5Re.js"),__vite__mapDeps([7,8,9,10,11,12]))),dme=P.lazy(()=>gt(()=>import("./CheckoutPage-BzbNQ5Jj.js"),__vite__mapDeps([13,2,14,15,16,17,18]))),fme=P.lazy(()=>gt(()=>import("./QueuePage-Dt7IBP-G.js"),__vite__mapDeps([19,20,4,17,1,8,21,16,22,9]))),mme=P.lazy(()=>gt(()=>import("./RewardsPage-DYFQ7yqv.js"),__vite__mapDeps([23,22,24,25,26,27,10,15,9]))),pme=P.lazy(()=>gt(()=>import("./ProfilePage-DYGwoA1k.js"),__vite__mapDeps([28,17,8,27,25,26,29,16,30,6,4,31,18,21,32,33]))),gme=P.lazy(()=>gt(()=>import("./FlavorProfilePage-CChUPZNc.js"),__vite__mapDeps([34,8,17,22,27,1]))),yme=P.lazy(()=>gt(()=>import("./AboutPage-Bzd0tniM.js"),__vite__mapDeps([35,17,3,1]))),_me=P.lazy(()=>gt(()=>import("./ContactPage-0Mz48uaE.js"),__vite__mapDeps([36,6,37,18]))),vme=P.lazy(()=>gt(()=>import("./FAQPage-CB31dOsy.js"),__vite__mapDeps([38,11]))),wme=P.lazy(()=>gt(()=>import("./TermsPage-BODAEVAx.js"),__vite__mapDeps([39,40,3,41,22]))),bme=P.lazy(()=>gt(()=>import("./PrivacyPolicyPage-Dq_WZoww.js"),__vite__mapDeps([42,4]))),Tme=P.lazy(()=>gt(()=>import("./CookiePolicyPage-Du6A2AYS.js"),__vite__mapDeps([43,32,44]))),Eme=P.lazy(()=>gt(()=>import("./AdminLayout-CDkxSv2F.js"),__vite__mapDeps([45,46,47,17,18,24,3,44,32]))),xme=P.lazy(()=>gt(()=>import("./AdminDashboardPage-cOfhn6Zw.js"),__vite__mapDeps([48,49,47,1,27,12,17,3,44,8,50]))),tM=P.lazy(()=>gt(()=>import("./AdminQueuePage-BdhsxFqQ.js"),__vite__mapDeps([51,20,52,1,17,40]))),nM=P.lazy(()=>gt(()=>import("./AdminInventoryPage-Ra3Cvvub.js"),__vite__mapDeps([53,29,27,47,9,11,54,17]))),Ame=P.lazy(()=>gt(()=>import("./AdminProductsPage-BRCQd5Yy.js"),__vite__mapDeps([55,29,47,8,11,54,17,33]))),Sme=P.lazy(()=>gt(()=>import("./AdminAnalyticsPage-BSnFQ-cR.js"),__vite__mapDeps([56,49,47,1,27,12,18,8,21]))),Ime=P.lazy(()=>gt(()=>import("./AdminFeedbackPage-DJcjRO4x.js"),__vite__mapDeps([57,31,26,8,18,58]))),Rme=P.lazy(()=>gt(()=>import("./AdminSettingsPage-CruWIXEk.js"),__vite__mapDeps([59,6,37,60,1,29]))),rM=P.lazy(()=>gt(()=>import("./AdminOrdersHistoryPage-Ckel9alj.js"),__vite__mapDeps([61,1,47,41,40,11,27,30,60,14]))),Cme=P.lazy(()=>gt(()=>import("./AdminUsersPage-Bk7EjmCY.js"),__vite__mapDeps([62,3,11,58,12,27]))),Nme=P.lazy(()=>gt(()=>import("./EmployeeLayout-C-lATLl_.js"),__vite__mapDeps([63,46,47,24]))),Pme=P.lazy(()=>gt(()=>import("./POSDashboard-BQqbycYA.js"),__vite__mapDeps([64,17,50,47,1]))),Dme=P.lazy(()=>gt(()=>import("./POSPage-C0NLFK57.js"),__vite__mapDeps([65,14,41,52,11]))),kme=()=>y.jsxs("div",{className:"flex min-h-screen flex-col",children:[y.jsx($fe,{}),y.jsxs("main",{className:"flex flex-1 flex-col items-center justify-center bg-gradient-to-br from-primary-50 to-coffee-50 p-6 text-center",children:[y.jsx("div",{className:"mb-6 rounded-full bg-coffee-100 p-6",children:y.jsx(Ws,{className:"h-20 w-20 text-coffee-600"})}),y.jsx("h1",{className:"mb-2 font-display text-4xl font-bold text-gray-900 md:text-5xl",children:"404 - Page Not Found"}),y.jsx("p",{className:"mb-8 max-w-md text-lg text-gray-600",children:"This coffee blend doesn't exist on our menu. Maybe it got lost in the daily grind?"}),y.jsx(Ri,{to:"/",children:y.jsx(Nv,{variant:"primary",size:"lg",children:"Return to Home"})})]}),y.jsx(Kfe,{})]}),Ome=()=>{const{isCartOpen:t,closeCart:e,cartItems:n,updateQuantity:r,updateCartItem:i,removeFromCart:s,toastMessage:a,selectedItemIds:o,toggleItemSelection:c,selectAllItems:h,deselectAllItems:f,isCartLoading:p}=sF(),g=su(),[_,R]=P.useState(null),[N,A]=P.useState(!1),b=()=>{e(),g("/checkout")},T=O=>{R(O),A(!0)},E=(O,j,q,S)=>{_&&S&&(i(_.id,_.product,S,O,j),A(!1),R(null))};return y.jsxs(y.Fragment,{children:[y.jsx(rme,{}),y.jsx(Yfe,{}),y.jsx(P.Suspense,{fallback:y.jsx(ime,{}),children:y.jsxs(RW,{children:[y.jsx(We,{path:"/",element:y.jsx(ome,{})}),y.jsx(We,{path:"/about",element:y.jsx(yme,{})}),y.jsx(We,{path:"/menu",element:y.jsx(hme,{})}),y.jsx(We,{path:"/contact",element:y.jsx(_me,{})}),y.jsx(We,{path:"/auth/login",element:y.jsx(lme,{})}),y.jsx(We,{path:"/auth/register",element:y.jsx(cme,{})}),y.jsx(We,{path:"/auth/forgot-password",element:y.jsx(ume,{})}),y.jsx(We,{path:"/checkout",element:y.jsx(dme,{})}),y.jsx(We,{path:"/queue",element:y.jsx(fme,{})}),y.jsx(We,{path:"/rewards",element:y.jsx(mme,{})}),y.jsx(We,{path:"/profile",element:y.jsx(pme,{})}),y.jsx(We,{path:"/flavor-profile",element:y.jsx(gme,{})}),y.jsx(We,{path:"/faq",element:y.jsx(vme,{})}),y.jsx(We,{path:"/terms",element:y.jsx(wme,{})}),y.jsx(We,{path:"/privacy",element:y.jsx(bme,{})}),y.jsx(We,{path:"/cookies",element:y.jsx(Tme,{})}),y.jsx(We,{element:y.jsx(eM,{}),children:y.jsxs(We,{path:"/admin",element:y.jsx(Eme,{}),children:[y.jsx(We,{index:!0,element:y.jsx(xme,{})}),y.jsx(We,{path:"queue",element:y.jsx(tM,{})}),y.jsx(We,{path:"history",element:y.jsx(rM,{})}),y.jsx(We,{path:"users",element:y.jsx(Cme,{})}),y.jsx(We,{path:"inventory",element:y.jsx(nM,{})}),y.jsx(We,{path:"products",element:y.jsx(Ame,{})}),y.jsx(We,{path:"analytics",element:y.jsx(Sme,{})}),y.jsx(We,{path:"feedback",element:y.jsx(Ime,{})}),y.jsx(We,{path:"settings",element:y.jsx(Rme,{})})]})}),y.jsx(We,{element:y.jsx(eM,{allowedRoles:[vn.EMPLOYEE,vn.ADMIN]}),children:y.jsxs(We,{path:"/employee",element:y.jsx(Nme,{}),children:[y.jsx(We,{index:!0,element:y.jsx(Pme,{})}),y.jsx(We,{path:"pos",element:y.jsx(Dme,{})}),y.jsx(We,{path:"queue",element:y.jsx(tM,{})}),y.jsx(We,{path:"inventory",element:y.jsx(nM,{})}),y.jsx(We,{path:"history",element:y.jsx(rM,{})})]})}),y.jsx(We,{path:"*",element:y.jsx(kme,{})})]})}),y.jsx(Jfe,{isOpen:t,onClose:e,cartItems:n,onUpdateQuantity:r,onRemoveItem:s,onCheckout:b,onEditItem:T,selectedItemIds:o,onToggleItemSelection:c,onSelectAll:h,onDeselectAll:f,isLoading:p}),_&&y.jsx(nme,{product:_.product,selectedSize:_.selectedSize,isOpen:N,onClose:()=>{A(!1),R(null)},onConfirm:E,initialCustomizations:_.customizations,initialQuantity:_.quantity}),a&&y.jsx("div",{className:"fixed bottom-4 right-4 z-[100] animate-fade-in-up rounded-lg bg-gray-900 px-4 py-3 text-white shadow-lg",children:a}),y.jsx(ame,{})]})},Mme=()=>y.jsx(sme,{children:y.jsx(ile,{children:y.jsx(cle,{children:y.jsx(Wfe,{children:y.jsx(Ufe,{children:y.jsx(Qfe,{children:y.jsx(Ffe,{children:y.jsx(JW,{children:y.jsx(Ome,{})})})})})})})})}),dF=document.getElementById("root");if(!dF)throw new Error("Could not find root element to mount to");const Vme=DK.createRoot(dF);Vme.render(y.jsx(oi.StrictMode,{children:y.jsx(Mme,{})}));export{A5 as $,pY as A,Xfe as B,yQ as C,Ln as D,wM as E,Kfe as F,DY as G,$fe as H,bv as I,_Y as J,qi as K,Ri as L,GY as M,rm as N,C5 as O,nme as P,P1 as Q,Ws as R,D1 as S,P5 as T,vn as U,XA as V,B0 as W,ll as X,N5 as Y,hQ as Z,D5 as _,Nv as a,S5 as a0,eQ as a1,q0 as a2,nQ as a3,qY as a4,NY as a5,LY as a6,TY as a7,I5 as a8,rP as a9,is as aa,R5 as ab,cQ as ac,xY as ad,oi as ae,Zfe as af,ipe as ag,iM as ah,Lme as ai,qse as aj,L3 as ak,sp as al,v3 as b,je as c,Rt as d,Jse as e,mv as f,tae as g,su as h,Mm as i,y as j,x5 as k,bp as l,si as m,Lfe as n,sF as o,aP as p,Ao as q,P as r,Jt as s,ape as t,Xs as u,hF as v,Bse as w,E5 as x,k1 as y,QA as z};
