import{c as _,f as G,j as e,r as l,m as X,n as J,u as Y,H as ee,X as te,o as se,h as ae,p as K,F as re,P as oe}from"./index-C_Z0RdEN.js";import{S as ne}from"./star-E9asOUyR.js";import{S as ie}from"./sparkles-DboQO4KH.js";import{P as le}from"./ProductCardSkeleton-B90jWtS1.js";import{S as U}from"./search-Behej9KS.js";import{A as ce}from"./arrow-up-down-BdT5V2ra.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],me=_("mic-off",de);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],he=_("mic",ue),fe=({product:h,onAddToCart:T,onBuyNow:R,onProductClick:b,isLoggedIn:k})=>{const{name:j,category:w,imageUrl:o,comboImageUrl:z,available:p,stock:L,popular:O,new:d}=h,n=G(),N=h.sizes[0],I=N.name==="Combo Meal"&&z?z:o,i=!p||L===0,g=()=>{b?b(h,N):k?T(h,N):n("/auth/login")},f=c=>{!i&&(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),g())};return e.jsxs("div",{role:"button",tabIndex:i?-1:0,onClick:i?void 0:g,onKeyDown:f,className:`w-full text-left rounded-2xl overflow-hidden bg-white shadow-sm border transition-all ${i?"opacity-60 cursor-not-allowed":"cursor-pointer hover:shadow-lg hover:scale-[1.02] active:scale-[0.98] border-gray-200 hover:border-primary-300"}`,children:[e.jsxs("div",{className:"relative aspect-square bg-gray-100",children:[e.jsx("img",{src:I,alt:j,className:"w-full h-full object-cover"}),i&&e.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:e.jsx("span",{className:"bg-red-500 text-white px-4 py-2 rounded-lg font-bold text-sm",children:"Out of Stock"})}),L>0&&L<5&&!i&&e.jsx("div",{className:"absolute top-2 right-2 bg-orange-500 text-white px-2 py-1 rounded-lg text-xs font-bold",children:"Low Stock"}),O&&!i&&e.jsx("div",{className:"absolute top-2 left-2 rounded-full bg-amber-100 p-1.5 text-amber-600 shadow-sm",title:"Popular",children:e.jsx(ne,{className:"h-4 w-4 fill-current"})}),d&&!i&&e.jsx("div",{className:"absolute top-10 left-2 rounded-full bg-blue-100 p-1.5 text-blue-600 shadow-sm",title:"New",children:e.jsx(ie,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"p-3 md:p-4",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:w}),e.jsx("h3",{className:"font-bold text-gray-900 text-sm md:text-base mb-2 line-clamp-1",children:j}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-lg md:text-xl font-bold text-primary-700",children:["₱",N.price.toFixed(2)]}),!i&&!k&&e.jsx("button",{onClick:c=>{c.stopPropagation(),n("/auth/login")},className:"text-xs md:text-sm font-bold text-primary-600 hover:text-primary-700 underline",children:"Login"})]})]})]})},pe=({onSearch:h,onCommand:T,language:R="en-US"})=>{const[b,k]=l.useState(!1),[j,w]=l.useState(!0),o=l.useRef(null),[z,p]=l.useState(null);l.useEffect(()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){w(!1);return}const d=window.SpeechRecognition||window.webkitSpeechRecognition;return o.current=new d,o.current.continuous=!1,o.current.interimResults=!1,o.current.lang=R,o.current.onstart=()=>{k(!0),p(null)},o.current.onend=()=>{k(!1)},o.current.onresult=n=>{const N=n.results[0][0].transcript;console.log("Voice result:",N),L(N)},o.current.onerror=n=>{console.error("Speech recognition error",n.error),k(!1),n.error==="network"?p(R==="tl-PH"?"Tagalog mode requires internet.":"Network error. Check internet or permissions."):n.error==="not-allowed"?p("Mic access denied."):n.error==="no-speech"?p("No speech detected."):p("Voice error. Try again.")},()=>{o.current&&o.current.abort()}},[R]);const L=d=>{const n=d.toLowerCase().trim(),N=["i want","order","get me","can i have","add","add to cart","show me","show me the","go to","view","open","gusto ko ng","gusto ko","pabili ng","order ako ng","dagdag","patingin ng","patingin sa","punta sa","buksan"],I=["pre","pare","tol","boss","idol","po","opo","please","naman","sana","thanks","thank you","cart","sa","to","ng","the","my","ko","mo"];let i=!1;for(const g of N)if(n.includes(g)){const f=n.split(g);if(f.length>1){let c=f[1].trim();c=c.replace(/[.,?!]+$/,"");let S=c.split(/\s+/);for(;S.length>0&&I.includes(S[S.length-1]);)S.pop();if(c=S.join(" "),c){T("order",c),i=!0;break}}}if(!i){let g=n.replace(/[.,?!]+$/,""),f=g.split(/\s+/);for(;f.length>0&&I.includes(f[f.length-1]);)f.pop();g=f.join(" "),h(g)}},O=()=>{var d,n;if(p(null),b)(d=o.current)==null||d.stop();else{if(!navigator.onLine){p("No Internet Connection");return}(n=o.current)==null||n.start()}};return j?e.jsxs("div",{className:"relative flex items-center gap-2",children:[e.jsxs("button",{onClick:O,className:`relative flex h-12 w-12 items-center justify-center rounded-full backdrop-blur-sm transition-all duration-300 ${b?"bg-red-500 text-white shadow-[0_0_15px_rgba(239,68,68,0.5)] animate-pulse":z?"bg-red-500/20 text-red-500 ring-1 ring-red-500/50":"bg-white/10 text-white ring-1 ring-white/20 hover:bg-white/20"}`,title:z||(b?"Listening...":"Voice Search"),children:[b?e.jsx(me,{className:"h-5 w-5"}):e.jsx(he,{className:"h-5 w-5"}),b&&e.jsx("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-red-400 opacity-75"})]}),z&&e.jsxs("div",{className:"absolute top-full mt-2 left-1/2 -translate-x-1/2 whitespace-nowrap rounded bg-red-500 px-2 py-1 text-[10px] font-medium text-white shadow-lg",children:[z,e.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 border-4 border-transparent border-b-red-500"})]})]}):null},ge=[{value:"default",label:"Default"},{value:"price-asc",label:"Price: Low to High"},{value:"price-desc",label:"Price: High to Low"},{value:"name-asc",label:"Name: A-Z"},{value:"name-desc",label:"Name: Z-A"}],xe={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},be={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},ke=()=>{const{products:h,isLoading:T,error:R}=X(),[b,k]=l.useState("All"),[j,w]=l.useState(""),[o,z]=l.useState("default"),[p,L]=l.useState(!1),O=l.useRef(null),d=l.useRef(null),{addToCart:n}=J(),{currentUser:N}=Y(),[I,i]=l.useState(!1),[g,f]=l.useState(null),[c,S]=l.useState(null),[D,B]=l.useState(1),H=(s,t)=>{["Coffee Based","Non Coffee","Refreshments","Matcha Series"].includes(s.category)?(f(s),S(t),i(!0)):n(s,t)},Q=(s,t,a,r)=>{if(g&&(r||c)){const x=r||c;x&&n(g,x,s,t)}},E=s=>{let t=s.toLowerCase(),a=1,r="";const x={one:1,isa:1,isang:1,two:2,dalawa:2,dalawang:2,three:3,tatlo:3,tatlong:3,four:4,apat:4,"apat na":4,five:5,lima:5,limang:5,six:6,anim:6,"anim na":6,seven:7,pito:7,pitong:7,eight:8,walo:8,walong:8,nine:9,siyam:9,"siyam na":9,ten:10,sampu:10,sampung:10},C=t.match(/(\d+)/);if(C)a=parseInt(C[0]),t=t.replace(C[0],"").trim();else for(const[u,M]of Object.entries(x)){const A=new RegExp(`\\b${u}\\b`,"i");if(A.test(t)){a=M,t=t.replace(A,"").trim();break}}t.match(/\b(venti|large|malaki|22oz|big)\b/)?(r="Venti",t=t.replace(/\b(venti|large|malaki|22oz|big)\b/g,"").trim()):t.match(/\b(grande|medium|regular|16oz|small|maliit)\b/)?(r="Grande",t=t.replace(/\b(grande|medium|regular|16oz|small|maliit)\b/g,"").trim()):t.match(/\b(combo|meal|with drink)\b/)?(r="Combo Meal",t=t.replace(/\b(combo|meal|with drink)\b/g,"").trim()):t.match(/\b(ala carte|solo|fries only)\b/)&&(r="Ala Carte",t=t.replace(/\b(ala carte|solo|fries only)\b/g,"").trim()),t=t.replace(/\s+/g," ").trim();const P=["please","paki","ng","sa","ang","yung","po","order","want","get","have","ko"],m=t.split(" ").filter(u=>!P.includes(u)).join(" ");let v=h.find(u=>u.name.toLowerCase()===m);return v||(v=h.find(u=>{var M;return u.name.toLowerCase().includes(m)||((M=u.aliases)==null?void 0:M.some(A=>A.toLowerCase().includes(m)))})),!v&&m!==t&&(v=h.find(u=>{var M;return u.name.toLowerCase().includes(t)||((M=u.aliases)==null?void 0:M.some(A=>A.toLowerCase().includes(t)))})),{foundProduct:v,quantity:a,targetSizeName:r,cleanTerm:m}},q={all:"All",lahat:"All",everything:"All",coffee:"Coffee Based","coffee based":"Coffee Based",kape:"Coffee Based","non coffee":"Non-Coffee Based","non-coffee":"Non-Coffee Based","non coffee based":"Non-Coffee Based",noncoffee:"Non-Coffee Based","hindi kape":"Non-Coffee Based",matcha:"Matcha Series","matcha series":"Matcha Series",refreshment:"Refreshments",refreshments:"Refreshments",inumin:"Refreshments",pampalamig:"Refreshments",meal:"Meals",meals:"Meals",food:"Meals",snack:"Meals",pagkain:"Meals",meryenda:"Meals"},F=s=>{var V,y;const t=s.toLowerCase(),r=Object.keys(q).sort((m,v)=>v.length-m.length).find(m=>t.includes(m));if(r){k(q[r]),w(""),(V=d.current)==null||V.scrollIntoView({behavior:"smooth"});return}const{foundProduct:x,quantity:C,targetSizeName:P}=E(s);if(x){f(x);let m=x.sizes[0];if(P){const v=x.sizes.find(u=>u.name===P);v&&(m=v)}S(m),B(C),i(!0),w("");return}w(s),(y=d.current)==null||y.scrollIntoView({behavior:"smooth"})},W=(s,t)=>{var C,P,V;const a=t.toLowerCase();console.log("Voice command received:",s,"Term:",a);const x=Object.keys(q).sort((y,m)=>m.length-y.length).find(y=>a===y||a.includes(y));if(x){k(q[x]),w(""),(C=d.current)==null||C.scrollIntoView({behavior:"smooth"});return}if(s==="order"){const{foundProduct:y,quantity:m,targetSizeName:v}=E(t);if(y){let u=y.sizes[0];if(v){const M=y.sizes.find(A=>A.name===v);M&&(u=M)}f(y),S(u),B(m),i(!0),w("")}else w(t),(P=d.current)==null||P.scrollIntoView({behavior:"smooth"})}else w(t),(V=d.current)==null||V.scrollIntoView({behavior:"smooth"})},Z=l.useMemo(()=>h.length===0?["All"]:["All",...[...new Set(h.map(t=>t.category))].sort()],[h]);l.useEffect(()=>{const s=t=>{O.current&&!O.current.contains(t.target)&&L(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]);const $=l.useMemo(()=>{const t=[...h.filter(a=>{var C;const r=b==="All"||a.category===b,x=j.trim()===""||a.name.toLowerCase().includes(j.toLowerCase())||a.description.toLowerCase().includes(j.toLowerCase())||((C=a.aliases)==null?void 0:C.some(P=>P.toLowerCase().includes(j.toLowerCase())));return r&&x})];switch(o){case"price-asc":t.sort((a,r)=>a.sizes[0].price-r.sizes[0].price);break;case"price-desc":t.sort((a,r)=>r.sizes[0].price-a.sizes[0].price);break;case"name-asc":t.sort((a,r)=>a.name.localeCompare(r.name));break;case"name-desc":t.sort((a,r)=>r.name.localeCompare(a.name));break}return t},[b,j,h,o]);return e.jsxs("div",{className:"flex min-h-screen flex-col bg-white",children:[e.jsx(ee,{}),e.jsxs("main",{children:[e.jsxs("section",{className:"relative flex min-h-[40vh] items-center justify-center bg-primary-900 px-6 py-16 text-center text-white",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1509042239860-f550ce710b93?q=80&w=2574&auto=format&fit=crop')] bg-cover bg-center opacity-20"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-primary-900/80 to-primary-900/90"}),e.jsxs("div",{className:"container relative z-40 mx-auto max-w-4xl animate-fade-in-up",children:[e.jsx("h1",{className:"font-display text-4xl font-bold md:text-5xl",children:"Our Menu"}),e.jsx("p",{className:"mt-2 text-lg text-gray-200",children:"Discover your perfect cup ☕"}),e.jsxs("div",{className:"mx-auto mt-8 flex max-w-2xl gap-3 items-center",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(U,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:j,onChange:s=>w(s.target.value),placeholder:"Search for coffee, matcha...",className:"w-full rounded-full border-0 bg-white/10 py-3 pl-12 pr-10 text-white placeholder:text-gray-400 ring-1 ring-white/20 transition focus:bg-white/20 focus:ring-2 focus:ring-primary-500"}),j&&e.jsx("button",{onClick:()=>w(""),className:"absolute right-3 top-1/2 -translate-y-1/2 rounded-full p-1 text-gray-400 hover:bg-white/10 hover:text-white",title:"Clear search",children:e.jsx(te,{className:"h-4 w-4"})})]}),e.jsx(pe,{onSearch:F,onCommand:W}),e.jsxs("div",{className:"relative shrink-0",ref:O,children:[e.jsx("button",{onClick:()=>L(!p),className:"flex h-12 w-12 items-center justify-center rounded-full bg-white/10 text-white backdrop-blur-sm ring-1 ring-white/20 transition hover:bg-white/20","aria-haspopup":"true","aria-expanded":p,"aria-label":"Sort products",children:e.jsx(ce,{className:"h-5 w-5"})}),e.jsx("div",{className:`absolute right-0 top-full z-[100] mt-2 w-56 origin-top-right rounded-xl border border-gray-100 bg-white p-1 shadow-xl ring-1 ring-black ring-opacity-5 transition-all duration-200 ease-out ${p?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,role:"menu","aria-orientation":"vertical",children:e.jsx("div",{className:"py-1",role:"none",children:ge.map(s=>e.jsxs("button",{onClick:()=>{z(s.value),L(!1)},className:`flex w-full items-center justify-between rounded-lg px-4 py-2.5 text-sm text-left font-medium transition-colors ${o===s.value?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50"}`,role:"menuitem",children:[e.jsx("span",{children:s.label}),o===s.value&&e.jsx(se,{className:"h-4 w-4"})]},s.value))})})]})]})]})]}),e.jsx("div",{className:"sticky top-16 z-20 border-b border-gray-200 bg-white/95 py-3 backdrop-blur-sm sm:top-20",children:e.jsx("div",{className:"container mx-auto flex max-w-7xl gap-2 overflow-x-auto px-6 pb-2",children:Z.map(s=>e.jsx("button",{onClick:()=>{var t;k(s),(t=d.current)==null||t.scrollIntoView({behavior:"smooth"})},className:`flex-shrink-0 rounded-full px-4 py-2 text-sm font-semibold transition-colors ${b===s?"bg-primary-600 text-white shadow":"border border-gray-300 bg-white text-gray-700 hover:bg-gray-100"}`,children:s},s))})}),e.jsx("section",{ref:d,className:"bg-gray-50 px-6 py-8 scroll-mt-36",children:e.jsx("div",{className:"container mx-auto max-w-7xl",children:T?e.jsx("div",{className:"grid grid-cols-2 gap-4 sm:gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:Array.from({length:8}).map((s,t)=>e.jsx(le,{},t))}):R?e.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg border border-red-200 bg-red-50 py-20 text-center text-red-700",children:[e.jsx(ae,{className:"h-16 w-16"}),e.jsx("h3",{className:"mt-4 text-xl font-semibold",children:"Oops! Something went wrong."}),e.jsx("p",{className:"mt-2",children:R})]}):$.length>0?e.jsx(K.div,{className:"grid grid-cols-2 gap-4 sm:gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",variants:xe,initial:"hidden",animate:"visible",children:$.map(s=>e.jsx(K.div,{variants:be,layout:!0,className:"flex",children:e.jsx(fe,{product:s,onAddToCart:H,onProductClick:(t,a)=>{f(t),S(a),i(!0)},isLoggedIn:!!N})},s.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx(U,{className:"h-24 w-24 text-gray-300"}),e.jsx("h3",{className:"mt-4 text-xl font-semibold text-gray-800",children:"No products found"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Try adjusting your filters or search query."})]})})})]}),e.jsx(re,{}),g&&c&&e.jsx(oe,{product:g,selectedSize:c,isOpen:I,onClose:()=>i(!1),onConfirm:Q,initialQuantity:D})]})};export{ke as default};
