import{c as z,j as e,B as _,O as se,r as d,n as B,C as O,U as ae,P as Ne,k as X,X as ve,l as $,p as re,o as Ie,m as Fe,u as ke,T as Re,N as ne,Q as ce,V as K,W as Z,d as le,h as ee,y as qe,x as Ae,z as de,s as He,E as $e,H as We,F as Le}from"./index-C0udEWay.js";import{B as v}from"./Button-BXzODrPk.js";import{C as U}from"./coffee-7CoYvDIa.js";import{S as Pe}from"./star-ZPQWvlRV.js";import{C as Se}from"./calendar-BtVMbegy.js";import{g as J,t as M,c as q,a as me,m as Ue,b as Ce,e as _e,f as Ge}from"./formatDistanceToNow-Cc_IrjW0.js";import{S as Oe}from"./save-mO5sKEHb.js";import{S as ie}from"./shopping-bag-DNX2AFCT.js";import{R as ze}from"./refresh-cw-B8MNKcRS.js";import{I as te}from"./Input-Bci5edJs.js";import{B as Be}from"./bell-CleamuHC.js";import{S as ue}from"./StarRating-BY08rlXr.js";import{M as Me}from"./message-square-BXYaspwu.js";import{T as Qe}from"./thumbs-up-CBVpCa0Q.js";import{S as Xe}from"./send-VTSY_lbQ.js";import{S as Ve}from"./settings-BKXbGt_m.js";import{S as Je}from"./square-pen-D2Bns6fg.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Ze=z("camera",Ke);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],tt=z("circle-dollar-sign",et);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],at=z("key",st);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],nt=z("palette",rt);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],he=z("upload",it);function G(t,s){var x,f,j,c;const a=J(),r=(s==null?void 0:s.weekStartsOn)??((f=(x=s==null?void 0:s.locale)==null?void 0:x.options)==null?void 0:f.weekStartsOn)??a.weekStartsOn??((c=(j=a.locale)==null?void 0:j.options)==null?void 0:c.weekStartsOn)??0,n=M(t),i=n.getDay(),u=(i<r?7:0)+i-r;return n.setDate(n.getDate()-u),n.setHours(0,0,0,0),n}function V(t){return G(t,{weekStartsOn:1})}function Te(t){const s=M(t),a=s.getFullYear(),r=q(t,0);r.setFullYear(a+1,0,4),r.setHours(0,0,0,0);const n=V(r),i=q(t,0);i.setFullYear(a,0,4),i.setHours(0,0,0,0);const u=V(i);return s.getTime()>=n.getTime()?a+1:s.getTime()>=u.getTime()?a:a-1}function xe(t){const s=M(t);return s.setHours(0,0,0,0),s}function ot(t,s){const a=xe(t),r=xe(s),n=+a-me(a),i=+r-me(r);return Math.round((n-i)/Ue)}function ct(t){const s=Te(t),a=q(t,0);return a.setFullYear(s,0,4),a.setHours(0,0,0,0),V(a)}function lt(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function dt(t){if(!lt(t)&&typeof t!="number")return!1;const s=M(t);return!isNaN(Number(s))}function mt(t){const s=M(t),a=q(t,0);return a.setFullYear(s.getFullYear(),0,1),a.setHours(0,0,0,0),a}function ut(t){const s=M(t);return ot(s,mt(s))+1}function ht(t){const s=M(t),a=+V(s)-+ct(s);return Math.round(a/Ce)+1}function Ee(t,s){var c,g,h,m;const a=M(t),r=a.getFullYear(),n=J(),i=(s==null?void 0:s.firstWeekContainsDate)??((g=(c=s==null?void 0:s.locale)==null?void 0:c.options)==null?void 0:g.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,u=q(t,0);u.setFullYear(r+1,0,i),u.setHours(0,0,0,0);const x=G(u,s),f=q(t,0);f.setFullYear(r,0,i),f.setHours(0,0,0,0);const j=G(f,s);return a.getTime()>=x.getTime()?r+1:a.getTime()>=j.getTime()?r:r-1}function xt(t,s){var x,f,j,c;const a=J(),r=(s==null?void 0:s.firstWeekContainsDate)??((f=(x=s==null?void 0:s.locale)==null?void 0:x.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((c=(j=a.locale)==null?void 0:j.options)==null?void 0:c.firstWeekContainsDate)??1,n=Ee(t,s),i=q(t,0);return i.setFullYear(n,0,r),i.setHours(0,0,0,0),G(i,s)}function ft(t,s){const a=M(t),r=+G(a,s)-+xt(a,s);return Math.round(r/Ce)+1}function b(t,s){const a=t<0?"-":"",r=Math.abs(t).toString().padStart(s,"0");return a+r}const I={y(t,s){const a=t.getFullYear(),r=a>0?a:1-a;return b(s==="yy"?r%100:r,s.length)},M(t,s){const a=t.getMonth();return s==="M"?String(a+1):b(a+1,2)},d(t,s){return b(t.getDate(),s.length)},a(t,s){const a=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(t,s){return b(t.getHours()%12||12,s.length)},H(t,s){return b(t.getHours(),s.length)},m(t,s){return b(t.getMinutes(),s.length)},s(t,s){return b(t.getSeconds(),s.length)},S(t,s){const a=s.length,r=t.getMilliseconds(),n=Math.trunc(r*Math.pow(10,a-3));return b(n,s.length)}},H={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},fe={G:function(t,s,a){const r=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"});case"GGGGG":return a.era(r,{width:"narrow"});case"GGGG":default:return a.era(r,{width:"wide"})}},y:function(t,s,a){if(s==="yo"){const r=t.getFullYear(),n=r>0?r:1-r;return a.ordinalNumber(n,{unit:"year"})}return I.y(t,s)},Y:function(t,s,a,r){const n=Ee(t,r),i=n>0?n:1-n;if(s==="YY"){const u=i%100;return b(u,2)}return s==="Yo"?a.ordinalNumber(i,{unit:"year"}):b(i,s.length)},R:function(t,s){const a=Te(t);return b(a,s.length)},u:function(t,s){const a=t.getFullYear();return b(a,s.length)},Q:function(t,s,a){const r=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(r);case"QQ":return b(r,2);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,s,a){const r=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(r);case"qq":return b(r,2);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,s,a){const r=t.getMonth();switch(s){case"M":case"MM":return I.M(t,s);case"Mo":return a.ordinalNumber(r+1,{unit:"month"});case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(r,{width:"wide",context:"formatting"})}},L:function(t,s,a){const r=t.getMonth();switch(s){case"L":return String(r+1);case"LL":return b(r+1,2);case"Lo":return a.ordinalNumber(r+1,{unit:"month"});case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(r,{width:"wide",context:"standalone"})}},w:function(t,s,a,r){const n=ft(t,r);return s==="wo"?a.ordinalNumber(n,{unit:"week"}):b(n,s.length)},I:function(t,s,a){const r=ht(t);return s==="Io"?a.ordinalNumber(r,{unit:"week"}):b(r,s.length)},d:function(t,s,a){return s==="do"?a.ordinalNumber(t.getDate(),{unit:"date"}):I.d(t,s)},D:function(t,s,a){const r=ut(t);return s==="Do"?a.ordinalNumber(r,{unit:"dayOfYear"}):b(r,s.length)},E:function(t,s,a){const r=t.getDay();switch(s){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"});case"EEEE":default:return a.day(r,{width:"wide",context:"formatting"})}},e:function(t,s,a,r){const n=t.getDay(),i=(n-r.weekStartsOn+8)%7||7;switch(s){case"e":return String(i);case"ee":return b(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(n,{width:"short",context:"formatting"});case"eeee":default:return a.day(n,{width:"wide",context:"formatting"})}},c:function(t,s,a,r){const n=t.getDay(),i=(n-r.weekStartsOn+8)%7||7;switch(s){case"c":return String(i);case"cc":return b(i,s.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(n,{width:"narrow",context:"standalone"});case"cccccc":return a.day(n,{width:"short",context:"standalone"});case"cccc":default:return a.day(n,{width:"wide",context:"standalone"})}},i:function(t,s,a){const r=t.getDay(),n=r===0?7:r;switch(s){case"i":return String(n);case"ii":return b(n,s.length);case"io":return a.ordinalNumber(n,{unit:"day"});case"iii":return a.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(r,{width:"short",context:"formatting"});case"iiii":default:return a.day(r,{width:"wide",context:"formatting"})}},a:function(t,s,a){const n=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,s,a){const r=t.getHours();let n;switch(r===12?n=H.noon:r===0?n=H.midnight:n=r/12>=1?"pm":"am",s){case"b":case"bb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,s,a){const r=t.getHours();let n;switch(r>=17?n=H.evening:r>=12?n=H.afternoon:r>=4?n=H.morning:n=H.night,s){case"B":case"BB":case"BBB":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,s,a){if(s==="ho"){let r=t.getHours()%12;return r===0&&(r=12),a.ordinalNumber(r,{unit:"hour"})}return I.h(t,s)},H:function(t,s,a){return s==="Ho"?a.ordinalNumber(t.getHours(),{unit:"hour"}):I.H(t,s)},K:function(t,s,a){const r=t.getHours()%12;return s==="Ko"?a.ordinalNumber(r,{unit:"hour"}):b(r,s.length)},k:function(t,s,a){let r=t.getHours();return r===0&&(r=24),s==="ko"?a.ordinalNumber(r,{unit:"hour"}):b(r,s.length)},m:function(t,s,a){return s==="mo"?a.ordinalNumber(t.getMinutes(),{unit:"minute"}):I.m(t,s)},s:function(t,s,a){return s==="so"?a.ordinalNumber(t.getSeconds(),{unit:"second"}):I.s(t,s)},S:function(t,s){return I.S(t,s)},X:function(t,s,a){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(s){case"X":return pe(r);case"XXXX":case"XX":return R(r);case"XXXXX":case"XXX":default:return R(r,":")}},x:function(t,s,a){const r=t.getTimezoneOffset();switch(s){case"x":return pe(r);case"xxxx":case"xx":return R(r);case"xxxxx":case"xxx":default:return R(r,":")}},O:function(t,s,a){const r=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+ge(r,":");case"OOOO":default:return"GMT"+R(r,":")}},z:function(t,s,a){const r=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+ge(r,":");case"zzzz":default:return"GMT"+R(r,":")}},t:function(t,s,a){const r=Math.trunc(t.getTime()/1e3);return b(r,s.length)},T:function(t,s,a){const r=t.getTime();return b(r,s.length)}};function ge(t,s=""){const a=t>0?"-":"+",r=Math.abs(t),n=Math.trunc(r/60),i=r%60;return i===0?a+String(n):a+String(n)+s+b(i,2)}function pe(t,s){return t%60===0?(t>0?"-":"+")+b(Math.abs(t)/60,2):R(t,s)}function R(t,s=""){const a=t>0?"-":"+",r=Math.abs(t),n=b(Math.trunc(r/60),2),i=b(r%60,2);return a+n+s+i}const ye=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},De=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},gt=(t,s)=>{const a=t.match(/(P+)(p+)?/)||[],r=a[1],n=a[2];if(!n)return ye(t,s);let i;switch(r){case"P":i=s.dateTime({width:"short"});break;case"PP":i=s.dateTime({width:"medium"});break;case"PPP":i=s.dateTime({width:"long"});break;case"PPPP":default:i=s.dateTime({width:"full"});break}return i.replace("{{date}}",ye(r,s)).replace("{{time}}",De(n,s))},pt={p:De,P:gt},yt=/^D+$/,bt=/^Y+$/,wt=["D","DD","YY","YYYY"];function jt(t){return yt.test(t)}function Nt(t){return bt.test(t)}function vt(t,s,a){const r=kt(t,s,a);if(console.warn(r),wt.includes(t))throw new RangeError(r)}function kt(t,s,a){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${r} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Pt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,St=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ct=/^'([^]*?)'?$/,Ot=/''/g,Mt=/[a-zA-Z]/;function oe(t,s,a){var c,g,h,m;const r=J(),n=r.locale??_e,i=r.firstWeekContainsDate??((g=(c=r.locale)==null?void 0:c.options)==null?void 0:g.firstWeekContainsDate)??1,u=r.weekStartsOn??((m=(h=r.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??0,x=M(t);if(!dt(x))throw new RangeError("Invalid time value");let f=s.match(St).map(w=>{const o=w[0];if(o==="p"||o==="P"){const k=pt[o];return k(w,n.formatLong)}return w}).join("").match(Pt).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const o=w[0];if(o==="'")return{isToken:!1,value:Tt(w)};if(fe[o])return{isToken:!0,value:w};if(o.match(Mt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+o+"`");return{isToken:!1,value:w}});n.localize.preprocessor&&(f=n.localize.preprocessor(x,f));const j={firstWeekContainsDate:i,weekStartsOn:u,locale:n};return f.map(w=>{if(!w.isToken)return w.value;const o=w.value;(Nt(o)||jt(o))&&vt(o,s,String(t));const k=fe[o[0]];return k(x,o,n.localize,j)}).join("")}function Tt(t){const s=t.match(Ct);return s?s[1].replace(Ot,"'"):t}const Et=({user:t,onEditPhoto:s})=>{const a=(n,i)=>`${n.charAt(0)}${i.charAt(0)}`.toUpperCase(),r=n=>n==="admin"?"Admin":n==="employee"?"Employee":n==="customer"?"Customer":"";return e.jsxs("div",{className:"w-full bg-white shadow-sm",children:[e.jsx("div",{className:"relative h-48 w-full overflow-hidden bg-gradient-to-r from-coffee-600 via-coffee-500 to-primary-600",children:e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"24px 24px"}})}),e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"relative -mt-16 mb-6 flex flex-col items-center",children:[e.jsxs("div",{className:"relative h-32 w-32 transition-transform hover:scale-105",children:[t.photoURL?e.jsx("img",{src:t.photoURL,alt:`${t.firstName} ${t.lastName}`,className:"h-full w-full rounded-full border-4 border-white object-cover shadow-xl"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center rounded-full border-4 border-white bg-gradient-to-br from-primary-400 to-primary-600 text-white shadow-xl",children:e.jsx("span",{className:"font-display text-4xl font-bold",children:a(t.firstName,t.lastName)})}),e.jsx("button",{onClick:s,className:"absolute bottom-1 right-1 flex h-9 w-9 items-center justify-center rounded-full bg-white text-gray-600 shadow-lg transition-all hover:bg-primary-50 hover:text-primary-600","aria-label":"Edit profile photo",children:e.jsx(Ze,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsxs("h1",{className:"font-display text-3xl font-bold text-gray-900",children:[t.firstName," ",t.lastName]}),e.jsx("p",{className:"text-gray-500 font-medium",children:t.email}),e.jsxs("div",{className:"mt-3 flex flex-wrap justify-center gap-2",children:[t.role&&e.jsxs(_,{className:"bg-blue-50 text-blue-700 border border-blue-100 px-3 py-1",children:[e.jsx(se,{className:"mr-1.5 h-3.5 w-3.5"}),e.jsx("span",{children:r(t.role)})]}),e.jsx(_,{className:`px-3 py-1 border ${t.tier==="gold"?"bg-yellow-50 text-yellow-700 border-yellow-200":t.tier==="silver"?"bg-gray-50 text-gray-700 border-gray-200":"bg-orange-50 text-orange-800 border-orange-200"}`,children:e.jsxs("span",{className:"capitalize font-semibold",children:[t.tier," Member"]})})]})]})]})}),e.jsx("div",{className:"border-t border-gray-100 bg-gray-50/50",children:e.jsxs("div",{className:"container mx-auto grid grid-cols-2 gap-4 px-6 py-6 sm:grid-cols-4",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center border-r border-gray-200 last:border-0 sm:border-r",children:[e.jsx("div",{className:"mb-2 flex h-10 w-10 items-center justify-center rounded-full bg-orange-100 text-orange-600",children:e.jsx(U,{className:"h-5 w-5"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalOrders}),e.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-gray-500",children:"Orders"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center border-r border-gray-200 last:border-0 sm:border-r",children:[e.jsx("div",{className:"mb-2 flex h-10 w-10 items-center justify-center rounded-full bg-green-100 text-green-600",children:e.jsx(tt,{className:"h-5 w-5"})}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₱",t.totalSpent.toLocaleString()]}),e.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-gray-500",children:"Spent"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center border-r border-gray-200 last:border-0 sm:border-r",children:[e.jsx("div",{className:"mb-2 flex h-10 w-10 items-center justify-center rounded-full bg-yellow-100 text-yellow-600",children:e.jsx(Pe,{className:"h-5 w-5"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.currentPoints}),e.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-gray-500",children:"Points"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"mb-2 flex h-10 w-10 items-center justify-center rounded-full bg-blue-100 text-blue-600",children:e.jsx(Se,{className:"h-5 w-5"})}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:oe(t.createdAt,"MMM yyyy")}),e.jsx("p",{className:"text-xs font-medium uppercase tracking-wide text-gray-500",children:"Joined"})]})]})})]})},Dt=({user:t,onSave:s,onCancel:a})=>{const[r,n]=d.useState({firstName:t.firstName,lastName:t.lastName,phone:t.phone||""}),[i,u]=d.useState({}),[x,f]=d.useState(!1),[j,c]=d.useState(!1),{showToast:g}=B();d.useEffect(()=>{const o=r.firstName!==t.firstName||r.lastName!==t.lastName||r.phone!==(t.phone||"");c(o)},[r,t]);const h=()=>{const o={};return r.firstName.length<2&&(o.firstName="First name must be at least 2 characters."),r.lastName.length<2&&(o.lastName="Last name must be at least 2 characters."),r.phone&&!/^(09|\+639)\d{9}$/.test(r.phone)&&(o.phone="Invalid Philippine phone number format."),u(o),Object.keys(o).length===0},m=o=>{n({...r,[o.target.name]:o.target.value})},w=o=>{o.preventDefault(),h()&&(f(!0),setTimeout(()=>{s(r),f(!1),g("Profile updated successfully!")},1e3))};return e.jsxs(O,{className:"w-full",children:[e.jsx("h2",{className:"mb-4 font-display text-xl font-bold text-coffee-900",children:"Edit Profile Information"}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",name:"firstName",id:"firstName",value:r.firstName,onChange:m,className:"w-full rounded-md border-gray-300 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500",required:!0})]}),i.firstName&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:i.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last Name"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",name:"lastName",id:"lastName",value:r.lastName,onChange:m,className:"w-full rounded-md border-gray-300 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500",required:!0})]}),i.lastName&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:i.lastName})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(Ne,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"tel",name:"phone",id:"phone",value:r.phone,onChange:m,className:"w-full rounded-md border-gray-300 pl-10 shadow-sm focus:border-primary-500 focus:ring-primary-500"})]}),i.phone&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:i.phone})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(X,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"email",name:"email",id:"email",value:t.email||"",className:"w-full rounded-md border-gray-300 bg-gray-100 pl-10 text-gray-500 shadow-sm",disabled:!0,readOnly:!0})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Contact support to change your email address."})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-gray-200 pt-4",children:[e.jsxs(v,{type:"button",variant:"ghost",onClick:a,children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),"Cancel"]}),e.jsxs(v,{type:"submit",variant:"primary",disabled:!j||x,children:[x?e.jsx($,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Oe,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]})]})},be={completed:{icon:Ie,color:"bg-green-100 text-green-800"},cancelled:{icon:ve,color:"bg-red-100 text-red-800"},preparing:{icon:U,color:"bg-blue-100 text-blue-800"},waiting:{icon:U,color:"bg-yellow-100 text-yellow-800"},ready:{icon:U,color:"bg-purple-100 text-purple-800"}},Yt={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},It={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},Ft=({order:t})=>{var f,j;const s=((f=be[t.status])==null?void 0:f.icon)||U,a=((j=be[t.status])==null?void 0:j.color)||"bg-gray-100 text-gray-800",{addMultipleToCart:r,showToast:n}=B(),{products:i}=Fe(),u=()=>{const c=[],g=[];for(const h of t.orderItems){const m=i.find(N=>N.id===h.productId);if(!m||!m.available||m.stock===0){g.push(h.productName);continue}const w=h.productName.match(/\((Grande|Venti)\)$/),o=w?w[1]:null;if(!o){g.push(h.productName);continue}const k=m.sizes.find(N=>N.name===o);if(!k){g.push(h.productName);continue}c.push({product:m,selectedSize:k,quantity:h.quantity,customizations:h.customizations})}c.length>0&&r(c),g.length>0&&n(`Could not add: ${g.join(", ")}. They may be unavailable.`)},x=()=>{const c=t.orderItems;return c.length<=2?c.map(h=>`${h.quantity}x ${h.productName}`).join(", "):`${c.slice(0,2).map(h=>h.productName).join(", ")}, and ${c.length-2} more item(s)`};return e.jsx(O,{hover:!0,className:"transition-shadow duration-300",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-mono text-sm font-semibold text-primary-700",children:t.orderNumber}),e.jsxs(_,{className:`capitalize ${a}`,children:[e.jsx(s,{className:"mr-1 h-3 w-3"}),t.status]})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:oe(t.timestamp,"MMM dd, yyyy • hh:mm a")}),e.jsx("p",{className:"mt-2 text-sm text-gray-700",children:x()}),t.status==="cancelled"&&t.cancellationReason&&e.jsxs("div",{className:"mt-2 rounded-md bg-red-50 p-2 text-sm text-red-700 border border-red-100",children:[e.jsx("span",{className:"font-semibold",children:"Reason:"})," ",t.cancellationReason]})]}),e.jsxs("div",{className:"flex-shrink-0 text-right sm:ml-4",children:[e.jsxs("p",{className:"font-display text-2xl font-bold text-coffee-900",children:["₱",t.totalAmount.toFixed(2)]}),e.jsxs(v,{size:"sm",variant:"secondary",className:"mt-2",onClick:u,children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),"Reorder"]})]})]})})},we=({orders:t,limit:s,showViewAll:a,onViewAll:r})=>{const n=[...t].sort((u,x)=>x.timestamp.getTime()-u.timestamp.getTime()),i=s?n.slice(0,s):n;return t.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx(ie,{className:"mx-auto h-16 w-16 text-gray-300"}),e.jsx("h3",{className:"mt-4 text-xl font-semibold text-gray-800",children:"No Orders Yet"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Your past orders will appear here."}),e.jsx(v,{size:"lg",className:"mt-6",children:"Browse Menu"})]}):e.jsxs("div",{children:[e.jsx(re.div,{className:"space-y-4",variants:Yt,initial:"hidden",animate:"visible",children:i.map(u=>e.jsx(re.div,{variants:It,layout:!0,children:e.jsx(Ft,{order:u})},u.id))}),a&&n.length>(s||0)&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx(v,{variant:"ghost",onClick:r,children:"View All Orders"})})]})},L=({label:t,description:s,enabled:a,onChange:r,Icon:n})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(n,{className:"h-5 w-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-800",children:t}),e.jsx("p",{className:"text-sm text-gray-500",children:s})]})]}),e.jsx("button",{type:"button",className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 ${a?"bg-primary-600":"bg-gray-200"}`,role:"switch","aria-checked":a,onClick:()=>r(!a),children:e.jsx("span",{"aria-hidden":"true",className:`inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${a?"translate-x-5":"translate-x-0"}`})})]}),Rt=({preferences:t,onUpdatePreferences:s})=>{const[a,r]=d.useState(t),[n,i]=d.useState(!1),[u,x]=d.useState(!1),{showToast:f}=B(),{updateUserPassword:j}=ke(),c=(l,C,E)=>{const Q={...a,[l]:{...a[l],[C]:E}};r(Q),s({[l]:Q[l]}),f("Preferences updated!")},[g,h]=d.useState({current:"",new:"",confirm:""}),[m,w]=d.useState({current:!1,new:!1,confirm:!1}),[o,k]=d.useState(!1),[N,P]=d.useState(null),[W,A]=d.useState({password:"",checkbox:!1}),[p,S]=d.useState(!1),F=l=>{h({...g,[l.target.name]:l.target.value}),P(null)},T=l=>{w({...m,[l]:!m[l]})},Y=async l=>{if(l.preventDefault(),P(null),g.new!==g.confirm){P("New passwords do not match.");return}if(g.new.length<6){P("Password must be at least 6 characters.");return}k(!0);try{await j(g.current,g.new),f("Password updated successfully!"),i(!1),h({current:"",new:"",confirm:""})}catch(C){console.error("Error updating password:",C),C.code==="auth/wrong-password"?P("Incorrect current password."):P("Failed to update password. Please try again.")}finally{k(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(O,{children:[e.jsx("h2",{className:"mb-4 font-display text-2xl font-bold text-coffee-900",children:"Preferences & Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-500",children:"Notifications"}),e.jsx(L,{Icon:Be,label:"Push Notifications",description:"Get notified when order is ready",enabled:a.notifications.push,onChange:l=>c("notifications","push",l)}),e.jsx(L,{Icon:X,label:"Email Updates",description:"Receive order updates via email",enabled:a.notifications.emailUpdates,onChange:l=>c("notifications","emailUpdates",l)}),e.jsx(L,{Icon:X,label:"Marketing Emails",description:"Get news and promotions",enabled:a.notifications.marketing,onChange:l=>c("notifications","marketing",l)})]}),e.jsx("hr",{className:"my-6"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(nt,{className:"h-5 w-5 text-gray-500"}),e.jsx("h3",{className:"font-semibold text-gray-800",children:"Appearance"})]}),e.jsx("div",{className:"flex gap-2 rounded-full bg-gray-100 p-1",children:["light","dark","auto"].map(l=>e.jsx("button",{onClick:()=>c("theme","theme",l),className:`w-full rounded-full py-1.5 text-sm font-semibold capitalize transition-colors ${a.theme===l?"bg-primary-600 text-white shadow":"text-gray-600 hover:bg-primary-50"}`,children:l},l))})]}),e.jsx("hr",{className:"my-6"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-500",children:"Privacy"}),e.jsx(L,{Icon:se,label:"Share anonymous usage data",description:"Help us improve our services",enabled:a.privacy.shareUsageData,onChange:l=>c("privacy","shareUsageData",l)}),e.jsx(L,{Icon:se,label:"Personalized recommendations",description:"Get recommendations based on your activity",enabled:a.privacy.personalizedRecs,onChange:l=>c("privacy","personalizedRecs",l)})]})]}),e.jsxs(O,{className:"mt-6 border-l-4 border-red-500",children:[e.jsx("h2",{className:"mb-4 font-display text-xl font-bold text-red-700",children:"Account Management"}),e.jsxs("div",{className:"flex flex-col items-start gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Change Password"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Update your password for better security."})]}),e.jsxs(v,{variant:"secondary",onClick:()=>i(!0),children:[e.jsx(at,{className:"mr-2 h-4 w-4"}),"Change Password"]})]}),e.jsx("hr",{className:"my-4"}),e.jsxs("div",{className:"flex flex-col items-start gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Permanently delete your account and all data."})]}),e.jsxs(v,{variant:"danger",onClick:()=>x(!0),children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Delete Account"]})]})]}),e.jsx(ne,{isOpen:n,onClose:()=>i(!1),title:"Change Password",children:e.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[N&&e.jsxs("div",{className:"p-3 bg-red-50 text-red-600 text-sm rounded-lg flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4"}),N]}),e.jsx(te,{label:"Current Password",type:m.current?"text":"password",name:"current",value:g.current,onChange:F,required:!0,endIcon:e.jsx("button",{type:"button",onClick:()=>T("current"),className:"text-gray-900 hover:text-gray-700 cursor-pointer",children:m.current?e.jsx(K,{className:"h-4 w-4"}):e.jsx(Z,{className:"h-4 w-4"})})}),e.jsx(te,{label:"New Password",type:m.new?"text":"password",name:"new",value:g.new,onChange:F,required:!0,endIcon:e.jsx("button",{type:"button",onClick:()=>T("new"),className:"text-gray-900 hover:text-gray-700 cursor-pointer",children:m.new?e.jsx(K,{className:"h-4 w-4"}):e.jsx(Z,{className:"h-4 w-4"})})}),e.jsx(te,{label:"Confirm New Password",type:m.confirm?"text":"password",name:"confirm",value:g.confirm,onChange:F,required:!0,endIcon:e.jsx("button",{type:"button",onClick:()=>T("confirm"),className:"text-gray-900 hover:text-gray-700 cursor-pointer",children:m.confirm?e.jsx(K,{className:"h-4 w-4"}):e.jsx(Z,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(v,{type:"button",variant:"ghost",onClick:()=>i(!1),children:"Cancel"}),e.jsxs(v,{type:"submit",disabled:o,children:[o?e.jsx($,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Oe,{className:"mr-2 h-4 w-4"}),"Update Password"]})]})]})}),e.jsx(ne,{isOpen:u,onClose:()=>x(!1),title:"Delete Account",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-red-100",children:e.jsx(ce,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Are you absolutely sure?"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"This action cannot be undone. This will permanently delete your account, orders, and rewards."}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Account deletion functionality is coming soon."})]})})]})},qt=({user:t})=>{const[s,a]=d.useState("feedback"),[r,n]=d.useState(0),[i,u]=d.useState("food"),[x,f]=d.useState(""),[j,c]=d.useState(!1),[g,h]=d.useState([]),[m,w]=d.useState(!0),[o,k]=d.useState(null),{showToast:N}=B();d.useEffect(()=>{if(!t)return;const S=le.collection("feedback").where("userId","==",t.uid).onSnapshot(F=>{const T=[];F.forEach(Y=>{var C,E;const l=Y.data();T.push({id:Y.id,...l,createdAt:(C=l.createdAt)==null?void 0:C.toDate(),updatedAt:(E=l.updatedAt)==null?void 0:E.toDate()})}),T.sort((Y,l)=>{var C,E;return(((C=l.createdAt)==null?void 0:C.getTime())||0)-(((E=Y.createdAt)==null?void 0:E.getTime())||0)}),h(T),w(!1)});return()=>S()},[t]);const P=p=>{a(p),f(""),p==="issue"?(n(0),u("system")):(n(0),u("food"))},W=async p=>{if(p.preventDefault(),s==="feedback"&&r===0){N("Please provide a rating.");return}if(x.trim().length<10){N("Please provide a description (at least 10 characters).");return}c(!0);try{await le.collection("feedback").add({userId:t.uid,rating:s==="issue"?0:r,category:i,comment:x,status:"pending",createdAt:de.firestore.FieldValue.serverTimestamp(),updatedAt:de.firestore.FieldValue.serverTimestamp(),type:s}),N(s==="issue"?"Issue reported successfully!":"Feedback submitted successfully!"),n(0),f(""),s==="feedback"&&u("food")}catch(S){console.error("Error submitting feedback: ",S),N("Failed to submit. Please try again.")}finally{c(!1)}},A={pending:"bg-yellow-100 text-yellow-800",published:"bg-blue-100 text-blue-800",resolved:"bg-green-100 text-green-800"};return e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(O,{children:[e.jsx("h2",{className:"mb-4 font-display text-2xl font-bold text-coffee-900",children:"Your History"}),m?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx($,{className:"h-8 w-8 animate-spin text-primary-600"})}):g.length>0?e.jsx("div",{className:"space-y-3",children:g.map(p=>e.jsxs("div",{className:"rounded-lg border border-gray-200",children:[e.jsxs("button",{onClick:()=>k(o===p.id?null:p.id),className:"flex w-full items-center justify-between p-4 text-left",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[p.rating>0?e.jsx(ue,{rating:p.rating,size:"sm",readonly:!0}):e.jsxs("div",{className:"flex items-center gap-1 text-xs font-bold text-red-600 bg-red-50 px-2 py-1 rounded-full",children:[e.jsx(ee,{className:"h-3 w-3"}),"Issue Report"]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("p",{className:"font-semibold text-gray-800 truncate",children:p.comment}),e.jsx("p",{className:"text-xs text-gray-500",children:p.createdAt?Ge(p.createdAt,{addSuffix:!0}):"Just now"})]})]}),e.jsx(qe,{className:`h-5 w-5 transform transition-transform ${o===p.id?"rotate-180":""}`})]}),e.jsx(Ae,{children:o===p.id&&e.jsx(re.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"border-t p-4",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx(_,{className:"capitalize bg-gray-100 text-gray-600",children:p.category}),e.jsx(_,{className:`capitalize ${A[p.status]}`,children:p.status})]}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:p.comment}),p.response&&e.jsxs("div",{className:"mt-4 rounded-md border-l-4 border-primary-400 bg-primary-50 p-3",children:[e.jsx("p",{className:"font-semibold text-primary-800",children:"Response from Rush Coffee:"}),e.jsxs("p",{className:"mt-1 text-sm text-primary-700 italic",children:['"',p.response,'"']})]})]})})})]},p.id))}):e.jsxs("div",{className:"py-10 text-center text-gray-500",children:[e.jsx(Me,{className:"mx-auto h-12 w-12 text-gray-300"}),e.jsx("p",{className:"mt-2 font-semibold",children:"No history found."}),e.jsx("p",{className:"text-sm",children:"Share your thoughts or report issues using the form!"})]})]})}),e.jsx("div",{children:e.jsxs(O,{children:[e.jsxs("div",{className:"flex p-1 mb-6 bg-gray-100 rounded-lg",children:[e.jsxs("button",{onClick:()=>P("feedback"),className:`flex-1 flex items-center justify-center gap-2 py-2 text-sm font-medium rounded-md transition-all ${s==="feedback"?"bg-white text-primary-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(Qe,{className:"h-4 w-4"}),"Give Feedback"]}),e.jsxs("button",{onClick:()=>P("issue"),className:`flex-1 flex items-center justify-center gap-2 py-2 text-sm font-medium rounded-md transition-all ${s==="issue"?"bg-white text-red-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(ee,{className:"h-4 w-4"}),"Report Issue"]})]}),e.jsx("h2",{className:"mb-4 font-display text-2xl font-bold text-coffee-900",children:s==="feedback"?"Share Your Experience":"Report a Problem"}),e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[s==="feedback"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Overall Rating"}),e.jsx(ue,{rating:r,onRatingChange:n})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category"}),e.jsxs("select",{id:"category",value:i,onChange:p=>u(p.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[e.jsx("option",{value:"food",children:"Food & Drinks"}),e.jsx("option",{value:"service",children:"Service"}),e.jsx("option",{value:"system",children:"App/Website"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700",children:s==="feedback"?"Comments":"Describe the issue"}),e.jsx("textarea",{id:"comment",value:x,onChange:p=>f(p.target.value),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:s==="feedback"?"Tell us more about your experience...":"Please describe the issue in detail..."})]}),e.jsxs(v,{type:"submit",disabled:j,className:`w-full ${s==="issue"?"bg-red-600 hover:bg-red-700":""}`,children:[j?e.jsx($,{className:"mr-2 h-4 w-4 animate-spin"}):s==="issue"?e.jsx(ee,{className:"mr-2 h-4 w-4"}):e.jsx(Xe,{className:"mr-2 h-4 w-4"}),j?"Submitting...":s==="issue"?"Report Issue":"Submit Feedback"]})]})]})})]})},je=()=>e.jsx(O,{className:"animate-pulse",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex-grow space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-4 w-1/3 rounded bg-gray-300"}),e.jsx("div",{className:"h-5 w-1/4 rounded-full bg-gray-300"})]}),e.jsx("div",{className:"h-3 w-1/4 rounded bg-gray-300"}),e.jsx("div",{className:"h-4 w-1/2 rounded bg-gray-300"})]}),e.jsxs("div",{className:"flex-shrink-0 space-y-2 text-right sm:ml-4",children:[e.jsx("div",{className:"h-8 w-24 rounded bg-gray-300 ml-auto"}),e.jsx("div",{className:"h-8 w-28 rounded-full bg-gray-300 ml-auto"})]})]})}),ts=()=>{const{currentUser:t,updateUserProfile:s,updateUserPhoto:a}=ke(),{orderHistory:r,isHistoryLoading:n}=He(),[i,u]=d.useState(null),[x,f]=d.useState("overview"),[j,c]=d.useState(!1),[g,h]=d.useState(!1),[m,w]=d.useState(null),[o,k]=d.useState(null),[N,P]=d.useState(!1),W=d.useRef(null),{showToast:A,addToCart:p}=B();d.useEffect(()=>{u(t)},[t]),d.useEffect(()=>{if(!m){k(null);return}const y=URL.createObjectURL(m);return k(y),()=>URL.revokeObjectURL(y)},[m]);const S=d.useMemo(()=>i?$e.find(y=>y.id==="cb-01"):null,[i]),F=y=>{i&&s&&(s(y),c(!1))},T=y=>{i&&u(D=>D?{...D,preferences:{...D.preferences,...y}}:null)},Y=y=>{if(y.target.files&&y.target.files[0]){if(y.target.files[0].size>2*1024*1024){A("File size should not exceed 2MB.");return}w(y.target.files[0])}},l=()=>{if(!m||!i||!a)return;P(!0);const y=new FileReader;y.readAsDataURL(m),y.onloadend=async()=>{const D=y.result;try{await a(D),P(!1),h(!1),w(null),A("Profile photo updated!")}catch(Ye){console.error("Error updating photo:",Ye),A("Failed to update photo."),P(!1)}}},C=()=>{S&&p(S,S.sizes[0])};if(!i)return e.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-50",children:e.jsx($,{className:"h-12 w-12 animate-spin text-primary-600"})});const E=[{id:"overview",label:"Overview",Icon:ae},{id:"orders",label:"Order History",Icon:ie},{id:"feedback",label:"My Feedback",Icon:Me},{id:"settings",label:"Settings",Icon:Ve}],Q=()=>{switch(x){case"orders":return n?e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((y,D)=>e.jsx(je,{},D))}):e.jsx(we,{orders:r});case"settings":return e.jsx(Rt,{preferences:i.preferences,onUpdatePreferences:T});case"feedback":return e.jsx(qt,{user:i});case"overview":default:return e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-8 lg:col-span-2",children:[j?e.jsx(Dt,{user:i,onSave:F,onCancel:()=>c(!1)}):e.jsxs(O,{className:"overflow-hidden border-none shadow-md transition-shadow hover:shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-4 mb-4",children:[e.jsx("h3",{className:"font-display text-xl font-bold text-gray-900",children:"Personal Information"}),e.jsxs(v,{variant:"ghost",size:"sm",onClick:()=>c(!0),className:"text-primary-600 hover:bg-primary-50",children:[e.jsx(Je,{className:"mr-2 h-4 w-4"})," Edit"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-xl bg-gray-50 hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-blue-100 text-blue-600",children:e.jsx(X,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:"Email Address"}),e.jsx("p",{className:"text-gray-900 font-medium",children:i.email})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-xl bg-gray-50 hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-purple-100 text-purple-600",children:e.jsx(Ne,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:"Phone Number"}),e.jsx("p",{className:"text-gray-900 font-medium",children:i.phone||"Not provided"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-xl bg-gray-50 hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-orange-100 text-orange-600",children:e.jsx(Se,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:"Member Since"}),e.jsx("p",{className:"text-gray-900 font-medium",children:oe(i.createdAt,"MMMM dd, yyyy")})]})]})]})]}),n?e.jsxs(O,{className:"border-none shadow-md",children:[e.jsx("h3",{className:"font-display text-xl font-bold text-gray-900 mb-4",children:"Recent Orders"}),e.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((y,D)=>e.jsx(je,{},D))})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-display text-xl font-bold text-gray-900",children:"Recent Orders"}),e.jsx(v,{variant:"link",onClick:()=>f("orders"),className:"text-primary-600",children:"View All"})]}),e.jsx(we,{orders:r,limit:3,showViewAll:!1})]})]}),e.jsxs("div",{className:"space-y-8 lg:col-span-1",children:[e.jsxs(O,{className:`border-none shadow-md text-white overflow-hidden relative ${i.tier==="gold"?"bg-gradient-to-br from-yellow-500 to-yellow-700":i.tier==="silver"?"bg-gradient-to-br from-gray-400 to-gray-600":"bg-gradient-to-br from-orange-400 to-orange-600"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 h-24 w-24 rounded-full bg-white opacity-10 blur-xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 -mb-4 -ml-4 h-24 w-24 rounded-full bg-black opacity-10 blur-xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/80 text-sm font-medium uppercase tracking-wider",children:"Current Tier"}),e.jsxs("h3",{className:"font-display text-2xl font-bold capitalize",children:[i.tier," Member"]})]}),e.jsx("div",{className:"h-12 w-12 rounded-full bg-white/20 flex items-center justify-center backdrop-blur-sm",children:e.jsx(Pe,{className:"h-6 w-6 text-white",fill:"currentColor"})})]}),e.jsxs("div",{className:"mb-2 flex justify-between items-end",children:[e.jsx("span",{className:"text-3xl font-bold",children:i.currentPoints}),e.jsx("span",{className:"text-sm text-white/80 mb-1",children:"points earned"})]}),e.jsx("div",{className:"w-full bg-black/20 rounded-full h-2 mb-4",children:e.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-500 shadow-[0_0_10px_rgba(255,255,255,0.5)]",style:{width:`${Math.min(i.currentPoints%1e3/10,100)}%`}})}),e.jsx("p",{className:"text-sm text-white/90",children:i.tier==="gold"?"You are at the highest tier! Enjoy your exclusive benefits.":`Earn ${1e3-i.currentPoints%1e3} more points to reach ${i.tier==="bronze"?"Silver":"Gold"} tier.`})]})]}),S&&e.jsxs(O,{className:"border-none shadow-md transition-shadow hover:shadow-lg overflow-hidden group",children:[e.jsx("h3",{className:"font-display text-xl font-bold text-gray-900 mb-4",children:"Your Favorite"}),e.jsxs("div",{className:"relative aspect-square w-full overflow-hidden rounded-xl mb-4",children:[e.jsx("img",{src:S.imageUrl,alt:S.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-110"}),e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex flex-col justify-end p-4",children:[e.jsx("p",{className:"font-bold text-white text-lg",children:S.name}),e.jsx("p",{className:"text-white/80 text-sm",children:S.category})]})]}),e.jsxs(v,{className:"w-full rounded-xl py-3 font-bold shadow-lg shadow-primary-600/20",onClick:C,children:["Order Again ",e.jsx(ie,{className:"ml-2 h-4 w-4"})]})]})]})]})}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(We,{}),e.jsxs("main",{children:[e.jsx(Et,{user:i,onEditPhoto:()=>h(!0)}),e.jsx("div",{className:"sticky top-16 z-30 border-b border-gray-200 bg-white/95 backdrop-blur-sm sm:top-20",children:e.jsx("div",{className:"container mx-auto max-w-7xl px-4 sm:px-6",children:e.jsx("nav",{className:"-mb-px flex space-x-6 overflow-x-auto py-4 no-scrollbar",children:E.map(y=>e.jsxs("button",{onClick:()=>f(y.id),className:`group inline-flex shrink-0 items-center gap-2 rounded-full px-4 py-2 text-sm font-medium transition-all ${x===y.id?"bg-primary-600 text-white shadow-md":"bg-transparent text-gray-500 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(y.Icon,{className:`h-4 w-4 ${x===y.id?"text-white":"text-gray-400 group-hover:text-gray-600"}`}),y.label]},y.id))})})}),e.jsx("div",{className:"container mx-auto max-w-7xl p-6",children:Q()})]}),e.jsx(Le,{}),e.jsx(ne,{isOpen:g,onClose:()=>h(!1),title:"Upload New Photo",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"file",ref:W,onChange:Y,accept:"image/*",className:"hidden"}),e.jsx("div",{className:"flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-6 text-center transition hover:bg-gray-100",onClick:()=>{var y;return(y=W.current)==null?void 0:y.click()},children:o?e.jsx("img",{src:o,alt:"Preview",className:"h-32 w-32 rounded-full object-cover"}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-12 w-12 text-gray-400"}),e.jsx("span",{className:"mt-2 block text-sm font-semibold text-gray-600",children:"Click to upload"}),e.jsx("span",{className:"mt-1 block text-xs text-gray-500",children:"PNG or JPG (MAX. 2MB)"})]})}),N&&e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-primary-600 h-2.5 rounded-full animate-pulse",style:{width:"100%"}})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(v,{variant:"ghost",onClick:()=>h(!1),children:"Cancel"}),e.jsxs(v,{onClick:l,disabled:!m||N,children:[N?e.jsx($,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(he,{className:"mr-2 h-4 w-4"}),"Upload Photo"]})]})]})})]})};export{ts as default};
